(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function $_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Gm={exports:{}},_c={};var Cb;function BT(){if(Cb)return _c;Cb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:h,ref:l!==void 0?l:null,props:u}}return _c.Fragment=e,_c.jsx=n,_c.jsxs=n,_c}var Ib;function zT(){return Ib||(Ib=1,Gm.exports=BT()),Gm.exports}var o=zT(),Ym={exports:{}},Qe={};var kb;function qT(){if(kb)return Qe;kb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function C(P){return P===null||typeof P!="object"?null:(P=N&&P[N]||P["@@iterator"],typeof P=="function"?P:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,O={};function L(P,se,ce){this.props=P,this.context=se,this.refs=O,this.updater=ce||G}L.prototype.isReactComponent={},L.prototype.setState=function(P,se){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,se,"setState")},L.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function H(){}H.prototype=L.prototype;function K(P,se,ce){this.props=P,this.context=se,this.refs=O,this.updater=ce||G}var fe=K.prototype=new H;fe.constructor=K,z(fe,L.prototype),fe.isPureReactComponent=!0;var pe=Array.isArray;function le(){}var S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(P,se,ce){var ge=ce.ref;return{$$typeof:s,type:P,key:se,ref:ge!==void 0?ge:null,props:ce}}function V(P,se){return R(P.type,se,P.props)}function k(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function U(P){var se={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ce){return se[ce]})}var I=/\/+/g;function q(P,se){return typeof P=="object"&&P!==null&&P.key!=null?U(""+P.key):se.toString(36)}function ne(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(le,le):(P.status="pending",P.then(function(se){P.status==="pending"&&(P.status="fulfilled",P.value=se)},function(se){P.status==="pending"&&(P.status="rejected",P.reason=se)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function M(P,se,ce,ge,xe){var je=typeof P;(je==="undefined"||je==="boolean")&&(P=null);var ie=!1;if(P===null)ie=!0;else switch(je){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(P.$$typeof){case s:case e:ie=!0;break;case b:return ie=P._init,M(ie(P._payload),se,ce,ge,xe)}}if(ie)return xe=xe(P),ie=ge===""?"."+q(P,0):ge,pe(xe)?(ce="",ie!=null&&(ce=ie.replace(I,"$&/")+"/"),M(xe,se,ce,"",function($e){return $e})):xe!=null&&(k(xe)&&(xe=V(xe,ce+(xe.key==null||P&&P.key===xe.key?"":(""+xe.key).replace(I,"$&/")+"/")+ie)),se.push(xe)),1;ie=0;var Ve=ge===""?".":ge+":";if(pe(P))for(var Ie=0;Ie<P.length;Ie++)ge=P[Ie],je=Ve+q(ge,Ie),ie+=M(ge,se,ce,je,xe);else if(Ie=C(P),typeof Ie=="function")for(P=Ie.call(P),Ie=0;!(ge=P.next()).done;)ge=ge.value,je=Ve+q(ge,Ie++),ie+=M(ge,se,ce,je,xe);else if(je==="object"){if(typeof P.then=="function")return M(ne(P),se,ce,ge,xe);throw se=String(P),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return ie}function he(P,se,ce){if(P==null)return P;var ge=[],xe=0;return M(P,ge,"","",function(je){return se.call(ce,je,xe++)}),ge}function ve(P){if(P._status===-1){var se=P._result;se=se(),se.then(function(ce){(P._status===0||P._status===-1)&&(P._status=1,P._result=ce)},function(ce){(P._status===0||P._status===-1)&&(P._status=2,P._result=ce)}),P._status===-1&&(P._status=0,P._result=se)}if(P._status===1)return P._result.default;throw P._result}var Ce=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},Le={map:he,forEach:function(P,se,ce){he(P,function(){se.apply(this,arguments)},ce)},count:function(P){var se=0;return he(P,function(){se++}),se},toArray:function(P){return he(P,function(se){return se})||[]},only:function(P){if(!k(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return Qe.Activity=w,Qe.Children=Le,Qe.Component=L,Qe.Fragment=n,Qe.Profiler=l,Qe.PureComponent=K,Qe.StrictMode=i,Qe.Suspense=g,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return S.H.useMemoCache(P)}},Qe.cache=function(P){return function(){return P.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(P,se,ce){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ge=z({},P.props),xe=P.key;if(se!=null)for(je in se.key!==void 0&&(xe=""+se.key),se)!A.call(se,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&se.ref===void 0||(ge[je]=se[je]);var je=arguments.length-2;if(je===1)ge.children=ce;else if(1<je){for(var ie=Array(je),Ve=0;Ve<je;Ve++)ie[Ve]=arguments[Ve+2];ge.children=ie}return R(P.type,xe,ge)},Qe.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Qe.createElement=function(P,se,ce){var ge,xe={},je=null;if(se!=null)for(ge in se.key!==void 0&&(je=""+se.key),se)A.call(se,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(xe[ge]=se[ge]);var ie=arguments.length-2;if(ie===1)xe.children=ce;else if(1<ie){for(var Ve=Array(ie),Ie=0;Ie<ie;Ie++)Ve[Ie]=arguments[Ie+2];xe.children=Ve}if(P&&P.defaultProps)for(ge in ie=P.defaultProps,ie)xe[ge]===void 0&&(xe[ge]=ie[ge]);return R(P,je,xe)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(P){return{$$typeof:p,render:P}},Qe.isValidElement=k,Qe.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:ve}},Qe.memo=function(P,se){return{$$typeof:x,type:P,compare:se===void 0?null:se}},Qe.startTransition=function(P){var se=S.T,ce={};S.T=ce;try{var ge=P(),xe=S.S;xe!==null&&xe(ce,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(le,Ce)}catch(je){Ce(je)}finally{se!==null&&ce.types!==null&&(se.types=ce.types),S.T=se}},Qe.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Qe.use=function(P){return S.H.use(P)},Qe.useActionState=function(P,se,ce){return S.H.useActionState(P,se,ce)},Qe.useCallback=function(P,se){return S.H.useCallback(P,se)},Qe.useContext=function(P){return S.H.useContext(P)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(P,se){return S.H.useDeferredValue(P,se)},Qe.useEffect=function(P,se){return S.H.useEffect(P,se)},Qe.useEffectEvent=function(P){return S.H.useEffectEvent(P)},Qe.useId=function(){return S.H.useId()},Qe.useImperativeHandle=function(P,se,ce){return S.H.useImperativeHandle(P,se,ce)},Qe.useInsertionEffect=function(P,se){return S.H.useInsertionEffect(P,se)},Qe.useLayoutEffect=function(P,se){return S.H.useLayoutEffect(P,se)},Qe.useMemo=function(P,se){return S.H.useMemo(P,se)},Qe.useOptimistic=function(P,se){return S.H.useOptimistic(P,se)},Qe.useReducer=function(P,se,ce){return S.H.useReducer(P,se,ce)},Qe.useRef=function(P){return S.H.useRef(P)},Qe.useState=function(P){return S.H.useState(P)},Qe.useSyncExternalStore=function(P,se,ce){return S.H.useSyncExternalStore(P,se,ce)},Qe.useTransition=function(){return S.H.useTransition()},Qe.version="19.2.4",Qe}var Db;function Zp(){return Db||(Db=1,Ym.exports=qT()),Ym.exports}var j=Zp();const FT=$_(j);var Km={exports:{}},wc={},Qm={exports:{}},Wm={};var Mb;function HT(){return Mb||(Mb=1,(function(s){function e(M,he){var ve=M.length;M.push(he);e:for(;0<ve;){var Ce=ve-1>>>1,Le=M[Ce];if(0<l(Le,he))M[Ce]=he,M[ve]=Le,ve=Ce;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var he=M[0],ve=M.pop();if(ve!==he){M[0]=ve;e:for(var Ce=0,Le=M.length,P=Le>>>1;Ce<P;){var se=2*(Ce+1)-1,ce=M[se],ge=se+1,xe=M[ge];if(0>l(ce,ve))ge<Le&&0>l(xe,ce)?(M[Ce]=xe,M[ge]=ve,Ce=ge):(M[Ce]=ce,M[se]=ve,Ce=se);else if(ge<Le&&0>l(xe,ve))M[Ce]=xe,M[ge]=ve,Ce=ge;else break e}}return he}function l(M,he){var ve=M.sortIndex-he.sortIndex;return ve!==0?ve:M.id-he.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],x=[],b=1,w=null,N=3,C=!1,G=!1,z=!1,O=!1,L=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function fe(M){for(var he=n(x);he!==null;){if(he.callback===null)i(x);else if(he.startTime<=M)i(x),he.sortIndex=he.expirationTime,e(g,he);else break;he=n(x)}}function pe(M){if(z=!1,fe(M),!G)if(n(g)!==null)G=!0,le||(le=!0,U());else{var he=n(x);he!==null&&ne(pe,he.startTime-M)}}var le=!1,S=-1,A=5,R=-1;function V(){return O?!0:!(s.unstable_now()-R<A)}function k(){if(O=!1,le){var M=s.unstable_now();R=M;var he=!0;try{e:{G=!1,z&&(z=!1,H(S),S=-1),C=!0;var ve=N;try{t:{for(fe(M),w=n(g);w!==null&&!(w.expirationTime>M&&V());){var Ce=w.callback;if(typeof Ce=="function"){w.callback=null,N=w.priorityLevel;var Le=Ce(w.expirationTime<=M);if(M=s.unstable_now(),typeof Le=="function"){w.callback=Le,fe(M),he=!0;break t}w===n(g)&&i(g),fe(M)}else i(g);w=n(g)}if(w!==null)he=!0;else{var P=n(x);P!==null&&ne(pe,P.startTime-M),he=!1}}break e}finally{w=null,N=ve,C=!1}he=void 0}}finally{he?U():le=!1}}}var U;if(typeof K=="function")U=function(){K(k)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,q=I.port2;I.port1.onmessage=k,U=function(){q.postMessage(null)}}else U=function(){L(k,0)};function ne(M,he){S=L(function(){M(s.unstable_now())},he)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(M){M.callback=null},s.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<M?Math.floor(1e3/M):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(M){switch(N){case 1:case 2:case 3:var he=3;break;default:he=N}var ve=N;N=he;try{return M()}finally{N=ve}},s.unstable_requestPaint=function(){O=!0},s.unstable_runWithPriority=function(M,he){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ve=N;N=M;try{return he()}finally{N=ve}},s.unstable_scheduleCallback=function(M,he,ve){var Ce=s.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Ce+ve:Ce):ve=Ce,M){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ve+Le,M={id:b++,callback:he,priorityLevel:M,startTime:ve,expirationTime:Le,sortIndex:-1},ve>Ce?(M.sortIndex=ve,e(x,M),n(g)===null&&M===n(x)&&(z?(H(S),S=-1):z=!0,ne(pe,ve-Ce))):(M.sortIndex=Le,e(g,M),G||C||(G=!0,le||(le=!0,U()))),M},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(M){var he=N;return function(){var ve=N;N=he;try{return M.apply(this,arguments)}finally{N=ve}}}})(Wm)),Wm}var Ob;function $T(){return Ob||(Ob=1,Qm.exports=HT()),Qm.exports}var Xm={exports:{}},Vn={};var Vb;function GT(){if(Vb)return Vn;Vb=1;var s=Zp();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)x+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,x,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:x,implementation:b}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Vn.createPortal=function(g,x){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(g,x,null,b)},Vn.flushSync=function(g){var x=h.T,b=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=x,i.p=b,i.d.f()}},Vn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(g,x))},Vn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Vn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var b=x.as,w=p(b,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;b==="style"?i.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:C}):b==="script"&&i.d.X(g,{crossOrigin:w,integrity:N,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Vn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var b=p(x.as,x.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(g)},Vn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var b=x.as,w=p(b,x.crossOrigin);i.d.L(g,b,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Vn.preloadModule=function(g,x){if(typeof g=="string")if(x){var b=p(x.as,x.crossOrigin);i.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(g)},Vn.requestFormReset=function(g){i.d.r(g)},Vn.unstable_batchedUpdates=function(g,x){return g(x)},Vn.useFormState=function(g,x,b){return h.H.useFormState(g,x,b)},Vn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Vn.version="19.2.4",Vn}var Pb;function YT(){if(Pb)return Xm.exports;Pb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Xm.exports=GT(),Xm.exports}var Lb;function KT(){if(Lb)return wc;Lb=1;var s=$T(),e=Zp(),n=YT();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function h(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function p(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function x(t){var a=t.alternate;if(!a){if(a=u(t),a===null)throw Error(i(188));return a!==t?null:t}for(var r=t,c=a;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return g(f),t;if(m===c)return g(f),a;m=m.sibling}throw Error(i(188))}if(r.return!==c.return)r=f,c=m;else{for(var v=!1,E=f.child;E;){if(E===r){v=!0,r=f,c=m;break}if(E===c){v=!0,c=f,r=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===r){v=!0,r=m,c=f;break}if(E===c){v=!0,c=m,r=f;break}E=E.sibling}if(!v)throw Error(i(189))}}if(r.alternate!==c)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:a}function b(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=b(t),a!==null)return a;t=t.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),K=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function q(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case L:return"Profiler";case O:return"StrictMode";case pe:return"Suspense";case le:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case K:return t.displayName||"Context";case H:return(t._context.displayName||"Context")+".Consumer";case fe:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case S:return a=t.displayName||null,a!==null?a:q(t.type)||"Memo";case A:a=t._payload,t=t._init;try{return q(t(a))}catch{}}return null}var ne=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Ce=[],Le=-1;function P(t){return{current:t}}function se(t){0>Le||(t.current=Ce[Le],Ce[Le]=null,Le--)}function ce(t,a){Le++,Ce[Le]=t.current,t.current=a}var ge=P(null),xe=P(null),je=P(null),ie=P(null);function Ve(t,a){switch(ce(je,a),ce(xe,t),ce(ge,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Zy(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Zy(a),t=eb(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}se(ge),ce(ge,t)}function Ie(){se(ge),se(xe),se(je)}function $e(t){t.memoizedState!==null&&ce(ie,t);var a=ge.current,r=eb(a,t.type);a!==r&&(ce(xe,t),ce(ge,r))}function tt(t){xe.current===t&&(se(ge),se(xe)),ie.current===t&&(se(ie),xc._currentValue=ve)}var Yt,It;function pt(t){if(Yt===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);Yt=a&&a[1]||"",It=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yt+t+It}var gn=!1;function sn(t,a){if(!t||gn)return"";gn=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(ee){var J=ee}Reflect.construct(t,[],oe)}else{try{oe.call()}catch(ee){J=ee}t.call(oe.prototype)}}else{try{throw Error()}catch(ee){J=ee}(oe=t())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(ee){if(ee&&J&&typeof ee.stack=="string")return[ee.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var D=v.split(`
`),W=E.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<W.length&&!W[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===W.length)for(c=D.length-1,f=W.length-1;1<=c&&0<=f&&D[c]!==W[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==W[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==W[f]){var ae=`
`+D[c].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=c&&0<=f);break}}}finally{gn=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?pt(r):""}function as(t,a){switch(t.tag){case 26:case 27:case 5:return pt(t.type);case 16:return pt("Lazy");case 13:return t.child!==a&&a!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return sn(t.type,!1);case 11:return sn(t.type.render,!1);case 1:return sn(t.type,!0);case 31:return pt("Activity");default:return""}}function zn(t){try{var a="",r=null;do a+=as(t,r),r=t,t=t.return;while(t);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var vt=Object.prototype.hasOwnProperty,Ee=s.unstable_scheduleCallback,ke=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Pt=s.unstable_requestPaint,at=s.unstable_now,ut=s.unstable_getCurrentPriorityLevel,F=s.unstable_ImmediatePriority,te=s.unstable_UserBlockingPriority,_e=s.unstable_NormalPriority,we=s.unstable_LowPriority,Pe=s.unstable_IdlePriority,_t=s.log,ft=s.unstable_setDisableYieldValue,me=null,ye=null;function qe(t){if(typeof _t=="function"&&ft(t),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(me,t)}catch{}}var Ue=Math.clz32?Math.clz32:De,gt=Math.log,Be=Math.LN2;function De(t){return t>>>=0,t===0?32:31-(gt(t)/Be|0)|0}var At=256,vn=262144,wt=4194304;function xn(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Dn(t,a,r){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?f=xn(c):(v&=E,v!==0?f=xn(v):r||(r=E&~t,r!==0&&(f=xn(r))))):(E=c&~m,E!==0?f=xn(E):v!==0?f=xn(v):r||(r=c&~t,r!==0&&(f=xn(r)))),f===0?0:a!==0&&a!==f&&(a&m)===0&&(m=f&-f,r=a&-a,m>=r||m===32&&(r&4194048)!==0)?a:f}function qn(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Eo(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mn(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function is(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function On(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ll(t,a,r,c,f,m){var v=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var E=t.entanglements,D=t.expirationTimes,W=t.hiddenUpdates;for(r=v&~r;0<r;){var ae=31-Ue(r),oe=1<<ae;E[ae]=0,D[ae]=-1;var J=W[ae];if(J!==null)for(W[ae]=null,ae=0;ae<J.length;ae++){var ee=J[ae];ee!==null&&(ee.lane&=-536870913)}r&=~oe}c!==0&&Ra(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~a))}function Ra(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var c=31-Ue(a);t.entangledLanes|=a,t.entanglements[c]=t.entanglements[c]|1073741824|r&261930}function dr(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var c=31-Ue(r),f=1<<c;f&a|t[c]&a&&(t[c]|=a),r&=~f}}function ii(t,a){var r=a&-a;return r=(r&42)!==0?1:ri(r),(r&(t.suspendedLanes|a))!==0?0:r}function ri(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ca(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function gu(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:Eb(t.type))}function Vs(t,a){var r=he.p;try{return he.p=t,a()}finally{he.p=r}}var Ps=Math.random().toString(36).slice(2),an="__reactFiber$"+Ps,_n="__reactProps$"+Ps,Js="__reactContainer$"+Ps,ol="__reactEvents$"+Ps,Xh="__reactListeners$"+Ps,xu="__reactHandles$"+Ps,yu="__reactResources$"+Ps,Zs="__reactMarker$"+Ps;function cl(t){delete t[an],delete t[_n],delete t[ol],delete t[Xh],delete t[xu]}function ea(t){var a=t[an];if(a)return a;for(var r=t.parentNode;r;){if(a=r[Js]||r[an]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=lb(t);t!==null;){if(r=t[an])return r;t=lb(t)}return a}t=r,r=t.parentNode}return null}function vs(t){if(t=t[an]||t[Js]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function rs(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function ta(t){var a=t[yu];return a||(a=t[yu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function rn(t){t[Zs]=!0}var No=new Set,To={};function na(t,a){sa(t,a),sa(t+"Capture",a)}function sa(t,a){for(To[t]=a,t=0;t<a.length;t++)No.add(a[t])}var So=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ao={},jo={};function bu(t){return vt.call(jo,t)?!0:vt.call(Ao,t)?!1:So.test(t)?jo[t]=!0:(Ao[t]=!0,!1)}function ul(t,a,r){if(bu(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function ls(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function ln(t,a,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+c)}}function wn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function li(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ro(t,a,r){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(v){r=""+v,m.call(this,v)}}),Object.defineProperty(t,a,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function jt(t){if(!t._valueTracker){var a=li(t)?"checked":"value";t._valueTracker=Ro(t,a,""+t[a])}}function hr(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),c="";return t&&(c=li(t)?t.checked?"true":"false":t.value),t=c,t!==r?(a.setValue(t),!0):!1}function aa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var fr=/[\n"\\]/g;function Gn(t){return t.replace(fr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function dl(t,a,r,c,f,m,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),a!=null?v==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+wn(a)):t.value!==""+wn(a)&&(t.value=""+wn(a)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),a!=null?Co(t,v,wn(a)):r!=null?Co(t,v,wn(r)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+wn(E):t.removeAttribute("name")}function vu(t,a,r,c,f,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),a!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||a!=null)){jt(t);return}r=r!=null?""+wn(r):"",a=a!=null?""+wn(a):r,E||a===t.value||(t.value=a),t.defaultValue=a}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=E?t.checked:!!c,t.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),jt(t)}function Co(t,a,r){a==="number"&&aa(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function oi(t,a,r,c){if(t=t.options,a){a={};for(var f=0;f<r.length;f++)a["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=a.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&c&&(t[r].defaultSelected=!0)}else{for(r=""+wn(r),a=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function _u(t,a,r){if(a!=null&&(a=""+wn(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+wn(r):""}function ci(t,a,r,c){if(a==null){if(c!=null){if(r!=null)throw Error(i(92));if(ne(c)){if(1<c.length)throw Error(i(93));c=c[0]}r=c}r==null&&(r=""),a=r}r=wn(a),t.defaultValue=r,c=t.textContent,c===r&&c!==""&&c!==null&&(t.value=c),jt(t)}function Yn(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var wu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Io(t,a,r){var c=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":c?t.setProperty(a,r):typeof r!="number"||r===0||wu.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function ko(t,a,r){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in a)c=a[f],a.hasOwnProperty(f)&&r[f]!==c&&Io(t,f,c)}else for(var m in a)a.hasOwnProperty(m)&&Io(t,m,a[m])}function hl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ui=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fl(t){return ui.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ls(){}var Do=null;function _s(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var di=null,ia=null;function mr(t){var a=vs(t);if(a&&(t=a.stateNode)){var r=t[_n]||null;e:switch(t=a.stateNode,a.type){case"input":if(dl(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Gn(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var c=r[a];if(c!==t&&c.form===t.form){var f=c[_n]||null;if(!f)throw Error(i(90));dl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<r.length;a++)c=r[a],c.form===t.form&&hr(c)}break e;case"textarea":_u(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&oi(t,!!r.multiple,a,!1)}}}var ml=!1;function hi(t,a,r){if(ml)return t(a,r);ml=!0;try{var c=t(a);return c}finally{if(ml=!1,(di!==null||ia!==null)&&(gd(),di&&(a=di,t=ia,ia=di=null,mr(a),t)))for(a=0;a<t.length;a++)mr(t[a])}}function Us(t,a){var r=t.stateNode;if(r===null)return null;var c=r[_n]||null;if(c===null)return null;r=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,a,typeof r));return r}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pr=!1;if(ws)try{var kt={};Object.defineProperty(kt,"passive",{get:function(){pr=!0}}),window.addEventListener("test",kt,kt),window.removeEventListener("test",kt,kt)}catch{pr=!1}var ra=null,Mo=null,gr=null;function Oo(){if(gr)return gr;var t,a=Mo,r=a.length,c,f="value"in ra?ra.value:ra.textContent,m=f.length;for(t=0;t<r&&a[t]===f[t];t++);var v=r-t;for(c=1;c<=v&&a[r-c]===f[m-c];c++);return gr=f.slice(t,1<c?1-c:void 0)}function xr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Ia(){return!0}function Bs(){return!1}function Tn(t){function a(r,c,f,m,v){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ia:Bs,this.isPropagationStopped=Bs,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ia)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ia)},persist:function(){},isPersistent:Ia}),a}var ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=Tn(ka),fi=w({},ka,{view:0,detail:0}),Vo=Tn(fi),mi,pl,oa,gl=w({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oa&&(oa&&t.type==="mousemove"?(mi=t.screenX-oa.screenX,pl=t.screenY-oa.screenY):pl=mi=0,oa=t),mi)},movementY:function(t){return"movementY"in t?t.movementY:pl}}),Po=Tn(gl),yr=w({},gl,{dataTransfer:0}),Nu=Tn(yr),Tu=w({},fi,{relatedTarget:0}),br=Tn(Tu),Lo=w({},ka,{animationName:0,elapsedTime:0,pseudoElement:0}),Su=Tn(Lo),xl=w({},ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Au=Tn(xl),ju=w({},ka,{data:0}),ca=Tn(ju),Ru={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ku(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Iu[t])?!!a[t]:!1}function pi(){return ku}var Fn=w({},fi,{key:function(t){if(t.key){var a=Ru[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=xr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(t){return t.type==="keypress"?xr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Du=Tn(Fn),Mu=w({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Da=Tn(Mu),d=w({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),y=Tn(d),_=w({},ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=Tn(_),Y=w({},gl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Z=Tn(Y),be=w({},ka,{newState:0,oldState:0}),Xe=Tn(be),Zt=[9,13,27,32],Et=ws&&"CompositionEvent"in window,qt=null;ws&&"documentMode"in document&&(qt=document.documentMode);var Es=ws&&"TextEvent"in window&&!qt,ua=ws&&(!Et||qt&&8<qt&&11>=qt),zs=" ",qs=!1;function vr(t,a){switch(t){case"keyup":return Zt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yl(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var bl=!1;function uN(t,a){switch(t){case"compositionend":return yl(a);case"keypress":return a.which!==32?null:(qs=!0,zs);case"textInput":return t=a.data,t===zs&&qs?null:t;default:return null}}function dN(t,a){if(bl)return t==="compositionend"||!Et&&vr(t,a)?(t=Oo(),gr=Mo=ra=null,bl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ua&&a.locale!=="ko"?null:a.data;default:return null}}var hN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u0(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!hN[t.type]:a==="textarea"}function d0(t,a,r,c){di?ia?ia.push(c):ia=[c]:di=c,a=Ed(a,"onChange"),0<a.length&&(r=new la("onChange","change",null,r,c),t.push({event:r,listeners:a}))}var Uo=null,Bo=null;function fN(t){Yy(t,0)}function Ou(t){var a=rs(t);if(hr(a))return t}function h0(t,a){if(t==="change")return a}var f0=!1;if(ws){var Jh;if(ws){var Zh="oninput"in document;if(!Zh){var m0=document.createElement("div");m0.setAttribute("oninput","return;"),Zh=typeof m0.oninput=="function"}Jh=Zh}else Jh=!1;f0=Jh&&(!document.documentMode||9<document.documentMode)}function p0(){Uo&&(Uo.detachEvent("onpropertychange",g0),Bo=Uo=null)}function g0(t){if(t.propertyName==="value"&&Ou(Bo)){var a=[];d0(a,Bo,t,_s(t)),hi(fN,a)}}function mN(t,a,r){t==="focusin"?(p0(),Uo=a,Bo=r,Uo.attachEvent("onpropertychange",g0)):t==="focusout"&&p0()}function pN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ou(Bo)}function gN(t,a){if(t==="click")return Ou(a)}function xN(t,a){if(t==="input"||t==="change")return Ou(a)}function yN(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var os=typeof Object.is=="function"?Object.is:yN;function zo(t,a){if(os(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),c=Object.keys(a);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!vt.call(a,f)||!os(t[f],a[f]))return!1}return!0}function x0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function y0(t,a){var r=x0(t);t=0;for(var c;r;){if(r.nodeType===3){if(c=t+r.textContent.length,t<=a&&c>=a)return{node:r,offset:a-t};t=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=x0(r)}}function b0(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?b0(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function v0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=aa(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=aa(t.document)}return a}function ef(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var bN=ws&&"documentMode"in document&&11>=document.documentMode,vl=null,tf=null,qo=null,nf=!1;function _0(t,a,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nf||vl==null||vl!==aa(c)||(c=vl,"selectionStart"in c&&ef(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),qo&&zo(qo,c)||(qo=c,c=Ed(tf,"onSelect"),0<c.length&&(a=new la("onSelect","select",null,a,r),t.push({event:a,listeners:c}),a.target=vl)))}function _r(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var _l={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionrun:_r("Transition","TransitionRun"),transitionstart:_r("Transition","TransitionStart"),transitioncancel:_r("Transition","TransitionCancel"),transitionend:_r("Transition","TransitionEnd")},sf={},w0={};ws&&(w0=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function wr(t){if(sf[t])return sf[t];if(!_l[t])return t;var a=_l[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in w0)return sf[t]=a[r];return t}var E0=wr("animationend"),N0=wr("animationiteration"),T0=wr("animationstart"),vN=wr("transitionrun"),_N=wr("transitionstart"),wN=wr("transitioncancel"),S0=wr("transitionend"),A0=new Map,af="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");af.push("scrollEnd");function Fs(t,a){A0.set(t,a),na(a,[t])}var Vu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ns=[],wl=0,rf=0;function Pu(){for(var t=wl,a=rf=wl=0;a<t;){var r=Ns[a];Ns[a++]=null;var c=Ns[a];Ns[a++]=null;var f=Ns[a];Ns[a++]=null;var m=Ns[a];if(Ns[a++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&j0(r,f,m)}}function Lu(t,a,r,c){Ns[wl++]=t,Ns[wl++]=a,Ns[wl++]=r,Ns[wl++]=c,rf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function lf(t,a,r,c){return Lu(t,a,r,c),Uu(t)}function Er(t,a){return Lu(t,null,null,a),Uu(t)}function j0(t,a,r){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r);for(var f=!1,m=t.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&a!==null&&(f=31-Ue(r),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[a]:c.push(a),a.lane=r|536870912),m):null}function Uu(t){if(50<uc)throw uc=0,gm=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var El={};function EN(t,a,r,c){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(t,a,r,c){return new EN(t,a,r,c)}function of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ma(t,a){var r=t.alternate;return r===null?(r=cs(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function R0(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Bu(t,a,r,c,f,m){var v=0;if(c=t,typeof t=="function")of(t)&&(v=1);else if(typeof t=="string")v=jT(t,r,ge.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=cs(31,r,a,f),t.elementType=R,t.lanes=m,t;case z:return Nr(r.children,f,m,a);case O:v=8,f|=24;break;case L:return t=cs(12,r,a,f|2),t.elementType=L,t.lanes=m,t;case pe:return t=cs(13,r,a,f),t.elementType=pe,t.lanes=m,t;case le:return t=cs(19,r,a,f),t.elementType=le,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case K:v=10;break e;case H:v=9;break e;case fe:v=11;break e;case S:v=14;break e;case A:v=16,c=null;break e}v=29,r=Error(i(130,t===null?"null":typeof t,"")),c=null}return a=cs(v,r,a,f),a.elementType=t,a.type=c,a.lanes=m,a}function Nr(t,a,r,c){return t=cs(7,t,c,a),t.lanes=r,t}function cf(t,a,r){return t=cs(6,t,null,a),t.lanes=r,t}function C0(t){var a=cs(18,null,null,0);return a.stateNode=t,a}function uf(t,a,r){return a=cs(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var I0=new WeakMap;function Ts(t,a){if(typeof t=="object"&&t!==null){var r=I0.get(t);return r!==void 0?r:(a={value:t,source:a,stack:zn(a)},I0.set(t,a),a)}return{value:t,source:a,stack:zn(a)}}var Nl=[],Tl=0,zu=null,Fo=0,Ss=[],As=0,gi=null,da=1,ha="";function Oa(t,a){Nl[Tl++]=Fo,Nl[Tl++]=zu,zu=t,Fo=a}function k0(t,a,r){Ss[As++]=da,Ss[As++]=ha,Ss[As++]=gi,gi=t;var c=da;t=ha;var f=32-Ue(c)-1;c&=~(1<<f),r+=1;var m=32-Ue(a)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,da=1<<32-Ue(a)+f|r<<f|c,ha=m+t}else da=1<<m|r<<f|c,ha=t}function df(t){t.return!==null&&(Oa(t,1),k0(t,1,0))}function hf(t){for(;t===zu;)zu=Nl[--Tl],Nl[Tl]=null,Fo=Nl[--Tl],Nl[Tl]=null;for(;t===gi;)gi=Ss[--As],Ss[As]=null,ha=Ss[--As],Ss[As]=null,da=Ss[--As],Ss[As]=null}function D0(t,a){Ss[As++]=da,Ss[As++]=ha,Ss[As++]=gi,da=a.id,ha=a.overflow,gi=t}var Sn=null,Ut=null,dt=!1,xi=null,js=!1,ff=Error(i(519));function yi(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ho(Ts(a,t)),ff}function M0(t){var a=t.stateNode,r=t.type,c=t.memoizedProps;switch(a[an]=t,a[_n]=c,r){case"dialog":st("cancel",a),st("close",a);break;case"iframe":case"object":case"embed":st("load",a);break;case"video":case"audio":for(r=0;r<hc.length;r++)st(hc[r],a);break;case"source":st("error",a);break;case"img":case"image":case"link":st("error",a),st("load",a);break;case"details":st("toggle",a);break;case"input":st("invalid",a),vu(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":st("invalid",a);break;case"textarea":st("invalid",a),ci(a,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||c.suppressHydrationWarning===!0||Xy(a.textContent,r)?(c.popover!=null&&(st("beforetoggle",a),st("toggle",a)),c.onScroll!=null&&st("scroll",a),c.onScrollEnd!=null&&st("scrollend",a),c.onClick!=null&&(a.onclick=Ls),a=!0):a=!1,a||yi(t,!0)}function O0(t){for(Sn=t.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:js=!1;return;case 27:case 3:js=!0;return;default:Sn=Sn.return}}function Sl(t){if(t!==Sn)return!1;if(!dt)return O0(t),dt=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Im(t.type,t.memoizedProps)),r=!r),r&&Ut&&yi(t),O0(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ut=rb(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ut=rb(t)}else a===27?(a=Ut,ki(t.type)?(t=Vm,Vm=null,Ut=t):Ut=a):Ut=Sn?Cs(t.stateNode.nextSibling):null;return!0}function Tr(){Ut=Sn=null,dt=!1}function mf(){var t=xi;return t!==null&&(Xn===null?Xn=t:Xn.push.apply(Xn,t),xi=null),t}function Ho(t){xi===null?xi=[t]:xi.push(t)}var pf=P(null),Sr=null,Va=null;function bi(t,a,r){ce(pf,a._currentValue),a._currentValue=r}function Pa(t){t._currentValue=pf.current,se(pf)}function gf(t,a,r){for(;t!==null;){var c=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),t===r)break;t=t.return}}function xf(t,a,r,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var D=0;D<a.length;D++)if(E.context===a[D]){m.lanes|=r,E=m.alternate,E!==null&&(E.lanes|=r),gf(m.return,r,t),c||(v=null);break e}m=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(i(341));v.lanes|=r,m=v.alternate,m!==null&&(m.lanes|=r),gf(v,r,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Al(t,a,r,c){t=null;for(var f=a,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var E=f.type;os(f.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(f===ie.current){if(v=f.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(xc):t=[xc])}f=f.return}t!==null&&xf(a,t,r,c),a.flags|=262144}function qu(t){for(t=t.firstContext;t!==null;){if(!os(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ar(t){Sr=t,Va=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function An(t){return V0(Sr,t)}function Fu(t,a){return Sr===null&&Ar(t),V0(t,a)}function V0(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Va===null){if(t===null)throw Error(i(308));Va=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Va=Va.next=a;return r}var NN=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,c){t.push(c)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},TN=s.unstable_scheduleCallback,SN=s.unstable_NormalPriority,on={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yf(){return{controller:new NN,data:new Map,refCount:0}}function $o(t){t.refCount--,t.refCount===0&&TN(SN,function(){t.controller.abort()})}var Go=null,bf=0,jl=0,Rl=null;function AN(t,a){if(Go===null){var r=Go=[];bf=0,jl=wm(),Rl={status:"pending",value:void 0,then:function(c){r.push(c)}}}return bf++,a.then(P0,P0),a}function P0(){if(--bf===0&&Go!==null){Rl!==null&&(Rl.status="fulfilled");var t=Go;Go=null,jl=0,Rl=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function jN(t,a){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){c.status="fulfilled",c.value=a;for(var f=0;f<r.length;f++)(0,r[f])(a)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var L0=M.S;M.S=function(t,a){_y=at(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&AN(t,a),L0!==null&&L0(t,a)};var jr=P(null);function vf(){var t=jr.current;return t!==null?t:Vt.pooledCache}function Hu(t,a){a===null?ce(jr,jr.current):ce(jr,a.pool)}function U0(){var t=vf();return t===null?null:{parent:on._currentValue,pool:t}}var Cl=Error(i(460)),_f=Error(i(474)),$u=Error(i(542)),Gu={then:function(){}};function B0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function z0(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(Ls,Ls),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,F0(t),t;default:if(typeof a.status=="string")a.then(Ls,Ls);else{if(t=Vt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(c){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=c}},function(c){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,F0(t),t}throw Cr=a,Cl}}function Rr(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Cr=r,Cl):r}}var Cr=null;function q0(){if(Cr===null)throw Error(i(459));var t=Cr;return Cr=null,t}function F0(t){if(t===Cl||t===$u)throw Error(i(483))}var Il=null,Yo=0;function Yu(t){var a=Yo;return Yo+=1,Il===null&&(Il=[]),z0(Il,t,a)}function Ko(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Ku(t,a){throw a.$$typeof===N?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function H0(t){function a($,B){if(t){var Q=$.deletions;Q===null?($.deletions=[B],$.flags|=16):Q.push(B)}}function r($,B){if(!t)return null;for(;B!==null;)a($,B),B=B.sibling;return null}function c($){for(var B=new Map;$!==null;)$.key!==null?B.set($.key,$):B.set($.index,$),$=$.sibling;return B}function f($,B){return $=Ma($,B),$.index=0,$.sibling=null,$}function m($,B,Q){return $.index=Q,t?(Q=$.alternate,Q!==null?(Q=Q.index,Q<B?($.flags|=67108866,B):Q):($.flags|=67108866,B)):($.flags|=1048576,B)}function v($){return t&&$.alternate===null&&($.flags|=67108866),$}function E($,B,Q,re){return B===null||B.tag!==6?(B=cf(Q,$.mode,re),B.return=$,B):(B=f(B,Q),B.return=$,B)}function D($,B,Q,re){var Me=Q.type;return Me===z?ae($,B,Q.props.children,re,Q.key):B!==null&&(B.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===A&&Rr(Me)===B.type)?(B=f(B,Q.props),Ko(B,Q),B.return=$,B):(B=Bu(Q.type,Q.key,Q.props,null,$.mode,re),Ko(B,Q),B.return=$,B)}function W($,B,Q,re){return B===null||B.tag!==4||B.stateNode.containerInfo!==Q.containerInfo||B.stateNode.implementation!==Q.implementation?(B=uf(Q,$.mode,re),B.return=$,B):(B=f(B,Q.children||[]),B.return=$,B)}function ae($,B,Q,re,Me){return B===null||B.tag!==7?(B=Nr(Q,$.mode,re,Me),B.return=$,B):(B=f(B,Q),B.return=$,B)}function oe($,B,Q){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=cf(""+B,$.mode,Q),B.return=$,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return Q=Bu(B.type,B.key,B.props,null,$.mode,Q),Ko(Q,B),Q.return=$,Q;case G:return B=uf(B,$.mode,Q),B.return=$,B;case A:return B=Rr(B),oe($,B,Q)}if(ne(B)||U(B))return B=Nr(B,$.mode,Q,null),B.return=$,B;if(typeof B.then=="function")return oe($,Yu(B),Q);if(B.$$typeof===K)return oe($,Fu($,B),Q);Ku($,B)}return null}function J($,B,Q,re){var Me=B!==null?B.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Me!==null?null:E($,B,""+Q,re);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:return Q.key===Me?D($,B,Q,re):null;case G:return Q.key===Me?W($,B,Q,re):null;case A:return Q=Rr(Q),J($,B,Q,re)}if(ne(Q)||U(Q))return Me!==null?null:ae($,B,Q,re,null);if(typeof Q.then=="function")return J($,B,Yu(Q),re);if(Q.$$typeof===K)return J($,B,Fu($,Q),re);Ku($,Q)}return null}function ee($,B,Q,re,Me){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return $=$.get(Q)||null,E(B,$,""+re,Me);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case C:return $=$.get(re.key===null?Q:re.key)||null,D(B,$,re,Me);case G:return $=$.get(re.key===null?Q:re.key)||null,W(B,$,re,Me);case A:return re=Rr(re),ee($,B,Q,re,Me)}if(ne(re)||U(re))return $=$.get(Q)||null,ae(B,$,re,Me,null);if(typeof re.then=="function")return ee($,B,Q,Yu(re),Me);if(re.$$typeof===K)return ee($,B,Q,Fu(B,re),Me);Ku(B,re)}return null}function Se($,B,Q,re){for(var Me=null,xt=null,Re=B,Ze=B=0,rt=null;Re!==null&&Ze<Q.length;Ze++){Re.index>Ze?(rt=Re,Re=null):rt=Re.sibling;var yt=J($,Re,Q[Ze],re);if(yt===null){Re===null&&(Re=rt);break}t&&Re&&yt.alternate===null&&a($,Re),B=m(yt,B,Ze),xt===null?Me=yt:xt.sibling=yt,xt=yt,Re=rt}if(Ze===Q.length)return r($,Re),dt&&Oa($,Ze),Me;if(Re===null){for(;Ze<Q.length;Ze++)Re=oe($,Q[Ze],re),Re!==null&&(B=m(Re,B,Ze),xt===null?Me=Re:xt.sibling=Re,xt=Re);return dt&&Oa($,Ze),Me}for(Re=c(Re);Ze<Q.length;Ze++)rt=ee(Re,$,Ze,Q[Ze],re),rt!==null&&(t&&rt.alternate!==null&&Re.delete(rt.key===null?Ze:rt.key),B=m(rt,B,Ze),xt===null?Me=rt:xt.sibling=rt,xt=rt);return t&&Re.forEach(function(Pi){return a($,Pi)}),dt&&Oa($,Ze),Me}function ze($,B,Q,re){if(Q==null)throw Error(i(151));for(var Me=null,xt=null,Re=B,Ze=B=0,rt=null,yt=Q.next();Re!==null&&!yt.done;Ze++,yt=Q.next()){Re.index>Ze?(rt=Re,Re=null):rt=Re.sibling;var Pi=J($,Re,yt.value,re);if(Pi===null){Re===null&&(Re=rt);break}t&&Re&&Pi.alternate===null&&a($,Re),B=m(Pi,B,Ze),xt===null?Me=Pi:xt.sibling=Pi,xt=Pi,Re=rt}if(yt.done)return r($,Re),dt&&Oa($,Ze),Me;if(Re===null){for(;!yt.done;Ze++,yt=Q.next())yt=oe($,yt.value,re),yt!==null&&(B=m(yt,B,Ze),xt===null?Me=yt:xt.sibling=yt,xt=yt);return dt&&Oa($,Ze),Me}for(Re=c(Re);!yt.done;Ze++,yt=Q.next())yt=ee(Re,$,Ze,yt.value,re),yt!==null&&(t&&yt.alternate!==null&&Re.delete(yt.key===null?Ze:yt.key),B=m(yt,B,Ze),xt===null?Me=yt:xt.sibling=yt,xt=yt);return t&&Re.forEach(function(UT){return a($,UT)}),dt&&Oa($,Ze),Me}function Ot($,B,Q,re){if(typeof Q=="object"&&Q!==null&&Q.type===z&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:e:{for(var Me=Q.key;B!==null;){if(B.key===Me){if(Me=Q.type,Me===z){if(B.tag===7){r($,B.sibling),re=f(B,Q.props.children),re.return=$,$=re;break e}}else if(B.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===A&&Rr(Me)===B.type){r($,B.sibling),re=f(B,Q.props),Ko(re,Q),re.return=$,$=re;break e}r($,B);break}else a($,B);B=B.sibling}Q.type===z?(re=Nr(Q.props.children,$.mode,re,Q.key),re.return=$,$=re):(re=Bu(Q.type,Q.key,Q.props,null,$.mode,re),Ko(re,Q),re.return=$,$=re)}return v($);case G:e:{for(Me=Q.key;B!==null;){if(B.key===Me)if(B.tag===4&&B.stateNode.containerInfo===Q.containerInfo&&B.stateNode.implementation===Q.implementation){r($,B.sibling),re=f(B,Q.children||[]),re.return=$,$=re;break e}else{r($,B);break}else a($,B);B=B.sibling}re=uf(Q,$.mode,re),re.return=$,$=re}return v($);case A:return Q=Rr(Q),Ot($,B,Q,re)}if(ne(Q))return Se($,B,Q,re);if(U(Q)){if(Me=U(Q),typeof Me!="function")throw Error(i(150));return Q=Me.call(Q),ze($,B,Q,re)}if(typeof Q.then=="function")return Ot($,B,Yu(Q),re);if(Q.$$typeof===K)return Ot($,B,Fu($,Q),re);Ku($,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,B!==null&&B.tag===6?(r($,B.sibling),re=f(B,Q),re.return=$,$=re):(r($,B),re=cf(Q,$.mode,re),re.return=$,$=re),v($)):r($,B)}return function($,B,Q,re){try{Yo=0;var Me=Ot($,B,Q,re);return Il=null,Me}catch(Re){if(Re===Cl||Re===$u)throw Re;var xt=cs(29,Re,null,$.mode);return xt.lanes=re,xt.return=$,xt}}}var Ir=H0(!0),$0=H0(!1),vi=!1;function wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ef(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _i(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function wi(t,a,r){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Nt&2)!==0){var f=c.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a,a=Uu(t),j0(t,null,r),a}return Lu(t,c,a,r),Uu(t)}function Qo(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var c=a.lanes;c&=t.pendingLanes,r|=c,a.lanes=r,dr(t,r)}}function Nf(t,a){var r=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,r=r.next}while(r!==null);m===null?f=m=a:m=m.next=a}else f=m=a;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var Tf=!1;function Wo(){if(Tf){var t=Rl;if(t!==null)throw t}}function Xo(t,a,r,c){Tf=!1;var f=t.updateQueue;vi=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var D=E,W=D.next;D.next=null,v===null?m=W:v.next=W,v=D;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,E=ae.lastBaseUpdate,E!==v&&(E===null?ae.firstBaseUpdate=W:E.next=W,ae.lastBaseUpdate=D))}if(m!==null){var oe=f.baseState;v=0,ae=W=D=null,E=m;do{var J=E.lane&-536870913,ee=J!==E.lane;if(ee?(it&J)===J:(c&J)===J){J!==0&&J===jl&&(Tf=!0),ae!==null&&(ae=ae.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Se=t,ze=E;J=a;var Ot=r;switch(ze.tag){case 1:if(Se=ze.payload,typeof Se=="function"){oe=Se.call(Ot,oe,J);break e}oe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ze.payload,J=typeof Se=="function"?Se.call(Ot,oe,J):Se,J==null)break e;oe=w({},oe,J);break e;case 2:vi=!0}}J=E.callback,J!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=f.callbacks,ee===null?f.callbacks=[J]:ee.push(J))}else ee={lane:J,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ae===null?(W=ae=ee,D=oe):ae=ae.next=ee,v|=J;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;ee=E,E=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);ae===null&&(D=oe),f.baseState=D,f.firstBaseUpdate=W,f.lastBaseUpdate=ae,m===null&&(f.shared.lanes=0),Ai|=v,t.lanes=v,t.memoizedState=oe}}function G0(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function Y0(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)G0(r[t],a)}var kl=P(null),Qu=P(0);function K0(t,a){t=Ga,ce(Qu,t),ce(kl,a),Ga=t|a.baseLanes}function Sf(){ce(Qu,Ga),ce(kl,kl.current)}function Af(){Ga=Qu.current,se(kl),se(Qu)}var us=P(null),Rs=null;function Ei(t){var a=t.alternate;ce(en,en.current&1),ce(us,t),Rs===null&&(a===null||kl.current!==null||a.memoizedState!==null)&&(Rs=t)}function jf(t){ce(en,en.current),ce(us,t),Rs===null&&(Rs=t)}function Q0(t){t.tag===22?(ce(en,en.current),ce(us,t),Rs===null&&(Rs=t)):Ni()}function Ni(){ce(en,en.current),ce(us,us.current)}function ds(t){se(us),Rs===t&&(Rs=null),se(en)}var en=P(0);function Wu(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Mm(r)||Om(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var La=0,Je=null,Dt=null,cn=null,Xu=!1,Dl=!1,kr=!1,Ju=0,Jo=0,Ml=null,RN=0;function Qt(){throw Error(i(321))}function Rf(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!os(t[r],a[r]))return!1;return!0}function Cf(t,a,r,c,f,m){return La=m,Je=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,M.H=t===null||t.memoizedState===null?kx:$f,kr=!1,m=r(c,f),kr=!1,Dl&&(m=X0(a,r,c,f)),W0(t),m}function W0(t){M.H=tc;var a=Dt!==null&&Dt.next!==null;if(La=0,cn=Dt=Je=null,Xu=!1,Jo=0,Ml=null,a)throw Error(i(300));t===null||un||(t=t.dependencies,t!==null&&qu(t)&&(un=!0))}function X0(t,a,r,c){Je=t;var f=0;do{if(Dl&&(Ml=null),Jo=0,Dl=!1,25<=f)throw Error(i(301));if(f+=1,cn=Dt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}M.H=Dx,m=a(r,c)}while(Dl);return m}function CN(){var t=M.H,a=t.useState()[0];return a=typeof a.then=="function"?Zo(a):a,t=t.useState()[0],(Dt!==null?Dt.memoizedState:null)!==t&&(Je.flags|=1024),a}function If(){var t=Ju!==0;return Ju=0,t}function kf(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function Df(t){if(Xu){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Xu=!1}La=0,cn=Dt=Je=null,Dl=!1,Jo=Ju=0,Ml=null}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Je.memoizedState=cn=t:cn=cn.next=t,cn}function tn(){if(Dt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var a=cn===null?Je.memoizedState:cn.next;if(a!==null)cn=a,Dt=t;else{if(t===null)throw Je.alternate===null?Error(i(467)):Error(i(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},cn===null?Je.memoizedState=cn=t:cn=cn.next=t}return cn}function Zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zo(t){var a=Jo;return Jo+=1,Ml===null&&(Ml=[]),t=z0(Ml,t,a),a=Je,(cn===null?a.memoizedState:cn.next)===null&&(a=a.alternate,M.H=a===null||a.memoizedState===null?kx:$f),t}function ed(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Zo(t);if(t.$$typeof===K)return An(t)}throw Error(i(438,String(t)))}function Mf(t){var a=null,r=Je.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var c=Je.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Zu(),Je.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),c=0;c<t;c++)r[c]=V;return a.index++,r}function Ua(t,a){return typeof a=="function"?a(t):a}function td(t){var a=tn();return Of(a,Dt,t)}function Of(t,a,r){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}a.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{a=f.next;var E=v=null,D=null,W=a,ae=!1;do{var oe=W.lane&-536870913;if(oe!==W.lane?(it&oe)===oe:(La&oe)===oe){var J=W.revertLane;if(J===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),oe===jl&&(ae=!0);else if((La&J)===J){W=W.next,J===jl&&(ae=!0);continue}else oe={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},D===null?(E=D=oe,v=m):D=D.next=oe,Je.lanes|=J,Ai|=J;oe=W.action,kr&&r(m,oe),m=W.hasEagerState?W.eagerState:r(m,oe)}else J={lane:oe,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},D===null?(E=D=J,v=m):D=D.next=J,Je.lanes|=oe,Ai|=oe;W=W.next}while(W!==null&&W!==a);if(D===null?v=m:D.next=E,!os(m,t.memoizedState)&&(un=!0,ae&&(r=Rl,r!==null)))throw r;t.memoizedState=m,t.baseState=v,t.baseQueue=D,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Vf(t){var a=tn(),r=a.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var c=r.dispatch,f=r.pending,m=a.memoizedState;if(f!==null){r.pending=null;var v=f=f.next;do m=t(m,v.action),v=v.next;while(v!==f);os(m,a.memoizedState)||(un=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),r.lastRenderedState=m}return[m,c]}function J0(t,a,r){var c=Je,f=tn(),m=dt;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=a();var v=!os((Dt||f).memoizedState,r);if(v&&(f.memoizedState=r,un=!0),f=f.queue,Uf(tx.bind(null,c,f,t),[t]),f.getSnapshot!==a||v||cn!==null&&cn.memoizedState.tag&1){if(c.flags|=2048,Ol(9,{destroy:void 0},ex.bind(null,c,f,r,a),null),Vt===null)throw Error(i(349));m||(La&127)!==0||Z0(c,a,r)}return r}function Z0(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=Je.updateQueue,a===null?(a=Zu(),Je.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function ex(t,a,r,c){a.value=r,a.getSnapshot=c,nx(a)&&sx(t)}function tx(t,a,r){return r(function(){nx(a)&&sx(t)})}function nx(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!os(t,r)}catch{return!0}}function sx(t){var a=Er(t,2);a!==null&&Jn(a,t,2)}function Pf(t){var a=Hn();if(typeof t=="function"){var r=t;if(t=r(),kr){qe(!0);try{r()}finally{qe(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:t},a}function ax(t,a,r,c){return t.baseState=r,Of(t,Dt,typeof c=="function"?c:Ua)}function IN(t,a,r,c,f){if(ad(t))throw Error(i(485));if(t=a.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};M.T!==null?r(!0):m.isTransition=!1,c(m),r=a.pending,r===null?(m.next=a.pending=m,ix(a,m)):(m.next=r.next,a.pending=r.next=m)}}function ix(t,a){var r=a.action,c=a.payload,f=t.state;if(a.isTransition){var m=M.T,v={};M.T=v;try{var E=r(f,c),D=M.S;D!==null&&D(v,E),rx(t,a,E)}catch(W){Lf(t,a,W)}finally{m!==null&&v.types!==null&&(m.types=v.types),M.T=m}}else try{m=r(f,c),rx(t,a,m)}catch(W){Lf(t,a,W)}}function rx(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){lx(t,a,c)},function(c){return Lf(t,a,c)}):lx(t,a,r)}function lx(t,a,r){a.status="fulfilled",a.value=r,ox(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,ix(t,r)))}function Lf(t,a,r){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=r,ox(a),a=a.next;while(a!==c)}t.action=null}function ox(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function cx(t,a){return a}function ux(t,a){if(dt){var r=Vt.formState;if(r!==null){e:{var c=Je;if(dt){if(Ut){t:{for(var f=Ut,m=js;f.nodeType!==8;){if(!m){f=null;break t}if(f=Cs(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ut=Cs(f.nextSibling),c=f.data==="F!";break e}}yi(c)}c=!1}c&&(a=r[0])}}return r=Hn(),r.memoizedState=r.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cx,lastRenderedState:a},r.queue=c,r=Rx.bind(null,Je,c),c.dispatch=r,c=Pf(!1),m=Hf.bind(null,Je,!1,c.queue),c=Hn(),f={state:a,dispatch:null,action:t,pending:null},c.queue=f,r=IN.bind(null,Je,f,m,r),f.dispatch=r,c.memoizedState=t,[a,r,!1]}function dx(t){var a=tn();return hx(a,Dt,t)}function hx(t,a,r){if(a=Of(t,a,cx)[0],t=td(Ua)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=Zo(a)}catch(v){throw v===Cl?$u:v}else c=a;a=tn();var f=a.queue,m=f.dispatch;return r!==a.memoizedState&&(Je.flags|=2048,Ol(9,{destroy:void 0},kN.bind(null,f,r),null)),[c,m,t]}function kN(t,a){t.action=a}function fx(t){var a=tn(),r=Dt;if(r!==null)return hx(a,r,t);tn(),a=a.memoizedState,r=tn();var c=r.queue.dispatch;return r.memoizedState=t,[a,c,!1]}function Ol(t,a,r,c){return t={tag:t,create:r,deps:c,inst:a,next:null},a=Je.updateQueue,a===null&&(a=Zu(),Je.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(c=r.next,r.next=t,t.next=c,a.lastEffect=t),t}function mx(){return tn().memoizedState}function nd(t,a,r,c){var f=Hn();Je.flags|=t,f.memoizedState=Ol(1|a,{destroy:void 0},r,c===void 0?null:c)}function sd(t,a,r,c){var f=tn();c=c===void 0?null:c;var m=f.memoizedState.inst;Dt!==null&&c!==null&&Rf(c,Dt.memoizedState.deps)?f.memoizedState=Ol(a,m,r,c):(Je.flags|=t,f.memoizedState=Ol(1|a,m,r,c))}function px(t,a){nd(8390656,8,t,a)}function Uf(t,a){sd(2048,8,t,a)}function DN(t){Je.flags|=4;var a=Je.updateQueue;if(a===null)a=Zu(),Je.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function gx(t){var a=tn().memoizedState;return DN({ref:a,nextImpl:t}),function(){if((Nt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function xx(t,a){return sd(4,2,t,a)}function yx(t,a){return sd(4,4,t,a)}function bx(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function vx(t,a,r){r=r!=null?r.concat([t]):null,sd(4,4,bx.bind(null,a,t),r)}function Bf(){}function _x(t,a){var r=tn();a=a===void 0?null:a;var c=r.memoizedState;return a!==null&&Rf(a,c[1])?c[0]:(r.memoizedState=[t,a],t)}function wx(t,a){var r=tn();a=a===void 0?null:a;var c=r.memoizedState;if(a!==null&&Rf(a,c[1]))return c[0];if(c=t(),kr){qe(!0);try{t()}finally{qe(!1)}}return r.memoizedState=[c,a],c}function zf(t,a,r){return r===void 0||(La&1073741824)!==0&&(it&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=Ey(),Je.lanes|=t,Ai|=t,r)}function Ex(t,a,r,c){return os(r,a)?r:kl.current!==null?(t=zf(t,r,c),os(t,a)||(un=!0),t):(La&42)===0||(La&1073741824)!==0&&(it&261930)===0?(un=!0,t.memoizedState=r):(t=Ey(),Je.lanes|=t,Ai|=t,a)}function Nx(t,a,r,c,f){var m=he.p;he.p=m!==0&&8>m?m:8;var v=M.T,E={};M.T=E,Hf(t,!1,a,r);try{var D=f(),W=M.S;if(W!==null&&W(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ae=jN(D,c);ec(t,a,ae,ms(t))}else ec(t,a,c,ms(t))}catch(oe){ec(t,a,{then:function(){},status:"rejected",reason:oe},ms())}finally{he.p=m,v!==null&&E.types!==null&&(v.types=E.types),M.T=v}}function MN(){}function qf(t,a,r,c){if(t.tag!==5)throw Error(i(476));var f=Tx(t).queue;Nx(t,f,a,ve,r===null?MN:function(){return Sx(t),r(c)})}function Tx(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:ve},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Sx(t){var a=Tx(t);a.next===null&&(a=t.alternate.memoizedState),ec(t,a.next.queue,{},ms())}function Ff(){return An(xc)}function Ax(){return tn().memoizedState}function jx(){return tn().memoizedState}function ON(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=ms();t=_i(r);var c=wi(a,t,r);c!==null&&(Jn(c,a,r),Qo(c,a,r)),a={cache:yf()},t.payload=a;return}a=a.return}}function VN(t,a,r){var c=ms();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ad(t)?Cx(a,r):(r=lf(t,a,r,c),r!==null&&(Jn(r,t,c),Ix(r,a,c)))}function Rx(t,a,r){var c=ms();ec(t,a,r,c)}function ec(t,a,r,c){var f={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(ad(t))Cx(a,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var v=a.lastRenderedState,E=m(v,r);if(f.hasEagerState=!0,f.eagerState=E,os(E,v))return Lu(t,a,f,0),Vt===null&&Pu(),!1}catch{}if(r=lf(t,a,f,c),r!==null)return Jn(r,t,c),Ix(r,a,c),!0}return!1}function Hf(t,a,r,c){if(c={lane:2,revertLane:wm(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ad(t)){if(a)throw Error(i(479))}else a=lf(t,r,c,2),a!==null&&Jn(a,t,2)}function ad(t){var a=t.alternate;return t===Je||a!==null&&a===Je}function Cx(t,a){Dl=Xu=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function Ix(t,a,r){if((r&4194048)!==0){var c=a.lanes;c&=t.pendingLanes,r|=c,a.lanes=r,dr(t,r)}}var tc={readContext:An,use:ed,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};tc.useEffectEvent=Qt;var kx={readContext:An,use:ed,useCallback:function(t,a){return Hn().memoizedState=[t,a===void 0?null:a],t},useContext:An,useEffect:px,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,nd(4194308,4,bx.bind(null,a,t),r)},useLayoutEffect:function(t,a){return nd(4194308,4,t,a)},useInsertionEffect:function(t,a){nd(4,2,t,a)},useMemo:function(t,a){var r=Hn();a=a===void 0?null:a;var c=t();if(kr){qe(!0);try{t()}finally{qe(!1)}}return r.memoizedState=[c,a],c},useReducer:function(t,a,r){var c=Hn();if(r!==void 0){var f=r(a);if(kr){qe(!0);try{r(a)}finally{qe(!1)}}}else f=a;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=VN.bind(null,Je,t),[c.memoizedState,t]},useRef:function(t){var a=Hn();return t={current:t},a.memoizedState=t},useState:function(t){t=Pf(t);var a=t.queue,r=Rx.bind(null,Je,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:Bf,useDeferredValue:function(t,a){var r=Hn();return zf(r,t,a)},useTransition:function(){var t=Pf(!1);return t=Nx.bind(null,Je,t.queue,!0,!1),Hn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var c=Je,f=Hn();if(dt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=a(),Vt===null)throw Error(i(349));(it&127)!==0||Z0(c,a,r)}f.memoizedState=r;var m={value:r,getSnapshot:a};return f.queue=m,px(tx.bind(null,c,m,t),[t]),c.flags|=2048,Ol(9,{destroy:void 0},ex.bind(null,c,m,r,a),null),r},useId:function(){var t=Hn(),a=Vt.identifierPrefix;if(dt){var r=ha,c=da;r=(c&~(1<<32-Ue(c)-1)).toString(32)+r,a="_"+a+"R_"+r,r=Ju++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=RN++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Ff,useFormState:ux,useActionState:ux,useOptimistic:function(t){var a=Hn();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Hf.bind(null,Je,!0,r),r.dispatch=a,[t,a]},useMemoCache:Mf,useCacheRefresh:function(){return Hn().memoizedState=ON.bind(null,Je)},useEffectEvent:function(t){var a=Hn(),r={impl:t};return a.memoizedState=r,function(){if((Nt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},$f={readContext:An,use:ed,useCallback:_x,useContext:An,useEffect:Uf,useImperativeHandle:vx,useInsertionEffect:xx,useLayoutEffect:yx,useMemo:wx,useReducer:td,useRef:mx,useState:function(){return td(Ua)},useDebugValue:Bf,useDeferredValue:function(t,a){var r=tn();return Ex(r,Dt.memoizedState,t,a)},useTransition:function(){var t=td(Ua)[0],a=tn().memoizedState;return[typeof t=="boolean"?t:Zo(t),a]},useSyncExternalStore:J0,useId:Ax,useHostTransitionStatus:Ff,useFormState:dx,useActionState:dx,useOptimistic:function(t,a){var r=tn();return ax(r,Dt,t,a)},useMemoCache:Mf,useCacheRefresh:jx};$f.useEffectEvent=gx;var Dx={readContext:An,use:ed,useCallback:_x,useContext:An,useEffect:Uf,useImperativeHandle:vx,useInsertionEffect:xx,useLayoutEffect:yx,useMemo:wx,useReducer:Vf,useRef:mx,useState:function(){return Vf(Ua)},useDebugValue:Bf,useDeferredValue:function(t,a){var r=tn();return Dt===null?zf(r,t,a):Ex(r,Dt.memoizedState,t,a)},useTransition:function(){var t=Vf(Ua)[0],a=tn().memoizedState;return[typeof t=="boolean"?t:Zo(t),a]},useSyncExternalStore:J0,useId:Ax,useHostTransitionStatus:Ff,useFormState:fx,useActionState:fx,useOptimistic:function(t,a){var r=tn();return Dt!==null?ax(r,Dt,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Mf,useCacheRefresh:jx};Dx.useEffectEvent=gx;function Gf(t,a,r,c){a=t.memoizedState,r=r(c,a),r=r==null?a:w({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Yf={enqueueSetState:function(t,a,r){t=t._reactInternals;var c=ms(),f=_i(c);f.payload=a,r!=null&&(f.callback=r),a=wi(t,f,c),a!==null&&(Jn(a,t,c),Qo(a,t,c))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var c=ms(),f=_i(c);f.tag=1,f.payload=a,r!=null&&(f.callback=r),a=wi(t,f,c),a!==null&&(Jn(a,t,c),Qo(a,t,c))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=ms(),c=_i(r);c.tag=2,a!=null&&(c.callback=a),a=wi(t,c,r),a!==null&&(Jn(a,t,r),Qo(a,t,r))}};function Mx(t,a,r,c,f,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,v):a.prototype&&a.prototype.isPureReactComponent?!zo(r,c)||!zo(f,m):!0}function Ox(t,a,r,c){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,c),a.state!==t&&Yf.enqueueReplaceState(a,a.state,null)}function Dr(t,a){var r=a;if("ref"in a){r={};for(var c in a)c!=="ref"&&(r[c]=a[c])}if(t=t.defaultProps){r===a&&(r=w({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function Vx(t){Vu(t)}function Px(t){console.error(t)}function Lx(t){Vu(t)}function id(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function Ux(t,a,r){try{var c=t.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Kf(t,a,r){return r=_i(r),r.tag=3,r.payload={element:null},r.callback=function(){id(t,a)},r}function Bx(t){return t=_i(t),t.tag=3,t}function zx(t,a,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){Ux(a,r,c)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Ux(a,r,c),typeof f!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function PN(t,a,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=r.alternate,a!==null&&Al(a,r,f,!0),r=us.current,r!==null){switch(r.tag){case 31:case 13:return Rs===null?xd():r.alternate===null&&Wt===0&&(Wt=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===Gu?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([c]):a.add(c),bm(t,c,f)),!1;case 22:return r.flags|=65536,c===Gu?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([c]):r.add(c)),bm(t,c,f)),!1}throw Error(i(435,r.tag))}return bm(t,c,f),xd(),!1}if(dt)return a=us.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,c!==ff&&(t=Error(i(422),{cause:c}),Ho(Ts(t,r)))):(c!==ff&&(a=Error(i(423),{cause:c}),Ho(Ts(a,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=Ts(c,r),f=Kf(t.stateNode,c,f),Nf(t,f),Wt!==4&&(Wt=2)),!1;var m=Error(i(520),{cause:c});if(m=Ts(m,r),cc===null?cc=[m]:cc.push(m),Wt!==4&&(Wt=2),a===null)return!0;c=Ts(c,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=Kf(r.stateNode,c,t),Nf(r,t),!1;case 1:if(a=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ji===null||!ji.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Bx(f),zx(f,t,r,c),Nf(r,f),!1}r=r.return}while(r!==null);return!1}var Qf=Error(i(461)),un=!1;function jn(t,a,r,c){a.child=t===null?$0(a,null,r,c):Ir(a,t.child,r,c)}function qx(t,a,r,c,f){r=r.render;var m=a.ref;if("ref"in c){var v={};for(var E in c)E!=="ref"&&(v[E]=c[E])}else v=c;return Ar(a),c=Cf(t,a,r,v,m,f),E=If(),t!==null&&!un?(kf(t,a,f),Ba(t,a,f)):(dt&&E&&df(a),a.flags|=1,jn(t,a,c,f),a.child)}function Fx(t,a,r,c,f){if(t===null){var m=r.type;return typeof m=="function"&&!of(m)&&m.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=m,Hx(t,a,m,c,f)):(t=Bu(r.type,null,c,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(m=t.child,!sm(t,f)){var v=m.memoizedProps;if(r=r.compare,r=r!==null?r:zo,r(v,c)&&t.ref===a.ref)return Ba(t,a,f)}return a.flags|=1,t=Ma(m,c),t.ref=a.ref,t.return=a,a.child=t}function Hx(t,a,r,c,f){if(t!==null){var m=t.memoizedProps;if(zo(m,c)&&t.ref===a.ref)if(un=!1,a.pendingProps=c=m,sm(t,f))(t.flags&131072)!==0&&(un=!0);else return a.lanes=t.lanes,Ba(t,a,f)}return Wf(t,a,r,c,f)}function $x(t,a,r,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(c=a.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,a.child=null;return Gx(t,a,m,r,c)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Hu(a,m!==null?m.cachePool:null),m!==null?K0(a,m):Sf(),Q0(a);else return c=a.lanes=536870912,Gx(t,a,m!==null?m.baseLanes|r:r,r,c)}else m!==null?(Hu(a,m.cachePool),K0(a,m),Ni(),a.memoizedState=null):(t!==null&&Hu(a,null),Sf(),Ni());return jn(t,a,f,r),a.child}function nc(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Gx(t,a,r,c,f){var m=vf();return m=m===null?null:{parent:on._currentValue,pool:m},a.memoizedState={baseLanes:r,cachePool:m},t!==null&&Hu(a,null),Sf(),Q0(a),t!==null&&Al(t,a,c,!0),a.childLanes=f,null}function rd(t,a){return a=od({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Yx(t,a,r){return Ir(a,t.child,null,r),t=rd(a,a.pendingProps),t.flags|=2,ds(a),a.memoizedState=null,t}function LN(t,a,r){var c=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(dt){if(c.mode==="hidden")return t=rd(a,c),a.lanes=536870912,nc(null,t);if(jf(a),(t=Ut)?(t=ib(t,js),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:gi!==null?{id:da,overflow:ha}:null,retryLane:536870912,hydrationErrors:null},r=C0(t),r.return=a,a.child=r,Sn=a,Ut=null)):t=null,t===null)throw yi(a);return a.lanes=536870912,null}return rd(a,c)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(jf(a),f)if(a.flags&256)a.flags&=-257,a=Yx(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(un||Al(t,a,r,!1),f=(r&t.childLanes)!==0,un||f){if(c=Vt,c!==null&&(v=ii(c,r),v!==0&&v!==m.retryLane))throw m.retryLane=v,Er(t,v),Jn(c,t,v),Qf;xd(),a=Yx(t,a,r)}else t=m.treeContext,Ut=Cs(v.nextSibling),Sn=a,dt=!0,xi=null,js=!1,t!==null&&D0(a,t),a=rd(a,c),a.flags|=4096;return a}return t=Ma(t.child,{mode:c.mode,children:c.children}),t.ref=a.ref,a.child=t,t.return=a,t}function ld(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function Wf(t,a,r,c,f){return Ar(a),r=Cf(t,a,r,c,void 0,f),c=If(),t!==null&&!un?(kf(t,a,f),Ba(t,a,f)):(dt&&c&&df(a),a.flags|=1,jn(t,a,r,f),a.child)}function Kx(t,a,r,c,f,m){return Ar(a),a.updateQueue=null,r=X0(a,c,r,f),W0(t),c=If(),t!==null&&!un?(kf(t,a,m),Ba(t,a,m)):(dt&&c&&df(a),a.flags|=1,jn(t,a,r,m),a.child)}function Qx(t,a,r,c,f){if(Ar(a),a.stateNode===null){var m=El,v=r.contextType;typeof v=="object"&&v!==null&&(m=An(v)),m=new r(c,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Yf,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=c,m.state=a.memoizedState,m.refs={},wf(a),v=r.contextType,m.context=typeof v=="object"&&v!==null?An(v):El,m.state=a.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Gf(a,r,v,c),m.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Yf.enqueueReplaceState(m,m.state,null),Xo(a,c,m,f),Wo(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(t===null){m=a.stateNode;var E=a.memoizedProps,D=Dr(r,E);m.props=D;var W=m.context,ae=r.contextType;v=El,typeof ae=="object"&&ae!==null&&(v=An(ae));var oe=r.getDerivedStateFromProps;ae=typeof oe=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,ae||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||W!==v)&&Ox(a,m,c,v),vi=!1;var J=a.memoizedState;m.state=J,Xo(a,c,m,f),Wo(),W=a.memoizedState,E||J!==W||vi?(typeof oe=="function"&&(Gf(a,r,oe,c),W=a.memoizedState),(D=vi||Mx(a,r,D,c,J,W,v))?(ae||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=W),m.props=c,m.state=W,m.context=v,c=D):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{m=a.stateNode,Ef(t,a),v=a.memoizedProps,ae=Dr(r,v),m.props=ae,oe=a.pendingProps,J=m.context,W=r.contextType,D=El,typeof W=="object"&&W!==null&&(D=An(W)),E=r.getDerivedStateFromProps,(W=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==oe||J!==D)&&Ox(a,m,c,D),vi=!1,J=a.memoizedState,m.state=J,Xo(a,c,m,f),Wo();var ee=a.memoizedState;v!==oe||J!==ee||vi||t!==null&&t.dependencies!==null&&qu(t.dependencies)?(typeof E=="function"&&(Gf(a,r,E,c),ee=a.memoizedState),(ae=vi||Mx(a,r,ae,c,J,ee,D)||t!==null&&t.dependencies!==null&&qu(t.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ee,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ee,D)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ee),m.props=c,m.state=ee,m.context=D,c=ae):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&J===t.memoizedState||(a.flags|=1024),c=!1)}return m=c,ld(t,a),c=(a.flags&128)!==0,m||c?(m=a.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,t!==null&&c?(a.child=Ir(a,t.child,null,f),a.child=Ir(a,null,r,f)):jn(t,a,r,f),a.memoizedState=m.state,t=a.child):t=Ba(t,a,f),t}function Wx(t,a,r,c){return Tr(),a.flags|=256,jn(t,a,r,c),a.child}var Xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jf(t){return{baseLanes:t,cachePool:U0()}}function Zf(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=fs),t}function Xx(t,a,r){var c=a.pendingProps,f=!1,m=(a.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(en.current&2)!==0),v&&(f=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(dt){if(f?Ei(a):Ni(),(t=Ut)?(t=ib(t,js),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:gi!==null?{id:da,overflow:ha}:null,retryLane:536870912,hydrationErrors:null},r=C0(t),r.return=a,a.child=r,Sn=a,Ut=null)):t=null,t===null)throw yi(a);return Om(t)?a.lanes=32:a.lanes=536870912,null}var E=c.children;return c=c.fallback,f?(Ni(),f=a.mode,E=od({mode:"hidden",children:E},f),c=Nr(c,f,r,null),E.return=a,c.return=a,E.sibling=c,a.child=E,c=a.child,c.memoizedState=Jf(r),c.childLanes=Zf(t,v,r),a.memoizedState=Xf,nc(null,c)):(Ei(a),em(a,E))}var D=t.memoizedState;if(D!==null&&(E=D.dehydrated,E!==null)){if(m)a.flags&256?(Ei(a),a.flags&=-257,a=tm(t,a,r)):a.memoizedState!==null?(Ni(),a.child=t.child,a.flags|=128,a=null):(Ni(),E=c.fallback,f=a.mode,c=od({mode:"visible",children:c.children},f),E=Nr(E,f,r,null),E.flags|=2,c.return=a,E.return=a,c.sibling=E,a.child=c,Ir(a,t.child,null,r),c=a.child,c.memoizedState=Jf(r),c.childLanes=Zf(t,v,r),a.memoizedState=Xf,a=nc(null,c));else if(Ei(a),Om(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var W=v.dgst;v=W,c=Error(i(419)),c.stack="",c.digest=v,Ho({value:c,source:null,stack:null}),a=tm(t,a,r)}else if(un||Al(t,a,r,!1),v=(r&t.childLanes)!==0,un||v){if(v=Vt,v!==null&&(c=ii(v,r),c!==0&&c!==D.retryLane))throw D.retryLane=c,Er(t,c),Jn(v,t,c),Qf;Mm(E)||xd(),a=tm(t,a,r)}else Mm(E)?(a.flags|=192,a.child=t.child,a=null):(t=D.treeContext,Ut=Cs(E.nextSibling),Sn=a,dt=!0,xi=null,js=!1,t!==null&&D0(a,t),a=em(a,c.children),a.flags|=4096);return a}return f?(Ni(),E=c.fallback,f=a.mode,D=t.child,W=D.sibling,c=Ma(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,W!==null?E=Ma(W,E):(E=Nr(E,f,r,null),E.flags|=2),E.return=a,c.return=a,c.sibling=E,a.child=c,nc(null,c),c=a.child,E=t.child.memoizedState,E===null?E=Jf(r):(f=E.cachePool,f!==null?(D=on._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=U0(),E={baseLanes:E.baseLanes|r,cachePool:f}),c.memoizedState=E,c.childLanes=Zf(t,v,r),a.memoizedState=Xf,nc(t.child,c)):(Ei(a),r=t.child,t=r.sibling,r=Ma(r,{mode:"visible",children:c.children}),r.return=a,r.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=r,a.memoizedState=null,r)}function em(t,a){return a=od({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function od(t,a){return t=cs(22,t,null,a),t.lanes=0,t}function tm(t,a,r){return Ir(a,t.child,null,r),t=em(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Jx(t,a,r){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a),gf(t.return,a,r)}function nm(t,a,r,c,f,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f,treeForkCount:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=r,v.tailMode=f,v.treeForkCount=m)}function Zx(t,a,r){var c=a.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=en.current,E=(v&2)!==0;if(E?(v=v&1|2,a.flags|=128):v&=1,ce(en,v),jn(t,a,c,r),c=dt?Fo:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jx(t,r,a);else if(t.tag===19)Jx(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=a.child,f=null;r!==null;)t=r.alternate,t!==null&&Wu(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=a.child,a.child=null):(f=r.sibling,r.sibling=null),nm(a,!1,f,r,m,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Wu(t)===null){a.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}nm(a,!0,r,null,m,c);break;case"together":nm(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function Ba(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),Ai|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(Al(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,r=Ma(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=Ma(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function sm(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&qu(t)))}function UN(t,a,r){switch(a.tag){case 3:Ve(a,a.stateNode.containerInfo),bi(a,on,t.memoizedState.cache),Tr();break;case 27:case 5:$e(a);break;case 4:Ve(a,a.stateNode.containerInfo);break;case 10:bi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,jf(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Ei(a),a.flags|=128,null):(r&a.child.childLanes)!==0?Xx(t,a,r):(Ei(a),t=Ba(t,a,r),t!==null?t.sibling:null);Ei(a);break;case 19:var f=(t.flags&128)!==0;if(c=(r&a.childLanes)!==0,c||(Al(t,a,r,!1),c=(r&a.childLanes)!==0),f){if(c)return Zx(t,a,r);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(en,en.current),c)break;return null;case 22:return a.lanes=0,$x(t,a,r,a.pendingProps);case 24:bi(a,on,t.memoizedState.cache)}return Ba(t,a,r)}function ey(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)un=!0;else{if(!sm(t,r)&&(a.flags&128)===0)return un=!1,UN(t,a,r);un=(t.flags&131072)!==0}else un=!1,dt&&(a.flags&1048576)!==0&&k0(a,Fo,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(t=Rr(a.elementType),a.type=t,typeof t=="function")of(t)?(c=Dr(t,c),a.tag=1,a=Qx(null,a,t,c,r)):(a.tag=0,a=Wf(null,a,t,c,r));else{if(t!=null){var f=t.$$typeof;if(f===fe){a.tag=11,a=qx(null,a,t,c,r);break e}else if(f===S){a.tag=14,a=Fx(null,a,t,c,r);break e}}throw a=q(t)||t,Error(i(306,a,""))}}return a;case 0:return Wf(t,a,a.type,a.pendingProps,r);case 1:return c=a.type,f=Dr(c,a.pendingProps),Qx(t,a,c,f,r);case 3:e:{if(Ve(a,a.stateNode.containerInfo),t===null)throw Error(i(387));c=a.pendingProps;var m=a.memoizedState;f=m.element,Ef(t,a),Xo(a,c,null,r);var v=a.memoizedState;if(c=v.cache,bi(a,on,c),c!==m.cache&&xf(a,[on],r,!0),Wo(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=Wx(t,a,c,r);break e}else if(c!==f){f=Ts(Error(i(424)),a),Ho(f),a=Wx(t,a,c,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ut=Cs(t.firstChild),Sn=a,dt=!0,xi=null,js=!0,r=$0(a,null,c,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Tr(),c===f){a=Ba(t,a,r);break e}jn(t,a,c,r)}a=a.child}return a;case 26:return ld(t,a),t===null?(r=db(a.type,null,a.pendingProps,null))?a.memoizedState=r:dt||(r=a.type,t=a.pendingProps,c=Nd(je.current).createElement(r),c[an]=a,c[_n]=t,Rn(c,r,t),rn(c),a.stateNode=c):a.memoizedState=db(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return $e(a),t===null&&dt&&(c=a.stateNode=ob(a.type,a.pendingProps,je.current),Sn=a,js=!0,f=Ut,ki(a.type)?(Vm=f,Ut=Cs(c.firstChild)):Ut=f),jn(t,a,a.pendingProps.children,r),ld(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&dt&&((f=c=Ut)&&(c=pT(c,a.type,a.pendingProps,js),c!==null?(a.stateNode=c,Sn=a,Ut=Cs(c.firstChild),js=!1,f=!0):f=!1),f||yi(a)),$e(a),f=a.type,m=a.pendingProps,v=t!==null?t.memoizedProps:null,c=m.children,Im(f,m)?c=null:v!==null&&Im(f,v)&&(a.flags|=32),a.memoizedState!==null&&(f=Cf(t,a,CN,null,null,r),xc._currentValue=f),ld(t,a),jn(t,a,c,r),a.child;case 6:return t===null&&dt&&((t=r=Ut)&&(r=gT(r,a.pendingProps,js),r!==null?(a.stateNode=r,Sn=a,Ut=null,t=!0):t=!1),t||yi(a)),null;case 13:return Xx(t,a,r);case 4:return Ve(a,a.stateNode.containerInfo),c=a.pendingProps,t===null?a.child=Ir(a,null,c,r):jn(t,a,c,r),a.child;case 11:return qx(t,a,a.type,a.pendingProps,r);case 7:return jn(t,a,a.pendingProps,r),a.child;case 8:return jn(t,a,a.pendingProps.children,r),a.child;case 12:return jn(t,a,a.pendingProps.children,r),a.child;case 10:return c=a.pendingProps,bi(a,a.type,c.value),jn(t,a,c.children,r),a.child;case 9:return f=a.type._context,c=a.pendingProps.children,Ar(a),f=An(f),c=c(f),a.flags|=1,jn(t,a,c,r),a.child;case 14:return Fx(t,a,a.type,a.pendingProps,r);case 15:return Hx(t,a,a.type,a.pendingProps,r);case 19:return Zx(t,a,r);case 31:return LN(t,a,r);case 22:return $x(t,a,r,a.pendingProps);case 24:return Ar(a),c=An(on),t===null?(f=vf(),f===null&&(f=Vt,m=yf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),a.memoizedState={parent:c,cache:f},wf(a),bi(a,on,f)):((t.lanes&r)!==0&&(Ef(t,a),Xo(a,null,null,r),Wo()),f=t.memoizedState,m=a.memoizedState,f.parent!==c?(f={parent:c,cache:c},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),bi(a,on,c)):(c=m.cache,bi(a,on,c),c!==f.cache&&xf(a,[on],r,!0))),jn(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function za(t){t.flags|=4}function am(t,a,r,c,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Ay())t.flags|=8192;else throw Cr=Gu,_f}else t.flags&=-16777217}function ty(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!gb(a))if(Ay())t.flags|=8192;else throw Cr=Gu,_f}function cd(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Mn():536870912,t.lanes|=a,Ul|=a)}function sc(t,a){if(!dt)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Bt(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,c=0;if(a)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=r,a}function BN(t,a,r){var c=a.pendingProps;switch(hf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(a),null;case 1:return Bt(a),null;case 3:return r=a.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Pa(on),Ie(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sl(a)?za(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,mf())),Bt(a),null;case 26:var f=a.type,m=a.memoizedState;return t===null?(za(a),m!==null?(Bt(a),ty(a,m)):(Bt(a),am(a,f,null,c,r))):m?m!==t.memoizedState?(za(a),Bt(a),ty(a,m)):(Bt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==c&&za(a),Bt(a),am(a,f,t,c,r)),null;case 27:if(tt(a),r=je.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&za(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return Bt(a),null}t=ge.current,Sl(a)?M0(a):(t=ob(f,c,r),a.stateNode=t,za(a))}return Bt(a),null;case 5:if(tt(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&za(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return Bt(a),null}if(m=ge.current,Sl(a))M0(a);else{var v=Nd(je.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[an]=a,m[_n]=c;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=m;e:switch(Rn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&za(a)}}return Bt(a),am(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==c&&za(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(i(166));if(t=je.current,Sl(a)){if(t=a.stateNode,r=a.memoizedProps,c=null,f=Sn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[an]=a,t=!!(t.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Xy(t.nodeValue,r)),t||yi(a,!0)}else t=Nd(t).createTextNode(c),t[an]=a,a.stateNode=t}return Bt(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(c=Sl(a),r!==null){if(t===null){if(!c)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[an]=a}else Tr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),t=!1}else r=mf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(ds(a),a):(ds(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Bt(a),null;case 13:if(c=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Sl(a),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[an]=a}else Tr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),f=!1}else f=mf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(ds(a),a):(ds(a),null)}return ds(a),(a.flags&128)!==0?(a.lanes=r,a):(r=c!==null,t=t!==null&&t.memoizedState!==null,r&&(c=a.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),cd(a,a.updateQueue),Bt(a),null);case 4:return Ie(),t===null&&Sm(a.stateNode.containerInfo),Bt(a),null;case 10:return Pa(a.type),Bt(a),null;case 19:if(se(en),c=a.memoizedState,c===null)return Bt(a),null;if(f=(a.flags&128)!==0,m=c.rendering,m===null)if(f)sc(c,!1);else{if(Wt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(m=Wu(t),m!==null){for(a.flags|=128,sc(c,!1),t=m.updateQueue,a.updateQueue=t,cd(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)R0(r,t),r=r.sibling;return ce(en,en.current&1|2),dt&&Oa(a,c.treeForkCount),a.child}t=t.sibling}c.tail!==null&&at()>md&&(a.flags|=128,f=!0,sc(c,!1),a.lanes=4194304)}else{if(!f)if(t=Wu(m),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,cd(a,t),sc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!dt)return Bt(a),null}else 2*at()-c.renderingStartTime>md&&r!==536870912&&(a.flags|=128,f=!0,sc(c,!1),a.lanes=4194304);c.isBackwards?(m.sibling=a.child,a.child=m):(t=c.last,t!==null?t.sibling=m:a.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=at(),t.sibling=null,r=en.current,ce(en,f?r&1|2:r&1),dt&&Oa(a,c.treeForkCount),t):(Bt(a),null);case 22:case 23:return ds(a),Af(),c=a.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(r&536870912)!==0&&(a.flags&128)===0&&(Bt(a),a.subtreeFlags&6&&(a.flags|=8192)):Bt(a),r=a.updateQueue,r!==null&&cd(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==r&&(a.flags|=2048),t!==null&&se(jr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Pa(on),Bt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function zN(t,a){switch(hf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Pa(on),Ie(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return tt(a),null;case 31:if(a.memoizedState!==null){if(ds(a),a.alternate===null)throw Error(i(340));Tr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(ds(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Tr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return se(en),null;case 4:return Ie(),null;case 10:return Pa(a.type),null;case 22:case 23:return ds(a),Af(),t!==null&&se(jr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Pa(on),null;case 25:return null;default:return null}}function ny(t,a){switch(hf(a),a.tag){case 3:Pa(on),Ie();break;case 26:case 27:case 5:tt(a);break;case 4:Ie();break;case 31:a.memoizedState!==null&&ds(a);break;case 13:ds(a);break;case 19:se(en);break;case 10:Pa(a.type);break;case 22:case 23:ds(a),Af(),t!==null&&se(jr);break;case 24:Pa(on)}}function ac(t,a){try{var r=a.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&t)===t){c=void 0;var m=r.create,v=r.inst;c=m(),v.destroy=c}r=r.next}while(r!==f)}}catch(E){Ct(a,a.return,E)}}function Ti(t,a,r){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var v=c.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=a;var D=r,W=E;try{W()}catch(ae){Ct(f,D,ae)}}}c=c.next}while(c!==m)}}catch(ae){Ct(a,a.return,ae)}}function sy(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{Y0(a,r)}catch(c){Ct(t,t.return,c)}}}function ay(t,a,r){r.props=Dr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(c){Ct(t,a,c)}}function ic(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof r=="function"?t.refCleanup=r(c):r.current=c}}catch(f){Ct(t,a,f)}}function fa(t,a){var r=t.ref,c=t.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){Ct(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Ct(t,a,f)}else r.current=null}function iy(t){var a=t.type,r=t.memoizedProps,c=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){Ct(t,t.return,f)}}function im(t,a,r){try{var c=t.stateNode;cT(c,t.type,r,a),c[_n]=a}catch(f){Ct(t,t.return,f)}}function ry(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ki(t.type)||t.tag===4}function rm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ry(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ki(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lm(t,a,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Ls));else if(c!==4&&(c===27&&ki(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(lm(t,a,r),t=t.sibling;t!==null;)lm(t,a,r),t=t.sibling}function ud(t,a,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(c!==4&&(c===27&&ki(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(ud(t,a,r),t=t.sibling;t!==null;)ud(t,a,r),t=t.sibling}function ly(t){var a=t.stateNode,r=t.memoizedProps;try{for(var c=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);Rn(a,c,r),a[an]=t,a[_n]=r}catch(m){Ct(t,t.return,m)}}var qa=!1,dn=!1,om=!1,oy=typeof WeakSet=="function"?WeakSet:Set,En=null;function qN(t,a){if(t=t.containerInfo,Rm=Id,t=v0(t),ef(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var v=0,E=-1,D=-1,W=0,ae=0,oe=t,J=null;t:for(;;){for(var ee;oe!==r||f!==0&&oe.nodeType!==3||(E=v+f),oe!==m||c!==0&&oe.nodeType!==3||(D=v+c),oe.nodeType===3&&(v+=oe.nodeValue.length),(ee=oe.firstChild)!==null;)J=oe,oe=ee;for(;;){if(oe===t)break t;if(J===r&&++W===f&&(E=v),J===m&&++ae===c&&(D=v),(ee=oe.nextSibling)!==null)break;oe=J,J=oe.parentNode}oe=ee}r=E===-1||D===-1?null:{start:E,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(Cm={focusedElem:t,selectionRange:r},Id=!1,En=a;En!==null;)if(a=En,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,En=t;else for(;En!==null;){switch(a=En,m=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=a,f=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var Se=Dr(r.type,f);t=c.getSnapshotBeforeUpdate(Se,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(ze){Ct(r,r.return,ze)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)Dm(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Dm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,En=t;break}En=a.return}}function cy(t,a,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Ha(t,r),c&4&&ac(5,r);break;case 1:if(Ha(t,r),c&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(v){Ct(r,r.return,v)}else{var f=Dr(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ct(r,r.return,v)}}c&64&&sy(r),c&512&&ic(r,r.return);break;case 3:if(Ha(t,r),c&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Y0(t,a)}catch(v){Ct(r,r.return,v)}}break;case 27:a===null&&c&4&&ly(r);case 26:case 5:Ha(t,r),a===null&&c&4&&iy(r),c&512&&ic(r,r.return);break;case 12:Ha(t,r);break;case 31:Ha(t,r),c&4&&hy(t,r);break;case 13:Ha(t,r),c&4&&fy(t,r),c&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=XN.bind(null,r),xT(t,r))));break;case 22:if(c=r.memoizedState!==null||qa,!c){a=a!==null&&a.memoizedState!==null||dn,f=qa;var m=dn;qa=c,(dn=a)&&!m?$a(t,r,(r.subtreeFlags&8772)!==0):Ha(t,r),qa=f,dn=m}break;case 30:break;default:Ha(t,r)}}function uy(t){var a=t.alternate;a!==null&&(t.alternate=null,uy(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&cl(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ft=null,Kn=!1;function Fa(t,a,r){for(r=r.child;r!==null;)dy(t,a,r),r=r.sibling}function dy(t,a,r){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(me,r)}catch{}switch(r.tag){case 26:dn||fa(r,a),Fa(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:dn||fa(r,a);var c=Ft,f=Kn;ki(r.type)&&(Ft=r.stateNode,Kn=!1),Fa(t,a,r),mc(r.stateNode),Ft=c,Kn=f;break;case 5:dn||fa(r,a);case 6:if(c=Ft,f=Kn,Ft=null,Fa(t,a,r),Ft=c,Kn=f,Ft!==null)if(Kn)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(r.stateNode)}catch(m){Ct(r,a,m)}else try{Ft.removeChild(r.stateNode)}catch(m){Ct(r,a,m)}break;case 18:Ft!==null&&(Kn?(t=Ft,sb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Yl(t)):sb(Ft,r.stateNode));break;case 4:c=Ft,f=Kn,Ft=r.stateNode.containerInfo,Kn=!0,Fa(t,a,r),Ft=c,Kn=f;break;case 0:case 11:case 14:case 15:Ti(2,r,a),dn||Ti(4,r,a),Fa(t,a,r);break;case 1:dn||(fa(r,a),c=r.stateNode,typeof c.componentWillUnmount=="function"&&ay(r,a,c)),Fa(t,a,r);break;case 21:Fa(t,a,r);break;case 22:dn=(c=dn)||r.memoizedState!==null,Fa(t,a,r),dn=c;break;default:Fa(t,a,r)}}function hy(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Yl(t)}catch(r){Ct(a,a.return,r)}}}function fy(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Yl(t)}catch(r){Ct(a,a.return,r)}}function FN(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new oy),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new oy),a;default:throw Error(i(435,t.tag))}}function dd(t,a){var r=FN(t);a.forEach(function(c){if(!r.has(c)){r.add(c);var f=JN.bind(null,t,c);c.then(f,f)}})}function Qn(t,a){var r=a.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],m=t,v=a,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(ki(E.type)){Ft=E.stateNode,Kn=!1;break e}break;case 5:Ft=E.stateNode,Kn=!1;break e;case 3:case 4:Ft=E.stateNode.containerInfo,Kn=!0;break e}E=E.return}if(Ft===null)throw Error(i(160));dy(m,v,f),Ft=null,Kn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)my(a,t),a=a.sibling}var Hs=null;function my(t,a){var r=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Qn(a,t),Wn(t),c&4&&(Ti(3,t,t.return),ac(3,t),Ti(5,t,t.return));break;case 1:Qn(a,t),Wn(t),c&512&&(dn||r===null||fa(r,r.return)),c&64&&qa&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=Hs;if(Qn(a,t),Wn(t),c&512&&(dn||r===null||fa(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=t.memoizedState,r===null)if(c===null)if(t.stateNode===null){e:{c=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Zs]||m[an]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Rn(m,c,r),m[an]=t,rn(m),c=m;break e;case"link":var v=mb("link","href",f).get(c+(r.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(E,1);break t}}m=f.createElement(c),Rn(m,c,r),f.head.appendChild(m);break;case"meta":if(v=mb("meta","content",f).get(c+(r.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(E,1);break t}}m=f.createElement(c),Rn(m,c,r),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[an]=t,rn(m),c=m}t.stateNode=c}else pb(f,t.type,t.stateNode);else t.stateNode=fb(f,c,t.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?pb(f,t.type,t.stateNode):fb(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&im(t,t.memoizedProps,r.memoizedProps)}break;case 27:Qn(a,t),Wn(t),c&512&&(dn||r===null||fa(r,r.return)),r!==null&&c&4&&im(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Qn(a,t),Wn(t),c&512&&(dn||r===null||fa(r,r.return)),t.flags&32){f=t.stateNode;try{Yn(f,"")}catch(Se){Ct(t,t.return,Se)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,im(t,f,r!==null?r.memoizedProps:f)),c&1024&&(om=!0);break;case 6:if(Qn(a,t),Wn(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,r=t.stateNode;try{r.nodeValue=c}catch(Se){Ct(t,t.return,Se)}}break;case 3:if(Ad=null,f=Hs,Hs=Td(a.containerInfo),Qn(a,t),Hs=f,Wn(t),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Yl(a.containerInfo)}catch(Se){Ct(t,t.return,Se)}om&&(om=!1,py(t));break;case 4:c=Hs,Hs=Td(t.stateNode.containerInfo),Qn(a,t),Wn(t),Hs=c;break;case 12:Qn(a,t),Wn(t);break;case 31:Qn(a,t),Wn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,dd(t,c)));break;case 13:Qn(a,t),Wn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(fd=at()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,dd(t,c)));break;case 22:f=t.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,W=qa,ae=dn;if(qa=W||f,dn=ae||D,Qn(a,t),dn=ae,qa=W,Wn(t),c&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(r===null||D||qa||dn||Mr(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){D=r=a;try{if(m=D.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=D.stateNode;var oe=D.memoizedProps.style,J=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;E.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Se){Ct(D,D.return,Se)}}}else if(a.tag===6){if(r===null){D=a;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(Se){Ct(D,D.return,Se)}}}else if(a.tag===18){if(r===null){D=a;try{var ee=D.stateNode;f?ab(ee,!0):ab(D.stateNode,!1)}catch(Se){Ct(D,D.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=t.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,dd(t,r))));break;case 19:Qn(a,t),Wn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,dd(t,c)));break;case 30:break;case 21:break;default:Qn(a,t),Wn(t)}}function Wn(t){var a=t.flags;if(a&2){try{for(var r,c=t.return;c!==null;){if(ry(c)){r=c;break}c=c.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var f=r.stateNode,m=rm(t);ud(t,m,f);break;case 5:var v=r.stateNode;r.flags&32&&(Yn(v,""),r.flags&=-33);var E=rm(t);ud(t,E,v);break;case 3:case 4:var D=r.stateNode.containerInfo,W=rm(t);lm(t,W,D);break;default:throw Error(i(161))}}catch(ae){Ct(t,t.return,ae)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function py(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;py(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Ha(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)cy(t,a.alternate,a),a=a.sibling}function Mr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Ti(4,a,a.return),Mr(a);break;case 1:fa(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&ay(a,a.return,r),Mr(a);break;case 27:mc(a.stateNode);case 26:case 5:fa(a,a.return),Mr(a);break;case 22:a.memoizedState===null&&Mr(a);break;case 30:Mr(a);break;default:Mr(a)}t=t.sibling}}function $a(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,f=t,m=a,v=m.flags;switch(m.tag){case 0:case 11:case 15:$a(f,m,r),ac(4,m);break;case 1:if($a(f,m,r),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(W){Ct(c,c.return,W)}if(c=m,f=c.updateQueue,f!==null){var E=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)G0(D[f],E)}catch(W){Ct(c,c.return,W)}}r&&v&64&&sy(m),ic(m,m.return);break;case 27:ly(m);case 26:case 5:$a(f,m,r),r&&c===null&&v&4&&iy(m),ic(m,m.return);break;case 12:$a(f,m,r);break;case 31:$a(f,m,r),r&&v&4&&hy(f,m);break;case 13:$a(f,m,r),r&&v&4&&fy(f,m);break;case 22:m.memoizedState===null&&$a(f,m,r),ic(m,m.return);break;case 30:break;default:$a(f,m,r)}a=a.sibling}}function cm(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&$o(r))}function um(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&$o(t))}function $s(t,a,r,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)gy(t,a,r,c),a=a.sibling}function gy(t,a,r,c){var f=a.flags;switch(a.tag){case 0:case 11:case 15:$s(t,a,r,c),f&2048&&ac(9,a);break;case 1:$s(t,a,r,c);break;case 3:$s(t,a,r,c),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&$o(t)));break;case 12:if(f&2048){$s(t,a,r,c),t=a.stateNode;try{var m=a.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){Ct(a,a.return,D)}}else $s(t,a,r,c);break;case 31:$s(t,a,r,c);break;case 13:$s(t,a,r,c);break;case 23:break;case 22:m=a.stateNode,v=a.alternate,a.memoizedState!==null?m._visibility&2?$s(t,a,r,c):rc(t,a):m._visibility&2?$s(t,a,r,c):(m._visibility|=2,Vl(t,a,r,c,(a.subtreeFlags&10256)!==0||!1)),f&2048&&cm(v,a);break;case 24:$s(t,a,r,c),f&2048&&um(a.alternate,a);break;default:$s(t,a,r,c)}}function Vl(t,a,r,c,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var m=t,v=a,E=r,D=c,W=v.flags;switch(v.tag){case 0:case 11:case 15:Vl(m,v,E,D,f),ac(8,v);break;case 23:break;case 22:var ae=v.stateNode;v.memoizedState!==null?ae._visibility&2?Vl(m,v,E,D,f):rc(m,v):(ae._visibility|=2,Vl(m,v,E,D,f)),f&&W&2048&&cm(v.alternate,v);break;case 24:Vl(m,v,E,D,f),f&&W&2048&&um(v.alternate,v);break;default:Vl(m,v,E,D,f)}a=a.sibling}}function rc(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,c=a,f=c.flags;switch(c.tag){case 22:rc(r,c),f&2048&&cm(c.alternate,c);break;case 24:rc(r,c),f&2048&&um(c.alternate,c);break;default:rc(r,c)}a=a.sibling}}var lc=8192;function Pl(t,a,r){if(t.subtreeFlags&lc)for(t=t.child;t!==null;)xy(t,a,r),t=t.sibling}function xy(t,a,r){switch(t.tag){case 26:Pl(t,a,r),t.flags&lc&&t.memoizedState!==null&&RT(r,Hs,t.memoizedState,t.memoizedProps);break;case 5:Pl(t,a,r);break;case 3:case 4:var c=Hs;Hs=Td(t.stateNode.containerInfo),Pl(t,a,r),Hs=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=lc,lc=16777216,Pl(t,a,r),lc=c):Pl(t,a,r));break;default:Pl(t,a,r)}}function yy(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function oc(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var c=a[r];En=c,vy(c,t)}yy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)by(t),t=t.sibling}function by(t){switch(t.tag){case 0:case 11:case 15:oc(t),t.flags&2048&&Ti(9,t,t.return);break;case 3:oc(t);break;case 12:oc(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,hd(t)):oc(t);break;default:oc(t)}}function hd(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var c=a[r];En=c,vy(c,t)}yy(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Ti(8,a,a.return),hd(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,hd(a));break;default:hd(a)}t=t.sibling}}function vy(t,a){for(;En!==null;){var r=En;switch(r.tag){case 0:case 11:case 15:Ti(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:$o(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,En=c;else e:for(r=t;En!==null;){c=En;var f=c.sibling,m=c.return;if(uy(c),c===r){En=null;break e}if(f!==null){f.return=m,En=f;break e}En=m}}}var HN={getCacheForType:function(t){var a=An(on),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return An(on).controller.signal}},$N=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Vt=null,nt=null,it=0,Rt=0,hs=null,Si=!1,Ll=!1,dm=!1,Ga=0,Wt=0,Ai=0,Or=0,hm=0,fs=0,Ul=0,cc=null,Xn=null,fm=!1,fd=0,_y=0,md=1/0,pd=null,ji=null,yn=0,Ri=null,Bl=null,Ya=0,mm=0,pm=null,wy=null,uc=0,gm=null;function ms(){return(Nt&2)!==0&&it!==0?it&-it:M.T!==null?wm():gu()}function Ey(){if(fs===0)if((it&536870912)===0||dt){var t=vn;vn<<=1,(vn&3932160)===0&&(vn=262144),fs=t}else fs=536870912;return t=us.current,t!==null&&(t.flags|=32),fs}function Jn(t,a,r){(t===Vt&&(Rt===2||Rt===9)||t.cancelPendingCommit!==null)&&(zl(t,0),Ci(t,it,fs,!1)),On(t,r),((Nt&2)===0||t!==Vt)&&(t===Vt&&((Nt&2)===0&&(Or|=r),Wt===4&&Ci(t,it,fs,!1)),ma(t))}function Ny(t,a,r){if((Nt&6)!==0)throw Error(i(327));var c=!r&&(a&127)===0&&(a&t.expiredLanes)===0||qn(t,a),f=c?KN(t,a):ym(t,a,!0),m=c;do{if(f===0){Ll&&!c&&Ci(t,a,0,!1);break}else{if(r=t.current.alternate,m&&!GN(r)){f=ym(t,a,!1),m=!1;continue}if(f===2){if(m=a,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var E=t;f=cc;var D=E.current.memoizedState.isDehydrated;if(D&&(zl(E,v).flags|=256),v=ym(E,v,!1),v!==2){if(dm&&!D){E.errorRecoveryDisabledLanes|=m,Or|=m,f=4;break e}m=Xn,Xn=f,m!==null&&(Xn===null?Xn=m:Xn.push.apply(Xn,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){zl(t,0),Ci(t,a,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ci(c,a,fs,!Si);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=fd+300-at(),10<f)){if(Ci(c,a,fs,!Si),Dn(c,0,!0)!==0)break e;Ya=a,c.timeoutHandle=tb(Ty.bind(null,c,r,Xn,pd,fm,a,fs,Or,Ul,Si,m,"Throttled",-0,0),f);break e}Ty(c,r,Xn,pd,fm,a,fs,Or,Ul,Si,m,null,-0,0)}}break}while(!0);ma(t)}function Ty(t,a,r,c,f,m,v,E,D,W,ae,oe,J,ee){if(t.timeoutHandle=-1,oe=a.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ls},xy(a,m,oe);var Se=(m&62914560)===m?fd-at():(m&4194048)===m?_y-at():0;if(Se=CT(oe,Se),Se!==null){Ya=m,t.cancelPendingCommit=Se(Dy.bind(null,t,a,m,r,c,f,v,E,D,ae,oe,null,J,ee)),Ci(t,m,v,!W);return}}Dy(t,a,m,r,c,f,v,E,D)}function GN(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],m=f.getSnapshot;f=f.value;try{if(!os(m(),f))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ci(t,a,r,c){a&=~hm,a&=~Or,t.suspendedLanes|=a,t.pingedLanes&=~a,c&&(t.warmLanes|=a),c=t.expirationTimes;for(var f=a;0<f;){var m=31-Ue(f),v=1<<m;c[m]=-1,f&=~v}r!==0&&Ra(t,r,a)}function gd(){return(Nt&6)===0?(dc(0),!1):!0}function xm(){if(nt!==null){if(Rt===0)var t=nt.return;else t=nt,Va=Sr=null,Df(t),Il=null,Yo=0,t=nt;for(;t!==null;)ny(t.alternate,t),t=t.return;nt=null}}function zl(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,hT(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Ya=0,xm(),Vt=t,nt=r=Ma(t.current,null),it=a,Rt=0,hs=null,Si=!1,Ll=qn(t,a),dm=!1,Ul=fs=hm=Or=Ai=Wt=0,Xn=cc=null,fm=!1,(a&8)!==0&&(a|=a&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=a;0<c;){var f=31-Ue(c),m=1<<f;a|=t[f],c&=~m}return Ga=a,Pu(),r}function Sy(t,a){Je=null,M.H=tc,a===Cl||a===$u?(a=q0(),Rt=3):a===_f?(a=q0(),Rt=4):Rt=a===Qf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,hs=a,nt===null&&(Wt=1,id(t,Ts(a,t.current)))}function Ay(){var t=us.current;return t===null?!0:(it&4194048)===it?Rs===null:(it&62914560)===it||(it&536870912)!==0?t===Rs:!1}function jy(){var t=M.H;return M.H=tc,t===null?tc:t}function Ry(){var t=M.A;return M.A=HN,t}function xd(){Wt=4,Si||(it&4194048)!==it&&us.current!==null||(Ll=!0),(Ai&134217727)===0&&(Or&134217727)===0||Vt===null||Ci(Vt,it,fs,!1)}function ym(t,a,r){var c=Nt;Nt|=2;var f=jy(),m=Ry();(Vt!==t||it!==a)&&(pd=null,zl(t,a)),a=!1;var v=Wt;e:do try{if(Rt!==0&&nt!==null){var E=nt,D=hs;switch(Rt){case 8:xm(),v=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(a=!0);var W=Rt;if(Rt=0,hs=null,ql(t,E,D,W),r&&Ll){v=0;break e}break;default:W=Rt,Rt=0,hs=null,ql(t,E,D,W)}}YN(),v=Wt;break}catch(ae){Sy(t,ae)}while(!0);return a&&t.shellSuspendCounter++,Va=Sr=null,Nt=c,M.H=f,M.A=m,nt===null&&(Vt=null,it=0,Pu()),v}function YN(){for(;nt!==null;)Cy(nt)}function KN(t,a){var r=Nt;Nt|=2;var c=jy(),f=Ry();Vt!==t||it!==a?(pd=null,md=at()+500,zl(t,a)):Ll=qn(t,a);e:do try{if(Rt!==0&&nt!==null){a=nt;var m=hs;t:switch(Rt){case 1:Rt=0,hs=null,ql(t,a,m,1);break;case 2:case 9:if(B0(m)){Rt=0,hs=null,Iy(a);break}a=function(){Rt!==2&&Rt!==9||Vt!==t||(Rt=7),ma(t)},m.then(a,a);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:B0(m)?(Rt=0,hs=null,Iy(a)):(Rt=0,hs=null,ql(t,a,m,7));break;case 5:var v=null;switch(nt.tag){case 26:v=nt.memoizedState;case 5:case 27:var E=nt;if(v?gb(v):E.stateNode.complete){Rt=0,hs=null;var D=E.sibling;if(D!==null)nt=D;else{var W=E.return;W!==null?(nt=W,yd(W)):nt=null}break t}}Rt=0,hs=null,ql(t,a,m,5);break;case 6:Rt=0,hs=null,ql(t,a,m,6);break;case 8:xm(),Wt=6;break e;default:throw Error(i(462))}}QN();break}catch(ae){Sy(t,ae)}while(!0);return Va=Sr=null,M.H=c,M.A=f,Nt=r,nt!==null?0:(Vt=null,it=0,Pu(),Wt)}function QN(){for(;nt!==null&&!Ye();)Cy(nt)}function Cy(t){var a=ey(t.alternate,t,Ga);t.memoizedProps=t.pendingProps,a===null?yd(t):nt=a}function Iy(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=Kx(r,a,a.pendingProps,a.type,void 0,it);break;case 11:a=Kx(r,a,a.pendingProps,a.type.render,a.ref,it);break;case 5:Df(a);default:ny(r,a),a=nt=R0(a,Ga),a=ey(r,a,Ga)}t.memoizedProps=t.pendingProps,a===null?yd(t):nt=a}function ql(t,a,r,c){Va=Sr=null,Df(a),Il=null,Yo=0;var f=a.return;try{if(PN(t,f,a,r,it)){Wt=1,id(t,Ts(r,t.current)),nt=null;return}}catch(m){if(f!==null)throw nt=f,m;Wt=1,id(t,Ts(r,t.current)),nt=null;return}a.flags&32768?(dt||c===1?t=!0:Ll||(it&536870912)!==0?t=!1:(Si=t=!0,(c===2||c===9||c===3||c===6)&&(c=us.current,c!==null&&c.tag===13&&(c.flags|=16384))),ky(a,t)):yd(a)}function yd(t){var a=t;do{if((a.flags&32768)!==0){ky(a,Si);return}t=a.return;var r=BN(a.alternate,a,Ga);if(r!==null){nt=r;return}if(a=a.sibling,a!==null){nt=a;return}nt=a=t}while(a!==null);Wt===0&&(Wt=5)}function ky(t,a){do{var r=zN(t.alternate,t);if(r!==null){r.flags&=32767,nt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){nt=t;return}nt=t=r}while(t!==null);Wt=6,nt=null}function Dy(t,a,r,c,f,m,v,E,D){t.cancelPendingCommit=null;do bd();while(yn!==0);if((Nt&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(m=a.lanes|a.childLanes,m|=rf,ll(t,r,m,v,E,D),t===Vt&&(nt=Vt=null,it=0),Bl=a,Ri=t,Ya=r,mm=m,pm=f,wy=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ZN(_e,function(){return Ly(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=M.T,M.T=null,f=he.p,he.p=2,v=Nt,Nt|=4;try{qN(t,a,r)}finally{Nt=v,he.p=f,M.T=c}}yn=1,My(),Oy(),Vy()}}function My(){if(yn===1){yn=0;var t=Ri,a=Bl,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=M.T,M.T=null;var c=he.p;he.p=2;var f=Nt;Nt|=4;try{my(a,t);var m=Cm,v=v0(t.containerInfo),E=m.focusedElem,D=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&b0(E.ownerDocument.documentElement,E)){if(D!==null&&ef(E)){var W=D.start,ae=D.end;if(ae===void 0&&(ae=W),"selectionStart"in E)E.selectionStart=W,E.selectionEnd=Math.min(ae,E.value.length);else{var oe=E.ownerDocument||document,J=oe&&oe.defaultView||window;if(J.getSelection){var ee=J.getSelection(),Se=E.textContent.length,ze=Math.min(D.start,Se),Ot=D.end===void 0?ze:Math.min(D.end,Se);!ee.extend&&ze>Ot&&(v=Ot,Ot=ze,ze=v);var $=y0(E,ze),B=y0(E,Ot);if($&&B&&(ee.rangeCount!==1||ee.anchorNode!==$.node||ee.anchorOffset!==$.offset||ee.focusNode!==B.node||ee.focusOffset!==B.offset)){var Q=oe.createRange();Q.setStart($.node,$.offset),ee.removeAllRanges(),ze>Ot?(ee.addRange(Q),ee.extend(B.node,B.offset)):(Q.setEnd(B.node,B.offset),ee.addRange(Q))}}}}for(oe=[],ee=E;ee=ee.parentNode;)ee.nodeType===1&&oe.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<oe.length;E++){var re=oe[E];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Id=!!Rm,Cm=Rm=null}finally{Nt=f,he.p=c,M.T=r}}t.current=a,yn=2}}function Oy(){if(yn===2){yn=0;var t=Ri,a=Bl,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=M.T,M.T=null;var c=he.p;he.p=2;var f=Nt;Nt|=4;try{cy(t,a.alternate,a)}finally{Nt=f,he.p=c,M.T=r}}yn=3}}function Vy(){if(yn===4||yn===3){yn=0,Pt();var t=Ri,a=Bl,r=Ya,c=wy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?yn=5:(yn=0,Bl=Ri=null,Py(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ji=null),Ca(r),a=a.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(me,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=M.T,f=he.p,he.p=2,M.T=null;try{for(var m=t.onRecoverableError,v=0;v<c.length;v++){var E=c[v];m(E.value,{componentStack:E.stack})}}finally{M.T=a,he.p=f}}(Ya&3)!==0&&bd(),ma(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===gm?uc++:(uc=0,gm=t):uc=0,dc(0)}}function Py(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,$o(a)))}function bd(){return My(),Oy(),Vy(),Ly()}function Ly(){if(yn!==5)return!1;var t=Ri,a=mm;mm=0;var r=Ca(Ya),c=M.T,f=he.p;try{he.p=32>r?32:r,M.T=null,r=pm,pm=null;var m=Ri,v=Ya;if(yn=0,Bl=Ri=null,Ya=0,(Nt&6)!==0)throw Error(i(331));var E=Nt;if(Nt|=4,by(m.current),gy(m,m.current,v,r),Nt=E,dc(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(me,m)}catch{}return!0}finally{he.p=f,M.T=c,Py(t,a)}}function Uy(t,a,r){a=Ts(r,a),a=Kf(t.stateNode,a,2),t=wi(t,a,2),t!==null&&(On(t,2),ma(t))}function Ct(t,a,r){if(t.tag===3)Uy(t,t,r);else for(;a!==null;){if(a.tag===3){Uy(a,t,r);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ji===null||!ji.has(c))){t=Ts(r,t),r=Bx(2),c=wi(a,r,2),c!==null&&(zx(r,c,a,t),On(c,2),ma(c));break}}a=a.return}}function bm(t,a,r){var c=t.pingCache;if(c===null){c=t.pingCache=new $N;var f=new Set;c.set(a,f)}else f=c.get(a),f===void 0&&(f=new Set,c.set(a,f));f.has(r)||(dm=!0,f.add(r),t=WN.bind(null,t,a,r),a.then(t,t))}function WN(t,a,r){var c=t.pingCache;c!==null&&c.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Vt===t&&(it&r)===r&&(Wt===4||Wt===3&&(it&62914560)===it&&300>at()-fd?(Nt&2)===0&&zl(t,0):hm|=r,Ul===it&&(Ul=0)),ma(t)}function By(t,a){a===0&&(a=Mn()),t=Er(t,a),t!==null&&(On(t,a),ma(t))}function XN(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),By(t,r)}function JN(t,a){var r=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(a),By(t,r)}function ZN(t,a){return Ee(t,a)}var vd=null,Fl=null,vm=!1,_d=!1,_m=!1,Ii=0;function ma(t){t!==Fl&&t.next===null&&(Fl===null?vd=Fl=t:Fl=Fl.next=t),_d=!0,vm||(vm=!0,tT())}function dc(t,a){if(!_m&&_d){_m=!0;do for(var r=!1,c=vd;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-Ue(42|t)+1)-1,m&=f&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,Hy(c,m))}else m=it,m=Dn(c,c===Vt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||qn(c,m)||(r=!0,Hy(c,m));c=c.next}while(r);_m=!1}}function eT(){zy()}function zy(){_d=vm=!1;var t=0;Ii!==0&&dT()&&(t=Ii);for(var a=at(),r=null,c=vd;c!==null;){var f=c.next,m=qy(c,a);m===0?(c.next=null,r===null?vd=f:r.next=f,f===null&&(Fl=r)):(r=c,(t!==0||(m&3)!==0)&&(_d=!0)),c=f}yn!==0&&yn!==5||dc(t),Ii!==0&&(Ii=0)}function qy(t,a){for(var r=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-Ue(m),E=1<<v,D=f[v];D===-1?((E&r)===0||(E&c)!==0)&&(f[v]=Eo(E,a)):D<=a&&(t.expiredLanes|=E),m&=~E}if(a=Vt,r=it,r=Dn(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,r===0||t===a&&(Rt===2||Rt===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&ke(c),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||qn(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(c!==null&&ke(c),Ca(r)){case 2:case 8:r=te;break;case 32:r=_e;break;case 268435456:r=Pe;break;default:r=_e}return c=Fy.bind(null,t),r=Ee(r,c),t.callbackPriority=a,t.callbackNode=r,a}return c!==null&&c!==null&&ke(c),t.callbackPriority=2,t.callbackNode=null,2}function Fy(t,a){if(yn!==0&&yn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(bd()&&t.callbackNode!==r)return null;var c=it;return c=Dn(t,t===Vt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Ny(t,c,a),qy(t,at()),t.callbackNode!=null&&t.callbackNode===r?Fy.bind(null,t):null)}function Hy(t,a){if(bd())return null;Ny(t,a,!0)}function tT(){fT(function(){(Nt&6)!==0?Ee(F,eT):zy()})}function wm(){if(Ii===0){var t=jl;t===0&&(t=At,At<<=1,(At&261888)===0&&(At=256)),Ii=t}return Ii}function $y(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:fl(""+t)}function Gy(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function nT(t,a,r,c,f){if(a==="submit"&&r&&r.stateNode===f){var m=$y((f[_n]||null).action),v=c.submitter;v&&(a=(a=v[_n]||null)?$y(a.formAction):v.getAttribute("formAction"),a!==null&&(m=a,v=null));var E=new la("action","action",null,c,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ii!==0){var D=v?Gy(f,v):new FormData(f);qf(r,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(E.preventDefault(),D=v?Gy(f,v):new FormData(f),qf(r,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var Em=0;Em<af.length;Em++){var Nm=af[Em],sT=Nm.toLowerCase(),aT=Nm[0].toUpperCase()+Nm.slice(1);Fs(sT,"on"+aT)}Fs(E0,"onAnimationEnd"),Fs(N0,"onAnimationIteration"),Fs(T0,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(vN,"onTransitionRun"),Fs(_N,"onTransitionStart"),Fs(wN,"onTransitionCancel"),Fs(S0,"onTransitionEnd"),sa("onMouseEnter",["mouseout","mouseover"]),sa("onMouseLeave",["mouseout","mouseover"]),sa("onPointerEnter",["pointerout","pointerover"]),sa("onPointerLeave",["pointerout","pointerover"]),na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),na("onBeforeInput",["compositionend","keypress","textInput","paste"]),na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hc));function Yy(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var c=t[r],f=c.event;c=c.listeners;e:{var m=void 0;if(a)for(var v=c.length-1;0<=v;v--){var E=c[v],D=E.instance,W=E.currentTarget;if(E=E.listener,D!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=W;try{m(f)}catch(ae){Vu(ae)}f.currentTarget=null,m=D}else for(v=0;v<c.length;v++){if(E=c[v],D=E.instance,W=E.currentTarget,E=E.listener,D!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=W;try{m(f)}catch(ae){Vu(ae)}f.currentTarget=null,m=D}}}}function st(t,a){var r=a[ol];r===void 0&&(r=a[ol]=new Set);var c=t+"__bubble";r.has(c)||(Ky(a,t,2,!1),r.add(c))}function Tm(t,a,r){var c=0;a&&(c|=4),Ky(r,t,c,a)}var wd="_reactListening"+Math.random().toString(36).slice(2);function Sm(t){if(!t[wd]){t[wd]=!0,No.forEach(function(r){r!=="selectionchange"&&(iT.has(r)||Tm(r,!1,t),Tm(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[wd]||(a[wd]=!0,Tm("selectionchange",!1,a))}}function Ky(t,a,r,c){switch(Eb(a)){case 2:var f=DT;break;case 8:f=MT;break;default:f=zm}r=f.bind(null,a,r,t),f=void 0,!pr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(a,r,{capture:!0,passive:f}):t.addEventListener(a,r,!0):f!==void 0?t.addEventListener(a,r,{passive:f}):t.addEventListener(a,r,!1)}function Am(t,a,r,c,f){var m=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var E=c.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=c.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=ea(E),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){c=m=v;continue e}E=E.parentNode}}c=c.return}hi(function(){var W=m,ae=_s(r),oe=[];e:{var J=A0.get(t);if(J!==void 0){var ee=la,Se=t;switch(t){case"keypress":if(xr(r)===0)break e;case"keydown":case"keyup":ee=Du;break;case"focusin":Se="focus",ee=br;break;case"focusout":Se="blur",ee=br;break;case"beforeblur":case"afterblur":ee=br;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=Po;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=y;break;case E0:case N0:case T0:ee=Su;break;case S0:ee=T;break;case"scroll":case"scrollend":ee=Vo;break;case"wheel":ee=Z;break;case"copy":case"cut":case"paste":ee=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=Da;break;case"toggle":case"beforetoggle":ee=Xe}var ze=(a&4)!==0,Ot=!ze&&(t==="scroll"||t==="scrollend"),$=ze?J!==null?J+"Capture":null:J;ze=[];for(var B=W,Q;B!==null;){var re=B;if(Q=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||Q===null||$===null||(re=Us(B,$),re!=null&&ze.push(fc(B,re,Q))),Ot)break;B=B.return}0<ze.length&&(J=new ee(J,Se,null,r,ae),oe.push({event:J,listeners:ze}))}}if((a&7)===0){e:{if(J=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",J&&r!==Do&&(Se=r.relatedTarget||r.fromElement)&&(ea(Se)||Se[Js]))break e;if((ee||J)&&(J=ae.window===ae?ae:(J=ae.ownerDocument)?J.defaultView||J.parentWindow:window,ee?(Se=r.relatedTarget||r.toElement,ee=W,Se=Se?ea(Se):null,Se!==null&&(Ot=u(Se),ze=Se.tag,Se!==Ot||ze!==5&&ze!==27&&ze!==6)&&(Se=null)):(ee=null,Se=W),ee!==Se)){if(ze=Po,re="onMouseLeave",$="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(ze=Da,re="onPointerLeave",$="onPointerEnter",B="pointer"),Ot=ee==null?J:rs(ee),Q=Se==null?J:rs(Se),J=new ze(re,B+"leave",ee,r,ae),J.target=Ot,J.relatedTarget=Q,re=null,ea(ae)===W&&(ze=new ze($,B+"enter",Se,r,ae),ze.target=Q,ze.relatedTarget=Ot,re=ze),Ot=re,ee&&Se)t:{for(ze=rT,$=ee,B=Se,Q=0,re=$;re;re=ze(re))Q++;re=0;for(var Me=B;Me;Me=ze(Me))re++;for(;0<Q-re;)$=ze($),Q--;for(;0<re-Q;)B=ze(B),re--;for(;Q--;){if($===B||B!==null&&$===B.alternate){ze=$;break t}$=ze($),B=ze(B)}ze=null}else ze=null;ee!==null&&Qy(oe,J,ee,ze,!1),Se!==null&&Ot!==null&&Qy(oe,Ot,Se,ze,!0)}}e:{if(J=W?rs(W):window,ee=J.nodeName&&J.nodeName.toLowerCase(),ee==="select"||ee==="input"&&J.type==="file")var xt=h0;else if(u0(J))if(f0)xt=xN;else{xt=pN;var Re=mN}else ee=J.nodeName,!ee||ee.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?W&&hl(W.elementType)&&(xt=h0):xt=gN;if(xt&&(xt=xt(t,W))){d0(oe,xt,r,ae);break e}Re&&Re(t,J,W),t==="focusout"&&W&&J.type==="number"&&W.memoizedProps.value!=null&&Co(J,"number",J.value)}switch(Re=W?rs(W):window,t){case"focusin":(u0(Re)||Re.contentEditable==="true")&&(vl=Re,tf=W,qo=null);break;case"focusout":qo=tf=vl=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,_0(oe,r,ae);break;case"selectionchange":if(bN)break;case"keydown":case"keyup":_0(oe,r,ae)}var Ze;if(Et)e:{switch(t){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else bl?vr(t,r)&&(rt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(rt="onCompositionStart");rt&&(ua&&r.locale!=="ko"&&(bl||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&bl&&(Ze=Oo()):(ra=ae,Mo="value"in ra?ra.value:ra.textContent,bl=!0)),Re=Ed(W,rt),0<Re.length&&(rt=new ca(rt,t,null,r,ae),oe.push({event:rt,listeners:Re}),Ze?rt.data=Ze:(Ze=yl(r),Ze!==null&&(rt.data=Ze)))),(Ze=Es?uN(t,r):dN(t,r))&&(rt=Ed(W,"onBeforeInput"),0<rt.length&&(Re=new ca("onBeforeInput","beforeinput",null,r,ae),oe.push({event:Re,listeners:rt}),Re.data=Ze)),nT(oe,t,W,r,ae)}Yy(oe,a)})}function fc(t,a,r){return{instance:t,listener:a,currentTarget:r}}function Ed(t,a){for(var r=a+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Us(t,r),f!=null&&c.unshift(fc(t,f,m)),f=Us(t,a),f!=null&&c.push(fc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function rT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Qy(t,a,r,c,f){for(var m=a._reactName,v=[];r!==null&&r!==c;){var E=r,D=E.alternate,W=E.stateNode;if(E=E.tag,D!==null&&D===c)break;E!==5&&E!==26&&E!==27||W===null||(D=W,f?(W=Us(r,m),W!=null&&v.unshift(fc(r,W,D))):f||(W=Us(r,m),W!=null&&v.push(fc(r,W,D)))),r=r.return}v.length!==0&&t.push({event:a,listeners:v})}var lT=/\r\n?/g,oT=/\u0000|\uFFFD/g;function Wy(t){return(typeof t=="string"?t:""+t).replace(lT,`
`).replace(oT,"")}function Xy(t,a){return a=Wy(a),Wy(t)===a}function Mt(t,a,r,c,f,m){switch(r){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Yn(t,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Yn(t,""+c);break;case"className":ls(t,"class",c);break;case"tabIndex":ls(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(t,r,c);break;case"style":ko(t,c,m);break;case"data":if(a!=="object"){ls(t,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=fl(""+c),t.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(a!=="input"&&Mt(t,a,"name",f.name,f,null),Mt(t,a,"formEncType",f.formEncType,f,null),Mt(t,a,"formMethod",f.formMethod,f,null),Mt(t,a,"formTarget",f.formTarget,f,null)):(Mt(t,a,"encType",f.encType,f,null),Mt(t,a,"method",f.method,f,null),Mt(t,a,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=fl(""+c),t.setAttribute(r,c);break;case"onClick":c!=null&&(t.onclick=Ls);break;case"onScroll":c!=null&&st("scroll",t);break;case"onScrollEnd":c!=null&&st("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}r=fl(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""+c):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":c===!0?t.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,c):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(r,c):t.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(r):t.setAttribute(r,c);break;case"popover":st("beforetoggle",t),st("toggle",t),ul(t,"popover",c);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ul(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Eu.get(r)||r,ul(t,r,c))}}function jm(t,a,r,c,f,m){switch(r){case"style":ko(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof c=="string"?Yn(t,c):(typeof c=="number"||typeof c=="bigint")&&Yn(t,""+c);break;case"onScroll":c!=null&&st("scroll",t);break;case"onScrollEnd":c!=null&&st("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Ls);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!To.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),a=r.slice(2,f?r.length-7:void 0),m=t[_n]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(a,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,c,f);break e}r in t?t[r]=c:c===!0?t.setAttribute(r,""):ul(t,r,c)}}}function Rn(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",t),st("load",t);var c=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var v=r[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Mt(t,a,m,v,r,null)}}f&&Mt(t,a,"srcSet",r.srcSet,r,null),c&&Mt(t,a,"src",r.src,r,null);return;case"input":st("invalid",t);var E=m=v=f=null,D=null,W=null;for(c in r)if(r.hasOwnProperty(c)){var ae=r[c];if(ae!=null)switch(c){case"name":f=ae;break;case"type":v=ae;break;case"checked":D=ae;break;case"defaultChecked":W=ae;break;case"value":m=ae;break;case"defaultValue":E=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,a));break;default:Mt(t,a,c,ae,r,null)}}vu(t,m,E,D,W,v,f,!1);return;case"select":st("invalid",t),c=v=m=null;for(f in r)if(r.hasOwnProperty(f)&&(E=r[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":c=E;default:Mt(t,a,f,E,r,null)}a=m,r=v,t.multiple=!!c,a!=null?oi(t,!!c,a,!1):r!=null&&oi(t,!!c,r,!0);return;case"textarea":st("invalid",t),m=f=c=null;for(v in r)if(r.hasOwnProperty(v)&&(E=r[v],E!=null))switch(v){case"value":c=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Mt(t,a,v,E,r,null)}ci(t,c,f,m);return;case"option":for(D in r)r.hasOwnProperty(D)&&(c=r[D],c!=null)&&(D==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":Mt(t,a,D,c,r,null));return;case"dialog":st("beforetoggle",t),st("toggle",t),st("cancel",t),st("close",t);break;case"iframe":case"object":st("load",t);break;case"video":case"audio":for(c=0;c<hc.length;c++)st(hc[c],t);break;case"image":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"embed":case"source":case"link":st("error",t),st("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in r)if(r.hasOwnProperty(W)&&(c=r[W],c!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Mt(t,a,W,c,r,null)}return;default:if(hl(a)){for(ae in r)r.hasOwnProperty(ae)&&(c=r[ae],c!==void 0&&jm(t,a,ae,c,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(c=r[E],c!=null&&Mt(t,a,E,c,r,null))}function cT(t,a,r,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,E=null,D=null,W=null,ae=null;for(ee in r){var oe=r[ee];if(r.hasOwnProperty(ee)&&oe!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":D=oe;default:c.hasOwnProperty(ee)||Mt(t,a,ee,null,c,oe)}}for(var J in c){var ee=c[J];if(oe=r[J],c.hasOwnProperty(J)&&(ee!=null||oe!=null))switch(J){case"type":m=ee;break;case"name":f=ee;break;case"checked":W=ee;break;case"defaultChecked":ae=ee;break;case"value":v=ee;break;case"defaultValue":E=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,a));break;default:ee!==oe&&Mt(t,a,J,ee,c,oe)}}dl(t,v,E,D,W,ae,m,f);return;case"select":ee=v=E=J=null;for(m in r)if(D=r[m],r.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":ee=D;default:c.hasOwnProperty(m)||Mt(t,a,m,null,c,D)}for(f in c)if(m=c[f],D=r[f],c.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":J=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==D&&Mt(t,a,f,m,c,D)}a=E,r=v,c=ee,J!=null?oi(t,!!r,J,!1):!!c!=!!r&&(a!=null?oi(t,!!r,a,!0):oi(t,!!r,r?[]:"",!1));return;case"textarea":ee=J=null;for(E in r)if(f=r[E],r.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Mt(t,a,E,null,c,f)}for(v in c)if(f=c[v],m=r[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":J=f;break;case"defaultValue":ee=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Mt(t,a,v,f,c,m)}_u(t,J,ee);return;case"option":for(var Se in r)J=r[Se],r.hasOwnProperty(Se)&&J!=null&&!c.hasOwnProperty(Se)&&(Se==="selected"?t.selected=!1:Mt(t,a,Se,null,c,J));for(D in c)J=c[D],ee=r[D],c.hasOwnProperty(D)&&J!==ee&&(J!=null||ee!=null)&&(D==="selected"?t.selected=J&&typeof J!="function"&&typeof J!="symbol":Mt(t,a,D,J,c,ee));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in r)J=r[ze],r.hasOwnProperty(ze)&&J!=null&&!c.hasOwnProperty(ze)&&Mt(t,a,ze,null,c,J);for(W in c)if(J=c[W],ee=r[W],c.hasOwnProperty(W)&&J!==ee&&(J!=null||ee!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:Mt(t,a,W,J,c,ee)}return;default:if(hl(a)){for(var Ot in r)J=r[Ot],r.hasOwnProperty(Ot)&&J!==void 0&&!c.hasOwnProperty(Ot)&&jm(t,a,Ot,void 0,c,J);for(ae in c)J=c[ae],ee=r[ae],!c.hasOwnProperty(ae)||J===ee||J===void 0&&ee===void 0||jm(t,a,ae,J,c,ee);return}}for(var $ in r)J=r[$],r.hasOwnProperty($)&&J!=null&&!c.hasOwnProperty($)&&Mt(t,a,$,null,c,J);for(oe in c)J=c[oe],ee=r[oe],!c.hasOwnProperty(oe)||J===ee||J==null&&ee==null||Mt(t,a,oe,J,c,ee)}function Jy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var f=r[c],m=f.transferSize,v=f.initiatorType,E=f.duration;if(m&&E&&Jy(v)){for(v=0,E=f.responseEnd,c+=1;c<r.length;c++){var D=r[c],W=D.startTime;if(W>E)break;var ae=D.transferSize,oe=D.initiatorType;ae&&Jy(oe)&&(D=D.responseEnd,v+=ae*(D<E?1:(E-W)/(D-W)))}if(--c,a+=8*(m+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Rm=null,Cm=null;function Nd(t){return t.nodeType===9?t:t.ownerDocument}function Zy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eb(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Im(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var km=null;function dT(){var t=window.event;return t&&t.type==="popstate"?t===km?!1:(km=t,!0):(km=null,!1)}var tb=typeof setTimeout=="function"?setTimeout:void 0,hT=typeof clearTimeout=="function"?clearTimeout:void 0,nb=typeof Promise=="function"?Promise:void 0,fT=typeof queueMicrotask=="function"?queueMicrotask:typeof nb<"u"?function(t){return nb.resolve(null).then(t).catch(mT)}:tb;function mT(t){setTimeout(function(){throw t})}function ki(t){return t==="head"}function sb(t,a){var r=a,c=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(c===0){t.removeChild(f),Yl(a);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")mc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,mc(r);for(var m=r.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[Zs]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=v}}else r==="body"&&mc(t.ownerDocument.body);r=f}while(r);Yl(a)}function ab(t,a){var r=t;t=0;do{var c=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=c}while(r)}function Dm(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Dm(r),cl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function pT(t,a,r,c){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Zs])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Cs(t.nextSibling),t===null)break}return null}function gT(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Cs(t.nextSibling),t===null))return null;return t}function ib(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Cs(t.nextSibling),t===null))return null;return t}function Mm(t){return t.data==="$?"||t.data==="$~"}function Om(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function xT(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var c=function(){a(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Cs(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Vm=null;function rb(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return Cs(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function lb(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function ob(t,a,r){switch(a=Nd(r),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function mc(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);cl(t)}var Is=new Map,cb=new Set;function Td(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ka=he.d;he.d={f:yT,r:bT,D:vT,C:_T,L:wT,m:ET,X:TT,S:NT,M:ST};function yT(){var t=Ka.f(),a=gd();return t||a}function bT(t){var a=vs(t);a!==null&&a.tag===5&&a.type==="form"?Sx(a):Ka.r(t)}var Hl=typeof document>"u"?null:document;function ub(t,a,r){var c=Hl;if(c&&typeof a=="string"&&a){var f=Gn(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),cb.has(f)||(cb.add(f),t={rel:t,crossOrigin:r,href:a},c.querySelector(f)===null&&(a=c.createElement("link"),Rn(a,"link",t),rn(a),c.head.appendChild(a)))}}function vT(t){Ka.D(t),ub("dns-prefetch",t,null)}function _T(t,a){Ka.C(t,a),ub("preconnect",t,a)}function wT(t,a,r){Ka.L(t,a,r);var c=Hl;if(c&&t&&a){var f='link[rel="preload"][as="'+Gn(a)+'"]';a==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Gn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Gn(r.imageSizes)+'"]')):f+='[href="'+Gn(t)+'"]';var m=f;switch(a){case"style":m=$l(t);break;case"script":m=Gl(t)}Is.has(m)||(t=w({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),Is.set(m,t),c.querySelector(f)!==null||a==="style"&&c.querySelector(pc(m))||a==="script"&&c.querySelector(gc(m))||(a=c.createElement("link"),Rn(a,"link",t),rn(a),c.head.appendChild(a)))}}function ET(t,a){Ka.m(t,a);var r=Hl;if(r&&t){var c=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Gn(c)+'"][href="'+Gn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Gl(t)}if(!Is.has(m)&&(t=w({rel:"modulepreload",href:t},a),Is.set(m,t),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(gc(m)))return}c=r.createElement("link"),Rn(c,"link",t),rn(c),r.head.appendChild(c)}}}function NT(t,a,r){Ka.S(t,a,r);var c=Hl;if(c&&t){var f=ta(c).hoistableStyles,m=$l(t);a=a||"default";var v=f.get(m);if(!v){var E={loading:0,preload:null};if(v=c.querySelector(pc(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":a},r),(r=Is.get(m))&&Pm(t,r);var D=v=c.createElement("link");rn(D),Rn(D,"link",t),D._p=new Promise(function(W,ae){D.onload=W,D.onerror=ae}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Sd(v,a,c)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(m,v)}}}function TT(t,a){Ka.X(t,a);var r=Hl;if(r&&t){var c=ta(r).hoistableScripts,f=Gl(t),m=c.get(f);m||(m=r.querySelector(gc(f)),m||(t=w({src:t,async:!0},a),(a=Is.get(f))&&Lm(t,a),m=r.createElement("script"),rn(m),Rn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function ST(t,a){Ka.M(t,a);var r=Hl;if(r&&t){var c=ta(r).hoistableScripts,f=Gl(t),m=c.get(f);m||(m=r.querySelector(gc(f)),m||(t=w({src:t,async:!0,type:"module"},a),(a=Is.get(f))&&Lm(t,a),m=r.createElement("script"),rn(m),Rn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function db(t,a,r,c){var f=(f=je.current)?Td(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=$l(r.href),r=ta(f).hoistableStyles,c=r.get(a),c||(c={type:"style",instance:null,count:0,state:null},r.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=$l(r.href);var m=ta(f).hoistableStyles,v=m.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=f.querySelector(pc(t)))&&!m._p&&(v.instance=m,v.state.loading=5),Is.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Is.set(t,r),m||AT(f,t,r,v.state))),a&&c===null)throw Error(i(528,""));return v}if(a&&c!==null)throw Error(i(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Gl(r),r=ta(f).hoistableScripts,c=r.get(a),c||(c={type:"script",instance:null,count:0,state:null},r.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function $l(t){return'href="'+Gn(t)+'"'}function pc(t){return'link[rel="stylesheet"]['+t+"]"}function hb(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function AT(t,a,r,c){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=t.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Rn(a,"link",r),rn(a),t.head.appendChild(a))}function Gl(t){return'[src="'+Gn(t)+'"]'}function gc(t){return"script[async]"+t}function fb(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var c=t.querySelector('style[data-href~="'+Gn(r.href)+'"]');if(c)return a.instance=c,rn(c),c;var f=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),rn(c),Rn(c,"style",f),Sd(c,r.precedence,t),a.instance=c;case"stylesheet":f=$l(r.href);var m=t.querySelector(pc(f));if(m)return a.state.loading|=4,a.instance=m,rn(m),m;c=hb(r),(f=Is.get(f))&&Pm(c,f),m=(t.ownerDocument||t).createElement("link"),rn(m);var v=m;return v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),Rn(m,"link",c),a.state.loading|=4,Sd(m,r.precedence,t),a.instance=m;case"script":return m=Gl(r.src),(f=t.querySelector(gc(m)))?(a.instance=f,rn(f),f):(c=r,(f=Is.get(m))&&(c=w({},r),Lm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),rn(f),Rn(f,"link",c),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Sd(c,r.precedence,t));return a.instance}function Sd(t,a,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var E=c[v];if(E.dataset.precedence===a)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function Pm(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Lm(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Ad=null;function mb(t,a,r){if(Ad===null){var c=new Map,f=Ad=new Map;f.set(r,c)}else f=Ad,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(t))return c;for(c.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var m=r[f];if(!(m[Zs]||m[an]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(a)||"";v=t+v;var E=c.get(v);E?E.push(m):c.set(v,[m])}}return c}function pb(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function jT(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function gb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function RT(t,a,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=$l(c.href),m=a.querySelector(pc(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=jd.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=m,rn(m);return}m=a.ownerDocument||a,c=hb(c),(f=Is.get(f))&&Pm(c,f),m=m.createElement("link"),rn(m);var v=m;v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),Rn(m,"link",c),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=jd.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var Um=0;function CT(t,a){return t.stylesheets&&t.count===0&&Cd(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var c=setTimeout(function(){if(t.stylesheets&&Cd(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+a);0<t.imgBytes&&Um===0&&(Um=62500*uT());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Cd(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Um?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function jd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Rd=null;function Cd(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Rd=new Map,a.forEach(IT,t),Rd=null,jd.call(t))}function IT(t,a){if(!(a.state.loading&4)){var r=Rd.get(t);if(r)var c=r.get(null);else{r=new Map,Rd.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),c=v)}c&&r.set(null,c)}f=a.instance,v=f.getAttribute("data-precedence"),m=r.get(v)||c,m===c&&r.set(null,f),r.set(v,f),this.count++,c=jd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var xc={$$typeof:K,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function kT(t,a,r,c,f,m,v,E,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=is(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=is(0),this.hiddenUpdates=is(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function xb(t,a,r,c,f,m,v,E,D,W,ae,oe){return t=new kT(t,a,r,v,D,W,ae,oe,E),a=1,m===!0&&(a|=24),m=cs(3,null,null,a),t.current=m,m.stateNode=t,a=yf(),a.refCount++,t.pooledCache=a,a.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:a},wf(m),t}function yb(t){return t?(t=El,t):El}function bb(t,a,r,c,f,m){f=yb(f),c.context===null?c.context=f:c.pendingContext=f,c=_i(a),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=wi(t,c,a),r!==null&&(Jn(r,t,a),Qo(r,t,a))}function vb(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function Bm(t,a){vb(t,a),(t=t.alternate)&&vb(t,a)}function _b(t){if(t.tag===13||t.tag===31){var a=Er(t,67108864);a!==null&&Jn(a,t,67108864),Bm(t,67108864)}}function wb(t){if(t.tag===13||t.tag===31){var a=ms();a=ri(a);var r=Er(t,a);r!==null&&Jn(r,t,a),Bm(t,a)}}var Id=!0;function DT(t,a,r,c){var f=M.T;M.T=null;var m=he.p;try{he.p=2,zm(t,a,r,c)}finally{he.p=m,M.T=f}}function MT(t,a,r,c){var f=M.T;M.T=null;var m=he.p;try{he.p=8,zm(t,a,r,c)}finally{he.p=m,M.T=f}}function zm(t,a,r,c){if(Id){var f=qm(c);if(f===null)Am(t,a,c,kd,r),Nb(t,c);else if(VT(f,t,a,r,c))c.stopPropagation();else if(Nb(t,c),a&4&&-1<OT.indexOf(t)){for(;f!==null;){var m=vs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=xn(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var D=1<<31-Ue(v);E.entanglements[1]|=D,v&=~D}ma(m),(Nt&6)===0&&(md=at()+500,dc(0))}}break;case 31:case 13:E=Er(m,2),E!==null&&Jn(E,m,2),gd(),Bm(m,2)}if(m=qm(c),m===null&&Am(t,a,c,kd,r),m===f)break;f=m}f!==null&&c.stopPropagation()}else Am(t,a,c,null,r)}}function qm(t){return t=_s(t),Fm(t)}var kd=null;function Fm(t){if(kd=null,t=ea(t),t!==null){var a=u(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=h(a),t!==null)return t;t=null}else if(r===31){if(t=p(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return kd=t,null}function Eb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case F:return 2;case te:return 8;case _e:case we:return 32;case Pe:return 268435456;default:return 32}default:return 32}}var Hm=!1,Di=null,Mi=null,Oi=null,yc=new Map,bc=new Map,Vi=[],OT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nb(t,a){switch(t){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":yc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":bc.delete(a.pointerId)}}function vc(t,a,r,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:a,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},a!==null&&(a=vs(a),a!==null&&_b(a)),t):(t.eventSystemFlags|=c,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function VT(t,a,r,c,f){switch(a){case"focusin":return Di=vc(Di,t,a,r,c,f),!0;case"dragenter":return Mi=vc(Mi,t,a,r,c,f),!0;case"mouseover":return Oi=vc(Oi,t,a,r,c,f),!0;case"pointerover":var m=f.pointerId;return yc.set(m,vc(yc.get(m)||null,t,a,r,c,f)),!0;case"gotpointercapture":return m=f.pointerId,bc.set(m,vc(bc.get(m)||null,t,a,r,c,f)),!0}return!1}function Tb(t){var a=ea(t.target);if(a!==null){var r=u(a);if(r!==null){if(a=r.tag,a===13){if(a=h(r),a!==null){t.blockedOn=a,Vs(t.priority,function(){wb(r)});return}}else if(a===31){if(a=p(r),a!==null){t.blockedOn=a,Vs(t.priority,function(){wb(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dd(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=qm(t.nativeEvent);if(r===null){r=t.nativeEvent;var c=new r.constructor(r.type,r);Do=c,r.target.dispatchEvent(c),Do=null}else return a=vs(r),a!==null&&_b(a),t.blockedOn=r,!1;a.shift()}return!0}function Sb(t,a,r){Dd(t)&&r.delete(a)}function PT(){Hm=!1,Di!==null&&Dd(Di)&&(Di=null),Mi!==null&&Dd(Mi)&&(Mi=null),Oi!==null&&Dd(Oi)&&(Oi=null),yc.forEach(Sb),bc.forEach(Sb)}function Md(t,a){t.blockedOn===a&&(t.blockedOn=null,Hm||(Hm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,PT)))}var Od=null;function Ab(t){Od!==t&&(Od=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Od===t&&(Od=null);for(var a=0;a<t.length;a+=3){var r=t[a],c=t[a+1],f=t[a+2];if(typeof c!="function"){if(Fm(c||r)===null)continue;break}var m=vs(r);m!==null&&(t.splice(a,3),a-=3,qf(m,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function Yl(t){function a(D){return Md(D,t)}Di!==null&&Md(Di,t),Mi!==null&&Md(Mi,t),Oi!==null&&Md(Oi,t),yc.forEach(a),bc.forEach(a);for(var r=0;r<Vi.length;r++){var c=Vi[r];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Vi.length&&(r=Vi[0],r.blockedOn===null);)Tb(r),r.blockedOn===null&&Vi.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],m=r[c+1],v=f[_n]||null;if(typeof m=="function")v||Ab(r);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[_n]||null)E=v.formAction;else if(Fm(f)!==null)continue}else E=v.action;typeof E=="function"?r[c+1]=E:(r.splice(c,3),c-=3),Ab(r)}}}function jb(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function $m(t){this._internalRoot=t}Vd.prototype.render=$m.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var r=a.current,c=ms();bb(r,c,t,a,null,null)},Vd.prototype.unmount=$m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;bb(t.current,2,null,t,null,null),gd(),a[Js]=null}};function Vd(t){this._internalRoot=t}Vd.prototype.unstable_scheduleHydration=function(t){if(t){var a=gu();t={blockedOn:null,target:t,priority:a};for(var r=0;r<Vi.length&&a!==0&&a<Vi[r].priority;r++);Vi.splice(r,0,t),r===0&&Tb(t)}};var Rb=e.version;if(Rb!=="19.2.4")throw Error(i(527,Rb,"19.2.4"));he.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=x(a),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var LT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pd.isDisabled&&Pd.supportsFiber)try{me=Pd.inject(LT),ye=Pd}catch{}}return wc.createRoot=function(t,a){if(!l(t))throw Error(i(299));var r=!1,c="",f=Vx,m=Px,v=Lx;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=xb(t,1,!1,null,null,r,c,null,f,m,v,jb),t[Js]=a.current,Sm(t),new $m(a)},wc.hydrateRoot=function(t,a,r){if(!l(t))throw Error(i(299));var c=!1,f="",m=Vx,v=Px,E=Lx,D=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.formState!==void 0&&(D=r.formState)),a=xb(t,1,!0,a,r??null,c,f,D,m,v,E,jb),a.context=yb(null),r=a.current,c=ms(),c=ri(c),f=_i(c),f.callback=null,wi(r,f,c),r=c,a.current.lanes=r,On(a,r),ma(a),t[Js]=a.current,Sm(t),new Vd(a)},wc.version="19.2.4",wc}var Ub;function QT(){if(Ub)return Km.exports;Ub=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Km.exports=KT(),Km.exports}var WT=QT();const XT=$_(WT);var Bb="popstate";function JT(s={}){function e(l,u){let{pathname:h="/",search:p="",hash:g=""}=el(l.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),vp("",{pathname:h,search:p,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(l,u){let h=l.document.querySelector("base"),p="";if(h&&h.getAttribute("href")){let g=l.location.href,x=g.indexOf("#");p=x===-1?g:g.slice(0,x)}return p+"#"+(typeof u=="string"?u:qc(u))}function i(l,u){Os(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return e2(e,n,i,s)}function $t(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Os(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZT(){return Math.random().toString(36).substring(2,10)}function zb(s,e){return{usr:s.state,key:s.key,idx:e}}function vp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?el(e):e,state:n,key:e&&e.key||i||ZT()}}function qc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function el(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function e2(s,e,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,h=l.history,p="POP",g=null,x=b();x==null&&(x=0,h.replaceState({...h.state,idx:x},""));function b(){return(h.state||{idx:null}).idx}function w(){p="POP";let O=b(),L=O==null?null:O-x;x=O,g&&g({action:p,location:z.location,delta:L})}function N(O,L){p="PUSH";let H=vp(z.location,O,L);n&&n(H,O),x=b()+1;let K=zb(H,x),fe=z.createHref(H);try{h.pushState(K,"",fe)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;l.location.assign(fe)}u&&g&&g({action:p,location:z.location,delta:1})}function C(O,L){p="REPLACE";let H=vp(z.location,O,L);n&&n(H,O),x=b();let K=zb(H,x),fe=z.createHref(H);h.replaceState(K,"",fe),u&&g&&g({action:p,location:z.location,delta:0})}function G(O){return t2(O)}let z={get action(){return p},get location(){return s(l,h)},listen(O){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Bb,w),g=O,()=>{l.removeEventListener(Bb,w),g=null}},createHref(O){return e(l,O)},createURL:G,encodeLocation(O){let L=G(O);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:N,replace:C,go(O){return h.go(O)}};return z}function t2(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),$t(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:qc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function G_(s,e,n="/"){return n2(s,e,n,!1)}function n2(s,e,n,i){let l=typeof e=="string"?el(e):e,u=ei(l.pathname||"/",n);if(u==null)return null;let h=Y_(s);s2(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let x=m2(u);p=h2(h[g],x,i)}return p}function Y_(s,e=[],n=[],i="",l=!1){let u=(h,p,g=l,x)=>{let b={relativePath:x===void 0?h.path||"":x,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;$t(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let w=Xa([i,b.relativePath]),N=n.concat(b);h.children&&h.children.length>0&&($t(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Y_(h.children,e,N,w,g)),!(h.path==null&&!h.index)&&e.push({path:w,score:u2(w,h.index),routesMeta:N})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of K_(h.path))u(h,p,!0,g)}),e}function K_(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let h=K_(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function s2(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:d2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var a2=/^:[\w-]+$/,i2=3,r2=2,l2=1,o2=10,c2=-2,qb=s=>s==="*";function u2(s,e){let n=s.split("/"),i=n.length;return n.some(qb)&&(i+=c2),e&&(i+=r2),n.filter(l=>!qb(l)).reduce((l,u)=>l+(a2.test(u)?i2:u===""?l2:o2),i)}function d2(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function h2(s,e,n=!1){let{routesMeta:i}=s,l={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],x=p===i.length-1,b=u==="/"?e:e.slice(u.length)||"/",w=ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},b),N=g.route;if(!w&&x&&n&&!i[i.length-1].route.index&&(w=ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!w)return null;Object.assign(l,w.params),h.push({params:l,pathname:Xa([u,w.pathname]),pathnameBase:y2(Xa([u,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(u=Xa([u,w.pathnameBase]))}return h}function ih(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=f2(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((x,{paramName:b,isOptional:w},N)=>{if(b==="*"){let G=p[N]||"";h=u.slice(0,u.length-G.length).replace(/(.)\/+$/,"$1")}const C=p[N];return w&&!C?x[b]=void 0:x[b]=(C||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:h,pattern:s}}function f2(s,e=!1,n=!0){Os(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function m2(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Os(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ei(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var p2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function g2(s,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof s=="string"?el(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=Fb(n.substring(1),"/"):u=Fb(n,e)):u=e,{pathname:u,search:b2(i),hash:v2(l)}}function Fb(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Jm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function x2(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function eg(s){let e=x2(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function tg(s,e,n,i=!1){let l;typeof s=="string"?l=el(s):(l={...s},$t(!l.pathname||!l.pathname.includes("?"),Jm("?","pathname","search",l)),$t(!l.pathname||!l.pathname.includes("#"),Jm("#","pathname","hash",l)),$t(!l.search||!l.search.includes("#"),Jm("#","search","hash",l)));let u=s===""||l.pathname==="",h=u?"/":l.pathname,p;if(h==null)p=n;else{let w=e.length-1;if(!i&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),w-=1;l.pathname=N.join("/")}p=w>=0?e[w]:"/"}let g=g2(l,p),x=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(x||b)&&(g.pathname+="/"),g}var Xa=s=>s.join("/").replace(/\/\/+/g,"/"),y2=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),b2=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,v2=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,_2=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function w2(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function E2(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Q_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function W_(s,e){let n=s;if(typeof n!="string"||!p2.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(Q_)try{let u=new URL(window.location.href),h=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=ei(h.pathname,e);h.origin===u.origin&&p!=null?n=p+h.search+h.hash:l=!0}catch{Os(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var X_=["POST","PUT","PATCH","DELETE"];new Set(X_);var N2=["GET",...X_];new Set(N2);var po=j.createContext(null);po.displayName="DataRouter";var Ah=j.createContext(null);Ah.displayName="DataRouterState";var T2=j.createContext(!1),J_=j.createContext({isTransitioning:!1});J_.displayName="ViewTransition";var S2=j.createContext(new Map);S2.displayName="Fetchers";var A2=j.createContext(null);A2.displayName="Await";var bs=j.createContext(null);bs.displayName="Navigation";var eu=j.createContext(null);eu.displayName="Location";var Xs=j.createContext({outlet:null,matches:[],isDataRoute:!1});Xs.displayName="Route";var ng=j.createContext(null);ng.displayName="RouteError";var Z_="REACT_ROUTER_ERROR",j2="REDIRECT",R2="ROUTE_ERROR_RESPONSE";function C2(s){if(s.startsWith(`${Z_}:${j2}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function I2(s){if(s.startsWith(`${Z_}:${R2}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new _2(e.status,e.statusText,e.data)}catch{}}function k2(s,{relative:e}={}){$t(go(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=j.useContext(bs),{hash:l,pathname:u,search:h}=nu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Xa([n,u])),i.createHref({pathname:p,search:h,hash:l})}function go(){return j.useContext(eu)!=null}function ir(){return $t(go(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(eu).location}var ew="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tw(s){j.useContext(bs).static||j.useLayoutEffect(s)}function xo(){let{isDataRoute:s}=j.useContext(Xs);return s?$2():D2()}function D2(){$t(go(),"useNavigate() may be used only in the context of a <Router> component.");let s=j.useContext(po),{basename:e,navigator:n}=j.useContext(bs),{matches:i}=j.useContext(Xs),{pathname:l}=ir(),u=JSON.stringify(eg(i)),h=j.useRef(!1);return tw(()=>{h.current=!0}),j.useCallback((g,x={})=>{if(Os(h.current,ew),!h.current)return;if(typeof g=="number"){n.go(g);return}let b=tg(g,JSON.parse(u),l,x.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Xa([e,b.pathname])),(x.replace?n.replace:n.push)(b,x.state,x)},[e,n,u,l,s])}j.createContext(null);function tu(){let{matches:s}=j.useContext(Xs),e=s[s.length-1];return e?e.params:{}}function nu(s,{relative:e}={}){let{matches:n}=j.useContext(Xs),{pathname:i}=ir(),l=JSON.stringify(eg(n));return j.useMemo(()=>tg(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function M2(s,e){return nw(s,e)}function nw(s,e,n,i,l){$t(go(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(bs),{matches:h}=j.useContext(Xs),p=h[h.length-1],g=p?p.params:{},x=p?p.pathname:"/",b=p?p.pathnameBase:"/",w=p&&p.route;{let H=w&&w.path||"";aw(x,!w||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let N=ir(),C;if(e){let H=typeof e=="string"?el(e):e;$t(b==="/"||H.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${H.pathname}" was given in the \`location\` prop.`),C=H}else C=N;let G=C.pathname||"/",z=G;if(b!=="/"){let H=b.replace(/^\//,"").split("/");z="/"+G.replace(/^\//,"").split("/").slice(H.length).join("/")}let O=G_(s,{pathname:z});Os(w||O!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Os(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=U2(O&&O.map(H=>Object.assign({},H,{params:Object.assign({},g,H.params),pathname:Xa([b,u.encodeLocation?u.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?b:Xa([b,u.encodeLocation?u.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),h,n,i,l);return e&&L?j.createElement(eu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},L):L}function O2(){let s=H2(),e=w2(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:l},n):null,h)}var V2=j.createElement(O2,null),sw=class extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=I2(s.digest);n&&(s=n)}let e=s!==void 0?j.createElement(Xs.Provider,{value:this.props.routeContext},j.createElement(ng.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?j.createElement(P2,{error:s},e):e}};sw.contextType=T2;var Zm=new WeakMap;function P2({children:s,error:e}){let{basename:n}=j.useContext(bs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=C2(e.digest);if(i){let l=Zm.get(e);if(l)throw l;let u=W_(i.location,n);if(Q_&&!Zm.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw Zm.set(e,h),h}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function L2({routeContext:s,match:e,children:n}){let i=j.useContext(po);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Xs.Provider,{value:s},n)}function U2(s,e=[],n=null,i=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,h=n?.errors;if(h!=null){let b=u.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);$t(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(n)for(let b=0;b<u.length;b++){let w=u[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=b),w.route.id){let{loaderData:N,errors:C}=n,G=w.route.loader&&!N.hasOwnProperty(w.route.id)&&(!C||C[w.route.id]===void 0);if(w.route.lazy||G){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let x=n&&i?(b,w)=>{i(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:E2(n.matches),errorInfo:w})}:void 0;return u.reduceRight((b,w,N)=>{let C,G=!1,z=null,O=null;n&&(C=h&&w.route.id?h[w.route.id]:void 0,z=w.route.errorElement||V2,p&&(g<0&&N===0?(aw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),G=!0,O=null):g===N&&(G=!0,O=w.route.hydrateFallbackElement||null)));let L=e.concat(u.slice(0,N+1)),H=()=>{let K;return C?K=z:G?K=O:w.route.Component?K=j.createElement(w.route.Component,null):w.route.element?K=w.route.element:K=b,j.createElement(L2,{match:w,routeContext:{outlet:b,matches:L,isDataRoute:n!=null},children:K})};return n&&(w.route.ErrorBoundary||w.route.errorElement||N===0)?j.createElement(sw,{location:n.location,revalidation:n.revalidation,component:z,error:C,children:H(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:x}):H()},null)}function sg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function B2(s){let e=j.useContext(po);return $t(e,sg(s)),e}function z2(s){let e=j.useContext(Ah);return $t(e,sg(s)),e}function q2(s){let e=j.useContext(Xs);return $t(e,sg(s)),e}function ag(s){let e=q2(s),n=e.matches[e.matches.length-1];return $t(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function F2(){return ag("useRouteId")}function H2(){let s=j.useContext(ng),e=z2("useRouteError"),n=ag("useRouteError");return s!==void 0?s:e.errors?.[n]}function $2(){let{router:s}=B2("useNavigate"),e=ag("useNavigate"),n=j.useRef(!1);return tw(()=>{n.current=!0}),j.useCallback(async(l,u={})=>{Os(n.current,ew),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var Hb={};function aw(s,e,n){!e&&!Hb[s]&&(Hb[s]=!0,Os(!1,n))}j.memo(G2);function G2({routes:s,future:e,state:n,onError:i}){return nw(s,void 0,n,i,e)}function Y2({to:s,replace:e,state:n,relative:i}){$t(go(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=j.useContext(bs);Os(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=j.useContext(Xs),{pathname:h}=ir(),p=xo(),g=tg(s,eg(u),h,i==="path"),x=JSON.stringify(g);return j.useEffect(()=>{p(JSON.parse(x),{replace:e,state:n,relative:i})},[p,x,i,e,n]),null}function pa(s){$t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function K2({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){$t(!go(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=j.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[p,l,u,h]);typeof n=="string"&&(n=el(n));let{pathname:x="/",search:b="",hash:w="",state:N=null,key:C="default"}=n,G=j.useMemo(()=>{let z=ei(x,p);return z==null?null:{location:{pathname:z,search:b,hash:w,state:N,key:C},navigationType:i}},[p,x,b,w,N,C,i]);return Os(G!=null,`<Router basename="${p}"> is not able to match the URL "${x}${b}${w}" because it does not start with the basename, so the <Router> won't render anything.`),G==null?null:j.createElement(bs.Provider,{value:g},j.createElement(eu.Provider,{children:e,value:G}))}function Q2({children:s,location:e}){return M2(_p(s),e)}function _p(s,e=[]){let n=[];return j.Children.forEach(s,(i,l)=>{if(!j.isValidElement(i))return;let u=[...e,l];if(i.type===j.Fragment){n.push.apply(n,_p(i.props.children,u));return}$t(i.type===pa,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$t(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=_p(i.props.children,u)),n.push(h)}),n}var Yd="get",Kd="application/x-www-form-urlencoded";function jh(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function W2(s){return jh(s)&&s.tagName.toLowerCase()==="button"}function X2(s){return jh(s)&&s.tagName.toLowerCase()==="form"}function J2(s){return jh(s)&&s.tagName.toLowerCase()==="input"}function Z2(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function eS(s,e){return s.button===0&&(!e||e==="_self")&&!Z2(s)}var Ld=null;function tS(){if(Ld===null)try{new FormData(document.createElement("form"),0),Ld=!1}catch{Ld=!0}return Ld}var nS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ep(s){return s!=null&&!nS.has(s)?(Os(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kd}"`),null):s}function sS(s,e){let n,i,l,u,h;if(X2(s)){let p=s.getAttribute("action");i=p?ei(p,e):null,n=s.getAttribute("method")||Yd,l=ep(s.getAttribute("enctype"))||Kd,u=new FormData(s)}else if(W2(s)||J2(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?ei(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||Yd,l=ep(s.getAttribute("formenctype"))||ep(p.getAttribute("enctype"))||Kd,u=new FormData(p,s),!tS()){let{name:x,type:b,value:w}=s;if(b==="image"){let N=x?`${x}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else x&&u.append(x,w)}}else{if(jh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yd,i=null,l=Kd,h=s}return u&&l==="text/plain"&&(h=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ig(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function aS(s,e,n,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&ei(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function iS(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function lS(s,e,n){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await iS(u,n);return h.links?h.links():[]}return[]}));return dS(i.flat(1).filter(rS).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function $b(s,e,n,i,l,u){let h=(g,x)=>n[x]?g.route.id!==n[x].route.id:!0,p=(g,x)=>n[x].pathname!==g.pathname||n[x].route.path?.endsWith("*")&&n[x].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,x)=>h(g,x)||p(g,x)):u==="data"?e.filter((g,x)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(h(g,x)||p(g,x))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function oS(s,e,{includeHydrateFallback:n}={}){return cS(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function cS(s){return[...new Set(s)]}function uS(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function dS(s,e){let n=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(uS(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function iw(){let s=j.useContext(po);return ig(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function hS(){let s=j.useContext(Ah);return ig(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var rg=j.createContext(void 0);rg.displayName="FrameworkContext";function rw(){let s=j.useContext(rg);return ig(s,"You must render this element inside a <HydratedRouter> element"),s}function fS(s,e){let n=j.useContext(rg),[i,l]=j.useState(!1),[u,h]=j.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:x,onMouseLeave:b,onTouchStart:w}=e,N=j.useRef(null);j.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let z=L=>{L.forEach(H=>{h(H.isIntersecting)})},O=new IntersectionObserver(z,{threshold:.5});return N.current&&O.observe(N.current),()=>{O.disconnect()}}},[s]),j.useEffect(()=>{if(i){let z=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(z)}}},[i]);let C=()=>{l(!0)},G=()=>{l(!1),h(!1)};return n?s!=="intent"?[u,N,{}]:[u,N,{onFocus:Ec(p,C),onBlur:Ec(g,G),onMouseEnter:Ec(x,C),onMouseLeave:Ec(b,G),onTouchStart:Ec(w,C)}]:[!1,N,{}]}function Ec(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function mS({page:s,...e}){let{router:n}=iw(),i=j.useMemo(()=>G_(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?j.createElement(gS,{page:s,matches:i,...e}):null}function pS(s){let{manifest:e,routeModules:n}=rw(),[i,l]=j.useState([]);return j.useEffect(()=>{let u=!1;return lS(s,e,n).then(h=>{u||l(h)}),()=>{u=!0}},[s,e,n]),i}function gS({page:s,matches:e,...n}){let i=ir(),{future:l,manifest:u,routeModules:h}=rw(),{basename:p}=iw(),{loaderData:g,matches:x}=hS(),b=j.useMemo(()=>$b(s,e,x,u,i,"data"),[s,e,x,u,i]),w=j.useMemo(()=>$b(s,e,x,u,i,"assets"),[s,e,x,u,i]),N=j.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let z=new Set,O=!1;if(e.forEach(H=>{let K=u.routes[H.route.id];!K||!K.hasLoader||(!b.some(fe=>fe.route.id===H.route.id)&&H.route.id in g&&h[H.route.id]?.shouldRevalidate||K.hasClientLoader?O=!0:z.add(H.route.id))}),z.size===0)return[];let L=aS(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return O&&z.size>0&&L.searchParams.set("_routes",e.filter(H=>z.has(H.route.id)).map(H=>H.route.id).join(",")),[L.pathname+L.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,b,e,s,h]),C=j.useMemo(()=>oS(w,u),[w,u]),G=pS(w);return j.createElement(j.Fragment,null,N.map(z=>j.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...n})),C.map(z=>j.createElement("link",{key:z,rel:"modulepreload",href:z,...n})),G.map(({key:z,link:O})=>j.createElement("link",{key:z,nonce:n.nonce,...O,crossOrigin:O.crossOrigin??n.crossOrigin})))}function xS(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var yS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yS&&(window.__reactRouterVersion="7.13.0")}catch{}function bS({basename:s,children:e,unstable_useTransitions:n,window:i}){let l=j.useRef();l.current==null&&(l.current=JT({window:i,v5Compat:!0}));let u=l.current,[h,p]=j.useState({action:u.action,location:u.location}),g=j.useCallback(x=>{n===!1?p(x):j.startTransition(()=>p(x))},[n]);return j.useLayoutEffect(()=>u.listen(g),[u,g]),j.createElement(K2,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:n})}var lw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=j.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:h,state:p,target:g,to:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:N,...C},G){let{basename:z,unstable_useTransitions:O}=j.useContext(bs),L=typeof x=="string"&&lw.test(x),H=W_(x,z);x=H.to;let K=k2(x,{relative:l}),[fe,pe,le]=fS(i,C),S=ES(x,{replace:h,state:p,target:g,preventScrollReset:b,relative:l,viewTransition:w,unstable_defaultShouldRevalidate:N,unstable_useTransitions:O});function A(V){e&&e(V),V.defaultPrevented||S(V)}let R=j.createElement("a",{...C,...le,href:H.absoluteURL||K,onClick:H.isExternal||u?e:A,ref:xS(G,pe),target:g,"data-discover":!L&&n==="render"?"true":void 0});return fe&&!L?j.createElement(j.Fragment,null,R,j.createElement(mS,{page:K})):R});et.displayName="Link";var vS=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:h,viewTransition:p,children:g,...x},b){let w=nu(h,{relative:x.relative}),N=ir(),C=j.useContext(Ah),{navigator:G,basename:z}=j.useContext(bs),O=C!=null&&jS(w)&&p===!0,L=G.encodeLocation?G.encodeLocation(w).pathname:w.pathname,H=N.pathname,K=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(H=H.toLowerCase(),K=K?K.toLowerCase():null,L=L.toLowerCase()),K&&z&&(K=ei(K,z)||K);const fe=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let pe=H===L||!l&&H.startsWith(L)&&H.charAt(fe)==="/",le=K!=null&&(K===L||!l&&K.startsWith(L)&&K.charAt(L.length)==="/"),S={isActive:pe,isPending:le,isTransitioning:O},A=pe?e:void 0,R;typeof i=="function"?R=i(S):R=[i,pe?"active":null,le?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let V=typeof u=="function"?u(S):u;return j.createElement(et,{...x,"aria-current":A,className:R,ref:b,style:V,to:h,viewTransition:p},typeof g=="function"?g(S):g)});vS.displayName="NavLink";var _S=j.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:u,method:h=Yd,action:p,onSubmit:g,relative:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:N,...C},G)=>{let{unstable_useTransitions:z}=j.useContext(bs),O=SS(),L=AS(p,{relative:x}),H=h.toLowerCase()==="get"?"get":"post",K=typeof p=="string"&&lw.test(p),fe=pe=>{if(g&&g(pe),pe.defaultPrevented)return;pe.preventDefault();let le=pe.nativeEvent.submitter,S=le?.getAttribute("formmethod")||h,A=()=>O(le||pe.currentTarget,{fetcherKey:e,method:S,navigate:n,replace:l,state:u,relative:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:N});z&&n!==!1?j.startTransition(()=>A()):A()};return j.createElement("form",{ref:G,method:H,action:L,onSubmit:i?g:fe,...C,"data-discover":!K&&s==="render"?"true":void 0})});_S.displayName="Form";function wS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ow(s){let e=j.useContext(po);return $t(e,wS(s)),e}function ES(s,{target:e,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let x=xo(),b=ir(),w=nu(s,{relative:u});return j.useCallback(N=>{if(eS(N,e)){N.preventDefault();let C=n!==void 0?n:qc(b)===qc(w),G=()=>x(s,{replace:C,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?j.startTransition(()=>G()):G()}},[b,x,w,n,i,e,s,l,u,h,p,g])}var NS=0,TS=()=>`__${String(++NS)}__`;function SS(){let{router:s}=ow("useSubmit"),{basename:e}=j.useContext(bs),n=F2(),i=s.fetch,l=s.navigate;return j.useCallback(async(u,h={})=>{let{action:p,method:g,encType:x,formData:b,body:w}=sS(u,e);if(h.navigate===!1){let N=h.fetcherKey||TS();await i(N,n,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:b,body:w,formMethod:h.method||g,formEncType:h.encType||x,flushSync:h.flushSync})}else await l(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:b,body:w,formMethod:h.method||g,formEncType:h.encType||x,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,l,e,n])}function AS(s,{relative:e}={}){let{basename:n}=j.useContext(bs),i=j.useContext(Xs);$t(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...nu(s||".",{relative:e})},h=ir();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let b=p.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Xa([n,u.pathname])),qc(u)}function jS(s,{relative:e}={}){let n=j.useContext(J_);$t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=ow("useViewTransitionState"),l=nu(s,{relative:e});if(!n.isTransitioning)return!1;let u=ei(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=ei(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ih(l.pathname,h)!=null||ih(l.pathname,u)!=null}const RS=()=>{};var Gb={};const cw=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},CS=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],h=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],h=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},uw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,p=h?s[l+1]:0,g=l+2<s.length,x=g?s[l+2]:0,b=u>>2,w=(u&3)<<4|p>>4;let N=(p&15)<<2|x>>6,C=x&63;g||(C=64,h||(N=64)),i.push(n[b],n[w],n[N],n[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(cw(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):CS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const x=l<s.length?n[s.charAt(l)]:64;++l;const w=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||x==null||w==null)throw new IS;const N=u<<2|p>>4;if(i.push(N),x!==64){const C=p<<4&240|x>>2;if(i.push(C),w!==64){const G=x<<6&192|w;i.push(G)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class IS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kS=function(s){const e=cw(s);return uw.encodeByteArray(e,!0)},rh=function(s){return kS(s).replace(/\./g,"")},dw=function(s){try{return uw.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function DS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const MS=()=>DS().__FIREBASE_DEFAULTS__,OS=()=>{if(typeof process>"u"||typeof Gb>"u")return;const s=Gb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},VS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&dw(s[1]);return e&&JSON.parse(e)},Rh=()=>{try{return RS()||MS()||OS()||VS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},hw=s=>Rh()?.emulatorHosts?.[s],fw=s=>{const e=hw(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},mw=()=>Rh()?.config,pw=s=>Rh()?.[`_${s}`];class PS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function rr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lg(s){return(await fetch(s,{credentials:"include"})).ok}function gw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[rh(JSON.stringify(n)),rh(JSON.stringify(h)),""].join(".")}const Dc={};function LS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Dc))Dc[e]?s.emulator.push(e):s.prod.push(e);return s}function US(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Yb=!1;function og(s,e){if(typeof window>"u"||typeof document>"u"||!rr(window.location.host)||Dc[s]===e||Dc[s]||Yb)return;Dc[s]=e;function n(N){return`__firebase__banner__${N}`}const i="__firebase__banner",u=LS().prod.length>0;function h(){const N=document.getElementById(i);N&&N.remove()}function p(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,C){N.setAttribute("width","24"),N.setAttribute("id",C),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function x(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Yb=!0,h()},N}function b(N,C){N.setAttribute("id",C),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=US(i),C=n("text"),G=document.getElementById(C)||document.createElement("span"),z=n("learnmore"),O=document.getElementById(z)||document.createElement("a"),L=n("preprendIcon"),H=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const K=N.element;p(K),b(O,z);const fe=x();g(H,L),K.append(H,G,O,fe),document.body.appendChild(K)}u?(G.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function zS(){const s=Rh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function HS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $S(){const s=Bn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function GS(){return!zS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YS(){try{return typeof indexedDB=="object"}catch{return!1}}function KS(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const QS="FirebaseError";class ja extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=QS,Object.setPrototypeOf(this,ja.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?WS(u,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new ja(l,p,i)}}function WS(s,e){return s.replace(XS,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const XS=/\{\$([^}]+)}/g;function JS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Hr(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=s[l],h=e[l];if(Kb(u)&&Kb(h)){if(!Hr(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function Kb(s){return s!==null&&typeof s=="object"}function au(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Sc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Ac(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function ZS(s,e){const n=new eA(s,e);return n.subscribe.bind(n)}class eA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");tA(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=tp),l.error===void 0&&(l.error=tp),l.complete===void 0&&(l.complete=tp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tA(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function tp(){}function Gt(s){return s&&s._delegate?s._delegate:s}class Ji{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ur="[DEFAULT]";class nA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new PS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aA(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:sA(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sA(s){return s===Ur?void 0:s}function aA(s){return s.instantiationMode==="EAGER"}class iA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var lt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(lt||(lt={}));const rA={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},lA=lt.INFO,oA={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},cA=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=oA[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cg{constructor(e){this.name=e,this._logLevel=lA,this._logHandler=cA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const uA=(s,e)=>e.some(n=>s instanceof n);let Qb,Wb;function dA(){return Qb||(Qb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hA(){return Wb||(Wb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xw=new WeakMap,wp=new WeakMap,yw=new WeakMap,np=new WeakMap,ug=new WeakMap;function fA(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Gi(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&xw.set(n,s)}).catch(()=>{}),ug.set(e,s),e}function mA(s){if(wp.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});wp.set(s,e)}let Ep={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return wp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||yw.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gi(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function pA(s){Ep=s(Ep)}function gA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(sp(this),e,...n);return yw.set(i,e.sort?e.sort():[e]),Gi(i)}:hA().includes(s)?function(...e){return s.apply(sp(this),e),Gi(xw.get(this))}:function(...e){return Gi(s.apply(sp(this),e))}}function xA(s){return typeof s=="function"?gA(s):(s instanceof IDBTransaction&&mA(s),uA(s,dA())?new Proxy(s,Ep):s)}function Gi(s){if(s instanceof IDBRequest)return fA(s);if(np.has(s))return np.get(s);const e=xA(s);return e!==s&&(np.set(s,e),ug.set(e,s)),e}const sp=s=>ug.get(s);function yA(s,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(s,e),p=Gi(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Gi(h.result),g.oldVersion,g.newVersion,Gi(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const bA=["get","getKey","getAll","getAllKeys","count"],vA=["put","add","delete","clear"],ap=new Map;function Xb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(ap.get(e))return ap.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=vA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||bA.includes(n)))return;const u=async function(h,...p){const g=this.transaction(h,l?"readwrite":"readonly");let x=g.store;return i&&(x=x.index(p.shift())),(await Promise.all([x[n](...p),l&&g.done]))[0]};return ap.set(e,u),u}pA(s=>({...s,get:(e,n,i)=>Xb(e,n)||s.get(e,n,i),has:(e,n)=>!!Xb(e,n)||s.has(e,n)}));class _A{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function wA(s){return s.getComponent()?.type==="VERSION"}const Np="@firebase/app",Jb="0.14.7";const ti=new cg("@firebase/app"),EA="@firebase/app-compat",NA="@firebase/analytics-compat",TA="@firebase/analytics",SA="@firebase/app-check-compat",AA="@firebase/app-check",jA="@firebase/auth",RA="@firebase/auth-compat",CA="@firebase/database",IA="@firebase/data-connect",kA="@firebase/database-compat",DA="@firebase/functions",MA="@firebase/functions-compat",OA="@firebase/installations",VA="@firebase/installations-compat",PA="@firebase/messaging",LA="@firebase/messaging-compat",UA="@firebase/performance",BA="@firebase/performance-compat",zA="@firebase/remote-config",qA="@firebase/remote-config-compat",FA="@firebase/storage",HA="@firebase/storage-compat",$A="@firebase/firestore",GA="@firebase/ai",YA="@firebase/firestore-compat",KA="firebase",QA="12.8.0";const Tp="[DEFAULT]",WA={[Np]:"fire-core",[EA]:"fire-core-compat",[TA]:"fire-analytics",[NA]:"fire-analytics-compat",[AA]:"fire-app-check",[SA]:"fire-app-check-compat",[jA]:"fire-auth",[RA]:"fire-auth-compat",[CA]:"fire-rtdb",[IA]:"fire-data-connect",[kA]:"fire-rtdb-compat",[DA]:"fire-fn",[MA]:"fire-fn-compat",[OA]:"fire-iid",[VA]:"fire-iid-compat",[PA]:"fire-fcm",[LA]:"fire-fcm-compat",[UA]:"fire-perf",[BA]:"fire-perf-compat",[zA]:"fire-rc",[qA]:"fire-rc-compat",[FA]:"fire-gcs",[HA]:"fire-gcs-compat",[$A]:"fire-fst",[YA]:"fire-fst-compat",[GA]:"fire-vertex","fire-js":"fire-js",[KA]:"fire-js-all"};const lh=new Map,XA=new Map,Sp=new Map;function Zb(s,e){try{s.container.addComponent(e)}catch(n){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function $r(s){const e=s.name;if(Sp.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;Sp.set(e,s);for(const n of lh.values())Zb(n,s);for(const n of XA.values())Zb(n,s);return!0}function Ch(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function ps(s){return s==null?!1:s.settings!==void 0}const JA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new su("app","Firebase",JA);class ZA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}const tl=QA;function bw(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Tp,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Yi.create("bad-app-name",{appName:String(l)});if(n||(n=mw()),!n)throw Yi.create("no-options");const u=lh.get(l);if(u){if(Hr(n,u.options)&&Hr(i,u.config))return u;throw Yi.create("duplicate-app",{appName:l})}const h=new iA(l);for(const g of Sp.values())h.addComponent(g);const p=new ZA(n,i,h);return lh.set(l,p),p}function dg(s=Tp){const e=lh.get(s);if(!e&&s===Tp&&mw())return bw();if(!e)throw Yi.create("no-app",{appName:s});return e}function ba(s,e,n){let i=WA[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(h.join(" "));return}$r(new Ji(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const ej="firebase-heartbeat-database",tj=1,Fc="firebase-heartbeat-store";let ip=null;function vw(){return ip||(ip=yA(ej,tj,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Fc)}catch(n){console.warn(n)}}}}).catch(s=>{throw Yi.create("idb-open",{originalErrorMessage:s.message})})),ip}async function nj(s){try{const n=(await vw()).transaction(Fc),i=await n.objectStore(Fc).get(_w(s));return await n.done,i}catch(e){if(e instanceof ja)ti.warn(e.message);else{const n=Yi.create("idb-get",{originalErrorMessage:e?.message});ti.warn(n.message)}}}async function ev(s,e){try{const i=(await vw()).transaction(Fc,"readwrite");await i.objectStore(Fc).put(e,_w(s)),await i.done}catch(n){if(n instanceof ja)ti.warn(n.message);else{const i=Yi.create("idb-set",{originalErrorMessage:n?.message});ti.warn(i.message)}}}function _w(s){return`${s.name}!${s.options.appId}`}const sj=1024,aj=30;class ij{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lj(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>aj){const l=oj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ti.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tv(),{heartbeatsToSend:n,unsentEntries:i}=rj(this._heartbeatsCache.heartbeats),l=rh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return ti.warn(e),""}}}function tv(){return new Date().toISOString().substring(0,10)}function rj(s,e=sj){const n=[];let i=s.slice();for(const l of s){const u=n.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),nv(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),nv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class lj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YS()?KS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nj(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function nv(s){return rh(JSON.stringify({version:2,heartbeats:s})).length}function oj(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function cj(s){$r(new Ji("platform-logger",e=>new _A(e),"PRIVATE")),$r(new Ji("heartbeat",e=>new ij(e),"PRIVATE")),ba(Np,Jb,s),ba(Np,Jb,"esm2020"),ba("fire-js","")}cj("");function ww(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uj=ww,Ew=new su("auth","Firebase",ww());const oh=new cg("@firebase/auth");function dj(s,...e){oh.logLevel<=lt.WARN&&oh.warn(`Auth (${tl}): ${s}`,...e)}function Qd(s,...e){oh.logLevel<=lt.ERROR&&oh.error(`Auth (${tl}): ${s}`,...e)}function Qs(s,...e){throw hg(s,...e)}function va(s,...e){return hg(s,...e)}function Nw(s,e,n){const i={...uj(),[e]:n};return new su("auth","Firebase",i).create(e,{appName:s.name})}function Ja(s){return Nw(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hg(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return Ew.create(s,...e)}function Fe(s,e,...n){if(!s)throw hg(e,...n)}function Qa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Qd(e),new Error(e)}function ni(s,e){s||Qa(e)}function Ap(){return typeof self<"u"&&self.location?.href||""}function hj(){return sv()==="http:"||sv()==="https:"}function sv(){return typeof self<"u"&&self.location?.protocol||null}function fj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hj()||FS()||"connection"in navigator)?navigator.onLine:!0}function mj(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class iu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=BS()||HS()}get(){return fj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fg(s,e){ni(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Tw{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const gj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],xj=new iu(3e4,6e4);function lr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function or(s,e,n,i,l={}){return Sw(s,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=au({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const x={method:e,headers:g,...u};return qS()||(x.referrerPolicy="no-referrer"),s.emulatorConfig&&rr(s.emulatorConfig.host)&&(x.credentials="include"),Tw.fetch()(await Aw(s,s.config.apiHost,n,p),x)})}async function Sw(s,e,n){s._canInitEmulator=!1;const i={...pj,...e};try{const l=new bj(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw Ud(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,x]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ud(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Ud(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Ud(s,"user-disabled",h);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Nw(s,b,x);Qs(s,b)}}catch(l){if(l instanceof ja)throw l;Qs(s,"network-request-failed",{message:String(l)})}}async function ru(s,e,n,i,l={}){const u=await or(s,e,n,i,l);return"mfaPendingCredential"in u&&Qs(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Aw(s,e,n,i){const l=`${e}${n}?${i}`,u=s,h=u.config.emulator?fg(s.config,l):`${s.config.apiScheme}://${l}`;return gj.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function yj(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(va(this.auth,"network-request-failed")),xj.get())})}}function Ud(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=va(s,e,i);return l.customData._tokenResponse=n,l}function av(s){return s!==void 0&&s.enterprise!==void 0}class vj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return yj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _j(s,e){return or(s,"GET","/v2/recaptchaConfig",lr(s,e))}async function wj(s,e){return or(s,"POST","/v1/accounts:delete",e)}async function ch(s,e){return or(s,"POST","/v1/accounts:lookup",e)}function Mc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ej(s,e=!1){const n=Gt(s),i=await n.getIdToken(e),l=mg(i);Fe(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:Mc(rp(l.auth_time)),issuedAtTime:Mc(rp(l.iat)),expirationTime:Mc(rp(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function rp(s){return Number(s)*1e3}function mg(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const l=dw(n);return l?JSON.parse(l):(Qd("Failed to decode base64 JWT payload"),null)}catch(l){return Qd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function iv(s){const e=mg(s);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Hc(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ja&&Nj(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function Nj({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class Tj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class jp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mc(this.lastLoginAt),this.creationTime=Mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function uh(s){const e=s.auth,n=await s.getIdToken(),i=await Hc(s,ch(e,{idToken:n}));Fe(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?jw(l.providerUserInfo):[],h=Aj(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!h?.length,x=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new jp(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(s,b)}async function Sj(s){const e=Gt(s);await uh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Aj(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function jw(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function jj(s,e){const n=await Sw(s,{},async()=>{const i=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,h=await Aw(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&rr(s.emulatorConfig.host)&&(g.credentials="include"),Tw.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Rj(s,e){return or(s,"POST","/v2/accounts:revokeToken",lr(s,e))}class to{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=iv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await jj(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,h=new to;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(Fe(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(Fe(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new to,this.toJSON())}_performRefresh(){return Qa("not implemented")}}function Li(s,e){Fe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Gs{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new Tj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new jp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Hc(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ej(this,e)}reload(){return Sj(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await uh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ps(this.auth.app))return Promise.reject(Ja(this.auth));const e=await this.getIdToken();return await Hc(this,wj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,x=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:C,providerData:G,stsTokenManager:z}=n;Fe(w&&z,e,"internal-error");const O=to.fromJSON(this.name,z);Fe(typeof w=="string",e,"internal-error"),Li(i,e.name),Li(l,e.name),Fe(typeof N=="boolean",e,"internal-error"),Fe(typeof C=="boolean",e,"internal-error"),Li(u,e.name),Li(h,e.name),Li(p,e.name),Li(g,e.name),Li(x,e.name),Li(b,e.name);const L=new Gs({uid:w,auth:e,email:l,emailVerified:N,displayName:i,isAnonymous:C,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:O,createdAt:x,lastLoginAt:b});return G&&Array.isArray(G)&&(L.providerData=G.map(H=>({...H}))),g&&(L._redirectEventId=g),L}static async _fromIdTokenResponse(e,n,i=!1){const l=new to;l.updateFromServerResponse(n);const u=new Gs({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await uh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];Fe(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?jw(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,p=new to;p.updateFromIdToken(i);const g=new Gs({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new jp(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,x),g}}const rv=new Map;function Wa(s){ni(s instanceof Function,"Expected a class definition");let e=rv.get(s);return e?(ni(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,rv.set(s,e),e)}class Rw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Rw.type="NONE";const lv=Rw;function Wd(s,e,n){return`firebase:${s}:${e}:${n}`}class no{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=Wd(this.userKey,l.apiKey,u),this.fullPersistenceKey=Wd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ch(this.auth,{idToken:e}).catch(()=>{});return n?Gs._fromGetAccountInfoResponse(this.auth,n,e):null}return Gs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new no(Wa(lv),e,i);const l=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=l[0]||Wa(lv);const h=Wd(i,e.config.apiKey,e.name);let p=null;for(const x of n)try{const b=await x._get(h);if(b){let w;if(typeof b=="string"){const N=await ch(e,{idToken:b}).catch(()=>{});if(!N)break;w=await Gs._fromGetAccountInfoResponse(e,N,b)}else w=Gs._fromJSON(e,b);x!==u&&(p=w),u=x;break}}catch{}const g=l.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new no(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(n.map(async x=>{if(x!==u)try{await x._remove(h)}catch{}})),new no(u,e,i))}}function ov(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ow(e))return"Blackberry";if(Vw(e))return"Webos";if(Iw(e))return"Safari";if((e.includes("chrome/")||kw(e))&&!e.includes("edge/"))return"Chrome";if(Mw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Cw(s=Bn()){return/firefox\//i.test(s)}function Iw(s=Bn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kw(s=Bn()){return/crios\//i.test(s)}function Dw(s=Bn()){return/iemobile/i.test(s)}function Mw(s=Bn()){return/android/i.test(s)}function Ow(s=Bn()){return/blackberry/i.test(s)}function Vw(s=Bn()){return/webos/i.test(s)}function pg(s=Bn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Cj(s=Bn()){return pg(s)&&!!window.navigator?.standalone}function Ij(){return $S()&&document.documentMode===10}function Pw(s=Bn()){return pg(s)||Mw(s)||Vw(s)||Ow(s)||/windows phone/i.test(s)||Dw(s)}function Lw(s,e=[]){let n;switch(s){case"Browser":n=ov(Bn());break;case"Worker":n=`${ov(Bn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tl}/${i}`}class kj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function Dj(s,e={}){return or(s,"GET","/v2/passwordPolicy",lr(s,e))}const Mj=6;class Oj{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Mj,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class Vj{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cv(this),this.idTokenSubscription=new cv(this),this.beforeStateQueue=new kj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ew,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await no.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ch(this,{idToken:e}),i=await Gs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ps(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ps(this.app))return Promise.reject(Ja(this));const n=e?Gt(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ps(this.app)?Promise.reject(Ja(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ps(this.app)?Promise.reject(Ja(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Dj(this),n=new Oj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new su("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await Rj(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wa(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await no.create(this,[Wa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,l);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&dj(`Error while retrieving App Check token: ${e.error}`),e?.token}}function nl(s){return Gt(s)}class cv{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZS(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ih={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Pj(s){Ih=s}function Uw(s){return Ih.loadJS(s)}function Lj(){return Ih.recaptchaEnterpriseScript}function Uj(){return Ih.gapiScript}function Bj(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class zj{constructor(){this.enterprise=new qj}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class qj{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Fj="recaptcha-enterprise",Bw="NO_RECAPTCHA";class Hj{constructor(e){this.type=Fj,this.auth=nl(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{_j(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const x=new vj(g);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,h(x.siteKey)}}).catch(g=>{p(g)})})}function l(u,h,p){const g=window.grecaptcha;av(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(x=>{h(x)}).catch(()=>{h(Bw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zj().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!n&&av(window.grecaptcha))l(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Lj();g.length!==0&&(g+=p),Uw(g).then(()=>{l(p,u,h)}).catch(x=>{h(x)})}}).catch(p=>{h(p)})})}}async function uv(s,e,n,i=!1,l=!1){const u=new Hj(s);let h;if(l)h=Bw;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,x=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Rp(s,e,n,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await uv(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await uv(s,e,n,n==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function $j(s,e){const n=Ch(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Hr(u,e??{}))return l;Qs(l,"already-initialized")}return n.initialize({options:e})}function Gj(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Wa);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function Yj(s,e,n){const i=nl(s);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=zw(e),{host:h,port:p}=Kj(e),g=p===null?"":`:${p}`,x={url:`${u}//${h}${g}/`},b=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(Hr(x,i.config.emulator)&&Hr(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=x,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,rr(h)?(lg(`${u}//${h}${g}`),og("Auth",!0)):Qj()}function zw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Kj(s){const e=zw(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:dv(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:dv(h)}}}function dv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Qj(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class gg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qa("not implemented")}_getIdTokenResponse(e){return Qa("not implemented")}_linkToIdToken(e,n){return Qa("not implemented")}_getReauthenticationResolver(e){return Qa("not implemented")}}async function Wj(s,e){return or(s,"POST","/v1/accounts:signUp",e)}async function Xj(s,e){return ru(s,"POST","/v1/accounts:signInWithPassword",lr(s,e))}async function Jj(s,e){return ru(s,"POST","/v1/accounts:signInWithEmailLink",lr(s,e))}async function Zj(s,e){return ru(s,"POST","/v1/accounts:signInWithEmailLink",lr(s,e))}class $c extends gg{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new $c(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new $c(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rp(e,n,"signInWithPassword",Xj);case"emailLink":return Jj(e,{email:this._email,oobCode:this._password});default:Qs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rp(e,i,"signUpPassword",Wj);case"emailLink":return Zj(e,{idToken:n,email:this._email,oobCode:this._password});default:Qs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function so(s,e){return ru(s,"POST","/v1/accounts:signInWithIdp",lr(s,e))}const eR="http://localhost";class Gr extends gg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const h=new Gr(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return so(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,so(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,so(e,n)}buildRequest(){const e={requestUri:eR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}function tR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nR(s){const e=Sc(Ac(s)).link,n=e?Sc(Ac(e)).deep_link_id:null,i=Sc(Ac(s)).deep_link_id;return(i?Sc(Ac(i)).link:null)||i||n||e||s}class xg{constructor(e){const n=Sc(Ac(e)),i=n.apiKey??null,l=n.oobCode??null,u=tR(n.mode??null);Fe(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=nR(e);try{return new xg(n)}catch{return null}}}class yo{constructor(){this.providerId=yo.PROVIDER_ID}static credential(e,n){return $c._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=xg.parseLink(n);return Fe(i,"argument-error"),$c._fromEmailAndCode(e,i.code,i.tenantId)}}yo.PROVIDER_ID="password";yo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class lu extends qw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Bi extends lu{constructor(){super("facebook.com")}static credential(e){return Gr._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bi.PROVIDER_ID="facebook.com";class zi extends lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gr._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return zi.credential(n,i)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";class qi extends lu{constructor(){super("github.com")}static credential(e){return Gr._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";class Fi extends lu{constructor(){super("twitter.com")}static credential(e,n){return Gr._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Fi.credential(n,i)}catch{return null}}}Fi.TWITTER_SIGN_IN_METHOD="twitter.com";Fi.PROVIDER_ID="twitter.com";async function sR(s,e){return ru(s,"POST","/v1/accounts:signUp",lr(s,e))}class Yr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await Gs._fromIdTokenResponse(e,i,l),h=hv(i);return new Yr({user:u,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=hv(i);return new Yr({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function hv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class dh extends ja{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,dh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new dh(e,n,i,l)}}function Fw(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?dh._fromErrorAndOperation(s,u,e,i):u})}async function aR(s,e,n=!1){const i=await Hc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Yr._forOperation(s,"link",i)}async function iR(s,e,n=!1){const{auth:i}=s;if(ps(i.app))return Promise.reject(Ja(i));const l="reauthenticate";try{const u=await Hc(s,Fw(i,l,e,s),n);Fe(u.idToken,i,"internal-error");const h=mg(u.idToken);Fe(h,i,"internal-error");const{sub:p}=h;return Fe(s.uid===p,i,"user-mismatch"),Yr._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Qs(i,"user-mismatch"),u}}async function Hw(s,e,n=!1){if(ps(s.app))return Promise.reject(Ja(s));const i="signIn",l=await Fw(s,i,e),u=await Yr._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(u.user),u}async function rR(s,e){return Hw(nl(s),e)}async function $w(s){const e=nl(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lR(s,e,n){if(ps(s.app))return Promise.reject(Ja(s));const i=nl(s),h=await Rp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&$w(s),g}),p=await Yr._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function Gw(s,e,n){return ps(s.app)?Promise.reject(Ja(s)):rR(Gt(s),yo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&$w(s),i})}function oR(s,e,n,i){return Gt(s).onIdTokenChanged(e,n,i)}function cR(s,e,n){return Gt(s).beforeAuthStateChanged(e,n)}function uR(s,e,n,i){return Gt(s).onAuthStateChanged(e,n,i)}function dR(s){return Gt(s).signOut()}const hh="__sak";class Yw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hh,"1"),this.storage.removeItem(hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hR=1e3,fR=10;class Kw extends Yw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Pw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);Ij()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,fR):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},hR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kw.type="LOCAL";const mR=Kw;class Qw extends Yw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qw.type="SESSION";const Ww=Qw;function pR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new kh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,h=this.handlersMap[l];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async x=>x(n.origin,u)),g=await pR(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kh.receivers=[];function yg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class gR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const x=yg("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(w){const N=w;if(N.data.eventId===x)switch(N.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(N.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function _a(){return window}function xR(s){_a().location.href=s}function Xw(){return typeof _a().WorkerGlobalScope<"u"&&typeof _a().importScripts=="function"}async function yR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bR(){return navigator?.serviceWorker?.controller||null}function vR(){return Xw()?self:null}const Jw="firebaseLocalStorageDb",_R=1,fh="firebaseLocalStorage",Zw="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dh(s,e){return s.transaction([fh],e?"readwrite":"readonly").objectStore(fh)}function wR(){const s=indexedDB.deleteDatabase(Jw);return new ou(s).toPromise()}function Cp(){const s=indexedDB.open(Jw,_R);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(fh,{keyPath:Zw})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(fh)?e(i):(i.close(),await wR(),e(await Cp()))})})}async function fv(s,e,n){const i=Dh(s,!0).put({[Zw]:e,value:n});return new ou(i).toPromise()}async function ER(s,e){const n=Dh(s,!1).get(e),i=await new ou(n).toPromise();return i===void 0?null:i.value}function mv(s,e){const n=Dh(s,!0).delete(e);return new ou(n).toPromise()}const NR=800,TR=3;class e1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>TR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kh._getInstance(vR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yR(),!this.activeServiceWorker)return;this.sender=new gR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await fv(e,hh,"1"),await mv(e,hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>fv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>ER(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Dh(l,!1).getAll();return new ou(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}e1.type="LOCAL";const SR=e1;new iu(3e4,6e4);function AR(s,e){return e?Wa(e):(Fe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class bg extends gg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return so(e,this._buildIdpRequest())}_linkToIdToken(e,n){return so(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return so(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function jR(s){return Hw(s.auth,new bg(s),s.bypassAuthState)}function RR(s){const{auth:e,user:n}=s;return Fe(n,e,"internal-error"),iR(n,new bg(s),s.bypassAuthState)}async function CR(s){const{auth:e,user:n}=s;return Fe(n,e,"internal-error"),aR(n,new bg(s),s.bypassAuthState)}class t1{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jR;case"linkViaPopup":case"linkViaRedirect":return CR;case"reauthViaPopup":case"reauthViaRedirect":return RR;default:Qs(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const IR=new iu(2e3,1e4);class Jl extends t1{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Jl.currentPopupAction&&Jl.currentPopupAction.cancel(),Jl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=yg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(va(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(va(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Jl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(va(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IR.get())};e()}}Jl.currentPopupAction=null;const kR="pendingRedirect",Xd=new Map;class DR extends t1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Xd.get(this.auth._key());if(!e){try{const i=await MR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Xd.set(this.auth._key(),e)}return this.bypassAuthState||Xd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MR(s,e){const n=PR(e),i=VR(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function OR(s,e){Xd.set(s._key(),e)}function VR(s){return Wa(s._redirectPersistence)}function PR(s){return Wd(kR,s.config.apiKey,s.name)}async function LR(s,e,n=!1){if(ps(s.app))return Promise.reject(Ja(s));const i=nl(s),l=AR(i,e),h=await new DR(i,l,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const UR=600*1e3;class BR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!n1(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(va(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UR&&this.cachedEventUids.clear(),this.cachedEventUids.has(pv(e))}saveEventToCache(e){this.cachedEventUids.add(pv(e)),this.lastProcessedEventTime=Date.now()}}function pv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function n1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function zR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return n1(s);default:return!1}}async function qR(s,e={}){return or(s,"GET","/v1/projects",e)}const FR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HR=/^https?/;async function $R(s){if(s.config.emulator)return;const{authorizedDomains:e}=await qR(s);for(const n of e)try{if(GR(n))return}catch{}Qs(s,"unauthorized-domain")}function GR(s){const e=Ap(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!HR.test(n))return!1;if(FR.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const YR=new iu(3e4,6e4);function gv(){const s=_a().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function KR(s){return new Promise((e,n)=>{function i(){gv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gv(),n(va(s,"network-request-failed"))},timeout:YR.get()})}if(_a().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_a().gapi?.load)i();else{const l=Bj("iframefcb");return _a()[l]=()=>{gapi.load?i():n(va(s,"network-request-failed"))},Uw(`${Uj()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Jd=null,e})}let Jd=null;function QR(s){return Jd=Jd||KR(s),Jd}const WR=new iu(5e3,15e3),XR="__/auth/iframe",JR="emulator/auth/iframe",ZR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tC(s){const e=s.config;Fe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?fg(e,JR):`https://${s.config.authDomain}/${XR}`,i={apiKey:e.apiKey,appName:s.name,v:tl},l=eC.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${au(i).slice(1)}`}async function nC(s){const e=await QR(s),n=_a().gapi;return Fe(n,s,"internal-error"),e.open({where:document.body,url:tC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZR,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=va(s,"network-request-failed"),p=_a().setTimeout(()=>{u(h)},WR.get());function g(){_a().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(h)})}))}const sC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aC=500,iC=600,rC="_blank",lC="http://localhost";class xv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oC(s,e,n,i=aC,l=iC){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...sC,width:i.toString(),height:l.toString(),top:u,left:h},x=Bn().toLowerCase();n&&(p=kw(x)?rC:n),Cw(x)&&(e=e||lC,g.scrollbars="yes");const b=Object.entries(g).reduce((N,[C,G])=>`${N}${C}=${G},`,"");if(Cj(x)&&p!=="_self")return cC(e||"",p),new xv(null);const w=window.open(e||"",p,b);Fe(w,s,"popup-blocked");try{w.focus()}catch{}return new xv(w)}function cC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const uC="__/auth/handler",dC="emulator/auth/handler",hC=encodeURIComponent("fac");async function yv(s,e,n,i,l,u){Fe(s.config.authDomain,s,"auth-domain-config-required"),Fe(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:tl,eventId:l};if(e instanceof qw){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",JS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))h[b]=w}if(e instanceof lu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(h.scopes=b.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),x=g?`#${hC}=${encodeURIComponent(g)}`:"";return`${fC(s)}?${au(p).slice(1)}${x}`}function fC({config:s}){return s.emulator?fg(s,dC):`https://${s.authDomain}/${uC}`}const lp="webStorageSupport";class mC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ww,this._completeRedirectFn=LR,this._overrideRedirectResult=OR}async _openPopup(e,n,i,l){ni(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await yv(e,n,i,Ap(),l);return oC(e,u,yg())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await yv(e,n,i,Ap(),l);return xR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(ni(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await nC(e),i=new BR(e);return n.register("authEvent",l=>(Fe(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lp,{type:lp},l=>{const u=l?.[0]?.[lp];u!==void 0&&n(!!u),Qs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$R(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Pw()||Iw()||pg()}}const pC=mC;var bv="@firebase/auth",vv="1.12.0";class gC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function xC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yC(s){$r(new Ji("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Fe(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lw(s)},x=new Vj(i,l,u,g);return Gj(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),$r(new Ji("auth-internal",e=>{const n=nl(e.getProvider("auth").getImmediate());return(i=>new gC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ba(bv,vv,xC(s)),ba(bv,vv,"esm2020")}const bC=300,vC=pw("authIdTokenMaxAge")||bC;let _v=null;const _C=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>vC)return;const l=n?.token;_v!==l&&(_v=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function wC(s=dg()){const e=Ch(s,"auth");if(e.isInitialized())return e.getImmediate();const n=$j(s,{popupRedirectResolver:pC,persistence:[SR,mR,Ww]}),i=pw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=_C(u.toString());cR(n,h,()=>h(n.currentUser)),oR(n,p=>h(p))}}const l=hw("auth");return l&&Yj(n,`http://${l}`),n}function EC(){return document.getElementsByTagName("head")?.[0]??document}Pj({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=va("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",EC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yC("Browser");var NC="firebase",TC="12.8.0";ba(NC,TC,"app");var wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ki,s1;(function(){var s;function e(S,A){function R(){}R.prototype=A.prototype,S.F=A.prototype,S.prototype=new R,S.prototype.constructor=S,S.D=function(V,k,U){for(var I=Array(arguments.length-2),q=2;q<arguments.length;q++)I[q-2]=arguments[q];return A.prototype[k].apply(V,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(S,A,R){R||(R=0);const V=Array(16);if(typeof A=="string")for(var k=0;k<16;++k)V[k]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(k=0;k<16;++k)V[k]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=S.g[0],R=S.g[1],k=S.g[2];let U=S.g[3],I;I=A+(U^R&(k^U))+V[0]+3614090360&4294967295,A=R+(I<<7&4294967295|I>>>25),I=U+(k^A&(R^k))+V[1]+3905402710&4294967295,U=A+(I<<12&4294967295|I>>>20),I=k+(R^U&(A^R))+V[2]+606105819&4294967295,k=U+(I<<17&4294967295|I>>>15),I=R+(A^k&(U^A))+V[3]+3250441966&4294967295,R=k+(I<<22&4294967295|I>>>10),I=A+(U^R&(k^U))+V[4]+4118548399&4294967295,A=R+(I<<7&4294967295|I>>>25),I=U+(k^A&(R^k))+V[5]+1200080426&4294967295,U=A+(I<<12&4294967295|I>>>20),I=k+(R^U&(A^R))+V[6]+2821735955&4294967295,k=U+(I<<17&4294967295|I>>>15),I=R+(A^k&(U^A))+V[7]+4249261313&4294967295,R=k+(I<<22&4294967295|I>>>10),I=A+(U^R&(k^U))+V[8]+1770035416&4294967295,A=R+(I<<7&4294967295|I>>>25),I=U+(k^A&(R^k))+V[9]+2336552879&4294967295,U=A+(I<<12&4294967295|I>>>20),I=k+(R^U&(A^R))+V[10]+4294925233&4294967295,k=U+(I<<17&4294967295|I>>>15),I=R+(A^k&(U^A))+V[11]+2304563134&4294967295,R=k+(I<<22&4294967295|I>>>10),I=A+(U^R&(k^U))+V[12]+1804603682&4294967295,A=R+(I<<7&4294967295|I>>>25),I=U+(k^A&(R^k))+V[13]+4254626195&4294967295,U=A+(I<<12&4294967295|I>>>20),I=k+(R^U&(A^R))+V[14]+2792965006&4294967295,k=U+(I<<17&4294967295|I>>>15),I=R+(A^k&(U^A))+V[15]+1236535329&4294967295,R=k+(I<<22&4294967295|I>>>10),I=A+(k^U&(R^k))+V[1]+4129170786&4294967295,A=R+(I<<5&4294967295|I>>>27),I=U+(R^k&(A^R))+V[6]+3225465664&4294967295,U=A+(I<<9&4294967295|I>>>23),I=k+(A^R&(U^A))+V[11]+643717713&4294967295,k=U+(I<<14&4294967295|I>>>18),I=R+(U^A&(k^U))+V[0]+3921069994&4294967295,R=k+(I<<20&4294967295|I>>>12),I=A+(k^U&(R^k))+V[5]+3593408605&4294967295,A=R+(I<<5&4294967295|I>>>27),I=U+(R^k&(A^R))+V[10]+38016083&4294967295,U=A+(I<<9&4294967295|I>>>23),I=k+(A^R&(U^A))+V[15]+3634488961&4294967295,k=U+(I<<14&4294967295|I>>>18),I=R+(U^A&(k^U))+V[4]+3889429448&4294967295,R=k+(I<<20&4294967295|I>>>12),I=A+(k^U&(R^k))+V[9]+568446438&4294967295,A=R+(I<<5&4294967295|I>>>27),I=U+(R^k&(A^R))+V[14]+3275163606&4294967295,U=A+(I<<9&4294967295|I>>>23),I=k+(A^R&(U^A))+V[3]+4107603335&4294967295,k=U+(I<<14&4294967295|I>>>18),I=R+(U^A&(k^U))+V[8]+1163531501&4294967295,R=k+(I<<20&4294967295|I>>>12),I=A+(k^U&(R^k))+V[13]+2850285829&4294967295,A=R+(I<<5&4294967295|I>>>27),I=U+(R^k&(A^R))+V[2]+4243563512&4294967295,U=A+(I<<9&4294967295|I>>>23),I=k+(A^R&(U^A))+V[7]+1735328473&4294967295,k=U+(I<<14&4294967295|I>>>18),I=R+(U^A&(k^U))+V[12]+2368359562&4294967295,R=k+(I<<20&4294967295|I>>>12),I=A+(R^k^U)+V[5]+4294588738&4294967295,A=R+(I<<4&4294967295|I>>>28),I=U+(A^R^k)+V[8]+2272392833&4294967295,U=A+(I<<11&4294967295|I>>>21),I=k+(U^A^R)+V[11]+1839030562&4294967295,k=U+(I<<16&4294967295|I>>>16),I=R+(k^U^A)+V[14]+4259657740&4294967295,R=k+(I<<23&4294967295|I>>>9),I=A+(R^k^U)+V[1]+2763975236&4294967295,A=R+(I<<4&4294967295|I>>>28),I=U+(A^R^k)+V[4]+1272893353&4294967295,U=A+(I<<11&4294967295|I>>>21),I=k+(U^A^R)+V[7]+4139469664&4294967295,k=U+(I<<16&4294967295|I>>>16),I=R+(k^U^A)+V[10]+3200236656&4294967295,R=k+(I<<23&4294967295|I>>>9),I=A+(R^k^U)+V[13]+681279174&4294967295,A=R+(I<<4&4294967295|I>>>28),I=U+(A^R^k)+V[0]+3936430074&4294967295,U=A+(I<<11&4294967295|I>>>21),I=k+(U^A^R)+V[3]+3572445317&4294967295,k=U+(I<<16&4294967295|I>>>16),I=R+(k^U^A)+V[6]+76029189&4294967295,R=k+(I<<23&4294967295|I>>>9),I=A+(R^k^U)+V[9]+3654602809&4294967295,A=R+(I<<4&4294967295|I>>>28),I=U+(A^R^k)+V[12]+3873151461&4294967295,U=A+(I<<11&4294967295|I>>>21),I=k+(U^A^R)+V[15]+530742520&4294967295,k=U+(I<<16&4294967295|I>>>16),I=R+(k^U^A)+V[2]+3299628645&4294967295,R=k+(I<<23&4294967295|I>>>9),I=A+(k^(R|~U))+V[0]+4096336452&4294967295,A=R+(I<<6&4294967295|I>>>26),I=U+(R^(A|~k))+V[7]+1126891415&4294967295,U=A+(I<<10&4294967295|I>>>22),I=k+(A^(U|~R))+V[14]+2878612391&4294967295,k=U+(I<<15&4294967295|I>>>17),I=R+(U^(k|~A))+V[5]+4237533241&4294967295,R=k+(I<<21&4294967295|I>>>11),I=A+(k^(R|~U))+V[12]+1700485571&4294967295,A=R+(I<<6&4294967295|I>>>26),I=U+(R^(A|~k))+V[3]+2399980690&4294967295,U=A+(I<<10&4294967295|I>>>22),I=k+(A^(U|~R))+V[10]+4293915773&4294967295,k=U+(I<<15&4294967295|I>>>17),I=R+(U^(k|~A))+V[1]+2240044497&4294967295,R=k+(I<<21&4294967295|I>>>11),I=A+(k^(R|~U))+V[8]+1873313359&4294967295,A=R+(I<<6&4294967295|I>>>26),I=U+(R^(A|~k))+V[15]+4264355552&4294967295,U=A+(I<<10&4294967295|I>>>22),I=k+(A^(U|~R))+V[6]+2734768916&4294967295,k=U+(I<<15&4294967295|I>>>17),I=R+(U^(k|~A))+V[13]+1309151649&4294967295,R=k+(I<<21&4294967295|I>>>11),I=A+(k^(R|~U))+V[4]+4149444226&4294967295,A=R+(I<<6&4294967295|I>>>26),I=U+(R^(A|~k))+V[11]+3174756917&4294967295,U=A+(I<<10&4294967295|I>>>22),I=k+(A^(U|~R))+V[2]+718787259&4294967295,k=U+(I<<15&4294967295|I>>>17),I=R+(U^(k|~A))+V[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+U&4294967295}i.prototype.v=function(S,A){A===void 0&&(A=S.length);const R=A-this.blockSize,V=this.C;let k=this.h,U=0;for(;U<A;){if(k==0)for(;U<=R;)l(this,S,U),U+=this.blockSize;if(typeof S=="string"){for(;U<A;)if(V[k++]=S.charCodeAt(U++),k==this.blockSize){l(this,V),k=0;break}}else for(;U<A;)if(V[k++]=S[U++],k==this.blockSize){l(this,V),k=0;break}}this.h=k,this.o+=A},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;A=this.o*8;for(var R=S.length-8;R<S.length;++R)S[R]=A&255,A/=256;for(this.v(S),S=Array(16),A=0,R=0;R<4;++R)for(let V=0;V<32;V+=8)S[A++]=this.g[R]>>>V&255;return S};function u(S,A){var R=p;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=A(S)}function h(S,A){this.h=A;const R=[];let V=!0;for(let k=S.length-1;k>=0;k--){const U=S[k]|0;V&&U==A||(R[k]=U,V=!1)}this.g=R}var p={};function g(S){return-128<=S&&S<128?u(S,function(A){return new h([A|0],A<0?-1:0)}):new h([S|0],S<0?-1:0)}function x(S){if(isNaN(S)||!isFinite(S))return w;if(S<0)return O(x(-S));const A=[];let R=1;for(let V=0;S>=R;V++)A[V]=S/R|0,R*=4294967296;return new h(A,0)}function b(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return O(b(S.substring(1),A));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=x(Math.pow(A,8));let V=w;for(let U=0;U<S.length;U+=8){var k=Math.min(8,S.length-U);const I=parseInt(S.substring(U,U+k),A);k<8?(k=x(Math.pow(A,k)),V=V.j(k).add(x(I))):(V=V.j(R),V=V.add(x(I)))}return V}var w=g(0),N=g(1),C=g(16777216);s=h.prototype,s.m=function(){if(z(this))return-O(this).m();let S=0,A=1;for(let R=0;R<this.g.length;R++){const V=this.i(R);S+=(V>=0?V:4294967296+V)*A,A*=4294967296}return S},s.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(G(this))return"0";if(z(this))return"-"+O(this).toString(S);const A=x(Math.pow(S,6));var R=this;let V="";for(;;){const k=fe(R,A).g;R=L(R,k.j(A));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(S);if(R=k,G(R))return U+V;for(;U.length<6;)U="0"+U;V=U+V}},s.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function G(S){if(S.h!=0)return!1;for(let A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function z(S){return S.h==-1}s.l=function(S){return S=L(this,S),z(S)?-1:G(S)?0:1};function O(S){const A=S.g.length,R=[];for(let V=0;V<A;V++)R[V]=~S.g[V];return new h(R,~S.h).add(N)}s.abs=function(){return z(this)?O(this):this},s.add=function(S){const A=Math.max(this.g.length,S.g.length),R=[];let V=0;for(let k=0;k<=A;k++){let U=V+(this.i(k)&65535)+(S.i(k)&65535),I=(U>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);V=I>>>16,U&=65535,I&=65535,R[k]=I<<16|U}return new h(R,R[R.length-1]&-2147483648?-1:0)};function L(S,A){return S.add(O(A))}s.j=function(S){if(G(this)||G(S))return w;if(z(this))return z(S)?O(this).j(O(S)):O(O(this).j(S));if(z(S))return O(this.j(O(S)));if(this.l(C)<0&&S.l(C)<0)return x(this.m()*S.m());const A=this.g.length+S.g.length,R=[];for(var V=0;V<2*A;V++)R[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<S.g.length;k++){const U=this.i(V)>>>16,I=this.i(V)&65535,q=S.i(k)>>>16,ne=S.i(k)&65535;R[2*V+2*k]+=I*ne,H(R,2*V+2*k),R[2*V+2*k+1]+=U*ne,H(R,2*V+2*k+1),R[2*V+2*k+1]+=I*q,H(R,2*V+2*k+1),R[2*V+2*k+2]+=U*q,H(R,2*V+2*k+2)}for(S=0;S<A;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=A;S<2*A;S++)R[S]=0;return new h(R,0)};function H(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function K(S,A){this.g=S,this.h=A}function fe(S,A){if(G(A))throw Error("division by zero");if(G(S))return new K(w,w);if(z(S))return A=fe(O(S),A),new K(O(A.g),O(A.h));if(z(A))return A=fe(S,O(A)),new K(O(A.g),A.h);if(S.g.length>30){if(z(S)||z(A))throw Error("slowDivide_ only works with positive integers.");for(var R=N,V=A;V.l(S)<=0;)R=pe(R),V=pe(V);var k=le(R,1),U=le(V,1);for(V=le(V,2),R=le(R,2);!G(V);){var I=U.add(V);I.l(S)<=0&&(k=k.add(R),U=I),V=le(V,1),R=le(R,1)}return A=L(S,k.j(A)),new K(k,A)}for(k=w;S.l(A)>=0;){for(R=Math.max(1,Math.floor(S.m()/A.m())),V=Math.ceil(Math.log(R)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),U=x(R),I=U.j(A);z(I)||I.l(S)>0;)R-=V,U=x(R),I=U.j(A);G(U)&&(U=N),k=k.add(U),S=L(S,I)}return new K(k,S)}s.B=function(S){return fe(this,S).h},s.and=function(S){const A=Math.max(this.g.length,S.g.length),R=[];for(let V=0;V<A;V++)R[V]=this.i(V)&S.i(V);return new h(R,this.h&S.h)},s.or=function(S){const A=Math.max(this.g.length,S.g.length),R=[];for(let V=0;V<A;V++)R[V]=this.i(V)|S.i(V);return new h(R,this.h|S.h)},s.xor=function(S){const A=Math.max(this.g.length,S.g.length),R=[];for(let V=0;V<A;V++)R[V]=this.i(V)^S.i(V);return new h(R,this.h^S.h)};function pe(S){const A=S.g.length+1,R=[];for(let V=0;V<A;V++)R[V]=S.i(V)<<1|S.i(V-1)>>>31;return new h(R,S.h)}function le(S,A){const R=A>>5;A%=32;const V=S.g.length-R,k=[];for(let U=0;U<V;U++)k[U]=A>0?S.i(U+R)>>>A|S.i(U+R+1)<<32-A:S.i(U+R);return new h(k,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,s1=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=x,h.fromString=b,Ki=h}).apply(typeof wv<"u"?wv:typeof self<"u"?self:typeof window<"u"?window:{});var Bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var a1,jc,i1,Zd,Ip,r1,l1,o1;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bd=="object"&&Bd];for(var y=0;y<d.length;++y){var _=d[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function l(d,y){if(y)e:{var _=i;d=d.split(".");for(var T=0;T<d.length-1;T++){var Y=d[T];if(!(Y in _))break e;_=_[Y]}d=d[d.length-1],T=_[d],y=y(T),y!=T&&y!=null&&e(_,d,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(y){var _=[],T;for(T in y)Object.prototype.hasOwnProperty.call(y,T)&&_.push([T,y[T]]);return _}});var u=u||{},h=this||self;function p(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function g(d,y,_){return d.call.apply(d.bind,arguments)}function x(d,y,_){return x=g,x.apply(null,arguments)}function b(d,y){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),d.apply(this,T)}}function w(d,y){function _(){}_.prototype=y.prototype,d.Z=y.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(T,Y,Z){for(var be=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)be[Xe-2]=arguments[Xe];return y.prototype[Y].apply(T,be)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function C(d){const y=d.length;if(y>0){const _=Array(y);for(let T=0;T<y;T++)_[T]=d[T];return _}return[]}function G(d,y){for(let T=1;T<arguments.length;T++){const Y=arguments[T];var _=typeof Y;if(_=_!="object"?_:Y?Array.isArray(Y)?"array":_:"null",_=="array"||_=="object"&&typeof Y.length=="number"){_=d.length||0;const Z=Y.length||0;d.length=_+Z;for(let be=0;be<Z;be++)d[_+be]=Y[be]}else d.push(Y)}}class z{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(d){h.setTimeout(()=>{throw d},0)}function L(){var d=S;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class H{constructor(){this.h=this.g=null}add(y,_){const T=K.get();T.set(y,_),this.h?this.h.next=T:this.g=T,this.h=T}}var K=new z(()=>new fe,d=>d.reset());class fe{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,le=!1,S=new H,A=()=>{const d=Promise.resolve(void 0);pe=()=>{d.then(R)}};function R(){for(var d;d=L();){try{d.h.call(d.g)}catch(_){O(_)}var y=K;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}le=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};h.addEventListener("test",_,y),h.removeEventListener("test",_,y)}catch{}return d})();function I(d){return/^[\s\xa0]*$/.test(d)}function q(d,y){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}w(q,k),q.prototype.init=function(d,y){const _=this.type=d.type,T=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(_=="mouseover"?y=d.fromElement:_=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ne="closure_listenable_"+(Math.random()*1e6|0),M=0;function he(d,y,_,T,Y){this.listener=d,this.proxy=null,this.src=y,this.type=_,this.capture=!!T,this.ha=Y,this.key=++M,this.da=this.fa=!1}function ve(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ce(d,y,_){for(const T in d)y.call(_,d[T],T,d)}function Le(d,y){for(const _ in d)y.call(void 0,d[_],_,d)}function P(d){const y={};for(const _ in d)y[_]=d[_];return y}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(d,y){let _,T;for(let Y=1;Y<arguments.length;Y++){T=arguments[Y];for(_ in T)d[_]=T[_];for(let Z=0;Z<se.length;Z++)_=se[Z],Object.prototype.hasOwnProperty.call(T,_)&&(d[_]=T[_])}}function ge(d){this.src=d,this.g={},this.h=0}ge.prototype.add=function(d,y,_,T,Y){const Z=d.toString();d=this.g[Z],d||(d=this.g[Z]=[],this.h++);const be=je(d,y,T,Y);return be>-1?(y=d[be],_||(y.fa=!1)):(y=new he(y,this.src,Z,!!T,Y),y.fa=_,d.push(y)),y};function xe(d,y){const _=y.type;if(_ in d.g){var T=d.g[_],Y=Array.prototype.indexOf.call(T,y,void 0),Z;(Z=Y>=0)&&Array.prototype.splice.call(T,Y,1),Z&&(ve(y),d.g[_].length==0&&(delete d.g[_],d.h--))}}function je(d,y,_,T){for(let Y=0;Y<d.length;++Y){const Z=d[Y];if(!Z.da&&Z.listener==y&&Z.capture==!!_&&Z.ha==T)return Y}return-1}var ie="closure_lm_"+(Math.random()*1e6|0),Ve={};function Ie(d,y,_,T,Y){if(Array.isArray(y)){for(let Z=0;Z<y.length;Z++)Ie(d,y[Z],_,T,Y);return null}return _=zn(_),d&&d[ne]?d.J(y,_,p(T)?!!T.capture:!1,Y):$e(d,y,_,!1,T,Y)}function $e(d,y,_,T,Y,Z){if(!y)throw Error("Invalid event type");const be=p(Y)?!!Y.capture:!!Y;let Xe=sn(d);if(Xe||(d[ie]=Xe=new ge(d)),_=Xe.add(y,_,T,be,Z),_.proxy)return _;if(T=tt(),_.proxy=T,T.src=d,T.listener=_,d.addEventListener)U||(Y=be),Y===void 0&&(Y=!1),d.addEventListener(y.toString(),T,Y);else if(d.attachEvent)d.attachEvent(pt(y.toString()),T);else if(d.addListener&&d.removeListener)d.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function tt(){function d(_){return y.call(d.src,d.listener,_)}const y=gn;return d}function Yt(d,y,_,T,Y){if(Array.isArray(y))for(var Z=0;Z<y.length;Z++)Yt(d,y[Z],_,T,Y);else T=p(T)?!!T.capture:!!T,_=zn(_),d&&d[ne]?(d=d.i,Z=String(y).toString(),Z in d.g&&(y=d.g[Z],_=je(y,_,T,Y),_>-1&&(ve(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete d.g[Z],d.h--)))):d&&(d=sn(d))&&(y=d.g[y.toString()],d=-1,y&&(d=je(y,_,T,Y)),(_=d>-1?y[d]:null)&&It(_))}function It(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[ne])xe(y.i,d);else{var _=d.type,T=d.proxy;y.removeEventListener?y.removeEventListener(_,T,d.capture):y.detachEvent?y.detachEvent(pt(_),T):y.addListener&&y.removeListener&&y.removeListener(T),(_=sn(y))?(xe(_,d),_.h==0&&(_.src=null,y[ie]=null)):ve(d)}}}function pt(d){return d in Ve?Ve[d]:Ve[d]="on"+d}function gn(d,y){if(d.da)d=!0;else{y=new q(y,this);const _=d.listener,T=d.ha||d.src;d.fa&&It(d),d=_.call(T,y)}return d}function sn(d){return d=d[ie],d instanceof ge?d:null}var as="__closure_events_fn_"+(Math.random()*1e9>>>0);function zn(d){return typeof d=="function"?d:(d[as]||(d[as]=function(y){return d.handleEvent(y)}),d[as])}function vt(){V.call(this),this.i=new ge(this),this.M=this,this.G=null}w(vt,V),vt.prototype[ne]=!0,vt.prototype.removeEventListener=function(d,y,_,T){Yt(this,d,y,_,T)};function Ee(d,y){var _,T=d.G;if(T)for(_=[];T;T=T.G)_.push(T);if(d=d.M,T=y.type||y,typeof y=="string")y=new k(y,d);else if(y instanceof k)y.target=y.target||d;else{var Y=y;y=new k(T,d),ce(y,Y)}Y=!0;let Z,be;if(_)for(be=_.length-1;be>=0;be--)Z=y.g=_[be],Y=ke(Z,T,!0,y)&&Y;if(Z=y.g=d,Y=ke(Z,T,!0,y)&&Y,Y=ke(Z,T,!1,y)&&Y,_)for(be=0;be<_.length;be++)Z=y.g=_[be],Y=ke(Z,T,!1,y)&&Y}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const _=d.g[y];for(let T=0;T<_.length;T++)ve(_[T]);delete d.g[y],d.h--}}this.G=null},vt.prototype.J=function(d,y,_,T){return this.i.add(String(d),y,!1,_,T)},vt.prototype.K=function(d,y,_,T){return this.i.add(String(d),y,!0,_,T)};function ke(d,y,_,T){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let Y=!0;for(let Z=0;Z<y.length;++Z){const be=y[Z];if(be&&!be.da&&be.capture==_){const Xe=be.listener,Zt=be.ha||be.src;be.fa&&xe(d.i,be),Y=Xe.call(Zt,T)!==!1&&Y}}return Y&&!T.defaultPrevented}function Ye(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(d,y||0)}function Pt(d){d.g=Ye(()=>{d.g=null,d.i&&(d.i=!1,Pt(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class at extends V{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Pt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ut(d){V.call(this),this.h=d,this.g={}}w(ut,V);var F=[];function te(d){Ce(d.g,function(y,_){this.g.hasOwnProperty(_)&&It(y)},d),d.g={}}ut.prototype.N=function(){ut.Z.N.call(this),te(this)},ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _e=h.JSON.stringify,we=h.JSON.parse,Pe=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function _t(){}function ft(){}var me={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ye(){k.call(this,"d")}w(ye,k);function qe(){k.call(this,"c")}w(qe,k);var Ue={},gt=null;function Be(){return gt=gt||new vt}Ue.Ia="serverreachability";function De(d){k.call(this,Ue.Ia,d)}w(De,k);function At(d){const y=Be();Ee(y,new De(y))}Ue.STAT_EVENT="statevent";function vn(d,y){k.call(this,Ue.STAT_EVENT,d),this.stat=y}w(vn,k);function wt(d){const y=Be();Ee(y,new vn(y,d))}Ue.Ja="timingevent";function xn(d,y){k.call(this,Ue.Ja,d),this.size=y}w(xn,k);function Dn(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},y)}function qn(){this.g=!0}qn.prototype.ua=function(){this.g=!1};function Eo(d,y,_,T,Y,Z){d.info(function(){if(d.g)if(Z){var be="",Xe=Z.split("&");for(let Et=0;Et<Xe.length;Et++){var Zt=Xe[Et].split("=");if(Zt.length>1){const qt=Zt[0];Zt=Zt[1];const Es=qt.split("_");be=Es.length>=2&&Es[1]=="type"?be+(qt+"="+Zt+"&"):be+(qt+"=redacted&")}}}else be=null;else be=Z;return"XMLHTTP REQ ("+T+") [attempt "+Y+"]: "+y+`
`+_+`
`+be})}function Mn(d,y,_,T,Y,Z,be){d.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+Y+"]: "+y+`
`+_+`
`+Z+" "+be})}function is(d,y,_,T){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+ll(d,_)+(T?" "+T:"")})}function On(d,y){d.info(function(){return"TIMEOUT: "+y})}qn.prototype.info=function(){};function ll(d,y){if(!d.g)return y;if(!y)return null;try{const Z=JSON.parse(y);if(Z){for(d=0;d<Z.length;d++)if(Array.isArray(Z[d])){var _=Z[d];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var Y=T[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let be=1;be<T.length;be++)T[be]=""}}}}return _e(Z)}catch{return y}}var Ra={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ii;function ri(){}w(ri,_t),ri.prototype.g=function(){return new XMLHttpRequest},ii=new ri;function Ca(d){return encodeURIComponent(String(d))}function gu(d){var y=1;d=d.split(":");const _=[];for(;y>0&&d.length;)_.push(d.shift()),y--;return d.length&&_.push(d.join(":")),_}function Vs(d,y,_,T){this.j=d,this.i=y,this.l=_,this.S=T||1,this.V=new ut(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ps}function Ps(){this.i=null,this.g="",this.h=!1}var an={},_n={};function Js(d,y,_){d.M=1,d.A=hr(ln(y)),d.u=_,d.R=!0,ol(d,null)}function ol(d,y){d.F=Date.now(),Zs(d),d.B=ln(d.A);var _=d.B,T=d.S;Array.isArray(T)||(T=[String(T)]),hl(_.i,"t",T),d.C=0,_=d.j.L,d.h=new Ps,d.g=Iu(d.j,_?y:null,!d.u),d.P>0&&(d.O=new at(x(d.Y,d,d.g),d.P)),y=d.V,_=d.g,T=d.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(F[0]=Y.toString()),Y=F);for(let Z=0;Z<Y.length;Z++){const be=Ie(_,Y[Z],T||y.handleEvent,!1,y.h||y);if(!be)break;y.g[be.key]=be}y=d.J?P(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),At(),Eo(d.i,d.v,d.B,d.l,d.S,d.u)}Vs.prototype.ba=function(d){d=d.target;const y=this.O;y&&Bs(d)==3?y.j():this.Y(d)},Vs.prototype.Y=function(d){try{if(d==this.g)e:{const Xe=Bs(this.g),Zt=this.g.ya(),Et=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||Tn(this.g)))){this.K||Xe!=4||Zt==7||(Zt==8||Et<=0?At(3):At(2)),ea(this);var y=this.g.ca();this.X=y;var _=Xh(this);if(this.o=y==200,Mn(this.i,this.v,this.B,this.l,this.S,Xe,y),this.o){if(this.U&&!this.L){t:{if(this.g){var T,Y=this.g;if((T=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var Z=T;break t}}Z=null}if(d=Z)is(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ta(this,d);else{this.o=!1,this.m=3,wt(12),rs(this),vs(this);break e}}if(this.R){d=!0;let qt;for(;!this.K&&this.C<_.length;)if(qt=yu(this,_),qt==_n){Xe==4&&(this.m=4,wt(14),d=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==an){this.m=4,wt(15),is(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else is(this.i,this.l,qt,null),ta(this,qt);if(xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||_.length!=0||this.h.h||(this.m=1,wt(16),d=!1),this.o=this.o&&d,!d)is(this.i,this.l,_,"[Invalid Chunked Response]"),rs(this),vs(this);else if(_.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Lo(be),be.P=!0,wt(11))}}else is(this.i,this.l,_,null),ta(this,_);Xe==4&&rs(this),this.o&&!this.K&&(Xe==4?Au(this.j,this):(this.o=!1,Zs(this)))}else ka(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),rs(this),vs(this)}}}catch{}};function Xh(d){if(!xu(d))return d.g.la();const y=Tn(d.g);if(y==="")return"";let _="";const T=y.length,Y=Bs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return rs(d),vs(d),"";d.h.i=new h.TextDecoder}for(let Z=0;Z<T;Z++)d.h.h=!0,_+=d.h.i.decode(y[Z],{stream:!(Y&&Z==T-1)});return y.length=0,d.h.g+=_,d.C=0,d.h.g}function xu(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function yu(d,y){var _=d.C,T=y.indexOf(`
`,_);return T==-1?_n:(_=Number(y.substring(_,T)),isNaN(_)?an:(T+=1,T+_>y.length?_n:(y=y.slice(T,T+_),d.C=T+_,y)))}Vs.prototype.cancel=function(){this.K=!0,rs(this)};function Zs(d){d.T=Date.now()+d.H,cl(d,d.H)}function cl(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Dn(x(d.aa,d),y)}function ea(d){d.D&&(h.clearTimeout(d.D),d.D=null)}Vs.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(On(this.i,this.B),this.M!=2&&(At(),wt(17)),rs(this),this.m=2,vs(this)):cl(this,this.T-d)};function vs(d){d.j.I==0||d.K||Au(d.j,d)}function rs(d){ea(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,te(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function ta(d,y){try{var _=d.j;if(_.I!=0&&(_.g==d||sa(_.h,d))){if(!d.L&&sa(_.h,d)&&_.I==3){try{var T=_.Ba.g.parse(y)}catch{T=null}if(Array.isArray(T)&&T.length==3){var Y=T;if(Y[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)xl(_),mi(_);else break e;br(_),wt(18)}}else _.xa=Y[1],0<_.xa-_.K&&Y[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Dn(x(_.Va,_),6e3));na(_.h)<=1&&_.ta&&(_.ta=void 0)}else ca(_,11)}else if((d.L||_.g==d)&&xl(_),!I(y))for(Y=_.Ba.g.parse(y),y=0;y<Y.length;y++){let Et=Y[y];const qt=Et[0];if(!(qt<=_.K))if(_.K=qt,Et=Et[1],_.I==2)if(Et[0]=="c"){_.M=Et[1],_.ba=Et[2];const Es=Et[3];Es!=null&&(_.ka=Es,_.j.info("VER="+_.ka));const ua=Et[4];ua!=null&&(_.za=ua,_.j.info("SVER="+_.za));const zs=Et[5];zs!=null&&typeof zs=="number"&&zs>0&&(T=1.5*zs,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const qs=d.g;if(qs){const vr=qs.g?qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vr){var Z=T.h;Z.g||vr.indexOf("spdy")==-1&&vr.indexOf("quic")==-1&&vr.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(So(Z,Z.h),Z.h=null))}if(T.G){const yl=qs.g?qs.g.getResponseHeader("X-HTTP-Session-Id"):null;yl&&(T.wa=yl,jt(T.J,T.G,yl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var be=d;if(T.na=Cu(T,T.L?T.ba:null,T.W),be.L){Ao(T.h,be);var Xe=be,Zt=T.O;Zt&&(Xe.H=Zt),Xe.D&&(ea(Xe),Zs(Xe)),T.g=be}else Tu(T);_.i.length>0&&oa(_)}else Et[0]!="stop"&&Et[0]!="close"||ca(_,7);else _.I==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?ca(_,7):Vo(_):Et[0]!="noop"&&_.l&&_.l.qa(Et),_.A=0)}}At(4)}catch{}}var rn=class{constructor(d,y){this.g=d,this.map=y}};function No(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function To(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function na(d){return d.h?1:d.g?d.g.size:0}function sa(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function So(d,y){d.g?d.g.add(y):d.h=y}function Ao(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}No.prototype.cancel=function(){if(this.i=jo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function jo(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const _ of d.g.values())y=y.concat(_.G);return y}return C(d.i)}var bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ul(d,y){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const T=d[_].indexOf("=");let Y,Z=null;T>=0?(Y=d[_].substring(0,T),Z=d[_].substring(T+1)):Y=d[_],y(Y,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function ls(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof ls?(this.l=d.l,wn(this,d.j),this.o=d.o,this.g=d.g,li(this,d.u),this.h=d.h,Ro(this,Eu(d.i)),this.m=d.m):d&&(y=String(d).match(bu))?(this.l=!1,wn(this,y[1]||"",!0),this.o=aa(y[2]||""),this.g=aa(y[3]||"",!0),li(this,y[4]),this.h=aa(y[5]||"",!0),Ro(this,y[6]||"",!0),this.m=aa(y[7]||"")):(this.l=!1,this.i=new ci(null,this.l))}ls.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(fr(y,dl,!0),":");var _=this.g;return(_||y=="file")&&(d.push("//"),(y=this.o)&&d.push(fr(y,dl,!0),"@"),d.push(Ca(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(fr(_,_.charAt(0)=="/"?Co:vu,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",fr(_,_u)),d.join("")},ls.prototype.resolve=function(d){const y=ln(this);let _=!!d.j;_?wn(y,d.j):_=!!d.o,_?y.o=d.o:_=!!d.g,_?y.g=d.g:_=d.u!=null;var T=d.h;if(_)li(y,d.u);else if(_=!!d.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var Y=y.h.lastIndexOf("/");Y!=-1&&(T=y.h.slice(0,Y+1)+T)}if(Y=T,Y==".."||Y==".")T="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){T=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const Z=[];for(let be=0;be<Y.length;){const Xe=Y[be++];Xe=="."?T&&be==Y.length&&Z.push(""):Xe==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),T&&be==Y.length&&Z.push("")):(Z.push(Xe),T=!0)}T=Z.join("/")}else T=Y}return _?y.h=T:_=d.i.toString()!=="",_?Ro(y,Eu(d.i)):_=!!d.m,_&&(y.m=d.m),y};function ln(d){return new ls(d)}function wn(d,y,_){d.j=_?aa(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function li(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Ro(d,y,_){y instanceof ci?(d.i=y,fl(d.i,d.l)):(_||(y=fr(y,oi)),d.i=new ci(y,d.l))}function jt(d,y,_){d.i.set(y,_)}function hr(d){return jt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function aa(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function fr(d,y,_){return typeof d=="string"?(d=encodeURI(d).replace(y,Gn),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Gn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var dl=/[#\/\?@]/g,vu=/[#\?:]/g,Co=/[#\?]/g,oi=/[#\?@]/g,_u=/#/g;function ci(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Yn(d){d.g||(d.g=new Map,d.h=0,d.i&&ul(d.i,function(y,_){d.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}s=ci.prototype,s.add=function(d,y){Yn(this),this.i=null,d=ui(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(y),this.h+=1,this};function wu(d,y){Yn(d),y=ui(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Io(d,y){return Yn(d),y=ui(d,y),d.g.has(y)}s.forEach=function(d,y){Yn(this),this.g.forEach(function(_,T){_.forEach(function(Y){d.call(y,Y,T,this)},this)},this)};function ko(d,y){Yn(d);let _=[];if(typeof y=="string")Io(d,y)&&(_=_.concat(d.g.get(ui(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)_=_.concat(d[y]);return _}s.set=function(d,y){return Yn(this),this.i=null,d=ui(this,d),Io(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},s.get=function(d,y){return d?(d=ko(this,d),d.length>0?String(d[0]):y):y};function hl(d,y,_){wu(d,y),_.length>0&&(d.i=null,d.g.set(ui(d,y),C(_)),d.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let T=0;T<y.length;T++){var _=y[T];const Y=Ca(_);_=ko(this,_);for(let Z=0;Z<_.length;Z++){let be=Y;_[Z]!==""&&(be+="="+Ca(_[Z])),d.push(be)}}return this.i=d.join("&")};function Eu(d){const y=new ci;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function ui(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function fl(d,y){y&&!d.j&&(Yn(d),d.i=null,d.g.forEach(function(_,T){const Y=T.toLowerCase();T!=Y&&(wu(this,T),hl(this,Y,_))},d)),d.j=y}function Ls(d,y){const _=new qn;if(h.Image){const T=new Image;T.onload=b(_s,_,"TestLoadImage: loaded",!0,y,T),T.onerror=b(_s,_,"TestLoadImage: error",!1,y,T),T.onabort=b(_s,_,"TestLoadImage: abort",!1,y,T),T.ontimeout=b(_s,_,"TestLoadImage: timeout",!1,y,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=d}else y(!1)}function Do(d,y){const _=new qn,T=new AbortController,Y=setTimeout(()=>{T.abort(),_s(_,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:T.signal}).then(Z=>{clearTimeout(Y),Z.ok?_s(_,"TestPingServer: ok",!0,y):_s(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Y),_s(_,"TestPingServer: error",!1,y)})}function _s(d,y,_,T,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),T(_)}catch{}}function di(){this.g=new Pe}function ia(d){this.i=d.Sb||null,this.h=d.ab||!1}w(ia,_t),ia.prototype.g=function(){return new mr(this.i,this.h)};function mr(d,y){vt.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(mr,vt),s=mr.prototype,s.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,Us(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,hi(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ml(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function ml(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?hi(this):Us(this),this.readyState==3&&ml(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,hi(this))},s.Na=function(d){this.g&&(this.response=d,hi(this))},s.ga=function(){this.g&&hi(this)};function hi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Us(d)}s.setRequestHeader=function(d,y){this.A.append(d,y)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=y.next();return d.join(`\r
`)};function Us(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(mr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ws(d){let y="";return Ce(d,function(_,T){y+=T,y+=":",y+=_,y+=`\r
`}),y}function pr(d,y,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=ws(_),typeof d=="string"?_!=null&&Ca(_):jt(d,y,_))}function kt(d){vt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(kt,vt);var ra=/^https?$/i,Mo=["POST","PUT"];s=kt.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,y,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ii.g(),this.g.onreadystatechange=N(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(Z){gr(this,Z);return}if(d=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var Y in T)_.set(Y,T[Y]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const Z of T.keys())_.set(Z,T.get(Z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(Z=>Z.toLowerCase()=="content-type"),Y=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Mo,y,void 0)>=0)||T||Y||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,be]of _)this.g.setRequestHeader(Z,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Z){gr(this,Z)}};function gr(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,Oo(d),Ia(d)}function Oo(d){d.A||(d.A=!0,Ee(d,"complete"),Ee(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ee(this,"complete"),Ee(this,"abort"),Ia(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ia(this,!0)),kt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?xr(this):this.Xa())},s.Xa=function(){xr(this)};function xr(d){if(d.h&&typeof u<"u"){if(d.v&&Bs(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ee(d,"readystatechange"),Bs(d)==4){d.h=!1;try{const Z=d.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var T;if(T=Z===0){let be=String(d.D).match(bu)[1]||null;!be&&h.self&&h.self.location&&(be=h.self.location.protocol.slice(0,-1)),T=!ra.test(be?be.toLowerCase():"")}_=T}if(_)Ee(d,"complete"),Ee(d,"success");else{d.o=6;try{var Y=Bs(d)>2?d.g.statusText:""}catch{Y=""}d.l=Y+" ["+d.ca()+"]",Oo(d)}}finally{Ia(d)}}}}function Ia(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,y||Ee(d,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Bs(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Bs(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),we(y)}};function Tn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ka(d){const y={};d=(d.g&&Bs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<d.length;T++){if(I(d[T]))continue;var _=gu(d[T]);const Y=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const Z=y[Y]||[];y[Y]=Z,Z.push(_)}Le(y,function(T){return T.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(d,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||y}function fi(d){this.za=0,this.i=[],this.j=new qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=la("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=la("baseRetryDelayMs",5e3,d),this.Za=la("retryDelaySeedMs",1e4,d),this.Ta=la("forwardChannelMaxRetries",2,d),this.va=la("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new No(d&&d.concurrentRequestLimit),this.Ba=new di,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=fi.prototype,s.ka=8,s.I=1,s.connect=function(d,y,_,T){wt(0),this.W=d,this.H=y||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Cu(this,null,this.W),oa(this)};function Vo(d){if(pl(d),d.I==3){var y=d.V++,_=ln(d.J);if(jt(_,"SID",d.M),jt(_,"RID",y),jt(_,"TYPE","terminate"),yr(d,_),y=new Vs(d,d.j,y),y.M=2,y.A=hr(ln(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=y.A,_=!0),_||(y.g=Iu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Zs(y)}Ru(d)}function mi(d){d.g&&(Lo(d),d.g.cancel(),d.g=null)}function pl(d){mi(d),d.v&&(h.clearTimeout(d.v),d.v=null),xl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function oa(d){if(!To(d.h)&&!d.m){d.m=!0;var y=d.Ea;pe||A(),le||(pe(),le=!0),S.add(y,d),d.D=0}}function gl(d,y){return na(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Dn(x(d.Ea,d,y),ju(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const Y=new Vs(this,this.j,d);let Z=this.o;if(this.U&&(Z?(Z=P(Z),ce(Z,this.U)):Z=this.U),this.u!==null||this.R||(Y.J=Z,Z=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(y+=T,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Nu(this,Y,y),_=ln(this.J),jt(_,"RID",d),jt(_,"CVER",22),this.G&&jt(_,"X-HTTP-Session-Id",this.G),yr(this,_),Z&&(this.R?y="headers="+Ca(ws(Z))+"&"+y:this.u&&pr(_,this.u,Z)),So(this.h,Y),this.Ra&&jt(_,"TYPE","init"),this.S?(jt(_,"$req",y),jt(_,"SID","null"),Y.U=!0,Js(Y,_,null)):Js(Y,_,y),this.I=2}}else this.I==3&&(d?Po(this,d):this.i.length==0||To(this.h)||Po(this))};function Po(d,y){var _;y?_=y.l:_=d.V++;const T=ln(d.J);jt(T,"SID",d.M),jt(T,"RID",_),jt(T,"AID",d.K),yr(d,T),d.u&&d.o&&pr(T,d.u,d.o),_=new Vs(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),y&&(d.i=y.G.concat(d.i)),y=Nu(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),So(d.h,_),Js(_,T,y)}function yr(d,y){d.H&&Ce(d.H,function(_,T){jt(y,T,_)}),d.l&&Ce({},function(_,T){jt(y,T,_)})}function Nu(d,y,_){_=Math.min(d.i.length,_);const T=d.l?x(d.l.Ka,d.l,d):null;e:{var Y=d.i;let Xe=-1;for(;;){const Zt=["count="+_];Xe==-1?_>0?(Xe=Y[0].g,Zt.push("ofs="+Xe)):Xe=0:Zt.push("ofs="+Xe);let Et=!0;for(let qt=0;qt<_;qt++){var Z=Y[qt].g;const Es=Y[qt].map;if(Z-=Xe,Z<0)Xe=Math.max(0,Y[qt].g-100),Et=!1;else try{Z="req"+Z+"_"||"";try{var be=Es instanceof Map?Es:Object.entries(Es);for(const[ua,zs]of be){let qs=zs;p(zs)&&(qs=_e(zs)),Zt.push(Z+ua+"="+encodeURIComponent(qs))}}catch(ua){throw Zt.push(Z+"type="+encodeURIComponent("_badmap")),ua}}catch{T&&T(Es)}}if(Et){be=Zt.join("&");break e}}be=void 0}return d=d.i.splice(0,_),y.G=d,be}function Tu(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;pe||A(),le||(pe(),le=!0),S.add(y,d),d.A=0}}function br(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Dn(x(d.Da,d),ju(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Dn(x(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),mi(this),Su(this))};function Lo(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Su(d){d.g=new Vs(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=ln(d.na);jt(y,"RID","rpc"),jt(y,"SID",d.M),jt(y,"AID",d.K),jt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&jt(y,"TO",d.ia),jt(y,"TYPE","xmlhttp"),yr(d,y),d.u&&d.o&&pr(y,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=hr(ln(y)),_.u=null,_.R=!0,ol(_,d)}s.Va=function(){this.C!=null&&(this.C=null,mi(this),br(this),wt(19))};function xl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Au(d,y){var _=null;if(d.g==y){xl(d),Lo(d),d.g=null;var T=2}else if(sa(d.h,y))_=y.G,Ao(d.h,y),T=1;else return;if(d.I!=0){if(y.o)if(T==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var Y=d.D;T=Be(),Ee(T,new xn(T,_)),oa(d)}else Tu(d);else if(Y=y.m,Y==3||Y==0&&y.X>0||!(T==1&&gl(d,y)||T==2&&br(d)))switch(_&&_.length>0&&(y=d.h,y.i=y.i.concat(_)),Y){case 1:ca(d,5);break;case 4:ca(d,10);break;case 3:ca(d,6);break;default:ca(d,2)}}}function ju(d,y){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*y}function ca(d,y){if(d.j.info("Error code "+y),y==2){var _=x(d.bb,d),T=d.Ua;const Y=!T;T=new ls(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||wn(T,"https"),hr(T),Y?Ls(T.toString(),_):Do(T.toString(),_)}else wt(2);d.I=0,d.l&&d.l.pa(y),Ru(d),pl(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Ru(d){if(d.I=0,d.ja=[],d.l){const y=jo(d.h);(y.length!=0||d.i.length!=0)&&(G(d.ja,y),G(d.ja,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.oa()}}function Cu(d,y,_){var T=_ instanceof ls?ln(_):new ls(_);if(T.g!="")y&&(T.g=y+"."+T.g),li(T,T.u);else{var Y=h.location;T=Y.protocol,y=y?y+"."+Y.hostname:Y.hostname,Y=+Y.port;const Z=new ls(null);T&&wn(Z,T),y&&(Z.g=y),Y&&li(Z,Y),_&&(Z.h=_),T=Z}return _=d.G,y=d.wa,_&&y&&jt(T,_,y),jt(T,"VER",d.ka),yr(d,T),T}function Iu(d,y,_){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new kt(new ia({ab:_})):new kt(d.ma),y.Fa(d.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function ku(){}s=ku.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function pi(){}pi.prototype.g=function(d,y){return new Fn(d,y)};function Fn(d,y){vt.call(this),this.g=new fi(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!I(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Da(this)}w(Fn,vt),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Vo(this.g)},Fn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=_e(d),d=_);y.i.push(new rn(y.Ya++,d)),y.I==3&&oa(y)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Vo(this.g),delete this.g,Fn.Z.N.call(this)};function Du(d){ye.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const _ in y){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}w(Du,ye);function Mu(){qe.call(this),this.status=1}w(Mu,qe);function Da(d){this.g=d}w(Da,ku),Da.prototype.ra=function(){Ee(this.g,"a")},Da.prototype.qa=function(d){Ee(this.g,new Du(d))},Da.prototype.pa=function(d){Ee(this.g,new Mu)},Da.prototype.oa=function(){Ee(this.g,"b")},pi.prototype.createWebChannel=pi.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,o1=function(){return new pi},l1=function(){return Be()},r1=Ue,Ip={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ra.NO_ERROR=0,Ra.TIMEOUT=8,Ra.HTTP_ERROR=6,Zd=Ra,dr.COMPLETE="complete",i1=dr,ft.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",vt.prototype.listen=vt.prototype.J,jc=ft,kt.prototype.listenOnce=kt.prototype.K,kt.prototype.getLastError=kt.prototype.Ha,kt.prototype.getLastErrorCode=kt.prototype.ya,kt.prototype.getStatus=kt.prototype.ca,kt.prototype.getResponseJson=kt.prototype.La,kt.prototype.getResponseText=kt.prototype.la,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Fa,a1=kt}).apply(typeof Bd<"u"?Bd:typeof self<"u"?self:typeof window<"u"?window:{});let Ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");let bo="12.8.0";function SC(s){bo=s}const Kr=new cg("@firebase/firestore");function Kl(){return Kr.logLevel}function Te(s,...e){if(Kr.logLevel<=lt.DEBUG){const n=e.map(vg);Kr.debug(`Firestore (${bo}): ${s}`,...n)}}function si(s,...e){if(Kr.logLevel<=lt.ERROR){const n=e.map(vg);Kr.error(`Firestore (${bo}): ${s}`,...n)}}function ro(s,...e){if(Kr.logLevel<=lt.WARN){const n=e.map(vg);Kr.warn(`Firestore (${bo}): ${s}`,...n)}}function vg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function He(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,c1(s,i,n)}function c1(s,e,n){let i=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw si(i),new Error(i)}function St(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||c1(e,l,i)}function We(s,e){return s}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends ja{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class u1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ln.UNAUTHENTICATED)))}shutdown(){}}class jC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class RC{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){St(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Qi,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Qi)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(St(typeof i.accessToken=="string",31837,{l:i}),new u1(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class CC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class IC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new CC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ev{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ps(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){St(this.o===void 0,3512);const i=u=>{u.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,Te("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ev(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(St(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ev(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function DC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class _g{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=DC(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function ot(s,e){return s<e?-1:s>e?1:0}function kp(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return op(l)===op(u)?ot(l,u):op(l)?1:-1}return ot(s.length,e.length)}const MC=55296,OC=57343;function op(s){const e=s.charCodeAt(0);return e>=MC&&e<=OC}function lo(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}const Nv="__name__";class ga{constructor(e,n,i){n===void 0?n=0:n>e.length&&He(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&He(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ga.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ga?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=ga.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return ot(e.length,n.length)}static compareSegments(e,n){const i=ga.isNumericId(e),l=ga.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?ga.extractNumericId(e).compare(ga.extractNumericId(n)):kp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ki.fromString(e.substring(4,e.length-2))}}class Lt extends ga{construct(e,n,i){return new Lt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new Lt(n)}static emptyPath(){return new Lt([])}}const VC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends ga{construct(e,n,i){return new In(e,n,i)}static isValidIdentifier(e){return VC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nv}static keyField(){return new In([Nv])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Ne(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ne(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(h=!h,l++):p!=="."||h?(i+=p,l++):(u(),l++)}if(u(),h)throw new Ne(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(n)}static emptyPath(){return new In([])}}class Oe{constructor(e){this.path=e}static fromPath(e){return new Oe(Lt.fromString(e))}static fromName(e){return new Oe(Lt.fromString(e).popFirst(5))}static empty(){return new Oe(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Oe(new Lt(e.slice()))}}function d1(s,e,n){if(!n)throw new Ne(ue.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function PC(s,e,n,i){if(e===!0&&i===!0)throw new Ne(ue.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Tv(s){if(!Oe.isDocumentKey(s))throw new Ne(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Sv(s){if(Oe.isDocumentKey(s))throw new Ne(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function h1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Mh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":He(12329,{type:typeof s})}function wa(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ne(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mh(s);throw new Ne(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function mn(s,e){const n={typeString:s};return e&&(n.value=e),n}function cu(s,e){if(!h1(s))throw new Ne(ue.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const h=s[i];if(l&&typeof h!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Ne(ue.INVALID_ARGUMENT,n);return!0}const Av=-62135596800,jv=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*jv);return new zt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Av)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jv}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cu(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Av;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:mn("string",zt._jsonSchemaVersion),seconds:mn("number"),nanoseconds:mn("number")};class Ke{static fromTimestamp(e){return new Ke(e)}static min(){return new Ke(new zt(0,0))}static max(){return new Ke(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Gc=-1;function LC(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=Ke.fromTimestamp(i===1e9?new zt(n+1,0):new zt(n,i));return new Zi(l,Oe.empty(),e)}function UC(s){return new Zi(s.readTime,s.key,Gc)}class Zi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Zi(Ke.min(),Oe.empty(),Gc)}static max(){return new Zi(Ke.max(),Oe.empty(),Gc)}}function BC(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Oe.comparator(s.documentKey,e.documentKey),n!==0?n:ot(s.largestBatchId,e.largestBatchId))}const zC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function vo(s){if(s.code!==ue.FAILED_PRECONDITION||s.message!==zC)throw s;Te("LocalStore","Unexpectedly lost primary lease")}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):de.reject(n)}static resolve(e){return new de(((n,i)=>{n(e)}))}static reject(e){return new de(((n,i)=>{i(e)}))}static waitFor(e){return new de(((n,i)=>{let l=0,u=0,h=!1;e.forEach((p=>{++l,p.next((()=>{++u,h&&u===l&&n()}),(g=>i(g)))})),h=!0,u===l&&n()}))}static or(e){let n=de.resolve(!1);for(const i of e)n=n.next((l=>l?de.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new de(((i,l)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const x=g;n(e[x]).next((b=>{h[x]=b,++p,p===u&&i(h)}),(b=>l(b)))}}))}static doWhile(e,n){return new de(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function FC(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _o(s){return s.name==="IndexedDbTransactionError"}class Oh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Oh.ce=-1;const wg=-1;function Vh(s){return s==null}function mh(s){return s===0&&1/s==-1/0}function HC(s){return typeof s=="number"&&Number.isInteger(s)&&!mh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const f1="";function $C(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Rv(e)),e=GC(s.get(n),e);return Rv(e)}function GC(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case f1:n+="";break;default:n+=u}}return n}function Rv(s){return s+f1+""}function Cv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function cr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function m1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Kt{constructor(e,n){this.comparator=e,this.root=n||Cn.EMPTY}insert(e,n){return new Kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zd(this.root,e,this.comparator,!1)}getReverseIterator(){return new zd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zd(this.root,e,this.comparator,!0)}}class zd{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??Cn.RED,this.left=l??Cn.EMPTY,this.right=u??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new Cn(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Cn.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new Cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iv(this.data.getIterator())}getIteratorFrom(e){return new Iv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new bn(this.comparator);return n.data=e,n}}class Iv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gs{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new gs([])}unionWith(e){let n=new bn(In.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new gs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class p1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new p1("Invalid base64 string: "+u):u}})(e);return new kn(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const YC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function er(s){if(St(!!s,39018),typeof s=="string"){let e=0;const n=YC.exec(s);if(St(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nn(s.seconds),nanos:nn(s.nanos)}}function nn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function tr(s){return typeof s=="string"?kn.fromBase64String(s):kn.fromUint8Array(s)}const g1="server_timestamp",x1="__type__",y1="__previous_value__",b1="__local_write_time__";function Eg(s){return(s?.mapValue?.fields||{})[x1]?.stringValue===g1}function Ph(s){const e=s.mapValue.fields[y1];return Eg(e)?Ph(e):e}function Yc(s){const e=er(s.mapValue.fields[b1].timestampValue);return new zt(e.seconds,e.nanos)}class KC{constructor(e,n,i,l,u,h,p,g,x,b,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=b,this.apiKey=w}}const ph="(default)";class Kc{constructor(e,n){this.projectId=e,this.database=n||ph}static empty(){return new Kc("","")}get isDefaultDatabase(){return this.database===ph}isEqual(e){return e instanceof Kc&&e.projectId===this.projectId&&e.database===this.database}}function QC(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ne(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kc(s.options.projectId,e)}const v1="__type__",WC="__max__",qd={mapValue:{}},_1="__vector__",gh="value";function nr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Eg(s)?4:JC(s)?9007199254740991:XC(s)?10:11:He(28295,{value:s})}function Aa(s,e){if(s===e)return!0;const n=nr(s);if(n!==nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Yc(s).isEqual(Yc(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=er(l.timestampValue),p=er(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return tr(l.bytesValue).isEqual(tr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return nn(l.geoPointValue.latitude)===nn(u.geoPointValue.latitude)&&nn(l.geoPointValue.longitude)===nn(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return nn(l.integerValue)===nn(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=nn(l.doubleValue),p=nn(u.doubleValue);return h===p?mh(h)===mh(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return lo(s.arrayValue.values||[],e.arrayValue.values||[],Aa);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},p=u.mapValue.fields||{};if(Cv(h)!==Cv(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Aa(h[g],p[g])))return!1;return!0})(s,e);default:return He(52216,{left:s})}}function Qc(s,e){return(s.values||[]).find((n=>Aa(n,e)))!==void 0}function oo(s,e){if(s===e)return 0;const n=nr(s),i=nr(e);if(n!==i)return ot(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=nn(u.integerValue||u.doubleValue),g=nn(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return kv(s.timestampValue,e.timestampValue);case 4:return kv(Yc(s),Yc(e));case 5:return kp(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=tr(u),g=tr(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let x=0;x<p.length&&x<g.length;x++){const b=ot(p[x],g[x]);if(b!==0)return b}return ot(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=ot(nn(u.latitude),nn(h.latitude));return p!==0?p:ot(nn(u.longitude),nn(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Dv(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},x=p[gh]?.arrayValue,b=g[gh]?.arrayValue,w=ot(x?.values?.length||0,b?.values?.length||0);return w!==0?w:Dv(x,b)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===qd.mapValue&&h===qd.mapValue)return 0;if(u===qd.mapValue)return 1;if(h===qd.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),x=h.fields||{},b=Object.keys(x);g.sort(),b.sort();for(let w=0;w<g.length&&w<b.length;++w){const N=kp(g[w],b[w]);if(N!==0)return N;const C=oo(p[g[w]],x[b[w]]);if(C!==0)return C}return ot(g.length,b.length)})(s.mapValue,e.mapValue);default:throw He(23264,{he:n})}}function kv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ot(s,e);const n=er(s),i=er(e),l=ot(n.seconds,i.seconds);return l!==0?l:ot(n.nanos,i.nanos)}function Dv(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=oo(n[l],i[l]);if(u)return u}return ot(n.length,i.length)}function co(s){return Dp(s)}function Dp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=er(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return tr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Oe.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=Dp(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const h of i)u?u=!1:l+=",",l+=`${h}:${Dp(n.fields[h])}`;return l+"}"})(s.mapValue):He(61005,{value:s})}function eh(s){switch(nr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ph(s);return e?16+eh(e):16;case 5:return 2*s.stringValue.length;case 6:return tr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+eh(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return cr(i.fields,((u,h)=>{l+=u.length+eh(h)})),l})(s.mapValue);default:throw He(13486,{value:s})}}function Mv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Mp(s){return!!s&&"integerValue"in s}function Ng(s){return!!s&&"arrayValue"in s}function Ov(s){return!!s&&"nullValue"in s}function Vv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function th(s){return!!s&&"mapValue"in s}function XC(s){return(s?.mapValue?.fields||{})[v1]?.stringValue===_1}function Oc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return cr(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Oc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oc(s.arrayValue.values[n]);return e}return{...s}}function JC(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===WC}class ts{constructor(e){this.value=e}static empty(){return new ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oc(n)}setAll(e){let n=In.emptyPath(),i={},l=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,l),i={},l=[],n=p.popLast()}h?i[p.lastSegment()]=Oc(h):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Aa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];th(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){cr(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new ts(Oc(this.value))}}function w1(s){const e=[];return cr(s.fields,((n,i)=>{const l=new In([n]);if(th(i)){const u=w1(i.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new gs(e)}class Un{constructor(e,n,i,l,u,h,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Un(e,0,Ke.min(),Ke.min(),Ke.min(),ts.empty(),0)}static newFoundDocument(e,n,i,l){return new Un(e,1,n,Ke.min(),i,l,0)}static newNoDocument(e,n){return new Un(e,2,n,Ke.min(),Ke.min(),ts.empty(),0)}static newUnknownDocument(e,n){return new Un(e,3,n,Ke.min(),Ke.min(),ts.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class xh{constructor(e,n){this.position=e,this.inclusive=n}}function Pv(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],h=s.position[l];if(u.field.isKeyField()?i=Oe.comparator(Oe.fromName(h.referenceValue),n.key):i=oo(h,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function Lv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Aa(s.position[n],e.position[n]))return!1;return!0}class yh{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class E1{}class fn extends E1{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new t5(e,n,i):n==="array-contains"?new a5(e,i):n==="in"?new i5(e,i):n==="not-in"?new r5(e,i):n==="array-contains-any"?new l5(e,i):new fn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new n5(e,i):new s5(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(oo(n,this.value)):n!==null&&nr(this.value)===nr(n)&&this.matchesComparison(oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ws extends E1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ws(e,n)}matches(e){return N1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function N1(s){return s.op==="and"}function T1(s){return e5(s)&&N1(s)}function e5(s){for(const e of s.filters)if(e instanceof Ws)return!1;return!0}function Op(s){if(s instanceof fn)return s.field.canonicalString()+s.op.toString()+co(s.value);if(T1(s))return s.filters.map((e=>Op(e))).join(",");{const e=s.filters.map((n=>Op(n))).join(",");return`${s.op}(${e})`}}function S1(s,e){return s instanceof fn?(function(i,l){return l instanceof fn&&i.op===l.op&&i.field.isEqual(l.field)&&Aa(i.value,l.value)})(s,e):s instanceof Ws?(function(i,l){return l instanceof Ws&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,h,p)=>u&&S1(h,l.filters[p])),!0):!1})(s,e):void He(19439)}function A1(s){return s instanceof fn?(function(n){return`${n.field.canonicalString()} ${n.op} ${co(n.value)}`})(s):s instanceof Ws?(function(n){return n.op.toString()+" {"+n.getFilters().map(A1).join(" ,")+"}"})(s):"Filter"}class t5 extends fn{constructor(e,n,i){super(e,n,i),this.key=Oe.fromName(i.referenceValue)}matches(e){const n=Oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class n5 extends fn{constructor(e,n){super(e,"in",n),this.keys=j1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class s5 extends fn{constructor(e,n){super(e,"not-in",n),this.keys=j1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function j1(s,e){return(e.arrayValue?.values||[]).map((n=>Oe.fromName(n.referenceValue)))}class a5 extends fn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ng(n)&&Qc(n.arrayValue,this.value)}}class i5 extends fn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qc(this.value.arrayValue,n)}}class r5 extends fn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qc(this.value.arrayValue,n)}}class l5 extends fn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ng(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Qc(this.value.arrayValue,i)))}}class o5{constructor(e,n=null,i=[],l=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function Uv(s,e=null,n=[],i=[],l=null,u=null,h=null){return new o5(s,e,n,i,l,u,h)}function Tg(s){const e=We(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Op(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>co(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>co(i))).join(",")),e.Te=n}return e.Te}function Sg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!ZC(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!S1(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Lv(s.startAt,e.startAt)&&Lv(s.endAt,e.endAt)}function Vp(s){return Oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class uu{constructor(e,n=null,i=[],l=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function c5(s,e,n,i,l,u,h,p){return new uu(s,e,n,i,l,u,h,p)}function Ag(s){return new uu(s)}function Bv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function u5(s){return Oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function R1(s){return s.collectionGroup!==null}function Vc(s){const e=We(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new bn(In.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new yh(u,i))})),n.has(In.keyField().canonicalString())||e.Ie.push(new yh(In.keyField(),i))}return e.Ie}function Ea(s){const e=We(s);return e.Ee||(e.Ee=d5(e,Vc(s))),e.Ee}function d5(s,e){if(s.limitType==="F")return Uv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new yh(l.field,u)}));const n=s.endAt?new xh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new xh(s.startAt.position,s.startAt.inclusive):null;return Uv(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Pp(s,e){const n=s.filters.concat([e]);return new uu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Lp(s,e,n){return new uu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Lh(s,e){return Sg(Ea(s),Ea(e))&&s.limitType===e.limitType}function C1(s){return`${Tg(Ea(s))}|lt:${s.limitType}`}function Ql(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>A1(l))).join(", ")}]`),Vh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>co(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>co(l))).join(",")),`Target(${i})`})(Ea(s))}; limitType=${s.limitType})`}function Uh(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Oe.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of Vc(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(h,p,g){const x=Pv(h,p,g);return h.inclusive?x<=0:x<0})(i.startAt,Vc(i),l)||i.endAt&&!(function(h,p,g){const x=Pv(h,p,g);return h.inclusive?x>=0:x>0})(i.endAt,Vc(i),l))})(s,e)}function h5(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function I1(s){return(e,n)=>{let i=!1;for(const l of Vc(s)){const u=f5(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function f5(s,e,n){const i=s.field.isKeyField()?Oe.comparator(e.key,n.key):(function(u,h,p){const g=h.data.field(u),x=p.data.field(u);return g!==null&&x!==null?oo(g,x):He(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return He(19790,{direction:s.dir})}}class sl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){cr(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return m1(this.inner)}size(){return this.innerSize}}const m5=new Kt(Oe.comparator);function ai(){return m5}const k1=new Kt(Oe.comparator);function Rc(...s){let e=k1;for(const n of s)e=e.insert(n.key,n);return e}function D1(s){let e=k1;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Br(){return Pc()}function M1(){return Pc()}function Pc(){return new sl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const p5=new Kt(Oe.comparator),g5=new bn(Oe.comparator);function ct(...s){let e=g5;for(const n of s)e=e.add(n);return e}const x5=new bn(ot);function y5(){return x5}function jg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mh(e)?"-0":e}}function O1(s){return{integerValue:""+s}}function b5(s,e){return HC(e)?O1(e):jg(s,e)}class Bh{constructor(){this._=void 0}}function v5(s,e,n){return s instanceof Wc?(function(l,u){const h={fields:{[x1]:{stringValue:g1},[b1]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Eg(u)&&(u=Ph(u)),u&&(h.fields[y1]=u),{mapValue:h}})(n,e):s instanceof Xc?P1(s,e):s instanceof Jc?L1(s,e):(function(l,u){const h=V1(l,u),p=zv(h)+zv(l.Ae);return Mp(h)&&Mp(l.Ae)?O1(p):jg(l.serializer,p)})(s,e)}function _5(s,e,n){return s instanceof Xc?P1(s,e):s instanceof Jc?L1(s,e):n}function V1(s,e){return s instanceof bh?(function(i){return Mp(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Wc extends Bh{}class Xc extends Bh{constructor(e){super(),this.elements=e}}function P1(s,e){const n=U1(e);for(const i of s.elements)n.some((l=>Aa(l,i)))||n.push(i);return{arrayValue:{values:n}}}class Jc extends Bh{constructor(e){super(),this.elements=e}}function L1(s,e){let n=U1(e);for(const i of s.elements)n=n.filter((l=>!Aa(l,i)));return{arrayValue:{values:n}}}class bh extends Bh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function zv(s){return nn(s.integerValue||s.doubleValue)}function U1(s){return Ng(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class w5{constructor(e,n){this.field=e,this.transform=n}}function E5(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof Xc&&l instanceof Xc||i instanceof Jc&&l instanceof Jc?lo(i.elements,l.elements,Aa):i instanceof bh&&l instanceof bh?Aa(i.Ae,l.Ae):i instanceof Wc&&l instanceof Wc})(s.transform,e.transform)}class N5{constructor(e,n){this.version=e,this.transformResults=n}}class Ys{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ys}static exists(e){return new Ys(void 0,e)}static updateTime(e){return new Ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class zh{}function B1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Rg(s.key,Ys.none()):new du(s.key,s.data,Ys.none());{const n=s.data,i=ts.empty();let l=new bn(In.comparator);for(let u of e.fields)if(!l.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?i.delete(u):i.set(u,h),l=l.add(u)}return new ur(s.key,i,new gs(l.toArray()),Ys.none())}}function T5(s,e,n){s instanceof du?(function(l,u,h){const p=l.value.clone(),g=Fv(l.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):s instanceof ur?(function(l,u,h){if(!nh(l.precondition,u))return void u.convertToUnknownDocument(h.version);const p=Fv(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(z1(l)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Lc(s,e,n,i){return s instanceof du?(function(u,h,p,g){if(!nh(u.precondition,h))return p;const x=u.value.clone(),b=Hv(u.fieldTransforms,g,h);return x.setAll(b),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),null})(s,e,n,i):s instanceof ur?(function(u,h,p,g){if(!nh(u.precondition,h))return p;const x=Hv(u.fieldTransforms,g,h),b=h.data;return b.setAll(z1(u)),b.setAll(x),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,n,i):(function(u,h,p){return nh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,n)}function S5(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=V1(i.transform,l||null);u!=null&&(n===null&&(n=ts.empty()),n.set(i.field,u))}return n||null}function qv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&lo(i,l,((u,h)=>E5(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class du extends zh{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ur extends zh{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function z1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function Fv(s,e,n){const i=new Map;St(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],h=u.transform,p=e.data.field(u.field);i.set(u.field,_5(h,p,n[l]))}return i}function Hv(s,e,n){const i=new Map;for(const l of s){const u=l.transform,h=n.data.field(l.field);i.set(l.field,v5(u,h,e))}return i}class Rg extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A5 extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class j5{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&T5(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Lc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Lc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=M1();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(l.key)?null:p;const g=B1(h,p);g!==null&&i.set(l.key,g),h.isValidDocument()||h.convertToNoDocument(Ke.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ct())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,((n,i)=>qv(n,i)))&&lo(this.baseMutations,e.baseMutations,((n,i)=>qv(n,i)))}}class Cg{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){St(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return p5})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,i[h].version);return new Cg(e,n,i,l)}}class R5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class C5{constructor(e,n){this.count=e,this.unchangedNames=n}}var hn,ht;function I5(s){switch(s){case ue.OK:return He(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return He(15467,{code:s})}}function q1(s){if(s===void 0)return si("GRPC error has no .code"),ue.UNKNOWN;switch(s){case hn.OK:return ue.OK;case hn.CANCELLED:return ue.CANCELLED;case hn.UNKNOWN:return ue.UNKNOWN;case hn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case hn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case hn.INTERNAL:return ue.INTERNAL;case hn.UNAVAILABLE:return ue.UNAVAILABLE;case hn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case hn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case hn.NOT_FOUND:return ue.NOT_FOUND;case hn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case hn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case hn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case hn.ABORTED:return ue.ABORTED;case hn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case hn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case hn.DATA_LOSS:return ue.DATA_LOSS;default:return He(39323,{code:s})}}(ht=hn||(hn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";function k5(){return new TextEncoder}const D5=new Ki([4294967295,4294967295],0);function $v(s){const e=k5().encode(s),n=new s1;return n.update(e),new Uint8Array(n.digest())}function Gv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ki([n,i],0),new Ki([l,u],0)]}class Ig{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Cc(`Invalid padding: ${n}`);if(i<0)throw new Cc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Cc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Cc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ki.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Ki.fromNumber(i)));return l.compare(D5)===1&&(l=new Ki([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$v(e),[i,l]=Gv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);if(!this.we(h))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Ig(u,l,n);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=$v(e),[i,l]=Gv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);this.be(h)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qh{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,hu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new qh(Ke.min(),l,new Kt(ot),ai(),ct())}}class hu{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new hu(i,n,ct(),ct(),ct())}}class sh{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class F1{constructor(e,n){this.targetId=e,this.Ce=n}}class H1{constructor(e,n,i=kn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class Yv{constructor(){this.ve=0,this.Fe=Kv(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),n=ct(),i=ct();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:He(38017,{changeType:u})}})),new hu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=Kv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class M5{constructor(e){this.Ge=e,this.ze=new Map,this.je=ai(),this.He=Fd(),this.Je=Fd(),this.Ze=new Kt(ot)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:He(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Vp(u))if(i===0){const h=new Oe(u.path);this.et(n,h,Un.newNoDocument(h,Ke.min()))}else St(i===1,20013,{expectedCount:i});else{const h=this._t(n);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let h,p;try{h=tr(i).toUint8Array()}catch(g){if(g instanceof p1)return ro("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Ig(h,l,u)}catch(g){return ro(g instanceof Cc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&Vp(p.target)){const g=new Oe(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Un.newNoDocument(g,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let i=ct();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new qh(e,n,this.Ze,this.je,i);return this.je=ai(),this.He=Fd(),this.Je=Fd(),this.Ze=new Kt(ot),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Yv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new bn(ot),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new bn(ot),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fd(){return new Kt(Oe.comparator)}function Kv(){return new Kt(Oe.comparator)}const O5={asc:"ASCENDING",desc:"DESCENDING"},V5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P5={and:"AND",or:"OR"};class L5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Up(s,e){return s.useProto3Json||Vh(e)?e:{value:e}}function vh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function U5(s,e){return vh(s,e.toTimestamp())}function Na(s){return St(!!s,49232),Ke.fromTimestamp((function(n){const i=er(n);return new zt(i.seconds,i.nanos)})(s))}function kg(s,e){return Bp(s,e).canonicalString()}function Bp(s,e){const n=(function(l){return new Lt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function G1(s){const e=Lt.fromString(s);return St(X1(e),10190,{key:e.toString()}),e}function zp(s,e){return kg(s.databaseId,e.path)}function cp(s,e){const n=G1(e);if(n.get(1)!==s.databaseId.projectId)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Oe(K1(n))}function Y1(s,e){return kg(s.databaseId,e)}function B5(s){const e=G1(s);return e.length===4?Lt.emptyPath():K1(e)}function qp(s){return new Lt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function K1(s){return St(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Qv(s,e,n){return{name:zp(s,e),fields:n.value.mapValue.fields}}function z5(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:He(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(x,b){return x.useProto3Json?(St(b===void 0||typeof b=="string",58123),kn.fromBase64String(b||"")):(St(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),kn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(x){const b=x.code===void 0?ue.UNKNOWN:q1(x.code);return new Ne(b,x.message||"")})(h);n=new H1(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=cp(s,i.document.name),u=Na(i.document.updateTime),h=i.document.createTime?Na(i.document.createTime):Ke.min(),p=new ts({mapValue:{fields:i.document.fields}}),g=Un.newFoundDocument(l,u,h,p),x=i.targetIds||[],b=i.removedTargetIds||[];n=new sh(x,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=cp(s,i.document),u=i.readTime?Na(i.readTime):Ke.min(),h=Un.newNoDocument(l,u),p=i.removedTargetIds||[];n=new sh([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=cp(s,i.document),u=i.removedTargetIds||[];n=new sh([],u,l,null)}else{if(!("filter"in e))return He(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,h=new C5(l,u),p=i.targetId;n=new F1(p,h)}}return n}function q5(s,e){let n;if(e instanceof du)n={update:Qv(s,e.key,e.value)};else if(e instanceof Rg)n={delete:zp(s,e.key)};else if(e instanceof ur)n={update:Qv(s,e.key,e.data),updateMask:X5(e.fieldMask)};else{if(!(e instanceof A5))return He(16599,{dt:e.type});n={verify:zp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof Wc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Xc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Jc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof bh)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw He(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:U5(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:He(27497)})(s,e.precondition)),n}function F5(s,e){return s&&s.length>0?(St(e!==void 0,14353),s.map((n=>(function(l,u){let h=l.updateTime?Na(l.updateTime):Na(u);return h.isEqual(Ke.min())&&(h=Na(u)),new N5(h,l.transformResults||[])})(n,e)))):[]}function H5(s,e){return{documents:[Y1(s,e.path)]}}function $5(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Y1(s,l);const u=(function(x){if(x.length!==0)return W1(Ws.create(x,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(x){if(x.length!==0)return x.map((b=>(function(N){return{field:Wl(N.field),direction:K5(N.dir)}})(b)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=Up(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:n,parent:l}}function G5(s){let e=B5(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){St(i===1,65062);const b=n.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(w){const N=Q1(w);return N instanceof Ws&&T1(N)?N.getFilters():[N]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((N=>(function(G){return new yh(Xl(G.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(G.direction))})(N)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let N;return N=typeof w=="object"?w.value:w,Vh(N)?null:N})(n.limit));let g=null;n.startAt&&(g=(function(w){const N=!!w.before,C=w.values||[];return new xh(C,N)})(n.startAt));let x=null;return n.endAt&&(x=(function(w){const N=!w.before,C=w.values||[];return new xh(C,N)})(n.endAt)),c5(e,l,h,u,p,"F",g,x)}function Y5(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Q1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Xl(n.unaryFilter.field);return fn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Xl(n.unaryFilter.field);return fn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Xl(n.unaryFilter.field);return fn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Xl(n.unaryFilter.field);return fn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(s):s.fieldFilter!==void 0?(function(n){return fn.create(Xl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Ws.create(n.compositeFilter.filters.map((i=>Q1(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(n.compositeFilter.op))})(s):He(30097,{filter:s})}function K5(s){return O5[s]}function Q5(s){return V5[s]}function W5(s){return P5[s]}function Wl(s){return{fieldPath:s.canonicalString()}}function Xl(s){return In.fromServerFormat(s.fieldPath)}function W1(s){return s instanceof fn?(function(n){if(n.op==="=="){if(Vv(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NAN"}};if(Ov(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vv(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NOT_NAN"}};if(Ov(n.value))return{unaryFilter:{field:Wl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wl(n.field),op:Q5(n.op),value:n.value}}})(s):s instanceof Ws?(function(n){const i=n.getFilters().map((l=>W1(l)));return i.length===1?i[0]:{compositeFilter:{op:W5(n.op),filters:i}}})(s):He(54877,{filter:s})}function X5(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function X1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function J1(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class $i{constructor(e,n,i,l,u=Ke.min(),h=Ke.min(),p=kn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new $i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class J5{constructor(e){this.yt=e}}function Z5(s){const e=G5({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Lp(e,e.limit,"L"):e}class eI{constructor(){this.Sn=new tI}addToCollectionParentIndex(e,n){return this.Sn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Zi.min())}updateCollectionGroup(e,n,i){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class tI{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new bn(Lt.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new bn(Lt.comparator)).toArray()}}const Wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Z1=41943040;class Zn{static withCacheSize(e){return new Zn(e,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(Z1,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);class uo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new uo(0)}static ar(){return new uo(-1)}}const Xv="LruGarbageCollector",nI=1048576;function Jv([s,e],[n,i]){const l=ot(s,n);return l===0?ot(e,i):l}class sI{constructor(e){this.Pr=e,this.buffer=new bn(Jv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Jv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class aI{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Te(Xv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){_o(n)?Te(Xv,"Ignoring IndexedDB error during garbage collection: ",n):await vo(n)}await this.Ar(3e5)}))}}class iI{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return de.resolve(Oh.ce);const i=new sI(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Wv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wv):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,u,h,p,g,x;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,h=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(i=w,p=Date.now(),this.removeTargets(e,i,n)))).next((w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(x=Date.now(),Kl()<=lt.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${l} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-b}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:w}))))}}function rI(s,e){return new iI(s,e)}class lI{constructor(){this.changes=new sl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?de.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class oI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class cI{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&Lc(i.mutation,l,gs.empty(),zt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,ct()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=ct()){const l=Br();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let h=Rc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const i=Br();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,ct())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,i,l){let u=ai();const h=Pc(),p=(function(){return Pc()})();return n.forEach(((g,x)=>{const b=i.get(x.key);l.has(x.key)&&(b===void 0||b.mutation instanceof ur)?u=u.insert(x.key,x):b!==void 0?(h.set(x.key,b.mutation.getFieldMask()),Lc(b.mutation,x,b.mutation.getFieldMask(),zt.now())):h.set(x.key,gs.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((x,b)=>h.set(x,b))),n.forEach(((x,b)=>p.set(x,new oI(b,h.get(x)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=Pc();let l=new Kt(((h,p)=>h-p)),u=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const x=n.get(g);if(x===null)return;let b=i.get(g)||gs.empty();b=p.applyToLocalView(x,b),i.set(g,b);const w=(l.get(p.batchId)||ct()).add(g);l=l.insert(p.batchId,w)}))})).next((()=>{const h=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),x=g.key,b=g.value,w=M1();b.forEach((N=>{if(!u.has(N)){const C=B1(n.get(N),i.get(N));C!==null&&w.set(N,C),u=u.add(N)}})),h.push(this.documentOverlayCache.saveOverlays(e,x,w))}return de.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return u5(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):R1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):de.resolve(Br());let p=Gc,g=u;return h.next((x=>de.forEach(x,((b,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),u.get(b)?de.resolve():this.remoteDocumentCache.getEntry(e,b).next((N=>{g=g.insert(b,N)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,g,x,ct()))).next((b=>({batchId:p,changes:D1(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Oe(n)).next((i=>{let l=Rc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let h=Rc();return this.indexManager.getCollectionParents(e,u).next((p=>de.forEach(p,(g=>{const x=(function(w,N){return new uu(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,i,l).next((b=>{b.forEach(((w,N)=>{h=h.insert(w,N)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((h=>{u.forEach(((g,x)=>{const b=x.getKey();h.get(b)===null&&(h=h.insert(b,Un.newInvalidDocument(b)))}));let p=Rc();return h.forEach(((g,x)=>{const b=u.get(g);b!==void 0&&Lc(b.mutation,x,gs.empty(),zt.now()),Uh(n,x)&&(p=p.insert(g,x))})),p}))}}class uI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return de.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Na(l.createTime)}})(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:Z5(l.bundledQuery),readTime:Na(l.readTime)}})(n)),de.resolve()}}class dI{constructor(){this.overlays=new Kt(Oe.comparator),this.Lr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Br();return de.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.bt(e,n,u)})),de.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),de.resolve()}getOverlaysForCollection(e,n,i){const l=Br(),u=n.length+1,h=new Oe(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,x=g.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return de.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new Kt(((x,b)=>x-b));const h=this.overlays.getIterator();for(;h.hasNext();){const x=h.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>i){let b=u.get(x.largestBatchId);b===null&&(b=Br(),u=u.insert(x.largestBatchId,b)),b.set(x.getKey(),x)}}const p=Br(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,b)=>p.set(x,b))),!(p.size()>=l)););return de.resolve(p)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new R5(n,i));let u=this.Lr.get(n);u===void 0&&(u=ct(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class hI{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}class Dg{constructor(){this.kr=new bn(Nn.Kr),this.qr=new bn(Nn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new Nn(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Nn(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new Oe(new Lt([])),i=new Nn(n,e),l=new Nn(n,e+1),u=[];return this.qr.forEachInRange([i,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Oe(new Lt([])),i=new Nn(n,e),l=new Nn(n,e+1);let u=ct();return this.qr.forEachInRange([i,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Nn(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Nn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Oe.comparator(e.key,n.key)||ot(e.Hr,n.Hr)}static Ur(e,n){return ot(e.Hr,n.Hr)||Oe.comparator(e.key,n.key)}}class fI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new bn(Nn.Kr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new j5(u,n,i,l);this.mutationQueue.push(h);for(const p of l)this.Jr=this.Jr.add(new Nn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return de.resolve(h)}lookupMutationBatch(e,n){return de.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),u=l<0?0:l;return de.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?wg:this.Yn-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Nn(n,0),l=new Nn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(h=>{const p=this.Zr(h.Hr);u.push(p)})),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new bn(ot);return n.forEach((l=>{const u=new Nn(l,0),h=new Nn(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),de.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;Oe.isDocumentKey(u)||(u=u.child(""));const h=new Nn(new Oe(u),0);let p=new bn(ot);return this.Jr.forEachWhile((g=>{const x=g.key.path;return!!i.isPrefixOf(x)&&(x.length===l&&(p=p.add(g.Hr)),!0)}),h),de.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){St(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return de.forEach(n.mutations,(l=>{const u=new Nn(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new Nn(n,0),l=this.Jr.firstAfterOrEqual(i);return de.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class mI{constructor(e){this.ti=e,this.docs=(function(){return new Kt(Oe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,h=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return de.resolve(i?i.document.mutableCopy():Un.newInvalidDocument(n))}getEntries(e,n){let i=ai();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Un.newInvalidDocument(l))})),de.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=ai();const h=n.path,p=new Oe(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:x,value:{document:b}}=g.getNext();if(!h.isPrefixOf(x.path))break;x.path.length>h.length+1||BC(UC(b),i)<=0||(l.has(b.key)||Uh(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return de.resolve(u)}getAllFromCollectionGroup(e,n,i,l){He(9500)}ni(e,n){return de.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new pI(this)}getSize(e){return de.resolve(this.size)}}class pI extends lI{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),de.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class gI{constructor(e){this.persistence=e,this.ri=new sl((n=>Tg(n)),Sg),this.lastRemoteSnapshotVersion=Ke.min(),this.highestTargetId=0,this.ii=0,this.si=new Dg,this.targetCount=0,this.oi=uo._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),de.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new uo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.lr(n),de.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),de.waitFor(u).next((()=>l))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return de.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),de.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),de.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return de.resolve(i)}containsKey(e,n){return de.resolve(this.si.containsKey(n))}}class eE{constructor(e,n){this._i={},this.overlays={},this.ai=new Oh(0),this.ui=!1,this.ui=!0,this.ci=new hI,this.referenceDelegate=e(this),this.li=new gI(this),this.indexManager=new eI,this.remoteDocumentCache=(function(l){return new mI(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new J5(n),this.Pi=new uI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new fI(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){Te("MemoryPersistence","Starting transaction:",e);const l=new xI(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return de.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class xI extends qC{constructor(e){super(),this.currentSequenceNumber=e}}class Mg{constructor(e){this.persistence=e,this.Ri=new Dg,this.Ai=null}static Vi(e){return new Mg(e)}get di(){if(this.Ai)return this.Ai;throw He(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),de.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.di,(i=>{const l=Oe.fromPath(i);return this.mi(e,l).next((u=>{u||n.removeEntry(l,Ke.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return de.or([()=>de.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class _h{constructor(e,n){this.persistence=e,this.fi=new sl((i=>$C(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=rI(this,n)}static Vi(e,n){return new _h(e,n)}Ti(){}Ii(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return de.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?de.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(h=>this.wr(e,h,n).next((p=>{p||(i++,u.removeEntry(h,Ke.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),de.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eh(e.data.value)),n}wr(e,n,i){return de.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return de.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Og{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=ct(),l=ct();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Og(e,n.fromCache,i,l)}}class yI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class bI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return GS()?8:FC(Bn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,l,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new yI;return this.ys(e,n,h).next((p=>{if(u.result=p,this.As)return this.ws(e,n,h,p.size)}))})).next((()=>u.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(Kl()<=lt.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",Ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(Kl()<=lt.DEBUG&&Te("QueryEngine","Query:",Ql(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Kl()<=lt.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",Ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ea(n))):de.resolve())}gs(e,n){if(Bv(n))return de.resolve(null);let i=Ea(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Lp(n,null,"F"),i=Ea(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=ct(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const x=this.bs(n,p);return this.Ss(n,x,h,g.readTime)?this.gs(e,Lp(n,null,"F")):this.Ds(e,x,n,g)}))))})))))}ps(e,n,i,l){return Bv(n)||l.isEqual(Ke.min())?de.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,i,l)?de.resolve(null):(Kl()<=lt.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ql(n)),this.Ds(e,h,n,LC(l,Gc)).next((p=>p)))}))}bs(e,n){let i=new bn(I1(e));return n.forEach(((l,u)=>{Uh(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,i){return Kl()<=lt.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",Ql(n)),this.fs.getDocumentsMatchingQuery(e,n,Zi.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const Vg="LocalStore",vI=3e8;class _I{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new Kt(ot),this.Fs=new sl((u=>Tg(u)),Sg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function wI(s,e,n,i){return new _I(s,e,n,i)}async function tE(s,e){const n=We(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=ct();for(const x of l){h.push(x.batchId);for(const b of x.mutations)g=g.add(b.key)}for(const x of u){p.push(x.batchId);for(const b of x.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(i,g).next((x=>({Ns:x,removedBatchIds:h,addedBatchIds:p})))}))}))}function EI(s,e){const n=We(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,x,b){const w=x.batch,N=w.keys();let C=de.resolve();return N.forEach((G=>{C=C.next((()=>b.getEntry(g,G))).next((z=>{const O=x.docVersions.get(G);St(O!==null,48541),z.version.compareTo(O)<0&&(w.applyToRemoteDocument(z,x),z.isValidDocument()&&(z.setReadTime(x.commitVersion),b.addEntry(z)))}))})),C.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=ct();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(g=g.add(p.batch.mutations[x].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function nE(s){const e=We(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function NI(s,e){const n=We(s),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((b,w)=>{const N=l.get(w);if(!N)return;p.push(n.li.removeMatchingKeys(u,b.removedDocuments,w).next((()=>n.li.addMatchingKeys(u,b.addedDocuments,w))));let C=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(kn.EMPTY_BYTE_STRING,Ke.min()).withLastLimboFreeSnapshotVersion(Ke.min()):b.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(b.resumeToken,i)),l=l.insert(w,C),(function(z,O,L){return z.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=vI?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(N,C,b)&&p.push(n.li.updateTargetData(u,C))}));let g=ai(),x=ct();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(TI(u,h,e.documentUpdates).next((b=>{g=b.Bs,x=b.Ls}))),!i.isEqual(Ke.min())){const b=n.li.getLastRemoteSnapshotVersion(u).next((w=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(b)}return de.waitFor(p).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,x))).next((()=>g))})).then((u=>(n.vs=l,u)))}function TI(s,e,n){let i=ct(),l=ct();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=ai();return n.forEach(((p,g)=>{const x=u.get(p);g.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Ke.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):Te(Vg,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function SI(s,e){const n=We(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=wg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function AI(s,e){const n=We(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((u=>u?(l=u,de.resolve(l)):n.li.allocateTargetId(i).next((h=>(l=new $i(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function Fp(s,e,n){const i=We(s),l=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!_o(h))throw h;Te(Vg,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function Zv(s,e,n){const i=We(s);let l=Ke.min(),u=ct();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,x,b){const w=We(g),N=w.Fs.get(b);return N!==void 0?de.resolve(w.vs.get(N)):w.li.getTargetData(x,b)})(i,h,Ea(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,n?l:Ke.min(),n?u:ct()))).next((p=>(jI(i,h5(e),p),{documents:p,ks:u})))))}function jI(s,e,n){let i=s.Ms.get(e)||Ke.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class e_{constructor(){this.activeTargetIds=y5()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RI{constructor(){this.vo=new e_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new e_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class CI{Mo(e){}shutdown(){}}const t_="ConnectivityMonitor";class n_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Te(t_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Te(t_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Hd=null;function Hp(){return Hd===null?Hd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hd++,"0x"+Hd.toString(16)}const up="RestConnection",II={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class kI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===ph?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,u){const h=Hp(),p=this.Qo(e,n.toUriEncodedString());Te(up,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:x}=new URL(p),b=rr(x);return this.zo(e,p,g,i,b).then((w=>(Te(up,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw ro(up,`RPC '${e}' ${h} failed with error: `,w,"url: ",p,"request:",i),w}))}jo(e,n,i,l,u,h){return this.Wo(e,n,i,l,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const i=II[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class DI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Pn="WebChannelConnection",Nc=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class ao extends kI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ao.c_){const e=l1();Nc(e,r1.STAT_EVENT,(n=>{n.stat===Ip.PROXY?Te(Pn,"STAT_EVENT: detected buffering proxy"):n.stat===Ip.NOPROXY&&Te(Pn,"STAT_EVENT: detected no buffering proxy")})),ao.c_=!0}}zo(e,n,i,l,u){const h=Hp();return new Promise(((p,g)=>{const x=new a1;x.setWithCredentials(!0),x.listenOnce(i1.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case Zd.NO_ERROR:const w=x.getResponseJson();Te(Pn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),p(w);break;case Zd.TIMEOUT:Te(Pn,`RPC '${e}' ${h} timed out`),g(new Ne(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Zd.HTTP_ERROR:const N=x.getStatus();if(Te(Pn,`RPC '${e}' ${h} failed with status:`,N,"response text:",x.getResponseText()),N>0){let C=x.getResponseJson();Array.isArray(C)&&(C=C[0]);const G=C?.error;if(G&&G.status&&G.message){const z=(function(L){const H=L.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(H)>=0?H:ue.UNKNOWN})(G.status);g(new Ne(z,G.message))}else g(new Ne(ue.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new Ne(ue.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:h,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Te(Pn,`RPC '${e}' ${h} completed.`)}}));const b=JSON.stringify(l);Te(Pn,`RPC '${e}' ${h} sending request:`,l),x.send(n,"POST",b,i,15)}))}T_(e,n,i){const l=Hp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const x=u.join("");Te(Pn,`Creating RPC '${e}' stream ${l}: ${x}`,p);const b=h.createWebChannel(x,p);this.I_(b);let w=!1,N=!1;const C=new DI({Ho:G=>{N?Te(Pn,`Not sending because RPC '${e}' stream ${l} is closed:`,G):(w||(Te(Pn,`Opening RPC '${e}' stream ${l} transport.`),b.open(),w=!0),Te(Pn,`RPC '${e}' stream ${l} sending:`,G),b.send(G))},Jo:()=>b.close()});return Nc(b,jc.EventType.OPEN,(()=>{N||(Te(Pn,`RPC '${e}' stream ${l} transport opened.`),C.i_())})),Nc(b,jc.EventType.CLOSE,(()=>{N||(N=!0,Te(Pn,`RPC '${e}' stream ${l} transport closed`),C.o_(),this.E_(b))})),Nc(b,jc.EventType.ERROR,(G=>{N||(N=!0,ro(Pn,`RPC '${e}' stream ${l} transport errored. Name:`,G.name,"Message:",G.message),C.o_(new Ne(ue.UNAVAILABLE,"The operation could not be completed")))})),Nc(b,jc.EventType.MESSAGE,(G=>{if(!N){const z=G.data[0];St(!!z,16349);const O=z,L=O?.error||O[0]?.error;if(L){Te(Pn,`RPC '${e}' stream ${l} received error:`,L);const H=L.status;let K=(function(le){const S=hn[le];if(S!==void 0)return q1(S)})(H),fe=L.message;K===void 0&&(K=ue.INTERNAL,fe="Unknown error status: "+H+" with message "+L.message),N=!0,C.o_(new Ne(K,fe)),b.close()}else Te(Pn,`RPC '${e}' stream ${l} received:`,z),C.__(z)}})),ao.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return o1()}}function MI(s){return new ao(s)}function dp(){return typeof document<"u"?document:null}function Fh(s){return new L5(s,!0)}ao.c_=!1;class sE{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&Te("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const s_="PersistentStream";class aE{constructor(e,n,i,l,u,h,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ue.RESOURCE_EXHAUSTED?(si(n.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new Ne(ue.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(s_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Te(s_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class OI extends aE{constructor(e,n,i,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=z5(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Ke.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ke.min():h.readTime?Na(h.readTime):Ke.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=qp(this.serializer),n.addTarget=(function(u,h){let p;const g=h.target;if(p=Vp(g)?{documents:H5(u,g)}:{query:$5(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=$1(u,h.resumeToken);const x=Up(u,h.expectedCount);x!==null&&(p.expectedCount=x)}else if(h.snapshotVersion.compareTo(Ke.min())>0){p.readTime=vh(u,h.snapshotVersion.toTimestamp());const x=Up(u,h.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,e);const i=Y5(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=qp(this.serializer),n.removeTarget=e,this.K_(n)}}class VI extends aE{constructor(e,n,i,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=F5(e.writeResults,e.commitTime),i=Na(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=qp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>q5(this.serializer,i)))};this.K_(n)}}class PI{}class LI extends PI{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,Bp(n,i),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(ue.UNKNOWN,u.toString())}))}jo(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,Bp(n,i),l,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ne(ue.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function UI(s,e,n,i){return new LI(s,e,n,i)}class BI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(si(n),this.aa=!1):Te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Qr="RemoteStore";class zI{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{al(this)&&(Te(Qr,"Restarting streams for network reachability change."),await(async function(g){const x=We(g);x.Ea.add(4),await fu(x),x.Va.set("Unknown"),x.Ea.delete(4),await Hh(x)})(this))}))})),this.Va=new BI(i,l)}}async function Hh(s){if(al(s))for(const e of s.Ra)await e(!0)}async function fu(s){for(const e of s.Ra)await e(!1)}function iE(s,e){const n=We(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Bg(n)?Ug(n):wo(n).O_()&&Lg(n,e))}function Pg(s,e){const n=We(s),i=wo(n);n.Ia.delete(e),i.O_()&&rE(n,e),n.Ia.size===0&&(i.O_()?i.L_():al(n)&&n.Va.set("Unknown"))}function Lg(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ke.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wo(s).Z_(e)}function rE(s,e){s.da.$e(e),wo(s).X_(e)}function Ug(s){s.da=new M5({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),wo(s).start(),s.Va.ua()}function Bg(s){return al(s)&&!wo(s).x_()&&s.Ia.size>0}function al(s){return We(s).Ea.size===0}function lE(s){s.da=void 0}async function qI(s){s.Va.set("Online")}async function FI(s){s.Ia.forEach(((e,n)=>{Lg(s,e)}))}async function HI(s,e){lE(s),Bg(s)?(s.Va.ha(e),Ug(s)):s.Va.set("Unknown")}async function $I(s,e,n){if(s.Va.set("Online"),e instanceof H1&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,h),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){Te(Qr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await wh(s,i)}else if(e instanceof sh?s.da.Xe(e):e instanceof F1?s.da.st(e):s.da.tt(e),!n.isEqual(Ke.min()))try{const i=await nE(s.localStore);n.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(x);b&&u.Ia.set(x,b.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,x)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(kn.EMPTY_BYTE_STRING,b.snapshotVersion)),rE(u,g);const w=new $i(b.target,g,x,b.sequenceNumber);Lg(u,w)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){Te(Qr,"Failed to raise snapshot:",i),await wh(s,i)}}async function wh(s,e,n){if(!_o(e))throw e;s.Ea.add(1),await fu(s),s.Va.set("Offline"),n||(n=()=>nE(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Te(Qr,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Hh(s)}))}function oE(s,e){return e().catch((n=>wh(s,n,e)))}async function $h(s){const e=We(s),n=sr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wg;for(;GI(e);)try{const l=await SI(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,YI(e,l)}catch(l){await wh(e,l)}cE(e)&&uE(e)}function GI(s){return al(s)&&s.Ta.length<10}function YI(s,e){s.Ta.push(e);const n=sr(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function cE(s){return al(s)&&!sr(s).x_()&&s.Ta.length>0}function uE(s){sr(s).start()}async function KI(s){sr(s).ra()}async function QI(s){const e=sr(s);for(const n of s.Ta)e.ea(n.mutations)}async function WI(s,e,n){const i=s.Ta.shift(),l=Cg.from(i,e,n);await oE(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await $h(s)}async function XI(s,e){e&&sr(s).Y_&&await(async function(i,l){if((function(h){return I5(h)&&h!==ue.ABORTED})(l.code)){const u=i.Ta.shift();sr(i).B_(),await oE(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await $h(i)}})(s,e),cE(s)&&uE(s)}async function a_(s,e){const n=We(s);n.asyncQueue.verifyOperationInProgress(),Te(Qr,"RemoteStore received new credentials");const i=al(n);n.Ea.add(3),await fu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Hh(n)}async function JI(s,e){const n=We(s);e?(n.Ea.delete(2),await Hh(n)):e||(n.Ea.add(2),await fu(n),n.Va.set("Unknown"))}function wo(s){return s.ma||(s.ma=(function(n,i,l){const u=We(n);return u.sa(),new OI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:qI.bind(null,s),Yo:FI.bind(null,s),t_:HI.bind(null,s),J_:$I.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Bg(s)?Ug(s):s.Va.set("Unknown")):(await s.ma.stop(),lE(s))}))),s.ma}function sr(s){return s.fa||(s.fa=(function(n,i,l){const u=We(n);return u.sa(),new VI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:KI.bind(null,s),t_:XI.bind(null,s),ta:QI.bind(null,s),na:WI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await $h(s)):(await s.fa.stop(),s.Ta.length>0&&(Te(Qr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class zg{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const h=Date.now()+i,p=new zg(e,n,h,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qg(s,e){if(si("AsyncQueue",`${e}: ${s}`),_o(s))return new Ne(ue.UNAVAILABLE,`${e}: ${s}`);throw s}class io{static emptySet(e){return new io(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Oe.comparator(n.key,i.key):(n,i)=>Oe.comparator(n.key,i.key),this.keyedMap=Rc(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new io;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class i_{constructor(){this.ga=new Kt(Oe.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):He(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class ho{constructor(e,n,i,l,u,h,p,g,x){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,n,i,l,u){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new ho(e,n,io.emptySet(n),h,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}class ZI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class e4{constructor(){this.queries=r_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=We(n),u=l.queries;l.queries=r_(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Ne(ue.ABORTED,"Firestore shutting down"))}}function r_(){return new sl((s=>C1(s)),Lh)}async function dE(s,e){const n=We(s);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new ZI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(h){const p=qg(h,`Initialization of query '${Ql(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Fg(n)}async function hE(s,e){const n=We(s),i=e.query;let l=3;const u=n.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function t4(s,e){const n=We(s);let i=!1;for(const l of e){const u=l.query,h=n.queries.get(u);if(h){for(const p of h.ba)p.Fa(l)&&(i=!0);h.wa=l}}i&&Fg(n)}function n4(s,e,n){const i=We(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(n);i.queries.delete(e)}function Fg(s){s.Ca.forEach((e=>{e.next()}))}var $p,l_;(l_=$p||($p={})).Ma="default",l_.Cache="cache";class fE{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new ho(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$p.Cache}}class mE{constructor(e){this.key=e}}class pE{constructor(e){this.key=e}}class s4{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ct(),this.mutatedKeys=ct(),this.eu=I1(e),this.tu=new io(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new i_,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,w)=>{const N=l.get(b),C=Uh(this.query,w)?w:null,G=!!N&&this.mutatedKeys.has(N.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let O=!1;N&&C?N.data.isEqual(C.data)?G!==z&&(i.track({type:3,doc:C}),O=!0):this.su(N,C)||(i.track({type:2,doc:C}),O=!0,(g&&this.eu(C,g)>0||x&&this.eu(C,x)<0)&&(p=!0)):!N&&C?(i.track({type:0,doc:C}),O=!0):N&&!C&&(i.track({type:1,doc:N}),O=!0,(g||x)&&(p=!0)),O&&(C?(h=h.add(C),u=z?u.add(b):u.delete(b)):(h=h.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),i.track({type:1,doc:b})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((b,w)=>(function(C,G){const z=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Vt:O})}};return z(C)-z(G)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,x=g!==this.Xa;return this.Xa=g,h.length!==0||x?{snapshot:new ho(this.query,e.tu,u,h,e.mutatedKeys,g===0,x,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new i_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ct(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new pE(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new mE(i))})),n}cu(e){this.Za=e.ks,this.Ya=ct();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ho.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Hg="SyncEngine";class a4{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class i4{constructor(e){this.key=e,this.hu=!1}}class r4{constructor(e,n,i,l,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new sl((p=>C1(p)),Lh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Kt(Oe.comparator),this.Au=new Map,this.Vu=new Dg,this.du={},this.mu=new Map,this.fu=uo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function l4(s,e,n=!0){const i=_E(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await gE(i,e,n,!0),l}async function o4(s,e){const n=_E(s);await gE(n,e,!0,!1)}async function gE(s,e,n,i){const l=await AI(s.localStore,Ea(e)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await c4(s,e,u,h==="current",l.resumeToken)),s.isPrimaryClient&&n&&iE(s.remoteStore,l),p}async function c4(s,e,n,i,l){s.pu=(w,N,C)=>(async function(z,O,L,H){let K=O.view.ru(L);K.Ss&&(K=await Zv(z.localStore,O.query,!1).then((({documents:S})=>O.view.ru(S,K))));const fe=H&&H.targetChanges.get(O.targetId),pe=H&&H.targetMismatches.get(O.targetId)!=null,le=O.view.applyChanges(K,z.isPrimaryClient,fe,pe);return c_(z,O.targetId,le.au),le.snapshot})(s,w,N,C);const u=await Zv(s.localStore,e,!0),h=new s4(e,u.ks),p=h.ru(u.documents),g=hu.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),x=h.applyChanges(p,s.isPrimaryClient,g);c_(s,n,x.au);const b=new a4(e,n,h);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),x.snapshot}async function u4(s,e,n){const i=We(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((h=>!Lh(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await Fp(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&Pg(i.remoteStore,l.targetId),Gp(i,l.targetId)})).catch(vo)):(Gp(i,l.targetId),await Fp(i.localStore,l.targetId,!0))}async function d4(s,e){const n=We(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Pg(n.remoteStore,i.targetId))}async function h4(s,e,n){const i=b4(s);try{const l=await(function(h,p){const g=We(h),x=zt.now(),b=p.reduce(((C,G)=>C.add(G.key)),ct());let w,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let G=ai(),z=ct();return g.xs.getEntries(C,b).next((O=>{G=O,G.forEach(((L,H)=>{H.isValidDocument()||(z=z.add(L))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,G))).next((O=>{w=O;const L=[];for(const H of p){const K=S5(H,w.get(H.key).overlayedDocument);K!=null&&L.push(new ur(H.key,K,w1(K.value.mapValue),Ys.exists(!0)))}return g.mutationQueue.addMutationBatch(C,x,L,p)})).next((O=>{N=O;const L=O.applyToLocalDocumentSet(w,z);return g.documentOverlayCache.saveOverlays(C,O.batchId,L)}))})).then((()=>({batchId:N.batchId,changes:D1(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(h,p,g){let x=h.du[h.currentUser.toKey()];x||(x=new Kt(ot)),x=x.insert(p,g),h.du[h.currentUser.toKey()]=x})(i,l.batchId,n),await mu(i,l.changes),await $h(i.remoteStore)}catch(l){const u=qg(l,"Failed to persist write");n.reject(u)}}async function xE(s,e){const n=We(s);try{const i=await NI(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=n.Au.get(u);h&&(St(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?St(h.hu,14607):l.removedDocuments.size>0&&(St(h.hu,42227),h.hu=!1))})),await mu(n,i,e)}catch(i){await vo(i)}}function o_(s,e,n){const i=We(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(h,p){const g=We(h);g.onlineState=p;let x=!1;g.queries.forEach(((b,w)=>{for(const N of w.ba)N.va(p)&&(x=!0)})),x&&Fg(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function f4(s,e,n){const i=We(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let h=new Kt(Oe.comparator);h=h.insert(u,Un.newNoDocument(u,Ke.min()));const p=ct().add(u),g=new qh(Ke.min(),new Map,new Kt(ot),h,p);await xE(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),$g(i)}else await Fp(i.localStore,e,!1).then((()=>Gp(i,e,n))).catch(vo)}async function m4(s,e){const n=We(s),i=e.batch.batchId;try{const l=await EI(n.localStore,e);bE(n,i,null),yE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await mu(n,l)}catch(l){await vo(l)}}async function p4(s,e,n){const i=We(s);try{const l=await(function(h,p){const g=We(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let b;return g.mutationQueue.lookupMutationBatch(x,p).next((w=>(St(w!==null,37113),b=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,b))).next((()=>g.localDocuments.getDocuments(x,b)))}))})(i.localStore,e);bE(i,e,n),yE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await mu(i,l)}catch(l){await vo(l)}}function yE(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function bE(s,e,n){const i=We(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function Gp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||vE(s,i)}))}function vE(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Pg(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),$g(s))}function c_(s,e,n){for(const i of n)i instanceof mE?(s.Vu.addReference(i.key,e),g4(s,i)):i instanceof pE?(Te(Hg,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||vE(s,i.key)):He(19791,{wu:i})}function g4(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(Te(Hg,"New document in limbo: "+n),s.Eu.add(i),$g(s))}function $g(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Oe(Lt.fromString(e)),i=s.fu.next();s.Au.set(i,new i4(n)),s.Ru=s.Ru.insert(n,i),iE(s.remoteStore,new $i(Ea(Ag(n.path)),i,"TargetPurposeLimboResolution",Oh.ce))}}async function mu(s,e,n){const i=We(s),l=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,n).then((x=>{if((x||n)&&i.isPrimaryClient){const b=x?!x.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(x){l.push(x);const b=Og.Es(g.targetId,x);u.push(b)}})))})),await Promise.all(h),i.Pu.J_(l),await(async function(g,x){const b=We(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>de.forEach(x,(N=>de.forEach(N.Ts,(C=>b.persistence.referenceDelegate.addReference(w,N.targetId,C))).next((()=>de.forEach(N.Is,(C=>b.persistence.referenceDelegate.removeReference(w,N.targetId,C)))))))))}catch(w){if(!_o(w))throw w;Te(Vg,"Failed to update sequence numbers: "+w)}for(const w of x){const N=w.targetId;if(!w.fromCache){const C=b.vs.get(N),G=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(G);b.vs=b.vs.insert(N,z)}}})(i.localStore,u))}async function x4(s,e){const n=We(s);if(!n.currentUser.isEqual(e)){Te(Hg,"User change. New user:",e.toKey());const i=await tE(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ne(ue.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await mu(n,i.Ns)}}function y4(s,e){const n=We(s),i=n.Au.get(e);if(i&&i.hu)return ct().add(i.key);{let l=ct();const u=n.Iu.get(e);if(!u)return l;for(const h of u){const p=n.Tu.get(h);l=l.unionWith(p.view.nu)}return l}}function _E(s){const e=We(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=xE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f4.bind(null,e),e.Pu.J_=t4.bind(null,e.eventManager),e.Pu.yu=n4.bind(null,e.eventManager),e}function b4(s){const e=We(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p4.bind(null,e),e}class Eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return wI(this.persistence,new bI,e.initialUser,this.serializer)}Cu(e){return new eE(Mg.Vi,this.serializer)}Du(e){return new RI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eh.provider={build:()=>new Eh};class v4 extends Eh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){St(this.persistence.referenceDelegate instanceof _h,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new aI(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new eE((i=>_h.Vi(i,n)),this.serializer)}}class Yp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>o_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x4.bind(null,this.syncEngine),await JI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new e4})()}createDatastore(e){const n=Fh(e.databaseInfo.databaseId),i=MI(e.databaseInfo);return UI(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,h,p){return new zI(i,l,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>o_(this.syncEngine,n,0)),(function(){return n_.v()?new n_:new CI})())}createSyncEngine(e,n){return(function(l,u,h,p,g,x,b){const w=new r4(l,u,h,p,g,x);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=We(n);Te(Qr,"RemoteStore shutting down."),i.Ea.add(5),await fu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Yp.provider={build:()=>new Yp};class wE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ar="FirestoreClient";class _4{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=Ln.UNAUTHENTICATED,this.clientId=_g.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{Te(ar,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(Te(ar,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=qg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function hp(s,e){s.asyncQueue.verifyOperationInProgress(),Te(ar,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await tE(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function u_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await w4(s);Te(ar,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>a_(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>a_(e.remoteStore,l))),s._onlineComponents=e}async function w4(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Te(ar,"Using user provided OfflineComponentProvider");try{await hp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ue.FAILED_PRECONDITION||l.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;ro("Error using user provided cache. Falling back to memory cache: "+n),await hp(s,new Eh)}}else Te(ar,"Using default OfflineComponentProvider"),await hp(s,new v4(void 0));return s._offlineComponents}async function EE(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Te(ar,"Using user provided OnlineComponentProvider"),await u_(s,s._uninitializedComponentsProvider._online)):(Te(ar,"Using default OnlineComponentProvider"),await u_(s,new Yp))),s._onlineComponents}function E4(s){return EE(s).then((e=>e.syncEngine))}async function Kp(s){const e=await EE(s),n=e.eventManager;return n.onListen=l4.bind(null,e.syncEngine),n.onUnlisten=u4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=o4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=d4.bind(null,e.syncEngine),n}function N4(s,e,n,i){const l=new wE(i),u=new fE(e,l,n);return s.asyncQueue.enqueueAndForget((async()=>dE(await Kp(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>hE(await Kp(s),u)))}}function T4(s,e,n={}){const i=new Qi;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,x){const b=new wE({next:N=>{b.Nu(),h.enqueueAndForget((()=>hE(u,w))),N.fromCache&&g.source==="server"?x.reject(new Ne(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new fE(p,b,{includeMetadataChanges:!0,Ka:!0});return dE(u,w)})(await Kp(s),s.asyncQueue,e,n,i))),i.promise}function S4(s,e){const n=new Qi;return s.asyncQueue.enqueueAndForget((async()=>h4(await E4(s),e,n))),n.promise}function NE(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const A4="ComponentProvider",d_=new Map;function j4(s,e,n,i,l){return new KC(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,NE(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const TE="firestore.googleapis.com",h_=!0;class f_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TE,this.ssl=h_}else this.host=e.host,this.ssl=e.ssl??h_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Z1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nI)throw new Ne(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NE(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ne(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gh{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new f_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new f_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new AC;switch(i.type){case"firstParty":return new IC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ne(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=d_.get(n);i&&(Te(A4,"Removing Datastore"),d_.delete(n),i.terminate())})(this),Promise.resolve()}}function R4(s,e,n,i={}){s=wa(s,Gh);const l=rr(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(lg(`https://${p}`),og("Firestore",!0)),u.host!==TE&&u.host!==p&&ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!Hr(g,h)&&(s._setSettings(g),i.mockUserToken)){let x,b;if(typeof i.mockUserToken=="string")x=i.mockUserToken,b=Ln.MOCK_USER;else{x=gw(i.mockUserToken,s._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new Ne(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Ln(w)}s._authCredentials=new jC(new u1(x,b))}}class il{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new il(this.firestore,e,this._query)}}class pn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(cu(n,pn._jsonSchema))return new pn(e,i||null,new Oe(Lt.fromString(n.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:mn("string",pn._jsonSchemaVersion),referencePath:mn("string")};class Wi extends il{constructor(e,n,i){super(e,n,Ag(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Oe(e))}withConverter(e){return new Wi(this.firestore,e,this._path)}}function mt(s,e,...n){if(s=Gt(s),d1("collection","path",e),s instanceof Gh){const i=Lt.fromString(e,...n);return Sv(i),new Wi(s,null,i)}{if(!(s instanceof pn||s instanceof Wi))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Lt.fromString(e,...n));return Sv(i),new Wi(s.firestore,null,i)}}function bt(s,e,...n){if(s=Gt(s),arguments.length===1&&(e=_g.newId()),d1("doc","path",e),s instanceof Gh){const i=Lt.fromString(e,...n);return Tv(i),new pn(s,null,new Oe(i))}{if(!(s instanceof pn||s instanceof Wi))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Lt.fromString(e,...n));return Tv(i),new pn(s.firestore,s instanceof Wi?s.converter:null,new Oe(i))}}const m_="AsyncQueue";class p_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sE(this,"async_queue_retry"),this._c=()=>{const i=dp();i&&Te(m_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=dp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=dp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!_o(e))throw e;Te(m_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,si("INTERNAL UNHANDLED ERROR: ",g_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=zg.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&He(47125,{Pc:g_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function g_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Wr extends Gh{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new p_,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new p_(e),this._firestoreClient=void 0,await e}}}function C4(s,e){const n=typeof s=="object"?s:dg(),i=typeof s=="string"?s:ph,l=Ch(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=fw("firestore");u&&R4(l,...u)}return l}function Gg(s){if(s._terminated)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||I4(s),s._firestoreClient}function I4(s){const e=s._freezeSettings(),n=j4(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new _4(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ks(kn.fromBase64String(e))}catch(n){throw new Ne(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ks(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ks._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cu(e,ks._jsonSchema))return ks.fromBase64String(e.bytes)}}ks._jsonSchemaVersion="firestore/bytes/1.0",ks._jsonSchema={type:mn("string",ks._jsonSchemaVersion),bytes:mn("string")};class Yg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ne(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yh{constructor(e){this._methodName=e}}class Ta{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ne(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ne(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ta._jsonSchemaVersion}}static fromJSON(e){if(cu(e,Ta._jsonSchema))return new Ta(e.latitude,e.longitude)}}Ta._jsonSchemaVersion="firestore/geoPoint/1.0",Ta._jsonSchema={type:mn("string",Ta._jsonSchemaVersion),latitude:mn("number"),longitude:mn("number")};class Ks{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cu(e,Ks._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ks(e.vectorValues);throw new Ne(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ks._jsonSchemaVersion="firestore/vectorValue/1.0",Ks._jsonSchema={type:mn("string",Ks._jsonSchemaVersion),vectorValues:mn("object")};const k4=/^__.*__$/;class D4{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new du(e,this.data,n,this.fieldTransforms)}}class SE{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function AE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{dataSource:s})}}class Kg{constructor(e,n,i,l,u,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Kg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Nh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(AE(this.dataSource)&&k4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class M4{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Fh(e)}createContext(e,n,i,l=!1){return new Kg({dataSource:e,methodName:n,targetDoc:i,path:In.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qg(s){const e=s._freezeSettings(),n=Fh(s._databaseId);return new M4(s._databaseId,!!e.ignoreUndefinedProperties,n)}function O4(s,e,n,i,l,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);Xg("Data must be an object, but it was:",h,i);const p=jE(i,h);let g,x;if(u.merge)g=new gs(h.fieldMask),x=h.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const N=fo(e,w,n);if(!h.contains(N))throw new Ne(ue.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);IE(b,N)||b.push(N)}g=new gs(b),x=h.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=h.fieldTransforms;return new D4(new ts(p),g,x)}class Kh extends Yh{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kh}}class Wg extends Yh{_toFieldTransform(e){return new w5(e.path,new Wc)}isEqual(e){return e instanceof Wg}}function V4(s,e,n,i){const l=s.createContext(1,e,n);Xg("Data must be an object, but it was:",l,i);const u=[],h=ts.empty();cr(i,((g,x)=>{const b=CE(e,g,n);x=Gt(x);const w=l.childContextForFieldPath(b);if(x instanceof Kh)u.push(b);else{const N=pu(x,w);N!=null&&(u.push(b),h.set(b,N))}}));const p=new gs(u);return new SE(h,p,l.fieldTransforms)}function P4(s,e,n,i,l,u){const h=s.createContext(1,e,n),p=[fo(e,i,n)],g=[l];if(u.length%2!=0)throw new Ne(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)p.push(fo(e,u[N])),g.push(u[N+1]);const x=[],b=ts.empty();for(let N=p.length-1;N>=0;--N)if(!IE(x,p[N])){const C=p[N];let G=g[N];G=Gt(G);const z=h.childContextForFieldPath(C);if(G instanceof Kh)x.push(C);else{const O=pu(G,z);O!=null&&(x.push(C),b.set(C,O))}}const w=new gs(x);return new SE(b,w,h.fieldTransforms)}function L4(s,e,n,i=!1){return pu(n,s.createContext(i?4:3,e))}function pu(s,e){if(RE(s=Gt(s)))return Xg("Unsupported field value:",e,s),jE(s,e);if(s instanceof Yh)return(function(i,l){if(!AE(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let h=0;for(const p of i){let g=pu(p,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=Gt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return b5(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=zt.fromDate(i);return{timestampValue:vh(l.serializer,u)}}if(i instanceof zt){const u=new zt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vh(l.serializer,u)}}if(i instanceof Ta)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ks)return{bytesValue:$1(l.serializer,i._byteString)};if(i instanceof pn){const u=l.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:kg(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof Ks)return(function(h,p){const g=h instanceof Ks?h.toArray():h;return{mapValue:{fields:{[v1]:{stringValue:_1},[gh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return jg(p.serializer,b)}))}}}}}})(i,l);if(J1(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Mh(i)}`)})(s,e)}function jE(s,e){const n={};return m1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cr(s,((i,l)=>{const u=pu(l,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function RE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof zt||s instanceof Ta||s instanceof ks||s instanceof pn||s instanceof Yh||s instanceof Ks||J1(s))}function Xg(s,e,n){if(!RE(n)||!h1(n)){const i=Mh(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function fo(s,e,n){if((e=Gt(e))instanceof Yg)return e._internalPath;if(typeof e=="string")return CE(s,e);throw Nh("Field path arguments must be of type string or ",s,!1,void 0,n)}const U4=new RegExp("[~\\*/\\[\\]]");function CE(s,e,n){if(e.search(U4)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Yg(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Nh(s,e,n,i,l){const u=i&&!i.isEmpty(),h=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${l}`),g+=")"),new Ne(ue.INVALID_ARGUMENT,p+s+g)}function IE(s,e){return s.some((n=>n.isEqual(e)))}class B4{convertValue(e,n="none"){switch(nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return cr(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[gh].arrayValue?.values?.map((i=>nn(i.doubleValue)));return new Ks(n)}convertGeoPoint(e){return new Ta(nn(e.latitude),nn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Ph(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Yc(e));default:return null}}convertTimestamp(e){const n=er(e);return new zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Lt.fromString(e);St(X1(i),9688,{name:e});const l=new Kc(i.get(1),i.get(3)),u=new Oe(i.popFirst(5));return l.isEqual(n)||si(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class Jg extends B4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function Zg(){return new Wg("serverTimestamp")}const x_="@firebase/firestore",y_="4.10.0";function b_(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class kE{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(fo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class z4 extends kE{data(){return super.data()}}function DE(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ne(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e0{}class q4 extends e0{}function Ds(s,e,...n){let i=[];e instanceof e0&&i.push(e),i=i.concat(n),(function(u){const h=u.filter((g=>g instanceof t0)).length,p=u.filter((g=>g instanceof Qh)).length;if(h>1||h>0&&p>0)throw new Ne(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class Qh extends q4{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Qh(e,n,i)}_apply(e){const n=this._parse(e);return ME(e._query,n),new il(e.firestore,e.converter,Pp(e._query,n))}_parse(e){const n=Qg(e.firestore);return(function(u,h,p,g,x,b,w){let N;if(x.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){__(w,b);const G=[];for(const z of w)G.push(v_(g,u,z));N={arrayValue:{values:G}}}else N=v_(g,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||__(w,b),N=L4(p,h,w,b==="in"||b==="not-in");return fn.create(x,b,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function xs(s,e,n){const i=e,l=fo("where",s);return Qh._create(l,i,n)}class t0 extends e0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t0(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ws.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let h=l;const p=u.getFlattenedFilters();for(const g of p)ME(h,g),h=Pp(h,g)})(e._query,n),new il(e.firestore,e.converter,Pp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function v_(s,e,n){if(typeof(n=Gt(n))=="string"){if(n==="")throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!R1(e)&&n.indexOf("/")!==-1)throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Lt.fromString(n));if(!Oe.isDocumentKey(i))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Mv(s,new Oe(i))}if(n instanceof pn)return Mv(s,n._key);throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mh(n)}.`)}function __(s,e){if(!Array.isArray(s)||s.length===0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ME(s,e){const n=(function(l,u){for(const h of l)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ne(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function F4(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class Ic{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zr extends kE{constructor(e,n,i,l,u,h){super(e,n,i,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ah(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(fo("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=zr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}zr._jsonSchemaVersion="firestore/documentSnapshot/1.0",zr._jsonSchema={type:mn("string",zr._jsonSchemaVersion),bundleSource:mn("string","DocumentSnapshot"),bundleName:mn("string"),bundle:mn("string")};class ah extends zr{data(e={}){return super.data(e)}}class qr{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Ic(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new ah(this._firestore,this._userDataWriter,i.key,i,new Ic(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ne(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((p=>{const g=new ah(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Ic(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new ah(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Ic(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,b=-1;return p.type!==0&&(x=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),b=h.indexOf(p.doc.key)),{type:H4(p.type),doc:g,oldIndex:x,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_g.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function H4(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:s})}}qr._jsonSchemaVersion="firestore/querySnapshot/1.0",qr._jsonSchema={type:mn("string",qr._jsonSchemaVersion),bundleSource:mn("string","QuerySnapshot"),bundleName:mn("string"),bundle:mn("string")};function Ms(s){s=wa(s,il);const e=wa(s.firestore,Wr),n=Gg(e),i=new Jg(e);return DE(s._query),T4(n,s._query).then((l=>new qr(e,i,s,l)))}function Tt(s,e,n,...i){s=wa(s,pn);const l=wa(s.firestore,Wr),u=Qg(l);let h;return h=typeof(e=Gt(e))=="string"||e instanceof Yg?P4(u,"updateDoc",s._key,e,n,i):V4(u,"updateDoc",s._key,e),n0(l,[h.toMutation(s._key,Ys.exists(!0))])}function $4(s){return n0(wa(s.firestore,Wr),[new Rg(s._key,Ys.none())])}function Xr(s,e){const n=wa(s.firestore,Wr),i=bt(s),l=F4(s.converter,e),u=Qg(s.firestore);return n0(n,[O4(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,Ys.exists(!1))]).then((()=>i))}function ns(s,...e){s=Gt(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||b_(e[i])||(n=e[i++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(b_(e[i])){const x=e[i];e[i]=x.next?.bind(x),e[i+1]=x.error?.bind(x),e[i+2]=x.complete?.bind(x)}let u,h,p;if(s instanceof pn)h=wa(s.firestore,Wr),p=Ag(s._key.path),u={next:x=>{e[i]&&e[i](G4(h,s,x))},error:e[i+1],complete:e[i+2]};else{const x=wa(s,il);h=wa(x.firestore,Wr),p=x._query;const b=new Jg(h);u={next:w=>{e[i]&&e[i](new qr(h,b,x,w))},error:e[i+1],complete:e[i+2]},DE(s._query)}const g=Gg(h);return N4(g,p,l,u)}function n0(s,e){const n=Gg(s);return S4(n,e)}function G4(s,e,n){const i=n.docs.get(e._key),l=new Jg(s);return new zr(s,l,e._key,i,new Ic(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){SC(tl),$r(new Ji("firestore",((i,{instanceIdentifier:l,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new Wr(new RC(i.getProvider("auth-internal")),new kC(h,i.getProvider("app-check-internal")),QC(h,l),h);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ba(x_,y_,e),ba(x_,y_,"esm2020")})();const OE="firebasestorage.googleapis.com",VE="storageBucket",Y4=120*1e3,K4=600*1e3;class Jt extends ja{constructor(e,n,i=0){super(fp(e),`Firebase Storage: ${n} (${fp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xt||(Xt={}));function fp(s){return"storage/"+s}function s0(){const s="An unknown error occurred, please check the error payload for server response.";return new Jt(Xt.UNKNOWN,s)}function Q4(s){return new Jt(Xt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function W4(s){return new Jt(Xt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function X4(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Jt(Xt.UNAUTHENTICATED,s)}function J4(){return new Jt(Xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Z4(s){return new Jt(Xt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function ek(){return new Jt(Xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tk(){return new Jt(Xt.CANCELED,"User canceled the upload/download.")}function nk(s){return new Jt(Xt.INVALID_URL,"Invalid URL '"+s+"'.")}function sk(s){return new Jt(Xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function ak(){return new Jt(Xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VE+"' property when initializing the app?")}function ik(){return new Jt(Xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rk(){return new Jt(Xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function lk(s){return new Jt(Xt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qp(s){return new Jt(Xt.INVALID_ARGUMENT,s)}function PE(){return new Jt(Xt.APP_DELETED,"The Firebase app was deleted.")}function ok(s){return new Jt(Xt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Uc(s,e){return new Jt(Xt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Tc(s){throw new Jt(Xt.INTERNAL_ERROR,"Internal error: "+s)}class ys{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=ys.makeFromUrl(e,n)}catch{return new ys(e,"")}if(i.path==="")return i;throw sk(e)}static makeFromUrl(e,n){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(fe){fe.path.charAt(fe.path.length-1)==="/"&&(fe.path_=fe.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+l+h,"i"),g={bucket:1,path:3};function x(fe){fe.path_=decodeURIComponent(fe.path)}const b="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${b}/b/${l}/o${N}`,"i"),G={bucket:1,path:3},z=n===OE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,O="([^?#]*)",L=new RegExp(`^https?://${z}/${l}/${O}`,"i"),K=[{regex:p,indices:g,postModify:u},{regex:C,indices:G,postModify:x},{regex:L,indices:{bucket:1,path:2},postModify:x}];for(let fe=0;fe<K.length;fe++){const pe=K[fe],le=pe.regex.exec(e);if(le){const S=le[pe.indices.bucket];let A=le[pe.indices.path];A||(A=""),i=new ys(S,A),pe.postModify(i);break}}if(i==null)throw nk(e);return i}}class ck{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function uk(s,e,n){let i=1,l=null,u=null,h=!1,p=0;function g(){return p===2}let x=!1;function b(...O){x||(x=!0,e.apply(null,O))}function w(O){l=setTimeout(()=>{l=null,s(C,g())},O)}function N(){u&&clearTimeout(u)}function C(O,...L){if(x){N();return}if(O){N(),b.call(null,O,...L);return}if(g()||h){N(),b.call(null,O,...L);return}i<64&&(i*=2);let K;p===1?(p=2,K=0):K=(i+Math.random())*1e3,w(K)}let G=!1;function z(O){G||(G=!0,N(),!x&&(l!==null?(O||(p=2),clearTimeout(l),w(0)):O||(p=1)))}return w(0),u=setTimeout(()=>{h=!0,z(!0)},n),z}function dk(s){s(!1)}function hk(s){return s!==void 0}function fk(s){return typeof s=="object"&&!Array.isArray(s)}function a0(s){return typeof s=="string"||s instanceof String}function w_(s){return i0()&&s instanceof Blob}function i0(){return typeof Blob<"u"}function E_(s,e,n,i){if(i<e)throw Qp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw Qp(`Invalid value for '${s}'. Expected ${n} or less.`)}function Wh(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function LE(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);n=n+l+"&"}return n=n.slice(0,-1),n}var Fr;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Fr||(Fr={}));function mk(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class pk{constructor(e,n,i,l,u,h,p,g,x,b,w,N=!0,C=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=x,this.progressCallback_=b,this.connectionFactory_=w,this.retry=N,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((G,z)=>{this.resolve_=G,this.reject_=z,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new $d(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,x=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,x)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===Fr.NO_ERROR,g=u.getStatus();if(!p||mk(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Fr.ABORT;i(!1,new $d(!1,null,b));return}const x=this.successCodes_.indexOf(g)!==-1;i(!0,new $d(x,u))})},n=(i,l)=>{const u=this.resolve_,h=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());hk(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=s0();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(l.canceled){const g=this.appDelete_?PE():tk();h(g)}else{const g=ek();h(g)}};this.canceled_?n(!1,new $d(!1,null,!0)):this.backoffId_=uk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class $d{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function gk(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function xk(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function yk(s,e){e&&(s["X-Firebase-GMPID"]=e)}function bk(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function vk(s,e,n,i,l,u,h=!0,p=!1){const g=LE(s.urlParams),x=s.url+g,b=Object.assign({},s.headers);return yk(b,e),gk(b,n),xk(b,u),bk(b,i),new pk(x,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,h,p)}function _k(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wk(...s){const e=_k();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(i0())return new Blob(s);throw new Jt(Xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ek(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function Nk(s){if(typeof atob>"u")throw lk("base-64");return atob(s)}const xa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mp{constructor(e,n){this.data=e,this.contentType=n||null}}function Tk(s,e){switch(s){case xa.RAW:return new mp(UE(e));case xa.BASE64:case xa.BASE64URL:return new mp(BE(s,e));case xa.DATA_URL:return new mp(Ak(e),jk(e))}throw s0()}function UE(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++n);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Sk(s){let e;try{e=decodeURIComponent(s)}catch{throw Uc(xa.DATA_URL,"Malformed data URL.")}return UE(e)}function BE(s,e){switch(s){case xa.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw Uc(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case xa.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw Uc(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Nk(e)}catch(l){throw l.message.includes("polyfill")?l:Uc(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i}class zE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Uc(xa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=Rk(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function Ak(s){const e=new zE(s);return e.base64?BE(xa.BASE64,e.rest):Sk(e.rest)}function jk(s){return new zE(s).contentType}function Rk(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Hi{constructor(e,n){let i=0,l="";w_(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(w_(this.data_)){const i=this.data_,l=Ek(i,e,n);return l===null?null:new Hi(l)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Hi(i,!0)}}static getBlob(...e){if(i0()){const n=e.map(i=>i instanceof Hi?i.data_:i);return new Hi(wk.apply(null,n))}else{const n=e.map(h=>a0(h)?Tk(xa.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const l=new Uint8Array(i);let u=0;return n.forEach(h=>{for(let p=0;p<h.length;p++)l[u++]=h[p]}),new Hi(l,!0)}}uploadData(){return this.data_}}function qE(s){let e;try{e=JSON.parse(s)}catch{return null}return fk(e)?e:null}function Ck(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function Ik(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function FE(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function kk(s,e){return e}class $n{constructor(e,n,i,l){this.server=e,this.local=n||e,this.writable=!!i,this.xform=l||kk}}let Gd=null;function Dk(s){return!a0(s)||s.length<2?s:FE(s)}function HE(){if(Gd)return Gd;const s=[];s.push(new $n("bucket")),s.push(new $n("generation")),s.push(new $n("metageneration")),s.push(new $n("name","fullPath",!0));function e(u,h){return Dk(h)}const n=new $n("name");n.xform=e,s.push(n);function i(u,h){return h!==void 0?Number(h):h}const l=new $n("size");return l.xform=i,s.push(l),s.push(new $n("timeCreated")),s.push(new $n("updated")),s.push(new $n("md5Hash",null,!0)),s.push(new $n("cacheControl",null,!0)),s.push(new $n("contentDisposition",null,!0)),s.push(new $n("contentEncoding",null,!0)),s.push(new $n("contentLanguage",null,!0)),s.push(new $n("contentType",null,!0)),s.push(new $n("metadata","customMetadata",!0)),Gd=s,Gd}function Mk(s,e){function n(){const i=s.bucket,l=s.fullPath,u=new ys(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function Ok(s,e,n){const i={};i.type="file";const l=n.length;for(let u=0;u<l;u++){const h=n[u];i[h.local]=h.xform(i,e[h.server])}return Mk(i,s),i}function $E(s,e,n){const i=qE(e);return i===null?null:Ok(s,i,n)}function Vk(s,e,n,i){const l=qE(e);if(l===null||!a0(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(x=>{const b=s.bucket,w=s.fullPath,N="/b/"+h(b)+"/o/"+h(w),C=Wh(N,n,i),G=LE({alt:"media",token:x});return C+G})[0]}function Pk(s,e){const n={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}class r0{constructor(e,n,i,l){this.url=e,this.method=n,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function GE(s){if(!s)throw s0()}function Lk(s,e){function n(i,l){const u=$E(s,l,e);return GE(u!==null),u}return n}function Uk(s,e){function n(i,l){const u=$E(s,l,e);return GE(u!==null),Vk(u,l,s.host,s._protocol)}return n}function YE(s){function e(n,i){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=J4():l=X4():n.getStatus()===402?l=W4(s.bucket):n.getStatus()===403?l=Z4(s.path):l=i,l.status=n.getStatus(),l.serverResponse=i.serverResponse,l}return e}function KE(s){const e=YE(s);function n(i,l){let u=e(i,l);return i.getStatus()===404&&(u=Q4(s.path)),u.serverResponse=l.serverResponse,u}return n}function Bk(s,e,n){const i=e.fullServerUrl(),l=Wh(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new r0(l,u,Uk(s,n),h);return p.errorHandler=KE(e),p}function zk(s,e){const n=e.fullServerUrl(),i=Wh(n,s.host,s._protocol),l="DELETE",u=s.maxOperationRetryTime;function h(g,x){}const p=new r0(i,l,h,u);return p.successCodes=[200,204],p.errorHandler=KE(e),p}function qk(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Fk(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=qk(null,e)),i}function Hk(s,e,n,i,l){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let K="";for(let fe=0;fe<2;fe++)K=K+Math.random().toString().slice(2);return K}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const x=Fk(e,i,l),b=Pk(x,n),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+x.contentType+`\r
\r
`,N=`\r
--`+g+"--",C=Hi.getBlob(w,i,N);if(C===null)throw ik();const G={name:x.fullPath},z=Wh(u,s.host,s._protocol),O="POST",L=s.maxUploadRetryTime,H=new r0(z,O,Lk(s,n),L);return H.urlParams=G,H.headers=h,H.body=C.uploadData(),H.errorHandler=YE(e),H}class $k{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,l,u){if(this.sent_)throw Tc("cannot .send() more than once");if(rr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Tc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Gk extends $k{initXhr(){this.xhr_.responseType="text"}}function l0(){return new Gk}class Jr{constructor(e,n){this._service=e,n instanceof ys?this._location=n:this._location=ys.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jr(e,n)}get root(){const e=new ys(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FE(this._location.path)}get storage(){return this._service}get parent(){const e=Ck(this._location.path);if(e===null)return null;const n=new ys(this._location.bucket,e);return new Jr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw ok(e)}}function Yk(s,e,n){s._throwIfRoot("uploadBytes");const i=Hk(s.storage,s._location,HE(),new Hi(e,!0),n);return s.storage.makeRequestWithTokens(i,l0).then(l=>({metadata:l,ref:s}))}function Kk(s){s._throwIfRoot("getDownloadURL");const e=Bk(s.storage,s._location,HE());return s.storage.makeRequestWithTokens(e,l0).then(n=>{if(n===null)throw rk();return n})}function Qk(s){s._throwIfRoot("deleteObject");const e=zk(s.storage,s._location);return s.storage.makeRequestWithTokens(e,l0)}function Wk(s,e){const n=Ik(s._location.path,e),i=new ys(s._location.bucket,n);return new Jr(s.storage,i)}function Xk(s){return/^[A-Za-z]+:\/\//.test(s)}function Jk(s,e){return new Jr(s,e)}function QE(s,e){if(s instanceof o0){const n=s;if(n._bucket==null)throw ak();const i=new Jr(n,n._bucket);return e!=null?QE(i,e):i}else return e!==void 0?Wk(s,e):s}function Zk(s,e){if(e&&Xk(e)){if(s instanceof o0)return Jk(s,e);throw Qp("To use ref(service, url), the first argument must be a Storage instance.")}else return QE(s,e)}function N_(s,e){const n=e?.[VE];return n==null?null:ys.makeFromBucketSpec(n,s)}function eD(s,e,n,i={}){s.host=`${e}:${n}`;const l=rr(e);l&&(lg(`https://${s.host}/b`),og("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:gw(u,s.app.options.projectId))}class o0{constructor(e,n,i,l,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=OE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Y4,this._maxUploadRetryTime=K4,this._requests=new Set,l!=null?this._bucket=ys.makeFromBucketSpec(l,this._host):this._bucket=N_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ys.makeFromBucketSpec(this._url,e):this._bucket=N_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jr(this,e)}_makeRequest(e,n,i,l,u=!0){if(this._deleted)return new ck(PE());{const h=vk(e,this._appId,i,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,l).getPromise()}}const T_="@firebase/storage",S_="0.14.0";const WE="storage";function tD(s,e,n){return s=Gt(s),Yk(s,e,n)}function nD(s){return s=Gt(s),Kk(s)}function sD(s){return s=Gt(s),Qk(s)}function A_(s,e){return s=Gt(s),Zk(s,e)}function aD(s=dg(),e){s=Gt(s);const i=Ch(s,WE).getImmediate({identifier:e}),l=fw("storage");return l&&iD(i,...l),i}function iD(s,e,n,i={}){eD(s,e,n,i)}function rD(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new o0(n,i,l,e,tl)}function lD(){$r(new Ji(WE,rD,"PUBLIC").setMultipleInstances(!0)),ba(T_,S_,""),ba(T_,S_,"esm2020")}lD();const oD={apiKey:"AIzaSyC1qZ9fK-6LFBxVWZsAD4dZq-KVg36A7f8",authDomain:"scheduler-65e51.firebaseapp.com",projectId:"scheduler-65e51",storageBucket:"scheduler-65e51.firebasestorage.app",messagingSenderId:"93993791456",appId:"1:93993791456:web:3a777a2da0dad4b8b74585"},c0=bw(oD),Ae=C4(c0),Zr=wC(c0),j_=aD(c0);const XE=(...s)=>s.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();const cD=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const uD=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());const R_=s=>{const e=uD(s);return e.charAt(0).toUpperCase()+e.slice(1)};var dD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hD=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const fD=j.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:u,iconNode:h,...p},g)=>j.createElement("svg",{ref:g,...dD,width:e,height:e,stroke:s,strokeWidth:i?Number(n)*24/Number(e):n,className:XE("lucide",l),...!u&&!hD(p)&&{"aria-hidden":"true"},...p},[...h.map(([x,b])=>j.createElement(x,b)),...Array.isArray(u)?u:[u]]));const Ge=(s,e)=>{const n=j.forwardRef(({className:i,...l},u)=>j.createElement(fD,{ref:u,iconNode:e,className:XE(`lucide-${cD(R_(s))}`,`lucide-${s}`,i),...l}));return n.displayName=R_(s),n};const mD=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],pD=Ge("arrow-down-right",mD);const gD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Za=Ge("arrow-left",gD);const xD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Bc=Ge("arrow-right",xD);const yD=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],bD=Ge("arrow-up-right",yD);const vD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Zl=Ge("bell",vD);const _D=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],pp=Ge("calendar-check",_D);const wD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],C_=Ge("calendar-days",wD);const ED=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ht=Ge("calendar",ED);const ND=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],TD=Ge("camera",ND);const SD=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],JE=Ge("chart-column",SD);const AD=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],jD=Ge("chart-pie",AD);const RD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],zc=Ge("check",RD);const CD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ZE=Ge("chevron-left",CD);const ID=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],eN=Ge("chevron-right",ID);const kD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ya=Ge("circle-check-big",kD);const DD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ui=Ge("circle-x",DD);const MD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ss=Ge("clock",MD);const OD=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],VD=Ge("coffee",OD);const PD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],LD=Ge("dollar-sign",PD);const UD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],BD=Ge("eye",UD);const zD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],qD=Ge("globe",zD);const FD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],HD=Ge("image",FD);const $D=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],Wp=Ge("list-ordered",$D);const GD=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],Th=Ge("list-plus",GD);const YD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],gp=Ge("loader-circle",YD);const KD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],tN=Ge("lock",KD);const QD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],WD=Ge("log-out",QD);const XD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],I_=Ge("mail",XD);const JD=[["path",{d:"M5 12h14",key:"1ays0h"}]],ZD=Ge("minus",JD);const e6=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],nN=Ge("party-popper",e6);const t6=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],sN=Ge("pen-line",t6);const n6=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],k_=Ge("phone",n6);const s6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Sh=Ge("plus",s6);const a6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],aN=Ge("refresh-cw",a6);const i6=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Xi=Ge("repeat",i6);const r6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],l6=Ge("save",r6);const o6=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],rl=Ge("scissors",o6);const c6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],u6=Ge("settings",c6);const d6=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],h6=Ge("sparkles",d6);const f6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],D_=Ge("star",f6);const m6=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Sa=Ge("tag",m6);const p6=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Zc=Ge("trash-2",p6);const g6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],iN=Ge("trending-up",g6);const x6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xp=Ge("triangle-alert",x6);const y6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Jp=Ge("user",y6);const b6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],es=Ge("users",b6);const v6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mo=Ge("x",v6);const _6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],w6=Ge("zap",_6);function M_({className:s=""}){return o.jsxs(et,{to:"/",className:`flex items-center gap-2.5 ${s}`,children:[o.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:o.jsx(rl,{className:"w-[18px] h-[18px] text-white"})}),o.jsxs("span",{className:"text-xl font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function E6(){return o.jsxs("div",{className:"min-h-screen bg-white",children:[o.jsx("nav",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-100",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsx(M_,{}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(et,{to:"/login",className:"px-4 py-2.5 text-sm font-semibold text-slate-600 hover:text-slate-900 transition-colors",children:"Sign In"}),o.jsxs(et,{to:"/register",className:"hidden sm:inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:["Get Started Free",o.jsx(Bc,{className:"w-4 h-4"})]}),o.jsx(et,{to:"/register",className:"sm:hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all",children:"Start Free"})]})]})}),o.jsxs("section",{className:"relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 -z-10",children:[o.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-50 rounded-full blur-3xl opacity-60 -translate-y-1/2 translate-x-1/3"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-violet-50 rounded-full blur-3xl opacity-50 translate-y-1/3 -translate-x-1/4"})]}),o.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 pt-16 sm:pt-24 pb-16 sm:pb-20",children:o.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 bg-blue-50 border border-blue-100 rounded-full text-sm font-medium text-blue-700 mb-6",children:[o.jsx(h6,{className:"w-3.5 h-3.5"}),"Free for beauty professionals"]}),o.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-[3.5rem] font-extrabold text-slate-900 leading-[1.1] mb-6 tracking-tight",children:["Online booking",o.jsx("br",{}),o.jsx("span",{className:"text-blue-600",children:"made effortless"})]}),o.jsx("p",{className:"text-lg sm:text-xl text-slate-600 leading-relaxed mb-8 max-w-lg",children:"Let clients book 24/7. Manage your team, services, and schedule from one beautiful dashboard. No more phone tag."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-10",children:[o.jsxs(et,{to:"/register",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-base shadow-lg shadow-blue-600/25 hover:shadow-xl hover:shadow-blue-600/30 transition-all hover:-translate-y-0.5",children:["Start for Free",o.jsx(Bc,{className:"w-4 h-4"})]}),o.jsx("a",{href:"#how-it-works",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-base border border-slate-200 transition-all",children:"See How It Works"})]}),o.jsxs("div",{className:"flex items-center gap-5 text-sm text-slate-500",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ya,{className:"w-4 h-4 text-emerald-500"}),o.jsx("span",{children:"Free to use"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ya,{className:"w-4 h-4 text-emerald-500"}),o.jsx("span",{children:"No credit card"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ya,{className:"w-4 h-4 text-emerald-500"}),o.jsx("span",{children:"Setup in 2 min"})]})]})]}),o.jsxs("div",{className:"relative animate-fade-in-up",style:{animationDelay:"150ms"},children:[o.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl shadow-slate-200/60 border border-slate-200/80 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-slate-50 border-b border-slate-100",children:[o.jsxs("div",{className:"flex gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),o.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),o.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"})]}),o.jsx("div",{className:"flex-1 mx-4",children:o.jsx("div",{className:"bg-white border border-slate-200 rounded-lg px-3 py-1.5 text-xs text-slate-400 font-mono",children:"bookflow.app/shop/janes-salon"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-sm font-bold",children:"J"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-900",children:"Jane's Salon"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Book your next appointment"})]})]}),o.jsx("div",{className:"space-y-2.5",children:[{name:"Haircut & Style",price:"$45",time:"45 min",color:"bg-blue-500"},{name:"Color Treatment",price:"$120",time:"2 hours",color:"bg-violet-500"},{name:"Blowout",price:"$35",time:"30 min",color:"bg-emerald-500"}].map(s=>o.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-slate-50 rounded-xl border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/50 transition-all cursor-default",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-2 h-8 ${s.color} rounded-full`}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-slate-800",children:s.name}),o.jsx("div",{className:"text-xs text-slate-500",children:s.time})]})]}),o.jsx("div",{className:"text-sm font-bold text-slate-900",children:s.price})]},s.name))})]})]}),o.jsxs("div",{className:"absolute -bottom-4 -left-4 bg-white rounded-xl shadow-lg shadow-slate-200/60 border border-slate-100 px-4 py-3 flex items-center gap-3 animate-float",children:[o.jsx("div",{className:"w-9 h-9 bg-emerald-100 rounded-full flex items-center justify-center",children:o.jsx(ya,{className:"w-5 h-5 text-emerald-600"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-slate-500",children:"Booking confirmed"}),o.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Tomorrow at 2:00 PM"})]})]})]})]})})]}),o.jsx("section",{className:"border-y border-slate-100 bg-slate-50/50",children:o.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-8 sm:py-10",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8 sm:gap-16 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"500+"}),o.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Businesses trust BookFlow"})]}),o.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"10,000+"}),o.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Appointments booked"})]}),o.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-center gap-1 text-2xl sm:text-3xl font-extrabold text-slate-900",children:["4.9 ",o.jsx(D_,{className:"w-5 h-5 text-amber-400 fill-amber-400"})]}),o.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Average rating"})]})]})})}),o.jsx("section",{className:"py-20 sm:py-28",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[o.jsxs("div",{className:"text-center mb-14",children:[o.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Everything you need to run your bookings"}),o.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Built specifically for beauty professionals, salons, and service businesses. Simple, powerful, and free."})]}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 stagger-children",children:[{icon:o.jsx(Ht,{className:"w-6 h-6"}),title:"Smart Scheduling",desc:"Set weekly hours with breaks. Slots auto-generate so your calendar is always up to date.",color:"bg-blue-100 text-blue-600"},{icon:o.jsx(es,{className:"w-6 h-6"}),title:"Multi-Staff Support",desc:"Add your whole team. Each member gets their own schedule, hours, and bookings.",color:"bg-violet-100 text-violet-600"},{icon:o.jsx(w6,{className:"w-6 h-6"}),title:"Instant Booking",desc:"Clients pick a service, choose a stylist, and book  all in under a minute.",color:"bg-amber-100 text-amber-600"},{icon:o.jsx(qD,{className:"w-6 h-6"}),title:"Your Own Booking Page",desc:"Get a unique link to share anywhere. No app downloads needed for your clients.",color:"bg-emerald-100 text-emerald-600"}].map(s=>o.jsxs("div",{className:"group bg-white rounded-2xl p-7 border border-slate-200/80 hover:border-slate-300 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[o.jsx("div",{className:`w-12 h-12 ${s.color} rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300`,children:s.icon}),o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:s.title}),o.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:s.desc})]},s.title))})]})}),o.jsx("section",{id:"how-it-works",className:"py-20 sm:py-28 bg-slate-50 border-y border-slate-100",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[o.jsxs("div",{className:"text-center mb-14",children:[o.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Up and running in minutes"}),o.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Three simple steps to start accepting online bookings today."})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-8 lg:gap-12 relative",children:[o.jsx("div",{className:"hidden md:block absolute top-14 left-[calc(16.67%+1rem)] right-[calc(16.67%+1rem)] h-px bg-gradient-to-r from-blue-200 via-violet-200 to-emerald-200"}),[{step:"1",title:"Create your account",desc:"Sign up free in 30 seconds. Name your shop and you're in.",color:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/30"},{step:"2",title:"Set up your shop",desc:"Add your services, team, and weekly hours. BookFlow handles the rest.",color:"from-violet-500 to-violet-600",shadow:"shadow-violet-500/30"},{step:"3",title:"Share your link",desc:"Send your booking page to clients. They book, you get notified.",color:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/30"}].map(s=>o.jsxs("div",{className:"relative text-center",children:[o.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${s.color} rounded-2xl flex items-center justify-center mx-auto mb-6 text-white text-xl font-extrabold shadow-lg ${s.shadow} relative z-10`,children:s.step}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:s.title}),o.jsx("p",{className:"text-slate-600 leading-relaxed max-w-xs mx-auto",children:s.desc})]},s.step))]})]})}),o.jsx("section",{className:"py-20 sm:py-28",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[o.jsxs("div",{className:"text-center mb-14",children:[o.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Loved by professionals"}),o.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"See why salons and stylists are switching to BookFlow."})]}),o.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{quote:"BookFlow replaced our paper appointment book. Clients love being able to book online anytime.",name:"Maria Santos",role:"Salon Owner",initials:"MS",color:"bg-blue-100 text-blue-700"},{quote:"Setting up was incredibly easy. I had my booking page live and shared with clients in under 10 minutes.",name:"David Chen",role:"Barber",initials:"DC",color:"bg-violet-100 text-violet-700"},{quote:"The multi-staff feature is perfect. Each stylist manages their own schedule and clients can pick who they want.",name:"Lisa Park",role:"Studio Manager",initials:"LP",color:"bg-emerald-100 text-emerald-700"}].map(s=>o.jsxs("div",{className:"bg-white rounded-2xl p-7 border border-slate-200/80 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[o.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(5)].map((e,n)=>o.jsx(D_,{className:"w-4 h-4 text-amber-400 fill-amber-400"},n))}),o.jsxs("p",{className:"text-slate-700 leading-relaxed mb-6",children:['"',s.quote,'"']}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 ${s.color} rounded-full flex items-center justify-center text-sm font-bold`,children:s.initials}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s.name}),o.jsx("div",{className:"text-xs text-slate-500",children:s.role})]})]})]},s.name))})]})}),o.jsxs("section",{className:"py-20 sm:py-28 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 -z-0",children:[o.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-1/4 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl"})]}),o.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto px-5 sm:px-8 text-center",children:[o.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold text-white mb-6 leading-tight",children:"Ready to streamline your bookings?"}),o.jsx("p",{className:"text-lg text-slate-400 mb-10 max-w-xl mx-auto",children:"Join hundreds of professionals who have ditched the old appointment book. Set up in minutes, free forever."}),o.jsxs(et,{to:"/register",className:"inline-flex items-center gap-2 px-8 py-4 bg-white hover:bg-slate-50 text-slate-900 rounded-xl font-bold text-lg transition-all hover:shadow-xl hover:shadow-white/10 hover:-translate-y-0.5",children:["Create Your Free Account",o.jsx(Bc,{className:"w-5 h-5"})]})]})]}),o.jsx("footer",{className:"bg-white border-t border-slate-100",children:o.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-10",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[o.jsx(M_,{}),o.jsxs("div",{className:"flex items-center gap-6 text-sm text-slate-500",children:[o.jsx(et,{to:"/register",className:"hover:text-slate-900 transition-colors",children:"Sign Up"}),o.jsx("span",{className:"text-slate-200",children:""}),o.jsx(et,{to:"/login",className:"hover:text-slate-900 transition-colors",children:"Sign In"}),o.jsx("span",{className:"text-slate-200",children:""}),o.jsx("a",{href:"#how-it-works",className:"hover:text-slate-900 transition-colors",children:"How It Works"})]}),o.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," BookFlow. All rights reserved."]})]})})})]})}function N6(s){return s.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function T6(){const s=xo(),[e,n]=j.useState(""),[i,l]=j.useState(""),[u,h]=j.useState(""),[p,g]=j.useState(""),[x,b]=j.useState(!1),w=N6(e),N=async C=>{if(C.preventDefault(),g(""),!w){g("Please enter a valid shop name");return}if(u.length<6){g("Password must be at least 6 characters");return}b(!0);try{const G=Ds(mt(Ae,"shops"),xs("slug","==",w));if(!(await Ms(G)).empty){g("A shop with that name already exists. Please choose a different name."),b(!1);return}const L=(await lR(Zr,i,u)).user;await Xr(mt(Ae,"shops"),{name:e.trim(),slug:w,ownerUid:L.uid,ownerEmail:i,createdAt:Zg()}),s(`/shop/${w}/dashboard`)}catch(G){switch(G.code){case"auth/email-already-in-use":g("An account with this email already exists");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/weak-password":g("Password must be at least 6 characters");break;default:g("Registration failed. Please try again.")}}finally{b(!1)}};return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsxs(et,{to:"/",className:"inline-flex items-center gap-2.5",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:o.jsx(rl,{className:"w-5 h-5 text-white"})}),o.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),o.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Create your shop"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Set up your booking page in seconds  it's free"})]}),o.jsxs("form",{onSubmit:N,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Shop Name"}),o.jsx("input",{type:"text",value:e,onChange:C=>{n(C.target.value),g("")},placeholder:"Jane's Salon",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),w&&o.jsxs("p",{className:"mt-1.5 text-xs text-slate-400",children:["Your page: ",o.jsxs("span",{className:"font-mono text-blue-600 font-medium",children:["bookflow.app/shop/",w]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),o.jsx("input",{type:"email",value:i,onChange:C=>{l(C.target.value),g("")},placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),o.jsx("input",{type:"password",value:u,onChange:C=>{h(C.target.value),g("")},placeholder:"At least 6 characters",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&o.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[o.jsx("span",{children:""})," ",p]})]}),o.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Creating your shop"]}):o.jsxs(o.Fragment,{children:["Create Shop",o.jsx(Bc,{className:"w-4 h-4"})]})})]}),o.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:o.jsxs("p",{className:"text-sm text-slate-500",children:["Already have an account?"," ",o.jsx(et,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Sign in"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(et,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[o.jsx(Za,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function S6({user:s}){const e=xo(),[n,i]=j.useState(""),[l,u]=j.useState(""),[h,p]=j.useState(""),[g,x]=j.useState(!1);j.useState(()=>{if(!s)return;(async()=>{const N=Ds(mt(Ae,"shops"),xs("ownerUid","==",s.uid)),C=await Ms(N);if(!C.empty){const G=C.docs[0].data();e(`/shop/${G.slug}/dashboard`,{replace:!0})}})()},[s,e]);const b=async w=>{w.preventDefault(),p(""),x(!0);try{const C=(await Gw(Zr,n,l)).user,G=Ds(mt(Ae,"shops"),xs("ownerUid","==",C.uid)),z=await Ms(G);if(z.empty){p("No shop found for this account. Need to create one?"),await Zr.signOut(),x(!1);return}const O=z.docs[0].data();e(`/shop/${O.slug}/dashboard`,{replace:!0})}catch(N){switch(N.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":p("Invalid email or password");break;case"auth/invalid-email":p("Please enter a valid email address");break;case"auth/too-many-requests":p("Too many failed attempts. Please try again later.");break;default:p("Login failed. Please try again.")}u("")}finally{x(!1)}};return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsxs(et,{to:"/",className:"inline-flex items-center gap-2.5",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:o.jsx(rl,{className:"w-5 h-5 text-white"})}),o.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),o.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),o.jsx("input",{type:"email",value:n,onChange:w=>{i(w.target.value),p("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),o.jsx("input",{type:"password",value:l,onChange:w=>{u(w.target.value),p("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${h?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),h&&o.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[o.jsx("span",{children:""})," ",h]})]}),o.jsx("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:g?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):o.jsxs(o.Fragment,{children:["Sign In",o.jsx(Bc,{className:"w-4 h-4"})]})})]}),o.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:o.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",o.jsx(et,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(et,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[o.jsx(Za,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function rN({availableDates:s,selectedDate:e,onSelectDate:n}){const[i,l]=j.useState(new Date),u=L=>{const H=L.getFullYear(),K=L.getMonth(),fe=new Date(H,K,1),le=new Date(H,K+1,0).getDate(),S=fe.getDay();return{daysInMonth:le,startingDayOfWeek:S,year:H,month:K}},{daysInMonth:h,startingDayOfWeek:p,year:g,month:x}=u(i),b=()=>{l(new Date(i.getFullYear(),i.getMonth()-1))},w=()=>{l(new Date(i.getFullYear(),i.getMonth()+1))},N=L=>{const H=`${g}-${String(x+1).padStart(2,"0")}-${String(L).padStart(2,"0")}`;return s.includes(H)},C=L=>`${g}-${String(x+1).padStart(2,"0")}-${String(L).padStart(2,"0")}`===e,G=L=>{if(N(L)){const H=`${g}-${String(x+1).padStart(2,"0")}-${String(L).padStart(2,"0")}`;n(H)}},z=["January","February","March","April","May","June","July","August","September","October","November","December"],O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return o.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5 sm:p-6 shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-center mb-5",children:[o.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(ZE,{className:"w-5 h-5 text-slate-600"})}),o.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[z[x]," ",g]}),o.jsx("button",{onClick:w,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(eN,{className:"w-5 h-5 text-slate-600"})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:O.map(L=>o.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:L},L))}),o.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:p}).map((L,H)=>o.jsx("div",{},`empty-${H}`)),Array.from({length:h}).map((L,H)=>{const K=H+1,fe=N(K),pe=C(K),le=new Date,S=le.getDate()===K&&le.getMonth()===x&&le.getFullYear()===g;return o.jsxs("button",{onClick:()=>G(K),disabled:!fe,className:`
                relative p-2.5 sm:p-3 text-center rounded-lg text-sm font-semibold transition-all duration-200
                ${pe?"bg-blue-600 text-white shadow-md shadow-blue-600/30":fe?"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 hover:border-emerald-300 cursor-pointer":S?"text-slate-900 font-bold":"text-slate-300 cursor-not-allowed"}
              `,children:[K,S&&!pe&&o.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]},K)})]}),o.jsxs("div",{className:"mt-4 flex gap-5 text-xs text-slate-500",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 bg-emerald-50 border border-emerald-200 rounded"}),o.jsx("span",{children:"Available"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),o.jsx("span",{children:"Selected"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),o.jsx("span",{children:"Today"})]})]})]})}const A6=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"},{key:"saturday",label:"Sat"},{key:"sunday",label:"Sun"}],O_=[{key:"morning",label:"Morning (9AM12PM)",start:"09:00",end:"12:00"},{key:"afternoon",label:"Afternoon (12PM5PM)",start:"12:00",end:"17:00"},{key:"evening",label:"Evening (5PM9PM)",start:"17:00",end:"21:00"},{key:"any",label:"Any time",start:"00:00",end:"23:59"}];function j6(){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="WL";for(let n=0;n<4;n++)e+=s.charAt(Math.floor(Math.random()*s.length));return e}function V_({shopId:s,slug:e,selectedService:n,selectedStaff:i,staffMembers:l,preferredDate:u,onSuccess:h,onCancel:p}){const[g,x]=j.useState({name:"",email:"",phone:""}),[b,w]=j.useState([]),[N,C]=j.useState("any"),[G,z]=j.useState(!1),[O,L]=j.useState(!1),[H,K]=j.useState(""),fe=le=>{w(S=>S.includes(le)?S.filter(A=>A!==le):[...S,le])},pe=async le=>{le.preventDefault(),z(!0);try{const S=j6(),A=O_.find(U=>U.key===N),R=i&&i!=="any"?i.id:"any",V=i&&i!=="any"?i.name:"Any Available",k={clientName:g.name,clientEmail:g.email,clientPhone:g.phone,serviceId:n?.id||null,serviceName:n?.name||"Any Service",staffId:R,staffName:V,preferredDate:u||null,preferredDays:b.length>0?b:null,preferredTimeRange:A?{start:A.start,end:A.end}:null,status:"waiting",refCode:S,createdAt:new Date().toISOString(),notifiedAt:null,notifiedSlot:null};await Xr(mt(Ae,"shops",s,"waitlist"),k),K(S),L(!0),h&&h(S)}catch(S){console.error("Waitlist error:",S)}finally{z(!1)}};return O?o.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg shadow-blue-100/50 p-8 text-center animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ya,{className:"w-8 h-8 text-blue-600"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"You're on the Waitlist!"}),o.jsxs("p",{className:"text-slate-600 mb-4",children:["We'll notify you when a slot opens up",n?` for ${n.name}`:"","."]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your waitlist reference"}),o.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:H})]}),o.jsxs("a",{href:`#/shop/${e}/waitlist/${H}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[o.jsx(ss,{className:"w-4 h-4"}),"Check Waitlist Status"]}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to check your position and get notified"})]}):o.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg p-6 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:o.jsx(Th,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Join the Waitlist"}),o.jsx("p",{className:"text-sm text-slate-500",children:"We'll notify you when a slot opens up"})]})]}),o.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),o.jsx("input",{type:"text",value:g.name,onChange:le=>x({...g,name:le.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),o.jsx("input",{type:"email",value:g.email,onChange:le=>x({...g,email:le.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),o.jsx("input",{type:"tel",value:g.phone,onChange:le=>x({...g,phone:le.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Preferred Days ",o.jsx("span",{className:"text-slate-400 font-normal",children:"(optional)"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:A6.map(le=>o.jsx("button",{type:"button",onClick:()=>fe(le.key),className:`px-3.5 py-2 rounded-lg text-sm font-semibold transition-all border ${b.includes(le.key)?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:le.label},le.key))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Preferred Time"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:O_.map(le=>o.jsx("button",{type:"button",onClick:()=>C(le.key),className:`px-3.5 py-2.5 rounded-lg text-sm font-medium transition-all border text-left ${N===le.key?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:le.label},le.key))})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{type:"submit",disabled:G,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:G?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Joining"]}):o.jsxs(o.Fragment,{children:[o.jsx(Th,{className:"w-4 h-4"}),"Join Waitlist"]})}),p&&o.jsx("button",{type:"button",onClick:p,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})}const R6=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function eo(s){const[e,n]=s.split(":").map(Number);return e*60+n}function P_(s){const e=Math.floor(s/60),n=s%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function C6(s){const e=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function I6(s,e,n,i,l,u){if(!s)return[];const p=new Date(e+"T12:00:00").getDay(),g=R6[p],x=s[g];if(!x||!x.enabled)return[];const b=eo(x.start),w=eo(x.end),N=x.break?eo(x.break.start):null,C=x.break?eo(x.break.end):null,G=n+i,z=[];let O=b;for(;O+n<=w;){const L=O+n;if(N!==null&&C!==null&&O<C&&L>N){O=C;continue}z.push({id:`wh-${l}-${e}-${P_(O)}`,date:e,time:P_(O),duration:n,available:!0,staffId:l,staffName:u,generated:!0}),O+=G}return z}function lN(s,e,n=0,i=4){const l=[],u=new Date;u.setHours(0,0,0,0);const h=new Date(u);h.setDate(h.getDate()+i*7);for(const p of s){if(!p.weeklyHours)continue;const g=new Date(u);for(;g<h;){const x=C6(g),b=I6(p.weeklyHours,x,e,n,p.id,p.name);l.push(...b),g.setDate(g.getDate()+1)}}return l}function oN(s,e,n=0){const i=e.filter(l=>!l.status||l.status==="pending"||l.status==="confirmed");return s.filter(l=>{const u=eo(l.time),h=u+l.duration;return!i.some(g=>{if(l.staffId&&g.staffId&&g.staffId!==l.staffId||g.date!==l.date)return!1;const x=eo(g.time),b=g.serviceDuration||g.duration||l.duration,w=x+b;return!(h+n<=x||w+n<=u)})})}function cN(s,e){const n=new Set(e.map(l=>`${l.staffId||""}-${l.date}-${l.time}`)),i=s.filter(l=>{const u=`${l.staffId||""}-${l.date}-${l.time}`;return!n.has(u)});return[...e,...i]}function kc({name:s,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const i=(s||"").split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2);return o.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:i||"?"})}function k6(){return o.jsxs(et,{to:"/",className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:o.jsx(rl,{className:"w-3.5 h-3.5 text-white"})}),o.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function D6({member:s,onClose:e}){const[n,i]=j.useState(null),l=s.portfolio||[];return j.useEffect(()=>{const u=h=>{h.key==="Escape"&&(n!==null?i(null):e())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[n,e]),o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),o.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 bg-slate-100 hover:bg-slate-200 rounded-full flex items-center justify-center text-slate-600 transition-all z-10",children:o.jsx(X,{className:"w-4 h-4"})}),o.jsxs("div",{className:"p-6 pb-4 border-b border-slate-100",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(kc,{name:s.name,className:"w-14 h-14",bgClass:"bg-violet-100 text-violet-700"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s.name}),s.role&&o.jsx("p",{className:"text-sm text-violet-600 font-medium",children:s.role})]})]}),s.bio&&o.jsx("p",{className:"mt-3 text-sm text-slate-600 leading-relaxed",children:s.bio})]}),o.jsx("div",{className:"p-6",children:l.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:o.jsx(Image,{className:"w-6 h-6 text-slate-400"})}),o.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet"})]}):o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:l.map((u,h)=>o.jsxs("button",{onClick:()=>i(h),className:"group relative aspect-square rounded-xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5",children:[o.jsx("img",{src:u.url,alt:u.caption||"Portfolio",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),u.caption&&o.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-2.5 pt-6",children:o.jsx("p",{className:"text-xs text-white font-medium truncate",children:u.caption})})]},h))})})]}),n!==null&&l[n]&&o.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90",children:[o.jsx("button",{onClick:()=>i(null),className:"absolute top-4 right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:o.jsx(X,{className:"w-5 h-5"})}),n>0&&o.jsx("button",{onClick:()=>i(n-1),className:"absolute left-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:o.jsx(ChevronLeft,{className:"w-5 h-5"})}),n<l.length-1&&o.jsx("button",{onClick:()=>i(n+1),className:"absolute right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:o.jsx(ChevronRight,{className:"w-5 h-5"})}),o.jsxs("div",{className:"max-w-4xl max-h-[85vh] flex flex-col items-center",children:[o.jsx("img",{src:l[n].url,alt:l[n].caption||"Portfolio",className:"max-w-full max-h-[75vh] object-contain rounded-lg"}),l[n].caption&&o.jsx("p",{className:"mt-3 text-sm text-white/90 font-medium text-center px-4",children:l[n].caption}),o.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[n+1," / ",l.length]})]})]})]})}function M6(){const{slug:s}=tu(),[e,n]=j.useState(null),[i,l]=j.useState(null),[u,h]=j.useState(!0),[p,g]=j.useState(!1),[x,b]=j.useState([]),[w,N]=j.useState([]),[C,G]=j.useState(null),[z,O]=j.useState(null),[L,H]=j.useState([]),[K,fe]=j.useState([]),[pe,le]=j.useState(!1),[S,A]=j.useState(null),[R,V]=j.useState(null),[k,U]=j.useState(""),[I,q]=j.useState(!1),[ne,M]=j.useState({name:"",email:"",phone:""}),[he,ve]=j.useState(""),[Ce,Le]=j.useState(!1),[P,se]=j.useState(null),[ce,ge]=j.useState(!1),[xe,je]=j.useState("biweekly"),[ie,Ve]=j.useState(null);j.useEffect(()=>{(async()=>{h(!0),g(!1);try{const ye=Ds(mt(Ae,"shops"),xs("slug","==",s)),qe=await Ms(ye);if(qe.empty)g(!0);else{const Ue=qe.docs[0];n(Ue.data()),l(Ue.id)}}catch(ye){console.error("Error looking up shop:",ye),g(!0)}finally{h(!1)}})()},[s]),j.useEffect(()=>{if(!i)return;const me=ns(mt(Ae,"shops",i,"services"),gt=>{const Be=gt.docs.map(De=>({id:De.id,...De.data()})).filter(De=>De.active!==!1).sort((De,At)=>(De.name||"").localeCompare(At.name||""));b(Be)}),ye=ns(mt(Ae,"shops",i,"availability"),gt=>{const Be=new Date,De=gt.docs.map(At=>({id:At.id,...At.data()})).filter(At=>new Date(`${At.date}T${At.time}`)>Be);H(De)}),qe=ns(mt(Ae,"shops",i,"bookings"),gt=>{const Be=gt.docs.map(De=>({id:De.id,...De.data()}));fe(Be)}),Ue=ns(mt(Ae,"shops",i,"staff"),gt=>{const Be=gt.docs.map(De=>({id:De.id,...De.data()})).filter(De=>De.active!==!1).sort((De,At)=>(De.name||"").localeCompare(At.name||""));N(Be)});return()=>{me(),ye(),qe(),Ue()}},[i]),j.useEffect(()=>{w.length===1?O(w[0]):w.length===0&&O(null)},[w]);const Ie=x.length>0;w.length>0;const $e=w.length>1,tt=e?.bufferMinutes||0,Yt=j.useMemo(()=>{const me=new Date;let ye=L.filter(Be=>Be.available);if(C&&(ye=ye.filter(Be=>Be.duration>=C.duration)),z&&z!=="any"&&(ye=ye.filter(Be=>Be.staffId===z.id||!Be.staffId)),!C)return ye;const qe=z&&z!=="any"?w.filter(Be=>Be.id===z.id):w,Ue=lN(qe,C.duration,tt,4).filter(Be=>new Date(`${Be.date}T${Be.time}`)>me),gt=cN(Ue,ye);return oN(gt,K,tt)},[L,C,z,w,K,tt]),It=(me,ye,qe=3)=>{const Ue=[],gt=new Date(me+"T12:00:00"),Be=new Date(gt);Be.setMonth(Be.getMonth()+qe);let De=new Date(gt);for(ye==="weekly"?De.setDate(De.getDate()+7):ye==="biweekly"?De.setDate(De.getDate()+14):ye==="fourweekly"?De.setDate(De.getDate()+28):ye==="monthly"&&De.setMonth(De.getMonth()+1);De<=Be;){const At=De.getFullYear(),vn=String(De.getMonth()+1).padStart(2,"0"),wt=String(De.getDate()).padStart(2,"0");Ue.push(`${At}-${vn}-${wt}`),ye==="weekly"?De.setDate(De.getDate()+7):ye==="biweekly"?De.setDate(De.getDate()+14):ye==="fourweekly"?De.setDate(De.getDate()+28):ye==="monthly"&&De.setMonth(De.getMonth()+1)}return Ue},pt=j.useMemo(()=>{if(!ce||!S)return null;const me=It(S.date,xe),ye=C?C.duration:S.duration||60,qe=z&&z!=="any"?z.id:S.staffId,Ue=S.time,gt=K.filter(Mn=>!Mn.status||Mn.status==="pending"||Mn.status==="confirmed"),Be=Mn=>{const[is,On]=Mn.split(":").map(Number);return is*60+On},De=Be(Ue),At=De+ye;let vn=[],wt=[];const xn=new Set;me.forEach(Mn=>{gt.some(On=>{if(qe&&On.staffId&&On.staffId!==qe||On.date!==Mn)return!1;const ll=Be(On.time),Ra=On.serviceDuration||On.duration||ye,dr=ll+Ra,ii=tt||0;return!(At+ii<=ll||dr+ii<=De)})||xn.has(Mn)?wt.push(Mn):(vn.push(Mn),xn.add(Mn))});const Dn=me.length>0?me[me.length-1]:S.date,qn=new Date(Dn+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Eo={weekly:"week",biweekly:"2 weeks",fourweekly:"4 weeks",monthly:"month"};return{available:vn,conflicts:wt,total:vn.length+1,skipped:wt.length,endDate:qn,intervalLabel:Eo[xe]||xe}},[ce,xe,S,C,z,K,tt]),gn=me=>{G(me),w.length>1&&O(null),V(null),A(null),le(!1),U("")},sn=me=>{O(me),V(null),A(null),le(!1),U("")},as=()=>{G(null),w.length>1&&O(null),V(null),A(null),le(!1)},zn=()=>{V(null),A(null),le(!1),$e?O(null):Ie&&G(null)},vt=me=>{A(me),le(!0),U("")},Ee=()=>{const me="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let ye="BK";for(let qe=0;qe<4;qe++)ye+=me.charAt(Math.floor(Math.random()*me.length));return ye},ke=async me=>{me.preventDefault(),q(!0),Ve(null);try{const ye=Ee(),qe=e?.requireApproval?"pending":"confirmed",Ue=ce?`rg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`:null,gt=ce&&pt?pt.endDate:null,Be={slotId:S.id,date:S.date,time:S.time,duration:C?C.duration:S.duration,clientName:ne.name,clientEmail:ne.email,clientPhone:ne.phone,bookedAt:new Date().toISOString(),status:qe,refCode:ye};C&&(Be.serviceId=C.id,Be.serviceName=C.name,Be.servicePrice=C.price,Be.serviceDuration=C.duration),z&&z!=="any"?(Be.staffId=z.id,Be.staffName=z.name):S.staffId&&(Be.staffId=S.staffId,Be.staffName=S.staffName||""),ce&&Ue&&(Be.recurring=!0,Be.recurringInterval=xe,Be.recurringGroupId=Ue,Be.recurringUntil=gt),await Xr(mt(Ae,"shops",i,"bookings"),Be),S.generated||await Tt(bt(Ae,"shops",i,"availability",S.id),{available:!1});let De=1,At=0;if(ce&&pt){const vn=pt.available;At=pt.skipped;for(const wt of vn){const xn=Ee(),Dn={...Be,date:wt,slotId:`recurring-${Ue}-${wt}`,refCode:xn,bookedAt:new Date().toISOString()};await Xr(mt(Ae,"shops",i,"bookings"),Dn),De++}Ve({created:De,skipped:At})}M({name:"",email:"",phone:""}),le(!1),A(null),G(null),V(null),O(w.length===1?w[0]:null),ge(!1),ve(ye),e?.requireApproval?U(" Your booking request has been submitted! The shop will review and confirm it shortly."):U(" Booking confirmed! You will receive a confirmation email shortly.")}catch(ye){console.error("Booking error:",ye),U(" Something went wrong. Please try again.")}finally{q(!1)}},Ye=me=>new Date(me+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),Pt=me=>{const[ye,qe]=me.split(":"),Ue=parseInt(ye),gt=Ue>=12?"PM":"AM";return`${Ue%12||12}:${qe} ${gt}`},at=me=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(me),ut=me=>{if(me<60)return`${me} min`;const ye=Math.floor(me/60),qe=me%60;return qe?`${ye}h ${qe}m`:`${ye} hour${ye>1?"s":""}`};if(u)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking page"})]})});if(p)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Ht,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),o.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,o.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),o.jsxs(et,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Za,{className:"w-4 h-4"}),"Go Home"]})]})});const F=[...new Set(Yt.map(me=>me.date))].sort(),te=R?Yt.filter(me=>me.date===R):Yt,we=pe?"form":Ie&&!C?"services":$e&&!z?"staff":"calendar",Pe=[];Ie&&Pe.push({key:"services",label:"Service"}),$e&&Pe.push({key:"staff",label:"Stylist"}),Pe.push({key:"calendar",label:"Date & Time"}),Pe.push({key:"form",label:"Confirm"});const _t=Pe.findIndex(me=>me.key===we),ft=["border-l-blue-500","border-l-violet-500","border-l-emerald-500","border-l-amber-500","border-l-rose-500","border-l-cyan-500","border-l-indigo-500","border-l-pink-500","border-l-teal-500"];return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Book your appointment"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(et,{to:`/shop/${s}/login`,className:"flex items-center gap-1.5 px-3.5 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[o.jsx(tN,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:"Owner"})]}),o.jsx(k6,{})]})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[Pe.length>1&&o.jsx("div",{className:"flex items-center justify-center gap-0 mb-8 animate-fade-in",children:Pe.map((me,ye)=>{const qe=me.key===we,Ue=ye<_t;return o.jsxs(j.Fragment,{children:[ye>0&&o.jsx("div",{className:`w-8 sm:w-14 h-0.5 transition-colors duration-300 ${ye<=_t?"bg-blue-500":"bg-slate-200"}`}),o.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[o.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 ${qe?"bg-blue-600 text-white shadow-md shadow-blue-600/30 scale-110":Ue?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:Ue?o.jsx(ya,{className:"w-5 h-5"}):ye+1}),o.jsx("span",{className:`text-xs font-medium hidden sm:block transition-colors ${qe?"text-blue-700":Ue?"text-blue-600":"text-slate-400"}`,children:me.label})]})]},me.key)})}),k&&o.jsx("div",{className:"mb-8 animate-scale-in",children:k.startsWith("")?o.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(nN,{className:"w-8 h-8 text-emerald-600"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Confirmed!"}),o.jsx("p",{className:"text-slate-600 mb-4",children:"You're all set. We'll send a confirmation to your email."}),ie&&o.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[o.jsx(Xi,{className:"w-4 h-4"}),"Recurring Series Created"]}),o.jsxs("p",{className:"text-sm text-slate-700",children:[ie.created," appointment",ie.created!==1?"s":""," booked"]}),ie.skipped>0&&o.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",ie.skipped," date",ie.skipped!==1?"s":""," skipped due to conflicts"]})]}),he&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),o.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:he})]}),he&&o.jsxs("div",{className:"mb-4",children:[o.jsxs(et,{to:`/shop/${s}/booking/${he}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[o.jsx(pp,{className:"w-4 h-4"}),"Manage Your Booking"]}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-lg text-sm text-emerald-700 font-medium",children:[o.jsx(pp,{className:"w-4 h-4"}),"Add to your calendar to remember"]})]}):k.startsWith("")?o.jsxs("div",{className:"bg-white rounded-2xl border border-amber-200 shadow-lg shadow-amber-100/50 p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ss,{className:"w-8 h-8 text-amber-600"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Request Submitted!"}),o.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking request has been submitted! The shop will review and confirm it shortly."}),ie&&o.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[o.jsx(Xi,{className:"w-4 h-4"}),"Recurring Series Created"]}),o.jsxs("p",{className:"text-sm text-slate-700",children:[ie.created," appointment",ie.created!==1?"s":""," submitted"]}),ie.skipped>0&&o.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",ie.skipped," date",ie.skipped!==1?"s":""," skipped due to conflicts"]})]}),he&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),o.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:he})]}),he&&o.jsxs("div",{className:"mb-4",children:[o.jsxs(et,{to:`/shop/${s}/booking/${he}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[o.jsx(pp,{className:"w-4 h-4"}),"Manage Your Booking"]}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700 font-medium",children:[o.jsx(ss,{className:"w-4 h-4"}),"You'll be notified once it's confirmed"]})]}):o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Something went wrong. Please try again."})]})}),we==="services"&&o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a Service"}),o.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select the service you'd like to book"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 stagger-children",children:x.map((me,ye)=>o.jsxs("button",{onClick:()=>gn(me),className:`group text-left bg-white border-l-4 ${ft[ye%ft.length]} border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors pr-2",children:me.name}),o.jsx("span",{className:"text-xl font-extrabold text-blue-600 whitespace-nowrap",children:at(me.price)})]}),me.description&&o.jsx("p",{className:"text-sm text-slate-500 mb-3 line-clamp-2 leading-relaxed",children:me.description}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-400",children:[o.jsx(ss,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:ut(me.duration)})]}),o.jsx("span",{className:"text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]})]},me.id))})]}),we==="staff"&&o.jsxs("div",{className:"animate-fade-in",children:[Ie&&C&&o.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[o.jsxs("button",{onClick:as,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[o.jsx(Za,{className:"w-3.5 h-3.5"}),"Back"]}),o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[o.jsx(Sa,{className:"w-3.5 h-3.5 text-blue-500"}),o.jsx("span",{className:"font-semibold text-slate-800",children:C.name}),o.jsx("span",{className:"text-blue-600 font-bold",children:at(C.price)})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose Your Stylist"}),o.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select your preferred professional"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 stagger-children",children:[o.jsxs("button",{onClick:()=>sn("any"),className:"group text-left bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[o.jsxs("div",{className:"flex items-center gap-3.5 mb-3",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(es,{className:"w-5 h-5 text-slate-500"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:"Any Available"}),o.jsx("p",{className:"text-xs text-slate-500",children:"First available professional"})]})]}),o.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),w.map(me=>{const ye=me.portfolio||[];return o.jsxs("div",{className:"group bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[o.jsxs("button",{onClick:()=>sn(me),className:"w-full text-left",children:[o.jsxs("div",{className:"flex items-center gap-3.5 mb-2",children:[o.jsx(kc,{name:me.name}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:me.name}),me.role&&o.jsx("p",{className:"text-xs text-slate-500",children:me.role})]})]}),me.bio&&o.jsx("p",{className:"text-xs text-slate-500 leading-relaxed mb-2 line-clamp-2",children:me.bio}),ye.length>0&&o.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[ye.slice(0,3).map((qe,Ue)=>o.jsx("img",{src:qe.url,alt:qe.caption||"Work",className:"w-10 h-10 rounded-md object-cover border border-slate-200"},Ue)),ye.length>3&&o.jsxs("span",{className:"w-10 h-10 rounded-md bg-slate-100 border border-slate-200 flex items-center justify-center text-xs text-slate-500 font-semibold",children:["+",ye.length-3]})]}),o.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),ye.length>0&&o.jsxs("button",{onClick:qe=>{qe.stopPropagation(),se(me)},className:"mt-2 w-full flex items-center justify-center gap-1.5 py-1.5 text-xs font-semibold text-violet-600 hover:text-violet-700 hover:bg-violet-50 rounded-lg transition-all",children:[o.jsx(Image,{className:"w-3.5 h-3.5"}),"View Portfolio (",ye.length,")"]})]},me.id)})]})]}),we==="calendar"&&o.jsxs("div",{className:"animate-fade-in",children:[(Ie||$e)&&o.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[o.jsxs("button",{onClick:zn,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[o.jsx(Za,{className:"w-3.5 h-3.5"}),"Back"]}),C&&o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[o.jsx(Sa,{className:"w-3.5 h-3.5 text-blue-500"}),o.jsx("span",{className:"font-semibold text-slate-800",children:C.name}),o.jsx("span",{className:"text-blue-600 font-bold",children:at(C.price)}),o.jsxs("span",{className:"text-slate-400",children:[" ",ut(C.duration)]})]}),z&&z!=="any"&&o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[o.jsx(kc,{name:z.name,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),o.jsx("span",{className:"font-semibold text-slate-800",children:z.name})]}),z==="any"&&o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[o.jsx(es,{className:"w-3.5 h-3.5 text-slate-500"}),o.jsx("span",{className:"font-semibold text-slate-700",children:"Any Available"})]})]}),F.length===0?o.jsx("div",{children:Ce?o.jsx("div",{className:"max-w-lg mx-auto",children:o.jsx(V_,{shopId:i,slug:s,selectedService:C,selectedStaff:z,staffMembers:w,preferredDate:null,onCancel:()=>Le(!1)})}):o.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(Ht,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),o.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:C?`No time slots available for ${C.name} (${ut(C.duration)}). Join the waitlist to be notified when a slot opens up!`:"Check back soon for new availability, or join the waitlist!"}),o.jsxs("button",{onClick:()=>Le(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:[o.jsx(Th,{className:"w-4 h-4"}),"Join Waitlist"]})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Select a Date"}),o.jsx("p",{className:"text-slate-500 text-sm",children:"Pick a day that works for you"})]}),o.jsx("div",{className:"mb-8",children:o.jsx(rN,{availableDates:F,selectedDate:R,onSelectDate:V})}),R&&o.jsxs("div",{className:"animate-slide-down",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",Ye(R)]}),o.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[te.length," slot",te.length!==1?"s":""]})]}),te.length===0?o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[o.jsx("p",{className:"text-slate-500 mb-4",children:"No times available for this date"}),Ce?o.jsx("div",{className:"mt-4 text-left",children:o.jsx(V_,{shopId:i,slug:s,selectedService:C,selectedStaff:z,staffMembers:w,preferredDate:R,onCancel:()=>Le(!1)})}):o.jsxs("button",{onClick:()=>Le(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[o.jsx(Th,{className:"w-4 h-4"}),"Join the Waitlist"]})]}):o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:te.sort((me,ye)=>me.time.localeCompare(ye.time)).map(me=>o.jsxs("button",{onClick:()=>vt(me),className:"group bg-white border border-slate-200 hover:border-blue-400 rounded-xl p-4 transition-all duration-200 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-700 transition-colors mb-1",children:Pt(me.time)}),me.staffName&&z==="any"&&o.jsxs("div",{className:"text-xs text-violet-600 mb-0.5 flex items-center justify-center gap-1",children:[o.jsx(es,{className:"w-3 h-3"}),me.staffName]}),o.jsx("div",{className:"text-xs text-slate-400",children:C?ut(C.duration):`${me.duration} min`})]},me.id))})]}),!R&&o.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]}),we==="form"&&o.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Complete Your Booking"}),o.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Review your details and confirm"}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[C&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(Sa,{className:"w-4 h-4 text-blue-600"})}),o.jsx("span",{className:"font-semibold text-slate-800",children:C.name})]}),o.jsx("span",{className:"font-bold text-blue-600",children:at(C.price)})]}),z&&z!=="any"&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx(kc,{name:z.name,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-slate-800",children:z.name}),z.role&&o.jsxs("span",{className:"text-slate-400 text-sm ml-1.5",children:[" ",z.role]})]})]}),z==="any"&&S?.staffName&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx(kc,{name:S.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),o.jsx("span",{className:"font-semibold text-slate-800",children:S.staffName})]}),o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(Ht,{className:"w-4 h-4 text-slate-600"})}),o.jsxs("span",{className:"font-semibold text-slate-800",children:[Ye(S.date)," at ",Pt(S.time)]})]}),o.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(ss,{className:"w-4 h-4 text-slate-500"})}),o.jsx("span",{children:C?ut(C.duration):`${S.duration} min`})]})]}),o.jsxs("form",{onSubmit:ke,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),o.jsx("input",{type:"text",value:ne.name,onChange:me=>M({...ne,name:me.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),o.jsx("input",{type:"email",value:ne.email,onChange:me=>M({...ne,email:me.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),o.jsx("input",{type:"tel",value:ne.phone,onChange:me=>M({...ne,phone:me.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(Xi,{className:"w-4 h-4 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Make this recurring"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Book the same slot on a regular schedule"})]})]}),o.jsx("button",{type:"button",onClick:()=>ge(!ce),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${ce?"bg-blue-500":"bg-slate-300"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${ce?"translate-x-6":"translate-x-1"}`})})]}),ce&&o.jsxs("div",{className:"space-y-3 pt-1 animate-fade-in",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Repeat every"}),o.jsxs("select",{value:xe,onChange:me=>je(me.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[o.jsx("option",{value:"weekly",children:"Week"}),o.jsx("option",{value:"biweekly",children:"2 Weeks"}),o.jsx("option",{value:"fourweekly",children:"4 Weeks"}),o.jsx("option",{value:"monthly",children:"Month"})]})]}),pt&&o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[o.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[" Every ",pt.intervalLabel," through ",pt.endDate]}),o.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[pt.total," total appointment",pt.total!==1?"s":""]}),pt.skipped>0&&o.jsxs("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:[" ",pt.skipped," date",pt.skipped!==1?"s":""," will be skipped due to existing bookings"]})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{type:"submit",disabled:I,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:I?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Booking"]}):o.jsxs(o.Fragment,{children:[o.jsx(ya,{className:"w-4 h-4"}),"Confirm Booking"]})}),o.jsx("button",{type:"button",onClick:()=>{le(!1),A(null)},className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})]}),P&&o.jsx(D6,{member:P,onClose:()=>se(null)}),o.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:o.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",o.jsx(et,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function O6({slotsByDate:s,bookingsByDate:e,selectedDate:n,onSelectDate:i,recurringDayFlags:l={}}){const[u,h]=j.useState(new Date),p=fe=>{const pe=fe.getFullYear(),le=fe.getMonth(),S=new Date(pe,le,1),R=new Date(pe,le+1,0).getDate(),V=S.getDay();return{daysInMonth:R,startingDayOfWeek:V,year:pe,month:le}},{daysInMonth:g,startingDayOfWeek:x,year:b,month:w}=p(u),N=()=>{h(new Date(u.getFullYear(),u.getMonth()-1))},C=()=>{h(new Date(u.getFullYear(),u.getMonth()+1))},G=fe=>`${b}-${String(w+1).padStart(2,"0")}-${String(fe).padStart(2,"0")}`,z=fe=>{const pe=G(fe),le=s[pe]||[],S=e[pe]||[],A=le.filter(V=>V.available).length,R=S.length;return{availableCount:A,bookedCount:R,hasData:le.length>0||S.length>0}},O=fe=>{const pe=G(fe);i(pe===n?null:pe)},L=["January","February","March","April","May","June","July","August","September","October","November","December"],H=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],K=new Date;return K.setHours(0,0,0,0),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-5",children:[o.jsx("button",{onClick:N,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(ZE,{className:"w-5 h-5 text-slate-600"})}),o.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[L[w]," ",b]}),o.jsx("button",{onClick:C,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(eN,{className:"w-5 h-5 text-slate-600"})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:H.map(fe=>o.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:fe},fe))}),o.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:x}).map((fe,pe)=>o.jsx("div",{},`empty-${pe}`)),Array.from({length:g}).map((fe,pe)=>{const le=pe+1,S=G(le),{availableCount:A,bookedCount:R,hasData:V}=z(le),k=S===n,U=new Date,I=U.getDate()===le&&U.getMonth()===w&&U.getFullYear()===b,q=new Date(b,w,le),ne=q.getDay(),M=l[ne]&&q>=K;return o.jsxs("button",{onClick:()=>O(le),className:`
                relative p-2 text-center rounded-lg text-sm font-semibold transition-all duration-200 min-h-[56px] flex flex-col items-center justify-start cursor-pointer
                ${k?"bg-blue-600 text-white shadow-md shadow-blue-600/30":V||M?"bg-slate-50 hover:bg-slate-100 text-slate-900 border border-slate-200 hover:border-slate-300":I?"text-slate-900 font-bold hover:bg-slate-50":"text-slate-400 hover:bg-slate-50"}
              `,children:[o.jsxs("span",{className:`text-sm ${I&&!k?"relative":""}`,children:[le,I&&!k&&o.jsx("span",{className:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]}),(V||M)&&o.jsxs("div",{className:"flex gap-0.5 mt-1 flex-wrap justify-center",children:[M&&o.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${k?"bg-white/20 text-white":"bg-violet-100 text-violet-700"}`,children:"R"}),A>0&&o.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${k?"bg-white/20 text-white":"bg-emerald-100 text-emerald-700"}`,children:A}),R>0&&o.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${k?"bg-white/20 text-white":"bg-blue-100 text-blue-700"}`,children:R})]})]},le)})]}),o.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-slate-500",children:[Object.keys(l).length>0&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 bg-violet-100 border border-violet-200 rounded flex items-center justify-center text-[7px] font-bold text-violet-700",children:"R"}),o.jsx("span",{children:"Recurring"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 bg-emerald-100 border border-emerald-200 rounded"}),o.jsx("span",{children:"Available"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 bg-blue-100 border border-blue-200 rounded"}),o.jsx("span",{children:"Booked"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 bg-blue-600 rounded"}),o.jsx("span",{children:"Selected"})]})]})]})}const V6=[{value:15,label:"15 min"},{value:30,label:"30 min"},{value:45,label:"45 min"},{value:60,label:"1 hour"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}];function P6({shopId:s}){const[e,n]=j.useState([]),[i,l]=j.useState(!1),[u,h]=j.useState(null),[p,g]=j.useState({name:"",description:"",duration:30,price:""}),[x,b]=j.useState(!1);j.useEffect(()=>{if(!s)return;const L=ns(mt(Ae,"shops",s,"services"),H=>{const K=H.docs.map(fe=>({id:fe.id,...fe.data()})).filter(fe=>fe.active!==!1).sort((fe,pe)=>(fe.name||"").localeCompare(pe.name||""));n(K)});return()=>L()},[s]);const w=()=>{g({name:"",description:"",duration:30,price:""}),l(!1),h(null)},N=async L=>{L.preventDefault(),b(!0);const H={name:p.name.trim(),description:p.description.trim(),duration:parseInt(p.duration),price:parseFloat(p.price),active:!0};try{u?await Tt(bt(Ae,"shops",s,"services",u),H):await Xr(mt(Ae,"shops",s,"services"),{...H,createdAt:Zg()}),w()}catch(K){console.error("Error saving service:",K)}finally{b(!1)}},C=L=>{g({name:L.name,description:L.description||"",duration:L.duration,price:L.price.toString()}),h(L.id),l(!0)},G=async L=>{try{await Tt(bt(Ae,"shops",s,"services",L),{active:!1})}catch(H){console.error("Error deleting service:",H)}},z=L=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(L),O=L=>{if(L<60)return`${L} min`;const H=Math.floor(L/60),K=L%60;return K?`${H}h ${K}m`:`${H}h`};return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Services"}),o.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Define the services you offer  clients will pick one before booking"})]}),!i&&o.jsxs("button",{onClick:()=>{w(),l(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[o.jsx(Sh,{className:"w-4 h-4"}),"Add Service"]})]}),i&&o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Service":"New Service"}),o.jsxs("form",{onSubmit:N,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Service Name *"}),o.jsx("input",{type:"text",value:p.name,onChange:L=>g({...p,name:L.target.value}),required:!0,placeholder:"e.g. Haircut",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description (optional)"}),o.jsx("input",{type:"text",value:p.description,onChange:L=>g({...p,description:L.target.value}),placeholder:"e.g. Classic cut and style",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Duration *"}),o.jsx("select",{value:p.duration,onChange:L=>g({...p,duration:L.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:V6.map(L=>o.jsx("option",{value:L.value,children:L.label},L.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Price (USD) *"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-semibold",children:"$"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:p.price,onChange:L=>g({...p,price:L.target.value}),required:!0,placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsxs("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[o.jsx(zc,{className:"w-4 h-4"}),x?"Saving":u?"Update Service":"Add Service"]}),o.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[o.jsx(mo,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"text-5xl mb-3",children:""}),o.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No services yet"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Add your first service so clients can choose what to book"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(L=>o.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:L.name}),L.description&&o.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:L.description})]}),o.jsx("span",{className:"text-xl font-bold text-blue-600 whitespace-nowrap ml-3",children:z(L.price)})]}),o.jsx("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:o.jsxs("span",{className:"flex items-center gap-1.5",children:[o.jsx(ss,{className:"w-4 h-4"}),O(L.duration)]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>C(L),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:[o.jsx(sN,{className:"w-3.5 h-3.5"}),"Edit"]}),o.jsx("button",{onClick:()=>G(L.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:o.jsx(Zc,{className:"w-3.5 h-3.5"})})]})]},L.id))})]})}const xp=[{key:"monday",label:"Monday",short:"Mon"},{key:"tuesday",label:"Tuesday",short:"Tue"},{key:"wednesday",label:"Wednesday",short:"Wed"},{key:"thursday",label:"Thursday",short:"Thu"},{key:"friday",label:"Friday",short:"Fri"},{key:"saturday",label:"Saturday",short:"Sat"},{key:"sunday",label:"Sunday",short:"Sun"}],L6={enabled:!1,start:"09:00",end:"17:00",break:null};function U6({shopId:s,staffId:e,staffName:n,weeklyHours:i,onClose:l}){const[u,h]=j.useState(()=>{const O={};for(const L of xp){const H=i?.[L.key];H?O[L.key]={enabled:!!H.enabled,start:H.start||"09:00",end:H.end||"17:00",break:H.break?{start:H.break.start,end:H.break.end}:null}:O[L.key]={...L6}}return O}),[p,g]=j.useState(!1),[x,b]=j.useState(null),w=(O,L,H)=>{h(K=>({...K,[O]:{...K[O],[L]:H}}))},N=O=>{h(L=>({...L,[O]:{...L[O],break:L[O].break?null:{start:"12:00",end:"13:00"}}}))},C=(O,L,H)=>{h(K=>({...K,[O]:{...K[O],break:{...K[O].break,[L]:H}}}))},G=O=>{const L=u[O];h(H=>{const K={...H};for(const fe of xp)fe.key!==O&&(K[fe.key]={enabled:L.enabled,start:L.start,end:L.end,break:L.break?{...L.break}:null});return K}),b(O),setTimeout(()=>b(null),1500)},z=async()=>{g(!0);try{await Tt(bt(Ae,"shops",s,"staff",e),{weeklyHours:u}),l()}catch(O){console.error("Error saving weekly hours:",O)}finally{g(!1)}};return o.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Weekly Hours"}),o.jsx("p",{className:"text-sm text-slate-500",children:n})]}),o.jsx("button",{onClick:l,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(mo,{className:"w-5 h-5 text-slate-400"})})]}),o.jsx("div",{className:"space-y-3",children:xp.map(({key:O,label:L})=>{const H=u[O];return o.jsx("div",{className:`rounded-xl p-4 transition-all ${H.enabled?"bg-blue-50 border border-blue-200":"bg-slate-50 border border-slate-200"}`,children:o.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-[140px]",children:[o.jsx("button",{type:"button",onClick:()=>w(O,"enabled",!H.enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${H.enabled?"bg-blue-500":"bg-slate-300"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${H.enabled?"translate-x-6":"translate-x-1"}`})}),o.jsx("span",{className:`font-semibold text-sm ${H.enabled?"text-slate-900":"text-slate-400"}`,children:L})]}),H.enabled?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ss,{className:"w-4 h-4 text-blue-500"}),o.jsx("input",{type:"time",value:H.start,onChange:K=>w(O,"start",K.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("span",{className:"text-slate-400 text-sm",children:"to"}),o.jsx("input",{type:"time",value:H.end,onChange:K=>w(O,"end",K.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{type:"button",onClick:()=>N(O),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${H.break?"bg-amber-100 text-amber-700 border border-amber-200":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,children:[o.jsx(VD,{className:"w-3.5 h-3.5"}),H.break?"Break":"+ Break"]}),H.break&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("input",{type:"time",value:H.break.start,onChange:K=>C(O,"start",K.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"}),o.jsx("span",{className:"text-slate-400 text-xs",children:""}),o.jsx("input",{type:"time",value:H.break.end,onChange:K=>C(O,"end",K.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"})]})]}),o.jsx("button",{type:"button",onClick:()=>G(O),className:"text-xs text-blue-500 hover:text-blue-700 font-medium transition-colors whitespace-nowrap",children:x===O?" Copied!":"Copy to all"})]}):o.jsx("span",{className:"text-sm text-slate-400 italic",children:"Day off"})]})},O)})}),o.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-200",children:[o.jsxs("button",{onClick:z,disabled:p,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[o.jsx(l6,{className:"w-4 h-4"}),p?"Saving":"Save Hours"]}),o.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[o.jsx(mo,{className:"w-4 h-4"}),"Cancel"]})]})]})}const B6=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}],z6=5*1024*1024,q6=["image/jpeg","image/png","image/webp"];function L_(s){if(!s)return"";const[e,n]=s.split(":").map(Number),i=e>=12?"p":"a",l=e%12||12;return n===0?`${l}${i}`:`${l}:${n.toString().padStart(2,"0")}${i}`}function F6({shopId:s}){const[e,n]=j.useState([]),[i,l]=j.useState(!1),[u,h]=j.useState(null),[p,g]=j.useState(null),[x,b]=j.useState(null),[w,N]=j.useState({name:"",role:""}),[C,G]=j.useState(!1),[z,O]=j.useState(null),[L,H]=j.useState(""),[K,fe]=j.useState(!1),[pe,le]=j.useState(!1),[S,A]=j.useState(""),[R,V]=j.useState(null),[k,U]=j.useState(null),[I,q]=j.useState(null),ne=j.useRef(null);j.useEffect(()=>{if(!s)return;const ie=ns(mt(Ae,"shops",s,"staff"),Ve=>{const Ie=Ve.docs.map($e=>({id:$e.id,...$e.data()})).filter($e=>$e.active!==!1).sort(($e,tt)=>($e.name||"").localeCompare(tt.name||""));n(Ie)});return()=>ie()},[s]);const M=()=>{N({name:"",role:""}),l(!1),h(null)},he=async ie=>{ie.preventDefault(),G(!0);const Ve={name:w.name.trim(),role:w.role.trim(),active:!0};try{u?await Tt(bt(Ae,"shops",s,"staff",u),Ve):await Xr(mt(Ae,"shops",s,"staff"),{...Ve,email:"",bio:"",portfolio:[],createdAt:Zg()}),M()}catch(Ie){console.error("Error saving staff member:",Ie)}finally{G(!1)}},ve=ie=>{N({name:ie.name,role:ie.role||""}),h(ie.id),l(!0)},Ce=async ie=>{try{await Tt(bt(Ae,"shops",s,"staff",ie),{active:!1})}catch(Ve){console.error("Error deleting staff member:",Ve)}},Le=ie=>{O(ie.id),H(ie.bio||"")},P=async ie=>{fe(!0);try{await Tt(bt(Ae,"shops",s,"staff",ie),{bio:L.trim()}),O(null),H("")}catch(Ve){console.error("Error saving bio:",Ve)}finally{fe(!1)}},se=ie=>{V(ie),A(""),U(null),setTimeout(()=>{ne.current&&(ne.current.value="",ne.current.click())},50)},ce=ie=>{const Ve=ie.target.files?.[0];if(Ve){if(!q6.includes(Ve.type)){alert("Please select a JPG, PNG, or WebP image.");return}if(Ve.size>z6){alert("File size must be under 5MB.");return}U(Ve)}},ge=async ie=>{if(k){le(!0);try{const Ve=Date.now(),Ie=k.name.split(".").pop(),$e=`${Ve}.${Ie}`,tt=`shops/${s}/staff/${ie}/portfolio/${$e}`,Yt=A_(j_,tt);await tD(Yt,k);const It=await nD(Yt),gn=e.find(sn=>sn.id===ie)?.portfolio||[];await Tt(bt(Ae,"shops",s,"staff",ie),{portfolio:[...gn,{url:It,storagePath:tt,caption:S.trim(),uploadedAt:new Date().toISOString()}]}),V(null),A(""),U(null)}catch(Ve){console.error("Error uploading photo:",Ve),alert("Upload failed. Please try again.")}finally{le(!1)}}},xe=async(ie,Ve)=>{const Ie=e.find(tt=>tt.id===ie);if(!Ie)return;const $e=Ie.portfolio[Ve];if($e){q(`${ie}-${Ve}`);try{if($e.storagePath)try{const Yt=A_(j_,$e.storagePath);await sD(Yt)}catch(Yt){console.warn("Storage delete warning:",Yt)}const tt=Ie.portfolio.filter((Yt,It)=>It!==Ve);await Tt(bt(Ae,"shops",s,"staff",ie),{portfolio:tt})}catch(tt){console.error("Error deleting photo:",tt),alert("Failed to delete photo.")}finally{q(null)}}},je=ie=>{if(!ie)return null;const Ve=B6.filter(Ie=>ie[Ie.key]?.enabled);return Ve.length===0?null:Ve.map(Ie=>{const $e=ie[Ie.key];return`${Ie.short} ${L_($e.start)}${L_($e.end)}`})};return o.jsxs("div",{children:[o.jsx("input",{ref:ne,type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:ce}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Staff"}),o.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Manage your team  assign availability and bookings per staff member"})]}),!i&&o.jsxs("button",{onClick:()=>{M(),l(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[o.jsx(Sh,{className:"w-4 h-4"}),"Add Staff"]})]}),i&&o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Staff Member":"New Staff Member"}),o.jsxs("form",{onSubmit:he,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name *"}),o.jsx("input",{type:"text",value:w.name,onChange:ie=>N({...w,name:ie.target.value}),required:!0,placeholder:"e.g. Jane Smith",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Role (optional)"}),o.jsx("input",{type:"text",value:w.role,onChange:ie=>N({...w,role:ie.target.value}),placeholder:"e.g. Senior Stylist",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsxs("button",{type:"submit",disabled:C,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[o.jsx(zc,{className:"w-4 h-4"}),C?"Saving":u?"Update Staff":"Add Staff"]}),o.jsxs("button",{type:"button",onClick:M,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[o.jsx(mo,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"text-5xl mb-3",children:""}),o.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No staff members yet"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Add your team members to assign them availability and bookings"})]}):o.jsx("div",{className:"space-y-4",children:e.map(ie=>{const Ve=je(ie.weeklyHours),Ie=ie.portfolio||[];return o.jsxs("div",{children:[o.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:ie.name}),ie.role&&o.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:ie.role})]}),o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(es,{className:"w-5 h-5 text-blue-600"})})]}),o.jsx("div",{className:"mb-3",children:z===ie.id?o.jsxs("div",{className:"space-y-2",children:[o.jsx("textarea",{value:L,onChange:$e=>H($e.target.value),placeholder:"Write a short bio  specialties, experience, personality",rows:3,maxLength:500,className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>P(ie.id),disabled:K,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[K?o.jsx(gp,{className:"w-3 h-3 animate-spin"}):o.jsx(zc,{className:"w-3 h-3"}),"Save Bio"]}),o.jsx("button",{onClick:()=>{O(null),H("")},className:"px-3 py-1.5 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"}),o.jsxs("span",{className:"text-xs text-slate-400 ml-auto",children:[L.length,"/500"]})]})]}):o.jsx("div",{onClick:()=>Le(ie),className:"cursor-pointer group",children:ie.bio?o.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed group-hover:text-slate-800 transition-colors",children:[ie.bio,o.jsx("span",{className:"ml-1.5 text-xs text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"edit"})]}):o.jsx("p",{className:"text-sm text-slate-400 italic group-hover:text-blue-500 transition-colors",children:"+ Add a bio"})})}),Ve?o.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5",children:Ve.map(($e,tt)=>o.jsx("span",{className:"inline-block px-2 py-0.5 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium",children:$e},tt))}):o.jsx("p",{className:"text-xs text-slate-400 mb-3 italic",children:"No weekly hours set"}),Ie.length>0&&x!==ie.id&&o.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[o.jsx("div",{className:"flex -space-x-1",children:Ie.slice(0,4).map(($e,tt)=>o.jsx("img",{src:$e.url,alt:$e.caption||"Portfolio",className:"w-10 h-10 rounded-lg object-cover border-2 border-white shadow-sm"},tt))}),o.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[Ie.length," photo",Ie.length!==1?"s":""]})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsxs("button",{onClick:()=>g(p===ie.id?null:ie.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${p===ie.id?"bg-blue-100 text-blue-700 border-blue-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[o.jsx(ss,{className:"w-3.5 h-3.5"}),"Set Hours"]}),o.jsxs("button",{onClick:()=>b(x===ie.id?null:ie.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${x===ie.id?"bg-violet-100 text-violet-700 border-violet-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[o.jsx(TD,{className:"w-3.5 h-3.5"}),"Portfolio"]}),o.jsx("button",{onClick:()=>ve(ie),className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:o.jsx(sN,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>Ce(ie.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:o.jsx(Zc,{className:"w-3.5 h-3.5"})})]})]}),p===ie.id&&o.jsx("div",{className:"mt-2",children:o.jsx(U6,{shopId:s,staffId:ie.id,staffName:ie.name,weeklyHours:ie.weeklyHours,onClose:()=>g(null)})}),x===ie.id&&o.jsxs("div",{className:"mt-2 bg-white border-2 border-violet-200 rounded-xl p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h4",{className:"text-sm font-bold text-slate-800 flex items-center gap-2",children:[o.jsx(HD,{className:"w-4 h-4 text-violet-600"}),"Portfolio  ",ie.name]}),o.jsxs("button",{onClick:()=>se(ie.id),disabled:pe,className:"flex items-center gap-1.5 px-3 py-1.5 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[o.jsx(Sh,{className:"w-3 h-3"}),"Add Photo"]})]}),R===ie.id&&k&&o.jsxs("div",{className:"mb-4 p-3 bg-violet-50 border border-violet-200 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-16 h-16 rounded-lg bg-slate-200 overflow-hidden flex-shrink-0",children:o.jsx("img",{src:URL.createObjectURL(k),alt:"Preview",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-xs text-slate-600 font-medium mb-1 truncate",children:k.name}),o.jsxs("p",{className:"text-xs text-slate-400",children:[(k.size/1024/1024).toFixed(1)," MB"]})]})]}),o.jsx("input",{type:"text",value:S,onChange:$e=>A($e.target.value),placeholder:"Add a caption (optional)",maxLength:200,className:"w-full px-3 py-2 text-sm border border-violet-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-400 focus:border-transparent mb-2"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>ge(ie.id),disabled:pe,className:"flex items-center gap-1.5 px-4 py-2 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:pe?o.jsxs(o.Fragment,{children:[o.jsx(gp,{className:"w-3 h-3 animate-spin"}),"Uploading"]}):o.jsxs(o.Fragment,{children:[o.jsx(zc,{className:"w-3 h-3"}),"Upload"]})}),o.jsx("button",{onClick:()=>{V(null),U(null),A("")},className:"px-3 py-2 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}),Ie.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet. Add some to showcase work!"})]}):o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:Ie.map(($e,tt)=>o.jsxs("div",{className:"group relative bg-slate-50 rounded-lg overflow-hidden border border-slate-200 shadow-sm",children:[o.jsx("div",{className:"aspect-square",children:o.jsx("img",{src:$e.url,alt:$e.caption||"Portfolio photo",className:"w-full h-full object-cover"})}),$e.caption&&o.jsx("div",{className:"px-2 py-1.5",children:o.jsx("p",{className:"text-xs text-slate-600 truncate",children:$e.caption})}),o.jsx("button",{onClick:()=>xe(ie.id,tt),disabled:I===`${ie.id}-${tt}`,className:"absolute top-1.5 right-1.5 w-7 h-7 bg-red-500/90 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-md disabled:opacity-50",title:"Delete photo",children:I===`${ie.id}-${tt}`?o.jsx(gp,{className:"w-3.5 h-3.5 animate-spin"}):o.jsx(Zc,{className:"w-3.5 h-3.5"})})]},tt))})]})]},ie.id)})})]})}function Vr(s){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function H6(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Pr(s){return`$${Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function U_(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}function B_(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{weekday:"short"})}function yp(s,e){return e===0&&s===0?0:e===0?100:(s-e)/e*100}function $6({bookings:s}){const[e,n]=j.useState(null),[i,l]=j.useState(null),u=j.useMemo(()=>s.filter(q=>q.status==="confirmed"||q.status==="pending"||!q.status),[s]),h=j.useMemo(()=>{const q=new Date;return q.setHours(0,0,0,0),q},[]),p=j.useMemo(()=>Vr(h),[h]),g=j.useMemo(()=>H6(h),[h]),x=j.useMemo(()=>{const q=new Date(g);return q.setDate(q.getDate()+6),q},[g]),b=j.useMemo(()=>{const q=new Date(g);return q.setDate(q.getDate()-7),q},[g]),w=j.useMemo(()=>{const q=new Date(b);return q.setDate(q.getDate()+6),q},[b]),N=j.useMemo(()=>new Date(h.getFullYear(),h.getMonth(),1),[h]),C=j.useMemo(()=>new Date(h.getFullYear(),h.getMonth()-1,1),[h]),G=j.useMemo(()=>{const q=new Date(N);return q.setDate(q.getDate()-1),q},[N]),z=j.useMemo(()=>{const q=new Date(h);return q.setDate(q.getDate()-1),Vr(q)},[h]),O=j.useMemo(()=>{const q=ce=>ce.reduce((ge,xe)=>ge+(Number(xe.servicePrice)||0),0),ne=(ce,ge,xe)=>ce.date>=Vr(ge)&&ce.date<=Vr(xe),M=q(u.filter(ce=>ce.date===p)),he=q(u.filter(ce=>ce.date===z)),ve=q(u.filter(ce=>ne(ce,g,x))),Ce=q(u.filter(ce=>ne(ce,b,w))),Le=q(u.filter(ce=>ne(ce,N,h))),P=q(u.filter(ce=>ne(ce,C,G))),se=q(u);return{today:M,todayChange:yp(M,he),week:ve,weekChange:yp(ve,Ce),month:Le,monthChange:yp(Le,P),allTime:se}},[u,p,z,g,x,b,w,N,G,h]),L=j.useMemo(()=>{const q=[];for(let ne=13;ne>=0;ne--){const M=new Date(h);M.setDate(M.getDate()-ne),q.push(Vr(M))}return q},[h]),H=j.useMemo(()=>{const q={};return L.forEach(ne=>{q[ne]=0}),u.forEach(ne=>{q[ne.date]!==void 0&&(q[ne.date]+=Number(ne.servicePrice)||0)}),L.map(ne=>({date:ne,value:q[ne]}))},[u,L]),K=j.useMemo(()=>Math.max(...H.map(q=>q.value),1),[H]),fe=j.useMemo(()=>{const q={},ne={};return L.forEach(M=>{q[M]=0,ne[M]=0}),s.forEach(M=>{q[M.date]!==void 0&&(M.status==="cancelled"||M.status==="rejected"?ne[M.date]++:q[M.date]++)}),L.map(M=>({date:M,confirmed:q[M],cancelled:ne[M],total:q[M]+ne[M]}))},[s,L]),pe=j.useMemo(()=>Math.max(...fe.map(q=>q.total),1),[fe]),le=j.useMemo(()=>{const q=s.length;if(q===0)return 100;const ne=s.filter(M=>M.status==="cancelled"||M.status==="rejected").length;return Math.round((q-ne)/q*100)},[s]),S=j.useMemo(()=>{const q=Array.from({length:7},()=>Array(24).fill(0));u.forEach(M=>{if(!M.date||!M.time)return;const ve=new Date(M.date+"T12:00:00").getDay(),Ce=parseInt(M.time.split(":")[0],10);!isNaN(ve)&&!isNaN(Ce)&&q[ve][Ce]++});let ne=0;return q.forEach(M=>M.forEach(he=>{he>ne&&(ne=he)})),{grid:q,max:ne}},[u]),A=j.useMemo(()=>{const q={};return u.forEach(ne=>{const M=ne.serviceName||"Unknown";q[M]||(q[M]={name:M,count:0,revenue:0}),q[M].count++,q[M].revenue+=Number(ne.servicePrice)||0}),Object.values(q).map(ne=>({...ne,avgRevenue:ne.count>0?ne.revenue/ne.count:0})).sort((ne,M)=>M.revenue-ne.revenue)},[u]),R=j.useMemo(()=>{const q={};return u.forEach(ne=>{const M=ne.staffName||"Unassigned";q[M]||(q[M]={name:M,count:0,revenue:0,clients:new Set}),q[M].count++,q[M].revenue+=Number(ne.servicePrice)||0,ne.clientEmail&&q[M].clients.add(ne.clientEmail.toLowerCase())}),Object.values(q).map(ne=>({...ne,clientCount:ne.clients.size})).sort((ne,M)=>M.revenue-ne.revenue)},[u]),V=j.useMemo(()=>{const q=u.map(xe=>xe.clientEmail?.toLowerCase()).filter(Boolean),ne=new Set(q).size,M=u.filter(xe=>xe.date>=Vr(N)&&xe.date<=p),he=new Set(M.map(xe=>xe.clientEmail?.toLowerCase()).filter(Boolean)),ve=u.filter(xe=>xe.date<Vr(N)),Ce=new Set(ve.map(xe=>xe.clientEmail?.toLowerCase()).filter(Boolean));let Le=0,P=0;he.forEach(xe=>{Ce.has(xe)?P++:Le++});const se={};u.forEach(xe=>{const je=xe.clientEmail?.toLowerCase();je&&(se[je]||(se[je]={email:je,name:xe.clientName||je,count:0}),se[je].count++,xe.clientName&&(se[je].name=xe.clientName))});const ce=Object.values(se).sort((xe,je)=>je.count-xe.count).slice(0,10),ge=ne>0?u.length/ne:0;return{uniqueClients:ne,newThisMonth:Le,returningThisMonth:P,topClients:ce,avgBookingsPerClient:ge}},[u,N,p]),k=({value:q,suffix:ne="vs prev"})=>{if(q===0)return o.jsxs("span",{className:"flex items-center gap-0.5 text-xs font-medium text-slate-400",children:[o.jsx(ZD,{className:"w-3 h-3"})," 0% ",ne]});const M=q>0;return o.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-semibold ${M?"text-emerald-600":"text-red-500"}`,children:[M?o.jsx(bD,{className:"w-3 h-3"}):o.jsx(pD,{className:"w-3 h-3"}),M?"+":"",Math.round(q),"% ",ne]})},U=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I=Array.from({length:15},(q,ne)=>ne+7);return o.jsxs("div",{className:"animate-fade-in space-y-6",children:[o.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Today's Revenue",value:O.today,change:O.todayChange,suffix:"vs yesterday",icon:LD,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:O.week,change:O.weekChange,suffix:"vs last week",icon:iN,color:"bg-violet-100 text-violet-600"},{label:"This Month",value:O.month,change:O.monthChange,suffix:"vs last month",icon:Ht,color:"bg-emerald-100 text-emerald-600"},{label:"All-time Revenue",value:O.allTime,change:null,icon:JE,color:"bg-amber-100 text-amber-600"}].map(q=>{const ne=q.icon;return o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("div",{className:`w-10 h-10 ${q.color} rounded-xl flex items-center justify-center`,children:o.jsx(ne,{className:"w-5 h-5"})})}),o.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:Pr(q.value)}),o.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5 mb-1",children:q.label}),q.change!==null&&o.jsx(k,{value:q.change,suffix:q.suffix})]},q.label)})}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Revenue  Last 14 Days"}),o.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Daily revenue from confirmed & pending bookings"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"min-w-[600px]",children:[o.jsxs("div",{className:"flex items-end gap-0",children:[o.jsxs("div",{className:"flex flex-col justify-between h-48 pr-2 text-right flex-shrink-0 w-16",children:[o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Pr(K)}),o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Pr(K/2)}),o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"$0"})]}),o.jsx("div",{className:"flex-1 flex items-end gap-1 h-48 border-b border-l border-slate-200 pl-1 pb-0 relative",children:H.map((q,ne)=>{const M=K>0?q.value/K*100:0,he=e===ne;return o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative group",onMouseEnter:()=>n(ne),onMouseLeave:()=>n(null),onTouchStart:()=>n(ne),children:[he&&o.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[Pr(q.value),o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),o.jsx("div",{className:"w-full rounded-t-md transition-all duration-200 cursor-pointer",style:{height:`${Math.max(M,q.value>0?2:0)}%`,background:he?"linear-gradient(to top, #2563eb, #60a5fa)":"linear-gradient(to top, #3b82f6, #93c5fd)",minHeight:q.value>0?"4px":"0px"}})]},q.date)})})]}),o.jsx("div",{className:"flex ml-16 pl-1",children:H.map(q=>o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:B_(q.date)}),o.jsx("div",{className:"text-[9px] text-slate-400",children:U_(q.date)})]},q.date))})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Booking Trends  Last 14 Days"}),o.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Daily bookings breakdown"})]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[o.jsxs("span",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-blue-500"})," Confirmed"]}),o.jsxs("span",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-red-400"})," Cancelled"]}),o.jsxs("span",{className:"px-2.5 py-1 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg font-semibold",children:[le,"% completion"]})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"min-w-[600px]",children:[o.jsxs("div",{className:"flex items-end gap-0",children:[o.jsxs("div",{className:"flex flex-col justify-between h-40 pr-2 text-right flex-shrink-0 w-16",children:[o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:pe}),o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Math.round(pe/2)}),o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"0"})]}),o.jsx("div",{className:"flex-1 flex items-end gap-1 h-40 border-b border-l border-slate-200 pl-1 relative",children:fe.map((q,ne)=>{const M=pe>0?q.confirmed/pe*100:0,he=pe>0?q.cancelled/pe*100:0,ve=i===ne;return o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative",onMouseEnter:()=>l(ne),onMouseLeave:()=>l(null),onTouchStart:()=>l(ne),children:[ve&&o.jsxs("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[q.confirmed," confirmed, ",q.cancelled," cancelled",o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),o.jsxs("div",{className:"w-full flex flex-col items-stretch",children:[q.cancelled>0&&o.jsx("div",{className:"w-full rounded-t-md bg-red-400 transition-all duration-200",style:{height:`${Math.max(he,2)}%`}}),q.confirmed>0&&o.jsx("div",{className:`w-full bg-blue-500 transition-all duration-200 ${q.cancelled===0?"rounded-t-md":""}`,style:{height:`${Math.max(M,2)}%`}})]})]},q.date)})})]}),o.jsx("div",{className:"flex ml-16 pl-1",children:fe.map(q=>o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:B_(q.date)}),o.jsx("div",{className:"text-[9px] text-slate-400",children:U_(q.date)})]},q.date))})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Busiest Times"}),o.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Booking density by day of week and hour"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"min-w-[600px]",children:[o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"w-12"}),I.map(q=>o.jsxs("th",{className:"text-[10px] text-slate-400 font-medium pb-2 text-center px-0.5",children:[q%12||12,q>=12?"p":"a"]},q))]})}),o.jsx("tbody",{children:[1,2,3,4,5,6,0].map(q=>o.jsxs("tr",{children:[o.jsx("td",{className:"text-[11px] text-slate-500 font-semibold pr-2 py-0.5 text-right",children:U[q]}),I.map(ne=>{const M=S.grid[q][ne],he=S.max||1,ve=M/he;let Ce="bg-slate-50";return M>0&&(ve<=.2?Ce="bg-blue-100":ve<=.4?Ce="bg-blue-200":ve<=.6?Ce="bg-blue-300":ve<=.8?Ce="bg-blue-500 text-white":Ce="bg-blue-700 text-white"),o.jsx("td",{className:"px-0.5 py-0.5",children:o.jsx("div",{className:`w-full aspect-square rounded-sm ${Ce} flex items-center justify-center text-[9px] font-bold transition-all hover:ring-2 hover:ring-blue-400 hover:ring-offset-1 cursor-default`,title:`${U[q]} ${ne}:00  ${M} booking${M!==1?"s":""}`,children:M>0?M:""})},ne)})]},q))})]}),o.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-3",children:[o.jsx("span",{className:"text-[10px] text-slate-400",children:"Less"}),["bg-slate-50","bg-blue-100","bg-blue-200","bg-blue-300","bg-blue-500","bg-blue-700"].map((q,ne)=>o.jsx("div",{className:`w-4 h-4 rounded-sm ${q} border border-slate-200`},ne)),o.jsx("span",{className:"text-[10px] text-slate-400",children:"More"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Top Services"}),o.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Ranked by revenue from confirmed & pending bookings"}),A.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Sa,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-400",children:"No service data yet"})]}):o.jsx("div",{className:"space-y-2",children:A.map((q,ne)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 font-bold text-sm flex-shrink-0",children:ne+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:q.name}),o.jsxs("div",{className:"text-xs text-slate-500",children:[q.count," booking",q.count!==1?"s":"","  avg ",Pr(q.avgRevenue)]})]}),o.jsx("div",{className:"text-sm font-bold text-blue-600 flex-shrink-0",children:Pr(q.revenue)})]},q.name))})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Staff Performance"}),o.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Bookings, revenue & clients per staff member"}),R.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(es,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-400",children:"No staff data yet"})]}):o.jsx("div",{className:"space-y-2",children:R.map((q,ne)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[o.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center text-violet-600 font-bold text-sm flex-shrink-0",children:ne+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:q.name}),o.jsxs("div",{className:"text-xs text-slate-500",children:[q.count," booking",q.count!==1?"s":"","  ",q.clientCount," client",q.clientCount!==1?"s":""]})]}),o.jsx("div",{className:"text-sm font-bold text-violet-600 flex-shrink-0",children:Pr(q.revenue)})]},q.name))})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Client Insights"}),o.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Understanding your client base"}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[o.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-100 p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:V.uniqueClients}),o.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:"Total Unique Clients"})]}),o.jsxs("div",{className:"bg-emerald-50 rounded-xl border border-emerald-100 p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-extrabold text-emerald-700",children:V.newThisMonth}),o.jsx("div",{className:"text-xs font-medium text-emerald-600 mt-0.5",children:"New This Month"})]}),o.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-extrabold text-blue-700",children:V.returningThisMonth}),o.jsx("div",{className:"text-xs font-medium text-blue-600 mt-0.5",children:"Returning This Month"})]}),o.jsxs("div",{className:"bg-violet-50 rounded-xl border border-violet-100 p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-extrabold text-violet-700",children:V.avgBookingsPerClient.toFixed(1)}),o.jsx("div",{className:"text-xs font-medium text-violet-600 mt-0.5",children:"Avg Bookings / Client"})]})]}),o.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"Top Clients by Frequency"}),V.topClients.length===0?o.jsxs("div",{className:"text-center py-6",children:[o.jsx(Jp,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-400",children:"No client data yet"})]}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:V.topClients.map((q,ne)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[o.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center text-amber-700 font-bold text-xs flex-shrink-0",children:ne+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:q.name}),o.jsx("div",{className:"text-xs text-slate-400 truncate",children:q.email})]}),o.jsxs("div",{className:"flex-shrink-0 px-2.5 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-bold",children:[q.count," visit",q.count!==1?"s":""]})]},q.email))})]})]})}const G6=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function bp(s){const[e,n]=s.split(":").map(Number);return e*60+n}function Y6(s,e){if(s.status!=="waiting"||s.serviceId&&e.serviceId&&s.serviceId!==e.serviceId||s.staffId&&s.staffId!=="any"&&e.staffId&&s.staffId!==e.staffId)return!1;if(e.date){if(s.preferredDate&&s.preferredDate!==e.date)return!1;if(s.preferredDays&&s.preferredDays.length>0){const n=new Date(e.date+"T12:00:00"),i=G6[n.getDay()];if(!s.preferredDays.includes(i))return!1}}if(e.time&&s.preferredTimeRange){const n=bp(e.time),i=bp(s.preferredTimeRange.start),l=bp(s.preferredTimeRange.end);if(!(s.preferredTimeRange.start==="00:00"&&s.preferredTimeRange.end==="23:59")&&(n<i||n>l))return!1}return!0}function K6(s,e){return s.filter(n=>Y6(n,e)).sort((n,i)=>(n.createdAt||"").localeCompare(i.createdAt||""))}const z_=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}];function Lr(s){if(!s)return"";const[e,n]=s.split(":").map(Number),i=e>=12?"PM":"AM",l=e%12||12;return n===0?`${l}${i}`:`${l}:${n.toString().padStart(2,"0")}${i}`}function Q6({user:s}){const{slug:e}=tu(),n=xo(),[i,l]=j.useState(null),[u,h]=j.useState(null),[p,g]=j.useState(!0),[x,b]=j.useState(!1),[w,N]=j.useState([]),[C,G]=j.useState([]),[z,O]=j.useState([]),[L,H]=j.useState("schedule"),[K,fe]=j.useState(null),[pe,le]=j.useState("all"),[S,A]=j.useState("all"),[R,V]=j.useState([]),[k,U]=j.useState(null),[I,q]=j.useState(null),[ne,M]=j.useState({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""});j.useEffect(()=>{if(!s){n(`/shop/${e}/login`,{replace:!0});return}(async()=>{g(!0);try{const te=Ds(mt(Ae,"shops"),xs("slug","==",e)),_e=await Ms(te);if(_e.empty){b(!0),g(!1);return}const we=_e.docs[0],Pe=we.data();if(Pe.ownerUid!==s.uid){b(!0),g(!1);return}l(Pe),h(we.id)}catch(te){console.error("Error checking ownership:",te),b(!0)}finally{g(!1)}})()},[s,e,n]),j.useEffect(()=>{if(!u)return;const F=ns(mt(Ae,"shops",u,"availability"),Pe=>{const _t=Pe.docs.map(ft=>({id:ft.id,...ft.data()}));N(_t)}),te=ns(mt(Ae,"shops",u,"bookings"),Pe=>{const _t=Pe.docs.map(ft=>({id:ft.id,...ft.data()}));G(_t)}),_e=ns(mt(Ae,"shops",u,"staff"),Pe=>{const _t=Pe.docs.map(ft=>({id:ft.id,...ft.data()})).filter(ft=>ft.active!==!1).sort((ft,me)=>(ft.name||"").localeCompare(me.name||""));O(_t)}),we=ns(mt(Ae,"shops",u,"waitlist"),Pe=>{const _t=Pe.docs.map(ft=>({id:ft.id,...ft.data()})).sort((ft,me)=>(ft.createdAt||"").localeCompare(me.createdAt||""));V(_t)});return()=>{F(),te(),_e(),we()}},[u]);const he=async()=>{await dR(Zr),n(`/shop/${e}`,{replace:!0})},ve=async F=>{F.preventDefault();const{date:te,startTime:_e,endTime:we,slotDuration:Pe,staffId:_t}=ne,ft=parseInt(Pe),[me,ye]=_e.split(":").map(Number),[qe,Ue]=we.split(":").map(Number),gt=me*60+ye,Be=qe*60+Ue;let De=gt;for(;De+ft<=Be;){const At=Math.floor(De/60),vn=De%60,wt=`${At.toString().padStart(2,"0")}:${vn.toString().padStart(2,"0")}`,xn={date:te,time:wt,duration:ft,available:!0};if(_t){const Dn=z.find(qn=>qn.id===_t);xn.staffId=_t,xn.staffName=Dn?.name||""}await Xr(mt(Ae,"shops",u,"availability"),xn),De+=ft}M({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""})},Ce=async F=>{await $4(bt(Ae,"shops",u,"availability",F))},Le=F=>{const te={date:F.date,time:F.time,staffId:F.staffId||null,serviceId:F.serviceId||null},_e=K6(R,te);_e.length>0&&U({matches:_e,slot:te})},P=async(F,te)=>{for(const _e of F)await Tt(bt(Ae,"shops",u,"waitlist",_e.id),{status:"notified",notifiedAt:new Date().toISOString(),notifiedSlot:{date:te.date,time:te.time,staffId:te.staffId||null,staffName:te.staffName||null}});U(null)},se=async F=>{await Tt(bt(Ae,"shops",u,"waitlist",F),{status:"notified",notifiedAt:new Date().toISOString()})},ce=async F=>{await Tt(bt(Ae,"shops",u,"waitlist",F),{status:"expired"})},ge=async F=>{const te=C.find(_e=>_e.id===F);if(te&&te.recurringGroupId){q({bookingId:F,recurringGroupId:te.recurringGroupId});return}if(await Tt(bt(Ae,"shops",u,"bookings",F),{status:"cancelled"}),te&&te.slotId&&!te.slotId.startsWith("wh-")&&!te.slotId.startsWith("recurring-"))try{await Tt(bt(Ae,"shops",u,"availability",te.slotId),{available:!0})}catch(_e){console.warn("Could not re-open slot:",_e)}te&&Le(te)},xe=async F=>{const te=C.find(_e=>_e.id===F);if(await Tt(bt(Ae,"shops",u,"bookings",F),{status:"cancelled"}),te&&te.slotId&&!te.slotId.startsWith("wh-")&&!te.slotId.startsWith("recurring-"))try{await Tt(bt(Ae,"shops",u,"availability",te.slotId),{available:!0})}catch(_e){console.warn("Could not re-open slot:",_e)}te&&Le(te),q(null)},je=async(F,te)=>{const _e=C.find(Pe=>Pe.id===F);if(!_e)return;const we=C.filter(Pe=>Pe.recurringGroupId===te&&Pe.date>=_e.date&&(Pe.status==="pending"||Pe.status==="confirmed"));for(const Pe of we)if(await Tt(bt(Ae,"shops",u,"bookings",Pe.id),{status:"cancelled"}),Pe.slotId&&!Pe.slotId.startsWith("wh-")&&!Pe.slotId.startsWith("recurring-"))try{await Tt(bt(Ae,"shops",u,"availability",Pe.slotId),{available:!0})}catch(_t){console.warn("Could not re-open slot:",_t)}_e&&Le(_e),q(null)},ie=async F=>{await Tt(bt(Ae,"shops",u,"bookings",F),{status:"confirmed"})},Ve=async F=>{const te=C.find(_e=>_e.id===F);if(await Tt(bt(Ae,"shops",u,"bookings",F),{status:"rejected"}),te&&te.slotId&&!te.slotId.startsWith("wh-"))try{await Tt(bt(Ae,"shops",u,"availability",te.slotId),{available:!0})}catch(_e){console.warn("Could not re-open slot:",_e)}te&&Le(te)},Ie=async()=>{const F=!i?.requireApproval;try{await Tt(bt(Ae,"shops",u),{requireApproval:F}),l(te=>({...te,requireApproval:F}))}catch(te){console.error("Error updating requireApproval:",te)}},$e=async F=>{const te=parseInt(F);try{await Tt(bt(Ae,"shops",u),{bufferMinutes:te}),l(_e=>({..._e,bufferMinutes:te}))}catch(_e){console.error("Error updating buffer minutes:",_e)}},tt=(F,te)=>new Date(`${F}T${te}`).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),Yt=j.useMemo(()=>{const F={},te=pe==="all"?z:z.filter(we=>we.id===pe),_e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(const we of te)we.weeklyHours&&_e.forEach((Pe,_t)=>{we.weeklyHours[Pe]?.enabled&&(F[_t]=!0)});return F},[z,pe]),It=j.useMemo(()=>(pe==="all"?z:z.filter(te=>te.id===pe)).filter(te=>te.weeklyHours?z_.some(_e=>te.weeklyHours[_e.key]?.enabled):!1),[z,pe]),pt=j.useMemo(()=>{const F=new Date,te=`${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}-${String(F.getDate()).padStart(2,"0")}`,_e=F.getDay(),we=_e===0?-6:1-_e,Pe=new Date(F);Pe.setDate(F.getDate()+we),Pe.setHours(0,0,0,0);const _t=new Date(Pe);_t.setDate(Pe.getDate()+6),_t.setHours(23,59,59,999);const ft=`${Pe.getFullYear()}-${String(Pe.getMonth()+1).padStart(2,"0")}-${String(Pe.getDate()).padStart(2,"0")}`,me=`${_t.getFullYear()}-${String(_t.getMonth()+1).padStart(2,"0")}-${String(_t.getDate()).padStart(2,"0")}`,ye=C.filter(gt=>gt.date===te).length,qe=C.filter(gt=>gt.date>=ft&&gt.date<=me).length,Ue=new Set(C.map(gt=>gt.clientEmail?.toLowerCase()).filter(Boolean)).size;return{todayBookings:ye,weekBookings:qe,uniqueClients:Ue,totalBookings:C.length}},[C]),gn=j.useMemo(()=>C.filter(F=>F.status==="pending").length,[C]),sn=j.useMemo(()=>R.filter(F=>F.status==="waiting").length,[R]);if(p)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading dashboard"})]})});if(x)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(tN,{className:"w-8 h-8 text-red-500"})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Unauthorized"}),o.jsx("p",{className:"text-slate-600 mb-6",children:"You don't have access to this dashboard."}),o.jsx(et,{to:`/shop/${e}/login`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:"Login"})]})});const as=pe==="all"?w:w.filter(F=>F.staffId===pe),zn=pe==="all"?C:C.filter(F=>F.staffId===pe),vt=as.reduce((F,te)=>(F[te.date]||(F[te.date]=[]),F[te.date].push(te),F),{}),Ee=zn.reduce((F,te)=>(F[te.date]||(F[te.date]=[]),F[te.date].push(te),F),{}),ke=K?Object.keys(vt).filter(F=>F===K).sort():Object.keys(vt).sort(),Ye=K?zn.filter(F=>F.date===K):zn,Pt=S==="all"?Ye:S==="pending"?Ye.filter(F=>F.status==="pending"):S==="confirmed"?Ye.filter(F=>!F.status||F.status==="confirmed"):Ye.filter(F=>F.status==="cancelled"||F.status==="rejected"),at={all:Ye.length,pending:Ye.filter(F=>F.status==="pending").length,confirmed:Ye.filter(F=>!F.status||F.status==="confirmed").length,cancelled:Ye.filter(F=>F.status==="cancelled"||F.status==="rejected").length},ut=[{key:"schedule",label:"Schedule",icon:Ht},{key:"analytics",label:"Analytics",icon:jD},{key:"waitlist",label:"Waitlist",icon:Wp},{key:"staff",label:"Staff",icon:es},{key:"services",label:"Services",icon:Sa},{key:"settings",label:"Settings",icon:u6}];return o.jsxs("div",{className:"min-h-screen bg-slate-50",children:[o.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(i.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{className:"hidden sm:block",children:[o.jsx("h1",{className:"text-base font-bold text-slate-900 leading-tight",children:i.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Dashboard"})]})]}),o.jsx("div",{className:"flex items-center bg-slate-100 p-1 rounded-xl",children:ut.map(F=>{const te=F.icon;return o.jsxs("button",{onClick:()=>H(F.key),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${L===F.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[o.jsx(te,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:F.label}),F.key==="schedule"&&gn>0&&o.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-amber-500 text-white text-[10px] font-bold rounded-full leading-none",children:gn}),F.key==="waitlist"&&sn>0&&o.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-500 text-white text-[10px] font-bold rounded-full leading-none",children:sn})]},F.key)})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(et,{to:`/shop/${e}`,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[o.jsx(BD,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"View Page"})]}),o.jsxs("button",{onClick:he,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all",children:[o.jsx(WD,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[L==="schedule"&&o.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 animate-fade-in",children:[{label:"Today's Bookings",value:pt.todayBookings,icon:C_,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:pt.weekBookings,icon:iN,color:"bg-violet-100 text-violet-600"},{label:"Total Bookings",value:pt.totalBookings,icon:JE,color:"bg-emerald-100 text-emerald-600"},{label:"Unique Clients",value:pt.uniqueClients,icon:es,color:"bg-amber-100 text-amber-600"}].map(F=>{const te=F.icon;return o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("div",{className:`w-10 h-10 ${F.color} rounded-xl flex items-center justify-center`,children:o.jsx(te,{className:"w-5 h-5"})})}),o.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:F.value}),o.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:F.label})]},F.label)})}),L==="analytics"&&o.jsx($6,{bookings:C}),L==="staff"&&o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:o.jsx(F6,{shopId:u})}),L==="services"&&o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:o.jsx(P6,{shopId:u})}),k&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:o.jsx(Zl,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Waitlist Match!"}),o.jsxs("p",{className:"text-sm text-slate-500",children:[k.matches.length," client",k.matches.length!==1?"s":""," on the waitlist match this freed slot"]})]})]}),o.jsx("div",{className:"bg-slate-50 rounded-xl p-3 mb-4 text-sm",children:o.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[o.jsx(Ht,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"font-medium",children:[new Date(k.slot.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," at ",(()=>{const[F,te]=k.slot.time.split(":"),_e=parseInt(F);return`${_e%12||12}:${te} ${_e>=12?"PM":"AM"}`})()]})]})}),o.jsx("div",{className:"space-y-2 mb-5 max-h-48 overflow-y-auto",children:k.matches.map(F=>o.jsx("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border border-blue-100 rounded-lg",children:o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:F.clientName}),o.jsx("span",{className:"text-xs text-slate-500 ml-2",children:F.serviceName})]})},F.id))}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>P(k.matches,k.slot),className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:[o.jsx(Zl,{className:"w-4 h-4"}),"Notify All"]}),o.jsx("button",{onClick:()=>U(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Dismiss"})]})]})}),I&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:o.jsx(Xi,{className:"w-5 h-5 text-red-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Cancel Recurring Booking"}),o.jsx("p",{className:"text-sm text-slate-500",children:"This booking is part of a recurring series"})]})]}),o.jsxs("div",{className:"space-y-2 mb-5",children:[o.jsxs("button",{onClick:()=>xe(I.bookingId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[o.jsx(Ui,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this one only"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments stay active"})]})]}),o.jsxs("button",{onClick:()=>je(I.bookingId,I.recurringGroupId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[o.jsx(Xi,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future in series"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments"})]})]})]}),o.jsx("button",{onClick:()=>q(null),className:"w-full px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Never mind"})]})}),L==="waitlist"&&o.jsx("div",{className:"animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Waitlist"}),sn>0&&o.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:[sn," waiting"]})]}),o.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[R.length," total"]})]}),R.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:o.jsx(Wp,{className:"w-6 h-6 text-slate-400"})}),o.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No waitlist entries yet"}),o.jsx("p",{className:"text-xs text-slate-400",children:"Clients can join the waitlist when no slots are available on your booking page."})]}):o.jsx("div",{children:(()=>{const F={};return R.forEach(te=>{const _e=te.serviceName||"Other";F[_e]||(F[_e]=[]),F[_e].push(te)}),Object.entries(F).sort(([te],[_e])=>te.localeCompare(_e)).map(([te,_e])=>o.jsxs("div",{className:"mb-6 last:mb-0",children:[o.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100 flex items-center gap-2",children:[o.jsx(Sa,{className:"w-3.5 h-3.5 text-blue-500"}),te,o.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",_e.filter(we=>we.status==="waiting").length," waiting)"]})]}),o.jsx("div",{className:"space-y-2.5",children:_e.sort((we,Pe)=>(we.createdAt||"").localeCompare(Pe.createdAt||"")).map(we=>{const Pe={waiting:"bg-blue-50 text-blue-700 border-blue-200",notified:"bg-emerald-50 text-emerald-700 border-emerald-200",booked:"bg-emerald-50 text-emerald-700 border-emerald-200",expired:"bg-slate-100 text-slate-500 border-slate-200"},_t={waiting:"Waiting",notified:"Notified",booked:"Booked",expired:"Removed"},ft=we.createdAt?(()=>{const ye=Date.now()-new Date(we.createdAt).getTime(),qe=Math.floor(ye/864e5),Ue=Math.floor(ye/36e5);return qe>0?`${qe}d`:`${Ue}h`})():"",me={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return o.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(Jp,{className:"w-4 h-4 text-blue-600"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:we.clientName}),o.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${Pe[we.status]||Pe.waiting}`,children:_t[we.status]||"Waiting"})]}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Joined ",ft," ago",we.refCode&&o.jsx("span",{className:"font-mono text-slate-400 ml-2",children:we.refCode})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[we.status==="waiting"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>se(we.id),className:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all",title:"Notify client",children:o.jsx(Zl,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>ce(we.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove from waitlist",children:o.jsx(mo,{className:"w-4 h-4"})})]}),we.status==="notified"&&o.jsx("button",{onClick:()=>ce(we.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove",children:o.jsx(mo,{className:"w-3.5 h-3.5"})})]})]}),o.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[we.staffName&&we.staffName!=="Any Available"&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(es,{className:"w-3 h-3 text-violet-400"}),o.jsx("span",{className:"text-violet-600",children:we.staffName})]}),we.preferredDate&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Ht,{className:"w-3 h-3 text-slate-400"}),o.jsxs("span",{children:["Preferred: ",new Date(we.preferredDate+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]}),we.preferredDays&&we.preferredDays.length>0&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Ht,{className:"w-3 h-3 text-slate-400"}),o.jsxs("span",{children:["Days: ",we.preferredDays.map(ye=>me[ye]||ye).join(", ")]})]}),we.preferredTimeRange&&!(we.preferredTimeRange.start==="00:00"&&we.preferredTimeRange.end==="23:59")&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ss,{className:"w-3 h-3 text-slate-400"}),o.jsxs("span",{children:["Time: ",Lr(we.preferredTimeRange.start),"",Lr(we.preferredTimeRange.end)]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(I_,{className:"w-3 h-3"}),we.clientEmail]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(k_,{className:"w-3 h-3"}),we.clientPhone]})]}),we.status==="notified"&&we.notifiedSlot&&o.jsxs("div",{className:"mt-1.5 px-2.5 py-1.5 bg-emerald-50 border border-emerald-200 rounded-lg inline-flex items-center gap-1.5",children:[o.jsx(Zl,{className:"w-3 h-3 text-emerald-500"}),o.jsxs("span",{className:"text-emerald-700 font-medium",children:["Notified about ",new Date(we.notifiedSlot.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ",Lr(we.notifiedSlot.time)]})]})]})]},we.id)})})]},te))})()})]})}),L==="settings"&&o.jsx("div",{className:"max-w-2xl animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Shop Settings"}),o.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure your booking preferences"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[o.jsxs("div",{className:"pr-4",children:[o.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Require Booking Approval"}),o.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Review and approve bookings before they're confirmed"})]}),o.jsx("button",{type:"button",onClick:Ie,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${i?.requireApproval?"bg-blue-500":"bg-slate-300"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${i?.requireApproval?"translate-x-6":"translate-x-1"}`})})]}),i?.requireApproval&&o.jsxs("div",{className:"p-3.5 bg-amber-50 border border-amber-200 rounded-xl text-xs text-amber-800 leading-relaxed",children:[o.jsx("strong",{children:" Approval mode is on."}),' New bookings will appear as "Pending" until you approve or reject them. Time slots are held while pending to prevent double-booking.']}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[o.jsxs("div",{className:"pr-4",children:[o.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Buffer Time Between Bookings"}),o.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Add a gap between consecutive appointments"})]}),o.jsxs("select",{value:i?.bufferMinutes||0,onChange:F=>$e(F.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[o.jsx("option",{value:"0",children:"No buffer"}),o.jsx("option",{value:"5",children:"5 minutes"}),o.jsx("option",{value:"10",children:"10 minutes"}),o.jsx("option",{value:"15",children:"15 minutes"}),o.jsx("option",{value:"30",children:"30 minutes"})]})]})]})]})}),L==="schedule"&&o.jsxs("div",{className:"animate-fade-in",children:[z.length>0&&o.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5",children:"Filter by Staff"}),o.jsxs("select",{value:pe,onChange:F=>le(F.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[o.jsx("option",{value:"all",children:"All Staff"}),z.map(F=>o.jsxs("option",{value:F.id,children:[F.name,F.role?`  ${F.role}`:""]},F.id))]})]})}),It.length>0&&o.jsxs("div",{className:"mb-6 bg-violet-50 border border-violet-200 rounded-xl p-5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(aN,{className:"w-4 h-4 text-violet-600"}),o.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Recurring Weekly Hours"})]}),o.jsx("div",{className:"space-y-2.5",children:It.map(F=>{const te=z_.filter(_e=>F.weeklyHours[_e.key]?.enabled);return o.jsxs("div",{className:"flex items-start gap-2.5",children:[o.jsx("div",{className:"w-7 h-7 bg-violet-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:o.jsx(es,{className:"w-3.5 h-3.5 text-violet-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:F.name}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:te.map(_e=>{const we=F.weeklyHours[_e.key];return o.jsxs("span",{className:"inline-block px-2 py-0.5 bg-white text-violet-700 border border-violet-200 rounded text-xs font-medium",children:[_e.short," ",Lr(we.start),"",Lr(we.end),we.break&&o.jsxs("span",{className:"text-amber-600 ml-1",children:["(break ",Lr(we.break.start),"",Lr(we.break.end),")"]})]},_e.key)})})]})]},F.id)})}),o.jsx("p",{className:"text-xs text-violet-500 mt-3",children:"Slots auto-generate on the booking page. Manage hours in the Staff tab."})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Monthly Overview"}),o.jsx(O6,{slotsByDate:vt,bookingsByDate:Ee,selectedDate:K,onSelectDate:fe,recurringDayFlags:Yt}),K&&o.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[o.jsxs("span",{className:"text-sm text-slate-600",children:["Showing: ",o.jsx("strong",{className:"text-slate-900",children:new Date(K+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),o.jsx("button",{onClick:()=>fe(null),className:"text-xs px-3 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-all border border-slate-200",children:"Show All"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:It.length>0?"Add Custom Slots":"Create Time Slots"}),It.length>0&&o.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Use this for one-off availability outside regular hours."}),!It.length&&o.jsx("div",{className:"mb-4"}),o.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[z.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Staff Member"}),o.jsxs("select",{value:ne.staffId,onChange:F=>M({...ne,staffId:F.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[o.jsx("option",{value:"",children:"Select a staff member"}),z.map(F=>o.jsxs("option",{value:F.id,children:[F.name,F.role?`  ${F.role}`:""]},F.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Date"}),o.jsx("input",{type:"date",value:ne.date,onChange:F=>M({...ne,date:F.target.value}),required:!0,min:new Date().toISOString().split("T")[0],className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Start"}),o.jsx("input",{type:"time",value:ne.startTime,onChange:F=>M({...ne,startTime:F.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"End"}),o.jsx("input",{type:"time",value:ne.endTime,onChange:F=>M({...ne,endTime:F.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Slot Duration"}),o.jsxs("select",{value:ne.slotDuration,onChange:F=>M({...ne,slotDuration:F.target.value}),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[o.jsx("option",{value:"15",children:"15 minutes"}),o.jsx("option",{value:"30",children:"30 minutes"}),o.jsx("option",{value:"45",children:"45 minutes"}),o.jsx("option",{value:"60",children:"1 hour"}),o.jsx("option",{value:"90",children:"1.5 hours"}),o.jsx("option",{value:"120",children:"2 hours"})]})]}),o.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[o.jsx(Sh,{className:"w-4 h-4"}),"Generate Slots"]})]}),o.jsxs("div",{className:"mt-4 p-3.5 bg-blue-50 border border-blue-100 rounded-xl text-xs text-slate-600 leading-relaxed",children:[o.jsx("strong",{className:"text-slate-700",children:" Tip:"})," ",It.length>0?"Weekly hours auto-generate slots. Use this for one-off slots outside regular hours.":z.length>0?"Select a staff member, pick a date, and set working hours to create slots.":"Set your hours and slot duration. We'll create all the time slots for that day."]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900",children:K?"Bookings":"All Bookings"}),at.pending>0&&o.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 border border-amber-200 text-xs font-bold rounded-full",children:[at.pending," pending"]})]}),o.jsx("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:Pt.length})]}),o.jsx("div",{className:"flex items-center gap-1 mb-4 p-1 bg-slate-100 rounded-lg overflow-x-auto",children:[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"confirmed",label:"Confirmed"},{key:"cancelled",label:"Cancelled"}].map(F=>o.jsxs("button",{onClick:()=>A(F.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-semibold transition-all whitespace-nowrap ${S===F.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[F.label,o.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${S===F.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:at[F.key]})]},F.key))}),Pt.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:o.jsx(C_,{className:"w-6 h-6 text-slate-400"})}),o.jsx("p",{className:"text-sm text-slate-500 font-medium",children:S!=="all"?`No ${S} bookings`:K?"No bookings for this date":"No bookings yet"})]}):o.jsx("div",{className:"space-y-2.5 max-h-[500px] overflow-y-auto pr-1",children:Pt.sort((F,te)=>`${F.date}${F.time}`.localeCompare(`${te.date}${te.time}`)).map(F=>{const te=F.status||"confirmed",_e={pending:"bg-amber-50 text-amber-700 border-amber-200",confirmed:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200",cancelled:"bg-slate-100 text-slate-500 border-slate-200"},we={pending:"Pending",confirmed:"Confirmed",rejected:"Rejected",cancelled:"Cancelled"};return o.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(Jp,{className:"w-4 h-4 text-blue-600"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:F.clientName}),o.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${_e[te]}`,children:we[te]}),F.recurring&&o.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",title:"Recurring appointment",children:o.jsx(Xi,{className:"w-2.5 h-2.5"})})]}),o.jsx("div",{className:"text-xs text-slate-500",children:tt(F.date,F.time)})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[te==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>ie(F.id),className:"p-1.5 text-emerald-500 hover:text-emerald-700 hover:bg-emerald-50 rounded-lg transition-all",title:"Approve booking",children:o.jsx(zc,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>Ve(F.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Reject booking",children:o.jsx(Ui,{className:"w-4 h-4"})})]}),te==="confirmed"&&o.jsx("button",{onClick:()=>ge(F.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Cancel booking",children:o.jsx(Zc,{className:"w-3.5 h-3.5"})})]})]}),o.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[F.serviceName&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Sa,{className:"w-3 h-3 text-blue-400"}),o.jsx("span",{className:"font-medium text-slate-700",children:F.serviceName}),F.servicePrice!=null&&o.jsxs("span",{className:"text-blue-600 font-semibold",children:["$",Number(F.servicePrice).toFixed(2)]})]}),F.staffName&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(es,{className:"w-3 h-3 text-violet-400"}),o.jsx("span",{className:"text-violet-600",children:F.staffName})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(I_,{className:"w-3 h-3"}),F.clientEmail]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(k_,{className:"w-3 h-3"}),F.clientPhone]})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[F.refCode&&o.jsxs("span",{className:"font-mono text-[10px] text-slate-400",children:["REF: ",F.refCode]}),F.recurring&&o.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-indigo-50 border border-indigo-200 rounded text-[10px] font-semibold text-indigo-600",children:" Recurring"})]})]})]},F.id)})})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900",children:K?"Custom Time Slots":"All Custom Time Slots"}),o.jsx("span",{className:"text-xs font-semibold text-slate-500 bg-slate-100 px-2.5 py-1 rounded-lg",children:K?(vt[K]||[]).length:as.length})]}),It.length>0&&o.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Recurring slots from weekly hours auto-generate  not shown here."}),!It.length&&o.jsx("div",{className:"mb-4"}),ke.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:o.jsx(Ht,{className:"w-6 h-6 text-slate-400"})}),o.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:K?"No custom slots for this date":"No custom slots yet"}),o.jsx("p",{className:"text-xs text-slate-400",children:It.length>0?"Recurring hours handle most scheduling.":"Use the form above to generate availability."})]}):o.jsx("div",{className:"space-y-6",children:ke.map(F=>o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100",children:new Date(F).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2.5",children:vt[F].sort((te,_e)=>te.time.localeCompare(_e.time)).map(te=>o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3.5 text-center group hover:border-slate-300 transition-all",children:[o.jsx("div",{className:"text-sm font-bold text-slate-900 mb-0.5",children:te.time}),o.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[te.duration," min"]}),te.staffName&&o.jsxs("div",{className:"text-xs text-violet-600 mb-1.5 flex items-center justify-center gap-1",children:[o.jsx(es,{className:"w-3 h-3"}),te.staffName]}),o.jsx("div",{className:"mb-2",children:te.available?o.jsx("span",{className:"inline-block px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-md text-xs font-medium",children:"Available"}):o.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-50 text-red-700 border border-red-200 rounded-md text-xs font-medium",children:"Booked"})}),te.available&&o.jsxs("button",{onClick:()=>Ce(te.id),className:"opacity-0 group-hover:opacity-100 flex items-center justify-center gap-1 w-full px-2 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-xs font-medium transition-all border border-red-200",children:[o.jsx(Zc,{className:"w-3 h-3"}),"Remove"]})]},te.id))})]},F))})]})]})]})]})}function W6({user:s}){const{slug:e}=tu(),n=xo(),[i,l]=j.useState(""),[u,h]=j.useState(""),[p,g]=j.useState(""),[x,b]=j.useState(!1);j.useEffect(()=>{if(!s)return;(async()=>{const C=Ds(mt(Ae,"shops"),xs("slug","==",e)),G=await Ms(C);G.empty||G.docs[0].data().ownerUid===s.uid&&n(`/shop/${e}/dashboard`,{replace:!0})})()},[s,e,n]);const w=async N=>{N.preventDefault(),g(""),b(!0);try{const G=(await Gw(Zr,i,u)).user,z=Ds(mt(Ae,"shops"),xs("slug","==",e)),O=await Ms(z);if(O.empty){g("Shop not found"),b(!1);return}if(O.docs[0].data().ownerUid!==G.uid){g("You are not the owner of this shop"),await Zr.signOut(),b(!1);return}n(`/shop/${e}/dashboard`,{replace:!0})}catch(C){switch(C.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":g("Invalid email or password");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/too-many-requests":g("Too many failed attempts. Please try again later.");break;default:g("Login failed. Please try again.")}h("")}finally{b(!1)}};return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsxs(et,{to:"/",className:"inline-flex items-center gap-2.5",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:o.jsx(rl,{className:"w-5 h-5 text-white"})}),o.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),o.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),o.jsx("input",{type:"email",value:i,onChange:N=>{l(N.target.value),g("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),o.jsx("input",{type:"password",value:u,onChange:N=>{h(N.target.value),g("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&o.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[o.jsx("span",{children:""})," ",p]})]}),o.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):"Sign In"})]}),o.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:o.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",o.jsx(et,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(et,{to:`/shop/${e}`,className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[o.jsx(Za,{className:"w-3.5 h-3.5"}),"Back to booking page"]})})]})})}function q_({name:s,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const i=(s||"").split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2);return o.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:i||"?"})}function F_(){return o.jsxs(et,{to:"/",className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:o.jsx(rl,{className:"w-3.5 h-3.5 text-white"})}),o.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function X6(){const{slug:s,refCode:e}=tu(),[n,i]=j.useState(null),[l,u]=j.useState(null),[h,p]=j.useState(!0),[g,x]=j.useState(!1),[b,w]=j.useState(null),[N,C]=j.useState(null),[G,z]=j.useState(!1),[O,L]=j.useState([]),[H,K]=j.useState([]),[fe,pe]=j.useState([]),[le,S]=j.useState([]),[A,R]=j.useState(!1),[V,k]=j.useState(!1),[U,I]=j.useState(null),[q,ne]=j.useState(null),[M,he]=j.useState(null),[ve,Ce]=j.useState(!1),[Le,P]=j.useState("");j.useEffect(()=>{(async()=>{p(!0);try{const ke=Ds(mt(Ae,"shops"),xs("slug","==",s)),Ye=await Ms(ke);if(Ye.empty)x(!0);else{const Pt=Ye.docs[0];i(Pt.data()),u(Pt.id)}}catch(ke){console.error("Error looking up shop:",ke),x(!0)}finally{p(!1)}})()},[s]),j.useEffect(()=>{if(!l)return;(async()=>{try{const ke=Ds(mt(Ae,"shops",l,"bookings"),xs("refCode","==",e.toUpperCase())),Ye=await Ms(ke);if(Ye.empty)z(!0);else{const Pt=Ye.docs[0];w(Pt.data()),C(Pt.id)}}catch(ke){console.error("Error looking up booking:",ke),z(!0)}})()},[l,e]),j.useEffect(()=>{if(!l||!b)return;const Ee=ns(mt(Ae,"shops",l,"bookings"),at=>{L(at.docs.map(ut=>({id:ut.id,...ut.data()})))}),ke=ns(mt(Ae,"shops",l,"availability"),at=>{const ut=new Date,F=at.docs.map(te=>({id:te.id,...te.data()})).filter(te=>new Date(`${te.date}T${te.time}`)>ut);K(F)}),Ye=ns(mt(Ae,"shops",l,"staff"),at=>{pe(at.docs.map(ut=>({id:ut.id,...ut.data()})).filter(ut=>ut.active!==!1).sort((ut,F)=>(ut.name||"").localeCompare(F.name||"")))}),Pt=ns(mt(Ae,"shops",l,"services"),at=>{S(at.docs.map(ut=>({id:ut.id,...ut.data()})).filter(ut=>ut.active!==!1))});return()=>{Ee(),ke(),Ye(),Pt()}},[l,b]);const se=n?.bufferMinutes||0,ce=j.useMemo(()=>{if(!b)return null;if(b.serviceId){const Ee=le.find(ke=>ke.id===b.serviceId);if(Ee)return Ee}return b.serviceName?{id:b.serviceId,name:b.serviceName,price:b.servicePrice,duration:b.serviceDuration||b.duration}:null},[b,le]),ge=j.useMemo(()=>{if(!A||!b)return[];const Ee=new Date,ke=ce?.duration||b.duration||60;let Ye=H.filter(te=>te.available);Ye=Ye.filter(te=>te.duration>=ke),b.staffId&&(Ye=Ye.filter(te=>te.staffId===b.staffId||!te.staffId));const Pt=b.staffId?fe.filter(te=>te.id===b.staffId):fe,at=lN(Pt,ke,se,4).filter(te=>new Date(`${te.date}T${te.time}`)>Ee),ut=cN(at,Ye),F=O.filter(te=>te.id!==N);return oN(ut,F,se)},[A,b,N,H,fe,O,se,ce]),xe=j.useMemo(()=>[...new Set(ge.map(Ee=>Ee.date))].sort(),[ge]),je=j.useMemo(()=>q?ge.filter(Ee=>Ee.date===q):[],[q,ge]),ie=async(Ee="single")=>{Ce(!0);try{if(await Tt(bt(Ae,"shops",l,"bookings",N),{status:"cancelled"}),b.slotId&&!b.slotId.startsWith("wh-")&&!b.slotId.startsWith("recurring-"))try{await Tt(bt(Ae,"shops",l,"availability",b.slotId),{available:!0})}catch(ke){console.warn("Could not re-open slot:",ke)}if(Ee==="future"&&b.recurringGroupId){const ke=O.filter(Ye=>Ye.recurringGroupId===b.recurringGroupId&&Ye.id!==N&&Ye.date>=b.date&&(Ye.status==="pending"||Ye.status==="confirmed"));for(const Ye of ke)if(await Tt(bt(Ae,"shops",l,"bookings",Ye.id),{status:"cancelled"}),Ye.slotId&&!Ye.slotId.startsWith("wh-")&&!Ye.slotId.startsWith("recurring-"))try{await Tt(bt(Ae,"shops",l,"availability",Ye.slotId),{available:!0})}catch(Pt){console.warn("Could not re-open slot:",Pt)}}w(ke=>({...ke,status:"cancelled"})),k(!1),I(null),P("cancelled")}catch(ke){console.error("Cancel error:",ke),P("error")}finally{Ce(!1)}},Ve=async()=>{if(M){Ce(!0);try{const Ee={date:M.date,time:M.time,slotId:M.id};if(M.staffId&&(Ee.staffId=M.staffId,Ee.staffName=M.staffName||""),n?.requireApproval&&(Ee.status="pending"),b.slotId&&!b.slotId.startsWith("wh-"))try{await Tt(bt(Ae,"shops",l,"availability",b.slotId),{available:!0})}catch(ke){console.warn("Could not re-open old slot:",ke)}if(!M.generated&&M.id)try{await Tt(bt(Ae,"shops",l,"availability",M.id),{available:!1})}catch(ke){console.warn("Could not block new slot:",ke)}await Tt(bt(Ae,"shops",l,"bookings",N),Ee),w(ke=>({...ke,...Ee})),R(!1),ne(null),he(null),P("rescheduled")}catch(Ee){console.error("Reschedule error:",Ee),P("error")}finally{Ce(!1)}}},Ie=Ee=>new Date(Ee+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),$e=Ee=>{const[ke,Ye]=Ee.split(":"),Pt=parseInt(ke),at=Pt>=12?"PM":"AM";return`${Pt%12||12}:${Ye} ${at}`},tt=Ee=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(Ee),Yt=Ee=>{if(!Ee)return"";if(Ee<60)return`${Ee} min`;const ke=Math.floor(Ee/60),Ye=Ee%60;return Ye?`${ke}h ${Ye}m`:`${ke} hour${ke>1?"s":""}`};if(h)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Ht,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),o.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,o.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),o.jsxs(et,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Za,{className:"w-4 h-4"}),"Go Home"]})]})});if(G)return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),o.jsx(F_,{})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Xp,{className:"w-8 h-8 text-amber-500"})}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Not Found"}),o.jsx("p",{className:"text-slate-600 mb-2",children:"No booking found with reference code"}),o.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),o.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Ht,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking"})]})});const It=b.status||"confirmed",pt=It==="pending"||It==="confirmed",gn=It==="cancelled",sn=It==="rejected",as={pending:{label:"Pending Approval",color:"bg-amber-100 text-amber-700 border-amber-200",icon:ss},confirmed:{label:"Confirmed",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ya},cancelled:{label:"Cancelled",color:"bg-slate-100 text-slate-500 border-slate-200",icon:Ui},rejected:{label:"Rejected",color:"bg-red-100 text-red-700 border-red-200",icon:Ui}},zn=as[It]||as.confirmed,vt=zn.icon;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),o.jsx(F_,{})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[Le==="rescheduled"&&o.jsx("div",{className:"mb-6 animate-scale-in",children:o.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(nN,{className:"w-8 h-8 text-emerald-600"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Rescheduled!"}),o.jsx("p",{className:"text-slate-600 mb-4",children:n?.requireApproval?"Your booking has been rescheduled and is pending approval.":"Your booking has been successfully rescheduled."}),o.jsx("button",{onClick:()=>P(""),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View updated details "})]})}),Le==="cancelled"&&o.jsx("div",{className:"mb-6 animate-scale-in",children:o.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-lg p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Ui,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Cancelled"}),o.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking has been cancelled."}),o.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[o.jsx(Ht,{className:"w-4 h-4"}),"Book a new appointment"]})]})}),Le==="error"&&o.jsx("div",{className:"mb-6 animate-scale-in",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Something went wrong. Please try again."})]})}),!A&&o.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Your Booking"}),o.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference: ",o.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),(gn||sn)&&o.jsxs("div",{className:`mb-4 p-4 rounded-xl border flex items-center gap-3 ${gn?"bg-slate-50 border-slate-200":"bg-red-50 border-red-200"}`,children:[o.jsx(vt,{className:`w-5 h-5 ${gn?"text-slate-400":"text-red-500"}`}),o.jsx("span",{className:`font-medium text-sm ${gn?"text-slate-600":"text-red-700"}`,children:gn?"This booking has been cancelled.":"This booking has been rejected by the shop."})]}),b.recurringGroupId&&o.jsxs("div",{className:"mb-4 p-3.5 bg-blue-50 border border-blue-200 rounded-xl flex items-center gap-2.5",children:[o.jsx(Xi,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Part of a recurring series"}),b.recurringInterval&&o.jsxs("p",{className:"text-xs text-blue-600 mt-0.5",children:["Repeats every ",b.recurringInterval==="weekly"?"week":b.recurringInterval==="biweekly"?"2 weeks":b.recurringInterval==="fourweekly"?"4 weeks":b.recurringInterval==="monthly"?"month":b.recurringInterval]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${zn.color}`,children:[o.jsx(vt,{className:"w-3.5 h-3.5"}),zn.label]})]}),b.serviceName&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(Sa,{className:"w-4 h-4 text-blue-600"})}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.servicePrice!=null&&o.jsx("span",{className:"font-bold text-blue-600",children:tt(b.servicePrice)})]}),b.staffName&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx(q_,{name:b.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(Ht,{className:"w-4 h-4 text-slate-600"})}),o.jsxs("span",{className:"font-semibold text-slate-800",children:[Ie(b.date)," at ",$e(b.time)]})]}),o.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(ss,{className:"w-4 h-4 text-slate-500"})}),o.jsx("span",{children:Yt(b.serviceDuration||b.duration)})]})]}),pt&&!Le&&o.jsx("div",{className:"space-y-3",children:V?o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(Xp,{className:"w-5 h-5 text-red-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-900",children:"Are you sure?"}),o.jsx("p",{className:"text-sm text-slate-600",children:"This action cannot be undone."})]})]}),b.recurringGroupId&&!U&&o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("button",{onClick:()=>I("single"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[o.jsx(Ui,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this appointment only"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments in the series remain active"})]})]}),o.jsxs("button",{onClick:()=>I("future"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[o.jsx(Xi,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future appointments"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments in the series"})]})]}),o.jsx("button",{onClick:()=>k(!1),className:"w-full px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Go Back"})]}),(!b.recurringGroupId||U)&&o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>ie(U||"single"),disabled:ve,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[ve?o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}):o.jsx(Ui,{className:"w-4 h-4"}),ve?"Cancelling":U==="future"?"Cancel All Future":"Yes, Cancel"]}),o.jsx("button",{onClick:()=>{U?I(null):k(!1)},disabled:ve,className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Go Back"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>{R(!0),P("")},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[o.jsx(aN,{className:"w-4 h-4"}),"Reschedule Booking"]}),o.jsxs("button",{onClick:()=>{k(!0),I(null)},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-white hover:bg-red-50 text-red-600 rounded-xl font-semibold border border-red-200 hover:border-red-300 transition-all",children:[o.jsx(Ui,{className:"w-4 h-4"}),"Cancel Booking"]})]})}),(gn||sn)&&o.jsx("div",{className:"text-center",children:o.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[o.jsx(Ht,{className:"w-4 h-4"}),"Book Again"]})})]}),A&&o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[o.jsxs("button",{onClick:()=>{R(!1),ne(null),he(null)},className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[o.jsx(Za,{className:"w-3.5 h-3.5"}),"Back to Booking"]}),b.serviceName&&o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[o.jsx(Sa,{className:"w-3.5 h-3.5 text-blue-500"}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName}),b.servicePrice!=null&&o.jsx("span",{className:"text-blue-600 font-bold",children:tt(b.servicePrice)})]}),b.staffName&&o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[o.jsx(q_,{name:b.staffName,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a New Time"}),o.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Pick a new date and time for your appointment"})]}),xe.length===0?o.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(Ht,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),o.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"No time slots are currently available. Check back soon!"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-8",children:o.jsx(rN,{availableDates:xe,selectedDate:q,onSelectDate:Ee=>{ne(Ee),he(null)}})}),q&&o.jsxs("div",{className:"animate-slide-down",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",Ie(q)]}),o.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[je.length," slot",je.length!==1?"s":""]})]}),je.length===0?o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:o.jsx("p",{className:"text-slate-500",children:"No slots available for this date"})}):o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:je.sort((Ee,ke)=>Ee.time.localeCompare(ke.time)).map(Ee=>{const ke=M?.id===Ee.id;return o.jsxs("button",{onClick:()=>he(Ee),className:`group border rounded-xl p-4 transition-all duration-200 text-center ${ke?"bg-blue-600 border-blue-600 text-white shadow-md shadow-blue-600/30":"bg-white border-slate-200 hover:border-blue-400 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5"}`,children:[o.jsx("div",{className:`text-lg font-bold mb-1 ${ke?"text-white":"text-slate-900 group-hover:text-blue-700"} transition-colors`,children:$e(Ee.time)}),Ee.staffName&&o.jsxs("div",{className:`text-xs mb-0.5 flex items-center justify-center gap-1 ${ke?"text-blue-100":"text-violet-600"}`,children:[o.jsx(es,{className:"w-3 h-3"}),Ee.staffName]}),o.jsx("div",{className:`text-xs ${ke?"text-blue-200":"text-slate-400"}`,children:Yt(b.serviceDuration||b.duration)})]},Ee.id)})}),M&&o.jsxs("div",{className:"mt-6 animate-fade-in",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 shadow-sm p-5 mb-4",children:[o.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"New Appointment Time"}),o.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[o.jsx(Ht,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"font-semibold text-slate-800",children:[Ie(M.date)," at ",$e(M.time)]})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Ve,disabled:ve,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:ve?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Rescheduling"]}):o.jsxs(o.Fragment,{children:[o.jsx(ya,{className:"w-4 h-4"}),"Confirm Reschedule"]})}),o.jsx("button",{onClick:()=>he(null),className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]})]}),!q&&o.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]})]}),o.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:o.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",o.jsx(et,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function H_(){return o.jsxs(et,{to:"/",className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:o.jsx(rl,{className:"w-3.5 h-3.5 text-white"})}),o.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function J6(s){if(!s)return"Any time";const e=n=>{const[i,l]=n.split(":").map(Number),u=i>=12?"PM":"AM",h=i%12||12;return l===0?`${h}${u}`:`${h}:${l.toString().padStart(2,"0")}${u}`};return s.start==="00:00"&&s.end==="23:59"?"Any time":`${e(s.start)}  ${e(s.end)}`}function Z6(s){if(!s||s.length===0)return"Any day";const e={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return s.map(n=>e[n]||n).join(", ")}function e3(s){if(!s)return"";const e=new Date,n=new Date(s),i=e-n,l=Math.floor(i/6e4);if(l<60)return`${l}m ago`;const u=Math.floor(l/60);return u<24?`${u}h ago`:`${Math.floor(u/24)}d ago`}function t3(){const{slug:s,refCode:e}=tu(),[n,i]=j.useState(null),[l,u]=j.useState(null),[h,p]=j.useState(!0),[g,x]=j.useState(!1),[b,w]=j.useState(null),[N,C]=j.useState(!1),[G,z]=j.useState(null);if(j.useEffect(()=>{(async()=>{p(!0);try{const le=Ds(mt(Ae,"shops"),xs("slug","==",s)),S=await Ms(le);if(S.empty)x(!0);else{const A=S.docs[0];i(A.data()),u(A.id)}}catch(le){console.error("Error looking up shop:",le),x(!0)}finally{p(!1)}})()},[s]),j.useEffect(()=>{if(!l)return;(async()=>{try{const le=Ds(mt(Ae,"shops",l,"waitlist"),xs("refCode","==",e.toUpperCase())),S=await Ms(le);if(S.empty){C(!0);return}const A=S.docs[0],R={id:A.id,...A.data()};w(R);const V=Ds(mt(Ae,"shops",l,"waitlist"),xs("serviceId","==",R.serviceId),xs("status","==","waiting")),I=(await Ms(V)).docs.map(q=>({id:q.id,...q.data()})).sort((q,ne)=>(q.createdAt||"").localeCompare(ne.createdAt||"")).findIndex(q=>q.id===R.id);I>=0&&z(I+1)}catch(le){console.error("Error looking up waitlist entry:",le),C(!0)}})()},[l,e]),h)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Ht,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),o.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,o.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),o.jsxs(et,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Za,{className:"w-4 h-4"}),"Go Home"]})]})});if(N)return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),o.jsx(H_,{})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Xp,{className:"w-8 h-8 text-amber-500"})}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Waitlist Entry Not Found"}),o.jsx("p",{className:"text-slate-600 mb-2",children:"No waitlist entry found with reference code"}),o.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),o.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Ht,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading waitlist"})]})});const O={waiting:{label:"Waiting",color:"bg-blue-100 text-blue-700 border-blue-200",icon:ss},notified:{label:"Slot Available!",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Zl},booked:{label:"Booked",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ya},expired:{label:"Expired",color:"bg-slate-100 text-slate-500 border-slate-200",icon:ss}},L=O[b.status]||O.waiting,H=L.icon,K=pe=>pe?new Date(pe+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",fe=pe=>{if(!pe)return"";const[le,S]=pe.split(":"),A=parseInt(le),R=A>=12?"PM":"AM";return`${A%12||12}:${S} ${R}`};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),o.jsx(H_,{})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:o.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[b.status==="notified"&&o.jsx("div",{className:"mb-6 animate-scale-in",children:o.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Zl,{className:"w-8 h-8 text-emerald-600"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"A Slot Is Available!"}),o.jsxs("p",{className:"text-slate-600 mb-4",children:["A slot has opened up for ",b.serviceName,". Book now before it's taken!"]}),b.notifiedSlot&&o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-xl text-sm text-emerald-700 font-medium mb-4",children:[o.jsx(Ht,{className:"w-4 h-4"}),K(b.notifiedSlot.date)," at"," ",fe(b.notifiedSlot.time),b.notifiedSlot.staffName&&o.jsxs("span",{className:"text-emerald-600",children:[" ","with ",b.notifiedSlot.staffName]})]}),o.jsx("div",{children:o.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-emerald-600/20 hover:shadow-lg",children:[o.jsx(Ht,{className:"w-4 h-4"}),"Book Now "]})})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Waitlist Status"}),o.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference:"," ",o.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${L.color}`,children:[o.jsx(H,{className:"w-3.5 h-3.5"}),L.label]})]}),b.status==="waiting"&&G!=null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Position"}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Wp,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"font-bold text-slate-900 text-lg",children:["#",G]}),o.jsx("span",{className:"text-sm text-slate-500",children:"in line"})]})]}),b.serviceName&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(Sa,{className:"w-4 h-4 text-blue-600"})}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.staffName&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center",children:o.jsx(es,{className:"w-4 h-4 text-violet-600"})}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),b.preferredDate&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(Ht,{className:"w-4 h-4 text-slate-600"})}),o.jsxs("span",{className:"text-sm text-slate-700",children:["Preferred: ",K(b.preferredDate)]})]}),b.preferredDays&&b.preferredDays.length>0&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(Ht,{className:"w-4 h-4 text-slate-600"})}),o.jsxs("span",{className:"text-sm text-slate-700",children:["Days: ",Z6(b.preferredDays)]})]}),b.preferredTimeRange&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(ss,{className:"w-4 h-4 text-slate-500"})}),o.jsxs("span",{className:"text-sm text-slate-700",children:["Time: ",J6(b.preferredTimeRange)]})]}),b.createdAt&&o.jsxs("div",{className:"pt-2 border-t border-slate-100 text-xs text-slate-400",children:["Joined ",e3(b.createdAt)]})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[o.jsx(Ht,{className:"w-4 h-4"}),b.status==="notified"?"Book Now":"Check Available Slots"]})})]})}),o.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:o.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",o.jsx(et,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function n3(){const[s,e]=j.useState(null),[n,i]=j.useState(!0);return j.useEffect(()=>{const l=uR(Zr,u=>{e(u),i(!1)});return()=>l()},[]),n?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):o.jsx(bS,{children:o.jsxs(Q2,{children:[o.jsx(pa,{path:"/",element:o.jsx(E6,{})}),o.jsx(pa,{path:"/register",element:o.jsx(T6,{})}),o.jsx(pa,{path:"/login",element:o.jsx(S6,{user:s})}),o.jsx(pa,{path:"/shop/:slug",element:o.jsx(M6,{})}),o.jsx(pa,{path:"/shop/:slug/booking/:refCode",element:o.jsx(X6,{})}),o.jsx(pa,{path:"/shop/:slug/waitlist/:refCode",element:o.jsx(t3,{})}),o.jsx(pa,{path:"/shop/:slug/login",element:o.jsx(W6,{user:s})}),o.jsx(pa,{path:"/shop/:slug/dashboard",element:o.jsx(Q6,{user:s})}),o.jsx(pa,{path:"*",element:o.jsx(Y2,{to:"/",replace:!0})})]})})}XT.createRoot(document.getElementById("root")).render(o.jsx(FT.StrictMode,{children:o.jsx(n3,{})}));
