(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function cw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var np={exports:{}},Tc={};var Ky;function iS(){if(Ky)return Tc;Ky=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:i,key:h,ref:o!==void 0?o:null,props:u}}return Tc.Fragment=e,Tc.jsx=n,Tc.jsxs=n,Tc}var Qy;function rS(){return Qy||(Qy=1,np.exports=iS()),np.exports}var l=rS(),sp={exports:{}},Xe={};var Wy;function lS(){if(Wy)return Xe;Wy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),S=Symbol.iterator;function C(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,V={};function z(O,ne,re){this.props=O,this.context=ne,this.refs=V,this.updater=re||H}z.prototype.isReactComponent={},z.prototype.setState=function(O,ne){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ne,"setState")},z.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function Y(){}Y.prototype=z.prototype;function W(O,ne,re){this.props=O,this.context=ne,this.refs=V,this.updater=re||H}var be=W.prototype=new Y;be.constructor=W,B(be,z.prototype),be.isPureReactComponent=!0;var ge=Array.isArray;function oe(){}var A={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function I(O,ne,re){var we=re.ref;return{$$typeof:s,type:O,key:ne,ref:we!==void 0?we:null,props:re}}function L(O,ne){return I(O.type,ne,O.props)}function P(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function q(O){var ne={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(re){return ne[re]})}var D=/\/+/g;function F(O,ne){return typeof O=="object"&&O!==null&&O.key!=null?q(""+O.key):ne.toString(36)}function M(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(oe,oe):(O.status="pending",O.then(function(ne){O.status==="pending"&&(O.status="fulfilled",O.value=ne)},function(ne){O.status==="pending"&&(O.status="rejected",O.reason=ne)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function k(O,ne,re,we,ye){var Ie=typeof O;(Ie==="undefined"||Ie==="boolean")&&(O=null);var ue=!1;if(O===null)ue=!0;else switch(Ie){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(O.$$typeof){case s:case e:ue=!0;break;case y:return ue=O._init,k(ue(O._payload),ne,re,we,ye)}}if(ue)return ye=ye(O),ue=we===""?"."+F(O,0):we,ge(ye)?(re="",ue!=null&&(re=ue.replace(D,"$&/")+"/"),k(ye,ne,re,"",function(Ge){return Ge})):ye!=null&&(P(ye)&&(ye=L(ye,re+(ye.key==null||O&&O.key===ye.key?"":(""+ye.key).replace(D,"$&/")+"/")+ue)),ne.push(ye)),1;ue=0;var ze=we===""?".":we+":";if(ge(O))for(var Ue=0;Ue<O.length;Ue++)we=O[Ue],Ie=ze+F(we,Ue),ue+=k(we,ne,re,Ie,ye);else if(Ue=C(O),typeof Ue=="function")for(O=Ue.call(O),Ue=0;!(we=O.next()).done;)we=we.value,Ie=ze+F(we,Ue++),ue+=k(we,ne,re,Ie,ye);else if(Ie==="object"){if(typeof O.then=="function")return k(M(O),ne,re,we,ye);throw ne=String(O),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ue}function K(O,ne,re){if(O==null)return O;var we=[],ye=0;return k(O,we,"","",function(Ie){return ne.call(re,Ie,ye++)}),we}function fe(O){if(O._status===-1){var ne=O._result;ne=ne(),ne.then(function(re){(O._status===0||O._status===-1)&&(O._status=1,O._result=re)},function(re){(O._status===0||O._status===-1)&&(O._status=2,O._result=re)}),O._status===-1&&(O._status=0,O._result=ne)}if(O._status===1)return O._result.default;throw O._result}var Se=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},_e={map:K,forEach:function(O,ne,re){K(O,function(){ne.apply(this,arguments)},re)},count:function(O){var ne=0;return K(O,function(){ne++}),ne},toArray:function(O){return K(O,function(ne){return ne})||[]},only:function(O){if(!P(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Xe.Activity=w,Xe.Children=_e,Xe.Component=z,Xe.Fragment=n,Xe.Profiler=o,Xe.PureComponent=W,Xe.StrictMode=i,Xe.Suspense=g,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return A.H.useMemoCache(O)}},Xe.cache=function(O){return function(){return O.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(O,ne,re){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var we=B({},O.props),ye=O.key;if(ne!=null)for(Ie in ne.key!==void 0&&(ye=""+ne.key),ne)!j.call(ne,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&ne.ref===void 0||(we[Ie]=ne[Ie]);var Ie=arguments.length-2;if(Ie===1)we.children=re;else if(1<Ie){for(var ue=Array(Ie),ze=0;ze<Ie;ze++)ue[ze]=arguments[ze+2];we.children=ue}return I(O.type,ye,we)},Xe.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Xe.createElement=function(O,ne,re){var we,ye={},Ie=null;if(ne!=null)for(we in ne.key!==void 0&&(Ie=""+ne.key),ne)j.call(ne,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(ye[we]=ne[we]);var ue=arguments.length-2;if(ue===1)ye.children=re;else if(1<ue){for(var ze=Array(ue),Ue=0;Ue<ue;Ue++)ze[Ue]=arguments[Ue+2];ye.children=ze}if(O&&O.defaultProps)for(we in ue=O.defaultProps,ue)ye[we]===void 0&&(ye[we]=ue[we]);return I(O,Ie,ye)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(O){return{$$typeof:p,render:O}},Xe.isValidElement=P,Xe.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:fe}},Xe.memo=function(O,ne){return{$$typeof:x,type:O,compare:ne===void 0?null:ne}},Xe.startTransition=function(O){var ne=A.T,re={};A.T=re;try{var we=O(),ye=A.S;ye!==null&&ye(re,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(oe,Se)}catch(Ie){Se(Ie)}finally{ne!==null&&re.types!==null&&(ne.types=re.types),A.T=ne}},Xe.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Xe.use=function(O){return A.H.use(O)},Xe.useActionState=function(O,ne,re){return A.H.useActionState(O,ne,re)},Xe.useCallback=function(O,ne){return A.H.useCallback(O,ne)},Xe.useContext=function(O){return A.H.useContext(O)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(O,ne){return A.H.useDeferredValue(O,ne)},Xe.useEffect=function(O,ne){return A.H.useEffect(O,ne)},Xe.useEffectEvent=function(O){return A.H.useEffectEvent(O)},Xe.useId=function(){return A.H.useId()},Xe.useImperativeHandle=function(O,ne,re){return A.H.useImperativeHandle(O,ne,re)},Xe.useInsertionEffect=function(O,ne){return A.H.useInsertionEffect(O,ne)},Xe.useLayoutEffect=function(O,ne){return A.H.useLayoutEffect(O,ne)},Xe.useMemo=function(O,ne){return A.H.useMemo(O,ne)},Xe.useOptimistic=function(O,ne){return A.H.useOptimistic(O,ne)},Xe.useReducer=function(O,ne,re){return A.H.useReducer(O,ne,re)},Xe.useRef=function(O){return A.H.useRef(O)},Xe.useState=function(O){return A.H.useState(O)},Xe.useSyncExternalStore=function(O,ne,re){return A.H.useSyncExternalStore(O,ne,re)},Xe.useTransition=function(){return A.H.useTransition()},Xe.version="19.2.4",Xe}var Xy;function mg(){return Xy||(Xy=1,sp.exports=lS()),sp.exports}var N=mg();const oS=cw(N);var ap={exports:{}},jc={},ip={exports:{}},rp={};var Jy;function cS(){return Jy||(Jy=1,(function(s){function e(k,K){var fe=k.length;k.push(K);e:for(;0<fe;){var Se=fe-1>>>1,_e=k[Se];if(0<o(_e,K))k[Se]=K,k[fe]=_e,fe=Se;else break e}}function n(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var K=k[0],fe=k.pop();if(fe!==K){k[0]=fe;e:for(var Se=0,_e=k.length,O=_e>>>1;Se<O;){var ne=2*(Se+1)-1,re=k[ne],we=ne+1,ye=k[we];if(0>o(re,fe))we<_e&&0>o(ye,re)?(k[Se]=ye,k[we]=fe,Se=we):(k[Se]=re,k[ne]=fe,Se=ne);else if(we<_e&&0>o(ye,fe))k[Se]=ye,k[we]=fe,Se=we;else break e}}return K}function o(k,K){var fe=k.sortIndex-K.sortIndex;return fe!==0?fe:k.id-K.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],x=[],y=1,w=null,S=3,C=!1,H=!1,B=!1,V=!1,z=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function be(k){for(var K=n(x);K!==null;){if(K.callback===null)i(x);else if(K.startTime<=k)i(x),K.sortIndex=K.expirationTime,e(g,K);else break;K=n(x)}}function ge(k){if(B=!1,be(k),!H)if(n(g)!==null)H=!0,oe||(oe=!0,q());else{var K=n(x);K!==null&&M(ge,K.startTime-k)}}var oe=!1,A=-1,j=5,I=-1;function L(){return V?!0:!(s.unstable_now()-I<j)}function P(){if(V=!1,oe){var k=s.unstable_now();I=k;var K=!0;try{e:{H=!1,B&&(B=!1,Y(A),A=-1),C=!0;var fe=S;try{t:{for(be(k),w=n(g);w!==null&&!(w.expirationTime>k&&L());){var Se=w.callback;if(typeof Se=="function"){w.callback=null,S=w.priorityLevel;var _e=Se(w.expirationTime<=k);if(k=s.unstable_now(),typeof _e=="function"){w.callback=_e,be(k),K=!0;break t}w===n(g)&&i(g),be(k)}else i(g);w=n(g)}if(w!==null)K=!0;else{var O=n(x);O!==null&&M(ge,O.startTime-k),K=!1}}break e}finally{w=null,S=fe,C=!1}K=void 0}}finally{K?q():oe=!1}}}var q;if(typeof W=="function")q=function(){W(P)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=P,q=function(){F.postMessage(null)}}else q=function(){z(P,0)};function M(k,K){A=z(function(){k(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(k){k.callback=null},s.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<k?Math.floor(1e3/k):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(k){switch(S){case 1:case 2:case 3:var K=3;break;default:K=S}var fe=S;S=K;try{return k()}finally{S=fe}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(k,K){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var fe=S;S=k;try{return K()}finally{S=fe}},s.unstable_scheduleCallback=function(k,K,fe){var Se=s.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Se+fe:Se):fe=Se,k){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=fe+_e,k={id:y++,callback:K,priorityLevel:k,startTime:fe,expirationTime:_e,sortIndex:-1},fe>Se?(k.sortIndex=fe,e(x,k),n(g)===null&&k===n(x)&&(B?(Y(A),A=-1):B=!0,M(ge,fe-Se))):(k.sortIndex=_e,e(g,k),H||C||(H=!0,oe||(oe=!0,q()))),k},s.unstable_shouldYield=L,s.unstable_wrapCallback=function(k){var K=S;return function(){var fe=S;S=K;try{return k.apply(this,arguments)}finally{S=fe}}}})(rp)),rp}var Zy;function uS(){return Zy||(Zy=1,ip.exports=cS()),ip.exports}var lp={exports:{}},Pn={};var ev;function dS(){if(ev)return Pn;ev=1;var s=mg();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,x,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:x,implementation:y}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Pn.createPortal=function(g,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(g,x,null,y)},Pn.flushSync=function(g){var x=h.T,y=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=x,i.p=y,i.d.f()}},Pn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(g,x))},Pn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Pn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var y=x.as,w=p(y,x.crossOrigin),S=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?i.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:C}):y==="script"&&i.d.X(g,{crossOrigin:w,integrity:S,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Pn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=p(x.as,x.crossOrigin);i.d.M(g,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(g)},Pn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,w=p(y,x.crossOrigin);i.d.L(g,y,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Pn.preloadModule=function(g,x){if(typeof g=="string")if(x){var y=p(x.as,x.crossOrigin);i.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(g)},Pn.requestFormReset=function(g){i.d.r(g)},Pn.unstable_batchedUpdates=function(g,x){return g(x)},Pn.useFormState=function(g,x,y){return h.H.useFormState(g,x,y)},Pn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Pn.version="19.2.4",Pn}var tv;function hS(){if(tv)return lp.exports;tv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),lp.exports=dS(),lp.exports}var nv;function fS(){if(nv)return jc;nv=1;var s=uS(),e=mg(),n=hS();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function h(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function p(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function x(t){var a=t.alternate;if(!a){if(a=u(t),a===null)throw Error(i(188));return a!==t?null:t}for(var r=t,c=a;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return g(f),t;if(m===c)return g(f),a;m=m.sibling}throw Error(i(188))}if(r.return!==c.return)r=f,c=m;else{for(var v=!1,E=f.child;E;){if(E===r){v=!0,r=f,c=m;break}if(E===c){v=!0,c=f,r=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===r){v=!0,r=m,c=f;break}if(E===c){v=!0,c=m,r=f;break}E=E.sibling}if(!v)throw Error(i(189))}}if(r.alternate!==c)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:a}function y(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=y(t),a!==null)return a;t=t.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),W=Symbol.for("react.context"),be=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var D=Symbol.for("react.client.reference");function F(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===D?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case z:return"Profiler";case V:return"StrictMode";case ge:return"Suspense";case oe:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case H:return"Portal";case W:return t.displayName||"Context";case Y:return(t._context.displayName||"Context")+".Consumer";case be:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A:return a=t.displayName||null,a!==null?a:F(t.type)||"Memo";case j:a=t._payload,t=t._init;try{return F(t(a))}catch{}}return null}var M=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Se=[],_e=-1;function O(t){return{current:t}}function ne(t){0>_e||(t.current=Se[_e],Se[_e]=null,_e--)}function re(t,a){_e++,Se[_e]=t.current,t.current=a}var we=O(null),ye=O(null),Ie=O(null),ue=O(null);function ze(t,a){switch(re(Ie,a),re(ye,t),re(we,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?xy(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=xy(a),t=by(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ne(we),re(we,t)}function Ue(){ne(we),ne(ye),ne(Ie)}function Ge(t){t.memoizedState!==null&&re(ue,t);var a=we.current,r=by(a,t.type);a!==r&&(re(ye,t),re(we,r))}function J(t){ye.current===t&&(ne(we),ne(ye)),ue.current===t&&(ne(ue),wc._currentValue=fe)}var ve,Oe;function Ve(t){if(ve===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);ve=a&&a[1]||"",Oe=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+t+Oe}var He=!1;function gt(t,a){if(!t||He)return"";He=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ie){var se=ie}Reflect.construct(t,[],me)}else{try{me.call()}catch(ie){se=ie}t.call(me.prototype)}}else{try{throw Error()}catch(ie){se=ie}(me=t())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ie){if(ie&&se&&typeof ie.stack=="string")return[ie.stack,se.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var U=v.split(`
`),te=E.split(`
`);for(f=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;f<te.length&&!te[f].includes("DetermineComponentFrameRoot");)f++;if(c===U.length||f===te.length)for(c=U.length-1,f=te.length-1;1<=c&&0<=f&&U[c]!==te[f];)f--;for(;1<=c&&0<=f;c--,f--)if(U[c]!==te[f]){if(c!==1||f!==1)do if(c--,f--,0>f||U[c]!==te[f]){var le=`
`+U[c].replace(" at new "," at ");return t.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",t.displayName)),le}while(1<=c&&0<=f);break}}}finally{He=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Ve(r):""}function Fn(t,a){switch(t.tag){case 26:case 27:case 5:return Ve(t.type);case 16:return Ve("Lazy");case 13:return t.child!==a&&a!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return gt(t.type,!1);case 11:return gt(t.type.render,!1);case 1:return gt(t.type,!0);case 31:return Ve("Activity");default:return""}}function xn(t){try{var a="",r=null;do a+=Fn(t,r),r=t,t=t.return;while(t);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var vt=Object.prototype.hasOwnProperty,je=s.unstable_scheduleCallback,Be=s.unstable_cancelCallback,it=s.unstable_shouldYield,Lt=s.unstable_requestPaint,xt=s.unstable_now,lt=s.unstable_getCurrentPriorityLevel,rn=s.unstable_ImmediatePriority,_t=s.unstable_UserBlockingPriority,ws=s.unstable_NormalPriority,bn=s.unstable_LowPriority,Vn=s.unstable_IdlePriority,Ls=s.log,Ma=s.unstable_setDisableYieldValue,R=null,G=null;function de(t){if(typeof Ls=="function"&&Ma(t),G&&typeof G.setStrictMode=="function")try{G.setStrictMode(R,t)}catch{}}var ce=Math.clz32?Math.clz32:Ce,Me=Math.log,Te=Math.LN2;function Ce(t){return t>>>=0,t===0?32:31-(Me(t)/Te|0)|0}var Re=256,rt=262144,ot=4194304;function $t(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Gt(t,a,r){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?f=$t(c):(v&=E,v!==0?f=$t(v):r||(r=E&~t,r!==0&&(f=$t(r))))):(E=c&~m,E!==0?f=$t(E):v!==0?f=$t(v):r||(r=c&~t,r!==0&&(f=$t(r)))),f===0?0:a!==0&&a!==f&&(a&m)===0&&(m=f&-f,r=a&-a,m>=r||m===32&&(r&4194048)!==0)?a:f}function qn(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function na(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _n(){var t=ot;return ot<<=1,(ot&62914560)===0&&(ot=4194304),t}function Hn(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function wn(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function sa(t,a,r,c,f,m){var v=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var E=t.entanglements,U=t.expirationTimes,te=t.hiddenUpdates;for(r=v&~r;0<r;){var le=31-ce(r),me=1<<le;E[le]=0,U[le]=-1;var se=te[le];if(se!==null)for(te[le]=null,le=0;le<se.length;le++){var ie=se[le];ie!==null&&(ie.lane&=-536870913)}r&=~me}c!==0&&Us(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~a))}function Us(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var c=31-ce(a);t.entangledLanes|=a,t.entanglements[c]=t.entanglements[c]|1073741824|r&261930}function Oa(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var c=31-ce(r),f=1<<c;f&a|t[c]&a&&(t[c]|=a),r&=~f}}function fi(t,a){var r=a&-a;return r=(r&42)!==0?1:mi(r),(r&(t.suspendedLanes|a))!==0?0:r}function mi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Va(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function vu(){var t=K.p;return t!==0?t:(t=window.event,t===void 0?32:zy(t.type))}function Bs(t,a){var r=K.p;try{return K.p=t,a()}finally{K.p=r}}var zs=Math.random().toString(36).slice(2),ln="__reactFiber$"+zs,Nn="__reactProps$"+zs,aa="__reactContainer$"+zs,ml="__reactEvents$"+zs,of="__reactListeners$"+zs,_u="__reactHandles$"+zs,wu="__reactResources$"+zs,ia="__reactMarker$"+zs;function pl(t){delete t[ln],delete t[Nn],delete t[ml],delete t[of],delete t[_u]}function ra(t){var a=t[ln];if(a)return a;for(var r=t.parentNode;r;){if(a=r[aa]||r[ln]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=Sy(t);t!==null;){if(r=t[ln])return r;t=Sy(t)}return a}t=r,r=t.parentNode}return null}function Ns(t){if(t=t[ln]||t[aa]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function rs(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function la(t){var a=t[wu];return a||(a=t[wu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function on(t){t[ia]=!0}var Co=new Set,Ro={};function oa(t,a){ca(t,a),ca(t+"Capture",a)}function ca(t,a){for(Ro[t]=a,t=0;t<a.length;t++)Co.add(a[t])}var ko=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Io={},Do={};function Nu(t){return vt.call(Do,t)?!0:vt.call(Io,t)?!1:ko.test(t)?Do[t]=!0:(Io[t]=!0,!1)}function gl(t,a,r){if(Nu(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function ls(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function cn(t,a,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+c)}}function En(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pi(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Mo(t,a,r){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(v){r=""+v,m.call(this,v)}}),Object.defineProperty(t,a,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function At(t){if(!t._valueTracker){var a=pi(t)?"checked":"value";t._valueTracker=Mo(t,a,""+t[a])}}function yr(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),c="";return t&&(c=pi(t)?t.checked?"true":"false":t.value),t=c,t!==r?(a.setValue(t),!0):!1}function ua(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var vr=/[\n"\\]/g;function Kn(t){return t.replace(vr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function xl(t,a,r,c,f,m,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),a!=null?v==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+En(a)):t.value!==""+En(a)&&(t.value=""+En(a)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),a!=null?Oo(t,v,En(a)):r!=null?Oo(t,v,En(r)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+En(E):t.removeAttribute("name")}function Eu(t,a,r,c,f,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),a!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||a!=null)){At(t);return}r=r!=null?""+En(r):"",a=a!=null?""+En(a):r,E||a===t.value||(t.value=a),t.defaultValue=a}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=E?t.checked:!!c,t.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),At(t)}function Oo(t,a,r){a==="number"&&ua(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function gi(t,a,r,c){if(t=t.options,a){a={};for(var f=0;f<r.length;f++)a["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=a.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&c&&(t[r].defaultSelected=!0)}else{for(r=""+En(r),a=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function Su(t,a,r){if(a!=null&&(a=""+En(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+En(r):""}function xi(t,a,r,c){if(a==null){if(c!=null){if(r!=null)throw Error(i(92));if(M(c)){if(1<c.length)throw Error(i(93));c=c[0]}r=c}r==null&&(r=""),a=r}r=En(a),t.defaultValue=r,c=t.textContent,c===r&&c!==""&&c!==null&&(t.value=c),At(t)}function Qn(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var Tu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vo(t,a,r){var c=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":c?t.setProperty(a,r):typeof r!="number"||r===0||Tu.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function Po(t,a,r){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in a)c=a[f],a.hasOwnProperty(f)&&r[f]!==c&&Vo(t,f,c)}else for(var m in a)a.hasOwnProperty(m)&&Vo(t,m,a[m])}function bl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ju=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yl(t){return bi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Fs(){}var Lo=null;function Es(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yi=null,da=null;function _r(t){var a=Ns(t);if(a&&(t=a.stateNode)){var r=t[Nn]||null;e:switch(t=a.stateNode,a.type){case"input":if(xl(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Kn(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var c=r[a];if(c!==t&&c.form===t.form){var f=c[Nn]||null;if(!f)throw Error(i(90));xl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<r.length;a++)c=r[a],c.form===t.form&&yr(c)}break e;case"textarea":Su(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&gi(t,!!r.multiple,a,!1)}}}var vl=!1;function vi(t,a,r){if(vl)return t(a,r);vl=!0;try{var c=t(a);return c}finally{if(vl=!1,(yi!==null||da!==null)&&(vd(),yi&&(a=yi,t=da,da=yi=null,_r(a),t)))for(a=0;a<t.length;a++)_r(t[a])}}function qs(t,a){var r=t.stateNode;if(r===null)return null;var c=r[Nn]||null;if(c===null)return null;r=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,a,typeof r));return r}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wr=!1;if(Ss)try{var kt={};Object.defineProperty(kt,"passive",{get:function(){wr=!0}}),window.addEventListener("test",kt,kt),window.removeEventListener("test",kt,kt)}catch{wr=!1}var ha=null,Uo=null,Nr=null;function Bo(){if(Nr)return Nr;var t,a=Uo,r=a.length,c,f="value"in ha?ha.value:ha.textContent,m=f.length;for(t=0;t<r&&a[t]===f[t];t++);var v=r-t;for(c=1;c<=v&&a[r-c]===f[m-c];c++);return Nr=f.slice(t,1<c?1-c:void 0)}function Er(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Pa(){return!0}function Hs(){return!1}function An(t){function a(r,c,f,m,v){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Pa:Hs,this.isPropagationStopped=Hs,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),a}var La={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=An(La),_i=w({},La,{view:0,detail:0}),zo=An(_i),wi,_l,ma,wl=w({},_i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ni,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(wi=t.screenX-ma.screenX,_l=t.screenY-ma.screenY):_l=wi=0,ma=t),wi)},movementY:function(t){return"movementY"in t?t.movementY:_l}}),Fo=An(wl),Sr=w({},wl,{dataTransfer:0}),Au=An(Sr),Cu=w({},_i,{relatedTarget:0}),Tr=An(Cu),qo=w({},La,{animationName:0,elapsedTime:0,pseudoElement:0}),Ru=An(qo),Nl=w({},La,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ku=An(Nl),Iu=w({},La,{data:0}),pa=An(Iu),Du={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vu(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Ou[t])?!!a[t]:!1}function Ni(){return Vu}var $n=w({},_i,{key:function(t){if(t.key){var a=Du[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Er(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ni,charCode:function(t){return t.type==="keypress"?Er(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Er(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pu=An($n),Lu=w({},wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ua=An(Lu),d=w({},_i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ni}),b=An(d),_=w({},La,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=An(_),Z=w({},wl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=An(Z),Ee=w({},La,{newState:0,oldState:0}),tt=An(Ee),tn=[9,13,27,32],Et=Ss&&"CompositionEvent"in window,zt=null;Ss&&"documentMode"in document&&(zt=document.documentMode);var Ts=Ss&&"TextEvent"in window&&!zt,ga=Ss&&(!Et||zt&&8<zt&&11>=zt),$s=" ",Gs=!1;function jr(t,a){switch(t){case"keyup":return tn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function El(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sl=!1;function C2(t,a){switch(t){case"compositionend":return El(a);case"keypress":return a.which!==32?null:(Gs=!0,$s);case"textInput":return t=a.data,t===$s&&Gs?null:t;default:return null}}function R2(t,a){if(Sl)return t==="compositionend"||!Et&&jr(t,a)?(t=Bo(),Nr=Uo=ha=null,Sl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ga&&a.locale!=="ko"?null:a.data;default:return null}}var k2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A0(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!k2[t.type]:a==="textarea"}function C0(t,a,r,c){yi?da?da.push(c):da=[c]:yi=c,a=jd(a,"onChange"),0<a.length&&(r=new fa("onChange","change",null,r,c),t.push({event:r,listeners:a}))}var Ho=null,$o=null;function I2(t){dy(t,0)}function Uu(t){var a=rs(t);if(yr(a))return t}function R0(t,a){if(t==="change")return a}var k0=!1;if(Ss){var cf;if(Ss){var uf="oninput"in document;if(!uf){var I0=document.createElement("div");I0.setAttribute("oninput","return;"),uf=typeof I0.oninput=="function"}cf=uf}else cf=!1;k0=cf&&(!document.documentMode||9<document.documentMode)}function D0(){Ho&&(Ho.detachEvent("onpropertychange",M0),$o=Ho=null)}function M0(t){if(t.propertyName==="value"&&Uu($o)){var a=[];C0(a,$o,t,Es(t)),vi(I2,a)}}function D2(t,a,r){t==="focusin"?(D0(),Ho=a,$o=r,Ho.attachEvent("onpropertychange",M0)):t==="focusout"&&D0()}function M2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Uu($o)}function O2(t,a){if(t==="click")return Uu(a)}function V2(t,a){if(t==="input"||t==="change")return Uu(a)}function P2(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var os=typeof Object.is=="function"?Object.is:P2;function Go(t,a){if(os(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),c=Object.keys(a);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!vt.call(a,f)||!os(t[f],a[f]))return!1}return!0}function O0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function V0(t,a){var r=O0(t);t=0;for(var c;r;){if(r.nodeType===3){if(c=t+r.textContent.length,t<=a&&c>=a)return{node:r,offset:a-t};t=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=O0(r)}}function P0(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?P0(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function L0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=ua(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=ua(t.document)}return a}function df(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var L2=Ss&&"documentMode"in document&&11>=document.documentMode,Tl=null,hf=null,Yo=null,ff=!1;function U0(t,a,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ff||Tl==null||Tl!==ua(c)||(c=Tl,"selectionStart"in c&&df(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Yo&&Go(Yo,c)||(Yo=c,c=jd(hf,"onSelect"),0<c.length&&(a=new fa("onSelect","select",null,a,r),t.push({event:a,listeners:c}),a.target=Tl)))}function Ar(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var jl={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionrun:Ar("Transition","TransitionRun"),transitionstart:Ar("Transition","TransitionStart"),transitioncancel:Ar("Transition","TransitionCancel"),transitionend:Ar("Transition","TransitionEnd")},mf={},B0={};Ss&&(B0=document.createElement("div").style,"AnimationEvent"in window||(delete jl.animationend.animation,delete jl.animationiteration.animation,delete jl.animationstart.animation),"TransitionEvent"in window||delete jl.transitionend.transition);function Cr(t){if(mf[t])return mf[t];if(!jl[t])return t;var a=jl[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in B0)return mf[t]=a[r];return t}var z0=Cr("animationend"),F0=Cr("animationiteration"),q0=Cr("animationstart"),U2=Cr("transitionrun"),B2=Cr("transitionstart"),z2=Cr("transitioncancel"),H0=Cr("transitionend"),$0=new Map,pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pf.push("scrollEnd");function Ys(t,a){$0.set(t,a),oa(a,[t])}var Bu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},js=[],Al=0,gf=0;function zu(){for(var t=Al,a=gf=Al=0;a<t;){var r=js[a];js[a++]=null;var c=js[a];js[a++]=null;var f=js[a];js[a++]=null;var m=js[a];if(js[a++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&G0(r,f,m)}}function Fu(t,a,r,c){js[Al++]=t,js[Al++]=a,js[Al++]=r,js[Al++]=c,gf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function xf(t,a,r,c){return Fu(t,a,r,c),qu(t)}function Rr(t,a){return Fu(t,null,null,a),qu(t)}function G0(t,a,r){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r);for(var f=!1,m=t.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&a!==null&&(f=31-ce(r),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[a]:c.push(a),a.lane=r|536870912),m):null}function qu(t){if(50<pc)throw pc=0,Tm=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Cl={};function F2(t,a,r,c){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(t,a,r,c){return new F2(t,a,r,c)}function bf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ba(t,a){var r=t.alternate;return r===null?(r=cs(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Y0(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Hu(t,a,r,c,f,m){var v=0;if(c=t,typeof t=="function")bf(t)&&(v=1);else if(typeof t=="string")v=YE(t,r,we.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=cs(31,r,a,f),t.elementType=I,t.lanes=m,t;case B:return kr(r.children,f,m,a);case V:v=8,f|=24;break;case z:return t=cs(12,r,a,f|2),t.elementType=z,t.lanes=m,t;case ge:return t=cs(13,r,a,f),t.elementType=ge,t.lanes=m,t;case oe:return t=cs(19,r,a,f),t.elementType=oe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case W:v=10;break e;case Y:v=9;break e;case be:v=11;break e;case A:v=14;break e;case j:v=16,c=null;break e}v=29,r=Error(i(130,t===null?"null":typeof t,"")),c=null}return a=cs(v,r,a,f),a.elementType=t,a.type=c,a.lanes=m,a}function kr(t,a,r,c){return t=cs(7,t,c,a),t.lanes=r,t}function yf(t,a,r){return t=cs(6,t,null,a),t.lanes=r,t}function K0(t){var a=cs(18,null,null,0);return a.stateNode=t,a}function vf(t,a,r){return a=cs(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Q0=new WeakMap;function As(t,a){if(typeof t=="object"&&t!==null){var r=Q0.get(t);return r!==void 0?r:(a={value:t,source:a,stack:xn(a)},Q0.set(t,a),a)}return{value:t,source:a,stack:xn(a)}}var Rl=[],kl=0,$u=null,Ko=0,Cs=[],Rs=0,Ei=null,xa=1,ba="";function za(t,a){Rl[kl++]=Ko,Rl[kl++]=$u,$u=t,Ko=a}function W0(t,a,r){Cs[Rs++]=xa,Cs[Rs++]=ba,Cs[Rs++]=Ei,Ei=t;var c=xa;t=ba;var f=32-ce(c)-1;c&=~(1<<f),r+=1;var m=32-ce(a)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,xa=1<<32-ce(a)+f|r<<f|c,ba=m+t}else xa=1<<m|r<<f|c,ba=t}function _f(t){t.return!==null&&(za(t,1),W0(t,1,0))}function wf(t){for(;t===$u;)$u=Rl[--kl],Rl[kl]=null,Ko=Rl[--kl],Rl[kl]=null;for(;t===Ei;)Ei=Cs[--Rs],Cs[Rs]=null,ba=Cs[--Rs],Cs[Rs]=null,xa=Cs[--Rs],Cs[Rs]=null}function X0(t,a){Cs[Rs++]=xa,Cs[Rs++]=ba,Cs[Rs++]=Ei,xa=a.id,ba=a.overflow,Ei=t}var Cn=null,Ut=null,bt=!1,Si=null,ks=!1,Nf=Error(i(519));function Ti(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qo(As(a,t)),Nf}function J0(t){var a=t.stateNode,r=t.type,c=t.memoizedProps;switch(a[ln]=t,a[Nn]=c,r){case"dialog":ut("cancel",a),ut("close",a);break;case"iframe":case"object":case"embed":ut("load",a);break;case"video":case"audio":for(r=0;r<xc.length;r++)ut(xc[r],a);break;case"source":ut("error",a);break;case"img":case"image":case"link":ut("error",a),ut("load",a);break;case"details":ut("toggle",a);break;case"input":ut("invalid",a),Eu(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ut("invalid",a);break;case"textarea":ut("invalid",a),xi(a,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||c.suppressHydrationWarning===!0||py(a.textContent,r)?(c.popover!=null&&(ut("beforetoggle",a),ut("toggle",a)),c.onScroll!=null&&ut("scroll",a),c.onScrollEnd!=null&&ut("scrollend",a),c.onClick!=null&&(a.onclick=Fs),a=!0):a=!1,a||Ti(t,!0)}function Z0(t){for(Cn=t.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:ks=!1;return;case 27:case 3:ks=!0;return;default:Cn=Cn.return}}function Il(t){if(t!==Cn)return!1;if(!bt)return Z0(t),bt=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||zm(t.type,t.memoizedProps)),r=!r),r&&Ut&&Ti(t),Z0(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ut=Ey(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ut=Ey(t)}else a===27?(a=Ut,Bi(t.type)?(t=Gm,Gm=null,Ut=t):Ut=a):Ut=Cn?Ds(t.stateNode.nextSibling):null;return!0}function Ir(){Ut=Cn=null,bt=!1}function Ef(){var t=Si;return t!==null&&(Zn===null?Zn=t:Zn.push.apply(Zn,t),Si=null),t}function Qo(t){Si===null?Si=[t]:Si.push(t)}var Sf=O(null),Dr=null,Fa=null;function ji(t,a,r){re(Sf,a._currentValue),a._currentValue=r}function qa(t){t._currentValue=Sf.current,ne(Sf)}function Tf(t,a,r){for(;t!==null;){var c=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),t===r)break;t=t.return}}function jf(t,a,r,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var U=0;U<a.length;U++)if(E.context===a[U]){m.lanes|=r,E=m.alternate,E!==null&&(E.lanes|=r),Tf(m.return,r,t),c||(v=null);break e}m=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(i(341));v.lanes|=r,m=v.alternate,m!==null&&(m.lanes|=r),Tf(v,r,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Dl(t,a,r,c){t=null;for(var f=a,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var E=f.type;os(f.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(f===ue.current){if(v=f.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(wc):t=[wc])}f=f.return}t!==null&&jf(a,t,r,c),a.flags|=262144}function Gu(t){for(t=t.firstContext;t!==null;){if(!os(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Mr(t){Dr=t,Fa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Rn(t){return ex(Dr,t)}function Yu(t,a){return Dr===null&&Mr(t),ex(t,a)}function ex(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Fa===null){if(t===null)throw Error(i(308));Fa=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Fa=Fa.next=a;return r}var q2=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,c){t.push(c)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},H2=s.unstable_scheduleCallback,$2=s.unstable_NormalPriority,un={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Af(){return{controller:new q2,data:new Map,refCount:0}}function Wo(t){t.refCount--,t.refCount===0&&H2($2,function(){t.controller.abort()})}var Xo=null,Cf=0,Ml=0,Ol=null;function G2(t,a){if(Xo===null){var r=Xo=[];Cf=0,Ml=Im(),Ol={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Cf++,a.then(tx,tx),a}function tx(){if(--Cf===0&&Xo!==null){Ol!==null&&(Ol.status="fulfilled");var t=Xo;Xo=null,Ml=0,Ol=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Y2(t,a){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){c.status="fulfilled",c.value=a;for(var f=0;f<r.length;f++)(0,r[f])(a)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var nx=k.S;k.S=function(t,a){Ub=xt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&G2(t,a),nx!==null&&nx(t,a)};var Or=O(null);function Rf(){var t=Or.current;return t!==null?t:Ot.pooledCache}function Ku(t,a){a===null?re(Or,Or.current):re(Or,a.pool)}function sx(){var t=Rf();return t===null?null:{parent:un._currentValue,pool:t}}var Vl=Error(i(460)),kf=Error(i(474)),Qu=Error(i(542)),Wu={then:function(){}};function ax(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ix(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(Fs,Fs),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,lx(t),t;default:if(typeof a.status=="string")a.then(Fs,Fs);else{if(t=Ot,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(c){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=c}},function(c){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,lx(t),t}throw Pr=a,Vl}}function Vr(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Pr=r,Vl):r}}var Pr=null;function rx(){if(Pr===null)throw Error(i(459));var t=Pr;return Pr=null,t}function lx(t){if(t===Vl||t===Qu)throw Error(i(483))}var Pl=null,Jo=0;function Xu(t){var a=Jo;return Jo+=1,Pl===null&&(Pl=[]),ix(Pl,t,a)}function Zo(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Ju(t,a){throw a.$$typeof===S?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function ox(t){function a(Q,$){if(t){var ee=Q.deletions;ee===null?(Q.deletions=[$],Q.flags|=16):ee.push($)}}function r(Q,$){if(!t)return null;for(;$!==null;)a(Q,$),$=$.sibling;return null}function c(Q){for(var $=new Map;Q!==null;)Q.key!==null?$.set(Q.key,Q):$.set(Q.index,Q),Q=Q.sibling;return $}function f(Q,$){return Q=Ba(Q,$),Q.index=0,Q.sibling=null,Q}function m(Q,$,ee){return Q.index=ee,t?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<$?(Q.flags|=67108866,$):ee):(Q.flags|=67108866,$)):(Q.flags|=1048576,$)}function v(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function E(Q,$,ee,he){return $===null||$.tag!==6?($=yf(ee,Q.mode,he),$.return=Q,$):($=f($,ee),$.return=Q,$)}function U(Q,$,ee,he){var Fe=ee.type;return Fe===B?le(Q,$,ee.props.children,he,ee.key):$!==null&&($.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===j&&Vr(Fe)===$.type)?($=f($,ee.props),Zo($,ee),$.return=Q,$):($=Hu(ee.type,ee.key,ee.props,null,Q.mode,he),Zo($,ee),$.return=Q,$)}function te(Q,$,ee,he){return $===null||$.tag!==4||$.stateNode.containerInfo!==ee.containerInfo||$.stateNode.implementation!==ee.implementation?($=vf(ee,Q.mode,he),$.return=Q,$):($=f($,ee.children||[]),$.return=Q,$)}function le(Q,$,ee,he,Fe){return $===null||$.tag!==7?($=kr(ee,Q.mode,he,Fe),$.return=Q,$):($=f($,ee),$.return=Q,$)}function me(Q,$,ee){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=yf(""+$,Q.mode,ee),$.return=Q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case C:return ee=Hu($.type,$.key,$.props,null,Q.mode,ee),Zo(ee,$),ee.return=Q,ee;case H:return $=vf($,Q.mode,ee),$.return=Q,$;case j:return $=Vr($),me(Q,$,ee)}if(M($)||q($))return $=kr($,Q.mode,ee,null),$.return=Q,$;if(typeof $.then=="function")return me(Q,Xu($),ee);if($.$$typeof===W)return me(Q,Yu(Q,$),ee);Ju(Q,$)}return null}function se(Q,$,ee,he){var Fe=$!==null?$.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Fe!==null?null:E(Q,$,""+ee,he);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case C:return ee.key===Fe?U(Q,$,ee,he):null;case H:return ee.key===Fe?te(Q,$,ee,he):null;case j:return ee=Vr(ee),se(Q,$,ee,he)}if(M(ee)||q(ee))return Fe!==null?null:le(Q,$,ee,he,null);if(typeof ee.then=="function")return se(Q,$,Xu(ee),he);if(ee.$$typeof===W)return se(Q,$,Yu(Q,ee),he);Ju(Q,ee)}return null}function ie(Q,$,ee,he,Fe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Q=Q.get(ee)||null,E($,Q,""+he,Fe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case C:return Q=Q.get(he.key===null?ee:he.key)||null,U($,Q,he,Fe);case H:return Q=Q.get(he.key===null?ee:he.key)||null,te($,Q,he,Fe);case j:return he=Vr(he),ie(Q,$,ee,he,Fe)}if(M(he)||q(he))return Q=Q.get(ee)||null,le($,Q,he,Fe,null);if(typeof he.then=="function")return ie(Q,$,ee,Xu(he),Fe);if(he.$$typeof===W)return ie(Q,$,ee,Yu($,he),Fe);Ju($,he)}return null}function De(Q,$,ee,he){for(var Fe=null,wt=null,Le=$,at=$=0,ht=null;Le!==null&&at<ee.length;at++){Le.index>at?(ht=Le,Le=null):ht=Le.sibling;var Nt=se(Q,Le,ee[at],he);if(Nt===null){Le===null&&(Le=ht);break}t&&Le&&Nt.alternate===null&&a(Q,Le),$=m(Nt,$,at),wt===null?Fe=Nt:wt.sibling=Nt,wt=Nt,Le=ht}if(at===ee.length)return r(Q,Le),bt&&za(Q,at),Fe;if(Le===null){for(;at<ee.length;at++)Le=me(Q,ee[at],he),Le!==null&&($=m(Le,$,at),wt===null?Fe=Le:wt.sibling=Le,wt=Le);return bt&&za(Q,at),Fe}for(Le=c(Le);at<ee.length;at++)ht=ie(Le,Q,at,ee[at],he),ht!==null&&(t&&ht.alternate!==null&&Le.delete(ht.key===null?at:ht.key),$=m(ht,$,at),wt===null?Fe=ht:wt.sibling=ht,wt=ht);return t&&Le.forEach(function($i){return a(Q,$i)}),bt&&za(Q,at),Fe}function $e(Q,$,ee,he){if(ee==null)throw Error(i(151));for(var Fe=null,wt=null,Le=$,at=$=0,ht=null,Nt=ee.next();Le!==null&&!Nt.done;at++,Nt=ee.next()){Le.index>at?(ht=Le,Le=null):ht=Le.sibling;var $i=se(Q,Le,Nt.value,he);if($i===null){Le===null&&(Le=ht);break}t&&Le&&$i.alternate===null&&a(Q,Le),$=m($i,$,at),wt===null?Fe=$i:wt.sibling=$i,wt=$i,Le=ht}if(Nt.done)return r(Q,Le),bt&&za(Q,at),Fe;if(Le===null){for(;!Nt.done;at++,Nt=ee.next())Nt=me(Q,Nt.value,he),Nt!==null&&($=m(Nt,$,at),wt===null?Fe=Nt:wt.sibling=Nt,wt=Nt);return bt&&za(Q,at),Fe}for(Le=c(Le);!Nt.done;at++,Nt=ee.next())Nt=ie(Le,Q,at,Nt.value,he),Nt!==null&&(t&&Nt.alternate!==null&&Le.delete(Nt.key===null?at:Nt.key),$=m(Nt,$,at),wt===null?Fe=Nt:wt.sibling=Nt,wt=Nt);return t&&Le.forEach(function(aS){return a(Q,aS)}),bt&&za(Q,at),Fe}function Mt(Q,$,ee,he){if(typeof ee=="object"&&ee!==null&&ee.type===B&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case C:e:{for(var Fe=ee.key;$!==null;){if($.key===Fe){if(Fe=ee.type,Fe===B){if($.tag===7){r(Q,$.sibling),he=f($,ee.props.children),he.return=Q,Q=he;break e}}else if($.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===j&&Vr(Fe)===$.type){r(Q,$.sibling),he=f($,ee.props),Zo(he,ee),he.return=Q,Q=he;break e}r(Q,$);break}else a(Q,$);$=$.sibling}ee.type===B?(he=kr(ee.props.children,Q.mode,he,ee.key),he.return=Q,Q=he):(he=Hu(ee.type,ee.key,ee.props,null,Q.mode,he),Zo(he,ee),he.return=Q,Q=he)}return v(Q);case H:e:{for(Fe=ee.key;$!==null;){if($.key===Fe)if($.tag===4&&$.stateNode.containerInfo===ee.containerInfo&&$.stateNode.implementation===ee.implementation){r(Q,$.sibling),he=f($,ee.children||[]),he.return=Q,Q=he;break e}else{r(Q,$);break}else a(Q,$);$=$.sibling}he=vf(ee,Q.mode,he),he.return=Q,Q=he}return v(Q);case j:return ee=Vr(ee),Mt(Q,$,ee,he)}if(M(ee))return De(Q,$,ee,he);if(q(ee)){if(Fe=q(ee),typeof Fe!="function")throw Error(i(150));return ee=Fe.call(ee),$e(Q,$,ee,he)}if(typeof ee.then=="function")return Mt(Q,$,Xu(ee),he);if(ee.$$typeof===W)return Mt(Q,$,Yu(Q,ee),he);Ju(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,$!==null&&$.tag===6?(r(Q,$.sibling),he=f($,ee),he.return=Q,Q=he):(r(Q,$),he=yf(ee,Q.mode,he),he.return=Q,Q=he),v(Q)):r(Q,$)}return function(Q,$,ee,he){try{Jo=0;var Fe=Mt(Q,$,ee,he);return Pl=null,Fe}catch(Le){if(Le===Vl||Le===Qu)throw Le;var wt=cs(29,Le,null,Q.mode);return wt.lanes=he,wt.return=Q,wt}}}var Lr=ox(!0),cx=ox(!1),Ai=!1;function If(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Df(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ci(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ri(t,a,r){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(St&2)!==0){var f=c.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a,a=qu(t),G0(t,null,r),a}return Fu(t,c,a,r),qu(t)}function ec(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var c=a.lanes;c&=t.pendingLanes,r|=c,a.lanes=r,Oa(t,r)}}function Mf(t,a){var r=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,r=r.next}while(r!==null);m===null?f=m=a:m=m.next=a}else f=m=a;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var Of=!1;function tc(){if(Of){var t=Ol;if(t!==null)throw t}}function nc(t,a,r,c){Of=!1;var f=t.updateQueue;Ai=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var U=E,te=U.next;U.next=null,v===null?m=te:v.next=te,v=U;var le=t.alternate;le!==null&&(le=le.updateQueue,E=le.lastBaseUpdate,E!==v&&(E===null?le.firstBaseUpdate=te:E.next=te,le.lastBaseUpdate=U))}if(m!==null){var me=f.baseState;v=0,le=te=U=null,E=m;do{var se=E.lane&-536870913,ie=se!==E.lane;if(ie?(dt&se)===se:(c&se)===se){se!==0&&se===Ml&&(Of=!0),le!==null&&(le=le.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var De=t,$e=E;se=a;var Mt=r;switch($e.tag){case 1:if(De=$e.payload,typeof De=="function"){me=De.call(Mt,me,se);break e}me=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=$e.payload,se=typeof De=="function"?De.call(Mt,me,se):De,se==null)break e;me=w({},me,se);break e;case 2:Ai=!0}}se=E.callback,se!==null&&(t.flags|=64,ie&&(t.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[se]:ie.push(se))}else ie={lane:se,tag:E.tag,payload:E.payload,callback:E.callback,next:null},le===null?(te=le=ie,U=me):le=le.next=ie,v|=se;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;ie=E,E=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);le===null&&(U=me),f.baseState=U,f.firstBaseUpdate=te,f.lastBaseUpdate=le,m===null&&(f.shared.lanes=0),Oi|=v,t.lanes=v,t.memoizedState=me}}function ux(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function dx(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)ux(r[t],a)}var Ll=O(null),Zu=O(0);function hx(t,a){t=Ja,re(Zu,t),re(Ll,a),Ja=t|a.baseLanes}function Vf(){re(Zu,Ja),re(Ll,Ll.current)}function Pf(){Ja=Zu.current,ne(Ll),ne(Zu)}var us=O(null),Is=null;function ki(t){var a=t.alternate;re(nn,nn.current&1),re(us,t),Is===null&&(a===null||Ll.current!==null||a.memoizedState!==null)&&(Is=t)}function Lf(t){re(nn,nn.current),re(us,t),Is===null&&(Is=t)}function fx(t){t.tag===22?(re(nn,nn.current),re(us,t),Is===null&&(Is=t)):Ii()}function Ii(){re(nn,nn.current),re(us,us.current)}function ds(t){ne(us),Is===t&&(Is=null),ne(nn)}var nn=O(0);function ed(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Hm(r)||$m(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ha=0,nt=null,It=null,dn=null,td=!1,Ul=!1,Ur=!1,nd=0,sc=0,Bl=null,K2=0;function Kt(){throw Error(i(321))}function Uf(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!os(t[r],a[r]))return!1;return!0}function Bf(t,a,r,c,f,m){return Ha=m,nt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,k.H=t===null||t.memoizedState===null?Wx:tm,Ur=!1,m=r(c,f),Ur=!1,Ul&&(m=px(a,r,c,f)),mx(t),m}function mx(t){k.H=rc;var a=It!==null&&It.next!==null;if(Ha=0,dn=It=nt=null,td=!1,sc=0,Bl=null,a)throw Error(i(300));t===null||hn||(t=t.dependencies,t!==null&&Gu(t)&&(hn=!0))}function px(t,a,r,c){nt=t;var f=0;do{if(Ul&&(Bl=null),sc=0,Ul=!1,25<=f)throw Error(i(301));if(f+=1,dn=It=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}k.H=Xx,m=a(r,c)}while(Ul);return m}function Q2(){var t=k.H,a=t.useState()[0];return a=typeof a.then=="function"?ac(a):a,t=t.useState()[0],(It!==null?It.memoizedState:null)!==t&&(nt.flags|=1024),a}function zf(){var t=nd!==0;return nd=0,t}function Ff(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function qf(t){if(td){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}td=!1}Ha=0,dn=It=nt=null,Ul=!1,sc=nd=0,Bl=null}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?nt.memoizedState=dn=t:dn=dn.next=t,dn}function sn(){if(It===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var a=dn===null?nt.memoizedState:dn.next;if(a!==null)dn=a,It=t;else{if(t===null)throw nt.alternate===null?Error(i(467)):Error(i(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},dn===null?nt.memoizedState=dn=t:dn=dn.next=t}return dn}function sd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ac(t){var a=sc;return sc+=1,Bl===null&&(Bl=[]),t=ix(Bl,t,a),a=nt,(dn===null?a.memoizedState:dn.next)===null&&(a=a.alternate,k.H=a===null||a.memoizedState===null?Wx:tm),t}function ad(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ac(t);if(t.$$typeof===W)return Rn(t)}throw Error(i(438,String(t)))}function Hf(t){var a=null,r=nt.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var c=nt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=sd(),nt.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),c=0;c<t;c++)r[c]=L;return a.index++,r}function $a(t,a){return typeof a=="function"?a(t):a}function id(t){var a=sn();return $f(a,It,t)}function $f(t,a,r){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}a.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{a=f.next;var E=v=null,U=null,te=a,le=!1;do{var me=te.lane&-536870913;if(me!==te.lane?(dt&me)===me:(Ha&me)===me){var se=te.revertLane;if(se===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),me===Ml&&(le=!0);else if((Ha&se)===se){te=te.next,se===Ml&&(le=!0);continue}else me={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},U===null?(E=U=me,v=m):U=U.next=me,nt.lanes|=se,Oi|=se;me=te.action,Ur&&r(m,me),m=te.hasEagerState?te.eagerState:r(m,me)}else se={lane:me,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},U===null?(E=U=se,v=m):U=U.next=se,nt.lanes|=me,Oi|=me;te=te.next}while(te!==null&&te!==a);if(U===null?v=m:U.next=E,!os(m,t.memoizedState)&&(hn=!0,le&&(r=Ol,r!==null)))throw r;t.memoizedState=m,t.baseState=v,t.baseQueue=U,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Gf(t){var a=sn(),r=a.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var c=r.dispatch,f=r.pending,m=a.memoizedState;if(f!==null){r.pending=null;var v=f=f.next;do m=t(m,v.action),v=v.next;while(v!==f);os(m,a.memoizedState)||(hn=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),r.lastRenderedState=m}return[m,c]}function gx(t,a,r){var c=nt,f=sn(),m=bt;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=a();var v=!os((It||f).memoizedState,r);if(v&&(f.memoizedState=r,hn=!0),f=f.queue,Qf(yx.bind(null,c,f,t),[t]),f.getSnapshot!==a||v||dn!==null&&dn.memoizedState.tag&1){if(c.flags|=2048,zl(9,{destroy:void 0},bx.bind(null,c,f,r,a),null),Ot===null)throw Error(i(349));m||(Ha&127)!==0||xx(c,a,r)}return r}function xx(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=nt.updateQueue,a===null?(a=sd(),nt.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function bx(t,a,r,c){a.value=r,a.getSnapshot=c,vx(a)&&_x(t)}function yx(t,a,r){return r(function(){vx(a)&&_x(t)})}function vx(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!os(t,r)}catch{return!0}}function _x(t){var a=Rr(t,2);a!==null&&es(a,t,2)}function Yf(t){var a=Gn();if(typeof t=="function"){var r=t;if(t=r(),Ur){de(!0);try{r()}finally{de(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t},a}function wx(t,a,r,c){return t.baseState=r,$f(t,It,typeof c=="function"?c:$a)}function W2(t,a,r,c,f){if(od(t))throw Error(i(485));if(t=a.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};k.T!==null?r(!0):m.isTransition=!1,c(m),r=a.pending,r===null?(m.next=a.pending=m,Nx(a,m)):(m.next=r.next,a.pending=r.next=m)}}function Nx(t,a){var r=a.action,c=a.payload,f=t.state;if(a.isTransition){var m=k.T,v={};k.T=v;try{var E=r(f,c),U=k.S;U!==null&&U(v,E),Ex(t,a,E)}catch(te){Kf(t,a,te)}finally{m!==null&&v.types!==null&&(m.types=v.types),k.T=m}}else try{m=r(f,c),Ex(t,a,m)}catch(te){Kf(t,a,te)}}function Ex(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Sx(t,a,c)},function(c){return Kf(t,a,c)}):Sx(t,a,r)}function Sx(t,a,r){a.status="fulfilled",a.value=r,Tx(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,Nx(t,r)))}function Kf(t,a,r){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=r,Tx(a),a=a.next;while(a!==c)}t.action=null}function Tx(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function jx(t,a){return a}function Ax(t,a){if(bt){var r=Ot.formState;if(r!==null){e:{var c=nt;if(bt){if(Ut){t:{for(var f=Ut,m=ks;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ds(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ut=Ds(f.nextSibling),c=f.data==="F!";break e}}Ti(c)}c=!1}c&&(a=r[0])}}return r=Gn(),r.memoizedState=r.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jx,lastRenderedState:a},r.queue=c,r=Yx.bind(null,nt,c),c.dispatch=r,c=Yf(!1),m=em.bind(null,nt,!1,c.queue),c=Gn(),f={state:a,dispatch:null,action:t,pending:null},c.queue=f,r=W2.bind(null,nt,f,m,r),f.dispatch=r,c.memoizedState=t,[a,r,!1]}function Cx(t){var a=sn();return Rx(a,It,t)}function Rx(t,a,r){if(a=$f(t,a,jx)[0],t=id($a)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=ac(a)}catch(v){throw v===Vl?Qu:v}else c=a;a=sn();var f=a.queue,m=f.dispatch;return r!==a.memoizedState&&(nt.flags|=2048,zl(9,{destroy:void 0},X2.bind(null,f,r),null)),[c,m,t]}function X2(t,a){t.action=a}function kx(t){var a=sn(),r=It;if(r!==null)return Rx(a,r,t);sn(),a=a.memoizedState,r=sn();var c=r.queue.dispatch;return r.memoizedState=t,[a,c,!1]}function zl(t,a,r,c){return t={tag:t,create:r,deps:c,inst:a,next:null},a=nt.updateQueue,a===null&&(a=sd(),nt.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(c=r.next,r.next=t,t.next=c,a.lastEffect=t),t}function Ix(){return sn().memoizedState}function rd(t,a,r,c){var f=Gn();nt.flags|=t,f.memoizedState=zl(1|a,{destroy:void 0},r,c===void 0?null:c)}function ld(t,a,r,c){var f=sn();c=c===void 0?null:c;var m=f.memoizedState.inst;It!==null&&c!==null&&Uf(c,It.memoizedState.deps)?f.memoizedState=zl(a,m,r,c):(nt.flags|=t,f.memoizedState=zl(1|a,m,r,c))}function Dx(t,a){rd(8390656,8,t,a)}function Qf(t,a){ld(2048,8,t,a)}function J2(t){nt.flags|=4;var a=nt.updateQueue;if(a===null)a=sd(),nt.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function Mx(t){var a=sn().memoizedState;return J2({ref:a,nextImpl:t}),function(){if((St&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Ox(t,a){return ld(4,2,t,a)}function Vx(t,a){return ld(4,4,t,a)}function Px(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Lx(t,a,r){r=r!=null?r.concat([t]):null,ld(4,4,Px.bind(null,a,t),r)}function Wf(){}function Ux(t,a){var r=sn();a=a===void 0?null:a;var c=r.memoizedState;return a!==null&&Uf(a,c[1])?c[0]:(r.memoizedState=[t,a],t)}function Bx(t,a){var r=sn();a=a===void 0?null:a;var c=r.memoizedState;if(a!==null&&Uf(a,c[1]))return c[0];if(c=t(),Ur){de(!0);try{t()}finally{de(!1)}}return r.memoizedState=[c,a],c}function Xf(t,a,r){return r===void 0||(Ha&1073741824)!==0&&(dt&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=zb(),nt.lanes|=t,Oi|=t,r)}function zx(t,a,r,c){return os(r,a)?r:Ll.current!==null?(t=Xf(t,r,c),os(t,a)||(hn=!0),t):(Ha&42)===0||(Ha&1073741824)!==0&&(dt&261930)===0?(hn=!0,t.memoizedState=r):(t=zb(),nt.lanes|=t,Oi|=t,a)}function Fx(t,a,r,c,f){var m=K.p;K.p=m!==0&&8>m?m:8;var v=k.T,E={};k.T=E,em(t,!1,a,r);try{var U=f(),te=k.S;if(te!==null&&te(E,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var le=Y2(U,c);ic(t,a,le,ms(t))}else ic(t,a,c,ms(t))}catch(me){ic(t,a,{then:function(){},status:"rejected",reason:me},ms())}finally{K.p=m,v!==null&&E.types!==null&&(v.types=E.types),k.T=v}}function Z2(){}function Jf(t,a,r,c){if(t.tag!==5)throw Error(i(476));var f=qx(t).queue;Fx(t,f,a,fe,r===null?Z2:function(){return Hx(t),r(c)})}function qx(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:fe},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Hx(t){var a=qx(t);a.next===null&&(a=t.alternate.memoizedState),ic(t,a.next.queue,{},ms())}function Zf(){return Rn(wc)}function $x(){return sn().memoizedState}function Gx(){return sn().memoizedState}function eE(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=ms();t=Ci(r);var c=Ri(a,t,r);c!==null&&(es(c,a,r),ec(c,a,r)),a={cache:Af()},t.payload=a;return}a=a.return}}function tE(t,a,r){var c=ms();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},od(t)?Kx(a,r):(r=xf(t,a,r,c),r!==null&&(es(r,t,c),Qx(r,a,c)))}function Yx(t,a,r){var c=ms();ic(t,a,r,c)}function ic(t,a,r,c){var f={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(od(t))Kx(a,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var v=a.lastRenderedState,E=m(v,r);if(f.hasEagerState=!0,f.eagerState=E,os(E,v))return Fu(t,a,f,0),Ot===null&&zu(),!1}catch{}if(r=xf(t,a,f,c),r!==null)return es(r,t,c),Qx(r,a,c),!0}return!1}function em(t,a,r,c){if(c={lane:2,revertLane:Im(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},od(t)){if(a)throw Error(i(479))}else a=xf(t,r,c,2),a!==null&&es(a,t,2)}function od(t){var a=t.alternate;return t===nt||a!==null&&a===nt}function Kx(t,a){Ul=td=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function Qx(t,a,r){if((r&4194048)!==0){var c=a.lanes;c&=t.pendingLanes,r|=c,a.lanes=r,Oa(t,r)}}var rc={readContext:Rn,use:ad,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt};rc.useEffectEvent=Kt;var Wx={readContext:Rn,use:ad,useCallback:function(t,a){return Gn().memoizedState=[t,a===void 0?null:a],t},useContext:Rn,useEffect:Dx,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,rd(4194308,4,Px.bind(null,a,t),r)},useLayoutEffect:function(t,a){return rd(4194308,4,t,a)},useInsertionEffect:function(t,a){rd(4,2,t,a)},useMemo:function(t,a){var r=Gn();a=a===void 0?null:a;var c=t();if(Ur){de(!0);try{t()}finally{de(!1)}}return r.memoizedState=[c,a],c},useReducer:function(t,a,r){var c=Gn();if(r!==void 0){var f=r(a);if(Ur){de(!0);try{r(a)}finally{de(!1)}}}else f=a;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=tE.bind(null,nt,t),[c.memoizedState,t]},useRef:function(t){var a=Gn();return t={current:t},a.memoizedState=t},useState:function(t){t=Yf(t);var a=t.queue,r=Yx.bind(null,nt,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:Wf,useDeferredValue:function(t,a){var r=Gn();return Xf(r,t,a)},useTransition:function(){var t=Yf(!1);return t=Fx.bind(null,nt,t.queue,!0,!1),Gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var c=nt,f=Gn();if(bt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=a(),Ot===null)throw Error(i(349));(dt&127)!==0||xx(c,a,r)}f.memoizedState=r;var m={value:r,getSnapshot:a};return f.queue=m,Dx(yx.bind(null,c,m,t),[t]),c.flags|=2048,zl(9,{destroy:void 0},bx.bind(null,c,m,r,a),null),r},useId:function(){var t=Gn(),a=Ot.identifierPrefix;if(bt){var r=ba,c=xa;r=(c&~(1<<32-ce(c)-1)).toString(32)+r,a="_"+a+"R_"+r,r=nd++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=K2++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Zf,useFormState:Ax,useActionState:Ax,useOptimistic:function(t){var a=Gn();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=em.bind(null,nt,!0,r),r.dispatch=a,[t,a]},useMemoCache:Hf,useCacheRefresh:function(){return Gn().memoizedState=eE.bind(null,nt)},useEffectEvent:function(t){var a=Gn(),r={impl:t};return a.memoizedState=r,function(){if((St&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},tm={readContext:Rn,use:ad,useCallback:Ux,useContext:Rn,useEffect:Qf,useImperativeHandle:Lx,useInsertionEffect:Ox,useLayoutEffect:Vx,useMemo:Bx,useReducer:id,useRef:Ix,useState:function(){return id($a)},useDebugValue:Wf,useDeferredValue:function(t,a){var r=sn();return zx(r,It.memoizedState,t,a)},useTransition:function(){var t=id($a)[0],a=sn().memoizedState;return[typeof t=="boolean"?t:ac(t),a]},useSyncExternalStore:gx,useId:$x,useHostTransitionStatus:Zf,useFormState:Cx,useActionState:Cx,useOptimistic:function(t,a){var r=sn();return wx(r,It,t,a)},useMemoCache:Hf,useCacheRefresh:Gx};tm.useEffectEvent=Mx;var Xx={readContext:Rn,use:ad,useCallback:Ux,useContext:Rn,useEffect:Qf,useImperativeHandle:Lx,useInsertionEffect:Ox,useLayoutEffect:Vx,useMemo:Bx,useReducer:Gf,useRef:Ix,useState:function(){return Gf($a)},useDebugValue:Wf,useDeferredValue:function(t,a){var r=sn();return It===null?Xf(r,t,a):zx(r,It.memoizedState,t,a)},useTransition:function(){var t=Gf($a)[0],a=sn().memoizedState;return[typeof t=="boolean"?t:ac(t),a]},useSyncExternalStore:gx,useId:$x,useHostTransitionStatus:Zf,useFormState:kx,useActionState:kx,useOptimistic:function(t,a){var r=sn();return It!==null?wx(r,It,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Hf,useCacheRefresh:Gx};Xx.useEffectEvent=Mx;function nm(t,a,r,c){a=t.memoizedState,r=r(c,a),r=r==null?a:w({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var sm={enqueueSetState:function(t,a,r){t=t._reactInternals;var c=ms(),f=Ci(c);f.payload=a,r!=null&&(f.callback=r),a=Ri(t,f,c),a!==null&&(es(a,t,c),ec(a,t,c))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var c=ms(),f=Ci(c);f.tag=1,f.payload=a,r!=null&&(f.callback=r),a=Ri(t,f,c),a!==null&&(es(a,t,c),ec(a,t,c))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=ms(),c=Ci(r);c.tag=2,a!=null&&(c.callback=a),a=Ri(t,c,r),a!==null&&(es(a,t,r),ec(a,t,r))}};function Jx(t,a,r,c,f,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,v):a.prototype&&a.prototype.isPureReactComponent?!Go(r,c)||!Go(f,m):!0}function Zx(t,a,r,c){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,c),a.state!==t&&sm.enqueueReplaceState(a,a.state,null)}function Br(t,a){var r=a;if("ref"in a){r={};for(var c in a)c!=="ref"&&(r[c]=a[c])}if(t=t.defaultProps){r===a&&(r=w({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function eb(t){Bu(t)}function tb(t){console.error(t)}function nb(t){Bu(t)}function cd(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function sb(t,a,r){try{var c=t.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function am(t,a,r){return r=Ci(r),r.tag=3,r.payload={element:null},r.callback=function(){cd(t,a)},r}function ab(t){return t=Ci(t),t.tag=3,t}function ib(t,a,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){sb(a,r,c)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){sb(a,r,c),typeof f!="function"&&(Vi===null?Vi=new Set([this]):Vi.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function nE(t,a,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=r.alternate,a!==null&&Dl(a,r,f,!0),r=us.current,r!==null){switch(r.tag){case 31:case 13:return Is===null?_d():r.alternate===null&&Qt===0&&(Qt=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===Wu?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([c]):a.add(c),Cm(t,c,f)),!1;case 22:return r.flags|=65536,c===Wu?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([c]):r.add(c)),Cm(t,c,f)),!1}throw Error(i(435,r.tag))}return Cm(t,c,f),_d(),!1}if(bt)return a=us.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,c!==Nf&&(t=Error(i(422),{cause:c}),Qo(As(t,r)))):(c!==Nf&&(a=Error(i(423),{cause:c}),Qo(As(a,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=As(c,r),f=am(t.stateNode,c,f),Mf(t,f),Qt!==4&&(Qt=2)),!1;var m=Error(i(520),{cause:c});if(m=As(m,r),mc===null?mc=[m]:mc.push(m),Qt!==4&&(Qt=2),a===null)return!0;c=As(c,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=am(r.stateNode,c,t),Mf(r,t),!1;case 1:if(a=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Vi===null||!Vi.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=ab(f),ib(f,t,r,c),Mf(r,f),!1}r=r.return}while(r!==null);return!1}var im=Error(i(461)),hn=!1;function kn(t,a,r,c){a.child=t===null?cx(a,null,r,c):Lr(a,t.child,r,c)}function rb(t,a,r,c,f){r=r.render;var m=a.ref;if("ref"in c){var v={};for(var E in c)E!=="ref"&&(v[E]=c[E])}else v=c;return Mr(a),c=Bf(t,a,r,v,m,f),E=zf(),t!==null&&!hn?(Ff(t,a,f),Ga(t,a,f)):(bt&&E&&_f(a),a.flags|=1,kn(t,a,c,f),a.child)}function lb(t,a,r,c,f){if(t===null){var m=r.type;return typeof m=="function"&&!bf(m)&&m.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=m,ob(t,a,m,c,f)):(t=Hu(r.type,null,c,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(m=t.child,!fm(t,f)){var v=m.memoizedProps;if(r=r.compare,r=r!==null?r:Go,r(v,c)&&t.ref===a.ref)return Ga(t,a,f)}return a.flags|=1,t=Ba(m,c),t.ref=a.ref,t.return=a,a.child=t}function ob(t,a,r,c,f){if(t!==null){var m=t.memoizedProps;if(Go(m,c)&&t.ref===a.ref)if(hn=!1,a.pendingProps=c=m,fm(t,f))(t.flags&131072)!==0&&(hn=!0);else return a.lanes=t.lanes,Ga(t,a,f)}return rm(t,a,r,c,f)}function cb(t,a,r,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(c=a.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,a.child=null;return ub(t,a,m,r,c)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ku(a,m!==null?m.cachePool:null),m!==null?hx(a,m):Vf(),fx(a);else return c=a.lanes=536870912,ub(t,a,m!==null?m.baseLanes|r:r,r,c)}else m!==null?(Ku(a,m.cachePool),hx(a,m),Ii(),a.memoizedState=null):(t!==null&&Ku(a,null),Vf(),Ii());return kn(t,a,f,r),a.child}function lc(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function ub(t,a,r,c,f){var m=Rf();return m=m===null?null:{parent:un._currentValue,pool:m},a.memoizedState={baseLanes:r,cachePool:m},t!==null&&Ku(a,null),Vf(),fx(a),t!==null&&Dl(t,a,c,!0),a.childLanes=f,null}function ud(t,a){return a=hd({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function db(t,a,r){return Lr(a,t.child,null,r),t=ud(a,a.pendingProps),t.flags|=2,ds(a),a.memoizedState=null,t}function sE(t,a,r){var c=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(bt){if(c.mode==="hidden")return t=ud(a,c),a.lanes=536870912,lc(null,t);if(Lf(a),(t=Ut)?(t=Ny(t,ks),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ei!==null?{id:xa,overflow:ba}:null,retryLane:536870912,hydrationErrors:null},r=K0(t),r.return=a,a.child=r,Cn=a,Ut=null)):t=null,t===null)throw Ti(a);return a.lanes=536870912,null}return ud(a,c)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Lf(a),f)if(a.flags&256)a.flags&=-257,a=db(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(hn||Dl(t,a,r,!1),f=(r&t.childLanes)!==0,hn||f){if(c=Ot,c!==null&&(v=fi(c,r),v!==0&&v!==m.retryLane))throw m.retryLane=v,Rr(t,v),es(c,t,v),im;_d(),a=db(t,a,r)}else t=m.treeContext,Ut=Ds(v.nextSibling),Cn=a,bt=!0,Si=null,ks=!1,t!==null&&X0(a,t),a=ud(a,c),a.flags|=4096;return a}return t=Ba(t.child,{mode:c.mode,children:c.children}),t.ref=a.ref,a.child=t,t.return=a,t}function dd(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function rm(t,a,r,c,f){return Mr(a),r=Bf(t,a,r,c,void 0,f),c=zf(),t!==null&&!hn?(Ff(t,a,f),Ga(t,a,f)):(bt&&c&&_f(a),a.flags|=1,kn(t,a,r,f),a.child)}function hb(t,a,r,c,f,m){return Mr(a),a.updateQueue=null,r=px(a,c,r,f),mx(t),c=zf(),t!==null&&!hn?(Ff(t,a,m),Ga(t,a,m)):(bt&&c&&_f(a),a.flags|=1,kn(t,a,r,m),a.child)}function fb(t,a,r,c,f){if(Mr(a),a.stateNode===null){var m=Cl,v=r.contextType;typeof v=="object"&&v!==null&&(m=Rn(v)),m=new r(c,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=sm,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=c,m.state=a.memoizedState,m.refs={},If(a),v=r.contextType,m.context=typeof v=="object"&&v!==null?Rn(v):Cl,m.state=a.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(nm(a,r,v,c),m.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&sm.enqueueReplaceState(m,m.state,null),nc(a,c,m,f),tc(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(t===null){m=a.stateNode;var E=a.memoizedProps,U=Br(r,E);m.props=U;var te=m.context,le=r.contextType;v=Cl,typeof le=="object"&&le!==null&&(v=Rn(le));var me=r.getDerivedStateFromProps;le=typeof me=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,le||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||te!==v)&&Zx(a,m,c,v),Ai=!1;var se=a.memoizedState;m.state=se,nc(a,c,m,f),tc(),te=a.memoizedState,E||se!==te||Ai?(typeof me=="function"&&(nm(a,r,me,c),te=a.memoizedState),(U=Ai||Jx(a,r,U,c,se,te,v))?(le||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=te),m.props=c,m.state=te,m.context=v,c=U):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{m=a.stateNode,Df(t,a),v=a.memoizedProps,le=Br(r,v),m.props=le,me=a.pendingProps,se=m.context,te=r.contextType,U=Cl,typeof te=="object"&&te!==null&&(U=Rn(te)),E=r.getDerivedStateFromProps,(te=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==me||se!==U)&&Zx(a,m,c,U),Ai=!1,se=a.memoizedState,m.state=se,nc(a,c,m,f),tc();var ie=a.memoizedState;v!==me||se!==ie||Ai||t!==null&&t.dependencies!==null&&Gu(t.dependencies)?(typeof E=="function"&&(nm(a,r,E,c),ie=a.memoizedState),(le=Ai||Jx(a,r,le,c,se,ie,U)||t!==null&&t.dependencies!==null&&Gu(t.dependencies))?(te||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ie,U),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ie,U)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ie),m.props=c,m.state=ie,m.context=U,c=le):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&se===t.memoizedState||(a.flags|=1024),c=!1)}return m=c,dd(t,a),c=(a.flags&128)!==0,m||c?(m=a.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,t!==null&&c?(a.child=Lr(a,t.child,null,f),a.child=Lr(a,null,r,f)):kn(t,a,r,f),a.memoizedState=m.state,t=a.child):t=Ga(t,a,f),t}function mb(t,a,r,c){return Ir(),a.flags|=256,kn(t,a,r,c),a.child}var lm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function om(t){return{baseLanes:t,cachePool:sx()}}function cm(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=fs),t}function pb(t,a,r){var c=a.pendingProps,f=!1,m=(a.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(nn.current&2)!==0),v&&(f=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(bt){if(f?ki(a):Ii(),(t=Ut)?(t=Ny(t,ks),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ei!==null?{id:xa,overflow:ba}:null,retryLane:536870912,hydrationErrors:null},r=K0(t),r.return=a,a.child=r,Cn=a,Ut=null)):t=null,t===null)throw Ti(a);return $m(t)?a.lanes=32:a.lanes=536870912,null}var E=c.children;return c=c.fallback,f?(Ii(),f=a.mode,E=hd({mode:"hidden",children:E},f),c=kr(c,f,r,null),E.return=a,c.return=a,E.sibling=c,a.child=E,c=a.child,c.memoizedState=om(r),c.childLanes=cm(t,v,r),a.memoizedState=lm,lc(null,c)):(ki(a),um(a,E))}var U=t.memoizedState;if(U!==null&&(E=U.dehydrated,E!==null)){if(m)a.flags&256?(ki(a),a.flags&=-257,a=dm(t,a,r)):a.memoizedState!==null?(Ii(),a.child=t.child,a.flags|=128,a=null):(Ii(),E=c.fallback,f=a.mode,c=hd({mode:"visible",children:c.children},f),E=kr(E,f,r,null),E.flags|=2,c.return=a,E.return=a,c.sibling=E,a.child=c,Lr(a,t.child,null,r),c=a.child,c.memoizedState=om(r),c.childLanes=cm(t,v,r),a.memoizedState=lm,a=lc(null,c));else if(ki(a),$m(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var te=v.dgst;v=te,c=Error(i(419)),c.stack="",c.digest=v,Qo({value:c,source:null,stack:null}),a=dm(t,a,r)}else if(hn||Dl(t,a,r,!1),v=(r&t.childLanes)!==0,hn||v){if(v=Ot,v!==null&&(c=fi(v,r),c!==0&&c!==U.retryLane))throw U.retryLane=c,Rr(t,c),es(v,t,c),im;Hm(E)||_d(),a=dm(t,a,r)}else Hm(E)?(a.flags|=192,a.child=t.child,a=null):(t=U.treeContext,Ut=Ds(E.nextSibling),Cn=a,bt=!0,Si=null,ks=!1,t!==null&&X0(a,t),a=um(a,c.children),a.flags|=4096);return a}return f?(Ii(),E=c.fallback,f=a.mode,U=t.child,te=U.sibling,c=Ba(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,te!==null?E=Ba(te,E):(E=kr(E,f,r,null),E.flags|=2),E.return=a,c.return=a,c.sibling=E,a.child=c,lc(null,c),c=a.child,E=t.child.memoizedState,E===null?E=om(r):(f=E.cachePool,f!==null?(U=un._currentValue,f=f.parent!==U?{parent:U,pool:U}:f):f=sx(),E={baseLanes:E.baseLanes|r,cachePool:f}),c.memoizedState=E,c.childLanes=cm(t,v,r),a.memoizedState=lm,lc(t.child,c)):(ki(a),r=t.child,t=r.sibling,r=Ba(r,{mode:"visible",children:c.children}),r.return=a,r.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=r,a.memoizedState=null,r)}function um(t,a){return a=hd({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function hd(t,a){return t=cs(22,t,null,a),t.lanes=0,t}function dm(t,a,r){return Lr(a,t.child,null,r),t=um(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function gb(t,a,r){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a),Tf(t.return,a,r)}function hm(t,a,r,c,f,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f,treeForkCount:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=r,v.tailMode=f,v.treeForkCount=m)}function xb(t,a,r){var c=a.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=nn.current,E=(v&2)!==0;if(E?(v=v&1|2,a.flags|=128):v&=1,re(nn,v),kn(t,a,c,r),c=bt?Ko:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gb(t,r,a);else if(t.tag===19)gb(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=a.child,f=null;r!==null;)t=r.alternate,t!==null&&ed(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=a.child,a.child=null):(f=r.sibling,r.sibling=null),hm(a,!1,f,r,m,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&ed(t)===null){a.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}hm(a,!0,r,null,m,c);break;case"together":hm(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function Ga(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),Oi|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(Dl(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,r=Ba(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=Ba(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function fm(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Gu(t)))}function aE(t,a,r){switch(a.tag){case 3:ze(a,a.stateNode.containerInfo),ji(a,un,t.memoizedState.cache),Ir();break;case 27:case 5:Ge(a);break;case 4:ze(a,a.stateNode.containerInfo);break;case 10:ji(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Lf(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(ki(a),a.flags|=128,null):(r&a.child.childLanes)!==0?pb(t,a,r):(ki(a),t=Ga(t,a,r),t!==null?t.sibling:null);ki(a);break;case 19:var f=(t.flags&128)!==0;if(c=(r&a.childLanes)!==0,c||(Dl(t,a,r,!1),c=(r&a.childLanes)!==0),f){if(c)return xb(t,a,r);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),re(nn,nn.current),c)break;return null;case 22:return a.lanes=0,cb(t,a,r,a.pendingProps);case 24:ji(a,un,t.memoizedState.cache)}return Ga(t,a,r)}function bb(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)hn=!0;else{if(!fm(t,r)&&(a.flags&128)===0)return hn=!1,aE(t,a,r);hn=(t.flags&131072)!==0}else hn=!1,bt&&(a.flags&1048576)!==0&&W0(a,Ko,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(t=Vr(a.elementType),a.type=t,typeof t=="function")bf(t)?(c=Br(t,c),a.tag=1,a=fb(null,a,t,c,r)):(a.tag=0,a=rm(null,a,t,c,r));else{if(t!=null){var f=t.$$typeof;if(f===be){a.tag=11,a=rb(null,a,t,c,r);break e}else if(f===A){a.tag=14,a=lb(null,a,t,c,r);break e}}throw a=F(t)||t,Error(i(306,a,""))}}return a;case 0:return rm(t,a,a.type,a.pendingProps,r);case 1:return c=a.type,f=Br(c,a.pendingProps),fb(t,a,c,f,r);case 3:e:{if(ze(a,a.stateNode.containerInfo),t===null)throw Error(i(387));c=a.pendingProps;var m=a.memoizedState;f=m.element,Df(t,a),nc(a,c,null,r);var v=a.memoizedState;if(c=v.cache,ji(a,un,c),c!==m.cache&&jf(a,[un],r,!0),tc(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=mb(t,a,c,r);break e}else if(c!==f){f=As(Error(i(424)),a),Qo(f),a=mb(t,a,c,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ut=Ds(t.firstChild),Cn=a,bt=!0,Si=null,ks=!0,r=cx(a,null,c,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ir(),c===f){a=Ga(t,a,r);break e}kn(t,a,c,r)}a=a.child}return a;case 26:return dd(t,a),t===null?(r=Cy(a.type,null,a.pendingProps,null))?a.memoizedState=r:bt||(r=a.type,t=a.pendingProps,c=Ad(Ie.current).createElement(r),c[ln]=a,c[Nn]=t,In(c,r,t),on(c),a.stateNode=c):a.memoizedState=Cy(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ge(a),t===null&&bt&&(c=a.stateNode=Ty(a.type,a.pendingProps,Ie.current),Cn=a,ks=!0,f=Ut,Bi(a.type)?(Gm=f,Ut=Ds(c.firstChild)):Ut=f),kn(t,a,a.pendingProps.children,r),dd(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&bt&&((f=c=Ut)&&(c=ME(c,a.type,a.pendingProps,ks),c!==null?(a.stateNode=c,Cn=a,Ut=Ds(c.firstChild),ks=!1,f=!0):f=!1),f||Ti(a)),Ge(a),f=a.type,m=a.pendingProps,v=t!==null?t.memoizedProps:null,c=m.children,zm(f,m)?c=null:v!==null&&zm(f,v)&&(a.flags|=32),a.memoizedState!==null&&(f=Bf(t,a,Q2,null,null,r),wc._currentValue=f),dd(t,a),kn(t,a,c,r),a.child;case 6:return t===null&&bt&&((t=r=Ut)&&(r=OE(r,a.pendingProps,ks),r!==null?(a.stateNode=r,Cn=a,Ut=null,t=!0):t=!1),t||Ti(a)),null;case 13:return pb(t,a,r);case 4:return ze(a,a.stateNode.containerInfo),c=a.pendingProps,t===null?a.child=Lr(a,null,c,r):kn(t,a,c,r),a.child;case 11:return rb(t,a,a.type,a.pendingProps,r);case 7:return kn(t,a,a.pendingProps,r),a.child;case 8:return kn(t,a,a.pendingProps.children,r),a.child;case 12:return kn(t,a,a.pendingProps.children,r),a.child;case 10:return c=a.pendingProps,ji(a,a.type,c.value),kn(t,a,c.children,r),a.child;case 9:return f=a.type._context,c=a.pendingProps.children,Mr(a),f=Rn(f),c=c(f),a.flags|=1,kn(t,a,c,r),a.child;case 14:return lb(t,a,a.type,a.pendingProps,r);case 15:return ob(t,a,a.type,a.pendingProps,r);case 19:return xb(t,a,r);case 31:return sE(t,a,r);case 22:return cb(t,a,r,a.pendingProps);case 24:return Mr(a),c=Rn(un),t===null?(f=Rf(),f===null&&(f=Ot,m=Af(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),a.memoizedState={parent:c,cache:f},If(a),ji(a,un,f)):((t.lanes&r)!==0&&(Df(t,a),nc(a,null,null,r),tc()),f=t.memoizedState,m=a.memoizedState,f.parent!==c?(f={parent:c,cache:c},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),ji(a,un,c)):(c=m.cache,ji(a,un,c),c!==f.cache&&jf(a,[un],r,!0))),kn(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ya(t){t.flags|=4}function mm(t,a,r,c,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if($b())t.flags|=8192;else throw Pr=Wu,kf}else t.flags&=-16777217}function yb(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!My(a))if($b())t.flags|=8192;else throw Pr=Wu,kf}function fd(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?_n():536870912,t.lanes|=a,$l|=a)}function oc(t,a){if(!bt)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Bt(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,c=0;if(a)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=r,a}function iE(t,a,r){var c=a.pendingProps;switch(wf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(a),null;case 1:return Bt(a),null;case 3:return r=a.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),qa(un),Ue(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Il(a)?Ya(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ef())),Bt(a),null;case 26:var f=a.type,m=a.memoizedState;return t===null?(Ya(a),m!==null?(Bt(a),yb(a,m)):(Bt(a),mm(a,f,null,c,r))):m?m!==t.memoizedState?(Ya(a),Bt(a),yb(a,m)):(Bt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==c&&Ya(a),Bt(a),mm(a,f,t,c,r)),null;case 27:if(J(a),r=Ie.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&Ya(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return Bt(a),null}t=we.current,Il(a)?J0(a):(t=Ty(f,c,r),a.stateNode=t,Ya(a))}return Bt(a),null;case 5:if(J(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&Ya(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return Bt(a),null}if(m=we.current,Il(a))J0(a);else{var v=Ad(Ie.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[ln]=a,m[Nn]=c;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=m;e:switch(In(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ya(a)}}return Bt(a),mm(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==c&&Ya(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(i(166));if(t=Ie.current,Il(a)){if(t=a.stateNode,r=a.memoizedProps,c=null,f=Cn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[ln]=a,t=!!(t.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||py(t.nodeValue,r)),t||Ti(a,!0)}else t=Ad(t).createTextNode(c),t[ln]=a,a.stateNode=t}return Bt(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(c=Il(a),r!==null){if(t===null){if(!c)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[ln]=a}else Ir(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),t=!1}else r=Ef(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(ds(a),a):(ds(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Bt(a),null;case 13:if(c=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Il(a),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[ln]=a}else Ir(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),f=!1}else f=Ef(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(ds(a),a):(ds(a),null)}return ds(a),(a.flags&128)!==0?(a.lanes=r,a):(r=c!==null,t=t!==null&&t.memoizedState!==null,r&&(c=a.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),fd(a,a.updateQueue),Bt(a),null);case 4:return Ue(),t===null&&Vm(a.stateNode.containerInfo),Bt(a),null;case 10:return qa(a.type),Bt(a),null;case 19:if(ne(nn),c=a.memoizedState,c===null)return Bt(a),null;if(f=(a.flags&128)!==0,m=c.rendering,m===null)if(f)oc(c,!1);else{if(Qt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(m=ed(t),m!==null){for(a.flags|=128,oc(c,!1),t=m.updateQueue,a.updateQueue=t,fd(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)Y0(r,t),r=r.sibling;return re(nn,nn.current&1|2),bt&&za(a,c.treeForkCount),a.child}t=t.sibling}c.tail!==null&&xt()>bd&&(a.flags|=128,f=!0,oc(c,!1),a.lanes=4194304)}else{if(!f)if(t=ed(m),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,fd(a,t),oc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!bt)return Bt(a),null}else 2*xt()-c.renderingStartTime>bd&&r!==536870912&&(a.flags|=128,f=!0,oc(c,!1),a.lanes=4194304);c.isBackwards?(m.sibling=a.child,a.child=m):(t=c.last,t!==null?t.sibling=m:a.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=xt(),t.sibling=null,r=nn.current,re(nn,f?r&1|2:r&1),bt&&za(a,c.treeForkCount),t):(Bt(a),null);case 22:case 23:return ds(a),Pf(),c=a.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(r&536870912)!==0&&(a.flags&128)===0&&(Bt(a),a.subtreeFlags&6&&(a.flags|=8192)):Bt(a),r=a.updateQueue,r!==null&&fd(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==r&&(a.flags|=2048),t!==null&&ne(Or),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),qa(un),Bt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function rE(t,a){switch(wf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return qa(un),Ue(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return J(a),null;case 31:if(a.memoizedState!==null){if(ds(a),a.alternate===null)throw Error(i(340));Ir()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(ds(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ir()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return ne(nn),null;case 4:return Ue(),null;case 10:return qa(a.type),null;case 22:case 23:return ds(a),Pf(),t!==null&&ne(Or),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return qa(un),null;case 25:return null;default:return null}}function vb(t,a){switch(wf(a),a.tag){case 3:qa(un),Ue();break;case 26:case 27:case 5:J(a);break;case 4:Ue();break;case 31:a.memoizedState!==null&&ds(a);break;case 13:ds(a);break;case 19:ne(nn);break;case 10:qa(a.type);break;case 22:case 23:ds(a),Pf(),t!==null&&ne(Or);break;case 24:qa(un)}}function cc(t,a){try{var r=a.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&t)===t){c=void 0;var m=r.create,v=r.inst;c=m(),v.destroy=c}r=r.next}while(r!==f)}}catch(E){Rt(a,a.return,E)}}function Di(t,a,r){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var v=c.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=a;var U=r,te=E;try{te()}catch(le){Rt(f,U,le)}}}c=c.next}while(c!==m)}}catch(le){Rt(a,a.return,le)}}function _b(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{dx(a,r)}catch(c){Rt(t,t.return,c)}}}function wb(t,a,r){r.props=Br(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(c){Rt(t,a,c)}}function uc(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof r=="function"?t.refCleanup=r(c):r.current=c}}catch(f){Rt(t,a,f)}}function ya(t,a){var r=t.ref,c=t.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){Rt(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Rt(t,a,f)}else r.current=null}function Nb(t){var a=t.type,r=t.memoizedProps,c=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){Rt(t,t.return,f)}}function pm(t,a,r){try{var c=t.stateNode;AE(c,t.type,r,a),c[Nn]=a}catch(f){Rt(t,t.return,f)}}function Eb(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Bi(t.type)||t.tag===4}function gm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Eb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Bi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xm(t,a,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Fs));else if(c!==4&&(c===27&&Bi(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(xm(t,a,r),t=t.sibling;t!==null;)xm(t,a,r),t=t.sibling}function md(t,a,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(c!==4&&(c===27&&Bi(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(md(t,a,r),t=t.sibling;t!==null;)md(t,a,r),t=t.sibling}function Sb(t){var a=t.stateNode,r=t.memoizedProps;try{for(var c=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);In(a,c,r),a[ln]=t,a[Nn]=r}catch(m){Rt(t,t.return,m)}}var Ka=!1,fn=!1,bm=!1,Tb=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function lE(t,a){if(t=t.containerInfo,Um=Od,t=L0(t),df(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var v=0,E=-1,U=-1,te=0,le=0,me=t,se=null;t:for(;;){for(var ie;me!==r||f!==0&&me.nodeType!==3||(E=v+f),me!==m||c!==0&&me.nodeType!==3||(U=v+c),me.nodeType===3&&(v+=me.nodeValue.length),(ie=me.firstChild)!==null;)se=me,me=ie;for(;;){if(me===t)break t;if(se===r&&++te===f&&(E=v),se===m&&++le===c&&(U=v),(ie=me.nextSibling)!==null)break;me=se,se=me.parentNode}me=ie}r=E===-1||U===-1?null:{start:E,end:U}}else r=null}r=r||{start:0,end:0}}else r=null;for(Bm={focusedElem:t,selectionRange:r},Od=!1,Sn=a;Sn!==null;)if(a=Sn,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Sn=t;else for(;Sn!==null;){switch(a=Sn,m=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=a,f=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var De=Br(r.type,f);t=c.getSnapshotBeforeUpdate(De,m),c.__reactInternalSnapshotBeforeUpdate=t}catch($e){Rt(r,r.return,$e)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)qm(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":qm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,Sn=t;break}Sn=a.return}}function jb(t,a,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Wa(t,r),c&4&&cc(5,r);break;case 1:if(Wa(t,r),c&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(v){Rt(r,r.return,v)}else{var f=Br(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Rt(r,r.return,v)}}c&64&&_b(r),c&512&&uc(r,r.return);break;case 3:if(Wa(t,r),c&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{dx(t,a)}catch(v){Rt(r,r.return,v)}}break;case 27:a===null&&c&4&&Sb(r);case 26:case 5:Wa(t,r),a===null&&c&4&&Nb(r),c&512&&uc(r,r.return);break;case 12:Wa(t,r);break;case 31:Wa(t,r),c&4&&Rb(t,r);break;case 13:Wa(t,r),c&4&&kb(t,r),c&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=gE.bind(null,r),VE(t,r))));break;case 22:if(c=r.memoizedState!==null||Ka,!c){a=a!==null&&a.memoizedState!==null||fn,f=Ka;var m=fn;Ka=c,(fn=a)&&!m?Xa(t,r,(r.subtreeFlags&8772)!==0):Wa(t,r),Ka=f,fn=m}break;case 30:break;default:Wa(t,r)}}function Ab(t){var a=t.alternate;a!==null&&(t.alternate=null,Ab(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&pl(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ft=null,Wn=!1;function Qa(t,a,r){for(r=r.child;r!==null;)Cb(t,a,r),r=r.sibling}function Cb(t,a,r){if(G&&typeof G.onCommitFiberUnmount=="function")try{G.onCommitFiberUnmount(R,r)}catch{}switch(r.tag){case 26:fn||ya(r,a),Qa(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:fn||ya(r,a);var c=Ft,f=Wn;Bi(r.type)&&(Ft=r.stateNode,Wn=!1),Qa(t,a,r),yc(r.stateNode),Ft=c,Wn=f;break;case 5:fn||ya(r,a);case 6:if(c=Ft,f=Wn,Ft=null,Qa(t,a,r),Ft=c,Wn=f,Ft!==null)if(Wn)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(r.stateNode)}catch(m){Rt(r,a,m)}else try{Ft.removeChild(r.stateNode)}catch(m){Rt(r,a,m)}break;case 18:Ft!==null&&(Wn?(t=Ft,_y(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Zl(t)):_y(Ft,r.stateNode));break;case 4:c=Ft,f=Wn,Ft=r.stateNode.containerInfo,Wn=!0,Qa(t,a,r),Ft=c,Wn=f;break;case 0:case 11:case 14:case 15:Di(2,r,a),fn||Di(4,r,a),Qa(t,a,r);break;case 1:fn||(ya(r,a),c=r.stateNode,typeof c.componentWillUnmount=="function"&&wb(r,a,c)),Qa(t,a,r);break;case 21:Qa(t,a,r);break;case 22:fn=(c=fn)||r.memoizedState!==null,Qa(t,a,r),fn=c;break;default:Qa(t,a,r)}}function Rb(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Zl(t)}catch(r){Rt(a,a.return,r)}}}function kb(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Zl(t)}catch(r){Rt(a,a.return,r)}}function oE(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Tb),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Tb),a;default:throw Error(i(435,t.tag))}}function pd(t,a){var r=oE(t);a.forEach(function(c){if(!r.has(c)){r.add(c);var f=xE.bind(null,t,c);c.then(f,f)}})}function Xn(t,a){var r=a.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],m=t,v=a,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(Bi(E.type)){Ft=E.stateNode,Wn=!1;break e}break;case 5:Ft=E.stateNode,Wn=!1;break e;case 3:case 4:Ft=E.stateNode.containerInfo,Wn=!0;break e}E=E.return}if(Ft===null)throw Error(i(160));Cb(m,v,f),Ft=null,Wn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Ib(a,t),a=a.sibling}var Ks=null;function Ib(t,a){var r=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Xn(a,t),Jn(t),c&4&&(Di(3,t,t.return),cc(3,t),Di(5,t,t.return));break;case 1:Xn(a,t),Jn(t),c&512&&(fn||r===null||ya(r,r.return)),c&64&&Ka&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=Ks;if(Xn(a,t),Jn(t),c&512&&(fn||r===null||ya(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=t.memoizedState,r===null)if(c===null)if(t.stateNode===null){e:{c=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ia]||m[ln]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),In(m,c,r),m[ln]=t,on(m),c=m;break e;case"link":var v=Iy("link","href",f).get(c+(r.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(E,1);break t}}m=f.createElement(c),In(m,c,r),f.head.appendChild(m);break;case"meta":if(v=Iy("meta","content",f).get(c+(r.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(E,1);break t}}m=f.createElement(c),In(m,c,r),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[ln]=t,on(m),c=m}t.stateNode=c}else Dy(f,t.type,t.stateNode);else t.stateNode=ky(f,c,t.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?Dy(f,t.type,t.stateNode):ky(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&pm(t,t.memoizedProps,r.memoizedProps)}break;case 27:Xn(a,t),Jn(t),c&512&&(fn||r===null||ya(r,r.return)),r!==null&&c&4&&pm(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Xn(a,t),Jn(t),c&512&&(fn||r===null||ya(r,r.return)),t.flags&32){f=t.stateNode;try{Qn(f,"")}catch(De){Rt(t,t.return,De)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,pm(t,f,r!==null?r.memoizedProps:f)),c&1024&&(bm=!0);break;case 6:if(Xn(a,t),Jn(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,r=t.stateNode;try{r.nodeValue=c}catch(De){Rt(t,t.return,De)}}break;case 3:if(kd=null,f=Ks,Ks=Cd(a.containerInfo),Xn(a,t),Ks=f,Jn(t),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Zl(a.containerInfo)}catch(De){Rt(t,t.return,De)}bm&&(bm=!1,Db(t));break;case 4:c=Ks,Ks=Cd(t.stateNode.containerInfo),Xn(a,t),Jn(t),Ks=c;break;case 12:Xn(a,t),Jn(t);break;case 31:Xn(a,t),Jn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,pd(t,c)));break;case 13:Xn(a,t),Jn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(xd=xt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,pd(t,c)));break;case 22:f=t.memoizedState!==null;var U=r!==null&&r.memoizedState!==null,te=Ka,le=fn;if(Ka=te||f,fn=le||U,Xn(a,t),fn=le,Ka=te,Jn(t),c&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(r===null||U||Ka||fn||zr(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){U=r=a;try{if(m=U.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=U.stateNode;var me=U.memoizedProps.style,se=me!=null&&me.hasOwnProperty("display")?me.display:null;E.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(De){Rt(U,U.return,De)}}}else if(a.tag===6){if(r===null){U=a;try{U.stateNode.nodeValue=f?"":U.memoizedProps}catch(De){Rt(U,U.return,De)}}}else if(a.tag===18){if(r===null){U=a;try{var ie=U.stateNode;f?wy(ie,!0):wy(U.stateNode,!1)}catch(De){Rt(U,U.return,De)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=t.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,pd(t,r))));break;case 19:Xn(a,t),Jn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,pd(t,c)));break;case 30:break;case 21:break;default:Xn(a,t),Jn(t)}}function Jn(t){var a=t.flags;if(a&2){try{for(var r,c=t.return;c!==null;){if(Eb(c)){r=c;break}c=c.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var f=r.stateNode,m=gm(t);md(t,m,f);break;case 5:var v=r.stateNode;r.flags&32&&(Qn(v,""),r.flags&=-33);var E=gm(t);md(t,E,v);break;case 3:case 4:var U=r.stateNode.containerInfo,te=gm(t);xm(t,te,U);break;default:throw Error(i(161))}}catch(le){Rt(t,t.return,le)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Db(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Db(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Wa(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)jb(t,a.alternate,a),a=a.sibling}function zr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Di(4,a,a.return),zr(a);break;case 1:ya(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&wb(a,a.return,r),zr(a);break;case 27:yc(a.stateNode);case 26:case 5:ya(a,a.return),zr(a);break;case 22:a.memoizedState===null&&zr(a);break;case 30:zr(a);break;default:zr(a)}t=t.sibling}}function Xa(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,f=t,m=a,v=m.flags;switch(m.tag){case 0:case 11:case 15:Xa(f,m,r),cc(4,m);break;case 1:if(Xa(f,m,r),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(te){Rt(c,c.return,te)}if(c=m,f=c.updateQueue,f!==null){var E=c.stateNode;try{var U=f.shared.hiddenCallbacks;if(U!==null)for(f.shared.hiddenCallbacks=null,f=0;f<U.length;f++)ux(U[f],E)}catch(te){Rt(c,c.return,te)}}r&&v&64&&_b(m),uc(m,m.return);break;case 27:Sb(m);case 26:case 5:Xa(f,m,r),r&&c===null&&v&4&&Nb(m),uc(m,m.return);break;case 12:Xa(f,m,r);break;case 31:Xa(f,m,r),r&&v&4&&Rb(f,m);break;case 13:Xa(f,m,r),r&&v&4&&kb(f,m);break;case 22:m.memoizedState===null&&Xa(f,m,r),uc(m,m.return);break;case 30:break;default:Xa(f,m,r)}a=a.sibling}}function ym(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Wo(r))}function vm(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Wo(t))}function Qs(t,a,r,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Mb(t,a,r,c),a=a.sibling}function Mb(t,a,r,c){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Qs(t,a,r,c),f&2048&&cc(9,a);break;case 1:Qs(t,a,r,c);break;case 3:Qs(t,a,r,c),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Wo(t)));break;case 12:if(f&2048){Qs(t,a,r,c),t=a.stateNode;try{var m=a.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(U){Rt(a,a.return,U)}}else Qs(t,a,r,c);break;case 31:Qs(t,a,r,c);break;case 13:Qs(t,a,r,c);break;case 23:break;case 22:m=a.stateNode,v=a.alternate,a.memoizedState!==null?m._visibility&2?Qs(t,a,r,c):dc(t,a):m._visibility&2?Qs(t,a,r,c):(m._visibility|=2,Fl(t,a,r,c,(a.subtreeFlags&10256)!==0||!1)),f&2048&&ym(v,a);break;case 24:Qs(t,a,r,c),f&2048&&vm(a.alternate,a);break;default:Qs(t,a,r,c)}}function Fl(t,a,r,c,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var m=t,v=a,E=r,U=c,te=v.flags;switch(v.tag){case 0:case 11:case 15:Fl(m,v,E,U,f),cc(8,v);break;case 23:break;case 22:var le=v.stateNode;v.memoizedState!==null?le._visibility&2?Fl(m,v,E,U,f):dc(m,v):(le._visibility|=2,Fl(m,v,E,U,f)),f&&te&2048&&ym(v.alternate,v);break;case 24:Fl(m,v,E,U,f),f&&te&2048&&vm(v.alternate,v);break;default:Fl(m,v,E,U,f)}a=a.sibling}}function dc(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,c=a,f=c.flags;switch(c.tag){case 22:dc(r,c),f&2048&&ym(c.alternate,c);break;case 24:dc(r,c),f&2048&&vm(c.alternate,c);break;default:dc(r,c)}a=a.sibling}}var hc=8192;function ql(t,a,r){if(t.subtreeFlags&hc)for(t=t.child;t!==null;)Ob(t,a,r),t=t.sibling}function Ob(t,a,r){switch(t.tag){case 26:ql(t,a,r),t.flags&hc&&t.memoizedState!==null&&KE(r,Ks,t.memoizedState,t.memoizedProps);break;case 5:ql(t,a,r);break;case 3:case 4:var c=Ks;Ks=Cd(t.stateNode.containerInfo),ql(t,a,r),Ks=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=hc,hc=16777216,ql(t,a,r),hc=c):ql(t,a,r));break;default:ql(t,a,r)}}function Vb(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function fc(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var c=a[r];Sn=c,Lb(c,t)}Vb(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Pb(t),t=t.sibling}function Pb(t){switch(t.tag){case 0:case 11:case 15:fc(t),t.flags&2048&&Di(9,t,t.return);break;case 3:fc(t);break;case 12:fc(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,gd(t)):fc(t);break;default:fc(t)}}function gd(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var c=a[r];Sn=c,Lb(c,t)}Vb(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Di(8,a,a.return),gd(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,gd(a));break;default:gd(a)}t=t.sibling}}function Lb(t,a){for(;Sn!==null;){var r=Sn;switch(r.tag){case 0:case 11:case 15:Di(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Wo(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,Sn=c;else e:for(r=t;Sn!==null;){c=Sn;var f=c.sibling,m=c.return;if(Ab(c),c===r){Sn=null;break e}if(f!==null){f.return=m,Sn=f;break e}Sn=m}}}var cE={getCacheForType:function(t){var a=Rn(un),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return Rn(un).controller.signal}},uE=typeof WeakMap=="function"?WeakMap:Map,St=0,Ot=null,ct=null,dt=0,Ct=0,hs=null,Mi=!1,Hl=!1,_m=!1,Ja=0,Qt=0,Oi=0,Fr=0,wm=0,fs=0,$l=0,mc=null,Zn=null,Nm=!1,xd=0,Ub=0,bd=1/0,yd=null,Vi=null,yn=0,Pi=null,Gl=null,Za=0,Em=0,Sm=null,Bb=null,pc=0,Tm=null;function ms(){return(St&2)!==0&&dt!==0?dt&-dt:k.T!==null?Im():vu()}function zb(){if(fs===0)if((dt&536870912)===0||bt){var t=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),fs=t}else fs=536870912;return t=us.current,t!==null&&(t.flags|=32),fs}function es(t,a,r){(t===Ot&&(Ct===2||Ct===9)||t.cancelPendingCommit!==null)&&(Yl(t,0),Li(t,dt,fs,!1)),wn(t,r),((St&2)===0||t!==Ot)&&(t===Ot&&((St&2)===0&&(Fr|=r),Qt===4&&Li(t,dt,fs,!1)),va(t))}function Fb(t,a,r){if((St&6)!==0)throw Error(i(327));var c=!r&&(a&127)===0&&(a&t.expiredLanes)===0||qn(t,a),f=c?fE(t,a):Am(t,a,!0),m=c;do{if(f===0){Hl&&!c&&Li(t,a,0,!1);break}else{if(r=t.current.alternate,m&&!dE(r)){f=Am(t,a,!1),m=!1;continue}if(f===2){if(m=a,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var E=t;f=mc;var U=E.current.memoizedState.isDehydrated;if(U&&(Yl(E,v).flags|=256),v=Am(E,v,!1),v!==2){if(_m&&!U){E.errorRecoveryDisabledLanes|=m,Fr|=m,f=4;break e}m=Zn,Zn=f,m!==null&&(Zn===null?Zn=m:Zn.push.apply(Zn,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Yl(t,0),Li(t,a,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Li(c,a,fs,!Mi);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=xd+300-xt(),10<f)){if(Li(c,a,fs,!Mi),Gt(c,0,!0)!==0)break e;Za=a,c.timeoutHandle=yy(qb.bind(null,c,r,Zn,yd,Nm,a,fs,Fr,$l,Mi,m,"Throttled",-0,0),f);break e}qb(c,r,Zn,yd,Nm,a,fs,Fr,$l,Mi,m,null,-0,0)}}break}while(!0);va(t)}function qb(t,a,r,c,f,m,v,E,U,te,le,me,se,ie){if(t.timeoutHandle=-1,me=a.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fs},Ob(a,m,me);var De=(m&62914560)===m?xd-xt():(m&4194048)===m?Ub-xt():0;if(De=QE(me,De),De!==null){Za=m,t.cancelPendingCommit=De(Xb.bind(null,t,a,m,r,c,f,v,E,U,le,me,null,se,ie)),Li(t,m,v,!te);return}}Xb(t,a,m,r,c,f,v,E,U)}function dE(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],m=f.getSnapshot;f=f.value;try{if(!os(m(),f))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Li(t,a,r,c){a&=~wm,a&=~Fr,t.suspendedLanes|=a,t.pingedLanes&=~a,c&&(t.warmLanes|=a),c=t.expirationTimes;for(var f=a;0<f;){var m=31-ce(f),v=1<<m;c[m]=-1,f&=~v}r!==0&&Us(t,r,a)}function vd(){return(St&6)===0?(gc(0),!1):!0}function jm(){if(ct!==null){if(Ct===0)var t=ct.return;else t=ct,Fa=Dr=null,qf(t),Pl=null,Jo=0,t=ct;for(;t!==null;)vb(t.alternate,t),t=t.return;ct=null}}function Yl(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,kE(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Za=0,jm(),Ot=t,ct=r=Ba(t.current,null),dt=a,Ct=0,hs=null,Mi=!1,Hl=qn(t,a),_m=!1,$l=fs=wm=Fr=Oi=Qt=0,Zn=mc=null,Nm=!1,(a&8)!==0&&(a|=a&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=a;0<c;){var f=31-ce(c),m=1<<f;a|=t[f],c&=~m}return Ja=a,zu(),r}function Hb(t,a){nt=null,k.H=rc,a===Vl||a===Qu?(a=rx(),Ct=3):a===kf?(a=rx(),Ct=4):Ct=a===im?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,hs=a,ct===null&&(Qt=1,cd(t,As(a,t.current)))}function $b(){var t=us.current;return t===null?!0:(dt&4194048)===dt?Is===null:(dt&62914560)===dt||(dt&536870912)!==0?t===Is:!1}function Gb(){var t=k.H;return k.H=rc,t===null?rc:t}function Yb(){var t=k.A;return k.A=cE,t}function _d(){Qt=4,Mi||(dt&4194048)!==dt&&us.current!==null||(Hl=!0),(Oi&134217727)===0&&(Fr&134217727)===0||Ot===null||Li(Ot,dt,fs,!1)}function Am(t,a,r){var c=St;St|=2;var f=Gb(),m=Yb();(Ot!==t||dt!==a)&&(yd=null,Yl(t,a)),a=!1;var v=Qt;e:do try{if(Ct!==0&&ct!==null){var E=ct,U=hs;switch(Ct){case 8:jm(),v=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(a=!0);var te=Ct;if(Ct=0,hs=null,Kl(t,E,U,te),r&&Hl){v=0;break e}break;default:te=Ct,Ct=0,hs=null,Kl(t,E,U,te)}}hE(),v=Qt;break}catch(le){Hb(t,le)}while(!0);return a&&t.shellSuspendCounter++,Fa=Dr=null,St=c,k.H=f,k.A=m,ct===null&&(Ot=null,dt=0,zu()),v}function hE(){for(;ct!==null;)Kb(ct)}function fE(t,a){var r=St;St|=2;var c=Gb(),f=Yb();Ot!==t||dt!==a?(yd=null,bd=xt()+500,Yl(t,a)):Hl=qn(t,a);e:do try{if(Ct!==0&&ct!==null){a=ct;var m=hs;t:switch(Ct){case 1:Ct=0,hs=null,Kl(t,a,m,1);break;case 2:case 9:if(ax(m)){Ct=0,hs=null,Qb(a);break}a=function(){Ct!==2&&Ct!==9||Ot!==t||(Ct=7),va(t)},m.then(a,a);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:ax(m)?(Ct=0,hs=null,Qb(a)):(Ct=0,hs=null,Kl(t,a,m,7));break;case 5:var v=null;switch(ct.tag){case 26:v=ct.memoizedState;case 5:case 27:var E=ct;if(v?My(v):E.stateNode.complete){Ct=0,hs=null;var U=E.sibling;if(U!==null)ct=U;else{var te=E.return;te!==null?(ct=te,wd(te)):ct=null}break t}}Ct=0,hs=null,Kl(t,a,m,5);break;case 6:Ct=0,hs=null,Kl(t,a,m,6);break;case 8:jm(),Qt=6;break e;default:throw Error(i(462))}}mE();break}catch(le){Hb(t,le)}while(!0);return Fa=Dr=null,k.H=c,k.A=f,St=r,ct!==null?0:(Ot=null,dt=0,zu(),Qt)}function mE(){for(;ct!==null&&!it();)Kb(ct)}function Kb(t){var a=bb(t.alternate,t,Ja);t.memoizedProps=t.pendingProps,a===null?wd(t):ct=a}function Qb(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=hb(r,a,a.pendingProps,a.type,void 0,dt);break;case 11:a=hb(r,a,a.pendingProps,a.type.render,a.ref,dt);break;case 5:qf(a);default:vb(r,a),a=ct=Y0(a,Ja),a=bb(r,a,Ja)}t.memoizedProps=t.pendingProps,a===null?wd(t):ct=a}function Kl(t,a,r,c){Fa=Dr=null,qf(a),Pl=null,Jo=0;var f=a.return;try{if(nE(t,f,a,r,dt)){Qt=1,cd(t,As(r,t.current)),ct=null;return}}catch(m){if(f!==null)throw ct=f,m;Qt=1,cd(t,As(r,t.current)),ct=null;return}a.flags&32768?(bt||c===1?t=!0:Hl||(dt&536870912)!==0?t=!1:(Mi=t=!0,(c===2||c===9||c===3||c===6)&&(c=us.current,c!==null&&c.tag===13&&(c.flags|=16384))),Wb(a,t)):wd(a)}function wd(t){var a=t;do{if((a.flags&32768)!==0){Wb(a,Mi);return}t=a.return;var r=iE(a.alternate,a,Ja);if(r!==null){ct=r;return}if(a=a.sibling,a!==null){ct=a;return}ct=a=t}while(a!==null);Qt===0&&(Qt=5)}function Wb(t,a){do{var r=rE(t.alternate,t);if(r!==null){r.flags&=32767,ct=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){ct=t;return}ct=t=r}while(t!==null);Qt=6,ct=null}function Xb(t,a,r,c,f,m,v,E,U){t.cancelPendingCommit=null;do Nd();while(yn!==0);if((St&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(m=a.lanes|a.childLanes,m|=gf,sa(t,r,m,v,E,U),t===Ot&&(ct=Ot=null,dt=0),Gl=a,Pi=t,Za=r,Em=m,Sm=f,Bb=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,bE(ws,function(){return ny(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=k.T,k.T=null,f=K.p,K.p=2,v=St,St|=4;try{lE(t,a,r)}finally{St=v,K.p=f,k.T=c}}yn=1,Jb(),Zb(),ey()}}function Jb(){if(yn===1){yn=0;var t=Pi,a=Gl,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=k.T,k.T=null;var c=K.p;K.p=2;var f=St;St|=4;try{Ib(a,t);var m=Bm,v=L0(t.containerInfo),E=m.focusedElem,U=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&P0(E.ownerDocument.documentElement,E)){if(U!==null&&df(E)){var te=U.start,le=U.end;if(le===void 0&&(le=te),"selectionStart"in E)E.selectionStart=te,E.selectionEnd=Math.min(le,E.value.length);else{var me=E.ownerDocument||document,se=me&&me.defaultView||window;if(se.getSelection){var ie=se.getSelection(),De=E.textContent.length,$e=Math.min(U.start,De),Mt=U.end===void 0?$e:Math.min(U.end,De);!ie.extend&&$e>Mt&&(v=Mt,Mt=$e,$e=v);var Q=V0(E,$e),$=V0(E,Mt);if(Q&&$&&(ie.rangeCount!==1||ie.anchorNode!==Q.node||ie.anchorOffset!==Q.offset||ie.focusNode!==$.node||ie.focusOffset!==$.offset)){var ee=me.createRange();ee.setStart(Q.node,Q.offset),ie.removeAllRanges(),$e>Mt?(ie.addRange(ee),ie.extend($.node,$.offset)):(ee.setEnd($.node,$.offset),ie.addRange(ee))}}}}for(me=[],ie=E;ie=ie.parentNode;)ie.nodeType===1&&me.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<me.length;E++){var he=me[E];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Od=!!Um,Bm=Um=null}finally{St=f,K.p=c,k.T=r}}t.current=a,yn=2}}function Zb(){if(yn===2){yn=0;var t=Pi,a=Gl,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=k.T,k.T=null;var c=K.p;K.p=2;var f=St;St|=4;try{jb(t,a.alternate,a)}finally{St=f,K.p=c,k.T=r}}yn=3}}function ey(){if(yn===4||yn===3){yn=0,Lt();var t=Pi,a=Gl,r=Za,c=Bb;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?yn=5:(yn=0,Gl=Pi=null,ty(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Vi=null),Va(r),a=a.stateNode,G&&typeof G.onCommitFiberRoot=="function")try{G.onCommitFiberRoot(R,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=k.T,f=K.p,K.p=2,k.T=null;try{for(var m=t.onRecoverableError,v=0;v<c.length;v++){var E=c[v];m(E.value,{componentStack:E.stack})}}finally{k.T=a,K.p=f}}(Za&3)!==0&&Nd(),va(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===Tm?pc++:(pc=0,Tm=t):pc=0,gc(0)}}function ty(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Wo(a)))}function Nd(){return Jb(),Zb(),ey(),ny()}function ny(){if(yn!==5)return!1;var t=Pi,a=Em;Em=0;var r=Va(Za),c=k.T,f=K.p;try{K.p=32>r?32:r,k.T=null,r=Sm,Sm=null;var m=Pi,v=Za;if(yn=0,Gl=Pi=null,Za=0,(St&6)!==0)throw Error(i(331));var E=St;if(St|=4,Pb(m.current),Mb(m,m.current,v,r),St=E,gc(0,!1),G&&typeof G.onPostCommitFiberRoot=="function")try{G.onPostCommitFiberRoot(R,m)}catch{}return!0}finally{K.p=f,k.T=c,ty(t,a)}}function sy(t,a,r){a=As(r,a),a=am(t.stateNode,a,2),t=Ri(t,a,2),t!==null&&(wn(t,2),va(t))}function Rt(t,a,r){if(t.tag===3)sy(t,t,r);else for(;a!==null;){if(a.tag===3){sy(a,t,r);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Vi===null||!Vi.has(c))){t=As(r,t),r=ab(2),c=Ri(a,r,2),c!==null&&(ib(r,c,a,t),wn(c,2),va(c));break}}a=a.return}}function Cm(t,a,r){var c=t.pingCache;if(c===null){c=t.pingCache=new uE;var f=new Set;c.set(a,f)}else f=c.get(a),f===void 0&&(f=new Set,c.set(a,f));f.has(r)||(_m=!0,f.add(r),t=pE.bind(null,t,a,r),a.then(t,t))}function pE(t,a,r){var c=t.pingCache;c!==null&&c.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Ot===t&&(dt&r)===r&&(Qt===4||Qt===3&&(dt&62914560)===dt&&300>xt()-xd?(St&2)===0&&Yl(t,0):wm|=r,$l===dt&&($l=0)),va(t)}function ay(t,a){a===0&&(a=_n()),t=Rr(t,a),t!==null&&(wn(t,a),va(t))}function gE(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),ay(t,r)}function xE(t,a){var r=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(a),ay(t,r)}function bE(t,a){return je(t,a)}var Ed=null,Ql=null,Rm=!1,Sd=!1,km=!1,Ui=0;function va(t){t!==Ql&&t.next===null&&(Ql===null?Ed=Ql=t:Ql=Ql.next=t),Sd=!0,Rm||(Rm=!0,vE())}function gc(t,a){if(!km&&Sd){km=!0;do for(var r=!1,c=Ed;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-ce(42|t)+1)-1,m&=f&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,oy(c,m))}else m=dt,m=Gt(c,c===Ot?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||qn(c,m)||(r=!0,oy(c,m));c=c.next}while(r);km=!1}}function yE(){iy()}function iy(){Sd=Rm=!1;var t=0;Ui!==0&&RE()&&(t=Ui);for(var a=xt(),r=null,c=Ed;c!==null;){var f=c.next,m=ry(c,a);m===0?(c.next=null,r===null?Ed=f:r.next=f,f===null&&(Ql=r)):(r=c,(t!==0||(m&3)!==0)&&(Sd=!0)),c=f}yn!==0&&yn!==5||gc(t),Ui!==0&&(Ui=0)}function ry(t,a){for(var r=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-ce(m),E=1<<v,U=f[v];U===-1?((E&r)===0||(E&c)!==0)&&(f[v]=na(E,a)):U<=a&&(t.expiredLanes|=E),m&=~E}if(a=Ot,r=dt,r=Gt(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,r===0||t===a&&(Ct===2||Ct===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Be(c),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||qn(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(c!==null&&Be(c),Va(r)){case 2:case 8:r=_t;break;case 32:r=ws;break;case 268435456:r=Vn;break;default:r=ws}return c=ly.bind(null,t),r=je(r,c),t.callbackPriority=a,t.callbackNode=r,a}return c!==null&&c!==null&&Be(c),t.callbackPriority=2,t.callbackNode=null,2}function ly(t,a){if(yn!==0&&yn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(Nd()&&t.callbackNode!==r)return null;var c=dt;return c=Gt(t,t===Ot?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Fb(t,c,a),ry(t,xt()),t.callbackNode!=null&&t.callbackNode===r?ly.bind(null,t):null)}function oy(t,a){if(Nd())return null;Fb(t,a,!0)}function vE(){IE(function(){(St&6)!==0?je(rn,yE):iy()})}function Im(){if(Ui===0){var t=Ml;t===0&&(t=Re,Re<<=1,(Re&261888)===0&&(Re=256)),Ui=t}return Ui}function cy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yl(""+t)}function uy(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function _E(t,a,r,c,f){if(a==="submit"&&r&&r.stateNode===f){var m=cy((f[Nn]||null).action),v=c.submitter;v&&(a=(a=v[Nn]||null)?cy(a.formAction):v.getAttribute("formAction"),a!==null&&(m=a,v=null));var E=new fa("action","action",null,c,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ui!==0){var U=v?uy(f,v):new FormData(f);Jf(r,{pending:!0,data:U,method:f.method,action:m},null,U)}}else typeof m=="function"&&(E.preventDefault(),U=v?uy(f,v):new FormData(f),Jf(r,{pending:!0,data:U,method:f.method,action:m},m,U))},currentTarget:f}]})}}for(var Dm=0;Dm<pf.length;Dm++){var Mm=pf[Dm],wE=Mm.toLowerCase(),NE=Mm[0].toUpperCase()+Mm.slice(1);Ys(wE,"on"+NE)}Ys(z0,"onAnimationEnd"),Ys(F0,"onAnimationIteration"),Ys(q0,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(U2,"onTransitionRun"),Ys(B2,"onTransitionStart"),Ys(z2,"onTransitionCancel"),Ys(H0,"onTransitionEnd"),ca("onMouseEnter",["mouseout","mouseover"]),ca("onMouseLeave",["mouseout","mouseover"]),ca("onPointerEnter",["pointerout","pointerover"]),ca("onPointerLeave",["pointerout","pointerover"]),oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oa("onBeforeInput",["compositionend","keypress","textInput","paste"]),oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xc));function dy(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var c=t[r],f=c.event;c=c.listeners;e:{var m=void 0;if(a)for(var v=c.length-1;0<=v;v--){var E=c[v],U=E.instance,te=E.currentTarget;if(E=E.listener,U!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=te;try{m(f)}catch(le){Bu(le)}f.currentTarget=null,m=U}else for(v=0;v<c.length;v++){if(E=c[v],U=E.instance,te=E.currentTarget,E=E.listener,U!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=te;try{m(f)}catch(le){Bu(le)}f.currentTarget=null,m=U}}}}function ut(t,a){var r=a[ml];r===void 0&&(r=a[ml]=new Set);var c=t+"__bubble";r.has(c)||(hy(a,t,2,!1),r.add(c))}function Om(t,a,r){var c=0;a&&(c|=4),hy(r,t,c,a)}var Td="_reactListening"+Math.random().toString(36).slice(2);function Vm(t){if(!t[Td]){t[Td]=!0,Co.forEach(function(r){r!=="selectionchange"&&(EE.has(r)||Om(r,!1,t),Om(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Td]||(a[Td]=!0,Om("selectionchange",!1,a))}}function hy(t,a,r,c){switch(zy(a)){case 2:var f=JE;break;case 8:f=ZE;break;default:f=Xm}r=f.bind(null,a,r,t),f=void 0,!wr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(a,r,{capture:!0,passive:f}):t.addEventListener(a,r,!0):f!==void 0?t.addEventListener(a,r,{passive:f}):t.addEventListener(a,r,!1)}function Pm(t,a,r,c,f){var m=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var E=c.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=c.return;v!==null;){var U=v.tag;if((U===3||U===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=ra(E),v===null)return;if(U=v.tag,U===5||U===6||U===26||U===27){c=m=v;continue e}E=E.parentNode}}c=c.return}vi(function(){var te=m,le=Es(r),me=[];e:{var se=$0.get(t);if(se!==void 0){var ie=fa,De=t;switch(t){case"keypress":if(Er(r)===0)break e;case"keydown":case"keyup":ie=Pu;break;case"focusin":De="focus",ie=Tr;break;case"focusout":De="blur",ie=Tr;break;case"beforeblur":case"afterblur":ie=Tr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Fo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=b;break;case z0:case F0:case q0:ie=Ru;break;case H0:ie=T;break;case"scroll":case"scrollend":ie=zo;break;case"wheel":ie=ae;break;case"copy":case"cut":case"paste":ie=ku;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Ua;break;case"toggle":case"beforetoggle":ie=tt}var $e=(a&4)!==0,Mt=!$e&&(t==="scroll"||t==="scrollend"),Q=$e?se!==null?se+"Capture":null:se;$e=[];for(var $=te,ee;$!==null;){var he=$;if(ee=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||ee===null||Q===null||(he=qs($,Q),he!=null&&$e.push(bc($,he,ee))),Mt)break;$=$.return}0<$e.length&&(se=new ie(se,De,null,r,le),me.push({event:se,listeners:$e}))}}if((a&7)===0){e:{if(se=t==="mouseover"||t==="pointerover",ie=t==="mouseout"||t==="pointerout",se&&r!==Lo&&(De=r.relatedTarget||r.fromElement)&&(ra(De)||De[aa]))break e;if((ie||se)&&(se=le.window===le?le:(se=le.ownerDocument)?se.defaultView||se.parentWindow:window,ie?(De=r.relatedTarget||r.toElement,ie=te,De=De?ra(De):null,De!==null&&(Mt=u(De),$e=De.tag,De!==Mt||$e!==5&&$e!==27&&$e!==6)&&(De=null)):(ie=null,De=te),ie!==De)){if($e=Fo,he="onMouseLeave",Q="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&($e=Ua,he="onPointerLeave",Q="onPointerEnter",$="pointer"),Mt=ie==null?se:rs(ie),ee=De==null?se:rs(De),se=new $e(he,$+"leave",ie,r,le),se.target=Mt,se.relatedTarget=ee,he=null,ra(le)===te&&($e=new $e(Q,$+"enter",De,r,le),$e.target=ee,$e.relatedTarget=Mt,he=$e),Mt=he,ie&&De)t:{for($e=SE,Q=ie,$=De,ee=0,he=Q;he;he=$e(he))ee++;he=0;for(var Fe=$;Fe;Fe=$e(Fe))he++;for(;0<ee-he;)Q=$e(Q),ee--;for(;0<he-ee;)$=$e($),he--;for(;ee--;){if(Q===$||$!==null&&Q===$.alternate){$e=Q;break t}Q=$e(Q),$=$e($)}$e=null}else $e=null;ie!==null&&fy(me,se,ie,$e,!1),De!==null&&Mt!==null&&fy(me,Mt,De,$e,!0)}}e:{if(se=te?rs(te):window,ie=se.nodeName&&se.nodeName.toLowerCase(),ie==="select"||ie==="input"&&se.type==="file")var wt=R0;else if(A0(se))if(k0)wt=V2;else{wt=M2;var Le=D2}else ie=se.nodeName,!ie||ie.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?te&&bl(te.elementType)&&(wt=R0):wt=O2;if(wt&&(wt=wt(t,te))){C0(me,wt,r,le);break e}Le&&Le(t,se,te),t==="focusout"&&te&&se.type==="number"&&te.memoizedProps.value!=null&&Oo(se,"number",se.value)}switch(Le=te?rs(te):window,t){case"focusin":(A0(Le)||Le.contentEditable==="true")&&(Tl=Le,hf=te,Yo=null);break;case"focusout":Yo=hf=Tl=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,U0(me,r,le);break;case"selectionchange":if(L2)break;case"keydown":case"keyup":U0(me,r,le)}var at;if(Et)e:{switch(t){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else Sl?jr(t,r)&&(ht="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(ht="onCompositionStart");ht&&(ga&&r.locale!=="ko"&&(Sl||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&Sl&&(at=Bo()):(ha=le,Uo="value"in ha?ha.value:ha.textContent,Sl=!0)),Le=jd(te,ht),0<Le.length&&(ht=new pa(ht,t,null,r,le),me.push({event:ht,listeners:Le}),at?ht.data=at:(at=El(r),at!==null&&(ht.data=at)))),(at=Ts?C2(t,r):R2(t,r))&&(ht=jd(te,"onBeforeInput"),0<ht.length&&(Le=new pa("onBeforeInput","beforeinput",null,r,le),me.push({event:Le,listeners:ht}),Le.data=at)),_E(me,t,te,r,le)}dy(me,a)})}function bc(t,a,r){return{instance:t,listener:a,currentTarget:r}}function jd(t,a){for(var r=a+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=qs(t,r),f!=null&&c.unshift(bc(t,f,m)),f=qs(t,a),f!=null&&c.push(bc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function SE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function fy(t,a,r,c,f){for(var m=a._reactName,v=[];r!==null&&r!==c;){var E=r,U=E.alternate,te=E.stateNode;if(E=E.tag,U!==null&&U===c)break;E!==5&&E!==26&&E!==27||te===null||(U=te,f?(te=qs(r,m),te!=null&&v.unshift(bc(r,te,U))):f||(te=qs(r,m),te!=null&&v.push(bc(r,te,U)))),r=r.return}v.length!==0&&t.push({event:a,listeners:v})}var TE=/\r\n?/g,jE=/\u0000|\uFFFD/g;function my(t){return(typeof t=="string"?t:""+t).replace(TE,`
`).replace(jE,"")}function py(t,a){return a=my(a),my(t)===a}function Dt(t,a,r,c,f,m){switch(r){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Qn(t,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Qn(t,""+c);break;case"className":ls(t,"class",c);break;case"tabIndex":ls(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(t,r,c);break;case"style":Po(t,c,m);break;case"data":if(a!=="object"){ls(t,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=yl(""+c),t.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(a!=="input"&&Dt(t,a,"name",f.name,f,null),Dt(t,a,"formEncType",f.formEncType,f,null),Dt(t,a,"formMethod",f.formMethod,f,null),Dt(t,a,"formTarget",f.formTarget,f,null)):(Dt(t,a,"encType",f.encType,f,null),Dt(t,a,"method",f.method,f,null),Dt(t,a,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=yl(""+c),t.setAttribute(r,c);break;case"onClick":c!=null&&(t.onclick=Fs);break;case"onScroll":c!=null&&ut("scroll",t);break;case"onScrollEnd":c!=null&&ut("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}r=yl(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""+c):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":c===!0?t.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,c):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(r,c):t.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(r):t.setAttribute(r,c);break;case"popover":ut("beforetoggle",t),ut("toggle",t),gl(t,"popover",c);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":gl(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=ju.get(r)||r,gl(t,r,c))}}function Lm(t,a,r,c,f,m){switch(r){case"style":Po(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof c=="string"?Qn(t,c):(typeof c=="number"||typeof c=="bigint")&&Qn(t,""+c);break;case"onScroll":c!=null&&ut("scroll",t);break;case"onScrollEnd":c!=null&&ut("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Fs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ro.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),a=r.slice(2,f?r.length-7:void 0),m=t[Nn]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(a,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,c,f);break e}r in t?t[r]=c:c===!0?t.setAttribute(r,""):gl(t,r,c)}}}function In(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",t),ut("load",t);var c=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var v=r[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Dt(t,a,m,v,r,null)}}f&&Dt(t,a,"srcSet",r.srcSet,r,null),c&&Dt(t,a,"src",r.src,r,null);return;case"input":ut("invalid",t);var E=m=v=f=null,U=null,te=null;for(c in r)if(r.hasOwnProperty(c)){var le=r[c];if(le!=null)switch(c){case"name":f=le;break;case"type":v=le;break;case"checked":U=le;break;case"defaultChecked":te=le;break;case"value":m=le;break;case"defaultValue":E=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(137,a));break;default:Dt(t,a,c,le,r,null)}}Eu(t,m,E,U,te,v,f,!1);return;case"select":ut("invalid",t),c=v=m=null;for(f in r)if(r.hasOwnProperty(f)&&(E=r[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":c=E;default:Dt(t,a,f,E,r,null)}a=m,r=v,t.multiple=!!c,a!=null?gi(t,!!c,a,!1):r!=null&&gi(t,!!c,r,!0);return;case"textarea":ut("invalid",t),m=f=c=null;for(v in r)if(r.hasOwnProperty(v)&&(E=r[v],E!=null))switch(v){case"value":c=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Dt(t,a,v,E,r,null)}xi(t,c,f,m);return;case"option":for(U in r)r.hasOwnProperty(U)&&(c=r[U],c!=null)&&(U==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":Dt(t,a,U,c,r,null));return;case"dialog":ut("beforetoggle",t),ut("toggle",t),ut("cancel",t),ut("close",t);break;case"iframe":case"object":ut("load",t);break;case"video":case"audio":for(c=0;c<xc.length;c++)ut(xc[c],t);break;case"image":ut("error",t),ut("load",t);break;case"details":ut("toggle",t);break;case"embed":case"source":case"link":ut("error",t),ut("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in r)if(r.hasOwnProperty(te)&&(c=r[te],c!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Dt(t,a,te,c,r,null)}return;default:if(bl(a)){for(le in r)r.hasOwnProperty(le)&&(c=r[le],c!==void 0&&Lm(t,a,le,c,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(c=r[E],c!=null&&Dt(t,a,E,c,r,null))}function AE(t,a,r,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,E=null,U=null,te=null,le=null;for(ie in r){var me=r[ie];if(r.hasOwnProperty(ie)&&me!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":U=me;default:c.hasOwnProperty(ie)||Dt(t,a,ie,null,c,me)}}for(var se in c){var ie=c[se];if(me=r[se],c.hasOwnProperty(se)&&(ie!=null||me!=null))switch(se){case"type":m=ie;break;case"name":f=ie;break;case"checked":te=ie;break;case"defaultChecked":le=ie;break;case"value":v=ie;break;case"defaultValue":E=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ie!==me&&Dt(t,a,se,ie,c,me)}}xl(t,v,E,U,te,le,m,f);return;case"select":ie=v=E=se=null;for(m in r)if(U=r[m],r.hasOwnProperty(m)&&U!=null)switch(m){case"value":break;case"multiple":ie=U;default:c.hasOwnProperty(m)||Dt(t,a,m,null,c,U)}for(f in c)if(m=c[f],U=r[f],c.hasOwnProperty(f)&&(m!=null||U!=null))switch(f){case"value":se=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==U&&Dt(t,a,f,m,c,U)}a=E,r=v,c=ie,se!=null?gi(t,!!r,se,!1):!!c!=!!r&&(a!=null?gi(t,!!r,a,!0):gi(t,!!r,r?[]:"",!1));return;case"textarea":ie=se=null;for(E in r)if(f=r[E],r.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Dt(t,a,E,null,c,f)}for(v in c)if(f=c[v],m=r[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":se=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Dt(t,a,v,f,c,m)}Su(t,se,ie);return;case"option":for(var De in r)se=r[De],r.hasOwnProperty(De)&&se!=null&&!c.hasOwnProperty(De)&&(De==="selected"?t.selected=!1:Dt(t,a,De,null,c,se));for(U in c)se=c[U],ie=r[U],c.hasOwnProperty(U)&&se!==ie&&(se!=null||ie!=null)&&(U==="selected"?t.selected=se&&typeof se!="function"&&typeof se!="symbol":Dt(t,a,U,se,c,ie));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in r)se=r[$e],r.hasOwnProperty($e)&&se!=null&&!c.hasOwnProperty($e)&&Dt(t,a,$e,null,c,se);for(te in c)if(se=c[te],ie=r[te],c.hasOwnProperty(te)&&se!==ie&&(se!=null||ie!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,a));break;default:Dt(t,a,te,se,c,ie)}return;default:if(bl(a)){for(var Mt in r)se=r[Mt],r.hasOwnProperty(Mt)&&se!==void 0&&!c.hasOwnProperty(Mt)&&Lm(t,a,Mt,void 0,c,se);for(le in c)se=c[le],ie=r[le],!c.hasOwnProperty(le)||se===ie||se===void 0&&ie===void 0||Lm(t,a,le,se,c,ie);return}}for(var Q in r)se=r[Q],r.hasOwnProperty(Q)&&se!=null&&!c.hasOwnProperty(Q)&&Dt(t,a,Q,null,c,se);for(me in c)se=c[me],ie=r[me],!c.hasOwnProperty(me)||se===ie||se==null&&ie==null||Dt(t,a,me,se,c,ie)}function gy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var f=r[c],m=f.transferSize,v=f.initiatorType,E=f.duration;if(m&&E&&gy(v)){for(v=0,E=f.responseEnd,c+=1;c<r.length;c++){var U=r[c],te=U.startTime;if(te>E)break;var le=U.transferSize,me=U.initiatorType;le&&gy(me)&&(U=U.responseEnd,v+=le*(U<E?1:(E-te)/(U-te)))}if(--c,a+=8*(m+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Um=null,Bm=null;function Ad(t){return t.nodeType===9?t:t.ownerDocument}function xy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function by(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function zm(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fm=null;function RE(){var t=window.event;return t&&t.type==="popstate"?t===Fm?!1:(Fm=t,!0):(Fm=null,!1)}var yy=typeof setTimeout=="function"?setTimeout:void 0,kE=typeof clearTimeout=="function"?clearTimeout:void 0,vy=typeof Promise=="function"?Promise:void 0,IE=typeof queueMicrotask=="function"?queueMicrotask:typeof vy<"u"?function(t){return vy.resolve(null).then(t).catch(DE)}:yy;function DE(t){setTimeout(function(){throw t})}function Bi(t){return t==="head"}function _y(t,a){var r=a,c=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(c===0){t.removeChild(f),Zl(a);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")yc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,yc(r);for(var m=r.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[ia]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=v}}else r==="body"&&yc(t.ownerDocument.body);r=f}while(r);Zl(a)}function wy(t,a){var r=t;t=0;do{var c=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=c}while(r)}function qm(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":qm(r),pl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function ME(t,a,r,c){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[ia])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Ds(t.nextSibling),t===null)break}return null}function OE(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ds(t.nextSibling),t===null))return null;return t}function Ny(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ds(t.nextSibling),t===null))return null;return t}function Hm(t){return t.data==="$?"||t.data==="$~"}function $m(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function VE(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var c=function(){a(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Ds(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Gm=null;function Ey(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return Ds(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function Sy(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function Ty(t,a,r){switch(a=Ad(r),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function yc(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);pl(t)}var Ms=new Map,jy=new Set;function Cd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ei=K.d;K.d={f:PE,r:LE,D:UE,C:BE,L:zE,m:FE,X:HE,S:qE,M:$E};function PE(){var t=ei.f(),a=vd();return t||a}function LE(t){var a=Ns(t);a!==null&&a.tag===5&&a.type==="form"?Hx(a):ei.r(t)}var Wl=typeof document>"u"?null:document;function Ay(t,a,r){var c=Wl;if(c&&typeof a=="string"&&a){var f=Kn(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),jy.has(f)||(jy.add(f),t={rel:t,crossOrigin:r,href:a},c.querySelector(f)===null&&(a=c.createElement("link"),In(a,"link",t),on(a),c.head.appendChild(a)))}}function UE(t){ei.D(t),Ay("dns-prefetch",t,null)}function BE(t,a){ei.C(t,a),Ay("preconnect",t,a)}function zE(t,a,r){ei.L(t,a,r);var c=Wl;if(c&&t&&a){var f='link[rel="preload"][as="'+Kn(a)+'"]';a==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Kn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Kn(r.imageSizes)+'"]')):f+='[href="'+Kn(t)+'"]';var m=f;switch(a){case"style":m=Xl(t);break;case"script":m=Jl(t)}Ms.has(m)||(t=w({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),Ms.set(m,t),c.querySelector(f)!==null||a==="style"&&c.querySelector(vc(m))||a==="script"&&c.querySelector(_c(m))||(a=c.createElement("link"),In(a,"link",t),on(a),c.head.appendChild(a)))}}function FE(t,a){ei.m(t,a);var r=Wl;if(r&&t){var c=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Kn(c)+'"][href="'+Kn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Jl(t)}if(!Ms.has(m)&&(t=w({rel:"modulepreload",href:t},a),Ms.set(m,t),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(_c(m)))return}c=r.createElement("link"),In(c,"link",t),on(c),r.head.appendChild(c)}}}function qE(t,a,r){ei.S(t,a,r);var c=Wl;if(c&&t){var f=la(c).hoistableStyles,m=Xl(t);a=a||"default";var v=f.get(m);if(!v){var E={loading:0,preload:null};if(v=c.querySelector(vc(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":a},r),(r=Ms.get(m))&&Ym(t,r);var U=v=c.createElement("link");on(U),In(U,"link",t),U._p=new Promise(function(te,le){U.onload=te,U.onerror=le}),U.addEventListener("load",function(){E.loading|=1}),U.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Rd(v,a,c)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(m,v)}}}function HE(t,a){ei.X(t,a);var r=Wl;if(r&&t){var c=la(r).hoistableScripts,f=Jl(t),m=c.get(f);m||(m=r.querySelector(_c(f)),m||(t=w({src:t,async:!0},a),(a=Ms.get(f))&&Km(t,a),m=r.createElement("script"),on(m),In(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function $E(t,a){ei.M(t,a);var r=Wl;if(r&&t){var c=la(r).hoistableScripts,f=Jl(t),m=c.get(f);m||(m=r.querySelector(_c(f)),m||(t=w({src:t,async:!0,type:"module"},a),(a=Ms.get(f))&&Km(t,a),m=r.createElement("script"),on(m),In(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Cy(t,a,r,c){var f=(f=Ie.current)?Cd(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=Xl(r.href),r=la(f).hoistableStyles,c=r.get(a),c||(c={type:"style",instance:null,count:0,state:null},r.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Xl(r.href);var m=la(f).hoistableStyles,v=m.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=f.querySelector(vc(t)))&&!m._p&&(v.instance=m,v.state.loading=5),Ms.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Ms.set(t,r),m||GE(f,t,r,v.state))),a&&c===null)throw Error(i(528,""));return v}if(a&&c!==null)throw Error(i(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Jl(r),r=la(f).hoistableScripts,c=r.get(a),c||(c={type:"script",instance:null,count:0,state:null},r.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Xl(t){return'href="'+Kn(t)+'"'}function vc(t){return'link[rel="stylesheet"]['+t+"]"}function Ry(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function GE(t,a,r,c){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=t.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),In(a,"link",r),on(a),t.head.appendChild(a))}function Jl(t){return'[src="'+Kn(t)+'"]'}function _c(t){return"script[async]"+t}function ky(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var c=t.querySelector('style[data-href~="'+Kn(r.href)+'"]');if(c)return a.instance=c,on(c),c;var f=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),on(c),In(c,"style",f),Rd(c,r.precedence,t),a.instance=c;case"stylesheet":f=Xl(r.href);var m=t.querySelector(vc(f));if(m)return a.state.loading|=4,a.instance=m,on(m),m;c=Ry(r),(f=Ms.get(f))&&Ym(c,f),m=(t.ownerDocument||t).createElement("link"),on(m);var v=m;return v._p=new Promise(function(E,U){v.onload=E,v.onerror=U}),In(m,"link",c),a.state.loading|=4,Rd(m,r.precedence,t),a.instance=m;case"script":return m=Jl(r.src),(f=t.querySelector(_c(m)))?(a.instance=f,on(f),f):(c=r,(f=Ms.get(m))&&(c=w({},r),Km(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),on(f),In(f,"link",c),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Rd(c,r.precedence,t));return a.instance}function Rd(t,a,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var E=c[v];if(E.dataset.precedence===a)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function Ym(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Km(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var kd=null;function Iy(t,a,r){if(kd===null){var c=new Map,f=kd=new Map;f.set(r,c)}else f=kd,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(t))return c;for(c.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var m=r[f];if(!(m[ia]||m[ln]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(a)||"";v=t+v;var E=c.get(v);E?E.push(m):c.set(v,[m])}}return c}function Dy(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function YE(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function My(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function KE(t,a,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Xl(c.href),m=a.querySelector(vc(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Id.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=m,on(m);return}m=a.ownerDocument||a,c=Ry(c),(f=Ms.get(f))&&Ym(c,f),m=m.createElement("link"),on(m);var v=m;v._p=new Promise(function(E,U){v.onload=E,v.onerror=U}),In(m,"link",c),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Id.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var Qm=0;function QE(t,a){return t.stylesheets&&t.count===0&&Md(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var c=setTimeout(function(){if(t.stylesheets&&Md(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+a);0<t.imgBytes&&Qm===0&&(Qm=62500*CE());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Md(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Qm?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Id(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Md(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Dd=null;function Md(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Dd=new Map,a.forEach(WE,t),Dd=null,Id.call(t))}function WE(t,a){if(!(a.state.loading&4)){var r=Dd.get(t);if(r)var c=r.get(null);else{r=new Map,Dd.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),c=v)}c&&r.set(null,c)}f=a.instance,v=f.getAttribute("data-precedence"),m=r.get(v)||c,m===c&&r.set(null,f),r.set(v,f),this.count++,c=Id.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var wc={$$typeof:W,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function XE(t,a,r,c,f,m,v,E,U){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.hiddenUpdates=Hn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Oy(t,a,r,c,f,m,v,E,U,te,le,me){return t=new XE(t,a,r,v,U,te,le,me,E),a=1,m===!0&&(a|=24),m=cs(3,null,null,a),t.current=m,m.stateNode=t,a=Af(),a.refCount++,t.pooledCache=a,a.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:a},If(m),t}function Vy(t){return t?(t=Cl,t):Cl}function Py(t,a,r,c,f,m){f=Vy(f),c.context===null?c.context=f:c.pendingContext=f,c=Ci(a),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=Ri(t,c,a),r!==null&&(es(r,t,a),ec(r,t,a))}function Ly(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function Wm(t,a){Ly(t,a),(t=t.alternate)&&Ly(t,a)}function Uy(t){if(t.tag===13||t.tag===31){var a=Rr(t,67108864);a!==null&&es(a,t,67108864),Wm(t,67108864)}}function By(t){if(t.tag===13||t.tag===31){var a=ms();a=mi(a);var r=Rr(t,a);r!==null&&es(r,t,a),Wm(t,a)}}var Od=!0;function JE(t,a,r,c){var f=k.T;k.T=null;var m=K.p;try{K.p=2,Xm(t,a,r,c)}finally{K.p=m,k.T=f}}function ZE(t,a,r,c){var f=k.T;k.T=null;var m=K.p;try{K.p=8,Xm(t,a,r,c)}finally{K.p=m,k.T=f}}function Xm(t,a,r,c){if(Od){var f=Jm(c);if(f===null)Pm(t,a,c,Vd,r),Fy(t,c);else if(tS(f,t,a,r,c))c.stopPropagation();else if(Fy(t,c),a&4&&-1<eS.indexOf(t)){for(;f!==null;){var m=Ns(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=$t(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var U=1<<31-ce(v);E.entanglements[1]|=U,v&=~U}va(m),(St&6)===0&&(bd=xt()+500,gc(0))}}break;case 31:case 13:E=Rr(m,2),E!==null&&es(E,m,2),vd(),Wm(m,2)}if(m=Jm(c),m===null&&Pm(t,a,c,Vd,r),m===f)break;f=m}f!==null&&c.stopPropagation()}else Pm(t,a,c,null,r)}}function Jm(t){return t=Es(t),Zm(t)}var Vd=null;function Zm(t){if(Vd=null,t=ra(t),t!==null){var a=u(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=h(a),t!==null)return t;t=null}else if(r===31){if(t=p(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Vd=t,null}function zy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case rn:return 2;case _t:return 8;case ws:case bn:return 32;case Vn:return 268435456;default:return 32}default:return 32}}var ep=!1,zi=null,Fi=null,qi=null,Nc=new Map,Ec=new Map,Hi=[],eS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fy(t,a){switch(t){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":Nc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ec.delete(a.pointerId)}}function Sc(t,a,r,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:a,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},a!==null&&(a=Ns(a),a!==null&&Uy(a)),t):(t.eventSystemFlags|=c,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function tS(t,a,r,c,f){switch(a){case"focusin":return zi=Sc(zi,t,a,r,c,f),!0;case"dragenter":return Fi=Sc(Fi,t,a,r,c,f),!0;case"mouseover":return qi=Sc(qi,t,a,r,c,f),!0;case"pointerover":var m=f.pointerId;return Nc.set(m,Sc(Nc.get(m)||null,t,a,r,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Ec.set(m,Sc(Ec.get(m)||null,t,a,r,c,f)),!0}return!1}function qy(t){var a=ra(t.target);if(a!==null){var r=u(a);if(r!==null){if(a=r.tag,a===13){if(a=h(r),a!==null){t.blockedOn=a,Bs(t.priority,function(){By(r)});return}}else if(a===31){if(a=p(r),a!==null){t.blockedOn=a,Bs(t.priority,function(){By(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pd(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=Jm(t.nativeEvent);if(r===null){r=t.nativeEvent;var c=new r.constructor(r.type,r);Lo=c,r.target.dispatchEvent(c),Lo=null}else return a=Ns(r),a!==null&&Uy(a),t.blockedOn=r,!1;a.shift()}return!0}function Hy(t,a,r){Pd(t)&&r.delete(a)}function nS(){ep=!1,zi!==null&&Pd(zi)&&(zi=null),Fi!==null&&Pd(Fi)&&(Fi=null),qi!==null&&Pd(qi)&&(qi=null),Nc.forEach(Hy),Ec.forEach(Hy)}function Ld(t,a){t.blockedOn===a&&(t.blockedOn=null,ep||(ep=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,nS)))}var Ud=null;function $y(t){Ud!==t&&(Ud=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ud===t&&(Ud=null);for(var a=0;a<t.length;a+=3){var r=t[a],c=t[a+1],f=t[a+2];if(typeof c!="function"){if(Zm(c||r)===null)continue;break}var m=Ns(r);m!==null&&(t.splice(a,3),a-=3,Jf(m,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function Zl(t){function a(U){return Ld(U,t)}zi!==null&&Ld(zi,t),Fi!==null&&Ld(Fi,t),qi!==null&&Ld(qi,t),Nc.forEach(a),Ec.forEach(a);for(var r=0;r<Hi.length;r++){var c=Hi[r];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Hi.length&&(r=Hi[0],r.blockedOn===null);)qy(r),r.blockedOn===null&&Hi.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],m=r[c+1],v=f[Nn]||null;if(typeof m=="function")v||$y(r);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Nn]||null)E=v.formAction;else if(Zm(f)!==null)continue}else E=v.action;typeof E=="function"?r[c+1]=E:(r.splice(c,3),c-=3),$y(r)}}}function Gy(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function tp(t){this._internalRoot=t}Bd.prototype.render=tp.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var r=a.current,c=ms();Py(r,c,t,a,null,null)},Bd.prototype.unmount=tp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Py(t.current,2,null,t,null,null),vd(),a[aa]=null}};function Bd(t){this._internalRoot=t}Bd.prototype.unstable_scheduleHydration=function(t){if(t){var a=vu();t={blockedOn:null,target:t,priority:a};for(var r=0;r<Hi.length&&a!==0&&a<Hi[r].priority;r++);Hi.splice(r,0,t),r===0&&qy(t)}};var Yy=e.version;if(Yy!=="19.2.4")throw Error(i(527,Yy,"19.2.4"));K.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=x(a),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var sS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{R=zd.inject(sS),G=zd}catch{}}return jc.createRoot=function(t,a){if(!o(t))throw Error(i(299));var r=!1,c="",f=eb,m=tb,v=nb;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=Oy(t,1,!1,null,null,r,c,null,f,m,v,Gy),t[aa]=a.current,Vm(t),new tp(a)},jc.hydrateRoot=function(t,a,r){if(!o(t))throw Error(i(299));var c=!1,f="",m=eb,v=tb,E=nb,U=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.formState!==void 0&&(U=r.formState)),a=Oy(t,1,!0,a,r??null,c,f,U,m,v,E,Gy),a.context=Vy(null),r=a.current,c=ms(),c=mi(c),f=Ci(c),f.callback=null,Ri(r,f,c),r=c,a.current.lanes=r,wn(a,r),va(a),t[aa]=a.current,Vm(t),new Bd(a)},jc.version="19.2.4",jc}var sv;function mS(){if(sv)return ap.exports;sv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),ap.exports=fS(),ap.exports}var pS=mS();const gS=cw(pS);var av="popstate";function xS(s={}){function e(o,u){let{pathname:h="/",search:p="",hash:g=""}=ol(o.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Mp("",{pathname:h,search:p,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let h=o.document.querySelector("base"),p="";if(h&&h.getAttribute("href")){let g=o.location.href,x=g.indexOf("#");p=x===-1?g:g.slice(0,x)}return p+"#"+(typeof u=="string"?u:Yc(u))}function i(o,u){Ps(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return yS(e,n,i,s)}function qt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ps(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bS(){return Math.random().toString(36).substring(2,10)}function iv(s,e){return{usr:s.state,key:s.key,idx:e}}function Mp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?ol(e):e,state:n,key:e&&e.key||i||bS()}}function Yc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function ol(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function yS(s,e,n,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,h=o.history,p="POP",g=null,x=y();x==null&&(x=0,h.replaceState({...h.state,idx:x},""));function y(){return(h.state||{idx:null}).idx}function w(){p="POP";let V=y(),z=V==null?null:V-x;x=V,g&&g({action:p,location:B.location,delta:z})}function S(V,z){p="PUSH";let Y=Mp(B.location,V,z);n&&n(Y,V),x=y()+1;let W=iv(Y,x),be=B.createHref(Y);try{h.pushState(W,"",be)}catch(ge){if(ge instanceof DOMException&&ge.name==="DataCloneError")throw ge;o.location.assign(be)}u&&g&&g({action:p,location:B.location,delta:1})}function C(V,z){p="REPLACE";let Y=Mp(B.location,V,z);n&&n(Y,V),x=y();let W=iv(Y,x),be=B.createHref(Y);h.replaceState(W,"",be),u&&g&&g({action:p,location:B.location,delta:0})}function H(V){return vS(V)}let B={get action(){return p},get location(){return s(o,h)},listen(V){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(av,w),g=V,()=>{o.removeEventListener(av,w),g=null}},createHref(V){return e(o,V)},createURL:H,encodeLocation(V){let z=H(V);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:S,replace:C,go(V){return h.go(V)}};return B}function vS(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),qt(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Yc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function uw(s,e,n="/"){return _S(s,e,n,!1)}function _S(s,e,n,i){let o=typeof e=="string"?ol(e):e,u=ri(o.pathname||"/",n);if(u==null)return null;let h=dw(s);wS(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let x=DS(u);p=kS(h[g],x,i)}return p}function dw(s,e=[],n=[],i="",o=!1){let u=(h,p,g=o,x)=>{let y={relativePath:x===void 0?h.path||"":x,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&g)return;qt(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let w=si([i,y.relativePath]),S=n.concat(y);h.children&&h.children.length>0&&(qt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),dw(h.children,e,S,w,g)),!(h.path==null&&!h.index)&&e.push({path:w,score:CS(w,h.index),routesMeta:S})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of hw(h.path))u(h,p,!0,g)}),e}function hw(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let h=hw(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function wS(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:RS(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var NS=/^:[\w-]+$/,ES=3,SS=2,TS=1,jS=10,AS=-2,rv=s=>s==="*";function CS(s,e){let n=s.split("/"),i=n.length;return n.some(rv)&&(i+=AS),e&&(i+=SS),n.filter(o=>!rv(o)).reduce((o,u)=>o+(NS.test(u)?ES:u===""?TS:jS),i)}function RS(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function kS(s,e,n=!1){let{routesMeta:i}=s,o={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],x=p===i.length-1,y=u==="/"?e:e.slice(u.length)||"/",w=dh({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},y),S=g.route;if(!w&&x&&n&&!i[i.length-1].route.index&&(w=dh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},y)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:si([u,w.pathname]),pathnameBase:PS(si([u,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(u=si([u,w.pathnameBase]))}return h}function dh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=IS(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((x,{paramName:y,isOptional:w},S)=>{if(y==="*"){let H=p[S]||"";h=u.slice(0,u.length-H.length).replace(/(.)\/+$/,"$1")}const C=p[S];return w&&!C?x[y]=void 0:x[y]=(C||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:h,pattern:s}}function IS(s,e=!1,n=!0){Ps(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function DS(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ps(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ri(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var MS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function OS(s,e="/"){let{pathname:n,search:i="",hash:o=""}=typeof s=="string"?ol(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=lv(n.substring(1),"/"):u=lv(n,e)):u=e,{pathname:u,search:LS(i),hash:US(o)}}function lv(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function op(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VS(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pg(s){let e=VS(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function gg(s,e,n,i=!1){let o;typeof s=="string"?o=ol(s):(o={...s},qt(!o.pathname||!o.pathname.includes("?"),op("?","pathname","search",o)),qt(!o.pathname||!o.pathname.includes("#"),op("#","pathname","hash",o)),qt(!o.search||!o.search.includes("#"),op("#","search","hash",o)));let u=s===""||o.pathname==="",h=u?"/":o.pathname,p;if(h==null)p=n;else{let w=e.length-1;if(!i&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),w-=1;o.pathname=S.join("/")}p=w>=0?e[w]:"/"}let g=OS(o,p),x=h&&h!=="/"&&h.endsWith("/"),y=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(x||y)&&(g.pathname+="/"),g}var si=s=>s.join("/").replace(/\/\/+/g,"/"),PS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),LS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,US=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,BS=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function zS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function FS(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var fw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mw(s,e){let n=s;if(typeof n!="string"||!MS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,o=!1;if(fw)try{let u=new URL(window.location.href),h=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=ri(h.pathname,e);h.origin===u.origin&&p!=null?n=p+h.search+h.hash:o=!0}catch{Ps(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var pw=["POST","PUT","PATCH","DELETE"];new Set(pw);var qS=["GET",...pw];new Set(qS);var vo=N.createContext(null);vo.displayName="DataRouter";var Dh=N.createContext(null);Dh.displayName="DataRouterState";var HS=N.createContext(!1),gw=N.createContext({isTransitioning:!1});gw.displayName="ViewTransition";var $S=N.createContext(new Map);$S.displayName="Fetchers";var GS=N.createContext(null);GS.displayName="Await";var _s=N.createContext(null);_s.displayName="Navigation";var iu=N.createContext(null);iu.displayName="Location";var ta=N.createContext({outlet:null,matches:[],isDataRoute:!1});ta.displayName="Route";var xg=N.createContext(null);xg.displayName="RouteError";var xw="REACT_ROUTER_ERROR",YS="REDIRECT",KS="ROUTE_ERROR_RESPONSE";function QS(s){if(s.startsWith(`${xw}:${YS}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function WS(s){if(s.startsWith(`${xw}:${KS}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new BS(e.status,e.statusText,e.data)}catch{}}function XS(s,{relative:e}={}){qt(_o(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=N.useContext(_s),{hash:o,pathname:u,search:h}=ru(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:si([n,u])),i.createHref({pathname:p,search:h,hash:o})}function _o(){return N.useContext(iu)!=null}function fr(){return qt(_o(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(iu).location}var bw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yw(s){N.useContext(_s).static||N.useLayoutEffect(s)}function wo(){let{isDataRoute:s}=N.useContext(ta);return s?uT():JS()}function JS(){qt(_o(),"useNavigate() may be used only in the context of a <Router> component.");let s=N.useContext(vo),{basename:e,navigator:n}=N.useContext(_s),{matches:i}=N.useContext(ta),{pathname:o}=fr(),u=JSON.stringify(pg(i)),h=N.useRef(!1);return yw(()=>{h.current=!0}),N.useCallback((g,x={})=>{if(Ps(h.current,bw),!h.current)return;if(typeof g=="number"){n.go(g);return}let y=gg(g,JSON.parse(u),o,x.relative==="path");s==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:si([e,y.pathname])),(x.replace?n.replace:n.push)(y,x.state,x)},[e,n,u,o,s])}N.createContext(null);function No(){let{matches:s}=N.useContext(ta),e=s[s.length-1];return e?e.params:{}}function ru(s,{relative:e}={}){let{matches:n}=N.useContext(ta),{pathname:i}=fr(),o=JSON.stringify(pg(n));return N.useMemo(()=>gg(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function ZS(s,e){return vw(s,e)}function vw(s,e,n,i,o){qt(_o(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=N.useContext(_s),{matches:h}=N.useContext(ta),p=h[h.length-1],g=p?p.params:{},x=p?p.pathname:"/",y=p?p.pathnameBase:"/",w=p&&p.route;{let Y=w&&w.path||"";ww(x,!w||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let S=fr(),C;if(e){let Y=typeof e=="string"?ol(e):e;qt(y==="/"||Y.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),C=Y}else C=S;let H=C.pathname||"/",B=H;if(y!=="/"){let Y=y.replace(/^\//,"").split("/");B="/"+H.replace(/^\//,"").split("/").slice(Y.length).join("/")}let V=uw(s,{pathname:B});Ps(w||V!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Ps(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=aT(V&&V.map(Y=>Object.assign({},Y,{params:Object.assign({},g,Y.params),pathname:si([y,u.encodeLocation?u.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?y:si([y,u.encodeLocation?u.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),h,n,i,o);return e&&z?N.createElement(iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},z):z}function eT(){let s=cT(),e=zS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:u},"ErrorBoundary")," or"," ",N.createElement("code",{style:u},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:o},n):null,h)}var tT=N.createElement(eT,null),_w=class extends N.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=WS(s.digest);n&&(s=n)}let e=s!==void 0?N.createElement(ta.Provider,{value:this.props.routeContext},N.createElement(xg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?N.createElement(nT,{error:s},e):e}};_w.contextType=HS;var cp=new WeakMap;function nT({children:s,error:e}){let{basename:n}=N.useContext(_s);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=QS(e.digest);if(i){let o=cp.get(e);if(o)throw o;let u=mw(i.location,n);if(fw&&!cp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw cp.set(e,h),h}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function sT({routeContext:s,match:e,children:n}){let i=N.useContext(vo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(ta.Provider,{value:s},n)}function aT(s,e=[],n=null,i=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,h=n?.errors;if(h!=null){let y=u.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);qt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let p=!1,g=-1;if(n)for(let y=0;y<u.length;y++){let w=u[y];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=y),w.route.id){let{loaderData:S,errors:C}=n,H=w.route.loader&&!S.hasOwnProperty(w.route.id)&&(!C||C[w.route.id]===void 0);if(w.route.lazy||H){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let x=n&&i?(y,w)=>{i(y,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:FS(n.matches),errorInfo:w})}:void 0;return u.reduceRight((y,w,S)=>{let C,H=!1,B=null,V=null;n&&(C=h&&w.route.id?h[w.route.id]:void 0,B=w.route.errorElement||tT,p&&(g<0&&S===0?(ww("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,V=null):g===S&&(H=!0,V=w.route.hydrateFallbackElement||null)));let z=e.concat(u.slice(0,S+1)),Y=()=>{let W;return C?W=B:H?W=V:w.route.Component?W=N.createElement(w.route.Component,null):w.route.element?W=w.route.element:W=y,N.createElement(sT,{match:w,routeContext:{outlet:y,matches:z,isDataRoute:n!=null},children:W})};return n&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?N.createElement(_w,{location:n.location,revalidation:n.revalidation,component:B,error:C,children:Y(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:x}):Y()},null)}function bg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iT(s){let e=N.useContext(vo);return qt(e,bg(s)),e}function rT(s){let e=N.useContext(Dh);return qt(e,bg(s)),e}function lT(s){let e=N.useContext(ta);return qt(e,bg(s)),e}function yg(s){let e=lT(s),n=e.matches[e.matches.length-1];return qt(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function oT(){return yg("useRouteId")}function cT(){let s=N.useContext(xg),e=rT("useRouteError"),n=yg("useRouteError");return s!==void 0?s:e.errors?.[n]}function uT(){let{router:s}=iT("useNavigate"),e=yg("useNavigate"),n=N.useRef(!1);return yw(()=>{n.current=!0}),N.useCallback(async(o,u={})=>{Ps(n.current,bw),n.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var ov={};function ww(s,e,n){!e&&!ov[s]&&(ov[s]=!0,Ps(!1,n))}N.memo(dT);function dT({routes:s,future:e,state:n,onError:i}){return vw(s,void 0,n,i,e)}function hT({to:s,replace:e,state:n,relative:i}){qt(_o(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(_s);Ps(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=N.useContext(ta),{pathname:h}=fr(),p=wo(),g=gg(s,pg(u),h,i==="path"),x=JSON.stringify(g);return N.useEffect(()=>{p(JSON.parse(x),{replace:e,state:n,relative:i})},[p,x,i,e,n]),null}function Ws(s){qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fT({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:o,static:u=!1,unstable_useTransitions:h}){qt(!_o(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=N.useMemo(()=>({basename:p,navigator:o,static:u,unstable_useTransitions:h,future:{}}),[p,o,u,h]);typeof n=="string"&&(n=ol(n));let{pathname:x="/",search:y="",hash:w="",state:S=null,key:C="default"}=n,H=N.useMemo(()=>{let B=ri(x,p);return B==null?null:{location:{pathname:B,search:y,hash:w,state:S,key:C},navigationType:i}},[p,x,y,w,S,C,i]);return Ps(H!=null,`<Router basename="${p}"> is not able to match the URL "${x}${y}${w}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:N.createElement(_s.Provider,{value:g},N.createElement(iu.Provider,{children:e,value:H}))}function mT({children:s,location:e}){return ZS(Op(s),e)}function Op(s,e=[]){let n=[];return N.Children.forEach(s,(i,o)=>{if(!N.isValidElement(i))return;let u=[...e,o];if(i.type===N.Fragment){n.push.apply(n,Op(i.props.children,u));return}qt(i.type===Ws,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Op(i.props.children,u)),n.push(h)}),n}var Zd="get",eh="application/x-www-form-urlencoded";function Mh(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function pT(s){return Mh(s)&&s.tagName.toLowerCase()==="button"}function gT(s){return Mh(s)&&s.tagName.toLowerCase()==="form"}function xT(s){return Mh(s)&&s.tagName.toLowerCase()==="input"}function bT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function yT(s,e){return s.button===0&&(!e||e==="_self")&&!bT(s)}var Fd=null;function vT(){if(Fd===null)try{new FormData(document.createElement("form"),0),Fd=!1}catch{Fd=!0}return Fd}var _T=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function up(s){return s!=null&&!_T.has(s)?(Ps(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${eh}"`),null):s}function wT(s,e){let n,i,o,u,h;if(gT(s)){let p=s.getAttribute("action");i=p?ri(p,e):null,n=s.getAttribute("method")||Zd,o=up(s.getAttribute("enctype"))||eh,u=new FormData(s)}else if(pT(s)||xT(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?ri(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||Zd,o=up(s.getAttribute("formenctype"))||up(p.getAttribute("enctype"))||eh,u=new FormData(p,s),!vT()){let{name:x,type:y,value:w}=s;if(y==="image"){let S=x?`${x}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else x&&u.append(x,w)}}else{if(Mh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Zd,i=null,o=eh,h=s}return u&&o==="text/plain"&&(h=u,u=void 0),{action:i,method:n.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function NT(s,e,n,i){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${i}`:o.pathname=`${o.pathname}.${i}`:o.pathname==="/"?o.pathname=`_root.${i}`:e&&ri(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function ET(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ST(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function TT(s,e,n){let i=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await ET(u,n);return h.links?h.links():[]}return[]}));return RT(i.flat(1).filter(ST).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function cv(s,e,n,i,o,u){let h=(g,x)=>n[x]?g.route.id!==n[x].route.id:!0,p=(g,x)=>n[x].pathname!==g.pathname||n[x].route.path?.endsWith("*")&&n[x].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,x)=>h(g,x)||p(g,x)):u==="data"?e.filter((g,x)=>{let y=i.routes[g.route.id];if(!y||!y.hasLoader)return!1;if(h(g,x)||p(g,x))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function jT(s,e,{includeHydrateFallback:n}={}){return AT(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function AT(s){return[...new Set(s)]}function CT(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function RT(s,e){let n=new Set;return new Set(e),s.reduce((i,o)=>{let u=JSON.stringify(CT(o));return n.has(u)||(n.add(u),i.push({key:u,link:o})),i},[])}function Nw(){let s=N.useContext(vo);return vg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function kT(){let s=N.useContext(Dh);return vg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var _g=N.createContext(void 0);_g.displayName="FrameworkContext";function Ew(){let s=N.useContext(_g);return vg(s,"You must render this element inside a <HydratedRouter> element"),s}function IT(s,e){let n=N.useContext(_g),[i,o]=N.useState(!1),[u,h]=N.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:x,onMouseLeave:y,onTouchStart:w}=e,S=N.useRef(null);N.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let B=z=>{z.forEach(Y=>{h(Y.isIntersecting)})},V=new IntersectionObserver(B,{threshold:.5});return S.current&&V.observe(S.current),()=>{V.disconnect()}}},[s]),N.useEffect(()=>{if(i){let B=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(B)}}},[i]);let C=()=>{o(!0)},H=()=>{o(!1),h(!1)};return n?s!=="intent"?[u,S,{}]:[u,S,{onFocus:Ac(p,C),onBlur:Ac(g,H),onMouseEnter:Ac(x,C),onMouseLeave:Ac(y,H),onTouchStart:Ac(w,C)}]:[!1,S,{}]}function Ac(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function DT({page:s,...e}){let{router:n}=Nw(),i=N.useMemo(()=>uw(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?N.createElement(OT,{page:s,matches:i,...e}):null}function MT(s){let{manifest:e,routeModules:n}=Ew(),[i,o]=N.useState([]);return N.useEffect(()=>{let u=!1;return TT(s,e,n).then(h=>{u||o(h)}),()=>{u=!0}},[s,e,n]),i}function OT({page:s,matches:e,...n}){let i=fr(),{future:o,manifest:u,routeModules:h}=Ew(),{basename:p}=Nw(),{loaderData:g,matches:x}=kT(),y=N.useMemo(()=>cv(s,e,x,u,i,"data"),[s,e,x,u,i]),w=N.useMemo(()=>cv(s,e,x,u,i,"assets"),[s,e,x,u,i]),S=N.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let B=new Set,V=!1;if(e.forEach(Y=>{let W=u.routes[Y.route.id];!W||!W.hasLoader||(!y.some(be=>be.route.id===Y.route.id)&&Y.route.id in g&&h[Y.route.id]?.shouldRevalidate||W.hasClientLoader?V=!0:B.add(Y.route.id))}),B.size===0)return[];let z=NT(s,p,o.unstable_trailingSlashAwareDataRequests,"data");return V&&B.size>0&&z.searchParams.set("_routes",e.filter(Y=>B.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[z.pathname+z.search]},[p,o.unstable_trailingSlashAwareDataRequests,g,i,u,y,e,s,h]),C=N.useMemo(()=>jT(w,u),[w,u]),H=MT(w);return N.createElement(N.Fragment,null,S.map(B=>N.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),C.map(B=>N.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),H.map(({key:B,link:V})=>N.createElement("link",{key:B,nonce:n.nonce,...V,crossOrigin:V.crossOrigin??n.crossOrigin})))}function VT(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var PT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{PT&&(window.__reactRouterVersion="7.13.0")}catch{}function LT({basename:s,children:e,unstable_useTransitions:n,window:i}){let o=N.useRef();o.current==null&&(o.current=xS({window:i,v5Compat:!0}));let u=o.current,[h,p]=N.useState({action:u.action,location:u.location}),g=N.useCallback(x=>{n===!1?p(x):N.startTransition(()=>p(x))},[n]);return N.useLayoutEffect(()=>u.listen(g),[u,g]),N.createElement(fT,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:n})}var Sw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=N.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:o,reloadDocument:u,replace:h,state:p,target:g,to:x,preventScrollReset:y,viewTransition:w,unstable_defaultShouldRevalidate:S,...C},H){let{basename:B,unstable_useTransitions:V}=N.useContext(_s),z=typeof x=="string"&&Sw.test(x),Y=mw(x,B);x=Y.to;let W=XS(x,{relative:o}),[be,ge,oe]=IT(i,C),A=FT(x,{replace:h,state:p,target:g,preventScrollReset:y,relative:o,viewTransition:w,unstable_defaultShouldRevalidate:S,unstable_useTransitions:V});function j(L){e&&e(L),L.defaultPrevented||A(L)}let I=N.createElement("a",{...C,...oe,href:Y.absoluteURL||W,onClick:Y.isExternal||u?e:j,ref:VT(H,ge),target:g,"data-discover":!z&&n==="render"?"true":void 0});return be&&!z?N.createElement(N.Fragment,null,I,N.createElement(DT,{page:W})):I});et.displayName="Link";var UT=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:o=!1,style:u,to:h,viewTransition:p,children:g,...x},y){let w=ru(h,{relative:x.relative}),S=fr(),C=N.useContext(Dh),{navigator:H,basename:B}=N.useContext(_s),V=C!=null&&YT(w)&&p===!0,z=H.encodeLocation?H.encodeLocation(w).pathname:w.pathname,Y=S.pathname,W=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(Y=Y.toLowerCase(),W=W?W.toLowerCase():null,z=z.toLowerCase()),W&&B&&(W=ri(W,B)||W);const be=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ge=Y===z||!o&&Y.startsWith(z)&&Y.charAt(be)==="/",oe=W!=null&&(W===z||!o&&W.startsWith(z)&&W.charAt(z.length)==="/"),A={isActive:ge,isPending:oe,isTransitioning:V},j=ge?e:void 0,I;typeof i=="function"?I=i(A):I=[i,ge?"active":null,oe?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let L=typeof u=="function"?u(A):u;return N.createElement(et,{...x,"aria-current":j,className:I,ref:y,style:L,to:h,viewTransition:p},typeof g=="function"?g(A):g)});UT.displayName="NavLink";var BT=N.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:o,state:u,method:h=Zd,action:p,onSubmit:g,relative:x,preventScrollReset:y,viewTransition:w,unstable_defaultShouldRevalidate:S,...C},H)=>{let{unstable_useTransitions:B}=N.useContext(_s),V=$T(),z=GT(p,{relative:x}),Y=h.toLowerCase()==="get"?"get":"post",W=typeof p=="string"&&Sw.test(p),be=ge=>{if(g&&g(ge),ge.defaultPrevented)return;ge.preventDefault();let oe=ge.nativeEvent.submitter,A=oe?.getAttribute("formmethod")||h,j=()=>V(oe||ge.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:o,state:u,relative:x,preventScrollReset:y,viewTransition:w,unstable_defaultShouldRevalidate:S});B&&n!==!1?N.startTransition(()=>j()):j()};return N.createElement("form",{ref:H,method:Y,action:z,onSubmit:i?g:be,...C,"data-discover":!W&&s==="render"?"true":void 0})});BT.displayName="Form";function zT(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tw(s){let e=N.useContext(vo);return qt(e,zT(s)),e}function FT(s,{target:e,replace:n,state:i,preventScrollReset:o,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let x=wo(),y=fr(),w=ru(s,{relative:u});return N.useCallback(S=>{if(yT(S,e)){S.preventDefault();let C=n!==void 0?n:Yc(y)===Yc(w),H=()=>x(s,{replace:C,state:i,preventScrollReset:o,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?N.startTransition(()=>H()):H()}},[y,x,w,n,i,e,s,o,u,h,p,g])}var qT=0,HT=()=>`__${String(++qT)}__`;function $T(){let{router:s}=Tw("useSubmit"),{basename:e}=N.useContext(_s),n=oT(),i=s.fetch,o=s.navigate;return N.useCallback(async(u,h={})=>{let{action:p,method:g,encType:x,formData:y,body:w}=wT(u,e);if(h.navigate===!1){let S=h.fetcherKey||HT();await i(S,n,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:y,body:w,formMethod:h.method||g,formEncType:h.encType||x,flushSync:h.flushSync})}else await o(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:y,body:w,formMethod:h.method||g,formEncType:h.encType||x,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,o,e,n])}function GT(s,{relative:e}={}){let{basename:n}=N.useContext(_s),i=N.useContext(ta);qt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...ru(s||".",{relative:e})},h=fr();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(y=>y==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let y=p.toString();u.search=y?`?${y}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:si([n,u.pathname])),Yc(u)}function YT(s,{relative:e}={}){let n=N.useContext(gw);qt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Tw("useViewTransitionState"),o=ru(s,{relative:e});if(!n.isTransitioning)return!1;let u=ri(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=ri(n.nextLocation.pathname,i)||n.nextLocation.pathname;return dh(o.pathname,h)!=null||dh(o.pathname,u)!=null}const KT=()=>{};var uv={};const jw=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},QT=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],h=s[n++],p=s[n++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],h=s[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Aw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,p=h?s[o+1]:0,g=o+2<s.length,x=g?s[o+2]:0,y=u>>2,w=(u&3)<<4|p>>4;let S=(p&15)<<2|x>>6,C=x&63;g||(C=64,h||(S=64)),i.push(n[y],n[w],n[S],n[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(jw(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):QT(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const x=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||p==null||x==null||w==null)throw new WT;const S=u<<2|p>>4;if(i.push(S),x!==64){const C=p<<4&240|x>>2;if(i.push(C),w!==64){const H=x<<6&192|w;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class WT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XT=function(s){const e=jw(s);return Aw.encodeByteArray(e,!0)},hh=function(s){return XT(s).replace(/\./g,"")},Cw=function(s){try{return Aw.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ZT=()=>JT().__FIREBASE_DEFAULTS__,ej=()=>{if(typeof process>"u"||typeof uv>"u")return;const s=uv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},tj=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Cw(s[1]);return e&&JSON.parse(e)},Oh=()=>{try{return KT()||ZT()||ej()||tj()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Rw=s=>Oh()?.emulatorHosts?.[s],kw=s=>{const e=Rw(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Iw=()=>Oh()?.config,Dw=s=>Oh()?.[`_${s}`];class nj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function mr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wg(s){return(await fetch(s,{credentials:"include"})).ok}function Mw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[hh(JSON.stringify(n)),hh(JSON.stringify(h)),""].join(".")}const Uc={};function sj(){const s={prod:[],emulator:[]};for(const e of Object.keys(Uc))Uc[e]?s.emulator.push(e):s.prod.push(e);return s}function aj(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let dv=!1;function Ng(s,e){if(typeof window>"u"||typeof document>"u"||!mr(window.location.host)||Uc[s]===e||Uc[s]||dv)return;Uc[s]=e;function n(S){return`__firebase__banner__${S}`}const i="__firebase__banner",u=sj().prod.length>0;function h(){const S=document.getElementById(i);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,C){S.setAttribute("width","24"),S.setAttribute("id",C),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function x(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{dv=!0,h()},S}function y(S,C){S.setAttribute("id",C),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=aj(i),C=n("text"),H=document.getElementById(C)||document.createElement("span"),B=n("learnmore"),V=document.getElementById(B)||document.createElement("a"),z=n("preprendIcon"),Y=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;p(W),y(V,B);const be=x();g(Y,z),W.append(Y,H,V,be),document.body.appendChild(W)}u?(H.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function zn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ij(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zn())}function rj(){const s=Oh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oj(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function cj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uj(){const s=zn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function dj(){return!rj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hj(){try{return typeof indexedDB=="object"}catch{return!1}}function fj(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const mj="FirebaseError";class Da extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=mj,Object.setPrototypeOf(this,Da.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?pj(u,i):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new Da(o,p,i)}}function pj(s,e){return s.replace(gj,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const gj=/\{\$([^}]+)}/g;function xj(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Xr(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const u=s[o],h=e[o];if(hv(u)&&hv(h)){if(!Xr(u,h))return!1}else if(u!==h)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function hv(s){return s!==null&&typeof s=="object"}function ou(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ic(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Dc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function bj(s,e){const n=new yj(s,e);return n.subscribe.bind(n)}class yj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");vj(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=dp),o.error===void 0&&(o.error=dp),o.complete===void 0&&(o.complete=dp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vj(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function dp(){}function Ht(s){return s&&s._delegate?s._delegate:s}class ir{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Gr="[DEFAULT]";class _j{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new nj;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nj(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wj(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wj(s){return s===Gr?void 0:s}function Nj(s){return s.instantiationMode==="EAGER"}class Ej{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _j(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ft;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ft||(ft={}));const Sj={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},Tj=ft.INFO,jj={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},Aj=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=jj[e];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Eg{constructor(e){this.name=e,this._logLevel=Tj,this._logHandler=Aj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Sj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const Cj=(s,e)=>e.some(n=>s instanceof n);let fv,mv;function Rj(){return fv||(fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kj(){return mv||(mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ow=new WeakMap,Vp=new WeakMap,Vw=new WeakMap,hp=new WeakMap,Sg=new WeakMap;function Ij(s){const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Zi(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Ow.set(n,s)}).catch(()=>{}),Sg.set(e,s),e}function Dj(s){if(Vp.has(s))return;const e=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Vp.set(s,e)}let Pp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Vp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Vw.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zi(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Mj(s){Pp=s(Pp)}function Oj(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(fp(this),e,...n);return Vw.set(i,e.sort?e.sort():[e]),Zi(i)}:kj().includes(s)?function(...e){return s.apply(fp(this),e),Zi(Ow.get(this))}:function(...e){return Zi(s.apply(fp(this),e))}}function Vj(s){return typeof s=="function"?Oj(s):(s instanceof IDBTransaction&&Dj(s),Cj(s,Rj())?new Proxy(s,Pp):s)}function Zi(s){if(s instanceof IDBRequest)return Ij(s);if(hp.has(s))return hp.get(s);const e=Vj(s);return e!==s&&(hp.set(s,e),Sg.set(e,s)),e}const fp=s=>Sg.get(s);function Pj(s,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),p=Zi(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Zi(h.result),g.oldVersion,g.newVersion,Zi(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",x=>o(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const Lj=["get","getKey","getAll","getAllKeys","count"],Uj=["put","add","delete","clear"],mp=new Map;function pv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(mp.get(e))return mp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=Uj.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Lj.includes(n)))return;const u=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let x=g.store;return i&&(x=x.index(p.shift())),(await Promise.all([x[n](...p),o&&g.done]))[0]};return mp.set(e,u),u}Mj(s=>({...s,get:(e,n,i)=>pv(e,n)||s.get(e,n,i),has:(e,n)=>!!pv(e,n)||s.has(e,n)}));class Bj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zj(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function zj(s){return s.getComponent()?.type==="VERSION"}const Lp="@firebase/app",gv="0.14.7";const li=new Eg("@firebase/app"),Fj="@firebase/app-compat",qj="@firebase/analytics-compat",Hj="@firebase/analytics",$j="@firebase/app-check-compat",Gj="@firebase/app-check",Yj="@firebase/auth",Kj="@firebase/auth-compat",Qj="@firebase/database",Wj="@firebase/data-connect",Xj="@firebase/database-compat",Jj="@firebase/functions",Zj="@firebase/functions-compat",eA="@firebase/installations",tA="@firebase/installations-compat",nA="@firebase/messaging",sA="@firebase/messaging-compat",aA="@firebase/performance",iA="@firebase/performance-compat",rA="@firebase/remote-config",lA="@firebase/remote-config-compat",oA="@firebase/storage",cA="@firebase/storage-compat",uA="@firebase/firestore",dA="@firebase/ai",hA="@firebase/firestore-compat",fA="firebase",mA="12.8.0";const Up="[DEFAULT]",pA={[Lp]:"fire-core",[Fj]:"fire-core-compat",[Hj]:"fire-analytics",[qj]:"fire-analytics-compat",[Gj]:"fire-app-check",[$j]:"fire-app-check-compat",[Yj]:"fire-auth",[Kj]:"fire-auth-compat",[Qj]:"fire-rtdb",[Wj]:"fire-data-connect",[Xj]:"fire-rtdb-compat",[Jj]:"fire-fn",[Zj]:"fire-fn-compat",[eA]:"fire-iid",[tA]:"fire-iid-compat",[nA]:"fire-fcm",[sA]:"fire-fcm-compat",[aA]:"fire-perf",[iA]:"fire-perf-compat",[rA]:"fire-rc",[lA]:"fire-rc-compat",[oA]:"fire-gcs",[cA]:"fire-gcs-compat",[uA]:"fire-fst",[hA]:"fire-fst-compat",[dA]:"fire-vertex","fire-js":"fire-js",[fA]:"fire-js-all"};const fh=new Map,gA=new Map,Bp=new Map;function xv(s,e){try{s.container.addComponent(e)}catch(n){li.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Jr(s){const e=s.name;if(Bp.has(e))return li.debug(`There were multiple attempts to register component ${e}.`),!1;Bp.set(e,s);for(const n of fh.values())xv(n,s);for(const n of gA.values())xv(n,s);return!0}function Vh(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function ps(s){return s==null?!1:s.settings!==void 0}const xA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},er=new lu("app","Firebase",xA);class bA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}}const cl=mA;function Pw(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Up,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw er.create("bad-app-name",{appName:String(o)});if(n||(n=Iw()),!n)throw er.create("no-options");const u=fh.get(o);if(u){if(Xr(n,u.options)&&Xr(i,u.config))return u;throw er.create("duplicate-app",{appName:o})}const h=new Ej(o);for(const g of Bp.values())h.addComponent(g);const p=new bA(n,i,h);return fh.set(o,p),p}function Tg(s=Up){const e=fh.get(s);if(!e&&s===Up&&Iw())return Pw();if(!e)throw er.create("no-app",{appName:s});return e}function Ea(s,e,n){let i=pA[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),li.warn(h.join(" "));return}Jr(new ir(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const yA="firebase-heartbeat-database",vA=1,Kc="firebase-heartbeat-store";let pp=null;function Lw(){return pp||(pp=Pj(yA,vA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Kc)}catch(n){console.warn(n)}}}}).catch(s=>{throw er.create("idb-open",{originalErrorMessage:s.message})})),pp}async function _A(s){try{const n=(await Lw()).transaction(Kc),i=await n.objectStore(Kc).get(Uw(s));return await n.done,i}catch(e){if(e instanceof Da)li.warn(e.message);else{const n=er.create("idb-get",{originalErrorMessage:e?.message});li.warn(n.message)}}}async function bv(s,e){try{const i=(await Lw()).transaction(Kc,"readwrite");await i.objectStore(Kc).put(e,Uw(s)),await i.done}catch(n){if(n instanceof Da)li.warn(n.message);else{const i=er.create("idb-set",{originalErrorMessage:n?.message});li.warn(i.message)}}}function Uw(s){return`${s.name}!${s.options.appId}`}const wA=1024,NA=30;class EA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=yv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>NA){const o=jA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){li.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yv(),{heartbeatsToSend:n,unsentEntries:i}=SA(this._heartbeatsCache.heartbeats),o=hh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return li.warn(e),""}}}function yv(){return new Date().toISOString().substring(0,10)}function SA(s,e=wA){const n=[];let i=s.slice();for(const o of s){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),vv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),vv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class TA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hj()?fj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _A(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return bv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vv(s){return hh(JSON.stringify({version:2,heartbeats:s})).length}function jA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function AA(s){Jr(new ir("platform-logger",e=>new Bj(e),"PRIVATE")),Jr(new ir("heartbeat",e=>new EA(e),"PRIVATE")),Ea(Lp,gv,s),Ea(Lp,gv,"esm2020"),Ea("fire-js","")}AA("");function Bw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CA=Bw,zw=new lu("auth","Firebase",Bw());const mh=new Eg("@firebase/auth");function RA(s,...e){mh.logLevel<=ft.WARN&&mh.warn(`Auth (${cl}): ${s}`,...e)}function th(s,...e){mh.logLevel<=ft.ERROR&&mh.error(`Auth (${cl}): ${s}`,...e)}function Zs(s,...e){throw jg(s,...e)}function Sa(s,...e){return jg(s,...e)}function Fw(s,e,n){const i={...CA(),[e]:n};return new lu("auth","Firebase",i).create(e,{appName:s.name})}function ai(s){return Fw(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jg(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return zw.create(s,...e)}function Ye(s,e,...n){if(!s)throw jg(e,...n)}function ti(s){const e="INTERNAL ASSERTION FAILED: "+s;throw th(e),new Error(e)}function oi(s,e){s||ti(e)}function zp(){return typeof self<"u"&&self.location?.href||""}function kA(){return _v()==="http:"||_v()==="https:"}function _v(){return typeof self<"u"&&self.location?.protocol||null}function IA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kA()||oj()||"connection"in navigator)?navigator.onLine:!0}function DA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class cu{constructor(e,n){this.shortDelay=e,this.longDelay=n,oi(n>e,"Short delay should be less than long delay!"),this.isMobile=ij()||cj()}get(){return IA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ag(s,e){oi(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class qw{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const MA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const OA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VA=new cu(3e4,6e4);function pr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function gr(s,e,n,i,o={}){return Hw(s,o,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=ou({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const x={method:e,headers:g,...u};return lj()||(x.referrerPolicy="no-referrer"),s.emulatorConfig&&mr(s.emulatorConfig.host)&&(x.credentials="include"),qw.fetch()(await $w(s,s.config.apiHost,n,p),x)})}async function Hw(s,e,n){s._canInitEmulator=!1;const i={...MA,...e};try{const o=new LA(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw qd(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,x]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw qd(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw qd(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw qd(s,"user-disabled",h);const y=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Fw(s,y,x);Zs(s,y)}}catch(o){if(o instanceof Da)throw o;Zs(s,"network-request-failed",{message:String(o)})}}async function uu(s,e,n,i,o={}){const u=await gr(s,e,n,i,o);return"mfaPendingCredential"in u&&Zs(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function $w(s,e,n,i){const o=`${e}${n}?${i}`,u=s,h=u.config.emulator?Ag(s.config,o):`${s.config.apiScheme}://${o}`;return OA.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function PA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Sa(this.auth,"network-request-failed")),VA.get())})}}function qd(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const o=Sa(s,e,i);return o.customData._tokenResponse=n,o}function wv(s){return s!==void 0&&s.enterprise!==void 0}class UA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BA(s,e){return gr(s,"GET","/v2/recaptchaConfig",pr(s,e))}async function zA(s,e){return gr(s,"POST","/v1/accounts:delete",e)}async function ph(s,e){return gr(s,"POST","/v1/accounts:lookup",e)}function Bc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FA(s,e=!1){const n=Ht(s),i=await n.getIdToken(e),o=Cg(i);Ye(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:i,authTime:Bc(gp(o.auth_time)),issuedAtTime:Bc(gp(o.iat)),expirationTime:Bc(gp(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function gp(s){return Number(s)*1e3}function Cg(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return th("JWT malformed, contained fewer than 3 sections"),null;try{const o=Cw(n);return o?JSON.parse(o):(th("Failed to decode base64 JWT payload"),null)}catch(o){return th("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Nv(s){const e=Cg(s);return Ye(e,"internal-error"),Ye(typeof e.exp<"u","internal-error"),Ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Qc(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Da&&qA(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function qA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class HA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Fp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bc(this.lastLoginAt),this.creationTime=Bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function gh(s){const e=s.auth,n=await s.getIdToken(),i=await Qc(s,ph(e,{idToken:n}));Ye(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?Gw(o.providerUserInfo):[],h=GA(s.providerData,u),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!h?.length,x=p?g:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Fp(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(s,y)}async function $A(s){const e=Ht(s);await gh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GA(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Gw(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function YA(s,e){const n=await Hw(s,{},async()=>{const i=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=await $w(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&mr(s.emulatorConfig.host)&&(g.credentials="include"),qw.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KA(s,e){return gr(s,"POST","/v2/accounts:revokeToken",pr(s,e))}class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ye(e.idToken,"internal-error"),Ye(typeof e.idToken<"u","internal-error"),Ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ye(e.length!==0,"internal-error");const n=Nv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:o,expiresIn:u}=await YA(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:o,expirationTime:u}=n,h=new lo;return i&&(Ye(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Ye(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Ye(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return ti("not implemented")}}function Gi(s,e){Ye(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Xs{constructor({uid:e,auth:n,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new HA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Qc(this,this.stsTokenManager.getToken(this.auth,e));return Ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FA(this,e)}reload(){return $A(this)}_assign(e){this!==e&&(Ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await gh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ps(this.auth.app))return Promise.reject(ai(this.auth));const e=await this.getIdToken();return await Qc(this,zA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,x=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:w,emailVerified:S,isAnonymous:C,providerData:H,stsTokenManager:B}=n;Ye(w&&B,e,"internal-error");const V=lo.fromJSON(this.name,B);Ye(typeof w=="string",e,"internal-error"),Gi(i,e.name),Gi(o,e.name),Ye(typeof S=="boolean",e,"internal-error"),Ye(typeof C=="boolean",e,"internal-error"),Gi(u,e.name),Gi(h,e.name),Gi(p,e.name),Gi(g,e.name),Gi(x,e.name),Gi(y,e.name);const z=new Xs({uid:w,auth:e,email:o,emailVerified:S,displayName:i,isAnonymous:C,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:V,createdAt:x,lastLoginAt:y});return H&&Array.isArray(H)&&(z.providerData=H.map(Y=>({...Y}))),g&&(z._redirectEventId=g),z}static async _fromIdTokenResponse(e,n,i=!1){const o=new lo;o.updateFromServerResponse(n);const u=new Xs({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await gh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const o=n.users[0];Ye(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Gw(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,p=new lo;p.updateFromIdToken(i);const g=new Xs({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Fp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,x),g}}const Ev=new Map;function ni(s){oi(s instanceof Function,"Expected a class definition");let e=Ev.get(s);return e?(oi(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Ev.set(s,e),e)}class Yw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Yw.type="NONE";const Sv=Yw;function nh(s,e,n){return`firebase:${s}:${e}:${n}`}class oo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=nh(this.userKey,o.apiKey,u),this.fullPersistenceKey=nh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ph(this.auth,{idToken:e}).catch(()=>{});return n?Xs._fromGetAccountInfoResponse(this.auth,n,e):null}return Xs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new oo(ni(Sv),e,i);const o=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=o[0]||ni(Sv);const h=nh(i,e.config.apiKey,e.name);let p=null;for(const x of n)try{const y=await x._get(h);if(y){let w;if(typeof y=="string"){const S=await ph(e,{idToken:y}).catch(()=>{});if(!S)break;w=await Xs._fromGetAccountInfoResponse(e,S,y)}else w=Xs._fromJSON(e,y);x!==u&&(p=w),u=x;break}}catch{}const g=o.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new oo(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(n.map(async x=>{if(x!==u)try{await x._remove(h)}catch{}})),new oo(u,e,i))}}function Tv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zw(e))return"Blackberry";if(e1(e))return"Webos";if(Qw(e))return"Safari";if((e.includes("chrome/")||Ww(e))&&!e.includes("edge/"))return"Chrome";if(Jw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Kw(s=zn()){return/firefox\//i.test(s)}function Qw(s=zn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ww(s=zn()){return/crios\//i.test(s)}function Xw(s=zn()){return/iemobile/i.test(s)}function Jw(s=zn()){return/android/i.test(s)}function Zw(s=zn()){return/blackberry/i.test(s)}function e1(s=zn()){return/webos/i.test(s)}function Rg(s=zn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function QA(s=zn()){return Rg(s)&&!!window.navigator?.standalone}function WA(){return uj()&&document.documentMode===10}function t1(s=zn()){return Rg(s)||Jw(s)||e1(s)||Zw(s)||/windows phone/i.test(s)||Xw(s)}function n1(s,e=[]){let n;switch(s){case"Browser":n=Tv(zn());break;case"Worker":n=`${Tv(zn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cl}/${i}`}class XA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function JA(s,e={}){return gr(s,"GET","/v2/passwordPolicy",pr(s,e))}const ZA=6;class e5{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ZA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class t5{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jv(this),this.idTokenSubscription=new jv(this),this.beforeStateQueue=new XA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ni(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await oo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ph(this,{idToken:e}),i=await Xs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ps(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ps(this.app))return Promise.reject(ai(this));const n=e?Ht(e):null;return n&&Ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ps(this.app)?Promise.reject(ai(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ps(this.app)?Promise.reject(ai(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JA(this),n=new e5(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await KA(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ni(e)||this._popupRedirectResolver;Ye(n,this,"argument-error"),this.redirectPersistenceManager=await oo.create(this,[ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ye(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=n1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&RA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ul(s){return Ht(s)}class jv{constructor(e){this.auth=e,this.observer=null,this.addObserver=bj(n=>this.observer=n)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ph={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function n5(s){Ph=s}function s1(s){return Ph.loadJS(s)}function s5(){return Ph.recaptchaEnterpriseScript}function a5(){return Ph.gapiScript}function i5(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class r5{constructor(){this.enterprise=new l5}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class l5{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const o5="recaptcha-enterprise",a1="NO_RECAPTCHA";class c5{constructor(e){this.type=o5,this.auth=ul(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{BA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const x=new UA(g);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,h(x.siteKey)}}).catch(g=>{p(g)})})}function o(u,h,p){const g=window.grecaptcha;wv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(x=>{h(x)}).catch(()=>{h(a1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new r5().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!n&&wv(window.grecaptcha))o(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=s5();g.length!==0&&(g+=p),s1(g).then(()=>{o(p,u,h)}).catch(x=>{h(x)})}}).catch(p=>{h(p)})})}}async function Av(s,e,n,i=!1,o=!1){const u=new c5(s);let h;if(o)h=a1;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,x=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function qp(s,e,n,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Av(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Av(s,e,n,n==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function u5(s,e){const n=Vh(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Xr(u,e??{}))return o;Zs(o,"already-initialized")}return n.initialize({options:e})}function d5(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(ni);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function h5(s,e,n){const i=ul(s);Ye(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=i1(e),{host:h,port:p}=f5(e),g=p===null?"":`:${p}`,x={url:`${u}//${h}${g}/`},y=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ye(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ye(Xr(x,i.config.emulator)&&Xr(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=x,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,mr(h)?(wg(`${u}//${h}${g}`),Ng("Auth",!0)):m5()}function i1(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function f5(s){const e=i1(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:Cv(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:Cv(h)}}}function Cv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function m5(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class kg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,n){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}}async function p5(s,e){return gr(s,"POST","/v1/accounts:signUp",e)}async function g5(s,e){return uu(s,"POST","/v1/accounts:signInWithPassword",pr(s,e))}async function x5(s,e){return uu(s,"POST","/v1/accounts:signInWithEmailLink",pr(s,e))}async function b5(s,e){return uu(s,"POST","/v1/accounts:signInWithEmailLink",pr(s,e))}class Wc extends kg{constructor(e,n,i,o=null){super("password",i),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Wc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Wc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qp(e,n,"signInWithPassword",g5);case"emailLink":return x5(e,{email:this._email,oobCode:this._password});default:Zs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qp(e,i,"signUpPassword",p5);case"emailLink":return b5(e,{idToken:n,email:this._email,oobCode:this._password});default:Zs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function co(s,e){return uu(s,"POST","/v1/accounts:signInWithIdp",pr(s,e))}const y5="http://localhost";class Zr extends kg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Zr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...u}=n;if(!i||!o)return null;const h=new Zr(i,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return co(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,co(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,co(e,n)}buildRequest(){const e={requestUri:y5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ou(n)}return e}}function v5(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _5(s){const e=Ic(Dc(s)).link,n=e?Ic(Dc(e)).deep_link_id:null,i=Ic(Dc(s)).deep_link_id;return(i?Ic(Dc(i)).link:null)||i||n||e||s}class Ig{constructor(e){const n=Ic(Dc(e)),i=n.apiKey??null,o=n.oobCode??null,u=v5(n.mode??null);Ye(i&&o&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=_5(e);try{return new Ig(n)}catch{return null}}}class Eo{constructor(){this.providerId=Eo.PROVIDER_ID}static credential(e,n){return Wc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Ig.parseLink(n);return Ye(i,"argument-error"),Wc._fromEmailAndCode(e,i.code,i.tenantId)}}Eo.PROVIDER_ID="password";Eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class r1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class du extends r1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Yi extends du{constructor(){super("facebook.com")}static credential(e){return Zr._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";class Ki extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Zr._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ki.credential(n,i)}catch{return null}}}Ki.GOOGLE_SIGN_IN_METHOD="google.com";Ki.PROVIDER_ID="google.com";class Qi extends du{constructor(){super("github.com")}static credential(e){return Zr._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com";Qi.PROVIDER_ID="github.com";class Wi extends du{constructor(){super("twitter.com")}static credential(e,n){return Zr._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Wi.credential(n,i)}catch{return null}}}Wi.TWITTER_SIGN_IN_METHOD="twitter.com";Wi.PROVIDER_ID="twitter.com";async function w5(s,e){return uu(s,"POST","/v1/accounts:signUp",pr(s,e))}class el{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){const u=await Xs._fromIdTokenResponse(e,i,o),h=Rv(i);return new el({user:u,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const o=Rv(i);return new el({user:e,providerId:o,_tokenResponse:i,operationType:n})}}function Rv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class xh extends Da{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,xh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new xh(e,n,i,o)}}function l1(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?xh._fromErrorAndOperation(s,u,e,i):u})}async function N5(s,e,n=!1){const i=await Qc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return el._forOperation(s,"link",i)}async function E5(s,e,n=!1){const{auth:i}=s;if(ps(i.app))return Promise.reject(ai(i));const o="reauthenticate";try{const u=await Qc(s,l1(i,o,e,s),n);Ye(u.idToken,i,"internal-error");const h=Cg(u.idToken);Ye(h,i,"internal-error");const{sub:p}=h;return Ye(s.uid===p,i,"user-mismatch"),el._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Zs(i,"user-mismatch"),u}}async function o1(s,e,n=!1){if(ps(s.app))return Promise.reject(ai(s));const i="signIn",o=await l1(s,i,e),u=await el._fromIdTokenResponse(s,i,o);return n||await s._updateCurrentUser(u.user),u}async function S5(s,e){return o1(ul(s),e)}async function c1(s){const e=ul(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function T5(s,e,n){if(ps(s.app))return Promise.reject(ai(s));const i=ul(s),h=await qp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w5).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&c1(s),g}),p=await el._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function u1(s,e,n){return ps(s.app)?Promise.reject(ai(s)):S5(Ht(s),Eo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&c1(s),i})}function j5(s,e,n,i){return Ht(s).onIdTokenChanged(e,n,i)}function A5(s,e,n){return Ht(s).beforeAuthStateChanged(e,n)}function C5(s,e,n,i){return Ht(s).onAuthStateChanged(e,n,i)}function R5(s){return Ht(s).signOut()}const bh="__sak";class d1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const k5=1e3,I5=10;class h1 extends d1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=t1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),o=this.localCache[n];i!==o&&e(n,o,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);WA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,I5):o()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},k5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}h1.type="LOCAL";const D5=h1;class f1 extends d1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}f1.type="SESSION";const m1=f1;function M5(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const i=new Lh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(h).map(async x=>x(n.origin,u)),g=await M5(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lh.receivers=[];function Dg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class O5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const x=Dg("",20);o.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===x)switch(S.data.status){case"ack":clearTimeout(y),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(S.data.response);break;default:clearTimeout(y),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Ta(){return window}function V5(s){Ta().location.href=s}function p1(){return typeof Ta().WorkerGlobalScope<"u"&&typeof Ta().importScripts=="function"}async function P5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L5(){return navigator?.serviceWorker?.controller||null}function U5(){return p1()?self:null}const g1="firebaseLocalStorageDb",B5=1,yh="firebaseLocalStorage",x1="fbase_key";class hu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uh(s,e){return s.transaction([yh],e?"readwrite":"readonly").objectStore(yh)}function z5(){const s=indexedDB.deleteDatabase(g1);return new hu(s).toPromise()}function Hp(){const s=indexedDB.open(g1,B5);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(yh,{keyPath:x1})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(yh)?e(i):(i.close(),await z5(),e(await Hp()))})})}async function kv(s,e,n){const i=Uh(s,!0).put({[x1]:e,value:n});return new hu(i).toPromise()}async function F5(s,e){const n=Uh(s,!1).get(e),i=await new hu(n).toPromise();return i===void 0?null:i.value}function Iv(s,e){const n=Uh(s,!0).delete(e);return new hu(n).toPromise()}const q5=800,H5=3;class b1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>H5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return p1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lh._getInstance(U5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await P5(),!this.activeServiceWorker)return;this.sender=new O5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hp();return await kv(e,bh,"1"),await Iv(e,bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>kv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>F5(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Iv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Uh(o,!1).getAll();return new hu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),q5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b1.type="LOCAL";const $5=b1;new cu(3e4,6e4);function G5(s,e){return e?ni(e):(Ye(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Mg extends kg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,n){return co(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Y5(s){return o1(s.auth,new Mg(s),s.bypassAuthState)}function K5(s){const{auth:e,user:n}=s;return Ye(n,e,"internal-error"),E5(n,new Mg(s),s.bypassAuthState)}async function Q5(s){const{auth:e,user:n}=s;return Ye(n,e,"internal-error"),N5(n,new Mg(s),s.bypassAuthState)}class y1{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y5;case"linkViaPopup":case"linkViaRedirect":return Q5;case"reauthViaPopup":case"reauthViaRedirect":return K5;default:Zs(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const W5=new cu(2e3,1e4);class ao extends y1{constructor(e,n,i,o,u){super(e,n,o,u),this.provider=i,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ye(e,this.auth,"internal-error"),e}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");const e=Dg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Sa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,W5.get())};e()}}ao.currentPopupAction=null;const X5="pendingRedirect",sh=new Map;class J5 extends y1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=sh.get(this.auth._key());if(!e){try{const i=await Z5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Z5(s,e){const n=nC(e),i=tC(s);if(!await i._isAvailable())return!1;const o=await i._get(n)==="true";return await i._remove(n),o}function eC(s,e){sh.set(s._key(),e)}function tC(s){return ni(s._redirectPersistence)}function nC(s){return nh(X5,s.config.apiKey,s.name)}async function sC(s,e,n=!1){if(ps(s.app))return Promise.reject(ai(s));const i=ul(s),o=G5(i,e),h=await new J5(i,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const aC=600*1e3;class iC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!v1(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Sa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dv(e))}saveEventToCache(e){this.cachedEventUids.add(Dv(e)),this.lastProcessedEventTime=Date.now()}}function Dv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function v1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function rC(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return v1(s);default:return!1}}async function lC(s,e={}){return gr(s,"GET","/v1/projects",e)}const oC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cC=/^https?/;async function uC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await lC(s);for(const n of e)try{if(dC(n))return}catch{}Zs(s,"unauthorized-domain")}function dC(s){const e=zp(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!cC.test(n))return!1;if(oC.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const hC=new cu(3e4,6e4);function Mv(){const s=Ta().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function fC(s){return new Promise((e,n)=>{function i(){Mv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mv(),n(Sa(s,"network-request-failed"))},timeout:hC.get()})}if(Ta().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ta().gapi?.load)i();else{const o=i5("iframefcb");return Ta()[o]=()=>{gapi.load?i():n(Sa(s,"network-request-failed"))},s1(`${a5()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw ah=null,e})}let ah=null;function mC(s){return ah=ah||fC(s),ah}const pC=new cu(5e3,15e3),gC="__/auth/iframe",xC="emulator/auth/iframe",bC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vC(s){const e=s.config;Ye(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Ag(e,xC):`https://${s.config.authDomain}/${gC}`,i={apiKey:e.apiKey,appName:s.name,v:cl},o=yC.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${ou(i).slice(1)}`}async function _C(s){const e=await mC(s),n=Ta().gapi;return Ye(n,s,"internal-error"),e.open({where:document.body,url:vC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bC,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const h=Sa(s,"network-request-failed"),p=Ta().setTimeout(()=>{u(h)},pC.get());function g(){Ta().clearTimeout(p),o(i)}i.ping(g).then(g,()=>{u(h)})}))}const wC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NC=500,EC=600,SC="_blank",TC="http://localhost";class Ov{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jC(s,e,n,i=NC,o=EC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...wC,width:i.toString(),height:o.toString(),top:u,left:h},x=zn().toLowerCase();n&&(p=Ww(x)?SC:n),Kw(x)&&(e=e||TC,g.scrollbars="yes");const y=Object.entries(g).reduce((S,[C,H])=>`${S}${C}=${H},`,"");if(QA(x)&&p!=="_self")return AC(e||"",p),new Ov(null);const w=window.open(e||"",p,y);Ye(w,s,"popup-blocked");try{w.focus()}catch{}return new Ov(w)}function AC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const CC="__/auth/handler",RC="emulator/auth/handler",kC=encodeURIComponent("fac");async function Vv(s,e,n,i,o,u){Ye(s.config.authDomain,s,"auth-domain-config-required"),Ye(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:cl,eventId:o};if(e instanceof r1){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",xj(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))h[y]=w}if(e instanceof du){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(h.scopes=y.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const y of Object.keys(p))p[y]===void 0&&delete p[y];const g=await s._getAppCheckToken(),x=g?`#${kC}=${encodeURIComponent(g)}`:"";return`${IC(s)}?${ou(p).slice(1)}${x}`}function IC({config:s}){return s.emulator?Ag(s,RC):`https://${s.authDomain}/${CC}`}const xp="webStorageSupport";class DC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=m1,this._completeRedirectFn=sC,this._overrideRedirectResult=eC}async _openPopup(e,n,i,o){oi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await Vv(e,n,i,zp(),o);return jC(e,u,Dg())}async _openRedirect(e,n,i,o){await this._originValidation(e);const u=await Vv(e,n,i,zp(),o);return V5(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(oi(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await _C(e),i=new iC(e);return n.register("authEvent",o=>(Ye(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xp,{type:xp},o=>{const u=o?.[0]?.[xp];u!==void 0&&n(!!u),Zs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return t1()||Qw()||Rg()}}const MC=DC;var Pv="@firebase/auth",Lv="1.12.0";class OC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function VC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PC(s){Jr(new ir("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Ye(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:n1(s)},x=new t5(i,o,u,g);return d5(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Jr(new ir("auth-internal",e=>{const n=ul(e.getProvider("auth").getImmediate());return(i=>new OC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ea(Pv,Lv,VC(s)),Ea(Pv,Lv,"esm2020")}const LC=300,UC=Dw("authIdTokenMaxAge")||LC;let Uv=null;const BC=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>UC)return;const o=n?.token;Uv!==o&&(Uv=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function zC(s=Tg()){const e=Vh(s,"auth");if(e.isInitialized())return e.getImmediate();const n=u5(s,{popupRedirectResolver:MC,persistence:[$5,D5,m1]}),i=Dw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=BC(u.toString());A5(n,h,()=>h(n.currentUser)),j5(n,p=>h(p))}}const o=Rw("auth");return o&&h5(n,`http://${o}`),n}function FC(){return document.getElementsByTagName("head")?.[0]??document}n5({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Sa("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",FC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PC("Browser");var qC="firebase",HC="12.8.0";Ea(qC,HC,"app");var Bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var tr,_1;(function(){var s;function e(A,j){function I(){}I.prototype=j.prototype,A.F=j.prototype,A.prototype=new I,A.prototype.constructor=A,A.D=function(L,P,q){for(var D=Array(arguments.length-2),F=2;F<arguments.length;F++)D[F-2]=arguments[F];return j.prototype[P].apply(L,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(A,j,I){I||(I=0);const L=Array(16);if(typeof j=="string")for(var P=0;P<16;++P)L[P]=j.charCodeAt(I++)|j.charCodeAt(I++)<<8|j.charCodeAt(I++)<<16|j.charCodeAt(I++)<<24;else for(P=0;P<16;++P)L[P]=j[I++]|j[I++]<<8|j[I++]<<16|j[I++]<<24;j=A.g[0],I=A.g[1],P=A.g[2];let q=A.g[3],D;D=j+(q^I&(P^q))+L[0]+3614090360&4294967295,j=I+(D<<7&4294967295|D>>>25),D=q+(P^j&(I^P))+L[1]+3905402710&4294967295,q=j+(D<<12&4294967295|D>>>20),D=P+(I^q&(j^I))+L[2]+606105819&4294967295,P=q+(D<<17&4294967295|D>>>15),D=I+(j^P&(q^j))+L[3]+3250441966&4294967295,I=P+(D<<22&4294967295|D>>>10),D=j+(q^I&(P^q))+L[4]+4118548399&4294967295,j=I+(D<<7&4294967295|D>>>25),D=q+(P^j&(I^P))+L[5]+1200080426&4294967295,q=j+(D<<12&4294967295|D>>>20),D=P+(I^q&(j^I))+L[6]+2821735955&4294967295,P=q+(D<<17&4294967295|D>>>15),D=I+(j^P&(q^j))+L[7]+4249261313&4294967295,I=P+(D<<22&4294967295|D>>>10),D=j+(q^I&(P^q))+L[8]+1770035416&4294967295,j=I+(D<<7&4294967295|D>>>25),D=q+(P^j&(I^P))+L[9]+2336552879&4294967295,q=j+(D<<12&4294967295|D>>>20),D=P+(I^q&(j^I))+L[10]+4294925233&4294967295,P=q+(D<<17&4294967295|D>>>15),D=I+(j^P&(q^j))+L[11]+2304563134&4294967295,I=P+(D<<22&4294967295|D>>>10),D=j+(q^I&(P^q))+L[12]+1804603682&4294967295,j=I+(D<<7&4294967295|D>>>25),D=q+(P^j&(I^P))+L[13]+4254626195&4294967295,q=j+(D<<12&4294967295|D>>>20),D=P+(I^q&(j^I))+L[14]+2792965006&4294967295,P=q+(D<<17&4294967295|D>>>15),D=I+(j^P&(q^j))+L[15]+1236535329&4294967295,I=P+(D<<22&4294967295|D>>>10),D=j+(P^q&(I^P))+L[1]+4129170786&4294967295,j=I+(D<<5&4294967295|D>>>27),D=q+(I^P&(j^I))+L[6]+3225465664&4294967295,q=j+(D<<9&4294967295|D>>>23),D=P+(j^I&(q^j))+L[11]+643717713&4294967295,P=q+(D<<14&4294967295|D>>>18),D=I+(q^j&(P^q))+L[0]+3921069994&4294967295,I=P+(D<<20&4294967295|D>>>12),D=j+(P^q&(I^P))+L[5]+3593408605&4294967295,j=I+(D<<5&4294967295|D>>>27),D=q+(I^P&(j^I))+L[10]+38016083&4294967295,q=j+(D<<9&4294967295|D>>>23),D=P+(j^I&(q^j))+L[15]+3634488961&4294967295,P=q+(D<<14&4294967295|D>>>18),D=I+(q^j&(P^q))+L[4]+3889429448&4294967295,I=P+(D<<20&4294967295|D>>>12),D=j+(P^q&(I^P))+L[9]+568446438&4294967295,j=I+(D<<5&4294967295|D>>>27),D=q+(I^P&(j^I))+L[14]+3275163606&4294967295,q=j+(D<<9&4294967295|D>>>23),D=P+(j^I&(q^j))+L[3]+4107603335&4294967295,P=q+(D<<14&4294967295|D>>>18),D=I+(q^j&(P^q))+L[8]+1163531501&4294967295,I=P+(D<<20&4294967295|D>>>12),D=j+(P^q&(I^P))+L[13]+2850285829&4294967295,j=I+(D<<5&4294967295|D>>>27),D=q+(I^P&(j^I))+L[2]+4243563512&4294967295,q=j+(D<<9&4294967295|D>>>23),D=P+(j^I&(q^j))+L[7]+1735328473&4294967295,P=q+(D<<14&4294967295|D>>>18),D=I+(q^j&(P^q))+L[12]+2368359562&4294967295,I=P+(D<<20&4294967295|D>>>12),D=j+(I^P^q)+L[5]+4294588738&4294967295,j=I+(D<<4&4294967295|D>>>28),D=q+(j^I^P)+L[8]+2272392833&4294967295,q=j+(D<<11&4294967295|D>>>21),D=P+(q^j^I)+L[11]+1839030562&4294967295,P=q+(D<<16&4294967295|D>>>16),D=I+(P^q^j)+L[14]+4259657740&4294967295,I=P+(D<<23&4294967295|D>>>9),D=j+(I^P^q)+L[1]+2763975236&4294967295,j=I+(D<<4&4294967295|D>>>28),D=q+(j^I^P)+L[4]+1272893353&4294967295,q=j+(D<<11&4294967295|D>>>21),D=P+(q^j^I)+L[7]+4139469664&4294967295,P=q+(D<<16&4294967295|D>>>16),D=I+(P^q^j)+L[10]+3200236656&4294967295,I=P+(D<<23&4294967295|D>>>9),D=j+(I^P^q)+L[13]+681279174&4294967295,j=I+(D<<4&4294967295|D>>>28),D=q+(j^I^P)+L[0]+3936430074&4294967295,q=j+(D<<11&4294967295|D>>>21),D=P+(q^j^I)+L[3]+3572445317&4294967295,P=q+(D<<16&4294967295|D>>>16),D=I+(P^q^j)+L[6]+76029189&4294967295,I=P+(D<<23&4294967295|D>>>9),D=j+(I^P^q)+L[9]+3654602809&4294967295,j=I+(D<<4&4294967295|D>>>28),D=q+(j^I^P)+L[12]+3873151461&4294967295,q=j+(D<<11&4294967295|D>>>21),D=P+(q^j^I)+L[15]+530742520&4294967295,P=q+(D<<16&4294967295|D>>>16),D=I+(P^q^j)+L[2]+3299628645&4294967295,I=P+(D<<23&4294967295|D>>>9),D=j+(P^(I|~q))+L[0]+4096336452&4294967295,j=I+(D<<6&4294967295|D>>>26),D=q+(I^(j|~P))+L[7]+1126891415&4294967295,q=j+(D<<10&4294967295|D>>>22),D=P+(j^(q|~I))+L[14]+2878612391&4294967295,P=q+(D<<15&4294967295|D>>>17),D=I+(q^(P|~j))+L[5]+4237533241&4294967295,I=P+(D<<21&4294967295|D>>>11),D=j+(P^(I|~q))+L[12]+1700485571&4294967295,j=I+(D<<6&4294967295|D>>>26),D=q+(I^(j|~P))+L[3]+2399980690&4294967295,q=j+(D<<10&4294967295|D>>>22),D=P+(j^(q|~I))+L[10]+4293915773&4294967295,P=q+(D<<15&4294967295|D>>>17),D=I+(q^(P|~j))+L[1]+2240044497&4294967295,I=P+(D<<21&4294967295|D>>>11),D=j+(P^(I|~q))+L[8]+1873313359&4294967295,j=I+(D<<6&4294967295|D>>>26),D=q+(I^(j|~P))+L[15]+4264355552&4294967295,q=j+(D<<10&4294967295|D>>>22),D=P+(j^(q|~I))+L[6]+2734768916&4294967295,P=q+(D<<15&4294967295|D>>>17),D=I+(q^(P|~j))+L[13]+1309151649&4294967295,I=P+(D<<21&4294967295|D>>>11),D=j+(P^(I|~q))+L[4]+4149444226&4294967295,j=I+(D<<6&4294967295|D>>>26),D=q+(I^(j|~P))+L[11]+3174756917&4294967295,q=j+(D<<10&4294967295|D>>>22),D=P+(j^(q|~I))+L[2]+718787259&4294967295,P=q+(D<<15&4294967295|D>>>17),D=I+(q^(P|~j))+L[9]+3951481745&4294967295,A.g[0]=A.g[0]+j&4294967295,A.g[1]=A.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+q&4294967295}i.prototype.v=function(A,j){j===void 0&&(j=A.length);const I=j-this.blockSize,L=this.C;let P=this.h,q=0;for(;q<j;){if(P==0)for(;q<=I;)o(this,A,q),q+=this.blockSize;if(typeof A=="string"){for(;q<j;)if(L[P++]=A.charCodeAt(q++),P==this.blockSize){o(this,L),P=0;break}}else for(;q<j;)if(L[P++]=A[q++],P==this.blockSize){o(this,L),P=0;break}}this.h=P,this.o+=j},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var j=1;j<A.length-8;++j)A[j]=0;j=this.o*8;for(var I=A.length-8;I<A.length;++I)A[I]=j&255,j/=256;for(this.v(A),A=Array(16),j=0,I=0;I<4;++I)for(let L=0;L<32;L+=8)A[j++]=this.g[I]>>>L&255;return A};function u(A,j){var I=p;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=j(A)}function h(A,j){this.h=j;const I=[];let L=!0;for(let P=A.length-1;P>=0;P--){const q=A[P]|0;L&&q==j||(I[P]=q,L=!1)}this.g=I}var p={};function g(A){return-128<=A&&A<128?u(A,function(j){return new h([j|0],j<0?-1:0)}):new h([A|0],A<0?-1:0)}function x(A){if(isNaN(A)||!isFinite(A))return w;if(A<0)return V(x(-A));const j=[];let I=1;for(let L=0;A>=I;L++)j[L]=A/I|0,I*=4294967296;return new h(j,0)}function y(A,j){if(A.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(A.charAt(0)=="-")return V(y(A.substring(1),j));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=x(Math.pow(j,8));let L=w;for(let q=0;q<A.length;q+=8){var P=Math.min(8,A.length-q);const D=parseInt(A.substring(q,q+P),j);P<8?(P=x(Math.pow(j,P)),L=L.j(P).add(x(D))):(L=L.j(I),L=L.add(x(D)))}return L}var w=g(0),S=g(1),C=g(16777216);s=h.prototype,s.m=function(){if(B(this))return-V(this).m();let A=0,j=1;for(let I=0;I<this.g.length;I++){const L=this.i(I);A+=(L>=0?L:4294967296+L)*j,j*=4294967296}return A},s.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(H(this))return"0";if(B(this))return"-"+V(this).toString(A);const j=x(Math.pow(A,6));var I=this;let L="";for(;;){const P=be(I,j).g;I=z(I,P.j(j));let q=((I.g.length>0?I.g[0]:I.h)>>>0).toString(A);if(I=P,H(I))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},s.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function H(A){if(A.h!=0)return!1;for(let j=0;j<A.g.length;j++)if(A.g[j]!=0)return!1;return!0}function B(A){return A.h==-1}s.l=function(A){return A=z(this,A),B(A)?-1:H(A)?0:1};function V(A){const j=A.g.length,I=[];for(let L=0;L<j;L++)I[L]=~A.g[L];return new h(I,~A.h).add(S)}s.abs=function(){return B(this)?V(this):this},s.add=function(A){const j=Math.max(this.g.length,A.g.length),I=[];let L=0;for(let P=0;P<=j;P++){let q=L+(this.i(P)&65535)+(A.i(P)&65535),D=(q>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);L=D>>>16,q&=65535,D&=65535,I[P]=D<<16|q}return new h(I,I[I.length-1]&-2147483648?-1:0)};function z(A,j){return A.add(V(j))}s.j=function(A){if(H(this)||H(A))return w;if(B(this))return B(A)?V(this).j(V(A)):V(V(this).j(A));if(B(A))return V(this.j(V(A)));if(this.l(C)<0&&A.l(C)<0)return x(this.m()*A.m());const j=this.g.length+A.g.length,I=[];for(var L=0;L<2*j;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(let P=0;P<A.g.length;P++){const q=this.i(L)>>>16,D=this.i(L)&65535,F=A.i(P)>>>16,M=A.i(P)&65535;I[2*L+2*P]+=D*M,Y(I,2*L+2*P),I[2*L+2*P+1]+=q*M,Y(I,2*L+2*P+1),I[2*L+2*P+1]+=D*F,Y(I,2*L+2*P+1),I[2*L+2*P+2]+=q*F,Y(I,2*L+2*P+2)}for(A=0;A<j;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=j;A<2*j;A++)I[A]=0;return new h(I,0)};function Y(A,j){for(;(A[j]&65535)!=A[j];)A[j+1]+=A[j]>>>16,A[j]&=65535,j++}function W(A,j){this.g=A,this.h=j}function be(A,j){if(H(j))throw Error("division by zero");if(H(A))return new W(w,w);if(B(A))return j=be(V(A),j),new W(V(j.g),V(j.h));if(B(j))return j=be(A,V(j)),new W(V(j.g),j.h);if(A.g.length>30){if(B(A)||B(j))throw Error("slowDivide_ only works with positive integers.");for(var I=S,L=j;L.l(A)<=0;)I=ge(I),L=ge(L);var P=oe(I,1),q=oe(L,1);for(L=oe(L,2),I=oe(I,2);!H(L);){var D=q.add(L);D.l(A)<=0&&(P=P.add(I),q=D),L=oe(L,1),I=oe(I,1)}return j=z(A,P.j(j)),new W(P,j)}for(P=w;A.l(j)>=0;){for(I=Math.max(1,Math.floor(A.m()/j.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=x(I),D=q.j(j);B(D)||D.l(A)>0;)I-=L,q=x(I),D=q.j(j);H(q)&&(q=S),P=P.add(q),A=z(A,D)}return new W(P,A)}s.B=function(A){return be(this,A).h},s.and=function(A){const j=Math.max(this.g.length,A.g.length),I=[];for(let L=0;L<j;L++)I[L]=this.i(L)&A.i(L);return new h(I,this.h&A.h)},s.or=function(A){const j=Math.max(this.g.length,A.g.length),I=[];for(let L=0;L<j;L++)I[L]=this.i(L)|A.i(L);return new h(I,this.h|A.h)},s.xor=function(A){const j=Math.max(this.g.length,A.g.length),I=[];for(let L=0;L<j;L++)I[L]=this.i(L)^A.i(L);return new h(I,this.h^A.h)};function ge(A){const j=A.g.length+1,I=[];for(let L=0;L<j;L++)I[L]=A.i(L)<<1|A.i(L-1)>>>31;return new h(I,A.h)}function oe(A,j){const I=j>>5;j%=32;const L=A.g.length-I,P=[];for(let q=0;q<L;q++)P[q]=j>0?A.i(q+I)>>>j|A.i(q+I+1)<<32-j:A.i(q+I);return new h(P,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,_1=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=x,h.fromString=y,tr=h}).apply(typeof Bv<"u"?Bv:typeof self<"u"?self:typeof window<"u"?window:{});var Hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var w1,Mc,N1,ih,$p,E1,S1,T1;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hd=="object"&&Hd];for(var b=0;b<d.length;++b){var _=d[b];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function o(d,b){if(b)e:{var _=i;d=d.split(".");for(var T=0;T<d.length-1;T++){var Z=d[T];if(!(Z in _))break e;_=_[Z]}d=d[d.length-1],T=_[d],b=b(T),b!=T&&b!=null&&e(_,d,{configurable:!0,writable:!0,value:b})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(b){var _=[],T;for(T in b)Object.prototype.hasOwnProperty.call(b,T)&&_.push([T,b[T]]);return _}});var u=u||{},h=this||self;function p(d){var b=typeof d;return b=="object"&&d!=null||b=="function"}function g(d,b,_){return d.call.apply(d.bind,arguments)}function x(d,b,_){return x=g,x.apply(null,arguments)}function y(d,b){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),d.apply(this,T)}}function w(d,b){function _(){}_.prototype=b.prototype,d.Z=b.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(T,Z,ae){for(var Ee=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)Ee[tt-2]=arguments[tt];return b.prototype[Z].apply(T,Ee)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function C(d){const b=d.length;if(b>0){const _=Array(b);for(let T=0;T<b;T++)_[T]=d[T];return _}return[]}function H(d,b){for(let T=1;T<arguments.length;T++){const Z=arguments[T];var _=typeof Z;if(_=_!="object"?_:Z?Array.isArray(Z)?"array":_:"null",_=="array"||_=="object"&&typeof Z.length=="number"){_=d.length||0;const ae=Z.length||0;d.length=_+ae;for(let Ee=0;Ee<ae;Ee++)d[_+Ee]=Z[Ee]}else d.push(Z)}}class B{constructor(b,_){this.i=b,this.j=_,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function V(d){h.setTimeout(()=>{throw d},0)}function z(){var d=A;let b=null;return d.g&&(b=d.g,d.g=d.g.next,d.g||(d.h=null),b.next=null),b}class Y{constructor(){this.h=this.g=null}add(b,_){const T=W.get();T.set(b,_),this.h?this.h.next=T:this.g=T,this.h=T}}var W=new B(()=>new be,d=>d.reset());class be{constructor(){this.next=this.g=this.h=null}set(b,_){this.h=b,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,oe=!1,A=new Y,j=()=>{const d=Promise.resolve(void 0);ge=()=>{d.then(I)}};function I(){for(var d;d=z();){try{d.h.call(d.g)}catch(_){V(_)}var b=W;b.j(d),b.h<100&&(b.h++,d.next=b.g,b.g=d)}oe=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,b){this.type=d,this.g=this.target=b,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,b=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};h.addEventListener("test",_,b),h.removeEventListener("test",_,b)}catch{}return d})();function D(d){return/^[\s\xa0]*$/.test(d)}function F(d,b){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,b)}w(F,P),F.prototype.init=function(d,b){const _=this.type=d.type,T=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=b,b=d.relatedTarget,b||(_=="mouseover"?b=d.fromElement:_=="mouseout"&&(b=d.toElement)),this.relatedTarget=b,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var M="closure_listenable_"+(Math.random()*1e6|0),k=0;function K(d,b,_,T,Z){this.listener=d,this.proxy=null,this.src=b,this.type=_,this.capture=!!T,this.ha=Z,this.key=++k,this.da=this.fa=!1}function fe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Se(d,b,_){for(const T in d)b.call(_,d[T],T,d)}function _e(d,b){for(const _ in d)b.call(void 0,d[_],_,d)}function O(d){const b={};for(const _ in d)b[_]=d[_];return b}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(d,b){let _,T;for(let Z=1;Z<arguments.length;Z++){T=arguments[Z];for(_ in T)d[_]=T[_];for(let ae=0;ae<ne.length;ae++)_=ne[ae],Object.prototype.hasOwnProperty.call(T,_)&&(d[_]=T[_])}}function we(d){this.src=d,this.g={},this.h=0}we.prototype.add=function(d,b,_,T,Z){const ae=d.toString();d=this.g[ae],d||(d=this.g[ae]=[],this.h++);const Ee=Ie(d,b,T,Z);return Ee>-1?(b=d[Ee],_||(b.fa=!1)):(b=new K(b,this.src,ae,!!T,Z),b.fa=_,d.push(b)),b};function ye(d,b){const _=b.type;if(_ in d.g){var T=d.g[_],Z=Array.prototype.indexOf.call(T,b,void 0),ae;(ae=Z>=0)&&Array.prototype.splice.call(T,Z,1),ae&&(fe(b),d.g[_].length==0&&(delete d.g[_],d.h--))}}function Ie(d,b,_,T){for(let Z=0;Z<d.length;++Z){const ae=d[Z];if(!ae.da&&ae.listener==b&&ae.capture==!!_&&ae.ha==T)return Z}return-1}var ue="closure_lm_"+(Math.random()*1e6|0),ze={};function Ue(d,b,_,T,Z){if(Array.isArray(b)){for(let ae=0;ae<b.length;ae++)Ue(d,b[ae],_,T,Z);return null}return _=xn(_),d&&d[M]?d.J(b,_,p(T)?!!T.capture:!1,Z):Ge(d,b,_,!1,T,Z)}function Ge(d,b,_,T,Z,ae){if(!b)throw Error("Invalid event type");const Ee=p(Z)?!!Z.capture:!!Z;let tt=gt(d);if(tt||(d[ue]=tt=new we(d)),_=tt.add(b,_,T,Ee,ae),_.proxy)return _;if(T=J(),_.proxy=T,T.src=d,T.listener=_,d.addEventListener)q||(Z=Ee),Z===void 0&&(Z=!1),d.addEventListener(b.toString(),T,Z);else if(d.attachEvent)d.attachEvent(Ve(b.toString()),T);else if(d.addListener&&d.removeListener)d.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function J(){function d(_){return b.call(d.src,d.listener,_)}const b=He;return d}function ve(d,b,_,T,Z){if(Array.isArray(b))for(var ae=0;ae<b.length;ae++)ve(d,b[ae],_,T,Z);else T=p(T)?!!T.capture:!!T,_=xn(_),d&&d[M]?(d=d.i,ae=String(b).toString(),ae in d.g&&(b=d.g[ae],_=Ie(b,_,T,Z),_>-1&&(fe(b[_]),Array.prototype.splice.call(b,_,1),b.length==0&&(delete d.g[ae],d.h--)))):d&&(d=gt(d))&&(b=d.g[b.toString()],d=-1,b&&(d=Ie(b,_,T,Z)),(_=d>-1?b[d]:null)&&Oe(_))}function Oe(d){if(typeof d!="number"&&d&&!d.da){var b=d.src;if(b&&b[M])ye(b.i,d);else{var _=d.type,T=d.proxy;b.removeEventListener?b.removeEventListener(_,T,d.capture):b.detachEvent?b.detachEvent(Ve(_),T):b.addListener&&b.removeListener&&b.removeListener(T),(_=gt(b))?(ye(_,d),_.h==0&&(_.src=null,b[ue]=null)):fe(d)}}}function Ve(d){return d in ze?ze[d]:ze[d]="on"+d}function He(d,b){if(d.da)d=!0;else{b=new F(b,this);const _=d.listener,T=d.ha||d.src;d.fa&&Oe(d),d=_.call(T,b)}return d}function gt(d){return d=d[ue],d instanceof we?d:null}var Fn="__closure_events_fn_"+(Math.random()*1e9>>>0);function xn(d){return typeof d=="function"?d:(d[Fn]||(d[Fn]=function(b){return d.handleEvent(b)}),d[Fn])}function vt(){L.call(this),this.i=new we(this),this.M=this,this.G=null}w(vt,L),vt.prototype[M]=!0,vt.prototype.removeEventListener=function(d,b,_,T){ve(this,d,b,_,T)};function je(d,b){var _,T=d.G;if(T)for(_=[];T;T=T.G)_.push(T);if(d=d.M,T=b.type||b,typeof b=="string")b=new P(b,d);else if(b instanceof P)b.target=b.target||d;else{var Z=b;b=new P(T,d),re(b,Z)}Z=!0;let ae,Ee;if(_)for(Ee=_.length-1;Ee>=0;Ee--)ae=b.g=_[Ee],Z=Be(ae,T,!0,b)&&Z;if(ae=b.g=d,Z=Be(ae,T,!0,b)&&Z,Z=Be(ae,T,!1,b)&&Z,_)for(Ee=0;Ee<_.length;Ee++)ae=b.g=_[Ee],Z=Be(ae,T,!1,b)&&Z}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var d=this.i;for(const b in d.g){const _=d.g[b];for(let T=0;T<_.length;T++)fe(_[T]);delete d.g[b],d.h--}}this.G=null},vt.prototype.J=function(d,b,_,T){return this.i.add(String(d),b,!1,_,T)},vt.prototype.K=function(d,b,_,T){return this.i.add(String(d),b,!0,_,T)};function Be(d,b,_,T){if(b=d.i.g[String(b)],!b)return!0;b=b.concat();let Z=!0;for(let ae=0;ae<b.length;++ae){const Ee=b[ae];if(Ee&&!Ee.da&&Ee.capture==_){const tt=Ee.listener,tn=Ee.ha||Ee.src;Ee.fa&&ye(d.i,Ee),Z=tt.call(tn,T)!==!1&&Z}}return Z&&!T.defaultPrevented}function it(d,b){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:h.setTimeout(d,b||0)}function Lt(d){d.g=it(()=>{d.g=null,d.i&&(d.i=!1,Lt(d))},d.l);const b=d.h;d.h=null,d.m.apply(null,b)}class xt extends L{constructor(b,_){super(),this.m=b,this.l=_,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Lt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lt(d){L.call(this),this.h=d,this.g={}}w(lt,L);var rn=[];function _t(d){Se(d.g,function(b,_){this.g.hasOwnProperty(_)&&Oe(b)},d),d.g={}}lt.prototype.N=function(){lt.Z.N.call(this),_t(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ws=h.JSON.stringify,bn=h.JSON.parse,Vn=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function Ls(){}function Ma(){}var R={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function G(){P.call(this,"d")}w(G,P);function de(){P.call(this,"c")}w(de,P);var ce={},Me=null;function Te(){return Me=Me||new vt}ce.Ia="serverreachability";function Ce(d){P.call(this,ce.Ia,d)}w(Ce,P);function Re(d){const b=Te();je(b,new Ce(b))}ce.STAT_EVENT="statevent";function rt(d,b){P.call(this,ce.STAT_EVENT,d),this.stat=b}w(rt,P);function ot(d){const b=Te();je(b,new rt(b,d))}ce.Ja="timingevent";function $t(d,b){P.call(this,ce.Ja,d),this.size=b}w($t,P);function Gt(d,b){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},b)}function qn(){this.g=!0}qn.prototype.ua=function(){this.g=!1};function na(d,b,_,T,Z,ae){d.info(function(){if(d.g)if(ae){var Ee="",tt=ae.split("&");for(let Et=0;Et<tt.length;Et++){var tn=tt[Et].split("=");if(tn.length>1){const zt=tn[0];tn=tn[1];const Ts=zt.split("_");Ee=Ts.length>=2&&Ts[1]=="type"?Ee+(zt+"="+tn+"&"):Ee+(zt+"=redacted&")}}}else Ee=null;else Ee=ae;return"XMLHTTP REQ ("+T+") [attempt "+Z+"]: "+b+`
`+_+`
`+Ee})}function _n(d,b,_,T,Z,ae,Ee){d.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+Z+"]: "+b+`
`+_+`
`+ae+" "+Ee})}function Hn(d,b,_,T){d.info(function(){return"XMLHTTP TEXT ("+b+"): "+sa(d,_)+(T?" "+T:"")})}function wn(d,b){d.info(function(){return"TIMEOUT: "+b})}qn.prototype.info=function(){};function sa(d,b){if(!d.g)return b;if(!b)return null;try{const ae=JSON.parse(b);if(ae){for(d=0;d<ae.length;d++)if(Array.isArray(ae[d])){var _=ae[d];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var Z=T[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let Ee=1;Ee<T.length;Ee++)T[Ee]=""}}}}return ws(ae)}catch{return b}}var Us={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Oa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},fi;function mi(){}w(mi,Ls),mi.prototype.g=function(){return new XMLHttpRequest},fi=new mi;function Va(d){return encodeURIComponent(String(d))}function vu(d){var b=1;d=d.split(":");const _=[];for(;b>0&&d.length;)_.push(d.shift()),b--;return d.length&&_.push(d.join(":")),_}function Bs(d,b,_,T){this.j=d,this.i=b,this.l=_,this.S=T||1,this.V=new lt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new zs}function zs(){this.i=null,this.g="",this.h=!1}var ln={},Nn={};function aa(d,b,_){d.M=1,d.A=yr(cn(b)),d.u=_,d.R=!0,ml(d,null)}function ml(d,b){d.F=Date.now(),ia(d),d.B=cn(d.A);var _=d.B,T=d.S;Array.isArray(T)||(T=[String(T)]),bl(_.i,"t",T),d.C=0,_=d.j.L,d.h=new zs,d.g=Ou(d.j,_?b:null,!d.u),d.P>0&&(d.O=new xt(x(d.Y,d,d.g),d.P)),b=d.V,_=d.g,T=d.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(rn[0]=Z.toString()),Z=rn);for(let ae=0;ae<Z.length;ae++){const Ee=Ue(_,Z[ae],T||b.handleEvent,!1,b.h||b);if(!Ee)break;b.g[Ee.key]=Ee}b=d.J?O(d.J):{},d.u?(d.v||(d.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,b)):(d.v="GET",d.g.ea(d.B,d.v,null,b)),Re(),na(d.i,d.v,d.B,d.l,d.S,d.u)}Bs.prototype.ba=function(d){d=d.target;const b=this.O;b&&Hs(d)==3?b.j():this.Y(d)},Bs.prototype.Y=function(d){try{if(d==this.g)e:{const tt=Hs(this.g),tn=this.g.ya(),Et=this.g.ca();if(!(tt<3)&&(tt!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||tt!=4||tn==7||(tn==8||Et<=0?Re(3):Re(2)),ra(this);var b=this.g.ca();this.X=b;var _=of(this);if(this.o=b==200,_n(this.i,this.v,this.B,this.l,this.S,tt,b),this.o){if(this.U&&!this.L){t:{if(this.g){var T,Z=this.g;if((T=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(T)){var ae=T;break t}}ae=null}if(d=ae)Hn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,la(this,d);else{this.o=!1,this.m=3,ot(12),rs(this),Ns(this);break e}}if(this.R){d=!0;let zt;for(;!this.K&&this.C<_.length;)if(zt=wu(this,_),zt==Nn){tt==4&&(this.m=4,ot(14),d=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==ln){this.m=4,ot(15),Hn(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Hn(this.i,this.l,zt,null),la(this,zt);if(_u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||_.length!=0||this.h.h||(this.m=1,ot(16),d=!1),this.o=this.o&&d,!d)Hn(this.i,this.l,_,"[Invalid Chunked Response]"),rs(this),Ns(this);else if(_.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),qo(Ee),Ee.P=!0,ot(11))}}else Hn(this.i,this.l,_,null),la(this,_);tt==4&&rs(this),this.o&&!this.K&&(tt==4?ku(this.j,this):(this.o=!1,ia(this)))}else La(this.g),b==400&&_.indexOf("Unknown SID")>0?(this.m=3,ot(12)):(this.m=0,ot(13)),rs(this),Ns(this)}}}catch{}};function of(d){if(!_u(d))return d.g.la();const b=An(d.g);if(b==="")return"";let _="";const T=b.length,Z=Hs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return rs(d),Ns(d),"";d.h.i=new h.TextDecoder}for(let ae=0;ae<T;ae++)d.h.h=!0,_+=d.h.i.decode(b[ae],{stream:!(Z&&ae==T-1)});return b.length=0,d.h.g+=_,d.C=0,d.h.g}function _u(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function wu(d,b){var _=d.C,T=b.indexOf(`
`,_);return T==-1?Nn:(_=Number(b.substring(_,T)),isNaN(_)?ln:(T+=1,T+_>b.length?Nn:(b=b.slice(T,T+_),d.C=T+_,b)))}Bs.prototype.cancel=function(){this.K=!0,rs(this)};function ia(d){d.T=Date.now()+d.H,pl(d,d.H)}function pl(d,b){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Gt(x(d.aa,d),b)}function ra(d){d.D&&(h.clearTimeout(d.D),d.D=null)}Bs.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(wn(this.i,this.B),this.M!=2&&(Re(),ot(17)),rs(this),this.m=2,Ns(this)):pl(this,this.T-d)};function Ns(d){d.j.I==0||d.K||ku(d.j,d)}function rs(d){ra(d);var b=d.O;b&&typeof b.dispose=="function"&&b.dispose(),d.O=null,_t(d.V),d.g&&(b=d.g,d.g=null,b.abort(),b.dispose())}function la(d,b){try{var _=d.j;if(_.I!=0&&(_.g==d||ca(_.h,d))){if(!d.L&&ca(_.h,d)&&_.I==3){try{var T=_.Ba.g.parse(b)}catch{T=null}if(Array.isArray(T)&&T.length==3){var Z=T;if(Z[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)Nl(_),wi(_);else break e;Tr(_),ot(18)}}else _.xa=Z[1],0<_.xa-_.K&&Z[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Gt(x(_.Va,_),6e3));oa(_.h)<=1&&_.ta&&(_.ta=void 0)}else pa(_,11)}else if((d.L||_.g==d)&&Nl(_),!D(b))for(Z=_.Ba.g.parse(b),b=0;b<Z.length;b++){let Et=Z[b];const zt=Et[0];if(!(zt<=_.K))if(_.K=zt,Et=Et[1],_.I==2)if(Et[0]=="c"){_.M=Et[1],_.ba=Et[2];const Ts=Et[3];Ts!=null&&(_.ka=Ts,_.j.info("VER="+_.ka));const ga=Et[4];ga!=null&&(_.za=ga,_.j.info("SVER="+_.za));const $s=Et[5];$s!=null&&typeof $s=="number"&&$s>0&&(T=1.5*$s,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Gs=d.g;if(Gs){const jr=Gs.g?Gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jr){var ae=T.h;ae.g||jr.indexOf("spdy")==-1&&jr.indexOf("quic")==-1&&jr.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(ko(ae,ae.h),ae.h=null))}if(T.G){const El=Gs.g?Gs.g.getResponseHeader("X-HTTP-Session-Id"):null;El&&(T.wa=El,At(T.J,T.G,El))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var Ee=d;if(T.na=Mu(T,T.L?T.ba:null,T.W),Ee.L){Io(T.h,Ee);var tt=Ee,tn=T.O;tn&&(tt.H=tn),tt.D&&(ra(tt),ia(tt)),T.g=Ee}else Cu(T);_.i.length>0&&ma(_)}else Et[0]!="stop"&&Et[0]!="close"||pa(_,7);else _.I==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?pa(_,7):zo(_):Et[0]!="noop"&&_.l&&_.l.qa(Et),_.A=0)}}Re(4)}catch{}}var on=class{constructor(d,b){this.g=d,this.map=b}};function Co(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ro(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function oa(d){return d.h?1:d.g?d.g.size:0}function ca(d,b){return d.h?d.h==b:d.g?d.g.has(b):!1}function ko(d,b){d.g?d.g.add(b):d.h=b}function Io(d,b){d.h&&d.h==b?d.h=null:d.g&&d.g.has(b)&&d.g.delete(b)}Co.prototype.cancel=function(){if(this.i=Do(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Do(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let b=d.i;for(const _ of d.g.values())b=b.concat(_.G);return b}return C(d.i)}var Nu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gl(d,b){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const T=d[_].indexOf("=");let Z,ae=null;T>=0?(Z=d[_].substring(0,T),ae=d[_].substring(T+1)):Z=d[_],b(Z,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function ls(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;d instanceof ls?(this.l=d.l,En(this,d.j),this.o=d.o,this.g=d.g,pi(this,d.u),this.h=d.h,Mo(this,ju(d.i)),this.m=d.m):d&&(b=String(d).match(Nu))?(this.l=!1,En(this,b[1]||"",!0),this.o=ua(b[2]||""),this.g=ua(b[3]||"",!0),pi(this,b[4]),this.h=ua(b[5]||"",!0),Mo(this,b[6]||"",!0),this.m=ua(b[7]||"")):(this.l=!1,this.i=new xi(null,this.l))}ls.prototype.toString=function(){const d=[];var b=this.j;b&&d.push(vr(b,xl,!0),":");var _=this.g;return(_||b=="file")&&(d.push("//"),(b=this.o)&&d.push(vr(b,xl,!0),"@"),d.push(Va(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(vr(_,_.charAt(0)=="/"?Oo:Eu,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",vr(_,Su)),d.join("")},ls.prototype.resolve=function(d){const b=cn(this);let _=!!d.j;_?En(b,d.j):_=!!d.o,_?b.o=d.o:_=!!d.g,_?b.g=d.g:_=d.u!=null;var T=d.h;if(_)pi(b,d.u);else if(_=!!d.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var Z=b.h.lastIndexOf("/");Z!=-1&&(T=b.h.slice(0,Z+1)+T)}if(Z=T,Z==".."||Z==".")T="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){T=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const ae=[];for(let Ee=0;Ee<Z.length;){const tt=Z[Ee++];tt=="."?T&&Ee==Z.length&&ae.push(""):tt==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),T&&Ee==Z.length&&ae.push("")):(ae.push(tt),T=!0)}T=ae.join("/")}else T=Z}return _?b.h=T:_=d.i.toString()!=="",_?Mo(b,ju(d.i)):_=!!d.m,_&&(b.m=d.m),b};function cn(d){return new ls(d)}function En(d,b,_){d.j=_?ua(b,!0):b,d.j&&(d.j=d.j.replace(/:$/,""))}function pi(d,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);d.u=b}else d.u=null}function Mo(d,b,_){b instanceof xi?(d.i=b,yl(d.i,d.l)):(_||(b=vr(b,gi)),d.i=new xi(b,d.l))}function At(d,b,_){d.i.set(b,_)}function yr(d){return At(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function ua(d,b){return d?b?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function vr(d,b,_){return typeof d=="string"?(d=encodeURI(d).replace(b,Kn),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Kn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var xl=/[#\/\?@]/g,Eu=/[#\?:]/g,Oo=/[#\?]/g,gi=/[#\?@]/g,Su=/#/g;function xi(d,b){this.h=this.g=null,this.i=d||null,this.j=!!b}function Qn(d){d.g||(d.g=new Map,d.h=0,d.i&&gl(d.i,function(b,_){d.add(decodeURIComponent(b.replace(/\+/g," ")),_)}))}s=xi.prototype,s.add=function(d,b){Qn(this),this.i=null,d=bi(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(b),this.h+=1,this};function Tu(d,b){Qn(d),b=bi(d,b),d.g.has(b)&&(d.i=null,d.h-=d.g.get(b).length,d.g.delete(b))}function Vo(d,b){return Qn(d),b=bi(d,b),d.g.has(b)}s.forEach=function(d,b){Qn(this),this.g.forEach(function(_,T){_.forEach(function(Z){d.call(b,Z,T,this)},this)},this)};function Po(d,b){Qn(d);let _=[];if(typeof b=="string")Vo(d,b)&&(_=_.concat(d.g.get(bi(d,b))));else for(d=Array.from(d.g.values()),b=0;b<d.length;b++)_=_.concat(d[b]);return _}s.set=function(d,b){return Qn(this),this.i=null,d=bi(this,d),Vo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[b]),this.h+=1,this},s.get=function(d,b){return d?(d=Po(this,d),d.length>0?String(d[0]):b):b};function bl(d,b,_){Tu(d,b),_.length>0&&(d.i=null,d.g.set(bi(d,b),C(_)),d.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],b=Array.from(this.g.keys());for(let T=0;T<b.length;T++){var _=b[T];const Z=Va(_);_=Po(this,_);for(let ae=0;ae<_.length;ae++){let Ee=Z;_[ae]!==""&&(Ee+="="+Va(_[ae])),d.push(Ee)}}return this.i=d.join("&")};function ju(d){const b=new xi;return b.i=d.i,d.g&&(b.g=new Map(d.g),b.h=d.h),b}function bi(d,b){return b=String(b),d.j&&(b=b.toLowerCase()),b}function yl(d,b){b&&!d.j&&(Qn(d),d.i=null,d.g.forEach(function(_,T){const Z=T.toLowerCase();T!=Z&&(Tu(this,T),bl(this,Z,_))},d)),d.j=b}function Fs(d,b){const _=new qn;if(h.Image){const T=new Image;T.onload=y(Es,_,"TestLoadImage: loaded",!0,b,T),T.onerror=y(Es,_,"TestLoadImage: error",!1,b,T),T.onabort=y(Es,_,"TestLoadImage: abort",!1,b,T),T.ontimeout=y(Es,_,"TestLoadImage: timeout",!1,b,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=d}else b(!1)}function Lo(d,b){const _=new qn,T=new AbortController,Z=setTimeout(()=>{T.abort(),Es(_,"TestPingServer: timeout",!1,b)},1e4);fetch(d,{signal:T.signal}).then(ae=>{clearTimeout(Z),ae.ok?Es(_,"TestPingServer: ok",!0,b):Es(_,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Z),Es(_,"TestPingServer: error",!1,b)})}function Es(d,b,_,T,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),T(_)}catch{}}function yi(){this.g=new Vn}function da(d){this.i=d.Sb||null,this.h=d.ab||!1}w(da,Ls),da.prototype.g=function(){return new _r(this.i,this.h)};function _r(d,b){vt.call(this),this.H=d,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(_r,vt),s=_r.prototype,s.open=function(d,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=b,this.readyState=1,qs(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(b.body=d),(this.H||h).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,qs(this)),this.g&&(this.readyState=3,qs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vl(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function vl(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var b=d.value?d.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!d.done}))&&(this.response=this.responseText+=b)}d.done?vi(this):qs(this),this.readyState==3&&vl(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,vi(this))},s.Na=function(d){this.g&&(this.response=d,vi(this))},s.ga=function(){this.g&&vi(this)};function vi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,qs(d)}s.setRequestHeader=function(d,b){this.A.append(d,b)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],b=this.h.entries();for(var _=b.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=b.next();return d.join(`\r
`)};function qs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(_r.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ss(d){let b="";return Se(d,function(_,T){b+=T,b+=":",b+=_,b+=`\r
`}),b}function wr(d,b,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=Ss(_),typeof d=="string"?_!=null&&Va(_):At(d,b,_))}function kt(d){vt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(kt,vt);var ha=/^https?$/i,Uo=["POST","PUT"];s=kt.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,b,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);b=b?b.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():fi.g(),this.g.onreadystatechange=S(x(this.Ca,this));try{this.B=!0,this.g.open(b,String(d),!0),this.B=!1}catch(ae){Nr(this,ae);return}if(d=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var Z in T)_.set(Z,T[Z]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const ae of T.keys())_.set(ae,T.get(ae));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(ae=>ae.toLowerCase()=="content-type"),Z=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Uo,b,void 0)>=0)||T||Z||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,Ee]of _)this.g.setRequestHeader(ae,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(ae){Nr(this,ae)}};function Nr(d,b){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=b,d.o=5,Bo(d),Pa(d)}function Bo(d){d.A||(d.A=!0,je(d,"complete"),je(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,je(this,"complete"),je(this,"abort"),Pa(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pa(this,!0)),kt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Er(this):this.Xa())},s.Xa=function(){Er(this)};function Er(d){if(d.h&&typeof u<"u"){if(d.v&&Hs(d)==4)setTimeout(d.Ca.bind(d),0);else if(je(d,"readystatechange"),Hs(d)==4){d.h=!1;try{const ae=d.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var _;if(!(_=b)){var T;if(T=ae===0){let Ee=String(d.D).match(Nu)[1]||null;!Ee&&h.self&&h.self.location&&(Ee=h.self.location.protocol.slice(0,-1)),T=!ha.test(Ee?Ee.toLowerCase():"")}_=T}if(_)je(d,"complete"),je(d,"success");else{d.o=6;try{var Z=Hs(d)>2?d.g.statusText:""}catch{Z=""}d.l=Z+" ["+d.ca()+"]",Bo(d)}}finally{Pa(d)}}}}function Pa(d,b){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,b||je(d,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Hs(d){return d.g?d.g.readyState:0}s.ca=function(){try{return Hs(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var b=this.g.responseText;return d&&b.indexOf(d)==0&&(b=b.substring(d.length)),bn(b)}};function An(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function La(d){const b={};d=(d.g&&Hs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<d.length;T++){if(D(d[T]))continue;var _=vu(d[T]);const Z=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ae=b[Z]||[];b[Z]=ae,ae.push(_)}_e(b,function(T){return T.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fa(d,b,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||b}function _i(d){this.za=0,this.i=[],this.j=new qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fa("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fa("baseRetryDelayMs",5e3,d),this.Za=fa("retryDelaySeedMs",1e4,d),this.Ta=fa("forwardChannelMaxRetries",2,d),this.va=fa("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Co(d&&d.concurrentRequestLimit),this.Ba=new yi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=_i.prototype,s.ka=8,s.I=1,s.connect=function(d,b,_,T){ot(0),this.W=d,this.H=b||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Mu(this,null,this.W),ma(this)};function zo(d){if(_l(d),d.I==3){var b=d.V++,_=cn(d.J);if(At(_,"SID",d.M),At(_,"RID",b),At(_,"TYPE","terminate"),Sr(d,_),b=new Bs(d,d.j,b),b.M=2,b.A=yr(cn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(b.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=b.A,_=!0),_||(b.g=Ou(b.j,null),b.g.ea(b.A)),b.F=Date.now(),ia(b)}Du(d)}function wi(d){d.g&&(qo(d),d.g.cancel(),d.g=null)}function _l(d){wi(d),d.v&&(h.clearTimeout(d.v),d.v=null),Nl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function ma(d){if(!Ro(d.h)&&!d.m){d.m=!0;var b=d.Ea;ge||j(),oe||(ge(),oe=!0),A.add(b,d),d.D=0}}function wl(d,b){return oa(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=b.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Gt(x(d.Ea,d,b),Iu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const Z=new Bs(this,this.j,d);let ae=this.o;if(this.U&&(ae?(ae=O(ae),re(ae,this.U)):ae=this.U),this.u!==null||this.R||(Z.J=ae,ae=null),this.S)e:{for(var b=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(b+=T,b>4096){b=_;break e}if(b===4096||_===this.i.length-1){b=_+1;break e}}b=1e3}else b=1e3;b=Au(this,Z,b),_=cn(this.J),At(_,"RID",d),At(_,"CVER",22),this.G&&At(_,"X-HTTP-Session-Id",this.G),Sr(this,_),ae&&(this.R?b="headers="+Va(Ss(ae))+"&"+b:this.u&&wr(_,this.u,ae)),ko(this.h,Z),this.Ra&&At(_,"TYPE","init"),this.S?(At(_,"$req",b),At(_,"SID","null"),Z.U=!0,aa(Z,_,null)):aa(Z,_,b),this.I=2}}else this.I==3&&(d?Fo(this,d):this.i.length==0||Ro(this.h)||Fo(this))};function Fo(d,b){var _;b?_=b.l:_=d.V++;const T=cn(d.J);At(T,"SID",d.M),At(T,"RID",_),At(T,"AID",d.K),Sr(d,T),d.u&&d.o&&wr(T,d.u,d.o),_=new Bs(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),b&&(d.i=b.G.concat(d.i)),b=Au(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),ko(d.h,_),aa(_,T,b)}function Sr(d,b){d.H&&Se(d.H,function(_,T){At(b,T,_)}),d.l&&Se({},function(_,T){At(b,T,_)})}function Au(d,b,_){_=Math.min(d.i.length,_);const T=d.l?x(d.l.Ka,d.l,d):null;e:{var Z=d.i;let tt=-1;for(;;){const tn=["count="+_];tt==-1?_>0?(tt=Z[0].g,tn.push("ofs="+tt)):tt=0:tn.push("ofs="+tt);let Et=!0;for(let zt=0;zt<_;zt++){var ae=Z[zt].g;const Ts=Z[zt].map;if(ae-=tt,ae<0)tt=Math.max(0,Z[zt].g-100),Et=!1;else try{ae="req"+ae+"_"||"";try{var Ee=Ts instanceof Map?Ts:Object.entries(Ts);for(const[ga,$s]of Ee){let Gs=$s;p($s)&&(Gs=ws($s)),tn.push(ae+ga+"="+encodeURIComponent(Gs))}}catch(ga){throw tn.push(ae+"type="+encodeURIComponent("_badmap")),ga}}catch{T&&T(Ts)}}if(Et){Ee=tn.join("&");break e}}Ee=void 0}return d=d.i.splice(0,_),b.G=d,Ee}function Cu(d){if(!d.g&&!d.v){d.Y=1;var b=d.Da;ge||j(),oe||(ge(),oe=!0),A.add(b,d),d.A=0}}function Tr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Gt(x(d.Da,d),Iu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Ru(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Gt(x(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ot(10),wi(this),Ru(this))};function qo(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Ru(d){d.g=new Bs(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var b=cn(d.na);At(b,"RID","rpc"),At(b,"SID",d.M),At(b,"AID",d.K),At(b,"CI",d.F?"0":"1"),!d.F&&d.ia&&At(b,"TO",d.ia),At(b,"TYPE","xmlhttp"),Sr(d,b),d.u&&d.o&&wr(b,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=yr(cn(b)),_.u=null,_.R=!0,ml(_,d)}s.Va=function(){this.C!=null&&(this.C=null,wi(this),Tr(this),ot(19))};function Nl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function ku(d,b){var _=null;if(d.g==b){Nl(d),qo(d),d.g=null;var T=2}else if(ca(d.h,b))_=b.G,Io(d.h,b),T=1;else return;if(d.I!=0){if(b.o)if(T==1){_=b.u?b.u.length:0,b=Date.now()-b.F;var Z=d.D;T=Te(),je(T,new $t(T,_)),ma(d)}else Cu(d);else if(Z=b.m,Z==3||Z==0&&b.X>0||!(T==1&&wl(d,b)||T==2&&Tr(d)))switch(_&&_.length>0&&(b=d.h,b.i=b.i.concat(_)),Z){case 1:pa(d,5);break;case 4:pa(d,10);break;case 3:pa(d,6);break;default:pa(d,2)}}}function Iu(d,b){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*b}function pa(d,b){if(d.j.info("Error code "+b),b==2){var _=x(d.bb,d),T=d.Ua;const Z=!T;T=new ls(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||En(T,"https"),yr(T),Z?Fs(T.toString(),_):Lo(T.toString(),_)}else ot(2);d.I=0,d.l&&d.l.pa(b),Du(d),_l(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function Du(d){if(d.I=0,d.ja=[],d.l){const b=Do(d.h);(b.length!=0||d.i.length!=0)&&(H(d.ja,b),H(d.ja,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.oa()}}function Mu(d,b,_){var T=_ instanceof ls?cn(_):new ls(_);if(T.g!="")b&&(T.g=b+"."+T.g),pi(T,T.u);else{var Z=h.location;T=Z.protocol,b=b?b+"."+Z.hostname:Z.hostname,Z=+Z.port;const ae=new ls(null);T&&En(ae,T),b&&(ae.g=b),Z&&pi(ae,Z),_&&(ae.h=_),T=ae}return _=d.G,b=d.wa,_&&b&&At(T,_,b),At(T,"VER",d.ka),Sr(d,T),T}function Ou(d,b,_){if(b&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=d.Aa&&!d.ma?new kt(new da({ab:_})):new kt(d.ma),b.Fa(d.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vu(){}s=Vu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ni(){}Ni.prototype.g=function(d,b){return new $n(d,b)};function $n(d,b){vt.call(this),this.g=new _i(b),this.l=d,this.h=b&&b.messageUrlParams||null,d=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(d?d["X-WebChannel-Content-Type"]=b.messageContentType:d={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(d?d["X-WebChannel-Client-Profile"]=b.sa:d={"X-WebChannel-Client-Profile":b.sa}),this.g.U=d,(d=b&&b.Qb)&&!D(d)&&(this.g.u=d),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!D(b)&&(this.g.G=b,d=this.h,d!==null&&b in d&&(d=this.h,b in d&&delete d[b])),this.j=new Ua(this)}w($n,vt),$n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){zo(this.g)},$n.prototype.o=function(d){var b=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=ws(d),d=_);b.i.push(new on(b.Ya++,d)),b.I==3&&ma(b)},$n.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,$n.Z.N.call(this)};function Pu(d){G.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var b=d.__sm__;if(b){e:{for(const _ in b){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,b=b!==null&&d in b?b[d]:void 0),this.data=b}else this.data=d}w(Pu,G);function Lu(){de.call(this),this.status=1}w(Lu,de);function Ua(d){this.g=d}w(Ua,Vu),Ua.prototype.ra=function(){je(this.g,"a")},Ua.prototype.qa=function(d){je(this.g,new Pu(d))},Ua.prototype.pa=function(d){je(this.g,new Lu)},Ua.prototype.oa=function(){je(this.g,"b")},Ni.prototype.createWebChannel=Ni.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,T1=function(){return new Ni},S1=function(){return Te()},E1=ce,$p={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Us.NO_ERROR=0,Us.TIMEOUT=8,Us.HTTP_ERROR=6,ih=Us,Oa.COMPLETE="complete",N1=Oa,Ma.EventType=R,R.OPEN="a",R.CLOSE="b",R.ERROR="c",R.MESSAGE="d",vt.prototype.listen=vt.prototype.J,Mc=Ma,kt.prototype.listenOnce=kt.prototype.K,kt.prototype.getLastError=kt.prototype.Ha,kt.prototype.getLastErrorCode=kt.prototype.ya,kt.prototype.getStatus=kt.prototype.ca,kt.prototype.getResponseJson=kt.prototype.La,kt.prototype.getResponseText=kt.prototype.la,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Fa,w1=kt}).apply(typeof Hd<"u"?Hd:typeof self<"u"?self:typeof window<"u"?window:{});let Un=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Un.UNAUTHENTICATED=new Un(null),Un.GOOGLE_CREDENTIALS=new Un("google-credentials-uid"),Un.FIRST_PARTY=new Un("first-party-uid"),Un.MOCK_USER=new Un("mock-user");let So="12.8.0";function $C(s){So=s}const tl=new Eg("@firebase/firestore");function eo(){return tl.logLevel}function ke(s,...e){if(tl.logLevel<=ft.DEBUG){const n=e.map(Og);tl.debug(`Firestore (${So}): ${s}`,...n)}}function ci(s,...e){if(tl.logLevel<=ft.ERROR){const n=e.map(Og);tl.error(`Firestore (${So}): ${s}`,...n)}}function fo(s,...e){if(tl.logLevel<=ft.WARN){const n=e.map(Og);tl.warn(`Firestore (${So}): ${s}`,...n)}}function Og(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function Ke(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,j1(s,i,n)}function j1(s,e,n){let i=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ci(i),new Error(i)}function jt(s,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||j1(e,o,i)}function Ze(s,e){return s}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Da{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ii{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class A1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Un.UNAUTHENTICATED)))}shutdown(){}}class YC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class KC{constructor(e){this.t=e,this.currentUser=Un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){jt(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ii,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ii)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(jt(typeof i.accessToken=="string",31837,{l:i}),new A1(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jt(e===null||typeof e=="string",2055,{h:e}),new Un(e)}}class QC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Un.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class WC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new QC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ps(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){jt(this.o===void 0,3512);const i=u=>{u.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(jt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function JC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class Vg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=JC(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}}function mt(s,e){return s<e?-1:s>e?1:0}function Gp(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const o=s.charAt(i),u=e.charAt(i);if(o!==u)return bp(o)===bp(u)?mt(o,u):bp(o)?1:-1}return mt(s.length,e.length)}const ZC=55296,eR=57343;function bp(s){const e=s.charCodeAt(0);return e>=ZC&&e<=eR}function mo(s,e,n){return s.length===e.length&&s.every(((i,o)=>n(i,e[o])))}const Fv="__name__";class _a{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ke(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ke(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return _a.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _a?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const u=_a.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return mt(e.length,n.length)}static compareSegments(e,n){const i=_a.isNumericId(e),o=_a.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?_a.extractNumericId(e).compare(_a.extractNumericId(n)):Gp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return tr.fromString(e.substring(4,e.length-2))}}class Pt extends _a{construct(e,n,i){return new Pt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ae(pe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new Pt(n)}static emptyPath(){return new Pt([])}}const tR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends _a{construct(e,n,i){return new Mn(e,n,i)}static isValidIdentifier(e){return tR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Fv}static keyField(){return new Mn([Fv])}static fromServerFormat(e){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new Ae(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Ae(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ae(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(i+=p,o++):(u(),o++)}if(u(),h)throw new Ae(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(n)}static emptyPath(){return new Mn([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Pt.fromString(e))}static fromName(e){return new qe(Pt.fromString(e).popFirst(5))}static empty(){return new qe(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Pt(e.slice()))}}function C1(s,e,n){if(!n)throw new Ae(pe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function nR(s,e,n,i){if(e===!0&&i===!0)throw new Ae(pe.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function qv(s){if(!qe.isDocumentKey(s))throw new Ae(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Hv(s){if(qe.isDocumentKey(s))throw new Ae(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function R1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Bh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ke(12329,{type:typeof s})}function as(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ae(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bh(s);throw new Ae(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function gn(s,e){const n={typeString:s};return e&&(n.value=e),n}function fu(s,e){if(!R1(s))throw new Ae(pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const h=s[i];if(o&&typeof h!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Ae(pe.INVALID_ARGUMENT,n);return!0}const $v=-62135596800,Gv=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Gv);return new Tt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ae(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ae(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<$v)throw new Ae(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gv}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fu(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-$v;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:gn("string",Tt._jsonSchemaVersion),seconds:gn("number"),nanoseconds:gn("number")};class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new Tt(0,0))}static max(){return new We(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Xc=-1;function sR(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=We.fromTimestamp(i===1e9?new Tt(n+1,0):new Tt(n,i));return new rr(o,qe.empty(),e)}function aR(s){return new rr(s.readTime,s.key,Xc)}class rr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new rr(We.min(),qe.empty(),Xc)}static max(){return new rr(We.max(),qe.empty(),Xc)}}function iR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=qe.comparator(s.documentKey,e.documentKey),n!==0?n:mt(s.largestBatchId,e.largestBatchId))}const rR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function To(s){if(s.code!==pe.FAILED_PRECONDITION||s.message!==rR)throw s;ke("LocalStore","Unexpectedly lost primary lease")}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.reject(n)}static resolve(e){return new xe(((n,i)=>{n(e)}))}static reject(e){return new xe(((n,i)=>{i(e)}))}static waitFor(e){return new xe(((n,i)=>{let o=0,u=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++u,h&&u===o&&n()}),(g=>i(g)))})),h=!0,u===o&&n()}))}static or(e){let n=xe.resolve(!1);for(const i of e)n=n.next((o=>o?xe.resolve(o):i()));return n}static forEach(e,n){const i=[];return e.forEach(((o,u)=>{i.push(n.call(this,o,u))})),this.waitFor(i)}static mapArray(e,n){return new xe(((i,o)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const x=g;n(e[x]).next((y=>{h[x]=y,++p,p===u&&i(h)}),(y=>o(y)))}}))}static doWhile(e,n){return new xe(((i,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):i()};u()}))}}function oR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jo(s){return s.name==="IndexedDbTransactionError"}class zh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zh.ce=-1;const Pg=-1;function Fh(s){return s==null}function vh(s){return s===0&&1/s==-1/0}function cR(s){return typeof s=="number"&&Number.isInteger(s)&&!vh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const k1="";function uR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Yv(e)),e=dR(s.get(n),e);return Yv(e)}function dR(s,e){let n=e;const i=s.length;for(let o=0;o<i;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case k1:n+="";break;default:n+=u}}return n}function Yv(s){return s+k1+""}function Kv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function xr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function I1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Yt{constructor(e,n){this.comparator=e,this.root=n||Dn.EMPTY}insert(e,n){return new Yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $d(this.root,e,this.comparator,!1)}getReverseIterator(){return new $d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $d(this.root,e,this.comparator,!0)}}class $d{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??Dn.RED,this.left=o??Dn.EMPTY,this.right=u??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new Dn(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Dn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ke(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke(57766)}get value(){throw Ke(16141)}get color(){throw Ke(16727)}get left(){throw Ke(29726)}get right(){throw Ke(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new Dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new vn(this.comparator);return n.data=e,n}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gs{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new gs([])}unionWith(e){let n=new vn(Mn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new gs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mo(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class D1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class On{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new D1("Invalid base64 string: "+u):u}})(e);return new On(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new On(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const hR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(s){if(jt(!!s,39018),typeof s=="string"){let e=0;const n=hR.exec(s);if(jt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:an(s.seconds),nanos:an(s.nanos)}}function an(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function or(s){return typeof s=="string"?On.fromBase64String(s):On.fromUint8Array(s)}const M1="server_timestamp",O1="__type__",V1="__previous_value__",P1="__local_write_time__";function Lg(s){return(s?.mapValue?.fields||{})[O1]?.stringValue===M1}function qh(s){const e=s.mapValue.fields[V1];return Lg(e)?qh(e):e}function Jc(s){const e=lr(s.mapValue.fields[P1].timestampValue);return new Tt(e.seconds,e.nanos)}class fR{constructor(e,n,i,o,u,h,p,g,x,y,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=y,this.apiKey=w}}const _h="(default)";class Zc{constructor(e,n){this.projectId=e,this.database=n||_h}static empty(){return new Zc("","")}get isDefaultDatabase(){return this.database===_h}isEqual(e){return e instanceof Zc&&e.projectId===this.projectId&&e.database===this.database}}function mR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ae(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(s.options.projectId,e)}const L1="__type__",pR="__max__",Gd={mapValue:{}},U1="__vector__",wh="value";function cr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Lg(s)?4:xR(s)?9007199254740991:gR(s)?10:11:Ke(28295,{value:s})}function ka(s,e){if(s===e)return!0;const n=cr(s);if(n!==cr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Jc(s).isEqual(Jc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=lr(o.timestampValue),p=lr(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return or(o.bytesValue).isEqual(or(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return an(o.geoPointValue.latitude)===an(u.geoPointValue.latitude)&&an(o.geoPointValue.longitude)===an(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return an(o.integerValue)===an(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=an(o.doubleValue),p=an(u.doubleValue);return h===p?vh(h)===vh(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return mo(s.arrayValue.values||[],e.arrayValue.values||[],ka);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},p=u.mapValue.fields||{};if(Kv(h)!==Kv(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!ka(h[g],p[g])))return!1;return!0})(s,e);default:return Ke(52216,{left:s})}}function eu(s,e){return(s.values||[]).find((n=>ka(n,e)))!==void 0}function po(s,e){if(s===e)return 0;const n=cr(s),i=cr(e);if(n!==i)return mt(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return mt(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=an(u.integerValue||u.doubleValue),g=an(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return Wv(s.timestampValue,e.timestampValue);case 4:return Wv(Jc(s),Jc(e));case 5:return Gp(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=or(u),g=or(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let x=0;x<p.length&&x<g.length;x++){const y=mt(p[x],g[x]);if(y!==0)return y}return mt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=mt(an(u.latitude),an(h.latitude));return p!==0?p:mt(an(u.longitude),an(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Xv(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},x=p[wh]?.arrayValue,y=g[wh]?.arrayValue,w=mt(x?.values?.length||0,y?.values?.length||0);return w!==0?w:Xv(x,y)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Gd.mapValue&&h===Gd.mapValue)return 0;if(u===Gd.mapValue)return 1;if(h===Gd.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),x=h.fields||{},y=Object.keys(x);g.sort(),y.sort();for(let w=0;w<g.length&&w<y.length;++w){const S=Gp(g[w],y[w]);if(S!==0)return S;const C=po(p[g[w]],x[y[w]]);if(C!==0)return C}return mt(g.length,y.length)})(s.mapValue,e.mapValue);default:throw Ke(23264,{he:n})}}function Wv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return mt(s,e);const n=lr(s),i=lr(e),o=mt(n.seconds,i.seconds);return o!==0?o:mt(n.nanos,i.nanos)}function Xv(s,e){const n=s.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=po(n[o],i[o]);if(u)return u}return mt(n.length,i.length)}function go(s){return Yp(s)}function Yp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=lr(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return or(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return qe.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=Yp(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of i)u?u=!1:o+=",",o+=`${h}:${Yp(n.fields[h])}`;return o+"}"})(s.mapValue):Ke(61005,{value:s})}function rh(s){switch(cr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qh(s);return e?16+rh(e):16;case 5:return 2*s.stringValue.length;case 6:return or(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+rh(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return xr(i.fields,((u,h)=>{o+=u.length+rh(h)})),o})(s.mapValue);default:throw Ke(13486,{value:s})}}function Jv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Kp(s){return!!s&&"integerValue"in s}function Ug(s){return!!s&&"arrayValue"in s}function Zv(s){return!!s&&"nullValue"in s}function e_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function lh(s){return!!s&&"mapValue"in s}function gR(s){return(s?.mapValue?.fields||{})[L1]?.stringValue===U1}function zc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return xr(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=zc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zc(s.arrayValue.values[n]);return e}return{...s}}function xR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===pR}class ns{constructor(e){this.value=e}static empty(){return new ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zc(n)}setAll(e){let n=Mn.emptyPath(),i={},o=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,o),i={},o=[],n=p.popLast()}h?i[p.lastSegment()]=zc(h):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(e){const n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ka(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){xr(n,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new ns(zc(this.value))}}function B1(s){const e=[];return xr(s.fields,((n,i)=>{const o=new Mn([n]);if(lh(i)){const u=B1(i.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new gs(e)}class Bn{constructor(e,n,i,o,u,h,p){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Bn(e,0,We.min(),We.min(),We.min(),ns.empty(),0)}static newFoundDocument(e,n,i,o){return new Bn(e,1,n,We.min(),i,o,0)}static newNoDocument(e,n){return new Bn(e,2,n,We.min(),We.min(),ns.empty(),0)}static newUnknownDocument(e,n){return new Bn(e,3,n,We.min(),We.min(),ns.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Nh{constructor(e,n){this.position=e,this.inclusive=n}}function t_(s,e,n){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?i=qe.comparator(qe.fromName(h.referenceValue),n.key):i=po(h,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function n_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ka(s.position[n],e.position[n]))return!1;return!0}class Eh{constructor(e,n="asc"){this.field=e,this.dir=n}}function bR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class z1{}class pn extends z1{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new vR(e,n,i):n==="array-contains"?new NR(e,i):n==="in"?new ER(e,i):n==="not-in"?new SR(e,i):n==="array-contains-any"?new TR(e,i):new pn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new _R(e,i):new wR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(po(n,this.value)):n!==null&&cr(this.value)===cr(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ea extends z1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ea(e,n)}matches(e){return F1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function F1(s){return s.op==="and"}function q1(s){return yR(s)&&F1(s)}function yR(s){for(const e of s.filters)if(e instanceof ea)return!1;return!0}function Qp(s){if(s instanceof pn)return s.field.canonicalString()+s.op.toString()+go(s.value);if(q1(s))return s.filters.map((e=>Qp(e))).join(",");{const e=s.filters.map((n=>Qp(n))).join(",");return`${s.op}(${e})`}}function H1(s,e){return s instanceof pn?(function(i,o){return o instanceof pn&&i.op===o.op&&i.field.isEqual(o.field)&&ka(i.value,o.value)})(s,e):s instanceof ea?(function(i,o){return o instanceof ea&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,h,p)=>u&&H1(h,o.filters[p])),!0):!1})(s,e):void Ke(19439)}function $1(s){return s instanceof pn?(function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`})(s):s instanceof ea?(function(n){return n.op.toString()+" {"+n.getFilters().map($1).join(" ,")+"}"})(s):"Filter"}class vR extends pn{constructor(e,n,i){super(e,n,i),this.key=qe.fromName(i.referenceValue)}matches(e){const n=qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class _R extends pn{constructor(e,n){super(e,"in",n),this.keys=G1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class wR extends pn{constructor(e,n){super(e,"not-in",n),this.keys=G1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function G1(s,e){return(e.arrayValue?.values||[]).map((n=>qe.fromName(n.referenceValue)))}class NR extends pn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ug(n)&&eu(n.arrayValue,this.value)}}class ER extends pn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&eu(this.value.arrayValue,n)}}class SR extends pn{constructor(e,n){super(e,"not-in",n)}matches(e){if(eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!eu(this.value.arrayValue,n)}}class TR extends pn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ug(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>eu(this.value.arrayValue,i)))}}class jR{constructor(e,n=null,i=[],o=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function s_(s,e=null,n=[],i=[],o=null,u=null,h=null){return new jR(s,e,n,i,o,u,h)}function Bg(s){const e=Ze(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Qp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Fh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>go(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>go(i))).join(",")),e.Te=n}return e.Te}function zg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!bR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!H1(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!n_(s.startAt,e.startAt)&&n_(s.endAt,e.endAt)}function Wp(s){return qe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class mu{constructor(e,n=null,i=[],o=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function AR(s,e,n,i,o,u,h,p){return new mu(s,e,n,i,o,u,h,p)}function Hh(s){return new mu(s)}function a_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function CR(s){return qe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Y1(s){return s.collectionGroup!==null}function Fc(s){const e=Ze(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new vn(Mn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Eh(u,i))})),n.has(Mn.keyField().canonicalString())||e.Ie.push(new Eh(Mn.keyField(),i))}return e.Ie}function ja(s){const e=Ze(s);return e.Ee||(e.Ee=RR(e,Fc(s))),e.Ee}function RR(s,e){if(s.limitType==="F")return s_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Eh(o.field,u)}));const n=s.endAt?new Nh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Nh(s.startAt.position,s.startAt.inclusive):null;return s_(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Xp(s,e){const n=s.filters.concat([e]);return new mu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Jp(s,e,n){return new mu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function $h(s,e){return zg(ja(s),ja(e))&&s.limitType===e.limitType}function K1(s){return`${Bg(ja(s))}|lt:${s.limitType}`}function to(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>$1(o))).join(", ")}]`),Fh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>go(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>go(o))).join(",")),`Target(${i})`})(ja(s))}; limitType=${s.limitType})`}function Gh(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):qe.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of Fc(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(h,p,g){const x=t_(h,p,g);return h.inclusive?x<=0:x<0})(i.startAt,Fc(i),o)||i.endAt&&!(function(h,p,g){const x=t_(h,p,g);return h.inclusive?x>=0:x>0})(i.endAt,Fc(i),o))})(s,e)}function kR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Q1(s){return(e,n)=>{let i=!1;for(const o of Fc(s)){const u=IR(o,e,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function IR(s,e,n){const i=s.field.isKeyField()?qe.comparator(e.key,n.key):(function(u,h,p){const g=h.data.field(u),x=p.data.field(u);return g!==null&&x!==null?po(g,x):Ke(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ke(19790,{direction:s.dir})}}class dl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){xr(this.inner,((n,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return I1(this.inner)}size(){return this.innerSize}}const DR=new Yt(qe.comparator);function ui(){return DR}const W1=new Yt(qe.comparator);function Oc(...s){let e=W1;for(const n of s)e=e.insert(n.key,n);return e}function X1(s){let e=W1;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Yr(){return qc()}function J1(){return qc()}function qc(){return new dl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const MR=new Yt(qe.comparator),OR=new vn(qe.comparator);function pt(...s){let e=OR;for(const n of s)e=e.add(n);return e}const VR=new vn(mt);function PR(){return VR}function Fg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vh(e)?"-0":e}}function Z1(s){return{integerValue:""+s}}function LR(s,e){return cR(e)?Z1(e):Fg(s,e)}class Yh{constructor(){this._=void 0}}function UR(s,e,n){return s instanceof tu?(function(o,u){const h={fields:{[O1]:{stringValue:M1},[P1]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Lg(u)&&(u=qh(u)),u&&(h.fields[V1]=u),{mapValue:h}})(n,e):s instanceof nu?tN(s,e):s instanceof su?nN(s,e):(function(o,u){const h=eN(o,u),p=i_(h)+i_(o.Ae);return Kp(h)&&Kp(o.Ae)?Z1(p):Fg(o.serializer,p)})(s,e)}function BR(s,e,n){return s instanceof nu?tN(s,e):s instanceof su?nN(s,e):n}function eN(s,e){return s instanceof Sh?(function(i){return Kp(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class tu extends Yh{}class nu extends Yh{constructor(e){super(),this.elements=e}}function tN(s,e){const n=sN(e);for(const i of s.elements)n.some((o=>ka(o,i)))||n.push(i);return{arrayValue:{values:n}}}class su extends Yh{constructor(e){super(),this.elements=e}}function nN(s,e){let n=sN(e);for(const i of s.elements)n=n.filter((o=>!ka(o,i)));return{arrayValue:{values:n}}}class Sh extends Yh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function i_(s){return an(s.integerValue||s.doubleValue)}function sN(s){return Ug(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class zR{constructor(e,n){this.field=e,this.transform=n}}function FR(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof nu&&o instanceof nu||i instanceof su&&o instanceof su?mo(i.elements,o.elements,ka):i instanceof Sh&&o instanceof Sh?ka(i.Ae,o.Ae):i instanceof tu&&o instanceof tu})(s.transform,e.transform)}class qR{constructor(e,n){this.version=e,this.transformResults=n}}class Vs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vs}static exists(e){return new Vs(void 0,e)}static updateTime(e){return new Vs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Kh{}function aN(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new qg(s.key,Vs.none()):new pu(s.key,s.data,Vs.none());{const n=s.data,i=ns.empty();let o=new vn(Mn.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?i.delete(u):i.set(u,h),o=o.add(u)}return new br(s.key,i,new gs(o.toArray()),Vs.none())}}function HR(s,e,n){s instanceof pu?(function(o,u,h){const p=o.value.clone(),g=l_(o.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):s instanceof br?(function(o,u,h){if(!oh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const p=l_(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(iN(o)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Hc(s,e,n,i){return s instanceof pu?(function(u,h,p,g){if(!oh(u.precondition,h))return p;const x=u.value.clone(),y=o_(u.fieldTransforms,g,h);return x.setAll(y),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),null})(s,e,n,i):s instanceof br?(function(u,h,p,g){if(!oh(u.precondition,h))return p;const x=o_(u.fieldTransforms,g,h),y=h.data;return y.setAll(iN(u)),y.setAll(x),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,n,i):(function(u,h,p){return oh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,n)}function $R(s,e){let n=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=eN(i.transform,o||null);u!=null&&(n===null&&(n=ns.empty()),n.set(i.field,u))}return n||null}function r_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&mo(i,o,((u,h)=>FR(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class pu extends Kh{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class br extends Kh{constructor(e,n,i,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function iN(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function l_(s,e,n){const i=new Map;jt(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const u=s[o],h=u.transform,p=e.data.field(u.field);i.set(u.field,BR(h,p,n[o]))}return i}function o_(s,e,n){const i=new Map;for(const o of s){const u=o.transform,h=n.data.field(o.field);i.set(o.field,UR(u,h,e))}return i}class qg extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GR extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YR{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&HR(u,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Hc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Hc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=J1();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(o.key)?null:p;const g=aN(h,p);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(We.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),pt())}isEqual(e){return this.batchId===e.batchId&&mo(this.mutations,e.mutations,((n,i)=>r_(n,i)))&&mo(this.baseMutations,e.baseMutations,((n,i)=>r_(n,i)))}}class Hg{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){jt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return MR})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,i[h].version);return new Hg(e,n,i,o)}}class KR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class QR{constructor(e,n){this.count=e,this.unchangedNames=n}}var mn,yt;function WR(s){switch(s){case pe.OK:return Ke(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return Ke(15467,{code:s})}}function rN(s){if(s===void 0)return ci("GRPC error has no .code"),pe.UNKNOWN;switch(s){case mn.OK:return pe.OK;case mn.CANCELLED:return pe.CANCELLED;case mn.UNKNOWN:return pe.UNKNOWN;case mn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case mn.INTERNAL:return pe.INTERNAL;case mn.UNAVAILABLE:return pe.UNAVAILABLE;case mn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case mn.NOT_FOUND:return pe.NOT_FOUND;case mn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case mn.ABORTED:return pe.ABORTED;case mn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case mn.DATA_LOSS:return pe.DATA_LOSS;default:return Ke(39323,{code:s})}}(yt=mn||(mn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";function XR(){return new TextEncoder}const JR=new tr([4294967295,4294967295],0);function c_(s){const e=XR().encode(s),n=new _1;return n.update(e),new Uint8Array(n.digest())}function u_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new tr([n,i],0),new tr([o,u],0)]}class $g{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Vc(`Invalid padding: ${n}`);if(i<0)throw new Vc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Vc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Vc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=tr.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(tr.fromNumber(i)));return o.compare(JR)===1&&(o=new tr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=c_(e),[i,o]=u_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,o,u);if(!this.we(h))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new $g(u,o,n);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=c_(e),[i,o]=u_(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,o,u);this.be(h)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Qh{constructor(e,n,i,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Qh(We.min(),o,new Yt(mt),ui(),pt())}}class gu{constructor(e,n,i,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new gu(i,n,pt(),pt(),pt())}}class ch{constructor(e,n,i,o){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=o}}class lN{constructor(e,n){this.targetId=e,this.Ce=n}}class oN{constructor(e,n,i=On.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class d_{constructor(){this.ve=0,this.Fe=h_(),this.Me=On.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),n=pt(),i=pt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Ke(38017,{changeType:u})}})),new gu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=h_()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,jt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class ZR{constructor(e){this.Ge=e,this.ze=new Map,this.je=ui(),this.He=Yd(),this.Je=Yd(),this.Ze=new Yt(mt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ke(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Wp(u))if(i===0){const h=new qe(u.path);this.et(n,h,Bn.newNoDocument(h,We.min()))}else jt(i===1,20013,{expectedCount:i});else{const h=this._t(n);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let h,p;try{h=or(i).toUint8Array()}catch(g){if(g instanceof D1)return fo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new $g(h,o,u)}catch(g){return fo(g instanceof Vc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&Wp(p.target)){const g=new qe(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Bn.newNoDocument(g,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let i=pt();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new Qh(e,n,this.Ze,this.je,i);return this.je=ui(),this.He=Yd(),this.Je=Yd(),this.Ze=new Yt(mt),o}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new d_,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new vn(mt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new vn(mt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new d_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Yd(){return new Yt(qe.comparator)}function h_(){return new Yt(qe.comparator)}const e4={asc:"ASCENDING",desc:"DESCENDING"},t4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n4={and:"AND",or:"OR"};class s4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zp(s,e){return s.useProto3Json||Fh(e)?e:{value:e}}function Th(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cN(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function a4(s,e){return Th(s,e.toTimestamp())}function Aa(s){return jt(!!s,49232),We.fromTimestamp((function(n){const i=lr(n);return new Tt(i.seconds,i.nanos)})(s))}function Gg(s,e){return eg(s,e).canonicalString()}function eg(s,e){const n=(function(o){return new Pt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function uN(s){const e=Pt.fromString(s);return jt(pN(e),10190,{key:e.toString()}),e}function tg(s,e){return Gg(s.databaseId,e.path)}function yp(s,e){const n=uN(e);if(n.get(1)!==s.databaseId.projectId)throw new Ae(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Ae(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new qe(hN(n))}function dN(s,e){return Gg(s.databaseId,e)}function i4(s){const e=uN(s);return e.length===4?Pt.emptyPath():hN(e)}function ng(s){return new Pt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function hN(s){return jt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function f_(s,e,n){return{name:tg(s,e),fields:n.value.mapValue.fields}}function r4(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Ke(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(x,y){return x.useProto3Json?(jt(y===void 0||typeof y=="string",58123),On.fromBase64String(y||"")):(jt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),On.fromUint8Array(y||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(x){const y=x.code===void 0?pe.UNKNOWN:rN(x.code);return new Ae(y,x.message||"")})(h);n=new oN(i,o,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=yp(s,i.document.name),u=Aa(i.document.updateTime),h=i.document.createTime?Aa(i.document.createTime):We.min(),p=new ns({mapValue:{fields:i.document.fields}}),g=Bn.newFoundDocument(o,u,h,p),x=i.targetIds||[],y=i.removedTargetIds||[];n=new ch(x,y,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=yp(s,i.document),u=i.readTime?Aa(i.readTime):We.min(),h=Bn.newNoDocument(o,u),p=i.removedTargetIds||[];n=new ch([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=yp(s,i.document),u=i.removedTargetIds||[];n=new ch([],u,o,null)}else{if(!("filter"in e))return Ke(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,h=new QR(o,u),p=i.targetId;n=new lN(p,h)}}return n}function l4(s,e){let n;if(e instanceof pu)n={update:f_(s,e.key,e.value)};else if(e instanceof qg)n={delete:tg(s,e.key)};else if(e instanceof br)n={update:f_(s,e.key,e.data),updateMask:g4(e.fieldMask)};else{if(!(e instanceof GR))return Ke(16599,{dt:e.type});n={verify:tg(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof tu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof nu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof su)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Sh)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Ke(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:a4(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ke(27497)})(s,e.precondition)),n}function o4(s,e){return s&&s.length>0?(jt(e!==void 0,14353),s.map((n=>(function(o,u){let h=o.updateTime?Aa(o.updateTime):Aa(u);return h.isEqual(We.min())&&(h=Aa(u)),new qR(h,o.transformResults||[])})(n,e)))):[]}function c4(s,e){return{documents:[dN(s,e.path)]}}function u4(s,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=dN(s,o);const u=(function(x){if(x.length!==0)return mN(ea.create(x,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(x){if(x.length!==0)return x.map((y=>(function(S){return{field:no(S.field),direction:f4(S.dir)}})(y)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=Zp(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:n,parent:o}}function d4(s){let e=i4(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){jt(i===1,65062);const y=n.from[0];y.allDescendants?o=y.collectionId:e=e.child(y.collectionId)}let u=[];n.where&&(u=(function(w){const S=fN(w);return S instanceof ea&&q1(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((S=>(function(H){return new Eh(so(H.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(S)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let S;return S=typeof w=="object"?w.value:w,Fh(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(w){const S=!!w.before,C=w.values||[];return new Nh(C,S)})(n.startAt));let x=null;return n.endAt&&(x=(function(w){const S=!w.before,C=w.values||[];return new Nh(C,S)})(n.endAt)),AR(e,o,h,u,p,"F",g,x)}function h4(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fN(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=so(n.unaryFilter.field);return pn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=so(n.unaryFilter.field);return pn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=so(n.unaryFilter.field);return pn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=so(n.unaryFilter.field);return pn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ke(61313);default:return Ke(60726)}})(s):s.fieldFilter!==void 0?(function(n){return pn.create(so(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ke(58110);default:return Ke(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ea.create(n.compositeFilter.filters.map((i=>fN(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ke(1026)}})(n.compositeFilter.op))})(s):Ke(30097,{filter:s})}function f4(s){return e4[s]}function m4(s){return t4[s]}function p4(s){return n4[s]}function no(s){return{fieldPath:s.canonicalString()}}function so(s){return Mn.fromServerFormat(s.fieldPath)}function mN(s){return s instanceof pn?(function(n){if(n.op==="=="){if(e_(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NAN"}};if(Zv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(e_(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NAN"}};if(Zv(n.value))return{unaryFilter:{field:no(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(n.field),op:m4(n.op),value:n.value}}})(s):s instanceof ea?(function(n){const i=n.getFilters().map((o=>mN(o)));return i.length===1?i[0]:{compositeFilter:{op:p4(n.op),filters:i}}})(s):Ke(54877,{filter:s})}function g4(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function pN(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function gN(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Ji{constructor(e,n,i,o,u=We.min(),h=We.min(),p=On.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class x4{constructor(e){this.yt=e}}function b4(s){const e=d4({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Jp(e,e.limit,"L"):e}class y4{constructor(){this.Sn=new v4}addToCollectionParentIndex(e,n){return this.Sn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(rr.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(rr.min())}updateCollectionGroup(e,n,i){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class v4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new vn(Pt.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new vn(Pt.comparator)).toArray()}}const m_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xN=41943040;class ts{static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(xN,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class xo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new xo(0)}static ar(){return new xo(-1)}}const p_="LruGarbageCollector",_4=1048576;function g_([s,e],[n,i]){const o=mt(s,n);return o===0?mt(e,i):o}class w4{constructor(e){this.Pr=e,this.buffer=new vn(g_),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();g_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class N4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ke(p_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jo(n)?ke(p_,"Ignoring IndexedDB error during garbage collection: ",n):await To(n)}await this.Ar(3e5)}))}}class E4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(zh.ce);const i=new w4(n);return this.Vr.forEachTarget(e,(o=>i.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>i.Er(o))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(m_)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),m_):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,o,u,h,p,g,x;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(i=w,p=Date.now(),this.removeTargets(e,i,n)))).next((w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(x=Date.now(),eo()<=ft.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-y}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-y}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function S4(s,e){return new E4(s,e)}class T4{constructor(){this.changes=new dl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?xe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class j4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class A4{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(i!==null&&Hc(i.mutation,o,gs.empty(),Tt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,pt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=pt()){const o=Yr();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,i).next((u=>{let h=Oc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const i=Yr();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,pt())))}populateOverlays(e,n,i){const o=[];return i.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,i,o){let u=ui();const h=qc(),p=(function(){return qc()})();return n.forEach(((g,x)=>{const y=i.get(x.key);o.has(x.key)&&(y===void 0||y.mutation instanceof br)?u=u.insert(x.key,x):y!==void 0?(h.set(x.key,y.mutation.getFieldMask()),Hc(y.mutation,x,y.mutation.getFieldMask(),Tt.now())):h.set(x.key,gs.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((x,y)=>h.set(x,y))),n.forEach(((x,y)=>p.set(x,new j4(y,h.get(x)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=qc();let o=new Yt(((h,p)=>h-p)),u=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const x=n.get(g);if(x===null)return;let y=i.get(g)||gs.empty();y=p.applyToLocalView(x,y),i.set(g,y);const w=(o.get(p.batchId)||pt()).add(g);o=o.insert(p.batchId,w)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),x=g.key,y=g.value,w=J1();y.forEach((S=>{if(!u.has(S)){const C=aN(n.get(S),i.get(S));C!==null&&w.set(S,C),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,x,w))}return xe.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,o){return CR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Y1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-u.size):xe.resolve(Yr());let p=Xc,g=u;return h.next((x=>xe.forEach(x,((y,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),u.get(y)?xe.resolve():this.remoteDocumentCache.getEntry(e,y).next((S=>{g=g.insert(y,S)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,g,x,pt()))).next((y=>({batchId:p,changes:X1(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new qe(n)).next((i=>{let o=Oc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const u=n.collectionGroup;let h=Oc();return this.indexManager.getCollectionParents(e,u).next((p=>xe.forEach(p,(g=>{const x=(function(w,S){return new mu(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,i,o).next((y=>{y.forEach(((w,S)=>{h=h.insert(w,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,o)))).next((h=>{u.forEach(((g,x)=>{const y=x.getKey();h.get(y)===null&&(h=h.insert(y,Bn.newInvalidDocument(y)))}));let p=Oc();return h.forEach(((g,x)=>{const y=u.get(g);y!==void 0&&Hc(y.mutation,x,gs.empty(),Tt.now()),Gh(n,x)&&(p=p.insert(g,x))})),p}))}}class C4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return xe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Aa(o.createTime)}})(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:b4(o.bundledQuery),readTime:Aa(o.readTime)}})(n)),xe.resolve()}}class R4{constructor(){this.overlays=new Yt(qe.comparator),this.Lr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Yr();return xe.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((o,u)=>{this.bt(e,n,u)})),xe.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.Lr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),xe.resolve()}getOverlaysForCollection(e,n,i){const o=Yr(),u=n.length+1,h=new qe(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,x=g.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return xe.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let u=new Yt(((x,y)=>x-y));const h=this.overlays.getIterator();for(;h.hasNext();){const x=h.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>i){let y=u.get(x.largestBatchId);y===null&&(y=Yr(),u=u.insert(x.largestBatchId,y)),y.set(x.getKey(),x)}}const p=Yr(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,y)=>p.set(x,y))),!(p.size()>=o)););return xe.resolve(p)}bt(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(i.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new KR(n,i));let u=this.Lr.get(n);u===void 0&&(u=pt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class k4{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}class Yg{constructor(){this.kr=new vn(Tn.Kr),this.qr=new vn(Tn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new Tn(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Tn(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new qe(new Pt([])),i=new Tn(n,e),o=new Tn(n,e+1),u=[];return this.qr.forEachInRange([i,o],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new qe(new Pt([])),i=new Tn(n,e),o=new Tn(n,e+1);let u=pt();return this.qr.forEachInRange([i,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Tn(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Tn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return qe.comparator(e.key,n.key)||mt(e.Hr,n.Hr)}static Ur(e,n){return mt(e.Hr,n.Hr)||qe.comparator(e.key,n.key)}}class I4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new vn(Tn.Kr)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new YR(u,n,i,o);this.mutationQueue.push(h);for(const p of o)this.Jr=this.Jr.add(new Tn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return xe.resolve(h)}lookupMutationBatch(e,n){return xe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.Xr(i),u=o<0?0:o;return xe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?Pg:this.Yn-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Tn(n,0),o=new Tn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,o],(h=>{const p=this.Zr(h.Hr);u.push(p)})),xe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new vn(mt);return n.forEach((o=>{const u=new Tn(o,0),h=new Tn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),xe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let u=i;qe.isDocumentKey(u)||(u=u.child(""));const h=new Tn(new qe(u),0);let p=new vn(mt);return this.Jr.forEachWhile((g=>{const x=g.key.path;return!!i.isPrefixOf(x)&&(x.length===o&&(p=p.add(g.Hr)),!0)}),h),xe.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const o=this.Zr(i);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){jt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return xe.forEach(n.mutations,(o=>{const u=new Tn(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new Tn(n,0),o=this.Jr.firstAfterOrEqual(i);return xe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class D4{constructor(e){this.ti=e,this.docs=(function(){return new Yt(qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,h=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return xe.resolve(i?i.document.mutableCopy():Bn.newInvalidDocument(n))}getEntries(e,n){let i=ui();return n.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():Bn.newInvalidDocument(o))})),xe.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let u=ui();const h=n.path,p=new qe(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:x,value:{document:y}}=g.getNext();if(!h.isPrefixOf(x.path))break;x.path.length>h.length+1||iR(aR(y),i)<=0||(o.has(y.key)||Gh(n,y))&&(u=u.insert(y.key,y.mutableCopy()))}return xe.resolve(u)}getAllFromCollectionGroup(e,n,i,o){Ke(9500)}ni(e,n){return xe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new M4(this)}getSize(e){return xe.resolve(this.size)}}class M4 extends T4{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(i)})),xe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class O4{constructor(e){this.persistence=e,this.ri=new dl((n=>Bg(n)),zg),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.ii=0,this.si=new Yg,this.targetCount=0,this.oi=xo._r()}forEachTarget(e,n){return this.ri.forEach(((i,o)=>n(o))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),xe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new xo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.lr(n),xe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,i){let o=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),xe.waitFor(u).next((()=>o))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return xe.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),xe.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),xe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return xe.resolve(i)}containsKey(e,n){return xe.resolve(this.si.containsKey(n))}}class bN{constructor(e,n){this._i={},this.overlays={},this.ai=new zh(0),this.ui=!1,this.ui=!0,this.ci=new k4,this.referenceDelegate=e(this),this.li=new O4(this),this.indexManager=new y4,this.remoteDocumentCache=(function(o){return new D4(o)})((i=>this.referenceDelegate.hi(i))),this.serializer=new x4(n),this.Pi=new C4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new R4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new I4(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){ke("MemoryPersistence","Starting transaction:",e);const o=new V4(this.ai.next());return this.referenceDelegate.Ti(),i(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return xe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class V4 extends lR{constructor(e){super(),this.currentSequenceNumber=e}}class Kg{constructor(e){this.persistence=e,this.Ri=new Yg,this.Ai=null}static Vi(e){return new Kg(e)}get di(){if(this.Ai)return this.Ai;throw Ke(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),xe.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.di,(i=>{const o=qe.fromPath(i);return this.mi(e,o).next((u=>{u||n.removeEntry(o,We.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return xe.or([()=>xe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class jh{constructor(e,n){this.persistence=e,this.fi=new dl((i=>uR(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=S4(this,n)}static Vi(e,n){return new jh(e,n)}Ti(){}Ii(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((o=>i+o))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return xe.forEach(this.fi,((i,o)=>this.wr(e,i,o).next((u=>u?xe.resolve():n(o)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,n).next((p=>{p||(i++,u.removeEntry(h,We.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),xe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=rh(e.data.value)),n}wr(e,n,i){return xe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return xe.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Qg{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=o}static Es(e,n){let i=pt(),o=pt();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Qg(e,n.fromCache,i,o)}}class P4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class L4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return dj()?8:oR(zn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,o,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new P4;return this.ys(e,n,h).next((p=>{if(u.result=p,this.As)return this.ws(e,n,h,p.size)}))})).next((()=>u.result))}ws(e,n,i,o){return i.documentReadCount<this.Vs?(eo()<=ft.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",to(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),xe.resolve()):(eo()<=ft.DEBUG&&ke("QueryEngine","Query:",to(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(eo()<=ft.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",to(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ja(n))):xe.resolve())}gs(e,n){if(a_(n))return xe.resolve(null);let i=ja(n);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Jp(n,null,"F"),i=ja(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=pt(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const x=this.bs(n,p);return this.Ss(n,x,h,g.readTime)?this.gs(e,Jp(n,null,"F")):this.Ds(e,x,n,g)}))))})))))}ps(e,n,i,o){return a_(n)||o.isEqual(We.min())?xe.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,i,o)?xe.resolve(null):(eo()<=ft.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),to(n)),this.Ds(e,h,n,sR(o,Xc)).next((p=>p)))}))}bs(e,n){let i=new vn(Q1(e));return n.forEach(((o,u)=>{Gh(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,i){return eo()<=ft.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",to(n)),this.fs.getDocumentsMatchingQuery(e,n,rr.min(),i)}Ds(e,n,i,o){return this.fs.getDocumentsMatchingQuery(e,i,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const Wg="LocalStore",U4=3e8;class B4{constructor(e,n,i,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Yt(mt),this.Fs=new dl((u=>Bg(u)),zg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new A4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function z4(s,e,n,i){return new B4(s,e,n,i)}async function yN(s,e){const n=Ze(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=pt();for(const x of o){h.push(x.batchId);for(const y of x.mutations)g=g.add(y.key)}for(const x of u){p.push(x.batchId);for(const y of x.mutations)g=g.add(y.key)}return n.localDocuments.getDocuments(i,g).next((x=>({Ns:x,removedBatchIds:h,addedBatchIds:p})))}))}))}function F4(s,e){const n=Ze(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,x,y){const w=x.batch,S=w.keys();let C=xe.resolve();return S.forEach((H=>{C=C.next((()=>y.getEntry(g,H))).next((B=>{const V=x.docVersions.get(H);jt(V!==null,48541),B.version.compareTo(V)<0&&(w.applyToRemoteDocument(B,x),B.isValidDocument()&&(B.setReadTime(x.commitVersion),y.addEntry(B)))}))})),C.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=pt();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(g=g.add(p.batch.mutations[x].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function vN(s){const e=Ze(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function q4(s,e){const n=Ze(s),i=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((y,w)=>{const S=o.get(w);if(!S)return;p.push(n.li.removeMatchingKeys(u,y.removedDocuments,w).next((()=>n.li.addMatchingKeys(u,y.addedDocuments,w))));let C=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(On.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):y.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(y.resumeToken,i)),o=o.insert(w,C),(function(B,V,z){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=U4?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(S,C,y)&&p.push(n.li.updateTargetData(u,C))}));let g=ui(),x=pt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,y))})),p.push(H4(u,h,e.documentUpdates).next((y=>{g=y.Bs,x=y.Ls}))),!i.isEqual(We.min())){const y=n.li.getLastRemoteSnapshotVersion(u).next((w=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(y)}return xe.waitFor(p).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,x))).next((()=>g))})).then((u=>(n.vs=o,u)))}function H4(s,e,n){let i=pt(),o=pt();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=ui();return n.forEach(((p,g)=>{const x=u.get(p);g.isFoundDocument()!==x.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(We.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):ke(Wg,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",g.version)})),{Bs:h,Ls:o}}))}function $4(s,e){const n=Ze(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Pg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function G4(s,e){const n=Ze(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.li.getTargetData(i,e).next((u=>u?(o=u,xe.resolve(o)):n.li.allocateTargetId(i).next((h=>(o=new Ji(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.vs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function sg(s,e,n){const i=Ze(s),o=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!jo(h))throw h;ke(Wg,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(o.target)}function x_(s,e,n){const i=Ze(s);let o=We.min(),u=pt();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,x,y){const w=Ze(g),S=w.Fs.get(y);return S!==void 0?xe.resolve(w.vs.get(S)):w.li.getTargetData(x,y)})(i,h,ja(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,n?o:We.min(),n?u:pt()))).next((p=>(Y4(i,kR(e),p),{documents:p,ks:u})))))}function Y4(s,e,n){let i=s.Ms.get(e)||We.min();n.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class b_{constructor(){this.activeTargetIds=PR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K4{constructor(){this.vo=new b_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new b_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Q4{Mo(e){}shutdown(){}}const y_="ConnectivityMonitor";class v_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ke(y_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ke(y_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Kd=null;function ag(){return Kd===null?Kd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kd++,"0x"+Kd.toString(16)}const vp="RestConnection",W4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class X4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.$o=this.databaseId.database===_h?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,n,i,o,u){const h=ag(),p=this.Qo(e,n.toUriEncodedString());ke(vp,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:x}=new URL(p),y=mr(x);return this.zo(e,p,g,i,y).then((w=>(ke(vp,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw fo(vp,`RPC '${e}' ${h} failed with error: `,w,"url: ",p,"request:",i),w}))}jo(e,n,i,o,u,h){return this.Wo(e,n,i,o,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+So})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),i&&i.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const i=W4[e];let o=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class J4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Ln="WebChannelConnection",Cc=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(o){setTimeout((()=>{throw o}),0)}}))};class uo extends X4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!uo.c_){const e=S1();Cc(e,E1.STAT_EVENT,(n=>{n.stat===$p.PROXY?ke(Ln,"STAT_EVENT: detected buffering proxy"):n.stat===$p.NOPROXY&&ke(Ln,"STAT_EVENT: detected no buffering proxy")})),uo.c_=!0}}zo(e,n,i,o,u){const h=ag();return new Promise(((p,g)=>{const x=new w1;x.setWithCredentials(!0),x.listenOnce(N1.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case ih.NO_ERROR:const w=x.getResponseJson();ke(Ln,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),p(w);break;case ih.TIMEOUT:ke(Ln,`RPC '${e}' ${h} timed out`),g(new Ae(pe.DEADLINE_EXCEEDED,"Request time out"));break;case ih.HTTP_ERROR:const S=x.getStatus();if(ke(Ln,`RPC '${e}' ${h} failed with status:`,S,"response text:",x.getResponseText()),S>0){let C=x.getResponseJson();Array.isArray(C)&&(C=C[0]);const H=C?.error;if(H&&H.status&&H.message){const B=(function(z){const Y=z.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(Y)>=0?Y:pe.UNKNOWN})(H.status);g(new Ae(B,H.message))}else g(new Ae(pe.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new Ae(pe.UNAVAILABLE,"Connection failed."));break;default:Ke(9055,{l_:e,streamId:h,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{ke(Ln,`RPC '${e}' ${h} completed.`)}}));const y=JSON.stringify(o);ke(Ln,`RPC '${e}' ${h} sending request:`,o),x.send(n,"POST",y,i,15)}))}T_(e,n,i){const o=ag(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const x=u.join("");ke(Ln,`Creating RPC '${e}' stream ${o}: ${x}`,p);const y=h.createWebChannel(x,p);this.I_(y);let w=!1,S=!1;const C=new J4({Ho:H=>{S?ke(Ln,`Not sending because RPC '${e}' stream ${o} is closed:`,H):(w||(ke(Ln,`Opening RPC '${e}' stream ${o} transport.`),y.open(),w=!0),ke(Ln,`RPC '${e}' stream ${o} sending:`,H),y.send(H))},Jo:()=>y.close()});return Cc(y,Mc.EventType.OPEN,(()=>{S||(ke(Ln,`RPC '${e}' stream ${o} transport opened.`),C.i_())})),Cc(y,Mc.EventType.CLOSE,(()=>{S||(S=!0,ke(Ln,`RPC '${e}' stream ${o} transport closed`),C.o_(),this.E_(y))})),Cc(y,Mc.EventType.ERROR,(H=>{S||(S=!0,fo(Ln,`RPC '${e}' stream ${o} transport errored. Name:`,H.name,"Message:",H.message),C.o_(new Ae(pe.UNAVAILABLE,"The operation could not be completed")))})),Cc(y,Mc.EventType.MESSAGE,(H=>{if(!S){const B=H.data[0];jt(!!B,16349);const V=B,z=V?.error||V[0]?.error;if(z){ke(Ln,`RPC '${e}' stream ${o} received error:`,z);const Y=z.status;let W=(function(oe){const A=mn[oe];if(A!==void 0)return rN(A)})(Y),be=z.message;W===void 0&&(W=pe.INTERNAL,be="Unknown error status: "+Y+" with message "+z.message),S=!0,C.o_(new Ae(W,be)),y.close()}else ke(Ln,`RPC '${e}' stream ${o} received:`,B),C.__(B)}})),uo.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return T1()}}function Z4(s){return new uo(s)}function _p(){return typeof document<"u"?document:null}function Wh(s){return new s4(s,!0)}uo.c_=!1;class _N{constructor(e,n,i=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&ke("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const __="PersistentStream";class wN{constructor(e,n,i,o,u,h,p,g){this.Ci=e,this.b_=i,this.S_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _N(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(ci(n.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{e((()=>{const o=new Ae(pe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(__,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ke(__,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ek extends wN{constructor(e,n,i,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=r4(this.serializer,e),i=(function(u){if(!("targetChange"in u))return We.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?We.min():h.readTime?Aa(h.readTime):We.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=ng(this.serializer),n.addTarget=(function(u,h){let p;const g=h.target;if(p=Wp(g)?{documents:c4(u,g)}:{query:u4(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=cN(u,h.resumeToken);const x=Zp(u,h.expectedCount);x!==null&&(p.expectedCount=x)}else if(h.snapshotVersion.compareTo(We.min())>0){p.readTime=Th(u,h.snapshotVersion.toTimestamp());const x=Zp(u,h.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,e);const i=h4(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=ng(this.serializer),n.removeTarget=e,this.K_(n)}}class tk extends wN{constructor(e,n,i,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return jt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,jt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){jt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=o4(e.writeResults,e.commitTime),i=Aa(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=ng(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>l4(this.serializer,i)))};this.K_(n)}}class nk{}class sk extends nk{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ae(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,eg(n,i),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(pe.UNKNOWN,u.toString())}))}jo(e,n,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,eg(n,i),o,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Ae(pe.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function ak(s,e,n,i){return new sk(s,e,n,i)}class ik{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ci(n),this.aa=!1):ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const nl="RemoteStore";class rk{constructor(e,n,i,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{hl(this)&&(ke(nl,"Restarting streams for network reachability change."),await(async function(g){const x=Ze(g);x.Ea.add(4),await xu(x),x.Va.set("Unknown"),x.Ea.delete(4),await Xh(x)})(this))}))})),this.Va=new ik(i,o)}}async function Xh(s){if(hl(s))for(const e of s.Ra)await e(!0)}async function xu(s){for(const e of s.Ra)await e(!1)}function NN(s,e){const n=Ze(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),e0(n)?Zg(n):Ao(n).O_()&&Jg(n,e))}function Xg(s,e){const n=Ze(s),i=Ao(n);n.Ia.delete(e),i.O_()&&EN(n,e),n.Ia.size===0&&(i.O_()?i.L_():hl(n)&&n.Va.set("Unknown"))}function Jg(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ao(s).Z_(e)}function EN(s,e){s.da.$e(e),Ao(s).X_(e)}function Zg(s){s.da=new ZR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Ao(s).start(),s.Va.ua()}function e0(s){return hl(s)&&!Ao(s).x_()&&s.Ia.size>0}function hl(s){return Ze(s).Ea.size===0}function SN(s){s.da=void 0}async function lk(s){s.Va.set("Online")}async function ok(s){s.Ia.forEach(((e,n)=>{Jg(s,e)}))}async function ck(s,e){SN(s),e0(s)?(s.Va.ha(e),Zg(s)):s.Va.set("Unknown")}async function uk(s,e,n){if(s.Va.set("Online"),e instanceof oN&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.da.removeTarget(p))})(s,e)}catch(i){ke(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ah(s,i)}else if(e instanceof ch?s.da.Xe(e):e instanceof lN?s.da.st(e):s.da.tt(e),!n.isEqual(We.min()))try{const i=await vN(s.localStore);n.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const y=u.Ia.get(x);y&&u.Ia.set(x,y.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,x)=>{const y=u.Ia.get(g);if(!y)return;u.Ia.set(g,y.withResumeToken(On.EMPTY_BYTE_STRING,y.snapshotVersion)),EN(u,g);const w=new Ji(y.target,g,x,y.sequenceNumber);Jg(u,w)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){ke(nl,"Failed to raise snapshot:",i),await Ah(s,i)}}async function Ah(s,e,n){if(!jo(e))throw e;s.Ea.add(1),await xu(s),s.Va.set("Offline"),n||(n=()=>vN(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ke(nl,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Xh(s)}))}function TN(s,e){return e().catch((n=>Ah(s,n,e)))}async function Jh(s){const e=Ze(s),n=ur(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pg;for(;dk(e);)try{const o=await $4(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,hk(e,o)}catch(o){await Ah(e,o)}jN(e)&&AN(e)}function dk(s){return hl(s)&&s.Ta.length<10}function hk(s,e){s.Ta.push(e);const n=ur(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function jN(s){return hl(s)&&!ur(s).x_()&&s.Ta.length>0}function AN(s){ur(s).start()}async function fk(s){ur(s).ra()}async function mk(s){const e=ur(s);for(const n of s.Ta)e.ea(n.mutations)}async function pk(s,e,n){const i=s.Ta.shift(),o=Hg.from(i,e,n);await TN(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Jh(s)}async function gk(s,e){e&&ur(s).Y_&&await(async function(i,o){if((function(h){return WR(h)&&h!==pe.ABORTED})(o.code)){const u=i.Ta.shift();ur(i).B_(),await TN(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Jh(i)}})(s,e),jN(s)&&AN(s)}async function w_(s,e){const n=Ze(s);n.asyncQueue.verifyOperationInProgress(),ke(nl,"RemoteStore received new credentials");const i=hl(n);n.Ea.add(3),await xu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Xh(n)}async function xk(s,e){const n=Ze(s);e?(n.Ea.delete(2),await Xh(n)):e||(n.Ea.add(2),await xu(n),n.Va.set("Unknown"))}function Ao(s){return s.ma||(s.ma=(function(n,i,o){const u=Ze(n);return u.sa(),new ek(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:lk.bind(null,s),Yo:ok.bind(null,s),t_:ck.bind(null,s),J_:uk.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),e0(s)?Zg(s):s.Va.set("Unknown")):(await s.ma.stop(),SN(s))}))),s.ma}function ur(s){return s.fa||(s.fa=(function(n,i,o){const u=Ze(n);return u.sa(),new tk(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:fk.bind(null,s),t_:gk.bind(null,s),ta:mk.bind(null,s),na:pk.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Jh(s)):(await s.fa.stop(),s.Ta.length>0&&(ke(nl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class t0{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){const h=Date.now()+i,p=new t0(e,n,h,o,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ae(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n0(s,e){if(ci("AsyncQueue",`${e}: ${s}`),jo(s))return new Ae(pe.UNAVAILABLE,`${e}: ${s}`);throw s}class ho{static emptySet(e){return new ho(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||qe.comparator(n.key,i.key):(n,i)=>qe.comparator(n.key,i.key),this.keyedMap=Oc(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ho;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class N_{constructor(){this.ga=new Yt(qe.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ke(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class bo{constructor(e,n,i,o,u,h,p,g,x){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,n,i,o,u){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new bo(e,n,ho.emptySet(n),h,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$h(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}class bk{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class yk{constructor(){this.queries=E_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Ze(n),u=o.queries;o.queries=E_(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Ae(pe.ABORTED,"Firestore shutting down"))}}function E_(){return new dl((s=>K1(s)),$h)}async function s0(s,e){const n=Ze(s);let i=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(i=2):(u=new bk,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=n0(h,`Initialization of query '${to(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&i0(n)}async function a0(s,e){const n=Ze(s),i=e.query;let o=3;const u=n.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function vk(s,e){const n=Ze(s);let i=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const p of h.ba)p.Fa(o)&&(i=!0);h.wa=o}}i&&i0(n)}function _k(s,e,n){const i=Ze(s),o=i.queries.get(e);if(o)for(const u of o.ba)u.onError(n);i.queries.delete(e)}function i0(s){s.Ca.forEach((e=>{e.next()}))}var ig,S_;(S_=ig||(ig={})).Ma="default",S_.Cache="cache";class r0{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new bo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ig.Cache}}class CN{constructor(e){this.key=e}}class RN{constructor(e){this.key=e}}class wk{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=Q1(e),this.tu=new ho(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new N_,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,x=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((y,w)=>{const S=o.get(y),C=Gh(this.query,w)?w:null,H=!!S&&this.mutatedKeys.has(S.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;S&&C?S.data.isEqual(C.data)?H!==B&&(i.track({type:3,doc:C}),V=!0):this.su(S,C)||(i.track({type:2,doc:C}),V=!0,(g&&this.eu(C,g)>0||x&&this.eu(C,x)<0)&&(p=!0)):!S&&C?(i.track({type:0,doc:C}),V=!0):S&&!C&&(i.track({type:1,doc:S}),V=!0,(g||x)&&(p=!0)),V&&(C?(h=h.add(C),u=B?u.add(y):u.delete(y)):(h=h.delete(y),u=u.delete(y)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const y=this.query.limitType==="F"?h.last():h.first();h=h.delete(y.key),u=u.delete(y.key),i.track({type:1,doc:y})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((y,w)=>(function(C,H){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke(20277,{Vt:V})}};return B(C)-B(H)})(y.type,w.type)||this.eu(y.doc,w.doc))),this.ou(i),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,x=g!==this.Xa;return this.Xa=g,h.length!==0||x?{snapshot:new bo(this.query,e.tu,u,h,e.mutatedKeys,g===0,x,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new N_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new RN(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new CN(i))})),n}cu(e){this.Za=e.ks,this.Ya=pt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const l0="SyncEngine";class Nk{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Ek{constructor(e){this.key=e,this.hu=!1}}class Sk{constructor(e,n,i,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new dl((p=>K1(p)),$h),this.Iu=new Map,this.Eu=new Set,this.Ru=new Yt(qe.comparator),this.Au=new Map,this.Vu=new Yg,this.du={},this.mu=new Map,this.fu=xo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Tk(s,e,n=!0){const i=VN(s);let o;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await kN(i,e,n,!0),o}async function jk(s,e){const n=VN(s);await kN(n,e,!0,!1)}async function kN(s,e,n,i){const o=await G4(s.localStore,ja(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await Ak(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&NN(s.remoteStore,o),p}async function Ak(s,e,n,i,o){s.pu=(w,S,C)=>(async function(B,V,z,Y){let W=V.view.ru(z);W.Ss&&(W=await x_(B.localStore,V.query,!1).then((({documents:A})=>V.view.ru(A,W))));const be=Y&&Y.targetChanges.get(V.targetId),ge=Y&&Y.targetMismatches.get(V.targetId)!=null,oe=V.view.applyChanges(W,B.isPrimaryClient,be,ge);return j_(B,V.targetId,oe.au),oe.snapshot})(s,w,S,C);const u=await x_(s.localStore,e,!0),h=new wk(e,u.ks),p=h.ru(u.documents),g=gu.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),x=h.applyChanges(p,s.isPrimaryClient,g);j_(s,n,x.au);const y=new Nk(e,n,h);return s.Tu.set(e,y),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),x.snapshot}async function Ck(s,e,n){const i=Ze(s),o=i.Tu.get(e),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((h=>!$h(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await sg(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&Xg(i.remoteStore,o.targetId),rg(i,o.targetId)})).catch(To)):(rg(i,o.targetId),await sg(i.localStore,o.targetId,!0))}async function Rk(s,e){const n=Ze(s),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Xg(n.remoteStore,i.targetId))}async function kk(s,e,n){const i=Lk(s);try{const o=await(function(h,p){const g=Ze(h),x=Tt.now(),y=p.reduce(((C,H)=>C.add(H.key)),pt());let w,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let H=ui(),B=pt();return g.xs.getEntries(C,y).next((V=>{H=V,H.forEach(((z,Y)=>{Y.isValidDocument()||(B=B.add(z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,H))).next((V=>{w=V;const z=[];for(const Y of p){const W=$R(Y,w.get(Y.key).overlayedDocument);W!=null&&z.push(new br(Y.key,W,B1(W.value.mapValue),Vs.exists(!0)))}return g.mutationQueue.addMutationBatch(C,x,z,p)})).next((V=>{S=V;const z=V.applyToLocalDocumentSet(w,B);return g.documentOverlayCache.saveOverlays(C,V.batchId,z)}))})).then((()=>({batchId:S.batchId,changes:X1(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,p,g){let x=h.du[h.currentUser.toKey()];x||(x=new Yt(mt)),x=x.insert(p,g),h.du[h.currentUser.toKey()]=x})(i,o.batchId,n),await bu(i,o.changes),await Jh(i.remoteStore)}catch(o){const u=n0(o,"Failed to persist write");n.reject(u)}}async function IN(s,e){const n=Ze(s);try{const i=await q4(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(jt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?jt(h.hu,14607):o.removedDocuments.size>0&&(jt(h.hu,42227),h.hu=!1))})),await bu(n,i,e)}catch(i){await To(i)}}function T_(s,e,n){const i=Ze(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const g=Ze(h);g.onlineState=p;let x=!1;g.queries.forEach(((y,w)=>{for(const S of w.ba)S.va(p)&&(x=!0)})),x&&i0(g)})(i.eventManager,e),o.length&&i.Pu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Ik(s,e,n){const i=Ze(s);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),u=o&&o.key;if(u){let h=new Yt(qe.comparator);h=h.insert(u,Bn.newNoDocument(u,We.min()));const p=pt().add(u),g=new Qh(We.min(),new Map,new Yt(mt),h,p);await IN(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),o0(i)}else await sg(i.localStore,e,!1).then((()=>rg(i,e,n))).catch(To)}async function Dk(s,e){const n=Ze(s),i=e.batch.batchId;try{const o=await F4(n.localStore,e);MN(n,i,null),DN(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await bu(n,o)}catch(o){await To(o)}}async function Mk(s,e,n){const i=Ze(s);try{const o=await(function(h,p){const g=Ze(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let y;return g.mutationQueue.lookupMutationBatch(x,p).next((w=>(jt(w!==null,37113),y=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,y,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,y))).next((()=>g.localDocuments.getDocuments(x,y)))}))})(i.localStore,e);MN(i,e,n),DN(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await bu(i,o)}catch(o){await To(o)}}function DN(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function MN(s,e,n){const i=Ze(s);let o=i.du[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),i.du[i.currentUser.toKey()]=o}}function rg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||ON(s,i)}))}function ON(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Xg(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),o0(s))}function j_(s,e,n){for(const i of n)i instanceof CN?(s.Vu.addReference(i.key,e),Ok(s,i)):i instanceof RN?(ke(l0,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||ON(s,i.key)):Ke(19791,{wu:i})}function Ok(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(ke(l0,"New document in limbo: "+n),s.Eu.add(i),o0(s))}function o0(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new qe(Pt.fromString(e)),i=s.fu.next();s.Au.set(i,new Ek(n)),s.Ru=s.Ru.insert(n,i),NN(s.remoteStore,new Ji(ja(Hh(n.path)),i,"TargetPurposeLimboResolution",zh.ce))}}async function bu(s,e,n){const i=Ze(s),o=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,n).then((x=>{if((x||n)&&i.isPrimaryClient){const y=x?!x.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,y?"current":"not-current")}if(x){o.push(x);const y=Qg.Es(g.targetId,x);u.push(y)}})))})),await Promise.all(h),i.Pu.J_(o),await(async function(g,x){const y=Ze(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>xe.forEach(x,(S=>xe.forEach(S.Ts,(C=>y.persistence.referenceDelegate.addReference(w,S.targetId,C))).next((()=>xe.forEach(S.Is,(C=>y.persistence.referenceDelegate.removeReference(w,S.targetId,C)))))))))}catch(w){if(!jo(w))throw w;ke(Wg,"Failed to update sequence numbers: "+w)}for(const w of x){const S=w.targetId;if(!w.fromCache){const C=y.vs.get(S),H=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(H);y.vs=y.vs.insert(S,B)}}})(i.localStore,u))}async function Vk(s,e){const n=Ze(s);if(!n.currentUser.isEqual(e)){ke(l0,"User change. New user:",e.toKey());const i=await yN(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ae(pe.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await bu(n,i.Ns)}}function Pk(s,e){const n=Ze(s),i=n.Au.get(e);if(i&&i.hu)return pt().add(i.key);{let o=pt();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const p=n.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function VN(s){const e=Ze(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=IN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ik.bind(null,e),e.Pu.J_=vk.bind(null,e.eventManager),e.Pu.yu=_k.bind(null,e.eventManager),e}function Lk(s){const e=Ze(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Mk.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return z4(this.persistence,new L4,e.initialUser,this.serializer)}Cu(e){return new bN(Kg.Vi,this.serializer)}Du(e){return new K4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class Uk extends Ch{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){jt(this.persistence.referenceDelegate instanceof jh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new N4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new bN((i=>jh.Vi(i,n)),this.serializer)}}class lg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>T_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vk.bind(null,this.syncEngine),await xk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yk})()}createDatastore(e){const n=Wh(e.databaseInfo.databaseId),i=Z4(e.databaseInfo);return ak(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,o,u,h,p){return new rk(i,o,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>T_(this.syncEngine,n,0)),(function(){return v_.v()?new v_:new Q4})())}createSyncEngine(e,n){return(function(o,u,h,p,g,x,y){const w=new Sk(o,u,h,p,g,x);return y&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Ze(n);ke(nl,"RemoteStore shutting down."),i.Ea.add(5),await xu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}lg.provider={build:()=>new lg};class c0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const dr="FirestoreClient";class Bk{constructor(e,n,i,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=o,this.user=Un.UNAUTHENTICATED,this.clientId=Vg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{ke(dr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(ke(dr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=n0(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function wp(s,e){s.asyncQueue.verifyOperationInProgress(),ke(dr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await yN(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function A_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await zk(s);ke(dr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>w_(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>w_(e.remoteStore,o))),s._onlineComponents=e}async function zk(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ke(dr,"Using user provided OfflineComponentProvider");try{await wp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===pe.FAILED_PRECONDITION||o.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await wp(s,new Ch)}}else ke(dr,"Using default OfflineComponentProvider"),await wp(s,new Uk(void 0));return s._offlineComponents}async function PN(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ke(dr,"Using user provided OnlineComponentProvider"),await A_(s,s._uninitializedComponentsProvider._online)):(ke(dr,"Using default OnlineComponentProvider"),await A_(s,new lg))),s._onlineComponents}function Fk(s){return PN(s).then((e=>e.syncEngine))}async function Rh(s){const e=await PN(s),n=e.eventManager;return n.onListen=Tk.bind(null,e.syncEngine),n.onUnlisten=Ck.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Rk.bind(null,e.syncEngine),n}function qk(s,e,n,i){const o=new c0(i),u=new r0(e,o,n);return s.asyncQueue.enqueueAndForget((async()=>s0(await Rh(s),u))),()=>{o.Nu(),s.asyncQueue.enqueueAndForget((async()=>a0(await Rh(s),u)))}}function Hk(s,e,n={}){const i=new ii;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,x){const y=new c0({next:S=>{y.Nu(),h.enqueueAndForget((()=>a0(u,w)));const C=S.docs.has(p);!C&&S.fromCache?x.reject(new Ae(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&S.fromCache&&g&&g.source==="server"?x.reject(new Ae(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(S)},error:S=>x.reject(S)}),w=new r0(Hh(p.path),y,{includeMetadataChanges:!0,Ka:!0});return s0(u,w)})(await Rh(s),s.asyncQueue,e,n,i))),i.promise}function $k(s,e,n={}){const i=new ii;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,x){const y=new c0({next:S=>{y.Nu(),h.enqueueAndForget((()=>a0(u,w))),S.fromCache&&g.source==="server"?x.reject(new Ae(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(S)},error:S=>x.reject(S)}),w=new r0(p,y,{includeMetadataChanges:!0,Ka:!0});return s0(u,w)})(await Rh(s),s.asyncQueue,e,n,i))),i.promise}function Gk(s,e){const n=new ii;return s.asyncQueue.enqueueAndForget((async()=>kk(await Fk(s),e,n))),n.promise}function LN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const Yk="ComponentProvider",C_=new Map;function Kk(s,e,n,i,o){return new fR(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,LN(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,i)}const UN="firestore.googleapis.com",R_=!0;class k_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ae(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UN,this.ssl=R_}else this.host=e.host,this.ssl=e.ssl??R_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=xN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_4)throw new Ae(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LN(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ae(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ae(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ae(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zh{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ae(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ae(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new GC;switch(i.type){case"firstParty":return new WC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ae(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=C_.get(n);i&&(ke(Yk,"Removing Datastore"),C_.delete(n),i.terminate())})(this),Promise.resolve()}}function Qk(s,e,n,i={}){s=as(s,Zh);const o=mr(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(wg(`https://${p}`),Ng("Firestore",!0)),u.host!==UN&&u.host!==p&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:i};if(!Xr(g,h)&&(s._setSettings(g),i.mockUserToken)){let x,y;if(typeof i.mockUserToken=="string")x=i.mockUserToken,y=Un.MOCK_USER;else{x=Mw(i.mockUserToken,s._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new Ae(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Un(w)}s._authCredentials=new YC(new A1(x,y))}}class fl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fl(this.firestore,e,this._query)}}class Jt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(fu(n,Jt._jsonSchema))return new Jt(e,i||null,new qe(Pt.fromString(n.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:gn("string",Jt._jsonSchemaVersion),referencePath:gn("string")};class nr extends fl{constructor(e,n,i){super(e,n,Hh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new qe(e))}withConverter(e){return new nr(this.firestore,e,this._path)}}function Je(s,e,...n){if(s=Ht(s),C1("collection","path",e),s instanceof Zh){const i=Pt.fromString(e,...n);return Hv(i),new nr(s,null,i)}{if(!(s instanceof Jt||s instanceof nr))throw new Ae(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Pt.fromString(e,...n));return Hv(i),new nr(s.firestore,null,i)}}function Qe(s,e,...n){if(s=Ht(s),arguments.length===1&&(e=Vg.newId()),C1("doc","path",e),s instanceof Zh){const i=Pt.fromString(e,...n);return qv(i),new Jt(s,null,new qe(i))}{if(!(s instanceof Jt||s instanceof nr))throw new Ae(pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Pt.fromString(e,...n));return qv(i),new Jt(s.firestore,s instanceof nr?s.converter:null,new qe(i))}}const I_="AsyncQueue";class D_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _N(this,"async_queue_retry"),this._c=()=>{const i=_p();i&&ke(I_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=_p();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_p();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ii;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!jo(e))throw e;ke(I_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ci("INTERNAL UNHANDLED ERROR: ",M_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=t0.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ke(47125,{Pc:M_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function M_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class di extends Zh{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new D_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new D_(e),this._firestoreClient=void 0,await e}}}function Wk(s,e){const n=typeof s=="object"?s:Tg(),i=typeof s=="string"?s:_h,o=Vh(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=kw("firestore");u&&Qk(o,...u)}return o}function ef(s){if(s._terminated)throw new Ae(pe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Xk(s),s._firestoreClient}function Xk(s){const e=s._freezeSettings(),n=Kk(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new Bk(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class Os{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Os(On.fromBase64String(e))}catch(n){throw new Ae(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Os(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Os._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fu(e,Os._jsonSchema))return Os.fromBase64String(e.bytes)}}Os._jsonSchemaVersion="firestore/bytes/1.0",Os._jsonSchema={type:gn("string",Os._jsonSchemaVersion),bytes:gn("string")};class u0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ae(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tf{constructor(e){this._methodName=e}}class Ca{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ae(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ae(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ca._jsonSchemaVersion}}static fromJSON(e){if(fu(e,Ca._jsonSchema))return new Ca(e.latitude,e.longitude)}}Ca._jsonSchemaVersion="firestore/geoPoint/1.0",Ca._jsonSchema={type:gn("string",Ca._jsonSchemaVersion),latitude:gn("number"),longitude:gn("number")};class Js{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Js._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fu(e,Js._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Js(e.vectorValues);throw new Ae(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Js._jsonSchemaVersion="firestore/vectorValue/1.0",Js._jsonSchema={type:gn("string",Js._jsonSchemaVersion),vectorValues:gn("object")};const Jk=/^__.*__$/;class Zk{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new br(e,this.data,this.fieldMask,n,this.fieldTransforms):new pu(e,this.data,n,this.fieldTransforms)}}class BN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new br(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zN(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke(40011,{dataSource:s})}}class d0{constructor(e,n,i,o,u,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new d0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return kh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(zN(this.dataSource)&&Jk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class eI{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Wh(e)}createContext(e,n,i,o=!1){return new d0({dataSource:e,methodName:n,targetDoc:i,path:Mn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nf(s){const e=s._freezeSettings(),n=Wh(s._databaseId);return new eI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function FN(s,e,n,i,o,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,n,o);f0("Data must be an object, but it was:",h,i);const p=qN(i,h);let g,x;if(u.merge)g=new gs(h.fieldMask),x=h.fieldTransforms;else if(u.mergeFields){const y=[];for(const w of u.mergeFields){const S=yo(e,w,n);if(!h.contains(S))throw new Ae(pe.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);GN(y,S)||y.push(S)}g=new gs(y),x=h.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=h.fieldTransforms;return new Zk(new ns(p),g,x)}class sf extends tf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sf}}class h0 extends tf{_toFieldTransform(e){return new zR(e.path,new tu)}isEqual(e){return e instanceof h0}}function tI(s,e,n,i){const o=s.createContext(1,e,n);f0("Data must be an object, but it was:",o,i);const u=[],h=ns.empty();xr(i,((g,x)=>{const y=$N(e,g,n);x=Ht(x);const w=o.childContextForFieldPath(y);if(x instanceof sf)u.push(y);else{const S=yu(x,w);S!=null&&(u.push(y),h.set(y,S))}}));const p=new gs(u);return new BN(h,p,o.fieldTransforms)}function nI(s,e,n,i,o,u){const h=s.createContext(1,e,n),p=[yo(e,i,n)],g=[o];if(u.length%2!=0)throw new Ae(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)p.push(yo(e,u[S])),g.push(u[S+1]);const x=[],y=ns.empty();for(let S=p.length-1;S>=0;--S)if(!GN(x,p[S])){const C=p[S];let H=g[S];H=Ht(H);const B=h.childContextForFieldPath(C);if(H instanceof sf)x.push(C);else{const V=yu(H,B);V!=null&&(x.push(C),y.set(C,V))}}const w=new gs(x);return new BN(y,w,h.fieldTransforms)}function sI(s,e,n,i=!1){return yu(n,s.createContext(i?4:3,e))}function yu(s,e){if(HN(s=Ht(s)))return f0("Unsupported field value:",e,s),qN(s,e);if(s instanceof tf)return(function(i,o){if(!zN(o.dataSource))throw o.createError(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,o){const u=[];let h=0;for(const p of i){let g=yu(p,o.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=Ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return LR(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Tt.fromDate(i);return{timestampValue:Th(o.serializer,u)}}if(i instanceof Tt){const u=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Th(o.serializer,u)}}if(i instanceof Ca)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Os)return{bytesValue:cN(o.serializer,i._byteString)};if(i instanceof Jt){const u=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Gg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Js)return(function(h,p){const g=h instanceof Js?h.toArray():h;return{mapValue:{fields:{[L1]:{stringValue:U1},[wh]:{arrayValue:{values:g.map((y=>{if(typeof y!="number")throw p.createError("VectorValues must only contain numeric values.");return Fg(p.serializer,y)}))}}}}}})(i,o);if(gN(i))return i._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Bh(i)}`)})(s,e)}function qN(s,e){const n={};return I1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xr(s,((i,o)=>{const u=yu(o,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function HN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Tt||s instanceof Ca||s instanceof Os||s instanceof Jt||s instanceof tf||s instanceof Js||gN(s))}function f0(s,e,n){if(!HN(n)||!R1(n)){const i=Bh(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function yo(s,e,n){if((e=Ht(e))instanceof u0)return e._internalPath;if(typeof e=="string")return $N(s,e);throw kh("Field path arguments must be of type string or ",s,!1,void 0,n)}const aI=new RegExp("[~\\*/\\[\\]]");function $N(s,e,n){if(e.search(aI)>=0)throw kh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new u0(...e.split("."))._internalPath}catch{throw kh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function kh(s,e,n,i,o){const u=i&&!i.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new Ae(pe.INVALID_ARGUMENT,p+s+g)}function GN(s,e){return s.some((n=>n.isEqual(e)))}class iI{convertValue(e,n="none"){switch(cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return an(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return xr(e,((o,u)=>{i[o]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[wh].arrayValue?.values?.map((i=>an(i.doubleValue)));return new Js(n)}convertGeoPoint(e){return new Ca(an(e.latitude),an(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=qh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Jc(e));default:return null}}convertTimestamp(e){const n=lr(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Pt.fromString(e);jt(pN(i),9688,{name:e});const o=new Zc(i.get(1),i.get(3)),u=new qe(i.popFirst(5));return o.isEqual(n)||ci(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class m0 extends iI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Os(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function p0(){return new h0("serverTimestamp")}const O_="@firebase/firestore",V_="4.10.0";function P_(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class YN{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(yo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rI extends YN{data(){return super.data()}}function KN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ae(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g0{}class lI extends g0{}function ys(s,e,...n){let i=[];e instanceof g0&&i.push(e),i=i.concat(n),(function(u){const h=u.filter((g=>g instanceof x0)).length,p=u.filter((g=>g instanceof af)).length;if(h>1||h>0&&p>0)throw new Ae(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class af extends lI{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new af(e,n,i)}_apply(e){const n=this._parse(e);return QN(e._query,n),new fl(e.firestore,e.converter,Xp(e._query,n))}_parse(e){const n=nf(e.firestore);return(function(u,h,p,g,x,y,w){let S;if(x.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Ae(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){U_(w,y);const H=[];for(const B of w)H.push(L_(g,u,B));S={arrayValue:{values:H}}}else S=L_(g,u,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||U_(w,y),S=sI(p,h,w,y==="in"||y==="not-in");return pn.create(x,y,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ss(s,e,n){const i=e,o=yo("where",s);return af._create(o,i,n)}class x0 extends g0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new x0(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:ea.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const p=u.getFlattenedFilters();for(const g of p)QN(h,g),h=Xp(h,g)})(e._query,n),new fl(e.firestore,e.converter,Xp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function L_(s,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new Ae(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Y1(e)&&n.indexOf("/")!==-1)throw new Ae(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Pt.fromString(n));if(!qe.isDocumentKey(i))throw new Ae(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Jv(s,new qe(i))}if(n instanceof Jt)return Jv(s,n._key);throw new Ae(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bh(n)}.`)}function U_(s,e){if(!Array.isArray(s)||s.length===0)throw new Ae(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function QN(s,e){const n=(function(o,u){for(const h of o)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ae(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ae(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function WN(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class Pc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kr extends YN{constructor(e,n,i,o,u,h){super(e,n,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(yo("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Kr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Kr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kr._jsonSchema={type:gn("string",Kr._jsonSchemaVersion),bundleSource:gn("string","DocumentSnapshot"),bundleName:gn("string"),bundle:gn("string")};class uh extends Kr{data(e={}){return super.data(e)}}class Qr{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Pc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new uh(this._firestore,this._userDataWriter,i.key,i,new Pc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ae(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const g=new uh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Pc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new uh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Pc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let x=-1,y=-1;return p.type!==0&&(x=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),y=h.indexOf(p.doc.key)),{type:oI(p.type),doc:g,oldIndex:x,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ae(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Qr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke(61501,{type:s})}}Qr._jsonSchemaVersion="firestore/querySnapshot/1.0",Qr._jsonSchema={type:gn("string",Qr._jsonSchemaVersion),bundleSource:gn("string","QuerySnapshot"),bundleName:gn("string"),bundle:gn("string")};function Np(s){s=as(s,Jt);const e=as(s.firestore,di),n=ef(e);return Hk(n,s._key).then((i=>XN(e,s,i)))}function vs(s){s=as(s,fl);const e=as(s.firestore,di),n=ef(e),i=new m0(e);return KN(s._query),$k(n,s._query).then((o=>new Qr(e,i,s,o)))}function Ep(s,e,n){s=as(s,Jt);const i=as(s.firestore,di),o=WN(s.converter,e),u=nf(i);return rf(i,[FN(u,"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Vs.none())])}function st(s,e,n,...i){s=as(s,Jt);const o=as(s.firestore,di),u=nf(o);let h;return h=typeof(e=Ht(e))=="string"||e instanceof u0?nI(u,"updateDoc",s._key,e,n,i):tI(u,"updateDoc",s._key,e),rf(o,[h.toMutation(s._key,Vs.exists(!0))])}function cI(s){return rf(as(s.firestore,di),[new qg(s._key,Vs.none())])}function hi(s,e){const n=as(s.firestore,di),i=Qe(s),o=WN(s.converter,e),u=nf(s.firestore);return rf(n,[FN(u,"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Vs.exists(!1))]).then((()=>i))}function Wt(s,...e){s=Ht(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||P_(e[i])||(n=e[i++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(P_(e[i])){const x=e[i];e[i]=x.next?.bind(x),e[i+1]=x.error?.bind(x),e[i+2]=x.complete?.bind(x)}let u,h,p;if(s instanceof Jt)h=as(s.firestore,di),p=Hh(s._key.path),u={next:x=>{e[i]&&e[i](XN(h,s,x))},error:e[i+1],complete:e[i+2]};else{const x=as(s,fl);h=as(x.firestore,di),p=x._query;const y=new m0(h);u={next:w=>{e[i]&&e[i](new Qr(h,y,x,w))},error:e[i+1],complete:e[i+2]},KN(s._query)}const g=ef(h);return qk(g,p,o,u)}function rf(s,e){const n=ef(s);return Gk(n,e)}function XN(s,e,n){const i=n.docs.get(e._key),o=new m0(s);return new Kr(s,o,e._key,i,new Pc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){$C(cl),Jr(new ir("firestore",((i,{instanceIdentifier:o,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new di(new KC(i.getProvider("auth-internal")),new XC(h,i.getProvider("app-check-internal")),mR(h,o),h);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Ea(O_,V_,e),Ea(O_,V_,"esm2020")})();const JN="firebasestorage.googleapis.com",ZN="storageBucket",uI=120*1e3,dI=600*1e3;class en extends Da{constructor(e,n,i=0){super(Sp(e),`Firebase Storage: ${n} (${Sp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,en.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zt||(Zt={}));function Sp(s){return"storage/"+s}function b0(){const s="An unknown error occurred, please check the error payload for server response.";return new en(Zt.UNKNOWN,s)}function hI(s){return new en(Zt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function fI(s){return new en(Zt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new en(Zt.UNAUTHENTICATED,s)}function pI(){return new en(Zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gI(s){return new en(Zt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function xI(){return new en(Zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bI(){return new en(Zt.CANCELED,"User canceled the upload/download.")}function yI(s){return new en(Zt.INVALID_URL,"Invalid URL '"+s+"'.")}function vI(s){return new en(Zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function _I(){return new en(Zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZN+"' property when initializing the app?")}function wI(){return new en(Zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NI(){return new en(Zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function EI(s){return new en(Zt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function og(s){return new en(Zt.INVALID_ARGUMENT,s)}function e2(){return new en(Zt.APP_DELETED,"The Firebase app was deleted.")}function SI(s){return new en(Zt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $c(s,e){return new en(Zt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Rc(s){throw new en(Zt.INTERNAL_ERROR,"Internal error: "+s)}class xs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=xs.makeFromUrl(e,n)}catch{return new xs(e,"")}if(i.path==="")return i;throw vI(e)}static makeFromUrl(e,n){let i=null;const o="([A-Za-z0-9.\\-_]+)";function u(be){be.path.charAt(be.path.length-1)==="/"&&(be.path_=be.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+o+h,"i"),g={bucket:1,path:3};function x(be){be.path_=decodeURIComponent(be.path)}const y="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${y}/b/${o}/o${S}`,"i"),H={bucket:1,path:3},B=n===JN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",z=new RegExp(`^https?://${B}/${o}/${V}`,"i"),W=[{regex:p,indices:g,postModify:u},{regex:C,indices:H,postModify:x},{regex:z,indices:{bucket:1,path:2},postModify:x}];for(let be=0;be<W.length;be++){const ge=W[be],oe=ge.regex.exec(e);if(oe){const A=oe[ge.indices.bucket];let j=oe[ge.indices.path];j||(j=""),i=new xs(A,j),ge.postModify(i);break}}if(i==null)throw yI(e);return i}}class TI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function jI(s,e,n){let i=1,o=null,u=null,h=!1,p=0;function g(){return p===2}let x=!1;function y(...V){x||(x=!0,e.apply(null,V))}function w(V){o=setTimeout(()=>{o=null,s(C,g())},V)}function S(){u&&clearTimeout(u)}function C(V,...z){if(x){S();return}if(V){S(),y.call(null,V,...z);return}if(g()||h){S(),y.call(null,V,...z);return}i<64&&(i*=2);let W;p===1?(p=2,W=0):W=(i+Math.random())*1e3,w(W)}let H=!1;function B(V){H||(H=!0,S(),!x&&(o!==null?(V||(p=2),clearTimeout(o),w(0)):V||(p=1)))}return w(0),u=setTimeout(()=>{h=!0,B(!0)},n),B}function AI(s){s(!1)}function CI(s){return s!==void 0}function RI(s){return typeof s=="object"&&!Array.isArray(s)}function y0(s){return typeof s=="string"||s instanceof String}function B_(s){return v0()&&s instanceof Blob}function v0(){return typeof Blob<"u"}function z_(s,e,n,i){if(i<e)throw og(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw og(`Invalid value for '${s}'. Expected ${n} or less.`)}function lf(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function t2(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const o=e(i)+"="+e(s[i]);n=n+o+"&"}return n=n.slice(0,-1),n}var Wr;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Wr||(Wr={}));function kI(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||o||u}class II{constructor(e,n,i,o,u,h,p,g,x,y,w,S=!0,C=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=x,this.progressCallback_=y,this.connectionFactory_=w,this.retry=S,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,B)=>{this.resolve_=H,this.reject_=B,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Qd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,x=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,x)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===Wr.NO_ERROR,g=u.getStatus();if(!p||kI(g,this.additionalRetryCodes_)&&this.retry){const y=u.getErrorCode()===Wr.ABORT;i(!1,new Qd(!1,null,y));return}const x=this.successCodes_.indexOf(g)!==-1;i(!0,new Qd(x,u))})},n=(i,o)=>{const u=this.resolve_,h=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());CI(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=b0();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(o.canceled){const g=this.appDelete_?e2():bI();h(g)}else{const g=xI();h(g)}};this.canceled_?n(!1,new Qd(!1,null,!0)):this.backoffId_=jI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function DI(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function MI(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OI(s,e){e&&(s["X-Firebase-GMPID"]=e)}function VI(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function PI(s,e,n,i,o,u,h=!0,p=!1){const g=t2(s.urlParams),x=s.url+g,y=Object.assign({},s.headers);return OI(y,e),DI(y,n),MI(y,u),VI(y,i),new II(x,s.method,y,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,p)}function LI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UI(...s){const e=LI();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(v0())return new Blob(s);throw new en(Zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BI(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function zI(s){if(typeof atob>"u")throw EI("base-64");return atob(s)}const Na={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Tp{constructor(e,n){this.data=e,this.contentType=n||null}}function FI(s,e){switch(s){case Na.RAW:return new Tp(n2(e));case Na.BASE64:case Na.BASE64URL:return new Tp(s2(s,e));case Na.DATA_URL:return new Tp(HI(e),$I(e))}throw b0()}function n2(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++n);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function qI(s){let e;try{e=decodeURIComponent(s)}catch{throw $c(Na.DATA_URL,"Malformed data URL.")}return n2(e)}function s2(s,e){switch(s){case Na.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw $c(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Na.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw $c(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zI(e)}catch(o){throw o.message.includes("polyfill")?o:$c(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}class a2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw $c(Na.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=GI(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function HI(s){const e=new a2(s);return e.base64?s2(Na.BASE64,e.rest):qI(e.rest)}function $I(s){return new a2(s).contentType}function GI(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Xi{constructor(e,n){let i=0,o="";B_(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(B_(this.data_)){const i=this.data_,o=BI(i,e,n);return o===null?null:new Xi(o)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Xi(i,!0)}}static getBlob(...e){if(v0()){const n=e.map(i=>i instanceof Xi?i.data_:i);return new Xi(UI.apply(null,n))}else{const n=e.map(h=>y0(h)?FI(Na.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const o=new Uint8Array(i);let u=0;return n.forEach(h=>{for(let p=0;p<h.length;p++)o[u++]=h[p]}),new Xi(o,!0)}}uploadData(){return this.data_}}function i2(s){let e;try{e=JSON.parse(s)}catch{return null}return RI(e)?e:null}function YI(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function KI(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function r2(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function QI(s,e){return e}class Yn{constructor(e,n,i,o){this.server=e,this.local=n||e,this.writable=!!i,this.xform=o||QI}}let Wd=null;function WI(s){return!y0(s)||s.length<2?s:r2(s)}function l2(){if(Wd)return Wd;const s=[];s.push(new Yn("bucket")),s.push(new Yn("generation")),s.push(new Yn("metageneration")),s.push(new Yn("name","fullPath",!0));function e(u,h){return WI(h)}const n=new Yn("name");n.xform=e,s.push(n);function i(u,h){return h!==void 0?Number(h):h}const o=new Yn("size");return o.xform=i,s.push(o),s.push(new Yn("timeCreated")),s.push(new Yn("updated")),s.push(new Yn("md5Hash",null,!0)),s.push(new Yn("cacheControl",null,!0)),s.push(new Yn("contentDisposition",null,!0)),s.push(new Yn("contentEncoding",null,!0)),s.push(new Yn("contentLanguage",null,!0)),s.push(new Yn("contentType",null,!0)),s.push(new Yn("metadata","customMetadata",!0)),Wd=s,Wd}function XI(s,e){function n(){const i=s.bucket,o=s.fullPath,u=new xs(i,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function JI(s,e,n){const i={};i.type="file";const o=n.length;for(let u=0;u<o;u++){const h=n[u];i[h.local]=h.xform(i,e[h.server])}return XI(i,s),i}function o2(s,e,n){const i=i2(e);return i===null?null:JI(s,i,n)}function ZI(s,e,n,i){const o=i2(e);if(o===null||!y0(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(x=>{const y=s.bucket,w=s.fullPath,S="/b/"+h(y)+"/o/"+h(w),C=lf(S,n,i),H=t2({alt:"media",token:x});return C+H})[0]}function e6(s,e){const n={},i=e.length;for(let o=0;o<i;o++){const u=e[o];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}class _0{constructor(e,n,i,o){this.url=e,this.method=n,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function c2(s){if(!s)throw b0()}function t6(s,e){function n(i,o){const u=o2(s,o,e);return c2(u!==null),u}return n}function n6(s,e){function n(i,o){const u=o2(s,o,e);return c2(u!==null),ZI(u,o,s.host,s._protocol)}return n}function u2(s){function e(n,i){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=pI():o=mI():n.getStatus()===402?o=fI(s.bucket):n.getStatus()===403?o=gI(s.path):o=i,o.status=n.getStatus(),o.serverResponse=i.serverResponse,o}return e}function d2(s){const e=u2(s);function n(i,o){let u=e(i,o);return i.getStatus()===404&&(u=hI(s.path)),u.serverResponse=o.serverResponse,u}return n}function s6(s,e,n){const i=e.fullServerUrl(),o=lf(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new _0(o,u,n6(s,n),h);return p.errorHandler=d2(e),p}function a6(s,e){const n=e.fullServerUrl(),i=lf(n,s.host,s._protocol),o="DELETE",u=s.maxOperationRetryTime;function h(g,x){}const p=new _0(i,o,h,u);return p.successCodes=[200,204],p.errorHandler=d2(e),p}function i6(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function r6(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=i6(null,e)),i}function l6(s,e,n,i,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let W="";for(let be=0;be<2;be++)W=W+Math.random().toString().slice(2);return W}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const x=r6(e,i,o),y=e6(x,n),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+g+`\r
Content-Type: `+x.contentType+`\r
\r
`,S=`\r
--`+g+"--",C=Xi.getBlob(w,i,S);if(C===null)throw wI();const H={name:x.fullPath},B=lf(u,s.host,s._protocol),V="POST",z=s.maxUploadRetryTime,Y=new _0(B,V,t6(s,n),z);return Y.urlParams=H,Y.headers=h,Y.body=C.uploadData(),Y.errorHandler=u2(e),Y}class o6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,o,u){if(this.sent_)throw Rc("cannot .send() more than once");if(mr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Rc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class c6 extends o6{initXhr(){this.xhr_.responseType="text"}}function w0(){return new c6}class sl{constructor(e,n){this._service=e,n instanceof xs?this._location=n:this._location=xs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new sl(e,n)}get root(){const e=new xs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return r2(this._location.path)}get storage(){return this._service}get parent(){const e=YI(this._location.path);if(e===null)return null;const n=new xs(this._location.bucket,e);return new sl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw SI(e)}}function u6(s,e,n){s._throwIfRoot("uploadBytes");const i=l6(s.storage,s._location,l2(),new Xi(e,!0),n);return s.storage.makeRequestWithTokens(i,w0).then(o=>({metadata:o,ref:s}))}function d6(s){s._throwIfRoot("getDownloadURL");const e=s6(s.storage,s._location,l2());return s.storage.makeRequestWithTokens(e,w0).then(n=>{if(n===null)throw NI();return n})}function h6(s){s._throwIfRoot("deleteObject");const e=a6(s.storage,s._location);return s.storage.makeRequestWithTokens(e,w0)}function f6(s,e){const n=KI(s._location.path,e),i=new xs(s._location.bucket,n);return new sl(s.storage,i)}function m6(s){return/^[A-Za-z]+:\/\//.test(s)}function p6(s,e){return new sl(s,e)}function h2(s,e){if(s instanceof N0){const n=s;if(n._bucket==null)throw _I();const i=new sl(n,n._bucket);return e!=null?h2(i,e):i}else return e!==void 0?f6(s,e):s}function g6(s,e){if(e&&m6(e)){if(s instanceof N0)return p6(s,e);throw og("To use ref(service, url), the first argument must be a Storage instance.")}else return h2(s,e)}function F_(s,e){const n=e?.[ZN];return n==null?null:xs.makeFromBucketSpec(n,s)}function x6(s,e,n,i={}){s.host=`${e}:${n}`;const o=mr(e);o&&(wg(`https://${s.host}/b`),Ng("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:Mw(u,s.app.options.projectId))}class N0{constructor(e,n,i,o,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=JN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uI,this._maxUploadRetryTime=dI,this._requests=new Set,o!=null?this._bucket=xs.makeFromBucketSpec(o,this._host):this._bucket=F_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xs.makeFromBucketSpec(this._url,e):this._bucket=F_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){z_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){z_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sl(this,e)}_makeRequest(e,n,i,o,u=!0){if(this._deleted)return new TI(e2());{const h=PI(e,this._appId,i,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,o).getPromise()}}const q_="@firebase/storage",H_="0.14.0";const f2="storage";function b6(s,e,n){return s=Ht(s),u6(s,e,n)}function y6(s){return s=Ht(s),d6(s)}function v6(s){return s=Ht(s),h6(s)}function $_(s,e){return s=Ht(s),g6(s,e)}function _6(s=Tg(),e){s=Ht(s);const i=Vh(s,f2).getImmediate({identifier:e}),o=kw("storage");return o&&w6(i,...o),i}function w6(s,e,n,i={}){x6(s,e,n,i)}function N6(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new N0(n,i,o,e,cl)}function E6(){Jr(new ir(f2,N6,"PUBLIC").setMultipleInstances(!0)),Ea(q_,H_,""),Ea(q_,H_,"esm2020")}E6();const S6={apiKey:"AIzaSyC1qZ9fK-6LFBxVWZsAD4dZq-KVg36A7f8",authDomain:"scheduler-65e51.firebaseapp.com",projectId:"scheduler-65e51",storageBucket:"scheduler-65e51.firebasestorage.app",messagingSenderId:"93993791456",appId:"1:93993791456:web:3a777a2da0dad4b8b74585"},E0=Pw(S6),Ne=Wk(E0),al=zC(E0),G_=_6(E0);const m2=(...s)=>s.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();const T6=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const j6=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());const Y_=s=>{const e=j6(s);return e.charAt(0).toUpperCase()+e.slice(1)};var A6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const C6=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const R6=N.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:h,...p},g)=>N.createElement("svg",{ref:g,...A6,width:e,height:e,stroke:s,strokeWidth:i?Number(n)*24/Number(e):n,className:m2("lucide",o),...!u&&!C6(p)&&{"aria-hidden":"true"},...p},[...h.map(([x,y])=>N.createElement(x,y)),...Array.isArray(u)?u:[u]]));const Pe=(s,e)=>{const n=N.forwardRef(({className:i,...o},u)=>N.createElement(R6,{ref:u,iconNode:e,className:m2(`lucide-${T6(Y_(s))}`,`lucide-${s}`,i),...o}));return n.displayName=Y_(s),n};const k6=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],I6=Pe("arrow-down-right",k6);const D6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ra=Pe("arrow-left",D6);const M6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Gc=Pe("arrow-right",M6);const O6=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],V6=Pe("arrow-up-down",O6);const P6=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],L6=Pe("arrow-up-right",P6);const U6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],io=Pe("bell",U6);const B6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],jp=Pe("calendar-check",B6);const z6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],K_=Pe("calendar-days",z6);const F6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Vt=Pe("calendar",F6);const q6=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],H6=Pe("camera",q6);const $6=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],p2=Pe("chart-column",$6);const G6=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Y6=Pe("chart-pie",G6);const K6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],sr=Pe("check",K6);const Q6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],cg=Pe("chevron-down",Q6);const W6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],g2=Pe("chevron-left",W6);const X6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],S0=Pe("chevron-right",X6);const J6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ug=Pe("chevron-up",J6);const Z6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bs=Pe("circle-check-big",Z6);const eD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],wa=Pe("circle-x",eD);const tD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jn=Pe("clock",tD);const nD=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],sD=Pe("coffee",nD);const aD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],iD=Pe("copy",aD);const rD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],lD=Pe("dollar-sign",rD);const oD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cD=Pe("eye",oD);const uD=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],dD=Pe("ghost",uD);const hD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],fD=Pe("globe",hD);const mD=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],T0=Pe("heart",mD);const pD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],gD=Pe("image",pD);const xD=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],dg=Pe("list-ordered",xD);const bD=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],Ih=Pe("list-plus",bD);const yD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ap=Pe("loader-circle",yD);const vD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],x2=Pe("lock",vD);const _D=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],wD=Pe("log-out",_D);const ND=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hg=Pe("mail",ND);const ED=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],SD=Pe("message-square",ED);const TD=[["path",{d:"M5 12h14",key:"1ays0h"}]],jD=Pe("minus",TD);const AD=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],b2=Pe("party-popper",AD);const CD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],y2=Pe("pen-line",CD);const RD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],fg=Pe("phone",RD);const kD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Cp=Pe("play",kD);const ID=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],hr=Pe("plus",ID);const DD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],v2=Pe("refresh-cw",DD);const MD=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],ar=Pe("repeat",MD);const OD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],VD=Pe("save",OD);const PD=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Ia=Pe("scissors",PD);const LD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],UD=Pe("search",LD);const BD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Rp=Pe("send",BD);const zD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],FD=Pe("settings",zD);const qD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],HD=Pe("sparkles",qD);const $D=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Q_=Pe("star",$D);const GD=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],W_=Pe("sticky-note",GD);const YD=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],is=Pe("tag",YD);const KD=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],_2=Pe("thermometer",KD);const QD=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],w2=Pe("timer",QD);const WD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],au=Pe("trash-2",WD);const XD=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],j0=Pe("trending-up",XD);const JD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],il=Pe("triangle-alert",JD);const ZD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],e3=Pe("user-plus",ZD);const t3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],rl=Pe("user",t3);const n3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Xt=Pe("users",n3);const s3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ll=Pe("x",s3);const a3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],i3=Pe("zap",a3);function X_({className:s=""}){return l.jsxs(et,{to:"/",className:`flex items-center gap-2.5 ${s}`,children:[l.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:l.jsx(Ia,{className:"w-[18px] h-[18px] text-white"})}),l.jsxs("span",{className:"text-xl font-extrabold tracking-tight text-slate-900",children:["Book",l.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function r3(){return l.jsxs("div",{className:"min-h-screen bg-white",children:[l.jsx("nav",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-100",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[l.jsx(X_,{}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(et,{to:"/login",className:"px-4 py-2.5 text-sm font-semibold text-slate-600 hover:text-slate-900 transition-colors",children:"Sign In"}),l.jsxs(et,{to:"/register",className:"hidden sm:inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:["Get Started Free",l.jsx(Gc,{className:"w-4 h-4"})]}),l.jsx(et,{to:"/register",className:"sm:hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all",children:"Start Free"})]})]})}),l.jsxs("section",{className:"relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 -z-10",children:[l.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-50 rounded-full blur-3xl opacity-60 -translate-y-1/2 translate-x-1/3"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-violet-50 rounded-full blur-3xl opacity-50 translate-y-1/3 -translate-x-1/4"})]}),l.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 pt-16 sm:pt-24 pb-16 sm:pb-20",children:l.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[l.jsxs("div",{className:"animate-fade-in-up",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 bg-blue-50 border border-blue-100 rounded-full text-sm font-medium text-blue-700 mb-6",children:[l.jsx(HD,{className:"w-3.5 h-3.5"}),"Free for beauty professionals"]}),l.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-[3.5rem] font-extrabold text-slate-900 leading-[1.1] mb-6 tracking-tight",children:["Online booking",l.jsx("br",{}),l.jsx("span",{className:"text-blue-600",children:"made effortless"})]}),l.jsx("p",{className:"text-lg sm:text-xl text-slate-600 leading-relaxed mb-8 max-w-lg",children:"Let clients book 24/7. Manage your team, services, and schedule from one beautiful dashboard. No more phone tag."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-10",children:[l.jsxs(et,{to:"/register",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-base shadow-lg shadow-blue-600/25 hover:shadow-xl hover:shadow-blue-600/30 transition-all hover:-translate-y-0.5",children:["Start for Free",l.jsx(Gc,{className:"w-4 h-4"})]}),l.jsx("a",{href:"#how-it-works",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-base border border-slate-200 transition-all",children:"See How It Works"})]}),l.jsxs("div",{className:"flex items-center gap-5 text-sm text-slate-500",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(bs,{className:"w-4 h-4 text-emerald-500"}),l.jsx("span",{children:"Free to use"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(bs,{className:"w-4 h-4 text-emerald-500"}),l.jsx("span",{children:"No credit card"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(bs,{className:"w-4 h-4 text-emerald-500"}),l.jsx("span",{children:"Setup in 2 min"})]})]})]}),l.jsxs("div",{className:"relative animate-fade-in-up",style:{animationDelay:"150ms"},children:[l.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl shadow-slate-200/60 border border-slate-200/80 overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-slate-50 border-b border-slate-100",children:[l.jsxs("div",{className:"flex gap-1.5",children:[l.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),l.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),l.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"})]}),l.jsx("div",{className:"flex-1 mx-4",children:l.jsx("div",{className:"bg-white border border-slate-200 rounded-lg px-3 py-1.5 text-xs text-slate-400 font-mono",children:"bookflow.app/shop/janes-salon"})})]}),l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-sm font-bold",children:"J"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-bold text-slate-900",children:"Jane's Salon"}),l.jsx("div",{className:"text-xs text-slate-500",children:"Book your next appointment"})]})]}),l.jsx("div",{className:"space-y-2.5",children:[{name:"Haircut & Style",price:"$45",time:"45 min",color:"bg-blue-500"},{name:"Color Treatment",price:"$120",time:"2 hours",color:"bg-violet-500"},{name:"Blowout",price:"$35",time:"30 min",color:"bg-emerald-500"}].map(s=>l.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-slate-50 rounded-xl border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/50 transition-all cursor-default",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-2 h-8 ${s.color} rounded-full`}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold text-slate-800",children:s.name}),l.jsx("div",{className:"text-xs text-slate-500",children:s.time})]})]}),l.jsx("div",{className:"text-sm font-bold text-slate-900",children:s.price})]},s.name))})]})]}),l.jsxs("div",{className:"absolute -bottom-4 -left-4 bg-white rounded-xl shadow-lg shadow-slate-200/60 border border-slate-100 px-4 py-3 flex items-center gap-3 animate-float",children:[l.jsx("div",{className:"w-9 h-9 bg-emerald-100 rounded-full flex items-center justify-center",children:l.jsx(bs,{className:"w-5 h-5 text-emerald-600"})}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-slate-500",children:"Booking confirmed"}),l.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Tomorrow at 2:00 PM"})]})]})]})]})})]}),l.jsx("section",{className:"border-y border-slate-100 bg-slate-50/50",children:l.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-8 sm:py-10",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8 sm:gap-16 text-center",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"500+"}),l.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Businesses trust BookFlow"})]}),l.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"10,000+"}),l.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Appointments booked"})]}),l.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-center gap-1 text-2xl sm:text-3xl font-extrabold text-slate-900",children:["4.9 ",l.jsx(Q_,{className:"w-5 h-5 text-amber-400 fill-amber-400"})]}),l.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Average rating"})]})]})})}),l.jsx("section",{className:"py-20 sm:py-28",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[l.jsxs("div",{className:"text-center mb-14",children:[l.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Everything you need to run your bookings"}),l.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Built specifically for beauty professionals, salons, and service businesses. Simple, powerful, and free."})]}),l.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 stagger-children",children:[{icon:l.jsx(Vt,{className:"w-6 h-6"}),title:"Smart Scheduling",desc:"Set weekly hours with breaks. Slots auto-generate so your calendar is always up to date.",color:"bg-blue-100 text-blue-600"},{icon:l.jsx(Xt,{className:"w-6 h-6"}),title:"Multi-Staff Support",desc:"Add your whole team. Each member gets their own schedule, hours, and bookings.",color:"bg-violet-100 text-violet-600"},{icon:l.jsx(i3,{className:"w-6 h-6"}),title:"Instant Booking",desc:"Clients pick a service, choose a stylist, and book  all in under a minute.",color:"bg-amber-100 text-amber-600"},{icon:l.jsx(fD,{className:"w-6 h-6"}),title:"Your Own Booking Page",desc:"Get a unique link to share anywhere. No app downloads needed for your clients.",color:"bg-emerald-100 text-emerald-600"}].map(s=>l.jsxs("div",{className:"group bg-white rounded-2xl p-7 border border-slate-200/80 hover:border-slate-300 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[l.jsx("div",{className:`w-12 h-12 ${s.color} rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300`,children:s.icon}),l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:s.title}),l.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:s.desc})]},s.title))})]})}),l.jsx("section",{id:"how-it-works",className:"py-20 sm:py-28 bg-slate-50 border-y border-slate-100",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[l.jsxs("div",{className:"text-center mb-14",children:[l.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Up and running in minutes"}),l.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Three simple steps to start accepting online bookings today."})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8 lg:gap-12 relative",children:[l.jsx("div",{className:"hidden md:block absolute top-14 left-[calc(16.67%+1rem)] right-[calc(16.67%+1rem)] h-px bg-gradient-to-r from-blue-200 via-violet-200 to-emerald-200"}),[{step:"1",title:"Create your account",desc:"Sign up free in 30 seconds. Name your shop and you're in.",color:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/30"},{step:"2",title:"Set up your shop",desc:"Add your services, team, and weekly hours. BookFlow handles the rest.",color:"from-violet-500 to-violet-600",shadow:"shadow-violet-500/30"},{step:"3",title:"Share your link",desc:"Send your booking page to clients. They book, you get notified.",color:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/30"}].map(s=>l.jsxs("div",{className:"relative text-center",children:[l.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${s.color} rounded-2xl flex items-center justify-center mx-auto mb-6 text-white text-xl font-extrabold shadow-lg ${s.shadow} relative z-10`,children:s.step}),l.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:s.title}),l.jsx("p",{className:"text-slate-600 leading-relaxed max-w-xs mx-auto",children:s.desc})]},s.step))]})]})}),l.jsx("section",{className:"py-20 sm:py-28",children:l.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[l.jsxs("div",{className:"text-center mb-14",children:[l.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Loved by professionals"}),l.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"See why salons and stylists are switching to BookFlow."})]}),l.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{quote:"BookFlow replaced our paper appointment book. Clients love being able to book online anytime.",name:"Maria Santos",role:"Salon Owner",initials:"MS",color:"bg-blue-100 text-blue-700"},{quote:"Setting up was incredibly easy. I had my booking page live and shared with clients in under 10 minutes.",name:"David Chen",role:"Barber",initials:"DC",color:"bg-violet-100 text-violet-700"},{quote:"The multi-staff feature is perfect. Each stylist manages their own schedule and clients can pick who they want.",name:"Lisa Park",role:"Studio Manager",initials:"LP",color:"bg-emerald-100 text-emerald-700"}].map(s=>l.jsxs("div",{className:"bg-white rounded-2xl p-7 border border-slate-200/80 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[l.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(5)].map((e,n)=>l.jsx(Q_,{className:"w-4 h-4 text-amber-400 fill-amber-400"},n))}),l.jsxs("p",{className:"text-slate-700 leading-relaxed mb-6",children:['"',s.quote,'"']}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 ${s.color} rounded-full flex items-center justify-center text-sm font-bold`,children:s.initials}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s.name}),l.jsx("div",{className:"text-xs text-slate-500",children:s.role})]})]})]},s.name))})]})}),l.jsxs("section",{className:"py-20 sm:py-28 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 -z-0",children:[l.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-0 right-1/4 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl"})]}),l.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto px-5 sm:px-8 text-center",children:[l.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold text-white mb-6 leading-tight",children:"Ready to streamline your bookings?"}),l.jsx("p",{className:"text-lg text-slate-400 mb-10 max-w-xl mx-auto",children:"Join hundreds of professionals who have ditched the old appointment book. Set up in minutes, free forever."}),l.jsxs(et,{to:"/register",className:"inline-flex items-center gap-2 px-8 py-4 bg-white hover:bg-slate-50 text-slate-900 rounded-xl font-bold text-lg transition-all hover:shadow-xl hover:shadow-white/10 hover:-translate-y-0.5",children:["Create Your Free Account",l.jsx(Gc,{className:"w-5 h-5"})]})]})]}),l.jsx("footer",{className:"bg-white border-t border-slate-100",children:l.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-10",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[l.jsx(X_,{}),l.jsxs("div",{className:"flex items-center gap-6 text-sm text-slate-500",children:[l.jsx(et,{to:"/register",className:"hover:text-slate-900 transition-colors",children:"Sign Up"}),l.jsx("span",{className:"text-slate-200",children:""}),l.jsx(et,{to:"/login",className:"hover:text-slate-900 transition-colors",children:"Sign In"}),l.jsx("span",{className:"text-slate-200",children:""}),l.jsx("a",{href:"#how-it-works",className:"hover:text-slate-900 transition-colors",children:"How It Works"})]}),l.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," BookFlow. All rights reserved."]})]})})})]})}function l3(s){return s.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function o3(){const s=wo(),[e,n]=N.useState(""),[i,o]=N.useState(""),[u,h]=N.useState(""),[p,g]=N.useState(""),[x,y]=N.useState(!1),w=l3(e),S=async C=>{if(C.preventDefault(),g(""),!w){g("Please enter a valid shop name");return}if(u.length<6){g("Password must be at least 6 characters");return}y(!0);try{const H=ys(Je(Ne,"shops"),ss("slug","==",w));if(!(await vs(H)).empty){g("A shop with that name already exists. Please choose a different name."),y(!1);return}const z=(await T5(al,i,u)).user;await hi(Je(Ne,"shops"),{name:e.trim(),slug:w,ownerUid:z.uid,ownerEmail:i,createdAt:p0()}),s(`/shop/${w}/dashboard`)}catch(H){switch(H.code){case"auth/email-already-in-use":g("An account with this email already exists");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/weak-password":g("Password must be at least 6 characters");break;default:g("Registration failed. Please try again.")}}finally{y(!1)}};return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:l.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[l.jsx("div",{className:"text-center mb-8",children:l.jsxs(et,{to:"/",className:"inline-flex items-center gap-2.5",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:l.jsx(Ia,{className:"w-5 h-5 text-white"})}),l.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",l.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Create your shop"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Set up your booking page in seconds  it's free"})]}),l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Shop Name"}),l.jsx("input",{type:"text",value:e,onChange:C=>{n(C.target.value),g("")},placeholder:"Jane's Salon",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),w&&l.jsxs("p",{className:"mt-1.5 text-xs text-slate-400",children:["Your page: ",l.jsxs("span",{className:"font-mono text-blue-600 font-medium",children:["bookflow.app/shop/",w]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:C=>{o(C.target.value),g("")},placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),l.jsx("input",{type:"password",value:u,onChange:C=>{h(C.target.value),g("")},placeholder:"At least 6 characters",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&l.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[l.jsx("span",{children:""})," ",p]})]}),l.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Creating your shop"]}):l.jsxs(l.Fragment,{children:["Create Shop",l.jsx(Gc,{className:"w-4 h-4"})]})})]}),l.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:l.jsxs("p",{className:"text-sm text-slate-500",children:["Already have an account?"," ",l.jsx(et,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Sign in"})]})})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs(et,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[l.jsx(Ra,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function c3({user:s}){const e=wo(),[n,i]=N.useState(""),[o,u]=N.useState(""),[h,p]=N.useState(""),[g,x]=N.useState(!1);N.useState(()=>{if(!s)return;(async()=>{const S=ys(Je(Ne,"shops"),ss("ownerUid","==",s.uid)),C=await vs(S);if(!C.empty){const H=C.docs[0].data();e(`/shop/${H.slug}/dashboard`,{replace:!0})}})()},[s,e]);const y=async w=>{w.preventDefault(),p(""),x(!0);try{const C=(await u1(al,n,o)).user,H=ys(Je(Ne,"shops"),ss("ownerUid","==",C.uid)),B=await vs(H);if(B.empty){p("No shop found for this account. Need to create one?"),await al.signOut(),x(!1);return}const V=B.docs[0].data();e(`/shop/${V.slug}/dashboard`,{replace:!0})}catch(S){switch(S.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":p("Invalid email or password");break;case"auth/invalid-email":p("Please enter a valid email address");break;case"auth/too-many-requests":p("Too many failed attempts. Please try again later.");break;default:p("Login failed. Please try again.")}u("")}finally{x(!1)}};return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:l.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[l.jsx("div",{className:"text-center mb-8",children:l.jsxs(et,{to:"/",className:"inline-flex items-center gap-2.5",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:l.jsx(Ia,{className:"w-5 h-5 text-white"})}),l.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",l.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),l.jsxs("form",{onSubmit:y,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),l.jsx("input",{type:"email",value:n,onChange:w=>{i(w.target.value),p("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),l.jsx("input",{type:"password",value:o,onChange:w=>{u(w.target.value),p("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${h?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),h&&l.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[l.jsx("span",{children:""})," ",h]})]}),l.jsx("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:g?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):l.jsxs(l.Fragment,{children:["Sign In",l.jsx(Gc,{className:"w-4 h-4"})]})})]}),l.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:l.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",l.jsx(et,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs(et,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[l.jsx(Ra,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function N2({availableDates:s,selectedDate:e,onSelectDate:n}){const[i,o]=N.useState(new Date),u=z=>{const Y=z.getFullYear(),W=z.getMonth(),be=new Date(Y,W,1),oe=new Date(Y,W+1,0).getDate(),A=be.getDay();return{daysInMonth:oe,startingDayOfWeek:A,year:Y,month:W}},{daysInMonth:h,startingDayOfWeek:p,year:g,month:x}=u(i),y=()=>{o(new Date(i.getFullYear(),i.getMonth()-1))},w=()=>{o(new Date(i.getFullYear(),i.getMonth()+1))},S=z=>{const Y=`${g}-${String(x+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`;return s.includes(Y)},C=z=>`${g}-${String(x+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`===e,H=z=>{if(S(z)){const Y=`${g}-${String(x+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`;n(Y)}},B=["January","February","March","April","May","June","July","August","September","October","November","December"],V=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return l.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5 sm:p-6 shadow-sm",children:[l.jsxs("div",{className:"flex justify-between items-center mb-5",children:[l.jsx("button",{onClick:y,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(g2,{className:"w-5 h-5 text-slate-600"})}),l.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[B[x]," ",g]}),l.jsx("button",{onClick:w,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(S0,{className:"w-5 h-5 text-slate-600"})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:V.map(z=>l.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:z},z))}),l.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:p}).map((z,Y)=>l.jsx("div",{},`empty-${Y}`)),Array.from({length:h}).map((z,Y)=>{const W=Y+1,be=S(W),ge=C(W),oe=new Date,A=oe.getDate()===W&&oe.getMonth()===x&&oe.getFullYear()===g;return l.jsxs("button",{onClick:()=>H(W),disabled:!be,className:`
                relative p-2.5 sm:p-3 text-center rounded-lg text-sm font-semibold transition-all duration-200
                ${ge?"bg-blue-600 text-white shadow-md shadow-blue-600/30":be?"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 hover:border-emerald-300 cursor-pointer":A?"text-slate-900 font-bold":"text-slate-300 cursor-not-allowed"}
              `,children:[W,A&&!ge&&l.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]},W)})]}),l.jsxs("div",{className:"mt-4 flex gap-5 text-xs text-slate-500",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3 h-3 bg-emerald-50 border border-emerald-200 rounded"}),l.jsx("span",{children:"Available"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),l.jsx("span",{children:"Selected"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),l.jsx("span",{children:"Today"})]})]})]})}const u3=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"},{key:"saturday",label:"Sat"},{key:"sunday",label:"Sun"}],J_=[{key:"morning",label:"Morning (9AM12PM)",start:"09:00",end:"12:00"},{key:"afternoon",label:"Afternoon (12PM5PM)",start:"12:00",end:"17:00"},{key:"evening",label:"Evening (5PM9PM)",start:"17:00",end:"21:00"},{key:"any",label:"Any time",start:"00:00",end:"23:59"}];function d3(){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="WL";for(let n=0;n<4;n++)e+=s.charAt(Math.floor(Math.random()*s.length));return e}function Z_({shopId:s,slug:e,selectedService:n,selectedStaff:i,staffMembers:o,preferredDate:u,onSuccess:h,onCancel:p}){const[g,x]=N.useState({name:"",email:"",phone:""}),[y,w]=N.useState([]),[S,C]=N.useState("any"),[H,B]=N.useState(!1),[V,z]=N.useState(!1),[Y,W]=N.useState(""),be=oe=>{w(A=>A.includes(oe)?A.filter(j=>j!==oe):[...A,oe])},ge=async oe=>{oe.preventDefault(),B(!0);try{const A=d3(),j=J_.find(q=>q.key===S),I=i&&i!=="any"?i.id:"any",L=i&&i!=="any"?i.name:"Any Available",P={clientName:g.name,clientEmail:g.email,clientPhone:g.phone,serviceId:n?.id||null,serviceName:n?.name||"Any Service",staffId:I,staffName:L,preferredDate:u||null,preferredDays:y.length>0?y:null,preferredTimeRange:j?{start:j.start,end:j.end}:null,status:"waiting",refCode:A,createdAt:new Date().toISOString(),notifiedAt:null,notifiedSlot:null};await hi(Je(Ne,"shops",s,"waitlist"),P),W(A),z(!0),h&&h(A)}catch(A){console.error("Waitlist error:",A)}finally{B(!1)}};return V?l.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg shadow-blue-100/50 p-8 text-center animate-scale-in",children:[l.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(bs,{className:"w-8 h-8 text-blue-600"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"You're on the Waitlist!"}),l.jsxs("p",{className:"text-slate-600 mb-4",children:["We'll notify you when a slot opens up",n?` for ${n.name}`:"","."]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your waitlist reference"}),l.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:Y})]}),l.jsxs("a",{href:`#/shop/${e}/waitlist/${Y}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[l.jsx(jn,{className:"w-4 h-4"}),"Check Waitlist Status"]}),l.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to check your position and get notified"})]}):l.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg p-6 animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:l.jsx(Ih,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Join the Waitlist"}),l.jsx("p",{className:"text-sm text-slate-500",children:"We'll notify you when a slot opens up"})]})]}),l.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),l.jsx("input",{type:"text",value:g.name,onChange:oe=>x({...g,name:oe.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),l.jsx("input",{type:"email",value:g.email,onChange:oe=>x({...g,email:oe.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),l.jsx("input",{type:"tel",value:g.phone,onChange:oe=>x({...g,phone:oe.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Preferred Days ",l.jsx("span",{className:"text-slate-400 font-normal",children:"(optional)"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:u3.map(oe=>l.jsx("button",{type:"button",onClick:()=>be(oe.key),className:`px-3.5 py-2 rounded-lg text-sm font-semibold transition-all border ${y.includes(oe.key)?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:oe.label},oe.key))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Preferred Time"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:J_.map(oe=>l.jsx("button",{type:"button",onClick:()=>C(oe.key),className:`px-3.5 py-2.5 rounded-lg text-sm font-medium transition-all border text-left ${S===oe.key?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:oe.label},oe.key))})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{type:"submit",disabled:H,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:H?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Joining"]}):l.jsxs(l.Fragment,{children:[l.jsx(Ih,{className:"w-4 h-4"}),"Join Waitlist"]})}),p&&l.jsx("button",{type:"button",onClick:p,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})}const h3=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function ro(s){const[e,n]=s.split(":").map(Number);return e*60+n}function ew(s){const e=Math.floor(s/60),n=s%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function f3(s){const e=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function m3(s,e,n,i,o,u){if(!s)return[];const p=new Date(e+"T12:00:00").getDay(),g=h3[p],x=s[g];if(!x||!x.enabled)return[];const y=ro(x.start),w=ro(x.end),S=x.break?ro(x.break.start):null,C=x.break?ro(x.break.end):null,H=n+i,B=[];let V=y;for(;V+n<=w;){const z=V+n;if(S!==null&&C!==null&&V<C&&z>S){V=C;continue}B.push({id:`wh-${o}-${e}-${ew(V)}`,date:e,time:ew(V),duration:n,available:!0,staffId:o,staffName:u,generated:!0}),V+=H}return B}function E2(s,e,n=0,i=4){const o=[],u=new Date;u.setHours(0,0,0,0);const h=new Date(u);h.setDate(h.getDate()+i*7);for(const p of s){if(!p.weeklyHours)continue;const g=new Date(u);for(;g<h;){const x=f3(g),y=m3(p.weeklyHours,x,e,n,p.id,p.name);o.push(...y),g.setDate(g.getDate()+1)}}return o}function S2(s,e,n=0){const i=e.filter(o=>!o.status||o.status==="pending"||o.status==="confirmed");return s.filter(o=>{const u=ro(o.time),h=u+o.duration;return!i.some(g=>{if(o.staffId&&g.staffId&&g.staffId!==o.staffId||g.date!==o.date)return!1;const x=ro(g.time),y=g.serviceDuration||g.duration||o.duration,w=x+y;return!(h+n<=x||w+n<=u)})})}function T2(s,e){const n=new Set(e.map(o=>`${o.staffId||""}-${o.date}-${o.time}`)),i=s.filter(o=>{const u=`${o.staffId||""}-${o.date}-${o.time}`;return!n.has(u)});return[...e,...i]}function Lc({name:s,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const i=(s||"").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return l.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:i||"?"})}function p3(){return l.jsxs(et,{to:"/",className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:l.jsx(Ia,{className:"w-3.5 h-3.5 text-white"})}),l.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",l.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function g3({member:s,onClose:e}){const[n,i]=N.useState(null),o=s.portfolio||[];return N.useEffect(()=>{const u=h=>{h.key==="Escape"&&(n!==null?i(null):e())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[n,e]),l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),l.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-scale-in",children:[l.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 bg-slate-100 hover:bg-slate-200 rounded-full flex items-center justify-center text-slate-600 transition-all z-10",children:l.jsx(X,{className:"w-4 h-4"})}),l.jsxs("div",{className:"p-6 pb-4 border-b border-slate-100",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Lc,{name:s.name,className:"w-14 h-14",bgClass:"bg-violet-100 text-violet-700"}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s.name}),s.role&&l.jsx("p",{className:"text-sm text-violet-600 font-medium",children:s.role})]})]}),s.bio&&l.jsx("p",{className:"mt-3 text-sm text-slate-600 leading-relaxed",children:s.bio})]}),l.jsx("div",{className:"p-6",children:o.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:l.jsx(Image,{className:"w-6 h-6 text-slate-400"})}),l.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet"})]}):l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:o.map((u,h)=>l.jsxs("button",{onClick:()=>i(h),className:"group relative aspect-square rounded-xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5",children:[l.jsx("img",{src:u.url,alt:u.caption||"Portfolio",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),u.caption&&l.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-2.5 pt-6",children:l.jsx("p",{className:"text-xs text-white font-medium truncate",children:u.caption})})]},h))})})]}),n!==null&&o[n]&&l.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90",children:[l.jsx("button",{onClick:()=>i(null),className:"absolute top-4 right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:l.jsx(X,{className:"w-5 h-5"})}),n>0&&l.jsx("button",{onClick:()=>i(n-1),className:"absolute left-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:l.jsx(ChevronLeft,{className:"w-5 h-5"})}),n<o.length-1&&l.jsx("button",{onClick:()=>i(n+1),className:"absolute right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:l.jsx(ChevronRight,{className:"w-5 h-5"})}),l.jsxs("div",{className:"max-w-4xl max-h-[85vh] flex flex-col items-center",children:[l.jsx("img",{src:o[n].url,alt:o[n].caption||"Portfolio",className:"max-w-full max-h-[75vh] object-contain rounded-lg"}),o[n].caption&&l.jsx("p",{className:"mt-3 text-sm text-white/90 font-medium text-center px-4",children:o[n].caption}),l.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[n+1," / ",o.length]})]})]})]})}function x3(){const{slug:s}=No(),[e,n]=N.useState(null),[i,o]=N.useState(null),[u,h]=N.useState(!0),[p,g]=N.useState(!1),[x,y]=N.useState([]),[w,S]=N.useState([]),[C,H]=N.useState(null),[B,V]=N.useState(null),[z,Y]=N.useState([]),[W,be]=N.useState([]),[ge,oe]=N.useState(!1),[A,j]=N.useState(null),[I,L]=N.useState(null),[P,q]=N.useState(""),[D,F]=N.useState(!1),[M,k]=N.useState({name:"",email:"",phone:""}),[K,fe]=N.useState(""),[Se,_e]=N.useState(!1),[O,ne]=N.useState(null),[re,we]=N.useState(!1),[ye,Ie]=N.useState("biweekly"),[ue,ze]=N.useState(null);N.useEffect(()=>{(async()=>{h(!0),g(!1);try{const G=ys(Je(Ne,"shops"),ss("slug","==",s)),de=await vs(G);if(de.empty)g(!0);else{const ce=de.docs[0];n(ce.data()),o(ce.id)}}catch(G){console.error("Error looking up shop:",G),g(!0)}finally{h(!1)}})()},[s]),N.useEffect(()=>{if(!i)return;const R=Wt(Je(Ne,"shops",i,"services"),Me=>{const Te=Me.docs.map(Ce=>({id:Ce.id,...Ce.data()})).filter(Ce=>Ce.active!==!1).sort((Ce,Re)=>(Ce.name||"").localeCompare(Re.name||""));y(Te)}),G=Wt(Je(Ne,"shops",i,"availability"),Me=>{const Te=new Date,Ce=Me.docs.map(Re=>({id:Re.id,...Re.data()})).filter(Re=>new Date(`${Re.date}T${Re.time}`)>Te);Y(Ce)}),de=Wt(Je(Ne,"shops",i,"bookings"),Me=>{const Te=Me.docs.map(Ce=>({id:Ce.id,...Ce.data()}));be(Te)}),ce=Wt(Je(Ne,"shops",i,"staff"),Me=>{const Te=Me.docs.map(Ce=>({id:Ce.id,...Ce.data()})).filter(Ce=>Ce.active!==!1).sort((Ce,Re)=>(Ce.name||"").localeCompare(Re.name||""));S(Te)});return()=>{R(),G(),de(),ce()}},[i]),N.useEffect(()=>{w.length===1?V(w[0]):w.length===0&&V(null)},[w]);const Ue=x.length>0;w.length>0;const Ge=w.length>1,J=e?.bufferMinutes||0,ve=N.useMemo(()=>{const R=new Date;let G=z.filter(Te=>Te.available);if(C&&(G=G.filter(Te=>Te.duration>=C.duration)),B&&B!=="any"&&(G=G.filter(Te=>Te.staffId===B.id||!Te.staffId)),!C)return G;const de=B&&B!=="any"?w.filter(Te=>Te.id===B.id):w,ce=E2(de,C.duration,J,4).filter(Te=>new Date(`${Te.date}T${Te.time}`)>R),Me=T2(ce,G);return S2(Me,W,J)},[z,C,B,w,W,J]),Oe=(R,G,de=3)=>{const ce=[],Me=new Date(R+"T12:00:00"),Te=new Date(Me);Te.setMonth(Te.getMonth()+de);let Ce=new Date(Me);for(G==="weekly"?Ce.setDate(Ce.getDate()+7):G==="biweekly"?Ce.setDate(Ce.getDate()+14):G==="fourweekly"?Ce.setDate(Ce.getDate()+28):G==="monthly"&&Ce.setMonth(Ce.getMonth()+1);Ce<=Te;){const Re=Ce.getFullYear(),rt=String(Ce.getMonth()+1).padStart(2,"0"),ot=String(Ce.getDate()).padStart(2,"0");ce.push(`${Re}-${rt}-${ot}`),G==="weekly"?Ce.setDate(Ce.getDate()+7):G==="biweekly"?Ce.setDate(Ce.getDate()+14):G==="fourweekly"?Ce.setDate(Ce.getDate()+28):G==="monthly"&&Ce.setMonth(Ce.getMonth()+1)}return ce},Ve=N.useMemo(()=>{if(!re||!A)return null;const R=Oe(A.date,ye),G=C?C.duration:A.duration||60,de=B&&B!=="any"?B.id:A.staffId,ce=A.time,Me=W.filter(_n=>!_n.status||_n.status==="pending"||_n.status==="confirmed"),Te=_n=>{const[Hn,wn]=_n.split(":").map(Number);return Hn*60+wn},Ce=Te(ce),Re=Ce+G;let rt=[],ot=[];const $t=new Set;R.forEach(_n=>{Me.some(wn=>{if(de&&wn.staffId&&wn.staffId!==de||wn.date!==_n)return!1;const sa=Te(wn.time),Us=wn.serviceDuration||wn.duration||G,Oa=sa+Us,fi=J||0;return!(Re+fi<=sa||Oa+fi<=Ce)})||$t.has(_n)?ot.push(_n):(rt.push(_n),$t.add(_n))});const Gt=R.length>0?R[R.length-1]:A.date,qn=new Date(Gt+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),na={weekly:"week",biweekly:"2 weeks",fourweekly:"4 weeks",monthly:"month"};return{available:rt,conflicts:ot,total:rt.length+1,skipped:ot.length,endDate:qn,intervalLabel:na[ye]||ye}},[re,ye,A,C,B,W,J]),He=R=>{H(R),w.length>1&&V(null),L(null),j(null),oe(!1),q("")},gt=R=>{V(R),L(null),j(null),oe(!1),q("")},Fn=()=>{H(null),w.length>1&&V(null),L(null),j(null),oe(!1)},xn=()=>{L(null),j(null),oe(!1),Ge?V(null):Ue&&H(null)},vt=R=>{j(R),oe(!0),q("")},je=()=>{const R="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let G="BK";for(let de=0;de<4;de++)G+=R.charAt(Math.floor(Math.random()*R.length));return G},Be=async R=>{R.preventDefault(),F(!0),ze(null);try{const G=je(),de=e?.requireApproval?"pending":"confirmed",ce=re?`rg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`:null,Me=re&&Ve?Ve.endDate:null,Te={slotId:A.id,date:A.date,time:A.time,duration:C?C.duration:A.duration,clientName:M.name,clientEmail:M.email,clientPhone:M.phone,bookedAt:new Date().toISOString(),status:de,refCode:G};C&&(Te.serviceId=C.id,Te.serviceName=C.name,Te.servicePrice=C.price,Te.serviceDuration=C.duration),B&&B!=="any"?(Te.staffId=B.id,Te.staffName=B.name):A.staffId&&(Te.staffId=A.staffId,Te.staffName=A.staffName||""),re&&ce&&(Te.recurring=!0,Te.recurringInterval=ye,Te.recurringGroupId=ce,Te.recurringUntil=Me),await hi(Je(Ne,"shops",i,"bookings"),Te),A.generated||await st(Qe(Ne,"shops",i,"availability",A.id),{available:!1});let Ce=1,Re=0;if(re&&Ve){const rt=Ve.available;Re=Ve.skipped;for(const ot of rt){const $t=je(),Gt={...Te,date:ot,slotId:`recurring-${ce}-${ot}`,refCode:$t,bookedAt:new Date().toISOString()};await hi(Je(Ne,"shops",i,"bookings"),Gt),Ce++}ze({created:Ce,skipped:Re})}k({name:"",email:"",phone:""}),oe(!1),j(null),H(null),L(null),V(w.length===1?w[0]:null),we(!1),fe(G),e?.requireApproval?q(" Your booking request has been submitted! The shop will review and confirm it shortly."):q(" Booking confirmed! You will receive a confirmation email shortly.")}catch(G){console.error("Booking error:",G),q(" Something went wrong. Please try again.")}finally{F(!1)}},it=R=>new Date(R+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),Lt=R=>{const[G,de]=R.split(":"),ce=parseInt(G),Me=ce>=12?"PM":"AM";return`${ce%12||12}:${de} ${Me}`},xt=R=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(R),lt=R=>{if(R<60)return`${R} min`;const G=Math.floor(R/60),de=R%60;return de?`${G}h ${de}m`:`${G} hour${G>1?"s":""}`};if(u)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[l.jsx("div",{className:"spinner"}),l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking page"})]})});if(p)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:l.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:l.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),l.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),l.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,l.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),l.jsxs(et,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[l.jsx(Ra,{className:"w-4 h-4"}),"Go Home"]})]})});const rn=[...new Set(ve.map(R=>R.date))].sort(),_t=I?ve.filter(R=>R.date===I):ve,bn=ge?"form":Ue&&!C?"services":Ge&&!B?"staff":"calendar",Vn=[];Ue&&Vn.push({key:"services",label:"Service"}),Ge&&Vn.push({key:"staff",label:"Stylist"}),Vn.push({key:"calendar",label:"Date & Time"}),Vn.push({key:"form",label:"Confirm"});const Ls=Vn.findIndex(R=>R.key===bn),Ma=["border-l-blue-500","border-l-violet-500","border-l-emerald-500","border-l-amber-500","border-l-rose-500","border-l-cyan-500","border-l-indigo-500","border-l-pink-500","border-l-teal-500"];return l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e.name||"")[0]?.toUpperCase()||"S"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e.name}),l.jsx("p",{className:"text-xs text-slate-500",children:"Book your appointment"})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs(et,{to:`/shop/${s}/login`,className:"flex items-center gap-1.5 px-3.5 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[l.jsx(x2,{className:"w-3.5 h-3.5"}),l.jsx("span",{className:"hidden sm:inline",children:"Owner"})]}),l.jsx(p3,{})]})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[Vn.length>1&&l.jsx("div",{className:"flex items-center justify-center gap-0 mb-8 animate-fade-in",children:Vn.map((R,G)=>{const de=R.key===bn,ce=G<Ls;return l.jsxs(N.Fragment,{children:[G>0&&l.jsx("div",{className:`w-8 sm:w-14 h-0.5 transition-colors duration-300 ${G<=Ls?"bg-blue-500":"bg-slate-200"}`}),l.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[l.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 ${de?"bg-blue-600 text-white shadow-md shadow-blue-600/30 scale-110":ce?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:ce?l.jsx(bs,{className:"w-5 h-5"}):G+1}),l.jsx("span",{className:`text-xs font-medium hidden sm:block transition-colors ${de?"text-blue-700":ce?"text-blue-600":"text-slate-400"}`,children:R.label})]})]},R.key)})}),P&&l.jsx("div",{className:"mb-8 animate-scale-in",children:P.startsWith("")?l.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(b2,{className:"w-8 h-8 text-emerald-600"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Confirmed!"}),l.jsx("p",{className:"text-slate-600 mb-4",children:"You're all set. We'll send a confirmation to your email."}),ue&&l.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[l.jsx(ar,{className:"w-4 h-4"}),"Recurring Series Created"]}),l.jsxs("p",{className:"text-sm text-slate-700",children:[ue.created," appointment",ue.created!==1?"s":""," booked"]}),ue.skipped>0&&l.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",ue.skipped," date",ue.skipped!==1?"s":""," skipped due to conflicts"]})]}),K&&l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),l.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:K})]}),K&&l.jsxs("div",{className:"mb-4",children:[l.jsxs(et,{to:`/shop/${s}/booking/${K}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[l.jsx(jp,{className:"w-4 h-4"}),"Manage Your Booking"]}),l.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-lg text-sm text-emerald-700 font-medium",children:[l.jsx(jp,{className:"w-4 h-4"}),"Add to your calendar to remember"]})]}):P.startsWith("")?l.jsxs("div",{className:"bg-white rounded-2xl border border-amber-200 shadow-lg shadow-amber-100/50 p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(jn,{className:"w-8 h-8 text-amber-600"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Request Submitted!"}),l.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking request has been submitted! The shop will review and confirm it shortly."}),ue&&l.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[l.jsx(ar,{className:"w-4 h-4"}),"Recurring Series Created"]}),l.jsxs("p",{className:"text-sm text-slate-700",children:[ue.created," appointment",ue.created!==1?"s":""," submitted"]}),ue.skipped>0&&l.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",ue.skipped," date",ue.skipped!==1?"s":""," skipped due to conflicts"]})]}),K&&l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),l.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:K})]}),K&&l.jsxs("div",{className:"mb-4",children:[l.jsxs(et,{to:`/shop/${s}/booking/${K}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[l.jsx(jp,{className:"w-4 h-4"}),"Manage Your Booking"]}),l.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700 font-medium",children:[l.jsx(jn,{className:"w-4 h-4"}),"You'll be notified once it's confirmed"]})]}):l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Something went wrong. Please try again."})]})}),bn==="services"&&l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a Service"}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select the service you'd like to book"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 stagger-children",children:x.map((R,G)=>l.jsxs("button",{onClick:()=>He(R),className:`group text-left bg-white border-l-4 ${Ma[G%Ma.length]} border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5`,children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors pr-2",children:R.name}),l.jsx("span",{className:"text-xl font-extrabold text-blue-600 whitespace-nowrap",children:xt(R.price)})]}),R.description&&l.jsx("p",{className:"text-sm text-slate-500 mb-3 line-clamp-2 leading-relaxed",children:R.description}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-400",children:[l.jsx(jn,{className:"w-3.5 h-3.5"}),l.jsx("span",{children:lt(R.duration)})]}),l.jsx("span",{className:"text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]})]},R.id))})]}),bn==="staff"&&l.jsxs("div",{className:"animate-fade-in",children:[Ue&&C&&l.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[l.jsxs("button",{onClick:Fn,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[l.jsx(Ra,{className:"w-3.5 h-3.5"}),"Back"]}),l.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[l.jsx(is,{className:"w-3.5 h-3.5 text-blue-500"}),l.jsx("span",{className:"font-semibold text-slate-800",children:C.name}),l.jsx("span",{className:"text-blue-600 font-bold",children:xt(C.price)})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose Your Stylist"}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select your preferred professional"})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 stagger-children",children:[l.jsxs("button",{onClick:()=>gt("any"),className:"group text-left bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[l.jsxs("div",{className:"flex items-center gap-3.5 mb-3",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(Xt,{className:"w-5 h-5 text-slate-500"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:"Any Available"}),l.jsx("p",{className:"text-xs text-slate-500",children:"First available professional"})]})]}),l.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),w.map(R=>{const G=R.portfolio||[];return l.jsxs("div",{className:"group bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[l.jsxs("button",{onClick:()=>gt(R),className:"w-full text-left",children:[l.jsxs("div",{className:"flex items-center gap-3.5 mb-2",children:[l.jsx(Lc,{name:R.name}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:R.name}),R.role&&l.jsx("p",{className:"text-xs text-slate-500",children:R.role})]})]}),R.bio&&l.jsx("p",{className:"text-xs text-slate-500 leading-relaxed mb-2 line-clamp-2",children:R.bio}),G.length>0&&l.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[G.slice(0,3).map((de,ce)=>l.jsx("img",{src:de.url,alt:de.caption||"Work",className:"w-10 h-10 rounded-md object-cover border border-slate-200"},ce)),G.length>3&&l.jsxs("span",{className:"w-10 h-10 rounded-md bg-slate-100 border border-slate-200 flex items-center justify-center text-xs text-slate-500 font-semibold",children:["+",G.length-3]})]}),l.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),G.length>0&&l.jsxs("button",{onClick:de=>{de.stopPropagation(),ne(R)},className:"mt-2 w-full flex items-center justify-center gap-1.5 py-1.5 text-xs font-semibold text-violet-600 hover:text-violet-700 hover:bg-violet-50 rounded-lg transition-all",children:[l.jsx(Image,{className:"w-3.5 h-3.5"}),"View Portfolio (",G.length,")"]})]},R.id)})]})]}),bn==="calendar"&&l.jsxs("div",{className:"animate-fade-in",children:[(Ue||Ge)&&l.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[l.jsxs("button",{onClick:xn,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[l.jsx(Ra,{className:"w-3.5 h-3.5"}),"Back"]}),C&&l.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[l.jsx(is,{className:"w-3.5 h-3.5 text-blue-500"}),l.jsx("span",{className:"font-semibold text-slate-800",children:C.name}),l.jsx("span",{className:"text-blue-600 font-bold",children:xt(C.price)}),l.jsxs("span",{className:"text-slate-400",children:[" ",lt(C.duration)]})]}),B&&B!=="any"&&l.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[l.jsx(Lc,{name:B.name,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),l.jsx("span",{className:"font-semibold text-slate-800",children:B.name})]}),B==="any"&&l.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[l.jsx(Xt,{className:"w-3.5 h-3.5 text-slate-500"}),l.jsx("span",{className:"font-semibold text-slate-700",children:"Any Available"})]})]}),rn.length===0?l.jsx("div",{children:Se?l.jsx("div",{className:"max-w-lg mx-auto",children:l.jsx(Z_,{shopId:i,slug:s,selectedService:C,selectedStaff:B,staffMembers:w,preferredDate:null,onCancel:()=>_e(!1)})}):l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:l.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),l.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:C?`No time slots available for ${C.name} (${lt(C.duration)}). Join the waitlist to be notified when a slot opens up!`:"Check back soon for new availability, or join the waitlist!"}),l.jsxs("button",{onClick:()=>_e(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:[l.jsx(Ih,{className:"w-4 h-4"}),"Join Waitlist"]})]})}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Select a Date"}),l.jsx("p",{className:"text-slate-500 text-sm",children:"Pick a day that works for you"})]}),l.jsx("div",{className:"mb-8",children:l.jsx(N2,{availableDates:rn,selectedDate:I,onSelectDate:L})}),I&&l.jsxs("div",{className:"animate-slide-down",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",it(I)]}),l.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[_t.length," slot",_t.length!==1?"s":""]})]}),_t.length===0?l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[l.jsx("p",{className:"text-slate-500 mb-4",children:"No times available for this date"}),Se?l.jsx("div",{className:"mt-4 text-left",children:l.jsx(Z_,{shopId:i,slug:s,selectedService:C,selectedStaff:B,staffMembers:w,preferredDate:I,onCancel:()=>_e(!1)})}):l.jsxs("button",{onClick:()=>_e(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[l.jsx(Ih,{className:"w-4 h-4"}),"Join the Waitlist"]})]}):l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:_t.sort((R,G)=>R.time.localeCompare(G.time)).map(R=>l.jsxs("button",{onClick:()=>vt(R),className:"group bg-white border border-slate-200 hover:border-blue-400 rounded-xl p-4 transition-all duration-200 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5 text-center",children:[l.jsx("div",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-700 transition-colors mb-1",children:Lt(R.time)}),R.staffName&&B==="any"&&l.jsxs("div",{className:"text-xs text-violet-600 mb-0.5 flex items-center justify-center gap-1",children:[l.jsx(Xt,{className:"w-3 h-3"}),R.staffName]}),l.jsx("div",{className:"text-xs text-slate-400",children:C?lt(C.duration):`${R.duration} min`})]},R.id))})]}),!I&&l.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]}),bn==="form"&&l.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Complete Your Booking"}),l.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Review your details and confirm"}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[C&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(is,{className:"w-4 h-4 text-blue-600"})}),l.jsx("span",{className:"font-semibold text-slate-800",children:C.name})]}),l.jsx("span",{className:"font-bold text-blue-600",children:xt(C.price)})]}),B&&B!=="any"&&l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx(Lc,{name:B.name,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),l.jsxs("div",{children:[l.jsx("span",{className:"font-semibold text-slate-800",children:B.name}),B.role&&l.jsxs("span",{className:"text-slate-400 text-sm ml-1.5",children:[" ",B.role]})]})]}),B==="any"&&A?.staffName&&l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx(Lc,{name:A.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),l.jsx("span",{className:"font-semibold text-slate-800",children:A.staffName})]}),l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:l.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),l.jsxs("span",{className:"font-semibold text-slate-800",children:[it(A.date)," at ",Lt(A.time)]})]}),l.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:l.jsx(jn,{className:"w-4 h-4 text-slate-500"})}),l.jsx("span",{children:C?lt(C.duration):`${A.duration} min`})]})]}),l.jsxs("form",{onSubmit:Be,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),l.jsx("input",{type:"text",value:M.name,onChange:R=>k({...M,name:R.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),l.jsx("input",{type:"email",value:M.email,onChange:R=>k({...M,email:R.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),l.jsx("input",{type:"tel",value:M.phone,onChange:R=>k({...M,phone:R.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(ar,{className:"w-4 h-4 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Make this recurring"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Book the same slot on a regular schedule"})]})]}),l.jsx("button",{type:"button",onClick:()=>we(!re),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${re?"bg-blue-500":"bg-slate-300"}`,children:l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${re?"translate-x-6":"translate-x-1"}`})})]}),re&&l.jsxs("div",{className:"space-y-3 pt-1 animate-fade-in",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Repeat every"}),l.jsxs("select",{value:ye,onChange:R=>Ie(R.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[l.jsx("option",{value:"weekly",children:"Week"}),l.jsx("option",{value:"biweekly",children:"2 Weeks"}),l.jsx("option",{value:"fourweekly",children:"4 Weeks"}),l.jsx("option",{value:"monthly",children:"Month"})]})]}),Ve&&l.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[l.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[" Every ",Ve.intervalLabel," through ",Ve.endDate]}),l.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[Ve.total," total appointment",Ve.total!==1?"s":""]}),Ve.skipped>0&&l.jsxs("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:[" ",Ve.skipped," date",Ve.skipped!==1?"s":""," will be skipped due to existing bookings"]})]})]})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsx("button",{type:"submit",disabled:D,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:D?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Booking"]}):l.jsxs(l.Fragment,{children:[l.jsx(bs,{className:"w-4 h-4"}),"Confirm Booking"]})}),l.jsx("button",{type:"button",onClick:()=>{oe(!1),j(null)},className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})]}),O&&l.jsx(g3,{member:O,onClose:()=>ne(null)}),l.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:l.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:l.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",l.jsx(et,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function b3({slotsByDate:s,bookingsByDate:e,selectedDate:n,onSelectDate:i,recurringDayFlags:o={}}){const[u,h]=N.useState(new Date),p=be=>{const ge=be.getFullYear(),oe=be.getMonth(),A=new Date(ge,oe,1),I=new Date(ge,oe+1,0).getDate(),L=A.getDay();return{daysInMonth:I,startingDayOfWeek:L,year:ge,month:oe}},{daysInMonth:g,startingDayOfWeek:x,year:y,month:w}=p(u),S=()=>{h(new Date(u.getFullYear(),u.getMonth()-1))},C=()=>{h(new Date(u.getFullYear(),u.getMonth()+1))},H=be=>`${y}-${String(w+1).padStart(2,"0")}-${String(be).padStart(2,"0")}`,B=be=>{const ge=H(be),oe=s[ge]||[],A=e[ge]||[],j=oe.filter(L=>L.available).length,I=A.length;return{availableCount:j,bookedCount:I,hasData:oe.length>0||A.length>0}},V=be=>{const ge=H(be);i(ge===n?null:ge)},z=["January","February","March","April","May","June","July","August","September","October","November","December"],Y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],W=new Date;return W.setHours(0,0,0,0),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-5",children:[l.jsx("button",{onClick:S,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(g2,{className:"w-5 h-5 text-slate-600"})}),l.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[z[w]," ",y]}),l.jsx("button",{onClick:C,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(S0,{className:"w-5 h-5 text-slate-600"})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:Y.map(be=>l.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:be},be))}),l.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:x}).map((be,ge)=>l.jsx("div",{},`empty-${ge}`)),Array.from({length:g}).map((be,ge)=>{const oe=ge+1,A=H(oe),{availableCount:j,bookedCount:I,hasData:L}=B(oe),P=A===n,q=new Date,D=q.getDate()===oe&&q.getMonth()===w&&q.getFullYear()===y,F=new Date(y,w,oe),M=F.getDay(),k=o[M]&&F>=W;return l.jsxs("button",{onClick:()=>V(oe),className:`
                relative p-2 text-center rounded-lg text-sm font-semibold transition-all duration-200 min-h-[56px] flex flex-col items-center justify-start cursor-pointer
                ${P?"bg-blue-600 text-white shadow-md shadow-blue-600/30":L||k?"bg-slate-50 hover:bg-slate-100 text-slate-900 border border-slate-200 hover:border-slate-300":D?"text-slate-900 font-bold hover:bg-slate-50":"text-slate-400 hover:bg-slate-50"}
              `,children:[l.jsxs("span",{className:`text-sm ${D&&!P?"relative":""}`,children:[oe,D&&!P&&l.jsx("span",{className:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]}),(L||k)&&l.jsxs("div",{className:"flex gap-0.5 mt-1 flex-wrap justify-center",children:[k&&l.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${P?"bg-white/20 text-white":"bg-violet-100 text-violet-700"}`,children:"R"}),j>0&&l.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${P?"bg-white/20 text-white":"bg-emerald-100 text-emerald-700"}`,children:j}),I>0&&l.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${P?"bg-white/20 text-white":"bg-blue-100 text-blue-700"}`,children:I})]})]},oe)})]}),l.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-slate-500",children:[Object.keys(o).length>0&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3.5 h-3.5 bg-violet-100 border border-violet-200 rounded flex items-center justify-center text-[7px] font-bold text-violet-700",children:"R"}),l.jsx("span",{children:"Recurring"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3.5 h-3.5 bg-emerald-100 border border-emerald-200 rounded"}),l.jsx("span",{children:"Available"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3.5 h-3.5 bg-blue-100 border border-blue-200 rounded"}),l.jsx("span",{children:"Booked"})]}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("div",{className:"w-3.5 h-3.5 bg-blue-600 rounded"}),l.jsx("span",{children:"Selected"})]})]})]})}const y3=[{value:15,label:"15 min"},{value:30,label:"30 min"},{value:45,label:"45 min"},{value:60,label:"1 hour"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}];function v3({shopId:s}){const[e,n]=N.useState([]),[i,o]=N.useState(!1),[u,h]=N.useState(null),[p,g]=N.useState({name:"",description:"",duration:30,price:""}),[x,y]=N.useState(!1);N.useEffect(()=>{if(!s)return;const z=Wt(Je(Ne,"shops",s,"services"),Y=>{const W=Y.docs.map(be=>({id:be.id,...be.data()})).filter(be=>be.active!==!1).sort((be,ge)=>(be.name||"").localeCompare(ge.name||""));n(W)});return()=>z()},[s]);const w=()=>{g({name:"",description:"",duration:30,price:""}),o(!1),h(null)},S=async z=>{z.preventDefault(),y(!0);const Y={name:p.name.trim(),description:p.description.trim(),duration:parseInt(p.duration),price:parseFloat(p.price),active:!0};try{u?await st(Qe(Ne,"shops",s,"services",u),Y):await hi(Je(Ne,"shops",s,"services"),{...Y,createdAt:p0()}),w()}catch(W){console.error("Error saving service:",W)}finally{y(!1)}},C=z=>{g({name:z.name,description:z.description||"",duration:z.duration,price:z.price.toString()}),h(z.id),o(!0)},H=async z=>{try{await st(Qe(Ne,"shops",s,"services",z),{active:!1})}catch(Y){console.error("Error deleting service:",Y)}},B=z=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(z),V=z=>{if(z<60)return`${z} min`;const Y=Math.floor(z/60),W=z%60;return W?`${Y}h ${W}m`:`${Y}h`};return l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Services"}),l.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Define the services you offer  clients will pick one before booking"})]}),!i&&l.jsxs("button",{onClick:()=>{w(),o(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[l.jsx(hr,{className:"w-4 h-4"}),"Add Service"]})]}),i&&l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Service":"New Service"}),l.jsxs("form",{onSubmit:S,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Service Name *"}),l.jsx("input",{type:"text",value:p.name,onChange:z=>g({...p,name:z.target.value}),required:!0,placeholder:"e.g. Haircut",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description (optional)"}),l.jsx("input",{type:"text",value:p.description,onChange:z=>g({...p,description:z.target.value}),placeholder:"e.g. Classic cut and style",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Duration *"}),l.jsx("select",{value:p.duration,onChange:z=>g({...p,duration:z.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:y3.map(z=>l.jsx("option",{value:z.value,children:z.label},z.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Price (USD) *"}),l.jsxs("div",{className:"relative",children:[l.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-semibold",children:"$"}),l.jsx("input",{type:"number",step:"0.01",min:"0",value:p.price,onChange:z=>g({...p,price:z.target.value}),required:!0,placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsxs("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[l.jsx(sr,{className:"w-4 h-4"}),x?"Saving":u?"Update Service":"Add Service"]}),l.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[l.jsx(ll,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"text-5xl mb-3",children:""}),l.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No services yet"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Add your first service so clients can choose what to book"})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(z=>l.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:z.name}),z.description&&l.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:z.description})]}),l.jsx("span",{className:"text-xl font-bold text-blue-600 whitespace-nowrap ml-3",children:B(z.price)})]}),l.jsx("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:l.jsxs("span",{className:"flex items-center gap-1.5",children:[l.jsx(jn,{className:"w-4 h-4"}),V(z.duration)]})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>C(z),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:[l.jsx(y2,{className:"w-3.5 h-3.5"}),"Edit"]}),l.jsx("button",{onClick:()=>H(z.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:l.jsx(au,{className:"w-3.5 h-3.5"})})]})]},z.id))})]})}const kp=[{key:"monday",label:"Monday",short:"Mon"},{key:"tuesday",label:"Tuesday",short:"Tue"},{key:"wednesday",label:"Wednesday",short:"Wed"},{key:"thursday",label:"Thursday",short:"Thu"},{key:"friday",label:"Friday",short:"Fri"},{key:"saturday",label:"Saturday",short:"Sat"},{key:"sunday",label:"Sunday",short:"Sun"}],_3={enabled:!1,start:"09:00",end:"17:00",break:null};function w3({shopId:s,staffId:e,staffName:n,weeklyHours:i,onClose:o}){const[u,h]=N.useState(()=>{const V={};for(const z of kp){const Y=i?.[z.key];Y?V[z.key]={enabled:!!Y.enabled,start:Y.start||"09:00",end:Y.end||"17:00",break:Y.break?{start:Y.break.start,end:Y.break.end}:null}:V[z.key]={..._3}}return V}),[p,g]=N.useState(!1),[x,y]=N.useState(null),w=(V,z,Y)=>{h(W=>({...W,[V]:{...W[V],[z]:Y}}))},S=V=>{h(z=>({...z,[V]:{...z[V],break:z[V].break?null:{start:"12:00",end:"13:00"}}}))},C=(V,z,Y)=>{h(W=>({...W,[V]:{...W[V],break:{...W[V].break,[z]:Y}}}))},H=V=>{const z=u[V];h(Y=>{const W={...Y};for(const be of kp)be.key!==V&&(W[be.key]={enabled:z.enabled,start:z.start,end:z.end,break:z.break?{...z.break}:null});return W}),y(V),setTimeout(()=>y(null),1500)},B=async()=>{g(!0);try{await st(Qe(Ne,"shops",s,"staff",e),{weeklyHours:u}),o()}catch(V){console.error("Error saving weekly hours:",V)}finally{g(!1)}};return l.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Weekly Hours"}),l.jsx("p",{className:"text-sm text-slate-500",children:n})]}),l.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:l.jsx(ll,{className:"w-5 h-5 text-slate-400"})})]}),l.jsx("div",{className:"space-y-3",children:kp.map(({key:V,label:z})=>{const Y=u[V];return l.jsx("div",{className:`rounded-xl p-4 transition-all ${Y.enabled?"bg-blue-50 border border-blue-200":"bg-slate-50 border border-slate-200"}`,children:l.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-3 min-w-[140px]",children:[l.jsx("button",{type:"button",onClick:()=>w(V,"enabled",!Y.enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Y.enabled?"bg-blue-500":"bg-slate-300"}`,children:l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${Y.enabled?"translate-x-6":"translate-x-1"}`})}),l.jsx("span",{className:`font-semibold text-sm ${Y.enabled?"text-slate-900":"text-slate-400"}`,children:z})]}),Y.enabled?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jn,{className:"w-4 h-4 text-blue-500"}),l.jsx("input",{type:"time",value:Y.start,onChange:W=>w(V,"start",W.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),l.jsx("span",{className:"text-slate-400 text-sm",children:"to"}),l.jsx("input",{type:"time",value:Y.end,onChange:W=>w(V,"end",W.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>S(V),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${Y.break?"bg-amber-100 text-amber-700 border border-amber-200":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,children:[l.jsx(sD,{className:"w-3.5 h-3.5"}),Y.break?"Break":"+ Break"]}),Y.break&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("input",{type:"time",value:Y.break.start,onChange:W=>C(V,"start",W.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"}),l.jsx("span",{className:"text-slate-400 text-xs",children:""}),l.jsx("input",{type:"time",value:Y.break.end,onChange:W=>C(V,"end",W.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"})]})]}),l.jsx("button",{type:"button",onClick:()=>H(V),className:"text-xs text-blue-500 hover:text-blue-700 font-medium transition-colors whitespace-nowrap",children:x===V?" Copied!":"Copy to all"})]}):l.jsx("span",{className:"text-sm text-slate-400 italic",children:"Day off"})]})},V)})}),l.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-200",children:[l.jsxs("button",{onClick:B,disabled:p,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[l.jsx(VD,{className:"w-4 h-4"}),p?"Saving":"Save Hours"]}),l.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[l.jsx(ll,{className:"w-4 h-4"}),"Cancel"]})]})]})}const N3=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}],E3=5*1024*1024,S3=["image/jpeg","image/png","image/webp"];function tw(s){if(!s)return"";const[e,n]=s.split(":").map(Number),i=e>=12?"p":"a",o=e%12||12;return n===0?`${o}${i}`:`${o}:${n.toString().padStart(2,"0")}${i}`}function T3({shopId:s}){const[e,n]=N.useState([]),[i,o]=N.useState(!1),[u,h]=N.useState(null),[p,g]=N.useState(null),[x,y]=N.useState(null),[w,S]=N.useState({name:"",role:""}),[C,H]=N.useState(!1),[B,V]=N.useState(null),[z,Y]=N.useState(""),[W,be]=N.useState(!1),[ge,oe]=N.useState(!1),[A,j]=N.useState(""),[I,L]=N.useState(null),[P,q]=N.useState(null),[D,F]=N.useState(null),M=N.useRef(null);N.useEffect(()=>{if(!s)return;const ue=Wt(Je(Ne,"shops",s,"staff"),ze=>{const Ue=ze.docs.map(Ge=>({id:Ge.id,...Ge.data()})).filter(Ge=>Ge.active!==!1).sort((Ge,J)=>(Ge.name||"").localeCompare(J.name||""));n(Ue)});return()=>ue()},[s]);const k=()=>{S({name:"",role:""}),o(!1),h(null)},K=async ue=>{ue.preventDefault(),H(!0);const ze={name:w.name.trim(),role:w.role.trim(),active:!0};try{u?await st(Qe(Ne,"shops",s,"staff",u),ze):await hi(Je(Ne,"shops",s,"staff"),{...ze,email:"",bio:"",portfolio:[],createdAt:p0()}),k()}catch(Ue){console.error("Error saving staff member:",Ue)}finally{H(!1)}},fe=ue=>{S({name:ue.name,role:ue.role||""}),h(ue.id),o(!0)},Se=async ue=>{try{await st(Qe(Ne,"shops",s,"staff",ue),{active:!1})}catch(ze){console.error("Error deleting staff member:",ze)}},_e=ue=>{V(ue.id),Y(ue.bio||"")},O=async ue=>{be(!0);try{await st(Qe(Ne,"shops",s,"staff",ue),{bio:z.trim()}),V(null),Y("")}catch(ze){console.error("Error saving bio:",ze)}finally{be(!1)}},ne=ue=>{L(ue),j(""),q(null),setTimeout(()=>{M.current&&(M.current.value="",M.current.click())},50)},re=ue=>{const ze=ue.target.files?.[0];if(ze){if(!S3.includes(ze.type)){alert("Please select a JPG, PNG, or WebP image.");return}if(ze.size>E3){alert("File size must be under 5MB.");return}q(ze)}},we=async ue=>{if(P){oe(!0);try{const ze=Date.now(),Ue=P.name.split(".").pop(),Ge=`${ze}.${Ue}`,J=`shops/${s}/staff/${ue}/portfolio/${Ge}`,ve=$_(G_,J);await b6(ve,P);const Oe=await y6(ve),He=e.find(gt=>gt.id===ue)?.portfolio||[];await st(Qe(Ne,"shops",s,"staff",ue),{portfolio:[...He,{url:Oe,storagePath:J,caption:A.trim(),uploadedAt:new Date().toISOString()}]}),L(null),j(""),q(null)}catch(ze){console.error("Error uploading photo:",ze),alert("Upload failed. Please try again.")}finally{oe(!1)}}},ye=async(ue,ze)=>{const Ue=e.find(J=>J.id===ue);if(!Ue)return;const Ge=Ue.portfolio[ze];if(Ge){F(`${ue}-${ze}`);try{if(Ge.storagePath)try{const ve=$_(G_,Ge.storagePath);await v6(ve)}catch(ve){console.warn("Storage delete warning:",ve)}const J=Ue.portfolio.filter((ve,Oe)=>Oe!==ze);await st(Qe(Ne,"shops",s,"staff",ue),{portfolio:J})}catch(J){console.error("Error deleting photo:",J),alert("Failed to delete photo.")}finally{F(null)}}},Ie=ue=>{if(!ue)return null;const ze=N3.filter(Ue=>ue[Ue.key]?.enabled);return ze.length===0?null:ze.map(Ue=>{const Ge=ue[Ue.key];return`${Ue.short} ${tw(Ge.start)}${tw(Ge.end)}`})};return l.jsxs("div",{children:[l.jsx("input",{ref:M,type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:re}),l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Staff"}),l.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Manage your team  assign availability and bookings per staff member"})]}),!i&&l.jsxs("button",{onClick:()=>{k(),o(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[l.jsx(hr,{className:"w-4 h-4"}),"Add Staff"]})]}),i&&l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Staff Member":"New Staff Member"}),l.jsxs("form",{onSubmit:K,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name *"}),l.jsx("input",{type:"text",value:w.name,onChange:ue=>S({...w,name:ue.target.value}),required:!0,placeholder:"e.g. Jane Smith",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Role (optional)"}),l.jsx("input",{type:"text",value:w.role,onChange:ue=>S({...w,role:ue.target.value}),placeholder:"e.g. Senior Stylist",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),l.jsxs("div",{className:"flex gap-3 pt-2",children:[l.jsxs("button",{type:"submit",disabled:C,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[l.jsx(sr,{className:"w-4 h-4"}),C?"Saving":u?"Update Staff":"Add Staff"]}),l.jsxs("button",{type:"button",onClick:k,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[l.jsx(ll,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"text-5xl mb-3",children:""}),l.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No staff members yet"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Add your team members to assign them availability and bookings"})]}):l.jsx("div",{className:"space-y-4",children:e.map(ue=>{const ze=Ie(ue.weeklyHours),Ue=ue.portfolio||[];return l.jsxs("div",{children:[l.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:ue.name}),ue.role&&l.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:ue.role})]}),l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(Xt,{className:"w-5 h-5 text-blue-600"})})]}),l.jsx("div",{className:"mb-3",children:B===ue.id?l.jsxs("div",{className:"space-y-2",children:[l.jsx("textarea",{value:z,onChange:Ge=>Y(Ge.target.value),placeholder:"Write a short bio  specialties, experience, personality",rows:3,maxLength:500,className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>O(ue.id),disabled:W,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[W?l.jsx(Ap,{className:"w-3 h-3 animate-spin"}):l.jsx(sr,{className:"w-3 h-3"}),"Save Bio"]}),l.jsx("button",{onClick:()=>{V(null),Y("")},className:"px-3 py-1.5 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"}),l.jsxs("span",{className:"text-xs text-slate-400 ml-auto",children:[z.length,"/500"]})]})]}):l.jsx("div",{onClick:()=>_e(ue),className:"cursor-pointer group",children:ue.bio?l.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed group-hover:text-slate-800 transition-colors",children:[ue.bio,l.jsx("span",{className:"ml-1.5 text-xs text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"edit"})]}):l.jsx("p",{className:"text-sm text-slate-400 italic group-hover:text-blue-500 transition-colors",children:"+ Add a bio"})})}),ze?l.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5",children:ze.map((Ge,J)=>l.jsx("span",{className:"inline-block px-2 py-0.5 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium",children:Ge},J))}):l.jsx("p",{className:"text-xs text-slate-400 mb-3 italic",children:"No weekly hours set"}),Ue.length>0&&x!==ue.id&&l.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[l.jsx("div",{className:"flex -space-x-1",children:Ue.slice(0,4).map((Ge,J)=>l.jsx("img",{src:Ge.url,alt:Ge.caption||"Portfolio",className:"w-10 h-10 rounded-lg object-cover border-2 border-white shadow-sm"},J))}),l.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[Ue.length," photo",Ue.length!==1?"s":""]})]}),l.jsxs("div",{className:"flex gap-2 flex-wrap",children:[l.jsxs("button",{onClick:()=>g(p===ue.id?null:ue.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${p===ue.id?"bg-blue-100 text-blue-700 border-blue-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[l.jsx(jn,{className:"w-3.5 h-3.5"}),"Set Hours"]}),l.jsxs("button",{onClick:()=>y(x===ue.id?null:ue.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${x===ue.id?"bg-violet-100 text-violet-700 border-violet-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[l.jsx(H6,{className:"w-3.5 h-3.5"}),"Portfolio"]}),l.jsx("button",{onClick:()=>fe(ue),className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:l.jsx(y2,{className:"w-3.5 h-3.5"})}),l.jsx("button",{onClick:()=>Se(ue.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:l.jsx(au,{className:"w-3.5 h-3.5"})})]})]}),p===ue.id&&l.jsx("div",{className:"mt-2",children:l.jsx(w3,{shopId:s,staffId:ue.id,staffName:ue.name,weeklyHours:ue.weeklyHours,onClose:()=>g(null)})}),x===ue.id&&l.jsxs("div",{className:"mt-2 bg-white border-2 border-violet-200 rounded-xl p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-sm font-bold text-slate-800 flex items-center gap-2",children:[l.jsx(gD,{className:"w-4 h-4 text-violet-600"}),"Portfolio  ",ue.name]}),l.jsxs("button",{onClick:()=>ne(ue.id),disabled:ge,className:"flex items-center gap-1.5 px-3 py-1.5 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[l.jsx(hr,{className:"w-3 h-3"}),"Add Photo"]})]}),I===ue.id&&P&&l.jsxs("div",{className:"mb-4 p-3 bg-violet-50 border border-violet-200 rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"w-16 h-16 rounded-lg bg-slate-200 overflow-hidden flex-shrink-0",children:l.jsx("img",{src:URL.createObjectURL(P),alt:"Preview",className:"w-full h-full object-cover"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-xs text-slate-600 font-medium mb-1 truncate",children:P.name}),l.jsxs("p",{className:"text-xs text-slate-400",children:[(P.size/1024/1024).toFixed(1)," MB"]})]})]}),l.jsx("input",{type:"text",value:A,onChange:Ge=>j(Ge.target.value),placeholder:"Add a caption (optional)",maxLength:200,className:"w-full px-3 py-2 text-sm border border-violet-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-400 focus:border-transparent mb-2"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>we(ue.id),disabled:ge,className:"flex items-center gap-1.5 px-4 py-2 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:ge?l.jsxs(l.Fragment,{children:[l.jsx(Ap,{className:"w-3 h-3 animate-spin"}),"Uploading"]}):l.jsxs(l.Fragment,{children:[l.jsx(sr,{className:"w-3 h-3"}),"Upload"]})}),l.jsx("button",{onClick:()=>{L(null),q(null),j("")},className:"px-3 py-2 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}),Ue.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet. Add some to showcase work!"})]}):l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:Ue.map((Ge,J)=>l.jsxs("div",{className:"group relative bg-slate-50 rounded-lg overflow-hidden border border-slate-200 shadow-sm",children:[l.jsx("div",{className:"aspect-square",children:l.jsx("img",{src:Ge.url,alt:Ge.caption||"Portfolio photo",className:"w-full h-full object-cover"})}),Ge.caption&&l.jsx("div",{className:"px-2 py-1.5",children:l.jsx("p",{className:"text-xs text-slate-600 truncate",children:Ge.caption})}),l.jsx("button",{onClick:()=>ye(ue.id,J),disabled:D===`${ue.id}-${J}`,className:"absolute top-1.5 right-1.5 w-7 h-7 bg-red-500/90 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-md disabled:opacity-50",title:"Delete photo",children:D===`${ue.id}-${J}`?l.jsx(Ap,{className:"w-3.5 h-3.5 animate-spin"}):l.jsx(au,{className:"w-3.5 h-3.5"})})]},J))})]})]},ue.id)})})]})}function qr(s){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function j3(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function Hr(s){return`$${Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function nw(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}function sw(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{weekday:"short"})}function Ip(s,e){return e===0&&s===0?0:e===0?100:(s-e)/e*100}function A3({bookings:s}){const[e,n]=N.useState(null),[i,o]=N.useState(null),u=N.useMemo(()=>s.filter(F=>F.status==="confirmed"||F.status==="pending"||!F.status),[s]),h=N.useMemo(()=>{const F=new Date;return F.setHours(0,0,0,0),F},[]),p=N.useMemo(()=>qr(h),[h]),g=N.useMemo(()=>j3(h),[h]),x=N.useMemo(()=>{const F=new Date(g);return F.setDate(F.getDate()+6),F},[g]),y=N.useMemo(()=>{const F=new Date(g);return F.setDate(F.getDate()-7),F},[g]),w=N.useMemo(()=>{const F=new Date(y);return F.setDate(F.getDate()+6),F},[y]),S=N.useMemo(()=>new Date(h.getFullYear(),h.getMonth(),1),[h]),C=N.useMemo(()=>new Date(h.getFullYear(),h.getMonth()-1,1),[h]),H=N.useMemo(()=>{const F=new Date(S);return F.setDate(F.getDate()-1),F},[S]),B=N.useMemo(()=>{const F=new Date(h);return F.setDate(F.getDate()-1),qr(F)},[h]),V=N.useMemo(()=>{const F=re=>re.reduce((we,ye)=>we+(Number(ye.servicePrice)||0),0),M=(re,we,ye)=>re.date>=qr(we)&&re.date<=qr(ye),k=F(u.filter(re=>re.date===p)),K=F(u.filter(re=>re.date===B)),fe=F(u.filter(re=>M(re,g,x))),Se=F(u.filter(re=>M(re,y,w))),_e=F(u.filter(re=>M(re,S,h))),O=F(u.filter(re=>M(re,C,H))),ne=F(u);return{today:k,todayChange:Ip(k,K),week:fe,weekChange:Ip(fe,Se),month:_e,monthChange:Ip(_e,O),allTime:ne}},[u,p,B,g,x,y,w,S,H,h]),z=N.useMemo(()=>{const F=[];for(let M=13;M>=0;M--){const k=new Date(h);k.setDate(k.getDate()-M),F.push(qr(k))}return F},[h]),Y=N.useMemo(()=>{const F={};return z.forEach(M=>{F[M]=0}),u.forEach(M=>{F[M.date]!==void 0&&(F[M.date]+=Number(M.servicePrice)||0)}),z.map(M=>({date:M,value:F[M]}))},[u,z]),W=N.useMemo(()=>Math.max(...Y.map(F=>F.value),1),[Y]),be=N.useMemo(()=>{const F={},M={};return z.forEach(k=>{F[k]=0,M[k]=0}),s.forEach(k=>{F[k.date]!==void 0&&(k.status==="cancelled"||k.status==="rejected"?M[k.date]++:F[k.date]++)}),z.map(k=>({date:k,confirmed:F[k],cancelled:M[k],total:F[k]+M[k]}))},[s,z]),ge=N.useMemo(()=>Math.max(...be.map(F=>F.total),1),[be]),oe=N.useMemo(()=>{const F=s.length;if(F===0)return 100;const M=s.filter(k=>k.status==="cancelled"||k.status==="rejected").length;return Math.round((F-M)/F*100)},[s]),A=N.useMemo(()=>{const F=Array.from({length:7},()=>Array(24).fill(0));u.forEach(k=>{if(!k.date||!k.time)return;const fe=new Date(k.date+"T12:00:00").getDay(),Se=parseInt(k.time.split(":")[0],10);!isNaN(fe)&&!isNaN(Se)&&F[fe][Se]++});let M=0;return F.forEach(k=>k.forEach(K=>{K>M&&(M=K)})),{grid:F,max:M}},[u]),j=N.useMemo(()=>{const F={};return u.forEach(M=>{const k=M.serviceName||"Unknown";F[k]||(F[k]={name:k,count:0,revenue:0}),F[k].count++,F[k].revenue+=Number(M.servicePrice)||0}),Object.values(F).map(M=>({...M,avgRevenue:M.count>0?M.revenue/M.count:0})).sort((M,k)=>k.revenue-M.revenue)},[u]),I=N.useMemo(()=>{const F={};return u.forEach(M=>{const k=M.staffName||"Unassigned";F[k]||(F[k]={name:k,count:0,revenue:0,clients:new Set}),F[k].count++,F[k].revenue+=Number(M.servicePrice)||0,M.clientEmail&&F[k].clients.add(M.clientEmail.toLowerCase())}),Object.values(F).map(M=>({...M,clientCount:M.clients.size})).sort((M,k)=>k.revenue-M.revenue)},[u]),L=N.useMemo(()=>{const F=u.map(ye=>ye.clientEmail?.toLowerCase()).filter(Boolean),M=new Set(F).size,k=u.filter(ye=>ye.date>=qr(S)&&ye.date<=p),K=new Set(k.map(ye=>ye.clientEmail?.toLowerCase()).filter(Boolean)),fe=u.filter(ye=>ye.date<qr(S)),Se=new Set(fe.map(ye=>ye.clientEmail?.toLowerCase()).filter(Boolean));let _e=0,O=0;K.forEach(ye=>{Se.has(ye)?O++:_e++});const ne={};u.forEach(ye=>{const Ie=ye.clientEmail?.toLowerCase();Ie&&(ne[Ie]||(ne[Ie]={email:Ie,name:ye.clientName||Ie,count:0}),ne[Ie].count++,ye.clientName&&(ne[Ie].name=ye.clientName))});const re=Object.values(ne).sort((ye,Ie)=>Ie.count-ye.count).slice(0,10),we=M>0?u.length/M:0;return{uniqueClients:M,newThisMonth:_e,returningThisMonth:O,topClients:re,avgBookingsPerClient:we}},[u,S,p]),P=({value:F,suffix:M="vs prev"})=>{if(F===0)return l.jsxs("span",{className:"flex items-center gap-0.5 text-xs font-medium text-slate-400",children:[l.jsx(jD,{className:"w-3 h-3"})," 0% ",M]});const k=F>0;return l.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-semibold ${k?"text-emerald-600":"text-red-500"}`,children:[k?l.jsx(L6,{className:"w-3 h-3"}):l.jsx(I6,{className:"w-3 h-3"}),k?"+":"",Math.round(F),"% ",M]})},q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],D=Array.from({length:15},(F,M)=>M+7);return l.jsxs("div",{className:"animate-fade-in space-y-6",children:[l.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Today's Revenue",value:V.today,change:V.todayChange,suffix:"vs yesterday",icon:lD,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:V.week,change:V.weekChange,suffix:"vs last week",icon:j0,color:"bg-violet-100 text-violet-600"},{label:"This Month",value:V.month,change:V.monthChange,suffix:"vs last month",icon:Vt,color:"bg-emerald-100 text-emerald-600"},{label:"All-time Revenue",value:V.allTime,change:null,icon:p2,color:"bg-amber-100 text-amber-600"}].map(F=>{const M=F.icon;return l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsx("div",{className:`w-10 h-10 ${F.color} rounded-xl flex items-center justify-center`,children:l.jsx(M,{className:"w-5 h-5"})})}),l.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:Hr(F.value)}),l.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5 mb-1",children:F.label}),F.change!==null&&l.jsx(P,{value:F.change,suffix:F.suffix})]},F.label)})}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Revenue  Last 14 Days"}),l.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Daily revenue from confirmed & pending bookings"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("div",{className:"min-w-[600px]",children:[l.jsxs("div",{className:"flex items-end gap-0",children:[l.jsxs("div",{className:"flex flex-col justify-between h-48 pr-2 text-right flex-shrink-0 w-16",children:[l.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Hr(W)}),l.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Hr(W/2)}),l.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"$0"})]}),l.jsx("div",{className:"flex-1 flex items-end gap-1 h-48 border-b border-l border-slate-200 pl-1 pb-0 relative",children:Y.map((F,M)=>{const k=W>0?F.value/W*100:0,K=e===M;return l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative group",onMouseEnter:()=>n(M),onMouseLeave:()=>n(null),onTouchStart:()=>n(M),children:[K&&l.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[Hr(F.value),l.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),l.jsx("div",{className:"w-full rounded-t-md transition-all duration-200 cursor-pointer",style:{height:`${Math.max(k,F.value>0?2:0)}%`,background:K?"linear-gradient(to top, #2563eb, #60a5fa)":"linear-gradient(to top, #3b82f6, #93c5fd)",minHeight:F.value>0?"4px":"0px"}})]},F.date)})})]}),l.jsx("div",{className:"flex ml-16 pl-1",children:Y.map(F=>l.jsxs("div",{className:"flex-1 text-center",children:[l.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:sw(F.date)}),l.jsx("div",{className:"text-[9px] text-slate-400",children:nw(F.date)})]},F.date))})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Booking Trends  Last 14 Days"}),l.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Daily bookings breakdown"})]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[l.jsxs("span",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-blue-500"})," Confirmed"]}),l.jsxs("span",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-red-400"})," Cancelled"]}),l.jsxs("span",{className:"px-2.5 py-1 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg font-semibold",children:[oe,"% completion"]})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("div",{className:"min-w-[600px]",children:[l.jsxs("div",{className:"flex items-end gap-0",children:[l.jsxs("div",{className:"flex flex-col justify-between h-40 pr-2 text-right flex-shrink-0 w-16",children:[l.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:ge}),l.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Math.round(ge/2)}),l.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"0"})]}),l.jsx("div",{className:"flex-1 flex items-end gap-1 h-40 border-b border-l border-slate-200 pl-1 relative",children:be.map((F,M)=>{const k=ge>0?F.confirmed/ge*100:0,K=ge>0?F.cancelled/ge*100:0,fe=i===M;return l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative",onMouseEnter:()=>o(M),onMouseLeave:()=>o(null),onTouchStart:()=>o(M),children:[fe&&l.jsxs("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[F.confirmed," confirmed, ",F.cancelled," cancelled",l.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),l.jsxs("div",{className:"w-full flex flex-col items-stretch",children:[F.cancelled>0&&l.jsx("div",{className:"w-full rounded-t-md bg-red-400 transition-all duration-200",style:{height:`${Math.max(K,2)}%`}}),F.confirmed>0&&l.jsx("div",{className:`w-full bg-blue-500 transition-all duration-200 ${F.cancelled===0?"rounded-t-md":""}`,style:{height:`${Math.max(k,2)}%`}})]})]},F.date)})})]}),l.jsx("div",{className:"flex ml-16 pl-1",children:be.map(F=>l.jsxs("div",{className:"flex-1 text-center",children:[l.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:sw(F.date)}),l.jsx("div",{className:"text-[9px] text-slate-400",children:nw(F.date)})]},F.date))})]})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Busiest Times"}),l.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Booking density by day of week and hour"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("div",{className:"min-w-[600px]",children:[l.jsxs("table",{className:"w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"w-12"}),D.map(F=>l.jsxs("th",{className:"text-[10px] text-slate-400 font-medium pb-2 text-center px-0.5",children:[F%12||12,F>=12?"p":"a"]},F))]})}),l.jsx("tbody",{children:[1,2,3,4,5,6,0].map(F=>l.jsxs("tr",{children:[l.jsx("td",{className:"text-[11px] text-slate-500 font-semibold pr-2 py-0.5 text-right",children:q[F]}),D.map(M=>{const k=A.grid[F][M],K=A.max||1,fe=k/K;let Se="bg-slate-50";return k>0&&(fe<=.2?Se="bg-blue-100":fe<=.4?Se="bg-blue-200":fe<=.6?Se="bg-blue-300":fe<=.8?Se="bg-blue-500 text-white":Se="bg-blue-700 text-white"),l.jsx("td",{className:"px-0.5 py-0.5",children:l.jsx("div",{className:`w-full aspect-square rounded-sm ${Se} flex items-center justify-center text-[9px] font-bold transition-all hover:ring-2 hover:ring-blue-400 hover:ring-offset-1 cursor-default`,title:`${q[F]} ${M}:00  ${k} booking${k!==1?"s":""}`,children:k>0?k:""})},M)})]},F))})]}),l.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-3",children:[l.jsx("span",{className:"text-[10px] text-slate-400",children:"Less"}),["bg-slate-50","bg-blue-100","bg-blue-200","bg-blue-300","bg-blue-500","bg-blue-700"].map((F,M)=>l.jsx("div",{className:`w-4 h-4 rounded-sm ${F} border border-slate-200`},M)),l.jsx("span",{className:"text-[10px] text-slate-400",children:"More"})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Top Services"}),l.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Ranked by revenue from confirmed & pending bookings"}),j.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(is,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-400",children:"No service data yet"})]}):l.jsx("div",{className:"space-y-2",children:j.map((F,M)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 font-bold text-sm flex-shrink-0",children:M+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-500",children:[F.count," booking",F.count!==1?"s":"","  avg ",Hr(F.avgRevenue)]})]}),l.jsx("div",{className:"text-sm font-bold text-blue-600 flex-shrink-0",children:Hr(F.revenue)})]},F.name))})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Staff Performance"}),l.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Bookings, revenue & clients per staff member"}),I.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(Xt,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-400",children:"No staff data yet"})]}):l.jsx("div",{className:"space-y-2",children:I.map((F,M)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[l.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center text-violet-600 font-bold text-sm flex-shrink-0",children:M+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:F.name}),l.jsxs("div",{className:"text-xs text-slate-500",children:[F.count," booking",F.count!==1?"s":"","  ",F.clientCount," client",F.clientCount!==1?"s":""]})]}),l.jsx("div",{className:"text-sm font-bold text-violet-600 flex-shrink-0",children:Hr(F.revenue)})]},F.name))})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Client Insights"}),l.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Understanding your client base"}),l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[l.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-100 p-4 text-center",children:[l.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:L.uniqueClients}),l.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:"Total Unique Clients"})]}),l.jsxs("div",{className:"bg-emerald-50 rounded-xl border border-emerald-100 p-4 text-center",children:[l.jsx("div",{className:"text-2xl font-extrabold text-emerald-700",children:L.newThisMonth}),l.jsx("div",{className:"text-xs font-medium text-emerald-600 mt-0.5",children:"New This Month"})]}),l.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-4 text-center",children:[l.jsx("div",{className:"text-2xl font-extrabold text-blue-700",children:L.returningThisMonth}),l.jsx("div",{className:"text-xs font-medium text-blue-600 mt-0.5",children:"Returning This Month"})]}),l.jsxs("div",{className:"bg-violet-50 rounded-xl border border-violet-100 p-4 text-center",children:[l.jsx("div",{className:"text-2xl font-extrabold text-violet-700",children:L.avgBookingsPerClient.toFixed(1)}),l.jsx("div",{className:"text-xs font-medium text-violet-600 mt-0.5",children:"Avg Bookings / Client"})]})]}),l.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"Top Clients by Frequency"}),L.topClients.length===0?l.jsxs("div",{className:"text-center py-6",children:[l.jsx(rl,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-400",children:"No client data yet"})]}):l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:L.topClients.map((F,M)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[l.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center text-amber-700 font-bold text-xs flex-shrink-0",children:M+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:F.name}),l.jsx("div",{className:"text-xs text-slate-400 truncate",children:F.email})]}),l.jsxs("div",{className:"flex-shrink-0 px-2.5 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-bold",children:[F.count," visit",F.count!==1?"s":""]})]},F.email))})]})]})}function j2({waitingAhead:s=[],inProgress:e=[],staffCount:n=1,upcomingBookings:i=[],defaultDuration:o=30}){const u=Math.max(n,1),h=Date.now(),p=e.map(y=>{const w=y.startedAt?.toDate?.()||(y.startedAt?new Date(y.startedAt):null);if(!w)return 0;const S=(h-w.getTime())/6e4,C=y.estimatedDuration||o;return Math.max(0,C-S)});p.sort((y,w)=>y-w);const g=[];for(let y=0;y<u;y++)g.push(p[y]||0);g.sort((y,w)=>y-w);const x=s.map(y=>y.estimatedDuration||o);for(const y of x)g[0]+=y,g.sort((w,S)=>w-S);return Math.round(g[0])}function A2({waitingQueue:s=[],inProgress:e=[],staffCount:n=1,upcomingBookings:i=[],defaultDuration:o=30}){const u=new Map;for(let h=0;h<s.length;h++){const p=s.slice(0,h),g=j2({waitingAhead:p,inProgress:e,staffCount:n,upcomingBookings:i,defaultDuration:o});u.set(s[h].id,g)}return u}function C3(s=[],e=3){const n=new Date,i=new Date(n.getTime()+e*60*60*1e3),o=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`;return s.filter(u=>{if(u.status==="cancelled"||u.status==="rejected"||u.date!==o)return!1;const h=new Date(`${u.date}T${u.time}`);return h>=n&&h<=i}).sort((u,h)=>`${u.time}`.localeCompare(`${h.time}`))}function R3(s){if(!s)return"0m";const e=s?.toDate?.()||new Date(s),n=Math.floor((Date.now()-e.getTime())/6e4);if(n<1)return"<1m";if(n<60)return`${n}m`;const i=Math.floor(n/60),o=n%60;return o>0?`${i}h ${o}m`:`${i}h`}function k3(s){if(s==null)return"";if(s<1)return"Next up";if(s<60)return`~${s}m`;const e=Math.floor(s/60),n=s%60;return n>0?`~${e}h ${n}m`:`~${e}h`}function I3({shopId:s,services:e,staff:n,bookings:i}){const[o,u]=N.useState([]),[h,p]=N.useState(!1),[g,x]=N.useState(!1),[y,w]=N.useState(!1),[S,C]=N.useState({clientName:"",serviceId:"",staffId:"",estimatedDuration:30});N.useEffect(()=>{if(!s)return;const M=Wt(Je(Ne,"shops",s,"walkins"),k=>{const K=k.docs.map(fe=>({id:fe.id,...fe.data()}));u(K)});return()=>M()},[s]);const H=N.useMemo(()=>o.filter(M=>M.status==="waiting").sort((M,k)=>(M.position||0)-(k.position||0)),[o]),B=N.useMemo(()=>o.filter(M=>M.status==="in-progress").sort((M,k)=>{const K=M.startedAt?.toDate?.()?.getTime()||0,fe=k.startedAt?.toDate?.()?.getTime()||0;return K-fe}),[o]),V=N.useMemo(()=>{const M=new Date;return M.setHours(0,0,0,0),M},[]),z=N.useMemo(()=>o.filter(M=>{if(M.status!=="completed"&&M.status!=="no-show")return!1;const k=M.completedAt?.toDate?.()||(M.completedAt?new Date(M.completedAt):null);return k?k>=V:!1}).sort((M,k)=>{const K=M.completedAt?.toDate?.()?.getTime()||0;return(k.completedAt?.toDate?.()?.getTime()||0)-K}),[o,V]),Y=N.useMemo(()=>Math.max(n.filter(M=>M.active!==!1).length,1),[n]),W=N.useMemo(()=>C3(i,3),[i]),be=N.useMemo(()=>A2({waitingQueue:H,inProgress:B,staffCount:Y,upcomingBookings:W,defaultDuration:30}),[H,B,Y,W]),ge=N.useMemo(()=>{const M=z.filter(K=>K.status==="completed"&&K.joinedAt&&K.startedAt).map(K=>{const fe=K.joinedAt?.toDate?.()||new Date(K.joinedAt),Se=K.startedAt?.toDate?.()||new Date(K.startedAt);return Math.floor((Se.getTime()-fe.getTime())/6e4)}).filter(K=>K>=0),k=M.length>0?Math.round(M.reduce((K,fe)=>K+fe,0)/M.length):0;return{waiting:H.length,avgWait:k,completedToday:z.filter(K=>K.status==="completed").length}},[H,z]),oe=M=>{const k=e.find(K=>K.id===M);C(K=>({...K,serviceId:M,estimatedDuration:k?.duration||30}))},A=()=>H.length===0?1:Math.max(...H.map(M=>M.position||0))+1,j=N.useMemo(()=>o.filter(M=>{const k=M.joinedAt?.toDate?.()||(M.joinedAt?new Date(M.joinedAt):null);return k&&k>=V}).length,[o,V]),I=async M=>{M.preventDefault(),w(!0);const k=e.find(_e=>_e.id===S.serviceId),K=n.find(_e=>_e.id===S.staffId),fe=A(),Se=S.clientName.trim()||`Walk-in #${j+1}`;try{await hi(Je(Ne,"shops",s,"walkins"),{clientName:Se,serviceId:S.serviceId||null,serviceName:k?.name||null,staffId:S.staffId||null,staffName:K?.name||null,estimatedDuration:parseInt(S.estimatedDuration)||30,status:"waiting",position:fe,joinedAt:Tt.now(),startedAt:null,completedAt:null,estimatedWaitMinutes:null}),C({clientName:"",serviceId:"",staffId:"",estimatedDuration:30}),p(!1)}catch(_e){console.error("Error adding walk-in:",_e)}finally{w(!1)}},L=async M=>{try{await st(Qe(Ne,"shops",s,"walkins",M),{status:"in-progress",startedAt:Tt.now()});const k=H.filter(K=>K.id!==M).sort((K,fe)=>(K.position||0)-(fe.position||0));for(let K=0;K<k.length;K++)await st(Qe(Ne,"shops",s,"walkins",k[K].id),{position:K+1})}catch(k){console.error("Error starting service:",k)}},P=async M=>{try{await st(Qe(Ne,"shops",s,"walkins",M),{status:"completed",completedAt:Tt.now()})}catch(k){console.error("Error completing service:",k)}},q=async M=>{try{await st(Qe(Ne,"shops",s,"walkins",M),{status:"no-show",completedAt:Tt.now()});const k=H.filter(K=>K.id!==M).sort((K,fe)=>(K.position||0)-(fe.position||0));for(let K=0;K<k.length;K++)await st(Qe(Ne,"shops",s,"walkins",k[K].id),{position:K+1})}catch(k){console.error("Error marking no-show:",k)}},D=async M=>{const k=H.findIndex(Se=>Se.id===M);if(k<=0)return;const K=H[k-1],fe=H[k];try{await st(Qe(Ne,"shops",s,"walkins",fe.id),{position:K.position}),await st(Qe(Ne,"shops",s,"walkins",K.id),{position:fe.position})}catch(Se){console.error("Error reordering:",Se)}},F=async M=>{const k=H.findIndex(Se=>Se.id===M);if(k<0||k>=H.length-1)return;const K=H[k+1],fe=H[k];try{await st(Qe(Ne,"shops",s,"walkins",fe.id),{position:K.position}),await st(Qe(Ne,"shops",s,"walkins",K.id),{position:fe.position})}catch(Se){console.error("Error reordering:",Se)}};return l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[{label:"Currently Waiting",value:ge.waiting,icon:Xt,color:"bg-blue-100 text-blue-600"},{label:"Avg Wait",value:ge.avgWait>0?`${ge.avgWait}m`:"",icon:w2,color:"bg-amber-100 text-amber-600"},{label:"Completed Today",value:ge.completedToday,icon:j0,color:"bg-emerald-100 text-emerald-600"}].map(M=>{const k=M.icon;return l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsx("div",{className:`w-10 h-10 ${M.color} rounded-xl flex items-center justify-center`,children:l.jsx(k,{className:"w-5 h-5"})})}),l.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:M.value}),l.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:M.label})]},M.label)})}),W.length>0&&l.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(il,{className:"w-4 h-4 text-amber-600"}),l.jsx("span",{className:"text-sm font-bold text-amber-800",children:"Upcoming Online Bookings"})]}),l.jsx("div",{className:"space-y-1",children:W.slice(0,5).map(M=>{const[k,K]=(M.time||"").split(":"),fe=parseInt(k),Se=`${fe%12||12}:${K} ${fe>=12?"PM":"AM"}`;return l.jsxs("div",{className:"text-xs text-amber-700 flex items-center gap-2",children:[l.jsx(jn,{className:"w-3 h-3"}),l.jsx("span",{className:"font-medium",children:Se}),l.jsx("span",{children:""}),l.jsx("span",{children:M.clientName}),M.serviceName&&l.jsxs("span",{className:"text-amber-500",children:["(",M.serviceName,")"]}),M.staffName&&l.jsxs("span",{className:"text-violet-600",children:["with ",M.staffName]})]},M.id)})})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Walk-in Queue"}),!h&&l.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 transition-all hover:-translate-y-0.5",children:[l.jsx(hr,{className:"w-4 h-4"}),"Add Walk-in"]})]}),h&&l.jsxs("form",{onSubmit:I,className:"mb-5 p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"New Walk-in"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Client Name"}),l.jsx("input",{type:"text",value:S.clientName,onChange:M=>C(k=>({...k,clientName:M.target.value})),placeholder:`Walk-in #${j+1}`,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Service"}),l.jsxs("select",{value:S.serviceId,onChange:M=>oe(M.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[l.jsx("option",{value:"",children:"No service selected"}),e.map(M=>l.jsxs("option",{value:M.id,children:[M.name," (",M.duration,"min)"]},M.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Staff Preference"}),l.jsxs("select",{value:S.staffId,onChange:M=>C(k=>({...k,staffId:M.target.value})),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[l.jsx("option",{value:"",children:"Next available"}),n.map(M=>l.jsx("option",{value:M.id,children:M.name},M.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Est. Duration (min)"}),l.jsx("select",{value:S.estimatedDuration,onChange:M=>C(k=>({...k,estimatedDuration:parseInt(M.target.value)})),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[15,30,45,60,90,120].map(M=>l.jsx("option",{value:M,children:M<60?`${M} min`:`${M/60}h${M%60?` ${M%60}m`:""}`},M))})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{type:"submit",disabled:y,className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 transition-all disabled:opacity-50",children:[l.jsx(hr,{className:"w-4 h-4"}),y?"Adding":"Add to Queue"]}),l.jsx("button",{type:"button",onClick:()=>{p(!1),C({clientName:"",serviceId:"",staffId:"",estimatedDuration:30})},className:"px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Cancel"})]})]}),H.length===0&&B.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:l.jsx(Xt,{className:"w-6 h-6 text-slate-400"})}),l.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No walk-ins in queue"}),l.jsx("p",{className:"text-xs text-slate-400",children:"Add a walk-in client to start the queue."})]}):l.jsxs(l.Fragment,{children:[H.length>0&&l.jsxs("div",{className:"mb-5",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[l.jsx(jn,{className:"w-4 h-4 text-blue-500"}),"Waiting",l.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:H.length})]}),l.jsx("div",{className:"space-y-2",children:H.map((M,k)=>{const K=be.get(M.id);return l.jsxs("div",{className:"group flex items-center gap-3 border border-slate-200 rounded-xl p-3.5 hover:border-slate-300 hover:shadow-sm transition-all",children:[l.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[l.jsx("button",{onClick:()=>D(M.id),disabled:k===0,className:"p-0.5 text-slate-400 hover:text-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:l.jsx(ug,{className:"w-4 h-4"})}),l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center font-bold text-blue-700 text-sm",children:k+1}),l.jsx("button",{onClick:()=>F(M.id),disabled:k===H.length-1,className:"p-0.5 text-slate-400 hover:text-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:l.jsx(cg,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[l.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:M.clientName}),l.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 border border-blue-200 text-[10px] font-bold rounded-md",children:"WAITING"})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-slate-500",children:[M.serviceName&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(is,{className:"w-3 h-3 text-blue-400"}),M.serviceName]}),M.staffName&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(rl,{className:"w-3 h-3 text-violet-400"}),M.staffName]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(jn,{className:"w-3 h-3"}),M.estimatedDuration||30,"min"]})]})]}),l.jsxs("div",{className:"text-right mr-2",children:[l.jsx("div",{className:"text-sm font-bold text-amber-600",children:k3(K)}),l.jsx("div",{className:"text-[10px] text-slate-400",children:"est. wait"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsxs("button",{onClick:()=>L(M.id),className:"flex items-center gap-1 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 text-emerald-700 border border-emerald-200 rounded-lg text-xs font-semibold transition-all",title:"Start Service",children:[l.jsx(Cp,{className:"w-3.5 h-3.5"}),l.jsx("span",{className:"hidden sm:inline",children:"Start"})]}),l.jsxs("button",{onClick:()=>q(M.id),className:"flex items-center gap-1 px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 rounded-lg text-xs font-semibold transition-all",title:"No-show",children:[l.jsx(wa,{className:"w-3.5 h-3.5"}),l.jsx("span",{className:"hidden sm:inline",children:"No-show"})]})]})]},M.id)})})]}),B.length>0&&l.jsxs("div",{className:"mb-5",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[l.jsx(Cp,{className:"w-4 h-4 text-emerald-500"}),"In Progress",l.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 text-xs font-bold rounded-full",children:B.length})]}),l.jsx("div",{className:"space-y-2",children:B.map(M=>l.jsxs("div",{className:"flex items-center gap-3 border border-emerald-200 bg-emerald-50/50 rounded-xl p-3.5 transition-all",children:[l.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center",children:l.jsx(Cp,{className:"w-4 h-4 text-emerald-600"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[l.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:M.clientName}),l.jsx("span",{className:"px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 text-[10px] font-bold rounded-md",children:"IN PROGRESS"})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-slate-500",children:[M.serviceName&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(is,{className:"w-3 h-3 text-blue-400"}),M.serviceName]}),M.staffName&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(rl,{className:"w-3 h-3 text-violet-400"}),M.staffName]})]})]}),l.jsxs("div",{className:"text-right mr-2",children:[l.jsx("div",{className:"text-sm font-bold text-emerald-600",children:R3(M.startedAt)}),l.jsx("div",{className:"text-[10px] text-slate-400",children:"elapsed"})]}),l.jsxs("button",{onClick:()=>P(M.id),className:"flex items-center gap-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded-lg text-xs font-semibold transition-all",title:"Complete",children:[l.jsx(bs,{className:"w-3.5 h-3.5"}),l.jsx("span",{className:"hidden sm:inline",children:"Complete"})]})]},M.id))})]})]})]}),z.length>0&&l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsxs("button",{onClick:()=>x(!g),className:"w-full flex items-center justify-between",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[l.jsx(bs,{className:"w-4 h-4 text-slate-400"}),"Completed Today",l.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 border border-slate-200 text-xs font-bold rounded-full",children:z.length})]}),l.jsx(S0,{className:`w-4 h-4 text-slate-400 transition-transform ${g?"rotate-90":""}`})]}),g&&l.jsx("div",{className:"mt-3 space-y-2",children:z.map(M=>l.jsxs("div",{className:"flex items-center gap-3 border border-slate-100 rounded-lg p-3 bg-slate-50/50",children:[l.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center bg-slate-100",children:M.status==="no-show"?l.jsx(wa,{className:"w-3.5 h-3.5 text-red-400"}):l.jsx(bs,{className:"w-3.5 h-3.5 text-emerald-400"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-700 text-sm truncate",children:M.clientName}),l.jsx("span",{className:`text-[10px] font-bold rounded-md px-1.5 py-0.5 border ${M.status==="no-show"?"bg-red-50 text-red-600 border-red-200":"bg-emerald-50 text-emerald-600 border-emerald-200"}`,children:M.status==="no-show"?"NO-SHOW":"COMPLETED"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[M.serviceName&&l.jsx("span",{children:M.serviceName}),M.staffName&&l.jsxs("span",{children:[" ",M.staffName]})]})]})]},M.id))})]})]})}function D3(s,e){const n=new Date(s+"T12:00:00"),i=e.getTime()-n.getTime();return Math.floor(i/864e5)}function Xd(s){return`$${Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function kc(s){return s?new Date(s+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function M3(s,e,n){return s>90?"lost":s>n?"at-risk":s>e?"getting-cold":"active"}const Jd={active:{label:"Active",bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",icon:T0,iconColor:"text-emerald-500"},"getting-cold":{label:"Getting Cold",bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200",icon:_2,iconColor:"text-amber-500"},"at-risk":{label:"At Risk",bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",icon:il,iconColor:"text-orange-500"},lost:{label:"Lost",bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:dD,iconColor:"text-red-500"}};function O3({shopId:s,bookings:e,shop:n,slug:i}){const[o,u]=N.useState({}),[h,p]=N.useState(null),[g,x]=N.useState(null),[y,w]=N.useState(""),[S,C]=N.useState(""),[H,B]=N.useState("all"),[V,z]=N.useState("lastVisit"),[Y,W]=N.useState("asc"),[be,ge]=N.useState(null),[oe,A]=N.useState(!1),[j,I]=N.useState(null),[L,P]=N.useState(!1),[q,D]=N.useState(null),F=n?.winbackSettings?.warningDays||30,M=n?.winbackSettings?.inactiveDays||60,k=n?.winbackSettings?.enabled!==!1,K=J=>J.toLowerCase().replace(/\./g,"_dot_").replace(/@/g,"_at_");N.useEffect(()=>{if(!s)return;const J=Wt(Je(Ne,"shops",s,"clientNotes"),ve=>{const Oe={};ve.docs.forEach(Ve=>{Oe[Ve.id]=Ve.data()}),u(Oe)});return()=>J()},[s]);const fe=N.useMemo(()=>new Date,[]),Se=N.useMemo(()=>e.filter(J=>J.status==="confirmed"||J.status==="pending"||!J.status),[e]),_e=N.useMemo(()=>{const J={};return Se.forEach(ve=>{const Oe=ve.clientEmail?.toLowerCase();if(!Oe)return;J[Oe]||(J[Oe]={email:Oe,name:ve.clientName||Oe,phone:ve.clientPhone||"",totalVisits:0,totalSpent:0,lastVisitDate:null,firstVisitDate:null,bookings:[],serviceFrequency:{},staffFrequency:{}});const Ve=J[Oe];ve.clientName&&(Ve.name=ve.clientName),ve.clientPhone&&(Ve.phone=ve.clientPhone),Ve.totalVisits++,Ve.totalSpent+=Number(ve.servicePrice)||0,Ve.bookings.push(ve),(!Ve.lastVisitDate||ve.date>Ve.lastVisitDate)&&(Ve.lastVisitDate=ve.date),(!Ve.firstVisitDate||ve.date<Ve.firstVisitDate)&&(Ve.firstVisitDate=ve.date),ve.serviceName&&(Ve.serviceFrequency[ve.serviceName]=(Ve.serviceFrequency[ve.serviceName]||0)+1),ve.staffName&&(Ve.staffFrequency[ve.staffName]=(Ve.staffFrequency[ve.staffName]||0)+1)}),Object.values(J).map(ve=>{const Oe=ve.lastVisitDate?D3(ve.lastVisitDate,fe):999,Ve=M3(Oe,F,M),He=Object.entries(ve.serviceFrequency).sort((je,Be)=>Be[1]-je[1])[0]?.[0]||null,gt=Object.entries(ve.staffFrequency).sort((je,Be)=>Be[1]-je[1])[0]?.[0]||null,Fn=ve.totalVisits>0?ve.totalSpent/ve.totalVisits:0,xn=K(ve.email),vt=o[xn];return{...ve,daysSinceLastVisit:Oe,status:Ve,favoriteService:He,favoriteStaff:gt,avgSpending:Fn,encodedEmail:xn,notes:vt?.notes||"",contacted:vt?.contacted||!1,contactedAt:vt?.contactedAt||null,tags:vt?.tags||[]}})},[Se,fe,F,M,o]),O=N.useMemo(()=>{const J={all:_e.length,active:0,"getting-cold":0,"at-risk":0,lost:0};return _e.forEach(ve=>{J[ve.status]++}),J},[_e]),ne=N.useMemo(()=>_e.filter(J=>(J.status==="at-risk"||J.status==="lost")&&!J.contacted),[_e]),re=N.useMemo(()=>{let J=_e;if(S.trim()){const ve=S.toLowerCase();J=J.filter(Oe=>Oe.name.toLowerCase().includes(ve)||Oe.email.includes(ve)||Oe.phone.includes(ve))}return H!=="all"&&(J=J.filter(ve=>ve.status===H)),J=[...J].sort((ve,Oe)=>{if(V==="lastVisit"){const Ve=(ve.lastVisitDate||"").localeCompare(Oe.lastVisitDate||"");return Y==="asc"?Ve:-Ve}return V==="totalVisits"?Y==="desc"?Oe.totalVisits-ve.totalVisits:ve.totalVisits-Oe.totalVisits:V==="totalSpent"?Y==="desc"?Oe.totalSpent-ve.totalSpent:ve.totalSpent-Oe.totalSpent:0}),J},[_e,S,H,V,Y]),we=J=>{V===J?W(ve=>ve==="asc"?"desc":"asc"):(z(J),W(J==="lastVisit"?"asc":"desc"))},ye=N.useCallback(J=>{const ve=n?.name||"our shop",Oe=`${window.location.origin}${window.location.pathname}#/shop/${i}`;return`Hi ${J.name.split(" ")[0]}, we miss you at ${ve}! It's been ${J.daysSinceLastVisit} days since your last visit.${J.favoriteService?` Book your next ${J.favoriteService} today:`:" Book your next appointment:"} ${Oe}`},[n,i]),Ie=J=>{const ve=ye(J);I({email:J.email,encodedEmail:J.encodedEmail,name:J.name,message:ve})},ue=async(J,ve)=>{try{await navigator.clipboard.writeText(J),ge(ve),setTimeout(()=>ge(null),2e3)}catch(Oe){console.error("Failed to copy:",Oe)}},ze=async J=>{D(J);try{const ve=Qe(Ne,"shops",s,"clientNotes",J),Oe=await Np(ve),Ve=Oe.exists()?Oe.data():{};await Ep(ve,{...Ve,contacted:!0,contactedAt:new Date().toISOString()}),I(null)}catch(ve){console.error("Error marking as contacted:",ve)}finally{D(null)}},Ue=async J=>{try{const ve=Qe(Ne,"shops",s,"clientNotes",J),Oe=await Np(ve),Ve=Oe.exists()?Oe.data():{};await Ep(ve,{...Ve,contacted:!1,contactedAt:null})}catch(ve){console.error("Error resetting contacted status:",ve)}},Ge=async J=>{P(!0);try{const ve=Qe(Ne,"shops",s,"clientNotes",J),Oe=await Np(ve),Ve=Oe.exists()?Oe.data():{};await Ep(ve,{...Ve,notes:y}),x(null)}catch(ve){console.error("Error saving notes:",ve)}finally{P(!1)}};return l.jsxs("div",{className:"animate-fade-in space-y-6",children:[k&&ne.length>0&&l.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-5",children:[l.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>A(!oe),children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:l.jsx(il,{className:"w-5 h-5 text-orange-600"})}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[ne.length," client",ne.length!==1?"s":""," need",ne.length===1?"s":""," attention"]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Haven't visited in over ",M," days  send a win-back message to re-engage"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"px-2.5 py-1 bg-orange-100 text-orange-700 border border-orange-200 text-xs font-bold rounded-lg",children:ne.length}),oe?l.jsx(ug,{className:"w-5 h-5 text-slate-400"}):l.jsx(cg,{className:"w-5 h-5 text-slate-400"})]})]}),oe&&l.jsx("div",{className:"mt-4 space-y-2.5",children:ne.sort((J,ve)=>ve.daysSinceLastVisit-J.daysSinceLastVisit).map(J=>l.jsxs("div",{className:"bg-white rounded-xl border border-orange-100 p-4 flex items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[l.jsx("div",{className:"w-9 h-9 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(rl,{className:"w-4 h-4 text-orange-600"})}),l.jsxs("div",{className:"min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:J.name}),l.jsxs("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${Jd[J.status].bg} ${Jd[J.status].text} ${Jd[J.status].border}`,children:[J.daysSinceLastVisit," days ago"]})]}),l.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2 flex-wrap mt-0.5",children:[l.jsxs("span",{children:["Last: ",kc(J.lastVisitDate)]}),J.favoriteService&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"text-slate-300",children:""}),l.jsxs("span",{className:"text-blue-600",children:["Loves ",J.favoriteService]})]}),l.jsx("span",{className:"text-slate-300",children:""}),l.jsxs("span",{children:[J.totalVisits," visit",J.totalVisits!==1?"s":""]})]})]})]}),l.jsxs("button",{onClick:ve=>{ve.stopPropagation(),Ie(J)},className:"flex items-center gap-1.5 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-xl text-xs font-semibold transition-all shadow-sm flex-shrink-0",children:[l.jsx(Rp,{className:"w-3.5 h-3.5"}),"Send Win-back"]})]},J.email))})]}),j&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:l.jsx(SD,{className:"w-5 h-5 text-orange-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Win-back Message"}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Send to ",j.name]})]})]}),l.jsx("div",{className:"bg-slate-50 rounded-xl p-4 mb-4 border border-slate-200",children:l.jsx("textarea",{value:j.message,onChange:J=>I({...j,message:J.target.value}),rows:4,className:"w-full bg-transparent text-sm text-slate-700 resize-none focus:outline-none leading-relaxed"})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>{ue(j.message,j.email)},className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:be===j.email?l.jsxs(l.Fragment,{children:[l.jsx(sr,{className:"w-4 h-4"}),"Copied!"]}):l.jsxs(l.Fragment,{children:[l.jsx(iD,{className:"w-4 h-4"}),"Copy to Clipboard"]})}),l.jsxs("button",{onClick:()=>ze(j.encodedEmail),disabled:q===j.encodedEmail,className:"flex items-center justify-center gap-2 px-5 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-emerald-600/20 disabled:opacity-50",children:[l.jsx(sr,{className:"w-4 h-4"}),"Mark Contacted"]}),l.jsx("button",{onClick:()=>I(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Close"})]})]})}),l.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total Clients",value:O.all,icon:Xt,color:"bg-blue-100 text-blue-600"},{label:"Active",value:O.active,icon:T0,color:"bg-emerald-100 text-emerald-600"},{label:"Getting Cold",value:O["getting-cold"],icon:_2,color:"bg-amber-100 text-amber-600"},{label:"At Risk / Lost",value:O["at-risk"]+O.lost,icon:il,color:"bg-red-100 text-red-600"}].map(J=>{const ve=J.icon;return l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsx("div",{className:`w-10 h-10 ${J.color} rounded-xl flex items-center justify-center`,children:l.jsx(ve,{className:"w-5 h-5"})})}),l.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:J.value}),l.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:J.label})]},J.label)})}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"All Clients"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Derived from booking history"})]}),l.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[re.length," client",re.length!==1?"s":""]})]}),l.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[l.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[l.jsx(UD,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),l.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:S,onChange:J=>C(J.target.value),className:"w-full pl-10 pr-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),S&&l.jsx("button",{onClick:()=>C(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:l.jsx(ll,{className:"w-4 h-4 text-slate-400 hover:text-slate-600"})})]}),l.jsx("div",{className:"flex items-center gap-1 p-1 bg-slate-100 rounded-xl overflow-x-auto",children:[{key:"all",label:"All"},{key:"active",label:"Active"},{key:"getting-cold",label:"Cold"},{key:"at-risk",label:"At Risk"},{key:"lost",label:"Lost"}].map(J=>l.jsxs("button",{onClick:()=>B(J.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all whitespace-nowrap ${H===J.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[J.label,l.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${H===J.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:O[J.key]??0})]},J.key))}),l.jsx("div",{className:"flex items-center gap-1",children:[{key:"lastVisit",label:"Last Visit"},{key:"totalVisits",label:"Visits"},{key:"totalSpent",label:"Spent"}].map(J=>l.jsxs("button",{onClick:()=>we(J.key),className:`flex items-center gap-1 px-3 py-2 rounded-lg text-xs font-semibold transition-all border ${V===J.key?"bg-blue-50 text-blue-700 border-blue-200":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,children:[J.label,V===J.key&&l.jsx(V6,{className:"w-3 h-3"})]},J.key))})]}),re.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:l.jsx(Xt,{className:"w-6 h-6 text-slate-400"})}),l.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No clients found"}),l.jsx("p",{className:"text-xs text-slate-400",children:S?"Try a different search term":"Client data will appear as bookings come in"})]}):l.jsx("div",{className:"space-y-2",children:re.map(J=>{const ve=h===J.email,Oe=Jd[J.status],Ve=Oe.icon;return l.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden hover:border-slate-300 transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3 p-4 cursor-pointer hover:bg-slate-50/50 transition-all",onClick:()=>p(ve?null:J.email),children:[l.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(rl,{className:"w-4 h-4 text-blue-600"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:J.name}),l.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-bold rounded-md border ${Oe.bg} ${Oe.text} ${Oe.border}`,children:[l.jsx(Ve,{className:"w-3 h-3"}),Oe.label]}),J.contacted&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",children:[l.jsx(Rp,{className:"w-2.5 h-2.5"}),"Contacted"]}),J.notes&&l.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-violet-50 text-violet-600 border-violet-200",children:l.jsx(W_,{className:"w-2.5 h-2.5"})})]}),l.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-3 mt-0.5 flex-wrap",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(hg,{className:"w-3 h-3"}),J.email]}),J.phone&&l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(fg,{className:"w-3 h-3"}),J.phone]})]})]}),l.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-shrink-0",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm font-bold text-slate-900",children:J.totalVisits}),l.jsx("div",{className:"text-[10px] text-slate-400",children:"visits"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm font-bold text-blue-600",children:Xd(J.totalSpent)}),l.jsx("div",{className:"text-[10px] text-slate-400",children:"spent"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700",children:kc(J.lastVisitDate)}),l.jsx("div",{className:"text-[10px] text-slate-400",children:"last visit"})]})]}),l.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(J.status==="at-risk"||J.status==="lost")&&!J.contacted&&l.jsx("button",{onClick:He=>{He.stopPropagation(),Ie(J)},className:"p-2 text-orange-500 hover:text-orange-700 hover:bg-orange-50 rounded-lg transition-all",title:"Send win-back message",children:l.jsx(Rp,{className:"w-4 h-4"})}),ve?l.jsx(ug,{className:"w-4 h-4 text-slate-400"}):l.jsx(cg,{className:"w-4 h-4 text-slate-400"})]})]}),ve&&l.jsxs("div",{className:"border-t border-slate-200 bg-slate-50/50 p-5 space-y-5",children:[l.jsxs("div",{className:"sm:hidden grid grid-cols-3 gap-3",children:[l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[l.jsx("div",{className:"text-lg font-bold text-slate-900",children:J.totalVisits}),l.jsx("div",{className:"text-[10px] text-slate-400",children:"visits"})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[l.jsx("div",{className:"text-lg font-bold text-blue-600",children:Xd(J.totalSpent)}),l.jsx("div",{className:"text-[10px] text-slate-400",children:"spent"})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[l.jsx("div",{className:"text-sm font-bold text-slate-700",children:kc(J.lastVisitDate)}),l.jsx("div",{className:"text-[10px] text-slate-400",children:"last visit"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[l.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Avg per Visit"}),l.jsx("div",{className:"text-sm font-bold text-slate-900",children:Xd(J.avgSpending)})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[l.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"First Visit"}),l.jsx("div",{className:"text-sm font-bold text-slate-900",children:kc(J.firstVisitDate)})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[l.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Days Since Last Visit"}),l.jsxs("div",{className:"text-sm font-bold text-slate-900",children:[J.daysSinceLastVisit,"d"]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[l.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Favorite Service"}),l.jsx("div",{className:"text-sm font-bold text-blue-600 truncate",children:J.favoriteService||""})]})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[l.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[l.jsx(is,{className:"w-3.5 h-3.5 text-blue-500"}),"Services Used"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(J.serviceFrequency).sort((He,gt)=>gt[1]-He[1]).map(([He,gt])=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg text-xs font-medium",children:[He,l.jsxs("span",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-[10px] font-bold",children:[gt,""]})]},He))})]}),Object.keys(J.staffFrequency).length>0&&l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[l.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[l.jsx(Xt,{className:"w-3.5 h-3.5 text-violet-500"}),"Staff Members Seen"]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(J.staffFrequency).sort((He,gt)=>gt[1]-He[1]).map(([He,gt])=>l.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-violet-50 text-violet-700 border border-violet-200 rounded-lg text-xs font-medium",children:[He,l.jsxs("span",{className:"bg-violet-100 px-1.5 py-0.5 rounded text-[10px] font-bold",children:[gt,""]})]},He))})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[l.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[l.jsx(Vt,{className:"w-3.5 h-3.5 text-emerald-500"}),"Booking History",l.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",J.bookings.length,")"]})]}),l.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto",children:J.bookings.sort((He,gt)=>(gt.date+gt.time).localeCompare(He.date+He.time)).map((He,gt)=>l.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2 rounded-lg hover:bg-slate-50 text-xs",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-700",children:kc(He.date)}),l.jsx("span",{className:"text-slate-400",children:He.time}),He.serviceName&&l.jsx("span",{className:"text-blue-600",children:He.serviceName})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[He.staffName&&l.jsx("span",{className:"text-violet-600",children:He.staffName}),He.servicePrice!=null&&l.jsx("span",{className:"font-semibold text-slate-900",children:Xd(He.servicePrice)})]})]},gt))})]}),l.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h4",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:[l.jsx(W_,{className:"w-3.5 h-3.5 text-amber-500"}),"Notes"]}),g!==J.encodedEmail&&l.jsx("button",{onClick:()=>{x(J.encodedEmail),w(J.notes||"")},className:"text-xs text-blue-600 hover:text-blue-800 font-semibold",children:J.notes?"Edit":"Add Notes"})]}),g===J.encodedEmail?l.jsxs("div",{className:"space-y-2",children:[l.jsx("textarea",{value:y,onChange:He=>w(He.target.value),placeholder:"Add notes about this client (e.g., preferences, allergies, favorite styles...)",rows:3,className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>Ge(J.encodedEmail),disabled:L,className:"px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:L?"Saving...":"Save"}),l.jsx("button",{onClick:()=>x(null),className:"px-4 py-1.5 bg-white hover:bg-slate-50 text-slate-600 border border-slate-200 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}):l.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:J.notes||'No notes yet. Click "Add Notes" to save preferences, allergies, or anything useful.'})]}),J.contacted&&l.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg px-4 py-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[l.jsx(sr,{className:"w-4 h-4"}),l.jsxs("span",{className:"font-medium",children:["Contacted",J.contactedAt?` on ${new Date(J.contactedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`:""]})]}),l.jsx("button",{onClick:()=>Ue(J.encodedEmail),className:"text-xs text-blue-600 hover:text-blue-800 font-semibold",children:"Reset"})]})]})]},J.email)})})]})]})}const V3=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function Dp(s){const[e,n]=s.split(":").map(Number);return e*60+n}function P3(s,e){if(s.status!=="waiting"||s.serviceId&&e.serviceId&&s.serviceId!==e.serviceId||s.staffId&&s.staffId!=="any"&&e.staffId&&s.staffId!==e.staffId)return!1;if(e.date){if(s.preferredDate&&s.preferredDate!==e.date)return!1;if(s.preferredDays&&s.preferredDays.length>0){const n=new Date(e.date+"T12:00:00"),i=V3[n.getDay()];if(!s.preferredDays.includes(i))return!1}}if(e.time&&s.preferredTimeRange){const n=Dp(e.time),i=Dp(s.preferredTimeRange.start),o=Dp(s.preferredTimeRange.end);if(!(s.preferredTimeRange.start==="00:00"&&s.preferredTimeRange.end==="23:59")&&(n<i||n>o))return!1}return!0}function L3(s,e){return s.filter(n=>P3(n,e)).sort((n,i)=>(n.createdAt||"").localeCompare(i.createdAt||""))}const aw=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}];function $r(s){if(!s)return"";const[e,n]=s.split(":").map(Number),i=e>=12?"PM":"AM",o=e%12||12;return n===0?`${o}${i}`:`${o}:${n.toString().padStart(2,"0")}${i}`}function U3({user:s}){const{slug:e}=No(),n=wo(),[i,o]=N.useState(null),[u,h]=N.useState(null),[p,g]=N.useState(!0),[x,y]=N.useState(!1),[w,S]=N.useState([]),[C,H]=N.useState([]),[B,V]=N.useState([]),[z,Y]=N.useState([]),[W,be]=N.useState("schedule"),[ge,oe]=N.useState(null),[A,j]=N.useState("all"),[I,L]=N.useState("all"),[P,q]=N.useState([]),[D,F]=N.useState(null),[M,k]=N.useState(null),[K,fe]=N.useState({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""});N.useEffect(()=>{if(!s){n(`/shop/${e}/login`,{replace:!0});return}(async()=>{g(!0);try{const G=ys(Je(Ne,"shops"),ss("slug","==",e)),de=await vs(G);if(de.empty){y(!0),g(!1);return}const ce=de.docs[0],Me=ce.data();if(Me.ownerUid!==s.uid){y(!0),g(!1);return}o(Me),h(ce.id)}catch(G){console.error("Error checking ownership:",G),y(!0)}finally{g(!1)}})()},[s,e,n]),N.useEffect(()=>{if(!u)return;const R=Wt(Je(Ne,"shops",u,"availability"),Te=>{const Ce=Te.docs.map(Re=>({id:Re.id,...Re.data()}));S(Ce)}),G=Wt(Je(Ne,"shops",u,"bookings"),Te=>{const Ce=Te.docs.map(Re=>({id:Re.id,...Re.data()}));H(Ce)}),de=Wt(Je(Ne,"shops",u,"staff"),Te=>{const Ce=Te.docs.map(Re=>({id:Re.id,...Re.data()})).filter(Re=>Re.active!==!1).sort((Re,rt)=>(Re.name||"").localeCompare(rt.name||""));V(Ce)}),ce=Wt(Je(Ne,"shops",u,"waitlist"),Te=>{const Ce=Te.docs.map(Re=>({id:Re.id,...Re.data()})).sort((Re,rt)=>(Re.createdAt||"").localeCompare(rt.createdAt||""));q(Ce)}),Me=Wt(Je(Ne,"shops",u,"services"),Te=>{const Ce=Te.docs.map(Re=>({id:Re.id,...Re.data()})).filter(Re=>Re.active!==!1).sort((Re,rt)=>(Re.name||"").localeCompare(rt.name||""));Y(Ce)});return()=>{R(),G(),de(),ce(),Me()}},[u]);const Se=async()=>{await R5(al),n(`/shop/${e}`,{replace:!0})},_e=async R=>{R.preventDefault();const{date:G,startTime:de,endTime:ce,slotDuration:Me,staffId:Te}=K,Ce=parseInt(Me),[Re,rt]=de.split(":").map(Number),[ot,$t]=ce.split(":").map(Number),Gt=Re*60+rt,qn=ot*60+$t;let na=Gt;for(;na+Ce<=qn;){const _n=Math.floor(na/60),Hn=na%60,wn=`${_n.toString().padStart(2,"0")}:${Hn.toString().padStart(2,"0")}`,sa={date:G,time:wn,duration:Ce,available:!0};if(Te){const Us=B.find(Oa=>Oa.id===Te);sa.staffId=Te,sa.staffName=Us?.name||""}await hi(Je(Ne,"shops",u,"availability"),sa),na+=Ce}fe({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""})},O=async R=>{await cI(Qe(Ne,"shops",u,"availability",R))},ne=R=>{const G={date:R.date,time:R.time,staffId:R.staffId||null,serviceId:R.serviceId||null},de=L3(P,G);de.length>0&&F({matches:de,slot:G})},re=async(R,G)=>{for(const de of R)await st(Qe(Ne,"shops",u,"waitlist",de.id),{status:"notified",notifiedAt:new Date().toISOString(),notifiedSlot:{date:G.date,time:G.time,staffId:G.staffId||null,staffName:G.staffName||null}});F(null)},we=async R=>{await st(Qe(Ne,"shops",u,"waitlist",R),{status:"notified",notifiedAt:new Date().toISOString()})},ye=async R=>{await st(Qe(Ne,"shops",u,"waitlist",R),{status:"expired"})},Ie=async R=>{const G=C.find(de=>de.id===R);if(G&&G.recurringGroupId){k({bookingId:R,recurringGroupId:G.recurringGroupId});return}if(await st(Qe(Ne,"shops",u,"bookings",R),{status:"cancelled"}),G&&G.slotId&&!G.slotId.startsWith("wh-")&&!G.slotId.startsWith("recurring-"))try{await st(Qe(Ne,"shops",u,"availability",G.slotId),{available:!0})}catch(de){console.warn("Could not re-open slot:",de)}G&&ne(G)},ue=async R=>{const G=C.find(de=>de.id===R);if(await st(Qe(Ne,"shops",u,"bookings",R),{status:"cancelled"}),G&&G.slotId&&!G.slotId.startsWith("wh-")&&!G.slotId.startsWith("recurring-"))try{await st(Qe(Ne,"shops",u,"availability",G.slotId),{available:!0})}catch(de){console.warn("Could not re-open slot:",de)}G&&ne(G),k(null)},ze=async(R,G)=>{const de=C.find(Me=>Me.id===R);if(!de)return;const ce=C.filter(Me=>Me.recurringGroupId===G&&Me.date>=de.date&&(Me.status==="pending"||Me.status==="confirmed"));for(const Me of ce)if(await st(Qe(Ne,"shops",u,"bookings",Me.id),{status:"cancelled"}),Me.slotId&&!Me.slotId.startsWith("wh-")&&!Me.slotId.startsWith("recurring-"))try{await st(Qe(Ne,"shops",u,"availability",Me.slotId),{available:!0})}catch(Te){console.warn("Could not re-open slot:",Te)}de&&ne(de),k(null)},Ue=async R=>{await st(Qe(Ne,"shops",u,"bookings",R),{status:"confirmed"})},Ge=async R=>{const G=C.find(de=>de.id===R);if(await st(Qe(Ne,"shops",u,"bookings",R),{status:"rejected"}),G&&G.slotId&&!G.slotId.startsWith("wh-"))try{await st(Qe(Ne,"shops",u,"availability",G.slotId),{available:!0})}catch(de){console.warn("Could not re-open slot:",de)}G&&ne(G)},J=async()=>{const R=!i?.requireApproval;try{await st(Qe(Ne,"shops",u),{requireApproval:R}),o(G=>({...G,requireApproval:R}))}catch(G){console.error("Error updating requireApproval:",G)}},ve=async R=>{const G=parseInt(R);try{await st(Qe(Ne,"shops",u),{bufferMinutes:G}),o(de=>({...de,bufferMinutes:G}))}catch(de){console.error("Error updating buffer minutes:",de)}},Oe=(R,G)=>new Date(`${R}T${G}`).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),Ve=N.useMemo(()=>{const R={},G=A==="all"?B:B.filter(ce=>ce.id===A),de=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(const ce of G)ce.weeklyHours&&de.forEach((Me,Te)=>{ce.weeklyHours[Me]?.enabled&&(R[Te]=!0)});return R},[B,A]),He=N.useMemo(()=>(A==="all"?B:B.filter(G=>G.id===A)).filter(G=>G.weeklyHours?aw.some(de=>G.weeklyHours[de.key]?.enabled):!1),[B,A]),gt=N.useMemo(()=>{const R=new Date,G=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}-${String(R.getDate()).padStart(2,"0")}`,de=R.getDay(),ce=de===0?-6:1-de,Me=new Date(R);Me.setDate(R.getDate()+ce),Me.setHours(0,0,0,0);const Te=new Date(Me);Te.setDate(Me.getDate()+6),Te.setHours(23,59,59,999);const Ce=`${Me.getFullYear()}-${String(Me.getMonth()+1).padStart(2,"0")}-${String(Me.getDate()).padStart(2,"0")}`,Re=`${Te.getFullYear()}-${String(Te.getMonth()+1).padStart(2,"0")}-${String(Te.getDate()).padStart(2,"0")}`,rt=C.filter(Gt=>Gt.date===G).length,ot=C.filter(Gt=>Gt.date>=Ce&&Gt.date<=Re).length,$t=new Set(C.map(Gt=>Gt.clientEmail?.toLowerCase()).filter(Boolean)).size;return{todayBookings:rt,weekBookings:ot,uniqueClients:$t,totalBookings:C.length}},[C]),Fn=N.useMemo(()=>C.filter(R=>R.status==="pending").length,[C]),xn=N.useMemo(()=>P.filter(R=>R.status==="waiting").length,[P]),[vt,je]=N.useState(0),[Be,it]=N.useState({}),Lt=N.useMemo(()=>{if(!i)return 0;i?.winbackSettings?.warningDays;const R=i?.winbackSettings?.inactiveDays||60;if(!(i?.winbackSettings?.enabled!==!1))return 0;const de=new Date,ce=C.filter(Re=>Re.status==="confirmed"||Re.status==="pending"||!Re.status),Me={};ce.forEach(Re=>{const rt=Re.clientEmail?.toLowerCase();rt&&(!Me[rt]||Re.date>Me[rt])&&(Me[rt]=Re.date)});let Te=0;const Ce=Re=>Re.replace(/\./g,"_dot_").replace(/@/g,"_at_");return Object.entries(Me).forEach(([Re,rt])=>{if(Math.floor((de.getTime()-new Date(rt+"T12:00:00").getTime())/864e5)>R){const $t=Ce(Re);Be[$t]?.contacted||Te++}}),Te},[C,i,Be]);if(N.useEffect(()=>{if(!u)return;const R=Wt(Je(Ne,"shops",u,"clientNotes"),G=>{const de={};G.docs.forEach(ce=>{de[ce.id]=ce.data()}),it(de)});return()=>R()},[u]),N.useEffect(()=>{if(!u)return;const R=Wt(Je(Ne,"shops",u,"walkins"),G=>{const de=G.docs.filter(ce=>ce.data().status==="waiting").length;je(de)});return()=>R()},[u]),p)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[l.jsx("div",{className:"spinner"}),l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading dashboard"})]})});if(x)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:l.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:l.jsx(x2,{className:"w-8 h-8 text-red-500"})}),l.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Unauthorized"}),l.jsx("p",{className:"text-slate-600 mb-6",children:"You don't have access to this dashboard."}),l.jsx(et,{to:`/shop/${e}/login`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:"Login"})]})});const xt=A==="all"?w:w.filter(R=>R.staffId===A),lt=A==="all"?C:C.filter(R=>R.staffId===A),rn=xt.reduce((R,G)=>(R[G.date]||(R[G.date]=[]),R[G.date].push(G),R),{}),_t=lt.reduce((R,G)=>(R[G.date]||(R[G.date]=[]),R[G.date].push(G),R),{}),ws=ge?Object.keys(rn).filter(R=>R===ge).sort():Object.keys(rn).sort(),bn=ge?lt.filter(R=>R.date===ge):lt,Vn=I==="all"?bn:I==="pending"?bn.filter(R=>R.status==="pending"):I==="confirmed"?bn.filter(R=>!R.status||R.status==="confirmed"):bn.filter(R=>R.status==="cancelled"||R.status==="rejected"),Ls={all:bn.length,pending:bn.filter(R=>R.status==="pending").length,confirmed:bn.filter(R=>!R.status||R.status==="confirmed").length,cancelled:bn.filter(R=>R.status==="cancelled"||R.status==="rejected").length},Ma=[{key:"schedule",label:"Schedule",icon:Vt},{key:"clients",label:"Clients",icon:T0},{key:"walkins",label:"Walk-ins",icon:e3},{key:"analytics",label:"Analytics",icon:Y6},{key:"waitlist",label:"Waitlist",icon:dg},{key:"staff",label:"Staff",icon:Xt},{key:"services",label:"Services",icon:is},{key:"settings",label:"Settings",icon:FD}];return l.jsxs("div",{className:"min-h-screen bg-slate-50",children:[l.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"h-16 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(i.name||"")[0]?.toUpperCase()||"S"}),l.jsxs("div",{className:"hidden sm:block",children:[l.jsx("h1",{className:"text-base font-bold text-slate-900 leading-tight",children:i.name}),l.jsx("p",{className:"text-xs text-slate-500",children:"Dashboard"})]})]}),l.jsx("div",{className:"flex items-center bg-slate-100 p-1 rounded-xl",children:Ma.map(R=>{const G=R.icon;return l.jsxs("button",{onClick:()=>be(R.key),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${W===R.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[l.jsx(G,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:R.label}),R.key==="schedule"&&Fn>0&&l.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-amber-500 text-white text-[10px] font-bold rounded-full leading-none",children:Fn}),R.key==="clients"&&Lt>0&&l.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-orange-500 text-white text-[10px] font-bold rounded-full leading-none",children:Lt}),R.key==="walkins"&&vt>0&&l.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-emerald-500 text-white text-[10px] font-bold rounded-full leading-none",children:vt}),R.key==="waitlist"&&xn>0&&l.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-500 text-white text-[10px] font-bold rounded-full leading-none",children:xn})]},R.key)})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(et,{to:`/shop/${e}`,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[l.jsx(cD,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"View Page"})]}),l.jsxs("button",{onClick:Se,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all",children:[l.jsx(wD,{className:"w-4 h-4"}),l.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[W==="schedule"&&l.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 animate-fade-in",children:[{label:"Today's Bookings",value:gt.todayBookings,icon:K_,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:gt.weekBookings,icon:j0,color:"bg-violet-100 text-violet-600"},{label:"Total Bookings",value:gt.totalBookings,icon:p2,color:"bg-emerald-100 text-emerald-600"},{label:"Unique Clients",value:gt.uniqueClients,icon:Xt,color:"bg-amber-100 text-amber-600"}].map(R=>{const G=R.icon;return l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsx("div",{className:`w-10 h-10 ${R.color} rounded-xl flex items-center justify-center`,children:l.jsx(G,{className:"w-5 h-5"})})}),l.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:R.value}),l.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:R.label})]},R.label)})}),W==="clients"&&l.jsx(O3,{shopId:u,bookings:C,shop:i,slug:e}),W==="walkins"&&l.jsx(I3,{shopId:u,services:z,staff:B,bookings:C}),W==="analytics"&&l.jsx(A3,{bookings:C}),W==="staff"&&l.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:l.jsx(T3,{shopId:u})}),W==="services"&&l.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:l.jsx(v3,{shopId:u})}),D&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:l.jsx(io,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Waitlist Match!"}),l.jsxs("p",{className:"text-sm text-slate-500",children:[D.matches.length," client",D.matches.length!==1?"s":""," on the waitlist match this freed slot"]})]})]}),l.jsx("div",{className:"bg-slate-50 rounded-xl p-3 mb-4 text-sm",children:l.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[l.jsx(Vt,{className:"w-4 h-4 text-blue-500"}),l.jsxs("span",{className:"font-medium",children:[new Date(D.slot.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," at ",(()=>{const[R,G]=D.slot.time.split(":"),de=parseInt(R);return`${de%12||12}:${G} ${de>=12?"PM":"AM"}`})()]})]})}),l.jsx("div",{className:"space-y-2 mb-5 max-h-48 overflow-y-auto",children:D.matches.map(R=>l.jsx("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border border-blue-100 rounded-lg",children:l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:R.clientName}),l.jsx("span",{className:"text-xs text-slate-500 ml-2",children:R.serviceName})]})},R.id))}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>re(D.matches,D.slot),className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:[l.jsx(io,{className:"w-4 h-4"}),"Notify All"]}),l.jsx("button",{onClick:()=>F(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Dismiss"})]})]})}),M&&l.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:l.jsx(ar,{className:"w-5 h-5 text-red-600"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Cancel Recurring Booking"}),l.jsx("p",{className:"text-sm text-slate-500",children:"This booking is part of a recurring series"})]})]}),l.jsxs("div",{className:"space-y-2 mb-5",children:[l.jsxs("button",{onClick:()=>ue(M.bookingId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[l.jsx(wa,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this one only"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments stay active"})]})]}),l.jsxs("button",{onClick:()=>ze(M.bookingId,M.recurringGroupId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[l.jsx(ar,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future in series"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments"})]})]})]}),l.jsx("button",{onClick:()=>k(null),className:"w-full px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Never mind"})]})}),W==="waitlist"&&l.jsx("div",{className:"animate-fade-in",children:l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-5",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Waitlist"}),xn>0&&l.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:[xn," waiting"]})]}),l.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[P.length," total"]})]}),P.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:l.jsx(dg,{className:"w-6 h-6 text-slate-400"})}),l.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No waitlist entries yet"}),l.jsx("p",{className:"text-xs text-slate-400",children:"Clients can join the waitlist when no slots are available on your booking page."})]}):l.jsx("div",{children:(()=>{const R={};return P.forEach(G=>{const de=G.serviceName||"Other";R[de]||(R[de]=[]),R[de].push(G)}),Object.entries(R).sort(([G],[de])=>G.localeCompare(de)).map(([G,de])=>l.jsxs("div",{className:"mb-6 last:mb-0",children:[l.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100 flex items-center gap-2",children:[l.jsx(is,{className:"w-3.5 h-3.5 text-blue-500"}),G,l.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",de.filter(ce=>ce.status==="waiting").length," waiting)"]})]}),l.jsx("div",{className:"space-y-2.5",children:de.sort((ce,Me)=>(ce.createdAt||"").localeCompare(Me.createdAt||"")).map(ce=>{const Me={waiting:"bg-blue-50 text-blue-700 border-blue-200",notified:"bg-emerald-50 text-emerald-700 border-emerald-200",booked:"bg-emerald-50 text-emerald-700 border-emerald-200",expired:"bg-slate-100 text-slate-500 border-slate-200"},Te={waiting:"Waiting",notified:"Notified",booked:"Booked",expired:"Removed"},Ce=ce.createdAt?(()=>{const rt=Date.now()-new Date(ce.createdAt).getTime(),ot=Math.floor(rt/864e5),$t=Math.floor(rt/36e5);return ot>0?`${ot}d`:`${$t}h`})():"",Re={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return l.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(rl,{className:"w-4 h-4 text-blue-600"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:ce.clientName}),l.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${Me[ce.status]||Me.waiting}`,children:Te[ce.status]||"Waiting"})]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Joined ",Ce," ago",ce.refCode&&l.jsx("span",{className:"font-mono text-slate-400 ml-2",children:ce.refCode})]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[ce.status==="waiting"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>we(ce.id),className:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all",title:"Notify client",children:l.jsx(io,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>ye(ce.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove from waitlist",children:l.jsx(ll,{className:"w-4 h-4"})})]}),ce.status==="notified"&&l.jsx("button",{onClick:()=>ye(ce.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove",children:l.jsx(ll,{className:"w-3.5 h-3.5"})})]})]}),l.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[ce.staffName&&ce.staffName!=="Any Available"&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(Xt,{className:"w-3 h-3 text-violet-400"}),l.jsx("span",{className:"text-violet-600",children:ce.staffName})]}),ce.preferredDate&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(Vt,{className:"w-3 h-3 text-slate-400"}),l.jsxs("span",{children:["Preferred: ",new Date(ce.preferredDate+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]}),ce.preferredDays&&ce.preferredDays.length>0&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(Vt,{className:"w-3 h-3 text-slate-400"}),l.jsxs("span",{children:["Days: ",ce.preferredDays.map(rt=>Re[rt]||rt).join(", ")]})]}),ce.preferredTimeRange&&!(ce.preferredTimeRange.start==="00:00"&&ce.preferredTimeRange.end==="23:59")&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(jn,{className:"w-3 h-3 text-slate-400"}),l.jsxs("span",{children:["Time: ",$r(ce.preferredTimeRange.start),"",$r(ce.preferredTimeRange.end)]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(hg,{className:"w-3 h-3"}),ce.clientEmail]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(fg,{className:"w-3 h-3"}),ce.clientPhone]})]}),ce.status==="notified"&&ce.notifiedSlot&&l.jsxs("div",{className:"mt-1.5 px-2.5 py-1.5 bg-emerald-50 border border-emerald-200 rounded-lg inline-flex items-center gap-1.5",children:[l.jsx(io,{className:"w-3 h-3 text-emerald-500"}),l.jsxs("span",{className:"text-emerald-700 font-medium",children:["Notified about ",new Date(ce.notifiedSlot.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ",$r(ce.notifiedSlot.time)]})]})]})]},ce.id)})})]},G))})()})]})}),W==="settings"&&l.jsxs("div",{className:"max-w-2xl animate-fade-in space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Shop Settings"}),l.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure your booking preferences"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[l.jsxs("div",{className:"pr-4",children:[l.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Require Booking Approval"}),l.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Review and approve bookings before they're confirmed"})]}),l.jsx("button",{type:"button",onClick:J,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${i?.requireApproval?"bg-blue-500":"bg-slate-300"}`,children:l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${i?.requireApproval?"translate-x-6":"translate-x-1"}`})})]}),i?.requireApproval&&l.jsxs("div",{className:"p-3.5 bg-amber-50 border border-amber-200 rounded-xl text-xs text-amber-800 leading-relaxed",children:[l.jsx("strong",{children:" Approval mode is on."}),' New bookings will appear as "Pending" until you approve or reject them. Time slots are held while pending to prevent double-booking.']}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[l.jsxs("div",{className:"pr-4",children:[l.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Buffer Time Between Bookings"}),l.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Add a gap between consecutive appointments"})]}),l.jsxs("select",{value:i?.bufferMinutes||0,onChange:R=>ve(R.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[l.jsx("option",{value:"0",children:"No buffer"}),l.jsx("option",{value:"5",children:"5 minutes"}),l.jsx("option",{value:"10",children:"10 minutes"}),l.jsx("option",{value:"15",children:"15 minutes"}),l.jsx("option",{value:"30",children:"30 minutes"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Client Retention"}),l.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure win-back alerts to re-engage inactive clients"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[l.jsxs("div",{className:"pr-4",children:[l.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Enable Win-back Alerts"}),l.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Show alerts when clients haven't visited in a while"})]}),l.jsx("button",{type:"button",onClick:async()=>{const R=i?.winbackSettings||{},G=R.enabled===!1;try{await st(Qe(Ne,"shops",u),{winbackSettings:{...R,enabled:G}}),o(de=>({...de,winbackSettings:{...de.winbackSettings||{},enabled:G}}))}catch(de){console.error("Error updating winback settings:",de)}},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${i?.winbackSettings?.enabled!==!1?"bg-blue-500":"bg-slate-300"}`,children:l.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${i?.winbackSettings?.enabled!==!1?"translate-x-6":"translate-x-1"}`})})]}),i?.winbackSettings?.enabled!==!1&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[l.jsxs("div",{className:"pr-4",children:[l.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Getting Cold Threshold"}),l.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:'Flag clients as "Getting Cold" after this many days without a booking'})]}),l.jsxs("select",{value:i?.winbackSettings?.warningDays||30,onChange:async R=>{const G=parseInt(R.target.value),de=i?.winbackSettings||{};try{await st(Qe(Ne,"shops",u),{winbackSettings:{...de,warningDays:G}}),o(ce=>({...ce,winbackSettings:{...ce.winbackSettings||{},warningDays:G}}))}catch(ce){console.error("Error updating warning days:",ce)}},className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[l.jsx("option",{value:"14",children:"14 days"}),l.jsx("option",{value:"21",children:"21 days"}),l.jsx("option",{value:"30",children:"30 days"}),l.jsx("option",{value:"45",children:"45 days"}),l.jsx("option",{value:"60",children:"60 days"})]})]}),l.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[l.jsxs("div",{className:"pr-4",children:[l.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"At Risk Threshold"}),l.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:'Flag clients as "At Risk" after this many days without a booking'})]}),l.jsxs("select",{value:i?.winbackSettings?.inactiveDays||60,onChange:async R=>{const G=parseInt(R.target.value),de=i?.winbackSettings||{};try{await st(Qe(Ne,"shops",u),{winbackSettings:{...de,inactiveDays:G}}),o(ce=>({...ce,winbackSettings:{...ce.winbackSettings||{},inactiveDays:G}}))}catch(ce){console.error("Error updating inactive days:",ce)}},className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[l.jsx("option",{value:"30",children:"30 days"}),l.jsx("option",{value:"45",children:"45 days"}),l.jsx("option",{value:"60",children:"60 days"}),l.jsx("option",{value:"90",children:"90 days"}),l.jsx("option",{value:"120",children:"120 days"})]})]}),l.jsxs("div",{className:"p-3.5 bg-orange-50 border border-orange-200 rounded-xl text-xs text-orange-800 leading-relaxed",children:[l.jsx("strong",{children:" Tip:"}),' Clients flagged as "Lost" (over 90 days) will also appear in win-back alerts. Visit the ',l.jsx("strong",{children:"Clients"})," tab to view at-risk clients and send win-back messages."]})]})]})]})]}),W==="schedule"&&l.jsxs("div",{className:"animate-fade-in",children:[B.length>0&&l.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5",children:"Filter by Staff"}),l.jsxs("select",{value:A,onChange:R=>j(R.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[l.jsx("option",{value:"all",children:"All Staff"}),B.map(R=>l.jsxs("option",{value:R.id,children:[R.name,R.role?`  ${R.role}`:""]},R.id))]})]})}),He.length>0&&l.jsxs("div",{className:"mb-6 bg-violet-50 border border-violet-200 rounded-xl p-5",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(v2,{className:"w-4 h-4 text-violet-600"}),l.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Recurring Weekly Hours"})]}),l.jsx("div",{className:"space-y-2.5",children:He.map(R=>{const G=aw.filter(de=>R.weeklyHours[de.key]?.enabled);return l.jsxs("div",{className:"flex items-start gap-2.5",children:[l.jsx("div",{className:"w-7 h-7 bg-violet-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:l.jsx(Xt,{className:"w-3.5 h-3.5 text-violet-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:R.name}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:G.map(de=>{const ce=R.weeklyHours[de.key];return l.jsxs("span",{className:"inline-block px-2 py-0.5 bg-white text-violet-700 border border-violet-200 rounded text-xs font-medium",children:[de.short," ",$r(ce.start),"",$r(ce.end),ce.break&&l.jsxs("span",{className:"text-amber-600 ml-1",children:["(break ",$r(ce.break.start),"",$r(ce.break.end),")"]})]},de.key)})})]})]},R.id)})}),l.jsx("p",{className:"text-xs text-violet-500 mt-3",children:"Slots auto-generate on the booking page. Manage hours in the Staff tab."})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Monthly Overview"}),l.jsx(b3,{slotsByDate:rn,bookingsByDate:_t,selectedDate:ge,onSelectDate:oe,recurringDayFlags:Ve}),ge&&l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsxs("span",{className:"text-sm text-slate-600",children:["Showing: ",l.jsx("strong",{className:"text-slate-900",children:new Date(ge+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),l.jsx("button",{onClick:()=>oe(null),className:"text-xs px-3 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-all border border-slate-200",children:"Show All"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:He.length>0?"Add Custom Slots":"Create Time Slots"}),He.length>0&&l.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Use this for one-off availability outside regular hours."}),!He.length&&l.jsx("div",{className:"mb-4"}),l.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[B.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Staff Member"}),l.jsxs("select",{value:K.staffId,onChange:R=>fe({...K,staffId:R.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[l.jsx("option",{value:"",children:"Select a staff member"}),B.map(R=>l.jsxs("option",{value:R.id,children:[R.name,R.role?`  ${R.role}`:""]},R.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Date"}),l.jsx("input",{type:"date",value:K.date,onChange:R=>fe({...K,date:R.target.value}),required:!0,min:new Date().toISOString().split("T")[0],className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Start"}),l.jsx("input",{type:"time",value:K.startTime,onChange:R=>fe({...K,startTime:R.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"End"}),l.jsx("input",{type:"time",value:K.endTime,onChange:R=>fe({...K,endTime:R.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Slot Duration"}),l.jsxs("select",{value:K.slotDuration,onChange:R=>fe({...K,slotDuration:R.target.value}),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[l.jsx("option",{value:"15",children:"15 minutes"}),l.jsx("option",{value:"30",children:"30 minutes"}),l.jsx("option",{value:"45",children:"45 minutes"}),l.jsx("option",{value:"60",children:"1 hour"}),l.jsx("option",{value:"90",children:"1.5 hours"}),l.jsx("option",{value:"120",children:"2 hours"})]})]}),l.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[l.jsx(hr,{className:"w-4 h-4"}),"Generate Slots"]})]}),l.jsxs("div",{className:"mt-4 p-3.5 bg-blue-50 border border-blue-100 rounded-xl text-xs text-slate-600 leading-relaxed",children:[l.jsx("strong",{className:"text-slate-700",children:" Tip:"})," ",He.length>0?"Weekly hours auto-generate slots. Use this for one-off slots outside regular hours.":B.length>0?"Select a staff member, pick a date, and set working hours to create slots.":"Set your hours and slot duration. We'll create all the time slots for that day."]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-900",children:ge?"Bookings":"All Bookings"}),Ls.pending>0&&l.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 border border-amber-200 text-xs font-bold rounded-full",children:[Ls.pending," pending"]})]}),l.jsx("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:Vn.length})]}),l.jsx("div",{className:"flex items-center gap-1 mb-4 p-1 bg-slate-100 rounded-lg overflow-x-auto",children:[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"confirmed",label:"Confirmed"},{key:"cancelled",label:"Cancelled"}].map(R=>l.jsxs("button",{onClick:()=>L(R.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-semibold transition-all whitespace-nowrap ${I===R.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[R.label,l.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${I===R.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:Ls[R.key]})]},R.key))}),Vn.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:l.jsx(K_,{className:"w-6 h-6 text-slate-400"})}),l.jsx("p",{className:"text-sm text-slate-500 font-medium",children:I!=="all"?`No ${I} bookings`:ge?"No bookings for this date":"No bookings yet"})]}):l.jsx("div",{className:"space-y-2.5 max-h-[500px] overflow-y-auto pr-1",children:Vn.sort((R,G)=>`${R.date}${R.time}`.localeCompare(`${G.date}${G.time}`)).map(R=>{const G=R.status||"confirmed",de={pending:"bg-amber-50 text-amber-700 border-amber-200",confirmed:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200",cancelled:"bg-slate-100 text-slate-500 border-slate-200"},ce={pending:"Pending",confirmed:"Confirmed",rejected:"Rejected",cancelled:"Cancelled"};return l.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[l.jsxs("div",{className:"flex items-start justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(rl,{className:"w-4 h-4 text-blue-600"})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:R.clientName}),l.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${de[G]}`,children:ce[G]}),R.recurring&&l.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",title:"Recurring appointment",children:l.jsx(ar,{className:"w-2.5 h-2.5"})})]}),l.jsx("div",{className:"text-xs text-slate-500",children:Oe(R.date,R.time)})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[G==="pending"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Ue(R.id),className:"p-1.5 text-emerald-500 hover:text-emerald-700 hover:bg-emerald-50 rounded-lg transition-all",title:"Approve booking",children:l.jsx(sr,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>Ge(R.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Reject booking",children:l.jsx(wa,{className:"w-4 h-4"})})]}),G==="confirmed"&&l.jsx("button",{onClick:()=>Ie(R.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Cancel booking",children:l.jsx(au,{className:"w-3.5 h-3.5"})})]})]}),l.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[R.serviceName&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(is,{className:"w-3 h-3 text-blue-400"}),l.jsx("span",{className:"font-medium text-slate-700",children:R.serviceName}),R.servicePrice!=null&&l.jsxs("span",{className:"text-blue-600 font-semibold",children:["$",Number(R.servicePrice).toFixed(2)]})]}),R.staffName&&l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(Xt,{className:"w-3 h-3 text-violet-400"}),l.jsx("span",{className:"text-violet-600",children:R.staffName})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(hg,{className:"w-3 h-3"}),R.clientEmail]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(fg,{className:"w-3 h-3"}),R.clientPhone]})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[R.refCode&&l.jsxs("span",{className:"font-mono text-[10px] text-slate-400",children:["REF: ",R.refCode]}),R.recurring&&l.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-indigo-50 border border-indigo-200 rounded text-[10px] font-semibold text-indigo-600",children:" Recurring"})]})]})]},R.id)})})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("h2",{className:"text-lg font-bold text-slate-900",children:ge?"Custom Time Slots":"All Custom Time Slots"}),l.jsx("span",{className:"text-xs font-semibold text-slate-500 bg-slate-100 px-2.5 py-1 rounded-lg",children:ge?(rn[ge]||[]).length:xt.length})]}),He.length>0&&l.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Recurring slots from weekly hours auto-generate  not shown here."}),!He.length&&l.jsx("div",{className:"mb-4"}),ws.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:l.jsx(Vt,{className:"w-6 h-6 text-slate-400"})}),l.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:ge?"No custom slots for this date":"No custom slots yet"}),l.jsx("p",{className:"text-xs text-slate-400",children:He.length>0?"Recurring hours handle most scheduling.":"Use the form above to generate availability."})]}):l.jsx("div",{className:"space-y-6",children:ws.map(R=>l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100",children:new Date(R).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2.5",children:rn[R].sort((G,de)=>G.time.localeCompare(de.time)).map(G=>l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3.5 text-center group hover:border-slate-300 transition-all",children:[l.jsx("div",{className:"text-sm font-bold text-slate-900 mb-0.5",children:G.time}),l.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[G.duration," min"]}),G.staffName&&l.jsxs("div",{className:"text-xs text-violet-600 mb-1.5 flex items-center justify-center gap-1",children:[l.jsx(Xt,{className:"w-3 h-3"}),G.staffName]}),l.jsx("div",{className:"mb-2",children:G.available?l.jsx("span",{className:"inline-block px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-md text-xs font-medium",children:"Available"}):l.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-50 text-red-700 border border-red-200 rounded-md text-xs font-medium",children:"Booked"})}),G.available&&l.jsxs("button",{onClick:()=>O(G.id),className:"opacity-0 group-hover:opacity-100 flex items-center justify-center gap-1 w-full px-2 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-xs font-medium transition-all border border-red-200",children:[l.jsx(au,{className:"w-3 h-3"}),"Remove"]})]},G.id))})]},R))})]})]})]})]})}function B3({user:s}){const{slug:e}=No(),n=wo(),[i,o]=N.useState(""),[u,h]=N.useState(""),[p,g]=N.useState(""),[x,y]=N.useState(!1);N.useEffect(()=>{if(!s)return;(async()=>{const C=ys(Je(Ne,"shops"),ss("slug","==",e)),H=await vs(C);H.empty||H.docs[0].data().ownerUid===s.uid&&n(`/shop/${e}/dashboard`,{replace:!0})})()},[s,e,n]);const w=async S=>{S.preventDefault(),g(""),y(!0);try{const H=(await u1(al,i,u)).user,B=ys(Je(Ne,"shops"),ss("slug","==",e)),V=await vs(B);if(V.empty){g("Shop not found"),y(!1);return}if(V.docs[0].data().ownerUid!==H.uid){g("You are not the owner of this shop"),await al.signOut(),y(!1);return}n(`/shop/${e}/dashboard`,{replace:!0})}catch(C){switch(C.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":g("Invalid email or password");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/too-many-requests":g("Too many failed attempts. Please try again later.");break;default:g("Login failed. Please try again.")}h("")}finally{y(!1)}};return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:l.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[l.jsx("div",{className:"text-center mb-8",children:l.jsxs(et,{to:"/",className:"inline-flex items-center gap-2.5",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:l.jsx(Ia,{className:"w-5 h-5 text-white"})}),l.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",l.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),l.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),l.jsx("input",{type:"email",value:i,onChange:S=>{o(S.target.value),g("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),l.jsx("input",{type:"password",value:u,onChange:S=>{h(S.target.value),g("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&l.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[l.jsx("span",{children:""})," ",p]})]}),l.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):"Sign In"})]}),l.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:l.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",l.jsx(et,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs(et,{to:`/shop/${e}`,className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[l.jsx(Ra,{className:"w-3.5 h-3.5"}),"Back to booking page"]})})]})})}function iw({name:s,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const i=(s||"").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return l.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:i||"?"})}function rw(){return l.jsxs(et,{to:"/",className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:l.jsx(Ia,{className:"w-3.5 h-3.5 text-white"})}),l.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",l.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function z3(){const{slug:s,refCode:e}=No(),[n,i]=N.useState(null),[o,u]=N.useState(null),[h,p]=N.useState(!0),[g,x]=N.useState(!1),[y,w]=N.useState(null),[S,C]=N.useState(null),[H,B]=N.useState(!1),[V,z]=N.useState([]),[Y,W]=N.useState([]),[be,ge]=N.useState([]),[oe,A]=N.useState([]),[j,I]=N.useState(!1),[L,P]=N.useState(!1),[q,D]=N.useState(null),[F,M]=N.useState(null),[k,K]=N.useState(null),[fe,Se]=N.useState(!1),[_e,O]=N.useState("");N.useEffect(()=>{(async()=>{p(!0);try{const Be=ys(Je(Ne,"shops"),ss("slug","==",s)),it=await vs(Be);if(it.empty)x(!0);else{const Lt=it.docs[0];i(Lt.data()),u(Lt.id)}}catch(Be){console.error("Error looking up shop:",Be),x(!0)}finally{p(!1)}})()},[s]),N.useEffect(()=>{if(!o)return;(async()=>{try{const Be=ys(Je(Ne,"shops",o,"bookings"),ss("refCode","==",e.toUpperCase())),it=await vs(Be);if(it.empty)B(!0);else{const Lt=it.docs[0];w(Lt.data()),C(Lt.id)}}catch(Be){console.error("Error looking up booking:",Be),B(!0)}})()},[o,e]),N.useEffect(()=>{if(!o||!y)return;const je=Wt(Je(Ne,"shops",o,"bookings"),xt=>{z(xt.docs.map(lt=>({id:lt.id,...lt.data()})))}),Be=Wt(Je(Ne,"shops",o,"availability"),xt=>{const lt=new Date,rn=xt.docs.map(_t=>({id:_t.id,..._t.data()})).filter(_t=>new Date(`${_t.date}T${_t.time}`)>lt);W(rn)}),it=Wt(Je(Ne,"shops",o,"staff"),xt=>{ge(xt.docs.map(lt=>({id:lt.id,...lt.data()})).filter(lt=>lt.active!==!1).sort((lt,rn)=>(lt.name||"").localeCompare(rn.name||"")))}),Lt=Wt(Je(Ne,"shops",o,"services"),xt=>{A(xt.docs.map(lt=>({id:lt.id,...lt.data()})).filter(lt=>lt.active!==!1))});return()=>{je(),Be(),it(),Lt()}},[o,y]);const ne=n?.bufferMinutes||0,re=N.useMemo(()=>{if(!y)return null;if(y.serviceId){const je=oe.find(Be=>Be.id===y.serviceId);if(je)return je}return y.serviceName?{id:y.serviceId,name:y.serviceName,price:y.servicePrice,duration:y.serviceDuration||y.duration}:null},[y,oe]),we=N.useMemo(()=>{if(!j||!y)return[];const je=new Date,Be=re?.duration||y.duration||60;let it=Y.filter(_t=>_t.available);it=it.filter(_t=>_t.duration>=Be),y.staffId&&(it=it.filter(_t=>_t.staffId===y.staffId||!_t.staffId));const Lt=y.staffId?be.filter(_t=>_t.id===y.staffId):be,xt=E2(Lt,Be,ne,4).filter(_t=>new Date(`${_t.date}T${_t.time}`)>je),lt=T2(xt,it),rn=V.filter(_t=>_t.id!==S);return S2(lt,rn,ne)},[j,y,S,Y,be,V,ne,re]),ye=N.useMemo(()=>[...new Set(we.map(je=>je.date))].sort(),[we]),Ie=N.useMemo(()=>F?we.filter(je=>je.date===F):[],[F,we]),ue=async(je="single")=>{Se(!0);try{if(await st(Qe(Ne,"shops",o,"bookings",S),{status:"cancelled"}),y.slotId&&!y.slotId.startsWith("wh-")&&!y.slotId.startsWith("recurring-"))try{await st(Qe(Ne,"shops",o,"availability",y.slotId),{available:!0})}catch(Be){console.warn("Could not re-open slot:",Be)}if(je==="future"&&y.recurringGroupId){const Be=V.filter(it=>it.recurringGroupId===y.recurringGroupId&&it.id!==S&&it.date>=y.date&&(it.status==="pending"||it.status==="confirmed"));for(const it of Be)if(await st(Qe(Ne,"shops",o,"bookings",it.id),{status:"cancelled"}),it.slotId&&!it.slotId.startsWith("wh-")&&!it.slotId.startsWith("recurring-"))try{await st(Qe(Ne,"shops",o,"availability",it.slotId),{available:!0})}catch(Lt){console.warn("Could not re-open slot:",Lt)}}w(Be=>({...Be,status:"cancelled"})),P(!1),D(null),O("cancelled")}catch(Be){console.error("Cancel error:",Be),O("error")}finally{Se(!1)}},ze=async()=>{if(k){Se(!0);try{const je={date:k.date,time:k.time,slotId:k.id};if(k.staffId&&(je.staffId=k.staffId,je.staffName=k.staffName||""),n?.requireApproval&&(je.status="pending"),y.slotId&&!y.slotId.startsWith("wh-"))try{await st(Qe(Ne,"shops",o,"availability",y.slotId),{available:!0})}catch(Be){console.warn("Could not re-open old slot:",Be)}if(!k.generated&&k.id)try{await st(Qe(Ne,"shops",o,"availability",k.id),{available:!1})}catch(Be){console.warn("Could not block new slot:",Be)}await st(Qe(Ne,"shops",o,"bookings",S),je),w(Be=>({...Be,...je})),I(!1),M(null),K(null),O("rescheduled")}catch(je){console.error("Reschedule error:",je),O("error")}finally{Se(!1)}}},Ue=je=>new Date(je+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),Ge=je=>{const[Be,it]=je.split(":"),Lt=parseInt(Be),xt=Lt>=12?"PM":"AM";return`${Lt%12||12}:${it} ${xt}`},J=je=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(je),ve=je=>{if(!je)return"";if(je<60)return`${je} min`;const Be=Math.floor(je/60),it=je%60;return it?`${Be}h ${it}m`:`${Be} hour${Be>1?"s":""}`};if(h)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[l.jsx("div",{className:"spinner"}),l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:l.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:l.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),l.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),l.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,l.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),l.jsxs(et,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[l.jsx(Ra,{className:"w-4 h-4"}),"Go Home"]})]})});if(H)return l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),l.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),l.jsx(rw,{})]})}),l.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[l.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:l.jsx(il,{className:"w-8 h-8 text-amber-500"})}),l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Not Found"}),l.jsx("p",{className:"text-slate-600 mb-2",children:"No booking found with reference code"}),l.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),l.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[l.jsx(Vt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!y)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[l.jsx("div",{className:"spinner"}),l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking"})]})});const Oe=y.status||"confirmed",Ve=Oe==="pending"||Oe==="confirmed",He=Oe==="cancelled",gt=Oe==="rejected",Fn={pending:{label:"Pending Approval",color:"bg-amber-100 text-amber-700 border-amber-200",icon:jn},confirmed:{label:"Confirmed",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:bs},cancelled:{label:"Cancelled",color:"bg-slate-100 text-slate-500 border-slate-200",icon:wa},rejected:{label:"Rejected",color:"bg-red-100 text-red-700 border-red-200",icon:wa}},xn=Fn[Oe]||Fn.confirmed,vt=xn.icon;return l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),l.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),l.jsx(rw,{})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[_e==="rescheduled"&&l.jsx("div",{className:"mb-6 animate-scale-in",children:l.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(b2,{className:"w-8 h-8 text-emerald-600"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Rescheduled!"}),l.jsx("p",{className:"text-slate-600 mb-4",children:n?.requireApproval?"Your booking has been rescheduled and is pending approval.":"Your booking has been successfully rescheduled."}),l.jsx("button",{onClick:()=>O(""),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View updated details "})]})}),_e==="cancelled"&&l.jsx("div",{className:"mb-6 animate-scale-in",children:l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-lg p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(wa,{className:"w-8 h-8 text-slate-400"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Cancelled"}),l.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking has been cancelled."}),l.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[l.jsx(Vt,{className:"w-4 h-4"}),"Book a new appointment"]})]})}),_e==="error"&&l.jsx("div",{className:"mb-6 animate-scale-in",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Something went wrong. Please try again."})]})}),!j&&l.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Your Booking"}),l.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference: ",l.jsx("span",{className:"font-mono font-bold text-blue-600",children:(y.refCode||e).toUpperCase()})]})]}),(He||gt)&&l.jsxs("div",{className:`mb-4 p-4 rounded-xl border flex items-center gap-3 ${He?"bg-slate-50 border-slate-200":"bg-red-50 border-red-200"}`,children:[l.jsx(vt,{className:`w-5 h-5 ${He?"text-slate-400":"text-red-500"}`}),l.jsx("span",{className:`font-medium text-sm ${He?"text-slate-600":"text-red-700"}`,children:He?"This booking has been cancelled.":"This booking has been rejected by the shop."})]}),y.recurringGroupId&&l.jsxs("div",{className:"mb-4 p-3.5 bg-blue-50 border border-blue-200 rounded-xl flex items-center gap-2.5",children:[l.jsx(ar,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Part of a recurring series"}),y.recurringInterval&&l.jsxs("p",{className:"text-xs text-blue-600 mt-0.5",children:["Repeats every ",y.recurringInterval==="weekly"?"week":y.recurringInterval==="biweekly"?"2 weeks":y.recurringInterval==="fourweekly"?"4 weeks":y.recurringInterval==="monthly"?"month":y.recurringInterval]})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),l.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${xn.color}`,children:[l.jsx(vt,{className:"w-3.5 h-3.5"}),xn.label]})]}),y.serviceName&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(is,{className:"w-4 h-4 text-blue-600"})}),l.jsx("span",{className:"font-semibold text-slate-800",children:y.serviceName})]}),y.servicePrice!=null&&l.jsx("span",{className:"font-bold text-blue-600",children:J(y.servicePrice)})]}),y.staffName&&l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx(iw,{name:y.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),l.jsx("span",{className:"font-semibold text-slate-800",children:y.staffName})]}),l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:l.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),l.jsxs("span",{className:"font-semibold text-slate-800",children:[Ue(y.date)," at ",Ge(y.time)]})]}),l.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:l.jsx(jn,{className:"w-4 h-4 text-slate-500"})}),l.jsx("span",{children:ve(y.serviceDuration||y.duration)})]})]}),Ve&&!_e&&l.jsx("div",{className:"space-y-3",children:L?l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 animate-scale-in",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:l.jsx(il,{className:"w-5 h-5 text-red-500"})}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-slate-900",children:"Are you sure?"}),l.jsx("p",{className:"text-sm text-slate-600",children:"This action cannot be undone."})]})]}),y.recurringGroupId&&!q&&l.jsxs("div",{className:"space-y-2 mb-4",children:[l.jsxs("button",{onClick:()=>D("single"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[l.jsx(wa,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this appointment only"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments in the series remain active"})]})]}),l.jsxs("button",{onClick:()=>D("future"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[l.jsx(ar,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future appointments"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments in the series"})]})]}),l.jsx("button",{onClick:()=>P(!1),className:"w-full px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Go Back"})]}),(!y.recurringGroupId||q)&&l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{onClick:()=>ue(q||"single"),disabled:fe,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[fe?l.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}):l.jsx(wa,{className:"w-4 h-4"}),fe?"Cancelling":q==="future"?"Cancel All Future":"Yes, Cancel"]}),l.jsx("button",{onClick:()=>{q?D(null):P(!1)},disabled:fe,className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Go Back"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>{I(!0),O("")},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[l.jsx(v2,{className:"w-4 h-4"}),"Reschedule Booking"]}),l.jsxs("button",{onClick:()=>{P(!0),D(null)},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-white hover:bg-red-50 text-red-600 rounded-xl font-semibold border border-red-200 hover:border-red-300 transition-all",children:[l.jsx(wa,{className:"w-4 h-4"}),"Cancel Booking"]})]})}),(He||gt)&&l.jsx("div",{className:"text-center",children:l.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[l.jsx(Vt,{className:"w-4 h-4"}),"Book Again"]})})]}),j&&l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[l.jsxs("button",{onClick:()=>{I(!1),M(null),K(null)},className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[l.jsx(Ra,{className:"w-3.5 h-3.5"}),"Back to Booking"]}),y.serviceName&&l.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[l.jsx(is,{className:"w-3.5 h-3.5 text-blue-500"}),l.jsx("span",{className:"font-semibold text-slate-800",children:y.serviceName}),y.servicePrice!=null&&l.jsx("span",{className:"text-blue-600 font-bold",children:J(y.servicePrice)})]}),y.staffName&&l.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[l.jsx(iw,{name:y.staffName,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),l.jsx("span",{className:"font-semibold text-slate-800",children:y.staffName})]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a New Time"}),l.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Pick a new date and time for your appointment"})]}),ye.length===0?l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:l.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),l.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"No time slots are currently available. Check back soon!"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-8",children:l.jsx(N2,{availableDates:ye,selectedDate:F,onSelectDate:je=>{M(je),K(null)}})}),F&&l.jsxs("div",{className:"animate-slide-down",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",Ue(F)]}),l.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[Ie.length," slot",Ie.length!==1?"s":""]})]}),Ie.length===0?l.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:l.jsx("p",{className:"text-slate-500",children:"No slots available for this date"})}):l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:Ie.sort((je,Be)=>je.time.localeCompare(Be.time)).map(je=>{const Be=k?.id===je.id;return l.jsxs("button",{onClick:()=>K(je),className:`group border rounded-xl p-4 transition-all duration-200 text-center ${Be?"bg-blue-600 border-blue-600 text-white shadow-md shadow-blue-600/30":"bg-white border-slate-200 hover:border-blue-400 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5"}`,children:[l.jsx("div",{className:`text-lg font-bold mb-1 ${Be?"text-white":"text-slate-900 group-hover:text-blue-700"} transition-colors`,children:Ge(je.time)}),je.staffName&&l.jsxs("div",{className:`text-xs mb-0.5 flex items-center justify-center gap-1 ${Be?"text-blue-100":"text-violet-600"}`,children:[l.jsx(Xt,{className:"w-3 h-3"}),je.staffName]}),l.jsx("div",{className:`text-xs ${Be?"text-blue-200":"text-slate-400"}`,children:ve(y.serviceDuration||y.duration)})]},je.id)})}),k&&l.jsxs("div",{className:"mt-6 animate-fade-in",children:[l.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 shadow-sm p-5 mb-4",children:[l.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"New Appointment Time"}),l.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[l.jsx(Vt,{className:"w-4 h-4 text-blue-500"}),l.jsxs("span",{className:"font-semibold text-slate-800",children:[Ue(k.date)," at ",Ge(k.time)]})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:ze,disabled:fe,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:fe?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Rescheduling"]}):l.jsxs(l.Fragment,{children:[l.jsx(bs,{className:"w-4 h-4"}),"Confirm Reschedule"]})}),l.jsx("button",{onClick:()=>K(null),className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]})]}),!F&&l.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]})]}),l.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:l.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:l.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",l.jsx(et,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function lw(){return l.jsxs(et,{to:"/",className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:l.jsx(Ia,{className:"w-3.5 h-3.5 text-white"})}),l.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",l.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function F3(s){if(!s)return"Any time";const e=n=>{const[i,o]=n.split(":").map(Number),u=i>=12?"PM":"AM",h=i%12||12;return o===0?`${h}${u}`:`${h}:${o.toString().padStart(2,"0")}${u}`};return s.start==="00:00"&&s.end==="23:59"?"Any time":`${e(s.start)}  ${e(s.end)}`}function q3(s){if(!s||s.length===0)return"Any day";const e={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return s.map(n=>e[n]||n).join(", ")}function H3(s){if(!s)return"";const e=new Date,n=new Date(s),i=e-n,o=Math.floor(i/6e4);if(o<60)return`${o}m ago`;const u=Math.floor(o/60);return u<24?`${u}h ago`:`${Math.floor(u/24)}d ago`}function $3(){const{slug:s,refCode:e}=No(),[n,i]=N.useState(null),[o,u]=N.useState(null),[h,p]=N.useState(!0),[g,x]=N.useState(!1),[y,w]=N.useState(null),[S,C]=N.useState(!1),[H,B]=N.useState(null);if(N.useEffect(()=>{(async()=>{p(!0);try{const oe=ys(Je(Ne,"shops"),ss("slug","==",s)),A=await vs(oe);if(A.empty)x(!0);else{const j=A.docs[0];i(j.data()),u(j.id)}}catch(oe){console.error("Error looking up shop:",oe),x(!0)}finally{p(!1)}})()},[s]),N.useEffect(()=>{if(!o)return;(async()=>{try{const oe=ys(Je(Ne,"shops",o,"waitlist"),ss("refCode","==",e.toUpperCase())),A=await vs(oe);if(A.empty){C(!0);return}const j=A.docs[0],I={id:j.id,...j.data()};w(I);const L=ys(Je(Ne,"shops",o,"waitlist"),ss("serviceId","==",I.serviceId),ss("status","==","waiting")),D=(await vs(L)).docs.map(F=>({id:F.id,...F.data()})).sort((F,M)=>(F.createdAt||"").localeCompare(M.createdAt||"")).findIndex(F=>F.id===I.id);D>=0&&B(D+1)}catch(oe){console.error("Error looking up waitlist entry:",oe),C(!0)}})()},[o,e]),h)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[l.jsx("div",{className:"spinner"}),l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:l.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:l.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),l.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),l.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,l.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),l.jsxs(et,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[l.jsx(Ra,{className:"w-4 h-4"}),"Go Home"]})]})});if(S)return l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),l.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),l.jsx(lw,{})]})}),l.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:l.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[l.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:l.jsx(il,{className:"w-8 h-8 text-amber-500"})}),l.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Waitlist Entry Not Found"}),l.jsx("p",{className:"text-slate-600 mb-2",children:"No waitlist entry found with reference code"}),l.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),l.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[l.jsx(Vt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!y)return l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[l.jsx("div",{className:"spinner"}),l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading waitlist"})]})});const V={waiting:{label:"Waiting",color:"bg-blue-100 text-blue-700 border-blue-200",icon:jn},notified:{label:"Slot Available!",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:io},booked:{label:"Booked",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:bs},expired:{label:"Expired",color:"bg-slate-100 text-slate-500 border-slate-200",icon:jn}},z=V[y.status]||V.waiting,Y=z.icon,W=ge=>ge?new Date(ge+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",be=ge=>{if(!ge)return"";const[oe,A]=ge.split(":"),j=parseInt(oe),I=j>=12?"PM":"AM";return`${j%12||12}:${A} ${I}`};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),l.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),l.jsx(lw,{})]})}),l.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:l.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[y.status==="notified"&&l.jsx("div",{className:"mb-6 animate-scale-in",children:l.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx(io,{className:"w-8 h-8 text-emerald-600"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"A Slot Is Available!"}),l.jsxs("p",{className:"text-slate-600 mb-4",children:["A slot has opened up for ",y.serviceName,". Book now before it's taken!"]}),y.notifiedSlot&&l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-xl text-sm text-emerald-700 font-medium mb-4",children:[l.jsx(Vt,{className:"w-4 h-4"}),W(y.notifiedSlot.date)," at"," ",be(y.notifiedSlot.time),y.notifiedSlot.staffName&&l.jsxs("span",{className:"text-emerald-600",children:[" ","with ",y.notifiedSlot.staffName]})]}),l.jsx("div",{children:l.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-emerald-600/20 hover:shadow-lg",children:[l.jsx(Vt,{className:"w-4 h-4"}),"Book Now "]})})]})}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Waitlist Status"}),l.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference:"," ",l.jsx("span",{className:"font-mono font-bold text-blue-600",children:(y.refCode||e).toUpperCase()})]})]}),l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),l.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${z.color}`,children:[l.jsx(Y,{className:"w-3.5 h-3.5"}),z.label]})]}),y.status==="waiting"&&H!=null&&l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Position"}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(dg,{className:"w-4 h-4 text-blue-500"}),l.jsxs("span",{className:"font-bold text-slate-900 text-lg",children:["#",H]}),l.jsx("span",{className:"text-sm text-slate-500",children:"in line"})]})]}),y.serviceName&&l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:l.jsx(is,{className:"w-4 h-4 text-blue-600"})}),l.jsx("span",{className:"font-semibold text-slate-800",children:y.serviceName})]}),y.staffName&&l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center",children:l.jsx(Xt,{className:"w-4 h-4 text-violet-600"})}),l.jsx("span",{className:"font-semibold text-slate-800",children:y.staffName})]}),y.preferredDate&&l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:l.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),l.jsxs("span",{className:"text-sm text-slate-700",children:["Preferred: ",W(y.preferredDate)]})]}),y.preferredDays&&y.preferredDays.length>0&&l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:l.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),l.jsxs("span",{className:"text-sm text-slate-700",children:["Days: ",q3(y.preferredDays)]})]}),y.preferredTimeRange&&l.jsxs("div",{className:"flex items-center gap-2.5",children:[l.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:l.jsx(jn,{className:"w-4 h-4 text-slate-500"})}),l.jsxs("span",{className:"text-sm text-slate-700",children:["Time: ",F3(y.preferredTimeRange)]})]}),y.createdAt&&l.jsxs("div",{className:"pt-2 border-t border-slate-100 text-xs text-slate-400",children:["Joined ",H3(y.createdAt)]})]}),l.jsx("div",{className:"mt-6 text-center",children:l.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[l.jsx(Vt,{className:"w-4 h-4"}),y.status==="notified"?"Book Now":"Check Available Slots"]})})]})}),l.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:l.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:l.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",l.jsx(et,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function G3(){return l.jsxs(et,{to:"/",className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:l.jsx(Ia,{className:"w-3.5 h-3.5 text-white"})}),l.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",l.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function ow(s){if(s==null)return"";if(s<1)return"Next up!";if(s<60)return`~${s} min`;const e=Math.floor(s/60),n=s%60;return n>0?`~${e}h ${n}m`:`~${e}h`}function Y3(){const{slug:s}=No(),[e,n]=N.useState(null),[i,o]=N.useState(null),[u,h]=N.useState(!0),[p,g]=N.useState(!1),[x,y]=N.useState([]),[w,S]=N.useState([]),[C,H]=N.useState([]),[B,V]=N.useState(!1),[z,Y]=N.useState(!1),[W,be]=N.useState(!1),[ge,oe]=N.useState(""),[A,j]=N.useState(0),[I,L]=N.useState({clientName:"",serviceId:""}),[P,q]=N.useState(Date.now());N.useEffect(()=>{const _e=setInterval(()=>q(Date.now()),3e4);return()=>clearInterval(_e)},[]),N.useEffect(()=>{(async()=>{h(!0);try{const O=ys(Je(Ne,"shops"),ss("slug","==",s)),ne=await vs(O);if(ne.empty)g(!0);else{const re=ne.docs[0];n(re.data()),o(re.id)}}catch(O){console.error("Error looking up shop:",O),g(!0)}finally{h(!1)}})()},[s]),N.useEffect(()=>{if(!i)return;const _e=Wt(Je(Ne,"shops",i,"walkins"),re=>{const we=re.docs.map(ye=>({id:ye.id,...ye.data()}));y(we)}),O=Wt(Je(Ne,"shops",i,"staff"),re=>{const we=re.docs.map(ye=>({id:ye.id,...ye.data()})).filter(ye=>ye.active!==!1);S(we)}),ne=Wt(Je(Ne,"shops",i,"services"),re=>{const we=re.docs.map(ye=>({id:ye.id,...ye.data()})).filter(ye=>ye.active!==!1).sort((ye,Ie)=>(ye.name||"").localeCompare(Ie.name||""));H(we)});return()=>{_e(),O(),ne()}},[i]);const D=N.useMemo(()=>x.filter(_e=>_e.status==="waiting").sort((_e,O)=>(_e.position||0)-(O.position||0)),[x]),F=N.useMemo(()=>x.filter(_e=>_e.status==="in-progress"),[x]),M=N.useMemo(()=>Math.max(w.length,1),[w]),k=N.useMemo(()=>A2({waitingQueue:D,inProgress:F,staffCount:M,defaultDuration:30}),[D,F,M]),K=N.useMemo(()=>j2({waitingAhead:D,inProgress:F,staffCount:M,defaultDuration:30}),[D,F,M]),fe=N.useMemo(()=>{const _e=new Date;return _e.setHours(0,0,0,0),x.filter(O=>{const ne=O.joinedAt?.toDate?.()||(O.joinedAt?new Date(O.joinedAt):null);return ne&&ne>=_e}).length},[x]),Se=async _e=>{_e.preventDefault(),Y(!0);const O=C.find(ye=>ye.id===I.serviceId),re=(D.length>0?Math.max(...D.map(ye=>ye.position||0)):0)+1,we=I.clientName.trim()||`Walk-in #${fe+1}`;try{await hi(Je(Ne,"shops",i,"walkins"),{clientName:we,serviceId:I.serviceId||null,serviceName:O?.name||null,staffId:null,staffName:null,estimatedDuration:O?.duration||30,status:"waiting",position:re,joinedAt:Tt.now(),startedAt:null,completedAt:null,estimatedWaitMinutes:null}),oe(we),j(re),be(!0),V(!1),L({clientName:"",serviceId:""})}catch(ye){console.error("Error joining queue:",ye)}finally{Y(!1)}};return u?l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:l.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[l.jsx("div",{className:"spinner"}),l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):p?l.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:l.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[l.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:l.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),l.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),l.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,l.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),l.jsxs(et,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[l.jsx(Ra,{className:"w-4 h-4"}),"Go Home"]})]})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[l.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e?.name||"")[0]?.toUpperCase()||"S"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e?.name}),l.jsx("p",{className:"text-xs text-slate-500",children:"Live Queue"})]})]}),l.jsx(G3,{})]})}),l.jsxs("div",{className:"max-w-2xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[W&&l.jsxs("div",{className:"mb-6 bg-emerald-50 border border-emerald-200 rounded-2xl p-6 text-center animate-scale-in",children:[l.jsx("div",{className:"w-14 h-14 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-3",children:l.jsx(Xt,{className:"w-7 h-7 text-emerald-600"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-1",children:"You're in the queue!"}),l.jsxs("p",{className:"text-slate-600 text-sm mb-2",children:[l.jsx("strong",{children:ge}),"  Position #",A]}),l.jsx("button",{onClick:()=>be(!1),className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium",children:"Dismiss"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:l.jsx(Xt,{className:"w-6 h-6 text-blue-600"})}),l.jsx("div",{className:"text-3xl font-extrabold text-slate-900",children:D.length}),l.jsx("div",{className:"text-sm font-medium text-slate-500 mt-1",children:"People Waiting"})]}),l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[l.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:l.jsx(w2,{className:"w-6 h-6 text-amber-600"})}),l.jsx("div",{className:"text-3xl font-extrabold text-slate-900",children:ow(K)}),l.jsx("div",{className:"text-sm font-medium text-slate-500 mt-1",children:"Est. Wait (New)"})]})]}),F.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center gap-2",children:[l.jsx(Ia,{className:"w-5 h-5 text-emerald-500"}),"Currently Being Served"]}),l.jsx("div",{className:"space-y-2",children:F.map(_e=>l.jsxs("div",{className:"bg-white rounded-xl border border-emerald-200 p-4 flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:l.jsx(Ia,{className:"w-5 h-5 text-emerald-600"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-slate-900",children:_e.clientName}),l.jsx("div",{className:"text-xs text-slate-500",children:_e.serviceName||"Service in progress"})]})]},_e.id))})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center gap-2",children:[l.jsx(jn,{className:"w-5 h-5 text-blue-500"}),"Queue"]}),D.length===0?l.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-10 text-center",children:[l.jsx("div",{className:"w-14 h-14 bg-emerald-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:l.jsx(Xt,{className:"w-7 h-7 text-emerald-500"})}),l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"No Wait!"}),l.jsx("p",{className:"text-sm text-slate-500",children:"The queue is empty  you can walk right in!"})]}):l.jsx("div",{className:"space-y-2",children:D.map((_e,O)=>{const ne=k.get(_e.id);return l.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 flex items-center gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center font-extrabold text-blue-700 text-lg flex-shrink-0",children:O+1}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"font-semibold text-slate-900 text-lg truncate",children:_e.clientName}),_e.serviceName&&l.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-1",children:[l.jsx(is,{className:"w-3 h-3"}),_e.serviceName]})]}),l.jsxs("div",{className:"text-right flex-shrink-0",children:[l.jsx("div",{className:"text-lg font-bold text-amber-600",children:ow(ne)}),l.jsx("div",{className:"text-xs text-slate-400",children:"est. wait"})]})]},_e.id)})})]}),!W&&l.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:B?l.jsxs("form",{onSubmit:Se,children:[l.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Join the Queue"}),l.jsxs("div",{className:"space-y-3 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Your Name"}),l.jsx("input",{type:"text",value:I.clientName,onChange:_e=>L(O=>({...O,clientName:_e.target.value})),placeholder:"Optional",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-lg"})]}),C.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Service"}),l.jsxs("select",{value:I.serviceId,onChange:_e=>L(O=>({...O,serviceId:_e.target.value})),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-lg",children:[l.jsx("option",{value:"",children:"Select a service"}),C.map(_e=>l.jsxs("option",{value:_e.id,children:[_e.name," (",_e.duration,"min  $",Number(_e.price).toFixed(2),")"]},_e.id))]})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{type:"submit",disabled:z,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg shadow-md shadow-blue-600/20 transition-all disabled:opacity-50",children:[l.jsx(hr,{className:"w-5 h-5"}),z?"Joining":"Join Queue"]}),l.jsx("button",{type:"button",onClick:()=>{V(!1),L({clientName:"",serviceId:""})},className:"px-6 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]}):l.jsxs("button",{onClick:()=>V(!0),className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg shadow-md shadow-blue-600/20 transition-all hover:-translate-y-0.5",children:[l.jsx(hr,{className:"w-5 h-5"}),"Join the Queue"]})})]}),l.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-between",children:[l.jsxs(et,{to:`/shop/${s}`,className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[l.jsx(Vt,{className:"w-4 h-4"}),"Book Online"]}),l.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",l.jsx(et,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})]})})]})}function K3(){const[s,e]=N.useState(null),[n,i]=N.useState(!0);return N.useEffect(()=>{const o=C5(al,u=>{e(u),i(!1)});return()=>o()},[]),n?l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:l.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[l.jsx("div",{className:"spinner"}),l.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):l.jsx(LT,{children:l.jsxs(mT,{children:[l.jsx(Ws,{path:"/",element:l.jsx(r3,{})}),l.jsx(Ws,{path:"/register",element:l.jsx(o3,{})}),l.jsx(Ws,{path:"/login",element:l.jsx(c3,{user:s})}),l.jsx(Ws,{path:"/shop/:slug",element:l.jsx(x3,{})}),l.jsx(Ws,{path:"/shop/:slug/booking/:refCode",element:l.jsx(z3,{})}),l.jsx(Ws,{path:"/shop/:slug/waitlist/:refCode",element:l.jsx($3,{})}),l.jsx(Ws,{path:"/shop/:slug/queue",element:l.jsx(Y3,{})}),l.jsx(Ws,{path:"/shop/:slug/login",element:l.jsx(B3,{user:s})}),l.jsx(Ws,{path:"/shop/:slug/dashboard",element:l.jsx(U3,{user:s})}),l.jsx(Ws,{path:"*",element:l.jsx(hT,{to:"/",replace:!0})})]})})}gS.createRoot(document.getElementById("root")).render(l.jsx(oS.StrictMode,{children:l.jsx(K3,{})}));
