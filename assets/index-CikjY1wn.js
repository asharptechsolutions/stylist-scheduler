(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function a_(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Nm={exports:{}},rc={};var Wx;function PT(){if(Wx)return rc;Wx=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:a,type:i,key:f,ref:l!==void 0?l:null,props:c}}return rc.Fragment=e,rc.jsx=n,rc.jsxs=n,rc}var Jx;function LT(){return Jx||(Jx=1,Nm.exports=PT()),Nm.exports}var u=LT(),Am={exports:{}},Ve={};var Zx;function UT(){if(Zx)return Ve;Zx=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),S=Symbol.iterator;function j(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,P={};function z(O,ee,de){this.props=O,this.context=ee,this.refs=P,this.updater=de||Y}z.prototype.isReactComponent={},z.prototype.setState=function(O,ee){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ee,"setState")},z.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function U(){}U.prototype=z.prototype;function Q(O,ee,de){this.props=O,this.context=ee,this.refs=P,this.updater=de||Y}var ue=Q.prototype=new U;ue.constructor=Q,q(ue,z.prototype),ue.isPureReactComponent=!0;var ce=Array.isArray;function oe(){}var N={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(O,ee,de){var me=de.ref;return{$$typeof:a,type:O,key:ee,ref:me!==void 0?me:null,props:de}}function M(O,ee){return R(O.type,ee,O.props)}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===a}function L(O){var ee={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(de){return ee[de]})}var C=/\/+/g;function we(O,ee){return typeof O=="object"&&O!==null&&O.key!=null?L(""+O.key):ee.toString(36)}function Be(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(oe,oe):(O.status="pending",O.then(function(ee){O.status==="pending"&&(O.status="fulfilled",O.value=ee)},function(ee){O.status==="pending"&&(O.status="rejected",O.reason=ee)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function J(O,ee,de,me,Ae){var De=typeof O;(De==="undefined"||De==="boolean")&&(O=null);var Le=!1;if(O===null)Le=!0;else switch(De){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(O.$$typeof){case a:case e:Le=!0;break;case b:return Le=O._init,J(Le(O._payload),ee,de,me,Ae)}}if(Le)return Ae=Ae(O),Le=me===""?"."+we(O,0):me,ce(Ae)?(de="",Le!=null&&(de=Le.replace(C,"$&/")+"/"),J(Ae,ee,de,"",function(un){return un})):Ae!=null&&(k(Ae)&&(Ae=M(Ae,de+(Ae.key==null||O&&O.key===Ae.key?"":(""+Ae.key).replace(C,"$&/")+"/")+Le)),ee.push(Ae)),1;Le=0;var yt=me===""?".":me+":";if(ce(O))for(var Fe=0;Fe<O.length;Fe++)me=O[Fe],De=yt+we(me,Fe),Le+=J(me,ee,de,De,Ae);else if(Fe=j(O),typeof Fe=="function")for(O=Fe.call(O),Fe=0;!(me=O.next()).done;)me=me.value,De=yt+we(me,Fe++),Le+=J(me,ee,de,De,Ae);else if(De==="object"){if(typeof O.then=="function")return J(Be(O),ee,de,me,Ae);throw ee=String(O),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Le}function he(O,ee,de){if(O==null)return O;var me=[],Ae=0;return J(O,me,"","",function(De){return ee.call(de,De,Ae++)}),me}function be(O){if(O._status===-1){var ee=O._result;ee=ee(),ee.then(function(de){(O._status===0||O._status===-1)&&(O._status=1,O._result=de)},function(de){(O._status===0||O._status===-1)&&(O._status=2,O._result=de)}),O._status===-1&&(O._status=0,O._result=ee)}if(O._status===1)return O._result.default;throw O._result}var Me=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},He={map:he,forEach:function(O,ee,de){he(O,function(){ee.apply(this,arguments)},de)},count:function(O){var ee=0;return he(O,function(){ee++}),ee},toArray:function(O){return he(O,function(ee){return ee})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ve.Activity=w,Ve.Children=He,Ve.Component=z,Ve.Fragment=n,Ve.Profiler=l,Ve.PureComponent=Q,Ve.StrictMode=i,Ve.Suspense=g,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(O){return N.H.useMemoCache(O)}},Ve.cache=function(O){return function(){return O.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(O,ee,de){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var me=q({},O.props),Ae=O.key;if(ee!=null)for(De in ee.key!==void 0&&(Ae=""+ee.key),ee)!A.call(ee,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ee.ref===void 0||(me[De]=ee[De]);var De=arguments.length-2;if(De===1)me.children=de;else if(1<De){for(var Le=Array(De),yt=0;yt<De;yt++)Le[yt]=arguments[yt+2];me.children=Le}return R(O.type,Ae,me)},Ve.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:c,_context:O},O},Ve.createElement=function(O,ee,de){var me,Ae={},De=null;if(ee!=null)for(me in ee.key!==void 0&&(De=""+ee.key),ee)A.call(ee,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ae[me]=ee[me]);var Le=arguments.length-2;if(Le===1)Ae.children=de;else if(1<Le){for(var yt=Array(Le),Fe=0;Fe<Le;Fe++)yt[Fe]=arguments[Fe+2];Ae.children=yt}if(O&&O.defaultProps)for(me in Le=O.defaultProps,Le)Ae[me]===void 0&&(Ae[me]=Le[me]);return R(O,De,Ae)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(O){return{$$typeof:p,render:O}},Ve.isValidElement=k,Ve.lazy=function(O){return{$$typeof:b,_payload:{_status:-1,_result:O},_init:be}},Ve.memo=function(O,ee){return{$$typeof:y,type:O,compare:ee===void 0?null:ee}},Ve.startTransition=function(O){var ee=N.T,de={};N.T=de;try{var me=O(),Ae=N.S;Ae!==null&&Ae(de,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(oe,Me)}catch(De){Me(De)}finally{ee!==null&&de.types!==null&&(ee.types=de.types),N.T=ee}},Ve.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ve.use=function(O){return N.H.use(O)},Ve.useActionState=function(O,ee,de){return N.H.useActionState(O,ee,de)},Ve.useCallback=function(O,ee){return N.H.useCallback(O,ee)},Ve.useContext=function(O){return N.H.useContext(O)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(O,ee){return N.H.useDeferredValue(O,ee)},Ve.useEffect=function(O,ee){return N.H.useEffect(O,ee)},Ve.useEffectEvent=function(O){return N.H.useEffectEvent(O)},Ve.useId=function(){return N.H.useId()},Ve.useImperativeHandle=function(O,ee,de){return N.H.useImperativeHandle(O,ee,de)},Ve.useInsertionEffect=function(O,ee){return N.H.useInsertionEffect(O,ee)},Ve.useLayoutEffect=function(O,ee){return N.H.useLayoutEffect(O,ee)},Ve.useMemo=function(O,ee){return N.H.useMemo(O,ee)},Ve.useOptimistic=function(O,ee){return N.H.useOptimistic(O,ee)},Ve.useReducer=function(O,ee,de){return N.H.useReducer(O,ee,de)},Ve.useRef=function(O){return N.H.useRef(O)},Ve.useState=function(O){return N.H.useState(O)},Ve.useSyncExternalStore=function(O,ee,de){return N.H.useSyncExternalStore(O,ee,de)},Ve.useTransition=function(){return N.H.useTransition()},Ve.version="19.2.4",Ve}var ev;function Ap(){return ev||(ev=1,Am.exports=UT()),Am.exports}var I=Ap();const zT=a_(I);var Rm={exports:{}},lc={},Cm={exports:{}},jm={};var tv;function BT(){return tv||(tv=1,(function(a){function e(J,he){var be=J.length;J.push(he);e:for(;0<be;){var Me=be-1>>>1,He=J[Me];if(0<l(He,he))J[Me]=he,J[be]=He,be=Me;else break e}}function n(J){return J.length===0?null:J[0]}function i(J){if(J.length===0)return null;var he=J[0],be=J.pop();if(be!==he){J[0]=be;e:for(var Me=0,He=J.length,O=He>>>1;Me<O;){var ee=2*(Me+1)-1,de=J[ee],me=ee+1,Ae=J[me];if(0>l(de,be))me<He&&0>l(Ae,de)?(J[Me]=Ae,J[me]=be,Me=me):(J[Me]=de,J[ee]=be,Me=ee);else if(me<He&&0>l(Ae,be))J[Me]=Ae,J[me]=be,Me=me;else break e}}return he}function l(J,he){var be=J.sortIndex-he.sortIndex;return be!==0?be:J.id-he.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();a.unstable_now=function(){return f.now()-p}}var g=[],y=[],b=1,w=null,S=3,j=!1,Y=!1,q=!1,P=!1,z=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ue(J){for(var he=n(y);he!==null;){if(he.callback===null)i(y);else if(he.startTime<=J)i(y),he.sortIndex=he.expirationTime,e(g,he);else break;he=n(y)}}function ce(J){if(q=!1,ue(J),!Y)if(n(g)!==null)Y=!0,oe||(oe=!0,L());else{var he=n(y);he!==null&&Be(ce,he.startTime-J)}}var oe=!1,N=-1,A=5,R=-1;function M(){return P?!0:!(a.unstable_now()-R<A)}function k(){if(P=!1,oe){var J=a.unstable_now();R=J;var he=!0;try{e:{Y=!1,q&&(q=!1,U(N),N=-1),j=!0;var be=S;try{t:{for(ue(J),w=n(g);w!==null&&!(w.expirationTime>J&&M());){var Me=w.callback;if(typeof Me=="function"){w.callback=null,S=w.priorityLevel;var He=Me(w.expirationTime<=J);if(J=a.unstable_now(),typeof He=="function"){w.callback=He,ue(J),he=!0;break t}w===n(g)&&i(g),ue(J)}else i(g);w=n(g)}if(w!==null)he=!0;else{var O=n(y);O!==null&&Be(ce,O.startTime-J),he=!1}}break e}finally{w=null,S=be,j=!1}he=void 0}}finally{he?L():oe=!1}}}var L;if(typeof Q=="function")L=function(){Q(k)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,we=C.port2;C.port1.onmessage=k,L=function(){we.postMessage(null)}}else L=function(){z(k,0)};function Be(J,he){N=z(function(){J(a.unstable_now())},he)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(J){J.callback=null},a.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(J){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var be=S;S=he;try{return J()}finally{S=be}},a.unstable_requestPaint=function(){P=!0},a.unstable_runWithPriority=function(J,he){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var be=S;S=J;try{return he()}finally{S=be}},a.unstable_scheduleCallback=function(J,he,be){var Me=a.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Me+be:Me):be=Me,J){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=be+He,J={id:b++,callback:he,priorityLevel:J,startTime:be,expirationTime:He,sortIndex:-1},be>Me?(J.sortIndex=be,e(y,J),n(g)===null&&J===n(y)&&(q?(U(N),N=-1):q=!0,Be(ce,be-Me))):(J.sortIndex=He,e(g,J),Y||j||(Y=!0,oe||(oe=!0,L()))),J},a.unstable_shouldYield=M,a.unstable_wrapCallback=function(J){var he=S;return function(){var be=S;S=he;try{return J.apply(this,arguments)}finally{S=be}}}})(jm)),jm}var nv;function qT(){return nv||(nv=1,Cm.exports=BT()),Cm.exports}var Im={exports:{}},Tn={};var sv;function HT(){if(sv)return Tn;sv=1;var a=Ap();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,y,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:y,implementation:b}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Tn.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return c(g,y,null,b)},Tn.flushSync=function(g){var y=f.T,b=i.p;try{if(f.T=null,i.p=2,g)return g()}finally{f.T=y,i.p=b,i.d.f()}},Tn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Tn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Tn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,w=p(b,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,j=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:j}):b==="script"&&i.d.X(g,{crossOrigin:w,integrity:S,fetchPriority:j,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Tn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Tn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,w=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Tn.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Tn.requestFormReset=function(g){i.d.r(g)},Tn.unstable_batchedUpdates=function(g,y){return g(y)},Tn.useFormState=function(g,y,b){return f.H.useFormState(g,y,b)},Tn.useFormStatus=function(){return f.H.useHostTransitionStatus()},Tn.version="19.2.4",Tn}var av;function FT(){if(av)return Im.exports;av=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Im.exports=HT(),Im.exports}var iv;function $T(){if(iv)return lc;iv=1;var a=qT(),e=Ap(),n=FT();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function f(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(i(188))}function y(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(i(188));return s!==t?null:t}for(var r=t,o=s;;){var d=r.return;if(d===null)break;var m=d.alternate;if(m===null){if(o=d.return,o!==null){r=o;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===r)return g(d),t;if(m===o)return g(d),s;m=m.sibling}throw Error(i(188))}if(r.return!==o.return)r=d,o=m;else{for(var v=!1,E=d.child;E;){if(E===r){v=!0,r=d,o=m;break}if(E===o){v=!0,o=d,r=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===r){v=!0,r=m,o=d;break}if(E===o){v=!0,o=m,r=d;break}E=E.sibling}if(!v)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:s}function b(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=b(t),s!==null)return s;t=t.sibling}return null}var w=Object.assign,S=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function we(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case z:return"Profiler";case P:return"StrictMode";case ce:return"Suspense";case oe:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Y:return"Portal";case Q:return t.displayName||"Context";case U:return(t._context.displayName||"Context")+".Consumer";case ue:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return s=t.displayName||null,s!==null?s:we(t.type)||"Memo";case A:s=t._payload,t=t._init;try{return we(t(s))}catch{}}return null}var Be=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},Me=[],He=-1;function O(t){return{current:t}}function ee(t){0>He||(t.current=Me[He],Me[He]=null,He--)}function de(t,s){He++,Me[He]=t.current,t.current=s}var me=O(null),Ae=O(null),De=O(null),Le=O(null);function yt(t,s){switch(de(De,s),de(Ae,t),de(me,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?bx(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=bx(s),t=_x(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ee(me),de(me,t)}function Fe(){ee(me),ee(Ae),ee(De)}function un(t){t.memoizedState!==null&&de(Le,t);var s=me.current,r=_x(s,t.type);s!==r&&(de(Ae,t),de(me,r))}function hn(t){Ae.current===t&&(ee(me),ee(Ae)),Le.current===t&&(ee(Le),nc._currentValue=be)}var _n,en;function Dt(t){if(_n===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);_n=s&&s[1]||"",en=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_n+t+en}var zt=!1;function wn(t,s){if(!t||zt)return"";zt=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var X=Z}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(Z){X=Z}t.call(ae.prototype)}}else{try{throw Error()}catch(Z){X=Z}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&X&&typeof Z.stack=="string")return[Z.stack,X.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var D=v.split(`
`),K=E.split(`
`);for(d=o=0;o<D.length&&!D[o].includes("DetermineComponentFrameRoot");)o++;for(;d<K.length&&!K[d].includes("DetermineComponentFrameRoot");)d++;if(o===D.length||d===K.length)for(o=D.length-1,d=K.length-1;1<=o&&0<=d&&D[o]!==K[d];)d--;for(;1<=o&&0<=d;o--,d--)if(D[o]!==K[d]){if(o!==1||d!==1)do if(o--,d--,0>d||D[o]!==K[d]){var te=`
`+D[o].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=o&&0<=d);break}}}finally{zt=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Dt(r):""}function En(t,s){switch(t.tag){case 26:case 27:case 5:return Dt(t.type);case 16:return Dt("Lazy");case 13:return t.child!==s&&s!==null?Dt("Suspense Fallback"):Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 15:return wn(t.type,!1);case 11:return wn(t.type.render,!1);case 1:return wn(t.type,!0);case 31:return Dt("Activity");default:return""}}function xe(t){try{var s="",r=null;do s+=En(t,r),r=t,t=t.return;while(t);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ye=Object.prototype.hasOwnProperty,Ce=a.unstable_scheduleCallback,vt=a.unstable_cancelCallback,B=a.unstable_shouldYield,H=a.unstable_requestPaint,re=a.unstable_now,se=a.unstable_getCurrentPriorityLevel,ke=a.unstable_ImmediatePriority,$e=a.unstable_UserBlockingPriority,Ee=a.unstable_NormalPriority,st=a.unstable_LowPriority,Tt=a.unstable_IdlePriority,ts=a.log,Ps=a.unstable_setDisableYieldValue,Bt=null,tn=null;function dn(t){if(typeof ts=="function"&&Ps(t),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(Bt,t)}catch{}}var Rt=Math.clz32?Math.clz32:Ya,zr=Math.log,Ga=Math.LN2;function Ya(t){return t>>>=0,t===0?32:31-(zr(t)/Ga|0)|0}var ns=256,ma=262144,qt=4194304;function Ls(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Us(t,s,r){var o=t.pendingLanes;if(o===0)return 0;var d=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~m,o!==0?d=Ls(o):(v&=E,v!==0?d=Ls(v):r||(r=E&~t,r!==0&&(d=Ls(r))))):(E=o&~m,E!==0?d=Ls(E):v!==0?d=Ls(v):r||(r=o&~t,r!==0&&(d=Ls(r)))),d===0?0:s!==0&&s!==d&&(s&m)===0&&(m=d&-d,r=s&-s,m>=r||m===32&&(r&4194048)!==0)?s:d}function bs(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Cd(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xc(){var t=qt;return qt<<=1,(qt&62914560)===0&&(qt=4194304),t}function zs(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Ki(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function jd(t,s,r,o,d,m){var v=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var E=t.entanglements,D=t.expirationTimes,K=t.hiddenUpdates;for(r=v&~r;0<r;){var te=31-Rt(r),ae=1<<te;E[te]=0,D[te]=-1;var X=K[te];if(X!==null)for(K[te]=null,te=0;te<X.length;te++){var Z=X[te];Z!==null&&(Z.lane&=-536870913)}r&=~ae}o!==0&&Qi(t,o,0),m!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~s))}function Qi(t,s,r){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-Rt(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function ro(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var o=31-Rt(r),d=1<<o;d&s|t[o]&s&&(t[o]|=s),r&=~d}}function lo(t,s){var r=s&-s;return r=(r&42)!==0?1:Xi(r),(r&(t.suspendedLanes|s))!==0?0:r}function Xi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function pa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Wc(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:Fx(t.type))}function _s(t,s){var r=he.p;try{return he.p=t,s()}finally{he.p=r}}var ws=Math.random().toString(36).slice(2),Ht="__reactFiber$"+ws,rn="__reactProps$"+ws,Bs="__reactContainer$"+ws,Br="__reactEvents$"+ws,Id="__reactListeners$"+ws,Jc="__reactHandles$"+ws,Zc="__reactResources$"+ws,qs="__reactMarker$"+ws;function qr(t){delete t[Ht],delete t[rn],delete t[Br],delete t[Id],delete t[Jc]}function Hs(t){var s=t[Ht];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Bs]||r[Ht]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Rx(t);t!==null;){if(r=t[Ht])return r;t=Rx(t)}return s}t=r,r=t.parentNode}return null}function ss(t){if(t=t[Ht]||t[Bs]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function qn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Fs(t){var s=t[Zc];return s||(s=t[Zc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ft(t){t[qs]=!0}var oo=new Set,co={};function $s(t,s){Gs(t,s),Gs(t+"Capture",s)}function Gs(t,s){for(co[t]=s,t=0;t<s.length;t++)oo.add(s[t])}var uo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ho={},fo={};function eu(t){return ye.call(fo,t)?!0:ye.call(ho,t)?!1:uo.test(t)?fo[t]=!0:(ho[t]=!0,!1)}function Hr(t,s,r){if(eu(s))if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+r)}}function Hn(t,s,r){if(r===null)t.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+r)}}function $t(t,s,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(s,r,""+o)}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ka(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function mo(t,s,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,m=o.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){r=""+v,m.call(this,v)}}),Object.defineProperty(t,s,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ut(t){if(!t._valueTracker){var s=Ka(t)?"checked":"value";t._valueTracker=mo(t,s,""+t[s])}}function Wi(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),o="";return t&&(o=Ka(t)?t.checked?"true":"false":t.value),t=o,t!==r?(s.setValue(t),!0):!1}function Ys(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ji=/[\n"\\]/g;function In(t){return t.replace(Ji,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Fr(t,s,r,o,d,m,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+ln(s)):t.value!==""+ln(s)&&(t.value=""+ln(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?po(t,v,ln(s)):r!=null?po(t,v,ln(r)):o!=null&&t.removeAttribute("value"),d==null&&m!=null&&(t.defaultChecked=!!m),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+ln(E):t.removeAttribute("name")}function tu(t,s,r,o,d,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),s!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){ut(t);return}r=r!=null?""+ln(r):"",s=s!=null?""+ln(s):r,E||s===t.value||(t.value=s),t.defaultValue=s}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),ut(t)}function po(t,s,r){s==="number"&&Ys(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Qa(t,s,r,o){if(t=t.options,s){s={};for(var d=0;d<r.length;d++)s["$"+r[d]]=!0;for(r=0;r<t.length;r++)d=s.hasOwnProperty("$"+t[r].value),t[r].selected!==d&&(t[r].selected=d),d&&o&&(t[r].defaultSelected=!0)}else{for(r=""+ln(r),s=null,d=0;d<t.length;d++){if(t[d].value===r){t[d].selected=!0,o&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function nu(t,s,r){if(s!=null&&(s=""+ln(s),s!==t.value&&(t.value=s),r==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=r!=null?""+ln(r):""}function Xa(t,s,r,o){if(s==null){if(o!=null){if(r!=null)throw Error(i(92));if(Be(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),s=r}r=ln(s),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),ut(t)}function Dn(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var su=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function go(t,s,r){var o=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,r):typeof r!="number"||r===0||su.has(s)?s==="float"?t.cssFloat=r:t[s]=(""+r).trim():t[s]=r+"px"}function yo(t,s,r){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var d in s)o=s[d],s.hasOwnProperty(d)&&r[d]!==o&&go(t,d,o)}else for(var m in s)s.hasOwnProperty(m)&&go(t,m,s[m])}function $r(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gr(t){return Wa.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Es(){}var xo=null;function as(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ja=null,Ks=null;function Zi(t){var s=ss(t);if(s&&(t=s.stateNode)){var r=t[rn]||null;e:switch(t=s.stateNode,s.type){case"input":if(Fr(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+In(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var o=r[s];if(o!==t&&o.form===t.form){var d=o[rn]||null;if(!d)throw Error(i(90));Fr(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<r.length;s++)o=r[s],o.form===t.form&&Wi(o)}break e;case"textarea":nu(t,r.value,r.defaultValue);break e;case"select":s=r.value,s!=null&&Qa(t,!!r.multiple,s,!1)}}}var Yr=!1;function Za(t,s,r){if(Yr)return t(s,r);Yr=!0;try{var o=t(s);return o}finally{if(Yr=!1,(Ja!==null||Ks!==null)&&(Wu(),Ja&&(s=Ja,t=Ks,Ks=Ja=null,Zi(s),t)))for(s=0;s<t.length;s++)Zi(t[s])}}function Ts(t,s){var r=t.stateNode;if(r===null)return null;var o=r[rn]||null;if(o===null)return null;r=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,s,typeof r));return r}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),er=!1;if(is)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){er=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{er=!1}var Qs=null,vo=null,tr=null;function bo(){if(tr)return tr;var t,s=vo,r=s.length,o,d="value"in Qs?Qs.value:Qs.textContent,m=d.length;for(t=0;t<r&&s[t]===d[t];t++);var v=r-t;for(o=1;o<=v&&s[r-o]===d[m-o];o++);return tr=d.slice(t,1<o?1-o:void 0)}function nr(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ga(){return!0}function Ss(){return!1}function fn(t){function s(r,o,d,m,v){this._reactName=r,this._targetInst=d,this.type=o,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ga:Ss,this.isPropagationStopped=Ss,this}return w(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ga)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ga)},persist:function(){},isPersistent:ga}),s}var ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=fn(ya),ei=w({},ya,{view:0,detail:0}),_o=fn(ei),ti,Kr,Ws,Qr=w({},ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ni,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ws&&(Ws&&t.type==="mousemove"?(ti=t.screenX-Ws.screenX,Kr=t.screenY-Ws.screenY):Kr=ti=0,Ws=t),ti)},movementY:function(t){return"movementY"in t?t.movementY:Kr}}),wo=fn(Qr),sr=w({},Qr,{dataTransfer:0}),iu=fn(sr),ru=w({},ei,{relatedTarget:0}),ar=fn(ru),Eo=w({},ya,{animationName:0,elapsedTime:0,pseudoElement:0}),lu=fn(Eo),Xr=w({},ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ou=fn(Xr),cu=w({},ya,{data:0}),Js=fn(cu),uu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fu(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=du[t])?!!s[t]:!1}function ni(){return fu}var Cn=w({},ei,{key:function(t){if(t.key){var s=uu[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=nr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ni,charCode:function(t){return t.type==="keypress"?nr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mu=fn(Cn),pu=w({},Qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xa=fn(pu),h=w({},ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ni}),x=fn(h),_=w({},ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=fn(_),$=w({},Qr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),W=fn($),fe=w({},ya,{newState:0,oldState:0}),Ue=fn(fe),Ot=[9,13,27,32],lt=is&&"CompositionEvent"in window,St=null;is&&"documentMode"in document&&(St=document.documentMode);var rs=is&&"TextEvent"in window&&!St,Zs=is&&(!lt||St&&8<St&&11>=St),Ns=" ",As=!1;function ir(t,s){switch(t){case"keyup":return Ot.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Jr=!1;function lE(t,s){switch(t){case"compositionend":return Wr(s);case"keypress":return s.which!==32?null:(As=!0,Ns);case"textInput":return t=s.data,t===Ns&&As?null:t;default:return null}}function oE(t,s){if(Jr)return t==="compositionend"||!lt&&ir(t,s)?(t=bo(),tr=vo=Qs=null,Jr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Zs&&s.locale!=="ko"?null:s.data;default:return null}}var cE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ig(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!cE[t.type]:s==="textarea"}function Dg(t,s,r,o){Ja?Ks?Ks.push(o):Ks=[o]:Ja=o,s=ah(s,"onChange"),0<s.length&&(r=new Xs("onChange","change",null,r,o),t.push({event:r,listeners:s}))}var To=null,So=null;function uE(t){mx(t,0)}function gu(t){var s=qn(t);if(Wi(s))return t}function kg(t,s){if(t==="change")return s}var Mg=!1;if(is){var Dd;if(is){var kd="oninput"in document;if(!kd){var Og=document.createElement("div");Og.setAttribute("oninput","return;"),kd=typeof Og.oninput=="function"}Dd=kd}else Dd=!1;Mg=Dd&&(!document.documentMode||9<document.documentMode)}function Vg(){To&&(To.detachEvent("onpropertychange",Pg),So=To=null)}function Pg(t){if(t.propertyName==="value"&&gu(So)){var s=[];Dg(s,So,t,as(t)),Za(uE,s)}}function hE(t,s,r){t==="focusin"?(Vg(),To=s,So=r,To.attachEvent("onpropertychange",Pg)):t==="focusout"&&Vg()}function dE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gu(So)}function fE(t,s){if(t==="click")return gu(s)}function mE(t,s){if(t==="input"||t==="change")return gu(s)}function pE(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Fn=typeof Object.is=="function"?Object.is:pE;function No(t,s){if(Fn(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),o=Object.keys(s);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var d=r[o];if(!ye.call(s,d)||!Fn(t[d],s[d]))return!1}return!0}function Lg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ug(t,s){var r=Lg(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=s&&o>=s)return{node:r,offset:s-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Lg(r)}}function zg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?zg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Bg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Ys(t.document);s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Ys(t.document)}return s}function Md(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var gE=is&&"documentMode"in document&&11>=document.documentMode,Zr=null,Od=null,Ao=null,Vd=!1;function qg(t,s,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Vd||Zr==null||Zr!==Ys(o)||(o=Zr,"selectionStart"in o&&Md(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ao&&No(Ao,o)||(Ao=o,o=ah(Od,"onSelect"),0<o.length&&(s=new Xs("onSelect","select",null,s,r),t.push({event:s,listeners:o}),s.target=Zr)))}function rr(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var el={animationend:rr("Animation","AnimationEnd"),animationiteration:rr("Animation","AnimationIteration"),animationstart:rr("Animation","AnimationStart"),transitionrun:rr("Transition","TransitionRun"),transitionstart:rr("Transition","TransitionStart"),transitioncancel:rr("Transition","TransitionCancel"),transitionend:rr("Transition","TransitionEnd")},Pd={},Hg={};is&&(Hg=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function lr(t){if(Pd[t])return Pd[t];if(!el[t])return t;var s=el[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in Hg)return Pd[t]=s[r];return t}var Fg=lr("animationend"),$g=lr("animationiteration"),Gg=lr("animationstart"),yE=lr("transitionrun"),xE=lr("transitionstart"),vE=lr("transitioncancel"),Yg=lr("transitionend"),Kg=new Map,Ld="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ld.push("scrollEnd");function Rs(t,s){Kg.set(t,s),$s(s,[t])}var yu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ls=[],tl=0,Ud=0;function xu(){for(var t=tl,s=Ud=tl=0;s<t;){var r=ls[s];ls[s++]=null;var o=ls[s];ls[s++]=null;var d=ls[s];ls[s++]=null;var m=ls[s];if(ls[s++]=null,o!==null&&d!==null){var v=o.pending;v===null?d.next=d:(d.next=v.next,v.next=d),o.pending=d}m!==0&&Qg(r,d,m)}}function vu(t,s,r,o){ls[tl++]=t,ls[tl++]=s,ls[tl++]=r,ls[tl++]=o,Ud|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function zd(t,s,r,o){return vu(t,s,r,o),bu(t)}function or(t,s){return vu(t,null,null,s),bu(t)}function Qg(t,s,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var d=!1,m=t.return;m!==null;)m.childLanes|=r,o=m.alternate,o!==null&&(o.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(d=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,d&&s!==null&&(d=31-Rt(r),t=m.hiddenUpdates,o=t[d],o===null?t[d]=[s]:o.push(s),s.lane=r|536870912),m):null}function bu(t){if(50<Qo)throw Qo=0,Xf=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var nl={};function bE(t,s,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,s,r,o){return new bE(t,s,r,o)}function Bd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function va(t,s){var r=t.alternate;return r===null?(r=$n(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Xg(t,s){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,s=r.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function _u(t,s,r,o,d,m){var v=0;if(o=t,typeof t=="function")Bd(t)&&(v=1);else if(typeof t=="string")v=ST(t,r,me.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=$n(31,r,s,d),t.elementType=R,t.lanes=m,t;case q:return cr(r.children,d,m,s);case P:v=8,d|=24;break;case z:return t=$n(12,r,s,d|2),t.elementType=z,t.lanes=m,t;case ce:return t=$n(13,r,s,d),t.elementType=ce,t.lanes=m,t;case oe:return t=$n(19,r,s,d),t.elementType=oe,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:v=10;break e;case U:v=9;break e;case ue:v=11;break e;case N:v=14;break e;case A:v=16,o=null;break e}v=29,r=Error(i(130,t===null?"null":typeof t,"")),o=null}return s=$n(v,r,s,d),s.elementType=t,s.type=o,s.lanes=m,s}function cr(t,s,r,o){return t=$n(7,t,o,s),t.lanes=r,t}function qd(t,s,r){return t=$n(6,t,null,s),t.lanes=r,t}function Wg(t){var s=$n(18,null,null,0);return s.stateNode=t,s}function Hd(t,s,r){return s=$n(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Jg=new WeakMap;function os(t,s){if(typeof t=="object"&&t!==null){var r=Jg.get(t);return r!==void 0?r:(s={value:t,source:s,stack:xe(s)},Jg.set(t,s),s)}return{value:t,source:s,stack:xe(s)}}var sl=[],al=0,wu=null,Ro=0,cs=[],us=0,si=null,ea=1,ta="";function ba(t,s){sl[al++]=Ro,sl[al++]=wu,wu=t,Ro=s}function Zg(t,s,r){cs[us++]=ea,cs[us++]=ta,cs[us++]=si,si=t;var o=ea;t=ta;var d=32-Rt(o)-1;o&=~(1<<d),r+=1;var m=32-Rt(s)+d;if(30<m){var v=d-d%5;m=(o&(1<<v)-1).toString(32),o>>=v,d-=v,ea=1<<32-Rt(s)+d|r<<d|o,ta=m+t}else ea=1<<m|r<<d|o,ta=t}function Fd(t){t.return!==null&&(ba(t,1),Zg(t,1,0))}function $d(t){for(;t===wu;)wu=sl[--al],sl[al]=null,Ro=sl[--al],sl[al]=null;for(;t===si;)si=cs[--us],cs[us]=null,ta=cs[--us],cs[us]=null,ea=cs[--us],cs[us]=null}function e0(t,s){cs[us++]=ea,cs[us++]=ta,cs[us++]=si,ea=s.id,ta=s.overflow,si=t}var mn=null,_t=null,tt=!1,ai=null,hs=!1,Gd=Error(i(519));function ii(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Co(os(s,t)),Gd}function t0(t){var s=t.stateNode,r=t.type,o=t.memoizedProps;switch(s[Ht]=t,s[rn]=o,r){case"dialog":Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":case"embed":Qe("load",s);break;case"video":case"audio":for(r=0;r<Wo.length;r++)Qe(Wo[r],s);break;case"source":Qe("error",s);break;case"img":case"image":case"link":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"input":Qe("invalid",s),tu(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Qe("invalid",s);break;case"textarea":Qe("invalid",s),Xa(s,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||o.suppressHydrationWarning===!0||xx(s.textContent,r)?(o.popover!=null&&(Qe("beforetoggle",s),Qe("toggle",s)),o.onScroll!=null&&Qe("scroll",s),o.onScrollEnd!=null&&Qe("scrollend",s),o.onClick!=null&&(s.onclick=Es),s=!0):s=!1,s||ii(t,!0)}function n0(t){for(mn=t.return;mn;)switch(mn.tag){case 5:case 31:case 13:hs=!1;return;case 27:case 3:hs=!0;return;default:mn=mn.return}}function il(t){if(t!==mn)return!1;if(!tt)return n0(t),tt=!0,!1;var s=t.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||hm(t.type,t.memoizedProps)),r=!r),r&&_t&&ii(t),n0(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));_t=Ax(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));_t=Ax(t)}else s===27?(s=_t,vi(t.type)?(t=gm,gm=null,_t=t):_t=s):_t=mn?fs(t.stateNode.nextSibling):null;return!0}function ur(){_t=mn=null,tt=!1}function Yd(){var t=ai;return t!==null&&(Vn===null?Vn=t:Vn.push.apply(Vn,t),ai=null),t}function Co(t){ai===null?ai=[t]:ai.push(t)}var Kd=O(null),hr=null,_a=null;function ri(t,s,r){de(Kd,s._currentValue),s._currentValue=r}function wa(t){t._currentValue=Kd.current,ee(Kd)}function Qd(t,s,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===r)break;t=t.return}}function Xd(t,s,r,o){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var m=d.dependencies;if(m!==null){var v=d.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=d;for(var D=0;D<s.length;D++)if(E.context===s[D]){m.lanes|=r,E=m.alternate,E!==null&&(E.lanes|=r),Qd(m.return,r,t),o||(v=null);break e}m=E.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(i(341));v.lanes|=r,m=v.alternate,m!==null&&(m.lanes|=r),Qd(v,r,t),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===t){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function rl(t,s,r,o){t=null;for(var d=s,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var E=d.type;Fn(d.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(d===Le.current){if(v=d.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(nc):t=[nc])}d=d.return}t!==null&&Xd(s,t,r,o),s.flags|=262144}function Eu(t){for(t=t.firstContext;t!==null;){if(!Fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function dr(t){hr=t,_a=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function pn(t){return s0(hr,t)}function Tu(t,s){return hr===null&&dr(t),s0(t,s)}function s0(t,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},_a===null){if(t===null)throw Error(i(308));_a=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else _a=_a.next=s;return r}var _E=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(r){return r()})}},wE=a.unstable_scheduleCallback,EE=a.unstable_NormalPriority,Gt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wd(){return{controller:new _E,data:new Map,refCount:0}}function jo(t){t.refCount--,t.refCount===0&&wE(EE,function(){t.controller.abort()})}var Io=null,Jd=0,ll=0,ol=null;function TE(t,s){if(Io===null){var r=Io=[];Jd=0,ll=nm(),ol={status:"pending",value:void 0,then:function(o){r.push(o)}}}return Jd++,s.then(a0,a0),s}function a0(){if(--Jd===0&&Io!==null){ol!==null&&(ol.status="fulfilled");var t=Io;Io=null,ll=0,ol=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function SE(t,s){var r=[],o={status:"pending",value:null,reason:null,then:function(d){r.push(d)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var d=0;d<r.length;d++)(0,r[d])(s)},function(d){for(o.status="rejected",o.reason=d,d=0;d<r.length;d++)(0,r[d])(void 0)}),o}var i0=J.S;J.S=function(t,s){qy=re(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&TE(t,s),i0!==null&&i0(t,s)};var fr=O(null);function Zd(){var t=fr.current;return t!==null?t:xt.pooledCache}function Su(t,s){s===null?de(fr,fr.current):de(fr,s.pool)}function r0(){var t=Zd();return t===null?null:{parent:Gt._currentValue,pool:t}}var cl=Error(i(460)),ef=Error(i(474)),Nu=Error(i(542)),Au={then:function(){}};function l0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function o0(t,s,r){switch(r=t[r],r===void 0?t.push(s):r!==s&&(s.then(Es,Es),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,u0(t),t;default:if(typeof s.status=="string")s.then(Es,Es);else{if(t=xt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=o}},function(o){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,u0(t),t}throw pr=s,cl}}function mr(t){try{var s=t._init;return s(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(pr=r,cl):r}}var pr=null;function c0(){if(pr===null)throw Error(i(459));var t=pr;return pr=null,t}function u0(t){if(t===cl||t===Nu)throw Error(i(483))}var ul=null,Do=0;function Ru(t){var s=Do;return Do+=1,ul===null&&(ul=[]),o0(ul,t,s)}function ko(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Cu(t,s){throw s.$$typeof===S?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function h0(t){function s(F,V){if(t){var G=F.deletions;G===null?(F.deletions=[V],F.flags|=16):G.push(V)}}function r(F,V){if(!t)return null;for(;V!==null;)s(F,V),V=V.sibling;return null}function o(F){for(var V=new Map;F!==null;)F.key!==null?V.set(F.key,F):V.set(F.index,F),F=F.sibling;return V}function d(F,V){return F=va(F,V),F.index=0,F.sibling=null,F}function m(F,V,G){return F.index=G,t?(G=F.alternate,G!==null?(G=G.index,G<V?(F.flags|=67108866,V):G):(F.flags|=67108866,V)):(F.flags|=1048576,V)}function v(F){return t&&F.alternate===null&&(F.flags|=67108866),F}function E(F,V,G,ne){return V===null||V.tag!==6?(V=qd(G,F.mode,ne),V.return=F,V):(V=d(V,G),V.return=F,V)}function D(F,V,G,ne){var Te=G.type;return Te===q?te(F,V,G.props.children,ne,G.key):V!==null&&(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&mr(Te)===V.type)?(V=d(V,G.props),ko(V,G),V.return=F,V):(V=_u(G.type,G.key,G.props,null,F.mode,ne),ko(V,G),V.return=F,V)}function K(F,V,G,ne){return V===null||V.tag!==4||V.stateNode.containerInfo!==G.containerInfo||V.stateNode.implementation!==G.implementation?(V=Hd(G,F.mode,ne),V.return=F,V):(V=d(V,G.children||[]),V.return=F,V)}function te(F,V,G,ne,Te){return V===null||V.tag!==7?(V=cr(G,F.mode,ne,Te),V.return=F,V):(V=d(V,G),V.return=F,V)}function ae(F,V,G){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=qd(""+V,F.mode,G),V.return=F,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case j:return G=_u(V.type,V.key,V.props,null,F.mode,G),ko(G,V),G.return=F,G;case Y:return V=Hd(V,F.mode,G),V.return=F,V;case A:return V=mr(V),ae(F,V,G)}if(Be(V)||L(V))return V=cr(V,F.mode,G,null),V.return=F,V;if(typeof V.then=="function")return ae(F,Ru(V),G);if(V.$$typeof===Q)return ae(F,Tu(F,V),G);Cu(F,V)}return null}function X(F,V,G,ne){var Te=V!==null?V.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return Te!==null?null:E(F,V,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case j:return G.key===Te?D(F,V,G,ne):null;case Y:return G.key===Te?K(F,V,G,ne):null;case A:return G=mr(G),X(F,V,G,ne)}if(Be(G)||L(G))return Te!==null?null:te(F,V,G,ne,null);if(typeof G.then=="function")return X(F,V,Ru(G),ne);if(G.$$typeof===Q)return X(F,V,Tu(F,G),ne);Cu(F,G)}return null}function Z(F,V,G,ne,Te){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return F=F.get(G)||null,E(V,F,""+ne,Te);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case j:return F=F.get(ne.key===null?G:ne.key)||null,D(V,F,ne,Te);case Y:return F=F.get(ne.key===null?G:ne.key)||null,K(V,F,ne,Te);case A:return ne=mr(ne),Z(F,V,G,ne,Te)}if(Be(ne)||L(ne))return F=F.get(G)||null,te(V,F,ne,Te,null);if(typeof ne.then=="function")return Z(F,V,G,Ru(ne),Te);if(ne.$$typeof===Q)return Z(F,V,G,Tu(V,ne),Te);Cu(V,ne)}return null}function ve(F,V,G,ne){for(var Te=null,at=null,_e=V,qe=V=0,We=null;_e!==null&&qe<G.length;qe++){_e.index>qe?(We=_e,_e=null):We=_e.sibling;var it=X(F,_e,G[qe],ne);if(it===null){_e===null&&(_e=We);break}t&&_e&&it.alternate===null&&s(F,_e),V=m(it,V,qe),at===null?Te=it:at.sibling=it,at=it,_e=We}if(qe===G.length)return r(F,_e),tt&&ba(F,qe),Te;if(_e===null){for(;qe<G.length;qe++)_e=ae(F,G[qe],ne),_e!==null&&(V=m(_e,V,qe),at===null?Te=_e:at.sibling=_e,at=_e);return tt&&ba(F,qe),Te}for(_e=o(_e);qe<G.length;qe++)We=Z(_e,F,qe,G[qe],ne),We!==null&&(t&&We.alternate!==null&&_e.delete(We.key===null?qe:We.key),V=m(We,V,qe),at===null?Te=We:at.sibling=We,at=We);return t&&_e.forEach(function(Ti){return s(F,Ti)}),tt&&ba(F,qe),Te}function Re(F,V,G,ne){if(G==null)throw Error(i(151));for(var Te=null,at=null,_e=V,qe=V=0,We=null,it=G.next();_e!==null&&!it.done;qe++,it=G.next()){_e.index>qe?(We=_e,_e=null):We=_e.sibling;var Ti=X(F,_e,it.value,ne);if(Ti===null){_e===null&&(_e=We);break}t&&_e&&Ti.alternate===null&&s(F,_e),V=m(Ti,V,qe),at===null?Te=Ti:at.sibling=Ti,at=Ti,_e=We}if(it.done)return r(F,_e),tt&&ba(F,qe),Te;if(_e===null){for(;!it.done;qe++,it=G.next())it=ae(F,it.value,ne),it!==null&&(V=m(it,V,qe),at===null?Te=it:at.sibling=it,at=it);return tt&&ba(F,qe),Te}for(_e=o(_e);!it.done;qe++,it=G.next())it=Z(_e,F,qe,it.value,ne),it!==null&&(t&&it.alternate!==null&&_e.delete(it.key===null?qe:it.key),V=m(it,V,qe),at===null?Te=it:at.sibling=it,at=it);return t&&_e.forEach(function(VT){return s(F,VT)}),tt&&ba(F,qe),Te}function gt(F,V,G,ne){if(typeof G=="object"&&G!==null&&G.type===q&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case j:e:{for(var Te=G.key;V!==null;){if(V.key===Te){if(Te=G.type,Te===q){if(V.tag===7){r(F,V.sibling),ne=d(V,G.props.children),ne.return=F,F=ne;break e}}else if(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&mr(Te)===V.type){r(F,V.sibling),ne=d(V,G.props),ko(ne,G),ne.return=F,F=ne;break e}r(F,V);break}else s(F,V);V=V.sibling}G.type===q?(ne=cr(G.props.children,F.mode,ne,G.key),ne.return=F,F=ne):(ne=_u(G.type,G.key,G.props,null,F.mode,ne),ko(ne,G),ne.return=F,F=ne)}return v(F);case Y:e:{for(Te=G.key;V!==null;){if(V.key===Te)if(V.tag===4&&V.stateNode.containerInfo===G.containerInfo&&V.stateNode.implementation===G.implementation){r(F,V.sibling),ne=d(V,G.children||[]),ne.return=F,F=ne;break e}else{r(F,V);break}else s(F,V);V=V.sibling}ne=Hd(G,F.mode,ne),ne.return=F,F=ne}return v(F);case A:return G=mr(G),gt(F,V,G,ne)}if(Be(G))return ve(F,V,G,ne);if(L(G)){if(Te=L(G),typeof Te!="function")throw Error(i(150));return G=Te.call(G),Re(F,V,G,ne)}if(typeof G.then=="function")return gt(F,V,Ru(G),ne);if(G.$$typeof===Q)return gt(F,V,Tu(F,G),ne);Cu(F,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,V!==null&&V.tag===6?(r(F,V.sibling),ne=d(V,G),ne.return=F,F=ne):(r(F,V),ne=qd(G,F.mode,ne),ne.return=F,F=ne),v(F)):r(F,V)}return function(F,V,G,ne){try{Do=0;var Te=gt(F,V,G,ne);return ul=null,Te}catch(_e){if(_e===cl||_e===Nu)throw _e;var at=$n(29,_e,null,F.mode);return at.lanes=ne,at.return=F,at}}}var gr=h0(!0),d0=h0(!1),li=!1;function tf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nf(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function oi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ci(t,s,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ot&2)!==0){var d=o.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),o.pending=s,s=bu(t),Qg(t,null,r),s}return vu(t,o,s,r),bu(t)}function Mo(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,r|=o,s.lanes=r,ro(t,r)}}function sf(t,s){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var d=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?d=m=v:m=m.next=v,r=r.next}while(r!==null);m===null?d=m=s:m=m.next=s}else d=m=s;r={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}var af=!1;function Oo(){if(af){var t=ol;if(t!==null)throw t}}function Vo(t,s,r,o){af=!1;var d=t.updateQueue;li=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var D=E,K=D.next;D.next=null,v===null?m=K:v.next=K,v=D;var te=t.alternate;te!==null&&(te=te.updateQueue,E=te.lastBaseUpdate,E!==v&&(E===null?te.firstBaseUpdate=K:E.next=K,te.lastBaseUpdate=D))}if(m!==null){var ae=d.baseState;v=0,te=K=D=null,E=m;do{var X=E.lane&-536870913,Z=X!==E.lane;if(Z?(Xe&X)===X:(o&X)===X){X!==0&&X===ll&&(af=!0),te!==null&&(te=te.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ve=t,Re=E;X=s;var gt=r;switch(Re.tag){case 1:if(ve=Re.payload,typeof ve=="function"){ae=ve.call(gt,ae,X);break e}ae=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Re.payload,X=typeof ve=="function"?ve.call(gt,ae,X):ve,X==null)break e;ae=w({},ae,X);break e;case 2:li=!0}}X=E.callback,X!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=d.callbacks,Z===null?d.callbacks=[X]:Z.push(X))}else Z={lane:X,tag:E.tag,payload:E.payload,callback:E.callback,next:null},te===null?(K=te=Z,D=ae):te=te.next=Z,v|=X;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;Z=E,E=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);te===null&&(D=ae),d.baseState=D,d.firstBaseUpdate=K,d.lastBaseUpdate=te,m===null&&(d.shared.lanes=0),mi|=v,t.lanes=v,t.memoizedState=ae}}function f0(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function m0(t,s){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)f0(r[t],s)}var hl=O(null),ju=O(0);function p0(t,s){t=Ia,de(ju,t),de(hl,s),Ia=t|s.baseLanes}function rf(){de(ju,Ia),de(hl,hl.current)}function lf(){Ia=ju.current,ee(hl),ee(ju)}var Gn=O(null),ds=null;function ui(t){var s=t.alternate;de(Vt,Vt.current&1),de(Gn,t),ds===null&&(s===null||hl.current!==null||s.memoizedState!==null)&&(ds=t)}function of(t){de(Vt,Vt.current),de(Gn,t),ds===null&&(ds=t)}function g0(t){t.tag===22?(de(Vt,Vt.current),de(Gn,t),ds===null&&(ds=t)):hi()}function hi(){de(Vt,Vt.current),de(Gn,Gn.current)}function Yn(t){ee(Gn),ds===t&&(ds=null),ee(Vt)}var Vt=O(0);function Iu(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||mm(r)||pm(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ea=0,ze=null,mt=null,Yt=null,Du=!1,dl=!1,yr=!1,ku=0,Po=0,fl=null,NE=0;function kt(){throw Error(i(321))}function cf(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Fn(t[r],s[r]))return!1;return!0}function uf(t,s,r,o,d,m){return Ea=m,ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,J.H=t===null||t.memoizedState===null?Z0:Sf,yr=!1,m=r(o,d),yr=!1,dl&&(m=x0(s,r,o,d)),y0(t),m}function y0(t){J.H=zo;var s=mt!==null&&mt.next!==null;if(Ea=0,Yt=mt=ze=null,Du=!1,Po=0,fl=null,s)throw Error(i(300));t===null||Kt||(t=t.dependencies,t!==null&&Eu(t)&&(Kt=!0))}function x0(t,s,r,o){ze=t;var d=0;do{if(dl&&(fl=null),Po=0,dl=!1,25<=d)throw Error(i(301));if(d+=1,Yt=mt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}J.H=ey,m=s(r,o)}while(dl);return m}function AE(){var t=J.H,s=t.useState()[0];return s=typeof s.then=="function"?Lo(s):s,t=t.useState()[0],(mt!==null?mt.memoizedState:null)!==t&&(ze.flags|=1024),s}function hf(){var t=ku!==0;return ku=0,t}function df(t,s,r){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~r}function ff(t){if(Du){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Du=!1}Ea=0,Yt=mt=ze=null,dl=!1,Po=ku=0,fl=null}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?ze.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Pt(){if(mt===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var s=Yt===null?ze.memoizedState:Yt.next;if(s!==null)Yt=s,mt=t;else{if(t===null)throw ze.alternate===null?Error(i(467)):Error(i(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Yt===null?ze.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function Mu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lo(t){var s=Po;return Po+=1,fl===null&&(fl=[]),t=o0(fl,t,s),s=ze,(Yt===null?s.memoizedState:Yt.next)===null&&(s=s.alternate,J.H=s===null||s.memoizedState===null?Z0:Sf),t}function Ou(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Lo(t);if(t.$$typeof===Q)return pn(t)}throw Error(i(438,String(t)))}function mf(t){var s=null,r=ze.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var o=ze.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=Mu(),ze.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(t),o=0;o<t;o++)r[o]=M;return s.index++,r}function Ta(t,s){return typeof s=="function"?s(t):s}function Vu(t){var s=Pt();return pf(s,mt,t)}function pf(t,s,r){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var d=t.baseQueue,m=o.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}s.baseQueue=d=m,o.pending=null}if(m=t.baseState,d===null)t.memoizedState=m;else{s=d.next;var E=v=null,D=null,K=s,te=!1;do{var ae=K.lane&-536870913;if(ae!==K.lane?(Xe&ae)===ae:(Ea&ae)===ae){var X=K.revertLane;if(X===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ae===ll&&(te=!0);else if((Ea&X)===X){K=K.next,X===ll&&(te=!0);continue}else ae={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},D===null?(E=D=ae,v=m):D=D.next=ae,ze.lanes|=X,mi|=X;ae=K.action,yr&&r(m,ae),m=K.hasEagerState?K.eagerState:r(m,ae)}else X={lane:ae,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},D===null?(E=D=X,v=m):D=D.next=X,ze.lanes|=ae,mi|=ae;K=K.next}while(K!==null&&K!==s);if(D===null?v=m:D.next=E,!Fn(m,t.memoizedState)&&(Kt=!0,te&&(r=ol,r!==null)))throw r;t.memoizedState=m,t.baseState=v,t.baseQueue=D,o.lastRenderedState=m}return d===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function gf(t){var s=Pt(),r=s.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var o=r.dispatch,d=r.pending,m=s.memoizedState;if(d!==null){r.pending=null;var v=d=d.next;do m=t(m,v.action),v=v.next;while(v!==d);Fn(m,s.memoizedState)||(Kt=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),r.lastRenderedState=m}return[m,o]}function v0(t,s,r){var o=ze,d=Pt(),m=tt;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=s();var v=!Fn((mt||d).memoizedState,r);if(v&&(d.memoizedState=r,Kt=!0),d=d.queue,vf(w0.bind(null,o,d,t),[t]),d.getSnapshot!==s||v||Yt!==null&&Yt.memoizedState.tag&1){if(o.flags|=2048,ml(9,{destroy:void 0},_0.bind(null,o,d,r,s),null),xt===null)throw Error(i(349));m||(Ea&127)!==0||b0(o,s,r)}return r}function b0(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=ze.updateQueue,s===null?(s=Mu(),ze.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function _0(t,s,r,o){s.value=r,s.getSnapshot=o,E0(s)&&T0(t)}function w0(t,s,r){return r(function(){E0(s)&&T0(t)})}function E0(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Fn(t,r)}catch{return!0}}function T0(t){var s=or(t,2);s!==null&&Pn(s,t,2)}function yf(t){var s=jn();if(typeof t=="function"){var r=t;if(t=r(),yr){dn(!0);try{r()}finally{dn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:t},s}function S0(t,s,r,o){return t.baseState=r,pf(t,mt,typeof o=="function"?o:Ta)}function RE(t,s,r,o,d){if(Uu(t))throw Error(i(485));if(t=s.action,t!==null){var m={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};J.T!==null?r(!0):m.isTransition=!1,o(m),r=s.pending,r===null?(m.next=s.pending=m,N0(s,m)):(m.next=r.next,s.pending=r.next=m)}}function N0(t,s){var r=s.action,o=s.payload,d=t.state;if(s.isTransition){var m=J.T,v={};J.T=v;try{var E=r(d,o),D=J.S;D!==null&&D(v,E),A0(t,s,E)}catch(K){xf(t,s,K)}finally{m!==null&&v.types!==null&&(m.types=v.types),J.T=m}}else try{m=r(d,o),A0(t,s,m)}catch(K){xf(t,s,K)}}function A0(t,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){R0(t,s,o)},function(o){return xf(t,s,o)}):R0(t,s,r)}function R0(t,s,r){s.status="fulfilled",s.value=r,C0(s),t.state=r,s=t.pending,s!==null&&(r=s.next,r===s?t.pending=null:(r=r.next,s.next=r,N0(t,r)))}function xf(t,s,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=r,C0(s),s=s.next;while(s!==o)}t.action=null}function C0(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function j0(t,s){return s}function I0(t,s){if(tt){var r=xt.formState;if(r!==null){e:{var o=ze;if(tt){if(_t){t:{for(var d=_t,m=hs;d.nodeType!==8;){if(!m){d=null;break t}if(d=fs(d.nextSibling),d===null){d=null;break t}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){_t=fs(d.nextSibling),o=d.data==="F!";break e}}ii(o)}o=!1}o&&(s=r[0])}}return r=jn(),r.memoizedState=r.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:j0,lastRenderedState:s},r.queue=o,r=X0.bind(null,ze,o),o.dispatch=r,o=yf(!1),m=Tf.bind(null,ze,!1,o.queue),o=jn(),d={state:s,dispatch:null,action:t,pending:null},o.queue=d,r=RE.bind(null,ze,d,m,r),d.dispatch=r,o.memoizedState=t,[s,r,!1]}function D0(t){var s=Pt();return k0(s,mt,t)}function k0(t,s,r){if(s=pf(t,s,j0)[0],t=Vu(Ta)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=Lo(s)}catch(v){throw v===cl?Nu:v}else o=s;s=Pt();var d=s.queue,m=d.dispatch;return r!==s.memoizedState&&(ze.flags|=2048,ml(9,{destroy:void 0},CE.bind(null,d,r),null)),[o,m,t]}function CE(t,s){t.action=s}function M0(t){var s=Pt(),r=mt;if(r!==null)return k0(s,r,t);Pt(),s=s.memoizedState,r=Pt();var o=r.queue.dispatch;return r.memoizedState=t,[s,o,!1]}function ml(t,s,r,o){return t={tag:t,create:r,deps:o,inst:s,next:null},s=ze.updateQueue,s===null&&(s=Mu(),ze.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,s.lastEffect=t),t}function O0(){return Pt().memoizedState}function Pu(t,s,r,o){var d=jn();ze.flags|=t,d.memoizedState=ml(1|s,{destroy:void 0},r,o===void 0?null:o)}function Lu(t,s,r,o){var d=Pt();o=o===void 0?null:o;var m=d.memoizedState.inst;mt!==null&&o!==null&&cf(o,mt.memoizedState.deps)?d.memoizedState=ml(s,m,r,o):(ze.flags|=t,d.memoizedState=ml(1|s,m,r,o))}function V0(t,s){Pu(8390656,8,t,s)}function vf(t,s){Lu(2048,8,t,s)}function jE(t){ze.flags|=4;var s=ze.updateQueue;if(s===null)s=Mu(),ze.updateQueue=s,s.events=[t];else{var r=s.events;r===null?s.events=[t]:r.push(t)}}function P0(t){var s=Pt().memoizedState;return jE({ref:s,nextImpl:t}),function(){if((ot&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function L0(t,s){return Lu(4,2,t,s)}function U0(t,s){return Lu(4,4,t,s)}function z0(t,s){if(typeof s=="function"){t=t();var r=s(t);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function B0(t,s,r){r=r!=null?r.concat([t]):null,Lu(4,4,z0.bind(null,s,t),r)}function bf(){}function q0(t,s){var r=Pt();s=s===void 0?null:s;var o=r.memoizedState;return s!==null&&cf(s,o[1])?o[0]:(r.memoizedState=[t,s],t)}function H0(t,s){var r=Pt();s=s===void 0?null:s;var o=r.memoizedState;if(s!==null&&cf(s,o[1]))return o[0];if(o=t(),yr){dn(!0);try{t()}finally{dn(!1)}}return r.memoizedState=[o,s],o}function _f(t,s,r){return r===void 0||(Ea&1073741824)!==0&&(Xe&261930)===0?t.memoizedState=s:(t.memoizedState=r,t=Fy(),ze.lanes|=t,mi|=t,r)}function F0(t,s,r,o){return Fn(r,s)?r:hl.current!==null?(t=_f(t,r,o),Fn(t,s)||(Kt=!0),t):(Ea&42)===0||(Ea&1073741824)!==0&&(Xe&261930)===0?(Kt=!0,t.memoizedState=r):(t=Fy(),ze.lanes|=t,mi|=t,s)}function $0(t,s,r,o,d){var m=he.p;he.p=m!==0&&8>m?m:8;var v=J.T,E={};J.T=E,Tf(t,!1,s,r);try{var D=d(),K=J.S;if(K!==null&&K(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var te=SE(D,o);Uo(t,s,te,Xn(t))}else Uo(t,s,o,Xn(t))}catch(ae){Uo(t,s,{then:function(){},status:"rejected",reason:ae},Xn())}finally{he.p=m,v!==null&&E.types!==null&&(v.types=E.types),J.T=v}}function IE(){}function wf(t,s,r,o){if(t.tag!==5)throw Error(i(476));var d=G0(t).queue;$0(t,d,s,be,r===null?IE:function(){return Y0(t),r(o)})}function G0(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:be},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:r},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Y0(t){var s=G0(t);s.next===null&&(s=t.alternate.memoizedState),Uo(t,s.next.queue,{},Xn())}function Ef(){return pn(nc)}function K0(){return Pt().memoizedState}function Q0(){return Pt().memoizedState}function DE(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var r=Xn();t=oi(r);var o=ci(s,t,r);o!==null&&(Pn(o,s,r),Mo(o,s,r)),s={cache:Wd()},t.payload=s;return}s=s.return}}function kE(t,s,r){var o=Xn();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Uu(t)?W0(s,r):(r=zd(t,s,r,o),r!==null&&(Pn(r,t,o),J0(r,s,o)))}function X0(t,s,r){var o=Xn();Uo(t,s,r,o)}function Uo(t,s,r,o){var d={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Uu(t))W0(s,d);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var v=s.lastRenderedState,E=m(v,r);if(d.hasEagerState=!0,d.eagerState=E,Fn(E,v))return vu(t,s,d,0),xt===null&&xu(),!1}catch{}if(r=zd(t,s,d,o),r!==null)return Pn(r,t,o),J0(r,s,o),!0}return!1}function Tf(t,s,r,o){if(o={lane:2,revertLane:nm(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Uu(t)){if(s)throw Error(i(479))}else s=zd(t,r,o,2),s!==null&&Pn(s,t,2)}function Uu(t){var s=t.alternate;return t===ze||s!==null&&s===ze}function W0(t,s){dl=Du=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function J0(t,s,r){if((r&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,r|=o,s.lanes=r,ro(t,r)}}var zo={readContext:pn,use:Ou,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};zo.useEffectEvent=kt;var Z0={readContext:pn,use:Ou,useCallback:function(t,s){return jn().memoizedState=[t,s===void 0?null:s],t},useContext:pn,useEffect:V0,useImperativeHandle:function(t,s,r){r=r!=null?r.concat([t]):null,Pu(4194308,4,z0.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Pu(4194308,4,t,s)},useInsertionEffect:function(t,s){Pu(4,2,t,s)},useMemo:function(t,s){var r=jn();s=s===void 0?null:s;var o=t();if(yr){dn(!0);try{t()}finally{dn(!1)}}return r.memoizedState=[o,s],o},useReducer:function(t,s,r){var o=jn();if(r!==void 0){var d=r(s);if(yr){dn(!0);try{r(s)}finally{dn(!1)}}}else d=s;return o.memoizedState=o.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},o.queue=t,t=t.dispatch=kE.bind(null,ze,t),[o.memoizedState,t]},useRef:function(t){var s=jn();return t={current:t},s.memoizedState=t},useState:function(t){t=yf(t);var s=t.queue,r=X0.bind(null,ze,s);return s.dispatch=r,[t.memoizedState,r]},useDebugValue:bf,useDeferredValue:function(t,s){var r=jn();return _f(r,t,s)},useTransition:function(){var t=yf(!1);return t=$0.bind(null,ze,t.queue,!0,!1),jn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,r){var o=ze,d=jn();if(tt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=s(),xt===null)throw Error(i(349));(Xe&127)!==0||b0(o,s,r)}d.memoizedState=r;var m={value:r,getSnapshot:s};return d.queue=m,V0(w0.bind(null,o,m,t),[t]),o.flags|=2048,ml(9,{destroy:void 0},_0.bind(null,o,m,r,s),null),r},useId:function(){var t=jn(),s=xt.identifierPrefix;if(tt){var r=ta,o=ea;r=(o&~(1<<32-Rt(o)-1)).toString(32)+r,s="_"+s+"R_"+r,r=ku++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=NE++,s="_"+s+"r_"+r.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Ef,useFormState:I0,useActionState:I0,useOptimistic:function(t){var s=jn();s.memoizedState=s.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=Tf.bind(null,ze,!0,r),r.dispatch=s,[t,s]},useMemoCache:mf,useCacheRefresh:function(){return jn().memoizedState=DE.bind(null,ze)},useEffectEvent:function(t){var s=jn(),r={impl:t};return s.memoizedState=r,function(){if((ot&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Sf={readContext:pn,use:Ou,useCallback:q0,useContext:pn,useEffect:vf,useImperativeHandle:B0,useInsertionEffect:L0,useLayoutEffect:U0,useMemo:H0,useReducer:Vu,useRef:O0,useState:function(){return Vu(Ta)},useDebugValue:bf,useDeferredValue:function(t,s){var r=Pt();return F0(r,mt.memoizedState,t,s)},useTransition:function(){var t=Vu(Ta)[0],s=Pt().memoizedState;return[typeof t=="boolean"?t:Lo(t),s]},useSyncExternalStore:v0,useId:K0,useHostTransitionStatus:Ef,useFormState:D0,useActionState:D0,useOptimistic:function(t,s){var r=Pt();return S0(r,mt,t,s)},useMemoCache:mf,useCacheRefresh:Q0};Sf.useEffectEvent=P0;var ey={readContext:pn,use:Ou,useCallback:q0,useContext:pn,useEffect:vf,useImperativeHandle:B0,useInsertionEffect:L0,useLayoutEffect:U0,useMemo:H0,useReducer:gf,useRef:O0,useState:function(){return gf(Ta)},useDebugValue:bf,useDeferredValue:function(t,s){var r=Pt();return mt===null?_f(r,t,s):F0(r,mt.memoizedState,t,s)},useTransition:function(){var t=gf(Ta)[0],s=Pt().memoizedState;return[typeof t=="boolean"?t:Lo(t),s]},useSyncExternalStore:v0,useId:K0,useHostTransitionStatus:Ef,useFormState:M0,useActionState:M0,useOptimistic:function(t,s){var r=Pt();return mt!==null?S0(r,mt,t,s):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:mf,useCacheRefresh:Q0};ey.useEffectEvent=P0;function Nf(t,s,r,o){s=t.memoizedState,r=r(o,s),r=r==null?s:w({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Af={enqueueSetState:function(t,s,r){t=t._reactInternals;var o=Xn(),d=oi(o);d.payload=s,r!=null&&(d.callback=r),s=ci(t,d,o),s!==null&&(Pn(s,t,o),Mo(s,t,o))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var o=Xn(),d=oi(o);d.tag=1,d.payload=s,r!=null&&(d.callback=r),s=ci(t,d,o),s!==null&&(Pn(s,t,o),Mo(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Xn(),o=oi(r);o.tag=2,s!=null&&(o.callback=s),s=ci(t,o,r),s!==null&&(Pn(s,t,r),Mo(s,t,r))}};function ty(t,s,r,o,d,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,v):s.prototype&&s.prototype.isPureReactComponent?!No(r,o)||!No(d,m):!0}function ny(t,s,r,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,o),s.state!==t&&Af.enqueueReplaceState(s,s.state,null)}function xr(t,s){var r=s;if("ref"in s){r={};for(var o in s)o!=="ref"&&(r[o]=s[o])}if(t=t.defaultProps){r===s&&(r=w({},r));for(var d in t)r[d]===void 0&&(r[d]=t[d])}return r}function sy(t){yu(t)}function ay(t){console.error(t)}function iy(t){yu(t)}function zu(t,s){try{var r=t.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function ry(t,s,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Rf(t,s,r){return r=oi(r),r.tag=3,r.payload={element:null},r.callback=function(){zu(t,s)},r}function ly(t){return t=oi(t),t.tag=3,t}function oy(t,s,r,o){var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;t.payload=function(){return d(m)},t.callback=function(){ry(s,r,o)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){ry(s,r,o),typeof d!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function ME(t,s,r,o,d){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=r.alternate,s!==null&&rl(s,r,d,!0),r=Gn.current,r!==null){switch(r.tag){case 31:case 13:return ds===null?Ju():r.alternate===null&&Mt===0&&(Mt=3),r.flags&=-257,r.flags|=65536,r.lanes=d,o===Au?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([o]):s.add(o),Zf(t,o,d)),!1;case 22:return r.flags|=65536,o===Au?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([o]):r.add(o)),Zf(t,o,d)),!1}throw Error(i(435,r.tag))}return Zf(t,o,d),Ju(),!1}if(tt)return s=Gn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,o!==Gd&&(t=Error(i(422),{cause:o}),Co(os(t,r)))):(o!==Gd&&(s=Error(i(423),{cause:o}),Co(os(s,r))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,o=os(o,r),d=Rf(t.stateNode,o,d),sf(t,d),Mt!==4&&(Mt=2)),!1;var m=Error(i(520),{cause:o});if(m=os(m,r),Ko===null?Ko=[m]:Ko.push(m),Mt!==4&&(Mt=2),s===null)return!0;o=os(o,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,t=d&-d,r.lanes|=t,t=Rf(r.stateNode,o,t),sf(r,t),!1;case 1:if(s=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(pi===null||!pi.has(m))))return r.flags|=65536,d&=-d,r.lanes|=d,d=ly(d),oy(d,t,r,o),sf(r,d),!1}r=r.return}while(r!==null);return!1}var Cf=Error(i(461)),Kt=!1;function gn(t,s,r,o){s.child=t===null?d0(s,null,r,o):gr(s,t.child,r,o)}function cy(t,s,r,o,d){r=r.render;var m=s.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return dr(s),o=uf(t,s,r,v,m,d),E=hf(),t!==null&&!Kt?(df(t,s,d),Sa(t,s,d)):(tt&&E&&Fd(s),s.flags|=1,gn(t,s,o,d),s.child)}function uy(t,s,r,o,d){if(t===null){var m=r.type;return typeof m=="function"&&!Bd(m)&&m.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=m,hy(t,s,m,o,d)):(t=_u(r.type,null,o,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(m=t.child,!Pf(t,d)){var v=m.memoizedProps;if(r=r.compare,r=r!==null?r:No,r(v,o)&&t.ref===s.ref)return Sa(t,s,d)}return s.flags|=1,t=va(m,o),t.ref=s.ref,t.return=s,s.child=t}function hy(t,s,r,o,d){if(t!==null){var m=t.memoizedProps;if(No(m,o)&&t.ref===s.ref)if(Kt=!1,s.pendingProps=o=m,Pf(t,d))(t.flags&131072)!==0&&(Kt=!0);else return s.lanes=t.lanes,Sa(t,s,d)}return jf(t,s,r,o,d)}function dy(t,s,r,o){var d=o.children,m=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(o=s.child=t.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~m}else o=0,s.child=null;return fy(t,s,m,r,o)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Su(s,m!==null?m.cachePool:null),m!==null?p0(s,m):rf(),g0(s);else return o=s.lanes=536870912,fy(t,s,m!==null?m.baseLanes|r:r,r,o)}else m!==null?(Su(s,m.cachePool),p0(s,m),hi(),s.memoizedState=null):(t!==null&&Su(s,null),rf(),hi());return gn(t,s,d,r),s.child}function Bo(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function fy(t,s,r,o,d){var m=Zd();return m=m===null?null:{parent:Gt._currentValue,pool:m},s.memoizedState={baseLanes:r,cachePool:m},t!==null&&Su(s,null),rf(),g0(s),t!==null&&rl(t,s,o,!0),s.childLanes=d,null}function Bu(t,s){return s=Hu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function my(t,s,r){return gr(s,t.child,null,r),t=Bu(s,s.pendingProps),t.flags|=2,Yn(s),s.memoizedState=null,t}function OE(t,s,r){var o=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(tt){if(o.mode==="hidden")return t=Bu(s,o),s.lanes=536870912,Bo(null,t);if(of(s),(t=_t)?(t=Nx(t,hs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:si!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},r=Wg(t),r.return=s,s.child=r,mn=s,_t=null)):t=null,t===null)throw ii(s);return s.lanes=536870912,null}return Bu(s,o)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(of(s),d)if(s.flags&256)s.flags&=-257,s=my(t,s,r);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(Kt||rl(t,s,r,!1),d=(r&t.childLanes)!==0,Kt||d){if(o=xt,o!==null&&(v=lo(o,r),v!==0&&v!==m.retryLane))throw m.retryLane=v,or(t,v),Pn(o,t,v),Cf;Ju(),s=my(t,s,r)}else t=m.treeContext,_t=fs(v.nextSibling),mn=s,tt=!0,ai=null,hs=!1,t!==null&&e0(s,t),s=Bu(s,o),s.flags|=4096;return s}return t=va(t.child,{mode:o.mode,children:o.children}),t.ref=s.ref,s.child=t,t.return=s,t}function qu(t,s){var r=s.ref;if(r===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(s.flags|=4194816)}}function jf(t,s,r,o,d){return dr(s),r=uf(t,s,r,o,void 0,d),o=hf(),t!==null&&!Kt?(df(t,s,d),Sa(t,s,d)):(tt&&o&&Fd(s),s.flags|=1,gn(t,s,r,d),s.child)}function py(t,s,r,o,d,m){return dr(s),s.updateQueue=null,r=x0(s,o,r,d),y0(t),o=hf(),t!==null&&!Kt?(df(t,s,m),Sa(t,s,m)):(tt&&o&&Fd(s),s.flags|=1,gn(t,s,r,m),s.child)}function gy(t,s,r,o,d){if(dr(s),s.stateNode===null){var m=nl,v=r.contextType;typeof v=="object"&&v!==null&&(m=pn(v)),m=new r(o,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Af,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=o,m.state=s.memoizedState,m.refs={},tf(s),v=r.contextType,m.context=typeof v=="object"&&v!==null?pn(v):nl,m.state=s.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Nf(s,r,v,o),m.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Af.enqueueReplaceState(m,m.state,null),Vo(s,o,m,d),Oo(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){m=s.stateNode;var E=s.memoizedProps,D=xr(r,E);m.props=D;var K=m.context,te=r.contextType;v=nl,typeof te=="object"&&te!==null&&(v=pn(te));var ae=r.getDerivedStateFromProps;te=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,te||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||K!==v)&&ny(s,m,o,v),li=!1;var X=s.memoizedState;m.state=X,Vo(s,o,m,d),Oo(),K=s.memoizedState,E||X!==K||li?(typeof ae=="function"&&(Nf(s,r,ae,o),K=s.memoizedState),(D=li||ty(s,r,D,o,X,K,v))?(te||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=K),m.props=o,m.state=K,m.context=v,o=D):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{m=s.stateNode,nf(t,s),v=s.memoizedProps,te=xr(r,v),m.props=te,ae=s.pendingProps,X=m.context,K=r.contextType,D=nl,typeof K=="object"&&K!==null&&(D=pn(K)),E=r.getDerivedStateFromProps,(K=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ae||X!==D)&&ny(s,m,o,D),li=!1,X=s.memoizedState,m.state=X,Vo(s,o,m,d),Oo();var Z=s.memoizedState;v!==ae||X!==Z||li||t!==null&&t.dependencies!==null&&Eu(t.dependencies)?(typeof E=="function"&&(Nf(s,r,E,o),Z=s.memoizedState),(te=li||ty(s,r,te,o,X,Z,D)||t!==null&&t.dependencies!==null&&Eu(t.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,Z,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,Z,D)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=Z),m.props=o,m.state=Z,m.context=D,o=te):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&X===t.memoizedState||(s.flags|=1024),o=!1)}return m=o,qu(t,s),o=(s.flags&128)!==0,m||o?(m=s.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,t!==null&&o?(s.child=gr(s,t.child,null,d),s.child=gr(s,null,r,d)):gn(t,s,r,d),s.memoizedState=m.state,t=s.child):t=Sa(t,s,d),t}function yy(t,s,r,o){return ur(),s.flags|=256,gn(t,s,r,o),s.child}var If={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Df(t){return{baseLanes:t,cachePool:r0()}}function kf(t,s,r){return t=t!==null?t.childLanes&~r:0,s&&(t|=Qn),t}function xy(t,s,r){var o=s.pendingProps,d=!1,m=(s.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Vt.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(tt){if(d?ui(s):hi(),(t=_t)?(t=Nx(t,hs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:si!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},r=Wg(t),r.return=s,s.child=r,mn=s,_t=null)):t=null,t===null)throw ii(s);return pm(t)?s.lanes=32:s.lanes=536870912,null}var E=o.children;return o=o.fallback,d?(hi(),d=s.mode,E=Hu({mode:"hidden",children:E},d),o=cr(o,d,r,null),E.return=s,o.return=s,E.sibling=o,s.child=E,o=s.child,o.memoizedState=Df(r),o.childLanes=kf(t,v,r),s.memoizedState=If,Bo(null,o)):(ui(s),Mf(s,E))}var D=t.memoizedState;if(D!==null&&(E=D.dehydrated,E!==null)){if(m)s.flags&256?(ui(s),s.flags&=-257,s=Of(t,s,r)):s.memoizedState!==null?(hi(),s.child=t.child,s.flags|=128,s=null):(hi(),E=o.fallback,d=s.mode,o=Hu({mode:"visible",children:o.children},d),E=cr(E,d,r,null),E.flags|=2,o.return=s,E.return=s,o.sibling=E,s.child=o,gr(s,t.child,null,r),o=s.child,o.memoizedState=Df(r),o.childLanes=kf(t,v,r),s.memoizedState=If,s=Bo(null,o));else if(ui(s),pm(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var K=v.dgst;v=K,o=Error(i(419)),o.stack="",o.digest=v,Co({value:o,source:null,stack:null}),s=Of(t,s,r)}else if(Kt||rl(t,s,r,!1),v=(r&t.childLanes)!==0,Kt||v){if(v=xt,v!==null&&(o=lo(v,r),o!==0&&o!==D.retryLane))throw D.retryLane=o,or(t,o),Pn(v,t,o),Cf;mm(E)||Ju(),s=Of(t,s,r)}else mm(E)?(s.flags|=192,s.child=t.child,s=null):(t=D.treeContext,_t=fs(E.nextSibling),mn=s,tt=!0,ai=null,hs=!1,t!==null&&e0(s,t),s=Mf(s,o.children),s.flags|=4096);return s}return d?(hi(),E=o.fallback,d=s.mode,D=t.child,K=D.sibling,o=va(D,{mode:"hidden",children:o.children}),o.subtreeFlags=D.subtreeFlags&65011712,K!==null?E=va(K,E):(E=cr(E,d,r,null),E.flags|=2),E.return=s,o.return=s,o.sibling=E,s.child=o,Bo(null,o),o=s.child,E=t.child.memoizedState,E===null?E=Df(r):(d=E.cachePool,d!==null?(D=Gt._currentValue,d=d.parent!==D?{parent:D,pool:D}:d):d=r0(),E={baseLanes:E.baseLanes|r,cachePool:d}),o.memoizedState=E,o.childLanes=kf(t,v,r),s.memoizedState=If,Bo(t.child,o)):(ui(s),r=t.child,t=r.sibling,r=va(r,{mode:"visible",children:o.children}),r.return=s,r.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=r,s.memoizedState=null,r)}function Mf(t,s){return s=Hu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Hu(t,s){return t=$n(22,t,null,s),t.lanes=0,t}function Of(t,s,r){return gr(s,t.child,null,r),t=Mf(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function vy(t,s,r){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),Qd(t.return,s,r)}function Vf(t,s,r,o,d,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:d,treeForkCount:m}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=r,v.tailMode=d,v.treeForkCount=m)}function by(t,s,r){var o=s.pendingProps,d=o.revealOrder,m=o.tail;o=o.children;var v=Vt.current,E=(v&2)!==0;if(E?(v=v&1|2,s.flags|=128):v&=1,de(Vt,v),gn(t,s,o,r),o=tt?Ro:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vy(t,r,s);else if(t.tag===19)vy(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(r=s.child,d=null;r!==null;)t=r.alternate,t!==null&&Iu(t)===null&&(d=r),r=r.sibling;r=d,r===null?(d=s.child,s.child=null):(d=r.sibling,r.sibling=null),Vf(s,!1,d,r,m,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Iu(t)===null){s.child=d;break}t=d.sibling,d.sibling=r,r=d,d=t}Vf(s,!0,r,null,m,o);break;case"together":Vf(s,!1,null,null,void 0,o);break;default:s.memoizedState=null}return s.child}function Sa(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),mi|=s.lanes,(r&s.childLanes)===0)if(t!==null){if(rl(t,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,r=va(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=va(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function Pf(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Eu(t)))}function VE(t,s,r){switch(s.tag){case 3:yt(s,s.stateNode.containerInfo),ri(s,Gt,t.memoizedState.cache),ur();break;case 27:case 5:un(s);break;case 4:yt(s,s.stateNode.containerInfo);break;case 10:ri(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,of(s),null;break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?(ui(s),s.flags|=128,null):(r&s.child.childLanes)!==0?xy(t,s,r):(ui(s),t=Sa(t,s,r),t!==null?t.sibling:null);ui(s);break;case 19:var d=(t.flags&128)!==0;if(o=(r&s.childLanes)!==0,o||(rl(t,s,r,!1),o=(r&s.childLanes)!==0),d){if(o)return by(t,s,r);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),de(Vt,Vt.current),o)break;return null;case 22:return s.lanes=0,dy(t,s,r,s.pendingProps);case 24:ri(s,Gt,t.memoizedState.cache)}return Sa(t,s,r)}function _y(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps)Kt=!0;else{if(!Pf(t,r)&&(s.flags&128)===0)return Kt=!1,VE(t,s,r);Kt=(t.flags&131072)!==0}else Kt=!1,tt&&(s.flags&1048576)!==0&&Zg(s,Ro,s.index);switch(s.lanes=0,s.tag){case 16:e:{var o=s.pendingProps;if(t=mr(s.elementType),s.type=t,typeof t=="function")Bd(t)?(o=xr(t,o),s.tag=1,s=gy(null,s,t,o,r)):(s.tag=0,s=jf(null,s,t,o,r));else{if(t!=null){var d=t.$$typeof;if(d===ue){s.tag=11,s=cy(null,s,t,o,r);break e}else if(d===N){s.tag=14,s=uy(null,s,t,o,r);break e}}throw s=we(t)||t,Error(i(306,s,""))}}return s;case 0:return jf(t,s,s.type,s.pendingProps,r);case 1:return o=s.type,d=xr(o,s.pendingProps),gy(t,s,o,d,r);case 3:e:{if(yt(s,s.stateNode.containerInfo),t===null)throw Error(i(387));o=s.pendingProps;var m=s.memoizedState;d=m.element,nf(t,s),Vo(s,o,null,r);var v=s.memoizedState;if(o=v.cache,ri(s,Gt,o),o!==m.cache&&Xd(s,[Gt],r,!0),Oo(),o=v.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=yy(t,s,o,r);break e}else if(o!==d){d=os(Error(i(424)),s),Co(d),s=yy(t,s,o,r);break e}else for(t=s.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,_t=fs(t.firstChild),mn=s,tt=!0,ai=null,hs=!0,r=d0(s,null,o,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ur(),o===d){s=Sa(t,s,r);break e}gn(t,s,o,r)}s=s.child}return s;case 26:return qu(t,s),t===null?(r=Dx(s.type,null,s.pendingProps,null))?s.memoizedState=r:tt||(r=s.type,t=s.pendingProps,o=ih(De.current).createElement(r),o[Ht]=s,o[rn]=t,yn(o,r,t),Ft(o),s.stateNode=o):s.memoizedState=Dx(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return un(s),t===null&&tt&&(o=s.stateNode=Cx(s.type,s.pendingProps,De.current),mn=s,hs=!0,d=_t,vi(s.type)?(gm=d,_t=fs(o.firstChild)):_t=d),gn(t,s,s.pendingProps.children,r),qu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&tt&&((d=o=_t)&&(o=dT(o,s.type,s.pendingProps,hs),o!==null?(s.stateNode=o,mn=s,_t=fs(o.firstChild),hs=!1,d=!0):d=!1),d||ii(s)),un(s),d=s.type,m=s.pendingProps,v=t!==null?t.memoizedProps:null,o=m.children,hm(d,m)?o=null:v!==null&&hm(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=uf(t,s,AE,null,null,r),nc._currentValue=d),qu(t,s),gn(t,s,o,r),s.child;case 6:return t===null&&tt&&((t=r=_t)&&(r=fT(r,s.pendingProps,hs),r!==null?(s.stateNode=r,mn=s,_t=null,t=!0):t=!1),t||ii(s)),null;case 13:return xy(t,s,r);case 4:return yt(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=gr(s,null,o,r):gn(t,s,o,r),s.child;case 11:return cy(t,s,s.type,s.pendingProps,r);case 7:return gn(t,s,s.pendingProps,r),s.child;case 8:return gn(t,s,s.pendingProps.children,r),s.child;case 12:return gn(t,s,s.pendingProps.children,r),s.child;case 10:return o=s.pendingProps,ri(s,s.type,o.value),gn(t,s,o.children,r),s.child;case 9:return d=s.type._context,o=s.pendingProps.children,dr(s),d=pn(d),o=o(d),s.flags|=1,gn(t,s,o,r),s.child;case 14:return uy(t,s,s.type,s.pendingProps,r);case 15:return hy(t,s,s.type,s.pendingProps,r);case 19:return by(t,s,r);case 31:return OE(t,s,r);case 22:return dy(t,s,r,s.pendingProps);case 24:return dr(s),o=pn(Gt),t===null?(d=Zd(),d===null&&(d=xt,m=Wd(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=r),d=m),s.memoizedState={parent:o,cache:d},tf(s),ri(s,Gt,d)):((t.lanes&r)!==0&&(nf(t,s),Vo(s,null,null,r),Oo()),d=t.memoizedState,m=s.memoizedState,d.parent!==o?(d={parent:o,cache:o},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ri(s,Gt,o)):(o=m.cache,ri(s,Gt,o),o!==d.cache&&Xd(s,[Gt],r,!0))),gn(t,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Na(t){t.flags|=4}function Lf(t,s,r,o,d){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Ky())t.flags|=8192;else throw pr=Au,ef}else t.flags&=-16777217}function wy(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Px(s))if(Ky())t.flags|=8192;else throw pr=Au,ef}function Fu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Xc():536870912,t.lanes|=s,xl|=s)}function qo(t,s){if(!tt)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function wt(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(s)for(var d=t.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)r|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=o,t.childLanes=r,s}function PE(t,s,r){var o=s.pendingProps;switch($d(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(s),null;case 1:return wt(s),null;case 3:return r=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),wa(Gt),Fe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(il(s)?Na(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Yd())),wt(s),null;case 26:var d=s.type,m=s.memoizedState;return t===null?(Na(s),m!==null?(wt(s),wy(s,m)):(wt(s),Lf(s,d,null,o,r))):m?m!==t.memoizedState?(Na(s),wt(s),wy(s,m)):(wt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==o&&Na(s),wt(s),Lf(s,d,t,o,r)),null;case 27:if(hn(s),r=De.current,d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&Na(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return wt(s),null}t=me.current,il(s)?t0(s):(t=Cx(d,o,r),s.stateNode=t,Na(s))}return wt(s),null;case 5:if(hn(s),d=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&Na(s);else{if(!o){if(s.stateNode===null)throw Error(i(166));return wt(s),null}if(m=me.current,il(s))t0(s);else{var v=ih(De.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?v.createElement(d,{is:o.is}):v.createElement(d)}}m[Ht]=s,m[rn]=o;e:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break e;for(;v.sibling===null;){if(v.return===null||v.return===s)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=m;e:switch(yn(m,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Na(s)}}return wt(s),Lf(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,r),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&Na(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(i(166));if(t=De.current,il(s)){if(t=s.stateNode,r=s.memoizedProps,o=null,d=mn,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}t[Ht]=s,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||xx(t.nodeValue,r)),t||ii(s,!0)}else t=ih(t).createTextNode(o),t[Ht]=s,s.stateNode=t}return wt(s),null;case 31:if(r=s.memoizedState,t===null||t.memoizedState!==null){if(o=il(s),r!==null){if(t===null){if(!o)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Ht]=s}else ur(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),t=!1}else r=Yd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return s.flags&256?(Yn(s),s):(Yn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return wt(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=il(s),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Ht]=s}else ur(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;wt(s),d=!1}else d=Yd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Yn(s),s):(Yn(s),null)}return Yn(s),(s.flags&128)!==0?(s.lanes=r,s):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=s.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==d&&(o.flags|=2048)),r!==t&&r&&(s.child.flags|=8192),Fu(s,s.updateQueue),wt(s),null);case 4:return Fe(),t===null&&rm(s.stateNode.containerInfo),wt(s),null;case 10:return wa(s.type),wt(s),null;case 19:if(ee(Vt),o=s.memoizedState,o===null)return wt(s),null;if(d=(s.flags&128)!==0,m=o.rendering,m===null)if(d)qo(o,!1);else{if(Mt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(m=Iu(t),m!==null){for(s.flags|=128,qo(o,!1),t=m.updateQueue,s.updateQueue=t,Fu(s,t),s.subtreeFlags=0,t=r,r=s.child;r!==null;)Xg(r,t),r=r.sibling;return de(Vt,Vt.current&1|2),tt&&ba(s,o.treeForkCount),s.child}t=t.sibling}o.tail!==null&&re()>Qu&&(s.flags|=128,d=!0,qo(o,!1),s.lanes=4194304)}else{if(!d)if(t=Iu(m),t!==null){if(s.flags|=128,d=!0,t=t.updateQueue,s.updateQueue=t,Fu(s,t),qo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!tt)return wt(s),null}else 2*re()-o.renderingStartTime>Qu&&r!==536870912&&(s.flags|=128,d=!0,qo(o,!1),s.lanes=4194304);o.isBackwards?(m.sibling=s.child,s.child=m):(t=o.last,t!==null?t.sibling=m:s.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=re(),t.sibling=null,r=Vt.current,de(Vt,d?r&1|2:r&1),tt&&ba(s,o.treeForkCount),t):(wt(s),null);case 22:case 23:return Yn(s),lf(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(r&536870912)!==0&&(s.flags&128)===0&&(wt(s),s.subtreeFlags&6&&(s.flags|=8192)):wt(s),r=s.updateQueue,r!==null&&Fu(s,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==r&&(s.flags|=2048),t!==null&&ee(fr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),wa(Gt),wt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function LE(t,s){switch($d(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return wa(Gt),Fe(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return hn(s),null;case 31:if(s.memoizedState!==null){if(Yn(s),s.alternate===null)throw Error(i(340));ur()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Yn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ur()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ee(Vt),null;case 4:return Fe(),null;case 10:return wa(s.type),null;case 22:case 23:return Yn(s),lf(),t!==null&&ee(fr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return wa(Gt),null;case 25:return null;default:return null}}function Ey(t,s){switch($d(s),s.tag){case 3:wa(Gt),Fe();break;case 26:case 27:case 5:hn(s);break;case 4:Fe();break;case 31:s.memoizedState!==null&&Yn(s);break;case 13:Yn(s);break;case 19:ee(Vt);break;case 10:wa(s.type);break;case 22:case 23:Yn(s),lf(),t!==null&&ee(fr);break;case 24:wa(Gt)}}function Ho(t,s){try{var r=s.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var d=o.next;r=d;do{if((r.tag&t)===t){o=void 0;var m=r.create,v=r.inst;o=m(),v.destroy=o}r=r.next}while(r!==d)}}catch(E){dt(s,s.return,E)}}function di(t,s,r){try{var o=s.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var m=d.next;o=m;do{if((o.tag&t)===t){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,d=s;var D=r,K=E;try{K()}catch(te){dt(d,D,te)}}}o=o.next}while(o!==m)}}catch(te){dt(s,s.return,te)}}function Ty(t){var s=t.updateQueue;if(s!==null){var r=t.stateNode;try{m0(s,r)}catch(o){dt(t,t.return,o)}}}function Sy(t,s,r){r.props=xr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){dt(t,s,o)}}function Fo(t,s){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(d){dt(t,s,d)}}function na(t,s){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(d){dt(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(d){dt(t,s,d)}else r.current=null}function Ny(t){var s=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(d){dt(t,t.return,d)}}function Uf(t,s,r){try{var o=t.stateNode;rT(o,t.type,r,s),o[rn]=s}catch(d){dt(t,t.return,d)}}function Ay(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&vi(t.type)||t.tag===4}function zf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ay(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&vi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bf(t,s,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(t),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=Es));else if(o!==4&&(o===27&&vi(t.type)&&(r=t.stateNode,s=null),t=t.child,t!==null))for(Bf(t,s,r),t=t.sibling;t!==null;)Bf(t,s,r),t=t.sibling}function $u(t,s,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(o!==4&&(o===27&&vi(t.type)&&(r=t.stateNode),t=t.child,t!==null))for($u(t,s,r),t=t.sibling;t!==null;)$u(t,s,r),t=t.sibling}function Ry(t){var s=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);yn(s,o,r),s[Ht]=t,s[rn]=r}catch(m){dt(t,t.return,m)}}var Aa=!1,Qt=!1,qf=!1,Cy=typeof WeakSet=="function"?WeakSet:Set,on=null;function UE(t,s){if(t=t.containerInfo,cm=dh,t=Bg(t),Md(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var d=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var v=0,E=-1,D=-1,K=0,te=0,ae=t,X=null;t:for(;;){for(var Z;ae!==r||d!==0&&ae.nodeType!==3||(E=v+d),ae!==m||o!==0&&ae.nodeType!==3||(D=v+o),ae.nodeType===3&&(v+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)X=ae,ae=Z;for(;;){if(ae===t)break t;if(X===r&&++K===d&&(E=v),X===m&&++te===o&&(D=v),(Z=ae.nextSibling)!==null)break;ae=X,X=ae.parentNode}ae=Z}r=E===-1||D===-1?null:{start:E,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(um={focusedElem:t,selectionRange:r},dh=!1,on=s;on!==null;)if(s=on,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,on=t;else for(;on!==null;){switch(s=on,m=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)d=t[r],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=s,d=m.memoizedProps,m=m.memoizedState,o=r.stateNode;try{var ve=xr(r.type,d);t=o.getSnapshotBeforeUpdate(ve,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(Re){dt(r,r.return,Re)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,r=t.nodeType,r===9)fm(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":fm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,on=t;break}on=s.return}}function jy(t,s,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Ca(t,r),o&4&&Ho(5,r);break;case 1:if(Ca(t,r),o&4)if(t=r.stateNode,s===null)try{t.componentDidMount()}catch(v){dt(r,r.return,v)}else{var d=xr(r.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){dt(r,r.return,v)}}o&64&&Ty(r),o&512&&Fo(r,r.return);break;case 3:if(Ca(t,r),o&64&&(t=r.updateQueue,t!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{m0(t,s)}catch(v){dt(r,r.return,v)}}break;case 27:s===null&&o&4&&Ry(r);case 26:case 5:Ca(t,r),s===null&&o&4&&Ny(r),o&512&&Fo(r,r.return);break;case 12:Ca(t,r);break;case 31:Ca(t,r),o&4&&ky(t,r);break;case 13:Ca(t,r),o&4&&My(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=KE.bind(null,r),mT(t,r))));break;case 22:if(o=r.memoizedState!==null||Aa,!o){s=s!==null&&s.memoizedState!==null||Qt,d=Aa;var m=Qt;Aa=o,(Qt=s)&&!m?ja(t,r,(r.subtreeFlags&8772)!==0):Ca(t,r),Aa=d,Qt=m}break;case 30:break;default:Ca(t,r)}}function Iy(t){var s=t.alternate;s!==null&&(t.alternate=null,Iy(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&qr(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Nt=null,kn=!1;function Ra(t,s,r){for(r=r.child;r!==null;)Dy(t,s,r),r=r.sibling}function Dy(t,s,r){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Bt,r)}catch{}switch(r.tag){case 26:Qt||na(r,s),Ra(t,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Qt||na(r,s);var o=Nt,d=kn;vi(r.type)&&(Nt=r.stateNode,kn=!1),Ra(t,s,r),Zo(r.stateNode),Nt=o,kn=d;break;case 5:Qt||na(r,s);case 6:if(o=Nt,d=kn,Nt=null,Ra(t,s,r),Nt=o,kn=d,Nt!==null)if(kn)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(r.stateNode)}catch(m){dt(r,s,m)}else try{Nt.removeChild(r.stateNode)}catch(m){dt(r,s,m)}break;case 18:Nt!==null&&(kn?(t=Nt,Tx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Nl(t)):Tx(Nt,r.stateNode));break;case 4:o=Nt,d=kn,Nt=r.stateNode.containerInfo,kn=!0,Ra(t,s,r),Nt=o,kn=d;break;case 0:case 11:case 14:case 15:di(2,r,s),Qt||di(4,r,s),Ra(t,s,r);break;case 1:Qt||(na(r,s),o=r.stateNode,typeof o.componentWillUnmount=="function"&&Sy(r,s,o)),Ra(t,s,r);break;case 21:Ra(t,s,r);break;case 22:Qt=(o=Qt)||r.memoizedState!==null,Ra(t,s,r),Qt=o;break;default:Ra(t,s,r)}}function ky(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Nl(t)}catch(r){dt(s,s.return,r)}}}function My(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Nl(t)}catch(r){dt(s,s.return,r)}}function zE(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Cy),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Cy),s;default:throw Error(i(435,t.tag))}}function Gu(t,s){var r=zE(t);s.forEach(function(o){if(!r.has(o)){r.add(o);var d=QE.bind(null,t,o);o.then(d,d)}})}function Mn(t,s){var r=s.deletions;if(r!==null)for(var o=0;o<r.length;o++){var d=r[o],m=t,v=s,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(vi(E.type)){Nt=E.stateNode,kn=!1;break e}break;case 5:Nt=E.stateNode,kn=!1;break e;case 3:case 4:Nt=E.stateNode.containerInfo,kn=!0;break e}E=E.return}if(Nt===null)throw Error(i(160));Dy(m,v,d),Nt=null,kn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Oy(s,t),s=s.sibling}var Cs=null;function Oy(t,s){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Mn(s,t),On(t),o&4&&(di(3,t,t.return),Ho(3,t),di(5,t,t.return));break;case 1:Mn(s,t),On(t),o&512&&(Qt||r===null||na(r,r.return)),o&64&&Aa&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var d=Cs;if(Mn(s,t),On(t),o&512&&(Qt||r===null||na(r,r.return)),o&4){var m=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":m=d.getElementsByTagName("title")[0],(!m||m[qs]||m[Ht]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(o),d.head.insertBefore(m,d.querySelector("head > title"))),yn(m,o,r),m[Ht]=t,Ft(m),o=m;break e;case"link":var v=Ox("link","href",d).get(o+(r.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(E,1);break t}}m=d.createElement(o),yn(m,o,r),d.head.appendChild(m);break;case"meta":if(v=Ox("meta","content",d).get(o+(r.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(E,1);break t}}m=d.createElement(o),yn(m,o,r),d.head.appendChild(m);break;default:throw Error(i(468,o))}m[Ht]=t,Ft(m),o=m}t.stateNode=o}else Vx(d,t.type,t.stateNode);else t.stateNode=Mx(d,o,t.memoizedProps);else m!==o?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,o===null?Vx(d,t.type,t.stateNode):Mx(d,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Uf(t,t.memoizedProps,r.memoizedProps)}break;case 27:Mn(s,t),On(t),o&512&&(Qt||r===null||na(r,r.return)),r!==null&&o&4&&Uf(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Mn(s,t),On(t),o&512&&(Qt||r===null||na(r,r.return)),t.flags&32){d=t.stateNode;try{Dn(d,"")}catch(ve){dt(t,t.return,ve)}}o&4&&t.stateNode!=null&&(d=t.memoizedProps,Uf(t,d,r!==null?r.memoizedProps:d)),o&1024&&(qf=!0);break;case 6:if(Mn(s,t),On(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(ve){dt(t,t.return,ve)}}break;case 3:if(oh=null,d=Cs,Cs=rh(s.containerInfo),Mn(s,t),Cs=d,On(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Nl(s.containerInfo)}catch(ve){dt(t,t.return,ve)}qf&&(qf=!1,Vy(t));break;case 4:o=Cs,Cs=rh(t.stateNode.containerInfo),Mn(s,t),On(t),Cs=o;break;case 12:Mn(s,t),On(t);break;case 31:Mn(s,t),On(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Gu(t,o)));break;case 13:Mn(s,t),On(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Ku=re()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Gu(t,o)));break;case 22:d=t.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,K=Aa,te=Qt;if(Aa=K||d,Qt=te||D,Mn(s,t),Qt=te,Aa=K,On(t),o&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(r===null||D||Aa||Qt||vr(t)),r=null,s=t;;){if(s.tag===5||s.tag===26){if(r===null){D=r=s;try{if(m=D.stateNode,d)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=D.stateNode;var ae=D.memoizedProps.style,X=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;E.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(ve){dt(D,D.return,ve)}}}else if(s.tag===6){if(r===null){D=s;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(ve){dt(D,D.return,ve)}}}else if(s.tag===18){if(r===null){D=s;try{var Z=D.stateNode;d?Sx(Z,!0):Sx(D.stateNode,!1)}catch(ve){dt(D,D.return,ve)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Gu(t,r))));break;case 19:Mn(s,t),On(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Gu(t,o)));break;case 30:break;case 21:break;default:Mn(s,t),On(t)}}function On(t){var s=t.flags;if(s&2){try{for(var r,o=t.return;o!==null;){if(Ay(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var d=r.stateNode,m=zf(t);$u(t,m,d);break;case 5:var v=r.stateNode;r.flags&32&&(Dn(v,""),r.flags&=-33);var E=zf(t);$u(t,E,v);break;case 3:case 4:var D=r.stateNode.containerInfo,K=zf(t);Bf(t,K,D);break;default:throw Error(i(161))}}catch(te){dt(t,t.return,te)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Vy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Vy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Ca(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)jy(t,s.alternate,s),s=s.sibling}function vr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:di(4,s,s.return),vr(s);break;case 1:na(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&Sy(s,s.return,r),vr(s);break;case 27:Zo(s.stateNode);case 26:case 5:na(s,s.return),vr(s);break;case 22:s.memoizedState===null&&vr(s);break;case 30:vr(s);break;default:vr(s)}t=t.sibling}}function ja(t,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,d=t,m=s,v=m.flags;switch(m.tag){case 0:case 11:case 15:ja(d,m,r),Ho(4,m);break;case 1:if(ja(d,m,r),o=m,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(K){dt(o,o.return,K)}if(o=m,d=o.updateQueue,d!==null){var E=o.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)f0(D[d],E)}catch(K){dt(o,o.return,K)}}r&&v&64&&Ty(m),Fo(m,m.return);break;case 27:Ry(m);case 26:case 5:ja(d,m,r),r&&o===null&&v&4&&Ny(m),Fo(m,m.return);break;case 12:ja(d,m,r);break;case 31:ja(d,m,r),r&&v&4&&ky(d,m);break;case 13:ja(d,m,r),r&&v&4&&My(d,m);break;case 22:m.memoizedState===null&&ja(d,m,r),Fo(m,m.return);break;case 30:break;default:ja(d,m,r)}s=s.sibling}}function Hf(t,s){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&jo(r))}function Ff(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&jo(t))}function js(t,s,r,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Py(t,s,r,o),s=s.sibling}function Py(t,s,r,o){var d=s.flags;switch(s.tag){case 0:case 11:case 15:js(t,s,r,o),d&2048&&Ho(9,s);break;case 1:js(t,s,r,o);break;case 3:js(t,s,r,o),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&jo(t)));break;case 12:if(d&2048){js(t,s,r,o),t=s.stateNode;try{var m=s.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){dt(s,s.return,D)}}else js(t,s,r,o);break;case 31:js(t,s,r,o);break;case 13:js(t,s,r,o);break;case 23:break;case 22:m=s.stateNode,v=s.alternate,s.memoizedState!==null?m._visibility&2?js(t,s,r,o):$o(t,s):m._visibility&2?js(t,s,r,o):(m._visibility|=2,pl(t,s,r,o,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Hf(v,s);break;case 24:js(t,s,r,o),d&2048&&Ff(s.alternate,s);break;default:js(t,s,r,o)}}function pl(t,s,r,o,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=t,v=s,E=r,D=o,K=v.flags;switch(v.tag){case 0:case 11:case 15:pl(m,v,E,D,d),Ho(8,v);break;case 23:break;case 22:var te=v.stateNode;v.memoizedState!==null?te._visibility&2?pl(m,v,E,D,d):$o(m,v):(te._visibility|=2,pl(m,v,E,D,d)),d&&K&2048&&Hf(v.alternate,v);break;case 24:pl(m,v,E,D,d),d&&K&2048&&Ff(v.alternate,v);break;default:pl(m,v,E,D,d)}s=s.sibling}}function $o(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=t,o=s,d=o.flags;switch(o.tag){case 22:$o(r,o),d&2048&&Hf(o.alternate,o);break;case 24:$o(r,o),d&2048&&Ff(o.alternate,o);break;default:$o(r,o)}s=s.sibling}}var Go=8192;function gl(t,s,r){if(t.subtreeFlags&Go)for(t=t.child;t!==null;)Ly(t,s,r),t=t.sibling}function Ly(t,s,r){switch(t.tag){case 26:gl(t,s,r),t.flags&Go&&t.memoizedState!==null&&NT(r,Cs,t.memoizedState,t.memoizedProps);break;case 5:gl(t,s,r);break;case 3:case 4:var o=Cs;Cs=rh(t.stateNode.containerInfo),gl(t,s,r),Cs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Go,Go=16777216,gl(t,s,r),Go=o):gl(t,s,r));break;default:gl(t,s,r)}}function Uy(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Yo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var o=s[r];on=o,By(o,t)}Uy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zy(t),t=t.sibling}function zy(t){switch(t.tag){case 0:case 11:case 15:Yo(t),t.flags&2048&&di(9,t,t.return);break;case 3:Yo(t);break;case 12:Yo(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Yu(t)):Yo(t);break;default:Yo(t)}}function Yu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var o=s[r];on=o,By(o,t)}Uy(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:di(8,s,s.return),Yu(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Yu(s));break;default:Yu(s)}t=t.sibling}}function By(t,s){for(;on!==null;){var r=on;switch(r.tag){case 0:case 11:case 15:di(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:jo(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,on=o;else e:for(r=t;on!==null;){o=on;var d=o.sibling,m=o.return;if(Iy(o),o===r){on=null;break e}if(d!==null){d.return=m,on=d;break e}on=m}}}var BE={getCacheForType:function(t){var s=pn(Gt),r=s.data.get(t);return r===void 0&&(r=t(),s.data.set(t,r)),r},cacheSignal:function(){return pn(Gt).controller.signal}},qE=typeof WeakMap=="function"?WeakMap:Map,ot=0,xt=null,Ke=null,Xe=0,ht=0,Kn=null,fi=!1,yl=!1,$f=!1,Ia=0,Mt=0,mi=0,br=0,Gf=0,Qn=0,xl=0,Ko=null,Vn=null,Yf=!1,Ku=0,qy=0,Qu=1/0,Xu=null,pi=null,nn=0,gi=null,vl=null,Da=0,Kf=0,Qf=null,Hy=null,Qo=0,Xf=null;function Xn(){return(ot&2)!==0&&Xe!==0?Xe&-Xe:J.T!==null?nm():Wc()}function Fy(){if(Qn===0)if((Xe&536870912)===0||tt){var t=ma;ma<<=1,(ma&3932160)===0&&(ma=262144),Qn=t}else Qn=536870912;return t=Gn.current,t!==null&&(t.flags|=32),Qn}function Pn(t,s,r){(t===xt&&(ht===2||ht===9)||t.cancelPendingCommit!==null)&&(bl(t,0),yi(t,Xe,Qn,!1)),Ki(t,r),((ot&2)===0||t!==xt)&&(t===xt&&((ot&2)===0&&(br|=r),Mt===4&&yi(t,Xe,Qn,!1)),sa(t))}function $y(t,s,r){if((ot&6)!==0)throw Error(i(327));var o=!r&&(s&127)===0&&(s&t.expiredLanes)===0||bs(t,s),d=o?$E(t,s):Jf(t,s,!0),m=o;do{if(d===0){yl&&!o&&yi(t,s,0,!1);break}else{if(r=t.current.alternate,m&&!HE(r)){d=Jf(t,s,!1),m=!1;continue}if(d===2){if(m=s,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var E=t;d=Ko;var D=E.current.memoizedState.isDehydrated;if(D&&(bl(E,v).flags|=256),v=Jf(E,v,!1),v!==2){if($f&&!D){E.errorRecoveryDisabledLanes|=m,br|=m,d=4;break e}m=Vn,Vn=d,m!==null&&(Vn===null?Vn=m:Vn.push.apply(Vn,m))}d=v}if(m=!1,d!==2)continue}}if(d===1){bl(t,0),yi(t,s,0,!0);break}e:{switch(o=t,m=d,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:yi(o,s,Qn,!fi);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=Ku+300-re(),10<d)){if(yi(o,s,Qn,!fi),Us(o,0,!0)!==0)break e;Da=s,o.timeoutHandle=wx(Gy.bind(null,o,r,Vn,Xu,Yf,s,Qn,br,xl,fi,m,"Throttled",-0,0),d);break e}Gy(o,r,Vn,Xu,Yf,s,Qn,br,xl,fi,m,null,-0,0)}}break}while(!0);sa(t)}function Gy(t,s,r,o,d,m,v,E,D,K,te,ae,X,Z){if(t.timeoutHandle=-1,ae=s.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Es},Ly(s,m,ae);var ve=(m&62914560)===m?Ku-re():(m&4194048)===m?qy-re():0;if(ve=AT(ae,ve),ve!==null){Da=m,t.cancelPendingCommit=ve(ex.bind(null,t,s,m,r,o,d,v,E,D,te,ae,null,X,Z)),yi(t,m,v,!K);return}}ex(t,s,m,r,o,d,v,E,D)}function HE(t){for(var s=t;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var d=r[o],m=d.getSnapshot;d=d.value;try{if(!Fn(m(),d))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yi(t,s,r,o){s&=~Gf,s&=~br,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var d=s;0<d;){var m=31-Rt(d),v=1<<m;o[m]=-1,d&=~v}r!==0&&Qi(t,r,s)}function Wu(){return(ot&6)===0?(Xo(0),!1):!0}function Wf(){if(Ke!==null){if(ht===0)var t=Ke.return;else t=Ke,_a=hr=null,ff(t),ul=null,Do=0,t=Ke;for(;t!==null;)Ey(t.alternate,t),t=t.return;Ke=null}}function bl(t,s){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,cT(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Da=0,Wf(),xt=t,Ke=r=va(t.current,null),Xe=s,ht=0,Kn=null,fi=!1,yl=bs(t,s),$f=!1,xl=Qn=Gf=br=mi=Mt=0,Vn=Ko=null,Yf=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var d=31-Rt(o),m=1<<d;s|=t[d],o&=~m}return Ia=s,xu(),r}function Yy(t,s){ze=null,J.H=zo,s===cl||s===Nu?(s=c0(),ht=3):s===ef?(s=c0(),ht=4):ht=s===Cf?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Kn=s,Ke===null&&(Mt=1,zu(t,os(s,t.current)))}function Ky(){var t=Gn.current;return t===null?!0:(Xe&4194048)===Xe?ds===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?t===ds:!1}function Qy(){var t=J.H;return J.H=zo,t===null?zo:t}function Xy(){var t=J.A;return J.A=BE,t}function Ju(){Mt=4,fi||(Xe&4194048)!==Xe&&Gn.current!==null||(yl=!0),(mi&134217727)===0&&(br&134217727)===0||xt===null||yi(xt,Xe,Qn,!1)}function Jf(t,s,r){var o=ot;ot|=2;var d=Qy(),m=Xy();(xt!==t||Xe!==s)&&(Xu=null,bl(t,s)),s=!1;var v=Mt;e:do try{if(ht!==0&&Ke!==null){var E=Ke,D=Kn;switch(ht){case 8:Wf(),v=6;break e;case 3:case 2:case 9:case 6:Gn.current===null&&(s=!0);var K=ht;if(ht=0,Kn=null,_l(t,E,D,K),r&&yl){v=0;break e}break;default:K=ht,ht=0,Kn=null,_l(t,E,D,K)}}FE(),v=Mt;break}catch(te){Yy(t,te)}while(!0);return s&&t.shellSuspendCounter++,_a=hr=null,ot=o,J.H=d,J.A=m,Ke===null&&(xt=null,Xe=0,xu()),v}function FE(){for(;Ke!==null;)Wy(Ke)}function $E(t,s){var r=ot;ot|=2;var o=Qy(),d=Xy();xt!==t||Xe!==s?(Xu=null,Qu=re()+500,bl(t,s)):yl=bs(t,s);e:do try{if(ht!==0&&Ke!==null){s=Ke;var m=Kn;t:switch(ht){case 1:ht=0,Kn=null,_l(t,s,m,1);break;case 2:case 9:if(l0(m)){ht=0,Kn=null,Jy(s);break}s=function(){ht!==2&&ht!==9||xt!==t||(ht=7),sa(t)},m.then(s,s);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:l0(m)?(ht=0,Kn=null,Jy(s)):(ht=0,Kn=null,_l(t,s,m,7));break;case 5:var v=null;switch(Ke.tag){case 26:v=Ke.memoizedState;case 5:case 27:var E=Ke;if(v?Px(v):E.stateNode.complete){ht=0,Kn=null;var D=E.sibling;if(D!==null)Ke=D;else{var K=E.return;K!==null?(Ke=K,Zu(K)):Ke=null}break t}}ht=0,Kn=null,_l(t,s,m,5);break;case 6:ht=0,Kn=null,_l(t,s,m,6);break;case 8:Wf(),Mt=6;break e;default:throw Error(i(462))}}GE();break}catch(te){Yy(t,te)}while(!0);return _a=hr=null,J.H=o,J.A=d,ot=r,Ke!==null?0:(xt=null,Xe=0,xu(),Mt)}function GE(){for(;Ke!==null&&!B();)Wy(Ke)}function Wy(t){var s=_y(t.alternate,t,Ia);t.memoizedProps=t.pendingProps,s===null?Zu(t):Ke=s}function Jy(t){var s=t,r=s.alternate;switch(s.tag){case 15:case 0:s=py(r,s,s.pendingProps,s.type,void 0,Xe);break;case 11:s=py(r,s,s.pendingProps,s.type.render,s.ref,Xe);break;case 5:ff(s);default:Ey(r,s),s=Ke=Xg(s,Ia),s=_y(r,s,Ia)}t.memoizedProps=t.pendingProps,s===null?Zu(t):Ke=s}function _l(t,s,r,o){_a=hr=null,ff(s),ul=null,Do=0;var d=s.return;try{if(ME(t,d,s,r,Xe)){Mt=1,zu(t,os(r,t.current)),Ke=null;return}}catch(m){if(d!==null)throw Ke=d,m;Mt=1,zu(t,os(r,t.current)),Ke=null;return}s.flags&32768?(tt||o===1?t=!0:yl||(Xe&536870912)!==0?t=!1:(fi=t=!0,(o===2||o===9||o===3||o===6)&&(o=Gn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Zy(s,t)):Zu(s)}function Zu(t){var s=t;do{if((s.flags&32768)!==0){Zy(s,fi);return}t=s.return;var r=PE(s.alternate,s,Ia);if(r!==null){Ke=r;return}if(s=s.sibling,s!==null){Ke=s;return}Ke=s=t}while(s!==null);Mt===0&&(Mt=5)}function Zy(t,s){do{var r=LE(t.alternate,t);if(r!==null){r.flags&=32767,Ke=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(t=t.sibling,t!==null)){Ke=t;return}Ke=t=r}while(t!==null);Mt=6,Ke=null}function ex(t,s,r,o,d,m,v,E,D){t.cancelPendingCommit=null;do eh();while(nn!==0);if((ot&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Ud,jd(t,r,m,v,E,D),t===xt&&(Ke=xt=null,Xe=0),vl=s,gi=t,Da=r,Kf=m,Qf=d,Hy=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,XE(Ee,function(){return ix(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=J.T,J.T=null,d=he.p,he.p=2,v=ot,ot|=4;try{UE(t,s,r)}finally{ot=v,he.p=d,J.T=o}}nn=1,tx(),nx(),sx()}}function tx(){if(nn===1){nn=0;var t=gi,s=vl,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=J.T,J.T=null;var o=he.p;he.p=2;var d=ot;ot|=4;try{Oy(s,t);var m=um,v=Bg(t.containerInfo),E=m.focusedElem,D=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&zg(E.ownerDocument.documentElement,E)){if(D!==null&&Md(E)){var K=D.start,te=D.end;if(te===void 0&&(te=K),"selectionStart"in E)E.selectionStart=K,E.selectionEnd=Math.min(te,E.value.length);else{var ae=E.ownerDocument||document,X=ae&&ae.defaultView||window;if(X.getSelection){var Z=X.getSelection(),ve=E.textContent.length,Re=Math.min(D.start,ve),gt=D.end===void 0?Re:Math.min(D.end,ve);!Z.extend&&Re>gt&&(v=gt,gt=Re,Re=v);var F=Ug(E,Re),V=Ug(E,gt);if(F&&V&&(Z.rangeCount!==1||Z.anchorNode!==F.node||Z.anchorOffset!==F.offset||Z.focusNode!==V.node||Z.focusOffset!==V.offset)){var G=ae.createRange();G.setStart(F.node,F.offset),Z.removeAllRanges(),Re>gt?(Z.addRange(G),Z.extend(V.node,V.offset)):(G.setEnd(V.node,V.offset),Z.addRange(G))}}}}for(ae=[],Z=E;Z=Z.parentNode;)Z.nodeType===1&&ae.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ae.length;E++){var ne=ae[E];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}dh=!!cm,um=cm=null}finally{ot=d,he.p=o,J.T=r}}t.current=s,nn=2}}function nx(){if(nn===2){nn=0;var t=gi,s=vl,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=J.T,J.T=null;var o=he.p;he.p=2;var d=ot;ot|=4;try{jy(t,s.alternate,s)}finally{ot=d,he.p=o,J.T=r}}nn=3}}function sx(){if(nn===4||nn===3){nn=0,H();var t=gi,s=vl,r=Da,o=Hy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?nn=5:(nn=0,vl=gi=null,ax(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(pi=null),pa(r),s=s.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Bt,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=J.T,d=he.p,he.p=2,J.T=null;try{for(var m=t.onRecoverableError,v=0;v<o.length;v++){var E=o[v];m(E.value,{componentStack:E.stack})}}finally{J.T=s,he.p=d}}(Da&3)!==0&&eh(),sa(t),d=t.pendingLanes,(r&261930)!==0&&(d&42)!==0?t===Xf?Qo++:(Qo=0,Xf=t):Qo=0,Xo(0)}}function ax(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,jo(s)))}function eh(){return tx(),nx(),sx(),ix()}function ix(){if(nn!==5)return!1;var t=gi,s=Kf;Kf=0;var r=pa(Da),o=J.T,d=he.p;try{he.p=32>r?32:r,J.T=null,r=Qf,Qf=null;var m=gi,v=Da;if(nn=0,vl=gi=null,Da=0,(ot&6)!==0)throw Error(i(331));var E=ot;if(ot|=4,zy(m.current),Py(m,m.current,v,r),ot=E,Xo(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Bt,m)}catch{}return!0}finally{he.p=d,J.T=o,ax(t,s)}}function rx(t,s,r){s=os(r,s),s=Rf(t.stateNode,s,2),t=ci(t,s,2),t!==null&&(Ki(t,2),sa(t))}function dt(t,s,r){if(t.tag===3)rx(t,t,r);else for(;s!==null;){if(s.tag===3){rx(s,t,r);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(pi===null||!pi.has(o))){t=os(r,t),r=ly(2),o=ci(s,r,2),o!==null&&(oy(r,o,s,t),Ki(o,2),sa(o));break}}s=s.return}}function Zf(t,s,r){var o=t.pingCache;if(o===null){o=t.pingCache=new qE;var d=new Set;o.set(s,d)}else d=o.get(s),d===void 0&&(d=new Set,o.set(s,d));d.has(r)||($f=!0,d.add(r),t=YE.bind(null,t,s,r),s.then(t,t))}function YE(t,s,r){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,xt===t&&(Xe&r)===r&&(Mt===4||Mt===3&&(Xe&62914560)===Xe&&300>re()-Ku?(ot&2)===0&&bl(t,0):Gf|=r,xl===Xe&&(xl=0)),sa(t)}function lx(t,s){s===0&&(s=Xc()),t=or(t,s),t!==null&&(Ki(t,s),sa(t))}function KE(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),lx(t,r)}function QE(t,s){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,d=t.memoizedState;d!==null&&(r=d.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(s),lx(t,r)}function XE(t,s){return Ce(t,s)}var th=null,wl=null,em=!1,nh=!1,tm=!1,xi=0;function sa(t){t!==wl&&t.next===null&&(wl===null?th=wl=t:wl=wl.next=t),nh=!0,em||(em=!0,JE())}function Xo(t,s){if(!tm&&nh){tm=!0;do for(var r=!1,o=th;o!==null;){if(t!==0){var d=o.pendingLanes;if(d===0)var m=0;else{var v=o.suspendedLanes,E=o.pingedLanes;m=(1<<31-Rt(42|t)+1)-1,m&=d&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,hx(o,m))}else m=Xe,m=Us(o,o===xt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||bs(o,m)||(r=!0,hx(o,m));o=o.next}while(r);tm=!1}}function WE(){ox()}function ox(){nh=em=!1;var t=0;xi!==0&&oT()&&(t=xi);for(var s=re(),r=null,o=th;o!==null;){var d=o.next,m=cx(o,s);m===0?(o.next=null,r===null?th=d:r.next=d,d===null&&(wl=r)):(r=o,(t!==0||(m&3)!==0)&&(nh=!0)),o=d}nn!==0&&nn!==5||Xo(t),xi!==0&&(xi=0)}function cx(t,s){for(var r=t.suspendedLanes,o=t.pingedLanes,d=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-Rt(m),E=1<<v,D=d[v];D===-1?((E&r)===0||(E&o)!==0)&&(d[v]=Cd(E,s)):D<=s&&(t.expiredLanes|=E),m&=~E}if(s=xt,r=Xe,r=Us(t,t===s?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===s&&(ht===2||ht===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&vt(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||bs(t,r)){if(s=r&-r,s===t.callbackPriority)return s;switch(o!==null&&vt(o),pa(r)){case 2:case 8:r=$e;break;case 32:r=Ee;break;case 268435456:r=Tt;break;default:r=Ee}return o=ux.bind(null,t),r=Ce(r,o),t.callbackPriority=s,t.callbackNode=r,s}return o!==null&&o!==null&&vt(o),t.callbackPriority=2,t.callbackNode=null,2}function ux(t,s){if(nn!==0&&nn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(eh()&&t.callbackNode!==r)return null;var o=Xe;return o=Us(t,t===xt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:($y(t,o,s),cx(t,re()),t.callbackNode!=null&&t.callbackNode===r?ux.bind(null,t):null)}function hx(t,s){if(eh())return null;$y(t,s,!0)}function JE(){uT(function(){(ot&6)!==0?Ce(ke,WE):ox()})}function nm(){if(xi===0){var t=ll;t===0&&(t=ns,ns<<=1,(ns&261888)===0&&(ns=256)),xi=t}return xi}function dx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Gr(""+t)}function fx(t,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,t.id&&r.setAttribute("form",t.id),s.parentNode.insertBefore(r,s),t=new FormData(t),r.parentNode.removeChild(r),t}function ZE(t,s,r,o,d){if(s==="submit"&&r&&r.stateNode===d){var m=dx((d[rn]||null).action),v=o.submitter;v&&(s=(s=v[rn]||null)?dx(s.formAction):v.getAttribute("formAction"),s!==null&&(m=s,v=null));var E=new Xs("action","action",null,o,d);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(xi!==0){var D=v?fx(d,v):new FormData(d);wf(r,{pending:!0,data:D,method:d.method,action:m},null,D)}}else typeof m=="function"&&(E.preventDefault(),D=v?fx(d,v):new FormData(d),wf(r,{pending:!0,data:D,method:d.method,action:m},m,D))},currentTarget:d}]})}}for(var sm=0;sm<Ld.length;sm++){var am=Ld[sm],eT=am.toLowerCase(),tT=am[0].toUpperCase()+am.slice(1);Rs(eT,"on"+tT)}Rs(Fg,"onAnimationEnd"),Rs($g,"onAnimationIteration"),Rs(Gg,"onAnimationStart"),Rs("dblclick","onDoubleClick"),Rs("focusin","onFocus"),Rs("focusout","onBlur"),Rs(yE,"onTransitionRun"),Rs(xE,"onTransitionStart"),Rs(vE,"onTransitionCancel"),Rs(Yg,"onTransitionEnd"),Gs("onMouseEnter",["mouseout","mouseover"]),Gs("onMouseLeave",["mouseout","mouseover"]),Gs("onPointerEnter",["pointerout","pointerover"]),Gs("onPointerLeave",["pointerout","pointerover"]),$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$s("onBeforeInput",["compositionend","keypress","textInput","paste"]),$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wo));function mx(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],d=o.event;o=o.listeners;e:{var m=void 0;if(s)for(var v=o.length-1;0<=v;v--){var E=o[v],D=E.instance,K=E.currentTarget;if(E=E.listener,D!==m&&d.isPropagationStopped())break e;m=E,d.currentTarget=K;try{m(d)}catch(te){yu(te)}d.currentTarget=null,m=D}else for(v=0;v<o.length;v++){if(E=o[v],D=E.instance,K=E.currentTarget,E=E.listener,D!==m&&d.isPropagationStopped())break e;m=E,d.currentTarget=K;try{m(d)}catch(te){yu(te)}d.currentTarget=null,m=D}}}}function Qe(t,s){var r=s[Br];r===void 0&&(r=s[Br]=new Set);var o=t+"__bubble";r.has(o)||(px(s,t,2,!1),r.add(o))}function im(t,s,r){var o=0;s&&(o|=4),px(r,t,o,s)}var sh="_reactListening"+Math.random().toString(36).slice(2);function rm(t){if(!t[sh]){t[sh]=!0,oo.forEach(function(r){r!=="selectionchange"&&(nT.has(r)||im(r,!1,t),im(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[sh]||(s[sh]=!0,im("selectionchange",!1,s))}}function px(t,s,r,o){switch(Fx(s)){case 2:var d=jT;break;case 8:d=IT;break;default:d=_m}r=d.bind(null,s,r,t),d=void 0,!er||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),o?d!==void 0?t.addEventListener(s,r,{capture:!0,passive:d}):t.addEventListener(s,r,!0):d!==void 0?t.addEventListener(s,r,{passive:d}):t.addEventListener(s,r,!1)}function lm(t,s,r,o,d){var m=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===d)break;if(v===4)for(v=o.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;E!==null;){if(v=Hs(E),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){o=m=v;continue e}E=E.parentNode}}o=o.return}Za(function(){var K=m,te=as(r),ae=[];e:{var X=Kg.get(t);if(X!==void 0){var Z=Xs,ve=t;switch(t){case"keypress":if(nr(r)===0)break e;case"keydown":case"keyup":Z=mu;break;case"focusin":ve="focus",Z=ar;break;case"focusout":ve="blur",Z=ar;break;case"beforeblur":case"afterblur":Z=ar;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=x;break;case Fg:case $g:case Gg:Z=lu;break;case Yg:Z=T;break;case"scroll":case"scrollend":Z=_o;break;case"wheel":Z=W;break;case"copy":case"cut":case"paste":Z=ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=xa;break;case"toggle":case"beforetoggle":Z=Ue}var Re=(s&4)!==0,gt=!Re&&(t==="scroll"||t==="scrollend"),F=Re?X!==null?X+"Capture":null:X;Re=[];for(var V=K,G;V!==null;){var ne=V;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||F===null||(ne=Ts(V,F),ne!=null&&Re.push(Jo(V,ne,G))),gt)break;V=V.return}0<Re.length&&(X=new Z(X,ve,null,r,te),ae.push({event:X,listeners:Re}))}}if((s&7)===0){e:{if(X=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",X&&r!==xo&&(ve=r.relatedTarget||r.fromElement)&&(Hs(ve)||ve[Bs]))break e;if((Z||X)&&(X=te.window===te?te:(X=te.ownerDocument)?X.defaultView||X.parentWindow:window,Z?(ve=r.relatedTarget||r.toElement,Z=K,ve=ve?Hs(ve):null,ve!==null&&(gt=c(ve),Re=ve.tag,ve!==gt||Re!==5&&Re!==27&&Re!==6)&&(ve=null)):(Z=null,ve=K),Z!==ve)){if(Re=wo,ne="onMouseLeave",F="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(Re=xa,ne="onPointerLeave",F="onPointerEnter",V="pointer"),gt=Z==null?X:qn(Z),G=ve==null?X:qn(ve),X=new Re(ne,V+"leave",Z,r,te),X.target=gt,X.relatedTarget=G,ne=null,Hs(te)===K&&(Re=new Re(F,V+"enter",ve,r,te),Re.target=G,Re.relatedTarget=gt,ne=Re),gt=ne,Z&&ve)t:{for(Re=sT,F=Z,V=ve,G=0,ne=F;ne;ne=Re(ne))G++;ne=0;for(var Te=V;Te;Te=Re(Te))ne++;for(;0<G-ne;)F=Re(F),G--;for(;0<ne-G;)V=Re(V),ne--;for(;G--;){if(F===V||V!==null&&F===V.alternate){Re=F;break t}F=Re(F),V=Re(V)}Re=null}else Re=null;Z!==null&&gx(ae,X,Z,Re,!1),ve!==null&&gt!==null&&gx(ae,gt,ve,Re,!0)}}e:{if(X=K?qn(K):window,Z=X.nodeName&&X.nodeName.toLowerCase(),Z==="select"||Z==="input"&&X.type==="file")var at=kg;else if(Ig(X))if(Mg)at=mE;else{at=dE;var _e=hE}else Z=X.nodeName,!Z||Z.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?K&&$r(K.elementType)&&(at=kg):at=fE;if(at&&(at=at(t,K))){Dg(ae,at,r,te);break e}_e&&_e(t,X,K),t==="focusout"&&K&&X.type==="number"&&K.memoizedProps.value!=null&&po(X,"number",X.value)}switch(_e=K?qn(K):window,t){case"focusin":(Ig(_e)||_e.contentEditable==="true")&&(Zr=_e,Od=K,Ao=null);break;case"focusout":Ao=Od=Zr=null;break;case"mousedown":Vd=!0;break;case"contextmenu":case"mouseup":case"dragend":Vd=!1,qg(ae,r,te);break;case"selectionchange":if(gE)break;case"keydown":case"keyup":qg(ae,r,te)}var qe;if(lt)e:{switch(t){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Jr?ir(t,r)&&(We="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(We="onCompositionStart");We&&(Zs&&r.locale!=="ko"&&(Jr||We!=="onCompositionStart"?We==="onCompositionEnd"&&Jr&&(qe=bo()):(Qs=te,vo="value"in Qs?Qs.value:Qs.textContent,Jr=!0)),_e=ah(K,We),0<_e.length&&(We=new Js(We,t,null,r,te),ae.push({event:We,listeners:_e}),qe?We.data=qe:(qe=Wr(r),qe!==null&&(We.data=qe)))),(qe=rs?lE(t,r):oE(t,r))&&(We=ah(K,"onBeforeInput"),0<We.length&&(_e=new Js("onBeforeInput","beforeinput",null,r,te),ae.push({event:_e,listeners:We}),_e.data=qe)),ZE(ae,t,K,r,te)}mx(ae,s)})}function Jo(t,s,r){return{instance:t,listener:s,currentTarget:r}}function ah(t,s){for(var r=s+"Capture",o=[];t!==null;){var d=t,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=Ts(t,r),d!=null&&o.unshift(Jo(t,d,m)),d=Ts(t,s),d!=null&&o.push(Jo(t,d,m))),t.tag===3)return o;t=t.return}return[]}function sT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function gx(t,s,r,o,d){for(var m=s._reactName,v=[];r!==null&&r!==o;){var E=r,D=E.alternate,K=E.stateNode;if(E=E.tag,D!==null&&D===o)break;E!==5&&E!==26&&E!==27||K===null||(D=K,d?(K=Ts(r,m),K!=null&&v.unshift(Jo(r,K,D))):d||(K=Ts(r,m),K!=null&&v.push(Jo(r,K,D)))),r=r.return}v.length!==0&&t.push({event:s,listeners:v})}var aT=/\r\n?/g,iT=/\u0000|\uFFFD/g;function yx(t){return(typeof t=="string"?t:""+t).replace(aT,`
`).replace(iT,"")}function xx(t,s){return s=yx(s),yx(t)===s}function pt(t,s,r,o,d,m){switch(r){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||Dn(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&Dn(t,""+o);break;case"className":Hn(t,"class",o);break;case"tabIndex":Hn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(t,r,o);break;case"style":yo(t,o,m);break;case"data":if(s!=="object"){Hn(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Gr(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(s!=="input"&&pt(t,s,"name",d.name,d,null),pt(t,s,"formEncType",d.formEncType,d,null),pt(t,s,"formMethod",d.formMethod,d,null),pt(t,s,"formTarget",d.formTarget,d,null)):(pt(t,s,"encType",d.encType,d,null),pt(t,s,"method",d.method,d,null),pt(t,s,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=Gr(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Es);break;case"onScroll":o!=null&&Qe("scroll",t);break;case"onScrollEnd":o!=null&&Qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=Gr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":Qe("beforetoggle",t),Qe("toggle",t),Hr(t,"popover",o);break;case"xlinkActuate":$t(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":$t(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":$t(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":$t(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":$t(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":$t(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":$t(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":$t(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":$t(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Hr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=au.get(r)||r,Hr(t,r,o))}}function om(t,s,r,o,d,m){switch(r){case"style":yo(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(d.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof o=="string"?Dn(t,o):(typeof o=="number"||typeof o=="bigint")&&Dn(t,""+o);break;case"onScroll":o!=null&&Qe("scroll",t);break;case"onScrollEnd":o!=null&&Qe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Es);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!co.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(d=r.endsWith("Capture"),s=r.slice(2,d?r.length-7:void 0),m=t[rn]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(s,m,d),typeof o=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(s,o,d);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):Hr(t,r,o)}}}function yn(t,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qe("error",t),Qe("load",t);var o=!1,d=!1,m;for(m in r)if(r.hasOwnProperty(m)){var v=r[m];if(v!=null)switch(m){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:pt(t,s,m,v,r,null)}}d&&pt(t,s,"srcSet",r.srcSet,r,null),o&&pt(t,s,"src",r.src,r,null);return;case"input":Qe("invalid",t);var E=m=v=d=null,D=null,K=null;for(o in r)if(r.hasOwnProperty(o)){var te=r[o];if(te!=null)switch(o){case"name":d=te;break;case"type":v=te;break;case"checked":D=te;break;case"defaultChecked":K=te;break;case"value":m=te;break;case"defaultValue":E=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:pt(t,s,o,te,r,null)}}tu(t,m,E,D,K,v,d,!1);return;case"select":Qe("invalid",t),o=v=m=null;for(d in r)if(r.hasOwnProperty(d)&&(E=r[d],E!=null))switch(d){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:pt(t,s,d,E,r,null)}s=m,r=v,t.multiple=!!o,s!=null?Qa(t,!!o,s,!1):r!=null&&Qa(t,!!o,r,!0);return;case"textarea":Qe("invalid",t),m=d=o=null;for(v in r)if(r.hasOwnProperty(v)&&(E=r[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":d=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:pt(t,s,v,E,r,null)}Xa(t,o,d,m);return;case"option":for(D in r)r.hasOwnProperty(D)&&(o=r[D],o!=null)&&(D==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":pt(t,s,D,o,r,null));return;case"dialog":Qe("beforetoggle",t),Qe("toggle",t),Qe("cancel",t),Qe("close",t);break;case"iframe":case"object":Qe("load",t);break;case"video":case"audio":for(o=0;o<Wo.length;o++)Qe(Wo[o],t);break;case"image":Qe("error",t),Qe("load",t);break;case"details":Qe("toggle",t);break;case"embed":case"source":case"link":Qe("error",t),Qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in r)if(r.hasOwnProperty(K)&&(o=r[K],o!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:pt(t,s,K,o,r,null)}return;default:if($r(s)){for(te in r)r.hasOwnProperty(te)&&(o=r[te],o!==void 0&&om(t,s,te,o,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(o=r[E],o!=null&&pt(t,s,E,o,r,null))}function rT(t,s,r,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,v=null,E=null,D=null,K=null,te=null;for(Z in r){var ae=r[Z];if(r.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":D=ae;default:o.hasOwnProperty(Z)||pt(t,s,Z,null,o,ae)}}for(var X in o){var Z=o[X];if(ae=r[X],o.hasOwnProperty(X)&&(Z!=null||ae!=null))switch(X){case"type":m=Z;break;case"name":d=Z;break;case"checked":K=Z;break;case"defaultChecked":te=Z;break;case"value":v=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Z!==ae&&pt(t,s,X,Z,o,ae)}}Fr(t,v,E,D,K,te,m,d);return;case"select":Z=v=E=X=null;for(m in r)if(D=r[m],r.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Z=D;default:o.hasOwnProperty(m)||pt(t,s,m,null,o,D)}for(d in o)if(m=o[d],D=r[d],o.hasOwnProperty(d)&&(m!=null||D!=null))switch(d){case"value":X=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==D&&pt(t,s,d,m,o,D)}s=E,r=v,o=Z,X!=null?Qa(t,!!r,X,!1):!!o!=!!r&&(s!=null?Qa(t,!!r,s,!0):Qa(t,!!r,r?[]:"",!1));return;case"textarea":Z=X=null;for(E in r)if(d=r[E],r.hasOwnProperty(E)&&d!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:pt(t,s,E,null,o,d)}for(v in o)if(d=o[v],m=r[v],o.hasOwnProperty(v)&&(d!=null||m!=null))switch(v){case"value":X=d;break;case"defaultValue":Z=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==m&&pt(t,s,v,d,o,m)}nu(t,X,Z);return;case"option":for(var ve in r)X=r[ve],r.hasOwnProperty(ve)&&X!=null&&!o.hasOwnProperty(ve)&&(ve==="selected"?t.selected=!1:pt(t,s,ve,null,o,X));for(D in o)X=o[D],Z=r[D],o.hasOwnProperty(D)&&X!==Z&&(X!=null||Z!=null)&&(D==="selected"?t.selected=X&&typeof X!="function"&&typeof X!="symbol":pt(t,s,D,X,o,Z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in r)X=r[Re],r.hasOwnProperty(Re)&&X!=null&&!o.hasOwnProperty(Re)&&pt(t,s,Re,null,o,X);for(K in o)if(X=o[K],Z=r[K],o.hasOwnProperty(K)&&X!==Z&&(X!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:pt(t,s,K,X,o,Z)}return;default:if($r(s)){for(var gt in r)X=r[gt],r.hasOwnProperty(gt)&&X!==void 0&&!o.hasOwnProperty(gt)&&om(t,s,gt,void 0,o,X);for(te in o)X=o[te],Z=r[te],!o.hasOwnProperty(te)||X===Z||X===void 0&&Z===void 0||om(t,s,te,X,o,Z);return}}for(var F in r)X=r[F],r.hasOwnProperty(F)&&X!=null&&!o.hasOwnProperty(F)&&pt(t,s,F,null,o,X);for(ae in o)X=o[ae],Z=r[ae],!o.hasOwnProperty(ae)||X===Z||X==null&&Z==null||pt(t,s,ae,X,o,Z)}function vx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lT(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var d=r[o],m=d.transferSize,v=d.initiatorType,E=d.duration;if(m&&E&&vx(v)){for(v=0,E=d.responseEnd,o+=1;o<r.length;o++){var D=r[o],K=D.startTime;if(K>E)break;var te=D.transferSize,ae=D.initiatorType;te&&vx(ae)&&(D=D.responseEnd,v+=te*(D<E?1:(E-K)/(D-K)))}if(--o,s+=8*(m+v)/(d.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var cm=null,um=null;function ih(t){return t.nodeType===9?t:t.ownerDocument}function bx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _x(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function hm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var dm=null;function oT(){var t=window.event;return t&&t.type==="popstate"?t===dm?!1:(dm=t,!0):(dm=null,!1)}var wx=typeof setTimeout=="function"?setTimeout:void 0,cT=typeof clearTimeout=="function"?clearTimeout:void 0,Ex=typeof Promise=="function"?Promise:void 0,uT=typeof queueMicrotask=="function"?queueMicrotask:typeof Ex<"u"?function(t){return Ex.resolve(null).then(t).catch(hT)}:wx;function hT(t){setTimeout(function(){throw t})}function vi(t){return t==="head"}function Tx(t,s){var r=s,o=0;do{var d=r.nextSibling;if(t.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(d),Nl(s);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Zo(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Zo(r);for(var m=r.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[qs]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=v}}else r==="body"&&Zo(t.ownerDocument.body);r=d}while(r);Nl(s)}function Sx(t,s){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function fm(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":fm(r),qr(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function dT(t,s,r,o){for(;t.nodeType===1;){var d=r;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[qs])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=fs(t.nextSibling),t===null)break}return null}function fT(t,s,r){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=fs(t.nextSibling),t===null))return null;return t}function Nx(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=fs(t.nextSibling),t===null))return null;return t}function mm(t){return t.data==="$?"||t.data==="$~"}function pm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function mT(t,s){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||r.readyState!=="loading")s();else{var o=function(){s(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function fs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var gm=null;function Ax(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(s===0)return fs(t.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}t=t.nextSibling}return null}function Rx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return t;s--}else r!=="/$"&&r!=="/&"||s++}t=t.previousSibling}return null}function Cx(t,s,r){switch(s=ih(r),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Zo(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);qr(t)}var ms=new Map,jx=new Set;function rh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ka=he.d;he.d={f:pT,r:gT,D:yT,C:xT,L:vT,m:bT,X:wT,S:_T,M:ET};function pT(){var t=ka.f(),s=Wu();return t||s}function gT(t){var s=ss(t);s!==null&&s.tag===5&&s.type==="form"?Y0(s):ka.r(t)}var El=typeof document>"u"?null:document;function Ix(t,s,r){var o=El;if(o&&typeof s=="string"&&s){var d=In(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof r=="string"&&(d+='[crossorigin="'+r+'"]'),jx.has(d)||(jx.add(d),t={rel:t,crossOrigin:r,href:s},o.querySelector(d)===null&&(s=o.createElement("link"),yn(s,"link",t),Ft(s),o.head.appendChild(s)))}}function yT(t){ka.D(t),Ix("dns-prefetch",t,null)}function xT(t,s){ka.C(t,s),Ix("preconnect",t,s)}function vT(t,s,r){ka.L(t,s,r);var o=El;if(o&&t&&s){var d='link[rel="preload"][as="'+In(s)+'"]';s==="image"&&r&&r.imageSrcSet?(d+='[imagesrcset="'+In(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(d+='[imagesizes="'+In(r.imageSizes)+'"]')):d+='[href="'+In(t)+'"]';var m=d;switch(s){case"style":m=Tl(t);break;case"script":m=Sl(t)}ms.has(m)||(t=w({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:t,as:s},r),ms.set(m,t),o.querySelector(d)!==null||s==="style"&&o.querySelector(ec(m))||s==="script"&&o.querySelector(tc(m))||(s=o.createElement("link"),yn(s,"link",t),Ft(s),o.head.appendChild(s)))}}function bT(t,s){ka.m(t,s);var r=El;if(r&&t){var o=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+In(o)+'"][href="'+In(t)+'"]',m=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Sl(t)}if(!ms.has(m)&&(t=w({rel:"modulepreload",href:t},s),ms.set(m,t),r.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(tc(m)))return}o=r.createElement("link"),yn(o,"link",t),Ft(o),r.head.appendChild(o)}}}function _T(t,s,r){ka.S(t,s,r);var o=El;if(o&&t){var d=Fs(o).hoistableStyles,m=Tl(t);s=s||"default";var v=d.get(m);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(ec(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":s},r),(r=ms.get(m))&&ym(t,r);var D=v=o.createElement("link");Ft(D),yn(D,"link",t),D._p=new Promise(function(K,te){D.onload=K,D.onerror=te}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,lh(v,s,o)}v={type:"stylesheet",instance:v,count:1,state:E},d.set(m,v)}}}function wT(t,s){ka.X(t,s);var r=El;if(r&&t){var o=Fs(r).hoistableScripts,d=Sl(t),m=o.get(d);m||(m=r.querySelector(tc(d)),m||(t=w({src:t,async:!0},s),(s=ms.get(d))&&xm(t,s),m=r.createElement("script"),Ft(m),yn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(d,m))}}function ET(t,s){ka.M(t,s);var r=El;if(r&&t){var o=Fs(r).hoistableScripts,d=Sl(t),m=o.get(d);m||(m=r.querySelector(tc(d)),m||(t=w({src:t,async:!0,type:"module"},s),(s=ms.get(d))&&xm(t,s),m=r.createElement("script"),Ft(m),yn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(d,m))}}function Dx(t,s,r,o){var d=(d=De.current)?rh(d):null;if(!d)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Tl(r.href),r=Fs(d).hoistableStyles,o=r.get(s),o||(o={type:"style",instance:null,count:0,state:null},r.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Tl(r.href);var m=Fs(d).hoistableStyles,v=m.get(t);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=d.querySelector(ec(t)))&&!m._p&&(v.instance=m,v.state.loading=5),ms.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},ms.set(t,r),m||TT(d,t,r,v.state))),s&&o===null)throw Error(i(528,""));return v}if(s&&o!==null)throw Error(i(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Sl(r),r=Fs(d).hoistableScripts,o=r.get(s),o||(o={type:"script",instance:null,count:0,state:null},r.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Tl(t){return'href="'+In(t)+'"'}function ec(t){return'link[rel="stylesheet"]['+t+"]"}function kx(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function TT(t,s,r,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),yn(s,"link",r),Ft(s),t.head.appendChild(s))}function Sl(t){return'[src="'+In(t)+'"]'}function tc(t){return"script[async]"+t}function Mx(t,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+In(r.href)+'"]');if(o)return s.instance=o,Ft(o),o;var d=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Ft(o),yn(o,"style",d),lh(o,r.precedence,t),s.instance=o;case"stylesheet":d=Tl(r.href);var m=t.querySelector(ec(d));if(m)return s.state.loading|=4,s.instance=m,Ft(m),m;o=kx(r),(d=ms.get(d))&&ym(o,d),m=(t.ownerDocument||t).createElement("link"),Ft(m);var v=m;return v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),yn(m,"link",o),s.state.loading|=4,lh(m,r.precedence,t),s.instance=m;case"script":return m=Sl(r.src),(d=t.querySelector(tc(m)))?(s.instance=d,Ft(d),d):(o=r,(d=ms.get(m))&&(o=w({},r),xm(o,d)),t=t.ownerDocument||t,d=t.createElement("script"),Ft(d),yn(d,"link",o),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,lh(o,r.precedence,t));return s.instance}function lh(t,s,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,m=d,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===s)m=E;else if(m!==d)break}m?m.parentNode.insertBefore(t,m.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(t,s.firstChild))}function ym(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function xm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var oh=null;function Ox(t,s,r){if(oh===null){var o=new Map,d=oh=new Map;d.set(r,o)}else d=oh,o=d.get(r),o||(o=new Map,d.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),d=0;d<r.length;d++){var m=r[d];if(!(m[qs]||m[Ht]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(s)||"";v=t+v;var E=o.get(v);E?E.push(m):o.set(v,[m])}}return o}function Vx(t,s,r){t=t.ownerDocument||t,t.head.insertBefore(r,s==="title"?t.querySelector("head > title"):null)}function ST(t,s,r){if(r===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(t=s.disabled,typeof s.precedence=="string"&&t==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Px(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function NT(t,s,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=Tl(o.href),m=s.querySelector(ec(d));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=ch.bind(t),s.then(t,t)),r.state.loading|=4,r.instance=m,Ft(m);return}m=s.ownerDocument||s,o=kx(o),(d=ms.get(d))&&ym(o,d),m=m.createElement("link"),Ft(m);var v=m;v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),yn(m,"link",o),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=ch.bind(t),s.addEventListener("load",r),s.addEventListener("error",r))}}var vm=0;function AT(t,s){return t.stylesheets&&t.count===0&&hh(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&hh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+s);0<t.imgBytes&&vm===0&&(vm=62500*lT());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&hh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>vm?50:800)+s);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function ch(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var uh=null;function hh(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,uh=new Map,s.forEach(RT,t),uh=null,ch.call(t))}function RT(t,s){if(!(s.state.loading&4)){var r=uh.get(t);if(r)var o=r.get(null);else{r=new Map,uh.set(t,r);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var v=d[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),o=v)}o&&r.set(null,o)}d=s.instance,v=d.getAttribute("data-precedence"),m=r.get(v)||o,m===o&&r.set(null,d),r.set(v,d),this.count++,o=ch.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),m?m.parentNode.insertBefore(d,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var nc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function CT(t,s,r,o,d,m,v,E,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zs(0),this.hiddenUpdates=zs(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Lx(t,s,r,o,d,m,v,E,D,K,te,ae){return t=new CT(t,s,r,v,D,K,te,ae,E),s=1,m===!0&&(s|=24),m=$n(3,null,null,s),t.current=m,m.stateNode=t,s=Wd(),s.refCount++,t.pooledCache=s,s.refCount++,m.memoizedState={element:o,isDehydrated:r,cache:s},tf(m),t}function Ux(t){return t?(t=nl,t):nl}function zx(t,s,r,o,d,m){d=Ux(d),o.context===null?o.context=d:o.pendingContext=d,o=oi(s),o.payload={element:r},m=m===void 0?null:m,m!==null&&(o.callback=m),r=ci(t,o,s),r!==null&&(Pn(r,t,s),Mo(r,t,s))}function Bx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function bm(t,s){Bx(t,s),(t=t.alternate)&&Bx(t,s)}function qx(t){if(t.tag===13||t.tag===31){var s=or(t,67108864);s!==null&&Pn(s,t,67108864),bm(t,67108864)}}function Hx(t){if(t.tag===13||t.tag===31){var s=Xn();s=Xi(s);var r=or(t,s);r!==null&&Pn(r,t,s),bm(t,s)}}var dh=!0;function jT(t,s,r,o){var d=J.T;J.T=null;var m=he.p;try{he.p=2,_m(t,s,r,o)}finally{he.p=m,J.T=d}}function IT(t,s,r,o){var d=J.T;J.T=null;var m=he.p;try{he.p=8,_m(t,s,r,o)}finally{he.p=m,J.T=d}}function _m(t,s,r,o){if(dh){var d=wm(o);if(d===null)lm(t,s,o,fh,r),$x(t,o);else if(kT(d,t,s,r,o))o.stopPropagation();else if($x(t,o),s&4&&-1<DT.indexOf(t)){for(;d!==null;){var m=ss(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ls(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var D=1<<31-Rt(v);E.entanglements[1]|=D,v&=~D}sa(m),(ot&6)===0&&(Qu=re()+500,Xo(0))}}break;case 31:case 13:E=or(m,2),E!==null&&Pn(E,m,2),Wu(),bm(m,2)}if(m=wm(o),m===null&&lm(t,s,o,fh,r),m===d)break;d=m}d!==null&&o.stopPropagation()}else lm(t,s,o,null,r)}}function wm(t){return t=as(t),Em(t)}var fh=null;function Em(t){if(fh=null,t=Hs(t),t!==null){var s=c(t);if(s===null)t=null;else{var r=s.tag;if(r===13){if(t=f(s),t!==null)return t;t=null}else if(r===31){if(t=p(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return fh=t,null}function Fx(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case ke:return 2;case $e:return 8;case Ee:case st:return 32;case Tt:return 268435456;default:return 32}default:return 32}}var Tm=!1,bi=null,_i=null,wi=null,sc=new Map,ac=new Map,Ei=[],DT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $x(t,s){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":_i=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":sc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ac.delete(s.pointerId)}}function ic(t,s,r,o,d,m){return t===null||t.nativeEvent!==m?(t={blockedOn:s,domEventName:r,eventSystemFlags:o,nativeEvent:m,targetContainers:[d]},s!==null&&(s=ss(s),s!==null&&qx(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function kT(t,s,r,o,d){switch(s){case"focusin":return bi=ic(bi,t,s,r,o,d),!0;case"dragenter":return _i=ic(_i,t,s,r,o,d),!0;case"mouseover":return wi=ic(wi,t,s,r,o,d),!0;case"pointerover":var m=d.pointerId;return sc.set(m,ic(sc.get(m)||null,t,s,r,o,d)),!0;case"gotpointercapture":return m=d.pointerId,ac.set(m,ic(ac.get(m)||null,t,s,r,o,d)),!0}return!1}function Gx(t){var s=Hs(t.target);if(s!==null){var r=c(s);if(r!==null){if(s=r.tag,s===13){if(s=f(r),s!==null){t.blockedOn=s,_s(t.priority,function(){Hx(r)});return}}else if(s===31){if(s=p(r),s!==null){t.blockedOn=s,_s(t.priority,function(){Hx(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mh(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=wm(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);xo=o,r.target.dispatchEvent(o),xo=null}else return s=ss(r),s!==null&&qx(s),t.blockedOn=r,!1;s.shift()}return!0}function Yx(t,s,r){mh(t)&&r.delete(s)}function MT(){Tm=!1,bi!==null&&mh(bi)&&(bi=null),_i!==null&&mh(_i)&&(_i=null),wi!==null&&mh(wi)&&(wi=null),sc.forEach(Yx),ac.forEach(Yx)}function ph(t,s){t.blockedOn===s&&(t.blockedOn=null,Tm||(Tm=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,MT)))}var gh=null;function Kx(t){gh!==t&&(gh=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){gh===t&&(gh=null);for(var s=0;s<t.length;s+=3){var r=t[s],o=t[s+1],d=t[s+2];if(typeof o!="function"){if(Em(o||r)===null)continue;break}var m=ss(r);m!==null&&(t.splice(s,3),s-=3,wf(m,{pending:!0,data:d,method:r.method,action:o},o,d))}}))}function Nl(t){function s(D){return ph(D,t)}bi!==null&&ph(bi,t),_i!==null&&ph(_i,t),wi!==null&&ph(wi,t),sc.forEach(s),ac.forEach(s);for(var r=0;r<Ei.length;r++){var o=Ei[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Ei.length&&(r=Ei[0],r.blockedOn===null);)Gx(r),r.blockedOn===null&&Ei.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var d=r[o],m=r[o+1],v=d[rn]||null;if(typeof m=="function")v||Kx(r);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(d=m,v=m[rn]||null)E=v.formAction;else if(Em(d)!==null)continue}else E=v.action;typeof E=="function"?r[o+1]=E:(r.splice(o,3),o-=3),Kx(r)}}}function Qx(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Sm(t){this._internalRoot=t}yh.prototype.render=Sm.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var r=s.current,o=Xn();zx(r,o,t,s,null,null)},yh.prototype.unmount=Sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;zx(t.current,2,null,t,null,null),Wu(),s[Bs]=null}};function yh(t){this._internalRoot=t}yh.prototype.unstable_scheduleHydration=function(t){if(t){var s=Wc();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Ei.length&&s!==0&&s<Ei[r].priority;r++);Ei.splice(r,0,t),r===0&&Gx(t)}};var Xx=e.version;if(Xx!=="19.2.4")throw Error(i(527,Xx,"19.2.4"));he.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(s),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var OT={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{Bt=xh.inject(OT),tn=xh}catch{}}return lc.createRoot=function(t,s){if(!l(t))throw Error(i(299));var r=!1,o="",d=sy,m=ay,v=iy;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=Lx(t,1,!1,null,null,r,o,null,d,m,v,Qx),t[Bs]=s.current,rm(t),new Sm(s)},lc.hydrateRoot=function(t,s,r){if(!l(t))throw Error(i(299));var o=!1,d="",m=sy,v=ay,E=iy,D=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.formState!==void 0&&(D=r.formState)),s=Lx(t,1,!0,s,r??null,o,d,D,m,v,E,Qx),s.context=Ux(null),r=s.current,o=Xn(),o=Xi(o),d=oi(o),d.callback=null,ci(r,d,o),r=o,s.current.lanes=r,Ki(s,r),sa(s),t[Bs]=s.current,rm(t),new yh(s)},lc.version="19.2.4",lc}var rv;function GT(){if(rv)return Rm.exports;rv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Rm.exports=$T(),Rm.exports}var YT=GT();const KT=a_(YT);var lv="popstate";function QT(a={}){function e(l,c){let{pathname:f="/",search:p="",hash:g=""}=Mr(l.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),Xm("",{pathname:f,search:p,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(l,c){let f=l.document.querySelector("base"),p="";if(f&&f.getAttribute("href")){let g=l.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof c=="string"?c:Ec(c))}function i(l,c){vs(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(c)})`)}return WT(e,n,i,a)}function At(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function vs(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XT(){return Math.random().toString(36).substring(2,10)}function ov(a,e){return{usr:a.state,key:a.key,idx:e}}function Xm(a,e,n=null,i){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?Mr(e):e,state:n,key:e&&e.key||i||XT()}}function Ec({pathname:a="/",search:e="",hash:n=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(a+=n.charAt(0)==="#"?n:"#"+n),a}function Mr(a){let e={};if(a){let n=a.indexOf("#");n>=0&&(e.hash=a.substring(n),a=a.substring(0,n));let i=a.indexOf("?");i>=0&&(e.search=a.substring(i),a=a.substring(0,i)),a&&(e.pathname=a)}return e}function WT(a,e,n,i={}){let{window:l=document.defaultView,v5Compat:c=!1}=i,f=l.history,p="POP",g=null,y=b();y==null&&(y=0,f.replaceState({...f.state,idx:y},""));function b(){return(f.state||{idx:null}).idx}function w(){p="POP";let P=b(),z=P==null?null:P-y;y=P,g&&g({action:p,location:q.location,delta:z})}function S(P,z){p="PUSH";let U=Xm(q.location,P,z);n&&n(U,P),y=b()+1;let Q=ov(U,y),ue=q.createHref(U);try{f.pushState(Q,"",ue)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;l.location.assign(ue)}c&&g&&g({action:p,location:q.location,delta:1})}function j(P,z){p="REPLACE";let U=Xm(q.location,P,z);n&&n(U,P),y=b();let Q=ov(U,y),ue=q.createHref(U);f.replaceState(Q,"",ue),c&&g&&g({action:p,location:q.location,delta:0})}function Y(P){return JT(P)}let q={get action(){return p},get location(){return a(l,f)},listen(P){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(lv,w),g=P,()=>{l.removeEventListener(lv,w),g=null}},createHref(P){return e(l,P)},createURL:Y,encodeLocation(P){let z=Y(P);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:S,replace:j,go(P){return f.go(P)}};return q}function JT(a,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),At(n,"No window.location.(origin|href) available to create URL");let i=typeof a=="string"?a:Ec(a);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function i_(a,e,n="/"){return ZT(a,e,n,!1)}function ZT(a,e,n,i){let l=typeof e=="string"?Mr(e):e,c=za(l.pathname||"/",n);if(c==null)return null;let f=r_(a);eS(f);let p=null;for(let g=0;p==null&&g<f.length;++g){let y=hS(c);p=cS(f[g],y,i)}return p}function r_(a,e=[],n=[],i="",l=!1){let c=(f,p,g=l,y)=>{let b={relativePath:y===void 0?f.path||"":y,caseSensitive:f.caseSensitive===!0,childrenIndex:p,route:f};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;At(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let w=Va([i,b.relativePath]),S=n.concat(b);f.children&&f.children.length>0&&(At(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),r_(f.children,e,S,w,g)),!(f.path==null&&!f.index)&&e.push({path:w,score:lS(w,f.index),routesMeta:S})};return a.forEach((f,p)=>{if(f.path===""||!f.path?.includes("?"))c(f,p);else for(let g of l_(f.path))c(f,p,!0,g)}),e}function l_(a){let e=a.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return l?[c,""]:[c];let f=l_(i.join("/")),p=[];return p.push(...f.map(g=>g===""?c:[c,g].join("/"))),l&&p.push(...f),p.map(g=>a.startsWith("/")&&g===""?"/":g)}function eS(a){a.sort((e,n)=>e.score!==n.score?n.score-e.score:oS(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var tS=/^:[\w-]+$/,nS=3,sS=2,aS=1,iS=10,rS=-2,cv=a=>a==="*";function lS(a,e){let n=a.split("/"),i=n.length;return n.some(cv)&&(i+=rS),e&&(i+=sS),n.filter(l=>!cv(l)).reduce((l,c)=>l+(tS.test(c)?nS:c===""?aS:iS),i)}function oS(a,e){return a.length===e.length&&a.slice(0,-1).every((i,l)=>i===e[l])?a[a.length-1]-e[e.length-1]:0}function cS(a,e,n=!1){let{routesMeta:i}=a,l={},c="/",f=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,b=c==="/"?e:e.slice(c.length)||"/",w=Uh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),S=g.route;if(!w&&y&&n&&!i[i.length-1].route.index&&(w=Uh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!w)return null;Object.assign(l,w.params),f.push({params:l,pathname:Va([c,w.pathname]),pathnameBase:pS(Va([c,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(c=Va([c,w.pathnameBase]))}return f}function Uh(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[n,i]=uS(a.path,a.caseSensitive,a.end),l=e.match(n);if(!l)return null;let c=l[0],f=c.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:w},S)=>{if(b==="*"){let Y=p[S]||"";f=c.slice(0,c.length-Y.length).replace(/(.)\/+$/,"$1")}const j=p[S];return w&&!j?y[b]=void 0:y[b]=(j||"").replace(/%2F/g,"/"),y},{}),pathname:c,pathnameBase:f,pattern:a}}function uS(a,e=!1,n=!0){vs(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let i=[],l="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(i.push({paramName:"*"}),l+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":a!==""&&a!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function hS(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vs(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function za(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=a.charAt(n);return i&&i!=="/"?null:a.slice(n)||"/"}var dS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function fS(a,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof a=="string"?Mr(a):a,c;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?c=uv(n.substring(1),"/"):c=uv(n,e)):c=e,{pathname:c,search:gS(i),hash:yS(l)}}function uv(a,e){let n=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Dm(a,e,n,i){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mS(a){return a.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rp(a){let e=mS(a);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Cp(a,e,n,i=!1){let l;typeof a=="string"?l=Mr(a):(l={...a},At(!l.pathname||!l.pathname.includes("?"),Dm("?","pathname","search",l)),At(!l.pathname||!l.pathname.includes("#"),Dm("#","pathname","hash",l)),At(!l.search||!l.search.includes("#"),Dm("#","search","hash",l)));let c=a===""||l.pathname==="",f=c?"/":l.pathname,p;if(f==null)p=n;else{let w=e.length-1;if(!i&&f.startsWith("..")){let S=f.split("/");for(;S[0]==="..";)S.shift(),w-=1;l.pathname=S.join("/")}p=w>=0?e[w]:"/"}let g=fS(l,p),y=f&&f!=="/"&&f.endsWith("/"),b=(c||f===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var Va=a=>a.join("/").replace(/\/\/+/g,"/"),pS=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),gS=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,yS=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a,xS=class{constructor(a,e,n,i=!1){this.status=a,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function vS(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function bS(a){return a.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var o_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function c_(a,e){let n=a;if(typeof n!="string"||!dS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(o_)try{let c=new URL(window.location.href),f=n.startsWith("//")?new URL(c.protocol+n):new URL(n),p=za(f.pathname,e);f.origin===c.origin&&p!=null?n=p+f.search+f.hash:l=!0}catch{vs(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var u_=["POST","PUT","PATCH","DELETE"];new Set(u_);var _S=["GET",...u_];new Set(_S);var Ql=I.createContext(null);Ql.displayName="DataRouter";var ld=I.createContext(null);ld.displayName="DataRouterState";var wS=I.createContext(!1),h_=I.createContext({isTransitioning:!1});h_.displayName="ViewTransition";var ES=I.createContext(new Map);ES.displayName="Fetchers";var TS=I.createContext(null);TS.displayName="Await";var es=I.createContext(null);es.displayName="Navigation";var Mc=I.createContext(null);Mc.displayName="Location";var Vs=I.createContext({outlet:null,matches:[],isDataRoute:!1});Vs.displayName="Route";var jp=I.createContext(null);jp.displayName="RouteError";var d_="REACT_ROUTER_ERROR",SS="REDIRECT",NS="ROUTE_ERROR_RESPONSE";function AS(a){if(a.startsWith(`${d_}:${SS}:{`))try{let e=JSON.parse(a.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function RS(a){if(a.startsWith(`${d_}:${NS}:{`))try{let e=JSON.parse(a.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new xS(e.status,e.statusText,e.data)}catch{}}function CS(a,{relative:e}={}){At(Xl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=I.useContext(es),{hash:l,pathname:c,search:f}=Vc(a,{relative:e}),p=c;return n!=="/"&&(p=c==="/"?n:Va([n,c])),i.createHref({pathname:p,search:f,hash:l})}function Xl(){return I.useContext(Mc)!=null}function Hi(){return At(Xl(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Mc).location}var f_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function m_(a){I.useContext(es).static||I.useLayoutEffect(a)}function Wl(){let{isDataRoute:a}=I.useContext(Vs);return a?qS():jS()}function jS(){At(Xl(),"useNavigate() may be used only in the context of a <Router> component.");let a=I.useContext(Ql),{basename:e,navigator:n}=I.useContext(es),{matches:i}=I.useContext(Vs),{pathname:l}=Hi(),c=JSON.stringify(Rp(i)),f=I.useRef(!1);return m_(()=>{f.current=!0}),I.useCallback((g,y={})=>{if(vs(f.current,f_),!f.current)return;if(typeof g=="number"){n.go(g);return}let b=Cp(g,JSON.parse(c),l,y.relative==="path");a==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Va([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,c,l,a])}I.createContext(null);function Oc(){let{matches:a}=I.useContext(Vs),e=a[a.length-1];return e?e.params:{}}function Vc(a,{relative:e}={}){let{matches:n}=I.useContext(Vs),{pathname:i}=Hi(),l=JSON.stringify(Rp(n));return I.useMemo(()=>Cp(a,JSON.parse(l),i,e==="path"),[a,l,i,e])}function IS(a,e){return p_(a,e)}function p_(a,e,n,i,l){At(Xl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=I.useContext(es),{matches:f}=I.useContext(Vs),p=f[f.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",w=p&&p.route;{let U=w&&w.path||"";y_(y,!w||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let S=Hi(),j;if(e){let U=typeof e=="string"?Mr(e):e;At(b==="/"||U.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${U.pathname}" was given in the \`location\` prop.`),j=U}else j=S;let Y=j.pathname||"/",q=Y;if(b!=="/"){let U=b.replace(/^\//,"").split("/");q="/"+Y.replace(/^\//,"").split("/").slice(U.length).join("/")}let P=i_(a,{pathname:q});vs(w||P!=null,`No routes matched location "${j.pathname}${j.search}${j.hash}" `),vs(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${j.pathname}${j.search}${j.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=VS(P&&P.map(U=>Object.assign({},U,{params:Object.assign({},g,U.params),pathname:Va([b,c.encodeLocation?c.encodeLocation(U.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?b:Va([b,c.encodeLocation?c.encodeLocation(U.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:U.pathnameBase])})),f,n,i,l);return e&&z?I.createElement(Mc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...j},navigationType:"POP"}},z):z}function DS(){let a=BS(),e=vS(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),n=a instanceof Error?a.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},c={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",a),f=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:c},"ErrorBoundary")," or"," ",I.createElement("code",{style:c},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:l},n):null,f)}var kS=I.createElement(DS,null),g_=class extends I.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){this.props.onError?this.props.onError(a,e):console.error("React Router caught the following error during render",a)}render(){let a=this.state.error;if(this.context&&typeof a=="object"&&a&&"digest"in a&&typeof a.digest=="string"){const n=RS(a.digest);n&&(a=n)}let e=a!==void 0?I.createElement(Vs.Provider,{value:this.props.routeContext},I.createElement(jp.Provider,{value:a,children:this.props.component})):this.props.children;return this.context?I.createElement(MS,{error:a},e):e}};g_.contextType=wS;var km=new WeakMap;function MS({children:a,error:e}){let{basename:n}=I.useContext(es);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=AS(e.digest);if(i){let l=km.get(e);if(l)throw l;let c=c_(i.location,n);if(o_&&!km.get(e))if(c.isExternal||i.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:i.replace}));throw km.set(e,f),f}return I.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return a}function OS({routeContext:a,match:e,children:n}){let i=I.useContext(Ql);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Vs.Provider,{value:a},n)}function VS(a,e=[],n=null,i=null,l=null){if(a==null){if(!n)return null;if(n.errors)a=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)a=n.matches;else return null}let c=a,f=n?.errors;if(f!=null){let b=c.findIndex(w=>w.route.id&&f?.[w.route.id]!==void 0);At(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),c=c.slice(0,Math.min(c.length,b+1))}let p=!1,g=-1;if(n)for(let b=0;b<c.length;b++){let w=c[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=b),w.route.id){let{loaderData:S,errors:j}=n,Y=w.route.loader&&!S.hasOwnProperty(w.route.id)&&(!j||j[w.route.id]===void 0);if(w.route.lazy||Y){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}let y=n&&i?(b,w)=>{i(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:bS(n.matches),errorInfo:w})}:void 0;return c.reduceRight((b,w,S)=>{let j,Y=!1,q=null,P=null;n&&(j=f&&w.route.id?f[w.route.id]:void 0,q=w.route.errorElement||kS,p&&(g<0&&S===0?(y_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Y=!0,P=null):g===S&&(Y=!0,P=w.route.hydrateFallbackElement||null)));let z=e.concat(c.slice(0,S+1)),U=()=>{let Q;return j?Q=q:Y?Q=P:w.route.Component?Q=I.createElement(w.route.Component,null):w.route.element?Q=w.route.element:Q=b,I.createElement(OS,{match:w,routeContext:{outlet:b,matches:z,isDataRoute:n!=null},children:Q})};return n&&(w.route.ErrorBoundary||w.route.errorElement||S===0)?I.createElement(g_,{location:n.location,revalidation:n.revalidation,component:q,error:j,children:U(),routeContext:{outlet:null,matches:z,isDataRoute:!0},onError:y}):U()},null)}function Ip(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PS(a){let e=I.useContext(Ql);return At(e,Ip(a)),e}function LS(a){let e=I.useContext(ld);return At(e,Ip(a)),e}function US(a){let e=I.useContext(Vs);return At(e,Ip(a)),e}function Dp(a){let e=US(a),n=e.matches[e.matches.length-1];return At(n.route.id,`${a} can only be used on routes that contain a unique "id"`),n.route.id}function zS(){return Dp("useRouteId")}function BS(){let a=I.useContext(jp),e=LS("useRouteError"),n=Dp("useRouteError");return a!==void 0?a:e.errors?.[n]}function qS(){let{router:a}=PS("useNavigate"),e=Dp("useNavigate"),n=I.useRef(!1);return m_(()=>{n.current=!0}),I.useCallback(async(l,c={})=>{vs(n.current,f_),n.current&&(typeof l=="number"?await a.navigate(l):await a.navigate(l,{fromRouteId:e,...c}))},[a,e])}var hv={};function y_(a,e,n){!e&&!hv[a]&&(hv[a]=!0,vs(!1,n))}I.memo(HS);function HS({routes:a,future:e,state:n,onError:i}){return p_(a,void 0,n,i,e)}function FS({to:a,replace:e,state:n,relative:i}){At(Xl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=I.useContext(es);vs(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=I.useContext(Vs),{pathname:f}=Hi(),p=Wl(),g=Cp(a,Rp(c),f,i==="path"),y=JSON.stringify(g);return I.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function aa(a){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $S({basename:a="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:c=!1,unstable_useTransitions:f}){At(!Xl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=a.replace(/^\/*/,"/"),g=I.useMemo(()=>({basename:p,navigator:l,static:c,unstable_useTransitions:f,future:{}}),[p,l,c,f]);typeof n=="string"&&(n=Mr(n));let{pathname:y="/",search:b="",hash:w="",state:S=null,key:j="default"}=n,Y=I.useMemo(()=>{let q=za(y,p);return q==null?null:{location:{pathname:q,search:b,hash:w,state:S,key:j},navigationType:i}},[p,y,b,w,S,j,i]);return vs(Y!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${w}" because it does not start with the basename, so the <Router> won't render anything.`),Y==null?null:I.createElement(es.Provider,{value:g},I.createElement(Mc.Provider,{children:e,value:Y}))}function GS({children:a,location:e}){return IS(Wm(a),e)}function Wm(a,e=[]){let n=[];return I.Children.forEach(a,(i,l)=>{if(!I.isValidElement(i))return;let c=[...e,l];if(i.type===I.Fragment){n.push.apply(n,Wm(i.props.children,c));return}At(i.type===aa,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=Wm(i.props.children,c)),n.push(f)}),n}var Ah="get",Rh="application/x-www-form-urlencoded";function od(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function YS(a){return od(a)&&a.tagName.toLowerCase()==="button"}function KS(a){return od(a)&&a.tagName.toLowerCase()==="form"}function QS(a){return od(a)&&a.tagName.toLowerCase()==="input"}function XS(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function WS(a,e){return a.button===0&&(!e||e==="_self")&&!XS(a)}var vh=null;function JS(){if(vh===null)try{new FormData(document.createElement("form"),0),vh=!1}catch{vh=!0}return vh}var ZS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mm(a){return a!=null&&!ZS.has(a)?(vs(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rh}"`),null):a}function e2(a,e){let n,i,l,c,f;if(KS(a)){let p=a.getAttribute("action");i=p?za(p,e):null,n=a.getAttribute("method")||Ah,l=Mm(a.getAttribute("enctype"))||Rh,c=new FormData(a)}else if(YS(a)||QS(a)&&(a.type==="submit"||a.type==="image")){let p=a.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=a.getAttribute("formaction")||p.getAttribute("action");if(i=g?za(g,e):null,n=a.getAttribute("formmethod")||p.getAttribute("method")||Ah,l=Mm(a.getAttribute("formenctype"))||Mm(p.getAttribute("enctype"))||Rh,c=new FormData(p,a),!JS()){let{name:y,type:b,value:w}=a;if(b==="image"){let S=y?`${y}.`:"";c.append(`${S}x`,"0"),c.append(`${S}y`,"0")}else y&&c.append(y,w)}}else{if(od(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ah,i=null,l=Rh,f=a}return c&&l==="text/plain"&&(f=c,c=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:c,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kp(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function t2(a,e,n,i){let l=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&za(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function n2(a,e){if(a.id in e)return e[a.id];try{let n=await import(a.module);return e[a.id]=n,n}catch(n){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function s2(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function a2(a,e,n){let i=await Promise.all(a.map(async l=>{let c=e.routes[l.route.id];if(c){let f=await n2(c,n);return f.links?f.links():[]}return[]}));return o2(i.flat(1).filter(s2).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function dv(a,e,n,i,l,c){let f=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return c==="assets"?e.filter((g,y)=>f(g,y)||p(g,y)):c==="data"?e.filter((g,y)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(f(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function i2(a,e,{includeHydrateFallback:n}={}){return r2(a.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function r2(a){return[...new Set(a)]}function l2(a){let e={},n=Object.keys(a).sort();for(let i of n)e[i]=a[i];return e}function o2(a,e){let n=new Set;return new Set(e),a.reduce((i,l)=>{let c=JSON.stringify(l2(l));return n.has(c)||(n.add(c),i.push({key:c,link:l})),i},[])}function x_(){let a=I.useContext(Ql);return kp(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function c2(){let a=I.useContext(ld);return kp(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var Mp=I.createContext(void 0);Mp.displayName="FrameworkContext";function v_(){let a=I.useContext(Mp);return kp(a,"You must render this element inside a <HydratedRouter> element"),a}function u2(a,e){let n=I.useContext(Mp),[i,l]=I.useState(!1),[c,f]=I.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:w}=e,S=I.useRef(null);I.useEffect(()=>{if(a==="render"&&f(!0),a==="viewport"){let q=z=>{z.forEach(U=>{f(U.isIntersecting)})},P=new IntersectionObserver(q,{threshold:.5});return S.current&&P.observe(S.current),()=>{P.disconnect()}}},[a]),I.useEffect(()=>{if(i){let q=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(q)}}},[i]);let j=()=>{l(!0)},Y=()=>{l(!1),f(!1)};return n?a!=="intent"?[c,S,{}]:[c,S,{onFocus:oc(p,j),onBlur:oc(g,Y),onMouseEnter:oc(y,j),onMouseLeave:oc(b,Y),onTouchStart:oc(w,j)}]:[!1,S,{}]}function oc(a,e){return n=>{a&&a(n),n.defaultPrevented||e(n)}}function h2({page:a,...e}){let{router:n}=x_(),i=I.useMemo(()=>i_(n.routes,a,n.basename),[n.routes,a,n.basename]);return i?I.createElement(f2,{page:a,matches:i,...e}):null}function d2(a){let{manifest:e,routeModules:n}=v_(),[i,l]=I.useState([]);return I.useEffect(()=>{let c=!1;return a2(a,e,n).then(f=>{c||l(f)}),()=>{c=!0}},[a,e,n]),i}function f2({page:a,matches:e,...n}){let i=Hi(),{future:l,manifest:c,routeModules:f}=v_(),{basename:p}=x_(),{loaderData:g,matches:y}=c2(),b=I.useMemo(()=>dv(a,e,y,c,i,"data"),[a,e,y,c,i]),w=I.useMemo(()=>dv(a,e,y,c,i,"assets"),[a,e,y,c,i]),S=I.useMemo(()=>{if(a===i.pathname+i.search+i.hash)return[];let q=new Set,P=!1;if(e.forEach(U=>{let Q=c.routes[U.route.id];!Q||!Q.hasLoader||(!b.some(ue=>ue.route.id===U.route.id)&&U.route.id in g&&f[U.route.id]?.shouldRevalidate||Q.hasClientLoader?P=!0:q.add(U.route.id))}),q.size===0)return[];let z=t2(a,p,l.unstable_trailingSlashAwareDataRequests,"data");return P&&q.size>0&&z.searchParams.set("_routes",e.filter(U=>q.has(U.route.id)).map(U=>U.route.id).join(",")),[z.pathname+z.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,c,b,e,a,f]),j=I.useMemo(()=>i2(w,c),[w,c]),Y=d2(w);return I.createElement(I.Fragment,null,S.map(q=>I.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...n})),j.map(q=>I.createElement("link",{key:q,rel:"modulepreload",href:q,...n})),Y.map(({key:q,link:P})=>I.createElement("link",{key:q,nonce:n.nonce,...P,crossOrigin:P.crossOrigin??n.crossOrigin})))}function m2(...a){return e=>{a.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var p2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{p2&&(window.__reactRouterVersion="7.13.0")}catch{}function g2({basename:a,children:e,unstable_useTransitions:n,window:i}){let l=I.useRef();l.current==null&&(l.current=QT({window:i,v5Compat:!0}));let c=l.current,[f,p]=I.useState({action:c.action,location:c.location}),g=I.useCallback(y=>{n===!1?p(y):I.startTransition(()=>p(y))},[n]);return I.useLayoutEffect(()=>c.listen(g),[c,g]),I.createElement($S,{basename:a,children:e,location:f.location,navigationType:f.action,navigator:c,unstable_useTransitions:n})}var b_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ge=I.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:c,replace:f,state:p,target:g,to:y,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:S,...j},Y){let{basename:q,unstable_useTransitions:P}=I.useContext(es),z=typeof y=="string"&&b_.test(y),U=c_(y,q);y=U.to;let Q=CS(y,{relative:l}),[ue,ce,oe]=u2(i,j),N=b2(y,{replace:f,state:p,target:g,preventScrollReset:b,relative:l,viewTransition:w,unstable_defaultShouldRevalidate:S,unstable_useTransitions:P});function A(M){e&&e(M),M.defaultPrevented||N(M)}let R=I.createElement("a",{...j,...oe,href:U.absoluteURL||Q,onClick:U.isExternal||c?e:A,ref:m2(Y,ce),target:g,"data-discover":!z&&n==="render"?"true":void 0});return ue&&!z?I.createElement(I.Fragment,null,R,I.createElement(h2,{page:Q})):R});Ge.displayName="Link";var y2=I.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:c,to:f,viewTransition:p,children:g,...y},b){let w=Vc(f,{relative:y.relative}),S=Hi(),j=I.useContext(ld),{navigator:Y,basename:q}=I.useContext(es),P=j!=null&&S2(w)&&p===!0,z=Y.encodeLocation?Y.encodeLocation(w).pathname:w.pathname,U=S.pathname,Q=j&&j.navigation&&j.navigation.location?j.navigation.location.pathname:null;n||(U=U.toLowerCase(),Q=Q?Q.toLowerCase():null,z=z.toLowerCase()),Q&&q&&(Q=za(Q,q)||Q);const ue=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let ce=U===z||!l&&U.startsWith(z)&&U.charAt(ue)==="/",oe=Q!=null&&(Q===z||!l&&Q.startsWith(z)&&Q.charAt(z.length)==="/"),N={isActive:ce,isPending:oe,isTransitioning:P},A=ce?e:void 0,R;typeof i=="function"?R=i(N):R=[i,ce?"active":null,oe?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let M=typeof c=="function"?c(N):c;return I.createElement(Ge,{...y,"aria-current":A,className:R,ref:b,style:M,to:f,viewTransition:p},typeof g=="function"?g(N):g)});y2.displayName="NavLink";var x2=I.forwardRef(({discover:a="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:c,method:f=Ah,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:S,...j},Y)=>{let{unstable_useTransitions:q}=I.useContext(es),P=E2(),z=T2(p,{relative:y}),U=f.toLowerCase()==="get"?"get":"post",Q=typeof p=="string"&&b_.test(p),ue=ce=>{if(g&&g(ce),ce.defaultPrevented)return;ce.preventDefault();let oe=ce.nativeEvent.submitter,N=oe?.getAttribute("formmethod")||f,A=()=>P(oe||ce.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:l,state:c,relative:y,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:S});q&&n!==!1?I.startTransition(()=>A()):A()};return I.createElement("form",{ref:Y,method:U,action:z,onSubmit:i?g:ue,...j,"data-discover":!Q&&a==="render"?"true":void 0})});x2.displayName="Form";function v2(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function __(a){let e=I.useContext(Ql);return At(e,v2(a)),e}function b2(a,{target:e,replace:n,state:i,preventScrollReset:l,relative:c,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=Wl(),b=Hi(),w=Vc(a,{relative:c});return I.useCallback(S=>{if(WS(S,e)){S.preventDefault();let j=n!==void 0?n:Ec(b)===Ec(w),Y=()=>y(a,{replace:j,state:i,preventScrollReset:l,relative:c,viewTransition:f,unstable_defaultShouldRevalidate:p});g?I.startTransition(()=>Y()):Y()}},[b,y,w,n,i,e,a,l,c,f,p,g])}var _2=0,w2=()=>`__${String(++_2)}__`;function E2(){let{router:a}=__("useSubmit"),{basename:e}=I.useContext(es),n=zS(),i=a.fetch,l=a.navigate;return I.useCallback(async(c,f={})=>{let{action:p,method:g,encType:y,formData:b,body:w}=e2(c,e);if(f.navigate===!1){let S=f.fetcherKey||w2();await i(S,n,f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:b,body:w,formMethod:f.method||g,formEncType:f.encType||y,flushSync:f.flushSync})}else await l(f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:b,body:w,formMethod:f.method||g,formEncType:f.encType||y,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[i,l,e,n])}function T2(a,{relative:e}={}){let{basename:n}=I.useContext(es),i=I.useContext(Vs);At(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),c={...Vc(a||".",{relative:e})},f=Hi();if(a==null){c.search=f.search;let p=new URLSearchParams(c.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let b=p.toString();c.search=b?`?${b}`:""}}return(!a||a===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:Va([n,c.pathname])),Ec(c)}function S2(a,{relative:e}={}){let n=I.useContext(h_);At(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=__("useViewTransitionState"),l=Vc(a,{relative:e});if(!n.isTransitioning)return!1;let c=za(n.currentLocation.pathname,i)||n.currentLocation.pathname,f=za(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Uh(l.pathname,f)!=null||Uh(l.pathname,c)!=null}const N2=()=>{};var fv={};const w_=function(a){const e=[];let n=0;for(let i=0;i<a.length;i++){let l=a.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<a.length&&(a.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(a.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},A2=function(a){const e=[];let n=0,i=0;for(;n<a.length;){const l=a[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const c=a[n++];e[i++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=a[n++],f=a[n++],p=a[n++],g=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const c=a[n++],f=a[n++];e[i++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},E_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<a.length;l+=3){const c=a[l],f=l+1<a.length,p=f?a[l+1]:0,g=l+2<a.length,y=g?a[l+2]:0,b=c>>2,w=(c&3)<<4|p>>4;let S=(p&15)<<2|y>>6,j=y&63;g||(j=64,f||(S=64)),i.push(n[b],n[w],n[S],n[j])}return i.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(w_(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):A2(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<a.length;){const c=n[a.charAt(l++)],p=l<a.length?n[a.charAt(l)]:0;++l;const y=l<a.length?n[a.charAt(l)]:64;++l;const w=l<a.length?n[a.charAt(l)]:64;if(++l,c==null||p==null||y==null||w==null)throw new R2;const S=c<<2|p>>4;if(i.push(S),y!==64){const j=p<<4&240|y>>2;if(i.push(j),w!==64){const Y=y<<6&192|w;i.push(Y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class R2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C2=function(a){const e=w_(a);return E_.encodeByteArray(e,!0)},zh=function(a){return C2(a).replace(/\./g,"")},T_=function(a){try{return E_.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function j2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const I2=()=>j2().__FIREBASE_DEFAULTS__,D2=()=>{if(typeof process>"u"||typeof fv>"u")return;const a=fv.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},k2=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&T_(a[1]);return e&&JSON.parse(e)},cd=()=>{try{return N2()||I2()||D2()||k2()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},S_=a=>cd()?.emulatorHosts?.[a],M2=a=>{const e=S_(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},N_=()=>cd()?.config,A_=a=>cd()?.[`_${a}`];class O2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function Jl(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function R_(a){return(await fetch(a,{credentials:"include"})).ok}function V2(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=a.iat||0,c=a.sub||a.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...a};return[zh(JSON.stringify(n)),zh(JSON.stringify(f)),""].join(".")}const gc={};function P2(){const a={prod:[],emulator:[]};for(const e of Object.keys(gc))gc[e]?a.emulator.push(e):a.prod.push(e);return a}function L2(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let mv=!1;function C_(a,e){if(typeof window>"u"||typeof document>"u"||!Jl(window.location.host)||gc[a]===e||gc[a]||mv)return;gc[a]=e;function n(S){return`__firebase__banner__${S}`}const i="__firebase__banner",c=P2().prod.length>0;function f(){const S=document.getElementById(i);S&&S.remove()}function p(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,j){S.setAttribute("width","24"),S.setAttribute("id",j),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{mv=!0,f()},S}function b(S,j){S.setAttribute("id",j),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=L2(i),j=n("text"),Y=document.getElementById(j)||document.createElement("span"),q=n("learnmore"),P=document.getElementById(q)||document.createElement("a"),z=n("preprendIcon"),U=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Q=S.element;p(Q),b(P,q);const ue=y();g(U,z),Q.append(U,Y,P,ue),document.body.appendChild(Q)}c?(Y.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",j)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function z2(){const a=cd()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q2(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function H2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F2(){const a=Rn();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function $2(){return!z2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G2(){try{return typeof indexedDB=="object"}catch{return!1}}function Y2(){return new Promise((a,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),a(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const K2="FirebaseError";class $a extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=K2,Object.setPrototypeOf(this,$a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?Q2(c,i):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new $a(l,p,i)}}function Q2(a,e){return a.replace(X2,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const X2=/\{\$([^}]+)}/g;function W2(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function Nr(a,e){if(a===e)return!0;const n=Object.keys(a),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const c=a[l],f=e[l];if(pv(c)&&pv(f)){if(!Nr(c,f))return!1}else if(c!==f)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function pv(a){return a!==null&&typeof a=="object"}function Lc(a){const e=[];for(const[n,i]of Object.entries(a))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function uc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,c]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function hc(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function J2(a,e){const n=new Z2(a,e);return n.subscribe.bind(n)}class Z2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");eN(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=Om),l.error===void 0&&(l.error=Om),l.complete===void 0&&(l.complete=Om);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eN(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function Om(){}function an(a){return a&&a._delegate?a._delegate:a}class Ar{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const wr="[DEFAULT]";class tN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new O2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sN(e))try{this.getOrInitializeService({instanceIdentifier:wr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});i.resolve(c)}catch{}}}}clearInstance(e=wr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wr){return this.instances.has(e)}getOptions(e=wr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);i===p&&f.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const c=this.instances.get(i);return c&&e(c,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:nN(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=wr){return this.component?this.component.multipleInstances?e:wr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nN(a){return a===wr?void 0:a}function sN(a){return a.instantiationMode==="EAGER"}class aN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Je;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Je||(Je={}));const iN={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},rN=Je.INFO,lN={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},oN=(a,e,...n)=>{if(e<a.logLevel)return;const i=new Date().toISOString(),l=lN[e];if(l)console[l](`[${i}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Op{constructor(e){this.name=e,this._logLevel=rN,this._logHandler=oN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const cN=(a,e)=>e.some(n=>a instanceof n);let gv,yv;function uN(){return gv||(gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hN(){return yv||(yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const j_=new WeakMap,Jm=new WeakMap,I_=new WeakMap,Vm=new WeakMap,Vp=new WeakMap;function dN(a){const e=new Promise((n,i)=>{const l=()=>{a.removeEventListener("success",c),a.removeEventListener("error",f)},c=()=>{n(Ii(a.result)),l()},f=()=>{i(a.error),l()};a.addEventListener("success",c),a.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&j_.set(n,a)}).catch(()=>{}),Vp.set(e,a),e}function fN(a){if(Jm.has(a))return;const e=new Promise((n,i)=>{const l=()=>{a.removeEventListener("complete",c),a.removeEventListener("error",f),a.removeEventListener("abort",f)},c=()=>{n(),l()},f=()=>{i(a.error||new DOMException("AbortError","AbortError")),l()};a.addEventListener("complete",c),a.addEventListener("error",f),a.addEventListener("abort",f)});Jm.set(a,e)}let Zm={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return Jm.get(a);if(e==="objectStoreNames")return a.objectStoreNames||I_.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ii(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function mN(a){Zm=a(Zm)}function pN(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=a.call(Pm(this),e,...n);return I_.set(i,e.sort?e.sort():[e]),Ii(i)}:hN().includes(a)?function(...e){return a.apply(Pm(this),e),Ii(j_.get(this))}:function(...e){return Ii(a.apply(Pm(this),e))}}function gN(a){return typeof a=="function"?pN(a):(a instanceof IDBTransaction&&fN(a),cN(a,uN())?new Proxy(a,Zm):a)}function Ii(a){if(a instanceof IDBRequest)return dN(a);if(Vm.has(a))return Vm.get(a);const e=gN(a);return e!==a&&(Vm.set(a,e),Vp.set(e,a)),e}const Pm=a=>Vp.get(a);function yN(a,e,{blocked:n,upgrade:i,blocking:l,terminated:c}={}){const f=indexedDB.open(a,e),p=Ii(f);return i&&f.addEventListener("upgradeneeded",g=>{i(Ii(f.result),g.oldVersion,g.newVersion,Ii(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const xN=["get","getKey","getAll","getAllKeys","count"],vN=["put","add","delete","clear"],Lm=new Map;function xv(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Lm.get(e))return Lm.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=vN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||xN.includes(n)))return;const c=async function(f,...p){const g=this.transaction(f,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return Lm.set(e,c),c}mN(a=>({...a,get:(e,n,i)=>xv(e,n)||a.get(e,n,i),has:(e,n)=>!!xv(e,n)||a.has(e,n)}));class bN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_N(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function _N(a){return a.getComponent()?.type==="VERSION"}const ep="@firebase/app",vv="0.14.7";const Ba=new Op("@firebase/app"),wN="@firebase/app-compat",EN="@firebase/analytics-compat",TN="@firebase/analytics",SN="@firebase/app-check-compat",NN="@firebase/app-check",AN="@firebase/auth",RN="@firebase/auth-compat",CN="@firebase/database",jN="@firebase/data-connect",IN="@firebase/database-compat",DN="@firebase/functions",kN="@firebase/functions-compat",MN="@firebase/installations",ON="@firebase/installations-compat",VN="@firebase/messaging",PN="@firebase/messaging-compat",LN="@firebase/performance",UN="@firebase/performance-compat",zN="@firebase/remote-config",BN="@firebase/remote-config-compat",qN="@firebase/storage",HN="@firebase/storage-compat",FN="@firebase/firestore",$N="@firebase/ai",GN="@firebase/firestore-compat",YN="firebase",KN="12.8.0";const tp="[DEFAULT]",QN={[ep]:"fire-core",[wN]:"fire-core-compat",[TN]:"fire-analytics",[EN]:"fire-analytics-compat",[NN]:"fire-app-check",[SN]:"fire-app-check-compat",[AN]:"fire-auth",[RN]:"fire-auth-compat",[CN]:"fire-rtdb",[jN]:"fire-data-connect",[IN]:"fire-rtdb-compat",[DN]:"fire-fn",[kN]:"fire-fn-compat",[MN]:"fire-iid",[ON]:"fire-iid-compat",[VN]:"fire-fcm",[PN]:"fire-fcm-compat",[LN]:"fire-perf",[UN]:"fire-perf-compat",[zN]:"fire-rc",[BN]:"fire-rc-compat",[qN]:"fire-gcs",[HN]:"fire-gcs-compat",[FN]:"fire-fst",[GN]:"fire-fst-compat",[$N]:"fire-vertex","fire-js":"fire-js",[YN]:"fire-js-all"};const Bh=new Map,XN=new Map,np=new Map;function bv(a,e){try{a.container.addComponent(e)}catch(n){Ba.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function zl(a){const e=a.name;if(np.has(e))return Ba.debug(`There were multiple attempts to register component ${e}.`),!1;np.set(e,a);for(const n of Bh.values())bv(n,a);for(const n of XN.values())bv(n,a);return!0}function Pp(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function ps(a){return a==null?!1:a.settings!==void 0}const WN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new Pc("app","Firebase",WN);class JN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}const Zl=KN;function D_(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const i={name:tp,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Di.create("bad-app-name",{appName:String(l)});if(n||(n=N_()),!n)throw Di.create("no-options");const c=Bh.get(l);if(c){if(Nr(n,c.options)&&Nr(i,c.config))return c;throw Di.create("duplicate-app",{appName:l})}const f=new aN(l);for(const g of np.values())f.addComponent(g);const p=new JN(n,i,f);return Bh.set(l,p),p}function k_(a=tp){const e=Bh.get(a);if(!e&&a===tp&&N_())return D_();if(!e)throw Di.create("no-app",{appName:a});return e}function ki(a,e,n){let i=QN[a]??a;n&&(i+=`-${n}`);const l=i.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${i}" with version "${e}":`];l&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ba.warn(f.join(" "));return}zl(new Ar(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const ZN="firebase-heartbeat-database",eA=1,Tc="firebase-heartbeat-store";let Um=null;function M_(){return Um||(Um=yN(ZN,eA,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(Tc)}catch(n){console.warn(n)}}}}).catch(a=>{throw Di.create("idb-open",{originalErrorMessage:a.message})})),Um}async function tA(a){try{const n=(await M_()).transaction(Tc),i=await n.objectStore(Tc).get(O_(a));return await n.done,i}catch(e){if(e instanceof $a)Ba.warn(e.message);else{const n=Di.create("idb-get",{originalErrorMessage:e?.message});Ba.warn(n.message)}}}async function _v(a,e){try{const i=(await M_()).transaction(Tc,"readwrite");await i.objectStore(Tc).put(e,O_(a)),await i.done}catch(n){if(n instanceof $a)Ba.warn(n.message);else{const i=Di.create("idb-set",{originalErrorMessage:n?.message});Ba.warn(i.message)}}}function O_(a){return`${a.name}!${a.options.appId}`}const nA=1024,sA=30;class aA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=wv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>sA){const l=lA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ba.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=wv(),{heartbeatsToSend:n,unsentEntries:i}=iA(this._heartbeatsCache.heartbeats),l=zh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return Ba.warn(e),""}}}function wv(){return new Date().toISOString().substring(0,10)}function iA(a,e=nA){const n=[];let i=a.slice();for(const l of a){const c=n.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),Ev(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Ev(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class rA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return G2()?Y2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return _v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return _v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ev(a){return zh(JSON.stringify({version:2,heartbeats:a})).length}function lA(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let i=1;i<a.length;i++)a[i].date<n&&(n=a[i].date,e=i);return e}function oA(a){zl(new Ar("platform-logger",e=>new bN(e),"PRIVATE")),zl(new Ar("heartbeat",e=>new aA(e),"PRIVATE")),ki(ep,vv,a),ki(ep,vv,"esm2020"),ki("fire-js","")}oA("");function V_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cA=V_,P_=new Pc("auth","Firebase",V_());const qh=new Op("@firebase/auth");function uA(a,...e){qh.logLevel<=Je.WARN&&qh.warn(`Auth (${Zl}): ${a}`,...e)}function Ch(a,...e){qh.logLevel<=Je.ERROR&&qh.error(`Auth (${Zl}): ${a}`,...e)}function Ms(a,...e){throw Lp(a,...e)}function la(a,...e){return Lp(a,...e)}function L_(a,e,n){const i={...cA(),[e]:n};return new Pc("auth","Firebase",i).create(e,{appName:a.name})}function Pa(a){return L_(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lp(a,...e){if(typeof a!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=a.name),a._errorFactory.create(n,...i)}return P_.create(a,...e)}function je(a,e,...n){if(!a)throw Lp(e,...n)}function Ma(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Ch(e),new Error(e)}function qa(a,e){a||Ma(e)}function sp(){return typeof self<"u"&&self.location?.href||""}function hA(){return Tv()==="http:"||Tv()==="https:"}function Tv(){return typeof self<"u"&&self.location?.protocol||null}function dA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hA()||q2()||"connection"in navigator)?navigator.onLine:!0}function fA(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}class Uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,qa(n>e,"Short delay should be less than long delay!"),this.isMobile=U2()||H2()}get(){return dA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Up(a,e){qa(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class U_{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ma("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ma("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ma("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const mA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const pA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gA=new Uc(3e4,6e4);function Fi(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function $i(a,e,n,i,l={}){return z_(a,l,async()=>{let c={},f={};i&&(e==="GET"?f=i:c={body:JSON.stringify(i)});const p=Lc({key:a.config.apiKey,...f}).slice(1),g=await a._getAdditionalHeaders();g["Content-Type"]="application/json",a.languageCode&&(g["X-Firebase-Locale"]=a.languageCode);const y={method:e,headers:g,...c};return B2()||(y.referrerPolicy="no-referrer"),a.emulatorConfig&&Jl(a.emulatorConfig.host)&&(y.credentials="include"),U_.fetch()(await B_(a,a.config.apiHost,n,p),y)})}async function z_(a,e,n){a._canInitEmulator=!1;const i={...mA,...e};try{const l=new xA(a),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw bh(a,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw bh(a,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw bh(a,"email-already-in-use",f);if(g==="USER_DISABLED")throw bh(a,"user-disabled",f);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw L_(a,b,y);Ms(a,b)}}catch(l){if(l instanceof $a)throw l;Ms(a,"network-request-failed",{message:String(l)})}}async function zc(a,e,n,i,l={}){const c=await $i(a,e,n,i,l);return"mfaPendingCredential"in c&&Ms(a,"multi-factor-auth-required",{_serverResponse:c}),c}async function B_(a,e,n,i){const l=`${e}${n}?${i}`,c=a,f=c.config.emulator?Up(a.config,l):`${a.config.apiScheme}://${l}`;return pA.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}function yA(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(la(this.auth,"network-request-failed")),gA.get())})}}function bh(a,e,n){const i={appName:a.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=la(a,e,i);return l.customData._tokenResponse=n,l}function Sv(a){return a!==void 0&&a.enterprise!==void 0}class vA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return yA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function bA(a,e){return $i(a,"GET","/v2/recaptchaConfig",Fi(a,e))}async function _A(a,e){return $i(a,"POST","/v1/accounts:delete",e)}async function Hh(a,e){return $i(a,"POST","/v1/accounts:lookup",e)}function yc(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wA(a,e=!1){const n=an(a),i=await n.getIdToken(e),l=zp(i);je(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:i,authTime:yc(zm(l.auth_time)),issuedAtTime:yc(zm(l.iat)),expirationTime:yc(zm(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function zm(a){return Number(a)*1e3}function zp(a){const[e,n,i]=a.split(".");if(e===void 0||n===void 0||i===void 0)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const l=T_(n);return l?JSON.parse(l):(Ch("Failed to decode base64 JWT payload"),null)}catch(l){return Ch("Caught error parsing JWT payload as JSON",l?.toString()),null}}function Nv(a){const e=zp(a);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Sc(a,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof $a&&EA(i)&&a.auth.currentUser===a&&await a.auth.signOut(),i}}function EA({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}class TA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class ap{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yc(this.lastLoginAt),this.creationTime=yc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fh(a){const e=a.auth,n=await a.getIdToken(),i=await Sc(a,Hh(e,{idToken:n}));je(i?.users.length,e,"internal-error");const l=i.users[0];a._notifyReloadListener(l);const c=l.providerUserInfo?.length?q_(l.providerUserInfo):[],f=NA(a.providerData,c),p=a.isAnonymous,g=!(a.email&&l.passwordHash)&&!f?.length,y=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new ap(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(a,b)}async function SA(a){const e=an(a);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NA(a,e){return[...a.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function q_(a){return a.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function AA(a,e){const n=await z_(a,{},async()=>{const i=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=a.config,f=await B_(a,l,"/v1/token",`key=${c}`),p=await a._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return a.emulatorConfig&&Jl(a.emulatorConfig.host)&&(g.credentials="include"),U_.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function RA(a,e){return $i(a,"POST","/v2/accounts:revokeToken",Fi(a,e))}class Ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Nv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){je(e.length!==0,"internal-error");const n=Nv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:c}=await AA(e,n);this.updateTokensAndExpiration(i,l,Number(c))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:c}=n,f=new Ol;return i&&(je(typeof i=="string","internal-error",{appName:e}),f.refreshToken=i),l&&(je(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(je(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ol,this.toJSON())}_performRefresh(){return Ma("not implemented")}}function Si(a,e){je(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class Is{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new TA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new ap(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Sc(this,this.stsTokenManager.getToken(this.auth,e));return je(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wA(this,e)}reload(){return SA(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Is({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Fh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ps(this.auth.app))return Promise.reject(Pa(this.auth));const e=await this.getIdToken();return await Sc(this,_A(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:w,emailVerified:S,isAnonymous:j,providerData:Y,stsTokenManager:q}=n;je(w&&q,e,"internal-error");const P=Ol.fromJSON(this.name,q);je(typeof w=="string",e,"internal-error"),Si(i,e.name),Si(l,e.name),je(typeof S=="boolean",e,"internal-error"),je(typeof j=="boolean",e,"internal-error"),Si(c,e.name),Si(f,e.name),Si(p,e.name),Si(g,e.name),Si(y,e.name),Si(b,e.name);const z=new Is({uid:w,auth:e,email:l,emailVerified:S,displayName:i,isAnonymous:j,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:P,createdAt:y,lastLoginAt:b});return Y&&Array.isArray(Y)&&(z.providerData=Y.map(U=>({...U}))),g&&(z._redirectEventId=g),z}static async _fromIdTokenResponse(e,n,i=!1){const l=new Ol;l.updateFromServerResponse(n);const c=new Is({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await Fh(c),c}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];je(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?q_(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,p=new Ol;p.updateFromIdToken(i);const g=new Is({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new ap(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(g,y),g}}const Av=new Map;function Oa(a){qa(a instanceof Function,"Expected a class definition");let e=Av.get(a);return e?(qa(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,Av.set(a,e),e)}class H_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}H_.type="NONE";const Rv=H_;function jh(a,e,n){return`firebase:${a}:${e}:${n}`}class Vl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:c}=this.auth;this.fullUserKey=jh(this.userKey,l.apiKey,c),this.fullPersistenceKey=jh("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hh(this.auth,{idToken:e}).catch(()=>{});return n?Is._fromGetAccountInfoResponse(this.auth,n,e):null}return Is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Vl(Oa(Rv),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let c=l[0]||Oa(Rv);const f=jh(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const b=await y._get(f);if(b){let w;if(typeof b=="string"){const S=await Hh(e,{idToken:b}).catch(()=>{});if(!S)break;w=await Is._fromGetAccountInfoResponse(e,S,b)}else w=Is._fromJSON(e,b);y!==c&&(p=w),c=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Vl(c,e,i):(c=g[0],p&&await c._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==c)try{await y._remove(f)}catch{}})),new Vl(c,e,i))}}function Cv(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Y_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q_(e))return"Blackberry";if(X_(e))return"Webos";if($_(e))return"Safari";if((e.includes("chrome/")||G_(e))&&!e.includes("edge/"))return"Chrome";if(K_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=a.match(n);if(i?.length===2)return i[1]}return"Other"}function F_(a=Rn()){return/firefox\//i.test(a)}function $_(a=Rn()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G_(a=Rn()){return/crios\//i.test(a)}function Y_(a=Rn()){return/iemobile/i.test(a)}function K_(a=Rn()){return/android/i.test(a)}function Q_(a=Rn()){return/blackberry/i.test(a)}function X_(a=Rn()){return/webos/i.test(a)}function Bp(a=Rn()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function CA(a=Rn()){return Bp(a)&&!!window.navigator?.standalone}function jA(){return F2()&&document.documentMode===10}function W_(a=Rn()){return Bp(a)||K_(a)||X_(a)||Q_(a)||/windows phone/i.test(a)||Y_(a)}function J_(a,e=[]){let n;switch(a){case"Browser":n=Cv(Rn());break;case"Worker":n=`${Cv(Rn())}-${a}`;break;default:n=a}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zl}/${i}`}class IA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=c=>new Promise((f,p)=>{try{const g=e(c);f(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function DA(a,e={}){return $i(a,"GET","/v2/passwordPolicy",Fi(a,e))}const kA=6;class MA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class OA{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jv(this),this.idTokenSubscription=new jv(this),this.beforeStateQueue=new IA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=P_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Oa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hh(this,{idToken:e}),i=await Is._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ps(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ps(this.app))return Promise.reject(Pa(this));const n=e?an(e):null;return n&&je(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ps(this.app)?Promise.reject(Pa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ps(this.app)?Promise.reject(Pa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DA(this),n=new MA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await RA(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Oa(e)||this._popupRedirectResolver;je(n,this,"argument-error"),this.redirectPersistenceManager=await Vl.create(this,[Oa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,l);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Or(a){return an(a)}class jv{constructor(e){this.auth=e,this.observer=null,this.addObserver=J2(n=>this.observer=n)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ud={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VA(a){ud=a}function Z_(a){return ud.loadJS(a)}function PA(){return ud.recaptchaEnterpriseScript}function LA(){return ud.gapiScript}function UA(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class zA{constructor(){this.enterprise=new BA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class BA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const qA="recaptcha-enterprise",e1="NO_RECAPTCHA";class HA{constructor(e){this.type=qA,this.auth=Or(e)}async verify(e="verify",n=!1){async function i(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(f,p)=>{bA(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new vA(g);return c.tenantId==null?c._agentRecaptchaConfig=y:c._tenantRecaptchaConfigs[c.tenantId]=y,f(y.siteKey)}}).catch(g=>{p(g)})})}function l(c,f,p){const g=window.grecaptcha;Sv(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(y=>{f(y)}).catch(()=>{f(e1)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zA().execute("siteKey",{action:"verify"}):new Promise((c,f)=>{i(this.auth).then(p=>{if(!n&&Sv(window.grecaptcha))l(p,c,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=PA();g.length!==0&&(g+=p),Z_(g).then(()=>{l(p,c,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function Iv(a,e,n,i=!1,l=!1){const c=new HA(a);let f;if(l)f=e1;else try{f=await c.verify(n)}catch{f=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function ip(a,e,n,i,l){if(a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Iv(a,e,n,n==="getOobCode");return i(a,c)}else return i(a,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Iv(a,e,n,n==="getOobCode");return i(a,f)}else return Promise.reject(c)})}function FA(a,e){const n=Pp(a,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(Nr(c,e??{}))return l;Ms(l,"already-initialized")}return n.initialize({options:e})}function $A(a,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Oa);e?.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(i,e?.popupRedirectResolver)}function GA(a,e,n){const i=Or(a);je(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,c=t1(e),{host:f,port:p}=YA(e),g=p===null?"":`:${p}`,y={url:`${c}//${f}${g}/`},b=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){je(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),je(Nr(y,i.config.emulator)&&Nr(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,Jl(f)?(R_(`${c}//${f}${g}`),C_("Auth",!0)):KA()}function t1(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function YA(a){const e=t1(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const c=l[1];return{host:c,port:Dv(i.substr(c.length+1))}}else{const[c,f]=i.split(":");return{host:c,port:Dv(f)}}}function Dv(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function KA(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}class qp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ma("not implemented")}_getIdTokenResponse(e){return Ma("not implemented")}_linkToIdToken(e,n){return Ma("not implemented")}_getReauthenticationResolver(e){return Ma("not implemented")}}async function QA(a,e){return $i(a,"POST","/v1/accounts:signUp",e)}async function XA(a,e){return zc(a,"POST","/v1/accounts:signInWithPassword",Fi(a,e))}async function WA(a,e){return zc(a,"POST","/v1/accounts:signInWithEmailLink",Fi(a,e))}async function JA(a,e){return zc(a,"POST","/v1/accounts:signInWithEmailLink",Fi(a,e))}class Nc extends qp{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Nc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Nc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ip(e,n,"signInWithPassword",XA);case"emailLink":return WA(e,{email:this._email,oobCode:this._password});default:Ms(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ip(e,i,"signUpPassword",QA);case"emailLink":return JA(e,{idToken:n,email:this._email,oobCode:this._password});default:Ms(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Pl(a,e){return zc(a,"POST","/v1/accounts:signInWithIdp",Fi(a,e))}const ZA="http://localhost";class Rr extends qp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Rr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ms("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...c}=n;if(!i||!l)return null;const f=new Rr(i,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Pl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Pl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Pl(e,n)}buildRequest(){const e={requestUri:ZA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lc(n)}return e}}function eR(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tR(a){const e=uc(hc(a)).link,n=e?uc(hc(e)).deep_link_id:null,i=uc(hc(a)).deep_link_id;return(i?uc(hc(i)).link:null)||i||n||e||a}class Hp{constructor(e){const n=uc(hc(e)),i=n.apiKey??null,l=n.oobCode??null,c=eR(n.mode??null);je(i&&l&&c,"argument-error"),this.apiKey=i,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=tR(e);try{return new Hp(n)}catch{return null}}}class eo{constructor(){this.providerId=eo.PROVIDER_ID}static credential(e,n){return Nc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Hp.parseLink(n);return je(i,"argument-error"),Nc._fromEmailAndCode(e,i.code,i.tenantId)}}eo.PROVIDER_ID="password";eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class n1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Bc extends n1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ni extends Bc{constructor(){super("facebook.com")}static credential(e){return Rr._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ni.credential(e.oauthAccessToken)}catch{return null}}}Ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ni.PROVIDER_ID="facebook.com";class Ai extends Bc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Rr._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ai.credential(n,i)}catch{return null}}}Ai.GOOGLE_SIGN_IN_METHOD="google.com";Ai.PROVIDER_ID="google.com";class Ri extends Bc{constructor(){super("github.com")}static credential(e){return Rr._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";class Ci extends Bc{constructor(){super("twitter.com")}static credential(e,n){return Rr._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ci.credential(n,i)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";async function nR(a,e){return zc(a,"POST","/v1/accounts:signUp",Fi(a,e))}class Cr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const c=await Is._fromIdTokenResponse(e,i,l),f=kv(i);return new Cr({user:c,providerId:f,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=kv(i);return new Cr({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function kv(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}class $h extends $a{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,$h.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new $h(e,n,i,l)}}function s1(a,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?$h._fromErrorAndOperation(a,c,e,i):c})}async function sR(a,e,n=!1){const i=await Sc(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return Cr._forOperation(a,"link",i)}async function aR(a,e,n=!1){const{auth:i}=a;if(ps(i.app))return Promise.reject(Pa(i));const l="reauthenticate";try{const c=await Sc(a,s1(i,l,e,a),n);je(c.idToken,i,"internal-error");const f=zp(c.idToken);je(f,i,"internal-error");const{sub:p}=f;return je(a.uid===p,i,"user-mismatch"),Cr._forOperation(a,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Ms(i,"user-mismatch"),c}}async function a1(a,e,n=!1){if(ps(a.app))return Promise.reject(Pa(a));const i="signIn",l=await s1(a,i,e),c=await Cr._fromIdTokenResponse(a,i,l);return n||await a._updateCurrentUser(c.user),c}async function iR(a,e){return a1(Or(a),e)}async function i1(a){const e=Or(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rR(a,e,n){if(ps(a.app))return Promise.reject(Pa(a));const i=Or(a),f=await ip(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&i1(a),g}),p=await Cr._fromIdTokenResponse(i,"signIn",f);return await i._updateCurrentUser(p.user),p}function r1(a,e,n){return ps(a.app)?Promise.reject(Pa(a)):iR(an(a),eo.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&i1(a),i})}function lR(a,e,n,i){return an(a).onIdTokenChanged(e,n,i)}function oR(a,e,n){return an(a).beforeAuthStateChanged(e,n)}function cR(a,e,n,i){return an(a).onAuthStateChanged(e,n,i)}function uR(a){return an(a).signOut()}const Gh="__sak";class l1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const hR=1e3,dR=10;class o1 extends l1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(i);!n&&this.localCache[i]===f||this.notifyListeners(i,f)},c=this.storage.getItem(i);jA()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,dR):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},hR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}o1.type="LOCAL";const fR=o1;class c1 extends l1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}c1.type="SESSION";const u1=c1;function mR(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class hd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new hd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:c}=n.data,f=this.handlersMap[l];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(f).map(async y=>y(n.origin,c)),g=await mR(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hd.receivers=[];function Fp(a="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return a+n}class pR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,g)=>{const y=Fp("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);f={messageChannel:l,onMessage(w){const S=w;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(S.data.response);break;default:clearTimeout(b),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function oa(){return window}function gR(a){oa().location.href=a}function h1(){return typeof oa().WorkerGlobalScope<"u"&&typeof oa().importScripts=="function"}async function yR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xR(){return navigator?.serviceWorker?.controller||null}function vR(){return h1()?self:null}const d1="firebaseLocalStorageDb",bR=1,Yh="firebaseLocalStorage",f1="fbase_key";class qc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dd(a,e){return a.transaction([Yh],e?"readwrite":"readonly").objectStore(Yh)}function _R(){const a=indexedDB.deleteDatabase(d1);return new qc(a).toPromise()}function rp(){const a=indexedDB.open(d1,bR);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const i=a.result;try{i.createObjectStore(Yh,{keyPath:f1})}catch(l){n(l)}}),a.addEventListener("success",async()=>{const i=a.result;i.objectStoreNames.contains(Yh)?e(i):(i.close(),await _R(),e(await rp()))})})}async function Mv(a,e,n){const i=dd(a,!0).put({[f1]:e,value:n});return new qc(i).toPromise()}async function wR(a,e){const n=dd(a,!1).get(e),i=await new qc(n).toPromise();return i===void 0?null:i.value}function Ov(a,e){const n=dd(a,!0).delete(e);return new qc(n).toPromise()}const ER=800,TR=3;class m1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>TR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return h1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hd._getInstance(vR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await yR(),!this.activeServiceWorker)return;this.sender=new pR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rp();return await Mv(e,Gh,"1"),await Ov(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Mv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>wR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ov(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=dd(l,!1).getAll();return new qc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ER)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}m1.type="LOCAL";const SR=m1;new Uc(3e4,6e4);function NR(a,e){return e?Oa(e):(je(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}class $p extends qp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Pl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AR(a){return a1(a.auth,new $p(a),a.bypassAuthState)}function RR(a){const{auth:e,user:n}=a;return je(n,e,"internal-error"),aR(n,new $p(a),a.bypassAuthState)}async function CR(a){const{auth:e,user:n}=a;return je(n,e,"internal-error"),sR(n,new $p(a),a.bypassAuthState)}class p1{constructor(e,n,i,l,c=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AR;case"linkViaPopup":case"linkViaRedirect":return CR;case"reauthViaPopup":case"reauthViaRedirect":return RR;default:Ms(this.auth,"internal-error")}}resolve(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const jR=new Uc(2e3,1e4);class Dl extends p1{constructor(e,n,i,l,c){super(e,n,l,c),this.provider=i,this.authWindow=null,this.pollId=null,Dl.currentPopupAction&&Dl.currentPopupAction.cancel(),Dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){qa(this.filter.length===1,"Popup operations only handle one event");const e=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(la(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(la(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(la(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jR.get())};e()}}Dl.currentPopupAction=null;const IR="pendingRedirect",Ih=new Map;class DR extends p1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ih.get(this.auth._key());if(!e){try{const i=await kR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ih.set(this.auth._key(),e)}return this.bypassAuthState||Ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kR(a,e){const n=VR(e),i=OR(a);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function MR(a,e){Ih.set(a._key(),e)}function OR(a){return Oa(a._redirectPersistence)}function VR(a){return jh(IR,a.config.apiKey,a.name)}async function PR(a,e,n=!1){if(ps(a.app))return Promise.reject(Pa(a));const i=Or(a),l=NR(i,e),f=await new DR(i,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await i._persistUserIfCurrent(f.user),await i._setRedirectUser(null,e)),f}const LR=600*1e3;class UR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!g1(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(la(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vv(e))}saveEventToCache(e){this.cachedEventUids.add(Vv(e)),this.lastProcessedEventTime=Date.now()}}function Vv(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function g1({type:a,error:e}){return a==="unknown"&&e?.code==="auth/no-auth-event"}function zR(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g1(a);default:return!1}}async function BR(a,e={}){return $i(a,"GET","/v1/projects",e)}const qR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HR=/^https?/;async function FR(a){if(a.config.emulator)return;const{authorizedDomains:e}=await BR(a);for(const n of e)try{if($R(n))return}catch{}Ms(a,"unauthorized-domain")}function $R(a){const e=sp(),{protocol:n,hostname:i}=new URL(e);if(a.startsWith("chrome-extension://")){const f=new URL(a);return f.hostname===""&&i===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===i}if(!HR.test(n))return!1;if(qR.test(a))return i===a;const l=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const GR=new Uc(3e4,6e4);function Pv(){const a=oa().___jsl;if(a?.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function YR(a){return new Promise((e,n)=>{function i(){Pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pv(),n(la(a,"network-request-failed"))},timeout:GR.get()})}if(oa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(oa().gapi?.load)i();else{const l=UA("iframefcb");return oa()[l]=()=>{gapi.load?i():n(la(a,"network-request-failed"))},Z_(`${LA()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Dh=null,e})}let Dh=null;function KR(a){return Dh=Dh||YR(a),Dh}const QR=new Uc(5e3,15e3),XR="__/auth/iframe",WR="emulator/auth/iframe",JR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eC(a){const e=a.config;je(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?Up(e,WR):`https://${a.config.authDomain}/${XR}`,i={apiKey:e.apiKey,appName:a.name,v:Zl},l=ZR.get(a.config.apiHost);l&&(i.eid=l);const c=a._getFrameworks();return c.length&&(i.fw=c.join(",")),`${n}?${Lc(i).slice(1)}`}async function tC(a){const e=await KR(a),n=oa().gapi;return je(n,a,"internal-error"),e.open({where:document.body,url:eC(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JR,dontclear:!0},i=>new Promise(async(l,c)=>{await i.restyle({setHideOnLeave:!1});const f=la(a,"network-request-failed"),p=oa().setTimeout(()=>{c(f)},QR.get());function g(){oa().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{c(f)})}))}const nC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sC=500,aC=600,iC="_blank",rC="http://localhost";class Lv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lC(a,e,n,i=sC,l=aC){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...nC,width:i.toString(),height:l.toString(),top:c,left:f},y=Rn().toLowerCase();n&&(p=G_(y)?iC:n),F_(y)&&(e=e||rC,g.scrollbars="yes");const b=Object.entries(g).reduce((S,[j,Y])=>`${S}${j}=${Y},`,"");if(CA(y)&&p!=="_self")return oC(e||"",p),new Lv(null);const w=window.open(e||"",p,b);je(w,a,"popup-blocked");try{w.focus()}catch{}return new Lv(w)}function oC(a,e){const n=document.createElement("a");n.href=a,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const cC="__/auth/handler",uC="emulator/auth/handler",hC=encodeURIComponent("fac");async function Uv(a,e,n,i,l,c){je(a.config.authDomain,a,"auth-domain-config-required"),je(a.config.apiKey,a,"invalid-api-key");const f={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:i,v:Zl,eventId:l};if(e instanceof n1){e.setDefaultLanguage(a.languageCode),f.providerId=e.providerId||"",W2(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))f[b]=w}if(e instanceof Bc){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(f.scopes=b.join(","))}a.tenantId&&(f.tid=a.tenantId);const p=f;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await a._getAppCheckToken(),y=g?`#${hC}=${encodeURIComponent(g)}`:"";return`${dC(a)}?${Lc(p).slice(1)}${y}`}function dC({config:a}){return a.emulator?Up(a,uC):`https://${a.authDomain}/${cC}`}const Bm="webStorageSupport";class fC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u1,this._completeRedirectFn=PR,this._overrideRedirectResult=MR}async _openPopup(e,n,i,l){qa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Uv(e,n,i,sp(),l);return lC(e,c,Fp())}async _openRedirect(e,n,i,l){await this._originValidation(e);const c=await Uv(e,n,i,sp(),l);return gR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(qa(c,"If manager is not set, promise should be"),c)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await tC(e),i=new UR(e);return n.register("authEvent",l=>(je(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bm,{type:Bm},l=>{const c=l?.[0]?.[Bm];c!==void 0&&n(!!c),Ms(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return W_()||$_()||Bp()}}const mC=fC;var zv="@firebase/auth",Bv="1.12.0";class pC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gC(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yC(a){zl(new Ar("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=i.options;je(f&&!f.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:f,authDomain:p,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J_(a)},y=new OA(i,l,c,g);return $A(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),zl(new Ar("auth-internal",e=>{const n=Or(e.getProvider("auth").getImmediate());return(i=>new pC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ki(zv,Bv,gC(a)),ki(zv,Bv,"esm2020")}const xC=300,vC=A_("authIdTokenMaxAge")||xC;let qv=null;const bC=a=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>vC)return;const l=n?.token;qv!==l&&(qv=l,await fetch(a,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function _C(a=k_()){const e=Pp(a,"auth");if(e.isInitialized())return e.getImmediate();const n=FA(a,{popupRedirectResolver:mC,persistence:[SR,fR,u1]}),i=A_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(i,location.origin);if(location.origin===c.origin){const f=bC(c.toString());oR(n,f,()=>f(n.currentUser)),lR(n,p=>f(p))}}const l=S_("auth");return l&&GA(n,`http://${l}`),n}function wC(){return document.getElementsByTagName("head")?.[0]??document}VA({loadJS(a){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",a),i.onload=e,i.onerror=l=>{const c=la("internal-error");c.customData=l,n(c)},i.type="text/javascript",i.charset="UTF-8",wC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yC("Browser");var EC="firebase",TC="12.8.0";ki(EC,TC,"app");var Hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Mi,y1;(function(){var a;function e(N,A){function R(){}R.prototype=A.prototype,N.F=A.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(M,k,L){for(var C=Array(arguments.length-2),we=2;we<arguments.length;we++)C[we-2]=arguments[we];return A.prototype[k].apply(M,C)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,A,R){R||(R=0);const M=Array(16);if(typeof A=="string")for(var k=0;k<16;++k)M[k]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(k=0;k<16;++k)M[k]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=N.g[0],R=N.g[1],k=N.g[2];let L=N.g[3],C;C=A+(L^R&(k^L))+M[0]+3614090360&4294967295,A=R+(C<<7&4294967295|C>>>25),C=L+(k^A&(R^k))+M[1]+3905402710&4294967295,L=A+(C<<12&4294967295|C>>>20),C=k+(R^L&(A^R))+M[2]+606105819&4294967295,k=L+(C<<17&4294967295|C>>>15),C=R+(A^k&(L^A))+M[3]+3250441966&4294967295,R=k+(C<<22&4294967295|C>>>10),C=A+(L^R&(k^L))+M[4]+4118548399&4294967295,A=R+(C<<7&4294967295|C>>>25),C=L+(k^A&(R^k))+M[5]+1200080426&4294967295,L=A+(C<<12&4294967295|C>>>20),C=k+(R^L&(A^R))+M[6]+2821735955&4294967295,k=L+(C<<17&4294967295|C>>>15),C=R+(A^k&(L^A))+M[7]+4249261313&4294967295,R=k+(C<<22&4294967295|C>>>10),C=A+(L^R&(k^L))+M[8]+1770035416&4294967295,A=R+(C<<7&4294967295|C>>>25),C=L+(k^A&(R^k))+M[9]+2336552879&4294967295,L=A+(C<<12&4294967295|C>>>20),C=k+(R^L&(A^R))+M[10]+4294925233&4294967295,k=L+(C<<17&4294967295|C>>>15),C=R+(A^k&(L^A))+M[11]+2304563134&4294967295,R=k+(C<<22&4294967295|C>>>10),C=A+(L^R&(k^L))+M[12]+1804603682&4294967295,A=R+(C<<7&4294967295|C>>>25),C=L+(k^A&(R^k))+M[13]+4254626195&4294967295,L=A+(C<<12&4294967295|C>>>20),C=k+(R^L&(A^R))+M[14]+2792965006&4294967295,k=L+(C<<17&4294967295|C>>>15),C=R+(A^k&(L^A))+M[15]+1236535329&4294967295,R=k+(C<<22&4294967295|C>>>10),C=A+(k^L&(R^k))+M[1]+4129170786&4294967295,A=R+(C<<5&4294967295|C>>>27),C=L+(R^k&(A^R))+M[6]+3225465664&4294967295,L=A+(C<<9&4294967295|C>>>23),C=k+(A^R&(L^A))+M[11]+643717713&4294967295,k=L+(C<<14&4294967295|C>>>18),C=R+(L^A&(k^L))+M[0]+3921069994&4294967295,R=k+(C<<20&4294967295|C>>>12),C=A+(k^L&(R^k))+M[5]+3593408605&4294967295,A=R+(C<<5&4294967295|C>>>27),C=L+(R^k&(A^R))+M[10]+38016083&4294967295,L=A+(C<<9&4294967295|C>>>23),C=k+(A^R&(L^A))+M[15]+3634488961&4294967295,k=L+(C<<14&4294967295|C>>>18),C=R+(L^A&(k^L))+M[4]+3889429448&4294967295,R=k+(C<<20&4294967295|C>>>12),C=A+(k^L&(R^k))+M[9]+568446438&4294967295,A=R+(C<<5&4294967295|C>>>27),C=L+(R^k&(A^R))+M[14]+3275163606&4294967295,L=A+(C<<9&4294967295|C>>>23),C=k+(A^R&(L^A))+M[3]+4107603335&4294967295,k=L+(C<<14&4294967295|C>>>18),C=R+(L^A&(k^L))+M[8]+1163531501&4294967295,R=k+(C<<20&4294967295|C>>>12),C=A+(k^L&(R^k))+M[13]+2850285829&4294967295,A=R+(C<<5&4294967295|C>>>27),C=L+(R^k&(A^R))+M[2]+4243563512&4294967295,L=A+(C<<9&4294967295|C>>>23),C=k+(A^R&(L^A))+M[7]+1735328473&4294967295,k=L+(C<<14&4294967295|C>>>18),C=R+(L^A&(k^L))+M[12]+2368359562&4294967295,R=k+(C<<20&4294967295|C>>>12),C=A+(R^k^L)+M[5]+4294588738&4294967295,A=R+(C<<4&4294967295|C>>>28),C=L+(A^R^k)+M[8]+2272392833&4294967295,L=A+(C<<11&4294967295|C>>>21),C=k+(L^A^R)+M[11]+1839030562&4294967295,k=L+(C<<16&4294967295|C>>>16),C=R+(k^L^A)+M[14]+4259657740&4294967295,R=k+(C<<23&4294967295|C>>>9),C=A+(R^k^L)+M[1]+2763975236&4294967295,A=R+(C<<4&4294967295|C>>>28),C=L+(A^R^k)+M[4]+1272893353&4294967295,L=A+(C<<11&4294967295|C>>>21),C=k+(L^A^R)+M[7]+4139469664&4294967295,k=L+(C<<16&4294967295|C>>>16),C=R+(k^L^A)+M[10]+3200236656&4294967295,R=k+(C<<23&4294967295|C>>>9),C=A+(R^k^L)+M[13]+681279174&4294967295,A=R+(C<<4&4294967295|C>>>28),C=L+(A^R^k)+M[0]+3936430074&4294967295,L=A+(C<<11&4294967295|C>>>21),C=k+(L^A^R)+M[3]+3572445317&4294967295,k=L+(C<<16&4294967295|C>>>16),C=R+(k^L^A)+M[6]+76029189&4294967295,R=k+(C<<23&4294967295|C>>>9),C=A+(R^k^L)+M[9]+3654602809&4294967295,A=R+(C<<4&4294967295|C>>>28),C=L+(A^R^k)+M[12]+3873151461&4294967295,L=A+(C<<11&4294967295|C>>>21),C=k+(L^A^R)+M[15]+530742520&4294967295,k=L+(C<<16&4294967295|C>>>16),C=R+(k^L^A)+M[2]+3299628645&4294967295,R=k+(C<<23&4294967295|C>>>9),C=A+(k^(R|~L))+M[0]+4096336452&4294967295,A=R+(C<<6&4294967295|C>>>26),C=L+(R^(A|~k))+M[7]+1126891415&4294967295,L=A+(C<<10&4294967295|C>>>22),C=k+(A^(L|~R))+M[14]+2878612391&4294967295,k=L+(C<<15&4294967295|C>>>17),C=R+(L^(k|~A))+M[5]+4237533241&4294967295,R=k+(C<<21&4294967295|C>>>11),C=A+(k^(R|~L))+M[12]+1700485571&4294967295,A=R+(C<<6&4294967295|C>>>26),C=L+(R^(A|~k))+M[3]+2399980690&4294967295,L=A+(C<<10&4294967295|C>>>22),C=k+(A^(L|~R))+M[10]+4293915773&4294967295,k=L+(C<<15&4294967295|C>>>17),C=R+(L^(k|~A))+M[1]+2240044497&4294967295,R=k+(C<<21&4294967295|C>>>11),C=A+(k^(R|~L))+M[8]+1873313359&4294967295,A=R+(C<<6&4294967295|C>>>26),C=L+(R^(A|~k))+M[15]+4264355552&4294967295,L=A+(C<<10&4294967295|C>>>22),C=k+(A^(L|~R))+M[6]+2734768916&4294967295,k=L+(C<<15&4294967295|C>>>17),C=R+(L^(k|~A))+M[13]+1309151649&4294967295,R=k+(C<<21&4294967295|C>>>11),C=A+(k^(R|~L))+M[4]+4149444226&4294967295,A=R+(C<<6&4294967295|C>>>26),C=L+(R^(A|~k))+M[11]+3174756917&4294967295,L=A+(C<<10&4294967295|C>>>22),C=k+(A^(L|~R))+M[2]+718787259&4294967295,k=L+(C<<15&4294967295|C>>>17),C=R+(L^(k|~A))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+L&4294967295}i.prototype.v=function(N,A){A===void 0&&(A=N.length);const R=A-this.blockSize,M=this.C;let k=this.h,L=0;for(;L<A;){if(k==0)for(;L<=R;)l(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<A;)if(M[k++]=N.charCodeAt(L++),k==this.blockSize){l(this,M),k=0;break}}else for(;L<A;)if(M[k++]=N[L++],k==this.blockSize){l(this,M),k=0;break}}this.h=k,this.o+=A},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;A=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=A&255,A/=256;for(this.v(N),N=Array(16),A=0,R=0;R<4;++R)for(let M=0;M<32;M+=8)N[A++]=this.g[R]>>>M&255;return N};function c(N,A){var R=p;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=A(N)}function f(N,A){this.h=A;const R=[];let M=!0;for(let k=N.length-1;k>=0;k--){const L=N[k]|0;M&&L==A||(R[k]=L,M=!1)}this.g=R}var p={};function g(N){return-128<=N&&N<128?c(N,function(A){return new f([A|0],A<0?-1:0)}):new f([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return w;if(N<0)return P(y(-N));const A=[];let R=1;for(let M=0;N>=R;M++)A[M]=N/R|0,R*=4294967296;return new f(A,0)}function b(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return P(b(N.substring(1),A));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(A,8));let M=w;for(let L=0;L<N.length;L+=8){var k=Math.min(8,N.length-L);const C=parseInt(N.substring(L,L+k),A);k<8?(k=y(Math.pow(A,k)),M=M.j(k).add(y(C))):(M=M.j(R),M=M.add(y(C)))}return M}var w=g(0),S=g(1),j=g(16777216);a=f.prototype,a.m=function(){if(q(this))return-P(this).m();let N=0,A=1;for(let R=0;R<this.g.length;R++){const M=this.i(R);N+=(M>=0?M:4294967296+M)*A,A*=4294967296}return N},a.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(Y(this))return"0";if(q(this))return"-"+P(this).toString(N);const A=y(Math.pow(N,6));var R=this;let M="";for(;;){const k=ue(R,A).g;R=z(R,k.j(A));let L=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=k,Y(R))return L+M;for(;L.length<6;)L="0"+L;M=L+M}},a.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function Y(N){if(N.h!=0)return!1;for(let A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function q(N){return N.h==-1}a.l=function(N){return N=z(this,N),q(N)?-1:Y(N)?0:1};function P(N){const A=N.g.length,R=[];for(let M=0;M<A;M++)R[M]=~N.g[M];return new f(R,~N.h).add(S)}a.abs=function(){return q(this)?P(this):this},a.add=function(N){const A=Math.max(this.g.length,N.g.length),R=[];let M=0;for(let k=0;k<=A;k++){let L=M+(this.i(k)&65535)+(N.i(k)&65535),C=(L>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);M=C>>>16,L&=65535,C&=65535,R[k]=C<<16|L}return new f(R,R[R.length-1]&-2147483648?-1:0)};function z(N,A){return N.add(P(A))}a.j=function(N){if(Y(this)||Y(N))return w;if(q(this))return q(N)?P(this).j(P(N)):P(P(this).j(N));if(q(N))return P(this.j(P(N)));if(this.l(j)<0&&N.l(j)<0)return y(this.m()*N.m());const A=this.g.length+N.g.length,R=[];for(var M=0;M<2*A;M++)R[M]=0;for(M=0;M<this.g.length;M++)for(let k=0;k<N.g.length;k++){const L=this.i(M)>>>16,C=this.i(M)&65535,we=N.i(k)>>>16,Be=N.i(k)&65535;R[2*M+2*k]+=C*Be,U(R,2*M+2*k),R[2*M+2*k+1]+=L*Be,U(R,2*M+2*k+1),R[2*M+2*k+1]+=C*we,U(R,2*M+2*k+1),R[2*M+2*k+2]+=L*we,U(R,2*M+2*k+2)}for(N=0;N<A;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=A;N<2*A;N++)R[N]=0;return new f(R,0)};function U(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function Q(N,A){this.g=N,this.h=A}function ue(N,A){if(Y(A))throw Error("division by zero");if(Y(N))return new Q(w,w);if(q(N))return A=ue(P(N),A),new Q(P(A.g),P(A.h));if(q(A))return A=ue(N,P(A)),new Q(P(A.g),A.h);if(N.g.length>30){if(q(N)||q(A))throw Error("slowDivide_ only works with positive integers.");for(var R=S,M=A;M.l(N)<=0;)R=ce(R),M=ce(M);var k=oe(R,1),L=oe(M,1);for(M=oe(M,2),R=oe(R,2);!Y(M);){var C=L.add(M);C.l(N)<=0&&(k=k.add(R),L=C),M=oe(M,1),R=oe(R,1)}return A=z(N,k.j(A)),new Q(k,A)}for(k=w;N.l(A)>=0;){for(R=Math.max(1,Math.floor(N.m()/A.m())),M=Math.ceil(Math.log(R)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),L=y(R),C=L.j(A);q(C)||C.l(N)>0;)R-=M,L=y(R),C=L.j(A);Y(L)&&(L=S),k=k.add(L),N=z(N,C)}return new Q(k,N)}a.B=function(N){return ue(this,N).h},a.and=function(N){const A=Math.max(this.g.length,N.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)&N.i(M);return new f(R,this.h&N.h)},a.or=function(N){const A=Math.max(this.g.length,N.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)|N.i(M);return new f(R,this.h|N.h)},a.xor=function(N){const A=Math.max(this.g.length,N.g.length),R=[];for(let M=0;M<A;M++)R[M]=this.i(M)^N.i(M);return new f(R,this.h^N.h)};function ce(N){const A=N.g.length+1,R=[];for(let M=0;M<A;M++)R[M]=N.i(M)<<1|N.i(M-1)>>>31;return new f(R,N.h)}function oe(N,A){const R=A>>5;A%=32;const M=N.g.length-R,k=[];for(let L=0;L<M;L++)k[L]=A>0?N.i(L+R)>>>A|N.i(L+R+1)<<32-A:N.i(L+R);return new f(k,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,y1=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=b,Mi=f}).apply(typeof Hv<"u"?Hv:typeof self<"u"?self:typeof window<"u"?window:{});var _h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var x1,dc,v1,kh,lp,b1,_1,w1;(function(){var a,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof _h=="object"&&_h];for(var x=0;x<h.length;++x){var _=h[x];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function l(h,x){if(x)e:{var _=i;h=h.split(".");for(var T=0;T<h.length-1;T++){var $=h[T];if(!($ in _))break e;_=_[$]}h=h[h.length-1],T=_[h],x=x(T),x!=T&&x!=null&&e(_,h,{configurable:!0,writable:!0,value:x})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(x){var _=[],T;for(T in x)Object.prototype.hasOwnProperty.call(x,T)&&_.push([T,x[T]]);return _}});var c=c||{},f=this||self;function p(h){var x=typeof h;return x=="object"&&h!=null||x=="function"}function g(h,x,_){return h.call.apply(h.bind,arguments)}function y(h,x,_){return y=g,y.apply(null,arguments)}function b(h,x){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function w(h,x){function _(){}_.prototype=x.prototype,h.Z=x.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(T,$,W){for(var fe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)fe[Ue-2]=arguments[Ue];return x.prototype[$].apply(T,fe)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function j(h){const x=h.length;if(x>0){const _=Array(x);for(let T=0;T<x;T++)_[T]=h[T];return _}return[]}function Y(h,x){for(let T=1;T<arguments.length;T++){const $=arguments[T];var _=typeof $;if(_=_!="object"?_:$?Array.isArray($)?"array":_:"null",_=="array"||_=="object"&&typeof $.length=="number"){_=h.length||0;const W=$.length||0;h.length=_+W;for(let fe=0;fe<W;fe++)h[_+fe]=$[fe]}else h.push($)}}class q{constructor(x,_){this.i=x,this.j=_,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function P(h){f.setTimeout(()=>{throw h},0)}function z(){var h=N;let x=null;return h.g&&(x=h.g,h.g=h.g.next,h.g||(h.h=null),x.next=null),x}class U{constructor(){this.h=this.g=null}add(x,_){const T=Q.get();T.set(x,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Q=new q(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(x,_){this.h=x,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,oe=!1,N=new U,A=()=>{const h=Promise.resolve(void 0);ce=()=>{h.then(R)}};function R(){for(var h;h=z();){try{h.h.call(h.g)}catch(_){P(_)}var x=Q;x.j(h),x.h<100&&(x.h++,h.next=x.g,x.g=h)}oe=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,x){this.type=h,this.g=this.target=x,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,x=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};f.addEventListener("test",_,x),f.removeEventListener("test",_,x)}catch{}return h})();function C(h){return/^[\s\xa0]*$/.test(h)}function we(h,x){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,x)}w(we,k),we.prototype.init=function(h,x){const _=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=x,x=h.relatedTarget,x||(_=="mouseover"?x=h.fromElement:_=="mouseout"&&(x=h.toElement)),this.relatedTarget=x,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Be="closure_listenable_"+(Math.random()*1e6|0),J=0;function he(h,x,_,T,$){this.listener=h,this.proxy=null,this.src=x,this.type=_,this.capture=!!T,this.ha=$,this.key=++J,this.da=this.fa=!1}function be(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Me(h,x,_){for(const T in h)x.call(_,h[T],T,h)}function He(h,x){for(const _ in h)x.call(void 0,h[_],_,h)}function O(h){const x={};for(const _ in h)x[_]=h[_];return x}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(h,x){let _,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(_ in T)h[_]=T[_];for(let W=0;W<ee.length;W++)_=ee[W],Object.prototype.hasOwnProperty.call(T,_)&&(h[_]=T[_])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,x,_,T,$){const W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);const fe=De(h,x,T,$);return fe>-1?(x=h[fe],_||(x.fa=!1)):(x=new he(x,this.src,W,!!T,$),x.fa=_,h.push(x)),x};function Ae(h,x){const _=x.type;if(_ in h.g){var T=h.g[_],$=Array.prototype.indexOf.call(T,x,void 0),W;(W=$>=0)&&Array.prototype.splice.call(T,$,1),W&&(be(x),h.g[_].length==0&&(delete h.g[_],h.h--))}}function De(h,x,_,T){for(let $=0;$<h.length;++$){const W=h[$];if(!W.da&&W.listener==x&&W.capture==!!_&&W.ha==T)return $}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),yt={};function Fe(h,x,_,T,$){if(Array.isArray(x)){for(let W=0;W<x.length;W++)Fe(h,x[W],_,T,$);return null}return _=xe(_),h&&h[Be]?h.J(x,_,p(T)?!!T.capture:!1,$):un(h,x,_,!1,T,$)}function un(h,x,_,T,$,W){if(!x)throw Error("Invalid event type");const fe=p($)?!!$.capture:!!$;let Ue=wn(h);if(Ue||(h[Le]=Ue=new me(h)),_=Ue.add(x,_,T,fe,W),_.proxy)return _;if(T=hn(),_.proxy=T,T.src=h,T.listener=_,h.addEventListener)L||($=fe),$===void 0&&($=!1),h.addEventListener(x.toString(),T,$);else if(h.attachEvent)h.attachEvent(Dt(x.toString()),T);else if(h.addListener&&h.removeListener)h.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function hn(){function h(_){return x.call(h.src,h.listener,_)}const x=zt;return h}function _n(h,x,_,T,$){if(Array.isArray(x))for(var W=0;W<x.length;W++)_n(h,x[W],_,T,$);else T=p(T)?!!T.capture:!!T,_=xe(_),h&&h[Be]?(h=h.i,W=String(x).toString(),W in h.g&&(x=h.g[W],_=De(x,_,T,$),_>-1&&(be(x[_]),Array.prototype.splice.call(x,_,1),x.length==0&&(delete h.g[W],h.h--)))):h&&(h=wn(h))&&(x=h.g[x.toString()],h=-1,x&&(h=De(x,_,T,$)),(_=h>-1?x[h]:null)&&en(_))}function en(h){if(typeof h!="number"&&h&&!h.da){var x=h.src;if(x&&x[Be])Ae(x.i,h);else{var _=h.type,T=h.proxy;x.removeEventListener?x.removeEventListener(_,T,h.capture):x.detachEvent?x.detachEvent(Dt(_),T):x.addListener&&x.removeListener&&x.removeListener(T),(_=wn(x))?(Ae(_,h),_.h==0&&(_.src=null,x[Le]=null)):be(h)}}}function Dt(h){return h in yt?yt[h]:yt[h]="on"+h}function zt(h,x){if(h.da)h=!0;else{x=new we(x,this);const _=h.listener,T=h.ha||h.src;h.fa&&en(h),h=_.call(T,x)}return h}function wn(h){return h=h[Le],h instanceof me?h:null}var En="__closure_events_fn_"+(Math.random()*1e9>>>0);function xe(h){return typeof h=="function"?h:(h[En]||(h[En]=function(x){return h.handleEvent(x)}),h[En])}function ye(){M.call(this),this.i=new me(this),this.M=this,this.G=null}w(ye,M),ye.prototype[Be]=!0,ye.prototype.removeEventListener=function(h,x,_,T){_n(this,h,x,_,T)};function Ce(h,x){var _,T=h.G;if(T)for(_=[];T;T=T.G)_.push(T);if(h=h.M,T=x.type||x,typeof x=="string")x=new k(x,h);else if(x instanceof k)x.target=x.target||h;else{var $=x;x=new k(T,h),de(x,$)}$=!0;let W,fe;if(_)for(fe=_.length-1;fe>=0;fe--)W=x.g=_[fe],$=vt(W,T,!0,x)&&$;if(W=x.g=h,$=vt(W,T,!0,x)&&$,$=vt(W,T,!1,x)&&$,_)for(fe=0;fe<_.length;fe++)W=x.g=_[fe],$=vt(W,T,!1,x)&&$}ye.prototype.N=function(){if(ye.Z.N.call(this),this.i){var h=this.i;for(const x in h.g){const _=h.g[x];for(let T=0;T<_.length;T++)be(_[T]);delete h.g[x],h.h--}}this.G=null},ye.prototype.J=function(h,x,_,T){return this.i.add(String(h),x,!1,_,T)},ye.prototype.K=function(h,x,_,T){return this.i.add(String(h),x,!0,_,T)};function vt(h,x,_,T){if(x=h.i.g[String(x)],!x)return!0;x=x.concat();let $=!0;for(let W=0;W<x.length;++W){const fe=x[W];if(fe&&!fe.da&&fe.capture==_){const Ue=fe.listener,Ot=fe.ha||fe.src;fe.fa&&Ae(h.i,fe),$=Ue.call(Ot,T)!==!1&&$}}return $&&!T.defaultPrevented}function B(h,x){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:f.setTimeout(h,x||0)}function H(h){h.g=B(()=>{h.g=null,h.i&&(h.i=!1,H(h))},h.l);const x=h.h;h.h=null,h.m.apply(null,x)}class re extends M{constructor(x,_){super(),this.m=x,this.l=_,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:H(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(h){M.call(this),this.h=h,this.g={}}w(se,M);var ke=[];function $e(h){Me(h.g,function(x,_){this.g.hasOwnProperty(_)&&en(x)},h),h.g={}}se.prototype.N=function(){se.Z.N.call(this),$e(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ee=f.JSON.stringify,st=f.JSON.parse,Tt=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function ts(){}function Ps(){}var Bt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){k.call(this,"d")}w(tn,k);function dn(){k.call(this,"c")}w(dn,k);var Rt={},zr=null;function Ga(){return zr=zr||new ye}Rt.Ia="serverreachability";function Ya(h){k.call(this,Rt.Ia,h)}w(Ya,k);function ns(h){const x=Ga();Ce(x,new Ya(x))}Rt.STAT_EVENT="statevent";function ma(h,x){k.call(this,Rt.STAT_EVENT,h),this.stat=x}w(ma,k);function qt(h){const x=Ga();Ce(x,new ma(x,h))}Rt.Ja="timingevent";function Ls(h,x){k.call(this,Rt.Ja,h),this.size=x}w(Ls,k);function Us(h,x){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},x)}function bs(){this.g=!0}bs.prototype.ua=function(){this.g=!1};function Cd(h,x,_,T,$,W){h.info(function(){if(h.g)if(W){var fe="",Ue=W.split("&");for(let lt=0;lt<Ue.length;lt++){var Ot=Ue[lt].split("=");if(Ot.length>1){const St=Ot[0];Ot=Ot[1];const rs=St.split("_");fe=rs.length>=2&&rs[1]=="type"?fe+(St+"="+Ot+"&"):fe+(St+"=redacted&")}}}else fe=null;else fe=W;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+x+`
`+_+`
`+fe})}function Xc(h,x,_,T,$,W,fe){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+x+`
`+_+`
`+W+" "+fe})}function zs(h,x,_,T){h.info(function(){return"XMLHTTP TEXT ("+x+"): "+jd(h,_)+(T?" "+T:"")})}function Ki(h,x){h.info(function(){return"TIMEOUT: "+x})}bs.prototype.info=function(){};function jd(h,x){if(!h.g)return x;if(!x)return null;try{const W=JSON.parse(x);if(W){for(h=0;h<W.length;h++)if(Array.isArray(W[h])){var _=W[h];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var $=T[0];if($!="noop"&&$!="stop"&&$!="close")for(let fe=1;fe<T.length;fe++)T[fe]=""}}}}return Ee(W)}catch{return x}}var Qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ro={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},lo;function Xi(){}w(Xi,ts),Xi.prototype.g=function(){return new XMLHttpRequest},lo=new Xi;function pa(h){return encodeURIComponent(String(h))}function Wc(h){var x=1;h=h.split(":");const _=[];for(;x>0&&h.length;)_.push(h.shift()),x--;return h.length&&_.push(h.join(":")),_}function _s(h,x,_,T){this.j=h,this.i=x,this.l=_,this.S=T||1,this.V=new se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ws}function ws(){this.i=null,this.g="",this.h=!1}var Ht={},rn={};function Bs(h,x,_){h.M=1,h.A=Wi($t(x)),h.u=_,h.R=!0,Br(h,null)}function Br(h,x){h.F=Date.now(),qs(h),h.B=$t(h.A);var _=h.B,T=h.S;Array.isArray(T)||(T=[String(T)]),$r(_.i,"t",T),h.C=0,_=h.j.L,h.h=new ws,h.g=du(h.j,_?x:null,!h.u),h.P>0&&(h.O=new re(y(h.Y,h,h.g),h.P)),x=h.V,_=h.g,T=h.ba;var $="readystatechange";Array.isArray($)||($&&(ke[0]=$.toString()),$=ke);for(let W=0;W<$.length;W++){const fe=Fe(_,$[W],T||x.handleEvent,!1,x.h||x);if(!fe)break;x.g[fe.key]=fe}x=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,x)):(h.v="GET",h.g.ea(h.B,h.v,null,x)),ns(),Cd(h.i,h.v,h.B,h.l,h.S,h.u)}_s.prototype.ba=function(h){h=h.target;const x=this.O;x&&Ss(h)==3?x.j():this.Y(h)},_s.prototype.Y=function(h){try{if(h==this.g)e:{const Ue=Ss(this.g),Ot=this.g.ya(),lt=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||fn(this.g)))){this.K||Ue!=4||Ot==7||(Ot==8||lt<=0?ns(3):ns(2)),Hs(this);var x=this.g.ca();this.X=x;var _=Id(this);if(this.o=x==200,Xc(this.i,this.v,this.B,this.l,this.S,Ue,x),this.o){if(this.U&&!this.L){t:{if(this.g){var T,$=this.g;if((T=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(T)){var W=T;break t}}W=null}if(h=W)zs(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Fs(this,h);else{this.o=!1,this.m=3,qt(12),qn(this),ss(this);break e}}if(this.R){h=!0;let St;for(;!this.K&&this.C<_.length;)if(St=Zc(this,_),St==rn){Ue==4&&(this.m=4,qt(14),h=!1),zs(this.i,this.l,null,"[Incomplete Response]");break}else if(St==Ht){this.m=4,qt(15),zs(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else zs(this.i,this.l,St,null),Fs(this,St);if(Jc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||_.length!=0||this.h.h||(this.m=1,qt(16),h=!1),this.o=this.o&&h,!h)zs(this.i,this.l,_,"[Invalid Chunked Response]"),qn(this),ss(this);else if(_.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Eo(fe),fe.P=!0,qt(11))}}else zs(this.i,this.l,_,null),Fs(this,_);Ue==4&&qn(this),this.o&&!this.K&&(Ue==4?ou(this.j,this):(this.o=!1,qs(this)))}else ya(this.g),x==400&&_.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),qn(this),ss(this)}}}catch{}};function Id(h){if(!Jc(h))return h.g.la();const x=fn(h.g);if(x==="")return"";let _="";const T=x.length,$=Ss(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return qn(h),ss(h),"";h.h.i=new f.TextDecoder}for(let W=0;W<T;W++)h.h.h=!0,_+=h.h.i.decode(x[W],{stream:!($&&W==T-1)});return x.length=0,h.h.g+=_,h.C=0,h.h.g}function Jc(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Zc(h,x){var _=h.C,T=x.indexOf(`
`,_);return T==-1?rn:(_=Number(x.substring(_,T)),isNaN(_)?Ht:(T+=1,T+_>x.length?rn:(x=x.slice(T,T+_),h.C=T+_,x)))}_s.prototype.cancel=function(){this.K=!0,qn(this)};function qs(h){h.T=Date.now()+h.H,qr(h,h.H)}function qr(h,x){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Us(y(h.aa,h),x)}function Hs(h){h.D&&(f.clearTimeout(h.D),h.D=null)}_s.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ki(this.i,this.B),this.M!=2&&(ns(),qt(17)),qn(this),this.m=2,ss(this)):qr(this,this.T-h)};function ss(h){h.j.I==0||h.K||ou(h.j,h)}function qn(h){Hs(h);var x=h.O;x&&typeof x.dispose=="function"&&x.dispose(),h.O=null,$e(h.V),h.g&&(x=h.g,h.g=null,x.abort(),x.dispose())}function Fs(h,x){try{var _=h.j;if(_.I!=0&&(_.g==h||Gs(_.h,h))){if(!h.L&&Gs(_.h,h)&&_.I==3){try{var T=_.Ba.g.parse(x)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Xr(_),ti(_);else break e;ar(_),qt(18)}}else _.xa=$[1],0<_.xa-_.K&&$[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Us(y(_.Va,_),6e3));$s(_.h)<=1&&_.ta&&(_.ta=void 0)}else Js(_,11)}else if((h.L||_.g==h)&&Xr(_),!C(x))for($=_.Ba.g.parse(x),x=0;x<$.length;x++){let lt=$[x];const St=lt[0];if(!(St<=_.K))if(_.K=St,lt=lt[1],_.I==2)if(lt[0]=="c"){_.M=lt[1],_.ba=lt[2];const rs=lt[3];rs!=null&&(_.ka=rs,_.j.info("VER="+_.ka));const Zs=lt[4];Zs!=null&&(_.za=Zs,_.j.info("SVER="+_.za));const Ns=lt[5];Ns!=null&&typeof Ns=="number"&&Ns>0&&(T=1.5*Ns,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const As=h.g;if(As){const ir=As.g?As.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ir){var W=T.h;W.g||ir.indexOf("spdy")==-1&&ir.indexOf("quic")==-1&&ir.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(uo(W,W.h),W.h=null))}if(T.G){const Wr=As.g?As.g.getResponseHeader("X-HTTP-Session-Id"):null;Wr&&(T.wa=Wr,ut(T.J,T.G,Wr))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var fe=h;if(T.na=hu(T,T.L?T.ba:null,T.W),fe.L){ho(T.h,fe);var Ue=fe,Ot=T.O;Ot&&(Ue.H=Ot),Ue.D&&(Hs(Ue),qs(Ue)),T.g=fe}else ru(T);_.i.length>0&&Ws(_)}else lt[0]!="stop"&&lt[0]!="close"||Js(_,7);else _.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Js(_,7):_o(_):lt[0]!="noop"&&_.l&&_.l.qa(lt),_.A=0)}}ns(4)}catch{}}var Ft=class{constructor(h,x){this.g=h,this.map=x}};function oo(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function co(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function $s(h){return h.h?1:h.g?h.g.size:0}function Gs(h,x){return h.h?h.h==x:h.g?h.g.has(x):!1}function uo(h,x){h.g?h.g.add(x):h.h=x}function ho(h,x){h.h&&h.h==x?h.h=null:h.g&&h.g.has(x)&&h.g.delete(x)}oo.prototype.cancel=function(){if(this.i=fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function fo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let x=h.i;for(const _ of h.g.values())x=x.concat(_.G);return x}return j(h.i)}var eu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hr(h,x){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const T=h[_].indexOf("=");let $,W=null;T>=0?($=h[_].substring(0,T),W=h[_].substring(T+1)):$=h[_],x($,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Hn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;h instanceof Hn?(this.l=h.l,ln(this,h.j),this.o=h.o,this.g=h.g,Ka(this,h.u),this.h=h.h,mo(this,au(h.i)),this.m=h.m):h&&(x=String(h).match(eu))?(this.l=!1,ln(this,x[1]||"",!0),this.o=Ys(x[2]||""),this.g=Ys(x[3]||"",!0),Ka(this,x[4]),this.h=Ys(x[5]||"",!0),mo(this,x[6]||"",!0),this.m=Ys(x[7]||"")):(this.l=!1,this.i=new Xa(null,this.l))}Hn.prototype.toString=function(){const h=[];var x=this.j;x&&h.push(Ji(x,Fr,!0),":");var _=this.g;return(_||x=="file")&&(h.push("//"),(x=this.o)&&h.push(Ji(x,Fr,!0),"@"),h.push(pa(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Ji(_,_.charAt(0)=="/"?po:tu,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Ji(_,nu)),h.join("")},Hn.prototype.resolve=function(h){const x=$t(this);let _=!!h.j;_?ln(x,h.j):_=!!h.o,_?x.o=h.o:_=!!h.g,_?x.g=h.g:_=h.u!=null;var T=h.h;if(_)Ka(x,h.u);else if(_=!!h.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var $=x.h.lastIndexOf("/");$!=-1&&(T=x.h.slice(0,$+1)+T)}if($=T,$==".."||$==".")T="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){T=$.lastIndexOf("/",0)==0,$=$.split("/");const W=[];for(let fe=0;fe<$.length;){const Ue=$[fe++];Ue=="."?T&&fe==$.length&&W.push(""):Ue==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),T&&fe==$.length&&W.push("")):(W.push(Ue),T=!0)}T=W.join("/")}else T=$}return _?x.h=T:_=h.i.toString()!=="",_?mo(x,au(h.i)):_=!!h.m,_&&(x.m=h.m),x};function $t(h){return new Hn(h)}function ln(h,x,_){h.j=_?Ys(x,!0):x,h.j&&(h.j=h.j.replace(/:$/,""))}function Ka(h,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);h.u=x}else h.u=null}function mo(h,x,_){x instanceof Xa?(h.i=x,Gr(h.i,h.l)):(_||(x=Ji(x,Qa)),h.i=new Xa(x,h.l))}function ut(h,x,_){h.i.set(x,_)}function Wi(h){return ut(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ys(h,x){return h?x?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ji(h,x,_){return typeof h=="string"?(h=encodeURI(h).replace(x,In),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function In(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Fr=/[#\/\?@]/g,tu=/[#\?:]/g,po=/[#\?]/g,Qa=/[#\?@]/g,nu=/#/g;function Xa(h,x){this.h=this.g=null,this.i=h||null,this.j=!!x}function Dn(h){h.g||(h.g=new Map,h.h=0,h.i&&Hr(h.i,function(x,_){h.add(decodeURIComponent(x.replace(/\+/g," ")),_)}))}a=Xa.prototype,a.add=function(h,x){Dn(this),this.i=null,h=Wa(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(x),this.h+=1,this};function su(h,x){Dn(h),x=Wa(h,x),h.g.has(x)&&(h.i=null,h.h-=h.g.get(x).length,h.g.delete(x))}function go(h,x){return Dn(h),x=Wa(h,x),h.g.has(x)}a.forEach=function(h,x){Dn(this),this.g.forEach(function(_,T){_.forEach(function($){h.call(x,$,T,this)},this)},this)};function yo(h,x){Dn(h);let _=[];if(typeof x=="string")go(h,x)&&(_=_.concat(h.g.get(Wa(h,x))));else for(h=Array.from(h.g.values()),x=0;x<h.length;x++)_=_.concat(h[x]);return _}a.set=function(h,x){return Dn(this),this.i=null,h=Wa(this,h),go(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[x]),this.h+=1,this},a.get=function(h,x){return h?(h=yo(this,h),h.length>0?String(h[0]):x):x};function $r(h,x,_){su(h,x),_.length>0&&(h.i=null,h.g.set(Wa(h,x),j(_)),h.h+=_.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],x=Array.from(this.g.keys());for(let T=0;T<x.length;T++){var _=x[T];const $=pa(_);_=yo(this,_);for(let W=0;W<_.length;W++){let fe=$;_[W]!==""&&(fe+="="+pa(_[W])),h.push(fe)}}return this.i=h.join("&")};function au(h){const x=new Xa;return x.i=h.i,h.g&&(x.g=new Map(h.g),x.h=h.h),x}function Wa(h,x){return x=String(x),h.j&&(x=x.toLowerCase()),x}function Gr(h,x){x&&!h.j&&(Dn(h),h.i=null,h.g.forEach(function(_,T){const $=T.toLowerCase();T!=$&&(su(this,T),$r(this,$,_))},h)),h.j=x}function Es(h,x){const _=new bs;if(f.Image){const T=new Image;T.onload=b(as,_,"TestLoadImage: loaded",!0,x,T),T.onerror=b(as,_,"TestLoadImage: error",!1,x,T),T.onabort=b(as,_,"TestLoadImage: abort",!1,x,T),T.ontimeout=b(as,_,"TestLoadImage: timeout",!1,x,T),f.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else x(!1)}function xo(h,x){const _=new bs,T=new AbortController,$=setTimeout(()=>{T.abort(),as(_,"TestPingServer: timeout",!1,x)},1e4);fetch(h,{signal:T.signal}).then(W=>{clearTimeout($),W.ok?as(_,"TestPingServer: ok",!0,x):as(_,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout($),as(_,"TestPingServer: error",!1,x)})}function as(h,x,_,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(_)}catch{}}function Ja(){this.g=new Tt}function Ks(h){this.i=h.Sb||null,this.h=h.ab||!1}w(Ks,ts),Ks.prototype.g=function(){return new Zi(this.i,this.h)};function Zi(h,x){ye.call(this),this.H=h,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Zi,ye),a=Zi.prototype,a.open=function(h,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=x,this.readyState=1,Ts(this)},a.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(x.body=h),(this.H||f).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Za(this)),this.readyState=0},a.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ts(this)),this.g&&(this.readyState=3,Ts(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yr(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yr(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}a.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var x=h.value?h.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!h.done}))&&(this.response=this.responseText+=x)}h.done?Za(this):Ts(this),this.readyState==3&&Yr(this)}},a.Oa=function(h){this.g&&(this.response=this.responseText=h,Za(this))},a.Na=function(h){this.g&&(this.response=h,Za(this))},a.ga=function(){this.g&&Za(this)};function Za(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Ts(h)}a.setRequestHeader=function(h,x){this.A.append(h,x)},a.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],x=this.h.entries();for(var _=x.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=x.next();return h.join(`\r
`)};function Ts(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function is(h){let x="";return Me(h,function(_,T){x+=T,x+=":",x+=_,x+=`\r
`}),x}function er(h,x,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=is(_),typeof h=="string"?_!=null&&pa(_):ut(h,x,_))}function ft(h){ye.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(ft,ye);var Qs=/^https?$/i,vo=["POST","PUT"];a=ft.prototype,a.Fa=function(h){this.H=h},a.ea=function(h,x,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);x=x?x.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():lo.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(x,String(h),!0),this.B=!1}catch(W){tr(this,W);return}if(h=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)_.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const W of T.keys())_.set(W,T.get(W));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),$=f.FormData&&h instanceof f.FormData,!(Array.prototype.indexOf.call(vo,x,void 0)>=0)||T||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,fe]of _)this.g.setRequestHeader(W,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(W){tr(this,W)}};function tr(h,x){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=x,h.o=5,bo(h),ga(h)}function bo(h){h.A||(h.A=!0,Ce(h,"complete"),Ce(h,"error"))}a.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ce(this,"complete"),Ce(this,"abort"),ga(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ga(this,!0)),ft.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?nr(this):this.Xa())},a.Xa=function(){nr(this)};function nr(h){if(h.h&&typeof c<"u"){if(h.v&&Ss(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ce(h,"readystatechange"),Ss(h)==4){h.h=!1;try{const W=h.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var _;if(!(_=x)){var T;if(T=W===0){let fe=String(h.D).match(eu)[1]||null;!fe&&f.self&&f.self.location&&(fe=f.self.location.protocol.slice(0,-1)),T=!Qs.test(fe?fe.toLowerCase():"")}_=T}if(_)Ce(h,"complete"),Ce(h,"success");else{h.o=6;try{var $=Ss(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",bo(h)}}finally{ga(h)}}}}function ga(h,x){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,x||Ce(h,"ready");try{_.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function Ss(h){return h.g?h.g.readyState:0}a.ca=function(){try{return Ss(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(h){if(this.g){var x=this.g.responseText;return h&&x.indexOf(h)==0&&(x=x.substring(h.length)),st(x)}};function fn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(h){const x={};h=(h.g&&Ss(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<h.length;T++){if(C(h[T]))continue;var _=Wc(h[T]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=x[$]||[];x[$]=W,W.push(_)}He(x,function(T){return T.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(h,x,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||x}function ei(h){this.za=0,this.i=[],this.j=new bs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xs("baseRetryDelayMs",5e3,h),this.Za=Xs("retryDelaySeedMs",1e4,h),this.Ta=Xs("forwardChannelMaxRetries",2,h),this.va=Xs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new oo(h&&h.concurrentRequestLimit),this.Ba=new Ja,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=ei.prototype,a.ka=8,a.I=1,a.connect=function(h,x,_,T){qt(0),this.W=h,this.H=x||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=hu(this,null,this.W),Ws(this)};function _o(h){if(Kr(h),h.I==3){var x=h.V++,_=$t(h.J);if(ut(_,"SID",h.M),ut(_,"RID",x),ut(_,"TYPE","terminate"),sr(h,_),x=new _s(h,h.j,x),x.M=2,x.A=Wi($t(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(x.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=x.A,_=!0),_||(x.g=du(x.j,null),x.g.ea(x.A)),x.F=Date.now(),qs(x)}uu(h)}function ti(h){h.g&&(Eo(h),h.g.cancel(),h.g=null)}function Kr(h){ti(h),h.v&&(f.clearTimeout(h.v),h.v=null),Xr(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&f.clearTimeout(h.m),h.m=null)}function Ws(h){if(!co(h.h)&&!h.m){h.m=!0;var x=h.Ea;ce||A(),oe||(ce(),oe=!0),N.add(x,h),h.D=0}}function Qr(h,x){return $s(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=x.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Us(y(h.Ea,h,x),cu(h,h.D)),h.D++,!0)}a.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new _s(this,this.j,h);let W=this.o;if(this.U&&(W?(W=O(W),de(W,this.U)):W=this.U),this.u!==null||this.R||($.J=W,W=null),this.S)e:{for(var x=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(x+=T,x>4096){x=_;break e}if(x===4096||_===this.i.length-1){x=_+1;break e}}x=1e3}else x=1e3;x=iu(this,$,x),_=$t(this.J),ut(_,"RID",h),ut(_,"CVER",22),this.G&&ut(_,"X-HTTP-Session-Id",this.G),sr(this,_),W&&(this.R?x="headers="+pa(is(W))+"&"+x:this.u&&er(_,this.u,W)),uo(this.h,$),this.Ra&&ut(_,"TYPE","init"),this.S?(ut(_,"$req",x),ut(_,"SID","null"),$.U=!0,Bs($,_,null)):Bs($,_,x),this.I=2}}else this.I==3&&(h?wo(this,h):this.i.length==0||co(this.h)||wo(this))};function wo(h,x){var _;x?_=x.l:_=h.V++;const T=$t(h.J);ut(T,"SID",h.M),ut(T,"RID",_),ut(T,"AID",h.K),sr(h,T),h.u&&h.o&&er(T,h.u,h.o),_=new _s(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),x&&(h.i=x.G.concat(h.i)),x=iu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),uo(h.h,_),Bs(_,T,x)}function sr(h,x){h.H&&Me(h.H,function(_,T){ut(x,T,_)}),h.l&&Me({},function(_,T){ut(x,T,_)})}function iu(h,x,_){_=Math.min(h.i.length,_);const T=h.l?y(h.l.Ka,h.l,h):null;e:{var $=h.i;let Ue=-1;for(;;){const Ot=["count="+_];Ue==-1?_>0?(Ue=$[0].g,Ot.push("ofs="+Ue)):Ue=0:Ot.push("ofs="+Ue);let lt=!0;for(let St=0;St<_;St++){var W=$[St].g;const rs=$[St].map;if(W-=Ue,W<0)Ue=Math.max(0,$[St].g-100),lt=!1;else try{W="req"+W+"_"||"";try{var fe=rs instanceof Map?rs:Object.entries(rs);for(const[Zs,Ns]of fe){let As=Ns;p(Ns)&&(As=Ee(Ns)),Ot.push(W+Zs+"="+encodeURIComponent(As))}}catch(Zs){throw Ot.push(W+"type="+encodeURIComponent("_badmap")),Zs}}catch{T&&T(rs)}}if(lt){fe=Ot.join("&");break e}}fe=void 0}return h=h.i.splice(0,_),x.G=h,fe}function ru(h){if(!h.g&&!h.v){h.Y=1;var x=h.Da;ce||A(),oe||(ce(),oe=!0),N.add(x,h),h.A=0}}function ar(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Us(y(h.Da,h),cu(h,h.A)),h.A++,!0)}a.Da=function(){if(this.v=null,lu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Us(y(this.Wa,this),h)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),ti(this),lu(this))};function Eo(h){h.B!=null&&(f.clearTimeout(h.B),h.B=null)}function lu(h){h.g=new _s(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var x=$t(h.na);ut(x,"RID","rpc"),ut(x,"SID",h.M),ut(x,"AID",h.K),ut(x,"CI",h.F?"0":"1"),!h.F&&h.ia&&ut(x,"TO",h.ia),ut(x,"TYPE","xmlhttp"),sr(h,x),h.u&&h.o&&er(x,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Wi($t(x)),_.u=null,_.R=!0,Br(_,h)}a.Va=function(){this.C!=null&&(this.C=null,ti(this),ar(this),qt(19))};function Xr(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function ou(h,x){var _=null;if(h.g==x){Xr(h),Eo(h),h.g=null;var T=2}else if(Gs(h.h,x))_=x.G,ho(h.h,x),T=1;else return;if(h.I!=0){if(x.o)if(T==1){_=x.u?x.u.length:0,x=Date.now()-x.F;var $=h.D;T=Ga(),Ce(T,new Ls(T,_)),Ws(h)}else ru(h);else if($=x.m,$==3||$==0&&x.X>0||!(T==1&&Qr(h,x)||T==2&&ar(h)))switch(_&&_.length>0&&(x=h.h,x.i=x.i.concat(_)),$){case 1:Js(h,5);break;case 4:Js(h,10);break;case 3:Js(h,6);break;default:Js(h,2)}}}function cu(h,x){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*x}function Js(h,x){if(h.j.info("Error code "+x),x==2){var _=y(h.bb,h),T=h.Ua;const $=!T;T=new Hn(T||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ln(T,"https"),Wi(T),$?Es(T.toString(),_):xo(T.toString(),_)}else qt(2);h.I=0,h.l&&h.l.pa(x),uu(h),Kr(h)}a.bb=function(h){h?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function uu(h){if(h.I=0,h.ja=[],h.l){const x=fo(h.h);(x.length!=0||h.i.length!=0)&&(Y(h.ja,x),Y(h.ja,h.i),h.h.i.length=0,j(h.i),h.i.length=0),h.l.oa()}}function hu(h,x,_){var T=_ instanceof Hn?$t(_):new Hn(_);if(T.g!="")x&&(T.g=x+"."+T.g),Ka(T,T.u);else{var $=f.location;T=$.protocol,x=x?x+"."+$.hostname:$.hostname,$=+$.port;const W=new Hn(null);T&&ln(W,T),x&&(W.g=x),$&&Ka(W,$),_&&(W.h=_),T=W}return _=h.G,x=h.wa,_&&x&&ut(T,_,x),ut(T,"VER",h.ka),sr(h,T),T}function du(h,x,_){if(x&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=h.Aa&&!h.ma?new ft(new Ks({ab:_})):new ft(h.ma),x.Fa(h.L),x}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function fu(){}a=fu.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function ni(){}ni.prototype.g=function(h,x){return new Cn(h,x)};function Cn(h,x){ye.call(this),this.g=new ei(x),this.l=h,this.h=x&&x.messageUrlParams||null,h=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(h?h["X-WebChannel-Content-Type"]=x.messageContentType:h={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(h?h["X-WebChannel-Client-Profile"]=x.sa:h={"X-WebChannel-Client-Profile":x.sa}),this.g.U=h,(h=x&&x.Qb)&&!C(h)&&(this.g.u=h),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!C(x)&&(this.g.G=x,h=this.h,h!==null&&x in h&&(h=this.h,x in h&&delete h[x])),this.j=new xa(this)}w(Cn,ye),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){_o(this.g)},Cn.prototype.o=function(h){var x=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Ee(h),h=_);x.i.push(new Ft(x.Ya++,h)),x.I==3&&Ws(x)},Cn.prototype.N=function(){this.g.l=null,delete this.j,_o(this.g),delete this.g,Cn.Z.N.call(this)};function mu(h){tn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var x=h.__sm__;if(x){e:{for(const _ in x){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,x=x!==null&&h in x?x[h]:void 0),this.data=x}else this.data=h}w(mu,tn);function pu(){dn.call(this),this.status=1}w(pu,dn);function xa(h){this.g=h}w(xa,fu),xa.prototype.ra=function(){Ce(this.g,"a")},xa.prototype.qa=function(h){Ce(this.g,new mu(h))},xa.prototype.pa=function(h){Ce(this.g,new pu)},xa.prototype.oa=function(){Ce(this.g,"b")},ni.prototype.createWebChannel=ni.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,w1=function(){return new ni},_1=function(){return Ga()},b1=Rt,lp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qi.NO_ERROR=0,Qi.TIMEOUT=8,Qi.HTTP_ERROR=6,kh=Qi,ro.COMPLETE="complete",v1=ro,Ps.EventType=Bt,Bt.OPEN="a",Bt.CLOSE="b",Bt.ERROR="c",Bt.MESSAGE="d",ye.prototype.listen=ye.prototype.J,dc=Ps,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,x1=ft}).apply(typeof _h<"u"?_h:typeof self<"u"?self:typeof window<"u"?window:{});let Nn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");let to="12.8.0";function SC(a){to=a}const jr=new Op("@firebase/firestore");function Al(){return jr.logLevel}function ge(a,...e){if(jr.logLevel<=Je.DEBUG){const n=e.map(Gp);jr.debug(`Firestore (${to}): ${a}`,...n)}}function Ha(a,...e){if(jr.logLevel<=Je.ERROR){const n=e.map(Gp);jr.error(`Firestore (${to}): ${a}`,...n)}}function Bl(a,...e){if(jr.logLevel<=Je.WARN){const n=e.map(Gp);jr.warn(`Firestore (${to}): ${a}`,...n)}}function Gp(a){if(typeof a=="string")return a;try{return(function(n){return JSON.stringify(n)})(a)}catch{return a}}function Ie(a,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,E1(a,i,n)}function E1(a,e,n){let i=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ha(i),new Error(i)}function ct(a,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,a||E1(e,l,i)}function Pe(a,e){return a}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends $a{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class T1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Nn.UNAUTHENTICATED)))}shutdown(){}}class AC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class RC{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let c=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Oi,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Oi)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct(typeof i.accessToken=="string",31837,{l:i}),new T1(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class CC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class jC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new CC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ps(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const i=c=>{c.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,ge("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>i(c)))};const l=c=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Fv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function DC(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<a;i++)n[i]=Math.floor(256*Math.random());return n}class Yp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=DC(40);for(let c=0;c<l.length;++c)i.length<20&&l[c]<n&&(i+=e.charAt(l[c]%62))}return i}}function Ze(a,e){return a<e?-1:a>e?1:0}function op(a,e){const n=Math.min(a.length,e.length);for(let i=0;i<n;i++){const l=a.charAt(i),c=e.charAt(i);if(l!==c)return qm(l)===qm(c)?Ze(l,c):qm(l)?1:-1}return Ze(a.length,e.length)}const kC=55296,MC=57343;function qm(a){const e=a.charCodeAt(0);return e>=kC&&e<=MC}function ql(a,e,n){return a.length===e.length&&a.every(((i,l)=>n(i,e[l])))}const $v="__name__";class ia{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ie(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ia?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const c=ia.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return Ze(e.length,n.length)}static compareSegments(e,n){const i=ia.isNumericId(e),l=ia.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?ia.extractNumericId(e).compare(ia.extractNumericId(n)):op(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mi.fromString(e.substring(4,e.length-2))}}class bt extends ia{construct(e,n,i){return new bt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const OC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends ia{construct(e,n,i){return new vn(e,n,i)}static isValidIdentifier(e){return OC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$v}static keyField(){return new vn([$v])}static fromServerFormat(e){const n=[];let i="",l=0;const c=()=>{if(i.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new pe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(i+=p,l++):(c(),l++)}if(c(),f)throw new pe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(n)}static emptyPath(){return new vn([])}}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(bt.fromString(e))}static fromName(e){return new Se(bt.fromString(e).popFirst(5))}static empty(){return new Se(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new bt(e.slice()))}}function S1(a,e,n){if(!n)throw new pe(ie.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function VC(a,e,n,i){if(e===!0&&i===!0)throw new pe(ie.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function Gv(a){if(!Se.isDocumentKey(a))throw new pe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Yv(a){if(Se.isDocumentKey(a))throw new pe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function N1(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function fd(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":Ie(12329,{type:typeof a})}function ca(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new pe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fd(a);throw new pe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}function Jt(a,e){const n={typeString:a};return e&&(n.value=e),n}function Hc(a,e){if(!N1(a))throw new pe(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in a)){n=`JSON missing required field: '${i}'`;break}const f=a[i];if(l&&typeof f!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${i}' field to equal '${c.value}'`;break}}if(n)throw new pe(ie.INVALID_ARGUMENT,n);return!0}const Kv=-62135596800,Qv=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Qv);return new Et(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Kv)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qv}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Hc(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:Jt("string",Et._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Et(0,0))}static max(){return new Oe(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ac=-1;function PC(a,e){const n=a.toTimestamp().seconds,i=a.toTimestamp().nanoseconds+1,l=Oe.fromTimestamp(i===1e9?new Et(n+1,0):new Et(n,i));return new Pi(l,Se.empty(),e)}function LC(a){return new Pi(a.readTime,a.key,Ac)}class Pi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Pi(Oe.min(),Se.empty(),Ac)}static max(){return new Pi(Oe.max(),Se.empty(),Ac)}}function UC(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(a.documentKey,e.documentKey),n!==0?n:Ze(a.largestBatchId,e.largestBatchId))}const zC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function no(a){if(a.code!==ie.FAILED_PRECONDITION||a.message!==zC)throw a;ge("LocalStore","Unexpectedly lost primary lease")}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new le(((i,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof le?n:le.resolve(n)}catch(n){return le.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):le.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):le.reject(n)}static resolve(e){return new le(((n,i)=>{n(e)}))}static reject(e){return new le(((n,i)=>{i(e)}))}static waitFor(e){return new le(((n,i)=>{let l=0,c=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++c,f&&c===l&&n()}),(g=>i(g)))})),f=!0,c===l&&n()}))}static or(e){let n=le.resolve(!1);for(const i of e)n=n.next((l=>l?le.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,c)=>{i.push(n.call(this,l,c))})),this.waitFor(i)}static mapArray(e,n){return new le(((i,l)=>{const c=e.length,f=new Array(c);let p=0;for(let g=0;g<c;g++){const y=g;n(e[y]).next((b=>{f[y]=b,++p,p===c&&i(f)}),(b=>l(b)))}}))}static doWhile(e,n){return new le(((i,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):i()};c()}))}}function qC(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function so(a){return a.name==="IndexedDbTransactionError"}class md{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}md.ce=-1;const Kp=-1;function pd(a){return a==null}function Kh(a){return a===0&&1/a==-1/0}function HC(a){return typeof a=="number"&&Number.isInteger(a)&&!Kh(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const A1="";function FC(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=Xv(e)),e=$C(a.get(n),e);return Xv(e)}function $C(a,e){let n=e;const i=a.length;for(let l=0;l<i;l++){const c=a.charAt(l);switch(c){case"\0":n+="";break;case A1:n+="";break;default:n+=c}}return n}function Xv(a){return a+A1+""}function Wv(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function Gi(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function R1(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class It{constructor(e,n){this.comparator=e,this.root=n||xn.EMPTY}insert(e,n){return new It(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wh(this.root,e,this.comparator,!1)}getReverseIterator(){return new wh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wh(this.root,e,this.comparator,!0)}}class wh{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?i(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xn{constructor(e,n,i,l,c){this.key=e,this.value=n,this.color=i??xn.RED,this.left=l??xn.EMPTY,this.right=c??xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,c){return new xn(e??this.key,n??this.value,i??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const c=i(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,i),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return xn.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,i,l,c){return this}insert(e,n,i){return new xn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class sn{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(e){return new Jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=i.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new sn(this.comparator);return n.data=e,n}}class Jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Jn{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new sn(vn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ql(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class C1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new C1("Invalid base64 string: "+c):c}})(e);return new bn(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new bn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const GC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(a){if(ct(!!a,39018),typeof a=="string"){let e=0;const n=GC.exec(a);if(ct(!!n,46558,{timestamp:a}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(a);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ut(a.seconds),nanos:Ut(a.nanos)}}function Ut(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function Ui(a){return typeof a=="string"?bn.fromBase64String(a):bn.fromUint8Array(a)}const j1="server_timestamp",I1="__type__",D1="__previous_value__",k1="__local_write_time__";function Qp(a){return(a?.mapValue?.fields||{})[I1]?.stringValue===j1}function gd(a){const e=a.mapValue.fields[D1];return Qp(e)?gd(e):e}function Rc(a){const e=Li(a.mapValue.fields[k1].timestampValue);return new Et(e.seconds,e.nanos)}class YC{constructor(e,n,i,l,c,f,p,g,y,b,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=w}}const Qh="(default)";class Cc{constructor(e,n){this.projectId=e,this.database=n||Qh}static empty(){return new Cc("","")}get isDefaultDatabase(){return this.database===Qh}isEqual(e){return e instanceof Cc&&e.projectId===this.projectId&&e.database===this.database}}function KC(a,e){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new pe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cc(a.options.projectId,e)}const M1="__type__",QC="__max__",Eh={mapValue:{}},O1="__vector__",Xh="value";function zi(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Qp(a)?4:WC(a)?9007199254740991:XC(a)?10:11:Ie(28295,{value:a})}function fa(a,e){if(a===e)return!0;const n=zi(a);if(n!==zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Rc(a).isEqual(Rc(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Li(l.timestampValue),p=Li(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(l,c){return Ui(l.bytesValue).isEqual(Ui(c.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(l,c){return Ut(l.geoPointValue.latitude)===Ut(c.geoPointValue.latitude)&&Ut(l.geoPointValue.longitude)===Ut(c.geoPointValue.longitude)})(a,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Ut(l.integerValue)===Ut(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=Ut(l.doubleValue),p=Ut(c.doubleValue);return f===p?Kh(f)===Kh(p):isNaN(f)&&isNaN(p)}return!1})(a,e);case 9:return ql(a.arrayValue.values||[],e.arrayValue.values||[],fa);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(Wv(f)!==Wv(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!fa(f[g],p[g])))return!1;return!0})(a,e);default:return Ie(52216,{left:a})}}function jc(a,e){return(a.values||[]).find((n=>fa(n,e)))!==void 0}function Hl(a,e){if(a===e)return 0;const n=zi(a),i=zi(e);if(n!==i)return Ze(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(a.booleanValue,e.booleanValue);case 2:return(function(c,f){const p=Ut(c.integerValue||c.doubleValue),g=Ut(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(a,e);case 3:return Zv(a.timestampValue,e.timestampValue);case 4:return Zv(Rc(a),Rc(e));case 5:return op(a.stringValue,e.stringValue);case 6:return(function(c,f){const p=Ui(c),g=Ui(f);return p.compareTo(g)})(a.bytesValue,e.bytesValue);case 7:return(function(c,f){const p=c.split("/"),g=f.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=Ze(p[y],g[y]);if(b!==0)return b}return Ze(p.length,g.length)})(a.referenceValue,e.referenceValue);case 8:return(function(c,f){const p=Ze(Ut(c.latitude),Ut(f.latitude));return p!==0?p:Ze(Ut(c.longitude),Ut(f.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return eb(a.arrayValue,e.arrayValue);case 10:return(function(c,f){const p=c.fields||{},g=f.fields||{},y=p[Xh]?.arrayValue,b=g[Xh]?.arrayValue,w=Ze(y?.values?.length||0,b?.values?.length||0);return w!==0?w:eb(y,b)})(a.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Eh.mapValue&&f===Eh.mapValue)return 0;if(c===Eh.mapValue)return 1;if(f===Eh.mapValue)return-1;const p=c.fields||{},g=Object.keys(p),y=f.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let w=0;w<g.length&&w<b.length;++w){const S=op(g[w],b[w]);if(S!==0)return S;const j=Hl(p[g[w]],y[b[w]]);if(j!==0)return j}return Ze(g.length,b.length)})(a.mapValue,e.mapValue);default:throw Ie(23264,{he:n})}}function Zv(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return Ze(a,e);const n=Li(a),i=Li(e),l=Ze(n.seconds,i.seconds);return l!==0?l:Ze(n.nanos,i.nanos)}function eb(a,e){const n=a.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const c=Hl(n[l],i[l]);if(c)return c}return Ze(n.length,i.length)}function Fl(a){return cp(a)}function cp(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const i=Li(n);return`time(${i.seconds},${i.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return Ui(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return Se.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let i="[",l=!0;for(const c of n.values||[])l?l=!1:i+=",",i+=cp(c);return i+"]"})(a.arrayValue):"mapValue"in a?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const f of i)c?c=!1:l+=",",l+=`${f}:${cp(n.fields[f])}`;return l+"}"})(a.mapValue):Ie(61005,{value:a})}function Mh(a){switch(zi(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gd(a);return e?16+Mh(e):16;case 5:return 2*a.stringValue.length;case 6:return Ui(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,c)=>l+Mh(c)),0)})(a.arrayValue);case 10:case 11:return(function(i){let l=0;return Gi(i.fields,((c,f)=>{l+=c.length+Mh(f)})),l})(a.mapValue);default:throw Ie(13486,{value:a})}}function tb(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function up(a){return!!a&&"integerValue"in a}function Xp(a){return!!a&&"arrayValue"in a}function nb(a){return!!a&&"nullValue"in a}function sb(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Oh(a){return!!a&&"mapValue"in a}function XC(a){return(a?.mapValue?.fields||{})[M1]?.stringValue===O1}function xc(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return Gi(a.mapValue.fields,((n,i)=>e.mapValue.fields[n]=xc(i))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xc(a.arrayValue.values[n]);return e}return{...a}}function WC(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===QC}class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Oh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xc(n)}setAll(e){let n=vn.emptyPath(),i={},l=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,l),i={},l=[],n=p.popLast()}f?i[p.lastSegment()]=xc(f):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,i,l)}delete(e){const n=this.field(e.popLast());Oh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];Oh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){Gi(n,((l,c)=>e[l]=c));for(const l of i)delete e[l]}clone(){return new Un(xc(this.value))}}function V1(a){const e=[];return Gi(a.fields,((n,i)=>{const l=new vn([n]);if(Oh(i)){const c=V1(i.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new Jn(e)}class An{constructor(e,n,i,l,c,f,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new An(e,0,Oe.min(),Oe.min(),Oe.min(),Un.empty(),0)}static newFoundDocument(e,n,i,l){return new An(e,1,n,Oe.min(),i,l,0)}static newNoDocument(e,n){return new An(e,2,n,Oe.min(),Oe.min(),Un.empty(),0)}static newUnknownDocument(e,n){return new An(e,3,n,Oe.min(),Oe.min(),Un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wh{constructor(e,n){this.position=e,this.inclusive=n}}function ab(a,e,n){let i=0;for(let l=0;l<a.position.length;l++){const c=e[l],f=a.position[l];if(c.field.isKeyField()?i=Se.comparator(Se.fromName(f.referenceValue),n.key):i=Hl(f,n.data.field(c.field)),c.dir==="desc"&&(i*=-1),i!==0)break}return i}function ib(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!fa(a.position[n],e.position[n]))return!1;return!0}class Jh{constructor(e,n="asc"){this.field=e,this.dir=n}}function JC(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class P1{}class Wt extends P1{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new ej(e,n,i):n==="array-contains"?new sj(e,i):n==="in"?new aj(e,i):n==="not-in"?new ij(e,i):n==="array-contains-any"?new rj(e,i):new Wt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new tj(e,i):new nj(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hl(n,this.value)):n!==null&&zi(this.value)===zi(n)&&this.matchesComparison(Hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Os extends P1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Os(e,n)}matches(e){return L1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function L1(a){return a.op==="and"}function U1(a){return ZC(a)&&L1(a)}function ZC(a){for(const e of a.filters)if(e instanceof Os)return!1;return!0}function hp(a){if(a instanceof Wt)return a.field.canonicalString()+a.op.toString()+Fl(a.value);if(U1(a))return a.filters.map((e=>hp(e))).join(",");{const e=a.filters.map((n=>hp(n))).join(",");return`${a.op}(${e})`}}function z1(a,e){return a instanceof Wt?(function(i,l){return l instanceof Wt&&i.op===l.op&&i.field.isEqual(l.field)&&fa(i.value,l.value)})(a,e):a instanceof Os?(function(i,l){return l instanceof Os&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((c,f,p)=>c&&z1(f,l.filters[p])),!0):!1})(a,e):void Ie(19439)}function B1(a){return a instanceof Wt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Fl(n.value)}`})(a):a instanceof Os?(function(n){return n.op.toString()+" {"+n.getFilters().map(B1).join(" ,")+"}"})(a):"Filter"}class ej extends Wt{constructor(e,n,i){super(e,n,i),this.key=Se.fromName(i.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class tj extends Wt{constructor(e,n){super(e,"in",n),this.keys=q1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class nj extends Wt{constructor(e,n){super(e,"not-in",n),this.keys=q1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function q1(a,e){return(e.arrayValue?.values||[]).map((n=>Se.fromName(n.referenceValue)))}class sj extends Wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xp(n)&&jc(n.arrayValue,this.value)}}class aj extends Wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jc(this.value.arrayValue,n)}}class ij extends Wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jc(this.value.arrayValue,n)}}class rj extends Wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>jc(this.value.arrayValue,i)))}}class lj{constructor(e,n=null,i=[],l=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function rb(a,e=null,n=[],i=[],l=null,c=null,f=null){return new lj(a,e,n,i,l,c,f)}function Wp(a){const e=Pe(a);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>hp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(c){return c.field.canonicalString()+c.dir})(i))).join(","),pd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>Fl(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>Fl(i))).join(",")),e.Te=n}return e.Te}function Jp(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!JC(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!z1(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!ib(a.startAt,e.startAt)&&ib(a.endAt,e.endAt)}function dp(a){return Se.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class Fc{constructor(e,n=null,i=[],l=[],c=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function oj(a,e,n,i,l,c,f,p){return new Fc(a,e,n,i,l,c,f,p)}function Zp(a){return new Fc(a)}function lb(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function cj(a){return Se.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}function H1(a){return a.collectionGroup!==null}function vc(a){const e=Pe(a);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new sn(vn.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Jh(c,i))})),n.has(vn.keyField().canonicalString())||e.Ie.push(new Jh(vn.keyField(),i))}return e.Ie}function ua(a){const e=Pe(a);return e.Ee||(e.Ee=uj(e,vc(a))),e.Ee}function uj(a,e){if(a.limitType==="F")return rb(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Jh(l.field,c)}));const n=a.endAt?new Wh(a.endAt.position,a.endAt.inclusive):null,i=a.startAt?new Wh(a.startAt.position,a.startAt.inclusive):null;return rb(a.path,a.collectionGroup,e,a.filters,a.limit,n,i)}}function fp(a,e){const n=a.filters.concat([e]);return new Fc(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function mp(a,e,n){return new Fc(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function yd(a,e){return Jp(ua(a),ua(e))&&a.limitType===e.limitType}function F1(a){return`${Wp(ua(a))}|lt:${a.limitType}`}function Rl(a){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>B1(l))).join(", ")}]`),pd(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>Fl(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>Fl(l))).join(",")),`Target(${i})`})(ua(a))}; limitType=${a.limitType})`}function xd(a,e){return e.isFoundDocument()&&(function(i,l){const c=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(c):Se.isDocumentKey(i.path)?i.path.isEqual(c):i.path.isImmediateParentOf(c)})(a,e)&&(function(i,l){for(const c of vc(i))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(a,e)&&(function(i,l){for(const c of i.filters)if(!c.matches(l))return!1;return!0})(a,e)&&(function(i,l){return!(i.startAt&&!(function(f,p,g){const y=ab(f,p,g);return f.inclusive?y<=0:y<0})(i.startAt,vc(i),l)||i.endAt&&!(function(f,p,g){const y=ab(f,p,g);return f.inclusive?y>=0:y>0})(i.endAt,vc(i),l))})(a,e)}function hj(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function $1(a){return(e,n)=>{let i=!1;for(const l of vc(a)){const c=dj(l,e,n);if(c!==0)return c;i=i||l.field.isKeyField()}return 0}}function dj(a,e,n){const i=a.field.isKeyField()?Se.comparator(e.key,n.key):(function(c,f,p){const g=f.data.field(c),y=p.data.field(c);return g!==null&&y!==null?Hl(g,y):Ie(42886)})(a.field,e,n);switch(a.dir){case"asc":return i;case"desc":return-1*i;default:return Ie(19790,{direction:a.dir})}}class Vr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,c]of i)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,((n,i)=>{for(const[l,c]of i)e(l,c)}))}isEmpty(){return R1(this.inner)}size(){return this.innerSize}}const fj=new It(Se.comparator);function Fa(){return fj}const G1=new It(Se.comparator);function fc(...a){let e=G1;for(const n of a)e=e.insert(n.key,n);return e}function Y1(a){let e=G1;return a.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Er(){return bc()}function K1(){return bc()}function bc(){return new Vr((a=>a.toString()),((a,e)=>a.isEqual(e)))}const mj=new It(Se.comparator),pj=new sn(Se.comparator);function et(...a){let e=pj;for(const n of a)e=e.add(n);return e}const gj=new sn(Ze);function yj(){return gj}function eg(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function Q1(a){return{integerValue:""+a}}function xj(a,e){return HC(e)?Q1(e):eg(a,e)}class vd{constructor(){this._=void 0}}function vj(a,e,n){return a instanceof Ic?(function(l,c){const f={fields:{[I1]:{stringValue:j1},[k1]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Qp(c)&&(c=gd(c)),c&&(f.fields[D1]=c),{mapValue:f}})(n,e):a instanceof Dc?W1(a,e):a instanceof kc?J1(a,e):(function(l,c){const f=X1(l,c),p=ob(f)+ob(l.Ae);return up(f)&&up(l.Ae)?Q1(p):eg(l.serializer,p)})(a,e)}function bj(a,e,n){return a instanceof Dc?W1(a,e):a instanceof kc?J1(a,e):n}function X1(a,e){return a instanceof Zh?(function(i){return up(i)||(function(c){return!!c&&"doubleValue"in c})(i)})(e)?e:{integerValue:0}:null}class Ic extends vd{}class Dc extends vd{constructor(e){super(),this.elements=e}}function W1(a,e){const n=Z1(e);for(const i of a.elements)n.some((l=>fa(l,i)))||n.push(i);return{arrayValue:{values:n}}}class kc extends vd{constructor(e){super(),this.elements=e}}function J1(a,e){let n=Z1(e);for(const i of a.elements)n=n.filter((l=>!fa(l,i)));return{arrayValue:{values:n}}}class Zh extends vd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ob(a){return Ut(a.integerValue||a.doubleValue)}function Z1(a){return Xp(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class _j{constructor(e,n){this.field=e,this.transform=n}}function wj(a,e){return a.field.isEqual(e.field)&&(function(i,l){return i instanceof Dc&&l instanceof Dc||i instanceof kc&&l instanceof kc?ql(i.elements,l.elements,fa):i instanceof Zh&&l instanceof Zh?fa(i.Ae,l.Ae):i instanceof Ic&&l instanceof Ic})(a.transform,e.transform)}class Ej{constructor(e,n){this.version=e,this.transformResults=n}}class Ds{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ds}static exists(e){return new Ds(void 0,e)}static updateTime(e){return new Ds(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class bd{}function ew(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new tg(a.key,Ds.none()):new $c(a.key,a.data,Ds.none());{const n=a.data,i=Un.empty();let l=new sn(vn.comparator);for(let c of e.fields)if(!l.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?i.delete(c):i.set(c,f),l=l.add(c)}return new Yi(a.key,i,new Jn(l.toArray()),Ds.none())}}function Tj(a,e,n){a instanceof $c?(function(l,c,f){const p=l.value.clone(),g=ub(l.fieldTransforms,c,f.transformResults);p.setAll(g),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(a,e,n):a instanceof Yi?(function(l,c,f){if(!Vh(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=ub(l.fieldTransforms,c,f.transformResults),g=c.data;g.setAll(tw(l)),g.setAll(p),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(a,e,n):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function _c(a,e,n,i){return a instanceof $c?(function(c,f,p,g){if(!Vh(c.precondition,f))return p;const y=c.value.clone(),b=hb(c.fieldTransforms,g,f);return y.setAll(b),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(a,e,n,i):a instanceof Yi?(function(c,f,p,g){if(!Vh(c.precondition,f))return p;const y=hb(c.fieldTransforms,g,f),b=f.data;return b.setAll(tw(c)),b.setAll(y),f.convertToFoundDocument(f.version,b).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(a,e,n,i):(function(c,f,p){return Vh(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(a,e,n)}function Sj(a,e){let n=null;for(const i of a.fieldTransforms){const l=e.data.field(i.field),c=X1(i.transform,l||null);c!=null&&(n===null&&(n=Un.empty()),n.set(i.field,c))}return n||null}function cb(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&ql(i,l,((c,f)=>wj(c,f)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class $c extends bd{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Yi extends bd{constructor(e,n,i,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function tw(a){const e=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=a.data.field(n);e.set(n,i)}})),e}function ub(a,e,n){const i=new Map;ct(a.length===n.length,32656,{Ve:n.length,de:a.length});for(let l=0;l<n.length;l++){const c=a[l],f=c.transform,p=e.data.field(c.field);i.set(c.field,bj(f,p,n[l]))}return i}function hb(a,e,n){const i=new Map;for(const l of a){const c=l.transform,f=n.data.field(l.field);i.set(l.field,vj(c,f,e))}return i}class tg extends bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nj extends bd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Aj{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&Tj(c,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=_c(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=_c(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=K1();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=n.has(l.key)?null:p;const g=ew(f,p);g!==null&&i.set(l.key,g),f.isValidDocument()||f.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),et())}isEqual(e){return this.batchId===e.batchId&&ql(this.mutations,e.mutations,((n,i)=>cb(n,i)))&&ql(this.baseMutations,e.baseMutations,((n,i)=>cb(n,i)))}}class ng{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){ct(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return mj})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,i[f].version);return new ng(e,n,i,l)}}class Rj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Cj{constructor(e,n){this.count=e,this.unchangedNames=n}}var Xt,nt;function jj(a){switch(a){case ie.OK:return Ie(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ie(15467,{code:a})}}function nw(a){if(a===void 0)return Ha("GRPC error has no .code"),ie.UNKNOWN;switch(a){case Xt.OK:return ie.OK;case Xt.CANCELLED:return ie.CANCELLED;case Xt.UNKNOWN:return ie.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return ie.INTERNAL;case Xt.UNAVAILABLE:return ie.UNAVAILABLE;case Xt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Xt.NOT_FOUND:return ie.NOT_FOUND;case Xt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Xt.ABORTED:return ie.ABORTED;case Xt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Xt.DATA_LOSS:return ie.DATA_LOSS;default:return Ie(39323,{code:a})}}(nt=Xt||(Xt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";function Ij(){return new TextEncoder}const Dj=new Mi([4294967295,4294967295],0);function db(a){const e=Ij().encode(a),n=new y1;return n.update(e),new Uint8Array(n.digest())}function fb(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Mi([n,i],0),new Mi([l,c],0)]}class sg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new mc(`Invalid padding: ${n}`);if(i<0)throw new mc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new mc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Mi.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Mi.fromNumber(i)));return l.compare(Dj)===1&&(l=new Mi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=db(e),[i,l]=fb(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(i,l,c);if(!this.we(f))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new sg(c,l,n);return i.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=db(e),[i,l]=fb(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(i,l,c);this.be(f)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _d{constructor(e,n,i,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,Gc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new _d(Oe.min(),l,new It(Ze),Fa(),et())}}class Gc{constructor(e,n,i,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Gc(i,n,et(),et(),et())}}class Ph{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class sw{constructor(e,n){this.targetId=e,this.Ce=n}}class aw{constructor(e,n,i=bn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class mb{constructor(){this.ve=0,this.Fe=pb(),this.Me=bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),n=et(),i=et();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:Ie(38017,{changeType:c})}})),new Gc(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=pb()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class kj{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fa(),this.He=Th(),this.Je=Th(),this.Ze=new It(Ze)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(dp(c))if(i===0){const f=new Se(c.path);this.et(n,f,An.newNoDocument(f,Oe.min()))}else ct(i===1,20013,{expectedCount:i});else{const f=this._t(n);if(f!==i){const p=this.ut(e),g=p?this.ct(p,e,f):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:c=0}=n;let f,p;try{f=Ui(i).toUint8Array()}catch(g){if(g instanceof C1)return Bl("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new sg(f,l,c)}catch(g){return Bl(g instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&dp(p.target)){const g=new Se(p.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,An.newNoDocument(g,e))}c.Be&&(n.set(f,c.ke()),c.Ke())}}));let i=et();this.Je.forEach(((c,f)=>{let p=!0;f.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const l=new _d(e,n,this.Ze,this.je,i);return this.je=Fa(),this.He=Th(),this.Je=Th(),this.Ze=new It(Ze),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new mb,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new sn(Ze),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new sn(Ze),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mb),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Th(){return new It(Se.comparator)}function pb(){return new It(Se.comparator)}const Mj={asc:"ASCENDING",desc:"DESCENDING"},Oj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vj={and:"AND",or:"OR"};class Pj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pp(a,e){return a.useProto3Json||pd(e)?e:{value:e}}function ed(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iw(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function Lj(a,e){return ed(a,e.toTimestamp())}function ha(a){return ct(!!a,49232),Oe.fromTimestamp((function(n){const i=Li(n);return new Et(i.seconds,i.nanos)})(a))}function ag(a,e){return gp(a,e).canonicalString()}function gp(a,e){const n=(function(l){return new bt(["projects",l.projectId,"databases",l.database])})(a).child("documents");return e===void 0?n:n.child(e)}function rw(a){const e=bt.fromString(a);return ct(hw(e),10190,{key:e.toString()}),e}function yp(a,e){return ag(a.databaseId,e.path)}function Hm(a,e){const n=rw(e);if(n.get(1)!==a.databaseId.projectId)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new pe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Se(ow(n))}function lw(a,e){return ag(a.databaseId,e)}function Uj(a){const e=rw(a);return e.length===4?bt.emptyPath():ow(e)}function xp(a){return new bt(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function ow(a){return ct(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function gb(a,e,n){return{name:yp(a,e),fields:n.value.mapValue.fields}}function zj(a,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(y,b){return y.useProto3Json?(ct(b===void 0||typeof b=="string",58123),bn.fromBase64String(b||"")):(ct(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),bn.fromUint8Array(b||new Uint8Array))})(a,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const b=y.code===void 0?ie.UNKNOWN:nw(y.code);return new pe(b,y.message||"")})(f);n=new aw(i,l,c,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=Hm(a,i.document.name),c=ha(i.document.updateTime),f=i.document.createTime?ha(i.document.createTime):Oe.min(),p=new Un({mapValue:{fields:i.document.fields}}),g=An.newFoundDocument(l,c,f,p),y=i.targetIds||[],b=i.removedTargetIds||[];n=new Ph(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=Hm(a,i.document),c=i.readTime?ha(i.readTime):Oe.min(),f=An.newNoDocument(l,c),p=i.removedTargetIds||[];n=new Ph([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=Hm(a,i.document),c=i.removedTargetIds||[];n=new Ph([],c,l,null)}else{if(!("filter"in e))return Ie(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:c}=i,f=new Cj(l,c),p=i.targetId;n=new sw(p,f)}}return n}function Bj(a,e){let n;if(e instanceof $c)n={update:gb(a,e.key,e.value)};else if(e instanceof tg)n={delete:yp(a,e.key)};else if(e instanceof Yi)n={update:gb(a,e.key,e.data),updateMask:Xj(e.fieldMask)};else{if(!(e instanceof Nj))return Ie(16599,{dt:e.type});n={verify:yp(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(c,f){const p=f.transform;if(p instanceof Ic)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Dc)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof kc)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Zh)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Ie(20930,{transform:f.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:Lj(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ie(27497)})(a,e.precondition)),n}function qj(a,e){return a&&a.length>0?(ct(e!==void 0,14353),a.map((n=>(function(l,c){let f=l.updateTime?ha(l.updateTime):ha(c);return f.isEqual(Oe.min())&&(f=ha(c)),new Ej(f,l.transformResults||[])})(n,e)))):[]}function Hj(a,e){return{documents:[lw(a,e.path)]}}function Fj(a,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=lw(a,l);const c=(function(y){if(y.length!==0)return uw(Os.create(y,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const f=(function(y){if(y.length!==0)return y.map((b=>(function(S){return{field:Cl(S.field),direction:Yj(S.dir)}})(b)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=pp(a,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function $j(a){let e=Uj(a.parent);const n=a.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){ct(i===1,65062);const b=n.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let c=[];n.where&&(c=(function(w){const S=cw(w);return S instanceof Os&&U1(S)?S.getFilters():[S]})(n.where));let f=[];n.orderBy&&(f=(function(w){return w.map((S=>(function(Y){return new Jh(jl(Y.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(S)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let S;return S=typeof w=="object"?w.value:w,pd(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(w){const S=!!w.before,j=w.values||[];return new Wh(j,S)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const S=!w.before,j=w.values||[];return new Wh(j,S)})(n.endAt)),oj(e,l,f,c,p,"F",g,y)}function Gj(a,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cw(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=jl(n.unaryFilter.field);return Wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=jl(n.unaryFilter.field);return Wt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=jl(n.unaryFilter.field);return Wt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=jl(n.unaryFilter.field);return Wt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(a):a.fieldFilter!==void 0?(function(n){return Wt.create(jl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return Os.create(n.compositeFilter.filters.map((i=>cw(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(n.compositeFilter.op))})(a):Ie(30097,{filter:a})}function Yj(a){return Mj[a]}function Kj(a){return Oj[a]}function Qj(a){return Vj[a]}function Cl(a){return{fieldPath:a.canonicalString()}}function jl(a){return vn.fromServerFormat(a.fieldPath)}function uw(a){return a instanceof Wt?(function(n){if(n.op==="=="){if(sb(n.value))return{unaryFilter:{field:Cl(n.field),op:"IS_NAN"}};if(nb(n.value))return{unaryFilter:{field:Cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(sb(n.value))return{unaryFilter:{field:Cl(n.field),op:"IS_NOT_NAN"}};if(nb(n.value))return{unaryFilter:{field:Cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cl(n.field),op:Kj(n.op),value:n.value}}})(a):a instanceof Os?(function(n){const i=n.getFilters().map((l=>uw(l)));return i.length===1?i[0]:{compositeFilter:{op:Qj(n.op),filters:i}}})(a):Ie(54877,{filter:a})}function Xj(a){const e=[];return a.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function hw(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}function dw(a){return!!a&&typeof a._toProto=="function"&&a._protoValueType==="ProtoValue"}class ji{constructor(e,n,i,l,c=Oe.min(),f=Oe.min(),p=bn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new ji(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ji(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Wj{constructor(e){this.yt=e}}function Jj(a){const e=$j({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?mp(e,e.limit,"L"):e}class Zj{constructor(){this.Sn=new e5}addToCollectionParentIndex(e,n){return this.Sn.add(n),le.resolve()}getCollectionParents(e,n){return le.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return le.resolve()}deleteFieldIndex(e,n){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,n){return le.resolve()}getDocumentsMatchingTarget(e,n){return le.resolve(null)}getIndexType(e,n){return le.resolve(0)}getFieldIndexes(e,n){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,n){return le.resolve(Pi.min())}getMinOffsetFromCollectionGroup(e,n){return le.resolve(Pi.min())}updateCollectionGroup(e,n,i){return le.resolve()}updateIndexEntries(e,n){return le.resolve()}}class e5{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new sn(bt.comparator),c=!l.has(i);return this.index[n]=l.add(i),c}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new sn(bt.comparator)).toArray()}}const yb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fw=41943040;class Ln{static withCacheSize(e){return new Ln(e,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(fw,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);class $l{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new $l(0)}static ar(){return new $l(-1)}}const xb="LruGarbageCollector",t5=1048576;function vb([a,e],[n,i]){const l=Ze(a,n);return l===0?Ze(e,i):l}class n5{constructor(e){this.Pr=e,this.buffer=new sn(vb),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();vb(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class s5{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ge(xb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){so(n)?ge(xb,"Ignoring IndexedDB error during garbage collection: ",n):await no(n)}await this.Ar(3e5)}))}}class a5{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return le.resolve(md.ce);const i=new n5(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(yb)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yb):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,c,f,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,f=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(i=w,p=Date.now(),this.removeTargets(e,i,n)))).next((w=>(c=w,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(y=Date.now(),Al()<=Je.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-b}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function i5(a,e){return new a5(a,e)}class r5{constructor(){this.changes=new Vr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?le.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class l5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class o5{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&_c(i.mutation,l,Jn.empty(),Et.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,et()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=et()){const l=Er();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((c=>{let f=fc();return c.forEach(((p,g)=>{f=f.insert(p,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const i=Er();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,et())))}populateOverlays(e,n,i){const l=[];return i.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,i,l){let c=Fa();const f=bc(),p=(function(){return bc()})();return n.forEach(((g,y)=>{const b=i.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof Yi)?c=c.insert(y.key,y):b!==void 0?(f.set(y.key,b.mutation.getFieldMask()),_c(b.mutation,y,b.mutation.getFieldMask(),Et.now())):f.set(y.key,Jn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((y,b)=>f.set(y,b))),n.forEach(((y,b)=>p.set(y,new l5(b,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=bc();let l=new It(((f,p)=>f-p)),c=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let b=i.get(g)||Jn.empty();b=p.applyToLocalView(y,b),i.set(g,b);const w=(l.get(p.batchId)||et()).add(g);l=l.insert(p.batchId,w)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,w=K1();b.forEach((S=>{if(!c.has(S)){const j=ew(n.get(S),i.get(S));j!==null&&w.set(S,j),c=c.add(S)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,w))}return le.waitFor(f)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return cj(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):H1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-c.size):le.resolve(Er());let p=Ac,g=c;return f.next((y=>le.forEach(y,((b,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(b)?le.resolve():this.remoteDocumentCache.getEntry(e,b).next((S=>{g=g.insert(b,S)}))))).next((()=>this.populateOverlays(e,y,c))).next((()=>this.computeViews(e,g,y,et()))).next((b=>({batchId:p,changes:Y1(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next((i=>{let l=fc();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const c=n.collectionGroup;let f=fc();return this.indexManager.getCollectionParents(e,c).next((p=>le.forEach(p,(g=>{const y=(function(w,S){return new Fc(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((b=>{b.forEach(((w,S)=>{f=f.insert(w,S)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,c,l)))).next((f=>{c.forEach(((g,y)=>{const b=y.getKey();f.get(b)===null&&(f=f.insert(b,An.newInvalidDocument(b)))}));let p=fc();return f.forEach(((g,y)=>{const b=c.get(g);b!==void 0&&_c(b.mutation,y,Jn.empty(),Et.now()),xd(n,y)&&(p=p.insert(g,y))})),p}))}}class c5{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return le.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:ha(l.createTime)}})(n)),le.resolve()}getNamedQuery(e,n){return le.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:Jj(l.bundledQuery),readTime:ha(l.readTime)}})(n)),le.resolve()}}class u5{constructor(){this.overlays=new It(Se.comparator),this.Lr=new Map}getOverlay(e,n){return le.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Er();return le.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&i.set(l,c)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,c)=>{this.bt(e,n,c)})),le.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.Lr.delete(i)),le.resolve()}getOverlaysForCollection(e,n,i){const l=Er(),c=n.length+1,f=new Se(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===c&&g.largestBatchId>i&&l.set(g.getKey(),g)}return le.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let c=new It(((y,b)=>y-b));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let b=c.get(y.largestBatchId);b===null&&(b=Er(),c=c.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Er(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=l)););return le.resolve(p)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const f=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new Rj(n,i));let c=this.Lr.get(n);c===void 0&&(c=et(),this.Lr.set(n,c)),this.Lr.set(n,c.add(i.key))}}class h5{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,le.resolve()}}class ig{constructor(){this.kr=new sn(cn.Kr),this.qr=new sn(cn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new cn(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new cn(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new Se(new bt([])),i=new cn(n,e),l=new cn(n,e+1),c=[];return this.qr.forEachInRange([i,l],(f=>{this.Wr(f),c.push(f.key)})),c}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Se(new bt([])),i=new cn(n,e),l=new cn(n,e+1);let c=et();return this.qr.forEachInRange([i,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const n=new cn(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class cn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Se.comparator(e.key,n.key)||Ze(e.Hr,n.Hr)}static Ur(e,n){return Ze(e.Hr,n.Hr)||Se.comparator(e.key,n.key)}}class d5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new sn(cn.Kr)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const c=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Aj(c,n,i,l);this.mutationQueue.push(f);for(const p of l)this.Jr=this.Jr.add(new cn(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return le.resolve(f)}lookupMutationBatch(e,n){return le.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),c=l<0?0:l;return le.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Kp:this.Yn-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new cn(n,0),l=new cn(n,Number.POSITIVE_INFINITY),c=[];return this.Jr.forEachInRange([i,l],(f=>{const p=this.Zr(f.Hr);c.push(p)})),le.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new sn(Ze);return n.forEach((l=>{const c=new cn(l,0),f=new cn(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([c,f],(p=>{i=i.add(p.Hr)}))})),le.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let c=i;Se.isDocumentKey(c)||(c=c.child(""));const f=new cn(new Se(c),0);let p=new sn(Ze);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),f),le.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){ct(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return le.forEach(n.mutations,(l=>{const c=new cn(l.key,n.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new cn(n,0),l=this.Jr.firstAfterOrEqual(i);return le.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class f5{constructor(e){this.ti=e,this.docs=(function(){return new It(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),c=l?l.size:0,f=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return le.resolve(i?i.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let i=Fa();return n.forEach((l=>{const c=this.docs.get(l);i=i.insert(l,c?c.document.mutableCopy():An.newInvalidDocument(l))})),le.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let c=Fa();const f=n.path,p=new Se(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||UC(LC(b),i)<=0||(l.has(b.key)||xd(n,b))&&(c=c.insert(b.key,b.mutableCopy()))}return le.resolve(c)}getAllFromCollectionGroup(e,n,i,l){Ie(9500)}ni(e,n){return le.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new m5(this)}getSize(e){return le.resolve(this.size)}}class m5 extends r5{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),le.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class p5{constructor(e){this.persistence=e,this.ri=new Vr((n=>Wp(n)),Jp),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.ii=0,this.si=new ig,this.targetCount=0,this.oi=$l._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),le.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new $l(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,le.resolve()}updateTargetData(e,n){return this.lr(n),le.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,n,i){let l=0;const c=[];return this.ri.forEach(((f,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),le.waitFor(c).next((()=>l))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return le.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),le.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),le.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),le.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return le.resolve(i)}containsKey(e,n){return le.resolve(this.si.containsKey(n))}}class mw{constructor(e,n){this._i={},this.overlays={},this.ai=new md(0),this.ui=!1,this.ui=!0,this.ci=new h5,this.referenceDelegate=e(this),this.li=new p5(this),this.indexManager=new Zj,this.remoteDocumentCache=(function(l){return new f5(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new Wj(n),this.Pi=new c5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new u5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new d5(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){ge("MemoryPersistence","Starting transaction:",e);const l=new g5(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((c=>this.referenceDelegate.Ii(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ei(e,n){return le.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class g5 extends BC{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ri=new ig,this.Ai=null}static Vi(e){return new rg(e)}get di(){if(this.Ai)return this.Ai;throw Ie(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),le.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),le.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),le.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.di.add(c.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.di,(i=>{const l=Se.fromPath(i);return this.mi(e,l).next((c=>{c||n.removeEntry(l,Oe.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return le.or([()=>le.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class td{constructor(e,n){this.persistence=e,this.fi=new Vr((i=>FC(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=i5(this,n)}static Vi(e,n){return new td(e,n)}Ti(){}Ii(e){return le.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return le.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((c=>c?le.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ni(e,(f=>this.wr(e,f,n).next((p=>{p||(i++,c.removeEntry(f,Oe.min()))})))).next((()=>c.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),le.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),le.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),le.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Mh(e.data.value)),n}wr(e,n,i){return le.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return le.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class lg{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=et(),l=et();for(const c of n.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new lg(e,n.fromCache,i,l)}}class y5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class x5{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return $2()?8:qC(Rn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const c={result:null};return this.gs(e,n).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ps(e,n,l,i).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new y5;return this.ys(e,n,f).next((p=>{if(c.result=p,this.As)return this.ws(e,n,f,p.size)}))})).next((()=>c.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(Al()<=Je.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Rl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),le.resolve()):(Al()<=Je.DEBUG&&ge("QueryEngine","Query:",Rl(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Al()<=Je.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Rl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ua(n))):le.resolve())}gs(e,n){if(lb(n))return le.resolve(null);let i=ua(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=mp(n,null,"F"),i=ua(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((c=>{const f=et(...c);return this.fs.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,f,g.readTime)?this.gs(e,mp(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,i,l){return lb(n)||l.isEqual(Oe.min())?le.resolve(null):this.fs.getDocuments(e,i).next((c=>{const f=this.bs(n,c);return this.Ss(n,f,i,l)?le.resolve(null):(Al()<=Je.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Rl(n)),this.Ds(e,f,n,PC(l,Ac)).next((p=>p)))}))}bs(e,n){let i=new sn($1(e));return n.forEach(((l,c)=>{xd(e,c)&&(i=i.add(c))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}ys(e,n,i){return Al()<=Je.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Rl(n)),this.fs.getDocumentsMatchingQuery(e,n,Pi.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((c=>(n.forEach((f=>{c=c.insert(f.key,f)})),c)))}}const og="LocalStore",v5=3e8;class b5{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new It(Ze),this.Fs=new Vr((c=>Wp(c)),Jp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o5(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function _5(a,e,n,i){return new b5(a,e,n,i)}async function pw(a,e){const n=Pe(a);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((c=>(l=c,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((c=>{const f=[],p=[];let g=et();for(const y of l){f.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of c){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function w5(a,e){const n=Pe(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),c=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const w=y.batch,S=w.keys();let j=le.resolve();return S.forEach((Y=>{j=j.next((()=>b.getEntry(g,Y))).next((q=>{const P=y.docVersions.get(Y);ct(P!==null,48541),q.version.compareTo(P)<0&&(w.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),b.addEntry(q)))}))})),j.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,i,e,c).next((()=>c.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=et();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function gw(a){const e=Pe(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function E5(a,e){const n=Pe(a),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((b,w)=>{const S=l.get(w);if(!S)return;p.push(n.li.removeMatchingKeys(c,b.removedDocuments,w).next((()=>n.li.addMatchingKeys(c,b.addedDocuments,w))));let j=S.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?j=j.withResumeToken(bn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):b.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(b.resumeToken,i)),l=l.insert(w,j),(function(q,P,z){return q.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=v5?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0})(S,j,b)&&p.push(n.li.updateTargetData(c,j))}));let g=Fa(),y=et();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,b))})),p.push(T5(c,f,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!i.isEqual(Oe.min())){const b=n.li.getLastRemoteSnapshotVersion(c).next((w=>n.li.setTargetsMetadata(c,c.currentSequenceNumber,i)));p.push(b)}return le.waitFor(p).next((()=>f.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,y))).next((()=>g))})).then((c=>(n.vs=l,c)))}function T5(a,e,n){let i=et(),l=et();return n.forEach((c=>i=i.add(c))),e.getEntries(a,i).next((c=>{let f=Fa();return n.forEach(((p,g)=>{const y=c.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Oe.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):ge(og,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:f,Ls:l}}))}function S5(a,e){const n=Pe(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Kp),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function N5(a,e){const n=Pe(a);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((c=>c?(l=c,le.resolve(l)):n.li.allocateTargetId(i).next((f=>(l=new ji(e,f,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function vp(a,e,n){const i=Pe(a),l=i.vs.get(e),c=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",c,(f=>i.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!so(f))throw f;ge(og,`Failed to update sequence numbers for target ${e}: ${f}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function bb(a,e,n){const i=Pe(a);let l=Oe.min(),c=et();return i.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,y,b){const w=Pe(g),S=w.Fs.get(b);return S!==void 0?le.resolve(w.vs.get(S)):w.li.getTargetData(y,b)})(i,f,ua(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(f,p.targetId).next((g=>{c=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(f,e,n?l:Oe.min(),n?c:et()))).next((p=>(A5(i,hj(e),p),{documents:p,ks:c})))))}function A5(a,e,n){let i=a.Ms.get(e)||Oe.min();n.forEach(((l,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)})),a.Ms.set(e,i)}class _b{constructor(){this.activeTargetIds=yj()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R5{constructor(){this.vo=new _b,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new _b,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class C5{Mo(e){}shutdown(){}}const wb="ConnectivityMonitor";class Eb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ge(wb,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ge(wb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Sh=null;function bp(){return Sh===null?Sh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sh++,"0x"+Sh.toString(16)}const Fm="RestConnection",j5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class I5{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===Qh?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,c){const f=bp(),p=this.Qo(e,n.toUriEncodedString());ge(Fm,`Sending RPC '${e}' ${f}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,c);const{host:y}=new URL(p),b=Jl(y);return this.zo(e,p,g,i,b).then((w=>(ge(Fm,`Received RPC '${e}' ${f}: `,w),w)),(w=>{throw Bl(Fm,`RPC '${e}' ${f} failed with error: `,w,"url: ",p,"request:",i),w}))}jo(e,n,i,l,c,f){return this.Wo(e,n,i,l,c)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+to})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),i&&i.headers.forEach(((l,c)=>e[c]=l))}Qo(e,n){const i=j5[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class D5{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Sn="WebChannelConnection",cc=(a,e,n)=>{a.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class Ll extends I5{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ll.c_){const e=_1();cc(e,b1.STAT_EVENT,(n=>{n.stat===lp.PROXY?ge(Sn,"STAT_EVENT: detected buffering proxy"):n.stat===lp.NOPROXY&&ge(Sn,"STAT_EVENT: detected no buffering proxy")})),Ll.c_=!0}}zo(e,n,i,l,c){const f=bp();return new Promise(((p,g)=>{const y=new x1;y.setWithCredentials(!0),y.listenOnce(v1.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case kh.NO_ERROR:const w=y.getResponseJson();ge(Sn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(w)),p(w);break;case kh.TIMEOUT:ge(Sn,`RPC '${e}' ${f} timed out`),g(new pe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case kh.HTTP_ERROR:const S=y.getStatus();if(ge(Sn,`RPC '${e}' ${f} failed with status:`,S,"response text:",y.getResponseText()),S>0){let j=y.getResponseJson();Array.isArray(j)&&(j=j[0]);const Y=j?.error;if(Y&&Y.status&&Y.message){const q=(function(z){const U=z.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(U)>=0?U:ie.UNKNOWN})(Y.status);g(new pe(q,Y.message))}else g(new pe(ie.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new pe(ie.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ge(Sn,`RPC '${e}' ${f} completed.`)}}));const b=JSON.stringify(l);ge(Sn,`RPC '${e}' ${f} sending request:`,l),y.send(n,"POST",b,i,15)}))}T_(e,n,i){const l=bp(),c=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const y=c.join("");ge(Sn,`Creating RPC '${e}' stream ${l}: ${y}`,p);const b=f.createWebChannel(y,p);this.I_(b);let w=!1,S=!1;const j=new D5({Ho:Y=>{S?ge(Sn,`Not sending because RPC '${e}' stream ${l} is closed:`,Y):(w||(ge(Sn,`Opening RPC '${e}' stream ${l} transport.`),b.open(),w=!0),ge(Sn,`RPC '${e}' stream ${l} sending:`,Y),b.send(Y))},Jo:()=>b.close()});return cc(b,dc.EventType.OPEN,(()=>{S||(ge(Sn,`RPC '${e}' stream ${l} transport opened.`),j.i_())})),cc(b,dc.EventType.CLOSE,(()=>{S||(S=!0,ge(Sn,`RPC '${e}' stream ${l} transport closed`),j.o_(),this.E_(b))})),cc(b,dc.EventType.ERROR,(Y=>{S||(S=!0,Bl(Sn,`RPC '${e}' stream ${l} transport errored. Name:`,Y.name,"Message:",Y.message),j.o_(new pe(ie.UNAVAILABLE,"The operation could not be completed")))})),cc(b,dc.EventType.MESSAGE,(Y=>{if(!S){const q=Y.data[0];ct(!!q,16349);const P=q,z=P?.error||P[0]?.error;if(z){ge(Sn,`RPC '${e}' stream ${l} received error:`,z);const U=z.status;let Q=(function(oe){const N=Xt[oe];if(N!==void 0)return nw(N)})(U),ue=z.message;Q===void 0&&(Q=ie.INTERNAL,ue="Unknown error status: "+U+" with message "+z.message),S=!0,j.o_(new pe(Q,ue)),b.close()}else ge(Sn,`RPC '${e}' stream ${l} received:`,q),j.__(q)}})),Ll.u_(),setTimeout((()=>{j.s_()}),0),j}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return w1()}}function k5(a){return new Ll(a)}function $m(){return typeof document<"u"?document:null}function wd(a){return new Pj(a,!0)}Ll.c_=!1;class yw{constructor(e,n,i=1e3,l=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&ge("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Tb="PersistentStream";class xw{constructor(e,n,i,l,c,f,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(Ha(n.toString()),Ha("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new pe(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(Tb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ge(Tb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class M5 extends xw{constructor(e,n,i,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=zj(this.serializer,e),i=(function(c){if(!("targetChange"in c))return Oe.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Oe.min():f.readTime?ha(f.readTime):Oe.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=xp(this.serializer),n.addTarget=(function(c,f){let p;const g=f.target;if(p=dp(g)?{documents:Hj(c,g)}:{query:Fj(c,g).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=iw(c,f.resumeToken);const y=pp(c,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Oe.min())>0){p.readTime=ed(c,f.snapshotVersion.toTimestamp());const y=pp(c,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=Gj(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=xp(this.serializer),n.removeTarget=e,this.K_(n)}}class O5 extends xw{constructor(e,n,i,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,f),this.serializer=c}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=qj(e.writeResults,e.commitTime),i=ha(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=xp(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>Bj(this.serializer,i)))};this.K_(n)}}class V5{}class P5 extends V5{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Wo(e,gp(n,i),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new pe(ie.UNKNOWN,c.toString())}))}jo(e,n,i,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.jo(e,gp(n,i),l,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new pe(ie.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function L5(a,e,n,i){return new P5(a,e,n,i)}class U5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ha(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Ir="RemoteStore";class z5{constructor(e,n,i,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=c,this.Aa.Mo((f=>{i.enqueueAndForget((async()=>{Pr(this)&&(ge(Ir,"Restarting streams for network reachability change."),await(async function(g){const y=Pe(g);y.Ea.add(4),await Yc(y),y.Va.set("Unknown"),y.Ea.delete(4),await Ed(y)})(this))}))})),this.Va=new U5(i,l)}}async function Ed(a){if(Pr(a))for(const e of a.Ra)await e(!0)}async function Yc(a){for(const e of a.Ra)await e(!1)}function vw(a,e){const n=Pe(a);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),dg(n)?hg(n):ao(n).O_()&&ug(n,e))}function cg(a,e){const n=Pe(a),i=ao(n);n.Ia.delete(e),i.O_()&&bw(n,e),n.Ia.size===0&&(i.O_()?i.L_():Pr(n)&&n.Va.set("Unknown"))}function ug(a,e){if(a.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ao(a).Z_(e)}function bw(a,e){a.da.$e(e),ao(a).X_(e)}function hg(a){a.da=new kj({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),ao(a).start(),a.Va.ua()}function dg(a){return Pr(a)&&!ao(a).x_()&&a.Ia.size>0}function Pr(a){return Pe(a).Ea.size===0}function _w(a){a.da=void 0}async function B5(a){a.Va.set("Online")}async function q5(a){a.Ia.forEach(((e,n)=>{ug(a,e)}))}async function H5(a,e){_w(a),dg(a)?(a.Va.ha(e),hg(a)):a.Va.set("Unknown")}async function F5(a,e,n){if(a.Va.set("Online"),e instanceof aw&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.da.removeTarget(p))})(a,e)}catch(i){ge(Ir,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await nd(a,i)}else if(e instanceof Ph?a.da.Xe(e):e instanceof sw?a.da.st(e):a.da.tt(e),!n.isEqual(Oe.min()))try{const i=await gw(a.localStore);n.compareTo(i)>=0&&await(function(c,f){const p=c.da.Tt(f);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=c.Ia.get(y);b&&c.Ia.set(y,b.withResumeToken(g.resumeToken,f))}})),p.targetMismatches.forEach(((g,y)=>{const b=c.Ia.get(g);if(!b)return;c.Ia.set(g,b.withResumeToken(bn.EMPTY_BYTE_STRING,b.snapshotVersion)),bw(c,g);const w=new ji(b.target,g,y,b.sequenceNumber);ug(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(a,n)}catch(i){ge(Ir,"Failed to raise snapshot:",i),await nd(a,i)}}async function nd(a,e,n){if(!so(e))throw e;a.Ea.add(1),await Yc(a),a.Va.set("Offline"),n||(n=()=>gw(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{ge(Ir,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await Ed(a)}))}function ww(a,e){return e().catch((n=>nd(a,n,e)))}async function Td(a){const e=Pe(a),n=Bi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Kp;for(;$5(e);)try{const l=await S5(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,G5(e,l)}catch(l){await nd(e,l)}Ew(e)&&Tw(e)}function $5(a){return Pr(a)&&a.Ta.length<10}function G5(a,e){a.Ta.push(e);const n=Bi(a);n.O_()&&n.Y_&&n.ea(e.mutations)}function Ew(a){return Pr(a)&&!Bi(a).x_()&&a.Ta.length>0}function Tw(a){Bi(a).start()}async function Y5(a){Bi(a).ra()}async function K5(a){const e=Bi(a);for(const n of a.Ta)e.ea(n.mutations)}async function Q5(a,e,n){const i=a.Ta.shift(),l=ng.from(i,e,n);await ww(a,(()=>a.remoteSyncer.applySuccessfulWrite(l))),await Td(a)}async function X5(a,e){e&&Bi(a).Y_&&await(async function(i,l){if((function(f){return jj(f)&&f!==ie.ABORTED})(l.code)){const c=i.Ta.shift();Bi(i).B_(),await ww(i,(()=>i.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Td(i)}})(a,e),Ew(a)&&Tw(a)}async function Sb(a,e){const n=Pe(a);n.asyncQueue.verifyOperationInProgress(),ge(Ir,"RemoteStore received new credentials");const i=Pr(n);n.Ea.add(3),await Yc(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ed(n)}async function W5(a,e){const n=Pe(a);e?(n.Ea.delete(2),await Ed(n)):e||(n.Ea.add(2),await Yc(n),n.Va.set("Unknown"))}function ao(a){return a.ma||(a.ma=(function(n,i,l){const c=Pe(n);return c.sa(),new M5(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(a.datastore,a.asyncQueue,{Zo:B5.bind(null,a),Yo:q5.bind(null,a),t_:H5.bind(null,a),J_:F5.bind(null,a)}),a.Ra.push((async e=>{e?(a.ma.B_(),dg(a)?hg(a):a.Va.set("Unknown")):(await a.ma.stop(),_w(a))}))),a.ma}function Bi(a){return a.fa||(a.fa=(function(n,i,l){const c=Pe(n);return c.sa(),new O5(i,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(a.datastore,a.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Y5.bind(null,a),t_:X5.bind(null,a),ta:K5.bind(null,a),na:Q5.bind(null,a)}),a.Ra.push((async e=>{e?(a.fa.B_(),await Td(a)):(await a.fa.stop(),a.Ta.length>0&&(ge(Ir,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class fg{constructor(e,n,i,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=c,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,c){const f=Date.now()+i,p=new fg(e,n,f,l,c);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mg(a,e){if(Ha("AsyncQueue",`${e}: ${a}`),so(a))return new pe(ie.UNAVAILABLE,`${e}: ${a}`);throw a}class Ul{static emptySet(e){return new Ul(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Se.comparator(n.key,i.key):(n,i)=>Se.comparator(n.key,i.key),this.keyedMap=fc(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=i.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ul;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class Nb{constructor(){this.ga=new It(Se.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ie(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class Gl{constructor(e,n,i,l,c,f,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,l,c){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new Gl(e,n,Ul.emptySet(n),f,i,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}class J5{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Z5{constructor(){this.queries=Ab(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=Pe(n),c=l.queries;l.queries=Ab(),c.forEach(((f,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new pe(ie.ABORTED,"Firestore shutting down"))}}function Ab(){return new Vr((a=>F1(a)),yd)}async function Sw(a,e){const n=Pe(a);let i=3;const l=e.query;let c=n.queries.get(l);c?!c.Sa()&&e.Da()&&(i=2):(c=new J5,i=e.Da()?0:1);try{switch(i){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(f){const p=mg(f,`Initialization of query '${Rl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.ba.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&pg(n)}async function Nw(a,e){const n=Pe(a),i=e.query;let l=3;const c=n.queries.get(i);if(c){const f=c.ba.indexOf(e);f>=0&&(c.ba.splice(f,1),c.ba.length===0?l=e.Da()?0:1:!c.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function eI(a,e){const n=Pe(a);let i=!1;for(const l of e){const c=l.query,f=n.queries.get(c);if(f){for(const p of f.ba)p.Fa(l)&&(i=!0);f.wa=l}}i&&pg(n)}function tI(a,e,n){const i=Pe(a),l=i.queries.get(e);if(l)for(const c of l.ba)c.onError(n);i.queries.delete(e)}function pg(a){a.Ca.forEach((e=>{e.next()}))}var _p,Rb;(Rb=_p||(_p={})).Ma="default",Rb.Cache="cache";class Aw{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new Gl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_p.Cache}}class Rw{constructor(e){this.key=e}}class Cw{constructor(e){this.key=e}}class nI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=et(),this.mutatedKeys=et(),this.eu=$1(e),this.tu=new Ul(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new Nb,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,w)=>{const S=l.get(b),j=xd(this.query,w)?w:null,Y=!!S&&this.mutatedKeys.has(S.key),q=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let P=!1;S&&j?S.data.isEqual(j.data)?Y!==q&&(i.track({type:3,doc:j}),P=!0):this.su(S,j)||(i.track({type:2,doc:j}),P=!0,(g&&this.eu(j,g)>0||y&&this.eu(j,y)<0)&&(p=!0)):!S&&j?(i.track({type:0,doc:j}),P=!0):S&&!j&&(i.track({type:1,doc:S}),P=!0,(g||y)&&(p=!0)),P&&(j?(f=f.add(j),c=q?c.add(b):c.delete(b)):(f=f.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const b=this.query.limitType==="F"?f.last():f.first();f=f.delete(b.key),c=c.delete(b.key),i.track({type:1,doc:b})}return{tu:f,iu:i,Ss:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((b,w)=>(function(j,Y){const q=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:P})}};return q(j)-q(Y)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,f.length!==0||y?{snapshot:new Gl(this.query,e.tu,c,f,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Nb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=et(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new Cw(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new Rw(i))})),n}cu(e){this.Za=e.ks,this.Ya=et();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const gg="SyncEngine";class sI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class aI{constructor(e){this.key=e,this.hu=!1}}class iI{constructor(e,n,i,l,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Vr((p=>F1(p)),yd),this.Iu=new Map,this.Eu=new Set,this.Ru=new It(Se.comparator),this.Au=new Map,this.Vu=new ig,this.du={},this.mu=new Map,this.fu=$l.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function rI(a,e,n=!0){const i=Ow(a);let l;const c=i.Tu.get(e);return c?(i.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await jw(i,e,n,!0),l}async function lI(a,e){const n=Ow(a);await jw(n,e,!0,!1)}async function jw(a,e,n,i){const l=await N5(a.localStore,ua(e)),c=l.targetId,f=a.sharedClientState.addLocalQueryTarget(c,n);let p;return i&&(p=await oI(a,e,c,f==="current",l.resumeToken)),a.isPrimaryClient&&n&&vw(a.remoteStore,l),p}async function oI(a,e,n,i,l){a.pu=(w,S,j)=>(async function(q,P,z,U){let Q=P.view.ru(z);Q.Ss&&(Q=await bb(q.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,Q))));const ue=U&&U.targetChanges.get(P.targetId),ce=U&&U.targetMismatches.get(P.targetId)!=null,oe=P.view.applyChanges(Q,q.isPrimaryClient,ue,ce);return jb(q,P.targetId,oe.au),oe.snapshot})(a,w,S,j);const c=await bb(a.localStore,e,!0),f=new nI(e,c.ks),p=f.ru(c.documents),g=Gc.createSynthesizedTargetChangeForCurrentChange(n,i&&a.onlineState!=="Offline",l),y=f.applyChanges(p,a.isPrimaryClient,g);jb(a,n,y.au);const b=new sI(e,n,f);return a.Tu.set(e,b),a.Iu.has(n)?a.Iu.get(n).push(e):a.Iu.set(n,[e]),y.snapshot}async function cI(a,e,n){const i=Pe(a),l=i.Tu.get(e),c=i.Iu.get(l.targetId);if(c.length>1)return i.Iu.set(l.targetId,c.filter((f=>!yd(f,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await vp(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&cg(i.remoteStore,l.targetId),wp(i,l.targetId)})).catch(no)):(wp(i,l.targetId),await vp(i.localStore,l.targetId,!0))}async function uI(a,e){const n=Pe(a),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),cg(n.remoteStore,i.targetId))}async function hI(a,e,n){const i=xI(a);try{const l=await(function(f,p){const g=Pe(f),y=Et.now(),b=p.reduce(((j,Y)=>j.add(Y.key)),et());let w,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(j=>{let Y=Fa(),q=et();return g.xs.getEntries(j,b).next((P=>{Y=P,Y.forEach(((z,U)=>{U.isValidDocument()||(q=q.add(z))}))})).next((()=>g.localDocuments.getOverlayedDocuments(j,Y))).next((P=>{w=P;const z=[];for(const U of p){const Q=Sj(U,w.get(U.key).overlayedDocument);Q!=null&&z.push(new Yi(U.key,Q,V1(Q.value.mapValue),Ds.exists(!0)))}return g.mutationQueue.addMutationBatch(j,y,z,p)})).next((P=>{S=P;const z=P.applyToLocalDocumentSet(w,q);return g.documentOverlayCache.saveOverlays(j,P.batchId,z)}))})).then((()=>({batchId:S.batchId,changes:Y1(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(f,p,g){let y=f.du[f.currentUser.toKey()];y||(y=new It(Ze)),y=y.insert(p,g),f.du[f.currentUser.toKey()]=y})(i,l.batchId,n),await Kc(i,l.changes),await Td(i.remoteStore)}catch(l){const c=mg(l,"Failed to persist write");n.reject(c)}}async function Iw(a,e){const n=Pe(a);try{const i=await E5(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=n.Au.get(c);f&&(ct(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?ct(f.hu,14607):l.removedDocuments.size>0&&(ct(f.hu,42227),f.hu=!1))})),await Kc(n,i,e)}catch(i){await no(i)}}function Cb(a,e,n){const i=Pe(a);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((c,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const g=Pe(f);g.onlineState=p;let y=!1;g.queries.forEach(((b,w)=>{for(const S of w.ba)S.va(p)&&(y=!0)})),y&&pg(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function dI(a,e,n){const i=Pe(a);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),c=l&&l.key;if(c){let f=new It(Se.comparator);f=f.insert(c,An.newNoDocument(c,Oe.min()));const p=et().add(c),g=new _d(Oe.min(),new Map,new It(Ze),f,p);await Iw(i,g),i.Ru=i.Ru.remove(c),i.Au.delete(e),yg(i)}else await vp(i.localStore,e,!1).then((()=>wp(i,e,n))).catch(no)}async function fI(a,e){const n=Pe(a),i=e.batch.batchId;try{const l=await w5(n.localStore,e);kw(n,i,null),Dw(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Kc(n,l)}catch(l){await no(l)}}async function mI(a,e,n){const i=Pe(a);try{const l=await(function(f,p){const g=Pe(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((w=>(ct(w!==null,37113),b=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);kw(i,e,n),Dw(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Kc(i,l)}catch(l){await no(l)}}function Dw(a,e){(a.mu.get(e)||[]).forEach((n=>{n.resolve()})),a.mu.delete(e)}function kw(a,e,n){const i=Pe(a);let l=i.du[i.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function wp(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const i of a.Iu.get(e))a.Tu.delete(i),n&&a.Pu.yu(i,n);a.Iu.delete(e),a.isPrimaryClient&&a.Vu.Gr(e).forEach((i=>{a.Vu.containsKey(i)||Mw(a,i)}))}function Mw(a,e){a.Eu.delete(e.path.canonicalString());const n=a.Ru.get(e);n!==null&&(cg(a.remoteStore,n),a.Ru=a.Ru.remove(e),a.Au.delete(n),yg(a))}function jb(a,e,n){for(const i of n)i instanceof Rw?(a.Vu.addReference(i.key,e),pI(a,i)):i instanceof Cw?(ge(gg,"Document no longer in limbo: "+i.key),a.Vu.removeReference(i.key,e),a.Vu.containsKey(i.key)||Mw(a,i.key)):Ie(19791,{wu:i})}function pI(a,e){const n=e.key,i=n.path.canonicalString();a.Ru.get(n)||a.Eu.has(i)||(ge(gg,"New document in limbo: "+n),a.Eu.add(i),yg(a))}function yg(a){for(;a.Eu.size>0&&a.Ru.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const n=new Se(bt.fromString(e)),i=a.fu.next();a.Au.set(i,new aI(n)),a.Ru=a.Ru.insert(n,i),vw(a.remoteStore,new ji(ua(Zp(n.path)),i,"TargetPurposeLimboResolution",md.ce))}}async function Kc(a,e,n){const i=Pe(a),l=[],c=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{f.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){l.push(y);const b=lg.Es(g.targetId,y);c.push(b)}})))})),await Promise.all(f),i.Pu.J_(l),await(async function(g,y){const b=Pe(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>le.forEach(y,(S=>le.forEach(S.Ts,(j=>b.persistence.referenceDelegate.addReference(w,S.targetId,j))).next((()=>le.forEach(S.Is,(j=>b.persistence.referenceDelegate.removeReference(w,S.targetId,j)))))))))}catch(w){if(!so(w))throw w;ge(og,"Failed to update sequence numbers: "+w)}for(const w of y){const S=w.targetId;if(!w.fromCache){const j=b.vs.get(S),Y=j.snapshotVersion,q=j.withLastLimboFreeSnapshotVersion(Y);b.vs=b.vs.insert(S,q)}}})(i.localStore,c))}async function gI(a,e){const n=Pe(a);if(!n.currentUser.isEqual(e)){ge(gg,"User change. New user:",e.toKey());const i=await pw(n.localStore,e);n.currentUser=e,(function(c,f){c.mu.forEach((p=>{p.forEach((g=>{g.reject(new pe(ie.CANCELLED,f))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Kc(n,i.Ns)}}function yI(a,e){const n=Pe(a),i=n.Au.get(e);if(i&&i.hu)return et().add(i.key);{let l=et();const c=n.Iu.get(e);if(!c)return l;for(const f of c){const p=n.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function Ow(a){const e=Pe(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dI.bind(null,e),e.Pu.J_=eI.bind(null,e.eventManager),e.Pu.yu=tI.bind(null,e.eventManager),e}function xI(a){const e=Pe(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mI.bind(null,e),e}class sd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _5(this.persistence,new x5,e.initialUser,this.serializer)}Cu(e){return new mw(rg.Vi,this.serializer)}Du(e){return new R5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sd.provider={build:()=>new sd};class vI extends sd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ct(this.persistence.referenceDelegate instanceof td,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new s5(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new mw((i=>td.Vi(i,n)),this.serializer)}}class Ep{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Cb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=gI.bind(null,this.syncEngine),await W5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Z5})()}createDatastore(e){const n=wd(e.databaseInfo.databaseId),i=k5(e.databaseInfo);return L5(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,c,f,p){return new z5(i,l,c,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>Cb(this.syncEngine,n,0)),(function(){return Eb.v()?new Eb:new C5})())}createSyncEngine(e,n){return(function(l,c,f,p,g,y,b){const w=new iI(l,c,f,p,g,y);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Pe(n);ge(Ir,"RemoteStore shutting down."),i.Ea.add(5),await Yc(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ep.provider={build:()=>new Ep};class Vw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ha("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const qi="FirestoreClient";class bI{constructor(e,n,i,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=Nn.UNAUTHENTICATED,this.clientId=Yp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(i,(async f=>{ge(qi,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(i,(f=>(ge(qi,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=mg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Gm(a,e){a.asyncQueue.verifyOperationInProgress(),ge(qi,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let i=n.initialUser;a.setCredentialChangeListener((async l=>{i.isEqual(l)||(await pw(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function Ib(a,e){a.asyncQueue.verifyOperationInProgress();const n=await _I(a);ge(qi,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener((i=>Sb(e.remoteStore,i))),a.setAppCheckTokenChangeListener(((i,l)=>Sb(e.remoteStore,l))),a._onlineComponents=e}async function _I(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){ge(qi,"Using user provided OfflineComponentProvider");try{await Gm(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ie.FAILED_PRECONDITION||l.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;Bl("Error using user provided cache. Falling back to memory cache: "+n),await Gm(a,new sd)}}else ge(qi,"Using default OfflineComponentProvider"),await Gm(a,new vI(void 0));return a._offlineComponents}async function Pw(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(ge(qi,"Using user provided OnlineComponentProvider"),await Ib(a,a._uninitializedComponentsProvider._online)):(ge(qi,"Using default OnlineComponentProvider"),await Ib(a,new Ep))),a._onlineComponents}function wI(a){return Pw(a).then((e=>e.syncEngine))}async function Tp(a){const e=await Pw(a),n=e.eventManager;return n.onListen=rI.bind(null,e.syncEngine),n.onUnlisten=cI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uI.bind(null,e.syncEngine),n}function EI(a,e,n,i){const l=new Vw(i),c=new Aw(e,l,n);return a.asyncQueue.enqueueAndForget((async()=>Sw(await Tp(a),c))),()=>{l.Nu(),a.asyncQueue.enqueueAndForget((async()=>Nw(await Tp(a),c)))}}function TI(a,e,n={}){const i=new Oi;return a.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,g,y){const b=new Vw({next:S=>{b.Nu(),f.enqueueAndForget((()=>Nw(c,w))),S.fromCache&&g.source==="server"?y.reject(new pe(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new Aw(p,b,{includeMetadataChanges:!0,Ka:!0});return Sw(c,w)})(await Tp(a),a.asyncQueue,e,n,i))),i.promise}function SI(a,e){const n=new Oi;return a.asyncQueue.enqueueAndForget((async()=>hI(await wI(a),e,n))),n.promise}function Lw(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}const NI="ComponentProvider",Db=new Map;function AI(a,e,n,i,l){return new YC(a,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Lw(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const Uw="firestore.googleapis.com",kb=!0;class Mb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uw,this.ssl=kb}else this.host=e.host,this.ssl=e.ssl??kb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<t5)throw new pe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}VC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sd{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new NC;switch(i.type){case"firstParty":return new jC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=Db.get(n);i&&(ge(NI,"Removing Datastore"),Db.delete(n),i.terminate())})(this),Promise.resolve()}}function RI(a,e,n,i={}){a=ca(a,Sd);const l=Jl(e),c=a._getSettings(),f={...c,emulatorOptions:a._getEmulatorOptions()},p=`${e}:${n}`;l&&(R_(`https://${p}`),C_("Firestore",!0)),c.host!==Uw&&c.host!==p&&Bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:p,ssl:l,emulatorOptions:i};if(!Nr(g,f)&&(a._setSettings(g),i.mockUserToken)){let y,b;if(typeof i.mockUserToken=="string")y=i.mockUserToken,b=Nn.MOCK_USER;else{y=V2(i.mockUserToken,a._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new pe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Nn(w)}a._authCredentials=new AC(new T1(y,b))}}class Lr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Lr(this.firestore,e,this._query)}}class Zt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Hc(n,Zt._jsonSchema))return new Zt(e,i||null,new Se(bt.fromString(n.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:Jt("string",Zt._jsonSchemaVersion),referencePath:Jt("string")};class Vi extends Lr{constructor(e,n,i){super(e,n,Zp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new Se(e))}withConverter(e){return new Vi(this.firestore,e,this._path)}}function rt(a,e,...n){if(a=an(a),S1("collection","path",e),a instanceof Sd){const i=bt.fromString(e,...n);return Yv(i),new Vi(a,null,i)}{if(!(a instanceof Zt||a instanceof Vi))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=a._path.child(bt.fromString(e,...n));return Yv(i),new Vi(a.firestore,null,i)}}function Ct(a,e,...n){if(a=an(a),arguments.length===1&&(e=Yp.newId()),S1("doc","path",e),a instanceof Sd){const i=bt.fromString(e,...n);return Gv(i),new Zt(a,null,new Se(i))}{if(!(a instanceof Zt||a instanceof Vi))throw new pe(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=a._path.child(bt.fromString(e,...n));return Gv(i),new Zt(a.firestore,a instanceof Vi?a.converter:null,new Se(i))}}const Ob="AsyncQueue";class Vb{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yw(this,"async_queue_retry"),this._c=()=>{const i=$m();i&&ge(Ob,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=$m();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Oi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!so(e))throw e;ge(Ob,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ha("INTERNAL UNHANDLED ERROR: ",Pb(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=fg.createAndSchedule(this,e,n,i,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ie(47125,{Pc:Pb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Pb(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}class Dr extends Sd{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new Vb,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vb(e),this._firestoreClient=void 0,await e}}}function CI(a,e){const n=typeof a=="object"?a:k_(),i=typeof a=="string"?a:Qh,l=Pp(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const c=M2("firestore");c&&RI(l,...c)}return l}function xg(a){if(a._terminated)throw new pe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||jI(a),a._firestoreClient}function jI(a){const e=a._freezeSettings(),n=AI(a._databaseId,a._app?.options.appId||"",a._persistenceKey,a._app?.options.apiKey,e);a._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new bI(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(a._componentsProvider))}class gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gs(bn.fromBase64String(e))}catch(n){throw new pe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gs(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Hc(e,gs._jsonSchema))return gs.fromBase64String(e.bytes)}}gs._jsonSchemaVersion="firestore/bytes/1.0",gs._jsonSchema={type:Jt("string",gs._jsonSchemaVersion),bytes:Jt("string")};class vg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nd{constructor(e){this._methodName=e}}class da{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:da._jsonSchemaVersion}}static fromJSON(e){if(Hc(e,da._jsonSchema))return new da(e.latitude,e.longitude)}}da._jsonSchemaVersion="firestore/geoPoint/1.0",da._jsonSchema={type:Jt("string",da._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};class ks{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Hc(e,ks._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ks(e.vectorValues);throw new pe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ks._jsonSchemaVersion="firestore/vectorValue/1.0",ks._jsonSchema={type:Jt("string",ks._jsonSchemaVersion),vectorValues:Jt("object")};const II=/^__.*__$/;class DI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms):new $c(e,this.data,n,this.fieldTransforms)}}class zw{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Yi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Bw(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{dataSource:a})}}class bg{constructor(e,n,i,l,c,f){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,c===void 0&&this.validatePath(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return ad(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Bw(this.dataSource)&&II.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class kI{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||wd(e)}createContext(e,n,i,l=!1){return new bg({dataSource:e,methodName:n,targetDoc:i,path:vn.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _g(a){const e=a._freezeSettings(),n=wd(a._databaseId);return new kI(a._databaseId,!!e.ignoreUndefinedProperties,n)}function MI(a,e,n,i,l,c={}){const f=a.createContext(c.merge||c.mergeFields?2:0,e,n,l);Eg("Data must be an object, but it was:",f,i);const p=qw(i,f);let g,y;if(c.merge)g=new Jn(f.fieldMask),y=f.fieldTransforms;else if(c.mergeFields){const b=[];for(const w of c.mergeFields){const S=Yl(e,w,n);if(!f.contains(S))throw new pe(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);$w(b,S)||b.push(S)}g=new Jn(b),y=f.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=f.fieldTransforms;return new DI(new Un(p),g,y)}class Ad extends Nd{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ad}}class wg extends Nd{_toFieldTransform(e){return new _j(e.path,new Ic)}isEqual(e){return e instanceof wg}}function OI(a,e,n,i){const l=a.createContext(1,e,n);Eg("Data must be an object, but it was:",l,i);const c=[],f=Un.empty();Gi(i,((g,y)=>{const b=Fw(e,g,n);y=an(y);const w=l.childContextForFieldPath(b);if(y instanceof Ad)c.push(b);else{const S=Qc(y,w);S!=null&&(c.push(b),f.set(b,S))}}));const p=new Jn(c);return new zw(f,p,l.fieldTransforms)}function VI(a,e,n,i,l,c){const f=a.createContext(1,e,n),p=[Yl(e,i,n)],g=[l];if(c.length%2!=0)throw new pe(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<c.length;S+=2)p.push(Yl(e,c[S])),g.push(c[S+1]);const y=[],b=Un.empty();for(let S=p.length-1;S>=0;--S)if(!$w(y,p[S])){const j=p[S];let Y=g[S];Y=an(Y);const q=f.childContextForFieldPath(j);if(Y instanceof Ad)y.push(j);else{const P=Qc(Y,q);P!=null&&(y.push(j),b.set(j,P))}}const w=new Jn(y);return new zw(b,w,f.fieldTransforms)}function PI(a,e,n,i=!1){return Qc(n,a.createContext(i?4:3,e))}function Qc(a,e){if(Hw(a=an(a)))return Eg("Unsupported field value:",e,a),qw(a,e);if(a instanceof Nd)return(function(i,l){if(!Bw(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const c=i._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const c=[];let f=0;for(const p of i){let g=Qc(p,l.childContextForArray(f));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),f++}return{arrayValue:{values:c}}})(a,e)}return(function(i,l){if((i=an(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xj(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const c=Et.fromDate(i);return{timestampValue:ed(l.serializer,c)}}if(i instanceof Et){const c=new Et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ed(l.serializer,c)}}if(i instanceof da)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof gs)return{bytesValue:iw(l.serializer,i._byteString)};if(i instanceof Zt){const c=l.databaseId,f=i.firestore._databaseId;if(!f.isEqual(c))throw l.createError(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ag(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof ks)return(function(f,p){const g=f instanceof ks?f.toArray():f;return{mapValue:{fields:{[M1]:{stringValue:O1},[Xh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return eg(p.serializer,b)}))}}}}}})(i,l);if(dw(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${fd(i)}`)})(a,e)}function qw(a,e){const n={};return R1(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(a,((i,l)=>{const c=Qc(l,e.childContextForField(i));c!=null&&(n[i]=c)})),{mapValue:{fields:n}}}function Hw(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Et||a instanceof da||a instanceof gs||a instanceof Zt||a instanceof Nd||a instanceof ks||dw(a))}function Eg(a,e,n){if(!Hw(n)||!N1(n)){const i=fd(n);throw i==="an object"?e.createError(a+" a custom object"):e.createError(a+" "+i)}}function Yl(a,e,n){if((e=an(e))instanceof vg)return e._internalPath;if(typeof e=="string")return Fw(a,e);throw ad("Field path arguments must be of type string or ",a,!1,void 0,n)}const LI=new RegExp("[~\\*/\\[\\]]");function Fw(a,e,n){if(e.search(LI)>=0)throw ad(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new vg(...e.split("."))._internalPath}catch{throw ad(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function ad(a,e,n,i,l){const c=i&&!i.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(c||f)&&(g+=" (found",c&&(g+=` in field ${i}`),f&&(g+=` in document ${l}`),g+=")"),new pe(ie.INVALID_ARGUMENT,p+a+g)}function $w(a,e){return a.some((n=>n.isEqual(e)))}class UI{convertValue(e,n="none"){switch(zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Gi(e,((l,c)=>{i[l]=this.convertValue(c,n)})),i}convertVectorValue(e){const n=e.fields?.[Xh].arrayValue?.values?.map((i=>Ut(i.doubleValue)));return new ks(n)}convertGeoPoint(e){return new da(Ut(e.latitude),Ut(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=gd(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Rc(e));default:return null}}convertTimestamp(e){const n=Li(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=bt.fromString(e);ct(hw(i),9688,{name:e});const l=new Cc(i.get(1),i.get(3)),c=new Se(i.popFirst(5));return l.isEqual(n)||Ha(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}class Tg extends UI{constructor(e){super(),this.firestore=e}convertBytes(e){return new gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,n)}}function Sg(){return new wg("serverTimestamp")}const Lb="@firebase/firestore",Ub="4.10.0";function zb(a){return(function(n,i){if(typeof n!="object"||n===null)return!1;const l=n;for(const c of i)if(c in l&&typeof l[c]=="function")return!0;return!1})(a,["next","error","complete"])}class Gw{constructor(e,n,i,l,c){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new zI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Yl("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class zI extends Gw{data(){return super.data()}}function Yw(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new pe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ng{}class BI extends Ng{}function ys(a,e,...n){let i=[];e instanceof Ng&&i.push(e),i=i.concat(n),(function(c){const f=c.filter((g=>g instanceof Ag)).length,p=c.filter((g=>g instanceof Rd)).length;if(f>1||f>0&&p>0)throw new pe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)a=l._apply(a);return a}class Rd extends BI{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Rd(e,n,i)}_apply(e){const n=this._parse(e);return Kw(e._query,n),new Lr(e.firestore,e.converter,fp(e._query,n))}_parse(e){const n=_g(e.firestore);return(function(c,f,p,g,y,b,w){let S;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){qb(w,b);const Y=[];for(const q of w)Y.push(Bb(g,c,q));S={arrayValue:{values:Y}}}else S=Bb(g,c,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||qb(w,b),S=PI(p,f,w,b==="in"||b==="not-in");return Wt.create(y,b,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zn(a,e,n){const i=e,l=Yl("where",a);return Rd._create(l,i,n)}class Ag extends Ng{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ag(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Os.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,c){let f=l;const p=c.getFlattenedFilters();for(const g of p)Kw(f,g),f=fp(f,g)})(e._query,n),new Lr(e.firestore,e.converter,fp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Bb(a,e,n){if(typeof(n=an(n))=="string"){if(n==="")throw new pe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!H1(e)&&n.indexOf("/")!==-1)throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(bt.fromString(n));if(!Se.isDocumentKey(i))throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return tb(a,new Se(i))}if(n instanceof Zt)return tb(a,n._key);throw new pe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fd(n)}.`)}function qb(a,e){if(!Array.isArray(a)||a.length===0)throw new pe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Kw(a,e){const n=(function(l,c){for(const f of l)for(const p of f.getFlattenedFilters())if(c.indexOf(p.op)>=0)return p.op;return null})(a.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function qI(a,e,n){let i;return i=a?a.toFirestore(e):e,i}class pc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tr extends Gw{constructor(e,n,i,l,c,f){super(e,n,i,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Yl("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Tr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Tr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Tr._jsonSchema={type:Jt("string",Tr._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class Lh extends Tr{data(e={}){return super.data(e)}}class Sr{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new pc(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Lh(this._firestore,this._userDataWriter,i.key,i,new pc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const g=new Lh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new pc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const g=new Lh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new pc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),b=f.indexOf(p.doc.key)),{type:HI(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Yp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HI(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:a})}}Sr._jsonSchemaVersion="firestore/querySnapshot/1.0",Sr._jsonSchema={type:Jt("string",Sr._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};function xs(a){a=ca(a,Lr);const e=ca(a.firestore,Dr),n=xg(e),i=new Tg(e);return Yw(a._query),TI(n,a._query).then((l=>new Sr(e,i,a,l)))}function Lt(a,e,n,...i){a=ca(a,Zt);const l=ca(a.firestore,Dr),c=_g(l);let f;return f=typeof(e=an(e))=="string"||e instanceof vg?VI(c,"updateDoc",a._key,e,n,i):OI(c,"updateDoc",a._key,e),Rg(l,[f.toMutation(a._key,Ds.exists(!0))])}function FI(a){return Rg(ca(a.firestore,Dr),[new tg(a._key,Ds.none())])}function io(a,e){const n=ca(a.firestore,Dr),i=Ct(a),l=qI(a.converter,e),c=_g(a.firestore);return Rg(n,[MI(c,"addDoc",i._key,l,a.converter!==null,{}).toMutation(i._key,Ds.exists(!1))]).then((()=>i))}function zn(a,...e){a=an(a);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||zb(e[i])||(n=e[i++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(zb(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let c,f,p;if(a instanceof Zt)f=ca(a.firestore,Dr),p=Zp(a._key.path),c={next:y=>{e[i]&&e[i]($I(f,a,y))},error:e[i+1],complete:e[i+2]};else{const y=ca(a,Lr);f=ca(y.firestore,Dr),p=y._query;const b=new Tg(f);c={next:w=>{e[i]&&e[i](new Sr(f,b,y,w))},error:e[i+1],complete:e[i+2]},Yw(a._query)}const g=xg(f);return EI(g,p,l,c)}function Rg(a,e){const n=xg(a);return SI(n,e)}function $I(a,e,n){const i=n.docs.get(e._key),l=new Tg(a);return new Tr(a,l,e._key,i,new pc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){SC(Zl),zl(new Ar("firestore",((i,{instanceIdentifier:l,options:c})=>{const f=i.getProvider("app").getImmediate(),p=new Dr(new RC(i.getProvider("auth-internal")),new IC(f,i.getProvider("app-check-internal")),KC(f,l),f);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),ki(Lb,Ub,e),ki(Lb,Ub,"esm2020")})();const GI={apiKey:"AIzaSyC1qZ9fK-6LFBxVWZsAD4dZq-KVg36A7f8",authDomain:"scheduler-65e51.firebaseapp.com",projectId:"scheduler-65e51",storageBucket:"scheduler-65e51.firebasestorage.app",messagingSenderId:"93993791456",appId:"1:93993791456:web:3a777a2da0dad4b8b74585"},Qw=D_(GI),Ne=CI(Qw),kr=_C(Qw);const Xw=(...a)=>a.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();const YI=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const KI=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());const Hb=a=>{const e=KI(a);return e.charAt(0).toUpperCase()+e.slice(1)};var QI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const XI=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const WI=I.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:f,...p},g)=>I.createElement("svg",{ref:g,...QI,width:e,height:e,stroke:a,strokeWidth:i?Number(n)*24/Number(e):n,className:Xw("lucide",l),...!c&&!XI(p)&&{"aria-hidden":"true"},...p},[...f.map(([y,b])=>I.createElement(y,b)),...Array.isArray(c)?c:[c]]));const Ye=(a,e)=>{const n=I.forwardRef(({className:i,...l},c)=>I.createElement(WI,{ref:c,iconNode:e,className:Xw(`lucide-${YI(Hb(a))}`,`lucide-${a}`,i),...l}));return n.displayName=Hb(a),n};const JI=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],La=Ye("arrow-left",JI);const ZI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],wc=Ye("arrow-right",ZI);const e4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],kl=Ye("bell",e4);const t4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Ym=Ye("calendar-check",t4);const n4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Fb=Ye("calendar-days",n4);const s4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],jt=Ye("calendar",s4);const a4=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],i4=Ye("chart-column",a4);const r4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Cg=Ye("check",r4);const l4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ww=Ye("chevron-left",l4);const o4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Jw=Ye("chevron-right",o4);const c4=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ra=Ye("circle-check-big",c4);const u4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Il=Ye("circle-x",u4);const h4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Bn=Ye("clock",h4);const d4=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],f4=Ye("coffee",d4);const m4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],p4=Ye("eye",m4);const g4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],y4=Ye("globe",g4);const x4=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],Sp=Ye("list-ordered",x4);const v4=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],id=Ye("list-plus",v4);const b4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Zw=Ye("lock",b4);const _4=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],w4=Ye("log-out",_4);const E4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],$b=Ye("mail",E4);const T4=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],eE=Ye("party-popper",T4);const S4=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tE=Ye("pen-line",S4);const N4=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Gb=Ye("phone",N4);const A4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jg=Ye("plus",A4);const R4=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],nE=Ye("refresh-cw",R4);const C4=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],j4=Ye("save",C4);const I4=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Ur=Ye("scissors",I4);const D4=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],k4=Ye("settings",D4);const M4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],O4=Ye("sparkles",M4);const V4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Yb=Ye("star",V4);const P4=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Ua=Ye("tag",P4);const L4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],rd=Ye("trash-2",L4);const U4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],z4=Ye("trending-up",U4);const B4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Np=Ye("triangle-alert",B4);const q4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Kb=Ye("user",q4);const H4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wn=Ye("users",H4);const F4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kl=Ye("x",F4);const $4=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],G4=Ye("zap",$4);function Qb({className:a=""}){return u.jsxs(Ge,{to:"/",className:`flex items-center gap-2.5 ${a}`,children:[u.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:u.jsx(Ur,{className:"w-[18px] h-[18px] text-white"})}),u.jsxs("span",{className:"text-xl font-extrabold tracking-tight text-slate-900",children:["Book",u.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function Y4(){return u.jsxs("div",{className:"min-h-screen bg-white",children:[u.jsx("nav",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-100",children:u.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[u.jsx(Qb,{}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Ge,{to:"/login",className:"px-4 py-2.5 text-sm font-semibold text-slate-600 hover:text-slate-900 transition-colors",children:"Sign In"}),u.jsxs(Ge,{to:"/register",className:"hidden sm:inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:["Get Started Free",u.jsx(wc,{className:"w-4 h-4"})]}),u.jsx(Ge,{to:"/register",className:"sm:hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all",children:"Start Free"})]})]})}),u.jsxs("section",{className:"relative overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 -z-10",children:[u.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-50 rounded-full blur-3xl opacity-60 -translate-y-1/2 translate-x-1/3"}),u.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-violet-50 rounded-full blur-3xl opacity-50 translate-y-1/3 -translate-x-1/4"})]}),u.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 pt-16 sm:pt-24 pb-16 sm:pb-20",children:u.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[u.jsxs("div",{className:"animate-fade-in-up",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 bg-blue-50 border border-blue-100 rounded-full text-sm font-medium text-blue-700 mb-6",children:[u.jsx(O4,{className:"w-3.5 h-3.5"}),"Free for beauty professionals"]}),u.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-[3.5rem] font-extrabold text-slate-900 leading-[1.1] mb-6 tracking-tight",children:["Online booking",u.jsx("br",{}),u.jsx("span",{className:"text-blue-600",children:"made effortless"})]}),u.jsx("p",{className:"text-lg sm:text-xl text-slate-600 leading-relaxed mb-8 max-w-lg",children:"Let clients book 24/7. Manage your team, services, and schedule from one beautiful dashboard. No more phone tag."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-10",children:[u.jsxs(Ge,{to:"/register",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-base shadow-lg shadow-blue-600/25 hover:shadow-xl hover:shadow-blue-600/30 transition-all hover:-translate-y-0.5",children:["Start for Free",u.jsx(wc,{className:"w-4 h-4"})]}),u.jsx("a",{href:"#how-it-works",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-base border border-slate-200 transition-all",children:"See How It Works"})]}),u.jsxs("div",{className:"flex items-center gap-5 text-sm text-slate-500",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(ra,{className:"w-4 h-4 text-emerald-500"}),u.jsx("span",{children:"Free to use"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(ra,{className:"w-4 h-4 text-emerald-500"}),u.jsx("span",{children:"No credit card"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(ra,{className:"w-4 h-4 text-emerald-500"}),u.jsx("span",{children:"Setup in 2 min"})]})]})]}),u.jsxs("div",{className:"relative animate-fade-in-up",style:{animationDelay:"150ms"},children:[u.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl shadow-slate-200/60 border border-slate-200/80 overflow-hidden",children:[u.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-slate-50 border-b border-slate-100",children:[u.jsxs("div",{className:"flex gap-1.5",children:[u.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),u.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),u.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"})]}),u.jsx("div",{className:"flex-1 mx-4",children:u.jsx("div",{className:"bg-white border border-slate-200 rounded-lg px-3 py-1.5 text-xs text-slate-400 font-mono",children:"bookflow.app/shop/janes-salon"})})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-sm font-bold",children:"J"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-bold text-slate-900",children:"Jane's Salon"}),u.jsx("div",{className:"text-xs text-slate-500",children:"Book your next appointment"})]})]}),u.jsx("div",{className:"space-y-2.5",children:[{name:"Haircut & Style",price:"$45",time:"45 min",color:"bg-blue-500"},{name:"Color Treatment",price:"$120",time:"2 hours",color:"bg-violet-500"},{name:"Blowout",price:"$35",time:"30 min",color:"bg-emerald-500"}].map(a=>u.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-slate-50 rounded-xl border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/50 transition-all cursor-default",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-2 h-8 ${a.color} rounded-full`}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold text-slate-800",children:a.name}),u.jsx("div",{className:"text-xs text-slate-500",children:a.time})]})]}),u.jsx("div",{className:"text-sm font-bold text-slate-900",children:a.price})]},a.name))})]})]}),u.jsxs("div",{className:"absolute -bottom-4 -left-4 bg-white rounded-xl shadow-lg shadow-slate-200/60 border border-slate-100 px-4 py-3 flex items-center gap-3 animate-float",children:[u.jsx("div",{className:"w-9 h-9 bg-emerald-100 rounded-full flex items-center justify-center",children:u.jsx(ra,{className:"w-5 h-5 text-emerald-600"})}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-slate-500",children:"Booking confirmed"}),u.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Tomorrow at 2:00 PM"})]})]})]})]})})]}),u.jsx("section",{className:"border-y border-slate-100 bg-slate-50/50",children:u.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-8 sm:py-10",children:u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8 sm:gap-16 text-center",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"500+"}),u.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Businesses trust BookFlow"})]}),u.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"10,000+"}),u.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Appointments booked"})]}),u.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-center gap-1 text-2xl sm:text-3xl font-extrabold text-slate-900",children:["4.9 ",u.jsx(Yb,{className:"w-5 h-5 text-amber-400 fill-amber-400"})]}),u.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Average rating"})]})]})})}),u.jsx("section",{className:"py-20 sm:py-28",children:u.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[u.jsxs("div",{className:"text-center mb-14",children:[u.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Everything you need to run your bookings"}),u.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Built specifically for beauty professionals, salons, and service businesses. Simple, powerful, and free."})]}),u.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 stagger-children",children:[{icon:u.jsx(jt,{className:"w-6 h-6"}),title:"Smart Scheduling",desc:"Set weekly hours with breaks. Slots auto-generate so your calendar is always up to date.",color:"bg-blue-100 text-blue-600"},{icon:u.jsx(Wn,{className:"w-6 h-6"}),title:"Multi-Staff Support",desc:"Add your whole team. Each member gets their own schedule, hours, and bookings.",color:"bg-violet-100 text-violet-600"},{icon:u.jsx(G4,{className:"w-6 h-6"}),title:"Instant Booking",desc:"Clients pick a service, choose a stylist, and book  all in under a minute.",color:"bg-amber-100 text-amber-600"},{icon:u.jsx(y4,{className:"w-6 h-6"}),title:"Your Own Booking Page",desc:"Get a unique link to share anywhere. No app downloads needed for your clients.",color:"bg-emerald-100 text-emerald-600"}].map(a=>u.jsxs("div",{className:"group bg-white rounded-2xl p-7 border border-slate-200/80 hover:border-slate-300 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[u.jsx("div",{className:`w-12 h-12 ${a.color} rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300`,children:a.icon}),u.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:a.title}),u.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:a.desc})]},a.title))})]})}),u.jsx("section",{id:"how-it-works",className:"py-20 sm:py-28 bg-slate-50 border-y border-slate-100",children:u.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[u.jsxs("div",{className:"text-center mb-14",children:[u.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Up and running in minutes"}),u.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Three simple steps to start accepting online bookings today."})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8 lg:gap-12 relative",children:[u.jsx("div",{className:"hidden md:block absolute top-14 left-[calc(16.67%+1rem)] right-[calc(16.67%+1rem)] h-px bg-gradient-to-r from-blue-200 via-violet-200 to-emerald-200"}),[{step:"1",title:"Create your account",desc:"Sign up free in 30 seconds. Name your shop and you're in.",color:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/30"},{step:"2",title:"Set up your shop",desc:"Add your services, team, and weekly hours. BookFlow handles the rest.",color:"from-violet-500 to-violet-600",shadow:"shadow-violet-500/30"},{step:"3",title:"Share your link",desc:"Send your booking page to clients. They book, you get notified.",color:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/30"}].map(a=>u.jsxs("div",{className:"relative text-center",children:[u.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${a.color} rounded-2xl flex items-center justify-center mx-auto mb-6 text-white text-xl font-extrabold shadow-lg ${a.shadow} relative z-10`,children:a.step}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:a.title}),u.jsx("p",{className:"text-slate-600 leading-relaxed max-w-xs mx-auto",children:a.desc})]},a.step))]})]})}),u.jsx("section",{className:"py-20 sm:py-28",children:u.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[u.jsxs("div",{className:"text-center mb-14",children:[u.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Loved by professionals"}),u.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"See why salons and stylists are switching to BookFlow."})]}),u.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{quote:"BookFlow replaced our paper appointment book. Clients love being able to book online anytime.",name:"Maria Santos",role:"Salon Owner",initials:"MS",color:"bg-blue-100 text-blue-700"},{quote:"Setting up was incredibly easy. I had my booking page live and shared with clients in under 10 minutes.",name:"David Chen",role:"Barber",initials:"DC",color:"bg-violet-100 text-violet-700"},{quote:"The multi-staff feature is perfect. Each stylist manages their own schedule and clients can pick who they want.",name:"Lisa Park",role:"Studio Manager",initials:"LP",color:"bg-emerald-100 text-emerald-700"}].map(a=>u.jsxs("div",{className:"bg-white rounded-2xl p-7 border border-slate-200/80 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[u.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(5)].map((e,n)=>u.jsx(Yb,{className:"w-4 h-4 text-amber-400 fill-amber-400"},n))}),u.jsxs("p",{className:"text-slate-700 leading-relaxed mb-6",children:['"',a.quote,'"']}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:`w-10 h-10 ${a.color} rounded-full flex items-center justify-center text-sm font-bold`,children:a.initials}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.name}),u.jsx("div",{className:"text-xs text-slate-500",children:a.role})]})]})]},a.name))})]})}),u.jsxs("section",{className:"py-20 sm:py-28 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 relative overflow-hidden",children:[u.jsxs("div",{className:"absolute inset-0 -z-0",children:[u.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),u.jsx("div",{className:"absolute bottom-0 right-1/4 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl"})]}),u.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto px-5 sm:px-8 text-center",children:[u.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold text-white mb-6 leading-tight",children:"Ready to streamline your bookings?"}),u.jsx("p",{className:"text-lg text-slate-400 mb-10 max-w-xl mx-auto",children:"Join hundreds of professionals who have ditched the old appointment book. Set up in minutes, free forever."}),u.jsxs(Ge,{to:"/register",className:"inline-flex items-center gap-2 px-8 py-4 bg-white hover:bg-slate-50 text-slate-900 rounded-xl font-bold text-lg transition-all hover:shadow-xl hover:shadow-white/10 hover:-translate-y-0.5",children:["Create Your Free Account",u.jsx(wc,{className:"w-5 h-5"})]})]})]}),u.jsx("footer",{className:"bg-white border-t border-slate-100",children:u.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-10",children:u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[u.jsx(Qb,{}),u.jsxs("div",{className:"flex items-center gap-6 text-sm text-slate-500",children:[u.jsx(Ge,{to:"/register",className:"hover:text-slate-900 transition-colors",children:"Sign Up"}),u.jsx("span",{className:"text-slate-200",children:""}),u.jsx(Ge,{to:"/login",className:"hover:text-slate-900 transition-colors",children:"Sign In"}),u.jsx("span",{className:"text-slate-200",children:""}),u.jsx("a",{href:"#how-it-works",className:"hover:text-slate-900 transition-colors",children:"How It Works"})]}),u.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," BookFlow. All rights reserved."]})]})})})]})}function K4(a){return a.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function Q4(){const a=Wl(),[e,n]=I.useState(""),[i,l]=I.useState(""),[c,f]=I.useState(""),[p,g]=I.useState(""),[y,b]=I.useState(!1),w=K4(e),S=async j=>{if(j.preventDefault(),g(""),!w){g("Please enter a valid shop name");return}if(c.length<6){g("Password must be at least 6 characters");return}b(!0);try{const Y=ys(rt(Ne,"shops"),Zn("slug","==",w));if(!(await xs(Y)).empty){g("A shop with that name already exists. Please choose a different name."),b(!1);return}const z=(await rR(kr,i,c)).user;await io(rt(Ne,"shops"),{name:e.trim(),slug:w,ownerUid:z.uid,ownerEmail:i,createdAt:Sg()}),a(`/shop/${w}/dashboard`)}catch(Y){switch(Y.code){case"auth/email-already-in-use":g("An account with this email already exists");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/weak-password":g("Password must be at least 6 characters");break;default:g("Registration failed. Please try again.")}}finally{b(!1)}};return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:u.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsxs(Ge,{to:"/",className:"inline-flex items-center gap-2.5",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:u.jsx(Ur,{className:"w-5 h-5 text-white"})}),u.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",u.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),u.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Create your shop"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Set up your booking page in seconds  it's free"})]}),u.jsxs("form",{onSubmit:S,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Shop Name"}),u.jsx("input",{type:"text",value:e,onChange:j=>{n(j.target.value),g("")},placeholder:"Jane's Salon",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),w&&u.jsxs("p",{className:"mt-1.5 text-xs text-slate-400",children:["Your page: ",u.jsxs("span",{className:"font-mono text-blue-600 font-medium",children:["bookflow.app/shop/",w]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),u.jsx("input",{type:"email",value:i,onChange:j=>{l(j.target.value),g("")},placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),u.jsx("input",{type:"password",value:c,onChange:j=>{f(j.target.value),g("")},placeholder:"At least 6 characters",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&u.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[u.jsx("span",{children:""})," ",p]})]}),u.jsx("button",{type:"submit",disabled:y,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:y?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Creating your shop"]}):u.jsxs(u.Fragment,{children:["Create Shop",u.jsx(wc,{className:"w-4 h-4"})]})})]}),u.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:u.jsxs("p",{className:"text-sm text-slate-500",children:["Already have an account?"," ",u.jsx(Ge,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Sign in"})]})})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs(Ge,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[u.jsx(La,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function X4({user:a}){const e=Wl(),[n,i]=I.useState(""),[l,c]=I.useState(""),[f,p]=I.useState(""),[g,y]=I.useState(!1);I.useState(()=>{if(!a)return;(async()=>{const S=ys(rt(Ne,"shops"),Zn("ownerUid","==",a.uid)),j=await xs(S);if(!j.empty){const Y=j.docs[0].data();e(`/shop/${Y.slug}/dashboard`,{replace:!0})}})()},[a,e]);const b=async w=>{w.preventDefault(),p(""),y(!0);try{const j=(await r1(kr,n,l)).user,Y=ys(rt(Ne,"shops"),Zn("ownerUid","==",j.uid)),q=await xs(Y);if(q.empty){p("No shop found for this account. Need to create one?"),await kr.signOut(),y(!1);return}const P=q.docs[0].data();e(`/shop/${P.slug}/dashboard`,{replace:!0})}catch(S){switch(S.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":p("Invalid email or password");break;case"auth/invalid-email":p("Please enter a valid email address");break;case"auth/too-many-requests":p("Too many failed attempts. Please try again later.");break;default:p("Login failed. Please try again.")}c("")}finally{y(!1)}};return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:u.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsxs(Ge,{to:"/",className:"inline-flex items-center gap-2.5",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:u.jsx(Ur,{className:"w-5 h-5 text-white"})}),u.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",u.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),u.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),u.jsxs("form",{onSubmit:b,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),u.jsx("input",{type:"email",value:n,onChange:w=>{i(w.target.value),p("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),u.jsx("input",{type:"password",value:l,onChange:w=>{c(w.target.value),p("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${f?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),f&&u.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[u.jsx("span",{children:""})," ",f]})]}),u.jsx("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:g?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):u.jsxs(u.Fragment,{children:["Sign In",u.jsx(wc,{className:"w-4 h-4"})]})})]}),u.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:u.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",u.jsx(Ge,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs(Ge,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[u.jsx(La,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function sE({availableDates:a,selectedDate:e,onSelectDate:n}){const[i,l]=I.useState(new Date),c=z=>{const U=z.getFullYear(),Q=z.getMonth(),ue=new Date(U,Q,1),oe=new Date(U,Q+1,0).getDate(),N=ue.getDay();return{daysInMonth:oe,startingDayOfWeek:N,year:U,month:Q}},{daysInMonth:f,startingDayOfWeek:p,year:g,month:y}=c(i),b=()=>{l(new Date(i.getFullYear(),i.getMonth()-1))},w=()=>{l(new Date(i.getFullYear(),i.getMonth()+1))},S=z=>{const U=`${g}-${String(y+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`;return a.includes(U)},j=z=>`${g}-${String(y+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`===e,Y=z=>{if(S(z)){const U=`${g}-${String(y+1).padStart(2,"0")}-${String(z).padStart(2,"0")}`;n(U)}},q=["January","February","March","April","May","June","July","August","September","October","November","December"],P=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return u.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5 sm:p-6 shadow-sm",children:[u.jsxs("div",{className:"flex justify-between items-center mb-5",children:[u.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:u.jsx(Ww,{className:"w-5 h-5 text-slate-600"})}),u.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[q[y]," ",g]}),u.jsx("button",{onClick:w,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:u.jsx(Jw,{className:"w-5 h-5 text-slate-600"})})]}),u.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:P.map(z=>u.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:z},z))}),u.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:p}).map((z,U)=>u.jsx("div",{},`empty-${U}`)),Array.from({length:f}).map((z,U)=>{const Q=U+1,ue=S(Q),ce=j(Q),oe=new Date,N=oe.getDate()===Q&&oe.getMonth()===y&&oe.getFullYear()===g;return u.jsxs("button",{onClick:()=>Y(Q),disabled:!ue,className:`
                relative p-2.5 sm:p-3 text-center rounded-lg text-sm font-semibold transition-all duration-200
                ${ce?"bg-blue-600 text-white shadow-md shadow-blue-600/30":ue?"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 hover:border-emerald-300 cursor-pointer":N?"text-slate-900 font-bold":"text-slate-300 cursor-not-allowed"}
              `,children:[Q,N&&!ce&&u.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]},Q)})]}),u.jsxs("div",{className:"mt-4 flex gap-5 text-xs text-slate-500",children:[u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-3 h-3 bg-emerald-50 border border-emerald-200 rounded"}),u.jsx("span",{children:"Available"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),u.jsx("span",{children:"Selected"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),u.jsx("span",{children:"Today"})]})]})]})}const W4=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"},{key:"saturday",label:"Sat"},{key:"sunday",label:"Sun"}],Xb=[{key:"morning",label:"Morning (9AM12PM)",start:"09:00",end:"12:00"},{key:"afternoon",label:"Afternoon (12PM5PM)",start:"12:00",end:"17:00"},{key:"evening",label:"Evening (5PM9PM)",start:"17:00",end:"21:00"},{key:"any",label:"Any time",start:"00:00",end:"23:59"}];function J4(){const a="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="WL";for(let n=0;n<4;n++)e+=a.charAt(Math.floor(Math.random()*a.length));return e}function Wb({shopId:a,slug:e,selectedService:n,selectedStaff:i,staffMembers:l,preferredDate:c,onSuccess:f,onCancel:p}){const[g,y]=I.useState({name:"",email:"",phone:""}),[b,w]=I.useState([]),[S,j]=I.useState("any"),[Y,q]=I.useState(!1),[P,z]=I.useState(!1),[U,Q]=I.useState(""),ue=oe=>{w(N=>N.includes(oe)?N.filter(A=>A!==oe):[...N,oe])},ce=async oe=>{oe.preventDefault(),q(!0);try{const N=J4(),A=Xb.find(L=>L.key===S),R=i&&i!=="any"?i.id:"any",M=i&&i!=="any"?i.name:"Any Available",k={clientName:g.name,clientEmail:g.email,clientPhone:g.phone,serviceId:n?.id||null,serviceName:n?.name||"Any Service",staffId:R,staffName:M,preferredDate:c||null,preferredDays:b.length>0?b:null,preferredTimeRange:A?{start:A.start,end:A.end}:null,status:"waiting",refCode:N,createdAt:new Date().toISOString(),notifiedAt:null,notifiedSlot:null};await io(rt(Ne,"shops",a,"waitlist"),k),Q(N),z(!0),f&&f(N)}catch(N){console.error("Waitlist error:",N)}finally{q(!1)}};return P?u.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg shadow-blue-100/50 p-8 text-center animate-scale-in",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(ra,{className:"w-8 h-8 text-blue-600"})}),u.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"You're on the Waitlist!"}),u.jsxs("p",{className:"text-slate-600 mb-4",children:["We'll notify you when a slot opens up",n?` for ${n.name}`:"","."]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your waitlist reference"}),u.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:U})]}),u.jsxs("a",{href:`#/shop/${e}/waitlist/${U}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[u.jsx(Bn,{className:"w-4 h-4"}),"Check Waitlist Status"]}),u.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to check your position and get notified"})]}):u.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg p-6 animate-fade-in",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:u.jsx(id,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Join the Waitlist"}),u.jsx("p",{className:"text-sm text-slate-500",children:"We'll notify you when a slot opens up"})]})]}),u.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),u.jsx("input",{type:"text",value:g.name,onChange:oe=>y({...g,name:oe.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),u.jsx("input",{type:"email",value:g.email,onChange:oe=>y({...g,email:oe.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),u.jsx("input",{type:"tel",value:g.phone,onChange:oe=>y({...g,phone:oe.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Preferred Days ",u.jsx("span",{className:"text-slate-400 font-normal",children:"(optional)"})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:W4.map(oe=>u.jsx("button",{type:"button",onClick:()=>ue(oe.key),className:`px-3.5 py-2 rounded-lg text-sm font-semibold transition-all border ${b.includes(oe.key)?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:oe.label},oe.key))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Preferred Time"}),u.jsx("div",{className:"grid grid-cols-2 gap-2",children:Xb.map(oe=>u.jsx("button",{type:"button",onClick:()=>j(oe.key),className:`px-3.5 py-2.5 rounded-lg text-sm font-medium transition-all border text-left ${S===oe.key?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:oe.label},oe.key))})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{type:"submit",disabled:Y,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:Y?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Joining"]}):u.jsxs(u.Fragment,{children:[u.jsx(id,{className:"w-4 h-4"}),"Join Waitlist"]})}),p&&u.jsx("button",{type:"button",onClick:p,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})}const Z4=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function Ml(a){const[e,n]=a.split(":").map(Number);return e*60+n}function Jb(a){const e=Math.floor(a/60),n=a%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function e6(a){const e=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),i=String(a.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function t6(a,e,n,i,l,c){if(!a)return[];const p=new Date(e+"T12:00:00").getDay(),g=Z4[p],y=a[g];if(!y||!y.enabled)return[];const b=Ml(y.start),w=Ml(y.end),S=y.break?Ml(y.break.start):null,j=y.break?Ml(y.break.end):null,Y=n+i,q=[];let P=b;for(;P+n<=w;){const z=P+n;if(S!==null&&j!==null&&P<j&&z>S){P=j;continue}q.push({id:`wh-${l}-${e}-${Jb(P)}`,date:e,time:Jb(P),duration:n,available:!0,staffId:l,staffName:c,generated:!0}),P+=Y}return q}function aE(a,e,n=0,i=4){const l=[],c=new Date;c.setHours(0,0,0,0);const f=new Date(c);f.setDate(f.getDate()+i*7);for(const p of a){if(!p.weeklyHours)continue;const g=new Date(c);for(;g<f;){const y=e6(g),b=t6(p.weeklyHours,y,e,n,p.id,p.name);l.push(...b),g.setDate(g.getDate()+1)}}return l}function iE(a,e,n=0){const i=e.filter(l=>!l.status||l.status==="pending"||l.status==="confirmed");return a.filter(l=>{const c=Ml(l.time),f=c+l.duration;return!i.some(g=>{if(l.staffId&&g.staffId&&g.staffId!==l.staffId||g.date!==l.date)return!1;const y=Ml(g.time),b=g.serviceDuration||g.duration||l.duration,w=y+b;return!(f+n<=y||w+n<=c)})})}function rE(a,e){const n=new Set(e.map(l=>`${l.staffId||""}-${l.date}-${l.time}`)),i=a.filter(l=>{const c=`${l.staffId||""}-${l.date}-${l.time}`;return!n.has(c)});return[...e,...i]}function Nh({name:a,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const i=(a||"").split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2);return u.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:i||"?"})}function n6(){return u.jsxs(Ge,{to:"/",className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:u.jsx(Ur,{className:"w-3.5 h-3.5 text-white"})}),u.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",u.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function s6(){const{slug:a}=Oc(),[e,n]=I.useState(null),[i,l]=I.useState(null),[c,f]=I.useState(!0),[p,g]=I.useState(!1),[y,b]=I.useState([]),[w,S]=I.useState([]),[j,Y]=I.useState(null),[q,P]=I.useState(null),[z,U]=I.useState([]),[Q,ue]=I.useState([]),[ce,oe]=I.useState(!1),[N,A]=I.useState(null),[R,M]=I.useState(null),[k,L]=I.useState(""),[C,we]=I.useState(!1),[Be,J]=I.useState({name:"",email:"",phone:""}),[he,be]=I.useState(""),[Me,He]=I.useState(!1);I.useEffect(()=>{(async()=>{f(!0),g(!1);try{const re=ys(rt(Ne,"shops"),Zn("slug","==",a)),se=await xs(re);if(se.empty)g(!0);else{const ke=se.docs[0];n(ke.data()),l(ke.id)}}catch(re){console.error("Error looking up shop:",re),g(!0)}finally{f(!1)}})()},[a]),I.useEffect(()=>{if(!i)return;const H=zn(rt(Ne,"shops",i,"services"),$e=>{const Ee=$e.docs.map(st=>({id:st.id,...st.data()})).filter(st=>st.active!==!1).sort((st,Tt)=>(st.name||"").localeCompare(Tt.name||""));b(Ee)}),re=zn(rt(Ne,"shops",i,"availability"),$e=>{const Ee=new Date,st=$e.docs.map(Tt=>({id:Tt.id,...Tt.data()})).filter(Tt=>new Date(`${Tt.date}T${Tt.time}`)>Ee);U(st)}),se=zn(rt(Ne,"shops",i,"bookings"),$e=>{const Ee=$e.docs.map(st=>({id:st.id,...st.data()}));ue(Ee)}),ke=zn(rt(Ne,"shops",i,"staff"),$e=>{const Ee=$e.docs.map(st=>({id:st.id,...st.data()})).filter(st=>st.active!==!1).sort((st,Tt)=>(st.name||"").localeCompare(Tt.name||""));S(Ee)});return()=>{H(),re(),se(),ke()}},[i]),I.useEffect(()=>{w.length===1?P(w[0]):w.length===0&&P(null)},[w]);const O=y.length>0;w.length>0;const ee=w.length>1,de=e?.bufferMinutes||0,me=I.useMemo(()=>{const H=new Date;let re=z.filter(Ee=>Ee.available);if(j&&(re=re.filter(Ee=>Ee.duration>=j.duration)),q&&q!=="any"&&(re=re.filter(Ee=>Ee.staffId===q.id||!Ee.staffId)),!j)return re;const se=q&&q!=="any"?w.filter(Ee=>Ee.id===q.id):w,ke=aE(se,j.duration,de,4).filter(Ee=>new Date(`${Ee.date}T${Ee.time}`)>H),$e=rE(ke,re);return iE($e,Q,de)},[z,j,q,w,Q,de]),Ae=H=>{Y(H),w.length>1&&P(null),M(null),A(null),oe(!1),L("")},De=H=>{P(H),M(null),A(null),oe(!1),L("")},Le=()=>{Y(null),w.length>1&&P(null),M(null),A(null),oe(!1)},yt=()=>{M(null),A(null),oe(!1),ee?P(null):O&&Y(null)},Fe=H=>{A(H),oe(!0),L("")},un=()=>{const H="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let re="BK";for(let se=0;se<4;se++)re+=H.charAt(Math.floor(Math.random()*H.length));return re},hn=async H=>{H.preventDefault(),we(!0);try{const re=un(),se={slotId:N.id,date:N.date,time:N.time,duration:j?j.duration:N.duration,clientName:Be.name,clientEmail:Be.email,clientPhone:Be.phone,bookedAt:new Date().toISOString()};j&&(se.serviceId=j.id,se.serviceName=j.name,se.servicePrice=j.price,se.serviceDuration=j.duration),q&&q!=="any"?(se.staffId=q.id,se.staffName=q.name):N.staffId&&(se.staffId=N.staffId,se.staffName=N.staffName||""),se.status=e?.requireApproval?"pending":"confirmed",se.refCode=re,await io(rt(Ne,"shops",i,"bookings"),se),N.generated||await Lt(Ct(Ne,"shops",i,"availability",N.id),{available:!1}),J({name:"",email:"",phone:""}),oe(!1),A(null),Y(null),M(null),P(w.length===1?w[0]:null),be(re),e?.requireApproval?L(" Your booking request has been submitted! The shop will review and confirm it shortly."):L(" Booking confirmed! You will receive a confirmation email shortly.")}catch(re){console.error("Booking error:",re),L(" Something went wrong. Please try again.")}finally{we(!1)}},_n=H=>new Date(H+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),en=H=>{const[re,se]=H.split(":"),ke=parseInt(re),$e=ke>=12?"PM":"AM";return`${ke%12||12}:${se} ${$e}`},Dt=H=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(H),zt=H=>{if(H<60)return`${H} min`;const re=Math.floor(H/60),se=H%60;return se?`${re}h ${se}m`:`${re} hour${re>1?"s":""}`};if(c)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[u.jsx("div",{className:"spinner"}),u.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking page"})]})});if(p)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:u.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:u.jsx(jt,{className:"w-8 h-8 text-slate-400"})}),u.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),u.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,u.jsx("span",{className:"font-mono text-blue-600",children:a}),'".']}),u.jsxs(Ge,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[u.jsx(La,{className:"w-4 h-4"}),"Go Home"]})]})});const wn=[...new Set(me.map(H=>H.date))].sort(),En=R?me.filter(H=>H.date===R):me,ye=ce?"form":O&&!j?"services":ee&&!q?"staff":"calendar",Ce=[];O&&Ce.push({key:"services",label:"Service"}),ee&&Ce.push({key:"staff",label:"Stylist"}),Ce.push({key:"calendar",label:"Date & Time"}),Ce.push({key:"form",label:"Confirm"});const vt=Ce.findIndex(H=>H.key===ye),B=["border-l-blue-500","border-l-violet-500","border-l-emerald-500","border-l-amber-500","border-l-rose-500","border-l-cyan-500","border-l-indigo-500","border-l-pink-500","border-l-teal-500"];return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[u.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e.name||"")[0]?.toUpperCase()||"S"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e.name}),u.jsx("p",{className:"text-xs text-slate-500",children:"Book your appointment"})]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs(Ge,{to:`/shop/${a}/login`,className:"flex items-center gap-1.5 px-3.5 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[u.jsx(Zw,{className:"w-3.5 h-3.5"}),u.jsx("span",{className:"hidden sm:inline",children:"Owner"})]}),u.jsx(n6,{})]})]})}),u.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[Ce.length>1&&u.jsx("div",{className:"flex items-center justify-center gap-0 mb-8 animate-fade-in",children:Ce.map((H,re)=>{const se=H.key===ye,ke=re<vt;return u.jsxs(I.Fragment,{children:[re>0&&u.jsx("div",{className:`w-8 sm:w-14 h-0.5 transition-colors duration-300 ${re<=vt?"bg-blue-500":"bg-slate-200"}`}),u.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[u.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 ${se?"bg-blue-600 text-white shadow-md shadow-blue-600/30 scale-110":ke?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:ke?u.jsx(ra,{className:"w-5 h-5"}):re+1}),u.jsx("span",{className:`text-xs font-medium hidden sm:block transition-colors ${se?"text-blue-700":ke?"text-blue-600":"text-slate-400"}`,children:H.label})]})]},H.key)})}),k&&u.jsx("div",{className:"mb-8 animate-scale-in",children:k.startsWith("")?u.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(eE,{className:"w-8 h-8 text-emerald-600"})}),u.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Confirmed!"}),u.jsx("p",{className:"text-slate-600 mb-4",children:"You're all set. We'll send a confirmation to your email."}),he&&u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),u.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:he})]}),he&&u.jsxs("div",{className:"mb-4",children:[u.jsxs(Ge,{to:`/shop/${a}/booking/${he}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[u.jsx(Ym,{className:"w-4 h-4"}),"Manage Your Booking"]}),u.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-lg text-sm text-emerald-700 font-medium",children:[u.jsx(Ym,{className:"w-4 h-4"}),"Add to your calendar to remember"]})]}):k.startsWith("")?u.jsxs("div",{className:"bg-white rounded-2xl border border-amber-200 shadow-lg shadow-amber-100/50 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Bn,{className:"w-8 h-8 text-amber-600"})}),u.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Request Submitted!"}),u.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking request has been submitted! The shop will review and confirm it shortly."}),he&&u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),u.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:he})]}),he&&u.jsxs("div",{className:"mb-4",children:[u.jsxs(Ge,{to:`/shop/${a}/booking/${he}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[u.jsx(Ym,{className:"w-4 h-4"}),"Manage Your Booking"]}),u.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700 font-medium",children:[u.jsx(Bn,{className:"w-4 h-4"}),"You'll be notified once it's confirmed"]})]}):u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Something went wrong. Please try again."})]})}),ye==="services"&&u.jsxs("div",{className:"animate-fade-in",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a Service"}),u.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select the service you'd like to book"})]}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 stagger-children",children:y.map((H,re)=>u.jsxs("button",{onClick:()=>Ae(H),className:`group text-left bg-white border-l-4 ${B[re%B.length]} border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5`,children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors pr-2",children:H.name}),u.jsx("span",{className:"text-xl font-extrabold text-blue-600 whitespace-nowrap",children:Dt(H.price)})]}),H.description&&u.jsx("p",{className:"text-sm text-slate-500 mb-3 line-clamp-2 leading-relaxed",children:H.description}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-400",children:[u.jsx(Bn,{className:"w-3.5 h-3.5"}),u.jsx("span",{children:zt(H.duration)})]}),u.jsx("span",{className:"text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]})]},H.id))})]}),ye==="staff"&&u.jsxs("div",{className:"animate-fade-in",children:[O&&j&&u.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[u.jsxs("button",{onClick:Le,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[u.jsx(La,{className:"w-3.5 h-3.5"}),"Back"]}),u.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[u.jsx(Ua,{className:"w-3.5 h-3.5 text-blue-500"}),u.jsx("span",{className:"font-semibold text-slate-800",children:j.name}),u.jsx("span",{className:"text-blue-600 font-bold",children:Dt(j.price)})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose Your Stylist"}),u.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select your preferred professional"})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 stagger-children",children:[u.jsxs("button",{onClick:()=>De("any"),className:"group text-left bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[u.jsxs("div",{className:"flex items-center gap-3.5 mb-3",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Wn,{className:"w-5 h-5 text-slate-500"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:"Any Available"}),u.jsx("p",{className:"text-xs text-slate-500",children:"First available professional"})]})]}),u.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),w.map(H=>u.jsxs("button",{onClick:()=>De(H),className:"group text-left bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[u.jsxs("div",{className:"flex items-center gap-3.5 mb-3",children:[u.jsx(Nh,{name:H.name}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:H.name}),H.role&&u.jsx("p",{className:"text-xs text-slate-500",children:H.role})]})]}),u.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]},H.id))]})]}),ye==="calendar"&&u.jsxs("div",{className:"animate-fade-in",children:[(O||ee)&&u.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[u.jsxs("button",{onClick:yt,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[u.jsx(La,{className:"w-3.5 h-3.5"}),"Back"]}),j&&u.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[u.jsx(Ua,{className:"w-3.5 h-3.5 text-blue-500"}),u.jsx("span",{className:"font-semibold text-slate-800",children:j.name}),u.jsx("span",{className:"text-blue-600 font-bold",children:Dt(j.price)}),u.jsxs("span",{className:"text-slate-400",children:[" ",zt(j.duration)]})]}),q&&q!=="any"&&u.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[u.jsx(Nh,{name:q.name,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),u.jsx("span",{className:"font-semibold text-slate-800",children:q.name})]}),q==="any"&&u.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[u.jsx(Wn,{className:"w-3.5 h-3.5 text-slate-500"}),u.jsx("span",{className:"font-semibold text-slate-700",children:"Any Available"})]})]}),wn.length===0?u.jsx("div",{children:Me?u.jsx("div",{className:"max-w-lg mx-auto",children:u.jsx(Wb,{shopId:i,slug:a,selectedService:j,selectedStaff:q,staffMembers:w,preferredDate:null,onCancel:()=>He(!1)})}):u.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:u.jsx(jt,{className:"w-8 h-8 text-slate-400"})}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),u.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:j?`No time slots available for ${j.name} (${zt(j.duration)}). Join the waitlist to be notified when a slot opens up!`:"Check back soon for new availability, or join the waitlist!"}),u.jsxs("button",{onClick:()=>He(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:[u.jsx(id,{className:"w-4 h-4"}),"Join Waitlist"]})]})}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Select a Date"}),u.jsx("p",{className:"text-slate-500 text-sm",children:"Pick a day that works for you"})]}),u.jsx("div",{className:"mb-8",children:u.jsx(sE,{availableDates:wn,selectedDate:R,onSelectDate:M})}),R&&u.jsxs("div",{className:"animate-slide-down",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",_n(R)]}),u.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[En.length," slot",En.length!==1?"s":""]})]}),En.length===0?u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[u.jsx("p",{className:"text-slate-500 mb-4",children:"No times available for this date"}),Me?u.jsx("div",{className:"mt-4 text-left",children:u.jsx(Wb,{shopId:i,slug:a,selectedService:j,selectedStaff:q,staffMembers:w,preferredDate:R,onCancel:()=>He(!1)})}):u.jsxs("button",{onClick:()=>He(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[u.jsx(id,{className:"w-4 h-4"}),"Join the Waitlist"]})]}):u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:En.sort((H,re)=>H.time.localeCompare(re.time)).map(H=>u.jsxs("button",{onClick:()=>Fe(H),className:"group bg-white border border-slate-200 hover:border-blue-400 rounded-xl p-4 transition-all duration-200 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5 text-center",children:[u.jsx("div",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-700 transition-colors mb-1",children:en(H.time)}),H.staffName&&q==="any"&&u.jsxs("div",{className:"text-xs text-violet-600 mb-0.5 flex items-center justify-center gap-1",children:[u.jsx(Wn,{className:"w-3 h-3"}),H.staffName]}),u.jsx("div",{className:"text-xs text-slate-400",children:j?zt(j.duration):`${H.duration} min`})]},H.id))})]}),!R&&u.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]}),ye==="form"&&u.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Complete Your Booking"}),u.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Review your details and confirm"}),u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[j&&u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx(Ua,{className:"w-4 h-4 text-blue-600"})}),u.jsx("span",{className:"font-semibold text-slate-800",children:j.name})]}),u.jsx("span",{className:"font-bold text-blue-600",children:Dt(j.price)})]}),q&&q!=="any"&&u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx(Nh,{name:q.name,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),u.jsxs("div",{children:[u.jsx("span",{className:"font-semibold text-slate-800",children:q.name}),q.role&&u.jsxs("span",{className:"text-slate-400 text-sm ml-1.5",children:[" ",q.role]})]})]}),q==="any"&&N?.staffName&&u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx(Nh,{name:N.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),u.jsx("span",{className:"font-semibold text-slate-800",children:N.staffName})]}),u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:u.jsx(jt,{className:"w-4 h-4 text-slate-600"})}),u.jsxs("span",{className:"font-semibold text-slate-800",children:[_n(N.date)," at ",en(N.time)]})]}),u.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[u.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:u.jsx(Bn,{className:"w-4 h-4 text-slate-500"})}),u.jsx("span",{children:j?zt(j.duration):`${N.duration} min`})]})]}),u.jsxs("form",{onSubmit:hn,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),u.jsx("input",{type:"text",value:Be.name,onChange:H=>J({...Be,name:H.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),u.jsx("input",{type:"email",value:Be.email,onChange:H=>J({...Be,email:H.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),u.jsx("input",{type:"tel",value:Be.phone,onChange:H=>J({...Be,phone:H.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsx("button",{type:"submit",disabled:C,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:C?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Booking"]}):u.jsxs(u.Fragment,{children:[u.jsx(ra,{className:"w-4 h-4"}),"Confirm Booking"]})}),u.jsx("button",{type:"button",onClick:()=>{oe(!1),A(null)},className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})]}),u.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:u.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:u.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",u.jsx(Ge,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function a6({slotsByDate:a,bookingsByDate:e,selectedDate:n,onSelectDate:i,recurringDayFlags:l={}}){const[c,f]=I.useState(new Date),p=ue=>{const ce=ue.getFullYear(),oe=ue.getMonth(),N=new Date(ce,oe,1),R=new Date(ce,oe+1,0).getDate(),M=N.getDay();return{daysInMonth:R,startingDayOfWeek:M,year:ce,month:oe}},{daysInMonth:g,startingDayOfWeek:y,year:b,month:w}=p(c),S=()=>{f(new Date(c.getFullYear(),c.getMonth()-1))},j=()=>{f(new Date(c.getFullYear(),c.getMonth()+1))},Y=ue=>`${b}-${String(w+1).padStart(2,"0")}-${String(ue).padStart(2,"0")}`,q=ue=>{const ce=Y(ue),oe=a[ce]||[],N=e[ce]||[],A=oe.filter(M=>M.available).length,R=N.length;return{availableCount:A,bookedCount:R,hasData:oe.length>0||N.length>0}},P=ue=>{const ce=Y(ue);i(ce===n?null:ce)},z=["January","February","March","April","May","June","July","August","September","October","November","December"],U=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Q=new Date;return Q.setHours(0,0,0,0),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-5",children:[u.jsx("button",{onClick:S,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:u.jsx(Ww,{className:"w-5 h-5 text-slate-600"})}),u.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[z[w]," ",b]}),u.jsx("button",{onClick:j,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:u.jsx(Jw,{className:"w-5 h-5 text-slate-600"})})]}),u.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:U.map(ue=>u.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:ue},ue))}),u.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:y}).map((ue,ce)=>u.jsx("div",{},`empty-${ce}`)),Array.from({length:g}).map((ue,ce)=>{const oe=ce+1,N=Y(oe),{availableCount:A,bookedCount:R,hasData:M}=q(oe),k=N===n,L=new Date,C=L.getDate()===oe&&L.getMonth()===w&&L.getFullYear()===b,we=new Date(b,w,oe),Be=we.getDay(),J=l[Be]&&we>=Q;return u.jsxs("button",{onClick:()=>P(oe),className:`
                relative p-2 text-center rounded-lg text-sm font-semibold transition-all duration-200 min-h-[56px] flex flex-col items-center justify-start cursor-pointer
                ${k?"bg-blue-600 text-white shadow-md shadow-blue-600/30":M||J?"bg-slate-50 hover:bg-slate-100 text-slate-900 border border-slate-200 hover:border-slate-300":C?"text-slate-900 font-bold hover:bg-slate-50":"text-slate-400 hover:bg-slate-50"}
              `,children:[u.jsxs("span",{className:`text-sm ${C&&!k?"relative":""}`,children:[oe,C&&!k&&u.jsx("span",{className:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]}),(M||J)&&u.jsxs("div",{className:"flex gap-0.5 mt-1 flex-wrap justify-center",children:[J&&u.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${k?"bg-white/20 text-white":"bg-violet-100 text-violet-700"}`,children:"R"}),A>0&&u.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${k?"bg-white/20 text-white":"bg-emerald-100 text-emerald-700"}`,children:A}),R>0&&u.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${k?"bg-white/20 text-white":"bg-blue-100 text-blue-700"}`,children:R})]})]},oe)})]}),u.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-slate-500",children:[Object.keys(l).length>0&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-3.5 h-3.5 bg-violet-100 border border-violet-200 rounded flex items-center justify-center text-[7px] font-bold text-violet-700",children:"R"}),u.jsx("span",{children:"Recurring"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-3.5 h-3.5 bg-emerald-100 border border-emerald-200 rounded"}),u.jsx("span",{children:"Available"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-3.5 h-3.5 bg-blue-100 border border-blue-200 rounded"}),u.jsx("span",{children:"Booked"})]}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("div",{className:"w-3.5 h-3.5 bg-blue-600 rounded"}),u.jsx("span",{children:"Selected"})]})]})]})}const i6=[{value:15,label:"15 min"},{value:30,label:"30 min"},{value:45,label:"45 min"},{value:60,label:"1 hour"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}];function r6({shopId:a}){const[e,n]=I.useState([]),[i,l]=I.useState(!1),[c,f]=I.useState(null),[p,g]=I.useState({name:"",description:"",duration:30,price:""}),[y,b]=I.useState(!1);I.useEffect(()=>{if(!a)return;const z=zn(rt(Ne,"shops",a,"services"),U=>{const Q=U.docs.map(ue=>({id:ue.id,...ue.data()})).filter(ue=>ue.active!==!1).sort((ue,ce)=>(ue.name||"").localeCompare(ce.name||""));n(Q)});return()=>z()},[a]);const w=()=>{g({name:"",description:"",duration:30,price:""}),l(!1),f(null)},S=async z=>{z.preventDefault(),b(!0);const U={name:p.name.trim(),description:p.description.trim(),duration:parseInt(p.duration),price:parseFloat(p.price),active:!0};try{c?await Lt(Ct(Ne,"shops",a,"services",c),U):await io(rt(Ne,"shops",a,"services"),{...U,createdAt:Sg()}),w()}catch(Q){console.error("Error saving service:",Q)}finally{b(!1)}},j=z=>{g({name:z.name,description:z.description||"",duration:z.duration,price:z.price.toString()}),f(z.id),l(!0)},Y=async z=>{try{await Lt(Ct(Ne,"shops",a,"services",z),{active:!1})}catch(U){console.error("Error deleting service:",U)}},q=z=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(z),P=z=>{if(z<60)return`${z} min`;const U=Math.floor(z/60),Q=z%60;return Q?`${U}h ${Q}m`:`${U}h`};return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Services"}),u.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Define the services you offer  clients will pick one before booking"})]}),!i&&u.jsxs("button",{onClick:()=>{w(),l(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[u.jsx(jg,{className:"w-4 h-4"}),"Add Service"]})]}),i&&u.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:c?"Edit Service":"New Service"}),u.jsxs("form",{onSubmit:S,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Service Name *"}),u.jsx("input",{type:"text",value:p.name,onChange:z=>g({...p,name:z.target.value}),required:!0,placeholder:"e.g. Haircut",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description (optional)"}),u.jsx("input",{type:"text",value:p.description,onChange:z=>g({...p,description:z.target.value}),placeholder:"e.g. Classic cut and style",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Duration *"}),u.jsx("select",{value:p.duration,onChange:z=>g({...p,duration:z.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:i6.map(z=>u.jsx("option",{value:z.value,children:z.label},z.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Price (USD) *"}),u.jsxs("div",{className:"relative",children:[u.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-semibold",children:"$"}),u.jsx("input",{type:"number",step:"0.01",min:"0",value:p.price,onChange:z=>g({...p,price:z.target.value}),required:!0,placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsxs("button",{type:"submit",disabled:y,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[u.jsx(Cg,{className:"w-4 h-4"}),y?"Saving":c?"Update Service":"Add Service"]}),u.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[u.jsx(Kl,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("div",{className:"text-5xl mb-3",children:""}),u.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No services yet"}),u.jsx("p",{className:"text-sm text-slate-600",children:"Add your first service so clients can choose what to book"})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(z=>u.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:z.name}),z.description&&u.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:z.description})]}),u.jsx("span",{className:"text-xl font-bold text-blue-600 whitespace-nowrap ml-3",children:q(z.price)})]}),u.jsx("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:u.jsxs("span",{className:"flex items-center gap-1.5",children:[u.jsx(Bn,{className:"w-4 h-4"}),P(z.duration)]})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>j(z),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:[u.jsx(tE,{className:"w-3.5 h-3.5"}),"Edit"]}),u.jsx("button",{onClick:()=>Y(z.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:u.jsx(rd,{className:"w-3.5 h-3.5"})})]})]},z.id))})]})}const Km=[{key:"monday",label:"Monday",short:"Mon"},{key:"tuesday",label:"Tuesday",short:"Tue"},{key:"wednesday",label:"Wednesday",short:"Wed"},{key:"thursday",label:"Thursday",short:"Thu"},{key:"friday",label:"Friday",short:"Fri"},{key:"saturday",label:"Saturday",short:"Sat"},{key:"sunday",label:"Sunday",short:"Sun"}],l6={enabled:!1,start:"09:00",end:"17:00",break:null};function o6({shopId:a,staffId:e,staffName:n,weeklyHours:i,onClose:l}){const[c,f]=I.useState(()=>{const P={};for(const z of Km){const U=i?.[z.key];U?P[z.key]={enabled:!!U.enabled,start:U.start||"09:00",end:U.end||"17:00",break:U.break?{start:U.break.start,end:U.break.end}:null}:P[z.key]={...l6}}return P}),[p,g]=I.useState(!1),[y,b]=I.useState(null),w=(P,z,U)=>{f(Q=>({...Q,[P]:{...Q[P],[z]:U}}))},S=P=>{f(z=>({...z,[P]:{...z[P],break:z[P].break?null:{start:"12:00",end:"13:00"}}}))},j=(P,z,U)=>{f(Q=>({...Q,[P]:{...Q[P],break:{...Q[P].break,[z]:U}}}))},Y=P=>{const z=c[P];f(U=>{const Q={...U};for(const ue of Km)ue.key!==P&&(Q[ue.key]={enabled:z.enabled,start:z.start,end:z.end,break:z.break?{...z.break}:null});return Q}),b(P),setTimeout(()=>b(null),1500)},q=async()=>{g(!0);try{await Lt(Ct(Ne,"shops",a,"staff",e),{weeklyHours:c}),l()}catch(P){console.error("Error saving weekly hours:",P)}finally{g(!1)}};return u.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Weekly Hours"}),u.jsx("p",{className:"text-sm text-slate-500",children:n})]}),u.jsx("button",{onClick:l,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:u.jsx(Kl,{className:"w-5 h-5 text-slate-400"})})]}),u.jsx("div",{className:"space-y-3",children:Km.map(({key:P,label:z})=>{const U=c[P];return u.jsx("div",{className:`rounded-xl p-4 transition-all ${U.enabled?"bg-blue-50 border border-blue-200":"bg-slate-50 border border-slate-200"}`,children:u.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[u.jsxs("div",{className:"flex items-center gap-3 min-w-[140px]",children:[u.jsx("button",{type:"button",onClick:()=>w(P,"enabled",!U.enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${U.enabled?"bg-blue-500":"bg-slate-300"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${U.enabled?"translate-x-6":"translate-x-1"}`})}),u.jsx("span",{className:`font-semibold text-sm ${U.enabled?"text-slate-900":"text-slate-400"}`,children:z})]}),U.enabled?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Bn,{className:"w-4 h-4 text-blue-500"}),u.jsx("input",{type:"time",value:U.start,onChange:Q=>w(P,"start",Q.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),u.jsx("span",{className:"text-slate-400 text-sm",children:"to"}),u.jsx("input",{type:"time",value:U.end,onChange:Q=>w(P,"end",Q.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>S(P),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${U.break?"bg-amber-100 text-amber-700 border border-amber-200":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,children:[u.jsx(f4,{className:"w-3.5 h-3.5"}),U.break?"Break":"+ Break"]}),U.break&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx("input",{type:"time",value:U.break.start,onChange:Q=>j(P,"start",Q.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"}),u.jsx("span",{className:"text-slate-400 text-xs",children:""}),u.jsx("input",{type:"time",value:U.break.end,onChange:Q=>j(P,"end",Q.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"})]})]}),u.jsx("button",{type:"button",onClick:()=>Y(P),className:"text-xs text-blue-500 hover:text-blue-700 font-medium transition-colors whitespace-nowrap",children:y===P?" Copied!":"Copy to all"})]}):u.jsx("span",{className:"text-sm text-slate-400 italic",children:"Day off"})]})},P)})}),u.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-200",children:[u.jsxs("button",{onClick:q,disabled:p,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[u.jsx(j4,{className:"w-4 h-4"}),p?"Saving":"Save Hours"]}),u.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[u.jsx(Kl,{className:"w-4 h-4"}),"Cancel"]})]})]})}const c6=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}];function Zb(a){if(!a)return"";const[e,n]=a.split(":").map(Number),i=e>=12?"p":"a",l=e%12||12;return n===0?`${l}${i}`:`${l}:${n.toString().padStart(2,"0")}${i}`}function u6({shopId:a}){const[e,n]=I.useState([]),[i,l]=I.useState(!1),[c,f]=I.useState(null),[p,g]=I.useState(null),[y,b]=I.useState({name:"",role:""}),[w,S]=I.useState(!1);I.useEffect(()=>{if(!a)return;const U=zn(rt(Ne,"shops",a,"staff"),Q=>{const ue=Q.docs.map(ce=>({id:ce.id,...ce.data()})).filter(ce=>ce.active!==!1).sort((ce,oe)=>(ce.name||"").localeCompare(oe.name||""));n(ue)});return()=>U()},[a]);const j=()=>{b({name:"",role:""}),l(!1),f(null)},Y=async U=>{U.preventDefault(),S(!0);const Q={name:y.name.trim(),role:y.role.trim(),active:!0};try{c?await Lt(Ct(Ne,"shops",a,"staff",c),Q):await io(rt(Ne,"shops",a,"staff"),{...Q,email:"",createdAt:Sg()}),j()}catch(ue){console.error("Error saving staff member:",ue)}finally{S(!1)}},q=U=>{b({name:U.name,role:U.role||""}),f(U.id),l(!0)},P=async U=>{try{await Lt(Ct(Ne,"shops",a,"staff",U),{active:!1})}catch(Q){console.error("Error deleting staff member:",Q)}},z=U=>{if(!U)return null;const Q=c6.filter(ue=>U[ue.key]?.enabled);return Q.length===0?null:Q.map(ue=>{const ce=U[ue.key];return`${ue.short} ${Zb(ce.start)}${Zb(ce.end)}`})};return u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Staff"}),u.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Manage your team  assign availability and bookings per staff member"})]}),!i&&u.jsxs("button",{onClick:()=>{j(),l(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[u.jsx(jg,{className:"w-4 h-4"}),"Add Staff"]})]}),i&&u.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[u.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:c?"Edit Staff Member":"New Staff Member"}),u.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name *"}),u.jsx("input",{type:"text",value:y.name,onChange:U=>b({...y,name:U.target.value}),required:!0,placeholder:"e.g. Jane Smith",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Role (optional)"}),u.jsx("input",{type:"text",value:y.role,onChange:U=>b({...y,role:U.target.value}),placeholder:"e.g. Senior Stylist",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),u.jsxs("div",{className:"flex gap-3 pt-2",children:[u.jsxs("button",{type:"submit",disabled:w,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[u.jsx(Cg,{className:"w-4 h-4"}),w?"Saving":c?"Update Staff":"Add Staff"]}),u.jsxs("button",{type:"button",onClick:j,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[u.jsx(Kl,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?u.jsxs("div",{className:"text-center py-16",children:[u.jsx("div",{className:"text-5xl mb-3",children:""}),u.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No staff members yet"}),u.jsx("p",{className:"text-sm text-slate-600",children:"Add your team members to assign them availability and bookings"})]}):u.jsx("div",{className:"space-y-4",children:e.map(U=>{const Q=z(U.weeklyHours);return u.jsxs("div",{children:[u.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[u.jsxs("div",{className:"flex items-start justify-between mb-3",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:U.name}),U.role&&u.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:U.role})]}),u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Wn,{className:"w-5 h-5 text-blue-600"})})]}),Q?u.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5",children:Q.map((ue,ce)=>u.jsx("span",{className:"inline-block px-2 py-0.5 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium",children:ue},ce))}):u.jsx("p",{className:"text-xs text-slate-400 mb-3 italic",children:"No weekly hours set"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>g(p===U.id?null:U.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${p===U.id?"bg-blue-100 text-blue-700 border-blue-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[u.jsx(Bn,{className:"w-3.5 h-3.5"}),"Set Hours"]}),u.jsxs("button",{onClick:()=>q(U),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:[u.jsx(tE,{className:"w-3.5 h-3.5"}),"Edit"]}),u.jsx("button",{onClick:()=>P(U.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:u.jsx(rd,{className:"w-3.5 h-3.5"})})]})]}),p===U.id&&u.jsx("div",{className:"mt-2",children:u.jsx(o6,{shopId:a,staffId:U.id,staffName:U.name,weeklyHours:U.weeklyHours,onClose:()=>g(null)})})]},U.id)})})]})}const h6=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function Qm(a){const[e,n]=a.split(":").map(Number);return e*60+n}function d6(a,e){if(a.status!=="waiting"||a.serviceId&&e.serviceId&&a.serviceId!==e.serviceId||a.staffId&&a.staffId!=="any"&&e.staffId&&a.staffId!==e.staffId)return!1;if(e.date){if(a.preferredDate&&a.preferredDate!==e.date)return!1;if(a.preferredDays&&a.preferredDays.length>0){const n=new Date(e.date+"T12:00:00"),i=h6[n.getDay()];if(!a.preferredDays.includes(i))return!1}}if(e.time&&a.preferredTimeRange){const n=Qm(e.time),i=Qm(a.preferredTimeRange.start),l=Qm(a.preferredTimeRange.end);if(!(a.preferredTimeRange.start==="00:00"&&a.preferredTimeRange.end==="23:59")&&(n<i||n>l))return!1}return!0}function f6(a,e){return a.filter(n=>d6(n,e)).sort((n,i)=>(n.createdAt||"").localeCompare(i.createdAt||""))}const e_=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}];function _r(a){if(!a)return"";const[e,n]=a.split(":").map(Number),i=e>=12?"PM":"AM",l=e%12||12;return n===0?`${l}${i}`:`${l}:${n.toString().padStart(2,"0")}${i}`}function m6({user:a}){const{slug:e}=Oc(),n=Wl(),[i,l]=I.useState(null),[c,f]=I.useState(null),[p,g]=I.useState(!0),[y,b]=I.useState(!1),[w,S]=I.useState([]),[j,Y]=I.useState([]),[q,P]=I.useState([]),[z,U]=I.useState("schedule"),[Q,ue]=I.useState(null),[ce,oe]=I.useState("all"),[N,A]=I.useState("all"),[R,M]=I.useState([]),[k,L]=I.useState(null),[C,we]=I.useState({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""});I.useEffect(()=>{if(!a){n(`/shop/${e}/login`,{replace:!0});return}(async()=>{g(!0);try{const H=ys(rt(Ne,"shops"),Zn("slug","==",e)),re=await xs(H);if(re.empty){b(!0),g(!1);return}const se=re.docs[0],ke=se.data();if(ke.ownerUid!==a.uid){b(!0),g(!1);return}l(ke),f(se.id)}catch(H){console.error("Error checking ownership:",H),b(!0)}finally{g(!1)}})()},[a,e,n]),I.useEffect(()=>{if(!c)return;const B=zn(rt(Ne,"shops",c,"availability"),ke=>{const $e=ke.docs.map(Ee=>({id:Ee.id,...Ee.data()}));S($e)}),H=zn(rt(Ne,"shops",c,"bookings"),ke=>{const $e=ke.docs.map(Ee=>({id:Ee.id,...Ee.data()}));Y($e)}),re=zn(rt(Ne,"shops",c,"staff"),ke=>{const $e=ke.docs.map(Ee=>({id:Ee.id,...Ee.data()})).filter(Ee=>Ee.active!==!1).sort((Ee,st)=>(Ee.name||"").localeCompare(st.name||""));P($e)}),se=zn(rt(Ne,"shops",c,"waitlist"),ke=>{const $e=ke.docs.map(Ee=>({id:Ee.id,...Ee.data()})).sort((Ee,st)=>(Ee.createdAt||"").localeCompare(st.createdAt||""));M($e)});return()=>{B(),H(),re(),se()}},[c]);const Be=async()=>{await uR(kr),n(`/shop/${e}`,{replace:!0})},J=async B=>{B.preventDefault();const{date:H,startTime:re,endTime:se,slotDuration:ke,staffId:$e}=C,Ee=parseInt(ke),[st,Tt]=re.split(":").map(Number),[ts,Ps]=se.split(":").map(Number),Bt=st*60+Tt,tn=ts*60+Ps;let dn=Bt;for(;dn+Ee<=tn;){const Rt=Math.floor(dn/60),zr=dn%60,Ga=`${Rt.toString().padStart(2,"0")}:${zr.toString().padStart(2,"0")}`,Ya={date:H,time:Ga,duration:Ee,available:!0};if($e){const ns=q.find(ma=>ma.id===$e);Ya.staffId=$e,Ya.staffName=ns?.name||""}await io(rt(Ne,"shops",c,"availability"),Ya),dn+=Ee}we({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""})},he=async B=>{await FI(Ct(Ne,"shops",c,"availability",B))},be=B=>{const H={date:B.date,time:B.time,staffId:B.staffId||null,serviceId:B.serviceId||null},re=f6(R,H);re.length>0&&L({matches:re,slot:H})},Me=async(B,H)=>{for(const re of B)await Lt(Ct(Ne,"shops",c,"waitlist",re.id),{status:"notified",notifiedAt:new Date().toISOString(),notifiedSlot:{date:H.date,time:H.time,staffId:H.staffId||null,staffName:H.staffName||null}});L(null)},He=async B=>{await Lt(Ct(Ne,"shops",c,"waitlist",B),{status:"notified",notifiedAt:new Date().toISOString()})},O=async B=>{await Lt(Ct(Ne,"shops",c,"waitlist",B),{status:"expired"})},ee=async B=>{const H=j.find(re=>re.id===B);if(await Lt(Ct(Ne,"shops",c,"bookings",B),{status:"cancelled"}),H&&H.slotId&&!H.slotId.startsWith("wh-"))try{await Lt(Ct(Ne,"shops",c,"availability",H.slotId),{available:!0})}catch(re){console.warn("Could not re-open slot:",re)}H&&be(H)},de=async B=>{await Lt(Ct(Ne,"shops",c,"bookings",B),{status:"confirmed"})},me=async B=>{const H=j.find(re=>re.id===B);if(await Lt(Ct(Ne,"shops",c,"bookings",B),{status:"rejected"}),H&&H.slotId&&!H.slotId.startsWith("wh-"))try{await Lt(Ct(Ne,"shops",c,"availability",H.slotId),{available:!0})}catch(re){console.warn("Could not re-open slot:",re)}H&&be(H)},Ae=async()=>{const B=!i?.requireApproval;try{await Lt(Ct(Ne,"shops",c),{requireApproval:B}),l(H=>({...H,requireApproval:B}))}catch(H){console.error("Error updating requireApproval:",H)}},De=async B=>{const H=parseInt(B);try{await Lt(Ct(Ne,"shops",c),{bufferMinutes:H}),l(re=>({...re,bufferMinutes:H}))}catch(re){console.error("Error updating buffer minutes:",re)}},Le=(B,H)=>new Date(`${B}T${H}`).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),yt=I.useMemo(()=>{const B={},H=ce==="all"?q:q.filter(se=>se.id===ce),re=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(const se of H)se.weeklyHours&&re.forEach((ke,$e)=>{se.weeklyHours[ke]?.enabled&&(B[$e]=!0)});return B},[q,ce]),Fe=I.useMemo(()=>(ce==="all"?q:q.filter(H=>H.id===ce)).filter(H=>H.weeklyHours?e_.some(re=>H.weeklyHours[re.key]?.enabled):!1),[q,ce]),un=I.useMemo(()=>{const B=new Date,H=`${B.getFullYear()}-${String(B.getMonth()+1).padStart(2,"0")}-${String(B.getDate()).padStart(2,"0")}`,re=B.getDay(),se=re===0?-6:1-re,ke=new Date(B);ke.setDate(B.getDate()+se),ke.setHours(0,0,0,0);const $e=new Date(ke);$e.setDate(ke.getDate()+6),$e.setHours(23,59,59,999);const Ee=`${ke.getFullYear()}-${String(ke.getMonth()+1).padStart(2,"0")}-${String(ke.getDate()).padStart(2,"0")}`,st=`${$e.getFullYear()}-${String($e.getMonth()+1).padStart(2,"0")}-${String($e.getDate()).padStart(2,"0")}`,Tt=j.filter(Bt=>Bt.date===H).length,ts=j.filter(Bt=>Bt.date>=Ee&&Bt.date<=st).length,Ps=new Set(j.map(Bt=>Bt.clientEmail?.toLowerCase()).filter(Boolean)).size;return{todayBookings:Tt,weekBookings:ts,uniqueClients:Ps,totalBookings:j.length}},[j]),hn=I.useMemo(()=>j.filter(B=>B.status==="pending").length,[j]),_n=I.useMemo(()=>R.filter(B=>B.status==="waiting").length,[R]);if(p)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[u.jsx("div",{className:"spinner"}),u.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading dashboard"})]})});if(y)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:u.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[u.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:u.jsx(Zw,{className:"w-8 h-8 text-red-500"})}),u.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Unauthorized"}),u.jsx("p",{className:"text-slate-600 mb-6",children:"You don't have access to this dashboard."}),u.jsx(Ge,{to:`/shop/${e}/login`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:"Login"})]})});const en=ce==="all"?w:w.filter(B=>B.staffId===ce),Dt=ce==="all"?j:j.filter(B=>B.staffId===ce),zt=en.reduce((B,H)=>(B[H.date]||(B[H.date]=[]),B[H.date].push(H),B),{}),wn=Dt.reduce((B,H)=>(B[H.date]||(B[H.date]=[]),B[H.date].push(H),B),{}),En=Q?Object.keys(zt).filter(B=>B===Q).sort():Object.keys(zt).sort(),xe=Q?Dt.filter(B=>B.date===Q):Dt,ye=N==="all"?xe:N==="pending"?xe.filter(B=>B.status==="pending"):N==="confirmed"?xe.filter(B=>!B.status||B.status==="confirmed"):xe.filter(B=>B.status==="cancelled"||B.status==="rejected"),Ce={all:xe.length,pending:xe.filter(B=>B.status==="pending").length,confirmed:xe.filter(B=>!B.status||B.status==="confirmed").length,cancelled:xe.filter(B=>B.status==="cancelled"||B.status==="rejected").length},vt=[{key:"schedule",label:"Schedule",icon:jt},{key:"waitlist",label:"Waitlist",icon:Sp},{key:"staff",label:"Staff",icon:Wn},{key:"services",label:"Services",icon:Ua},{key:"settings",label:"Settings",icon:k4}];return u.jsxs("div",{className:"min-h-screen bg-slate-50",children:[u.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"h-16 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(i.name||"")[0]?.toUpperCase()||"S"}),u.jsxs("div",{className:"hidden sm:block",children:[u.jsx("h1",{className:"text-base font-bold text-slate-900 leading-tight",children:i.name}),u.jsx("p",{className:"text-xs text-slate-500",children:"Dashboard"})]})]}),u.jsx("div",{className:"flex items-center bg-slate-100 p-1 rounded-xl",children:vt.map(B=>{const H=B.icon;return u.jsxs("button",{onClick:()=>U(B.key),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${z===B.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[u.jsx(H,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:B.label}),B.key==="schedule"&&hn>0&&u.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-amber-500 text-white text-[10px] font-bold rounded-full leading-none",children:hn}),B.key==="waitlist"&&_n>0&&u.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-500 text-white text-[10px] font-bold rounded-full leading-none",children:_n})]},B.key)})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs(Ge,{to:`/shop/${e}`,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[u.jsx(p4,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"View Page"})]}),u.jsxs("button",{onClick:Be,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all",children:[u.jsx(w4,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[z==="schedule"&&u.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 animate-fade-in",children:[{label:"Today's Bookings",value:un.todayBookings,icon:Fb,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:un.weekBookings,icon:z4,color:"bg-violet-100 text-violet-600"},{label:"Total Bookings",value:un.totalBookings,icon:i4,color:"bg-emerald-100 text-emerald-600"},{label:"Unique Clients",value:un.uniqueClients,icon:Wn,color:"bg-amber-100 text-amber-600"}].map(B=>{const H=B.icon;return u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[u.jsx("div",{className:"flex items-center justify-between mb-3",children:u.jsx("div",{className:`w-10 h-10 ${B.color} rounded-xl flex items-center justify-center`,children:u.jsx(H,{className:"w-5 h-5"})})}),u.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:B.value}),u.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:B.label})]},B.label)})}),z==="staff"&&u.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:u.jsx(u6,{shopId:c})}),z==="services"&&u.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:u.jsx(r6,{shopId:c})}),k&&u.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:u.jsx(kl,{className:"w-5 h-5 text-blue-600"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Waitlist Match!"}),u.jsxs("p",{className:"text-sm text-slate-500",children:[k.matches.length," client",k.matches.length!==1?"s":""," on the waitlist match this freed slot"]})]})]}),u.jsx("div",{className:"bg-slate-50 rounded-xl p-3 mb-4 text-sm",children:u.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[u.jsx(jt,{className:"w-4 h-4 text-blue-500"}),u.jsxs("span",{className:"font-medium",children:[new Date(k.slot.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," at ",(()=>{const[B,H]=k.slot.time.split(":"),re=parseInt(B);return`${re%12||12}:${H} ${re>=12?"PM":"AM"}`})()]})]})}),u.jsx("div",{className:"space-y-2 mb-5 max-h-48 overflow-y-auto",children:k.matches.map(B=>u.jsx("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border border-blue-100 rounded-lg",children:u.jsxs("div",{children:[u.jsx("span",{className:"text-sm font-semibold text-slate-900",children:B.clientName}),u.jsx("span",{className:"text-xs text-slate-500 ml-2",children:B.serviceName})]})},B.id))}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{onClick:()=>Me(k.matches,k.slot),className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:[u.jsx(kl,{className:"w-4 h-4"}),"Notify All"]}),u.jsx("button",{onClick:()=>L(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Dismiss"})]})]})}),z==="waitlist"&&u.jsx("div",{className:"animate-fade-in",children:u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-5",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Waitlist"}),_n>0&&u.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:[_n," waiting"]})]}),u.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[R.length," total"]})]}),R.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:u.jsx(Sp,{className:"w-6 h-6 text-slate-400"})}),u.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No waitlist entries yet"}),u.jsx("p",{className:"text-xs text-slate-400",children:"Clients can join the waitlist when no slots are available on your booking page."})]}):u.jsx("div",{children:(()=>{const B={};return R.forEach(H=>{const re=H.serviceName||"Other";B[re]||(B[re]=[]),B[re].push(H)}),Object.entries(B).sort(([H],[re])=>H.localeCompare(re)).map(([H,re])=>u.jsxs("div",{className:"mb-6 last:mb-0",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100 flex items-center gap-2",children:[u.jsx(Ua,{className:"w-3.5 h-3.5 text-blue-500"}),H,u.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",re.filter(se=>se.status==="waiting").length," waiting)"]})]}),u.jsx("div",{className:"space-y-2.5",children:re.sort((se,ke)=>(se.createdAt||"").localeCompare(ke.createdAt||"")).map(se=>{const ke={waiting:"bg-blue-50 text-blue-700 border-blue-200",notified:"bg-emerald-50 text-emerald-700 border-emerald-200",booked:"bg-emerald-50 text-emerald-700 border-emerald-200",expired:"bg-slate-100 text-slate-500 border-slate-200"},$e={waiting:"Waiting",notified:"Notified",booked:"Booked",expired:"Removed"},Ee=se.createdAt?(()=>{const Tt=Date.now()-new Date(se.createdAt).getTime(),ts=Math.floor(Tt/864e5),Ps=Math.floor(Tt/36e5);return ts>0?`${ts}d`:`${Ps}h`})():"",st={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return u.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Kb,{className:"w-4 h-4 text-blue-600"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:se.clientName}),u.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${ke[se.status]||ke.waiting}`,children:$e[se.status]||"Waiting"})]}),u.jsxs("div",{className:"text-xs text-slate-500",children:["Joined ",Ee," ago",se.refCode&&u.jsx("span",{className:"font-mono text-slate-400 ml-2",children:se.refCode})]})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[se.status==="waiting"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>He(se.id),className:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all",title:"Notify client",children:u.jsx(kl,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>O(se.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove from waitlist",children:u.jsx(Kl,{className:"w-4 h-4"})})]}),se.status==="notified"&&u.jsx("button",{onClick:()=>O(se.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove",children:u.jsx(Kl,{className:"w-3.5 h-3.5"})})]})]}),u.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[se.staffName&&se.staffName!=="Any Available"&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(Wn,{className:"w-3 h-3 text-violet-400"}),u.jsx("span",{className:"text-violet-600",children:se.staffName})]}),se.preferredDate&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(jt,{className:"w-3 h-3 text-slate-400"}),u.jsxs("span",{children:["Preferred: ",new Date(se.preferredDate+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]}),se.preferredDays&&se.preferredDays.length>0&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(jt,{className:"w-3 h-3 text-slate-400"}),u.jsxs("span",{children:["Days: ",se.preferredDays.map(Tt=>st[Tt]||Tt).join(", ")]})]}),se.preferredTimeRange&&!(se.preferredTimeRange.start==="00:00"&&se.preferredTimeRange.end==="23:59")&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(Bn,{className:"w-3 h-3 text-slate-400"}),u.jsxs("span",{children:["Time: ",_r(se.preferredTimeRange.start),"",_r(se.preferredTimeRange.end)]})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx($b,{className:"w-3 h-3"}),se.clientEmail]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Gb,{className:"w-3 h-3"}),se.clientPhone]})]}),se.status==="notified"&&se.notifiedSlot&&u.jsxs("div",{className:"mt-1.5 px-2.5 py-1.5 bg-emerald-50 border border-emerald-200 rounded-lg inline-flex items-center gap-1.5",children:[u.jsx(kl,{className:"w-3 h-3 text-emerald-500"}),u.jsxs("span",{className:"text-emerald-700 font-medium",children:["Notified about ",new Date(se.notifiedSlot.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ",_r(se.notifiedSlot.time)]})]})]})]},se.id)})})]},H))})()})]})}),z==="settings"&&u.jsx("div",{className:"max-w-2xl animate-fade-in",children:u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[u.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Shop Settings"}),u.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure your booking preferences"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[u.jsxs("div",{className:"pr-4",children:[u.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Require Booking Approval"}),u.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Review and approve bookings before they're confirmed"})]}),u.jsx("button",{type:"button",onClick:Ae,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${i?.requireApproval?"bg-blue-500":"bg-slate-300"}`,children:u.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${i?.requireApproval?"translate-x-6":"translate-x-1"}`})})]}),i?.requireApproval&&u.jsxs("div",{className:"p-3.5 bg-amber-50 border border-amber-200 rounded-xl text-xs text-amber-800 leading-relaxed",children:[u.jsx("strong",{children:" Approval mode is on."}),' New bookings will appear as "Pending" until you approve or reject them. Time slots are held while pending to prevent double-booking.']}),u.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[u.jsxs("div",{className:"pr-4",children:[u.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Buffer Time Between Bookings"}),u.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Add a gap between consecutive appointments"})]}),u.jsxs("select",{value:i?.bufferMinutes||0,onChange:B=>De(B.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[u.jsx("option",{value:"0",children:"No buffer"}),u.jsx("option",{value:"5",children:"5 minutes"}),u.jsx("option",{value:"10",children:"10 minutes"}),u.jsx("option",{value:"15",children:"15 minutes"}),u.jsx("option",{value:"30",children:"30 minutes"})]})]})]})]})}),z==="schedule"&&u.jsxs("div",{className:"animate-fade-in",children:[q.length>0&&u.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5",children:"Filter by Staff"}),u.jsxs("select",{value:ce,onChange:B=>oe(B.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[u.jsx("option",{value:"all",children:"All Staff"}),q.map(B=>u.jsxs("option",{value:B.id,children:[B.name,B.role?`  ${B.role}`:""]},B.id))]})]})}),Fe.length>0&&u.jsxs("div",{className:"mb-6 bg-violet-50 border border-violet-200 rounded-xl p-5",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[u.jsx(nE,{className:"w-4 h-4 text-violet-600"}),u.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Recurring Weekly Hours"})]}),u.jsx("div",{className:"space-y-2.5",children:Fe.map(B=>{const H=e_.filter(re=>B.weeklyHours[re.key]?.enabled);return u.jsxs("div",{className:"flex items-start gap-2.5",children:[u.jsx("div",{className:"w-7 h-7 bg-violet-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:u.jsx(Wn,{className:"w-3.5 h-3.5 text-violet-600"})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:B.name}),u.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:H.map(re=>{const se=B.weeklyHours[re.key];return u.jsxs("span",{className:"inline-block px-2 py-0.5 bg-white text-violet-700 border border-violet-200 rounded text-xs font-medium",children:[re.short," ",_r(se.start),"",_r(se.end),se.break&&u.jsxs("span",{className:"text-amber-600 ml-1",children:["(break ",_r(se.break.start),"",_r(se.break.end),")"]})]},re.key)})})]})]},B.id)})}),u.jsx("p",{className:"text-xs text-violet-500 mt-3",children:"Slots auto-generate on the booking page. Manage hours in the Staff tab."})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[u.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Monthly Overview"}),u.jsx(a6,{slotsByDate:zt,bookingsByDate:wn,selectedDate:Q,onSelectDate:ue,recurringDayFlags:yt}),Q&&u.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[u.jsxs("span",{className:"text-sm text-slate-600",children:["Showing: ",u.jsx("strong",{className:"text-slate-900",children:new Date(Q+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),u.jsx("button",{onClick:()=>ue(null),className:"text-xs px-3 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-all border border-slate-200",children:"Show All"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[u.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:Fe.length>0?"Add Custom Slots":"Create Time Slots"}),Fe.length>0&&u.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Use this for one-off availability outside regular hours."}),!Fe.length&&u.jsx("div",{className:"mb-4"}),u.jsxs("form",{onSubmit:J,className:"space-y-4",children:[q.length>0&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Staff Member"}),u.jsxs("select",{value:C.staffId,onChange:B=>we({...C,staffId:B.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[u.jsx("option",{value:"",children:"Select a staff member"}),q.map(B=>u.jsxs("option",{value:B.id,children:[B.name,B.role?`  ${B.role}`:""]},B.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Date"}),u.jsx("input",{type:"date",value:C.date,onChange:B=>we({...C,date:B.target.value}),required:!0,min:new Date().toISOString().split("T")[0],className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Start"}),u.jsx("input",{type:"time",value:C.startTime,onChange:B=>we({...C,startTime:B.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"End"}),u.jsx("input",{type:"time",value:C.endTime,onChange:B=>we({...C,endTime:B.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Slot Duration"}),u.jsxs("select",{value:C.slotDuration,onChange:B=>we({...C,slotDuration:B.target.value}),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[u.jsx("option",{value:"15",children:"15 minutes"}),u.jsx("option",{value:"30",children:"30 minutes"}),u.jsx("option",{value:"45",children:"45 minutes"}),u.jsx("option",{value:"60",children:"1 hour"}),u.jsx("option",{value:"90",children:"1.5 hours"}),u.jsx("option",{value:"120",children:"2 hours"})]})]}),u.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[u.jsx(jg,{className:"w-4 h-4"}),"Generate Slots"]})]}),u.jsxs("div",{className:"mt-4 p-3.5 bg-blue-50 border border-blue-100 rounded-xl text-xs text-slate-600 leading-relaxed",children:[u.jsx("strong",{className:"text-slate-700",children:" Tip:"})," ",Fe.length>0?"Weekly hours auto-generate slots. Use this for one-off slots outside regular hours.":q.length>0?"Select a staff member, pick a date, and set working hours to create slots.":"Set your hours and slot duration. We'll create all the time slots for that day."]})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("h2",{className:"text-lg font-bold text-slate-900",children:Q?"Bookings":"All Bookings"}),Ce.pending>0&&u.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 border border-amber-200 text-xs font-bold rounded-full",children:[Ce.pending," pending"]})]}),u.jsx("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:ye.length})]}),u.jsx("div",{className:"flex items-center gap-1 mb-4 p-1 bg-slate-100 rounded-lg overflow-x-auto",children:[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"confirmed",label:"Confirmed"},{key:"cancelled",label:"Cancelled"}].map(B=>u.jsxs("button",{onClick:()=>A(B.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-semibold transition-all whitespace-nowrap ${N===B.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[B.label,u.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${N===B.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:Ce[B.key]})]},B.key))}),ye.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:u.jsx(Fb,{className:"w-6 h-6 text-slate-400"})}),u.jsx("p",{className:"text-sm text-slate-500 font-medium",children:N!=="all"?`No ${N} bookings`:Q?"No bookings for this date":"No bookings yet"})]}):u.jsx("div",{className:"space-y-2.5 max-h-[500px] overflow-y-auto pr-1",children:ye.sort((B,H)=>`${B.date}${B.time}`.localeCompare(`${H.date}${H.time}`)).map(B=>{const H=B.status||"confirmed",re={pending:"bg-amber-50 text-amber-700 border-amber-200",confirmed:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200",cancelled:"bg-slate-100 text-slate-500 border-slate-200"},se={pending:"Pending",confirmed:"Confirmed",rejected:"Rejected",cancelled:"Cancelled"};return u.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[u.jsxs("div",{className:"flex items-start justify-between mb-2",children:[u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Kb,{className:"w-4 h-4 text-blue-600"})}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:B.clientName}),u.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${re[H]}`,children:se[H]})]}),u.jsx("div",{className:"text-xs text-slate-500",children:Le(B.date,B.time)})]})]}),u.jsxs("div",{className:"flex items-center gap-1",children:[H==="pending"&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>de(B.id),className:"p-1.5 text-emerald-500 hover:text-emerald-700 hover:bg-emerald-50 rounded-lg transition-all",title:"Approve booking",children:u.jsx(Cg,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>me(B.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Reject booking",children:u.jsx(Il,{className:"w-4 h-4"})})]}),H==="confirmed"&&u.jsx("button",{onClick:()=>ee(B.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Cancel booking",children:u.jsx(rd,{className:"w-3.5 h-3.5"})})]})]}),u.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[B.serviceName&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(Ua,{className:"w-3 h-3 text-blue-400"}),u.jsx("span",{className:"font-medium text-slate-700",children:B.serviceName}),B.servicePrice!=null&&u.jsxs("span",{className:"text-blue-600 font-semibold",children:["$",Number(B.servicePrice).toFixed(2)]})]}),B.staffName&&u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(Wn,{className:"w-3 h-3 text-violet-400"}),u.jsx("span",{className:"text-violet-600",children:B.staffName})]}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx($b,{className:"w-3 h-3"}),B.clientEmail]}),u.jsxs("span",{className:"flex items-center gap-1",children:[u.jsx(Gb,{className:"w-3 h-3"}),B.clientPhone]})]}),B.refCode&&u.jsx("div",{className:"mt-0.5",children:u.jsxs("span",{className:"font-mono text-[10px] text-slate-400",children:["REF: ",B.refCode]})})]})]},B.id)})})]})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("h2",{className:"text-lg font-bold text-slate-900",children:Q?"Custom Time Slots":"All Custom Time Slots"}),u.jsx("span",{className:"text-xs font-semibold text-slate-500 bg-slate-100 px-2.5 py-1 rounded-lg",children:Q?(zt[Q]||[]).length:en.length})]}),Fe.length>0&&u.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Recurring slots from weekly hours auto-generate  not shown here."}),!Fe.length&&u.jsx("div",{className:"mb-4"}),En.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:u.jsx(jt,{className:"w-6 h-6 text-slate-400"})}),u.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:Q?"No custom slots for this date":"No custom slots yet"}),u.jsx("p",{className:"text-xs text-slate-400",children:Fe.length>0?"Recurring hours handle most scheduling.":"Use the form above to generate availability."})]}):u.jsx("div",{className:"space-y-6",children:En.map(B=>u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100",children:new Date(B).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2.5",children:zt[B].sort((H,re)=>H.time.localeCompare(re.time)).map(H=>u.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3.5 text-center group hover:border-slate-300 transition-all",children:[u.jsx("div",{className:"text-sm font-bold text-slate-900 mb-0.5",children:H.time}),u.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[H.duration," min"]}),H.staffName&&u.jsxs("div",{className:"text-xs text-violet-600 mb-1.5 flex items-center justify-center gap-1",children:[u.jsx(Wn,{className:"w-3 h-3"}),H.staffName]}),u.jsx("div",{className:"mb-2",children:H.available?u.jsx("span",{className:"inline-block px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-md text-xs font-medium",children:"Available"}):u.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-50 text-red-700 border border-red-200 rounded-md text-xs font-medium",children:"Booked"})}),H.available&&u.jsxs("button",{onClick:()=>he(H.id),className:"opacity-0 group-hover:opacity-100 flex items-center justify-center gap-1 w-full px-2 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-xs font-medium transition-all border border-red-200",children:[u.jsx(rd,{className:"w-3 h-3"}),"Remove"]})]},H.id))})]},B))})]})]})]})]})}function p6({user:a}){const{slug:e}=Oc(),n=Wl(),[i,l]=I.useState(""),[c,f]=I.useState(""),[p,g]=I.useState(""),[y,b]=I.useState(!1);I.useEffect(()=>{if(!a)return;(async()=>{const j=ys(rt(Ne,"shops"),Zn("slug","==",e)),Y=await xs(j);Y.empty||Y.docs[0].data().ownerUid===a.uid&&n(`/shop/${e}/dashboard`,{replace:!0})})()},[a,e,n]);const w=async S=>{S.preventDefault(),g(""),b(!0);try{const Y=(await r1(kr,i,c)).user,q=ys(rt(Ne,"shops"),Zn("slug","==",e)),P=await xs(q);if(P.empty){g("Shop not found"),b(!1);return}if(P.docs[0].data().ownerUid!==Y.uid){g("You are not the owner of this shop"),await kr.signOut(),b(!1);return}n(`/shop/${e}/dashboard`,{replace:!0})}catch(j){switch(j.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":g("Invalid email or password");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/too-many-requests":g("Too many failed attempts. Please try again later.");break;default:g("Login failed. Please try again.")}f("")}finally{b(!1)}};return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:u.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[u.jsx("div",{className:"text-center mb-8",children:u.jsxs(Ge,{to:"/",className:"inline-flex items-center gap-2.5",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:u.jsx(Ur,{className:"w-5 h-5 text-white"})}),u.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",u.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),u.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),u.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),u.jsxs("form",{onSubmit:w,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),u.jsx("input",{type:"email",value:i,onChange:S=>{l(S.target.value),g("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),u.jsx("input",{type:"password",value:c,onChange:S=>{f(S.target.value),g("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&u.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[u.jsx("span",{children:""})," ",p]})]}),u.jsx("button",{type:"submit",disabled:y,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:y?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):"Sign In"})]}),u.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:u.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",u.jsx(Ge,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs(Ge,{to:`/shop/${e}`,className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[u.jsx(La,{className:"w-3.5 h-3.5"}),"Back to booking page"]})})]})})}function t_({name:a,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const i=(a||"").split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2);return u.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:i||"?"})}function n_(){return u.jsxs(Ge,{to:"/",className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:u.jsx(Ur,{className:"w-3.5 h-3.5 text-white"})}),u.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",u.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function g6(){const{slug:a,refCode:e}=Oc(),[n,i]=I.useState(null),[l,c]=I.useState(null),[f,p]=I.useState(!0),[g,y]=I.useState(!1),[b,w]=I.useState(null),[S,j]=I.useState(null),[Y,q]=I.useState(!1),[P,z]=I.useState([]),[U,Q]=I.useState([]),[ue,ce]=I.useState([]),[oe,N]=I.useState([]),[A,R]=I.useState(!1),[M,k]=I.useState(!1),[L,C]=I.useState(null),[we,Be]=I.useState(null),[J,he]=I.useState(!1),[be,Me]=I.useState("");I.useEffect(()=>{(async()=>{p(!0);try{const ye=ys(rt(Ne,"shops"),Zn("slug","==",a)),Ce=await xs(ye);if(Ce.empty)y(!0);else{const vt=Ce.docs[0];i(vt.data()),c(vt.id)}}catch(ye){console.error("Error looking up shop:",ye),y(!0)}finally{p(!1)}})()},[a]),I.useEffect(()=>{if(!l)return;(async()=>{try{const ye=ys(rt(Ne,"shops",l,"bookings"),Zn("refCode","==",e.toUpperCase())),Ce=await xs(ye);if(Ce.empty)q(!0);else{const vt=Ce.docs[0];w(vt.data()),j(vt.id)}}catch(ye){console.error("Error looking up booking:",ye),q(!0)}})()},[l,e]),I.useEffect(()=>{if(!l||!b)return;const xe=zn(rt(Ne,"shops",l,"bookings"),B=>{z(B.docs.map(H=>({id:H.id,...H.data()})))}),ye=zn(rt(Ne,"shops",l,"availability"),B=>{const H=new Date,re=B.docs.map(se=>({id:se.id,...se.data()})).filter(se=>new Date(`${se.date}T${se.time}`)>H);Q(re)}),Ce=zn(rt(Ne,"shops",l,"staff"),B=>{ce(B.docs.map(H=>({id:H.id,...H.data()})).filter(H=>H.active!==!1).sort((H,re)=>(H.name||"").localeCompare(re.name||"")))}),vt=zn(rt(Ne,"shops",l,"services"),B=>{N(B.docs.map(H=>({id:H.id,...H.data()})).filter(H=>H.active!==!1))});return()=>{xe(),ye(),Ce(),vt()}},[l,b]);const He=n?.bufferMinutes||0,O=I.useMemo(()=>{if(!b)return null;if(b.serviceId){const xe=oe.find(ye=>ye.id===b.serviceId);if(xe)return xe}return b.serviceName?{id:b.serviceId,name:b.serviceName,price:b.servicePrice,duration:b.serviceDuration||b.duration}:null},[b,oe]),ee=I.useMemo(()=>{if(!A||!b)return[];const xe=new Date,ye=O?.duration||b.duration||60;let Ce=U.filter(se=>se.available);Ce=Ce.filter(se=>se.duration>=ye),b.staffId&&(Ce=Ce.filter(se=>se.staffId===b.staffId||!se.staffId));const vt=b.staffId?ue.filter(se=>se.id===b.staffId):ue,B=aE(vt,ye,He,4).filter(se=>new Date(`${se.date}T${se.time}`)>xe),H=rE(B,Ce),re=P.filter(se=>se.id!==S);return iE(H,re,He)},[A,b,S,U,ue,P,He,O]),de=I.useMemo(()=>[...new Set(ee.map(xe=>xe.date))].sort(),[ee]),me=I.useMemo(()=>L?ee.filter(xe=>xe.date===L):[],[L,ee]),Ae=async()=>{he(!0);try{if(await Lt(Ct(Ne,"shops",l,"bookings",S),{status:"cancelled"}),b.slotId&&!b.slotId.startsWith("wh-"))try{await Lt(Ct(Ne,"shops",l,"availability",b.slotId),{available:!0})}catch(xe){console.warn("Could not re-open slot:",xe)}w(xe=>({...xe,status:"cancelled"})),k(!1),Me("cancelled")}catch(xe){console.error("Cancel error:",xe),Me("error")}finally{he(!1)}},De=async()=>{if(we){he(!0);try{const xe={date:we.date,time:we.time,slotId:we.id};if(we.staffId&&(xe.staffId=we.staffId,xe.staffName=we.staffName||""),n?.requireApproval&&(xe.status="pending"),b.slotId&&!b.slotId.startsWith("wh-"))try{await Lt(Ct(Ne,"shops",l,"availability",b.slotId),{available:!0})}catch(ye){console.warn("Could not re-open old slot:",ye)}if(!we.generated&&we.id)try{await Lt(Ct(Ne,"shops",l,"availability",we.id),{available:!1})}catch(ye){console.warn("Could not block new slot:",ye)}await Lt(Ct(Ne,"shops",l,"bookings",S),xe),w(ye=>({...ye,...xe})),R(!1),C(null),Be(null),Me("rescheduled")}catch(xe){console.error("Reschedule error:",xe),Me("error")}finally{he(!1)}}},Le=xe=>new Date(xe+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),yt=xe=>{const[ye,Ce]=xe.split(":"),vt=parseInt(ye),B=vt>=12?"PM":"AM";return`${vt%12||12}:${Ce} ${B}`},Fe=xe=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(xe),un=xe=>{if(!xe)return"";if(xe<60)return`${xe} min`;const ye=Math.floor(xe/60),Ce=xe%60;return Ce?`${ye}h ${Ce}m`:`${ye} hour${ye>1?"s":""}`};if(f)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[u.jsx("div",{className:"spinner"}),u.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:u.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:u.jsx(jt,{className:"w-8 h-8 text-slate-400"})}),u.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),u.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,u.jsx("span",{className:"font-mono text-blue-600",children:a}),'".']}),u.jsxs(Ge,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[u.jsx(La,{className:"w-4 h-4"}),"Go Home"]})]})});if(Y)return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[u.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),u.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),u.jsx(n_,{})]})}),u.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:u.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[u.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:u.jsx(Np,{className:"w-8 h-8 text-amber-500"})}),u.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Not Found"}),u.jsx("p",{className:"text-slate-600 mb-2",children:"No booking found with reference code"}),u.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),u.jsxs(Ge,{to:`/shop/${a}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[u.jsx(jt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[u.jsx("div",{className:"spinner"}),u.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking"})]})});const hn=b.status||"confirmed",_n=hn==="pending"||hn==="confirmed",en=hn==="cancelled",Dt=hn==="rejected",zt={pending:{label:"Pending Approval",color:"bg-amber-100 text-amber-700 border-amber-200",icon:Bn},confirmed:{label:"Confirmed",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ra},cancelled:{label:"Cancelled",color:"bg-slate-100 text-slate-500 border-slate-200",icon:Il},rejected:{label:"Rejected",color:"bg-red-100 text-red-700 border-red-200",icon:Il}},wn=zt[hn]||zt.confirmed,En=wn.icon;return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[u.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),u.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),u.jsx(n_,{})]})}),u.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[be==="rescheduled"&&u.jsx("div",{className:"mb-6 animate-scale-in",children:u.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(eE,{className:"w-8 h-8 text-emerald-600"})}),u.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Rescheduled!"}),u.jsx("p",{className:"text-slate-600 mb-4",children:n?.requireApproval?"Your booking has been rescheduled and is pending approval.":"Your booking has been successfully rescheduled."}),u.jsx("button",{onClick:()=>Me(""),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View updated details "})]})}),be==="cancelled"&&u.jsx("div",{className:"mb-6 animate-scale-in",children:u.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-lg p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Il,{className:"w-8 h-8 text-slate-400"})}),u.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Cancelled"}),u.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking has been cancelled."}),u.jsxs(Ge,{to:`/shop/${a}`,className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[u.jsx(jt,{className:"w-4 h-4"}),"Book a new appointment"]})]})}),be==="error"&&u.jsx("div",{className:"mb-6 animate-scale-in",children:u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[u.jsx("span",{children:""}),u.jsx("span",{children:"Something went wrong. Please try again."})]})}),!A&&u.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Your Booking"}),u.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference: ",u.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),(en||Dt)&&u.jsxs("div",{className:`mb-4 p-4 rounded-xl border flex items-center gap-3 ${en?"bg-slate-50 border-slate-200":"bg-red-50 border-red-200"}`,children:[u.jsx(En,{className:`w-5 h-5 ${en?"text-slate-400":"text-red-500"}`}),u.jsx("span",{className:`font-medium text-sm ${en?"text-slate-600":"text-red-700"}`,children:en?"This booking has been cancelled.":"This booking has been rejected by the shop."})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),u.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${wn.color}`,children:[u.jsx(En,{className:"w-3.5 h-3.5"}),wn.label]})]}),b.serviceName&&u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx(Ua,{className:"w-4 h-4 text-blue-600"})}),u.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.servicePrice!=null&&u.jsx("span",{className:"font-bold text-blue-600",children:Fe(b.servicePrice)})]}),b.staffName&&u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx(t_,{name:b.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),u.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:u.jsx(jt,{className:"w-4 h-4 text-slate-600"})}),u.jsxs("span",{className:"font-semibold text-slate-800",children:[Le(b.date)," at ",yt(b.time)]})]}),u.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[u.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:u.jsx(Bn,{className:"w-4 h-4 text-slate-500"})}),u.jsx("span",{children:un(b.serviceDuration||b.duration)})]})]}),_n&&!be&&u.jsx("div",{className:"space-y-3",children:M?u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 animate-scale-in",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Np,{className:"w-5 h-5 text-red-500"})}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-bold text-slate-900",children:"Are you sure?"}),u.jsx("p",{className:"text-sm text-slate-600",children:"This action cannot be undone."})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("button",{onClick:Ae,disabled:J,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[J?u.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}):u.jsx(Il,{className:"w-4 h-4"}),J?"Cancelling":"Yes, Cancel"]}),u.jsx("button",{onClick:()=>k(!1),disabled:J,className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Go Back"})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:()=>{R(!0),Me("")},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[u.jsx(nE,{className:"w-4 h-4"}),"Reschedule Booking"]}),u.jsxs("button",{onClick:()=>k(!0),className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-white hover:bg-red-50 text-red-600 rounded-xl font-semibold border border-red-200 hover:border-red-300 transition-all",children:[u.jsx(Il,{className:"w-4 h-4"}),"Cancel Booking"]})]})}),(en||Dt)&&u.jsx("div",{className:"text-center",children:u.jsxs(Ge,{to:`/shop/${a}`,className:"inline-flex items-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[u.jsx(jt,{className:"w-4 h-4"}),"Book Again"]})})]}),A&&u.jsxs("div",{className:"animate-fade-in",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[u.jsxs("button",{onClick:()=>{R(!1),C(null),Be(null)},className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[u.jsx(La,{className:"w-3.5 h-3.5"}),"Back to Booking"]}),b.serviceName&&u.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[u.jsx(Ua,{className:"w-3.5 h-3.5 text-blue-500"}),u.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName}),b.servicePrice!=null&&u.jsx("span",{className:"text-blue-600 font-bold",children:Fe(b.servicePrice)})]}),b.staffName&&u.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[u.jsx(t_,{name:b.staffName,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),u.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a New Time"}),u.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Pick a new date and time for your appointment"})]}),de.length===0?u.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:u.jsx(jt,{className:"w-8 h-8 text-slate-400"})}),u.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),u.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"No time slots are currently available. Check back soon!"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"mb-8",children:u.jsx(sE,{availableDates:de,selectedDate:L,onSelectDate:xe=>{C(xe),Be(null)}})}),L&&u.jsxs("div",{className:"animate-slide-down",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",Le(L)]}),u.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[me.length," slot",me.length!==1?"s":""]})]}),me.length===0?u.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:u.jsx("p",{className:"text-slate-500",children:"No slots available for this date"})}):u.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:me.sort((xe,ye)=>xe.time.localeCompare(ye.time)).map(xe=>{const ye=we?.id===xe.id;return u.jsxs("button",{onClick:()=>Be(xe),className:`group border rounded-xl p-4 transition-all duration-200 text-center ${ye?"bg-blue-600 border-blue-600 text-white shadow-md shadow-blue-600/30":"bg-white border-slate-200 hover:border-blue-400 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5"}`,children:[u.jsx("div",{className:`text-lg font-bold mb-1 ${ye?"text-white":"text-slate-900 group-hover:text-blue-700"} transition-colors`,children:yt(xe.time)}),xe.staffName&&u.jsxs("div",{className:`text-xs mb-0.5 flex items-center justify-center gap-1 ${ye?"text-blue-100":"text-violet-600"}`,children:[u.jsx(Wn,{className:"w-3 h-3"}),xe.staffName]}),u.jsx("div",{className:`text-xs ${ye?"text-blue-200":"text-slate-400"}`,children:un(b.serviceDuration||b.duration)})]},xe.id)})}),we&&u.jsxs("div",{className:"mt-6 animate-fade-in",children:[u.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 shadow-sm p-5 mb-4",children:[u.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"New Appointment Time"}),u.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[u.jsx(jt,{className:"w-4 h-4 text-blue-500"}),u.jsxs("span",{className:"font-semibold text-slate-800",children:[Le(we.date)," at ",yt(we.time)]})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:De,disabled:J,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:J?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Rescheduling"]}):u.jsxs(u.Fragment,{children:[u.jsx(ra,{className:"w-4 h-4"}),"Confirm Reschedule"]})}),u.jsx("button",{onClick:()=>Be(null),className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]})]}),!L&&u.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]})]}),u.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:u.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:u.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",u.jsx(Ge,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function s_(){return u.jsxs(Ge,{to:"/",className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:u.jsx(Ur,{className:"w-3.5 h-3.5 text-white"})}),u.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",u.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function y6(a){if(!a)return"Any time";const e=n=>{const[i,l]=n.split(":").map(Number),c=i>=12?"PM":"AM",f=i%12||12;return l===0?`${f}${c}`:`${f}:${l.toString().padStart(2,"0")}${c}`};return a.start==="00:00"&&a.end==="23:59"?"Any time":`${e(a.start)}  ${e(a.end)}`}function x6(a){if(!a||a.length===0)return"Any day";const e={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return a.map(n=>e[n]||n).join(", ")}function v6(a){if(!a)return"";const e=new Date,n=new Date(a),i=e-n,l=Math.floor(i/6e4);if(l<60)return`${l}m ago`;const c=Math.floor(l/60);return c<24?`${c}h ago`:`${Math.floor(c/24)}d ago`}function b6(){const{slug:a,refCode:e}=Oc(),[n,i]=I.useState(null),[l,c]=I.useState(null),[f,p]=I.useState(!0),[g,y]=I.useState(!1),[b,w]=I.useState(null),[S,j]=I.useState(!1),[Y,q]=I.useState(null);if(I.useEffect(()=>{(async()=>{p(!0);try{const oe=ys(rt(Ne,"shops"),Zn("slug","==",a)),N=await xs(oe);if(N.empty)y(!0);else{const A=N.docs[0];i(A.data()),c(A.id)}}catch(oe){console.error("Error looking up shop:",oe),y(!0)}finally{p(!1)}})()},[a]),I.useEffect(()=>{if(!l)return;(async()=>{try{const oe=ys(rt(Ne,"shops",l,"waitlist"),Zn("refCode","==",e.toUpperCase())),N=await xs(oe);if(N.empty){j(!0);return}const A=N.docs[0],R={id:A.id,...A.data()};w(R);const M=ys(rt(Ne,"shops",l,"waitlist"),Zn("serviceId","==",R.serviceId),Zn("status","==","waiting")),C=(await xs(M)).docs.map(we=>({id:we.id,...we.data()})).sort((we,Be)=>(we.createdAt||"").localeCompare(Be.createdAt||"")).findIndex(we=>we.id===R.id);C>=0&&q(C+1)}catch(oe){console.error("Error looking up waitlist entry:",oe),j(!0)}})()},[l,e]),f)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[u.jsx("div",{className:"spinner"}),u.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:u.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[u.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:u.jsx(jt,{className:"w-8 h-8 text-slate-400"})}),u.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),u.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,u.jsx("span",{className:"font-mono text-blue-600",children:a}),'".']}),u.jsxs(Ge,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[u.jsx(La,{className:"w-4 h-4"}),"Go Home"]})]})});if(S)return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[u.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),u.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),u.jsx(s_,{})]})}),u.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:u.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[u.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:u.jsx(Np,{className:"w-8 h-8 text-amber-500"})}),u.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Waitlist Entry Not Found"}),u.jsx("p",{className:"text-slate-600 mb-2",children:"No waitlist entry found with reference code"}),u.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),u.jsxs(Ge,{to:`/shop/${a}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[u.jsx(jt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return u.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:u.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[u.jsx("div",{className:"spinner"}),u.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading waitlist"})]})});const P={waiting:{label:"Waiting",color:"bg-blue-100 text-blue-700 border-blue-200",icon:Bn},notified:{label:"Slot Available!",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:kl},booked:{label:"Booked",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ra},expired:{label:"Expired",color:"bg-slate-100 text-slate-500 border-slate-200",icon:Bn}},z=P[b.status]||P.waiting,U=z.icon,Q=ce=>ce?new Date(ce+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",ue=ce=>{if(!ce)return"";const[oe,N]=ce.split(":"),A=parseInt(oe),R=A>=12?"PM":"AM";return`${A%12||12}:${N} ${R}`};return u.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[u.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),u.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),u.jsx(s_,{})]})}),u.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:u.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[b.status==="notified"&&u.jsx("div",{className:"mb-6 animate-scale-in",children:u.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(kl,{className:"w-8 h-8 text-emerald-600"})}),u.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"A Slot Is Available!"}),u.jsxs("p",{className:"text-slate-600 mb-4",children:["A slot has opened up for ",b.serviceName,". Book now before it's taken!"]}),b.notifiedSlot&&u.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-xl text-sm text-emerald-700 font-medium mb-4",children:[u.jsx(jt,{className:"w-4 h-4"}),Q(b.notifiedSlot.date)," at"," ",ue(b.notifiedSlot.time),b.notifiedSlot.staffName&&u.jsxs("span",{className:"text-emerald-600",children:[" ","with ",b.notifiedSlot.staffName]})]}),u.jsx("div",{children:u.jsxs(Ge,{to:`/shop/${a}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-emerald-600/20 hover:shadow-lg",children:[u.jsx(jt,{className:"w-4 h-4"}),"Book Now "]})})]})}),u.jsxs("div",{className:"mb-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Waitlist Status"}),u.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference:"," ",u.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),u.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),u.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${z.color}`,children:[u.jsx(U,{className:"w-3.5 h-3.5"}),z.label]})]}),b.status==="waiting"&&Y!=null&&u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Position"}),u.jsxs("div",{className:"flex items-center gap-1.5",children:[u.jsx(Sp,{className:"w-4 h-4 text-blue-500"}),u.jsxs("span",{className:"font-bold text-slate-900 text-lg",children:["#",Y]}),u.jsx("span",{className:"text-sm text-slate-500",children:"in line"})]})]}),b.serviceName&&u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:u.jsx(Ua,{className:"w-4 h-4 text-blue-600"})}),u.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.staffName&&u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center",children:u.jsx(Wn,{className:"w-4 h-4 text-violet-600"})}),u.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),b.preferredDate&&u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:u.jsx(jt,{className:"w-4 h-4 text-slate-600"})}),u.jsxs("span",{className:"text-sm text-slate-700",children:["Preferred: ",Q(b.preferredDate)]})]}),b.preferredDays&&b.preferredDays.length>0&&u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:u.jsx(jt,{className:"w-4 h-4 text-slate-600"})}),u.jsxs("span",{className:"text-sm text-slate-700",children:["Days: ",x6(b.preferredDays)]})]}),b.preferredTimeRange&&u.jsxs("div",{className:"flex items-center gap-2.5",children:[u.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:u.jsx(Bn,{className:"w-4 h-4 text-slate-500"})}),u.jsxs("span",{className:"text-sm text-slate-700",children:["Time: ",y6(b.preferredTimeRange)]})]}),b.createdAt&&u.jsxs("div",{className:"pt-2 border-t border-slate-100 text-xs text-slate-400",children:["Joined ",v6(b.createdAt)]})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs(Ge,{to:`/shop/${a}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[u.jsx(jt,{className:"w-4 h-4"}),b.status==="notified"?"Book Now":"Check Available Slots"]})})]})}),u.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:u.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:u.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",u.jsx(Ge,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function _6(){const[a,e]=I.useState(null),[n,i]=I.useState(!0);return I.useEffect(()=>{const l=cR(kr,c=>{e(c),i(!1)});return()=>l()},[]),n?u.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:u.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[u.jsx("div",{className:"spinner"}),u.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):u.jsx(g2,{children:u.jsxs(GS,{children:[u.jsx(aa,{path:"/",element:u.jsx(Y4,{})}),u.jsx(aa,{path:"/register",element:u.jsx(Q4,{})}),u.jsx(aa,{path:"/login",element:u.jsx(X4,{user:a})}),u.jsx(aa,{path:"/shop/:slug",element:u.jsx(s6,{})}),u.jsx(aa,{path:"/shop/:slug/booking/:refCode",element:u.jsx(g6,{})}),u.jsx(aa,{path:"/shop/:slug/waitlist/:refCode",element:u.jsx(b6,{})}),u.jsx(aa,{path:"/shop/:slug/login",element:u.jsx(p6,{user:a})}),u.jsx(aa,{path:"/shop/:slug/dashboard",element:u.jsx(m6,{user:a})}),u.jsx(aa,{path:"*",element:u.jsx(FS,{to:"/",replace:!0})})]})})}KT.createRoot(document.getElementById("root")).render(u.jsx(zT.StrictMode,{children:u.jsx(_6,{})}));
