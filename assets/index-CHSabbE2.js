(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function Q_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Km={exports:{}},Nc={};var Db;function $2(){if(Db)return Nc;Db=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var h=null;if(u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:h,ref:l!==void 0?l:null,props:u}}return Nc.Fragment=e,Nc.jsx=n,Nc.jsxs=n,Nc}var Mb;function G2(){return Mb||(Mb=1,Km.exports=$2()),Km.exports}var o=G2(),Qm={exports:{}},Ye={};var Ob;function Y2(){if(Ob)return Ye;Ob=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),T=Symbol.iterator;function C(O){return O===null||typeof O!="object"?null:(O=T&&O[T]||O["@@iterator"],typeof O=="function"?O:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,V={};function B(O,ne,re){this.props=O,this.context=ne,this.refs=V,this.updater=re||H}B.prototype.isReactComponent={},B.prototype.setState=function(O,ne){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,ne,"setState")},B.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function G(){}G.prototype=B.prototype;function Q(O,ne,re){this.props=O,this.context=ne,this.refs=V,this.updater=re||H}var ge=Q.prototype=new G;ge.constructor=Q,U(ge,B.prototype),ge.isPureReactComponent=!0;var pe=Array.isArray;function le(){}var j={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function I(O,ne,re){var be=re.ref;return{$$typeof:s,type:O,key:ne,ref:be!==void 0?be:null,props:re}}function P(O,ne){return I(O.type,ne,O.props)}function M(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function q(O){var ne={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(re){return ne[re]})}var k=/\/+/g;function z(O,ne){return typeof O=="object"&&O!==null&&O.key!=null?q(""+O.key):ne.toString(36)}function D(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(le,le):(O.status="pending",O.then(function(ne){O.status==="pending"&&(O.status="fulfilled",O.value=ne)},function(ne){O.status==="pending"&&(O.status="rejected",O.reason=ne)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function R(O,ne,re,be,ye){var Ie=typeof O;(Ie==="undefined"||Ie==="boolean")&&(O=null);var oe=!1;if(O===null)oe=!0;else switch(Ie){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(O.$$typeof){case s:case e:oe=!0;break;case b:return oe=O._init,R(oe(O._payload),ne,re,be,ye)}}if(oe)return ye=ye(O),oe=be===""?"."+z(O,0):be,pe(ye)?(re="",oe!=null&&(re=oe.replace(k,"$&/")+"/"),R(ye,ne,re,"",function($e){return $e})):ye!=null&&(M(ye)&&(ye=P(ye,re+(ye.key==null||O&&O.key===ye.key?"":(""+ye.key).replace(k,"$&/")+"/")+oe)),ne.push(ye)),1;oe=0;var Ue=be===""?".":be+":";if(pe(O))for(var Me=0;Me<O.length;Me++)be=O[Me],Ie=Ue+z(be,Me),oe+=R(be,ne,re,Ie,ye);else if(Me=C(O),typeof Me=="function")for(O=Me.call(O),Me=0;!(be=O.next()).done;)be=be.value,Ie=Ue+z(be,Me++),oe+=R(be,ne,re,Ie,ye);else if(Ie==="object"){if(typeof O.then=="function")return R(D(O),ne,re,be,ye);throw ne=String(O),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return oe}function K(O,ne,re){if(O==null)return O;var be=[],ye=0;return R(O,be,"","",function(Ie){return ne.call(re,Ie,ye++)}),be}function he(O){if(O._status===-1){var ne=O._result;ne=ne(),ne.then(function(re){(O._status===0||O._status===-1)&&(O._status=1,O._result=re)},function(re){(O._status===0||O._status===-1)&&(O._status=2,O._result=re)}),O._status===-1&&(O._status=0,O._result=ne)}if(O._status===1)return O._result.default;throw O._result}var Ne=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ve={map:K,forEach:function(O,ne,re){K(O,function(){ne.apply(this,arguments)},re)},count:function(O){var ne=0;return K(O,function(){ne++}),ne},toArray:function(O){return K(O,function(ne){return ne})||[]},only:function(O){if(!M(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ye.Activity=w,Ye.Children=ve,Ye.Component=B,Ye.Fragment=n,Ye.Profiler=l,Ye.PureComponent=Q,Ye.StrictMode=i,Ye.Suspense=g,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(O){return j.H.useMemoCache(O)}},Ye.cache=function(O){return function(){return O.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(O,ne,re){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var be=U({},O.props),ye=O.key;if(ne!=null)for(Ie in ne.key!==void 0&&(ye=""+ne.key),ne)!A.call(ne,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&ne.ref===void 0||(be[Ie]=ne[Ie]);var Ie=arguments.length-2;if(Ie===1)be.children=re;else if(1<Ie){for(var oe=Array(Ie),Ue=0;Ue<Ie;Ue++)oe[Ue]=arguments[Ue+2];be.children=oe}return I(O.type,ye,be)},Ye.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Ye.createElement=function(O,ne,re){var be,ye={},Ie=null;if(ne!=null)for(be in ne.key!==void 0&&(Ie=""+ne.key),ne)A.call(ne,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(ye[be]=ne[be]);var oe=arguments.length-2;if(oe===1)ye.children=re;else if(1<oe){for(var Ue=Array(oe),Me=0;Me<oe;Me++)Ue[Me]=arguments[Me+2];ye.children=Ue}if(O&&O.defaultProps)for(be in oe=O.defaultProps,oe)ye[be]===void 0&&(ye[be]=oe[be]);return I(O,Ie,ye)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(O){return{$$typeof:p,render:O}},Ye.isValidElement=M,Ye.lazy=function(O){return{$$typeof:b,_payload:{_status:-1,_result:O},_init:he}},Ye.memo=function(O,ne){return{$$typeof:x,type:O,compare:ne===void 0?null:ne}},Ye.startTransition=function(O){var ne=j.T,re={};j.T=re;try{var be=O(),ye=j.S;ye!==null&&ye(re,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(le,Ne)}catch(Ie){Ne(Ie)}finally{ne!==null&&re.types!==null&&(ne.types=re.types),j.T=ne}},Ye.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Ye.use=function(O){return j.H.use(O)},Ye.useActionState=function(O,ne,re){return j.H.useActionState(O,ne,re)},Ye.useCallback=function(O,ne){return j.H.useCallback(O,ne)},Ye.useContext=function(O){return j.H.useContext(O)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(O,ne){return j.H.useDeferredValue(O,ne)},Ye.useEffect=function(O,ne){return j.H.useEffect(O,ne)},Ye.useEffectEvent=function(O){return j.H.useEffectEvent(O)},Ye.useId=function(){return j.H.useId()},Ye.useImperativeHandle=function(O,ne,re){return j.H.useImperativeHandle(O,ne,re)},Ye.useInsertionEffect=function(O,ne){return j.H.useInsertionEffect(O,ne)},Ye.useLayoutEffect=function(O,ne){return j.H.useLayoutEffect(O,ne)},Ye.useMemo=function(O,ne){return j.H.useMemo(O,ne)},Ye.useOptimistic=function(O,ne){return j.H.useOptimistic(O,ne)},Ye.useReducer=function(O,ne,re){return j.H.useReducer(O,ne,re)},Ye.useRef=function(O){return j.H.useRef(O)},Ye.useState=function(O){return j.H.useState(O)},Ye.useSyncExternalStore=function(O,ne,re){return j.H.useSyncExternalStore(O,ne,re)},Ye.useTransition=function(){return j.H.useTransition()},Ye.version="19.2.4",Ye}var Vb;function eg(){return Vb||(Vb=1,Qm.exports=Y2()),Qm.exports}var E=eg();const K2=Q_(E);var Wm={exports:{}},Ec={},Xm={exports:{}},Jm={};var Pb;function Q2(){return Pb||(Pb=1,(function(s){function e(R,K){var he=R.length;R.push(K);e:for(;0<he;){var Ne=he-1>>>1,ve=R[Ne];if(0<l(ve,K))R[Ne]=K,R[he]=ve,he=Ne;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var K=R[0],he=R.pop();if(he!==K){R[0]=he;e:for(var Ne=0,ve=R.length,O=ve>>>1;Ne<O;){var ne=2*(Ne+1)-1,re=R[ne],be=ne+1,ye=R[be];if(0>l(re,he))be<ve&&0>l(ye,re)?(R[Ne]=ye,R[be]=he,Ne=be):(R[Ne]=re,R[ne]=he,Ne=ne);else if(be<ve&&0>l(ye,he))R[Ne]=ye,R[be]=he,Ne=be;else break e}}return K}function l(R,K){var he=R.sortIndex-K.sortIndex;return he!==0?he:R.id-K.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],x=[],b=1,w=null,T=3,C=!1,H=!1,U=!1,V=!1,B=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ge(R){for(var K=n(x);K!==null;){if(K.callback===null)i(x);else if(K.startTime<=R)i(x),K.sortIndex=K.expirationTime,e(g,K);else break;K=n(x)}}function pe(R){if(U=!1,ge(R),!H)if(n(g)!==null)H=!0,le||(le=!0,q());else{var K=n(x);K!==null&&D(pe,K.startTime-R)}}var le=!1,j=-1,A=5,I=-1;function P(){return V?!0:!(s.unstable_now()-I<A)}function M(){if(V=!1,le){var R=s.unstable_now();I=R;var K=!0;try{e:{H=!1,U&&(U=!1,G(j),j=-1),C=!0;var he=T;try{t:{for(ge(R),w=n(g);w!==null&&!(w.expirationTime>R&&P());){var Ne=w.callback;if(typeof Ne=="function"){w.callback=null,T=w.priorityLevel;var ve=Ne(w.expirationTime<=R);if(R=s.unstable_now(),typeof ve=="function"){w.callback=ve,ge(R),K=!0;break t}w===n(g)&&i(g),ge(R)}else i(g);w=n(g)}if(w!==null)K=!0;else{var O=n(x);O!==null&&D(pe,O.startTime-R),K=!1}}break e}finally{w=null,T=he,C=!1}K=void 0}}finally{K?q():le=!1}}}var q;if(typeof Q=="function")q=function(){Q(M)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,z=k.port2;k.port1.onmessage=M,q=function(){z.postMessage(null)}}else q=function(){B(M,0)};function D(R,K){j=B(function(){R(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(R){R.callback=null},s.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},s.unstable_getCurrentPriorityLevel=function(){return T},s.unstable_next=function(R){switch(T){case 1:case 2:case 3:var K=3;break;default:K=T}var he=T;T=K;try{return R()}finally{T=he}},s.unstable_requestPaint=function(){V=!0},s.unstable_runWithPriority=function(R,K){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var he=T;T=R;try{return K()}finally{T=he}},s.unstable_scheduleCallback=function(R,K,he){var Ne=s.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ne+he:Ne):he=Ne,R){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=he+ve,R={id:b++,callback:K,priorityLevel:R,startTime:he,expirationTime:ve,sortIndex:-1},he>Ne?(R.sortIndex=he,e(x,R),n(g)===null&&R===n(x)&&(U?(G(j),j=-1):U=!0,D(pe,he-Ne))):(R.sortIndex=ve,e(g,R),H||C||(H=!0,le||(le=!0,q()))),R},s.unstable_shouldYield=P,s.unstable_wrapCallback=function(R){var K=T;return function(){var he=T;T=K;try{return R.apply(this,arguments)}finally{T=he}}}})(Jm)),Jm}var Lb;function W2(){return Lb||(Lb=1,Xm.exports=Q2()),Xm.exports}var Zm={exports:{}},Ln={};var Ub;function X2(){if(Ub)return Ln;Ub=1;var s=eg();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)x+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,x,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:x,implementation:b}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ln.createPortal=function(g,x){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(g,x,null,b)},Ln.flushSync=function(g){var x=h.T,b=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=x,i.p=b,i.d.f()}},Ln.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,i.d.C(g,x))},Ln.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Ln.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var b=x.as,w=p(b,x.crossOrigin),T=typeof x.integrity=="string"?x.integrity:void 0,C=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;b==="style"?i.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:T,fetchPriority:C}):b==="script"&&i.d.X(g,{crossOrigin:w,integrity:T,fetchPriority:C,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Ln.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var b=p(x.as,x.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&i.d.M(g)},Ln.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var b=x.as,w=p(b,x.crossOrigin);i.d.L(g,b,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Ln.preloadModule=function(g,x){if(typeof g=="string")if(x){var b=p(x.as,x.crossOrigin);i.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else i.d.m(g)},Ln.requestFormReset=function(g){i.d.r(g)},Ln.unstable_batchedUpdates=function(g,x){return g(x)},Ln.useFormState=function(g,x,b){return h.H.useFormState(g,x,b)},Ln.useFormStatus=function(){return h.H.useHostTransitionStatus()},Ln.version="19.2.4",Ln}var Bb;function J2(){if(Bb)return Zm.exports;Bb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Zm.exports=X2(),Zm.exports}var zb;function Z2(){if(zb)return Ec;zb=1;var s=W2(),e=eg(),n=J2();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function h(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function p(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function x(t){var a=t.alternate;if(!a){if(a=u(t),a===null)throw Error(i(188));return a!==t?null:t}for(var r=t,c=a;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return g(f),t;if(m===c)return g(f),a;m=m.sibling}throw Error(i(188))}if(r.return!==c.return)r=f,c=m;else{for(var v=!1,N=f.child;N;){if(N===r){v=!0,r=f,c=m;break}if(N===c){v=!0,c=f,r=m;break}N=N.sibling}if(!v){for(N=m.child;N;){if(N===r){v=!0,r=m,c=f;break}if(N===c){v=!0,c=m,r=f;break}N=N.sibling}if(!v)throw Error(i(189))}}if(r.alternate!==c)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:a}function b(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=b(t),a!==null)return a;t=t.sibling}return null}var w=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function z(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case U:return"Fragment";case B:return"Profiler";case V:return"StrictMode";case pe:return"Suspense";case le:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case H:return"Portal";case Q:return t.displayName||"Context";case G:return(t._context.displayName||"Context")+".Consumer";case ge:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return a=t.displayName||null,a!==null?a:z(t.type)||"Memo";case A:a=t._payload,t=t._init;try{return z(t(a))}catch{}}return null}var D=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ne=[],ve=-1;function O(t){return{current:t}}function ne(t){0>ve||(t.current=Ne[ve],Ne[ve]=null,ve--)}function re(t,a){ve++,Ne[ve]=t.current,t.current=a}var be=O(null),ye=O(null),Ie=O(null),oe=O(null);function Ue(t,a){switch(re(Ie,a),re(ye,t),re(be,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?nb(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=nb(a),t=sb(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ne(be),re(be,t)}function Me(){ne(be),ne(ye),ne(Ie)}function $e(t){t.memoizedState!==null&&re(oe,t);var a=be.current,r=sb(a,t.type);a!==r&&(re(ye,t),re(be,r))}function st(t){ye.current===t&&(ne(be),ne(ye)),oe.current===t&&(ne(oe),bc._currentValue=he)}var $t,nn;function Et(t){if($t===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);$t=a&&a[1]||"",nn=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$t+t+nn}var Ot=!1;function sn(t,a){if(!t||Ot)return"";Ot=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var te=ae}Reflect.construct(t,[],de)}else{try{de.call()}catch(ae){te=ae}t.call(de.prototype)}}else{try{throw Error()}catch(ae){te=ae}(de=t())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&te&&typeof ae.stack=="string")return[ae.stack,te.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],N=m[1];if(v&&N){var L=v.split(`
`),Z=N.split(`
`);for(f=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(c===L.length||f===Z.length)for(c=L.length-1,f=Z.length-1;1<=c&&0<=f&&L[c]!==Z[f];)f--;for(;1<=c&&0<=f;c--,f--)if(L[c]!==Z[f]){if(c!==1||f!==1)do if(c--,f--,0>f||L[c]!==Z[f]){var ie=`
`+L[c].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=c&&0<=f);break}}}finally{Ot=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Et(r):""}function as(t,a){switch(t.tag){case 26:case 27:case 5:return Et(t.type);case 16:return Et("Lazy");case 13:return t.child!==a&&a!==null?Et("Suspense Fallback"):Et("Suspense");case 19:return Et("SuspenseList");case 0:case 15:return sn(t.type,!1);case 11:return sn(t.type.render,!1);case 1:return sn(t.type,!0);case 31:return Et("Activity");default:return""}}function Vn(t){try{var a="",r=null;do a+=as(t,r),r=t,t=t.return;while(t);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var At=Object.prototype.hasOwnProperty,Te=s.unstable_scheduleCallback,Ve=s.unstable_cancelCallback,Ze=s.unstable_shouldYield,Rt=s.unstable_requestPaint,ft=s.unstable_now,rt=s.unstable_getCurrentPriorityLevel,Gt=s.unstable_ImmediatePriority,mt=s.unstable_UserBlockingPriority,is=s.unstable_NormalPriority,Ns=s.unstable_LowPriority,$=s.unstable_IdlePriority,ue=s.log,Ee=s.unstable_setDisableYieldValue,ee=null,xe=null;function je(t){if(typeof ue=="function"&&Ee(t),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(ee,t)}catch{}}var ke=Math.clz32?Math.clz32:Oe,Be=Math.log,Re=Math.LN2;function Oe(t){return t>>>=0,t===0?32:31-(Be(t)/Re|0)|0}var gt=256,Lt=262144,bt=4194304;function an(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Pn(t,a,r){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var N=c&134217727;return N!==0?(c=N&~m,c!==0?f=an(c):(v&=N,v!==0?f=an(v):r||(r=N&~t,r!==0&&(f=an(r))))):(N=c&~m,N!==0?f=an(N):v!==0?f=an(v):r||(r=c&~t,r!==0&&(f=an(r)))),f===0?0:a!==0&&a!==f&&(a&m)===0&&(m=f&-f,r=a&-a,m>=r||m===32&&(r&4194048)!==0)?a:f}function Fn(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function mr(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rn(){var t=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),t}function Hn(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function wn(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function cl(t,a,r,c,f,m){var v=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var N=t.entanglements,L=t.expirationTimes,Z=t.hiddenUpdates;for(r=v&~r;0<r;){var ie=31-ke(r),de=1<<ie;N[ie]=0,L[ie]=-1;var te=Z[ie];if(te!==null)for(Z[ie]=null,ie=0;ie<te.length;ie++){var ae=te[ie];ae!==null&&(ae.lane&=-536870913)}r&=~de}c!==0&&ka(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~a))}function ka(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var c=31-ke(a);t.entangledLanes|=a,t.entanglements[c]=t.entanglements[c]|1073741824|r&261930}function pr(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var c=31-ke(r),f=1<<c;f&a|t[c]&a&&(t[c]|=a),r&=~f}}function oi(t,a){var r=a&-a;return r=(r&42)!==0?1:ci(r),(r&(t.suspendedLanes|a))!==0?0:r}function ci(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Da(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function yu(){var t=K.p;return t!==0?t:(t=window.event,t===void 0?32:Sb(t.type))}function Ls(t,a){var r=K.p;try{return K.p=t,a()}finally{K.p=r}}var Us=Math.random().toString(36).slice(2),ln="__reactFiber$"+Us,Nn="__reactProps$"+Us,ta="__reactContainer$"+Us,ul="__reactEvents$"+Us,Zh="__reactListeners$"+Us,bu="__reactHandles$"+Us,vu="__reactResources$"+Us,na="__reactMarker$"+Us;function dl(t){delete t[ln],delete t[Nn],delete t[ul],delete t[Zh],delete t[bu]}function sa(t){var a=t[ln];if(a)return a;for(var r=t.parentNode;r;){if(a=r[ta]||r[ln]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=ub(t);t!==null;){if(r=t[ln])return r;t=ub(t)}return a}t=r,r=t.parentNode}return null}function Es(t){if(t=t[ln]||t[ta]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function rs(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function aa(t){var a=t[vu];return a||(a=t[vu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function on(t){t[na]=!0}var So=new Set,jo={};function ia(t,a){ra(t,a),ra(t+"Capture",a)}function ra(t,a){for(jo[t]=a,t=0;t<a.length;t++)So.add(a[t])}var Ao=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ro={},Co={};function _u(t){return At.call(Co,t)?!0:At.call(Ro,t)?!1:Ao.test(t)?Co[t]=!0:(Ro[t]=!0,!1)}function hl(t,a,r){if(_u(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function ls(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function cn(t,a,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+c)}}function En(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ui(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Io(t,a,r){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(v){r=""+v,m.call(this,v)}}),Object.defineProperty(t,a,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Tt(t){if(!t._valueTracker){var a=ui(t)?"checked":"value";t._valueTracker=Io(t,a,""+t[a])}}function gr(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),c="";return t&&(c=ui(t)?t.checked?"true":"false":t.value),t=c,t!==r?(a.setValue(t),!0):!1}function la(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var xr=/[\n"\\]/g;function Kn(t){return t.replace(xr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function fl(t,a,r,c,f,m,v,N){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),a!=null?v==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+En(a)):t.value!==""+En(a)&&(t.value=""+En(a)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),a!=null?ko(t,v,En(a)):r!=null?ko(t,v,En(r)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+En(N):t.removeAttribute("name")}function wu(t,a,r,c,f,m,v,N){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),a!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||a!=null)){Tt(t);return}r=r!=null?""+En(r):"",a=a!=null?""+En(a):r,N||a===t.value||(t.value=a),t.defaultValue=a}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=N?t.checked:!!c,t.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Tt(t)}function ko(t,a,r){a==="number"&&la(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function di(t,a,r,c){if(t=t.options,a){a={};for(var f=0;f<r.length;f++)a["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=a.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&c&&(t[r].defaultSelected=!0)}else{for(r=""+En(r),a=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function Nu(t,a,r){if(a!=null&&(a=""+En(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+En(r):""}function hi(t,a,r,c){if(a==null){if(c!=null){if(r!=null)throw Error(i(92));if(D(c)){if(1<c.length)throw Error(i(93));c=c[0]}r=c}r==null&&(r=""),a=r}r=En(a),t.defaultValue=r,c=t.textContent,c===r&&c!==""&&c!==null&&(t.value=c),Tt(t)}function Qn(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var Eu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Do(t,a,r){var c=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":c?t.setProperty(a,r):typeof r!="number"||r===0||Eu.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function Mo(t,a,r){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in a)c=a[f],a.hasOwnProperty(f)&&r[f]!==c&&Do(t,f,c)}else for(var m in a)a.hasOwnProperty(m)&&Do(t,m,a[m])}function ml(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pl(t){return fi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Bs(){}var Oo=null;function Ts(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mi=null,oa=null;function yr(t){var a=Es(t);if(a&&(t=a.stateNode)){var r=t[Nn]||null;e:switch(t=a.stateNode,a.type){case"input":if(fl(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Kn(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var c=r[a];if(c!==t&&c.form===t.form){var f=c[Nn]||null;if(!f)throw Error(i(90));fl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<r.length;a++)c=r[a],c.form===t.form&&gr(c)}break e;case"textarea":Nu(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&di(t,!!r.multiple,a,!1)}}}var gl=!1;function pi(t,a,r){if(gl)return t(a,r);gl=!0;try{var c=t(a);return c}finally{if(gl=!1,(mi!==null||oa!==null)&&(yd(),mi&&(a=mi,t=oa,oa=mi=null,yr(a),t)))for(a=0;a<t.length;a++)yr(t[a])}}function zs(t,a){var r=t.stateNode;if(r===null)return null;var c=r[Nn]||null;if(c===null)return null;r=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,a,typeof r));return r}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),br=!1;if(Ss)try{var Ct={};Object.defineProperty(Ct,"passive",{get:function(){br=!0}}),window.addEventListener("test",Ct,Ct),window.removeEventListener("test",Ct,Ct)}catch{br=!1}var ca=null,Vo=null,vr=null;function Po(){if(vr)return vr;var t,a=Vo,r=a.length,c,f="value"in ca?ca.value:ca.textContent,m=f.length;for(t=0;t<r&&a[t]===f[t];t++);var v=r-t;for(c=1;c<=v&&a[r-c]===f[m-c];c++);return vr=f.slice(t,1<c?1-c:void 0)}function _r(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Ma(){return!0}function qs(){return!1}function An(t){function a(r,c,f,m,v){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(r=t[N],this[N]=r?r(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ma:qs,this.isPropagationStopped=qs,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),a}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=An(Oa),gi=w({},Oa,{view:0,detail:0}),Lo=An(gi),xi,xl,da,yl=w({},gi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(xi=t.screenX-da.screenX,xl=t.screenY-da.screenY):xl=xi=0,da=t),xi)},movementY:function(t){return"movementY"in t?t.movementY:xl}}),Uo=An(yl),wr=w({},yl,{dataTransfer:0}),Su=An(wr),ju=w({},gi,{relatedTarget:0}),Nr=An(ju),Bo=w({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),Au=An(Bo),bl=w({},Oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ru=An(bl),Cu=w({},Oa,{data:0}),ha=An(Cu),Iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ku={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mu(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Du[t])?!!a[t]:!1}function yi(){return Mu}var $n=w({},gi,{key:function(t){if(t.key){var a=Iu[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=_r(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ku[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yi,charCode:function(t){return t.type==="keypress"?_r(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_r(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ou=An($n),Vu=w({},yl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Va=An(Vu),d=w({},gi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yi}),y=An(d),_=w({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=An(_),W=w({},yl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),se=An(W),_e=w({},Oa,{newState:0,oldState:0}),We=An(_e),Jt=[9,13,27,32],vt=Ss&&"CompositionEvent"in window,zt=null;Ss&&"documentMode"in document&&(zt=document.documentMode);var js=Ss&&"TextEvent"in window&&!zt,fa=Ss&&(!vt||zt&&8<zt&&11>=zt),Fs=" ",Hs=!1;function Er(t,a){switch(t){case"keyup":return Jt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vl(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _l=!1;function pE(t,a){switch(t){case"compositionend":return vl(a);case"keypress":return a.which!==32?null:(Hs=!0,Fs);case"textInput":return t=a.data,t===Fs&&Hs?null:t;default:return null}}function gE(t,a){if(_l)return t==="compositionend"||!vt&&Er(t,a)?(t=Po(),vr=Vo=ca=null,_l=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return fa&&a.locale!=="ko"?null:a.data;default:return null}}var xE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f0(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!xE[t.type]:a==="textarea"}function m0(t,a,r,c){mi?oa?oa.push(c):oa=[c]:mi=c,a=Td(a,"onChange"),0<a.length&&(r=new ua("onChange","change",null,r,c),t.push({event:r,listeners:a}))}var zo=null,qo=null;function yE(t){Wy(t,0)}function Pu(t){var a=rs(t);if(gr(a))return t}function p0(t,a){if(t==="change")return a}var g0=!1;if(Ss){var ef;if(Ss){var tf="oninput"in document;if(!tf){var x0=document.createElement("div");x0.setAttribute("oninput","return;"),tf=typeof x0.oninput=="function"}ef=tf}else ef=!1;g0=ef&&(!document.documentMode||9<document.documentMode)}function y0(){zo&&(zo.detachEvent("onpropertychange",b0),qo=zo=null)}function b0(t){if(t.propertyName==="value"&&Pu(qo)){var a=[];m0(a,qo,t,Ts(t)),pi(yE,a)}}function bE(t,a,r){t==="focusin"?(y0(),zo=a,qo=r,zo.attachEvent("onpropertychange",b0)):t==="focusout"&&y0()}function vE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pu(qo)}function _E(t,a){if(t==="click")return Pu(a)}function wE(t,a){if(t==="input"||t==="change")return Pu(a)}function NE(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var os=typeof Object.is=="function"?Object.is:NE;function Fo(t,a){if(os(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),c=Object.keys(a);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!At.call(a,f)||!os(t[f],a[f]))return!1}return!0}function v0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _0(t,a){var r=v0(t);t=0;for(var c;r;){if(r.nodeType===3){if(c=t+r.textContent.length,t<=a&&c>=a)return{node:r,offset:a-t};t=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=v0(r)}}function w0(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?w0(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function N0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=la(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=la(t.document)}return a}function nf(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var EE=Ss&&"documentMode"in document&&11>=document.documentMode,wl=null,sf=null,Ho=null,af=!1;function E0(t,a,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;af||wl==null||wl!==la(c)||(c=wl,"selectionStart"in c&&nf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ho&&Fo(Ho,c)||(Ho=c,c=Td(sf,"onSelect"),0<c.length&&(a=new ua("onSelect","select",null,a,r),t.push({event:a,listeners:c}),a.target=wl)))}function Tr(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var Nl={animationend:Tr("Animation","AnimationEnd"),animationiteration:Tr("Animation","AnimationIteration"),animationstart:Tr("Animation","AnimationStart"),transitionrun:Tr("Transition","TransitionRun"),transitionstart:Tr("Transition","TransitionStart"),transitioncancel:Tr("Transition","TransitionCancel"),transitionend:Tr("Transition","TransitionEnd")},rf={},T0={};Ss&&(T0=document.createElement("div").style,"AnimationEvent"in window||(delete Nl.animationend.animation,delete Nl.animationiteration.animation,delete Nl.animationstart.animation),"TransitionEvent"in window||delete Nl.transitionend.transition);function Sr(t){if(rf[t])return rf[t];if(!Nl[t])return t;var a=Nl[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in T0)return rf[t]=a[r];return t}var S0=Sr("animationend"),j0=Sr("animationiteration"),A0=Sr("animationstart"),TE=Sr("transitionrun"),SE=Sr("transitionstart"),jE=Sr("transitioncancel"),R0=Sr("transitionend"),C0=new Map,lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lf.push("scrollEnd");function $s(t,a){C0.set(t,a),ia(a,[t])}var Lu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},As=[],El=0,of=0;function Uu(){for(var t=El,a=of=El=0;a<t;){var r=As[a];As[a++]=null;var c=As[a];As[a++]=null;var f=As[a];As[a++]=null;var m=As[a];if(As[a++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&I0(r,f,m)}}function Bu(t,a,r,c){As[El++]=t,As[El++]=a,As[El++]=r,As[El++]=c,of|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function cf(t,a,r,c){return Bu(t,a,r,c),zu(t)}function jr(t,a){return Bu(t,null,null,a),zu(t)}function I0(t,a,r){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r);for(var f=!1,m=t.return;m!==null;)m.childLanes|=r,c=m.alternate,c!==null&&(c.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&a!==null&&(f=31-ke(r),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[a]:c.push(a),a.lane=r|536870912),m):null}function zu(t){if(50<hc)throw hc=0,ym=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Tl={};function AE(t,a,r,c){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(t,a,r,c){return new AE(t,a,r,c)}function uf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Pa(t,a){var r=t.alternate;return r===null?(r=cs(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function k0(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function qu(t,a,r,c,f,m){var v=0;if(c=t,typeof t=="function")uf(t)&&(v=1);else if(typeof t=="string")v=D2(t,r,be.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=cs(31,r,a,f),t.elementType=I,t.lanes=m,t;case U:return Ar(r.children,f,m,a);case V:v=8,f|=24;break;case B:return t=cs(12,r,a,f|2),t.elementType=B,t.lanes=m,t;case pe:return t=cs(13,r,a,f),t.elementType=pe,t.lanes=m,t;case le:return t=cs(19,r,a,f),t.elementType=le,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:v=10;break e;case G:v=9;break e;case ge:v=11;break e;case j:v=14;break e;case A:v=16,c=null;break e}v=29,r=Error(i(130,t===null?"null":typeof t,"")),c=null}return a=cs(v,r,a,f),a.elementType=t,a.type=c,a.lanes=m,a}function Ar(t,a,r,c){return t=cs(7,t,c,a),t.lanes=r,t}function df(t,a,r){return t=cs(6,t,null,a),t.lanes=r,t}function D0(t){var a=cs(18,null,null,0);return a.stateNode=t,a}function hf(t,a,r){return a=cs(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var M0=new WeakMap;function Rs(t,a){if(typeof t=="object"&&t!==null){var r=M0.get(t);return r!==void 0?r:(a={value:t,source:a,stack:Vn(a)},M0.set(t,a),a)}return{value:t,source:a,stack:Vn(a)}}var Sl=[],jl=0,Fu=null,$o=0,Cs=[],Is=0,bi=null,ma=1,pa="";function La(t,a){Sl[jl++]=$o,Sl[jl++]=Fu,Fu=t,$o=a}function O0(t,a,r){Cs[Is++]=ma,Cs[Is++]=pa,Cs[Is++]=bi,bi=t;var c=ma;t=pa;var f=32-ke(c)-1;c&=~(1<<f),r+=1;var m=32-ke(a)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,ma=1<<32-ke(a)+f|r<<f|c,pa=m+t}else ma=1<<m|r<<f|c,pa=t}function ff(t){t.return!==null&&(La(t,1),O0(t,1,0))}function mf(t){for(;t===Fu;)Fu=Sl[--jl],Sl[jl]=null,$o=Sl[--jl],Sl[jl]=null;for(;t===bi;)bi=Cs[--Is],Cs[Is]=null,pa=Cs[--Is],Cs[Is]=null,ma=Cs[--Is],Cs[Is]=null}function V0(t,a){Cs[Is++]=ma,Cs[Is++]=pa,Cs[Is++]=bi,ma=a.id,pa=a.overflow,bi=t}var Rn=null,Ut=null,ht=!1,vi=null,ks=!1,pf=Error(i(519));function _i(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Go(Rs(a,t)),pf}function P0(t){var a=t.stateNode,r=t.type,c=t.memoizedProps;switch(a[ln]=t,a[Nn]=c,r){case"dialog":it("cancel",a),it("close",a);break;case"iframe":case"object":case"embed":it("load",a);break;case"video":case"audio":for(r=0;r<mc.length;r++)it(mc[r],a);break;case"source":it("error",a);break;case"img":case"image":case"link":it("error",a),it("load",a);break;case"details":it("toggle",a);break;case"input":it("invalid",a),wu(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":it("invalid",a);break;case"textarea":it("invalid",a),hi(a,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||c.suppressHydrationWarning===!0||eb(a.textContent,r)?(c.popover!=null&&(it("beforetoggle",a),it("toggle",a)),c.onScroll!=null&&it("scroll",a),c.onScrollEnd!=null&&it("scrollend",a),c.onClick!=null&&(a.onclick=Bs),a=!0):a=!1,a||_i(t,!0)}function L0(t){for(Rn=t.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:ks=!1;return;case 27:case 3:ks=!0;return;default:Rn=Rn.return}}function Al(t){if(t!==Rn)return!1;if(!ht)return L0(t),ht=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Dm(t.type,t.memoizedProps)),r=!r),r&&Ut&&_i(t),L0(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ut=cb(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ut=cb(t)}else a===27?(a=Ut,Oi(t.type)?(t=Lm,Lm=null,Ut=t):Ut=a):Ut=Rn?Ms(t.stateNode.nextSibling):null;return!0}function Rr(){Ut=Rn=null,ht=!1}function gf(){var t=vi;return t!==null&&(Zn===null?Zn=t:Zn.push.apply(Zn,t),vi=null),t}function Go(t){vi===null?vi=[t]:vi.push(t)}var xf=O(null),Cr=null,Ua=null;function wi(t,a,r){re(xf,a._currentValue),a._currentValue=r}function Ba(t){t._currentValue=xf.current,ne(xf)}function yf(t,a,r){for(;t!==null;){var c=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),t===r)break;t=t.return}}function bf(t,a,r,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var N=m;m=f;for(var L=0;L<a.length;L++)if(N.context===a[L]){m.lanes|=r,N=m.alternate,N!==null&&(N.lanes|=r),yf(m.return,r,t),c||(v=null);break e}m=N.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(i(341));v.lanes|=r,m=v.alternate,m!==null&&(m.lanes|=r),yf(v,r,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Rl(t,a,r,c){t=null;for(var f=a,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var N=f.type;os(f.pendingProps.value,v.value)||(t!==null?t.push(N):t=[N])}}else if(f===oe.current){if(v=f.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(bc):t=[bc])}f=f.return}t!==null&&bf(a,t,r,c),a.flags|=262144}function Hu(t){for(t=t.firstContext;t!==null;){if(!os(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ir(t){Cr=t,Ua=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Cn(t){return U0(Cr,t)}function $u(t,a){return Cr===null&&Ir(t),U0(t,a)}function U0(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Ua===null){if(t===null)throw Error(i(308));Ua=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Ua=Ua.next=a;return r}var RE=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,c){t.push(c)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},CE=s.unstable_scheduleCallback,IE=s.unstable_NormalPriority,un={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vf(){return{controller:new RE,data:new Map,refCount:0}}function Yo(t){t.refCount--,t.refCount===0&&CE(IE,function(){t.controller.abort()})}var Ko=null,_f=0,Cl=0,Il=null;function kE(t,a){if(Ko===null){var r=Ko=[];_f=0,Cl=Em(),Il={status:"pending",value:void 0,then:function(c){r.push(c)}}}return _f++,a.then(B0,B0),a}function B0(){if(--_f===0&&Ko!==null){Il!==null&&(Il.status="fulfilled");var t=Ko;Ko=null,Cl=0,Il=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function DE(t,a){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){c.status="fulfilled",c.value=a;for(var f=0;f<r.length;f++)(0,r[f])(a)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var z0=R.S;R.S=function(t,a){Ey=ft(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&kE(t,a),z0!==null&&z0(t,a)};var kr=O(null);function wf(){var t=kr.current;return t!==null?t:Mt.pooledCache}function Gu(t,a){a===null?re(kr,kr.current):re(kr,a.pool)}function q0(){var t=wf();return t===null?null:{parent:un._currentValue,pool:t}}var kl=Error(i(460)),Nf=Error(i(474)),Yu=Error(i(542)),Ku={then:function(){}};function F0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function H0(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(Bs,Bs),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,G0(t),t;default:if(typeof a.status=="string")a.then(Bs,Bs);else{if(t=Mt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(c){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=c}},function(c){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,G0(t),t}throw Mr=a,kl}}function Dr(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Mr=r,kl):r}}var Mr=null;function $0(){if(Mr===null)throw Error(i(459));var t=Mr;return Mr=null,t}function G0(t){if(t===kl||t===Yu)throw Error(i(483))}var Dl=null,Qo=0;function Qu(t){var a=Qo;return Qo+=1,Dl===null&&(Dl=[]),H0(Dl,t,a)}function Wo(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Wu(t,a){throw a.$$typeof===T?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Y0(t){function a(Y,F){if(t){var J=Y.deletions;J===null?(Y.deletions=[F],Y.flags|=16):J.push(F)}}function r(Y,F){if(!t)return null;for(;F!==null;)a(Y,F),F=F.sibling;return null}function c(Y){for(var F=new Map;Y!==null;)Y.key!==null?F.set(Y.key,Y):F.set(Y.index,Y),Y=Y.sibling;return F}function f(Y,F){return Y=Pa(Y,F),Y.index=0,Y.sibling=null,Y}function m(Y,F,J){return Y.index=J,t?(J=Y.alternate,J!==null?(J=J.index,J<F?(Y.flags|=67108866,F):J):(Y.flags|=67108866,F)):(Y.flags|=1048576,F)}function v(Y){return t&&Y.alternate===null&&(Y.flags|=67108866),Y}function N(Y,F,J,ce){return F===null||F.tag!==6?(F=df(J,Y.mode,ce),F.return=Y,F):(F=f(F,J),F.return=Y,F)}function L(Y,F,J,ce){var Pe=J.type;return Pe===U?ie(Y,F,J.props.children,ce,J.key):F!==null&&(F.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===A&&Dr(Pe)===F.type)?(F=f(F,J.props),Wo(F,J),F.return=Y,F):(F=qu(J.type,J.key,J.props,null,Y.mode,ce),Wo(F,J),F.return=Y,F)}function Z(Y,F,J,ce){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=hf(J,Y.mode,ce),F.return=Y,F):(F=f(F,J.children||[]),F.return=Y,F)}function ie(Y,F,J,ce,Pe){return F===null||F.tag!==7?(F=Ar(J,Y.mode,ce,Pe),F.return=Y,F):(F=f(F,J),F.return=Y,F)}function de(Y,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=df(""+F,Y.mode,J),F.return=Y,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case C:return J=qu(F.type,F.key,F.props,null,Y.mode,J),Wo(J,F),J.return=Y,J;case H:return F=hf(F,Y.mode,J),F.return=Y,F;case A:return F=Dr(F),de(Y,F,J)}if(D(F)||q(F))return F=Ar(F,Y.mode,J,null),F.return=Y,F;if(typeof F.then=="function")return de(Y,Qu(F),J);if(F.$$typeof===Q)return de(Y,$u(Y,F),J);Wu(Y,F)}return null}function te(Y,F,J,ce){var Pe=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Pe!==null?null:N(Y,F,""+J,ce);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case C:return J.key===Pe?L(Y,F,J,ce):null;case H:return J.key===Pe?Z(Y,F,J,ce):null;case A:return J=Dr(J),te(Y,F,J,ce)}if(D(J)||q(J))return Pe!==null?null:ie(Y,F,J,ce,null);if(typeof J.then=="function")return te(Y,F,Qu(J),ce);if(J.$$typeof===Q)return te(Y,F,$u(Y,J),ce);Wu(Y,J)}return null}function ae(Y,F,J,ce,Pe){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Y=Y.get(J)||null,N(F,Y,""+ce,Pe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case C:return Y=Y.get(ce.key===null?J:ce.key)||null,L(F,Y,ce,Pe);case H:return Y=Y.get(ce.key===null?J:ce.key)||null,Z(F,Y,ce,Pe);case A:return ce=Dr(ce),ae(Y,F,J,ce,Pe)}if(D(ce)||q(ce))return Y=Y.get(J)||null,ie(F,Y,ce,Pe,null);if(typeof ce.then=="function")return ae(Y,F,J,Qu(ce),Pe);if(ce.$$typeof===Q)return ae(Y,F,J,$u(F,ce),Pe);Wu(F,ce)}return null}function Ce(Y,F,J,ce){for(var Pe=null,xt=null,De=F,et=F=0,ot=null;De!==null&&et<J.length;et++){De.index>et?(ot=De,De=null):ot=De.sibling;var yt=te(Y,De,J[et],ce);if(yt===null){De===null&&(De=ot);break}t&&De&&yt.alternate===null&&a(Y,De),F=m(yt,F,et),xt===null?Pe=yt:xt.sibling=yt,xt=yt,De=ot}if(et===J.length)return r(Y,De),ht&&La(Y,et),Pe;if(De===null){for(;et<J.length;et++)De=de(Y,J[et],ce),De!==null&&(F=m(De,F,et),xt===null?Pe=De:xt.sibling=De,xt=De);return ht&&La(Y,et),Pe}for(De=c(De);et<J.length;et++)ot=ae(De,Y,et,J[et],ce),ot!==null&&(t&&ot.alternate!==null&&De.delete(ot.key===null?et:ot.key),F=m(ot,F,et),xt===null?Pe=ot:xt.sibling=ot,xt=ot);return t&&De.forEach(function(Bi){return a(Y,Bi)}),ht&&La(Y,et),Pe}function qe(Y,F,J,ce){if(J==null)throw Error(i(151));for(var Pe=null,xt=null,De=F,et=F=0,ot=null,yt=J.next();De!==null&&!yt.done;et++,yt=J.next()){De.index>et?(ot=De,De=null):ot=De.sibling;var Bi=te(Y,De,yt.value,ce);if(Bi===null){De===null&&(De=ot);break}t&&De&&Bi.alternate===null&&a(Y,De),F=m(Bi,F,et),xt===null?Pe=Bi:xt.sibling=Bi,xt=Bi,De=ot}if(yt.done)return r(Y,De),ht&&La(Y,et),Pe;if(De===null){for(;!yt.done;et++,yt=J.next())yt=de(Y,yt.value,ce),yt!==null&&(F=m(yt,F,et),xt===null?Pe=yt:xt.sibling=yt,xt=yt);return ht&&La(Y,et),Pe}for(De=c(De);!yt.done;et++,yt=J.next())yt=ae(De,Y,et,yt.value,ce),yt!==null&&(t&&yt.alternate!==null&&De.delete(yt.key===null?et:yt.key),F=m(yt,F,et),xt===null?Pe=yt:xt.sibling=yt,xt=yt);return t&&De.forEach(function(H2){return a(Y,H2)}),ht&&La(Y,et),Pe}function Dt(Y,F,J,ce){if(typeof J=="object"&&J!==null&&J.type===U&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case C:e:{for(var Pe=J.key;F!==null;){if(F.key===Pe){if(Pe=J.type,Pe===U){if(F.tag===7){r(Y,F.sibling),ce=f(F,J.props.children),ce.return=Y,Y=ce;break e}}else if(F.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===A&&Dr(Pe)===F.type){r(Y,F.sibling),ce=f(F,J.props),Wo(ce,J),ce.return=Y,Y=ce;break e}r(Y,F);break}else a(Y,F);F=F.sibling}J.type===U?(ce=Ar(J.props.children,Y.mode,ce,J.key),ce.return=Y,Y=ce):(ce=qu(J.type,J.key,J.props,null,Y.mode,ce),Wo(ce,J),ce.return=Y,Y=ce)}return v(Y);case H:e:{for(Pe=J.key;F!==null;){if(F.key===Pe)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){r(Y,F.sibling),ce=f(F,J.children||[]),ce.return=Y,Y=ce;break e}else{r(Y,F);break}else a(Y,F);F=F.sibling}ce=hf(J,Y.mode,ce),ce.return=Y,Y=ce}return v(Y);case A:return J=Dr(J),Dt(Y,F,J,ce)}if(D(J))return Ce(Y,F,J,ce);if(q(J)){if(Pe=q(J),typeof Pe!="function")throw Error(i(150));return J=Pe.call(J),qe(Y,F,J,ce)}if(typeof J.then=="function")return Dt(Y,F,Qu(J),ce);if(J.$$typeof===Q)return Dt(Y,F,$u(Y,J),ce);Wu(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(r(Y,F.sibling),ce=f(F,J),ce.return=Y,Y=ce):(r(Y,F),ce=df(J,Y.mode,ce),ce.return=Y,Y=ce),v(Y)):r(Y,F)}return function(Y,F,J,ce){try{Qo=0;var Pe=Dt(Y,F,J,ce);return Dl=null,Pe}catch(De){if(De===kl||De===Yu)throw De;var xt=cs(29,De,null,Y.mode);return xt.lanes=ce,xt.return=Y,xt}}}var Or=Y0(!0),K0=Y0(!1),Ni=!1;function Ef(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tf(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ei(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ti(t,a,r){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(_t&2)!==0){var f=c.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a,a=zu(t),I0(t,null,r),a}return Bu(t,c,a,r),zu(t)}function Xo(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var c=a.lanes;c&=t.pendingLanes,r|=c,a.lanes=r,pr(t,r)}}function Sf(t,a){var r=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,r=r.next}while(r!==null);m===null?f=m=a:m=m.next=a}else f=m=a;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var jf=!1;function Jo(){if(jf){var t=Il;if(t!==null)throw t}}function Zo(t,a,r,c){jf=!1;var f=t.updateQueue;Ni=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var L=N,Z=L.next;L.next=null,v===null?m=Z:v.next=Z,v=L;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,N=ie.lastBaseUpdate,N!==v&&(N===null?ie.firstBaseUpdate=Z:N.next=Z,ie.lastBaseUpdate=L))}if(m!==null){var de=f.baseState;v=0,ie=Z=L=null,N=m;do{var te=N.lane&-536870913,ae=te!==N.lane;if(ae?(lt&te)===te:(c&te)===te){te!==0&&te===Cl&&(jf=!0),ie!==null&&(ie=ie.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ce=t,qe=N;te=a;var Dt=r;switch(qe.tag){case 1:if(Ce=qe.payload,typeof Ce=="function"){de=Ce.call(Dt,de,te);break e}de=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=qe.payload,te=typeof Ce=="function"?Ce.call(Dt,de,te):Ce,te==null)break e;de=w({},de,te);break e;case 2:Ni=!0}}te=N.callback,te!==null&&(t.flags|=64,ae&&(t.flags|=8192),ae=f.callbacks,ae===null?f.callbacks=[te]:ae.push(te))}else ae={lane:te,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ie===null?(Z=ie=ae,L=de):ie=ie.next=ae,v|=te;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;ae=N,N=ae.next,ae.next=null,f.lastBaseUpdate=ae,f.shared.pending=null}}while(!0);ie===null&&(L=de),f.baseState=L,f.firstBaseUpdate=Z,f.lastBaseUpdate=ie,m===null&&(f.shared.lanes=0),Ci|=v,t.lanes=v,t.memoizedState=de}}function Q0(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function W0(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Q0(r[t],a)}var Ml=O(null),Xu=O(0);function X0(t,a){t=Qa,re(Xu,t),re(Ml,a),Qa=t|a.baseLanes}function Af(){re(Xu,Qa),re(Ml,Ml.current)}function Rf(){Qa=Xu.current,ne(Ml),ne(Xu)}var us=O(null),Ds=null;function Si(t){var a=t.alternate;re(Zt,Zt.current&1),re(us,t),Ds===null&&(a===null||Ml.current!==null||a.memoizedState!==null)&&(Ds=t)}function Cf(t){re(Zt,Zt.current),re(us,t),Ds===null&&(Ds=t)}function J0(t){t.tag===22?(re(Zt,Zt.current),re(us,t),Ds===null&&(Ds=t)):ji()}function ji(){re(Zt,Zt.current),re(us,us.current)}function ds(t){ne(us),Ds===t&&(Ds=null),ne(Zt)}var Zt=O(0);function Ju(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Vm(r)||Pm(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var za=0,Xe=null,It=null,dn=null,Zu=!1,Ol=!1,Vr=!1,ed=0,ec=0,Vl=null,ME=0;function Kt(){throw Error(i(321))}function If(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!os(t[r],a[r]))return!1;return!0}function kf(t,a,r,c,f,m){return za=m,Xe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,R.H=t===null||t.memoizedState===null?Ox:Yf,Vr=!1,m=r(c,f),Vr=!1,Ol&&(m=ex(a,r,c,f)),Z0(t),m}function Z0(t){R.H=sc;var a=It!==null&&It.next!==null;if(za=0,dn=It=Xe=null,Zu=!1,ec=0,Vl=null,a)throw Error(i(300));t===null||hn||(t=t.dependencies,t!==null&&Hu(t)&&(hn=!0))}function ex(t,a,r,c){Xe=t;var f=0;do{if(Ol&&(Vl=null),ec=0,Ol=!1,25<=f)throw Error(i(301));if(f+=1,dn=It=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}R.H=Vx,m=a(r,c)}while(Ol);return m}function OE(){var t=R.H,a=t.useState()[0];return a=typeof a.then=="function"?tc(a):a,t=t.useState()[0],(It!==null?It.memoizedState:null)!==t&&(Xe.flags|=1024),a}function Df(){var t=ed!==0;return ed=0,t}function Mf(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function Of(t){if(Zu){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Zu=!1}za=0,dn=It=Xe=null,Ol=!1,ec=ed=0,Vl=null}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Xe.memoizedState=dn=t:dn=dn.next=t,dn}function en(){if(It===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=It.next;var a=dn===null?Xe.memoizedState:dn.next;if(a!==null)dn=a,It=t;else{if(t===null)throw Xe.alternate===null?Error(i(467)):Error(i(310));It=t,t={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},dn===null?Xe.memoizedState=dn=t:dn=dn.next=t}return dn}function td(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tc(t){var a=ec;return ec+=1,Vl===null&&(Vl=[]),t=H0(Vl,t,a),a=Xe,(dn===null?a.memoizedState:dn.next)===null&&(a=a.alternate,R.H=a===null||a.memoizedState===null?Ox:Yf),t}function nd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return tc(t);if(t.$$typeof===Q)return Cn(t)}throw Error(i(438,String(t)))}function Vf(t){var a=null,r=Xe.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var c=Xe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=td(),Xe.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),c=0;c<t;c++)r[c]=P;return a.index++,r}function qa(t,a){return typeof a=="function"?a(t):a}function sd(t){var a=en();return Pf(a,It,t)}function Pf(t,a,r){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}a.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{a=f.next;var N=v=null,L=null,Z=a,ie=!1;do{var de=Z.lane&-536870913;if(de!==Z.lane?(lt&de)===de:(za&de)===de){var te=Z.revertLane;if(te===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),de===Cl&&(ie=!0);else if((za&te)===te){Z=Z.next,te===Cl&&(ie=!0);continue}else de={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(N=L=de,v=m):L=L.next=de,Xe.lanes|=te,Ci|=te;de=Z.action,Vr&&r(m,de),m=Z.hasEagerState?Z.eagerState:r(m,de)}else te={lane:de,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(N=L=te,v=m):L=L.next=te,Xe.lanes|=de,Ci|=de;Z=Z.next}while(Z!==null&&Z!==a);if(L===null?v=m:L.next=N,!os(m,t.memoizedState)&&(hn=!0,ie&&(r=Il,r!==null)))throw r;t.memoizedState=m,t.baseState=v,t.baseQueue=L,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Lf(t){var a=en(),r=a.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var c=r.dispatch,f=r.pending,m=a.memoizedState;if(f!==null){r.pending=null;var v=f=f.next;do m=t(m,v.action),v=v.next;while(v!==f);os(m,a.memoizedState)||(hn=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),r.lastRenderedState=m}return[m,c]}function tx(t,a,r){var c=Xe,f=en(),m=ht;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=a();var v=!os((It||f).memoizedState,r);if(v&&(f.memoizedState=r,hn=!0),f=f.queue,zf(ax.bind(null,c,f,t),[t]),f.getSnapshot!==a||v||dn!==null&&dn.memoizedState.tag&1){if(c.flags|=2048,Pl(9,{destroy:void 0},sx.bind(null,c,f,r,a),null),Mt===null)throw Error(i(349));m||(za&127)!==0||nx(c,a,r)}return r}function nx(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=Xe.updateQueue,a===null?(a=td(),Xe.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function sx(t,a,r,c){a.value=r,a.getSnapshot=c,ix(a)&&rx(t)}function ax(t,a,r){return r(function(){ix(a)&&rx(t)})}function ix(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!os(t,r)}catch{return!0}}function rx(t){var a=jr(t,2);a!==null&&es(a,t,2)}function Uf(t){var a=Gn();if(typeof t=="function"){var r=t;if(t=r(),Vr){je(!0);try{r()}finally{je(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:t},a}function lx(t,a,r,c){return t.baseState=r,Pf(t,It,typeof c=="function"?c:qa)}function VE(t,a,r,c,f){if(rd(t))throw Error(i(485));if(t=a.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};R.T!==null?r(!0):m.isTransition=!1,c(m),r=a.pending,r===null?(m.next=a.pending=m,ox(a,m)):(m.next=r.next,a.pending=r.next=m)}}function ox(t,a){var r=a.action,c=a.payload,f=t.state;if(a.isTransition){var m=R.T,v={};R.T=v;try{var N=r(f,c),L=R.S;L!==null&&L(v,N),cx(t,a,N)}catch(Z){Bf(t,a,Z)}finally{m!==null&&v.types!==null&&(m.types=v.types),R.T=m}}else try{m=r(f,c),cx(t,a,m)}catch(Z){Bf(t,a,Z)}}function cx(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){ux(t,a,c)},function(c){return Bf(t,a,c)}):ux(t,a,r)}function ux(t,a,r){a.status="fulfilled",a.value=r,dx(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,ox(t,r)))}function Bf(t,a,r){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=r,dx(a),a=a.next;while(a!==c)}t.action=null}function dx(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function hx(t,a){return a}function fx(t,a){if(ht){var r=Mt.formState;if(r!==null){e:{var c=Xe;if(ht){if(Ut){t:{for(var f=Ut,m=ks;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ms(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ut=Ms(f.nextSibling),c=f.data==="F!";break e}}_i(c)}c=!1}c&&(a=r[0])}}return r=Gn(),r.memoizedState=r.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hx,lastRenderedState:a},r.queue=c,r=kx.bind(null,Xe,c),c.dispatch=r,c=Uf(!1),m=Gf.bind(null,Xe,!1,c.queue),c=Gn(),f={state:a,dispatch:null,action:t,pending:null},c.queue=f,r=VE.bind(null,Xe,f,m,r),f.dispatch=r,c.memoizedState=t,[a,r,!1]}function mx(t){var a=en();return px(a,It,t)}function px(t,a,r){if(a=Pf(t,a,hx)[0],t=sd(qa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=tc(a)}catch(v){throw v===kl?Yu:v}else c=a;a=en();var f=a.queue,m=f.dispatch;return r!==a.memoizedState&&(Xe.flags|=2048,Pl(9,{destroy:void 0},PE.bind(null,f,r),null)),[c,m,t]}function PE(t,a){t.action=a}function gx(t){var a=en(),r=It;if(r!==null)return px(a,r,t);en(),a=a.memoizedState,r=en();var c=r.queue.dispatch;return r.memoizedState=t,[a,c,!1]}function Pl(t,a,r,c){return t={tag:t,create:r,deps:c,inst:a,next:null},a=Xe.updateQueue,a===null&&(a=td(),Xe.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(c=r.next,r.next=t,t.next=c,a.lastEffect=t),t}function xx(){return en().memoizedState}function ad(t,a,r,c){var f=Gn();Xe.flags|=t,f.memoizedState=Pl(1|a,{destroy:void 0},r,c===void 0?null:c)}function id(t,a,r,c){var f=en();c=c===void 0?null:c;var m=f.memoizedState.inst;It!==null&&c!==null&&If(c,It.memoizedState.deps)?f.memoizedState=Pl(a,m,r,c):(Xe.flags|=t,f.memoizedState=Pl(1|a,m,r,c))}function yx(t,a){ad(8390656,8,t,a)}function zf(t,a){id(2048,8,t,a)}function LE(t){Xe.flags|=4;var a=Xe.updateQueue;if(a===null)a=td(),Xe.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function bx(t){var a=en().memoizedState;return LE({ref:a,nextImpl:t}),function(){if((_t&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function vx(t,a){return id(4,2,t,a)}function _x(t,a){return id(4,4,t,a)}function wx(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Nx(t,a,r){r=r!=null?r.concat([t]):null,id(4,4,wx.bind(null,a,t),r)}function qf(){}function Ex(t,a){var r=en();a=a===void 0?null:a;var c=r.memoizedState;return a!==null&&If(a,c[1])?c[0]:(r.memoizedState=[t,a],t)}function Tx(t,a){var r=en();a=a===void 0?null:a;var c=r.memoizedState;if(a!==null&&If(a,c[1]))return c[0];if(c=t(),Vr){je(!0);try{t()}finally{je(!1)}}return r.memoizedState=[c,a],c}function Ff(t,a,r){return r===void 0||(za&1073741824)!==0&&(lt&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=Sy(),Xe.lanes|=t,Ci|=t,r)}function Sx(t,a,r,c){return os(r,a)?r:Ml.current!==null?(t=Ff(t,r,c),os(t,a)||(hn=!0),t):(za&42)===0||(za&1073741824)!==0&&(lt&261930)===0?(hn=!0,t.memoizedState=r):(t=Sy(),Xe.lanes|=t,Ci|=t,a)}function jx(t,a,r,c,f){var m=K.p;K.p=m!==0&&8>m?m:8;var v=R.T,N={};R.T=N,Gf(t,!1,a,r);try{var L=f(),Z=R.S;if(Z!==null&&Z(N,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ie=DE(L,c);nc(t,a,ie,ms(t))}else nc(t,a,c,ms(t))}catch(de){nc(t,a,{then:function(){},status:"rejected",reason:de},ms())}finally{K.p=m,v!==null&&N.types!==null&&(v.types=N.types),R.T=v}}function UE(){}function Hf(t,a,r,c){if(t.tag!==5)throw Error(i(476));var f=Ax(t).queue;jx(t,f,a,he,r===null?UE:function(){return Rx(t),r(c)})}function Ax(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:he},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qa,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Rx(t){var a=Ax(t);a.next===null&&(a=t.alternate.memoizedState),nc(t,a.next.queue,{},ms())}function $f(){return Cn(bc)}function Cx(){return en().memoizedState}function Ix(){return en().memoizedState}function BE(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=ms();t=Ei(r);var c=Ti(a,t,r);c!==null&&(es(c,a,r),Xo(c,a,r)),a={cache:vf()},t.payload=a;return}a=a.return}}function zE(t,a,r){var c=ms();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},rd(t)?Dx(a,r):(r=cf(t,a,r,c),r!==null&&(es(r,t,c),Mx(r,a,c)))}function kx(t,a,r){var c=ms();nc(t,a,r,c)}function nc(t,a,r,c){var f={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(rd(t))Dx(a,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var v=a.lastRenderedState,N=m(v,r);if(f.hasEagerState=!0,f.eagerState=N,os(N,v))return Bu(t,a,f,0),Mt===null&&Uu(),!1}catch{}if(r=cf(t,a,f,c),r!==null)return es(r,t,c),Mx(r,a,c),!0}return!1}function Gf(t,a,r,c){if(c={lane:2,revertLane:Em(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},rd(t)){if(a)throw Error(i(479))}else a=cf(t,r,c,2),a!==null&&es(a,t,2)}function rd(t){var a=t.alternate;return t===Xe||a!==null&&a===Xe}function Dx(t,a){Ol=Zu=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function Mx(t,a,r){if((r&4194048)!==0){var c=a.lanes;c&=t.pendingLanes,r|=c,a.lanes=r,pr(t,r)}}var sc={readContext:Cn,use:nd,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt,useHostTransitionStatus:Kt,useFormState:Kt,useActionState:Kt,useOptimistic:Kt,useMemoCache:Kt,useCacheRefresh:Kt};sc.useEffectEvent=Kt;var Ox={readContext:Cn,use:nd,useCallback:function(t,a){return Gn().memoizedState=[t,a===void 0?null:a],t},useContext:Cn,useEffect:yx,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,ad(4194308,4,wx.bind(null,a,t),r)},useLayoutEffect:function(t,a){return ad(4194308,4,t,a)},useInsertionEffect:function(t,a){ad(4,2,t,a)},useMemo:function(t,a){var r=Gn();a=a===void 0?null:a;var c=t();if(Vr){je(!0);try{t()}finally{je(!1)}}return r.memoizedState=[c,a],c},useReducer:function(t,a,r){var c=Gn();if(r!==void 0){var f=r(a);if(Vr){je(!0);try{r(a)}finally{je(!1)}}}else f=a;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=zE.bind(null,Xe,t),[c.memoizedState,t]},useRef:function(t){var a=Gn();return t={current:t},a.memoizedState=t},useState:function(t){t=Uf(t);var a=t.queue,r=kx.bind(null,Xe,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:qf,useDeferredValue:function(t,a){var r=Gn();return Ff(r,t,a)},useTransition:function(){var t=Uf(!1);return t=jx.bind(null,Xe,t.queue,!0,!1),Gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var c=Xe,f=Gn();if(ht){if(r===void 0)throw Error(i(407));r=r()}else{if(r=a(),Mt===null)throw Error(i(349));(lt&127)!==0||nx(c,a,r)}f.memoizedState=r;var m={value:r,getSnapshot:a};return f.queue=m,yx(ax.bind(null,c,m,t),[t]),c.flags|=2048,Pl(9,{destroy:void 0},sx.bind(null,c,m,r,a),null),r},useId:function(){var t=Gn(),a=Mt.identifierPrefix;if(ht){var r=pa,c=ma;r=(c&~(1<<32-ke(c)-1)).toString(32)+r,a="_"+a+"R_"+r,r=ed++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=ME++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:$f,useFormState:fx,useActionState:fx,useOptimistic:function(t){var a=Gn();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=Gf.bind(null,Xe,!0,r),r.dispatch=a,[t,a]},useMemoCache:Vf,useCacheRefresh:function(){return Gn().memoizedState=BE.bind(null,Xe)},useEffectEvent:function(t){var a=Gn(),r={impl:t};return a.memoizedState=r,function(){if((_t&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Yf={readContext:Cn,use:nd,useCallback:Ex,useContext:Cn,useEffect:zf,useImperativeHandle:Nx,useInsertionEffect:vx,useLayoutEffect:_x,useMemo:Tx,useReducer:sd,useRef:xx,useState:function(){return sd(qa)},useDebugValue:qf,useDeferredValue:function(t,a){var r=en();return Sx(r,It.memoizedState,t,a)},useTransition:function(){var t=sd(qa)[0],a=en().memoizedState;return[typeof t=="boolean"?t:tc(t),a]},useSyncExternalStore:tx,useId:Cx,useHostTransitionStatus:$f,useFormState:mx,useActionState:mx,useOptimistic:function(t,a){var r=en();return lx(r,It,t,a)},useMemoCache:Vf,useCacheRefresh:Ix};Yf.useEffectEvent=bx;var Vx={readContext:Cn,use:nd,useCallback:Ex,useContext:Cn,useEffect:zf,useImperativeHandle:Nx,useInsertionEffect:vx,useLayoutEffect:_x,useMemo:Tx,useReducer:Lf,useRef:xx,useState:function(){return Lf(qa)},useDebugValue:qf,useDeferredValue:function(t,a){var r=en();return It===null?Ff(r,t,a):Sx(r,It.memoizedState,t,a)},useTransition:function(){var t=Lf(qa)[0],a=en().memoizedState;return[typeof t=="boolean"?t:tc(t),a]},useSyncExternalStore:tx,useId:Cx,useHostTransitionStatus:$f,useFormState:gx,useActionState:gx,useOptimistic:function(t,a){var r=en();return It!==null?lx(r,It,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Vf,useCacheRefresh:Ix};Vx.useEffectEvent=bx;function Kf(t,a,r,c){a=t.memoizedState,r=r(c,a),r=r==null?a:w({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Qf={enqueueSetState:function(t,a,r){t=t._reactInternals;var c=ms(),f=Ei(c);f.payload=a,r!=null&&(f.callback=r),a=Ti(t,f,c),a!==null&&(es(a,t,c),Xo(a,t,c))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var c=ms(),f=Ei(c);f.tag=1,f.payload=a,r!=null&&(f.callback=r),a=Ti(t,f,c),a!==null&&(es(a,t,c),Xo(a,t,c))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=ms(),c=Ei(r);c.tag=2,a!=null&&(c.callback=a),a=Ti(t,c,r),a!==null&&(es(a,t,r),Xo(a,t,r))}};function Px(t,a,r,c,f,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,v):a.prototype&&a.prototype.isPureReactComponent?!Fo(r,c)||!Fo(f,m):!0}function Lx(t,a,r,c){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,c),a.state!==t&&Qf.enqueueReplaceState(a,a.state,null)}function Pr(t,a){var r=a;if("ref"in a){r={};for(var c in a)c!=="ref"&&(r[c]=a[c])}if(t=t.defaultProps){r===a&&(r=w({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function Ux(t){Lu(t)}function Bx(t){console.error(t)}function zx(t){Lu(t)}function ld(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function qx(t,a,r){try{var c=t.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Wf(t,a,r){return r=Ei(r),r.tag=3,r.payload={element:null},r.callback=function(){ld(t,a)},r}function Fx(t){return t=Ei(t),t.tag=3,t}function Hx(t,a,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){qx(a,r,c)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){qx(a,r,c),typeof f!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function qE(t,a,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=r.alternate,a!==null&&Rl(a,r,f,!0),r=us.current,r!==null){switch(r.tag){case 31:case 13:return Ds===null?bd():r.alternate===null&&Qt===0&&(Qt=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===Ku?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([c]):a.add(c),_m(t,c,f)),!1;case 22:return r.flags|=65536,c===Ku?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([c]):r.add(c)),_m(t,c,f)),!1}throw Error(i(435,r.tag))}return _m(t,c,f),bd(),!1}if(ht)return a=us.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,c!==pf&&(t=Error(i(422),{cause:c}),Go(Rs(t,r)))):(c!==pf&&(a=Error(i(423),{cause:c}),Go(Rs(a,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=Rs(c,r),f=Wf(t.stateNode,c,f),Sf(t,f),Qt!==4&&(Qt=2)),!1;var m=Error(i(520),{cause:c});if(m=Rs(m,r),dc===null?dc=[m]:dc.push(m),Qt!==4&&(Qt=2),a===null)return!0;c=Rs(c,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=Wf(r.stateNode,c,t),Sf(r,t),!1;case 1:if(a=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ii===null||!Ii.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Fx(f),Hx(f,t,r,c),Sf(r,f),!1}r=r.return}while(r!==null);return!1}var Xf=Error(i(461)),hn=!1;function In(t,a,r,c){a.child=t===null?K0(a,null,r,c):Or(a,t.child,r,c)}function $x(t,a,r,c,f){r=r.render;var m=a.ref;if("ref"in c){var v={};for(var N in c)N!=="ref"&&(v[N]=c[N])}else v=c;return Ir(a),c=kf(t,a,r,v,m,f),N=Df(),t!==null&&!hn?(Mf(t,a,f),Fa(t,a,f)):(ht&&N&&ff(a),a.flags|=1,In(t,a,c,f),a.child)}function Gx(t,a,r,c,f){if(t===null){var m=r.type;return typeof m=="function"&&!uf(m)&&m.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=m,Yx(t,a,m,c,f)):(t=qu(r.type,null,c,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(m=t.child,!im(t,f)){var v=m.memoizedProps;if(r=r.compare,r=r!==null?r:Fo,r(v,c)&&t.ref===a.ref)return Fa(t,a,f)}return a.flags|=1,t=Pa(m,c),t.ref=a.ref,t.return=a,a.child=t}function Yx(t,a,r,c,f){if(t!==null){var m=t.memoizedProps;if(Fo(m,c)&&t.ref===a.ref)if(hn=!1,a.pendingProps=c=m,im(t,f))(t.flags&131072)!==0&&(hn=!0);else return a.lanes=t.lanes,Fa(t,a,f)}return Jf(t,a,r,c,f)}function Kx(t,a,r,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(c=a.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,a.child=null;return Qx(t,a,m,r,c)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Gu(a,m!==null?m.cachePool:null),m!==null?X0(a,m):Af(),J0(a);else return c=a.lanes=536870912,Qx(t,a,m!==null?m.baseLanes|r:r,r,c)}else m!==null?(Gu(a,m.cachePool),X0(a,m),ji(),a.memoizedState=null):(t!==null&&Gu(a,null),Af(),ji());return In(t,a,f,r),a.child}function ac(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Qx(t,a,r,c,f){var m=wf();return m=m===null?null:{parent:un._currentValue,pool:m},a.memoizedState={baseLanes:r,cachePool:m},t!==null&&Gu(a,null),Af(),J0(a),t!==null&&Rl(t,a,c,!0),a.childLanes=f,null}function od(t,a){return a=ud({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Wx(t,a,r){return Or(a,t.child,null,r),t=od(a,a.pendingProps),t.flags|=2,ds(a),a.memoizedState=null,t}function FE(t,a,r){var c=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(ht){if(c.mode==="hidden")return t=od(a,c),a.lanes=536870912,ac(null,t);if(Cf(a),(t=Ut)?(t=ob(t,ks),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:bi!==null?{id:ma,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},r=D0(t),r.return=a,a.child=r,Rn=a,Ut=null)):t=null,t===null)throw _i(a);return a.lanes=536870912,null}return od(a,c)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Cf(a),f)if(a.flags&256)a.flags&=-257,a=Wx(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(hn||Rl(t,a,r,!1),f=(r&t.childLanes)!==0,hn||f){if(c=Mt,c!==null&&(v=oi(c,r),v!==0&&v!==m.retryLane))throw m.retryLane=v,jr(t,v),es(c,t,v),Xf;bd(),a=Wx(t,a,r)}else t=m.treeContext,Ut=Ms(v.nextSibling),Rn=a,ht=!0,vi=null,ks=!1,t!==null&&V0(a,t),a=od(a,c),a.flags|=4096;return a}return t=Pa(t.child,{mode:c.mode,children:c.children}),t.ref=a.ref,a.child=t,t.return=a,t}function cd(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function Jf(t,a,r,c,f){return Ir(a),r=kf(t,a,r,c,void 0,f),c=Df(),t!==null&&!hn?(Mf(t,a,f),Fa(t,a,f)):(ht&&c&&ff(a),a.flags|=1,In(t,a,r,f),a.child)}function Xx(t,a,r,c,f,m){return Ir(a),a.updateQueue=null,r=ex(a,c,r,f),Z0(t),c=Df(),t!==null&&!hn?(Mf(t,a,m),Fa(t,a,m)):(ht&&c&&ff(a),a.flags|=1,In(t,a,r,m),a.child)}function Jx(t,a,r,c,f){if(Ir(a),a.stateNode===null){var m=Tl,v=r.contextType;typeof v=="object"&&v!==null&&(m=Cn(v)),m=new r(c,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Qf,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=c,m.state=a.memoizedState,m.refs={},Ef(a),v=r.contextType,m.context=typeof v=="object"&&v!==null?Cn(v):Tl,m.state=a.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Kf(a,r,v,c),m.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Qf.enqueueReplaceState(m,m.state,null),Zo(a,c,m,f),Jo(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(t===null){m=a.stateNode;var N=a.memoizedProps,L=Pr(r,N);m.props=L;var Z=m.context,ie=r.contextType;v=Tl,typeof ie=="object"&&ie!==null&&(v=Cn(ie));var de=r.getDerivedStateFromProps;ie=typeof de=="function"||typeof m.getSnapshotBeforeUpdate=="function",N=a.pendingProps!==N,ie||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(N||Z!==v)&&Lx(a,m,c,v),Ni=!1;var te=a.memoizedState;m.state=te,Zo(a,c,m,f),Jo(),Z=a.memoizedState,N||te!==Z||Ni?(typeof de=="function"&&(Kf(a,r,de,c),Z=a.memoizedState),(L=Ni||Px(a,r,L,c,te,Z,v))?(ie||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=Z),m.props=c,m.state=Z,m.context=v,c=L):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{m=a.stateNode,Tf(t,a),v=a.memoizedProps,ie=Pr(r,v),m.props=ie,de=a.pendingProps,te=m.context,Z=r.contextType,L=Tl,typeof Z=="object"&&Z!==null&&(L=Cn(Z)),N=r.getDerivedStateFromProps,(Z=typeof N=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==de||te!==L)&&Lx(a,m,c,L),Ni=!1,te=a.memoizedState,m.state=te,Zo(a,c,m,f),Jo();var ae=a.memoizedState;v!==de||te!==ae||Ni||t!==null&&t.dependencies!==null&&Hu(t.dependencies)?(typeof N=="function"&&(Kf(a,r,N,c),ae=a.memoizedState),(ie=Ni||Px(a,r,ie,c,te,ae,L)||t!==null&&t.dependencies!==null&&Hu(t.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,ae,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,ae,L)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&te===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&te===t.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=ae),m.props=c,m.state=ae,m.context=L,c=ie):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&te===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&te===t.memoizedState||(a.flags|=1024),c=!1)}return m=c,cd(t,a),c=(a.flags&128)!==0,m||c?(m=a.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,t!==null&&c?(a.child=Or(a,t.child,null,f),a.child=Or(a,null,r,f)):In(t,a,r,f),a.memoizedState=m.state,t=a.child):t=Fa(t,a,f),t}function Zx(t,a,r,c){return Rr(),a.flags|=256,In(t,a,r,c),a.child}var Zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function em(t){return{baseLanes:t,cachePool:q0()}}function tm(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=fs),t}function ey(t,a,r){var c=a.pendingProps,f=!1,m=(a.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(Zt.current&2)!==0),v&&(f=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(ht){if(f?Si(a):ji(),(t=Ut)?(t=ob(t,ks),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:bi!==null?{id:ma,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},r=D0(t),r.return=a,a.child=r,Rn=a,Ut=null)):t=null,t===null)throw _i(a);return Pm(t)?a.lanes=32:a.lanes=536870912,null}var N=c.children;return c=c.fallback,f?(ji(),f=a.mode,N=ud({mode:"hidden",children:N},f),c=Ar(c,f,r,null),N.return=a,c.return=a,N.sibling=c,a.child=N,c=a.child,c.memoizedState=em(r),c.childLanes=tm(t,v,r),a.memoizedState=Zf,ac(null,c)):(Si(a),nm(a,N))}var L=t.memoizedState;if(L!==null&&(N=L.dehydrated,N!==null)){if(m)a.flags&256?(Si(a),a.flags&=-257,a=sm(t,a,r)):a.memoizedState!==null?(ji(),a.child=t.child,a.flags|=128,a=null):(ji(),N=c.fallback,f=a.mode,c=ud({mode:"visible",children:c.children},f),N=Ar(N,f,r,null),N.flags|=2,c.return=a,N.return=a,c.sibling=N,a.child=c,Or(a,t.child,null,r),c=a.child,c.memoizedState=em(r),c.childLanes=tm(t,v,r),a.memoizedState=Zf,a=ac(null,c));else if(Si(a),Pm(N)){if(v=N.nextSibling&&N.nextSibling.dataset,v)var Z=v.dgst;v=Z,c=Error(i(419)),c.stack="",c.digest=v,Go({value:c,source:null,stack:null}),a=sm(t,a,r)}else if(hn||Rl(t,a,r,!1),v=(r&t.childLanes)!==0,hn||v){if(v=Mt,v!==null&&(c=oi(v,r),c!==0&&c!==L.retryLane))throw L.retryLane=c,jr(t,c),es(v,t,c),Xf;Vm(N)||bd(),a=sm(t,a,r)}else Vm(N)?(a.flags|=192,a.child=t.child,a=null):(t=L.treeContext,Ut=Ms(N.nextSibling),Rn=a,ht=!0,vi=null,ks=!1,t!==null&&V0(a,t),a=nm(a,c.children),a.flags|=4096);return a}return f?(ji(),N=c.fallback,f=a.mode,L=t.child,Z=L.sibling,c=Pa(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,Z!==null?N=Pa(Z,N):(N=Ar(N,f,r,null),N.flags|=2),N.return=a,c.return=a,c.sibling=N,a.child=c,ac(null,c),c=a.child,N=t.child.memoizedState,N===null?N=em(r):(f=N.cachePool,f!==null?(L=un._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=q0(),N={baseLanes:N.baseLanes|r,cachePool:f}),c.memoizedState=N,c.childLanes=tm(t,v,r),a.memoizedState=Zf,ac(t.child,c)):(Si(a),r=t.child,t=r.sibling,r=Pa(r,{mode:"visible",children:c.children}),r.return=a,r.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=r,a.memoizedState=null,r)}function nm(t,a){return a=ud({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function ud(t,a){return t=cs(22,t,null,a),t.lanes=0,t}function sm(t,a,r){return Or(a,t.child,null,r),t=nm(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function ty(t,a,r){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a),yf(t.return,a,r)}function am(t,a,r,c,f,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f,treeForkCount:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=r,v.tailMode=f,v.treeForkCount=m)}function ny(t,a,r){var c=a.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=Zt.current,N=(v&2)!==0;if(N?(v=v&1|2,a.flags|=128):v&=1,re(Zt,v),In(t,a,c,r),c=ht?$o:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ty(t,r,a);else if(t.tag===19)ty(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=a.child,f=null;r!==null;)t=r.alternate,t!==null&&Ju(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=a.child,a.child=null):(f=r.sibling,r.sibling=null),am(a,!1,f,r,m,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Ju(t)===null){a.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}am(a,!0,r,null,m,c);break;case"together":am(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function Fa(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),Ci|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(Rl(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,r=Pa(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=Pa(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function im(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Hu(t)))}function HE(t,a,r){switch(a.tag){case 3:Ue(a,a.stateNode.containerInfo),wi(a,un,t.memoizedState.cache),Rr();break;case 27:case 5:$e(a);break;case 4:Ue(a,a.stateNode.containerInfo);break;case 10:wi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Cf(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Si(a),a.flags|=128,null):(r&a.child.childLanes)!==0?ey(t,a,r):(Si(a),t=Fa(t,a,r),t!==null?t.sibling:null);Si(a);break;case 19:var f=(t.flags&128)!==0;if(c=(r&a.childLanes)!==0,c||(Rl(t,a,r,!1),c=(r&a.childLanes)!==0),f){if(c)return ny(t,a,r);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),re(Zt,Zt.current),c)break;return null;case 22:return a.lanes=0,Kx(t,a,r,a.pendingProps);case 24:wi(a,un,t.memoizedState.cache)}return Fa(t,a,r)}function sy(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)hn=!0;else{if(!im(t,r)&&(a.flags&128)===0)return hn=!1,HE(t,a,r);hn=(t.flags&131072)!==0}else hn=!1,ht&&(a.flags&1048576)!==0&&O0(a,$o,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(t=Dr(a.elementType),a.type=t,typeof t=="function")uf(t)?(c=Pr(t,c),a.tag=1,a=Jx(null,a,t,c,r)):(a.tag=0,a=Jf(null,a,t,c,r));else{if(t!=null){var f=t.$$typeof;if(f===ge){a.tag=11,a=$x(null,a,t,c,r);break e}else if(f===j){a.tag=14,a=Gx(null,a,t,c,r);break e}}throw a=z(t)||t,Error(i(306,a,""))}}return a;case 0:return Jf(t,a,a.type,a.pendingProps,r);case 1:return c=a.type,f=Pr(c,a.pendingProps),Jx(t,a,c,f,r);case 3:e:{if(Ue(a,a.stateNode.containerInfo),t===null)throw Error(i(387));c=a.pendingProps;var m=a.memoizedState;f=m.element,Tf(t,a),Zo(a,c,null,r);var v=a.memoizedState;if(c=v.cache,wi(a,un,c),c!==m.cache&&bf(a,[un],r,!0),Jo(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=Zx(t,a,c,r);break e}else if(c!==f){f=Rs(Error(i(424)),a),Go(f),a=Zx(t,a,c,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ut=Ms(t.firstChild),Rn=a,ht=!0,vi=null,ks=!0,r=K0(a,null,c,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Rr(),c===f){a=Fa(t,a,r);break e}In(t,a,c,r)}a=a.child}return a;case 26:return cd(t,a),t===null?(r=mb(a.type,null,a.pendingProps,null))?a.memoizedState=r:ht||(r=a.type,t=a.pendingProps,c=Sd(Ie.current).createElement(r),c[ln]=a,c[Nn]=t,kn(c,r,t),on(c),a.stateNode=c):a.memoizedState=mb(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return $e(a),t===null&&ht&&(c=a.stateNode=db(a.type,a.pendingProps,Ie.current),Rn=a,ks=!0,f=Ut,Oi(a.type)?(Lm=f,Ut=Ms(c.firstChild)):Ut=f),In(t,a,a.pendingProps.children,r),cd(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&ht&&((f=c=Ut)&&(c=v2(c,a.type,a.pendingProps,ks),c!==null?(a.stateNode=c,Rn=a,Ut=Ms(c.firstChild),ks=!1,f=!0):f=!1),f||_i(a)),$e(a),f=a.type,m=a.pendingProps,v=t!==null?t.memoizedProps:null,c=m.children,Dm(f,m)?c=null:v!==null&&Dm(f,v)&&(a.flags|=32),a.memoizedState!==null&&(f=kf(t,a,OE,null,null,r),bc._currentValue=f),cd(t,a),In(t,a,c,r),a.child;case 6:return t===null&&ht&&((t=r=Ut)&&(r=_2(r,a.pendingProps,ks),r!==null?(a.stateNode=r,Rn=a,Ut=null,t=!0):t=!1),t||_i(a)),null;case 13:return ey(t,a,r);case 4:return Ue(a,a.stateNode.containerInfo),c=a.pendingProps,t===null?a.child=Or(a,null,c,r):In(t,a,c,r),a.child;case 11:return $x(t,a,a.type,a.pendingProps,r);case 7:return In(t,a,a.pendingProps,r),a.child;case 8:return In(t,a,a.pendingProps.children,r),a.child;case 12:return In(t,a,a.pendingProps.children,r),a.child;case 10:return c=a.pendingProps,wi(a,a.type,c.value),In(t,a,c.children,r),a.child;case 9:return f=a.type._context,c=a.pendingProps.children,Ir(a),f=Cn(f),c=c(f),a.flags|=1,In(t,a,c,r),a.child;case 14:return Gx(t,a,a.type,a.pendingProps,r);case 15:return Yx(t,a,a.type,a.pendingProps,r);case 19:return ny(t,a,r);case 31:return FE(t,a,r);case 22:return Kx(t,a,r,a.pendingProps);case 24:return Ir(a),c=Cn(un),t===null?(f=wf(),f===null&&(f=Mt,m=vf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),a.memoizedState={parent:c,cache:f},Ef(a),wi(a,un,f)):((t.lanes&r)!==0&&(Tf(t,a),Zo(a,null,null,r),Jo()),f=t.memoizedState,m=a.memoizedState,f.parent!==c?(f={parent:c,cache:c},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),wi(a,un,c)):(c=m.cache,wi(a,un,c),c!==f.cache&&bf(a,[un],r,!0))),In(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ha(t){t.flags|=4}function rm(t,a,r,c,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Cy())t.flags|=8192;else throw Mr=Ku,Nf}else t.flags&=-16777217}function ay(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!bb(a))if(Cy())t.flags|=8192;else throw Mr=Ku,Nf}function dd(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?rn():536870912,t.lanes|=a,zl|=a)}function ic(t,a){if(!ht)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Bt(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,c=0;if(a)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=r,a}function $E(t,a,r){var c=a.pendingProps;switch(mf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(a),null;case 1:return Bt(a),null;case 3:return r=a.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Ba(un),Me(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Al(a)?Ha(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,gf())),Bt(a),null;case 26:var f=a.type,m=a.memoizedState;return t===null?(Ha(a),m!==null?(Bt(a),ay(a,m)):(Bt(a),rm(a,f,null,c,r))):m?m!==t.memoizedState?(Ha(a),Bt(a),ay(a,m)):(Bt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==c&&Ha(a),Bt(a),rm(a,f,t,c,r)),null;case 27:if(st(a),r=Ie.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&Ha(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return Bt(a),null}t=be.current,Al(a)?P0(a):(t=db(f,c,r),a.stateNode=t,Ha(a))}return Bt(a),null;case 5:if(st(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&Ha(a);else{if(!c){if(a.stateNode===null)throw Error(i(166));return Bt(a),null}if(m=be.current,Al(a))P0(a);else{var v=Sd(Ie.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[ln]=a,m[Nn]=c;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=m;e:switch(kn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ha(a)}}return Bt(a),rm(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==c&&Ha(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(i(166));if(t=Ie.current,Al(a)){if(t=a.stateNode,r=a.memoizedProps,c=null,f=Rn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[ln]=a,t=!!(t.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||eb(t.nodeValue,r)),t||_i(a,!0)}else t=Sd(t).createTextNode(c),t[ln]=a,a.stateNode=t}return Bt(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(c=Al(a),r!==null){if(t===null){if(!c)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[ln]=a}else Rr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),t=!1}else r=gf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(ds(a),a):(ds(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Bt(a),null;case 13:if(c=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Al(a),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[ln]=a}else Rr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),f=!1}else f=gf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(ds(a),a):(ds(a),null)}return ds(a),(a.flags&128)!==0?(a.lanes=r,a):(r=c!==null,t=t!==null&&t.memoizedState!==null,r&&(c=a.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),dd(a,a.updateQueue),Bt(a),null);case 4:return Me(),t===null&&Am(a.stateNode.containerInfo),Bt(a),null;case 10:return Ba(a.type),Bt(a),null;case 19:if(ne(Zt),c=a.memoizedState,c===null)return Bt(a),null;if(f=(a.flags&128)!==0,m=c.rendering,m===null)if(f)ic(c,!1);else{if(Qt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(m=Ju(t),m!==null){for(a.flags|=128,ic(c,!1),t=m.updateQueue,a.updateQueue=t,dd(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)k0(r,t),r=r.sibling;return re(Zt,Zt.current&1|2),ht&&La(a,c.treeForkCount),a.child}t=t.sibling}c.tail!==null&&ft()>gd&&(a.flags|=128,f=!0,ic(c,!1),a.lanes=4194304)}else{if(!f)if(t=Ju(m),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,dd(a,t),ic(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!ht)return Bt(a),null}else 2*ft()-c.renderingStartTime>gd&&r!==536870912&&(a.flags|=128,f=!0,ic(c,!1),a.lanes=4194304);c.isBackwards?(m.sibling=a.child,a.child=m):(t=c.last,t!==null?t.sibling=m:a.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=ft(),t.sibling=null,r=Zt.current,re(Zt,f?r&1|2:r&1),ht&&La(a,c.treeForkCount),t):(Bt(a),null);case 22:case 23:return ds(a),Rf(),c=a.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(r&536870912)!==0&&(a.flags&128)===0&&(Bt(a),a.subtreeFlags&6&&(a.flags|=8192)):Bt(a),r=a.updateQueue,r!==null&&dd(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==r&&(a.flags|=2048),t!==null&&ne(kr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Ba(un),Bt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function GE(t,a){switch(mf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Ba(un),Me(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return st(a),null;case 31:if(a.memoizedState!==null){if(ds(a),a.alternate===null)throw Error(i(340));Rr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(ds(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Rr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return ne(Zt),null;case 4:return Me(),null;case 10:return Ba(a.type),null;case 22:case 23:return ds(a),Rf(),t!==null&&ne(kr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Ba(un),null;case 25:return null;default:return null}}function iy(t,a){switch(mf(a),a.tag){case 3:Ba(un),Me();break;case 26:case 27:case 5:st(a);break;case 4:Me();break;case 31:a.memoizedState!==null&&ds(a);break;case 13:ds(a);break;case 19:ne(Zt);break;case 10:Ba(a.type);break;case 22:case 23:ds(a),Rf(),t!==null&&ne(kr);break;case 24:Ba(un)}}function rc(t,a){try{var r=a.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&t)===t){c=void 0;var m=r.create,v=r.inst;c=m(),v.destroy=c}r=r.next}while(r!==f)}}catch(N){jt(a,a.return,N)}}function Ai(t,a,r){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var v=c.inst,N=v.destroy;if(N!==void 0){v.destroy=void 0,f=a;var L=r,Z=N;try{Z()}catch(ie){jt(f,L,ie)}}}c=c.next}while(c!==m)}}catch(ie){jt(a,a.return,ie)}}function ry(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{W0(a,r)}catch(c){jt(t,t.return,c)}}}function ly(t,a,r){r.props=Pr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(c){jt(t,a,c)}}function lc(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof r=="function"?t.refCleanup=r(c):r.current=c}}catch(f){jt(t,a,f)}}function ga(t,a){var r=t.ref,c=t.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){jt(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){jt(t,a,f)}else r.current=null}function oy(t){var a=t.type,r=t.memoizedProps,c=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){jt(t,t.return,f)}}function lm(t,a,r){try{var c=t.stateNode;m2(c,t.type,r,a),c[Nn]=a}catch(f){jt(t,t.return,f)}}function cy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Oi(t.type)||t.tag===4}function om(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Oi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cm(t,a,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Bs));else if(c!==4&&(c===27&&Oi(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(cm(t,a,r),t=t.sibling;t!==null;)cm(t,a,r),t=t.sibling}function hd(t,a,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(c!==4&&(c===27&&Oi(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(hd(t,a,r),t=t.sibling;t!==null;)hd(t,a,r),t=t.sibling}function uy(t){var a=t.stateNode,r=t.memoizedProps;try{for(var c=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);kn(a,c,r),a[ln]=t,a[Nn]=r}catch(m){jt(t,t.return,m)}}var $a=!1,fn=!1,um=!1,dy=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function YE(t,a){if(t=t.containerInfo,Im=Dd,t=N0(t),nf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var v=0,N=-1,L=-1,Z=0,ie=0,de=t,te=null;t:for(;;){for(var ae;de!==r||f!==0&&de.nodeType!==3||(N=v+f),de!==m||c!==0&&de.nodeType!==3||(L=v+c),de.nodeType===3&&(v+=de.nodeValue.length),(ae=de.firstChild)!==null;)te=de,de=ae;for(;;){if(de===t)break t;if(te===r&&++Z===f&&(N=v),te===m&&++ie===c&&(L=v),(ae=de.nextSibling)!==null)break;de=te,te=de.parentNode}de=ae}r=N===-1||L===-1?null:{start:N,end:L}}else r=null}r=r||{start:0,end:0}}else r=null;for(km={focusedElem:t,selectionRange:r},Dd=!1,Tn=a;Tn!==null;)if(a=Tn,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Tn=t;else for(;Tn!==null;){switch(a=Tn,m=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=a,f=m.memoizedProps,m=m.memoizedState,c=r.stateNode;try{var Ce=Pr(r.type,f);t=c.getSnapshotBeforeUpdate(Ce,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(qe){jt(r,r.return,qe)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)Om(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Om(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,Tn=t;break}Tn=a.return}}function hy(t,a,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Ya(t,r),c&4&&rc(5,r);break;case 1:if(Ya(t,r),c&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(v){jt(r,r.return,v)}else{var f=Pr(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){jt(r,r.return,v)}}c&64&&ry(r),c&512&&lc(r,r.return);break;case 3:if(Ya(t,r),c&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{W0(t,a)}catch(v){jt(r,r.return,v)}}break;case 27:a===null&&c&4&&uy(r);case 26:case 5:Ya(t,r),a===null&&c&4&&oy(r),c&512&&lc(r,r.return);break;case 12:Ya(t,r);break;case 31:Ya(t,r),c&4&&py(t,r);break;case 13:Ya(t,r),c&4&&gy(t,r),c&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=n2.bind(null,r),w2(t,r))));break;case 22:if(c=r.memoizedState!==null||$a,!c){a=a!==null&&a.memoizedState!==null||fn,f=$a;var m=fn;$a=c,(fn=a)&&!m?Ka(t,r,(r.subtreeFlags&8772)!==0):Ya(t,r),$a=f,fn=m}break;case 30:break;default:Ya(t,r)}}function fy(t){var a=t.alternate;a!==null&&(t.alternate=null,fy(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&dl(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qt=null,Wn=!1;function Ga(t,a,r){for(r=r.child;r!==null;)my(t,a,r),r=r.sibling}function my(t,a,r){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(ee,r)}catch{}switch(r.tag){case 26:fn||ga(r,a),Ga(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:fn||ga(r,a);var c=qt,f=Wn;Oi(r.type)&&(qt=r.stateNode,Wn=!1),Ga(t,a,r),gc(r.stateNode),qt=c,Wn=f;break;case 5:fn||ga(r,a);case 6:if(c=qt,f=Wn,qt=null,Ga(t,a,r),qt=c,Wn=f,qt!==null)if(Wn)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(r.stateNode)}catch(m){jt(r,a,m)}else try{qt.removeChild(r.stateNode)}catch(m){jt(r,a,m)}break;case 18:qt!==null&&(Wn?(t=qt,rb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Ql(t)):rb(qt,r.stateNode));break;case 4:c=qt,f=Wn,qt=r.stateNode.containerInfo,Wn=!0,Ga(t,a,r),qt=c,Wn=f;break;case 0:case 11:case 14:case 15:Ai(2,r,a),fn||Ai(4,r,a),Ga(t,a,r);break;case 1:fn||(ga(r,a),c=r.stateNode,typeof c.componentWillUnmount=="function"&&ly(r,a,c)),Ga(t,a,r);break;case 21:Ga(t,a,r);break;case 22:fn=(c=fn)||r.memoizedState!==null,Ga(t,a,r),fn=c;break;default:Ga(t,a,r)}}function py(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ql(t)}catch(r){jt(a,a.return,r)}}}function gy(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ql(t)}catch(r){jt(a,a.return,r)}}function KE(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new dy),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new dy),a;default:throw Error(i(435,t.tag))}}function fd(t,a){var r=KE(t);a.forEach(function(c){if(!r.has(c)){r.add(c);var f=s2.bind(null,t,c);c.then(f,f)}})}function Xn(t,a){var r=a.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],m=t,v=a,N=v;e:for(;N!==null;){switch(N.tag){case 27:if(Oi(N.type)){qt=N.stateNode,Wn=!1;break e}break;case 5:qt=N.stateNode,Wn=!1;break e;case 3:case 4:qt=N.stateNode.containerInfo,Wn=!0;break e}N=N.return}if(qt===null)throw Error(i(160));my(m,v,f),qt=null,Wn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)xy(a,t),a=a.sibling}var Gs=null;function xy(t,a){var r=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Xn(a,t),Jn(t),c&4&&(Ai(3,t,t.return),rc(3,t),Ai(5,t,t.return));break;case 1:Xn(a,t),Jn(t),c&512&&(fn||r===null||ga(r,r.return)),c&64&&$a&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=Gs;if(Xn(a,t),Jn(t),c&512&&(fn||r===null||ga(r,r.return)),c&4){var m=r!==null?r.memoizedState:null;if(c=t.memoizedState,r===null)if(c===null)if(t.stateNode===null){e:{c=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[na]||m[ln]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),kn(m,c,r),m[ln]=t,on(m),c=m;break e;case"link":var v=xb("link","href",f).get(c+(r.href||""));if(v){for(var N=0;N<v.length;N++)if(m=v[N],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(N,1);break t}}m=f.createElement(c),kn(m,c,r),f.head.appendChild(m);break;case"meta":if(v=xb("meta","content",f).get(c+(r.content||""))){for(N=0;N<v.length;N++)if(m=v[N],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(N,1);break t}}m=f.createElement(c),kn(m,c,r),f.head.appendChild(m);break;default:throw Error(i(468,c))}m[ln]=t,on(m),c=m}t.stateNode=c}else yb(f,t.type,t.stateNode);else t.stateNode=gb(f,c,t.memoizedProps);else m!==c?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,c===null?yb(f,t.type,t.stateNode):gb(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&lm(t,t.memoizedProps,r.memoizedProps)}break;case 27:Xn(a,t),Jn(t),c&512&&(fn||r===null||ga(r,r.return)),r!==null&&c&4&&lm(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Xn(a,t),Jn(t),c&512&&(fn||r===null||ga(r,r.return)),t.flags&32){f=t.stateNode;try{Qn(f,"")}catch(Ce){jt(t,t.return,Ce)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,lm(t,f,r!==null?r.memoizedProps:f)),c&1024&&(um=!0);break;case 6:if(Xn(a,t),Jn(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,r=t.stateNode;try{r.nodeValue=c}catch(Ce){jt(t,t.return,Ce)}}break;case 3:if(Rd=null,f=Gs,Gs=jd(a.containerInfo),Xn(a,t),Gs=f,Jn(t),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Ql(a.containerInfo)}catch(Ce){jt(t,t.return,Ce)}um&&(um=!1,yy(t));break;case 4:c=Gs,Gs=jd(t.stateNode.containerInfo),Xn(a,t),Jn(t),Gs=c;break;case 12:Xn(a,t),Jn(t);break;case 31:Xn(a,t),Jn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,fd(t,c)));break;case 13:Xn(a,t),Jn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(pd=ft()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,fd(t,c)));break;case 22:f=t.memoizedState!==null;var L=r!==null&&r.memoizedState!==null,Z=$a,ie=fn;if($a=Z||f,fn=ie||L,Xn(a,t),fn=ie,$a=Z,Jn(t),c&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(r===null||L||$a||fn||Lr(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){L=r=a;try{if(m=L.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{N=L.stateNode;var de=L.memoizedProps.style,te=de!=null&&de.hasOwnProperty("display")?de.display:null;N.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ce){jt(L,L.return,Ce)}}}else if(a.tag===6){if(r===null){L=a;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(Ce){jt(L,L.return,Ce)}}}else if(a.tag===18){if(r===null){L=a;try{var ae=L.stateNode;f?lb(ae,!0):lb(L.stateNode,!1)}catch(Ce){jt(L,L.return,Ce)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=t.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,fd(t,r))));break;case 19:Xn(a,t),Jn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,fd(t,c)));break;case 30:break;case 21:break;default:Xn(a,t),Jn(t)}}function Jn(t){var a=t.flags;if(a&2){try{for(var r,c=t.return;c!==null;){if(cy(c)){r=c;break}c=c.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var f=r.stateNode,m=om(t);hd(t,m,f);break;case 5:var v=r.stateNode;r.flags&32&&(Qn(v,""),r.flags&=-33);var N=om(t);hd(t,N,v);break;case 3:case 4:var L=r.stateNode.containerInfo,Z=om(t);cm(t,Z,L);break;default:throw Error(i(161))}}catch(ie){jt(t,t.return,ie)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function yy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;yy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Ya(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)hy(t,a.alternate,a),a=a.sibling}function Lr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Ai(4,a,a.return),Lr(a);break;case 1:ga(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&ly(a,a.return,r),Lr(a);break;case 27:gc(a.stateNode);case 26:case 5:ga(a,a.return),Lr(a);break;case 22:a.memoizedState===null&&Lr(a);break;case 30:Lr(a);break;default:Lr(a)}t=t.sibling}}function Ka(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,f=t,m=a,v=m.flags;switch(m.tag){case 0:case 11:case 15:Ka(f,m,r),rc(4,m);break;case 1:if(Ka(f,m,r),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){jt(c,c.return,Z)}if(c=m,f=c.updateQueue,f!==null){var N=c.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)Q0(L[f],N)}catch(Z){jt(c,c.return,Z)}}r&&v&64&&ry(m),lc(m,m.return);break;case 27:uy(m);case 26:case 5:Ka(f,m,r),r&&c===null&&v&4&&oy(m),lc(m,m.return);break;case 12:Ka(f,m,r);break;case 31:Ka(f,m,r),r&&v&4&&py(f,m);break;case 13:Ka(f,m,r),r&&v&4&&gy(f,m);break;case 22:m.memoizedState===null&&Ka(f,m,r),lc(m,m.return);break;case 30:break;default:Ka(f,m,r)}a=a.sibling}}function dm(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Yo(r))}function hm(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Yo(t))}function Ys(t,a,r,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)by(t,a,r,c),a=a.sibling}function by(t,a,r,c){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Ys(t,a,r,c),f&2048&&rc(9,a);break;case 1:Ys(t,a,r,c);break;case 3:Ys(t,a,r,c),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Yo(t)));break;case 12:if(f&2048){Ys(t,a,r,c),t=a.stateNode;try{var m=a.memoizedProps,v=m.id,N=m.onPostCommit;typeof N=="function"&&N(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(L){jt(a,a.return,L)}}else Ys(t,a,r,c);break;case 31:Ys(t,a,r,c);break;case 13:Ys(t,a,r,c);break;case 23:break;case 22:m=a.stateNode,v=a.alternate,a.memoizedState!==null?m._visibility&2?Ys(t,a,r,c):oc(t,a):m._visibility&2?Ys(t,a,r,c):(m._visibility|=2,Ll(t,a,r,c,(a.subtreeFlags&10256)!==0||!1)),f&2048&&dm(v,a);break;case 24:Ys(t,a,r,c),f&2048&&hm(a.alternate,a);break;default:Ys(t,a,r,c)}}function Ll(t,a,r,c,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var m=t,v=a,N=r,L=c,Z=v.flags;switch(v.tag){case 0:case 11:case 15:Ll(m,v,N,L,f),rc(8,v);break;case 23:break;case 22:var ie=v.stateNode;v.memoizedState!==null?ie._visibility&2?Ll(m,v,N,L,f):oc(m,v):(ie._visibility|=2,Ll(m,v,N,L,f)),f&&Z&2048&&dm(v.alternate,v);break;case 24:Ll(m,v,N,L,f),f&&Z&2048&&hm(v.alternate,v);break;default:Ll(m,v,N,L,f)}a=a.sibling}}function oc(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,c=a,f=c.flags;switch(c.tag){case 22:oc(r,c),f&2048&&dm(c.alternate,c);break;case 24:oc(r,c),f&2048&&hm(c.alternate,c);break;default:oc(r,c)}a=a.sibling}}var cc=8192;function Ul(t,a,r){if(t.subtreeFlags&cc)for(t=t.child;t!==null;)vy(t,a,r),t=t.sibling}function vy(t,a,r){switch(t.tag){case 26:Ul(t,a,r),t.flags&cc&&t.memoizedState!==null&&M2(r,Gs,t.memoizedState,t.memoizedProps);break;case 5:Ul(t,a,r);break;case 3:case 4:var c=Gs;Gs=jd(t.stateNode.containerInfo),Ul(t,a,r),Gs=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=cc,cc=16777216,Ul(t,a,r),cc=c):Ul(t,a,r));break;default:Ul(t,a,r)}}function _y(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function uc(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var c=a[r];Tn=c,Ny(c,t)}_y(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)wy(t),t=t.sibling}function wy(t){switch(t.tag){case 0:case 11:case 15:uc(t),t.flags&2048&&Ai(9,t,t.return);break;case 3:uc(t);break;case 12:uc(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,md(t)):uc(t);break;default:uc(t)}}function md(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var c=a[r];Tn=c,Ny(c,t)}_y(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Ai(8,a,a.return),md(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,md(a));break;default:md(a)}t=t.sibling}}function Ny(t,a){for(;Tn!==null;){var r=Tn;switch(r.tag){case 0:case 11:case 15:Ai(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Yo(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,Tn=c;else e:for(r=t;Tn!==null;){c=Tn;var f=c.sibling,m=c.return;if(fy(c),c===r){Tn=null;break e}if(f!==null){f.return=m,Tn=f;break e}Tn=m}}}var QE={getCacheForType:function(t){var a=Cn(un),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return Cn(un).controller.signal}},WE=typeof WeakMap=="function"?WeakMap:Map,_t=0,Mt=null,at=null,lt=0,St=0,hs=null,Ri=!1,Bl=!1,fm=!1,Qa=0,Qt=0,Ci=0,Ur=0,mm=0,fs=0,zl=0,dc=null,Zn=null,pm=!1,pd=0,Ey=0,gd=1/0,xd=null,Ii=null,bn=0,ki=null,ql=null,Wa=0,gm=0,xm=null,Ty=null,hc=0,ym=null;function ms(){return(_t&2)!==0&&lt!==0?lt&-lt:R.T!==null?Em():yu()}function Sy(){if(fs===0)if((lt&536870912)===0||ht){var t=Lt;Lt<<=1,(Lt&3932160)===0&&(Lt=262144),fs=t}else fs=536870912;return t=us.current,t!==null&&(t.flags|=32),fs}function es(t,a,r){(t===Mt&&(St===2||St===9)||t.cancelPendingCommit!==null)&&(Fl(t,0),Di(t,lt,fs,!1)),wn(t,r),((_t&2)===0||t!==Mt)&&(t===Mt&&((_t&2)===0&&(Ur|=r),Qt===4&&Di(t,lt,fs,!1)),xa(t))}function jy(t,a,r){if((_t&6)!==0)throw Error(i(327));var c=!r&&(a&127)===0&&(a&t.expiredLanes)===0||Fn(t,a),f=c?ZE(t,a):vm(t,a,!0),m=c;do{if(f===0){Bl&&!c&&Di(t,a,0,!1);break}else{if(r=t.current.alternate,m&&!XE(r)){f=vm(t,a,!1),m=!1;continue}if(f===2){if(m=a,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var N=t;f=dc;var L=N.current.memoizedState.isDehydrated;if(L&&(Fl(N,v).flags|=256),v=vm(N,v,!1),v!==2){if(fm&&!L){N.errorRecoveryDisabledLanes|=m,Ur|=m,f=4;break e}m=Zn,Zn=f,m!==null&&(Zn===null?Zn=m:Zn.push.apply(Zn,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Fl(t,0),Di(t,a,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Di(c,a,fs,!Ri);break e;case 2:Zn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=pd+300-ft(),10<f)){if(Di(c,a,fs,!Ri),Pn(c,0,!0)!==0)break e;Wa=a,c.timeoutHandle=ab(Ay.bind(null,c,r,Zn,xd,pm,a,fs,Ur,zl,Ri,m,"Throttled",-0,0),f);break e}Ay(c,r,Zn,xd,pm,a,fs,Ur,zl,Ri,m,null,-0,0)}}break}while(!0);xa(t)}function Ay(t,a,r,c,f,m,v,N,L,Z,ie,de,te,ae){if(t.timeoutHandle=-1,de=a.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bs},vy(a,m,de);var Ce=(m&62914560)===m?pd-ft():(m&4194048)===m?Ey-ft():0;if(Ce=O2(de,Ce),Ce!==null){Wa=m,t.cancelPendingCommit=Ce(Vy.bind(null,t,a,m,r,c,f,v,N,L,ie,de,null,te,ae)),Di(t,m,v,!Z);return}}Vy(t,a,m,r,c,f,v,N,L)}function XE(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],m=f.getSnapshot;f=f.value;try{if(!os(m(),f))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Di(t,a,r,c){a&=~mm,a&=~Ur,t.suspendedLanes|=a,t.pingedLanes&=~a,c&&(t.warmLanes|=a),c=t.expirationTimes;for(var f=a;0<f;){var m=31-ke(f),v=1<<m;c[m]=-1,f&=~v}r!==0&&ka(t,r,a)}function yd(){return(_t&6)===0?(fc(0),!1):!0}function bm(){if(at!==null){if(St===0)var t=at.return;else t=at,Ua=Cr=null,Of(t),Dl=null,Qo=0,t=at;for(;t!==null;)iy(t.alternate,t),t=t.return;at=null}}function Fl(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,x2(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Wa=0,bm(),Mt=t,at=r=Pa(t.current,null),lt=a,St=0,hs=null,Ri=!1,Bl=Fn(t,a),fm=!1,zl=fs=mm=Ur=Ci=Qt=0,Zn=dc=null,pm=!1,(a&8)!==0&&(a|=a&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=a;0<c;){var f=31-ke(c),m=1<<f;a|=t[f],c&=~m}return Qa=a,Uu(),r}function Ry(t,a){Xe=null,R.H=sc,a===kl||a===Yu?(a=$0(),St=3):a===Nf?(a=$0(),St=4):St=a===Xf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,hs=a,at===null&&(Qt=1,ld(t,Rs(a,t.current)))}function Cy(){var t=us.current;return t===null?!0:(lt&4194048)===lt?Ds===null:(lt&62914560)===lt||(lt&536870912)!==0?t===Ds:!1}function Iy(){var t=R.H;return R.H=sc,t===null?sc:t}function ky(){var t=R.A;return R.A=QE,t}function bd(){Qt=4,Ri||(lt&4194048)!==lt&&us.current!==null||(Bl=!0),(Ci&134217727)===0&&(Ur&134217727)===0||Mt===null||Di(Mt,lt,fs,!1)}function vm(t,a,r){var c=_t;_t|=2;var f=Iy(),m=ky();(Mt!==t||lt!==a)&&(xd=null,Fl(t,a)),a=!1;var v=Qt;e:do try{if(St!==0&&at!==null){var N=at,L=hs;switch(St){case 8:bm(),v=6;break e;case 3:case 2:case 9:case 6:us.current===null&&(a=!0);var Z=St;if(St=0,hs=null,Hl(t,N,L,Z),r&&Bl){v=0;break e}break;default:Z=St,St=0,hs=null,Hl(t,N,L,Z)}}JE(),v=Qt;break}catch(ie){Ry(t,ie)}while(!0);return a&&t.shellSuspendCounter++,Ua=Cr=null,_t=c,R.H=f,R.A=m,at===null&&(Mt=null,lt=0,Uu()),v}function JE(){for(;at!==null;)Dy(at)}function ZE(t,a){var r=_t;_t|=2;var c=Iy(),f=ky();Mt!==t||lt!==a?(xd=null,gd=ft()+500,Fl(t,a)):Bl=Fn(t,a);e:do try{if(St!==0&&at!==null){a=at;var m=hs;t:switch(St){case 1:St=0,hs=null,Hl(t,a,m,1);break;case 2:case 9:if(F0(m)){St=0,hs=null,My(a);break}a=function(){St!==2&&St!==9||Mt!==t||(St=7),xa(t)},m.then(a,a);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:F0(m)?(St=0,hs=null,My(a)):(St=0,hs=null,Hl(t,a,m,7));break;case 5:var v=null;switch(at.tag){case 26:v=at.memoizedState;case 5:case 27:var N=at;if(v?bb(v):N.stateNode.complete){St=0,hs=null;var L=N.sibling;if(L!==null)at=L;else{var Z=N.return;Z!==null?(at=Z,vd(Z)):at=null}break t}}St=0,hs=null,Hl(t,a,m,5);break;case 6:St=0,hs=null,Hl(t,a,m,6);break;case 8:bm(),Qt=6;break e;default:throw Error(i(462))}}e2();break}catch(ie){Ry(t,ie)}while(!0);return Ua=Cr=null,R.H=c,R.A=f,_t=r,at!==null?0:(Mt=null,lt=0,Uu(),Qt)}function e2(){for(;at!==null&&!Ze();)Dy(at)}function Dy(t){var a=sy(t.alternate,t,Qa);t.memoizedProps=t.pendingProps,a===null?vd(t):at=a}function My(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=Xx(r,a,a.pendingProps,a.type,void 0,lt);break;case 11:a=Xx(r,a,a.pendingProps,a.type.render,a.ref,lt);break;case 5:Of(a);default:iy(r,a),a=at=k0(a,Qa),a=sy(r,a,Qa)}t.memoizedProps=t.pendingProps,a===null?vd(t):at=a}function Hl(t,a,r,c){Ua=Cr=null,Of(a),Dl=null,Qo=0;var f=a.return;try{if(qE(t,f,a,r,lt)){Qt=1,ld(t,Rs(r,t.current)),at=null;return}}catch(m){if(f!==null)throw at=f,m;Qt=1,ld(t,Rs(r,t.current)),at=null;return}a.flags&32768?(ht||c===1?t=!0:Bl||(lt&536870912)!==0?t=!1:(Ri=t=!0,(c===2||c===9||c===3||c===6)&&(c=us.current,c!==null&&c.tag===13&&(c.flags|=16384))),Oy(a,t)):vd(a)}function vd(t){var a=t;do{if((a.flags&32768)!==0){Oy(a,Ri);return}t=a.return;var r=$E(a.alternate,a,Qa);if(r!==null){at=r;return}if(a=a.sibling,a!==null){at=a;return}at=a=t}while(a!==null);Qt===0&&(Qt=5)}function Oy(t,a){do{var r=GE(t.alternate,t);if(r!==null){r.flags&=32767,at=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){at=t;return}at=t=r}while(t!==null);Qt=6,at=null}function Vy(t,a,r,c,f,m,v,N,L){t.cancelPendingCommit=null;do _d();while(bn!==0);if((_t&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(m=a.lanes|a.childLanes,m|=of,cl(t,r,m,v,N,L),t===Mt&&(at=Mt=null,lt=0),ql=a,ki=t,Wa=r,gm=m,xm=f,Ty=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,a2(is,function(){return zy(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=R.T,R.T=null,f=K.p,K.p=2,v=_t,_t|=4;try{YE(t,a,r)}finally{_t=v,K.p=f,R.T=c}}bn=1,Py(),Ly(),Uy()}}function Py(){if(bn===1){bn=0;var t=ki,a=ql,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=R.T,R.T=null;var c=K.p;K.p=2;var f=_t;_t|=4;try{xy(a,t);var m=km,v=N0(t.containerInfo),N=m.focusedElem,L=m.selectionRange;if(v!==N&&N&&N.ownerDocument&&w0(N.ownerDocument.documentElement,N)){if(L!==null&&nf(N)){var Z=L.start,ie=L.end;if(ie===void 0&&(ie=Z),"selectionStart"in N)N.selectionStart=Z,N.selectionEnd=Math.min(ie,N.value.length);else{var de=N.ownerDocument||document,te=de&&de.defaultView||window;if(te.getSelection){var ae=te.getSelection(),Ce=N.textContent.length,qe=Math.min(L.start,Ce),Dt=L.end===void 0?qe:Math.min(L.end,Ce);!ae.extend&&qe>Dt&&(v=Dt,Dt=qe,qe=v);var Y=_0(N,qe),F=_0(N,Dt);if(Y&&F&&(ae.rangeCount!==1||ae.anchorNode!==Y.node||ae.anchorOffset!==Y.offset||ae.focusNode!==F.node||ae.focusOffset!==F.offset)){var J=de.createRange();J.setStart(Y.node,Y.offset),ae.removeAllRanges(),qe>Dt?(ae.addRange(J),ae.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),ae.addRange(J))}}}}for(de=[],ae=N;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<de.length;N++){var ce=de[N];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}Dd=!!Im,km=Im=null}finally{_t=f,K.p=c,R.T=r}}t.current=a,bn=2}}function Ly(){if(bn===2){bn=0;var t=ki,a=ql,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=R.T,R.T=null;var c=K.p;K.p=2;var f=_t;_t|=4;try{hy(t,a.alternate,a)}finally{_t=f,K.p=c,R.T=r}}bn=3}}function Uy(){if(bn===4||bn===3){bn=0,Rt();var t=ki,a=ql,r=Wa,c=Ty;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bn=5:(bn=0,ql=ki=null,By(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ii=null),Da(r),a=a.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(ee,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=R.T,f=K.p,K.p=2,R.T=null;try{for(var m=t.onRecoverableError,v=0;v<c.length;v++){var N=c[v];m(N.value,{componentStack:N.stack})}}finally{R.T=a,K.p=f}}(Wa&3)!==0&&_d(),xa(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===ym?hc++:(hc=0,ym=t):hc=0,fc(0)}}function By(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Yo(a)))}function _d(){return Py(),Ly(),Uy(),zy()}function zy(){if(bn!==5)return!1;var t=ki,a=gm;gm=0;var r=Da(Wa),c=R.T,f=K.p;try{K.p=32>r?32:r,R.T=null,r=xm,xm=null;var m=ki,v=Wa;if(bn=0,ql=ki=null,Wa=0,(_t&6)!==0)throw Error(i(331));var N=_t;if(_t|=4,wy(m.current),by(m,m.current,v,r),_t=N,fc(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(ee,m)}catch{}return!0}finally{K.p=f,R.T=c,By(t,a)}}function qy(t,a,r){a=Rs(r,a),a=Wf(t.stateNode,a,2),t=Ti(t,a,2),t!==null&&(wn(t,2),xa(t))}function jt(t,a,r){if(t.tag===3)qy(t,t,r);else for(;a!==null;){if(a.tag===3){qy(a,t,r);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ii===null||!Ii.has(c))){t=Rs(r,t),r=Fx(2),c=Ti(a,r,2),c!==null&&(Hx(r,c,a,t),wn(c,2),xa(c));break}}a=a.return}}function _m(t,a,r){var c=t.pingCache;if(c===null){c=t.pingCache=new WE;var f=new Set;c.set(a,f)}else f=c.get(a),f===void 0&&(f=new Set,c.set(a,f));f.has(r)||(fm=!0,f.add(r),t=t2.bind(null,t,a,r),a.then(t,t))}function t2(t,a,r){var c=t.pingCache;c!==null&&c.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Mt===t&&(lt&r)===r&&(Qt===4||Qt===3&&(lt&62914560)===lt&&300>ft()-pd?(_t&2)===0&&Fl(t,0):mm|=r,zl===lt&&(zl=0)),xa(t)}function Fy(t,a){a===0&&(a=rn()),t=jr(t,a),t!==null&&(wn(t,a),xa(t))}function n2(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),Fy(t,r)}function s2(t,a){var r=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(a),Fy(t,r)}function a2(t,a){return Te(t,a)}var wd=null,$l=null,wm=!1,Nd=!1,Nm=!1,Mi=0;function xa(t){t!==$l&&t.next===null&&($l===null?wd=$l=t:$l=$l.next=t),Nd=!0,wm||(wm=!0,r2())}function fc(t,a){if(!Nm&&Nd){Nm=!0;do for(var r=!1,c=wd;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,N=c.pingedLanes;m=(1<<31-ke(42|t)+1)-1,m&=f&~(v&~N),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,Yy(c,m))}else m=lt,m=Pn(c,c===Mt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Fn(c,m)||(r=!0,Yy(c,m));c=c.next}while(r);Nm=!1}}function i2(){Hy()}function Hy(){Nd=wm=!1;var t=0;Mi!==0&&g2()&&(t=Mi);for(var a=ft(),r=null,c=wd;c!==null;){var f=c.next,m=$y(c,a);m===0?(c.next=null,r===null?wd=f:r.next=f,f===null&&($l=r)):(r=c,(t!==0||(m&3)!==0)&&(Nd=!0)),c=f}bn!==0&&bn!==5||fc(t),Mi!==0&&(Mi=0)}function $y(t,a){for(var r=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-ke(m),N=1<<v,L=f[v];L===-1?((N&r)===0||(N&c)!==0)&&(f[v]=mr(N,a)):L<=a&&(t.expiredLanes|=N),m&=~N}if(a=Mt,r=lt,r=Pn(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,r===0||t===a&&(St===2||St===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Ve(c),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Fn(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(c!==null&&Ve(c),Da(r)){case 2:case 8:r=mt;break;case 32:r=is;break;case 268435456:r=$;break;default:r=is}return c=Gy.bind(null,t),r=Te(r,c),t.callbackPriority=a,t.callbackNode=r,a}return c!==null&&c!==null&&Ve(c),t.callbackPriority=2,t.callbackNode=null,2}function Gy(t,a){if(bn!==0&&bn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(_d()&&t.callbackNode!==r)return null;var c=lt;return c=Pn(t,t===Mt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(jy(t,c,a),$y(t,ft()),t.callbackNode!=null&&t.callbackNode===r?Gy.bind(null,t):null)}function Yy(t,a){if(_d())return null;jy(t,a,!0)}function r2(){y2(function(){(_t&6)!==0?Te(Gt,i2):Hy()})}function Em(){if(Mi===0){var t=Cl;t===0&&(t=gt,gt<<=1,(gt&261888)===0&&(gt=256)),Mi=t}return Mi}function Ky(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:pl(""+t)}function Qy(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function l2(t,a,r,c,f){if(a==="submit"&&r&&r.stateNode===f){var m=Ky((f[Nn]||null).action),v=c.submitter;v&&(a=(a=v[Nn]||null)?Ky(a.formAction):v.getAttribute("formAction"),a!==null&&(m=a,v=null));var N=new ua("action","action",null,c,f);t.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Mi!==0){var L=v?Qy(f,v):new FormData(f);Hf(r,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(N.preventDefault(),L=v?Qy(f,v):new FormData(f),Hf(r,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var Tm=0;Tm<lf.length;Tm++){var Sm=lf[Tm],o2=Sm.toLowerCase(),c2=Sm[0].toUpperCase()+Sm.slice(1);$s(o2,"on"+c2)}$s(S0,"onAnimationEnd"),$s(j0,"onAnimationIteration"),$s(A0,"onAnimationStart"),$s("dblclick","onDoubleClick"),$s("focusin","onFocus"),$s("focusout","onBlur"),$s(TE,"onTransitionRun"),$s(SE,"onTransitionStart"),$s(jE,"onTransitionCancel"),$s(R0,"onTransitionEnd"),ra("onMouseEnter",["mouseout","mouseover"]),ra("onMouseLeave",["mouseout","mouseover"]),ra("onPointerEnter",["pointerout","pointerover"]),ra("onPointerLeave",["pointerout","pointerover"]),ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ia("onBeforeInput",["compositionend","keypress","textInput","paste"]),ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mc));function Wy(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var c=t[r],f=c.event;c=c.listeners;e:{var m=void 0;if(a)for(var v=c.length-1;0<=v;v--){var N=c[v],L=N.instance,Z=N.currentTarget;if(N=N.listener,L!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=Z;try{m(f)}catch(ie){Lu(ie)}f.currentTarget=null,m=L}else for(v=0;v<c.length;v++){if(N=c[v],L=N.instance,Z=N.currentTarget,N=N.listener,L!==m&&f.isPropagationStopped())break e;m=N,f.currentTarget=Z;try{m(f)}catch(ie){Lu(ie)}f.currentTarget=null,m=L}}}}function it(t,a){var r=a[ul];r===void 0&&(r=a[ul]=new Set);var c=t+"__bubble";r.has(c)||(Xy(a,t,2,!1),r.add(c))}function jm(t,a,r){var c=0;a&&(c|=4),Xy(r,t,c,a)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function Am(t){if(!t[Ed]){t[Ed]=!0,So.forEach(function(r){r!=="selectionchange"&&(u2.has(r)||jm(r,!1,t),jm(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Ed]||(a[Ed]=!0,jm("selectionchange",!1,a))}}function Xy(t,a,r,c){switch(Sb(a)){case 2:var f=L2;break;case 8:f=U2;break;default:f=Fm}r=f.bind(null,a,r,t),f=void 0,!br||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(a,r,{capture:!0,passive:f}):t.addEventListener(a,r,!0):f!==void 0?t.addEventListener(a,r,{passive:f}):t.addEventListener(a,r,!1)}function Rm(t,a,r,c,f){var m=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var N=c.stateNode.containerInfo;if(N===f)break;if(v===4)for(v=c.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;N!==null;){if(v=sa(N),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){c=m=v;continue e}N=N.parentNode}}c=c.return}pi(function(){var Z=m,ie=Ts(r),de=[];e:{var te=C0.get(t);if(te!==void 0){var ae=ua,Ce=t;switch(t){case"keypress":if(_r(r)===0)break e;case"keydown":case"keyup":ae=Ou;break;case"focusin":Ce="focus",ae=Nr;break;case"focusout":Ce="blur",ae=Nr;break;case"beforeblur":case"afterblur":ae=Nr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=Su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=y;break;case S0:case j0:case A0:ae=Au;break;case R0:ae=S;break;case"scroll":case"scrollend":ae=Lo;break;case"wheel":ae=se;break;case"copy":case"cut":case"paste":ae=Ru;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Va;break;case"toggle":case"beforetoggle":ae=We}var qe=(a&4)!==0,Dt=!qe&&(t==="scroll"||t==="scrollend"),Y=qe?te!==null?te+"Capture":null:te;qe=[];for(var F=Z,J;F!==null;){var ce=F;if(J=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||J===null||Y===null||(ce=zs(F,Y),ce!=null&&qe.push(pc(F,ce,J))),Dt)break;F=F.return}0<qe.length&&(te=new ae(te,Ce,null,r,ie),de.push({event:te,listeners:qe}))}}if((a&7)===0){e:{if(te=t==="mouseover"||t==="pointerover",ae=t==="mouseout"||t==="pointerout",te&&r!==Oo&&(Ce=r.relatedTarget||r.fromElement)&&(sa(Ce)||Ce[ta]))break e;if((ae||te)&&(te=ie.window===ie?ie:(te=ie.ownerDocument)?te.defaultView||te.parentWindow:window,ae?(Ce=r.relatedTarget||r.toElement,ae=Z,Ce=Ce?sa(Ce):null,Ce!==null&&(Dt=u(Ce),qe=Ce.tag,Ce!==Dt||qe!==5&&qe!==27&&qe!==6)&&(Ce=null)):(ae=null,Ce=Z),ae!==Ce)){if(qe=Uo,ce="onMouseLeave",Y="onMouseEnter",F="mouse",(t==="pointerout"||t==="pointerover")&&(qe=Va,ce="onPointerLeave",Y="onPointerEnter",F="pointer"),Dt=ae==null?te:rs(ae),J=Ce==null?te:rs(Ce),te=new qe(ce,F+"leave",ae,r,ie),te.target=Dt,te.relatedTarget=J,ce=null,sa(ie)===Z&&(qe=new qe(Y,F+"enter",Ce,r,ie),qe.target=J,qe.relatedTarget=Dt,ce=qe),Dt=ce,ae&&Ce)t:{for(qe=d2,Y=ae,F=Ce,J=0,ce=Y;ce;ce=qe(ce))J++;ce=0;for(var Pe=F;Pe;Pe=qe(Pe))ce++;for(;0<J-ce;)Y=qe(Y),J--;for(;0<ce-J;)F=qe(F),ce--;for(;J--;){if(Y===F||F!==null&&Y===F.alternate){qe=Y;break t}Y=qe(Y),F=qe(F)}qe=null}else qe=null;ae!==null&&Jy(de,te,ae,qe,!1),Ce!==null&&Dt!==null&&Jy(de,Dt,Ce,qe,!0)}}e:{if(te=Z?rs(Z):window,ae=te.nodeName&&te.nodeName.toLowerCase(),ae==="select"||ae==="input"&&te.type==="file")var xt=p0;else if(f0(te))if(g0)xt=wE;else{xt=vE;var De=bE}else ae=te.nodeName,!ae||ae.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&ml(Z.elementType)&&(xt=p0):xt=_E;if(xt&&(xt=xt(t,Z))){m0(de,xt,r,ie);break e}De&&De(t,te,Z),t==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&ko(te,"number",te.value)}switch(De=Z?rs(Z):window,t){case"focusin":(f0(De)||De.contentEditable==="true")&&(wl=De,sf=Z,Ho=null);break;case"focusout":Ho=sf=wl=null;break;case"mousedown":af=!0;break;case"contextmenu":case"mouseup":case"dragend":af=!1,E0(de,r,ie);break;case"selectionchange":if(EE)break;case"keydown":case"keyup":E0(de,r,ie)}var et;if(vt)e:{switch(t){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else _l?Er(t,r)&&(ot="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(ot="onCompositionStart");ot&&(fa&&r.locale!=="ko"&&(_l||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&_l&&(et=Po()):(ca=ie,Vo="value"in ca?ca.value:ca.textContent,_l=!0)),De=Td(Z,ot),0<De.length&&(ot=new ha(ot,t,null,r,ie),de.push({event:ot,listeners:De}),et?ot.data=et:(et=vl(r),et!==null&&(ot.data=et)))),(et=js?pE(t,r):gE(t,r))&&(ot=Td(Z,"onBeforeInput"),0<ot.length&&(De=new ha("onBeforeInput","beforeinput",null,r,ie),de.push({event:De,listeners:ot}),De.data=et)),l2(de,t,Z,r,ie)}Wy(de,a)})}function pc(t,a,r){return{instance:t,listener:a,currentTarget:r}}function Td(t,a){for(var r=a+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=zs(t,r),f!=null&&c.unshift(pc(t,f,m)),f=zs(t,a),f!=null&&c.push(pc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function d2(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Jy(t,a,r,c,f){for(var m=a._reactName,v=[];r!==null&&r!==c;){var N=r,L=N.alternate,Z=N.stateNode;if(N=N.tag,L!==null&&L===c)break;N!==5&&N!==26&&N!==27||Z===null||(L=Z,f?(Z=zs(r,m),Z!=null&&v.unshift(pc(r,Z,L))):f||(Z=zs(r,m),Z!=null&&v.push(pc(r,Z,L)))),r=r.return}v.length!==0&&t.push({event:a,listeners:v})}var h2=/\r\n?/g,f2=/\u0000|\uFFFD/g;function Zy(t){return(typeof t=="string"?t:""+t).replace(h2,`
`).replace(f2,"")}function eb(t,a){return a=Zy(a),Zy(t)===a}function kt(t,a,r,c,f,m){switch(r){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Qn(t,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Qn(t,""+c);break;case"className":ls(t,"class",c);break;case"tabIndex":ls(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ls(t,r,c);break;case"style":Mo(t,c,m);break;case"data":if(a!=="object"){ls(t,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=pl(""+c),t.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(a!=="input"&&kt(t,a,"name",f.name,f,null),kt(t,a,"formEncType",f.formEncType,f,null),kt(t,a,"formMethod",f.formMethod,f,null),kt(t,a,"formTarget",f.formTarget,f,null)):(kt(t,a,"encType",f.encType,f,null),kt(t,a,"method",f.method,f,null),kt(t,a,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=pl(""+c),t.setAttribute(r,c);break;case"onClick":c!=null&&(t.onclick=Bs);break;case"onScroll":c!=null&&it("scroll",t);break;case"onScrollEnd":c!=null&&it("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}r=pl(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""+c):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":c===!0?t.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,c):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(r,c):t.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(r):t.setAttribute(r,c);break;case"popover":it("beforetoggle",t),it("toggle",t),hl(t,"popover",c);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":hl(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Tu.get(r)||r,hl(t,r,c))}}function Cm(t,a,r,c,f,m){switch(r){case"style":Mo(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof c=="string"?Qn(t,c):(typeof c=="number"||typeof c=="bigint")&&Qn(t,""+c);break;case"onScroll":c!=null&&it("scroll",t);break;case"onScrollEnd":c!=null&&it("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Bs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jo.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),a=r.slice(2,f?r.length-7:void 0),m=t[Nn]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(a,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,c,f);break e}r in t?t[r]=c:c===!0?t.setAttribute(r,""):hl(t,r,c)}}}function kn(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",t),it("load",t);var c=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var v=r[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:kt(t,a,m,v,r,null)}}f&&kt(t,a,"srcSet",r.srcSet,r,null),c&&kt(t,a,"src",r.src,r,null);return;case"input":it("invalid",t);var N=m=v=f=null,L=null,Z=null;for(c in r)if(r.hasOwnProperty(c)){var ie=r[c];if(ie!=null)switch(c){case"name":f=ie;break;case"type":v=ie;break;case"checked":L=ie;break;case"defaultChecked":Z=ie;break;case"value":m=ie;break;case"defaultValue":N=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:kt(t,a,c,ie,r,null)}}wu(t,m,N,L,Z,v,f,!1);return;case"select":it("invalid",t),c=v=m=null;for(f in r)if(r.hasOwnProperty(f)&&(N=r[f],N!=null))switch(f){case"value":m=N;break;case"defaultValue":v=N;break;case"multiple":c=N;default:kt(t,a,f,N,r,null)}a=m,r=v,t.multiple=!!c,a!=null?di(t,!!c,a,!1):r!=null&&di(t,!!c,r,!0);return;case"textarea":it("invalid",t),m=f=c=null;for(v in r)if(r.hasOwnProperty(v)&&(N=r[v],N!=null))switch(v){case"value":c=N;break;case"defaultValue":f=N;break;case"children":m=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(i(91));break;default:kt(t,a,v,N,r,null)}hi(t,c,f,m);return;case"option":for(L in r)r.hasOwnProperty(L)&&(c=r[L],c!=null)&&(L==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":kt(t,a,L,c,r,null));return;case"dialog":it("beforetoggle",t),it("toggle",t),it("cancel",t),it("close",t);break;case"iframe":case"object":it("load",t);break;case"video":case"audio":for(c=0;c<mc.length;c++)it(mc[c],t);break;case"image":it("error",t),it("load",t);break;case"details":it("toggle",t);break;case"embed":case"source":case"link":it("error",t),it("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in r)if(r.hasOwnProperty(Z)&&(c=r[Z],c!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:kt(t,a,Z,c,r,null)}return;default:if(ml(a)){for(ie in r)r.hasOwnProperty(ie)&&(c=r[ie],c!==void 0&&Cm(t,a,ie,c,r,void 0));return}}for(N in r)r.hasOwnProperty(N)&&(c=r[N],c!=null&&kt(t,a,N,c,r,null))}function m2(t,a,r,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,N=null,L=null,Z=null,ie=null;for(ae in r){var de=r[ae];if(r.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":L=de;default:c.hasOwnProperty(ae)||kt(t,a,ae,null,c,de)}}for(var te in c){var ae=c[te];if(de=r[te],c.hasOwnProperty(te)&&(ae!=null||de!=null))switch(te){case"type":m=ae;break;case"name":f=ae;break;case"checked":Z=ae;break;case"defaultChecked":ie=ae;break;case"value":v=ae;break;case"defaultValue":N=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,a));break;default:ae!==de&&kt(t,a,te,ae,c,de)}}fl(t,v,N,L,Z,ie,m,f);return;case"select":ae=v=N=te=null;for(m in r)if(L=r[m],r.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ae=L;default:c.hasOwnProperty(m)||kt(t,a,m,null,c,L)}for(f in c)if(m=c[f],L=r[f],c.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":te=m;break;case"defaultValue":N=m;break;case"multiple":v=m;default:m!==L&&kt(t,a,f,m,c,L)}a=N,r=v,c=ae,te!=null?di(t,!!r,te,!1):!!c!=!!r&&(a!=null?di(t,!!r,a,!0):di(t,!!r,r?[]:"",!1));return;case"textarea":ae=te=null;for(N in r)if(f=r[N],r.hasOwnProperty(N)&&f!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:kt(t,a,N,null,c,f)}for(v in c)if(f=c[v],m=r[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":te=f;break;case"defaultValue":ae=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&kt(t,a,v,f,c,m)}Nu(t,te,ae);return;case"option":for(var Ce in r)te=r[Ce],r.hasOwnProperty(Ce)&&te!=null&&!c.hasOwnProperty(Ce)&&(Ce==="selected"?t.selected=!1:kt(t,a,Ce,null,c,te));for(L in c)te=c[L],ae=r[L],c.hasOwnProperty(L)&&te!==ae&&(te!=null||ae!=null)&&(L==="selected"?t.selected=te&&typeof te!="function"&&typeof te!="symbol":kt(t,a,L,te,c,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in r)te=r[qe],r.hasOwnProperty(qe)&&te!=null&&!c.hasOwnProperty(qe)&&kt(t,a,qe,null,c,te);for(Z in c)if(te=c[Z],ae=r[Z],c.hasOwnProperty(Z)&&te!==ae&&(te!=null||ae!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:kt(t,a,Z,te,c,ae)}return;default:if(ml(a)){for(var Dt in r)te=r[Dt],r.hasOwnProperty(Dt)&&te!==void 0&&!c.hasOwnProperty(Dt)&&Cm(t,a,Dt,void 0,c,te);for(ie in c)te=c[ie],ae=r[ie],!c.hasOwnProperty(ie)||te===ae||te===void 0&&ae===void 0||Cm(t,a,ie,te,c,ae);return}}for(var Y in r)te=r[Y],r.hasOwnProperty(Y)&&te!=null&&!c.hasOwnProperty(Y)&&kt(t,a,Y,null,c,te);for(de in c)te=c[de],ae=r[de],!c.hasOwnProperty(de)||te===ae||te==null&&ae==null||kt(t,a,de,te,c,ae)}function tb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p2(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var f=r[c],m=f.transferSize,v=f.initiatorType,N=f.duration;if(m&&N&&tb(v)){for(v=0,N=f.responseEnd,c+=1;c<r.length;c++){var L=r[c],Z=L.startTime;if(Z>N)break;var ie=L.transferSize,de=L.initiatorType;ie&&tb(de)&&(L=L.responseEnd,v+=ie*(L<N?1:(N-Z)/(L-Z)))}if(--c,a+=8*(m+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Im=null,km=null;function Sd(t){return t.nodeType===9?t:t.ownerDocument}function nb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sb(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Dm(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Mm=null;function g2(){var t=window.event;return t&&t.type==="popstate"?t===Mm?!1:(Mm=t,!0):(Mm=null,!1)}var ab=typeof setTimeout=="function"?setTimeout:void 0,x2=typeof clearTimeout=="function"?clearTimeout:void 0,ib=typeof Promise=="function"?Promise:void 0,y2=typeof queueMicrotask=="function"?queueMicrotask:typeof ib<"u"?function(t){return ib.resolve(null).then(t).catch(b2)}:ab;function b2(t){setTimeout(function(){throw t})}function Oi(t){return t==="head"}function rb(t,a){var r=a,c=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(c===0){t.removeChild(f),Ql(a);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")gc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,gc(r);for(var m=r.firstChild;m;){var v=m.nextSibling,N=m.nodeName;m[na]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=v}}else r==="body"&&gc(t.ownerDocument.body);r=f}while(r);Ql(a)}function lb(t,a){var r=t;t=0;do{var c=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=c}while(r)}function Om(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Om(r),dl(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function v2(t,a,r,c){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[na])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Ms(t.nextSibling),t===null)break}return null}function _2(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ms(t.nextSibling),t===null))return null;return t}function ob(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ms(t.nextSibling),t===null))return null;return t}function Vm(t){return t.data==="$?"||t.data==="$~"}function Pm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function w2(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var c=function(){a(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Ms(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Lm=null;function cb(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return Ms(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function ub(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function db(t,a,r){switch(a=Sd(r),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function gc(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);dl(t)}var Os=new Map,hb=new Set;function jd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xa=K.d;K.d={f:N2,r:E2,D:T2,C:S2,L:j2,m:A2,X:C2,S:R2,M:I2};function N2(){var t=Xa.f(),a=yd();return t||a}function E2(t){var a=Es(t);a!==null&&a.tag===5&&a.type==="form"?Rx(a):Xa.r(t)}var Gl=typeof document>"u"?null:document;function fb(t,a,r){var c=Gl;if(c&&typeof a=="string"&&a){var f=Kn(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),hb.has(f)||(hb.add(f),t={rel:t,crossOrigin:r,href:a},c.querySelector(f)===null&&(a=c.createElement("link"),kn(a,"link",t),on(a),c.head.appendChild(a)))}}function T2(t){Xa.D(t),fb("dns-prefetch",t,null)}function S2(t,a){Xa.C(t,a),fb("preconnect",t,a)}function j2(t,a,r){Xa.L(t,a,r);var c=Gl;if(c&&t&&a){var f='link[rel="preload"][as="'+Kn(a)+'"]';a==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Kn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Kn(r.imageSizes)+'"]')):f+='[href="'+Kn(t)+'"]';var m=f;switch(a){case"style":m=Yl(t);break;case"script":m=Kl(t)}Os.has(m)||(t=w({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),Os.set(m,t),c.querySelector(f)!==null||a==="style"&&c.querySelector(xc(m))||a==="script"&&c.querySelector(yc(m))||(a=c.createElement("link"),kn(a,"link",t),on(a),c.head.appendChild(a)))}}function A2(t,a){Xa.m(t,a);var r=Gl;if(r&&t){var c=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Kn(c)+'"][href="'+Kn(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Kl(t)}if(!Os.has(m)&&(t=w({rel:"modulepreload",href:t},a),Os.set(m,t),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(yc(m)))return}c=r.createElement("link"),kn(c,"link",t),on(c),r.head.appendChild(c)}}}function R2(t,a,r){Xa.S(t,a,r);var c=Gl;if(c&&t){var f=aa(c).hoistableStyles,m=Yl(t);a=a||"default";var v=f.get(m);if(!v){var N={loading:0,preload:null};if(v=c.querySelector(xc(m)))N.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":a},r),(r=Os.get(m))&&Um(t,r);var L=v=c.createElement("link");on(L),kn(L,"link",t),L._p=new Promise(function(Z,ie){L.onload=Z,L.onerror=ie}),L.addEventListener("load",function(){N.loading|=1}),L.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Ad(v,a,c)}v={type:"stylesheet",instance:v,count:1,state:N},f.set(m,v)}}}function C2(t,a){Xa.X(t,a);var r=Gl;if(r&&t){var c=aa(r).hoistableScripts,f=Kl(t),m=c.get(f);m||(m=r.querySelector(yc(f)),m||(t=w({src:t,async:!0},a),(a=Os.get(f))&&Bm(t,a),m=r.createElement("script"),on(m),kn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function I2(t,a){Xa.M(t,a);var r=Gl;if(r&&t){var c=aa(r).hoistableScripts,f=Kl(t),m=c.get(f);m||(m=r.querySelector(yc(f)),m||(t=w({src:t,async:!0,type:"module"},a),(a=Os.get(f))&&Bm(t,a),m=r.createElement("script"),on(m),kn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function mb(t,a,r,c){var f=(f=Ie.current)?jd(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=Yl(r.href),r=aa(f).hoistableStyles,c=r.get(a),c||(c={type:"style",instance:null,count:0,state:null},r.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Yl(r.href);var m=aa(f).hoistableStyles,v=m.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=f.querySelector(xc(t)))&&!m._p&&(v.instance=m,v.state.loading=5),Os.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Os.set(t,r),m||k2(f,t,r,v.state))),a&&c===null)throw Error(i(528,""));return v}if(a&&c!==null)throw Error(i(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Kl(r),r=aa(f).hoistableScripts,c=r.get(a),c||(c={type:"script",instance:null,count:0,state:null},r.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Yl(t){return'href="'+Kn(t)+'"'}function xc(t){return'link[rel="stylesheet"]['+t+"]"}function pb(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function k2(t,a,r,c){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=t.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),kn(a,"link",r),on(a),t.head.appendChild(a))}function Kl(t){return'[src="'+Kn(t)+'"]'}function yc(t){return"script[async]"+t}function gb(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var c=t.querySelector('style[data-href~="'+Kn(r.href)+'"]');if(c)return a.instance=c,on(c),c;var f=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),on(c),kn(c,"style",f),Ad(c,r.precedence,t),a.instance=c;case"stylesheet":f=Yl(r.href);var m=t.querySelector(xc(f));if(m)return a.state.loading|=4,a.instance=m,on(m),m;c=pb(r),(f=Os.get(f))&&Um(c,f),m=(t.ownerDocument||t).createElement("link"),on(m);var v=m;return v._p=new Promise(function(N,L){v.onload=N,v.onerror=L}),kn(m,"link",c),a.state.loading|=4,Ad(m,r.precedence,t),a.instance=m;case"script":return m=Kl(r.src),(f=t.querySelector(yc(m)))?(a.instance=f,on(f),f):(c=r,(f=Os.get(m))&&(c=w({},r),Bm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),on(f),kn(f,"link",c),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,Ad(c,r.precedence,t));return a.instance}function Ad(t,a,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var N=c[v];if(N.dataset.precedence===a)m=N;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function Um(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Bm(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Rd=null;function xb(t,a,r){if(Rd===null){var c=new Map,f=Rd=new Map;f.set(r,c)}else f=Rd,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(t))return c;for(c.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var m=r[f];if(!(m[na]||m[ln]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(a)||"";v=t+v;var N=c.get(v);N?N.push(m):c.set(v,[m])}}return c}function yb(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function D2(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function bb(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function M2(t,a,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Yl(c.href),m=a.querySelector(xc(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Cd.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=m,on(m);return}m=a.ownerDocument||a,c=pb(c),(f=Os.get(f))&&Um(c,f),m=m.createElement("link"),on(m);var v=m;v._p=new Promise(function(N,L){v.onload=N,v.onerror=L}),kn(m,"link",c),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Cd.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var zm=0;function O2(t,a){return t.stylesheets&&t.count===0&&kd(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var c=setTimeout(function(){if(t.stylesheets&&kd(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+a);0<t.imgBytes&&zm===0&&(zm=62500*p2());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&kd(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>zm?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Cd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Id=null;function kd(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Id=new Map,a.forEach(V2,t),Id=null,Cd.call(t))}function V2(t,a){if(!(a.state.loading&4)){var r=Id.get(t);if(r)var c=r.get(null);else{r=new Map,Id.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),c=v)}c&&r.set(null,c)}f=a.instance,v=f.getAttribute("data-precedence"),m=r.get(v)||c,m===c&&r.set(null,f),r.set(v,f),this.count++,c=Cd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var bc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function P2(t,a,r,c,f,m,v,N,L){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.hiddenUpdates=Hn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function vb(t,a,r,c,f,m,v,N,L,Z,ie,de){return t=new P2(t,a,r,v,L,Z,ie,de,N),a=1,m===!0&&(a|=24),m=cs(3,null,null,a),t.current=m,m.stateNode=t,a=vf(),a.refCount++,t.pooledCache=a,a.refCount++,m.memoizedState={element:c,isDehydrated:r,cache:a},Ef(m),t}function _b(t){return t?(t=Tl,t):Tl}function wb(t,a,r,c,f,m){f=_b(f),c.context===null?c.context=f:c.pendingContext=f,c=Ei(a),c.payload={element:r},m=m===void 0?null:m,m!==null&&(c.callback=m),r=Ti(t,c,a),r!==null&&(es(r,t,a),Xo(r,t,a))}function Nb(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function qm(t,a){Nb(t,a),(t=t.alternate)&&Nb(t,a)}function Eb(t){if(t.tag===13||t.tag===31){var a=jr(t,67108864);a!==null&&es(a,t,67108864),qm(t,67108864)}}function Tb(t){if(t.tag===13||t.tag===31){var a=ms();a=ci(a);var r=jr(t,a);r!==null&&es(r,t,a),qm(t,a)}}var Dd=!0;function L2(t,a,r,c){var f=R.T;R.T=null;var m=K.p;try{K.p=2,Fm(t,a,r,c)}finally{K.p=m,R.T=f}}function U2(t,a,r,c){var f=R.T;R.T=null;var m=K.p;try{K.p=8,Fm(t,a,r,c)}finally{K.p=m,R.T=f}}function Fm(t,a,r,c){if(Dd){var f=Hm(c);if(f===null)Rm(t,a,c,Md,r),jb(t,c);else if(z2(f,t,a,r,c))c.stopPropagation();else if(jb(t,c),a&4&&-1<B2.indexOf(t)){for(;f!==null;){var m=Es(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=an(m.pendingLanes);if(v!==0){var N=m;for(N.pendingLanes|=2,N.entangledLanes|=2;v;){var L=1<<31-ke(v);N.entanglements[1]|=L,v&=~L}xa(m),(_t&6)===0&&(gd=ft()+500,fc(0))}}break;case 31:case 13:N=jr(m,2),N!==null&&es(N,m,2),yd(),qm(m,2)}if(m=Hm(c),m===null&&Rm(t,a,c,Md,r),m===f)break;f=m}f!==null&&c.stopPropagation()}else Rm(t,a,c,null,r)}}function Hm(t){return t=Ts(t),$m(t)}var Md=null;function $m(t){if(Md=null,t=sa(t),t!==null){var a=u(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=h(a),t!==null)return t;t=null}else if(r===31){if(t=p(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Md=t,null}function Sb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rt()){case Gt:return 2;case mt:return 8;case is:case Ns:return 32;case $:return 268435456;default:return 32}default:return 32}}var Gm=!1,Vi=null,Pi=null,Li=null,vc=new Map,_c=new Map,Ui=[],B2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jb(t,a){switch(t){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Pi=null;break;case"mouseover":case"mouseout":Li=null;break;case"pointerover":case"pointerout":vc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(a.pointerId)}}function wc(t,a,r,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:a,domEventName:r,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},a!==null&&(a=Es(a),a!==null&&Eb(a)),t):(t.eventSystemFlags|=c,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function z2(t,a,r,c,f){switch(a){case"focusin":return Vi=wc(Vi,t,a,r,c,f),!0;case"dragenter":return Pi=wc(Pi,t,a,r,c,f),!0;case"mouseover":return Li=wc(Li,t,a,r,c,f),!0;case"pointerover":var m=f.pointerId;return vc.set(m,wc(vc.get(m)||null,t,a,r,c,f)),!0;case"gotpointercapture":return m=f.pointerId,_c.set(m,wc(_c.get(m)||null,t,a,r,c,f)),!0}return!1}function Ab(t){var a=sa(t.target);if(a!==null){var r=u(a);if(r!==null){if(a=r.tag,a===13){if(a=h(r),a!==null){t.blockedOn=a,Ls(t.priority,function(){Tb(r)});return}}else if(a===31){if(a=p(r),a!==null){t.blockedOn=a,Ls(t.priority,function(){Tb(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Od(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=Hm(t.nativeEvent);if(r===null){r=t.nativeEvent;var c=new r.constructor(r.type,r);Oo=c,r.target.dispatchEvent(c),Oo=null}else return a=Es(r),a!==null&&Eb(a),t.blockedOn=r,!1;a.shift()}return!0}function Rb(t,a,r){Od(t)&&r.delete(a)}function q2(){Gm=!1,Vi!==null&&Od(Vi)&&(Vi=null),Pi!==null&&Od(Pi)&&(Pi=null),Li!==null&&Od(Li)&&(Li=null),vc.forEach(Rb),_c.forEach(Rb)}function Vd(t,a){t.blockedOn===a&&(t.blockedOn=null,Gm||(Gm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,q2)))}var Pd=null;function Cb(t){Pd!==t&&(Pd=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Pd===t&&(Pd=null);for(var a=0;a<t.length;a+=3){var r=t[a],c=t[a+1],f=t[a+2];if(typeof c!="function"){if($m(c||r)===null)continue;break}var m=Es(r);m!==null&&(t.splice(a,3),a-=3,Hf(m,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function Ql(t){function a(L){return Vd(L,t)}Vi!==null&&Vd(Vi,t),Pi!==null&&Vd(Pi,t),Li!==null&&Vd(Li,t),vc.forEach(a),_c.forEach(a);for(var r=0;r<Ui.length;r++){var c=Ui[r];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Ui.length&&(r=Ui[0],r.blockedOn===null);)Ab(r),r.blockedOn===null&&Ui.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],m=r[c+1],v=f[Nn]||null;if(typeof m=="function")v||Cb(r);else if(v){var N=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Nn]||null)N=v.formAction;else if($m(f)!==null)continue}else N=v.action;typeof N=="function"?r[c+1]=N:(r.splice(c,3),c-=3),Cb(r)}}}function Ib(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function Ym(t){this._internalRoot=t}Ld.prototype.render=Ym.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var r=a.current,c=ms();wb(r,c,t,a,null,null)},Ld.prototype.unmount=Ym.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;wb(t.current,2,null,t,null,null),yd(),a[ta]=null}};function Ld(t){this._internalRoot=t}Ld.prototype.unstable_scheduleHydration=function(t){if(t){var a=yu();t={blockedOn:null,target:t,priority:a};for(var r=0;r<Ui.length&&a!==0&&a<Ui[r].priority;r++);Ui.splice(r,0,t),r===0&&Ab(t)}};var kb=e.version;if(kb!=="19.2.4")throw Error(i(527,kb,"19.2.4"));K.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=x(a),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var F2={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{ee=Ud.inject(F2),xe=Ud}catch{}}return Ec.createRoot=function(t,a){if(!l(t))throw Error(i(299));var r=!1,c="",f=Ux,m=Bx,v=zx;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=vb(t,1,!1,null,null,r,c,null,f,m,v,Ib),t[ta]=a.current,Am(t),new Ym(a)},Ec.hydrateRoot=function(t,a,r){if(!l(t))throw Error(i(299));var c=!1,f="",m=Ux,v=Bx,N=zx,L=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(N=r.onRecoverableError),r.formState!==void 0&&(L=r.formState)),a=vb(t,1,!0,a,r??null,c,f,L,m,v,N,Ib),a.context=_b(null),r=a.current,c=ms(),c=ci(c),f=Ei(c),f.callback=null,Ti(r,f,c),r=c,a.current.lanes=r,wn(a,r),xa(a),t[ta]=a.current,Am(t),new Ld(a)},Ec.version="19.2.4",Ec}var qb;function eT(){if(qb)return Wm.exports;qb=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Wm.exports=Z2(),Wm.exports}var tT=eT();const nT=Q_(tT);var Fb="popstate";function sT(s={}){function e(l,u){let{pathname:h="/",search:p="",hash:g=""}=sl(l.location.hash.substring(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),Np("",{pathname:h,search:p,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(l,u){let h=l.document.querySelector("base"),p="";if(h&&h.getAttribute("href")){let g=l.location.href,x=g.indexOf("#");p=x===-1?g:g.slice(0,x)}return p+"#"+(typeof u=="string"?u:Hc(u))}function i(l,u){Ps(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return iT(e,n,i,s)}function Ft(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Ps(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aT(){return Math.random().toString(36).substring(2,10)}function Hb(s,e){return{usr:s.state,key:s.key,idx:e}}function Np(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?sl(e):e,state:n,key:e&&e.key||i||aT()}}function Hc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function sl(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function iT(s,e,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,h=l.history,p="POP",g=null,x=b();x==null&&(x=0,h.replaceState({...h.state,idx:x},""));function b(){return(h.state||{idx:null}).idx}function w(){p="POP";let V=b(),B=V==null?null:V-x;x=V,g&&g({action:p,location:U.location,delta:B})}function T(V,B){p="PUSH";let G=Np(U.location,V,B);n&&n(G,V),x=b()+1;let Q=Hb(G,x),ge=U.createHref(G);try{h.pushState(Q,"",ge)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;l.location.assign(ge)}u&&g&&g({action:p,location:U.location,delta:1})}function C(V,B){p="REPLACE";let G=Np(U.location,V,B);n&&n(G,V),x=b();let Q=Hb(G,x),ge=U.createHref(G);h.replaceState(Q,"",ge),u&&g&&g({action:p,location:U.location,delta:0})}function H(V){return rT(V)}let U={get action(){return p},get location(){return s(l,h)},listen(V){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Fb,w),g=V,()=>{l.removeEventListener(Fb,w),g=null}},createHref(V){return e(l,V)},createURL:H,encodeLocation(V){let B=H(V);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:T,replace:C,go(V){return h.go(V)}};return U}function rT(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ft(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Hc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function W_(s,e,n="/"){return lT(s,e,n,!1)}function lT(s,e,n,i){let l=typeof e=="string"?sl(e):e,u=ni(l.pathname||"/",n);if(u==null)return null;let h=X_(s);oT(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let x=bT(u);p=xT(h[g],x,i)}return p}function X_(s,e=[],n=[],i="",l=!1){let u=(h,p,g=l,x)=>{let b={relativePath:x===void 0?h.path||"":x,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;Ft(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let w=ei([i,b.relativePath]),T=n.concat(b);h.children&&h.children.length>0&&(Ft(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),X_(h.children,e,T,w,g)),!(h.path==null&&!h.index)&&e.push({path:w,score:pT(w,h.index),routesMeta:T})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of J_(h.path))u(h,p,!0,g)}),e}function J_(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let h=J_(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function oT(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:gT(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var cT=/^:[\w-]+$/,uT=3,dT=2,hT=1,fT=10,mT=-2,$b=s=>s==="*";function pT(s,e){let n=s.split("/"),i=n.length;return n.some($b)&&(i+=mT),e&&(i+=dT),n.filter(l=>!$b(l)).reduce((l,u)=>l+(cT.test(u)?uT:u===""?hT:fT),i)}function gT(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function xT(s,e,n=!1){let{routesMeta:i}=s,l={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],x=p===i.length-1,b=u==="/"?e:e.slice(u.length)||"/",w=lh({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},b),T=g.route;if(!w&&x&&n&&!i[i.length-1].route.index&&(w=lh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!w)return null;Object.assign(l,w.params),h.push({params:l,pathname:ei([u,w.pathname]),pathnameBase:NT(ei([u,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(u=ei([u,w.pathnameBase]))}return h}function lh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=yT(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],h=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((x,{paramName:b,isOptional:w},T)=>{if(b==="*"){let H=p[T]||"";h=u.slice(0,u.length-H.length).replace(/(.)\/+$/,"$1")}const C=p[T];return w&&!C?x[b]=void 0:x[b]=(C||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:h,pattern:s}}function yT(s,e=!1,n=!0){Ps(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function bT(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ps(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ni(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var vT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function _T(s,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof s=="string"?sl(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=Gb(n.substring(1),"/"):u=Gb(n,e)):u=e,{pathname:u,search:ET(i),hash:TT(l)}}function Gb(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function ep(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function wT(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function tg(s){let e=wT(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function ng(s,e,n,i=!1){let l;typeof s=="string"?l=sl(s):(l={...s},Ft(!l.pathname||!l.pathname.includes("?"),ep("?","pathname","search",l)),Ft(!l.pathname||!l.pathname.includes("#"),ep("#","pathname","hash",l)),Ft(!l.search||!l.search.includes("#"),ep("#","search","hash",l)));let u=s===""||l.pathname==="",h=u?"/":l.pathname,p;if(h==null)p=n;else{let w=e.length-1;if(!i&&h.startsWith("..")){let T=h.split("/");for(;T[0]==="..";)T.shift(),w-=1;l.pathname=T.join("/")}p=w>=0?e[w]:"/"}let g=_T(l,p),x=h&&h!=="/"&&h.endsWith("/"),b=(u||h===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(x||b)&&(g.pathname+="/"),g}var ei=s=>s.join("/").replace(/\/\/+/g,"/"),NT=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),ET=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,TT=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,ST=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function jT(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function AT(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Z_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ew(s,e){let n=s;if(typeof n!="string"||!vT.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(Z_)try{let u=new URL(window.location.href),h=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=ni(h.pathname,e);h.origin===u.origin&&p!=null?n=p+h.search+h.hash:l=!0}catch{Ps(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var tw=["POST","PUT","PATCH","DELETE"];new Set(tw);var RT=["GET",...tw];new Set(RT);var xo=E.createContext(null);xo.displayName="DataRouter";var Rh=E.createContext(null);Rh.displayName="DataRouterState";var CT=E.createContext(!1),nw=E.createContext({isTransitioning:!1});nw.displayName="ViewTransition";var IT=E.createContext(new Map);IT.displayName="Fetchers";var kT=E.createContext(null);kT.displayName="Await";var ws=E.createContext(null);ws.displayName="Navigation";var su=E.createContext(null);su.displayName="Location";var ea=E.createContext({outlet:null,matches:[],isDataRoute:!1});ea.displayName="Route";var sg=E.createContext(null);sg.displayName="RouteError";var sw="REACT_ROUTER_ERROR",DT="REDIRECT",MT="ROUTE_ERROR_RESPONSE";function OT(s){if(s.startsWith(`${sw}:${DT}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function VT(s){if(s.startsWith(`${sw}:${MT}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ST(e.status,e.statusText,e.data)}catch{}}function PT(s,{relative:e}={}){Ft(yo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=E.useContext(ws),{hash:l,pathname:u,search:h}=au(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:ei([n,u])),i.createHref({pathname:p,search:h,hash:l})}function yo(){return E.useContext(su)!=null}function or(){return Ft(yo(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(su).location}var aw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iw(s){E.useContext(ws).static||E.useLayoutEffect(s)}function bo(){let{isDataRoute:s}=E.useContext(ea);return s?WT():LT()}function LT(){Ft(yo(),"useNavigate() may be used only in the context of a <Router> component.");let s=E.useContext(xo),{basename:e,navigator:n}=E.useContext(ws),{matches:i}=E.useContext(ea),{pathname:l}=or(),u=JSON.stringify(tg(i)),h=E.useRef(!1);return iw(()=>{h.current=!0}),E.useCallback((g,x={})=>{if(Ps(h.current,aw),!h.current)return;if(typeof g=="number"){n.go(g);return}let b=ng(g,JSON.parse(u),l,x.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:ei([e,b.pathname])),(x.replace?n.replace:n.push)(b,x.state,x)},[e,n,u,l,s])}E.createContext(null);function vo(){let{matches:s}=E.useContext(ea),e=s[s.length-1];return e?e.params:{}}function au(s,{relative:e}={}){let{matches:n}=E.useContext(ea),{pathname:i}=or(),l=JSON.stringify(tg(n));return E.useMemo(()=>ng(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function UT(s,e){return rw(s,e)}function rw(s,e,n,i,l){Ft(yo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=E.useContext(ws),{matches:h}=E.useContext(ea),p=h[h.length-1],g=p?p.params:{},x=p?p.pathname:"/",b=p?p.pathnameBase:"/",w=p&&p.route;{let G=w&&w.path||"";ow(x,!w||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let T=or(),C;if(e){let G=typeof e=="string"?sl(e):e;Ft(b==="/"||G.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${G.pathname}" was given in the \`location\` prop.`),C=G}else C=T;let H=C.pathname||"/",U=H;if(b!=="/"){let G=b.replace(/^\//,"").split("/");U="/"+H.replace(/^\//,"").split("/").slice(G.length).join("/")}let V=W_(s,{pathname:U});Ps(w||V!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Ps(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=HT(V&&V.map(G=>Object.assign({},G,{params:Object.assign({},g,G.params),pathname:ei([b,u.encodeLocation?u.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?b:ei([b,u.encodeLocation?u.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),h,n,i,l);return e&&B?E.createElement(su.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},B):B}function BT(){let s=QT(),e=jT(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:u},"ErrorBoundary")," or"," ",E.createElement("code",{style:u},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:l},n):null,h)}var zT=E.createElement(BT,null),lw=class extends E.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=VT(s.digest);n&&(s=n)}let e=s!==void 0?E.createElement(ea.Provider,{value:this.props.routeContext},E.createElement(sg.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?E.createElement(qT,{error:s},e):e}};lw.contextType=CT;var tp=new WeakMap;function qT({children:s,error:e}){let{basename:n}=E.useContext(ws);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=OT(e.digest);if(i){let l=tp.get(e);if(l)throw l;let u=ew(i.location,n);if(Z_&&!tp.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw tp.set(e,h),h}return E.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function FT({routeContext:s,match:e,children:n}){let i=E.useContext(xo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(ea.Provider,{value:s},n)}function HT(s,e=[],n=null,i=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,h=n?.errors;if(h!=null){let b=u.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);Ft(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(n)for(let b=0;b<u.length;b++){let w=u[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=b),w.route.id){let{loaderData:T,errors:C}=n,H=w.route.loader&&!T.hasOwnProperty(w.route.id)&&(!C||C[w.route.id]===void 0);if(w.route.lazy||H){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let x=n&&i?(b,w)=>{i(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:AT(n.matches),errorInfo:w})}:void 0;return u.reduceRight((b,w,T)=>{let C,H=!1,U=null,V=null;n&&(C=h&&w.route.id?h[w.route.id]:void 0,U=w.route.errorElement||zT,p&&(g<0&&T===0?(ow("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,V=null):g===T&&(H=!0,V=w.route.hydrateFallbackElement||null)));let B=e.concat(u.slice(0,T+1)),G=()=>{let Q;return C?Q=U:H?Q=V:w.route.Component?Q=E.createElement(w.route.Component,null):w.route.element?Q=w.route.element:Q=b,E.createElement(FT,{match:w,routeContext:{outlet:b,matches:B,isDataRoute:n!=null},children:Q})};return n&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?E.createElement(lw,{location:n.location,revalidation:n.revalidation,component:U,error:C,children:G(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:x}):G()},null)}function ag(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $T(s){let e=E.useContext(xo);return Ft(e,ag(s)),e}function GT(s){let e=E.useContext(Rh);return Ft(e,ag(s)),e}function YT(s){let e=E.useContext(ea);return Ft(e,ag(s)),e}function ig(s){let e=YT(s),n=e.matches[e.matches.length-1];return Ft(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function KT(){return ig("useRouteId")}function QT(){let s=E.useContext(sg),e=GT("useRouteError"),n=ig("useRouteError");return s!==void 0?s:e.errors?.[n]}function WT(){let{router:s}=$T("useNavigate"),e=ig("useNavigate"),n=E.useRef(!1);return iw(()=>{n.current=!0}),E.useCallback(async(l,u={})=>{Ps(n.current,aw),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var Yb={};function ow(s,e,n){!e&&!Yb[s]&&(Yb[s]=!0,Ps(!1,n))}E.memo(XT);function XT({routes:s,future:e,state:n,onError:i}){return rw(s,void 0,n,i,e)}function JT({to:s,replace:e,state:n,relative:i}){Ft(yo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=E.useContext(ws);Ps(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=E.useContext(ea),{pathname:h}=or(),p=bo(),g=ng(s,tg(u),h,i==="path"),x=JSON.stringify(g);return E.useEffect(()=>{p(JSON.parse(x),{replace:e,state:n,relative:i})},[p,x,i,e,n]),null}function Ks(s){Ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZT({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:h}){Ft(!yo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=E.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:h,future:{}}),[p,l,u,h]);typeof n=="string"&&(n=sl(n));let{pathname:x="/",search:b="",hash:w="",state:T=null,key:C="default"}=n,H=E.useMemo(()=>{let U=ni(x,p);return U==null?null:{location:{pathname:U,search:b,hash:w,state:T,key:C},navigationType:i}},[p,x,b,w,T,C,i]);return Ps(H!=null,`<Router basename="${p}"> is not able to match the URL "${x}${b}${w}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:E.createElement(ws.Provider,{value:g},E.createElement(su.Provider,{children:e,value:H}))}function eS({children:s,location:e}){return UT(Ep(s),e)}function Ep(s,e=[]){let n=[];return E.Children.forEach(s,(i,l)=>{if(!E.isValidElement(i))return;let u=[...e,l];if(i.type===E.Fragment){n.push.apply(n,Ep(i.props.children,u));return}Ft(i.type===Ks,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ft(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=Ep(i.props.children,u)),n.push(h)}),n}var Qd="get",Wd="application/x-www-form-urlencoded";function Ch(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function tS(s){return Ch(s)&&s.tagName.toLowerCase()==="button"}function nS(s){return Ch(s)&&s.tagName.toLowerCase()==="form"}function sS(s){return Ch(s)&&s.tagName.toLowerCase()==="input"}function aS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function iS(s,e){return s.button===0&&(!e||e==="_self")&&!aS(s)}var Bd=null;function rS(){if(Bd===null)try{new FormData(document.createElement("form"),0),Bd=!1}catch{Bd=!0}return Bd}var lS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function np(s){return s!=null&&!lS.has(s)?(Ps(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wd}"`),null):s}function oS(s,e){let n,i,l,u,h;if(nS(s)){let p=s.getAttribute("action");i=p?ni(p,e):null,n=s.getAttribute("method")||Qd,l=np(s.getAttribute("enctype"))||Wd,u=new FormData(s)}else if(tS(s)||sS(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?ni(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||Qd,l=np(s.getAttribute("formenctype"))||np(p.getAttribute("enctype"))||Wd,u=new FormData(p,s),!rS()){let{name:x,type:b,value:w}=s;if(b==="image"){let T=x?`${x}.`:"";u.append(`${T}x`,"0"),u.append(`${T}y`,"0")}else x&&u.append(x,w)}}else{if(Ch(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Qd,i=null,l=Wd,h=s}return u&&l==="text/plain"&&(h=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function cS(s,e,n,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&ni(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function uS(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function hS(s,e,n){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let h=await uS(u,n);return h.links?h.links():[]}return[]}));return gS(i.flat(1).filter(dS).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Kb(s,e,n,i,l,u){let h=(g,x)=>n[x]?g.route.id!==n[x].route.id:!0,p=(g,x)=>n[x].pathname!==g.pathname||n[x].route.path?.endsWith("*")&&n[x].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,x)=>h(g,x)||p(g,x)):u==="data"?e.filter((g,x)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(h(g,x)||p(g,x))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function fS(s,e,{includeHydrateFallback:n}={}){return mS(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function mS(s){return[...new Set(s)]}function pS(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function gS(s,e){let n=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(pS(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function cw(){let s=E.useContext(xo);return rg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function xS(){let s=E.useContext(Rh);return rg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var lg=E.createContext(void 0);lg.displayName="FrameworkContext";function uw(){let s=E.useContext(lg);return rg(s,"You must render this element inside a <HydratedRouter> element"),s}function yS(s,e){let n=E.useContext(lg),[i,l]=E.useState(!1),[u,h]=E.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:x,onMouseLeave:b,onTouchStart:w}=e,T=E.useRef(null);E.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let U=B=>{B.forEach(G=>{h(G.isIntersecting)})},V=new IntersectionObserver(U,{threshold:.5});return T.current&&V.observe(T.current),()=>{V.disconnect()}}},[s]),E.useEffect(()=>{if(i){let U=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(U)}}},[i]);let C=()=>{l(!0)},H=()=>{l(!1),h(!1)};return n?s!=="intent"?[u,T,{}]:[u,T,{onFocus:Tc(p,C),onBlur:Tc(g,H),onMouseEnter:Tc(x,C),onMouseLeave:Tc(b,H),onTouchStart:Tc(w,C)}]:[!1,T,{}]}function Tc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function bS({page:s,...e}){let{router:n}=cw(),i=E.useMemo(()=>W_(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?E.createElement(_S,{page:s,matches:i,...e}):null}function vS(s){let{manifest:e,routeModules:n}=uw(),[i,l]=E.useState([]);return E.useEffect(()=>{let u=!1;return hS(s,e,n).then(h=>{u||l(h)}),()=>{u=!0}},[s,e,n]),i}function _S({page:s,matches:e,...n}){let i=or(),{future:l,manifest:u,routeModules:h}=uw(),{basename:p}=cw(),{loaderData:g,matches:x}=xS(),b=E.useMemo(()=>Kb(s,e,x,u,i,"data"),[s,e,x,u,i]),w=E.useMemo(()=>Kb(s,e,x,u,i,"assets"),[s,e,x,u,i]),T=E.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let U=new Set,V=!1;if(e.forEach(G=>{let Q=u.routes[G.route.id];!Q||!Q.hasLoader||(!b.some(ge=>ge.route.id===G.route.id)&&G.route.id in g&&h[G.route.id]?.shouldRevalidate||Q.hasClientLoader?V=!0:U.add(G.route.id))}),U.size===0)return[];let B=cS(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return V&&U.size>0&&B.searchParams.set("_routes",e.filter(G=>U.has(G.route.id)).map(G=>G.route.id).join(",")),[B.pathname+B.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,b,e,s,h]),C=E.useMemo(()=>fS(w,u),[w,u]),H=vS(w);return E.createElement(E.Fragment,null,T.map(U=>E.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...n})),C.map(U=>E.createElement("link",{key:U,rel:"modulepreload",href:U,...n})),H.map(({key:U,link:V})=>E.createElement("link",{key:U,nonce:n.nonce,...V,crossOrigin:V.crossOrigin??n.crossOrigin})))}function wS(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var NS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NS&&(window.__reactRouterVersion="7.13.0")}catch{}function ES({basename:s,children:e,unstable_useTransitions:n,window:i}){let l=E.useRef();l.current==null&&(l.current=sT({window:i,v5Compat:!0}));let u=l.current,[h,p]=E.useState({action:u.action,location:u.location}),g=E.useCallback(x=>{n===!1?p(x):E.startTransition(()=>p(x))},[n]);return E.useLayoutEffect(()=>u.listen(g),[u,g]),E.createElement(ZT,{basename:s,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:n})}var dw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qe=E.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:h,state:p,target:g,to:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:T,...C},H){let{basename:U,unstable_useTransitions:V}=E.useContext(ws),B=typeof x=="string"&&dw.test(x),G=ew(x,U);x=G.to;let Q=PT(x,{relative:l}),[ge,pe,le]=yS(i,C),j=AS(x,{replace:h,state:p,target:g,preventScrollReset:b,relative:l,viewTransition:w,unstable_defaultShouldRevalidate:T,unstable_useTransitions:V});function A(P){e&&e(P),P.defaultPrevented||j(P)}let I=E.createElement("a",{...C,...le,href:G.absoluteURL||Q,onClick:G.isExternal||u?e:A,ref:wS(H,pe),target:g,"data-discover":!B&&n==="render"?"true":void 0});return ge&&!B?E.createElement(E.Fragment,null,I,E.createElement(bS,{page:Q})):I});Qe.displayName="Link";var TS=E.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:h,viewTransition:p,children:g,...x},b){let w=au(h,{relative:x.relative}),T=or(),C=E.useContext(Rh),{navigator:H,basename:U}=E.useContext(ws),V=C!=null&&DS(w)&&p===!0,B=H.encodeLocation?H.encodeLocation(w).pathname:w.pathname,G=T.pathname,Q=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(G=G.toLowerCase(),Q=Q?Q.toLowerCase():null,B=B.toLowerCase()),Q&&U&&(Q=ni(Q,U)||Q);const ge=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let pe=G===B||!l&&G.startsWith(B)&&G.charAt(ge)==="/",le=Q!=null&&(Q===B||!l&&Q.startsWith(B)&&Q.charAt(B.length)==="/"),j={isActive:pe,isPending:le,isTransitioning:V},A=pe?e:void 0,I;typeof i=="function"?I=i(j):I=[i,pe?"active":null,le?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let P=typeof u=="function"?u(j):u;return E.createElement(Qe,{...x,"aria-current":A,className:I,ref:b,style:P,to:h,viewTransition:p},typeof g=="function"?g(j):g)});TS.displayName="NavLink";var SS=E.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:u,method:h=Qd,action:p,onSubmit:g,relative:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:T,...C},H)=>{let{unstable_useTransitions:U}=E.useContext(ws),V=IS(),B=kS(p,{relative:x}),G=h.toLowerCase()==="get"?"get":"post",Q=typeof p=="string"&&dw.test(p),ge=pe=>{if(g&&g(pe),pe.defaultPrevented)return;pe.preventDefault();let le=pe.nativeEvent.submitter,j=le?.getAttribute("formmethod")||h,A=()=>V(le||pe.currentTarget,{fetcherKey:e,method:j,navigate:n,replace:l,state:u,relative:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:T});U&&n!==!1?E.startTransition(()=>A()):A()};return E.createElement("form",{ref:H,method:G,action:B,onSubmit:i?g:ge,...C,"data-discover":!Q&&s==="render"?"true":void 0})});SS.displayName="Form";function jS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hw(s){let e=E.useContext(xo);return Ft(e,jS(s)),e}function AS(s,{target:e,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let x=bo(),b=or(),w=au(s,{relative:u});return E.useCallback(T=>{if(iS(T,e)){T.preventDefault();let C=n!==void 0?n:Hc(b)===Hc(w),H=()=>x(s,{replace:C,state:i,preventScrollReset:l,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});g?E.startTransition(()=>H()):H()}},[b,x,w,n,i,e,s,l,u,h,p,g])}var RS=0,CS=()=>`__${String(++RS)}__`;function IS(){let{router:s}=hw("useSubmit"),{basename:e}=E.useContext(ws),n=KT(),i=s.fetch,l=s.navigate;return E.useCallback(async(u,h={})=>{let{action:p,method:g,encType:x,formData:b,body:w}=oS(u,e);if(h.navigate===!1){let T=h.fetcherKey||CS();await i(T,n,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:b,body:w,formMethod:h.method||g,formEncType:h.encType||x,flushSync:h.flushSync})}else await l(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:b,body:w,formMethod:h.method||g,formEncType:h.encType||x,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[i,l,e,n])}function kS(s,{relative:e}={}){let{basename:n}=E.useContext(ws),i=E.useContext(ea);Ft(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...au(s||".",{relative:e})},h=or();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let b=p.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:ei([n,u.pathname])),Hc(u)}function DS(s,{relative:e}={}){let n=E.useContext(nw);Ft(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=hw("useViewTransitionState"),l=au(s,{relative:e});if(!n.isTransitioning)return!1;let u=ni(n.currentLocation.pathname,i)||n.currentLocation.pathname,h=ni(n.nextLocation.pathname,i)||n.nextLocation.pathname;return lh(l.pathname,h)!=null||lh(l.pathname,u)!=null}const MS=()=>{};var Qb={};const fw=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},OS=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],h=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],h=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|h&63)}}return e.join("")},mw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],h=l+1<s.length,p=h?s[l+1]:0,g=l+2<s.length,x=g?s[l+2]:0,b=u>>2,w=(u&3)<<4|p>>4;let T=(p&15)<<2|x>>6,C=x&63;g||(C=64,h||(T=64)),i.push(n[b],n[w],n[T],n[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(fw(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):OS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const x=l<s.length?n[s.charAt(l)]:64;++l;const w=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||x==null||w==null)throw new VS;const T=u<<2|p>>4;if(i.push(T),x!==64){const C=p<<4&240|x>>2;if(i.push(C),w!==64){const H=x<<6&192|w;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class VS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PS=function(s){const e=fw(s);return mw.encodeByteArray(e,!0)},oh=function(s){return PS(s).replace(/\./g,"")},pw=function(s){try{return mw.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function LS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const US=()=>LS().__FIREBASE_DEFAULTS__,BS=()=>{if(typeof process>"u"||typeof Qb>"u")return;const s=Qb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},zS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&pw(s[1]);return e&&JSON.parse(e)},Ih=()=>{try{return MS()||US()||BS()||zS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},gw=s=>Ih()?.emulatorHosts?.[s],xw=s=>{const e=gw(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},yw=()=>Ih()?.config,bw=s=>Ih()?.[`_${s}`];class qS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function cr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function og(s){return(await fetch(s,{credentials:"include"})).ok}function vw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[oh(JSON.stringify(n)),oh(JSON.stringify(h)),""].join(".")}const Oc={};function FS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Oc))Oc[e]?s.emulator.push(e):s.prod.push(e);return s}function HS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Wb=!1;function cg(s,e){if(typeof window>"u"||typeof document>"u"||!cr(window.location.host)||Oc[s]===e||Oc[s]||Wb)return;Oc[s]=e;function n(T){return`__firebase__banner__${T}`}const i="__firebase__banner",u=FS().prod.length>0;function h(){const T=document.getElementById(i);T&&T.remove()}function p(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function g(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function x(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Wb=!0,h()},T}function b(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=HS(i),C=n("text"),H=document.getElementById(C)||document.createElement("span"),U=n("learnmore"),V=document.getElementById(U)||document.createElement("a"),B=n("preprendIcon"),G=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const Q=T.element;p(Q),b(V,U);const ge=x();g(G,B),Q.append(G,H,V,ge),document.body.appendChild(Q)}u?(H.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $S(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qn())}function GS(){const s=Ih()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function QS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WS(){const s=qn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function XS(){return!GS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JS(){try{return typeof indexedDB=="object"}catch{return!1}}function ZS(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const ej="FirebaseError";class Ia extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=ej,Object.setPrototypeOf(this,Ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,iu.prototype.create)}}class iu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],h=u?tj(u,i):"Error",p=`${this.serviceName}: ${h} (${l}).`;return new Ia(l,p,i)}}function tj(s,e){return s.replace(nj,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const nj=/\{\$([^}]+)}/g;function sj(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Kr(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=s[l],h=e[l];if(Xb(u)&&Xb(h)){if(!Kr(u,h))return!1}else if(u!==h)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function Xb(s){return s!==null&&typeof s=="object"}function ru(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ac(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Rc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function aj(s,e){const n=new ij(s,e);return n.subscribe.bind(n)}class ij{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");rj(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=sp),l.error===void 0&&(l.error=sp),l.complete===void 0&&(l.complete=sp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rj(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function sp(){}function Ht(s){return s&&s._delegate?s._delegate:s}class er{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Fr="[DEFAULT]";class lj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new qS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cj(e))try{this.getOrInitializeService({instanceIdentifier:Fr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=Fr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fr){return this.instances.has(e)}getOptions(e=Fr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:oj(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Fr){return this.component?this.component.multipleInstances?e:Fr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function oj(s){return s===Fr?void 0:s}function cj(s){return s.instantiationMode==="EAGER"}class uj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var ct;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ct||(ct={}));const dj={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},hj=ct.INFO,fj={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},mj=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=fj[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ug{constructor(e){this.name=e,this._logLevel=hj,this._logHandler=mj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const pj=(s,e)=>e.some(n=>s instanceof n);let Jb,Zb;function gj(){return Jb||(Jb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xj(){return Zb||(Zb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _w=new WeakMap,Tp=new WeakMap,ww=new WeakMap,ap=new WeakMap,dg=new WeakMap;function yj(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(Ki(s.result)),l()},h=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&_w.set(n,s)}).catch(()=>{}),dg.set(e,s),e}function bj(s){if(Tp.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),l()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Tp.set(s,e)}let Sp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Tp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||ww.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ki(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function vj(s){Sp=s(Sp)}function _j(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(ip(this),e,...n);return ww.set(i,e.sort?e.sort():[e]),Ki(i)}:xj().includes(s)?function(...e){return s.apply(ip(this),e),Ki(_w.get(this))}:function(...e){return Ki(s.apply(ip(this),e))}}function wj(s){return typeof s=="function"?_j(s):(s instanceof IDBTransaction&&bj(s),pj(s,gj())?new Proxy(s,Sp):s)}function Ki(s){if(s instanceof IDBRequest)return yj(s);if(ap.has(s))return ap.get(s);const e=wj(s);return e!==s&&(ap.set(s,e),dg.set(e,s)),e}const ip=s=>dg.get(s);function Nj(s,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const h=indexedDB.open(s,e),p=Ki(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Ki(h.result),g.oldVersion,g.newVersion,Ki(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",x=>l(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const Ej=["get","getKey","getAll","getAllKeys","count"],Tj=["put","add","delete","clear"],rp=new Map;function ev(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(rp.get(e))return rp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=Tj.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||Ej.includes(n)))return;const u=async function(h,...p){const g=this.transaction(h,l?"readwrite":"readonly");let x=g.store;return i&&(x=x.index(p.shift())),(await Promise.all([x[n](...p),l&&g.done]))[0]};return rp.set(e,u),u}vj(s=>({...s,get:(e,n,i)=>ev(e,n)||s.get(e,n,i),has:(e,n)=>!!ev(e,n)||s.has(e,n)}));class Sj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jj(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function jj(s){return s.getComponent()?.type==="VERSION"}const jp="@firebase/app",tv="0.14.7";const si=new ug("@firebase/app"),Aj="@firebase/app-compat",Rj="@firebase/analytics-compat",Cj="@firebase/analytics",Ij="@firebase/app-check-compat",kj="@firebase/app-check",Dj="@firebase/auth",Mj="@firebase/auth-compat",Oj="@firebase/database",Vj="@firebase/data-connect",Pj="@firebase/database-compat",Lj="@firebase/functions",Uj="@firebase/functions-compat",Bj="@firebase/installations",zj="@firebase/installations-compat",qj="@firebase/messaging",Fj="@firebase/messaging-compat",Hj="@firebase/performance",$j="@firebase/performance-compat",Gj="@firebase/remote-config",Yj="@firebase/remote-config-compat",Kj="@firebase/storage",Qj="@firebase/storage-compat",Wj="@firebase/firestore",Xj="@firebase/ai",Jj="@firebase/firestore-compat",Zj="firebase",eA="12.8.0";const Ap="[DEFAULT]",tA={[jp]:"fire-core",[Aj]:"fire-core-compat",[Cj]:"fire-analytics",[Rj]:"fire-analytics-compat",[kj]:"fire-app-check",[Ij]:"fire-app-check-compat",[Dj]:"fire-auth",[Mj]:"fire-auth-compat",[Oj]:"fire-rtdb",[Vj]:"fire-data-connect",[Pj]:"fire-rtdb-compat",[Lj]:"fire-fn",[Uj]:"fire-fn-compat",[Bj]:"fire-iid",[zj]:"fire-iid-compat",[qj]:"fire-fcm",[Fj]:"fire-fcm-compat",[Hj]:"fire-perf",[$j]:"fire-perf-compat",[Gj]:"fire-rc",[Yj]:"fire-rc-compat",[Kj]:"fire-gcs",[Qj]:"fire-gcs-compat",[Wj]:"fire-fst",[Jj]:"fire-fst-compat",[Xj]:"fire-vertex","fire-js":"fire-js",[Zj]:"fire-js-all"};const ch=new Map,nA=new Map,Rp=new Map;function nv(s,e){try{s.container.addComponent(e)}catch(n){si.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Qr(s){const e=s.name;if(Rp.has(e))return si.debug(`There were multiple attempts to register component ${e}.`),!1;Rp.set(e,s);for(const n of ch.values())nv(n,s);for(const n of nA.values())nv(n,s);return!0}function kh(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function ps(s){return s==null?!1:s.settings!==void 0}const sA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qi=new iu("app","Firebase",sA);class aA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qi.create("app-deleted",{appName:this._name})}}const al=eA;function Nw(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:Ap,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Qi.create("bad-app-name",{appName:String(l)});if(n||(n=yw()),!n)throw Qi.create("no-options");const u=ch.get(l);if(u){if(Kr(n,u.options)&&Kr(i,u.config))return u;throw Qi.create("duplicate-app",{appName:l})}const h=new uj(l);for(const g of Rp.values())h.addComponent(g);const p=new aA(n,i,h);return ch.set(l,p),p}function hg(s=Ap){const e=ch.get(s);if(!e&&s===Ap&&yw())return Nw();if(!e)throw Qi.create("no-app",{appName:s});return e}function _a(s,e,n){let i=tA[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const h=[`Unable to register library "${i}" with version "${e}":`];l&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),si.warn(h.join(" "));return}Qr(new er(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const iA="firebase-heartbeat-database",rA=1,$c="firebase-heartbeat-store";let lp=null;function Ew(){return lp||(lp=Nj(iA,rA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore($c)}catch(n){console.warn(n)}}}}).catch(s=>{throw Qi.create("idb-open",{originalErrorMessage:s.message})})),lp}async function lA(s){try{const n=(await Ew()).transaction($c),i=await n.objectStore($c).get(Tw(s));return await n.done,i}catch(e){if(e instanceof Ia)si.warn(e.message);else{const n=Qi.create("idb-get",{originalErrorMessage:e?.message});si.warn(n.message)}}}async function sv(s,e){try{const i=(await Ew()).transaction($c,"readwrite");await i.objectStore($c).put(e,Tw(s)),await i.done}catch(n){if(n instanceof Ia)si.warn(n.message);else{const i=Qi.create("idb-set",{originalErrorMessage:n?.message});si.warn(i.message)}}}function Tw(s){return`${s.name}!${s.options.appId}`}const oA=1024,cA=30;class uA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=av();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>cA){const l=fA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){si.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=av(),{heartbeatsToSend:n,unsentEntries:i}=dA(this._heartbeatsCache.heartbeats),l=oh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return si.warn(e),""}}}function av(){return new Date().toISOString().substring(0,10)}function dA(s,e=oA){const n=[];let i=s.slice();for(const l of s){const u=n.find(h=>h.agent===l.agent);if(u){if(u.dates.push(l.date),iv(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),iv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class hA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JS()?ZS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return sv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return sv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function iv(s){return oh(JSON.stringify({version:2,heartbeats:s})).length}function fA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function mA(s){Qr(new er("platform-logger",e=>new Sj(e),"PRIVATE")),Qr(new er("heartbeat",e=>new uA(e),"PRIVATE")),_a(jp,tv,s),_a(jp,tv,"esm2020"),_a("fire-js","")}mA("");function Sw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pA=Sw,jw=new iu("auth","Firebase",Sw());const uh=new ug("@firebase/auth");function gA(s,...e){uh.logLevel<=ct.WARN&&uh.warn(`Auth (${al}): ${s}`,...e)}function Xd(s,...e){uh.logLevel<=ct.ERROR&&uh.error(`Auth (${al}): ${s}`,...e)}function Js(s,...e){throw fg(s,...e)}function wa(s,...e){return fg(s,...e)}function Aw(s,e,n){const i={...pA(),[e]:n};return new iu("auth","Firebase",i).create(e,{appName:s.name})}function ti(s){return Aw(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fg(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return jw.create(s,...e)}function Fe(s,e,...n){if(!s)throw fg(e,...n)}function Ja(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Xd(e),new Error(e)}function ai(s,e){s||Ja(e)}function Cp(){return typeof self<"u"&&self.location?.href||""}function xA(){return rv()==="http:"||rv()==="https:"}function rv(){return typeof self<"u"&&self.location?.protocol||null}function yA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xA()||KS()||"connection"in navigator)?navigator.onLine:!0}function bA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ai(n>e,"Short delay should be less than long delay!"),this.isMobile=$S()||QS()}get(){return yA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mg(s,e){ai(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class Rw{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ja("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ja("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ja("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _A=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wA=new lu(3e4,6e4);function ur(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function dr(s,e,n,i,l={}){return Cw(s,l,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=ru({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const x={method:e,headers:g,...u};return YS()||(x.referrerPolicy="no-referrer"),s.emulatorConfig&&cr(s.emulatorConfig.host)&&(x.credentials="include"),Rw.fetch()(await Iw(s,s.config.apiHost,n,p),x)})}async function Cw(s,e,n){s._canInitEmulator=!1;const i={...vA,...e};try{const l=new EA(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw zd(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,x]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw zd(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw zd(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw zd(s,"user-disabled",h);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw Aw(s,b,x);Js(s,b)}}catch(l){if(l instanceof Ia)throw l;Js(s,"network-request-failed",{message:String(l)})}}async function ou(s,e,n,i,l={}){const u=await dr(s,e,n,i,l);return"mfaPendingCredential"in u&&Js(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Iw(s,e,n,i){const l=`${e}${n}?${i}`,u=s,h=u.config.emulator?mg(s.config,l):`${s.config.apiScheme}://${l}`;return _A.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function NA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(wa(this.auth,"network-request-failed")),wA.get())})}}function zd(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=wa(s,e,i);return l.customData._tokenResponse=n,l}function lv(s){return s!==void 0&&s.enterprise!==void 0}class TA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SA(s,e){return dr(s,"GET","/v2/recaptchaConfig",ur(s,e))}async function jA(s,e){return dr(s,"POST","/v1/accounts:delete",e)}async function dh(s,e){return dr(s,"POST","/v1/accounts:lookup",e)}function Vc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AA(s,e=!1){const n=Ht(s),i=await n.getIdToken(e),l=pg(i);Fe(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,h=u?.sign_in_provider;return{claims:l,token:i,authTime:Vc(op(l.auth_time)),issuedAtTime:Vc(op(l.iat)),expirationTime:Vc(op(l.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function op(s){return Number(s)*1e3}function pg(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return Xd("JWT malformed, contained fewer than 3 sections"),null;try{const l=pw(n);return l?JSON.parse(l):(Xd("Failed to decode base64 JWT payload"),null)}catch(l){return Xd("Caught error parsing JWT payload as JSON",l?.toString()),null}}function ov(s){const e=pg(s);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Gc(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ia&&RA(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function RA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class CA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ip{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vc(this.lastLoginAt),this.creationTime=Vc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hh(s){const e=s.auth,n=await s.getIdToken(),i=await Gc(s,dh(e,{idToken:n}));Fe(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?kw(l.providerUserInfo):[],h=kA(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!h?.length,x=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Ip(l.createdAt,l.lastLoginAt),isAnonymous:x};Object.assign(s,b)}async function IA(s){const e=Ht(s);await hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kA(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function kw(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function DA(s,e){const n=await Cw(s,{},async()=>{const i=ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,h=await Iw(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&cr(s.emulatorConfig.host)&&(g.credentials="include"),Rw.fetch()(h,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MA(s,e){return dr(s,"POST","/v2/accounts:revokeToken",ur(s,e))}class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ov(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=ov(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await DA(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,h=new so;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),l&&(Fe(typeof l=="string","internal-error",{appName:e}),h.accessToken=l),u&&(Fe(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return Ja("not implemented")}}function zi(s,e){Fe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Qs{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new CA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ip(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Gc(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AA(this,e)}reload(){return IA(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await hh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ps(this.auth.app))return Promise.reject(ti(this.auth));const e=await this.getIdToken();return await Gc(this,jA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,x=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:w,emailVerified:T,isAnonymous:C,providerData:H,stsTokenManager:U}=n;Fe(w&&U,e,"internal-error");const V=so.fromJSON(this.name,U);Fe(typeof w=="string",e,"internal-error"),zi(i,e.name),zi(l,e.name),Fe(typeof T=="boolean",e,"internal-error"),Fe(typeof C=="boolean",e,"internal-error"),zi(u,e.name),zi(h,e.name),zi(p,e.name),zi(g,e.name),zi(x,e.name),zi(b,e.name);const B=new Qs({uid:w,auth:e,email:l,emailVerified:T,displayName:i,isAnonymous:C,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:V,createdAt:x,lastLoginAt:b});return H&&Array.isArray(H)&&(B.providerData=H.map(G=>({...G}))),g&&(B._redirectEventId=g),B}static async _fromIdTokenResponse(e,n,i=!1){const l=new so;l.updateFromServerResponse(n);const u=new Qs({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await hh(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];Fe(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?kw(l.providerUserInfo):[],h=!(l.email&&l.passwordHash)&&!u?.length,p=new so;p.updateFromIdToken(i);const g=new Qs({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:h}),x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Ip(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,x),g}}const cv=new Map;function Za(s){ai(s instanceof Function,"Expected a class definition");let e=cv.get(s);return e?(ai(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,cv.set(s,e),e)}class Dw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Dw.type="NONE";const uv=Dw;function Jd(s,e,n){return`firebase:${s}:${e}:${n}`}class ao{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=Jd(this.userKey,l.apiKey,u),this.fullPersistenceKey=Jd("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await dh(this.auth,{idToken:e}).catch(()=>{});return n?Qs._fromGetAccountInfoResponse(this.auth,n,e):null}return Qs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new ao(Za(uv),e,i);const l=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=l[0]||Za(uv);const h=Jd(i,e.config.apiKey,e.name);let p=null;for(const x of n)try{const b=await x._get(h);if(b){let w;if(typeof b=="string"){const T=await dh(e,{idToken:b}).catch(()=>{});if(!T)break;w=await Qs._fromGetAccountInfoResponse(e,T,b)}else w=Qs._fromJSON(e,b);x!==u&&(p=w),u=x;break}}catch{}const g=l.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new ao(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(n.map(async x=>{if(x!==u)try{await x._remove(h)}catch{}})),new ao(u,e,i))}}function dv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uw(e))return"Blackberry";if(Bw(e))return"Webos";if(Ow(e))return"Safari";if((e.includes("chrome/")||Vw(e))&&!e.includes("edge/"))return"Chrome";if(Lw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Mw(s=qn()){return/firefox\//i.test(s)}function Ow(s=qn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vw(s=qn()){return/crios\//i.test(s)}function Pw(s=qn()){return/iemobile/i.test(s)}function Lw(s=qn()){return/android/i.test(s)}function Uw(s=qn()){return/blackberry/i.test(s)}function Bw(s=qn()){return/webos/i.test(s)}function gg(s=qn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function OA(s=qn()){return gg(s)&&!!window.navigator?.standalone}function VA(){return WS()&&document.documentMode===10}function zw(s=qn()){return gg(s)||Lw(s)||Bw(s)||Uw(s)||/windows phone/i.test(s)||Pw(s)}function qw(s,e=[]){let n;switch(s){case"Browser":n=dv(qn());break;case"Worker":n=`${dv(qn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${al}/${i}`}class PA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function LA(s,e={}){return dr(s,"GET","/v2/passwordPolicy",ur(s,e))}const UA=6;class BA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??UA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class zA{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hv(this),this.idTokenSubscription=new hv(this),this.beforeStateQueue=new PA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Za(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dh(this,{idToken:e}),i=await Qs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ps(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ps(this.app))return Promise.reject(ti(this));const n=e?Ht(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ps(this.app)?Promise.reject(ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ps(this.app)?Promise.reject(ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Za(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LA(this),n=new BA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new iu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await MA(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Za(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[Za(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,l);return()=>{h=!0,g()}}else{const g=e.addObserver(n);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function il(s){return Ht(s)}class hv{constructor(e){this.auth=e,this.observer=null,this.addObserver=aj(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qA(s){Dh=s}function Fw(s){return Dh.loadJS(s)}function FA(){return Dh.recaptchaEnterpriseScript}function HA(){return Dh.gapiScript}function $A(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class GA{constructor(){this.enterprise=new YA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class YA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const KA="recaptcha-enterprise",Hw="NO_RECAPTCHA";class QA{constructor(e){this.type=KA,this.auth=il(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{SA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const x=new TA(g);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,h(x.siteKey)}}).catch(g=>{p(g)})})}function l(u,h,p){const g=window.grecaptcha;lv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(x=>{h(x)}).catch(()=>{h(Hw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GA().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!n&&lv(window.grecaptcha))l(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=FA();g.length!==0&&(g+=p),Fw(g).then(()=>{l(p,u,h)}).catch(x=>{h(x)})}}).catch(p=>{h(p)})})}}async function fv(s,e,n,i=!1,l=!1){const u=new QA(s);let h;if(l)h=Hw;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,x=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function kp(s,e,n,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await fv(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await fv(s,e,n,n==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function WA(s,e){const n=kh(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(Kr(u,e??{}))return l;Js(l,"already-initialized")}return n.initialize({options:e})}function XA(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Za);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function JA(s,e,n){const i=il(s);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=$w(e),{host:h,port:p}=ZA(e),g=p===null?"":`:${p}`,x={url:`${u}//${h}${g}/`},b=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(Kr(x,i.config.emulator)&&Kr(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=x,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,cr(h)?(og(`${u}//${h}${g}`),cg("Auth",!0)):eR()}function $w(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function ZA(s){const e=$w(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:mv(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:mv(h)}}}function mv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function eR(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class xg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ja("not implemented")}_getIdTokenResponse(e){return Ja("not implemented")}_linkToIdToken(e,n){return Ja("not implemented")}_getReauthenticationResolver(e){return Ja("not implemented")}}async function tR(s,e){return dr(s,"POST","/v1/accounts:signUp",e)}async function nR(s,e){return ou(s,"POST","/v1/accounts:signInWithPassword",ur(s,e))}async function sR(s,e){return ou(s,"POST","/v1/accounts:signInWithEmailLink",ur(s,e))}async function aR(s,e){return ou(s,"POST","/v1/accounts:signInWithEmailLink",ur(s,e))}class Yc extends xg{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Yc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Yc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kp(e,n,"signInWithPassword",nR);case"emailLink":return sR(e,{email:this._email,oobCode:this._password});default:Js(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kp(e,i,"signUpPassword",tR);case"emailLink":return aR(e,{idToken:n,email:this._email,oobCode:this._password});default:Js(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function io(s,e){return ou(s,"POST","/v1/accounts:signInWithIdp",ur(s,e))}const iR="http://localhost";class Wr extends xg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Js("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const h=new Wr(i,l);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,io(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:iR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ru(n)}return e}}function rR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lR(s){const e=Ac(Rc(s)).link,n=e?Ac(Rc(e)).deep_link_id:null,i=Ac(Rc(s)).deep_link_id;return(i?Ac(Rc(i)).link:null)||i||n||e||s}class yg{constructor(e){const n=Ac(Rc(e)),i=n.apiKey??null,l=n.oobCode??null,u=rR(n.mode??null);Fe(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=lR(e);try{return new yg(n)}catch{return null}}}class _o{constructor(){this.providerId=_o.PROVIDER_ID}static credential(e,n){return Yc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=yg.parseLink(n);return Fe(i,"argument-error"),Yc._fromEmailAndCode(e,i.code,i.tenantId)}}_o.PROVIDER_ID="password";_o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Gw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cu extends Gw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class qi extends cu{constructor(){super("facebook.com")}static credential(e){return Wr._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.FACEBOOK_SIGN_IN_METHOD="facebook.com";qi.PROVIDER_ID="facebook.com";class Fi extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wr._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Fi.credential(n,i)}catch{return null}}}Fi.GOOGLE_SIGN_IN_METHOD="google.com";Fi.PROVIDER_ID="google.com";class Hi extends cu{constructor(){super("github.com")}static credential(e){return Wr._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hi.credential(e.oauthAccessToken)}catch{return null}}}Hi.GITHUB_SIGN_IN_METHOD="github.com";Hi.PROVIDER_ID="github.com";class $i extends cu{constructor(){super("twitter.com")}static credential(e,n){return Wr._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return $i.credential(n,i)}catch{return null}}}$i.TWITTER_SIGN_IN_METHOD="twitter.com";$i.PROVIDER_ID="twitter.com";async function oR(s,e){return ou(s,"POST","/v1/accounts:signUp",ur(s,e))}class Xr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await Qs._fromIdTokenResponse(e,i,l),h=pv(i);return new Xr({user:u,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=pv(i);return new Xr({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function pv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class fh extends Ia{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,fh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new fh(e,n,i,l)}}function Yw(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?fh._fromErrorAndOperation(s,u,e,i):u})}async function cR(s,e,n=!1){const i=await Gc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Xr._forOperation(s,"link",i)}async function uR(s,e,n=!1){const{auth:i}=s;if(ps(i.app))return Promise.reject(ti(i));const l="reauthenticate";try{const u=await Gc(s,Yw(i,l,e,s),n);Fe(u.idToken,i,"internal-error");const h=pg(u.idToken);Fe(h,i,"internal-error");const{sub:p}=h;return Fe(s.uid===p,i,"user-mismatch"),Xr._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Js(i,"user-mismatch"),u}}async function Kw(s,e,n=!1){if(ps(s.app))return Promise.reject(ti(s));const i="signIn",l=await Yw(s,i,e),u=await Xr._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(u.user),u}async function dR(s,e){return Kw(il(s),e)}async function Qw(s){const e=il(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function hR(s,e,n){if(ps(s.app))return Promise.reject(ti(s));const i=il(s),h=await kp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Qw(s),g}),p=await Xr._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function Ww(s,e,n){return ps(s.app)?Promise.reject(ti(s)):dR(Ht(s),_o.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Qw(s),i})}function fR(s,e,n,i){return Ht(s).onIdTokenChanged(e,n,i)}function mR(s,e,n){return Ht(s).beforeAuthStateChanged(e,n)}function pR(s,e,n,i){return Ht(s).onAuthStateChanged(e,n,i)}function gR(s){return Ht(s).signOut()}const mh="__sak";class Xw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mh,"1"),this.storage.removeItem(mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const xR=1e3,yR=10;class Jw extends Xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const h=this.storage.getItem(i);!n&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);VA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,yR):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},xR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jw.type="LOCAL";const bR=Jw;class Zw extends Xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Zw.type="SESSION";const e1=Zw;function vR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Mh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new Mh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,h=this.handlersMap[l];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(h).map(async x=>x(n.origin,u)),g=await vR(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mh.receivers=[];function bg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class _R{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const x=bg("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:l,onMessage(w){const T=w;if(T.data.eventId===x)switch(T.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(T.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),l.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[l.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function Na(){return window}function wR(s){Na().location.href=s}function t1(){return typeof Na().WorkerGlobalScope<"u"&&typeof Na().importScripts=="function"}async function NR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ER(){return navigator?.serviceWorker?.controller||null}function TR(){return t1()?self:null}const n1="firebaseLocalStorageDb",SR=1,ph="firebaseLocalStorage",s1="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Oh(s,e){return s.transaction([ph],e?"readwrite":"readonly").objectStore(ph)}function jR(){const s=indexedDB.deleteDatabase(n1);return new uu(s).toPromise()}function Dp(){const s=indexedDB.open(n1,SR);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(ph,{keyPath:s1})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(ph)?e(i):(i.close(),await jR(),e(await Dp()))})})}async function gv(s,e,n){const i=Oh(s,!0).put({[s1]:e,value:n});return new uu(i).toPromise()}async function AR(s,e){const n=Oh(s,!1).get(e),i=await new uu(n).toPromise();return i===void 0?null:i.value}function xv(s,e){const n=Oh(s,!0).delete(e);return new uu(n).toPromise()}const RR=800,CR=3;class a1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>CR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return t1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mh._getInstance(TR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await NR(),!this.activeServiceWorker)return;this.sender=new _R(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ER()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dp();return await gv(e,mh,"1"),await xv(e,mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>gv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>AR(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>xv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Oh(l,!1).getAll();return new uu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a1.type="LOCAL";const IR=a1;new lu(3e4,6e4);function kR(s,e){return e?Za(e):(Fe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class vg extends xg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function DR(s){return Kw(s.auth,new vg(s),s.bypassAuthState)}function MR(s){const{auth:e,user:n}=s;return Fe(n,e,"internal-error"),uR(n,new vg(s),s.bypassAuthState)}async function OR(s){const{auth:e,user:n}=s;return Fe(n,e,"internal-error"),cR(n,new vg(s),s.bypassAuthState)}class i1{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DR;case"linkViaPopup":case"linkViaRedirect":return OR;case"reauthViaPopup":case"reauthViaRedirect":return MR;default:Js(this.auth,"internal-error")}}resolve(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const VR=new lu(2e3,1e4);class eo extends i1{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){ai(this.filter.length===1,"Popup operations only handle one event");const e=bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(wa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,VR.get())};e()}}eo.currentPopupAction=null;const PR="pendingRedirect",Zd=new Map;class LR extends i1{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Zd.get(this.auth._key());if(!e){try{const i=await UR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Zd.set(this.auth._key(),e)}return this.bypassAuthState||Zd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UR(s,e){const n=qR(e),i=zR(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function BR(s,e){Zd.set(s._key(),e)}function zR(s){return Za(s._redirectPersistence)}function qR(s){return Jd(PR,s.config.apiKey,s.name)}async function FR(s,e,n=!1){if(ps(s.app))return Promise.reject(ti(s));const i=il(s),l=kR(i,e),h=await new LR(i,l,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const HR=600*1e3;class $R{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!r1(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(wa(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HR&&this.cachedEventUids.clear(),this.cachedEventUids.has(yv(e))}saveEventToCache(e){this.cachedEventUids.add(yv(e)),this.lastProcessedEventTime=Date.now()}}function yv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function r1({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function GR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return r1(s);default:return!1}}async function YR(s,e={}){return dr(s,"GET","/v1/projects",e)}const KR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QR=/^https?/;async function WR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await YR(s);for(const n of e)try{if(XR(n))return}catch{}Js(s,"unauthorized-domain")}function XR(s){const e=Cp(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!QR.test(n))return!1;if(KR.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const JR=new lu(3e4,6e4);function bv(){const s=Na().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function ZR(s){return new Promise((e,n)=>{function i(){bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bv(),n(wa(s,"network-request-failed"))},timeout:JR.get()})}if(Na().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Na().gapi?.load)i();else{const l=$A("iframefcb");return Na()[l]=()=>{gapi.load?i():n(wa(s,"network-request-failed"))},Fw(`${HA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw eh=null,e})}let eh=null;function eC(s){return eh=eh||ZR(s),eh}const tC=new lu(5e3,15e3),nC="__/auth/iframe",sC="emulator/auth/iframe",aC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rC(s){const e=s.config;Fe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?mg(e,sC):`https://${s.config.authDomain}/${nC}`,i={apiKey:e.apiKey,appName:s.name,v:al},l=iC.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${ru(i).slice(1)}`}async function lC(s){const e=await eC(s),n=Na().gapi;return Fe(n,s,"internal-error"),e.open({where:document.body,url:rC(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aC,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const h=wa(s,"network-request-failed"),p=Na().setTimeout(()=>{u(h)},tC.get());function g(){Na().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(h)})}))}const oC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cC=500,uC=600,dC="_blank",hC="http://localhost";class vv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fC(s,e,n,i=cC,l=uC){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...oC,width:i.toString(),height:l.toString(),top:u,left:h},x=qn().toLowerCase();n&&(p=Vw(x)?dC:n),Mw(x)&&(e=e||hC,g.scrollbars="yes");const b=Object.entries(g).reduce((T,[C,H])=>`${T}${C}=${H},`,"");if(OA(x)&&p!=="_self")return mC(e||"",p),new vv(null);const w=window.open(e||"",p,b);Fe(w,s,"popup-blocked");try{w.focus()}catch{}return new vv(w)}function mC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const pC="__/auth/handler",gC="emulator/auth/handler",xC=encodeURIComponent("fac");async function _v(s,e,n,i,l,u){Fe(s.config.authDomain,s,"auth-domain-config-required"),Fe(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:al,eventId:l};if(e instanceof Gw){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",sj(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))h[b]=w}if(e instanceof cu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(h.scopes=b.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),x=g?`#${xC}=${encodeURIComponent(g)}`:"";return`${yC(s)}?${ru(p).slice(1)}${x}`}function yC({config:s}){return s.emulator?mg(s,gC):`https://${s.authDomain}/${pC}`}const cp="webStorageSupport";class bC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=e1,this._completeRedirectFn=FR,this._overrideRedirectResult=BR}async _openPopup(e,n,i,l){ai(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await _v(e,n,i,Cp(),l);return fC(e,u,bg())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await _v(e,n,i,Cp(),l);return wR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(ai(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await lC(e),i=new $R(e);return n.register("authEvent",l=>(Fe(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cp,{type:cp},l=>{const u=l?.[0]?.[cp];u!==void 0&&n(!!u),Js(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=WR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zw()||Ow()||gg()}}const vC=bC;var wv="@firebase/auth",Nv="1.12.0";class _C{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NC(s){Qr(new er("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Fe(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qw(s)},x=new zA(i,l,u,g);return XA(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Qr(new er("auth-internal",e=>{const n=il(e.getProvider("auth").getImmediate());return(i=>new _C(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_a(wv,Nv,wC(s)),_a(wv,Nv,"esm2020")}const EC=300,TC=bw("authIdTokenMaxAge")||EC;let Ev=null;const SC=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>TC)return;const l=n?.token;Ev!==l&&(Ev=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function jC(s=hg()){const e=kh(s,"auth");if(e.isInitialized())return e.getImmediate();const n=WA(s,{popupRedirectResolver:vC,persistence:[IR,bR,e1]}),i=bw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=SC(u.toString());mR(n,h,()=>h(n.currentUser)),fR(n,p=>h(p))}}const l=gw("auth");return l&&JA(n,`http://${l}`),n}function AC(){return document.getElementsByTagName("head")?.[0]??document}qA({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=wa("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",AC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NC("Browser");var RC="firebase",CC="12.8.0";_a(RC,CC,"app");var Tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Wi,l1;(function(){var s;function e(j,A){function I(){}I.prototype=A.prototype,j.F=A.prototype,j.prototype=new I,j.prototype.constructor=j,j.D=function(P,M,q){for(var k=Array(arguments.length-2),z=2;z<arguments.length;z++)k[z-2]=arguments[z];return A.prototype[M].apply(P,k)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(j,A,I){I||(I=0);const P=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)P[M]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(M=0;M<16;++M)P[M]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=j.g[0],I=j.g[1],M=j.g[2];let q=j.g[3],k;k=A+(q^I&(M^q))+P[0]+3614090360&4294967295,A=I+(k<<7&4294967295|k>>>25),k=q+(M^A&(I^M))+P[1]+3905402710&4294967295,q=A+(k<<12&4294967295|k>>>20),k=M+(I^q&(A^I))+P[2]+606105819&4294967295,M=q+(k<<17&4294967295|k>>>15),k=I+(A^M&(q^A))+P[3]+3250441966&4294967295,I=M+(k<<22&4294967295|k>>>10),k=A+(q^I&(M^q))+P[4]+4118548399&4294967295,A=I+(k<<7&4294967295|k>>>25),k=q+(M^A&(I^M))+P[5]+1200080426&4294967295,q=A+(k<<12&4294967295|k>>>20),k=M+(I^q&(A^I))+P[6]+2821735955&4294967295,M=q+(k<<17&4294967295|k>>>15),k=I+(A^M&(q^A))+P[7]+4249261313&4294967295,I=M+(k<<22&4294967295|k>>>10),k=A+(q^I&(M^q))+P[8]+1770035416&4294967295,A=I+(k<<7&4294967295|k>>>25),k=q+(M^A&(I^M))+P[9]+2336552879&4294967295,q=A+(k<<12&4294967295|k>>>20),k=M+(I^q&(A^I))+P[10]+4294925233&4294967295,M=q+(k<<17&4294967295|k>>>15),k=I+(A^M&(q^A))+P[11]+2304563134&4294967295,I=M+(k<<22&4294967295|k>>>10),k=A+(q^I&(M^q))+P[12]+1804603682&4294967295,A=I+(k<<7&4294967295|k>>>25),k=q+(M^A&(I^M))+P[13]+4254626195&4294967295,q=A+(k<<12&4294967295|k>>>20),k=M+(I^q&(A^I))+P[14]+2792965006&4294967295,M=q+(k<<17&4294967295|k>>>15),k=I+(A^M&(q^A))+P[15]+1236535329&4294967295,I=M+(k<<22&4294967295|k>>>10),k=A+(M^q&(I^M))+P[1]+4129170786&4294967295,A=I+(k<<5&4294967295|k>>>27),k=q+(I^M&(A^I))+P[6]+3225465664&4294967295,q=A+(k<<9&4294967295|k>>>23),k=M+(A^I&(q^A))+P[11]+643717713&4294967295,M=q+(k<<14&4294967295|k>>>18),k=I+(q^A&(M^q))+P[0]+3921069994&4294967295,I=M+(k<<20&4294967295|k>>>12),k=A+(M^q&(I^M))+P[5]+3593408605&4294967295,A=I+(k<<5&4294967295|k>>>27),k=q+(I^M&(A^I))+P[10]+38016083&4294967295,q=A+(k<<9&4294967295|k>>>23),k=M+(A^I&(q^A))+P[15]+3634488961&4294967295,M=q+(k<<14&4294967295|k>>>18),k=I+(q^A&(M^q))+P[4]+3889429448&4294967295,I=M+(k<<20&4294967295|k>>>12),k=A+(M^q&(I^M))+P[9]+568446438&4294967295,A=I+(k<<5&4294967295|k>>>27),k=q+(I^M&(A^I))+P[14]+3275163606&4294967295,q=A+(k<<9&4294967295|k>>>23),k=M+(A^I&(q^A))+P[3]+4107603335&4294967295,M=q+(k<<14&4294967295|k>>>18),k=I+(q^A&(M^q))+P[8]+1163531501&4294967295,I=M+(k<<20&4294967295|k>>>12),k=A+(M^q&(I^M))+P[13]+2850285829&4294967295,A=I+(k<<5&4294967295|k>>>27),k=q+(I^M&(A^I))+P[2]+4243563512&4294967295,q=A+(k<<9&4294967295|k>>>23),k=M+(A^I&(q^A))+P[7]+1735328473&4294967295,M=q+(k<<14&4294967295|k>>>18),k=I+(q^A&(M^q))+P[12]+2368359562&4294967295,I=M+(k<<20&4294967295|k>>>12),k=A+(I^M^q)+P[5]+4294588738&4294967295,A=I+(k<<4&4294967295|k>>>28),k=q+(A^I^M)+P[8]+2272392833&4294967295,q=A+(k<<11&4294967295|k>>>21),k=M+(q^A^I)+P[11]+1839030562&4294967295,M=q+(k<<16&4294967295|k>>>16),k=I+(M^q^A)+P[14]+4259657740&4294967295,I=M+(k<<23&4294967295|k>>>9),k=A+(I^M^q)+P[1]+2763975236&4294967295,A=I+(k<<4&4294967295|k>>>28),k=q+(A^I^M)+P[4]+1272893353&4294967295,q=A+(k<<11&4294967295|k>>>21),k=M+(q^A^I)+P[7]+4139469664&4294967295,M=q+(k<<16&4294967295|k>>>16),k=I+(M^q^A)+P[10]+3200236656&4294967295,I=M+(k<<23&4294967295|k>>>9),k=A+(I^M^q)+P[13]+681279174&4294967295,A=I+(k<<4&4294967295|k>>>28),k=q+(A^I^M)+P[0]+3936430074&4294967295,q=A+(k<<11&4294967295|k>>>21),k=M+(q^A^I)+P[3]+3572445317&4294967295,M=q+(k<<16&4294967295|k>>>16),k=I+(M^q^A)+P[6]+76029189&4294967295,I=M+(k<<23&4294967295|k>>>9),k=A+(I^M^q)+P[9]+3654602809&4294967295,A=I+(k<<4&4294967295|k>>>28),k=q+(A^I^M)+P[12]+3873151461&4294967295,q=A+(k<<11&4294967295|k>>>21),k=M+(q^A^I)+P[15]+530742520&4294967295,M=q+(k<<16&4294967295|k>>>16),k=I+(M^q^A)+P[2]+3299628645&4294967295,I=M+(k<<23&4294967295|k>>>9),k=A+(M^(I|~q))+P[0]+4096336452&4294967295,A=I+(k<<6&4294967295|k>>>26),k=q+(I^(A|~M))+P[7]+1126891415&4294967295,q=A+(k<<10&4294967295|k>>>22),k=M+(A^(q|~I))+P[14]+2878612391&4294967295,M=q+(k<<15&4294967295|k>>>17),k=I+(q^(M|~A))+P[5]+4237533241&4294967295,I=M+(k<<21&4294967295|k>>>11),k=A+(M^(I|~q))+P[12]+1700485571&4294967295,A=I+(k<<6&4294967295|k>>>26),k=q+(I^(A|~M))+P[3]+2399980690&4294967295,q=A+(k<<10&4294967295|k>>>22),k=M+(A^(q|~I))+P[10]+4293915773&4294967295,M=q+(k<<15&4294967295|k>>>17),k=I+(q^(M|~A))+P[1]+2240044497&4294967295,I=M+(k<<21&4294967295|k>>>11),k=A+(M^(I|~q))+P[8]+1873313359&4294967295,A=I+(k<<6&4294967295|k>>>26),k=q+(I^(A|~M))+P[15]+4264355552&4294967295,q=A+(k<<10&4294967295|k>>>22),k=M+(A^(q|~I))+P[6]+2734768916&4294967295,M=q+(k<<15&4294967295|k>>>17),k=I+(q^(M|~A))+P[13]+1309151649&4294967295,I=M+(k<<21&4294967295|k>>>11),k=A+(M^(I|~q))+P[4]+4149444226&4294967295,A=I+(k<<6&4294967295|k>>>26),k=q+(I^(A|~M))+P[11]+3174756917&4294967295,q=A+(k<<10&4294967295|k>>>22),k=M+(A^(q|~I))+P[2]+718787259&4294967295,M=q+(k<<15&4294967295|k>>>17),k=I+(q^(M|~A))+P[9]+3951481745&4294967295,j.g[0]=j.g[0]+A&4294967295,j.g[1]=j.g[1]+(M+(k<<21&4294967295|k>>>11))&4294967295,j.g[2]=j.g[2]+M&4294967295,j.g[3]=j.g[3]+q&4294967295}i.prototype.v=function(j,A){A===void 0&&(A=j.length);const I=A-this.blockSize,P=this.C;let M=this.h,q=0;for(;q<A;){if(M==0)for(;q<=I;)l(this,j,q),q+=this.blockSize;if(typeof j=="string"){for(;q<A;)if(P[M++]=j.charCodeAt(q++),M==this.blockSize){l(this,P),M=0;break}}else for(;q<A;)if(P[M++]=j[q++],M==this.blockSize){l(this,P),M=0;break}}this.h=M,this.o+=A},i.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var A=1;A<j.length-8;++A)j[A]=0;A=this.o*8;for(var I=j.length-8;I<j.length;++I)j[I]=A&255,A/=256;for(this.v(j),j=Array(16),A=0,I=0;I<4;++I)for(let P=0;P<32;P+=8)j[A++]=this.g[I]>>>P&255;return j};function u(j,A){var I=p;return Object.prototype.hasOwnProperty.call(I,j)?I[j]:I[j]=A(j)}function h(j,A){this.h=A;const I=[];let P=!0;for(let M=j.length-1;M>=0;M--){const q=j[M]|0;P&&q==A||(I[M]=q,P=!1)}this.g=I}var p={};function g(j){return-128<=j&&j<128?u(j,function(A){return new h([A|0],A<0?-1:0)}):new h([j|0],j<0?-1:0)}function x(j){if(isNaN(j)||!isFinite(j))return w;if(j<0)return V(x(-j));const A=[];let I=1;for(let P=0;j>=I;P++)A[P]=j/I|0,I*=4294967296;return new h(A,0)}function b(j,A){if(j.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(j.charAt(0)=="-")return V(b(j.substring(1),A));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=x(Math.pow(A,8));let P=w;for(let q=0;q<j.length;q+=8){var M=Math.min(8,j.length-q);const k=parseInt(j.substring(q,q+M),A);M<8?(M=x(Math.pow(A,M)),P=P.j(M).add(x(k))):(P=P.j(I),P=P.add(x(k)))}return P}var w=g(0),T=g(1),C=g(16777216);s=h.prototype,s.m=function(){if(U(this))return-V(this).m();let j=0,A=1;for(let I=0;I<this.g.length;I++){const P=this.i(I);j+=(P>=0?P:4294967296+P)*A,A*=4294967296}return j},s.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(H(this))return"0";if(U(this))return"-"+V(this).toString(j);const A=x(Math.pow(j,6));var I=this;let P="";for(;;){const M=ge(I,A).g;I=B(I,M.j(A));let q=((I.g.length>0?I.g[0]:I.h)>>>0).toString(j);if(I=M,H(I))return q+P;for(;q.length<6;)q="0"+q;P=q+P}},s.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function H(j){if(j.h!=0)return!1;for(let A=0;A<j.g.length;A++)if(j.g[A]!=0)return!1;return!0}function U(j){return j.h==-1}s.l=function(j){return j=B(this,j),U(j)?-1:H(j)?0:1};function V(j){const A=j.g.length,I=[];for(let P=0;P<A;P++)I[P]=~j.g[P];return new h(I,~j.h).add(T)}s.abs=function(){return U(this)?V(this):this},s.add=function(j){const A=Math.max(this.g.length,j.g.length),I=[];let P=0;for(let M=0;M<=A;M++){let q=P+(this.i(M)&65535)+(j.i(M)&65535),k=(q>>>16)+(this.i(M)>>>16)+(j.i(M)>>>16);P=k>>>16,q&=65535,k&=65535,I[M]=k<<16|q}return new h(I,I[I.length-1]&-2147483648?-1:0)};function B(j,A){return j.add(V(A))}s.j=function(j){if(H(this)||H(j))return w;if(U(this))return U(j)?V(this).j(V(j)):V(V(this).j(j));if(U(j))return V(this.j(V(j)));if(this.l(C)<0&&j.l(C)<0)return x(this.m()*j.m());const A=this.g.length+j.g.length,I=[];for(var P=0;P<2*A;P++)I[P]=0;for(P=0;P<this.g.length;P++)for(let M=0;M<j.g.length;M++){const q=this.i(P)>>>16,k=this.i(P)&65535,z=j.i(M)>>>16,D=j.i(M)&65535;I[2*P+2*M]+=k*D,G(I,2*P+2*M),I[2*P+2*M+1]+=q*D,G(I,2*P+2*M+1),I[2*P+2*M+1]+=k*z,G(I,2*P+2*M+1),I[2*P+2*M+2]+=q*z,G(I,2*P+2*M+2)}for(j=0;j<A;j++)I[j]=I[2*j+1]<<16|I[2*j];for(j=A;j<2*A;j++)I[j]=0;return new h(I,0)};function G(j,A){for(;(j[A]&65535)!=j[A];)j[A+1]+=j[A]>>>16,j[A]&=65535,A++}function Q(j,A){this.g=j,this.h=A}function ge(j,A){if(H(A))throw Error("division by zero");if(H(j))return new Q(w,w);if(U(j))return A=ge(V(j),A),new Q(V(A.g),V(A.h));if(U(A))return A=ge(j,V(A)),new Q(V(A.g),A.h);if(j.g.length>30){if(U(j)||U(A))throw Error("slowDivide_ only works with positive integers.");for(var I=T,P=A;P.l(j)<=0;)I=pe(I),P=pe(P);var M=le(I,1),q=le(P,1);for(P=le(P,2),I=le(I,2);!H(P);){var k=q.add(P);k.l(j)<=0&&(M=M.add(I),q=k),P=le(P,1),I=le(I,1)}return A=B(j,M.j(A)),new Q(M,A)}for(M=w;j.l(A)>=0;){for(I=Math.max(1,Math.floor(j.m()/A.m())),P=Math.ceil(Math.log(I)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),q=x(I),k=q.j(A);U(k)||k.l(j)>0;)I-=P,q=x(I),k=q.j(A);H(q)&&(q=T),M=M.add(q),j=B(j,k)}return new Q(M,j)}s.B=function(j){return ge(this,j).h},s.and=function(j){const A=Math.max(this.g.length,j.g.length),I=[];for(let P=0;P<A;P++)I[P]=this.i(P)&j.i(P);return new h(I,this.h&j.h)},s.or=function(j){const A=Math.max(this.g.length,j.g.length),I=[];for(let P=0;P<A;P++)I[P]=this.i(P)|j.i(P);return new h(I,this.h|j.h)},s.xor=function(j){const A=Math.max(this.g.length,j.g.length),I=[];for(let P=0;P<A;P++)I[P]=this.i(P)^j.i(P);return new h(I,this.h^j.h)};function pe(j){const A=j.g.length+1,I=[];for(let P=0;P<A;P++)I[P]=j.i(P)<<1|j.i(P-1)>>>31;return new h(I,j.h)}function le(j,A){const I=A>>5;A%=32;const P=j.g.length-I,M=[];for(let q=0;q<P;q++)M[q]=A>0?j.i(q+I)>>>A|j.i(q+I+1)<<32-A:j.i(q+I);return new h(M,j.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,l1=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=x,h.fromString=b,Wi=h}).apply(typeof Tv<"u"?Tv:typeof self<"u"?self:typeof window<"u"?window:{});var qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var o1,Cc,c1,th,Mp,u1,d1,h1;(function(){var s,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof qd=="object"&&qd];for(var y=0;y<d.length;++y){var _=d[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function l(d,y){if(y)e:{var _=i;d=d.split(".");for(var S=0;S<d.length-1;S++){var W=d[S];if(!(W in _))break e;_=_[W]}d=d[d.length-1],S=_[d],y=y(S),y!=S&&y!=null&&e(_,d,{configurable:!0,writable:!0,value:y})}}l("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(d){return d||function(y){var _=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&_.push([S,y[S]]);return _}});var u=u||{},h=this||self;function p(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function g(d,y,_){return d.call.apply(d.bind,arguments)}function x(d,y,_){return x=g,x.apply(null,arguments)}function b(d,y){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function w(d,y){function _(){}_.prototype=y.prototype,d.Z=y.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(S,W,se){for(var _e=Array(arguments.length-2),We=2;We<arguments.length;We++)_e[We-2]=arguments[We];return y.prototype[W].apply(S,_e)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function C(d){const y=d.length;if(y>0){const _=Array(y);for(let S=0;S<y;S++)_[S]=d[S];return _}return[]}function H(d,y){for(let S=1;S<arguments.length;S++){const W=arguments[S];var _=typeof W;if(_=_!="object"?_:W?Array.isArray(W)?"array":_:"null",_=="array"||_=="object"&&typeof W.length=="number"){_=d.length||0;const se=W.length||0;d.length=_+se;for(let _e=0;_e<se;_e++)d[_+_e]=W[_e]}else d.push(W)}}class U{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function V(d){h.setTimeout(()=>{throw d},0)}function B(){var d=j;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class G{constructor(){this.h=this.g=null}add(y,_){const S=Q.get();S.set(y,_),this.h?this.h.next=S:this.g=S,this.h=S}}var Q=new U(()=>new ge,d=>d.reset());class ge{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,le=!1,j=new G,A=()=>{const d=Promise.resolve(void 0);pe=()=>{d.then(I)}};function I(){for(var d;d=B();){try{d.h.call(d.g)}catch(_){V(_)}var y=Q;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}le=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};h.addEventListener("test",_,y),h.removeEventListener("test",_,y)}catch{}return d})();function k(d){return/^[\s\xa0]*$/.test(d)}function z(d,y){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}w(z,M),z.prototype.init=function(d,y){const _=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(_=="mouseover"?y=d.fromElement:_=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&z.Z.h.call(this)},z.prototype.h=function(){z.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var D="closure_listenable_"+(Math.random()*1e6|0),R=0;function K(d,y,_,S,W){this.listener=d,this.proxy=null,this.src=y,this.type=_,this.capture=!!S,this.ha=W,this.key=++R,this.da=this.fa=!1}function he(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ne(d,y,_){for(const S in d)y.call(_,d[S],S,d)}function ve(d,y){for(const _ in d)y.call(void 0,d[_],_,d)}function O(d){const y={};for(const _ in d)y[_]=d[_];return y}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(d,y){let _,S;for(let W=1;W<arguments.length;W++){S=arguments[W];for(_ in S)d[_]=S[_];for(let se=0;se<ne.length;se++)_=ne[se],Object.prototype.hasOwnProperty.call(S,_)&&(d[_]=S[_])}}function be(d){this.src=d,this.g={},this.h=0}be.prototype.add=function(d,y,_,S,W){const se=d.toString();d=this.g[se],d||(d=this.g[se]=[],this.h++);const _e=Ie(d,y,S,W);return _e>-1?(y=d[_e],_||(y.fa=!1)):(y=new K(y,this.src,se,!!S,W),y.fa=_,d.push(y)),y};function ye(d,y){const _=y.type;if(_ in d.g){var S=d.g[_],W=Array.prototype.indexOf.call(S,y,void 0),se;(se=W>=0)&&Array.prototype.splice.call(S,W,1),se&&(he(y),d.g[_].length==0&&(delete d.g[_],d.h--))}}function Ie(d,y,_,S){for(let W=0;W<d.length;++W){const se=d[W];if(!se.da&&se.listener==y&&se.capture==!!_&&se.ha==S)return W}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),Ue={};function Me(d,y,_,S,W){if(Array.isArray(y)){for(let se=0;se<y.length;se++)Me(d,y[se],_,S,W);return null}return _=Vn(_),d&&d[D]?d.J(y,_,p(S)?!!S.capture:!1,W):$e(d,y,_,!1,S,W)}function $e(d,y,_,S,W,se){if(!y)throw Error("Invalid event type");const _e=p(W)?!!W.capture:!!W;let We=sn(d);if(We||(d[oe]=We=new be(d)),_=We.add(y,_,S,_e,se),_.proxy)return _;if(S=st(),_.proxy=S,S.src=d,S.listener=_,d.addEventListener)q||(W=_e),W===void 0&&(W=!1),d.addEventListener(y.toString(),S,W);else if(d.attachEvent)d.attachEvent(Et(y.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function st(){function d(_){return y.call(d.src,d.listener,_)}const y=Ot;return d}function $t(d,y,_,S,W){if(Array.isArray(y))for(var se=0;se<y.length;se++)$t(d,y[se],_,S,W);else S=p(S)?!!S.capture:!!S,_=Vn(_),d&&d[D]?(d=d.i,se=String(y).toString(),se in d.g&&(y=d.g[se],_=Ie(y,_,S,W),_>-1&&(he(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete d.g[se],d.h--)))):d&&(d=sn(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Ie(y,_,S,W)),(_=d>-1?y[d]:null)&&nn(_))}function nn(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[D])ye(y.i,d);else{var _=d.type,S=d.proxy;y.removeEventListener?y.removeEventListener(_,S,d.capture):y.detachEvent?y.detachEvent(Et(_),S):y.addListener&&y.removeListener&&y.removeListener(S),(_=sn(y))?(ye(_,d),_.h==0&&(_.src=null,y[oe]=null)):he(d)}}}function Et(d){return d in Ue?Ue[d]:Ue[d]="on"+d}function Ot(d,y){if(d.da)d=!0;else{y=new z(y,this);const _=d.listener,S=d.ha||d.src;d.fa&&nn(d),d=_.call(S,y)}return d}function sn(d){return d=d[oe],d instanceof be?d:null}var as="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vn(d){return typeof d=="function"?d:(d[as]||(d[as]=function(y){return d.handleEvent(y)}),d[as])}function At(){P.call(this),this.i=new be(this),this.M=this,this.G=null}w(At,P),At.prototype[D]=!0,At.prototype.removeEventListener=function(d,y,_,S){$t(this,d,y,_,S)};function Te(d,y){var _,S=d.G;if(S)for(_=[];S;S=S.G)_.push(S);if(d=d.M,S=y.type||y,typeof y=="string")y=new M(y,d);else if(y instanceof M)y.target=y.target||d;else{var W=y;y=new M(S,d),re(y,W)}W=!0;let se,_e;if(_)for(_e=_.length-1;_e>=0;_e--)se=y.g=_[_e],W=Ve(se,S,!0,y)&&W;if(se=y.g=d,W=Ve(se,S,!0,y)&&W,W=Ve(se,S,!1,y)&&W,_)for(_e=0;_e<_.length;_e++)se=y.g=_[_e],W=Ve(se,S,!1,y)&&W}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const _=d.g[y];for(let S=0;S<_.length;S++)he(_[S]);delete d.g[y],d.h--}}this.G=null},At.prototype.J=function(d,y,_,S){return this.i.add(String(d),y,!1,_,S)},At.prototype.K=function(d,y,_,S){return this.i.add(String(d),y,!0,_,S)};function Ve(d,y,_,S){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let W=!0;for(let se=0;se<y.length;++se){const _e=y[se];if(_e&&!_e.da&&_e.capture==_){const We=_e.listener,Jt=_e.ha||_e.src;_e.fa&&ye(d.i,_e),W=We.call(Jt,S)!==!1&&W}}return W&&!S.defaultPrevented}function Ze(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=x(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(d,y||0)}function Rt(d){d.g=Ze(()=>{d.g=null,d.i&&(d.i=!1,Rt(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class ft extends P{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(d){P.call(this),this.h=d,this.g={}}w(rt,P);var Gt=[];function mt(d){Ne(d.g,function(y,_){this.g.hasOwnProperty(_)&&nn(y)},d),d.g={}}rt.prototype.N=function(){rt.Z.N.call(this),mt(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var is=h.JSON.stringify,Ns=h.JSON.parse,$=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function ue(){}function Ee(){}var ee={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xe(){M.call(this,"d")}w(xe,M);function je(){M.call(this,"c")}w(je,M);var ke={},Be=null;function Re(){return Be=Be||new At}ke.Ia="serverreachability";function Oe(d){M.call(this,ke.Ia,d)}w(Oe,M);function gt(d){const y=Re();Te(y,new Oe(y))}ke.STAT_EVENT="statevent";function Lt(d,y){M.call(this,ke.STAT_EVENT,d),this.stat=y}w(Lt,M);function bt(d){const y=Re();Te(y,new Lt(y,d))}ke.Ja="timingevent";function an(d,y){M.call(this,ke.Ja,d),this.size=y}w(an,M);function Pn(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},y)}function Fn(){this.g=!0}Fn.prototype.ua=function(){this.g=!1};function mr(d,y,_,S,W,se){d.info(function(){if(d.g)if(se){var _e="",We=se.split("&");for(let vt=0;vt<We.length;vt++){var Jt=We[vt].split("=");if(Jt.length>1){const zt=Jt[0];Jt=Jt[1];const js=zt.split("_");_e=js.length>=2&&js[1]=="type"?_e+(zt+"="+Jt+"&"):_e+(zt+"=redacted&")}}}else _e=null;else _e=se;return"XMLHTTP REQ ("+S+") [attempt "+W+"]: "+y+`
`+_+`
`+_e})}function rn(d,y,_,S,W,se,_e){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+W+"]: "+y+`
`+_+`
`+se+" "+_e})}function Hn(d,y,_,S){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+cl(d,_)+(S?" "+S:"")})}function wn(d,y){d.info(function(){return"TIMEOUT: "+y})}Fn.prototype.info=function(){};function cl(d,y){if(!d.g)return y;if(!y)return null;try{const se=JSON.parse(y);if(se){for(d=0;d<se.length;d++)if(Array.isArray(se[d])){var _=se[d];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var W=S[0];if(W!="noop"&&W!="stop"&&W!="close")for(let _e=1;_e<S.length;_e++)S[_e]=""}}}}return is(se)}catch{return y}}var ka={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},oi;function ci(){}w(ci,ue),ci.prototype.g=function(){return new XMLHttpRequest},oi=new ci;function Da(d){return encodeURIComponent(String(d))}function yu(d){var y=1;d=d.split(":");const _=[];for(;y>0&&d.length;)_.push(d.shift()),y--;return d.length&&_.push(d.join(":")),_}function Ls(d,y,_,S){this.j=d,this.i=y,this.l=_,this.S=S||1,this.V=new rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Us}function Us(){this.i=null,this.g="",this.h=!1}var ln={},Nn={};function ta(d,y,_){d.M=1,d.A=gr(cn(y)),d.u=_,d.R=!0,ul(d,null)}function ul(d,y){d.F=Date.now(),na(d),d.B=cn(d.A);var _=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),ml(_.i,"t",S),d.C=0,_=d.j.L,d.h=new Us,d.g=Du(d.j,_?y:null,!d.u),d.P>0&&(d.O=new ft(x(d.Y,d,d.g),d.P)),y=d.V,_=d.g,S=d.ba;var W="readystatechange";Array.isArray(W)||(W&&(Gt[0]=W.toString()),W=Gt);for(let se=0;se<W.length;se++){const _e=Me(_,W[se],S||y.handleEvent,!1,y.h||y);if(!_e)break;y.g[_e.key]=_e}y=d.J?O(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),gt(),mr(d.i,d.v,d.B,d.l,d.S,d.u)}Ls.prototype.ba=function(d){d=d.target;const y=this.O;y&&qs(d)==3?y.j():this.Y(d)},Ls.prototype.Y=function(d){try{if(d==this.g)e:{const We=qs(this.g),Jt=this.g.ya(),vt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||An(this.g)))){this.K||We!=4||Jt==7||(Jt==8||vt<=0?gt(3):gt(2)),sa(this);var y=this.g.ca();this.X=y;var _=Zh(this);if(this.o=y==200,rn(this.i,this.v,this.B,this.l,this.S,We,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,W=this.g;if((S=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(S)){var se=S;break t}}se=null}if(d=se)Hn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,aa(this,d);else{this.o=!1,this.m=3,bt(12),rs(this),Es(this);break e}}if(this.R){d=!0;let zt;for(;!this.K&&this.C<_.length;)if(zt=vu(this,_),zt==Nn){We==4&&(this.m=4,bt(14),d=!1),Hn(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==ln){this.m=4,bt(15),Hn(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Hn(this.i,this.l,zt,null),aa(this,zt);if(bu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||_.length!=0||this.h.h||(this.m=1,bt(16),d=!1),this.o=this.o&&d,!d)Hn(this.i,this.l,_,"[Invalid Chunked Response]"),rs(this),Es(this);else if(_.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Bo(_e),_e.P=!0,bt(11))}}else Hn(this.i,this.l,_,null),aa(this,_);We==4&&rs(this),this.o&&!this.K&&(We==4?Ru(this.j,this):(this.o=!1,na(this)))}else Oa(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),rs(this),Es(this)}}}catch{}};function Zh(d){if(!bu(d))return d.g.la();const y=An(d.g);if(y==="")return"";let _="";const S=y.length,W=qs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return rs(d),Es(d),"";d.h.i=new h.TextDecoder}for(let se=0;se<S;se++)d.h.h=!0,_+=d.h.i.decode(y[se],{stream:!(W&&se==S-1)});return y.length=0,d.h.g+=_,d.C=0,d.h.g}function bu(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function vu(d,y){var _=d.C,S=y.indexOf(`
`,_);return S==-1?Nn:(_=Number(y.substring(_,S)),isNaN(_)?ln:(S+=1,S+_>y.length?Nn:(y=y.slice(S,S+_),d.C=S+_,y)))}Ls.prototype.cancel=function(){this.K=!0,rs(this)};function na(d){d.T=Date.now()+d.H,dl(d,d.H)}function dl(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Pn(x(d.aa,d),y)}function sa(d){d.D&&(h.clearTimeout(d.D),d.D=null)}Ls.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(wn(this.i,this.B),this.M!=2&&(gt(),bt(17)),rs(this),this.m=2,Es(this)):dl(this,this.T-d)};function Es(d){d.j.I==0||d.K||Ru(d.j,d)}function rs(d){sa(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,mt(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function aa(d,y){try{var _=d.j;if(_.I!=0&&(_.g==d||ra(_.h,d))){if(!d.L&&ra(_.h,d)&&_.I==3){try{var S=_.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var W=S;if(W[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)bl(_),xi(_);else break e;Nr(_),bt(18)}}else _.xa=W[1],0<_.xa-_.K&&W[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Pn(x(_.Va,_),6e3));ia(_.h)<=1&&_.ta&&(_.ta=void 0)}else ha(_,11)}else if((d.L||_.g==d)&&bl(_),!k(y))for(W=_.Ba.g.parse(y),y=0;y<W.length;y++){let vt=W[y];const zt=vt[0];if(!(zt<=_.K))if(_.K=zt,vt=vt[1],_.I==2)if(vt[0]=="c"){_.M=vt[1],_.ba=vt[2];const js=vt[3];js!=null&&(_.ka=js,_.j.info("VER="+_.ka));const fa=vt[4];fa!=null&&(_.za=fa,_.j.info("SVER="+_.za));const Fs=vt[5];Fs!=null&&typeof Fs=="number"&&Fs>0&&(S=1.5*Fs,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Hs=d.g;if(Hs){const Er=Hs.g?Hs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Er){var se=S.h;se.g||Er.indexOf("spdy")==-1&&Er.indexOf("quic")==-1&&Er.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(Ao(se,se.h),se.h=null))}if(S.G){const vl=Hs.g?Hs.g.getResponseHeader("X-HTTP-Session-Id"):null;vl&&(S.wa=vl,Tt(S.J,S.G,vl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var _e=d;if(S.na=ku(S,S.L?S.ba:null,S.W),_e.L){Ro(S.h,_e);var We=_e,Jt=S.O;Jt&&(We.H=Jt),We.D&&(sa(We),na(We)),S.g=_e}else ju(S);_.i.length>0&&da(_)}else vt[0]!="stop"&&vt[0]!="close"||ha(_,7);else _.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?ha(_,7):Lo(_):vt[0]!="noop"&&_.l&&_.l.qa(vt),_.A=0)}}gt(4)}catch{}}var on=class{constructor(d,y){this.g=d,this.map=y}};function So(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ia(d){return d.h?1:d.g?d.g.size:0}function ra(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Ao(d,y){d.g?d.g.add(y):d.h=y}function Ro(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}So.prototype.cancel=function(){if(this.i=Co(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Co(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const _ of d.g.values())y=y.concat(_.G);return y}return C(d.i)}var _u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hl(d,y){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const S=d[_].indexOf("=");let W,se=null;S>=0?(W=d[_].substring(0,S),se=d[_].substring(S+1)):W=d[_],y(W,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function ls(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof ls?(this.l=d.l,En(this,d.j),this.o=d.o,this.g=d.g,ui(this,d.u),this.h=d.h,Io(this,Tu(d.i)),this.m=d.m):d&&(y=String(d).match(_u))?(this.l=!1,En(this,y[1]||"",!0),this.o=la(y[2]||""),this.g=la(y[3]||"",!0),ui(this,y[4]),this.h=la(y[5]||"",!0),Io(this,y[6]||"",!0),this.m=la(y[7]||"")):(this.l=!1,this.i=new hi(null,this.l))}ls.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(xr(y,fl,!0),":");var _=this.g;return(_||y=="file")&&(d.push("//"),(y=this.o)&&d.push(xr(y,fl,!0),"@"),d.push(Da(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(xr(_,_.charAt(0)=="/"?ko:wu,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",xr(_,Nu)),d.join("")},ls.prototype.resolve=function(d){const y=cn(this);let _=!!d.j;_?En(y,d.j):_=!!d.o,_?y.o=d.o:_=!!d.g,_?y.g=d.g:_=d.u!=null;var S=d.h;if(_)ui(y,d.u);else if(_=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var W=y.h.lastIndexOf("/");W!=-1&&(S=y.h.slice(0,W+1)+S)}if(W=S,W==".."||W==".")S="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){S=W.lastIndexOf("/",0)==0,W=W.split("/");const se=[];for(let _e=0;_e<W.length;){const We=W[_e++];We=="."?S&&_e==W.length&&se.push(""):We==".."?((se.length>1||se.length==1&&se[0]!="")&&se.pop(),S&&_e==W.length&&se.push("")):(se.push(We),S=!0)}S=se.join("/")}else S=W}return _?y.h=S:_=d.i.toString()!=="",_?Io(y,Tu(d.i)):_=!!d.m,_&&(y.m=d.m),y};function cn(d){return new ls(d)}function En(d,y,_){d.j=_?la(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function ui(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Io(d,y,_){y instanceof hi?(d.i=y,pl(d.i,d.l)):(_||(y=xr(y,di)),d.i=new hi(y,d.l))}function Tt(d,y,_){d.i.set(y,_)}function gr(d){return Tt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function la(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function xr(d,y,_){return typeof d=="string"?(d=encodeURI(d).replace(y,Kn),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Kn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var fl=/[#\/\?@]/g,wu=/[#\?:]/g,ko=/[#\?]/g,di=/[#\?@]/g,Nu=/#/g;function hi(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Qn(d){d.g||(d.g=new Map,d.h=0,d.i&&hl(d.i,function(y,_){d.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}s=hi.prototype,s.add=function(d,y){Qn(this),this.i=null,d=fi(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(y),this.h+=1,this};function Eu(d,y){Qn(d),y=fi(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Do(d,y){return Qn(d),y=fi(d,y),d.g.has(y)}s.forEach=function(d,y){Qn(this),this.g.forEach(function(_,S){_.forEach(function(W){d.call(y,W,S,this)},this)},this)};function Mo(d,y){Qn(d);let _=[];if(typeof y=="string")Do(d,y)&&(_=_.concat(d.g.get(fi(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)_=_.concat(d[y]);return _}s.set=function(d,y){return Qn(this),this.i=null,d=fi(this,d),Do(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},s.get=function(d,y){return d?(d=Mo(this,d),d.length>0?String(d[0]):y):y};function ml(d,y,_){Eu(d,y),_.length>0&&(d.i=null,d.g.set(fi(d,y),C(_)),d.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var _=y[S];const W=Da(_);_=Mo(this,_);for(let se=0;se<_.length;se++){let _e=W;_[se]!==""&&(_e+="="+Da(_[se])),d.push(_e)}}return this.i=d.join("&")};function Tu(d){const y=new hi;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function fi(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function pl(d,y){y&&!d.j&&(Qn(d),d.i=null,d.g.forEach(function(_,S){const W=S.toLowerCase();S!=W&&(Eu(this,S),ml(this,W,_))},d)),d.j=y}function Bs(d,y){const _=new Fn;if(h.Image){const S=new Image;S.onload=b(Ts,_,"TestLoadImage: loaded",!0,y,S),S.onerror=b(Ts,_,"TestLoadImage: error",!1,y,S),S.onabort=b(Ts,_,"TestLoadImage: abort",!1,y,S),S.ontimeout=b(Ts,_,"TestLoadImage: timeout",!1,y,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else y(!1)}function Oo(d,y){const _=new Fn,S=new AbortController,W=setTimeout(()=>{S.abort(),Ts(_,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:S.signal}).then(se=>{clearTimeout(W),se.ok?Ts(_,"TestPingServer: ok",!0,y):Ts(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(W),Ts(_,"TestPingServer: error",!1,y)})}function Ts(d,y,_,S,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),S(_)}catch{}}function mi(){this.g=new $}function oa(d){this.i=d.Sb||null,this.h=d.ab||!1}w(oa,ue),oa.prototype.g=function(){return new yr(this.i,this.h)};function yr(d,y){At.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(yr,At),s=yr.prototype,s.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,zs(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,pi(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,zs(this)),this.g&&(this.readyState=3,zs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gl(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function gl(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?pi(this):zs(this),this.readyState==3&&gl(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,pi(this))},s.Na=function(d){this.g&&(this.response=d,pi(this))},s.ga=function(){this.g&&pi(this)};function pi(d){d.readyState=4,d.l=null,d.j=null,d.B=null,zs(d)}s.setRequestHeader=function(d,y){this.A.append(d,y)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=y.next();return d.join(`\r
`)};function zs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(yr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ss(d){let y="";return Ne(d,function(_,S){y+=S,y+=":",y+=_,y+=`\r
`}),y}function br(d,y,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Ss(_),typeof d=="string"?_!=null&&Da(_):Tt(d,y,_))}function Ct(d){At.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Ct,At);var ca=/^https?$/i,Vo=["POST","PUT"];s=Ct.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,y,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():oi.g(),this.g.onreadystatechange=T(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(se){vr(this,se);return}if(d=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var W in S)_.set(W,S[W]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const se of S.keys())_.set(se,S.get(se));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(se=>se.toLowerCase()=="content-type"),W=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(Vo,y,void 0)>=0)||S||W||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,_e]of _)this.g.setRequestHeader(se,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(se){vr(this,se)}};function vr(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,Po(d),Ma(d)}function Po(d){d.A||(d.A=!0,Te(d,"complete"),Te(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Te(this,"complete"),Te(this,"abort"),Ma(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ma(this,!0)),Ct.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?_r(this):this.Xa())},s.Xa=function(){_r(this)};function _r(d){if(d.h&&typeof u<"u"){if(d.v&&qs(d)==4)setTimeout(d.Ca.bind(d),0);else if(Te(d,"readystatechange"),qs(d)==4){d.h=!1;try{const se=d.ca();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var S;if(S=se===0){let _e=String(d.D).match(_u)[1]||null;!_e&&h.self&&h.self.location&&(_e=h.self.location.protocol.slice(0,-1)),S=!ca.test(_e?_e.toLowerCase():"")}_=S}if(_)Te(d,"complete"),Te(d,"success");else{d.o=6;try{var W=qs(d)>2?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.ca()+"]",Po(d)}}finally{Ma(d)}}}}function Ma(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,y||Te(d,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function qs(d){return d.g?d.g.readyState:0}s.ca=function(){try{return qs(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Ns(y)}};function An(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Oa(d){const y={};d=(d.g&&qs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(k(d[S]))continue;var _=yu(d[S]);const W=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const se=y[W]||[];y[W]=se,se.push(_)}ve(y,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ua(d,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||y}function gi(d){this.za=0,this.i=[],this.j=new Fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ua("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ua("baseRetryDelayMs",5e3,d),this.Za=ua("retryDelaySeedMs",1e4,d),this.Ta=ua("forwardChannelMaxRetries",2,d),this.va=ua("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new So(d&&d.concurrentRequestLimit),this.Ba=new mi,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=gi.prototype,s.ka=8,s.I=1,s.connect=function(d,y,_,S){bt(0),this.W=d,this.H=y||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=ku(this,null,this.W),da(this)};function Lo(d){if(xl(d),d.I==3){var y=d.V++,_=cn(d.J);if(Tt(_,"SID",d.M),Tt(_,"RID",y),Tt(_,"TYPE","terminate"),wr(d,_),y=new Ls(d,d.j,y),y.M=2,y.A=gr(cn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=y.A,_=!0),_||(y.g=Du(y.j,null),y.g.ea(y.A)),y.F=Date.now(),na(y)}Iu(d)}function xi(d){d.g&&(Bo(d),d.g.cancel(),d.g=null)}function xl(d){xi(d),d.v&&(h.clearTimeout(d.v),d.v=null),bl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function da(d){if(!jo(d.h)&&!d.m){d.m=!0;var y=d.Ea;pe||A(),le||(pe(),le=!0),j.add(y,d),d.D=0}}function yl(d,y){return ia(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Pn(x(d.Ea,d,y),Cu(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const W=new Ls(this,this.j,d);let se=this.o;if(this.U&&(se?(se=O(se),re(se,this.U)):se=this.U),this.u!==null||this.R||(W.J=se,se=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Su(this,W,y),_=cn(this.J),Tt(_,"RID",d),Tt(_,"CVER",22),this.G&&Tt(_,"X-HTTP-Session-Id",this.G),wr(this,_),se&&(this.R?y="headers="+Da(Ss(se))+"&"+y:this.u&&br(_,this.u,se)),Ao(this.h,W),this.Ra&&Tt(_,"TYPE","init"),this.S?(Tt(_,"$req",y),Tt(_,"SID","null"),W.U=!0,ta(W,_,null)):ta(W,_,y),this.I=2}}else this.I==3&&(d?Uo(this,d):this.i.length==0||jo(this.h)||Uo(this))};function Uo(d,y){var _;y?_=y.l:_=d.V++;const S=cn(d.J);Tt(S,"SID",d.M),Tt(S,"RID",_),Tt(S,"AID",d.K),wr(d,S),d.u&&d.o&&br(S,d.u,d.o),_=new Ls(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),y&&(d.i=y.G.concat(d.i)),y=Su(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Ao(d.h,_),ta(_,S,y)}function wr(d,y){d.H&&Ne(d.H,function(_,S){Tt(y,S,_)}),d.l&&Ne({},function(_,S){Tt(y,S,_)})}function Su(d,y,_){_=Math.min(d.i.length,_);const S=d.l?x(d.l.Ka,d.l,d):null;e:{var W=d.i;let We=-1;for(;;){const Jt=["count="+_];We==-1?_>0?(We=W[0].g,Jt.push("ofs="+We)):We=0:Jt.push("ofs="+We);let vt=!0;for(let zt=0;zt<_;zt++){var se=W[zt].g;const js=W[zt].map;if(se-=We,se<0)We=Math.max(0,W[zt].g-100),vt=!1;else try{se="req"+se+"_"||"";try{var _e=js instanceof Map?js:Object.entries(js);for(const[fa,Fs]of _e){let Hs=Fs;p(Fs)&&(Hs=is(Fs)),Jt.push(se+fa+"="+encodeURIComponent(Hs))}}catch(fa){throw Jt.push(se+"type="+encodeURIComponent("_badmap")),fa}}catch{S&&S(js)}}if(vt){_e=Jt.join("&");break e}}_e=void 0}return d=d.i.splice(0,_),y.G=d,_e}function ju(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;pe||A(),le||(pe(),le=!0),j.add(y,d),d.A=0}}function Nr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Pn(x(d.Da,d),Cu(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,Au(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Pn(x(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),xi(this),Au(this))};function Bo(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function Au(d){d.g=new Ls(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=cn(d.na);Tt(y,"RID","rpc"),Tt(y,"SID",d.M),Tt(y,"AID",d.K),Tt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&Tt(y,"TO",d.ia),Tt(y,"TYPE","xmlhttp"),wr(d,y),d.u&&d.o&&br(y,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=gr(cn(y)),_.u=null,_.R=!0,ul(_,d)}s.Va=function(){this.C!=null&&(this.C=null,xi(this),Nr(this),bt(19))};function bl(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function Ru(d,y){var _=null;if(d.g==y){bl(d),Bo(d),d.g=null;var S=2}else if(ra(d.h,y))_=y.G,Ro(d.h,y),S=1;else return;if(d.I!=0){if(y.o)if(S==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var W=d.D;S=Re(),Te(S,new an(S,_)),da(d)}else ju(d);else if(W=y.m,W==3||W==0&&y.X>0||!(S==1&&yl(d,y)||S==2&&Nr(d)))switch(_&&_.length>0&&(y=d.h,y.i=y.i.concat(_)),W){case 1:ha(d,5);break;case 4:ha(d,10);break;case 3:ha(d,6);break;default:ha(d,2)}}}function Cu(d,y){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*y}function ha(d,y){if(d.j.info("Error code "+y),y==2){var _=x(d.bb,d),S=d.Ua;const W=!S;S=new ls(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||En(S,"https"),gr(S),W?Bs(S.toString(),_):Oo(S.toString(),_)}else bt(2);d.I=0,d.l&&d.l.pa(y),Iu(d),xl(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Iu(d){if(d.I=0,d.ja=[],d.l){const y=Co(d.h);(y.length!=0||d.i.length!=0)&&(H(d.ja,y),H(d.ja,d.i),d.h.i.length=0,C(d.i),d.i.length=0),d.l.oa()}}function ku(d,y,_){var S=_ instanceof ls?cn(_):new ls(_);if(S.g!="")y&&(S.g=y+"."+S.g),ui(S,S.u);else{var W=h.location;S=W.protocol,y=y?y+"."+W.hostname:W.hostname,W=+W.port;const se=new ls(null);S&&En(se,S),y&&(se.g=y),W&&ui(se,W),_&&(se.h=_),S=se}return _=d.G,y=d.wa,_&&y&&Tt(S,_,y),Tt(S,"VER",d.ka),wr(d,S),S}function Du(d,y,_){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new Ct(new oa({ab:_})):new Ct(d.ma),y.Fa(d.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mu(){}s=Mu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function yi(){}yi.prototype.g=function(d,y){return new $n(d,y)};function $n(d,y){At.call(this),this.g=new gi(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!k(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!k(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Va(this)}w($n,At),$n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){Lo(this.g)},$n.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=is(d),d=_);y.i.push(new on(y.Ya++,d)),y.I==3&&da(y)},$n.prototype.N=function(){this.g.l=null,delete this.j,Lo(this.g),delete this.g,$n.Z.N.call(this)};function Ou(d){xe.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const _ in y){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}w(Ou,xe);function Vu(){je.call(this),this.status=1}w(Vu,je);function Va(d){this.g=d}w(Va,Mu),Va.prototype.ra=function(){Te(this.g,"a")},Va.prototype.qa=function(d){Te(this.g,new Ou(d))},Va.prototype.pa=function(d){Te(this.g,new Vu)},Va.prototype.oa=function(){Te(this.g,"b")},yi.prototype.createWebChannel=yi.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,h1=function(){return new yi},d1=function(){return Re()},u1=ke,Mp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,th=ka,pr.COMPLETE="complete",c1=pr,Ee.EventType=ee,ee.OPEN="a",ee.CLOSE="b",ee.ERROR="c",ee.MESSAGE="d",At.prototype.listen=At.prototype.J,Cc=Ee,Ct.prototype.listenOnce=Ct.prototype.K,Ct.prototype.getLastError=Ct.prototype.Ha,Ct.prototype.getLastErrorCode=Ct.prototype.ya,Ct.prototype.getStatus=Ct.prototype.ca,Ct.prototype.getResponseJson=Ct.prototype.La,Ct.prototype.getResponseText=Ct.prototype.la,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Fa,o1=Ct}).apply(typeof qd<"u"?qd:typeof self<"u"?self:typeof window<"u"?window:{});let Bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");let wo="12.8.0";function IC(s){wo=s}const Jr=new ug("@firebase/firestore");function Wl(){return Jr.logLevel}function Ae(s,...e){if(Jr.logLevel<=ct.DEBUG){const n=e.map(_g);Jr.debug(`Firestore (${wo}): ${s}`,...n)}}function ii(s,...e){if(Jr.logLevel<=ct.ERROR){const n=e.map(_g);Jr.error(`Firestore (${wo}): ${s}`,...n)}}function oo(s,...e){if(Jr.logLevel<=ct.WARN){const n=e.map(_g);Jr.warn(`Firestore (${wo}): ${s}`,...n)}}function _g(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function He(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,f1(s,i,n)}function f1(s,e,n){let i=`FIRESTORE (${wo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ii(i),new Error(i)}function Nt(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||f1(e,l,i)}function Ke(s,e){return s}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Ia{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class m1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Bn.UNAUTHENTICATED)))}shutdown(){}}class DC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class MC{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Nt(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Xi,e.enqueueRetryable((()=>l(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Xi)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Nt(typeof i.accessToken=="string",31837,{l:i}),new m1(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Nt(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class OC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class VC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new OC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ps(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Nt(this.o===void 0,3512);const i=u=>{u.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,Ae("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Sv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function LC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class wg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=LC(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function ut(s,e){return s<e?-1:s>e?1:0}function Op(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return up(l)===up(u)?ut(l,u):up(l)?1:-1}return ut(s.length,e.length)}const UC=55296,BC=57343;function up(s){const e=s.charCodeAt(0);return e>=UC&&e<=BC}function co(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}const jv="__name__";class ya{constructor(e,n,i){n===void 0?n=0:n>e.length&&He(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&He(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ya.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ya?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=ya.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return ut(e.length,n.length)}static compareSegments(e,n){const i=ya.isNumericId(e),l=ya.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?ya.extractNumericId(e).compare(ya.extractNumericId(n)):Op(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wi.fromString(e.substring(4,e.length-2))}}class Pt extends ya{construct(e,n,i){return new Pt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new Pt(n)}static emptyPath(){return new Pt([])}}const zC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mn extends ya{construct(e,n,i){return new Mn(e,n,i)}static isValidIdentifier(e){return zC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jv}static keyField(){return new Mn([jv])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new Se(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let h=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new Se(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Se(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(h=!h,l++):p!=="."||h?(i+=p,l++):(u(),l++)}if(u(),h)throw new Se(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mn(n)}static emptyPath(){return new Mn([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Pt.fromString(e))}static fromName(e){return new Le(Pt.fromString(e).popFirst(5))}static empty(){return new Le(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Pt(e.slice()))}}function p1(s,e,n){if(!n)throw new Se(fe.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function qC(s,e,n,i){if(e===!0&&i===!0)throw new Se(fe.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Av(s){if(!Le.isDocumentKey(s))throw new Se(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Rv(s){if(Le.isDocumentKey(s))throw new Se(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function g1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Vh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":He(12329,{type:typeof s})}function Ea(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Se(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vh(s);throw new Se(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function xn(s,e){const n={typeString:s};return e&&(n.value=e),n}function du(s,e){if(!g1(s))throw new Se(fe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const h=s[i];if(l&&typeof h!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Se(fe.INVALID_ARGUMENT,n);return!0}const Cv=-62135596800,Iv=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Iv);return new wt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Se(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Se(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cv)throw new Se(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iv}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:xn("string",wt._jsonSchemaVersion),seconds:xn("number"),nanoseconds:xn("number")};class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new wt(0,0))}static max(){return new Ge(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Kc=-1;function FC(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=Ge.fromTimestamp(i===1e9?new wt(n+1,0):new wt(n,i));return new tr(l,Le.empty(),e)}function HC(s){return new tr(s.readTime,s.key,Kc)}class tr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new tr(Ge.min(),Le.empty(),Kc)}static max(){return new tr(Ge.max(),Le.empty(),Kc)}}function $C(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Le.comparator(s.documentKey,e.documentKey),n!==0?n:ut(s.largestBatchId,e.largestBatchId))}const GC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function No(s){if(s.code!==fe.FAILED_PRECONDITION||s.message!==GC)throw s;Ae("LocalStore","Unexpectedly lost primary lease")}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new me(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof me?n:me.resolve(n)}catch(n){return me.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):me.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):me.reject(n)}static resolve(e){return new me(((n,i)=>{n(e)}))}static reject(e){return new me(((n,i)=>{i(e)}))}static waitFor(e){return new me(((n,i)=>{let l=0,u=0,h=!1;e.forEach((p=>{++l,p.next((()=>{++u,h&&u===l&&n()}),(g=>i(g)))})),h=!0,u===l&&n()}))}static or(e){let n=me.resolve(!1);for(const i of e)n=n.next((l=>l?me.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new me(((i,l)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const x=g;n(e[x]).next((b=>{h[x]=b,++p,p===u&&i(h)}),(b=>l(b)))}}))}static doWhile(e,n){return new me(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function KC(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Eo(s){return s.name==="IndexedDbTransactionError"}class Ph{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ph.ce=-1;const Ng=-1;function Lh(s){return s==null}function gh(s){return s===0&&1/s==-1/0}function QC(s){return typeof s=="number"&&Number.isInteger(s)&&!gh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const x1="";function WC(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=kv(e)),e=XC(s.get(n),e);return kv(e)}function XC(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case x1:n+="";break;default:n+=u}}return n}function kv(s){return s+x1+""}function Dv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function hr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function y1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Yt{constructor(e,n){this.comparator=e,this.root=n||Dn.EMPTY}insert(e,n){return new Yt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dn.BLACK,null,null))}remove(e){return new Yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fd(this.root,e,this.comparator,!0)}}class Fd{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dn{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??Dn.RED,this.left=l??Dn.EMPTY,this.right=u??Dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new Dn(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Dn.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}Dn.EMPTY=null,Dn.RED=!0,Dn.BLACK=!1;Dn.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new Dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new Yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Mv(this.data.getIterator())}getIteratorFrom(e){return new Mv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new _n(this.comparator);return n.data=e,n}}class Mv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gs{constructor(e){this.fields=e,e.sort(Mn.comparator)}static empty(){return new gs([])}unionWith(e){let n=new _n(Mn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new gs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class b1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class On{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new b1("Invalid base64 string: "+u):u}})(e);return new On(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let h=0;h<l.length;++h)u+=String.fromCharCode(l[h]);return u})(e);return new On(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}On.EMPTY_BYTE_STRING=new On("");const JC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(s){if(Nt(!!s,39018),typeof s=="string"){let e=0;const n=JC.exec(s);if(Nt(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tn(s.seconds),nanos:tn(s.nanos)}}function tn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function sr(s){return typeof s=="string"?On.fromBase64String(s):On.fromUint8Array(s)}const v1="server_timestamp",_1="__type__",w1="__previous_value__",N1="__local_write_time__";function Eg(s){return(s?.mapValue?.fields||{})[_1]?.stringValue===v1}function Uh(s){const e=s.mapValue.fields[w1];return Eg(e)?Uh(e):e}function Qc(s){const e=nr(s.mapValue.fields[N1].timestampValue);return new wt(e.seconds,e.nanos)}class ZC{constructor(e,n,i,l,u,h,p,g,x,b,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=b,this.apiKey=w}}const xh="(default)";class Wc{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new Wc("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof Wc&&e.projectId===this.projectId&&e.database===this.database}}function e5(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Se(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(s.options.projectId,e)}const E1="__type__",t5="__max__",Hd={mapValue:{}},T1="__vector__",yh="value";function ar(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Eg(s)?4:s5(s)?9007199254740991:n5(s)?10:11:He(28295,{value:s})}function Ra(s,e){if(s===e)return!0;const n=ar(s);if(n!==ar(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Qc(s).isEqual(Qc(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const h=nr(l.timestampValue),p=nr(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return sr(l.bytesValue).isEqual(sr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return tn(l.geoPointValue.latitude)===tn(u.geoPointValue.latitude)&&tn(l.geoPointValue.longitude)===tn(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return tn(l.integerValue)===tn(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const h=tn(l.doubleValue),p=tn(u.doubleValue);return h===p?gh(h)===gh(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return co(s.arrayValue.values||[],e.arrayValue.values||[],Ra);case 10:case 11:return(function(l,u){const h=l.mapValue.fields||{},p=u.mapValue.fields||{};if(Dv(h)!==Dv(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!Ra(h[g],p[g])))return!1;return!0})(s,e);default:return He(52216,{left:s})}}function Xc(s,e){return(s.values||[]).find((n=>Ra(n,e)))!==void 0}function uo(s,e){if(s===e)return 0;const n=ar(s),i=ar(e);if(n!==i)return ut(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=tn(u.integerValue||u.doubleValue),g=tn(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return Ov(s.timestampValue,e.timestampValue);case 4:return Ov(Qc(s),Qc(e));case 5:return Op(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=sr(u),g=sr(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let x=0;x<p.length&&x<g.length;x++){const b=ut(p[x],g[x]);if(b!==0)return b}return ut(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=ut(tn(u.latitude),tn(h.latitude));return p!==0?p:ut(tn(u.longitude),tn(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Vv(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},x=p[yh]?.arrayValue,b=g[yh]?.arrayValue,w=ut(x?.values?.length||0,b?.values?.length||0);return w!==0?w:Vv(x,b)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Hd.mapValue&&h===Hd.mapValue)return 0;if(u===Hd.mapValue)return 1;if(h===Hd.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),x=h.fields||{},b=Object.keys(x);g.sort(),b.sort();for(let w=0;w<g.length&&w<b.length;++w){const T=Op(g[w],b[w]);if(T!==0)return T;const C=uo(p[g[w]],x[b[w]]);if(C!==0)return C}return ut(g.length,b.length)})(s.mapValue,e.mapValue);default:throw He(23264,{he:n})}}function Ov(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ut(s,e);const n=nr(s),i=nr(e),l=ut(n.seconds,i.seconds);return l!==0?l:ut(n.nanos,i.nanos)}function Vv(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=uo(n[l],i[l]);if(u)return u}return ut(n.length,i.length)}function ho(s){return Vp(s)}function Vp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=nr(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return sr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Le.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=Vp(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const h of i)u?u=!1:l+=",",l+=`${h}:${Vp(n.fields[h])}`;return l+"}"})(s.mapValue):He(61005,{value:s})}function nh(s){switch(ar(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uh(s);return e?16+nh(e):16;case 5:return 2*s.stringValue.length;case 6:return sr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+nh(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return hr(i.fields,((u,h)=>{l+=u.length+nh(h)})),l})(s.mapValue);default:throw He(13486,{value:s})}}function Pv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Pp(s){return!!s&&"integerValue"in s}function Tg(s){return!!s&&"arrayValue"in s}function Lv(s){return!!s&&"nullValue"in s}function Uv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function sh(s){return!!s&&"mapValue"in s}function n5(s){return(s?.mapValue?.fields||{})[E1]?.stringValue===T1}function Pc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return hr(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Pc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pc(s.arrayValue.values[n]);return e}return{...s}}function s5(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===t5}class ns{constructor(e){this.value=e}static empty(){return new ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!sh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pc(n)}setAll(e){let n=Mn.emptyPath(),i={},l=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,l),i={},l=[],n=p.popLast()}h?i[p.lastSegment()]=Pc(h):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ra(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];sh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){hr(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new ns(Pc(this.value))}}function S1(s){const e=[];return hr(s.fields,((n,i)=>{const l=new Mn([n]);if(sh(i)){const u=S1(i.mapValue).fields;if(u.length===0)e.push(l);else for(const h of u)e.push(l.child(h))}else e.push(l)})),new gs(e)}class zn{constructor(e,n,i,l,u,h,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new zn(e,0,Ge.min(),Ge.min(),Ge.min(),ns.empty(),0)}static newFoundDocument(e,n,i,l){return new zn(e,1,n,Ge.min(),i,l,0)}static newNoDocument(e,n){return new zn(e,2,n,Ge.min(),Ge.min(),ns.empty(),0)}static newUnknownDocument(e,n){return new zn(e,3,n,Ge.min(),Ge.min(),ns.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bh{constructor(e,n){this.position=e,this.inclusive=n}}function Bv(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],h=s.position[l];if(u.field.isKeyField()?i=Le.comparator(Le.fromName(h.referenceValue),n.key):i=uo(h,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function zv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ra(s.position[n],e.position[n]))return!1;return!0}class vh{constructor(e,n="asc"){this.field=e,this.dir=n}}function a5(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class j1{}class gn extends j1{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new r5(e,n,i):n==="array-contains"?new c5(e,i):n==="in"?new u5(e,i):n==="not-in"?new d5(e,i):n==="array-contains-any"?new h5(e,i):new gn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new l5(e,i):new o5(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(uo(n,this.value)):n!==null&&ar(this.value)===ar(n)&&this.matchesComparison(uo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zs extends j1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Zs(e,n)}matches(e){return A1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function A1(s){return s.op==="and"}function R1(s){return i5(s)&&A1(s)}function i5(s){for(const e of s.filters)if(e instanceof Zs)return!1;return!0}function Lp(s){if(s instanceof gn)return s.field.canonicalString()+s.op.toString()+ho(s.value);if(R1(s))return s.filters.map((e=>Lp(e))).join(",");{const e=s.filters.map((n=>Lp(n))).join(",");return`${s.op}(${e})`}}function C1(s,e){return s instanceof gn?(function(i,l){return l instanceof gn&&i.op===l.op&&i.field.isEqual(l.field)&&Ra(i.value,l.value)})(s,e):s instanceof Zs?(function(i,l){return l instanceof Zs&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,h,p)=>u&&C1(h,l.filters[p])),!0):!1})(s,e):void He(19439)}function I1(s){return s instanceof gn?(function(n){return`${n.field.canonicalString()} ${n.op} ${ho(n.value)}`})(s):s instanceof Zs?(function(n){return n.op.toString()+" {"+n.getFilters().map(I1).join(" ,")+"}"})(s):"Filter"}class r5 extends gn{constructor(e,n,i){super(e,n,i),this.key=Le.fromName(i.referenceValue)}matches(e){const n=Le.comparator(e.key,this.key);return this.matchesComparison(n)}}class l5 extends gn{constructor(e,n){super(e,"in",n),this.keys=k1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class o5 extends gn{constructor(e,n){super(e,"not-in",n),this.keys=k1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function k1(s,e){return(e.arrayValue?.values||[]).map((n=>Le.fromName(n.referenceValue)))}class c5 extends gn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tg(n)&&Xc(n.arrayValue,this.value)}}class u5 extends gn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xc(this.value.arrayValue,n)}}class d5 extends gn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Xc(this.value.arrayValue,n)}}class h5 extends gn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Xc(this.value.arrayValue,i)))}}class f5{constructor(e,n=null,i=[],l=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function qv(s,e=null,n=[],i=[],l=null,u=null,h=null){return new f5(s,e,n,i,l,u,h)}function Sg(s){const e=Ke(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Lp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>ho(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>ho(i))).join(",")),e.Te=n}return e.Te}function jg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!a5(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!C1(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!zv(s.startAt,e.startAt)&&zv(s.endAt,e.endAt)}function Up(s){return Le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class hu{constructor(e,n=null,i=[],l=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function m5(s,e,n,i,l,u,h,p){return new hu(s,e,n,i,l,u,h,p)}function Ag(s){return new hu(s)}function Fv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function p5(s){return Le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function D1(s){return s.collectionGroup!==null}function Lc(s){const e=Ke(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new _n(Mn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new vh(u,i))})),n.has(Mn.keyField().canonicalString())||e.Ie.push(new vh(Mn.keyField(),i))}return e.Ie}function Ta(s){const e=Ke(s);return e.Ee||(e.Ee=g5(e,Lc(s))),e.Ee}function g5(s,e){if(s.limitType==="F")return qv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new vh(l.field,u)}));const n=s.endAt?new bh(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new bh(s.startAt.position,s.startAt.inclusive):null;return qv(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Bp(s,e){const n=s.filters.concat([e]);return new hu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function zp(s,e,n){return new hu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Bh(s,e){return jg(Ta(s),Ta(e))&&s.limitType===e.limitType}function M1(s){return`${Sg(Ta(s))}|lt:${s.limitType}`}function Xl(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>I1(l))).join(", ")}]`),Lh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>ho(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>ho(l))).join(",")),`Target(${i})`})(Ta(s))}; limitType=${s.limitType})`}function zh(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Le.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of Lc(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(h,p,g){const x=Bv(h,p,g);return h.inclusive?x<=0:x<0})(i.startAt,Lc(i),l)||i.endAt&&!(function(h,p,g){const x=Bv(h,p,g);return h.inclusive?x>=0:x>0})(i.endAt,Lc(i),l))})(s,e)}function x5(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function O1(s){return(e,n)=>{let i=!1;for(const l of Lc(s)){const u=y5(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function y5(s,e,n){const i=s.field.isKeyField()?Le.comparator(e.key,n.key):(function(u,h,p){const g=h.data.field(u),x=p.data.field(u);return g!==null&&x!==null?uo(g,x):He(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return He(19790,{direction:s.dir})}}class rl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){hr(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return y1(this.inner)}size(){return this.innerSize}}const b5=new Yt(Le.comparator);function ri(){return b5}const V1=new Yt(Le.comparator);function Ic(...s){let e=V1;for(const n of s)e=e.insert(n.key,n);return e}function P1(s){let e=V1;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Hr(){return Uc()}function L1(){return Uc()}function Uc(){return new rl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const v5=new Yt(Le.comparator),_5=new _n(Le.comparator);function dt(...s){let e=_5;for(const n of s)e=e.add(n);return e}const w5=new _n(ut);function N5(){return w5}function Rg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gh(e)?"-0":e}}function U1(s){return{integerValue:""+s}}function E5(s,e){return QC(e)?U1(e):Rg(s,e)}class qh{constructor(){this._=void 0}}function T5(s,e,n){return s instanceof Jc?(function(l,u){const h={fields:{[_1]:{stringValue:v1},[N1]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&Eg(u)&&(u=Uh(u)),u&&(h.fields[w1]=u),{mapValue:h}})(n,e):s instanceof Zc?z1(s,e):s instanceof eu?q1(s,e):(function(l,u){const h=B1(l,u),p=Hv(h)+Hv(l.Ae);return Pp(h)&&Pp(l.Ae)?U1(p):Rg(l.serializer,p)})(s,e)}function S5(s,e,n){return s instanceof Zc?z1(s,e):s instanceof eu?q1(s,e):n}function B1(s,e){return s instanceof _h?(function(i){return Pp(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Jc extends qh{}class Zc extends qh{constructor(e){super(),this.elements=e}}function z1(s,e){const n=F1(e);for(const i of s.elements)n.some((l=>Ra(l,i)))||n.push(i);return{arrayValue:{values:n}}}class eu extends qh{constructor(e){super(),this.elements=e}}function q1(s,e){let n=F1(e);for(const i of s.elements)n=n.filter((l=>!Ra(l,i)));return{arrayValue:{values:n}}}class _h extends qh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Hv(s){return tn(s.integerValue||s.doubleValue)}function F1(s){return Tg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class j5{constructor(e,n){this.field=e,this.transform=n}}function A5(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof Zc&&l instanceof Zc||i instanceof eu&&l instanceof eu?co(i.elements,l.elements,Ra):i instanceof _h&&l instanceof _h?Ra(i.Ae,l.Ae):i instanceof Jc&&l instanceof Jc})(s.transform,e.transform)}class R5{constructor(e,n){this.version=e,this.transformResults=n}}class Ws{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ws}static exists(e){return new Ws(void 0,e)}static updateTime(e){return new Ws(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ah(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Fh{}function H1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Cg(s.key,Ws.none()):new fu(s.key,s.data,Ws.none());{const n=s.data,i=ns.empty();let l=new _n(Mn.comparator);for(let u of e.fields)if(!l.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?i.delete(u):i.set(u,h),l=l.add(u)}return new fr(s.key,i,new gs(l.toArray()),Ws.none())}}function C5(s,e,n){s instanceof fu?(function(l,u,h){const p=l.value.clone(),g=Gv(l.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):s instanceof fr?(function(l,u,h){if(!ah(l.precondition,u))return void u.convertToUnknownDocument(h.version);const p=Gv(l.fieldTransforms,u,h.transformResults),g=u.data;g.setAll($1(l)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function Bc(s,e,n,i){return s instanceof fu?(function(u,h,p,g){if(!ah(u.precondition,h))return p;const x=u.value.clone(),b=Yv(u.fieldTransforms,g,h);return x.setAll(b),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),null})(s,e,n,i):s instanceof fr?(function(u,h,p,g){if(!ah(u.precondition,h))return p;const x=Yv(u.fieldTransforms,g,h),b=h.data;return b.setAll($1(u)),b.setAll(x),h.convertToFoundDocument(h.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,n,i):(function(u,h,p){return ah(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,n)}function I5(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=B1(i.transform,l||null);u!=null&&(n===null&&(n=ns.empty()),n.set(i.field,u))}return n||null}function $v(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&co(i,l,((u,h)=>A5(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class fu extends Fh{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class fr extends Fh{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function $1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function Gv(s,e,n){const i=new Map;Nt(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],h=u.transform,p=e.data.field(u.field);i.set(u.field,S5(h,p,n[l]))}return i}function Yv(s,e,n){const i=new Map;for(const l of s){const u=l.transform,h=n.data.field(l.field);i.set(l.field,T5(u,h,e))}return i}class Cg extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k5 extends Fh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class D5{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&C5(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Bc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Bc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=L1();return this.mutations.forEach((l=>{const u=e.get(l.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(l.key)?null:p;const g=H1(h,p);g!==null&&i.set(l.key,g),h.isValidDocument()||h.convertToNoDocument(Ge.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),dt())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,((n,i)=>$v(n,i)))&&co(this.baseMutations,e.baseMutations,((n,i)=>$v(n,i)))}}class Ig{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){Nt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return v5})();const u=e.mutations;for(let h=0;h<u.length;h++)l=l.insert(u[h].key,i[h].version);return new Ig(e,n,i,l)}}class M5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class O5{constructor(e,n){this.count=e,this.unchangedNames=n}}var mn,pt;function V5(s){switch(s){case fe.OK:return He(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return He(15467,{code:s})}}function G1(s){if(s===void 0)return ii("GRPC error has no .code"),fe.UNKNOWN;switch(s){case mn.OK:return fe.OK;case mn.CANCELLED:return fe.CANCELLED;case mn.UNKNOWN:return fe.UNKNOWN;case mn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case mn.INTERNAL:return fe.INTERNAL;case mn.UNAVAILABLE:return fe.UNAVAILABLE;case mn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case mn.NOT_FOUND:return fe.NOT_FOUND;case mn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case mn.ABORTED:return fe.ABORTED;case mn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case mn.DATA_LOSS:return fe.DATA_LOSS;default:return He(39323,{code:s})}}(pt=mn||(mn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";function P5(){return new TextEncoder}const L5=new Wi([4294967295,4294967295],0);function Kv(s){const e=P5().encode(s),n=new l1;return n.update(e),new Uint8Array(n.digest())}function Qv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Wi([n,i],0),new Wi([l,u],0)]}class kg{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new kc(`Invalid padding: ${n}`);if(i<0)throw new kc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new kc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new kc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wi.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Wi.fromNumber(i)));return l.compare(L5)===1&&(l=new Wi([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Kv(e),[i,l]=Qv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);if(!this.we(h))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new kg(u,l,n);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=Kv(e),[i,l]=Qv(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,l,u);this.be(h)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Hh{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,mu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Hh(Ge.min(),l,new Yt(ut),ri(),dt())}}class mu{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new mu(i,n,dt(),dt(),dt())}}class ih{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class Y1{constructor(e,n){this.targetId=e,this.Ce=n}}class K1{constructor(e,n,i=On.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class Wv{constructor(){this.ve=0,this.Fe=Xv(),this.Me=On.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),n=dt(),i=dt();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:He(38017,{changeType:u})}})),new mu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=Xv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Nt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class U5{constructor(e){this.Ge=e,this.ze=new Map,this.je=ri(),this.He=$d(),this.Je=$d(),this.Ze=new Yt(ut)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:He(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Up(u))if(i===0){const h=new Le(u.path);this.et(n,h,zn.newNoDocument(h,Ge.min()))}else Nt(i===1,20013,{expectedCount:i});else{const h=this._t(n);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(n);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let h,p;try{h=sr(i).toUint8Array()}catch(g){if(g instanceof b1)return oo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new kg(h,l,u)}catch(g){return oo(g instanceof kc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&Up(p.target)){const g=new Le(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,zn.newNoDocument(g,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let i=dt();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const l=new Hh(e,n,this.Ze,this.je,i);return this.je=ri(),this.He=$d(),this.Je=$d(),this.Ze=new Yt(ut),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Wv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new _n(ut),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new _n(ut),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function $d(){return new Yt(Le.comparator)}function Xv(){return new Yt(Le.comparator)}const B5={asc:"ASCENDING",desc:"DESCENDING"},z5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},q5={and:"AND",or:"OR"};class F5{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qp(s,e){return s.useProto3Json||Lh(e)?e:{value:e}}function wh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Q1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function H5(s,e){return wh(s,e.toTimestamp())}function Sa(s){return Nt(!!s,49232),Ge.fromTimestamp((function(n){const i=nr(n);return new wt(i.seconds,i.nanos)})(s))}function Dg(s,e){return Fp(s,e).canonicalString()}function Fp(s,e){const n=(function(l){return new Pt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function W1(s){const e=Pt.fromString(s);return Nt(tN(e),10190,{key:e.toString()}),e}function Hp(s,e){return Dg(s.databaseId,e.path)}function dp(s,e){const n=W1(e);if(n.get(1)!==s.databaseId.projectId)throw new Se(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Se(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Le(J1(n))}function X1(s,e){return Dg(s.databaseId,e)}function $5(s){const e=W1(s);return e.length===4?Pt.emptyPath():J1(e)}function $p(s){return new Pt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function J1(s){return Nt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Jv(s,e,n){return{name:Hp(s,e),fields:n.value.mapValue.fields}}function G5(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:He(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(x,b){return x.useProto3Json?(Nt(b===void 0||typeof b=="string",58123),On.fromBase64String(b||"")):(Nt(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),On.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(x){const b=x.code===void 0?fe.UNKNOWN:G1(x.code);return new Se(b,x.message||"")})(h);n=new K1(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=dp(s,i.document.name),u=Sa(i.document.updateTime),h=i.document.createTime?Sa(i.document.createTime):Ge.min(),p=new ns({mapValue:{fields:i.document.fields}}),g=zn.newFoundDocument(l,u,h,p),x=i.targetIds||[],b=i.removedTargetIds||[];n=new ih(x,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=dp(s,i.document),u=i.readTime?Sa(i.readTime):Ge.min(),h=zn.newNoDocument(l,u),p=i.removedTargetIds||[];n=new ih([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=dp(s,i.document),u=i.removedTargetIds||[];n=new ih([],u,l,null)}else{if(!("filter"in e))return He(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,h=new O5(l,u),p=i.targetId;n=new Y1(p,h)}}return n}function Y5(s,e){let n;if(e instanceof fu)n={update:Jv(s,e.key,e.value)};else if(e instanceof Cg)n={delete:Hp(s,e.key)};else if(e instanceof fr)n={update:Jv(s,e.key,e.data),updateMask:n4(e.fieldMask)};else{if(!(e instanceof k5))return He(16599,{dt:e.type});n={verify:Hp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof Jc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Zc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof eu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof _h)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw He(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:H5(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:He(27497)})(s,e.precondition)),n}function K5(s,e){return s&&s.length>0?(Nt(e!==void 0,14353),s.map((n=>(function(l,u){let h=l.updateTime?Sa(l.updateTime):Sa(u);return h.isEqual(Ge.min())&&(h=Sa(u)),new R5(h,l.transformResults||[])})(n,e)))):[]}function Q5(s,e){return{documents:[X1(s,e.path)]}}function W5(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=X1(s,l);const u=(function(x){if(x.length!==0)return eN(Zs.create(x,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(x){if(x.length!==0)return x.map((b=>(function(T){return{field:Jl(T.field),direction:Z5(T.dir)}})(b)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=qp(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:n,parent:l}}function X5(s){let e=$5(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){Nt(i===1,65062);const b=n.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(w){const T=Z1(w);return T instanceof Zs&&R1(T)?T.getFilters():[T]})(n.where));let h=[];n.orderBy&&(h=(function(w){return w.map((T=>(function(H){return new vh(Zl(H.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(T)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let T;return T=typeof w=="object"?w.value:w,Lh(T)?null:T})(n.limit));let g=null;n.startAt&&(g=(function(w){const T=!!w.before,C=w.values||[];return new bh(C,T)})(n.startAt));let x=null;return n.endAt&&(x=(function(w){const T=!w.before,C=w.values||[];return new bh(C,T)})(n.endAt)),m5(e,l,h,u,p,"F",g,x)}function J5(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Z1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Zl(n.unaryFilter.field);return gn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Zl(n.unaryFilter.field);return gn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Zl(n.unaryFilter.field);return gn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Zl(n.unaryFilter.field);return gn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(s):s.fieldFilter!==void 0?(function(n){return gn.create(Zl(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Zs.create(n.compositeFilter.filters.map((i=>Z1(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(n.compositeFilter.op))})(s):He(30097,{filter:s})}function Z5(s){return B5[s]}function e4(s){return z5[s]}function t4(s){return q5[s]}function Jl(s){return{fieldPath:s.canonicalString()}}function Zl(s){return Mn.fromServerFormat(s.fieldPath)}function eN(s){return s instanceof gn?(function(n){if(n.op==="=="){if(Uv(n.value))return{unaryFilter:{field:Jl(n.field),op:"IS_NAN"}};if(Lv(n.value))return{unaryFilter:{field:Jl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Uv(n.value))return{unaryFilter:{field:Jl(n.field),op:"IS_NOT_NAN"}};if(Lv(n.value))return{unaryFilter:{field:Jl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jl(n.field),op:e4(n.op),value:n.value}}})(s):s instanceof Zs?(function(n){const i=n.getFilters().map((l=>eN(l)));return i.length===1?i[0]:{compositeFilter:{op:t4(n.op),filters:i}}})(s):He(54877,{filter:s})}function n4(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function tN(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function nN(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class Yi{constructor(e,n,i,l,u=Ge.min(),h=Ge.min(),p=On.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class s4{constructor(e){this.yt=e}}function a4(s){const e=X5({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?zp(e,e.limit,"L"):e}class i4{constructor(){this.Sn=new r4}addToCollectionParentIndex(e,n){return this.Sn.add(n),me.resolve()}getCollectionParents(e,n){return me.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return me.resolve()}deleteFieldIndex(e,n){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,n){return me.resolve()}getDocumentsMatchingTarget(e,n){return me.resolve(null)}getIndexType(e,n){return me.resolve(0)}getFieldIndexes(e,n){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,n){return me.resolve(tr.min())}getMinOffsetFromCollectionGroup(e,n){return me.resolve(tr.min())}updateCollectionGroup(e,n,i){return me.resolve()}updateIndexEntries(e,n){return me.resolve()}}class r4{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new _n(Pt.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new _n(Pt.comparator)).toArray()}}const Zv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sN=41943040;class ts{static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(sN,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class fo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new fo(0)}static ar(){return new fo(-1)}}const e_="LruGarbageCollector",l4=1048576;function t_([s,e],[n,i]){const l=ut(s,n);return l===0?ut(e,i):l}class o4{constructor(e){this.Pr=e,this.buffer=new _n(t_),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();t_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class c4{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ae(e_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Eo(n)?Ae(e_,"Ignoring IndexedDB error during garbage collection: ",n):await No(n)}await this.Ar(3e5)}))}}class u4{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return me.resolve(Ph.ce);const i=new o4(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(Zv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zv):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,u,h,p,g,x;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,h=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(i=w,p=Date.now(),this.removeTargets(e,i,n)))).next((w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(x=Date.now(),Wl()<=ct.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-b}ms
	Determined least recently used ${l} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-b}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:w}))))}}function d4(s,e){return new u4(s,e)}class h4{constructor(){this.changes=new rl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?me.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class f4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class m4{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&Bc(i.mutation,l,gs.empty(),wt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,dt()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=dt()){const l=Hr();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let h=Ic();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const i=Hr();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,dt())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,i,l){let u=ri();const h=Uc(),p=(function(){return Uc()})();return n.forEach(((g,x)=>{const b=i.get(x.key);l.has(x.key)&&(b===void 0||b.mutation instanceof fr)?u=u.insert(x.key,x):b!==void 0?(h.set(x.key,b.mutation.getFieldMask()),Bc(b.mutation,x,b.mutation.getFieldMask(),wt.now())):h.set(x.key,gs.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((x,b)=>h.set(x,b))),n.forEach(((x,b)=>p.set(x,new f4(b,h.get(x)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=Uc();let l=new Yt(((h,p)=>h-p)),u=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((g=>{const x=n.get(g);if(x===null)return;let b=i.get(g)||gs.empty();b=p.applyToLocalView(x,b),i.set(g,b);const w=(l.get(p.batchId)||dt()).add(g);l=l.insert(p.batchId,w)}))})).next((()=>{const h=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),x=g.key,b=g.value,w=L1();b.forEach((T=>{if(!u.has(T)){const C=H1(n.get(T),i.get(T));C!==null&&w.set(T,C),u=u.add(T)}})),h.push(this.documentOverlayCache.saveOverlays(e,x,w))}return me.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return p5(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):D1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const h=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):me.resolve(Hr());let p=Kc,g=u;return h.next((x=>me.forEach(x,((b,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),u.get(b)?me.resolve():this.remoteDocumentCache.getEntry(e,b).next((T=>{g=g.insert(b,T)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,g,x,dt()))).next((b=>({batchId:p,changes:P1(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Le(n)).next((i=>{let l=Ic();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let h=Ic();return this.indexManager.getCollectionParents(e,u).next((p=>me.forEach(p,(g=>{const x=(function(w,T){return new hu(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,i,l).next((b=>{b.forEach(((w,T)=>{h=h.insert(w,T)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((h=>{u.forEach(((g,x)=>{const b=x.getKey();h.get(b)===null&&(h=h.insert(b,zn.newInvalidDocument(b)))}));let p=Ic();return h.forEach(((g,x)=>{const b=u.get(g);b!==void 0&&Bc(b.mutation,x,gs.empty(),wt.now()),zh(n,x)&&(p=p.insert(g,x))})),p}))}}class p4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return me.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Sa(l.createTime)}})(n)),me.resolve()}getNamedQuery(e,n){return me.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:a4(l.bundledQuery),readTime:Sa(l.readTime)}})(n)),me.resolve()}}class g4{constructor(){this.overlays=new Yt(Le.comparator),this.Lr=new Map}getOverlay(e,n){return me.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Hr();return me.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.bt(e,n,u)})),me.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),me.resolve()}getOverlaysForCollection(e,n,i){const l=Hr(),u=n.length+1,h=new Le(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,x=g.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return me.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new Yt(((x,b)=>x-b));const h=this.overlays.getIterator();for(;h.hasNext();){const x=h.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>i){let b=u.get(x.largestBatchId);b===null&&(b=Hr(),u=u.insert(x.largestBatchId,b)),b.set(x.getKey(),x)}}const p=Hr(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,b)=>p.set(x,b))),!(p.size()>=l)););return me.resolve(p)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const h=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new M5(n,i));let u=this.Lr.get(n);u===void 0&&(u=dt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class x4{constructor(){this.sessionToken=On.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,me.resolve()}}class Mg{constructor(){this.kr=new _n(Sn.Kr),this.qr=new _n(Sn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new Sn(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Sn(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new Le(new Pt([])),i=new Sn(n,e),l=new Sn(n,e+1),u=[];return this.qr.forEachInRange([i,l],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Le(new Pt([])),i=new Sn(n,e),l=new Sn(n,e+1);let u=dt();return this.qr.forEachInRange([i,l],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new Sn(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Sn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Le.comparator(e.key,n.key)||ut(e.Hr,n.Hr)}static Ur(e,n){return ut(e.Hr,n.Hr)||Le.comparator(e.key,n.key)}}class y4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new _n(Sn.Kr)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new D5(u,n,i,l);this.mutationQueue.push(h);for(const p of l)this.Jr=this.Jr.add(new Sn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return me.resolve(h)}lookupMutationBatch(e,n){return me.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),u=l<0?0:l;return me.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?Ng:this.Yn-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Sn(n,0),l=new Sn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(h=>{const p=this.Zr(h.Hr);u.push(p)})),me.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new _n(ut);return n.forEach((l=>{const u=new Sn(l,0),h=new Sn(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{i=i.add(p.Hr)}))})),me.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;Le.isDocumentKey(u)||(u=u.child(""));const h=new Sn(new Le(u),0);let p=new _n(ut);return this.Jr.forEachWhile((g=>{const x=g.key.path;return!!i.isPrefixOf(x)&&(x.length===l&&(p=p.add(g.Hr)),!0)}),h),me.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){Nt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return me.forEach(n.mutations,(l=>{const u=new Sn(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new Sn(n,0),l=this.Jr.firstAfterOrEqual(i);return me.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class b4{constructor(e){this.ti=e,this.docs=(function(){return new Yt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,h=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return me.resolve(i?i.document.mutableCopy():zn.newInvalidDocument(n))}getEntries(e,n){let i=ri();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():zn.newInvalidDocument(l))})),me.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=ri();const h=n.path,p=new Le(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:x,value:{document:b}}=g.getNext();if(!h.isPrefixOf(x.path))break;x.path.length>h.length+1||$C(HC(b),i)<=0||(l.has(b.key)||zh(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return me.resolve(u)}getAllFromCollectionGroup(e,n,i,l){He(9500)}ni(e,n){return me.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new v4(this)}getSize(e){return me.resolve(this.size)}}class v4 extends h4{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),me.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class _4{constructor(e){this.persistence=e,this.ri=new rl((n=>Sg(n)),jg),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.ii=0,this.si=new Mg,this.targetCount=0,this.oi=fo._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),me.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new fo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,me.resolve()}updateTargetData(e,n){return this.lr(n),me.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),me.waitFor(u).next((()=>l))}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return me.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),me.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((h=>{u.push(l.markPotentiallyOrphaned(e,h))})),me.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),me.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return me.resolve(i)}containsKey(e,n){return me.resolve(this.si.containsKey(n))}}class aN{constructor(e,n){this._i={},this.overlays={},this.ai=new Ph(0),this.ui=!1,this.ui=!0,this.ci=new x4,this.referenceDelegate=e(this),this.li=new _4(this),this.indexManager=new i4,this.remoteDocumentCache=(function(l){return new b4(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new s4(n),this.Pi=new p4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new y4(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){Ae("MemoryPersistence","Starting transaction:",e);const l=new w4(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return me.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class w4 extends YC{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ri=new Mg,this.Ai=null}static Vi(e){return new Og(e)}get di(){if(this.Ai)return this.Ai;throw He(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),me.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),me.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),me.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.di,(i=>{const l=Le.fromPath(i);return this.mi(e,l).next((u=>{u||n.removeEntry(l,Ge.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return me.or([()=>me.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Nh{constructor(e,n){this.persistence=e,this.fi=new rl((i=>WC(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=d4(this,n)}static Vi(e,n){return new Nh(e,n)}Ti(){}Ii(e){return me.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return me.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?me.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(h=>this.wr(e,h,n).next((p=>{p||(i++,u.removeEntry(h,Ge.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),me.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),me.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),me.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=nh(e.data.value)),n}wr(e,n,i){return me.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return me.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Vg{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=dt(),l=dt();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Vg(e,n.fromCache,i,l)}}class N4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class E4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return XS()?8:KC(qn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,l,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new N4;return this.ys(e,n,h).next((p=>{if(u.result=p,this.As)return this.ws(e,n,h,p.size)}))})).next((()=>u.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(Wl()<=ct.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",Xl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),me.resolve()):(Wl()<=ct.DEBUG&&Ae("QueryEngine","Query:",Xl(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Wl()<=ct.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",Xl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ta(n))):me.resolve())}gs(e,n){if(Fv(n))return me.resolve(null);let i=Ta(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=zp(n,null,"F"),i=Ta(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=dt(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const x=this.bs(n,p);return this.Ss(n,x,h,g.readTime)?this.gs(e,zp(n,null,"F")):this.Ds(e,x,n,g)}))))})))))}ps(e,n,i,l){return Fv(n)||l.isEqual(Ge.min())?me.resolve(null):this.fs.getDocuments(e,i).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,i,l)?me.resolve(null):(Wl()<=ct.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Xl(n)),this.Ds(e,h,n,FC(l,Kc)).next((p=>p)))}))}bs(e,n){let i=new _n(O1(e));return n.forEach(((l,u)=>{zh(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,i){return Wl()<=ct.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",Xl(n)),this.fs.getDocumentsMatchingQuery(e,n,tr.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const Pg="LocalStore",T4=3e8;class S4{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new Yt(ut),this.Fs=new rl((u=>Sg(u)),jg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function j4(s,e,n,i){return new S4(s,e,n,i)}async function iN(s,e){const n=Ke(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=dt();for(const x of l){h.push(x.batchId);for(const b of x.mutations)g=g.add(b.key)}for(const x of u){p.push(x.batchId);for(const b of x.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(i,g).next((x=>({Ns:x,removedBatchIds:h,addedBatchIds:p})))}))}))}function A4(s,e){const n=Ke(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,x,b){const w=x.batch,T=w.keys();let C=me.resolve();return T.forEach((H=>{C=C.next((()=>b.getEntry(g,H))).next((U=>{const V=x.docVersions.get(H);Nt(V!==null,48541),U.version.compareTo(V)<0&&(w.applyToRemoteDocument(U,x),U.isValidDocument()&&(U.setReadTime(x.commitVersion),b.addEntry(U)))}))})),C.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=dt();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(g=g.add(p.batch.mutations[x].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function rN(s){const e=Ke(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function R4(s,e){const n=Ke(s),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((b,w)=>{const T=l.get(w);if(!T)return;p.push(n.li.removeMatchingKeys(u,b.removedDocuments,w).next((()=>n.li.addMatchingKeys(u,b.addedDocuments,w))));let C=T.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(On.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):b.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(b.resumeToken,i)),l=l.insert(w,C),(function(U,V,B){return U.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=T4?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(T,C,b)&&p.push(n.li.updateTargetData(u,C))}));let g=ri(),x=dt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(C4(u,h,e.documentUpdates).next((b=>{g=b.Bs,x=b.Ls}))),!i.isEqual(Ge.min())){const b=n.li.getLastRemoteSnapshotVersion(u).next((w=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(b)}return me.waitFor(p).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,x))).next((()=>g))})).then((u=>(n.vs=l,u)))}function C4(s,e,n){let i=dt(),l=dt();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=ri();return n.forEach(((p,g)=>{const x=u.get(p);g.isFoundDocument()!==x.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Ge.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):Ae(Pg,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",g.version)})),{Bs:h,Ls:l}}))}function I4(s,e){const n=Ke(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ng),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function k4(s,e){const n=Ke(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((u=>u?(l=u,me.resolve(l)):n.li.allocateTargetId(i).next((h=>(l=new Yi(e,h,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function Gp(s,e,n){const i=Ke(s),l=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,l)))}catch(h){if(!Eo(h))throw h;Ae(Pg,`Failed to update sequence numbers for target ${e}: ${h}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function n_(s,e,n){const i=Ke(s);let l=Ge.min(),u=dt();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,x,b){const w=Ke(g),T=w.Fs.get(b);return T!==void 0?me.resolve(w.vs.get(T)):w.li.getTargetData(x,b)})(i,h,Ta(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(h,e,n?l:Ge.min(),n?u:dt()))).next((p=>(D4(i,x5(e),p),{documents:p,ks:u})))))}function D4(s,e,n){let i=s.Ms.get(e)||Ge.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class s_{constructor(){this.activeTargetIds=N5()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class M4{constructor(){this.vo=new s_,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new s_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class O4{Mo(e){}shutdown(){}}const a_="ConnectivityMonitor";class i_{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ae(a_,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ae(a_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Gd=null;function Yp(){return Gd===null?Gd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gd++,"0x"+Gd.toString(16)}const hp="RestConnection",V4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class P4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===xh?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,u){const h=Yp(),p=this.Qo(e,n.toUriEncodedString());Ae(hp,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:x}=new URL(p),b=cr(x);return this.zo(e,p,g,i,b).then((w=>(Ae(hp,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw oo(hp,`RPC '${e}' ${h} failed with error: `,w,"url: ",p,"request:",i),w}))}jo(e,n,i,l,u,h){return this.Wo(e,n,i,l,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+wo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const i=V4[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class L4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Un="WebChannelConnection",Sc=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class ro extends P4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ro.c_){const e=d1();Sc(e,u1.STAT_EVENT,(n=>{n.stat===Mp.PROXY?Ae(Un,"STAT_EVENT: detected buffering proxy"):n.stat===Mp.NOPROXY&&Ae(Un,"STAT_EVENT: detected no buffering proxy")})),ro.c_=!0}}zo(e,n,i,l,u){const h=Yp();return new Promise(((p,g)=>{const x=new o1;x.setWithCredentials(!0),x.listenOnce(c1.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case th.NO_ERROR:const w=x.getResponseJson();Ae(Un,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),p(w);break;case th.TIMEOUT:Ae(Un,`RPC '${e}' ${h} timed out`),g(new Se(fe.DEADLINE_EXCEEDED,"Request time out"));break;case th.HTTP_ERROR:const T=x.getStatus();if(Ae(Un,`RPC '${e}' ${h} failed with status:`,T,"response text:",x.getResponseText()),T>0){let C=x.getResponseJson();Array.isArray(C)&&(C=C[0]);const H=C?.error;if(H&&H.status&&H.message){const U=(function(B){const G=B.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(G)>=0?G:fe.UNKNOWN})(H.status);g(new Se(U,H.message))}else g(new Se(fe.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new Se(fe.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:h,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Ae(Un,`RPC '${e}' ${h} completed.`)}}));const b=JSON.stringify(l);Ae(Un,`RPC '${e}' ${h} sending request:`,l),x.send(n,"POST",b,i,15)}))}T_(e,n,i){const l=Yp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const x=u.join("");Ae(Un,`Creating RPC '${e}' stream ${l}: ${x}`,p);const b=h.createWebChannel(x,p);this.I_(b);let w=!1,T=!1;const C=new L4({Ho:H=>{T?Ae(Un,`Not sending because RPC '${e}' stream ${l} is closed:`,H):(w||(Ae(Un,`Opening RPC '${e}' stream ${l} transport.`),b.open(),w=!0),Ae(Un,`RPC '${e}' stream ${l} sending:`,H),b.send(H))},Jo:()=>b.close()});return Sc(b,Cc.EventType.OPEN,(()=>{T||(Ae(Un,`RPC '${e}' stream ${l} transport opened.`),C.i_())})),Sc(b,Cc.EventType.CLOSE,(()=>{T||(T=!0,Ae(Un,`RPC '${e}' stream ${l} transport closed`),C.o_(),this.E_(b))})),Sc(b,Cc.EventType.ERROR,(H=>{T||(T=!0,oo(Un,`RPC '${e}' stream ${l} transport errored. Name:`,H.name,"Message:",H.message),C.o_(new Se(fe.UNAVAILABLE,"The operation could not be completed")))})),Sc(b,Cc.EventType.MESSAGE,(H=>{if(!T){const U=H.data[0];Nt(!!U,16349);const V=U,B=V?.error||V[0]?.error;if(B){Ae(Un,`RPC '${e}' stream ${l} received error:`,B);const G=B.status;let Q=(function(le){const j=mn[le];if(j!==void 0)return G1(j)})(G),ge=B.message;Q===void 0&&(Q=fe.INTERNAL,ge="Unknown error status: "+G+" with message "+B.message),T=!0,C.o_(new Se(Q,ge)),b.close()}else Ae(Un,`RPC '${e}' stream ${l} received:`,U),C.__(U)}})),ro.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return h1()}}function U4(s){return new ro(s)}function fp(){return typeof document<"u"?document:null}function $h(s){return new F5(s,!0)}ro.c_=!1;class lN{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&Ae("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const r_="PersistentStream";class oN{constructor(e,n,i,l,u,h,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===fe.RESOURCE_EXHAUSTED?(ii(n.toString()),ii("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new Se(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ae(r_,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Ae(r_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class B4 extends oN{constructor(e,n,i,l,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=G5(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Ge.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ge.min():h.readTime?Sa(h.readTime):Ge.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=$p(this.serializer),n.addTarget=(function(u,h){let p;const g=h.target;if(p=Up(g)?{documents:Q5(u,g)}:{query:W5(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=Q1(u,h.resumeToken);const x=qp(u,h.expectedCount);x!==null&&(p.expectedCount=x)}else if(h.snapshotVersion.compareTo(Ge.min())>0){p.readTime=wh(u,h.snapshotVersion.toTimestamp());const x=qp(u,h.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,e);const i=J5(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=$p(this.serializer),n.removeTarget=e,this.K_(n)}}class z4 extends oN{constructor(e,n,i,l,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=K5(e.writeResults,e.commitTime),i=Sa(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=$p(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>Y5(this.serializer,i)))};this.K_(n)}}class q4{}class F4 extends q4{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new Se(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,Fp(n,i),l,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(fe.UNKNOWN,u.toString())}))}jo(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,Fp(n,i),l,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Se(fe.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function H4(s,e,n,i){return new F4(s,e,n,i)}class $4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ii(n),this.aa=!1):Ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Zr="RemoteStore";class G4{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{i.enqueueAndForget((async()=>{ll(this)&&(Ae(Zr,"Restarting streams for network reachability change."),await(async function(g){const x=Ke(g);x.Ea.add(4),await pu(x),x.Va.set("Unknown"),x.Ea.delete(4),await Gh(x)})(this))}))})),this.Va=new $4(i,l)}}async function Gh(s){if(ll(s))for(const e of s.Ra)await e(!0)}async function pu(s){for(const e of s.Ra)await e(!1)}function cN(s,e){const n=Ke(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zg(n)?Bg(n):To(n).O_()&&Ug(n,e))}function Lg(s,e){const n=Ke(s),i=To(n);n.Ia.delete(e),i.O_()&&uN(n,e),n.Ia.size===0&&(i.O_()?i.L_():ll(n)&&n.Va.set("Unknown"))}function Ug(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}To(s).Z_(e)}function uN(s,e){s.da.$e(e),To(s).X_(e)}function Bg(s){s.da=new U5({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),To(s).start(),s.Va.ua()}function zg(s){return ll(s)&&!To(s).x_()&&s.Ia.size>0}function ll(s){return Ke(s).Ea.size===0}function dN(s){s.da=void 0}async function Y4(s){s.Va.set("Online")}async function K4(s){s.Ia.forEach(((e,n)=>{Ug(s,e)}))}async function Q4(s,e){dN(s),zg(s)?(s.Va.ha(e),Bg(s)):s.Va.set("Unknown")}async function W4(s,e,n){if(s.Va.set("Online"),e instanceof K1&&e.state===2&&e.cause)try{await(async function(l,u){const h=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,h),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){Ae(Zr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Eh(s,i)}else if(e instanceof ih?s.da.Xe(e):e instanceof Y1?s.da.st(e):s.da.tt(e),!n.isEqual(Ge.min()))try{const i=await rN(s.localStore);n.compareTo(i)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(x);b&&u.Ia.set(x,b.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,x)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(On.EMPTY_BYTE_STRING,b.snapshotVersion)),uN(u,g);const w=new Yi(b.target,g,x,b.sequenceNumber);Ug(u,w)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){Ae(Zr,"Failed to raise snapshot:",i),await Eh(s,i)}}async function Eh(s,e,n){if(!Eo(e))throw e;s.Ea.add(1),await pu(s),s.Va.set("Offline"),n||(n=()=>rN(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Ae(Zr,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Gh(s)}))}function hN(s,e){return e().catch((n=>Eh(s,n,e)))}async function Yh(s){const e=Ke(s),n=ir(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ng;for(;X4(e);)try{const l=await I4(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,J4(e,l)}catch(l){await Eh(e,l)}fN(e)&&mN(e)}function X4(s){return ll(s)&&s.Ta.length<10}function J4(s,e){s.Ta.push(e);const n=ir(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function fN(s){return ll(s)&&!ir(s).x_()&&s.Ta.length>0}function mN(s){ir(s).start()}async function Z4(s){ir(s).ra()}async function eI(s){const e=ir(s);for(const n of s.Ta)e.ea(n.mutations)}async function tI(s,e,n){const i=s.Ta.shift(),l=Ig.from(i,e,n);await hN(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Yh(s)}async function nI(s,e){e&&ir(s).Y_&&await(async function(i,l){if((function(h){return V5(h)&&h!==fe.ABORTED})(l.code)){const u=i.Ta.shift();ir(i).B_(),await hN(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Yh(i)}})(s,e),fN(s)&&mN(s)}async function l_(s,e){const n=Ke(s);n.asyncQueue.verifyOperationInProgress(),Ae(Zr,"RemoteStore received new credentials");const i=ll(n);n.Ea.add(3),await pu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Gh(n)}async function sI(s,e){const n=Ke(s);e?(n.Ea.delete(2),await Gh(n)):e||(n.Ea.add(2),await pu(n),n.Va.set("Unknown"))}function To(s){return s.ma||(s.ma=(function(n,i,l){const u=Ke(n);return u.sa(),new B4(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:Y4.bind(null,s),Yo:K4.bind(null,s),t_:Q4.bind(null,s),J_:W4.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),zg(s)?Bg(s):s.Va.set("Unknown")):(await s.ma.stop(),dN(s))}))),s.ma}function ir(s){return s.fa||(s.fa=(function(n,i,l){const u=Ke(n);return u.sa(),new z4(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Z4.bind(null,s),t_:nI.bind(null,s),ta:eI.bind(null,s),na:tI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Yh(s)):(await s.fa.stop(),s.Ta.length>0&&(Ae(Zr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class qg{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const h=Date.now()+i,p=new qg(e,n,h,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fg(s,e){if(ii("AsyncQueue",`${e}: ${s}`),Eo(s))return new Se(fe.UNAVAILABLE,`${e}: ${s}`);throw s}class lo{static emptySet(e){return new lo(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Le.comparator(n.key,i.key):(n,i)=>Le.comparator(n.key,i.key),this.keyedMap=Ic(),this.sortedSet=new Yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new lo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class o_{constructor(){this.ga=new Yt(Le.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):He(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class mo{constructor(e,n,i,l,u,h,p,g,x){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,n,i,l,u){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new mo(e,n,lo.emptySet(n),h,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}class aI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class iI{constructor(){this.queries=c_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=Ke(n),u=l.queries;l.queries=c_(),u.forEach(((h,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new Se(fe.ABORTED,"Firestore shutting down"))}}function c_(){return new rl((s=>M1(s)),Bh)}async function pN(s,e){const n=Ke(s);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new aI,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(h){const p=Fg(h,`Initialization of query '${Xl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Hg(n)}async function gN(s,e){const n=Ke(s),i=e.query;let l=3;const u=n.queries.get(i);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function rI(s,e){const n=Ke(s);let i=!1;for(const l of e){const u=l.query,h=n.queries.get(u);if(h){for(const p of h.ba)p.Fa(l)&&(i=!0);h.wa=l}}i&&Hg(n)}function lI(s,e,n){const i=Ke(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(n);i.queries.delete(e)}function Hg(s){s.Ca.forEach((e=>{e.next()}))}var Kp,u_;(u_=Kp||(Kp={})).Ma="default",u_.Cache="cache";class xN{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new mo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=mo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kp.Cache}}class yN{constructor(e){this.key=e}}class bN{constructor(e){this.key=e}}class oI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=dt(),this.mutatedKeys=dt(),this.eu=O1(e),this.tu=new lo(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new o_,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,x=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,w)=>{const T=l.get(b),C=zh(this.query,w)?w:null,H=!!T&&this.mutatedKeys.has(T.key),U=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;T&&C?T.data.isEqual(C.data)?H!==U&&(i.track({type:3,doc:C}),V=!0):this.su(T,C)||(i.track({type:2,doc:C}),V=!0,(g&&this.eu(C,g)>0||x&&this.eu(C,x)<0)&&(p=!0)):!T&&C?(i.track({type:0,doc:C}),V=!0):T&&!C&&(i.track({type:1,doc:T}),V=!0,(g||x)&&(p=!0)),V&&(C?(h=h.add(C),u=U?u.add(b):u.delete(b)):(h=h.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const b=this.query.limitType==="F"?h.last():h.first();h=h.delete(b.key),u=u.delete(b.key),i.track({type:1,doc:b})}return{tu:h,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((b,w)=>(function(C,H){const U=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Vt:V})}};return U(C)-U(H)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,x=g!==this.Xa;return this.Xa=g,h.length!==0||x?{snapshot:new mo(this.query,e.tu,u,h,e.mutatedKeys,g===0,x,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new o_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=dt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new bN(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new yN(i))})),n}cu(e){this.Za=e.ks,this.Ya=dt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return mo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const $g="SyncEngine";class cI{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class uI{constructor(e){this.key=e,this.hu=!1}}class dI{constructor(e,n,i,l,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new rl((p=>M1(p)),Bh),this.Iu=new Map,this.Eu=new Set,this.Ru=new Yt(Le.comparator),this.Au=new Map,this.Vu=new Mg,this.du={},this.mu=new Map,this.fu=fo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hI(s,e,n=!0){const i=TN(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await vN(i,e,n,!0),l}async function fI(s,e){const n=TN(s);await vN(n,e,!0,!1)}async function vN(s,e,n,i){const l=await k4(s.localStore,Ta(e)),u=l.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await mI(s,e,u,h==="current",l.resumeToken)),s.isPrimaryClient&&n&&cN(s.remoteStore,l),p}async function mI(s,e,n,i,l){s.pu=(w,T,C)=>(async function(U,V,B,G){let Q=V.view.ru(B);Q.Ss&&(Q=await n_(U.localStore,V.query,!1).then((({documents:j})=>V.view.ru(j,Q))));const ge=G&&G.targetChanges.get(V.targetId),pe=G&&G.targetMismatches.get(V.targetId)!=null,le=V.view.applyChanges(Q,U.isPrimaryClient,ge,pe);return h_(U,V.targetId,le.au),le.snapshot})(s,w,T,C);const u=await n_(s.localStore,e,!0),h=new oI(e,u.ks),p=h.ru(u.documents),g=mu.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),x=h.applyChanges(p,s.isPrimaryClient,g);h_(s,n,x.au);const b=new cI(e,n,h);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),x.snapshot}async function pI(s,e,n){const i=Ke(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((h=>!Bh(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await Gp(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&Lg(i.remoteStore,l.targetId),Qp(i,l.targetId)})).catch(No)):(Qp(i,l.targetId),await Gp(i.localStore,l.targetId,!0))}async function gI(s,e){const n=Ke(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Lg(n.remoteStore,i.targetId))}async function xI(s,e,n){const i=EI(s);try{const l=await(function(h,p){const g=Ke(h),x=wt.now(),b=p.reduce(((C,H)=>C.add(H.key)),dt());let w,T;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let H=ri(),U=dt();return g.xs.getEntries(C,b).next((V=>{H=V,H.forEach(((B,G)=>{G.isValidDocument()||(U=U.add(B))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,H))).next((V=>{w=V;const B=[];for(const G of p){const Q=I5(G,w.get(G.key).overlayedDocument);Q!=null&&B.push(new fr(G.key,Q,S1(Q.value.mapValue),Ws.exists(!0)))}return g.mutationQueue.addMutationBatch(C,x,B,p)})).next((V=>{T=V;const B=V.applyToLocalDocumentSet(w,U);return g.documentOverlayCache.saveOverlays(C,V.batchId,B)}))})).then((()=>({batchId:T.batchId,changes:P1(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(h,p,g){let x=h.du[h.currentUser.toKey()];x||(x=new Yt(ut)),x=x.insert(p,g),h.du[h.currentUser.toKey()]=x})(i,l.batchId,n),await gu(i,l.changes),await Yh(i.remoteStore)}catch(l){const u=Fg(l,"Failed to persist write");n.reject(u)}}async function _N(s,e){const n=Ke(s);try{const i=await R4(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const h=n.Au.get(u);h&&(Nt(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?h.hu=!0:l.modifiedDocuments.size>0?Nt(h.hu,14607):l.removedDocuments.size>0&&(Nt(h.hu,42227),h.hu=!1))})),await gu(n,i,e)}catch(i){await No(i)}}function d_(s,e,n){const i=Ke(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(h,p){const g=Ke(h);g.onlineState=p;let x=!1;g.queries.forEach(((b,w)=>{for(const T of w.ba)T.va(p)&&(x=!0)})),x&&Hg(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function yI(s,e,n){const i=Ke(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let h=new Yt(Le.comparator);h=h.insert(u,zn.newNoDocument(u,Ge.min()));const p=dt().add(u),g=new Hh(Ge.min(),new Map,new Yt(ut),h,p);await _N(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),Gg(i)}else await Gp(i.localStore,e,!1).then((()=>Qp(i,e,n))).catch(No)}async function bI(s,e){const n=Ke(s),i=e.batch.batchId;try{const l=await A4(n.localStore,e);NN(n,i,null),wN(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await gu(n,l)}catch(l){await No(l)}}async function vI(s,e,n){const i=Ke(s);try{const l=await(function(h,p){const g=Ke(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let b;return g.mutationQueue.lookupMutationBatch(x,p).next((w=>(Nt(w!==null,37113),b=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,b))).next((()=>g.localDocuments.getDocuments(x,b)))}))})(i.localStore,e);NN(i,e,n),wN(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await gu(i,l)}catch(l){await No(l)}}function wN(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function NN(s,e,n){const i=Ke(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function Qp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||EN(s,i)}))}function EN(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Lg(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),Gg(s))}function h_(s,e,n){for(const i of n)i instanceof yN?(s.Vu.addReference(i.key,e),_I(s,i)):i instanceof bN?(Ae($g,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||EN(s,i.key)):He(19791,{wu:i})}function _I(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(Ae($g,"New document in limbo: "+n),s.Eu.add(i),Gg(s))}function Gg(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Le(Pt.fromString(e)),i=s.fu.next();s.Au.set(i,new uI(n)),s.Ru=s.Ru.insert(n,i),cN(s.remoteStore,new Yi(Ta(Ag(n.path)),i,"TargetPurposeLimboResolution",Ph.ce))}}async function gu(s,e,n){const i=Ke(s),l=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,n).then((x=>{if((x||n)&&i.isPrimaryClient){const b=x?!x.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(x){l.push(x);const b=Vg.Es(g.targetId,x);u.push(b)}})))})),await Promise.all(h),i.Pu.J_(l),await(async function(g,x){const b=Ke(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>me.forEach(x,(T=>me.forEach(T.Ts,(C=>b.persistence.referenceDelegate.addReference(w,T.targetId,C))).next((()=>me.forEach(T.Is,(C=>b.persistence.referenceDelegate.removeReference(w,T.targetId,C)))))))))}catch(w){if(!Eo(w))throw w;Ae(Pg,"Failed to update sequence numbers: "+w)}for(const w of x){const T=w.targetId;if(!w.fromCache){const C=b.vs.get(T),H=C.snapshotVersion,U=C.withLastLimboFreeSnapshotVersion(H);b.vs=b.vs.insert(T,U)}}})(i.localStore,u))}async function wI(s,e){const n=Ke(s);if(!n.currentUser.isEqual(e)){Ae($g,"User change. New user:",e.toKey());const i=await iN(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Se(fe.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await gu(n,i.Ns)}}function NI(s,e){const n=Ke(s),i=n.Au.get(e);if(i&&i.hu)return dt().add(i.key);{let l=dt();const u=n.Iu.get(e);if(!u)return l;for(const h of u){const p=n.Tu.get(h);l=l.unionWith(p.view.nu)}return l}}function TN(s){const e=Ke(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=_N.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yI.bind(null,e),e.Pu.J_=rI.bind(null,e.eventManager),e.Pu.yu=lI.bind(null,e.eventManager),e}function EI(s){const e=Ke(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vI.bind(null,e),e}class Th{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$h(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return j4(this.persistence,new E4,e.initialUser,this.serializer)}Cu(e){return new aN(Og.Vi,this.serializer)}Du(e){return new M4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Th.provider={build:()=>new Th};class TI extends Th{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Nt(this.persistence.referenceDelegate instanceof Nh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new c4(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new aN((i=>Nh.Vi(i,n)),this.serializer)}}class Wp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>d_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=wI.bind(null,this.syncEngine),await sI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iI})()}createDatastore(e){const n=$h(e.databaseInfo.databaseId),i=U4(e.databaseInfo);return H4(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,h,p){return new G4(i,l,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>d_(this.syncEngine,n,0)),(function(){return i_.v()?new i_:new O4})())}createSyncEngine(e,n){return(function(l,u,h,p,g,x,b){const w=new dI(l,u,h,p,g,x);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Ke(n);Ae(Zr,"RemoteStore shutting down."),i.Ea.add(5),await pu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Wp.provider={build:()=>new Wp};class SN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ii("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const rr="FirestoreClient";class SI{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=Bn.UNAUTHENTICATED,this.clientId=wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{Ae(rr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(Ae(rr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Fg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function mp(s,e){s.asyncQueue.verifyOperationInProgress(),Ae(rr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await iN(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function f_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await jI(s);Ae(rr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>l_(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>l_(e.remoteStore,l))),s._onlineComponents=e}async function jI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Ae(rr,"Using user provided OfflineComponentProvider");try{await mp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===fe.FAILED_PRECONDITION||l.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await mp(s,new Th)}}else Ae(rr,"Using default OfflineComponentProvider"),await mp(s,new TI(void 0));return s._offlineComponents}async function jN(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Ae(rr,"Using user provided OnlineComponentProvider"),await f_(s,s._uninitializedComponentsProvider._online)):(Ae(rr,"Using default OnlineComponentProvider"),await f_(s,new Wp))),s._onlineComponents}function AI(s){return jN(s).then((e=>e.syncEngine))}async function Xp(s){const e=await jN(s),n=e.eventManager;return n.onListen=hI.bind(null,e.syncEngine),n.onUnlisten=pI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gI.bind(null,e.syncEngine),n}function RI(s,e,n,i){const l=new SN(i),u=new xN(e,l,n);return s.asyncQueue.enqueueAndForget((async()=>pN(await Xp(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>gN(await Xp(s),u)))}}function CI(s,e,n={}){const i=new Xi;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,x){const b=new SN({next:T=>{b.Nu(),h.enqueueAndForget((()=>gN(u,w))),T.fromCache&&g.source==="server"?x.reject(new Se(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(T)},error:T=>x.reject(T)}),w=new xN(p,b,{includeMetadataChanges:!0,Ka:!0});return pN(u,w)})(await Xp(s),s.asyncQueue,e,n,i))),i.promise}function II(s,e){const n=new Xi;return s.asyncQueue.enqueueAndForget((async()=>xI(await AI(s),e,n))),n.promise}function AN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const kI="ComponentProvider",m_=new Map;function DI(s,e,n,i,l){return new ZC(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,AN(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const RN="firestore.googleapis.com",p_=!0;class g_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RN,this.ssl=p_}else this.host=e.host,this.ssl=e.ssl??p_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<l4)throw new Se(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AN(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Se(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Se(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Se(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kh{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new kC;switch(i.type){case"firstParty":return new VC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=m_.get(n);i&&(Ae(kI,"Removing Datastore"),m_.delete(n),i.terminate())})(this),Promise.resolve()}}function MI(s,e,n,i={}){s=Ea(s,Kh);const l=cr(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(og(`https://${p}`),cg("Firestore",!0)),u.host!==RN&&u.host!==p&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!Kr(g,h)&&(s._setSettings(g),i.mockUserToken)){let x,b;if(typeof i.mockUserToken=="string")x=i.mockUserToken,b=Bn.MOCK_USER;else{x=vw(i.mockUserToken,s._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new Se(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Bn(w)}s._authCredentials=new DC(new m1(x,b))}}class ol{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ol(this.firestore,e,this._query)}}class yn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new yn(this.firestore,e,this._key)}toJSON(){return{type:yn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(du(n,yn._jsonSchema))return new yn(e,i||null,new Le(Pt.fromString(n.referencePath)))}}yn._jsonSchemaVersion="firestore/documentReference/1.0",yn._jsonSchema={type:xn("string",yn._jsonSchemaVersion),referencePath:xn("string")};class Ji extends ol{constructor(e,n,i){super(e,n,Ag(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yn(this.firestore,null,new Le(e))}withConverter(e){return new Ji(this.firestore,e,this._path)}}function Je(s,e,...n){if(s=Ht(s),p1("collection","path",e),s instanceof Kh){const i=Pt.fromString(e,...n);return Rv(i),new Ji(s,null,i)}{if(!(s instanceof yn||s instanceof Ji))throw new Se(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Pt.fromString(e,...n));return Rv(i),new Ji(s.firestore,null,i)}}function tt(s,e,...n){if(s=Ht(s),arguments.length===1&&(e=wg.newId()),p1("doc","path",e),s instanceof Kh){const i=Pt.fromString(e,...n);return Av(i),new yn(s,null,new Le(i))}{if(!(s instanceof yn||s instanceof Ji))throw new Se(fe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Pt.fromString(e,...n));return Av(i),new yn(s.firestore,s instanceof Ji?s.converter:null,new Le(i))}}const x_="AsyncQueue";class y_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lN(this,"async_queue_retry"),this._c=()=>{const i=fp();i&&Ae(x_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=fp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Xi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Eo(e))throw e;Ae(x_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ii("INTERNAL UNHANDLED ERROR: ",b_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=qg.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&He(47125,{Pc:b_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function b_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class el extends Kh{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new y_,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y_(e),this._firestoreClient=void 0,await e}}}function OI(s,e){const n=typeof s=="object"?s:hg(),i=typeof s=="string"?s:xh,l=kh(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=xw("firestore");u&&MI(l,...u)}return l}function Yg(s){if(s._terminated)throw new Se(fe.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||VI(s),s._firestoreClient}function VI(s){const e=s._freezeSettings(),n=DI(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new SI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class Vs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vs(On.fromBase64String(e))}catch(n){throw new Se(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vs(On.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,Vs._jsonSchema))return Vs.fromBase64String(e.bytes)}}Vs._jsonSchemaVersion="firestore/bytes/1.0",Vs._jsonSchema={type:xn("string",Vs._jsonSchemaVersion),bytes:xn("string")};class Kg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Se(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Qh{constructor(e){this._methodName=e}}class ja{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Se(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Se(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ja._jsonSchemaVersion}}static fromJSON(e){if(du(e,ja._jsonSchema))return new ja(e.latitude,e.longitude)}}ja._jsonSchemaVersion="firestore/geoPoint/1.0",ja._jsonSchema={type:xn("string",ja._jsonSchemaVersion),latitude:xn("number"),longitude:xn("number")};class Xs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,Xs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Xs(e.vectorValues);throw new Se(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xs._jsonSchemaVersion="firestore/vectorValue/1.0",Xs._jsonSchema={type:xn("string",Xs._jsonSchemaVersion),vectorValues:xn("object")};const PI=/^__.*__$/;class LI{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new fu(e,this.data,n,this.fieldTransforms)}}class CN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function IN(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{dataSource:s})}}class Qg{constructor(e,n,i,l,u,h){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Qg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Sh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(IN(this.dataSource)&&PI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class UI{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||$h(e)}createContext(e,n,i,l=!1){return new Qg({dataSource:e,methodName:n,targetDoc:i,path:Mn.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wg(s){const e=s._freezeSettings(),n=$h(s._databaseId);return new UI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function BI(s,e,n,i,l,u={}){const h=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);Jg("Data must be an object, but it was:",h,i);const p=kN(i,h);let g,x;if(u.merge)g=new gs(h.fieldMask),x=h.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const T=po(e,w,n);if(!h.contains(T))throw new Se(fe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);ON(b,T)||b.push(T)}g=new gs(b),x=h.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=h.fieldTransforms;return new LI(new ns(p),g,x)}class Wh extends Qh{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wh}}class Xg extends Qh{_toFieldTransform(e){return new j5(e.path,new Jc)}isEqual(e){return e instanceof Xg}}function zI(s,e,n,i){const l=s.createContext(1,e,n);Jg("Data must be an object, but it was:",l,i);const u=[],h=ns.empty();hr(i,((g,x)=>{const b=MN(e,g,n);x=Ht(x);const w=l.childContextForFieldPath(b);if(x instanceof Wh)u.push(b);else{const T=xu(x,w);T!=null&&(u.push(b),h.set(b,T))}}));const p=new gs(u);return new CN(h,p,l.fieldTransforms)}function qI(s,e,n,i,l,u){const h=s.createContext(1,e,n),p=[po(e,i,n)],g=[l];if(u.length%2!=0)throw new Se(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<u.length;T+=2)p.push(po(e,u[T])),g.push(u[T+1]);const x=[],b=ns.empty();for(let T=p.length-1;T>=0;--T)if(!ON(x,p[T])){const C=p[T];let H=g[T];H=Ht(H);const U=h.childContextForFieldPath(C);if(H instanceof Wh)x.push(C);else{const V=xu(H,U);V!=null&&(x.push(C),b.set(C,V))}}const w=new gs(x);return new CN(b,w,h.fieldTransforms)}function FI(s,e,n,i=!1){return xu(n,s.createContext(i?4:3,e))}function xu(s,e){if(DN(s=Ht(s)))return Jg("Unsupported field value:",e,s),kN(s,e);if(s instanceof Qh)return(function(i,l){if(!IN(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let h=0;for(const p of i){let g=xu(p,l.childContextForArray(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=Ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return E5(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=wt.fromDate(i);return{timestampValue:wh(l.serializer,u)}}if(i instanceof wt){const u=new wt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wh(l.serializer,u)}}if(i instanceof ja)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vs)return{bytesValue:Q1(l.serializer,i._byteString)};if(i instanceof yn){const u=l.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw l.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Dg(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof Xs)return(function(h,p){const g=h instanceof Xs?h.toArray():h;return{mapValue:{fields:{[E1]:{stringValue:T1},[yh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return Rg(p.serializer,b)}))}}}}}})(i,l);if(nN(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${Vh(i)}`)})(s,e)}function kN(s,e){const n={};return y1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hr(s,((i,l)=>{const u=xu(l,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function DN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof wt||s instanceof ja||s instanceof Vs||s instanceof yn||s instanceof Qh||s instanceof Xs||nN(s))}function Jg(s,e,n){if(!DN(n)||!g1(n)){const i=Vh(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function po(s,e,n){if((e=Ht(e))instanceof Kg)return e._internalPath;if(typeof e=="string")return MN(s,e);throw Sh("Field path arguments must be of type string or ",s,!1,void 0,n)}const HI=new RegExp("[~\\*/\\[\\]]");function MN(s,e,n){if(e.search(HI)>=0)throw Sh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Kg(...e.split("."))._internalPath}catch{throw Sh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Sh(s,e,n,i,l){const u=i&&!i.isEmpty(),h=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${l}`),g+=")"),new Se(fe.INVALID_ARGUMENT,p+s+g)}function ON(s,e){return s.some((n=>n.isEqual(e)))}class $I{convertValue(e,n="none"){switch(ar(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return hr(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[yh].arrayValue?.values?.map((i=>tn(i.doubleValue)));return new Xs(n)}convertGeoPoint(e){return new ja(tn(e.latitude),tn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Uh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const n=nr(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Pt.fromString(e);Nt(tN(i),9688,{name:e});const l=new Wc(i.get(1),i.get(3)),u=new Le(i.popFirst(5));return l.isEqual(n)||ii(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class Zg extends $I{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yn(this.firestore,null,n)}}function e0(){return new Xg("serverTimestamp")}const v_="@firebase/firestore",__="4.10.0";function w_(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class VN{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new yn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(po("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GI extends VN{data(){return super.data()}}function PN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Se(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class t0{}class YI extends t0{}function bs(s,e,...n){let i=[];e instanceof t0&&i.push(e),i=i.concat(n),(function(u){const h=u.filter((g=>g instanceof n0)).length,p=u.filter((g=>g instanceof Xh)).length;if(h>1||h>0&&p>0)throw new Se(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class Xh extends YI{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Xh(e,n,i)}_apply(e){const n=this._parse(e);return LN(e._query,n),new ol(e.firestore,e.converter,Bp(e._query,n))}_parse(e){const n=Wg(e.firestore);return(function(u,h,p,g,x,b,w){let T;if(x.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Se(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){E_(w,b);const H=[];for(const U of w)H.push(N_(g,u,U));T={arrayValue:{values:H}}}else T=N_(g,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||E_(w,b),T=FI(p,h,w,b==="in"||b==="not-in");return gn.create(x,b,T)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ss(s,e,n){const i=e,l=po("where",s);return Xh._create(l,i,n)}class n0 extends t0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new n0(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Zs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let h=l;const p=u.getFlattenedFilters();for(const g of p)LN(h,g),h=Bp(h,g)})(e._query,n),new ol(e.firestore,e.converter,Bp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function N_(s,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new Se(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!D1(e)&&n.indexOf("/")!==-1)throw new Se(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Pt.fromString(n));if(!Le.isDocumentKey(i))throw new Se(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Pv(s,new Le(i))}if(n instanceof yn)return Pv(s,n._key);throw new Se(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vh(n)}.`)}function E_(s,e){if(!Array.isArray(s)||s.length===0)throw new Se(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function LN(s,e){const n=(function(l,u){for(const h of l)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Se(fe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(fe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function KI(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class Dc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $r extends VN{constructor(e,n,i,l,u,h){super(e,n,i,l,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(po("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$r._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$r._jsonSchemaVersion="firestore/documentSnapshot/1.0",$r._jsonSchema={type:xn("string",$r._jsonSchemaVersion),bundleSource:xn("string","DocumentSnapshot"),bundleName:xn("string"),bundle:xn("string")};class rh extends $r{data(e={}){return super.data(e)}}class Gr{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new Dc(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new rh(this._firestore,this._userDataWriter,i.key,i,new Dc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Se(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let h=0;return l._snapshot.docChanges.map((p=>{const g=new rh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Dc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new rh(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Dc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let x=-1,b=-1;return p.type!==0&&(x=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),b=h.indexOf(p.doc.key)),{type:QI(p.type),doc:g,oldIndex:x,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:s})}}Gr._jsonSchemaVersion="firestore/querySnapshot/1.0",Gr._jsonSchema={type:xn("string",Gr._jsonSchemaVersion),bundleSource:xn("string","QuerySnapshot"),bundleName:xn("string"),bundle:xn("string")};function vs(s){s=Ea(s,ol);const e=Ea(s.firestore,el),n=Yg(e),i=new Zg(e);return PN(s._query),CI(n,s._query).then((l=>new Gr(e,i,s,l)))}function nt(s,e,n,...i){s=Ea(s,yn);const l=Ea(s.firestore,el),u=Wg(l);let h;return h=typeof(e=Ht(e))=="string"||e instanceof Kg?qI(u,"updateDoc",s._key,e,n,i):zI(u,"updateDoc",s._key,e),s0(l,[h.toMutation(s._key,Ws.exists(!0))])}function WI(s){return s0(Ea(s.firestore,el),[new Cg(s._key,Ws.none())])}function li(s,e){const n=Ea(s.firestore,el),i=tt(s),l=KI(s.converter,e),u=Wg(s.firestore);return s0(n,[BI(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,Ws.exists(!1))]).then((()=>i))}function pn(s,...e){s=Ht(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||w_(e[i])||(n=e[i++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(w_(e[i])){const x=e[i];e[i]=x.next?.bind(x),e[i+1]=x.error?.bind(x),e[i+2]=x.complete?.bind(x)}let u,h,p;if(s instanceof yn)h=Ea(s.firestore,el),p=Ag(s._key.path),u={next:x=>{e[i]&&e[i](XI(h,s,x))},error:e[i+1],complete:e[i+2]};else{const x=Ea(s,ol);h=Ea(x.firestore,el),p=x._query;const b=new Zg(h);u={next:w=>{e[i]&&e[i](new Gr(h,b,x,w))},error:e[i+1],complete:e[i+2]},PN(s._query)}const g=Yg(h);return RI(g,p,l,u)}function s0(s,e){const n=Yg(s);return II(n,e)}function XI(s,e,n){const i=n.docs.get(e._key),l=new Zg(s);return new $r(s,l,e._key,i,new Dc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){IC(al),Qr(new er("firestore",((i,{instanceIdentifier:l,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new el(new MC(i.getProvider("auth-internal")),new PC(h,i.getProvider("app-check-internal")),e5(h,l),h);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),_a(v_,__,e),_a(v_,__,"esm2020")})();const UN="firebasestorage.googleapis.com",BN="storageBucket",JI=120*1e3,ZI=600*1e3;class Xt extends Ia{constructor(e,n,i=0){super(pp(e),`Firebase Storage: ${n} (${pp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return pp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wt||(Wt={}));function pp(s){return"storage/"+s}function a0(){const s="An unknown error occurred, please check the error payload for server response.";return new Xt(Wt.UNKNOWN,s)}function ek(s){return new Xt(Wt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function tk(s){return new Xt(Wt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function nk(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Xt(Wt.UNAUTHENTICATED,s)}function sk(){return new Xt(Wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ak(s){return new Xt(Wt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function ik(){return new Xt(Wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rk(){return new Xt(Wt.CANCELED,"User canceled the upload/download.")}function lk(s){return new Xt(Wt.INVALID_URL,"Invalid URL '"+s+"'.")}function ok(s){return new Xt(Wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function ck(){return new Xt(Wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BN+"' property when initializing the app?")}function uk(){return new Xt(Wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dk(){return new Xt(Wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hk(s){return new Xt(Wt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jp(s){return new Xt(Wt.INVALID_ARGUMENT,s)}function zN(){return new Xt(Wt.APP_DELETED,"The Firebase app was deleted.")}function fk(s){return new Xt(Wt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zc(s,e){return new Xt(Wt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function jc(s){throw new Xt(Wt.INTERNAL_ERROR,"Internal error: "+s)}class xs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=xs.makeFromUrl(e,n)}catch{return new xs(e,"")}if(i.path==="")return i;throw ok(e)}static makeFromUrl(e,n){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(ge){ge.path.charAt(ge.path.length-1)==="/"&&(ge.path_=ge.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+l+h,"i"),g={bucket:1,path:3};function x(ge){ge.path_=decodeURIComponent(ge.path)}const b="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${b}/b/${l}/o${T}`,"i"),H={bucket:1,path:3},U=n===UN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,V="([^?#]*)",B=new RegExp(`^https?://${U}/${l}/${V}`,"i"),Q=[{regex:p,indices:g,postModify:u},{regex:C,indices:H,postModify:x},{regex:B,indices:{bucket:1,path:2},postModify:x}];for(let ge=0;ge<Q.length;ge++){const pe=Q[ge],le=pe.regex.exec(e);if(le){const j=le[pe.indices.bucket];let A=le[pe.indices.path];A||(A=""),i=new xs(j,A),pe.postModify(i);break}}if(i==null)throw lk(e);return i}}class mk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function pk(s,e,n){let i=1,l=null,u=null,h=!1,p=0;function g(){return p===2}let x=!1;function b(...V){x||(x=!0,e.apply(null,V))}function w(V){l=setTimeout(()=>{l=null,s(C,g())},V)}function T(){u&&clearTimeout(u)}function C(V,...B){if(x){T();return}if(V){T(),b.call(null,V,...B);return}if(g()||h){T(),b.call(null,V,...B);return}i<64&&(i*=2);let Q;p===1?(p=2,Q=0):Q=(i+Math.random())*1e3,w(Q)}let H=!1;function U(V){H||(H=!0,T(),!x&&(l!==null?(V||(p=2),clearTimeout(l),w(0)):V||(p=1)))}return w(0),u=setTimeout(()=>{h=!0,U(!0)},n),U}function gk(s){s(!1)}function xk(s){return s!==void 0}function yk(s){return typeof s=="object"&&!Array.isArray(s)}function i0(s){return typeof s=="string"||s instanceof String}function T_(s){return r0()&&s instanceof Blob}function r0(){return typeof Blob<"u"}function S_(s,e,n,i){if(i<e)throw Jp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw Jp(`Invalid value for '${s}'. Expected ${n} or less.`)}function Jh(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function qN(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);n=n+l+"&"}return n=n.slice(0,-1),n}var Yr;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Yr||(Yr={}));function bk(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class vk{constructor(e,n,i,l,u,h,p,g,x,b,w,T=!0,C=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=x,this.progressCallback_=b,this.connectionFactory_=w,this.retry=T,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,U)=>{this.resolve_=H,this.reject_=U,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new Yd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,x=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,x)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===Yr.NO_ERROR,g=u.getStatus();if(!p||bk(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===Yr.ABORT;i(!1,new Yd(!1,null,b));return}const x=this.successCodes_.indexOf(g)!==-1;i(!0,new Yd(x,u))})},n=(i,l)=>{const u=this.resolve_,h=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());xk(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=a0();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(l.canceled){const g=this.appDelete_?zN():rk();h(g)}else{const g=ik();h(g)}};this.canceled_?n(!1,new Yd(!1,null,!0)):this.backoffId_=pk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function _k(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function wk(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Nk(s,e){e&&(s["X-Firebase-GMPID"]=e)}function Ek(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function Tk(s,e,n,i,l,u,h=!0,p=!1){const g=qN(s.urlParams),x=s.url+g,b=Object.assign({},s.headers);return Nk(b,e),_k(b,n),wk(b,u),Ek(b,i),new vk(x,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,h,p)}function Sk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function jk(...s){const e=Sk();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(r0())return new Blob(s);throw new Xt(Wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ak(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function Rk(s){if(typeof atob>"u")throw hk("base-64");return atob(s)}const va={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gp{constructor(e,n){this.data=e,this.contentType=n||null}}function Ck(s,e){switch(s){case va.RAW:return new gp(FN(e));case va.BASE64:case va.BASE64URL:return new gp(HN(s,e));case va.DATA_URL:return new gp(kk(e),Dk(e))}throw a0()}function FN(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++n);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Ik(s){let e;try{e=decodeURIComponent(s)}catch{throw zc(va.DATA_URL,"Malformed data URL.")}return FN(e)}function HN(s,e){switch(s){case va.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw zc(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case va.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw zc(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Rk(e)}catch(l){throw l.message.includes("polyfill")?l:zc(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i}class $N{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw zc(va.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=Mk(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function kk(s){const e=new $N(s);return e.base64?HN(va.BASE64,e.rest):Ik(e.rest)}function Dk(s){return new $N(s).contentType}function Mk(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Gi{constructor(e,n){let i=0,l="";T_(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(T_(this.data_)){const i=this.data_,l=Ak(i,e,n);return l===null?null:new Gi(l)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Gi(i,!0)}}static getBlob(...e){if(r0()){const n=e.map(i=>i instanceof Gi?i.data_:i);return new Gi(jk.apply(null,n))}else{const n=e.map(h=>i0(h)?Ck(va.RAW,h).data:h.data_);let i=0;n.forEach(h=>{i+=h.byteLength});const l=new Uint8Array(i);let u=0;return n.forEach(h=>{for(let p=0;p<h.length;p++)l[u++]=h[p]}),new Gi(l,!0)}}uploadData(){return this.data_}}function GN(s){let e;try{e=JSON.parse(s)}catch{return null}return yk(e)?e:null}function Ok(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function Vk(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function YN(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function Pk(s,e){return e}class Yn{constructor(e,n,i,l){this.server=e,this.local=n||e,this.writable=!!i,this.xform=l||Pk}}let Kd=null;function Lk(s){return!i0(s)||s.length<2?s:YN(s)}function KN(){if(Kd)return Kd;const s=[];s.push(new Yn("bucket")),s.push(new Yn("generation")),s.push(new Yn("metageneration")),s.push(new Yn("name","fullPath",!0));function e(u,h){return Lk(h)}const n=new Yn("name");n.xform=e,s.push(n);function i(u,h){return h!==void 0?Number(h):h}const l=new Yn("size");return l.xform=i,s.push(l),s.push(new Yn("timeCreated")),s.push(new Yn("updated")),s.push(new Yn("md5Hash",null,!0)),s.push(new Yn("cacheControl",null,!0)),s.push(new Yn("contentDisposition",null,!0)),s.push(new Yn("contentEncoding",null,!0)),s.push(new Yn("contentLanguage",null,!0)),s.push(new Yn("contentType",null,!0)),s.push(new Yn("metadata","customMetadata",!0)),Kd=s,Kd}function Uk(s,e){function n(){const i=s.bucket,l=s.fullPath,u=new xs(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function Bk(s,e,n){const i={};i.type="file";const l=n.length;for(let u=0;u<l;u++){const h=n[u];i[h.local]=h.xform(i,e[h.server])}return Uk(i,s),i}function QN(s,e,n){const i=GN(e);return i===null?null:Bk(s,i,n)}function zk(s,e,n,i){const l=GN(e);if(l===null||!i0(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(x=>{const b=s.bucket,w=s.fullPath,T="/b/"+h(b)+"/o/"+h(w),C=Jh(T,n,i),H=qN({alt:"media",token:x});return C+H})[0]}function qk(s,e){const n={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}class l0{constructor(e,n,i,l){this.url=e,this.method=n,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function WN(s){if(!s)throw a0()}function Fk(s,e){function n(i,l){const u=QN(s,l,e);return WN(u!==null),u}return n}function Hk(s,e){function n(i,l){const u=QN(s,l,e);return WN(u!==null),zk(u,l,s.host,s._protocol)}return n}function XN(s){function e(n,i){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=sk():l=nk():n.getStatus()===402?l=tk(s.bucket):n.getStatus()===403?l=ak(s.path):l=i,l.status=n.getStatus(),l.serverResponse=i.serverResponse,l}return e}function JN(s){const e=XN(s);function n(i,l){let u=e(i,l);return i.getStatus()===404&&(u=ek(s.path)),u.serverResponse=l.serverResponse,u}return n}function $k(s,e,n){const i=e.fullServerUrl(),l=Jh(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new l0(l,u,Hk(s,n),h);return p.errorHandler=JN(e),p}function Gk(s,e){const n=e.fullServerUrl(),i=Jh(n,s.host,s._protocol),l="DELETE",u=s.maxOperationRetryTime;function h(g,x){}const p=new l0(i,l,h,u);return p.successCodes=[200,204],p.errorHandler=JN(e),p}function Yk(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Kk(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=Yk(null,e)),i}function Qk(s,e,n,i,l){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let Q="";for(let ge=0;ge<2;ge++)Q=Q+Math.random().toString().slice(2);return Q}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const x=Kk(e,i,l),b=qk(x,n),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+x.contentType+`\r
\r
`,T=`\r
--`+g+"--",C=Gi.getBlob(w,i,T);if(C===null)throw uk();const H={name:x.fullPath},U=Jh(u,s.host,s._protocol),V="POST",B=s.maxUploadRetryTime,G=new l0(U,V,Fk(s,n),B);return G.urlParams=H,G.headers=h,G.body=C.uploadData(),G.errorHandler=XN(e),G}class Wk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,l,u){if(this.sent_)throw jc("cannot .send() more than once");if(cr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw jc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Xk extends Wk{initXhr(){this.xhr_.responseType="text"}}function o0(){return new Xk}class tl{constructor(e,n){this._service=e,n instanceof xs?this._location=n:this._location=xs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new tl(e,n)}get root(){const e=new xs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YN(this._location.path)}get storage(){return this._service}get parent(){const e=Ok(this._location.path);if(e===null)return null;const n=new xs(this._location.bucket,e);return new tl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fk(e)}}function Jk(s,e,n){s._throwIfRoot("uploadBytes");const i=Qk(s.storage,s._location,KN(),new Gi(e,!0),n);return s.storage.makeRequestWithTokens(i,o0).then(l=>({metadata:l,ref:s}))}function Zk(s){s._throwIfRoot("getDownloadURL");const e=$k(s.storage,s._location,KN());return s.storage.makeRequestWithTokens(e,o0).then(n=>{if(n===null)throw dk();return n})}function e6(s){s._throwIfRoot("deleteObject");const e=Gk(s.storage,s._location);return s.storage.makeRequestWithTokens(e,o0)}function t6(s,e){const n=Vk(s._location.path,e),i=new xs(s._location.bucket,n);return new tl(s.storage,i)}function n6(s){return/^[A-Za-z]+:\/\//.test(s)}function s6(s,e){return new tl(s,e)}function ZN(s,e){if(s instanceof c0){const n=s;if(n._bucket==null)throw ck();const i=new tl(n,n._bucket);return e!=null?ZN(i,e):i}else return e!==void 0?t6(s,e):s}function a6(s,e){if(e&&n6(e)){if(s instanceof c0)return s6(s,e);throw Jp("To use ref(service, url), the first argument must be a Storage instance.")}else return ZN(s,e)}function j_(s,e){const n=e?.[BN];return n==null?null:xs.makeFromBucketSpec(n,s)}function i6(s,e,n,i={}){s.host=`${e}:${n}`;const l=cr(e);l&&(og(`https://${s.host}/b`),cg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:vw(u,s.app.options.projectId))}class c0{constructor(e,n,i,l,u,h=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=UN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=JI,this._maxUploadRetryTime=ZI,this._requests=new Set,l!=null?this._bucket=xs.makeFromBucketSpec(l,this._host):this._bucket=j_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xs.makeFromBucketSpec(this._url,e):this._bucket=j_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){S_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){S_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tl(this,e)}_makeRequest(e,n,i,l,u=!0){if(this._deleted)return new mk(zN());{const h=Tk(e,this._appId,i,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,n){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,l).getPromise()}}const A_="@firebase/storage",R_="0.14.0";const eE="storage";function r6(s,e,n){return s=Ht(s),Jk(s,e,n)}function l6(s){return s=Ht(s),Zk(s)}function o6(s){return s=Ht(s),e6(s)}function C_(s,e){return s=Ht(s),a6(s,e)}function c6(s=hg(),e){s=Ht(s);const i=kh(s,eE).getImmediate({identifier:e}),l=xw("storage");return l&&u6(i,...l),i}function u6(s,e,n,i={}){i6(s,e,n,i)}function d6(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new c0(n,i,l,e,al)}function h6(){Qr(new er(eE,d6,"PUBLIC").setMultipleInstances(!0)),_a(A_,R_,""),_a(A_,R_,"esm2020")}h6();const f6={apiKey:"AIzaSyC1qZ9fK-6LFBxVWZsAD4dZq-KVg36A7f8",authDomain:"scheduler-65e51.firebaseapp.com",projectId:"scheduler-65e51",storageBucket:"scheduler-65e51.firebasestorage.app",messagingSenderId:"93993791456",appId:"1:93993791456:web:3a777a2da0dad4b8b74585"},u0=Nw(f6),we=OI(u0),nl=jC(u0),I_=c6(u0);const tE=(...s)=>s.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();const m6=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const p6=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());const k_=s=>{const e=p6(s);return e.charAt(0).toUpperCase()+e.slice(1)};var g6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const x6=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const y6=E.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:u,iconNode:h,...p},g)=>E.createElement("svg",{ref:g,...g6,width:e,height:e,stroke:s,strokeWidth:i?Number(n)*24/Number(e):n,className:tE("lucide",l),...!u&&!x6(p)&&{"aria-hidden":"true"},...p},[...h.map(([x,b])=>E.createElement(x,b)),...Array.isArray(u)?u:[u]]));const ze=(s,e)=>{const n=E.forwardRef(({className:i,...l},u)=>E.createElement(y6,{ref:u,iconNode:e,className:tE(`lucide-${m6(k_(s))}`,`lucide-${s}`,i),...l}));return n.displayName=k_(s),n};const b6=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],v6=ze("arrow-down-right",b6);const _6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Aa=ze("arrow-left",_6);const w6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],qc=ze("arrow-right",w6);const N6=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],E6=ze("arrow-up-right",N6);const T6=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],to=ze("bell",T6);const S6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],xp=ze("calendar-check",S6);const j6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],D_=ze("calendar-days",j6);const A6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Vt=ze("calendar",A6);const R6=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],C6=ze("camera",R6);const I6=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],nE=ze("chart-column",I6);const k6=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],D6=ze("chart-pie",k6);const M6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Fc=ze("check",M6);const O6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],V6=ze("chevron-down",O6);const P6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],sE=ze("chevron-left",P6);const L6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],d0=ze("chevron-right",L6);const U6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],B6=ze("chevron-up",U6);const z6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ys=ze("circle-check-big",z6);const q6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ba=ze("circle-x",q6);const F6=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],jn=ze("clock",F6);const H6=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],$6=ze("coffee",H6);const G6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Y6=ze("dollar-sign",G6);const K6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Q6=ze("eye",K6);const W6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],X6=ze("globe",W6);const J6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Z6=ze("image",J6);const eD=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],Zp=ze("list-ordered",eD);const tD=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],jh=ze("list-plus",tD);const nD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],yp=ze("loader-circle",nD);const sD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],aE=ze("lock",sD);const aD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],iD=ze("log-out",aD);const rD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],M_=ze("mail",rD);const lD=[["path",{d:"M5 12h14",key:"1ays0h"}]],oD=ze("minus",lD);const cD=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],iE=ze("party-popper",cD);const uD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],rE=ze("pen-line",uD);const dD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],O_=ze("phone",dD);const hD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],bp=ze("play",hD);const fD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],lr=ze("plus",fD);const mD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],lE=ze("refresh-cw",mD);const pD=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Zi=ze("repeat",pD);const gD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],xD=ze("save",gD);const yD=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],Ca=ze("scissors",yD);const bD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vD=ze("settings",bD);const _D=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],wD=ze("sparkles",_D);const ND=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],V_=ze("star",ND);const ED=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],_s=ze("tag",ED);const TD=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],oE=ze("timer",TD);const SD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tu=ze("trash-2",SD);const jD=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],h0=ze("trending-up",jD);const AD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ah=ze("triangle-alert",AD);const RD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],CD=ze("user-plus",RD);const ID=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nu=ze("user",ID);const kD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vn=ze("users",kD);const DD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],go=ze("x",DD);const MD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],OD=ze("zap",MD);function P_({className:s=""}){return o.jsxs(Qe,{to:"/",className:`flex items-center gap-2.5 ${s}`,children:[o.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:o.jsx(Ca,{className:"w-[18px] h-[18px] text-white"})}),o.jsxs("span",{className:"text-xl font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function VD(){return o.jsxs("div",{className:"min-h-screen bg-white",children:[o.jsx("nav",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-100",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsx(P_,{}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Qe,{to:"/login",className:"px-4 py-2.5 text-sm font-semibold text-slate-600 hover:text-slate-900 transition-colors",children:"Sign In"}),o.jsxs(Qe,{to:"/register",className:"hidden sm:inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:["Get Started Free",o.jsx(qc,{className:"w-4 h-4"})]}),o.jsx(Qe,{to:"/register",className:"sm:hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all",children:"Start Free"})]})]})}),o.jsxs("section",{className:"relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 -z-10",children:[o.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-50 rounded-full blur-3xl opacity-60 -translate-y-1/2 translate-x-1/3"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-violet-50 rounded-full blur-3xl opacity-50 translate-y-1/3 -translate-x-1/4"})]}),o.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 pt-16 sm:pt-24 pb-16 sm:pb-20",children:o.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[o.jsxs("div",{className:"animate-fade-in-up",children:[o.jsxs("div",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 bg-blue-50 border border-blue-100 rounded-full text-sm font-medium text-blue-700 mb-6",children:[o.jsx(wD,{className:"w-3.5 h-3.5"}),"Free for beauty professionals"]}),o.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-[3.5rem] font-extrabold text-slate-900 leading-[1.1] mb-6 tracking-tight",children:["Online booking",o.jsx("br",{}),o.jsx("span",{className:"text-blue-600",children:"made effortless"})]}),o.jsx("p",{className:"text-lg sm:text-xl text-slate-600 leading-relaxed mb-8 max-w-lg",children:"Let clients book 24/7. Manage your team, services, and schedule from one beautiful dashboard. No more phone tag."}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-10",children:[o.jsxs(Qe,{to:"/register",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-base shadow-lg shadow-blue-600/25 hover:shadow-xl hover:shadow-blue-600/30 transition-all hover:-translate-y-0.5",children:["Start for Free",o.jsx(qc,{className:"w-4 h-4"})]}),o.jsx("a",{href:"#how-it-works",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-base border border-slate-200 transition-all",children:"See How It Works"})]}),o.jsxs("div",{className:"flex items-center gap-5 text-sm text-slate-500",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ys,{className:"w-4 h-4 text-emerald-500"}),o.jsx("span",{children:"Free to use"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ys,{className:"w-4 h-4 text-emerald-500"}),o.jsx("span",{children:"No credit card"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(ys,{className:"w-4 h-4 text-emerald-500"}),o.jsx("span",{children:"Setup in 2 min"})]})]})]}),o.jsxs("div",{className:"relative animate-fade-in-up",style:{animationDelay:"150ms"},children:[o.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl shadow-slate-200/60 border border-slate-200/80 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-slate-50 border-b border-slate-100",children:[o.jsxs("div",{className:"flex gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),o.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),o.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"})]}),o.jsx("div",{className:"flex-1 mx-4",children:o.jsx("div",{className:"bg-white border border-slate-200 rounded-lg px-3 py-1.5 text-xs text-slate-400 font-mono",children:"bookflow.app/shop/janes-salon"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-sm font-bold",children:"J"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-slate-900",children:"Jane's Salon"}),o.jsx("div",{className:"text-xs text-slate-500",children:"Book your next appointment"})]})]}),o.jsx("div",{className:"space-y-2.5",children:[{name:"Haircut & Style",price:"$45",time:"45 min",color:"bg-blue-500"},{name:"Color Treatment",price:"$120",time:"2 hours",color:"bg-violet-500"},{name:"Blowout",price:"$35",time:"30 min",color:"bg-emerald-500"}].map(s=>o.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-slate-50 rounded-xl border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/50 transition-all cursor-default",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-2 h-8 ${s.color} rounded-full`}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-slate-800",children:s.name}),o.jsx("div",{className:"text-xs text-slate-500",children:s.time})]})]}),o.jsx("div",{className:"text-sm font-bold text-slate-900",children:s.price})]},s.name))})]})]}),o.jsxs("div",{className:"absolute -bottom-4 -left-4 bg-white rounded-xl shadow-lg shadow-slate-200/60 border border-slate-100 px-4 py-3 flex items-center gap-3 animate-float",children:[o.jsx("div",{className:"w-9 h-9 bg-emerald-100 rounded-full flex items-center justify-center",children:o.jsx(ys,{className:"w-5 h-5 text-emerald-600"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-slate-500",children:"Booking confirmed"}),o.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Tomorrow at 2:00 PM"})]})]})]})]})})]}),o.jsx("section",{className:"border-y border-slate-100 bg-slate-50/50",children:o.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-8 sm:py-10",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8 sm:gap-16 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"500+"}),o.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Businesses trust BookFlow"})]}),o.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"10,000+"}),o.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Appointments booked"})]}),o.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-center gap-1 text-2xl sm:text-3xl font-extrabold text-slate-900",children:["4.9 ",o.jsx(V_,{className:"w-5 h-5 text-amber-400 fill-amber-400"})]}),o.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Average rating"})]})]})})}),o.jsx("section",{className:"py-20 sm:py-28",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[o.jsxs("div",{className:"text-center mb-14",children:[o.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Everything you need to run your bookings"}),o.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Built specifically for beauty professionals, salons, and service businesses. Simple, powerful, and free."})]}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 stagger-children",children:[{icon:o.jsx(Vt,{className:"w-6 h-6"}),title:"Smart Scheduling",desc:"Set weekly hours with breaks. Slots auto-generate so your calendar is always up to date.",color:"bg-blue-100 text-blue-600"},{icon:o.jsx(vn,{className:"w-6 h-6"}),title:"Multi-Staff Support",desc:"Add your whole team. Each member gets their own schedule, hours, and bookings.",color:"bg-violet-100 text-violet-600"},{icon:o.jsx(OD,{className:"w-6 h-6"}),title:"Instant Booking",desc:"Clients pick a service, choose a stylist, and book  all in under a minute.",color:"bg-amber-100 text-amber-600"},{icon:o.jsx(X6,{className:"w-6 h-6"}),title:"Your Own Booking Page",desc:"Get a unique link to share anywhere. No app downloads needed for your clients.",color:"bg-emerald-100 text-emerald-600"}].map(s=>o.jsxs("div",{className:"group bg-white rounded-2xl p-7 border border-slate-200/80 hover:border-slate-300 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[o.jsx("div",{className:`w-12 h-12 ${s.color} rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300`,children:s.icon}),o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:s.title}),o.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:s.desc})]},s.title))})]})}),o.jsx("section",{id:"how-it-works",className:"py-20 sm:py-28 bg-slate-50 border-y border-slate-100",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[o.jsxs("div",{className:"text-center mb-14",children:[o.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Up and running in minutes"}),o.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Three simple steps to start accepting online bookings today."})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-8 lg:gap-12 relative",children:[o.jsx("div",{className:"hidden md:block absolute top-14 left-[calc(16.67%+1rem)] right-[calc(16.67%+1rem)] h-px bg-gradient-to-r from-blue-200 via-violet-200 to-emerald-200"}),[{step:"1",title:"Create your account",desc:"Sign up free in 30 seconds. Name your shop and you're in.",color:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/30"},{step:"2",title:"Set up your shop",desc:"Add your services, team, and weekly hours. BookFlow handles the rest.",color:"from-violet-500 to-violet-600",shadow:"shadow-violet-500/30"},{step:"3",title:"Share your link",desc:"Send your booking page to clients. They book, you get notified.",color:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/30"}].map(s=>o.jsxs("div",{className:"relative text-center",children:[o.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${s.color} rounded-2xl flex items-center justify-center mx-auto mb-6 text-white text-xl font-extrabold shadow-lg ${s.shadow} relative z-10`,children:s.step}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:s.title}),o.jsx("p",{className:"text-slate-600 leading-relaxed max-w-xs mx-auto",children:s.desc})]},s.step))]})]})}),o.jsx("section",{className:"py-20 sm:py-28",children:o.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[o.jsxs("div",{className:"text-center mb-14",children:[o.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Loved by professionals"}),o.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"See why salons and stylists are switching to BookFlow."})]}),o.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{quote:"BookFlow replaced our paper appointment book. Clients love being able to book online anytime.",name:"Maria Santos",role:"Salon Owner",initials:"MS",color:"bg-blue-100 text-blue-700"},{quote:"Setting up was incredibly easy. I had my booking page live and shared with clients in under 10 minutes.",name:"David Chen",role:"Barber",initials:"DC",color:"bg-violet-100 text-violet-700"},{quote:"The multi-staff feature is perfect. Each stylist manages their own schedule and clients can pick who they want.",name:"Lisa Park",role:"Studio Manager",initials:"LP",color:"bg-emerald-100 text-emerald-700"}].map(s=>o.jsxs("div",{className:"bg-white rounded-2xl p-7 border border-slate-200/80 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[o.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(5)].map((e,n)=>o.jsx(V_,{className:"w-4 h-4 text-amber-400 fill-amber-400"},n))}),o.jsxs("p",{className:"text-slate-700 leading-relaxed mb-6",children:['"',s.quote,'"']}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 ${s.color} rounded-full flex items-center justify-center text-sm font-bold`,children:s.initials}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s.name}),o.jsx("div",{className:"text-xs text-slate-500",children:s.role})]})]})]},s.name))})]})}),o.jsxs("section",{className:"py-20 sm:py-28 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 -z-0",children:[o.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-1/4 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl"})]}),o.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto px-5 sm:px-8 text-center",children:[o.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold text-white mb-6 leading-tight",children:"Ready to streamline your bookings?"}),o.jsx("p",{className:"text-lg text-slate-400 mb-10 max-w-xl mx-auto",children:"Join hundreds of professionals who have ditched the old appointment book. Set up in minutes, free forever."}),o.jsxs(Qe,{to:"/register",className:"inline-flex items-center gap-2 px-8 py-4 bg-white hover:bg-slate-50 text-slate-900 rounded-xl font-bold text-lg transition-all hover:shadow-xl hover:shadow-white/10 hover:-translate-y-0.5",children:["Create Your Free Account",o.jsx(qc,{className:"w-5 h-5"})]})]})]}),o.jsx("footer",{className:"bg-white border-t border-slate-100",children:o.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-10",children:o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[o.jsx(P_,{}),o.jsxs("div",{className:"flex items-center gap-6 text-sm text-slate-500",children:[o.jsx(Qe,{to:"/register",className:"hover:text-slate-900 transition-colors",children:"Sign Up"}),o.jsx("span",{className:"text-slate-200",children:""}),o.jsx(Qe,{to:"/login",className:"hover:text-slate-900 transition-colors",children:"Sign In"}),o.jsx("span",{className:"text-slate-200",children:""}),o.jsx("a",{href:"#how-it-works",className:"hover:text-slate-900 transition-colors",children:"How It Works"})]}),o.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," BookFlow. All rights reserved."]})]})})})]})}function PD(s){return s.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function LD(){const s=bo(),[e,n]=E.useState(""),[i,l]=E.useState(""),[u,h]=E.useState(""),[p,g]=E.useState(""),[x,b]=E.useState(!1),w=PD(e),T=async C=>{if(C.preventDefault(),g(""),!w){g("Please enter a valid shop name");return}if(u.length<6){g("Password must be at least 6 characters");return}b(!0);try{const H=bs(Je(we,"shops"),ss("slug","==",w));if(!(await vs(H)).empty){g("A shop with that name already exists. Please choose a different name."),b(!1);return}const B=(await hR(nl,i,u)).user;await li(Je(we,"shops"),{name:e.trim(),slug:w,ownerUid:B.uid,ownerEmail:i,createdAt:e0()}),s(`/shop/${w}/dashboard`)}catch(H){switch(H.code){case"auth/email-already-in-use":g("An account with this email already exists");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/weak-password":g("Password must be at least 6 characters");break;default:g("Registration failed. Please try again.")}}finally{b(!1)}};return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsxs(Qe,{to:"/",className:"inline-flex items-center gap-2.5",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:o.jsx(Ca,{className:"w-5 h-5 text-white"})}),o.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),o.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Create your shop"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Set up your booking page in seconds  it's free"})]}),o.jsxs("form",{onSubmit:T,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Shop Name"}),o.jsx("input",{type:"text",value:e,onChange:C=>{n(C.target.value),g("")},placeholder:"Jane's Salon",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),w&&o.jsxs("p",{className:"mt-1.5 text-xs text-slate-400",children:["Your page: ",o.jsxs("span",{className:"font-mono text-blue-600 font-medium",children:["bookflow.app/shop/",w]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),o.jsx("input",{type:"email",value:i,onChange:C=>{l(C.target.value),g("")},placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),o.jsx("input",{type:"password",value:u,onChange:C=>{h(C.target.value),g("")},placeholder:"At least 6 characters",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&o.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[o.jsx("span",{children:""})," ",p]})]}),o.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Creating your shop"]}):o.jsxs(o.Fragment,{children:["Create Shop",o.jsx(qc,{className:"w-4 h-4"})]})})]}),o.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:o.jsxs("p",{className:"text-sm text-slate-500",children:["Already have an account?"," ",o.jsx(Qe,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Sign in"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(Qe,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[o.jsx(Aa,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function UD({user:s}){const e=bo(),[n,i]=E.useState(""),[l,u]=E.useState(""),[h,p]=E.useState(""),[g,x]=E.useState(!1);E.useState(()=>{if(!s)return;(async()=>{const T=bs(Je(we,"shops"),ss("ownerUid","==",s.uid)),C=await vs(T);if(!C.empty){const H=C.docs[0].data();e(`/shop/${H.slug}/dashboard`,{replace:!0})}})()},[s,e]);const b=async w=>{w.preventDefault(),p(""),x(!0);try{const C=(await Ww(nl,n,l)).user,H=bs(Je(we,"shops"),ss("ownerUid","==",C.uid)),U=await vs(H);if(U.empty){p("No shop found for this account. Need to create one?"),await nl.signOut(),x(!1);return}const V=U.docs[0].data();e(`/shop/${V.slug}/dashboard`,{replace:!0})}catch(T){switch(T.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":p("Invalid email or password");break;case"auth/invalid-email":p("Please enter a valid email address");break;case"auth/too-many-requests":p("Too many failed attempts. Please try again later.");break;default:p("Login failed. Please try again.")}u("")}finally{x(!1)}};return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsxs(Qe,{to:"/",className:"inline-flex items-center gap-2.5",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:o.jsx(Ca,{className:"w-5 h-5 text-white"})}),o.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),o.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),o.jsxs("form",{onSubmit:b,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),o.jsx("input",{type:"email",value:n,onChange:w=>{i(w.target.value),p("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),o.jsx("input",{type:"password",value:l,onChange:w=>{u(w.target.value),p("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${h?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),h&&o.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[o.jsx("span",{children:""})," ",h]})]}),o.jsx("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:g?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):o.jsxs(o.Fragment,{children:["Sign In",o.jsx(qc,{className:"w-4 h-4"})]})})]}),o.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:o.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",o.jsx(Qe,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(Qe,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[o.jsx(Aa,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function cE({availableDates:s,selectedDate:e,onSelectDate:n}){const[i,l]=E.useState(new Date),u=B=>{const G=B.getFullYear(),Q=B.getMonth(),ge=new Date(G,Q,1),le=new Date(G,Q+1,0).getDate(),j=ge.getDay();return{daysInMonth:le,startingDayOfWeek:j,year:G,month:Q}},{daysInMonth:h,startingDayOfWeek:p,year:g,month:x}=u(i),b=()=>{l(new Date(i.getFullYear(),i.getMonth()-1))},w=()=>{l(new Date(i.getFullYear(),i.getMonth()+1))},T=B=>{const G=`${g}-${String(x+1).padStart(2,"0")}-${String(B).padStart(2,"0")}`;return s.includes(G)},C=B=>`${g}-${String(x+1).padStart(2,"0")}-${String(B).padStart(2,"0")}`===e,H=B=>{if(T(B)){const G=`${g}-${String(x+1).padStart(2,"0")}-${String(B).padStart(2,"0")}`;n(G)}},U=["January","February","March","April","May","June","July","August","September","October","November","December"],V=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return o.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5 sm:p-6 shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-center mb-5",children:[o.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(sE,{className:"w-5 h-5 text-slate-600"})}),o.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[U[x]," ",g]}),o.jsx("button",{onClick:w,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(d0,{className:"w-5 h-5 text-slate-600"})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:V.map(B=>o.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:B},B))}),o.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:p}).map((B,G)=>o.jsx("div",{},`empty-${G}`)),Array.from({length:h}).map((B,G)=>{const Q=G+1,ge=T(Q),pe=C(Q),le=new Date,j=le.getDate()===Q&&le.getMonth()===x&&le.getFullYear()===g;return o.jsxs("button",{onClick:()=>H(Q),disabled:!ge,className:`
                relative p-2.5 sm:p-3 text-center rounded-lg text-sm font-semibold transition-all duration-200
                ${pe?"bg-blue-600 text-white shadow-md shadow-blue-600/30":ge?"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 hover:border-emerald-300 cursor-pointer":j?"text-slate-900 font-bold":"text-slate-300 cursor-not-allowed"}
              `,children:[Q,j&&!pe&&o.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]},Q)})]}),o.jsxs("div",{className:"mt-4 flex gap-5 text-xs text-slate-500",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 bg-emerald-50 border border-emerald-200 rounded"}),o.jsx("span",{children:"Available"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),o.jsx("span",{children:"Selected"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),o.jsx("span",{children:"Today"})]})]})]})}const BD=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"},{key:"saturday",label:"Sat"},{key:"sunday",label:"Sun"}],L_=[{key:"morning",label:"Morning (9AM12PM)",start:"09:00",end:"12:00"},{key:"afternoon",label:"Afternoon (12PM5PM)",start:"12:00",end:"17:00"},{key:"evening",label:"Evening (5PM9PM)",start:"17:00",end:"21:00"},{key:"any",label:"Any time",start:"00:00",end:"23:59"}];function zD(){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="WL";for(let n=0;n<4;n++)e+=s.charAt(Math.floor(Math.random()*s.length));return e}function U_({shopId:s,slug:e,selectedService:n,selectedStaff:i,staffMembers:l,preferredDate:u,onSuccess:h,onCancel:p}){const[g,x]=E.useState({name:"",email:"",phone:""}),[b,w]=E.useState([]),[T,C]=E.useState("any"),[H,U]=E.useState(!1),[V,B]=E.useState(!1),[G,Q]=E.useState(""),ge=le=>{w(j=>j.includes(le)?j.filter(A=>A!==le):[...j,le])},pe=async le=>{le.preventDefault(),U(!0);try{const j=zD(),A=L_.find(q=>q.key===T),I=i&&i!=="any"?i.id:"any",P=i&&i!=="any"?i.name:"Any Available",M={clientName:g.name,clientEmail:g.email,clientPhone:g.phone,serviceId:n?.id||null,serviceName:n?.name||"Any Service",staffId:I,staffName:P,preferredDate:u||null,preferredDays:b.length>0?b:null,preferredTimeRange:A?{start:A.start,end:A.end}:null,status:"waiting",refCode:j,createdAt:new Date().toISOString(),notifiedAt:null,notifiedSlot:null};await li(Je(we,"shops",s,"waitlist"),M),Q(j),B(!0),h&&h(j)}catch(j){console.error("Waitlist error:",j)}finally{U(!1)}};return V?o.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg shadow-blue-100/50 p-8 text-center animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ys,{className:"w-8 h-8 text-blue-600"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"You're on the Waitlist!"}),o.jsxs("p",{className:"text-slate-600 mb-4",children:["We'll notify you when a slot opens up",n?` for ${n.name}`:"","."]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your waitlist reference"}),o.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:G})]}),o.jsxs("a",{href:`#/shop/${e}/waitlist/${G}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[o.jsx(jn,{className:"w-4 h-4"}),"Check Waitlist Status"]}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to check your position and get notified"})]}):o.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg p-6 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:o.jsx(jh,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Join the Waitlist"}),o.jsx("p",{className:"text-sm text-slate-500",children:"We'll notify you when a slot opens up"})]})]}),o.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),o.jsx("input",{type:"text",value:g.name,onChange:le=>x({...g,name:le.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),o.jsx("input",{type:"email",value:g.email,onChange:le=>x({...g,email:le.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),o.jsx("input",{type:"tel",value:g.phone,onChange:le=>x({...g,phone:le.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Preferred Days ",o.jsx("span",{className:"text-slate-400 font-normal",children:"(optional)"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:BD.map(le=>o.jsx("button",{type:"button",onClick:()=>ge(le.key),className:`px-3.5 py-2 rounded-lg text-sm font-semibold transition-all border ${b.includes(le.key)?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:le.label},le.key))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Preferred Time"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:L_.map(le=>o.jsx("button",{type:"button",onClick:()=>C(le.key),className:`px-3.5 py-2.5 rounded-lg text-sm font-medium transition-all border text-left ${T===le.key?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:le.label},le.key))})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{type:"submit",disabled:H,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:H?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Joining"]}):o.jsxs(o.Fragment,{children:[o.jsx(jh,{className:"w-4 h-4"}),"Join Waitlist"]})}),p&&o.jsx("button",{type:"button",onClick:p,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})}const qD=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function no(s){const[e,n]=s.split(":").map(Number);return e*60+n}function B_(s){const e=Math.floor(s/60),n=s%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function FD(s){const e=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function HD(s,e,n,i,l,u){if(!s)return[];const p=new Date(e+"T12:00:00").getDay(),g=qD[p],x=s[g];if(!x||!x.enabled)return[];const b=no(x.start),w=no(x.end),T=x.break?no(x.break.start):null,C=x.break?no(x.break.end):null,H=n+i,U=[];let V=b;for(;V+n<=w;){const B=V+n;if(T!==null&&C!==null&&V<C&&B>T){V=C;continue}U.push({id:`wh-${l}-${e}-${B_(V)}`,date:e,time:B_(V),duration:n,available:!0,staffId:l,staffName:u,generated:!0}),V+=H}return U}function uE(s,e,n=0,i=4){const l=[],u=new Date;u.setHours(0,0,0,0);const h=new Date(u);h.setDate(h.getDate()+i*7);for(const p of s){if(!p.weeklyHours)continue;const g=new Date(u);for(;g<h;){const x=FD(g),b=HD(p.weeklyHours,x,e,n,p.id,p.name);l.push(...b),g.setDate(g.getDate()+1)}}return l}function dE(s,e,n=0){const i=e.filter(l=>!l.status||l.status==="pending"||l.status==="confirmed");return s.filter(l=>{const u=no(l.time),h=u+l.duration;return!i.some(g=>{if(l.staffId&&g.staffId&&g.staffId!==l.staffId||g.date!==l.date)return!1;const x=no(g.time),b=g.serviceDuration||g.duration||l.duration,w=x+b;return!(h+n<=x||w+n<=u)})})}function hE(s,e){const n=new Set(e.map(l=>`${l.staffId||""}-${l.date}-${l.time}`)),i=s.filter(l=>{const u=`${l.staffId||""}-${l.date}-${l.time}`;return!n.has(u)});return[...e,...i]}function Mc({name:s,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const i=(s||"").split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2);return o.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:i||"?"})}function $D(){return o.jsxs(Qe,{to:"/",className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:o.jsx(Ca,{className:"w-3.5 h-3.5 text-white"})}),o.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function GD({member:s,onClose:e}){const[n,i]=E.useState(null),l=s.portfolio||[];return E.useEffect(()=>{const u=h=>{h.key==="Escape"&&(n!==null?i(null):e())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[n,e]),o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),o.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-scale-in",children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 bg-slate-100 hover:bg-slate-200 rounded-full flex items-center justify-center text-slate-600 transition-all z-10",children:o.jsx(X,{className:"w-4 h-4"})}),o.jsxs("div",{className:"p-6 pb-4 border-b border-slate-100",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Mc,{name:s.name,className:"w-14 h-14",bgClass:"bg-violet-100 text-violet-700"}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s.name}),s.role&&o.jsx("p",{className:"text-sm text-violet-600 font-medium",children:s.role})]})]}),s.bio&&o.jsx("p",{className:"mt-3 text-sm text-slate-600 leading-relaxed",children:s.bio})]}),o.jsx("div",{className:"p-6",children:l.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:o.jsx(Image,{className:"w-6 h-6 text-slate-400"})}),o.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet"})]}):o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:l.map((u,h)=>o.jsxs("button",{onClick:()=>i(h),className:"group relative aspect-square rounded-xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5",children:[o.jsx("img",{src:u.url,alt:u.caption||"Portfolio",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),u.caption&&o.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-2.5 pt-6",children:o.jsx("p",{className:"text-xs text-white font-medium truncate",children:u.caption})})]},h))})})]}),n!==null&&l[n]&&o.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90",children:[o.jsx("button",{onClick:()=>i(null),className:"absolute top-4 right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:o.jsx(X,{className:"w-5 h-5"})}),n>0&&o.jsx("button",{onClick:()=>i(n-1),className:"absolute left-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:o.jsx(ChevronLeft,{className:"w-5 h-5"})}),n<l.length-1&&o.jsx("button",{onClick:()=>i(n+1),className:"absolute right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:o.jsx(ChevronRight,{className:"w-5 h-5"})}),o.jsxs("div",{className:"max-w-4xl max-h-[85vh] flex flex-col items-center",children:[o.jsx("img",{src:l[n].url,alt:l[n].caption||"Portfolio",className:"max-w-full max-h-[75vh] object-contain rounded-lg"}),l[n].caption&&o.jsx("p",{className:"mt-3 text-sm text-white/90 font-medium text-center px-4",children:l[n].caption}),o.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[n+1," / ",l.length]})]})]})]})}function YD(){const{slug:s}=vo(),[e,n]=E.useState(null),[i,l]=E.useState(null),[u,h]=E.useState(!0),[p,g]=E.useState(!1),[x,b]=E.useState([]),[w,T]=E.useState([]),[C,H]=E.useState(null),[U,V]=E.useState(null),[B,G]=E.useState([]),[Q,ge]=E.useState([]),[pe,le]=E.useState(!1),[j,A]=E.useState(null),[I,P]=E.useState(null),[M,q]=E.useState(""),[k,z]=E.useState(!1),[D,R]=E.useState({name:"",email:"",phone:""}),[K,he]=E.useState(""),[Ne,ve]=E.useState(!1),[O,ne]=E.useState(null),[re,be]=E.useState(!1),[ye,Ie]=E.useState("biweekly"),[oe,Ue]=E.useState(null);E.useEffect(()=>{(async()=>{h(!0),g(!1);try{const xe=bs(Je(we,"shops"),ss("slug","==",s)),je=await vs(xe);if(je.empty)g(!0);else{const ke=je.docs[0];n(ke.data()),l(ke.id)}}catch(xe){console.error("Error looking up shop:",xe),g(!0)}finally{h(!1)}})()},[s]),E.useEffect(()=>{if(!i)return;const ee=pn(Je(we,"shops",i,"services"),Be=>{const Re=Be.docs.map(Oe=>({id:Oe.id,...Oe.data()})).filter(Oe=>Oe.active!==!1).sort((Oe,gt)=>(Oe.name||"").localeCompare(gt.name||""));b(Re)}),xe=pn(Je(we,"shops",i,"availability"),Be=>{const Re=new Date,Oe=Be.docs.map(gt=>({id:gt.id,...gt.data()})).filter(gt=>new Date(`${gt.date}T${gt.time}`)>Re);G(Oe)}),je=pn(Je(we,"shops",i,"bookings"),Be=>{const Re=Be.docs.map(Oe=>({id:Oe.id,...Oe.data()}));ge(Re)}),ke=pn(Je(we,"shops",i,"staff"),Be=>{const Re=Be.docs.map(Oe=>({id:Oe.id,...Oe.data()})).filter(Oe=>Oe.active!==!1).sort((Oe,gt)=>(Oe.name||"").localeCompare(gt.name||""));T(Re)});return()=>{ee(),xe(),je(),ke()}},[i]),E.useEffect(()=>{w.length===1?V(w[0]):w.length===0&&V(null)},[w]);const Me=x.length>0;w.length>0;const $e=w.length>1,st=e?.bufferMinutes||0,$t=E.useMemo(()=>{const ee=new Date;let xe=B.filter(Re=>Re.available);if(C&&(xe=xe.filter(Re=>Re.duration>=C.duration)),U&&U!=="any"&&(xe=xe.filter(Re=>Re.staffId===U.id||!Re.staffId)),!C)return xe;const je=U&&U!=="any"?w.filter(Re=>Re.id===U.id):w,ke=uE(je,C.duration,st,4).filter(Re=>new Date(`${Re.date}T${Re.time}`)>ee),Be=hE(ke,xe);return dE(Be,Q,st)},[B,C,U,w,Q,st]),nn=(ee,xe,je=3)=>{const ke=[],Be=new Date(ee+"T12:00:00"),Re=new Date(Be);Re.setMonth(Re.getMonth()+je);let Oe=new Date(Be);for(xe==="weekly"?Oe.setDate(Oe.getDate()+7):xe==="biweekly"?Oe.setDate(Oe.getDate()+14):xe==="fourweekly"?Oe.setDate(Oe.getDate()+28):xe==="monthly"&&Oe.setMonth(Oe.getMonth()+1);Oe<=Re;){const gt=Oe.getFullYear(),Lt=String(Oe.getMonth()+1).padStart(2,"0"),bt=String(Oe.getDate()).padStart(2,"0");ke.push(`${gt}-${Lt}-${bt}`),xe==="weekly"?Oe.setDate(Oe.getDate()+7):xe==="biweekly"?Oe.setDate(Oe.getDate()+14):xe==="fourweekly"?Oe.setDate(Oe.getDate()+28):xe==="monthly"&&Oe.setMonth(Oe.getMonth()+1)}return ke},Et=E.useMemo(()=>{if(!re||!j)return null;const ee=nn(j.date,ye),xe=C?C.duration:j.duration||60,je=U&&U!=="any"?U.id:j.staffId,ke=j.time,Be=Q.filter(rn=>!rn.status||rn.status==="pending"||rn.status==="confirmed"),Re=rn=>{const[Hn,wn]=rn.split(":").map(Number);return Hn*60+wn},Oe=Re(ke),gt=Oe+xe;let Lt=[],bt=[];const an=new Set;ee.forEach(rn=>{Be.some(wn=>{if(je&&wn.staffId&&wn.staffId!==je||wn.date!==rn)return!1;const cl=Re(wn.time),ka=wn.serviceDuration||wn.duration||xe,pr=cl+ka,oi=st||0;return!(gt+oi<=cl||pr+oi<=Oe)})||an.has(rn)?bt.push(rn):(Lt.push(rn),an.add(rn))});const Pn=ee.length>0?ee[ee.length-1]:j.date,Fn=new Date(Pn+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),mr={weekly:"week",biweekly:"2 weeks",fourweekly:"4 weeks",monthly:"month"};return{available:Lt,conflicts:bt,total:Lt.length+1,skipped:bt.length,endDate:Fn,intervalLabel:mr[ye]||ye}},[re,ye,j,C,U,Q,st]),Ot=ee=>{H(ee),w.length>1&&V(null),P(null),A(null),le(!1),q("")},sn=ee=>{V(ee),P(null),A(null),le(!1),q("")},as=()=>{H(null),w.length>1&&V(null),P(null),A(null),le(!1)},Vn=()=>{P(null),A(null),le(!1),$e?V(null):Me&&H(null)},At=ee=>{A(ee),le(!0),q("")},Te=()=>{const ee="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let xe="BK";for(let je=0;je<4;je++)xe+=ee.charAt(Math.floor(Math.random()*ee.length));return xe},Ve=async ee=>{ee.preventDefault(),z(!0),Ue(null);try{const xe=Te(),je=e?.requireApproval?"pending":"confirmed",ke=re?`rg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`:null,Be=re&&Et?Et.endDate:null,Re={slotId:j.id,date:j.date,time:j.time,duration:C?C.duration:j.duration,clientName:D.name,clientEmail:D.email,clientPhone:D.phone,bookedAt:new Date().toISOString(),status:je,refCode:xe};C&&(Re.serviceId=C.id,Re.serviceName=C.name,Re.servicePrice=C.price,Re.serviceDuration=C.duration),U&&U!=="any"?(Re.staffId=U.id,Re.staffName=U.name):j.staffId&&(Re.staffId=j.staffId,Re.staffName=j.staffName||""),re&&ke&&(Re.recurring=!0,Re.recurringInterval=ye,Re.recurringGroupId=ke,Re.recurringUntil=Be),await li(Je(we,"shops",i,"bookings"),Re),j.generated||await nt(tt(we,"shops",i,"availability",j.id),{available:!1});let Oe=1,gt=0;if(re&&Et){const Lt=Et.available;gt=Et.skipped;for(const bt of Lt){const an=Te(),Pn={...Re,date:bt,slotId:`recurring-${ke}-${bt}`,refCode:an,bookedAt:new Date().toISOString()};await li(Je(we,"shops",i,"bookings"),Pn),Oe++}Ue({created:Oe,skipped:gt})}R({name:"",email:"",phone:""}),le(!1),A(null),H(null),P(null),V(w.length===1?w[0]:null),be(!1),he(xe),e?.requireApproval?q(" Your booking request has been submitted! The shop will review and confirm it shortly."):q(" Booking confirmed! You will receive a confirmation email shortly.")}catch(xe){console.error("Booking error:",xe),q(" Something went wrong. Please try again.")}finally{z(!1)}},Ze=ee=>new Date(ee+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),Rt=ee=>{const[xe,je]=ee.split(":"),ke=parseInt(xe),Be=ke>=12?"PM":"AM";return`${ke%12||12}:${je} ${Be}`},ft=ee=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(ee),rt=ee=>{if(ee<60)return`${ee} min`;const xe=Math.floor(ee/60),je=ee%60;return je?`${xe}h ${je}m`:`${xe} hour${xe>1?"s":""}`};if(u)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking page"})]})});if(p)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),o.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,o.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),o.jsxs(Qe,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Aa,{className:"w-4 h-4"}),"Go Home"]})]})});const Gt=[...new Set($t.map(ee=>ee.date))].sort(),mt=I?$t.filter(ee=>ee.date===I):$t,Ns=pe?"form":Me&&!C?"services":$e&&!U?"staff":"calendar",$=[];Me&&$.push({key:"services",label:"Service"}),$e&&$.push({key:"staff",label:"Stylist"}),$.push({key:"calendar",label:"Date & Time"}),$.push({key:"form",label:"Confirm"});const ue=$.findIndex(ee=>ee.key===Ns),Ee=["border-l-blue-500","border-l-violet-500","border-l-emerald-500","border-l-amber-500","border-l-rose-500","border-l-cyan-500","border-l-indigo-500","border-l-pink-500","border-l-teal-500"];return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Book your appointment"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs(Qe,{to:`/shop/${s}/login`,className:"flex items-center gap-1.5 px-3.5 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[o.jsx(aE,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:"Owner"})]}),o.jsx($D,{})]})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[$.length>1&&o.jsx("div",{className:"flex items-center justify-center gap-0 mb-8 animate-fade-in",children:$.map((ee,xe)=>{const je=ee.key===Ns,ke=xe<ue;return o.jsxs(E.Fragment,{children:[xe>0&&o.jsx("div",{className:`w-8 sm:w-14 h-0.5 transition-colors duration-300 ${xe<=ue?"bg-blue-500":"bg-slate-200"}`}),o.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[o.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 ${je?"bg-blue-600 text-white shadow-md shadow-blue-600/30 scale-110":ke?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:ke?o.jsx(ys,{className:"w-5 h-5"}):xe+1}),o.jsx("span",{className:`text-xs font-medium hidden sm:block transition-colors ${je?"text-blue-700":ke?"text-blue-600":"text-slate-400"}`,children:ee.label})]})]},ee.key)})}),M&&o.jsx("div",{className:"mb-8 animate-scale-in",children:M.startsWith("")?o.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(iE,{className:"w-8 h-8 text-emerald-600"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Confirmed!"}),o.jsx("p",{className:"text-slate-600 mb-4",children:"You're all set. We'll send a confirmation to your email."}),oe&&o.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[o.jsx(Zi,{className:"w-4 h-4"}),"Recurring Series Created"]}),o.jsxs("p",{className:"text-sm text-slate-700",children:[oe.created," appointment",oe.created!==1?"s":""," booked"]}),oe.skipped>0&&o.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",oe.skipped," date",oe.skipped!==1?"s":""," skipped due to conflicts"]})]}),K&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),o.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:K})]}),K&&o.jsxs("div",{className:"mb-4",children:[o.jsxs(Qe,{to:`/shop/${s}/booking/${K}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[o.jsx(xp,{className:"w-4 h-4"}),"Manage Your Booking"]}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-lg text-sm text-emerald-700 font-medium",children:[o.jsx(xp,{className:"w-4 h-4"}),"Add to your calendar to remember"]})]}):M.startsWith("")?o.jsxs("div",{className:"bg-white rounded-2xl border border-amber-200 shadow-lg shadow-amber-100/50 p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(jn,{className:"w-8 h-8 text-amber-600"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Request Submitted!"}),o.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking request has been submitted! The shop will review and confirm it shortly."}),oe&&o.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[o.jsx(Zi,{className:"w-4 h-4"}),"Recurring Series Created"]}),o.jsxs("p",{className:"text-sm text-slate-700",children:[oe.created," appointment",oe.created!==1?"s":""," submitted"]}),oe.skipped>0&&o.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",oe.skipped," date",oe.skipped!==1?"s":""," skipped due to conflicts"]})]}),K&&o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),o.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:K})]}),K&&o.jsxs("div",{className:"mb-4",children:[o.jsxs(Qe,{to:`/shop/${s}/booking/${K}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[o.jsx(xp,{className:"w-4 h-4"}),"Manage Your Booking"]}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700 font-medium",children:[o.jsx(jn,{className:"w-4 h-4"}),"You'll be notified once it's confirmed"]})]}):o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Something went wrong. Please try again."})]})}),Ns==="services"&&o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a Service"}),o.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select the service you'd like to book"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 stagger-children",children:x.map((ee,xe)=>o.jsxs("button",{onClick:()=>Ot(ee),className:`group text-left bg-white border-l-4 ${Ee[xe%Ee.length]} border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors pr-2",children:ee.name}),o.jsx("span",{className:"text-xl font-extrabold text-blue-600 whitespace-nowrap",children:ft(ee.price)})]}),ee.description&&o.jsx("p",{className:"text-sm text-slate-500 mb-3 line-clamp-2 leading-relaxed",children:ee.description}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-400",children:[o.jsx(jn,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:rt(ee.duration)})]}),o.jsx("span",{className:"text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]})]},ee.id))})]}),Ns==="staff"&&o.jsxs("div",{className:"animate-fade-in",children:[Me&&C&&o.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[o.jsxs("button",{onClick:as,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[o.jsx(Aa,{className:"w-3.5 h-3.5"}),"Back"]}),o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[o.jsx(_s,{className:"w-3.5 h-3.5 text-blue-500"}),o.jsx("span",{className:"font-semibold text-slate-800",children:C.name}),o.jsx("span",{className:"text-blue-600 font-bold",children:ft(C.price)})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose Your Stylist"}),o.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select your preferred professional"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 stagger-children",children:[o.jsxs("button",{onClick:()=>sn("any"),className:"group text-left bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[o.jsxs("div",{className:"flex items-center gap-3.5 mb-3",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(vn,{className:"w-5 h-5 text-slate-500"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:"Any Available"}),o.jsx("p",{className:"text-xs text-slate-500",children:"First available professional"})]})]}),o.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),w.map(ee=>{const xe=ee.portfolio||[];return o.jsxs("div",{className:"group bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[o.jsxs("button",{onClick:()=>sn(ee),className:"w-full text-left",children:[o.jsxs("div",{className:"flex items-center gap-3.5 mb-2",children:[o.jsx(Mc,{name:ee.name}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:ee.name}),ee.role&&o.jsx("p",{className:"text-xs text-slate-500",children:ee.role})]})]}),ee.bio&&o.jsx("p",{className:"text-xs text-slate-500 leading-relaxed mb-2 line-clamp-2",children:ee.bio}),xe.length>0&&o.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[xe.slice(0,3).map((je,ke)=>o.jsx("img",{src:je.url,alt:je.caption||"Work",className:"w-10 h-10 rounded-md object-cover border border-slate-200"},ke)),xe.length>3&&o.jsxs("span",{className:"w-10 h-10 rounded-md bg-slate-100 border border-slate-200 flex items-center justify-center text-xs text-slate-500 font-semibold",children:["+",xe.length-3]})]}),o.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),xe.length>0&&o.jsxs("button",{onClick:je=>{je.stopPropagation(),ne(ee)},className:"mt-2 w-full flex items-center justify-center gap-1.5 py-1.5 text-xs font-semibold text-violet-600 hover:text-violet-700 hover:bg-violet-50 rounded-lg transition-all",children:[o.jsx(Image,{className:"w-3.5 h-3.5"}),"View Portfolio (",xe.length,")"]})]},ee.id)})]})]}),Ns==="calendar"&&o.jsxs("div",{className:"animate-fade-in",children:[(Me||$e)&&o.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[o.jsxs("button",{onClick:Vn,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[o.jsx(Aa,{className:"w-3.5 h-3.5"}),"Back"]}),C&&o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[o.jsx(_s,{className:"w-3.5 h-3.5 text-blue-500"}),o.jsx("span",{className:"font-semibold text-slate-800",children:C.name}),o.jsx("span",{className:"text-blue-600 font-bold",children:ft(C.price)}),o.jsxs("span",{className:"text-slate-400",children:[" ",rt(C.duration)]})]}),U&&U!=="any"&&o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[o.jsx(Mc,{name:U.name,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),o.jsx("span",{className:"font-semibold text-slate-800",children:U.name})]}),U==="any"&&o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[o.jsx(vn,{className:"w-3.5 h-3.5 text-slate-500"}),o.jsx("span",{className:"font-semibold text-slate-700",children:"Any Available"})]})]}),Gt.length===0?o.jsx("div",{children:Ne?o.jsx("div",{className:"max-w-lg mx-auto",children:o.jsx(U_,{shopId:i,slug:s,selectedService:C,selectedStaff:U,staffMembers:w,preferredDate:null,onCancel:()=>ve(!1)})}):o.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),o.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:C?`No time slots available for ${C.name} (${rt(C.duration)}). Join the waitlist to be notified when a slot opens up!`:"Check back soon for new availability, or join the waitlist!"}),o.jsxs("button",{onClick:()=>ve(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:[o.jsx(jh,{className:"w-4 h-4"}),"Join Waitlist"]})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Select a Date"}),o.jsx("p",{className:"text-slate-500 text-sm",children:"Pick a day that works for you"})]}),o.jsx("div",{className:"mb-8",children:o.jsx(cE,{availableDates:Gt,selectedDate:I,onSelectDate:P})}),I&&o.jsxs("div",{className:"animate-slide-down",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",Ze(I)]}),o.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[mt.length," slot",mt.length!==1?"s":""]})]}),mt.length===0?o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[o.jsx("p",{className:"text-slate-500 mb-4",children:"No times available for this date"}),Ne?o.jsx("div",{className:"mt-4 text-left",children:o.jsx(U_,{shopId:i,slug:s,selectedService:C,selectedStaff:U,staffMembers:w,preferredDate:I,onCancel:()=>ve(!1)})}):o.jsxs("button",{onClick:()=>ve(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[o.jsx(jh,{className:"w-4 h-4"}),"Join the Waitlist"]})]}):o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:mt.sort((ee,xe)=>ee.time.localeCompare(xe.time)).map(ee=>o.jsxs("button",{onClick:()=>At(ee),className:"group bg-white border border-slate-200 hover:border-blue-400 rounded-xl p-4 transition-all duration-200 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5 text-center",children:[o.jsx("div",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-700 transition-colors mb-1",children:Rt(ee.time)}),ee.staffName&&U==="any"&&o.jsxs("div",{className:"text-xs text-violet-600 mb-0.5 flex items-center justify-center gap-1",children:[o.jsx(vn,{className:"w-3 h-3"}),ee.staffName]}),o.jsx("div",{className:"text-xs text-slate-400",children:C?rt(C.duration):`${ee.duration} min`})]},ee.id))})]}),!I&&o.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]}),Ns==="form"&&o.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Complete Your Booking"}),o.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Review your details and confirm"}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[C&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(_s,{className:"w-4 h-4 text-blue-600"})}),o.jsx("span",{className:"font-semibold text-slate-800",children:C.name})]}),o.jsx("span",{className:"font-bold text-blue-600",children:ft(C.price)})]}),U&&U!=="any"&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx(Mc,{name:U.name,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-slate-800",children:U.name}),U.role&&o.jsxs("span",{className:"text-slate-400 text-sm ml-1.5",children:[" ",U.role]})]})]}),U==="any"&&j?.staffName&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx(Mc,{name:j.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),o.jsx("span",{className:"font-semibold text-slate-800",children:j.staffName})]}),o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),o.jsxs("span",{className:"font-semibold text-slate-800",children:[Ze(j.date)," at ",Rt(j.time)]})]}),o.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(jn,{className:"w-4 h-4 text-slate-500"})}),o.jsx("span",{children:C?rt(C.duration):`${j.duration} min`})]})]}),o.jsxs("form",{onSubmit:Ve,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),o.jsx("input",{type:"text",value:D.name,onChange:ee=>R({...D,name:ee.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),o.jsx("input",{type:"email",value:D.email,onChange:ee=>R({...D,email:ee.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),o.jsx("input",{type:"tel",value:D.phone,onChange:ee=>R({...D,phone:ee.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(Zi,{className:"w-4 h-4 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Make this recurring"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Book the same slot on a regular schedule"})]})]}),o.jsx("button",{type:"button",onClick:()=>be(!re),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${re?"bg-blue-500":"bg-slate-300"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${re?"translate-x-6":"translate-x-1"}`})})]}),re&&o.jsxs("div",{className:"space-y-3 pt-1 animate-fade-in",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Repeat every"}),o.jsxs("select",{value:ye,onChange:ee=>Ie(ee.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[o.jsx("option",{value:"weekly",children:"Week"}),o.jsx("option",{value:"biweekly",children:"2 Weeks"}),o.jsx("option",{value:"fourweekly",children:"4 Weeks"}),o.jsx("option",{value:"monthly",children:"Month"})]})]}),Et&&o.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[o.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[" Every ",Et.intervalLabel," through ",Et.endDate]}),o.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[Et.total," total appointment",Et.total!==1?"s":""]}),Et.skipped>0&&o.jsxs("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:[" ",Et.skipped," date",Et.skipped!==1?"s":""," will be skipped due to existing bookings"]})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{type:"submit",disabled:k,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:k?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Booking"]}):o.jsxs(o.Fragment,{children:[o.jsx(ys,{className:"w-4 h-4"}),"Confirm Booking"]})}),o.jsx("button",{type:"button",onClick:()=>{le(!1),A(null)},className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})]}),O&&o.jsx(GD,{member:O,onClose:()=>ne(null)}),o.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:o.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",o.jsx(Qe,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function KD({slotsByDate:s,bookingsByDate:e,selectedDate:n,onSelectDate:i,recurringDayFlags:l={}}){const[u,h]=E.useState(new Date),p=ge=>{const pe=ge.getFullYear(),le=ge.getMonth(),j=new Date(pe,le,1),I=new Date(pe,le+1,0).getDate(),P=j.getDay();return{daysInMonth:I,startingDayOfWeek:P,year:pe,month:le}},{daysInMonth:g,startingDayOfWeek:x,year:b,month:w}=p(u),T=()=>{h(new Date(u.getFullYear(),u.getMonth()-1))},C=()=>{h(new Date(u.getFullYear(),u.getMonth()+1))},H=ge=>`${b}-${String(w+1).padStart(2,"0")}-${String(ge).padStart(2,"0")}`,U=ge=>{const pe=H(ge),le=s[pe]||[],j=e[pe]||[],A=le.filter(P=>P.available).length,I=j.length;return{availableCount:A,bookedCount:I,hasData:le.length>0||j.length>0}},V=ge=>{const pe=H(ge);i(pe===n?null:pe)},B=["January","February","March","April","May","June","July","August","September","October","November","December"],G=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Q=new Date;return Q.setHours(0,0,0,0),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-5",children:[o.jsx("button",{onClick:T,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(sE,{className:"w-5 h-5 text-slate-600"})}),o.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[B[w]," ",b]}),o.jsx("button",{onClick:C,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(d0,{className:"w-5 h-5 text-slate-600"})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:G.map(ge=>o.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:ge},ge))}),o.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:x}).map((ge,pe)=>o.jsx("div",{},`empty-${pe}`)),Array.from({length:g}).map((ge,pe)=>{const le=pe+1,j=H(le),{availableCount:A,bookedCount:I,hasData:P}=U(le),M=j===n,q=new Date,k=q.getDate()===le&&q.getMonth()===w&&q.getFullYear()===b,z=new Date(b,w,le),D=z.getDay(),R=l[D]&&z>=Q;return o.jsxs("button",{onClick:()=>V(le),className:`
                relative p-2 text-center rounded-lg text-sm font-semibold transition-all duration-200 min-h-[56px] flex flex-col items-center justify-start cursor-pointer
                ${M?"bg-blue-600 text-white shadow-md shadow-blue-600/30":P||R?"bg-slate-50 hover:bg-slate-100 text-slate-900 border border-slate-200 hover:border-slate-300":k?"text-slate-900 font-bold hover:bg-slate-50":"text-slate-400 hover:bg-slate-50"}
              `,children:[o.jsxs("span",{className:`text-sm ${k&&!M?"relative":""}`,children:[le,k&&!M&&o.jsx("span",{className:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]}),(P||R)&&o.jsxs("div",{className:"flex gap-0.5 mt-1 flex-wrap justify-center",children:[R&&o.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${M?"bg-white/20 text-white":"bg-violet-100 text-violet-700"}`,children:"R"}),A>0&&o.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${M?"bg-white/20 text-white":"bg-emerald-100 text-emerald-700"}`,children:A}),I>0&&o.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${M?"bg-white/20 text-white":"bg-blue-100 text-blue-700"}`,children:I})]})]},le)})]}),o.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-slate-500",children:[Object.keys(l).length>0&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 bg-violet-100 border border-violet-200 rounded flex items-center justify-center text-[7px] font-bold text-violet-700",children:"R"}),o.jsx("span",{children:"Recurring"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 bg-emerald-100 border border-emerald-200 rounded"}),o.jsx("span",{children:"Available"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 bg-blue-100 border border-blue-200 rounded"}),o.jsx("span",{children:"Booked"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3.5 h-3.5 bg-blue-600 rounded"}),o.jsx("span",{children:"Selected"})]})]})]})}const QD=[{value:15,label:"15 min"},{value:30,label:"30 min"},{value:45,label:"45 min"},{value:60,label:"1 hour"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}];function WD({shopId:s}){const[e,n]=E.useState([]),[i,l]=E.useState(!1),[u,h]=E.useState(null),[p,g]=E.useState({name:"",description:"",duration:30,price:""}),[x,b]=E.useState(!1);E.useEffect(()=>{if(!s)return;const B=pn(Je(we,"shops",s,"services"),G=>{const Q=G.docs.map(ge=>({id:ge.id,...ge.data()})).filter(ge=>ge.active!==!1).sort((ge,pe)=>(ge.name||"").localeCompare(pe.name||""));n(Q)});return()=>B()},[s]);const w=()=>{g({name:"",description:"",duration:30,price:""}),l(!1),h(null)},T=async B=>{B.preventDefault(),b(!0);const G={name:p.name.trim(),description:p.description.trim(),duration:parseInt(p.duration),price:parseFloat(p.price),active:!0};try{u?await nt(tt(we,"shops",s,"services",u),G):await li(Je(we,"shops",s,"services"),{...G,createdAt:e0()}),w()}catch(Q){console.error("Error saving service:",Q)}finally{b(!1)}},C=B=>{g({name:B.name,description:B.description||"",duration:B.duration,price:B.price.toString()}),h(B.id),l(!0)},H=async B=>{try{await nt(tt(we,"shops",s,"services",B),{active:!1})}catch(G){console.error("Error deleting service:",G)}},U=B=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(B),V=B=>{if(B<60)return`${B} min`;const G=Math.floor(B/60),Q=B%60;return Q?`${G}h ${Q}m`:`${G}h`};return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Services"}),o.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Define the services you offer  clients will pick one before booking"})]}),!i&&o.jsxs("button",{onClick:()=>{w(),l(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[o.jsx(lr,{className:"w-4 h-4"}),"Add Service"]})]}),i&&o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Service":"New Service"}),o.jsxs("form",{onSubmit:T,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Service Name *"}),o.jsx("input",{type:"text",value:p.name,onChange:B=>g({...p,name:B.target.value}),required:!0,placeholder:"e.g. Haircut",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description (optional)"}),o.jsx("input",{type:"text",value:p.description,onChange:B=>g({...p,description:B.target.value}),placeholder:"e.g. Classic cut and style",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Duration *"}),o.jsx("select",{value:p.duration,onChange:B=>g({...p,duration:B.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:QD.map(B=>o.jsx("option",{value:B.value,children:B.label},B.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Price (USD) *"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-semibold",children:"$"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:p.price,onChange:B=>g({...p,price:B.target.value}),required:!0,placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsxs("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[o.jsx(Fc,{className:"w-4 h-4"}),x?"Saving":u?"Update Service":"Add Service"]}),o.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[o.jsx(go,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"text-5xl mb-3",children:""}),o.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No services yet"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Add your first service so clients can choose what to book"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(B=>o.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:B.name}),B.description&&o.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:B.description})]}),o.jsx("span",{className:"text-xl font-bold text-blue-600 whitespace-nowrap ml-3",children:U(B.price)})]}),o.jsx("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:o.jsxs("span",{className:"flex items-center gap-1.5",children:[o.jsx(jn,{className:"w-4 h-4"}),V(B.duration)]})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>C(B),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:[o.jsx(rE,{className:"w-3.5 h-3.5"}),"Edit"]}),o.jsx("button",{onClick:()=>H(B.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:o.jsx(tu,{className:"w-3.5 h-3.5"})})]})]},B.id))})]})}const vp=[{key:"monday",label:"Monday",short:"Mon"},{key:"tuesday",label:"Tuesday",short:"Tue"},{key:"wednesday",label:"Wednesday",short:"Wed"},{key:"thursday",label:"Thursday",short:"Thu"},{key:"friday",label:"Friday",short:"Fri"},{key:"saturday",label:"Saturday",short:"Sat"},{key:"sunday",label:"Sunday",short:"Sun"}],XD={enabled:!1,start:"09:00",end:"17:00",break:null};function JD({shopId:s,staffId:e,staffName:n,weeklyHours:i,onClose:l}){const[u,h]=E.useState(()=>{const V={};for(const B of vp){const G=i?.[B.key];G?V[B.key]={enabled:!!G.enabled,start:G.start||"09:00",end:G.end||"17:00",break:G.break?{start:G.break.start,end:G.break.end}:null}:V[B.key]={...XD}}return V}),[p,g]=E.useState(!1),[x,b]=E.useState(null),w=(V,B,G)=>{h(Q=>({...Q,[V]:{...Q[V],[B]:G}}))},T=V=>{h(B=>({...B,[V]:{...B[V],break:B[V].break?null:{start:"12:00",end:"13:00"}}}))},C=(V,B,G)=>{h(Q=>({...Q,[V]:{...Q[V],break:{...Q[V].break,[B]:G}}}))},H=V=>{const B=u[V];h(G=>{const Q={...G};for(const ge of vp)ge.key!==V&&(Q[ge.key]={enabled:B.enabled,start:B.start,end:B.end,break:B.break?{...B.break}:null});return Q}),b(V),setTimeout(()=>b(null),1500)},U=async()=>{g(!0);try{await nt(tt(we,"shops",s,"staff",e),{weeklyHours:u}),l()}catch(V){console.error("Error saving weekly hours:",V)}finally{g(!1)}};return o.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Weekly Hours"}),o.jsx("p",{className:"text-sm text-slate-500",children:n})]}),o.jsx("button",{onClick:l,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:o.jsx(go,{className:"w-5 h-5 text-slate-400"})})]}),o.jsx("div",{className:"space-y-3",children:vp.map(({key:V,label:B})=>{const G=u[V];return o.jsx("div",{className:`rounded-xl p-4 transition-all ${G.enabled?"bg-blue-50 border border-blue-200":"bg-slate-50 border border-slate-200"}`,children:o.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-[140px]",children:[o.jsx("button",{type:"button",onClick:()=>w(V,"enabled",!G.enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${G.enabled?"bg-blue-500":"bg-slate-300"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${G.enabled?"translate-x-6":"translate-x-1"}`})}),o.jsx("span",{className:`font-semibold text-sm ${G.enabled?"text-slate-900":"text-slate-400"}`,children:B})]}),G.enabled?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jn,{className:"w-4 h-4 text-blue-500"}),o.jsx("input",{type:"time",value:G.start,onChange:Q=>w(V,"start",Q.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("span",{className:"text-slate-400 text-sm",children:"to"}),o.jsx("input",{type:"time",value:G.end,onChange:Q=>w(V,"end",Q.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{type:"button",onClick:()=>T(V),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${G.break?"bg-amber-100 text-amber-700 border border-amber-200":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,children:[o.jsx($6,{className:"w-3.5 h-3.5"}),G.break?"Break":"+ Break"]}),G.break&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("input",{type:"time",value:G.break.start,onChange:Q=>C(V,"start",Q.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"}),o.jsx("span",{className:"text-slate-400 text-xs",children:""}),o.jsx("input",{type:"time",value:G.break.end,onChange:Q=>C(V,"end",Q.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"})]})]}),o.jsx("button",{type:"button",onClick:()=>H(V),className:"text-xs text-blue-500 hover:text-blue-700 font-medium transition-colors whitespace-nowrap",children:x===V?" Copied!":"Copy to all"})]}):o.jsx("span",{className:"text-sm text-slate-400 italic",children:"Day off"})]})},V)})}),o.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-200",children:[o.jsxs("button",{onClick:U,disabled:p,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[o.jsx(xD,{className:"w-4 h-4"}),p?"Saving":"Save Hours"]}),o.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[o.jsx(go,{className:"w-4 h-4"}),"Cancel"]})]})]})}const ZD=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}],e3=5*1024*1024,t3=["image/jpeg","image/png","image/webp"];function z_(s){if(!s)return"";const[e,n]=s.split(":").map(Number),i=e>=12?"p":"a",l=e%12||12;return n===0?`${l}${i}`:`${l}:${n.toString().padStart(2,"0")}${i}`}function n3({shopId:s}){const[e,n]=E.useState([]),[i,l]=E.useState(!1),[u,h]=E.useState(null),[p,g]=E.useState(null),[x,b]=E.useState(null),[w,T]=E.useState({name:"",role:""}),[C,H]=E.useState(!1),[U,V]=E.useState(null),[B,G]=E.useState(""),[Q,ge]=E.useState(!1),[pe,le]=E.useState(!1),[j,A]=E.useState(""),[I,P]=E.useState(null),[M,q]=E.useState(null),[k,z]=E.useState(null),D=E.useRef(null);E.useEffect(()=>{if(!s)return;const oe=pn(Je(we,"shops",s,"staff"),Ue=>{const Me=Ue.docs.map($e=>({id:$e.id,...$e.data()})).filter($e=>$e.active!==!1).sort(($e,st)=>($e.name||"").localeCompare(st.name||""));n(Me)});return()=>oe()},[s]);const R=()=>{T({name:"",role:""}),l(!1),h(null)},K=async oe=>{oe.preventDefault(),H(!0);const Ue={name:w.name.trim(),role:w.role.trim(),active:!0};try{u?await nt(tt(we,"shops",s,"staff",u),Ue):await li(Je(we,"shops",s,"staff"),{...Ue,email:"",bio:"",portfolio:[],createdAt:e0()}),R()}catch(Me){console.error("Error saving staff member:",Me)}finally{H(!1)}},he=oe=>{T({name:oe.name,role:oe.role||""}),h(oe.id),l(!0)},Ne=async oe=>{try{await nt(tt(we,"shops",s,"staff",oe),{active:!1})}catch(Ue){console.error("Error deleting staff member:",Ue)}},ve=oe=>{V(oe.id),G(oe.bio||"")},O=async oe=>{ge(!0);try{await nt(tt(we,"shops",s,"staff",oe),{bio:B.trim()}),V(null),G("")}catch(Ue){console.error("Error saving bio:",Ue)}finally{ge(!1)}},ne=oe=>{P(oe),A(""),q(null),setTimeout(()=>{D.current&&(D.current.value="",D.current.click())},50)},re=oe=>{const Ue=oe.target.files?.[0];if(Ue){if(!t3.includes(Ue.type)){alert("Please select a JPG, PNG, or WebP image.");return}if(Ue.size>e3){alert("File size must be under 5MB.");return}q(Ue)}},be=async oe=>{if(M){le(!0);try{const Ue=Date.now(),Me=M.name.split(".").pop(),$e=`${Ue}.${Me}`,st=`shops/${s}/staff/${oe}/portfolio/${$e}`,$t=C_(I_,st);await r6($t,M);const nn=await l6($t),Ot=e.find(sn=>sn.id===oe)?.portfolio||[];await nt(tt(we,"shops",s,"staff",oe),{portfolio:[...Ot,{url:nn,storagePath:st,caption:j.trim(),uploadedAt:new Date().toISOString()}]}),P(null),A(""),q(null)}catch(Ue){console.error("Error uploading photo:",Ue),alert("Upload failed. Please try again.")}finally{le(!1)}}},ye=async(oe,Ue)=>{const Me=e.find(st=>st.id===oe);if(!Me)return;const $e=Me.portfolio[Ue];if($e){z(`${oe}-${Ue}`);try{if($e.storagePath)try{const $t=C_(I_,$e.storagePath);await o6($t)}catch($t){console.warn("Storage delete warning:",$t)}const st=Me.portfolio.filter(($t,nn)=>nn!==Ue);await nt(tt(we,"shops",s,"staff",oe),{portfolio:st})}catch(st){console.error("Error deleting photo:",st),alert("Failed to delete photo.")}finally{z(null)}}},Ie=oe=>{if(!oe)return null;const Ue=ZD.filter(Me=>oe[Me.key]?.enabled);return Ue.length===0?null:Ue.map(Me=>{const $e=oe[Me.key];return`${Me.short} ${z_($e.start)}${z_($e.end)}`})};return o.jsxs("div",{children:[o.jsx("input",{ref:D,type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:re}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Staff"}),o.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Manage your team  assign availability and bookings per staff member"})]}),!i&&o.jsxs("button",{onClick:()=>{R(),l(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[o.jsx(lr,{className:"w-4 h-4"}),"Add Staff"]})]}),i&&o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Staff Member":"New Staff Member"}),o.jsxs("form",{onSubmit:K,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name *"}),o.jsx("input",{type:"text",value:w.name,onChange:oe=>T({...w,name:oe.target.value}),required:!0,placeholder:"e.g. Jane Smith",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Role (optional)"}),o.jsx("input",{type:"text",value:w.role,onChange:oe=>T({...w,role:oe.target.value}),placeholder:"e.g. Senior Stylist",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsxs("button",{type:"submit",disabled:C,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[o.jsx(Fc,{className:"w-4 h-4"}),C?"Saving":u?"Update Staff":"Add Staff"]}),o.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[o.jsx(go,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"text-5xl mb-3",children:""}),o.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No staff members yet"}),o.jsx("p",{className:"text-sm text-slate-600",children:"Add your team members to assign them availability and bookings"})]}):o.jsx("div",{className:"space-y-4",children:e.map(oe=>{const Ue=Ie(oe.weeklyHours),Me=oe.portfolio||[];return o.jsxs("div",{children:[o.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:oe.name}),oe.role&&o.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:oe.role})]}),o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(vn,{className:"w-5 h-5 text-blue-600"})})]}),o.jsx("div",{className:"mb-3",children:U===oe.id?o.jsxs("div",{className:"space-y-2",children:[o.jsx("textarea",{value:B,onChange:$e=>G($e.target.value),placeholder:"Write a short bio  specialties, experience, personality",rows:3,maxLength:500,className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>O(oe.id),disabled:Q,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[Q?o.jsx(yp,{className:"w-3 h-3 animate-spin"}):o.jsx(Fc,{className:"w-3 h-3"}),"Save Bio"]}),o.jsx("button",{onClick:()=>{V(null),G("")},className:"px-3 py-1.5 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"}),o.jsxs("span",{className:"text-xs text-slate-400 ml-auto",children:[B.length,"/500"]})]})]}):o.jsx("div",{onClick:()=>ve(oe),className:"cursor-pointer group",children:oe.bio?o.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed group-hover:text-slate-800 transition-colors",children:[oe.bio,o.jsx("span",{className:"ml-1.5 text-xs text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"edit"})]}):o.jsx("p",{className:"text-sm text-slate-400 italic group-hover:text-blue-500 transition-colors",children:"+ Add a bio"})})}),Ue?o.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5",children:Ue.map(($e,st)=>o.jsx("span",{className:"inline-block px-2 py-0.5 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium",children:$e},st))}):o.jsx("p",{className:"text-xs text-slate-400 mb-3 italic",children:"No weekly hours set"}),Me.length>0&&x!==oe.id&&o.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[o.jsx("div",{className:"flex -space-x-1",children:Me.slice(0,4).map(($e,st)=>o.jsx("img",{src:$e.url,alt:$e.caption||"Portfolio",className:"w-10 h-10 rounded-lg object-cover border-2 border-white shadow-sm"},st))}),o.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[Me.length," photo",Me.length!==1?"s":""]})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsxs("button",{onClick:()=>g(p===oe.id?null:oe.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${p===oe.id?"bg-blue-100 text-blue-700 border-blue-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[o.jsx(jn,{className:"w-3.5 h-3.5"}),"Set Hours"]}),o.jsxs("button",{onClick:()=>b(x===oe.id?null:oe.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${x===oe.id?"bg-violet-100 text-violet-700 border-violet-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[o.jsx(C6,{className:"w-3.5 h-3.5"}),"Portfolio"]}),o.jsx("button",{onClick:()=>he(oe),className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:o.jsx(rE,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>Ne(oe.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:o.jsx(tu,{className:"w-3.5 h-3.5"})})]})]}),p===oe.id&&o.jsx("div",{className:"mt-2",children:o.jsx(JD,{shopId:s,staffId:oe.id,staffName:oe.name,weeklyHours:oe.weeklyHours,onClose:()=>g(null)})}),x===oe.id&&o.jsxs("div",{className:"mt-2 bg-white border-2 border-violet-200 rounded-xl p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h4",{className:"text-sm font-bold text-slate-800 flex items-center gap-2",children:[o.jsx(Z6,{className:"w-4 h-4 text-violet-600"}),"Portfolio  ",oe.name]}),o.jsxs("button",{onClick:()=>ne(oe.id),disabled:pe,className:"flex items-center gap-1.5 px-3 py-1.5 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[o.jsx(lr,{className:"w-3 h-3"}),"Add Photo"]})]}),I===oe.id&&M&&o.jsxs("div",{className:"mb-4 p-3 bg-violet-50 border border-violet-200 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"w-16 h-16 rounded-lg bg-slate-200 overflow-hidden flex-shrink-0",children:o.jsx("img",{src:URL.createObjectURL(M),alt:"Preview",className:"w-full h-full object-cover"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-xs text-slate-600 font-medium mb-1 truncate",children:M.name}),o.jsxs("p",{className:"text-xs text-slate-400",children:[(M.size/1024/1024).toFixed(1)," MB"]})]})]}),o.jsx("input",{type:"text",value:j,onChange:$e=>A($e.target.value),placeholder:"Add a caption (optional)",maxLength:200,className:"w-full px-3 py-2 text-sm border border-violet-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-400 focus:border-transparent mb-2"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>be(oe.id),disabled:pe,className:"flex items-center gap-1.5 px-4 py-2 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:pe?o.jsxs(o.Fragment,{children:[o.jsx(yp,{className:"w-3 h-3 animate-spin"}),"Uploading"]}):o.jsxs(o.Fragment,{children:[o.jsx(Fc,{className:"w-3 h-3"}),"Upload"]})}),o.jsx("button",{onClick:()=>{P(null),q(null),A("")},className:"px-3 py-2 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}),Me.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet. Add some to showcase work!"})]}):o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:Me.map(($e,st)=>o.jsxs("div",{className:"group relative bg-slate-50 rounded-lg overflow-hidden border border-slate-200 shadow-sm",children:[o.jsx("div",{className:"aspect-square",children:o.jsx("img",{src:$e.url,alt:$e.caption||"Portfolio photo",className:"w-full h-full object-cover"})}),$e.caption&&o.jsx("div",{className:"px-2 py-1.5",children:o.jsx("p",{className:"text-xs text-slate-600 truncate",children:$e.caption})}),o.jsx("button",{onClick:()=>ye(oe.id,st),disabled:k===`${oe.id}-${st}`,className:"absolute top-1.5 right-1.5 w-7 h-7 bg-red-500/90 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-md disabled:opacity-50",title:"Delete photo",children:k===`${oe.id}-${st}`?o.jsx(yp,{className:"w-3.5 h-3.5 animate-spin"}):o.jsx(tu,{className:"w-3.5 h-3.5"})})]},st))})]})]},oe.id)})})]})}function Br(s){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function s3(s){const e=new Date(s),n=e.getDay(),i=n===0?-6:1-n;return e.setDate(e.getDate()+i),e.setHours(0,0,0,0),e}function zr(s){return`$${Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function q_(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}function F_(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{weekday:"short"})}function _p(s,e){return e===0&&s===0?0:e===0?100:(s-e)/e*100}function a3({bookings:s}){const[e,n]=E.useState(null),[i,l]=E.useState(null),u=E.useMemo(()=>s.filter(z=>z.status==="confirmed"||z.status==="pending"||!z.status),[s]),h=E.useMemo(()=>{const z=new Date;return z.setHours(0,0,0,0),z},[]),p=E.useMemo(()=>Br(h),[h]),g=E.useMemo(()=>s3(h),[h]),x=E.useMemo(()=>{const z=new Date(g);return z.setDate(z.getDate()+6),z},[g]),b=E.useMemo(()=>{const z=new Date(g);return z.setDate(z.getDate()-7),z},[g]),w=E.useMemo(()=>{const z=new Date(b);return z.setDate(z.getDate()+6),z},[b]),T=E.useMemo(()=>new Date(h.getFullYear(),h.getMonth(),1),[h]),C=E.useMemo(()=>new Date(h.getFullYear(),h.getMonth()-1,1),[h]),H=E.useMemo(()=>{const z=new Date(T);return z.setDate(z.getDate()-1),z},[T]),U=E.useMemo(()=>{const z=new Date(h);return z.setDate(z.getDate()-1),Br(z)},[h]),V=E.useMemo(()=>{const z=re=>re.reduce((be,ye)=>be+(Number(ye.servicePrice)||0),0),D=(re,be,ye)=>re.date>=Br(be)&&re.date<=Br(ye),R=z(u.filter(re=>re.date===p)),K=z(u.filter(re=>re.date===U)),he=z(u.filter(re=>D(re,g,x))),Ne=z(u.filter(re=>D(re,b,w))),ve=z(u.filter(re=>D(re,T,h))),O=z(u.filter(re=>D(re,C,H))),ne=z(u);return{today:R,todayChange:_p(R,K),week:he,weekChange:_p(he,Ne),month:ve,monthChange:_p(ve,O),allTime:ne}},[u,p,U,g,x,b,w,T,H,h]),B=E.useMemo(()=>{const z=[];for(let D=13;D>=0;D--){const R=new Date(h);R.setDate(R.getDate()-D),z.push(Br(R))}return z},[h]),G=E.useMemo(()=>{const z={};return B.forEach(D=>{z[D]=0}),u.forEach(D=>{z[D.date]!==void 0&&(z[D.date]+=Number(D.servicePrice)||0)}),B.map(D=>({date:D,value:z[D]}))},[u,B]),Q=E.useMemo(()=>Math.max(...G.map(z=>z.value),1),[G]),ge=E.useMemo(()=>{const z={},D={};return B.forEach(R=>{z[R]=0,D[R]=0}),s.forEach(R=>{z[R.date]!==void 0&&(R.status==="cancelled"||R.status==="rejected"?D[R.date]++:z[R.date]++)}),B.map(R=>({date:R,confirmed:z[R],cancelled:D[R],total:z[R]+D[R]}))},[s,B]),pe=E.useMemo(()=>Math.max(...ge.map(z=>z.total),1),[ge]),le=E.useMemo(()=>{const z=s.length;if(z===0)return 100;const D=s.filter(R=>R.status==="cancelled"||R.status==="rejected").length;return Math.round((z-D)/z*100)},[s]),j=E.useMemo(()=>{const z=Array.from({length:7},()=>Array(24).fill(0));u.forEach(R=>{if(!R.date||!R.time)return;const he=new Date(R.date+"T12:00:00").getDay(),Ne=parseInt(R.time.split(":")[0],10);!isNaN(he)&&!isNaN(Ne)&&z[he][Ne]++});let D=0;return z.forEach(R=>R.forEach(K=>{K>D&&(D=K)})),{grid:z,max:D}},[u]),A=E.useMemo(()=>{const z={};return u.forEach(D=>{const R=D.serviceName||"Unknown";z[R]||(z[R]={name:R,count:0,revenue:0}),z[R].count++,z[R].revenue+=Number(D.servicePrice)||0}),Object.values(z).map(D=>({...D,avgRevenue:D.count>0?D.revenue/D.count:0})).sort((D,R)=>R.revenue-D.revenue)},[u]),I=E.useMemo(()=>{const z={};return u.forEach(D=>{const R=D.staffName||"Unassigned";z[R]||(z[R]={name:R,count:0,revenue:0,clients:new Set}),z[R].count++,z[R].revenue+=Number(D.servicePrice)||0,D.clientEmail&&z[R].clients.add(D.clientEmail.toLowerCase())}),Object.values(z).map(D=>({...D,clientCount:D.clients.size})).sort((D,R)=>R.revenue-D.revenue)},[u]),P=E.useMemo(()=>{const z=u.map(ye=>ye.clientEmail?.toLowerCase()).filter(Boolean),D=new Set(z).size,R=u.filter(ye=>ye.date>=Br(T)&&ye.date<=p),K=new Set(R.map(ye=>ye.clientEmail?.toLowerCase()).filter(Boolean)),he=u.filter(ye=>ye.date<Br(T)),Ne=new Set(he.map(ye=>ye.clientEmail?.toLowerCase()).filter(Boolean));let ve=0,O=0;K.forEach(ye=>{Ne.has(ye)?O++:ve++});const ne={};u.forEach(ye=>{const Ie=ye.clientEmail?.toLowerCase();Ie&&(ne[Ie]||(ne[Ie]={email:Ie,name:ye.clientName||Ie,count:0}),ne[Ie].count++,ye.clientName&&(ne[Ie].name=ye.clientName))});const re=Object.values(ne).sort((ye,Ie)=>Ie.count-ye.count).slice(0,10),be=D>0?u.length/D:0;return{uniqueClients:D,newThisMonth:ve,returningThisMonth:O,topClients:re,avgBookingsPerClient:be}},[u,T,p]),M=({value:z,suffix:D="vs prev"})=>{if(z===0)return o.jsxs("span",{className:"flex items-center gap-0.5 text-xs font-medium text-slate-400",children:[o.jsx(oD,{className:"w-3 h-3"})," 0% ",D]});const R=z>0;return o.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-semibold ${R?"text-emerald-600":"text-red-500"}`,children:[R?o.jsx(E6,{className:"w-3 h-3"}):o.jsx(v6,{className:"w-3 h-3"}),R?"+":"",Math.round(z),"% ",D]})},q=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=Array.from({length:15},(z,D)=>D+7);return o.jsxs("div",{className:"animate-fade-in space-y-6",children:[o.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Today's Revenue",value:V.today,change:V.todayChange,suffix:"vs yesterday",icon:Y6,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:V.week,change:V.weekChange,suffix:"vs last week",icon:h0,color:"bg-violet-100 text-violet-600"},{label:"This Month",value:V.month,change:V.monthChange,suffix:"vs last month",icon:Vt,color:"bg-emerald-100 text-emerald-600"},{label:"All-time Revenue",value:V.allTime,change:null,icon:nE,color:"bg-amber-100 text-amber-600"}].map(z=>{const D=z.icon;return o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("div",{className:`w-10 h-10 ${z.color} rounded-xl flex items-center justify-center`,children:o.jsx(D,{className:"w-5 h-5"})})}),o.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:zr(z.value)}),o.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5 mb-1",children:z.label}),z.change!==null&&o.jsx(M,{value:z.change,suffix:z.suffix})]},z.label)})}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Revenue  Last 14 Days"}),o.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Daily revenue from confirmed & pending bookings"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"min-w-[600px]",children:[o.jsxs("div",{className:"flex items-end gap-0",children:[o.jsxs("div",{className:"flex flex-col justify-between h-48 pr-2 text-right flex-shrink-0 w-16",children:[o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:zr(Q)}),o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:zr(Q/2)}),o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"$0"})]}),o.jsx("div",{className:"flex-1 flex items-end gap-1 h-48 border-b border-l border-slate-200 pl-1 pb-0 relative",children:G.map((z,D)=>{const R=Q>0?z.value/Q*100:0,K=e===D;return o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative group",onMouseEnter:()=>n(D),onMouseLeave:()=>n(null),onTouchStart:()=>n(D),children:[K&&o.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[zr(z.value),o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),o.jsx("div",{className:"w-full rounded-t-md transition-all duration-200 cursor-pointer",style:{height:`${Math.max(R,z.value>0?2:0)}%`,background:K?"linear-gradient(to top, #2563eb, #60a5fa)":"linear-gradient(to top, #3b82f6, #93c5fd)",minHeight:z.value>0?"4px":"0px"}})]},z.date)})})]}),o.jsx("div",{className:"flex ml-16 pl-1",children:G.map(z=>o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:F_(z.date)}),o.jsx("div",{className:"text-[9px] text-slate-400",children:q_(z.date)})]},z.date))})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Booking Trends  Last 14 Days"}),o.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Daily bookings breakdown"})]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[o.jsxs("span",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-blue-500"})," Confirmed"]}),o.jsxs("span",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-red-400"})," Cancelled"]}),o.jsxs("span",{className:"px-2.5 py-1 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg font-semibold",children:[le,"% completion"]})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"min-w-[600px]",children:[o.jsxs("div",{className:"flex items-end gap-0",children:[o.jsxs("div",{className:"flex flex-col justify-between h-40 pr-2 text-right flex-shrink-0 w-16",children:[o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:pe}),o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Math.round(pe/2)}),o.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"0"})]}),o.jsx("div",{className:"flex-1 flex items-end gap-1 h-40 border-b border-l border-slate-200 pl-1 relative",children:ge.map((z,D)=>{const R=pe>0?z.confirmed/pe*100:0,K=pe>0?z.cancelled/pe*100:0,he=i===D;return o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative",onMouseEnter:()=>l(D),onMouseLeave:()=>l(null),onTouchStart:()=>l(D),children:[he&&o.jsxs("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[z.confirmed," confirmed, ",z.cancelled," cancelled",o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),o.jsxs("div",{className:"w-full flex flex-col items-stretch",children:[z.cancelled>0&&o.jsx("div",{className:"w-full rounded-t-md bg-red-400 transition-all duration-200",style:{height:`${Math.max(K,2)}%`}}),z.confirmed>0&&o.jsx("div",{className:`w-full bg-blue-500 transition-all duration-200 ${z.cancelled===0?"rounded-t-md":""}`,style:{height:`${Math.max(R,2)}%`}})]})]},z.date)})})]}),o.jsx("div",{className:"flex ml-16 pl-1",children:ge.map(z=>o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:F_(z.date)}),o.jsx("div",{className:"text-[9px] text-slate-400",children:q_(z.date)})]},z.date))})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Busiest Times"}),o.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Booking density by day of week and hour"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("div",{className:"min-w-[600px]",children:[o.jsxs("table",{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{className:"w-12"}),k.map(z=>o.jsxs("th",{className:"text-[10px] text-slate-400 font-medium pb-2 text-center px-0.5",children:[z%12||12,z>=12?"p":"a"]},z))]})}),o.jsx("tbody",{children:[1,2,3,4,5,6,0].map(z=>o.jsxs("tr",{children:[o.jsx("td",{className:"text-[11px] text-slate-500 font-semibold pr-2 py-0.5 text-right",children:q[z]}),k.map(D=>{const R=j.grid[z][D],K=j.max||1,he=R/K;let Ne="bg-slate-50";return R>0&&(he<=.2?Ne="bg-blue-100":he<=.4?Ne="bg-blue-200":he<=.6?Ne="bg-blue-300":he<=.8?Ne="bg-blue-500 text-white":Ne="bg-blue-700 text-white"),o.jsx("td",{className:"px-0.5 py-0.5",children:o.jsx("div",{className:`w-full aspect-square rounded-sm ${Ne} flex items-center justify-center text-[9px] font-bold transition-all hover:ring-2 hover:ring-blue-400 hover:ring-offset-1 cursor-default`,title:`${q[z]} ${D}:00  ${R} booking${R!==1?"s":""}`,children:R>0?R:""})},D)})]},z))})]}),o.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-3",children:[o.jsx("span",{className:"text-[10px] text-slate-400",children:"Less"}),["bg-slate-50","bg-blue-100","bg-blue-200","bg-blue-300","bg-blue-500","bg-blue-700"].map((z,D)=>o.jsx("div",{className:`w-4 h-4 rounded-sm ${z} border border-slate-200`},D)),o.jsx("span",{className:"text-[10px] text-slate-400",children:"More"})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Top Services"}),o.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Ranked by revenue from confirmed & pending bookings"}),A.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(_s,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-400",children:"No service data yet"})]}):o.jsx("div",{className:"space-y-2",children:A.map((z,D)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 font-bold text-sm flex-shrink-0",children:D+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:z.name}),o.jsxs("div",{className:"text-xs text-slate-500",children:[z.count," booking",z.count!==1?"s":"","  avg ",zr(z.avgRevenue)]})]}),o.jsx("div",{className:"text-sm font-bold text-blue-600 flex-shrink-0",children:zr(z.revenue)})]},z.name))})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Staff Performance"}),o.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Bookings, revenue & clients per staff member"}),I.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(vn,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-400",children:"No staff data yet"})]}):o.jsx("div",{className:"space-y-2",children:I.map((z,D)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[o.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center text-violet-600 font-bold text-sm flex-shrink-0",children:D+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:z.name}),o.jsxs("div",{className:"text-xs text-slate-500",children:[z.count," booking",z.count!==1?"s":"","  ",z.clientCount," client",z.clientCount!==1?"s":""]})]}),o.jsx("div",{className:"text-sm font-bold text-violet-600 flex-shrink-0",children:zr(z.revenue)})]},z.name))})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Client Insights"}),o.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Understanding your client base"}),o.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[o.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-100 p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:P.uniqueClients}),o.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:"Total Unique Clients"})]}),o.jsxs("div",{className:"bg-emerald-50 rounded-xl border border-emerald-100 p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-extrabold text-emerald-700",children:P.newThisMonth}),o.jsx("div",{className:"text-xs font-medium text-emerald-600 mt-0.5",children:"New This Month"})]}),o.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-extrabold text-blue-700",children:P.returningThisMonth}),o.jsx("div",{className:"text-xs font-medium text-blue-600 mt-0.5",children:"Returning This Month"})]}),o.jsxs("div",{className:"bg-violet-50 rounded-xl border border-violet-100 p-4 text-center",children:[o.jsx("div",{className:"text-2xl font-extrabold text-violet-700",children:P.avgBookingsPerClient.toFixed(1)}),o.jsx("div",{className:"text-xs font-medium text-violet-600 mt-0.5",children:"Avg Bookings / Client"})]})]}),o.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"Top Clients by Frequency"}),P.topClients.length===0?o.jsxs("div",{className:"text-center py-6",children:[o.jsx(nu,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-slate-400",children:"No client data yet"})]}):o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:P.topClients.map((z,D)=>o.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[o.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center text-amber-700 font-bold text-xs flex-shrink-0",children:D+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:z.name}),o.jsx("div",{className:"text-xs text-slate-400 truncate",children:z.email})]}),o.jsxs("div",{className:"flex-shrink-0 px-2.5 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-bold",children:[z.count," visit",z.count!==1?"s":""]})]},z.email))})]})]})}function fE({waitingAhead:s=[],inProgress:e=[],staffCount:n=1,upcomingBookings:i=[],defaultDuration:l=30}){const u=Math.max(n,1),h=Date.now(),p=e.map(b=>{const w=b.startedAt?.toDate?.()||(b.startedAt?new Date(b.startedAt):null);if(!w)return 0;const T=(h-w.getTime())/6e4,C=b.estimatedDuration||l;return Math.max(0,C-T)});p.sort((b,w)=>b-w);const g=[];for(let b=0;b<u;b++)g.push(p[b]||0);g.sort((b,w)=>b-w);const x=s.map(b=>b.estimatedDuration||l);for(const b of x)g[0]+=b,g.sort((w,T)=>w-T);return Math.round(g[0])}function mE({waitingQueue:s=[],inProgress:e=[],staffCount:n=1,upcomingBookings:i=[],defaultDuration:l=30}){const u=new Map;for(let h=0;h<s.length;h++){const p=s.slice(0,h),g=fE({waitingAhead:p,inProgress:e,staffCount:n,upcomingBookings:i,defaultDuration:l});u.set(s[h].id,g)}return u}function i3(s=[],e=3){const n=new Date,i=new Date(n.getTime()+e*60*60*1e3),l=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`;return s.filter(u=>{if(u.status==="cancelled"||u.status==="rejected"||u.date!==l)return!1;const h=new Date(`${u.date}T${u.time}`);return h>=n&&h<=i}).sort((u,h)=>`${u.time}`.localeCompare(`${h.time}`))}function r3(s){if(!s)return"0m";const e=s?.toDate?.()||new Date(s),n=Math.floor((Date.now()-e.getTime())/6e4);if(n<1)return"<1m";if(n<60)return`${n}m`;const i=Math.floor(n/60),l=n%60;return l>0?`${i}h ${l}m`:`${i}h`}function l3(s){if(s==null)return"";if(s<1)return"Next up";if(s<60)return`~${s}m`;const e=Math.floor(s/60),n=s%60;return n>0?`~${e}h ${n}m`:`~${e}h`}function o3({shopId:s,services:e,staff:n,bookings:i}){const[l,u]=E.useState([]),[h,p]=E.useState(!1),[g,x]=E.useState(!1),[b,w]=E.useState(!1),[T,C]=E.useState({clientName:"",serviceId:"",staffId:"",estimatedDuration:30});E.useEffect(()=>{if(!s)return;const D=pn(Je(we,"shops",s,"walkins"),R=>{const K=R.docs.map(he=>({id:he.id,...he.data()}));u(K)});return()=>D()},[s]);const H=E.useMemo(()=>l.filter(D=>D.status==="waiting").sort((D,R)=>(D.position||0)-(R.position||0)),[l]),U=E.useMemo(()=>l.filter(D=>D.status==="in-progress").sort((D,R)=>{const K=D.startedAt?.toDate?.()?.getTime()||0,he=R.startedAt?.toDate?.()?.getTime()||0;return K-he}),[l]),V=E.useMemo(()=>{const D=new Date;return D.setHours(0,0,0,0),D},[]),B=E.useMemo(()=>l.filter(D=>{if(D.status!=="completed"&&D.status!=="no-show")return!1;const R=D.completedAt?.toDate?.()||(D.completedAt?new Date(D.completedAt):null);return R?R>=V:!1}).sort((D,R)=>{const K=D.completedAt?.toDate?.()?.getTime()||0;return(R.completedAt?.toDate?.()?.getTime()||0)-K}),[l,V]),G=E.useMemo(()=>Math.max(n.filter(D=>D.active!==!1).length,1),[n]),Q=E.useMemo(()=>i3(i,3),[i]),ge=E.useMemo(()=>mE({waitingQueue:H,inProgress:U,staffCount:G,upcomingBookings:Q,defaultDuration:30}),[H,U,G,Q]),pe=E.useMemo(()=>{const D=B.filter(K=>K.status==="completed"&&K.joinedAt&&K.startedAt).map(K=>{const he=K.joinedAt?.toDate?.()||new Date(K.joinedAt),Ne=K.startedAt?.toDate?.()||new Date(K.startedAt);return Math.floor((Ne.getTime()-he.getTime())/6e4)}).filter(K=>K>=0),R=D.length>0?Math.round(D.reduce((K,he)=>K+he,0)/D.length):0;return{waiting:H.length,avgWait:R,completedToday:B.filter(K=>K.status==="completed").length}},[H,B]),le=D=>{const R=e.find(K=>K.id===D);C(K=>({...K,serviceId:D,estimatedDuration:R?.duration||30}))},j=()=>H.length===0?1:Math.max(...H.map(D=>D.position||0))+1,A=E.useMemo(()=>l.filter(D=>{const R=D.joinedAt?.toDate?.()||(D.joinedAt?new Date(D.joinedAt):null);return R&&R>=V}).length,[l,V]),I=async D=>{D.preventDefault(),w(!0);const R=e.find(ve=>ve.id===T.serviceId),K=n.find(ve=>ve.id===T.staffId),he=j(),Ne=T.clientName.trim()||`Walk-in #${A+1}`;try{await li(Je(we,"shops",s,"walkins"),{clientName:Ne,serviceId:T.serviceId||null,serviceName:R?.name||null,staffId:T.staffId||null,staffName:K?.name||null,estimatedDuration:parseInt(T.estimatedDuration)||30,status:"waiting",position:he,joinedAt:wt.now(),startedAt:null,completedAt:null,estimatedWaitMinutes:null}),C({clientName:"",serviceId:"",staffId:"",estimatedDuration:30}),p(!1)}catch(ve){console.error("Error adding walk-in:",ve)}finally{w(!1)}},P=async D=>{try{await nt(tt(we,"shops",s,"walkins",D),{status:"in-progress",startedAt:wt.now()});const R=H.filter(K=>K.id!==D).sort((K,he)=>(K.position||0)-(he.position||0));for(let K=0;K<R.length;K++)await nt(tt(we,"shops",s,"walkins",R[K].id),{position:K+1})}catch(R){console.error("Error starting service:",R)}},M=async D=>{try{await nt(tt(we,"shops",s,"walkins",D),{status:"completed",completedAt:wt.now()})}catch(R){console.error("Error completing service:",R)}},q=async D=>{try{await nt(tt(we,"shops",s,"walkins",D),{status:"no-show",completedAt:wt.now()});const R=H.filter(K=>K.id!==D).sort((K,he)=>(K.position||0)-(he.position||0));for(let K=0;K<R.length;K++)await nt(tt(we,"shops",s,"walkins",R[K].id),{position:K+1})}catch(R){console.error("Error marking no-show:",R)}},k=async D=>{const R=H.findIndex(Ne=>Ne.id===D);if(R<=0)return;const K=H[R-1],he=H[R];try{await nt(tt(we,"shops",s,"walkins",he.id),{position:K.position}),await nt(tt(we,"shops",s,"walkins",K.id),{position:he.position})}catch(Ne){console.error("Error reordering:",Ne)}},z=async D=>{const R=H.findIndex(Ne=>Ne.id===D);if(R<0||R>=H.length-1)return;const K=H[R+1],he=H[R];try{await nt(tt(we,"shops",s,"walkins",he.id),{position:K.position}),await nt(tt(we,"shops",s,"walkins",K.id),{position:he.position})}catch(Ne){console.error("Error reordering:",Ne)}};return o.jsxs("div",{className:"animate-fade-in",children:[o.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[{label:"Currently Waiting",value:pe.waiting,icon:vn,color:"bg-blue-100 text-blue-600"},{label:"Avg Wait",value:pe.avgWait>0?`${pe.avgWait}m`:"",icon:oE,color:"bg-amber-100 text-amber-600"},{label:"Completed Today",value:pe.completedToday,icon:h0,color:"bg-emerald-100 text-emerald-600"}].map(D=>{const R=D.icon;return o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("div",{className:`w-10 h-10 ${D.color} rounded-xl flex items-center justify-center`,children:o.jsx(R,{className:"w-5 h-5"})})}),o.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:D.value}),o.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:D.label})]},D.label)})}),Q.length>0&&o.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Ah,{className:"w-4 h-4 text-amber-600"}),o.jsx("span",{className:"text-sm font-bold text-amber-800",children:"Upcoming Online Bookings"})]}),o.jsx("div",{className:"space-y-1",children:Q.slice(0,5).map(D=>{const[R,K]=(D.time||"").split(":"),he=parseInt(R),Ne=`${he%12||12}:${K} ${he>=12?"PM":"AM"}`;return o.jsxs("div",{className:"text-xs text-amber-700 flex items-center gap-2",children:[o.jsx(jn,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:Ne}),o.jsx("span",{children:""}),o.jsx("span",{children:D.clientName}),D.serviceName&&o.jsxs("span",{className:"text-amber-500",children:["(",D.serviceName,")"]}),D.staffName&&o.jsxs("span",{className:"text-violet-600",children:["with ",D.staffName]})]},D.id)})})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Walk-in Queue"}),!h&&o.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 transition-all hover:-translate-y-0.5",children:[o.jsx(lr,{className:"w-4 h-4"}),"Add Walk-in"]})]}),h&&o.jsxs("form",{onSubmit:I,className:"mb-5 p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"New Walk-in"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Client Name"}),o.jsx("input",{type:"text",value:T.clientName,onChange:D=>C(R=>({...R,clientName:D.target.value})),placeholder:`Walk-in #${A+1}`,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Service"}),o.jsxs("select",{value:T.serviceId,onChange:D=>le(D.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[o.jsx("option",{value:"",children:"No service selected"}),e.map(D=>o.jsxs("option",{value:D.id,children:[D.name," (",D.duration,"min)"]},D.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Staff Preference"}),o.jsxs("select",{value:T.staffId,onChange:D=>C(R=>({...R,staffId:D.target.value})),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[o.jsx("option",{value:"",children:"Next available"}),n.map(D=>o.jsx("option",{value:D.id,children:D.name},D.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Est. Duration (min)"}),o.jsx("select",{value:T.estimatedDuration,onChange:D=>C(R=>({...R,estimatedDuration:parseInt(D.target.value)})),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[15,30,45,60,90,120].map(D=>o.jsx("option",{value:D,children:D<60?`${D} min`:`${D/60}h${D%60?` ${D%60}m`:""}`},D))})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{type:"submit",disabled:b,className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 transition-all disabled:opacity-50",children:[o.jsx(lr,{className:"w-4 h-4"}),b?"Adding":"Add to Queue"]}),o.jsx("button",{type:"button",onClick:()=>{p(!1),C({clientName:"",serviceId:"",staffId:"",estimatedDuration:30})},className:"px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Cancel"})]})]}),H.length===0&&U.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:o.jsx(vn,{className:"w-6 h-6 text-slate-400"})}),o.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No walk-ins in queue"}),o.jsx("p",{className:"text-xs text-slate-400",children:"Add a walk-in client to start the queue."})]}):o.jsxs(o.Fragment,{children:[H.length>0&&o.jsxs("div",{className:"mb-5",children:[o.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[o.jsx(jn,{className:"w-4 h-4 text-blue-500"}),"Waiting",o.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:H.length})]}),o.jsx("div",{className:"space-y-2",children:H.map((D,R)=>{const K=ge.get(D.id);return o.jsxs("div",{className:"group flex items-center gap-3 border border-slate-200 rounded-xl p-3.5 hover:border-slate-300 hover:shadow-sm transition-all",children:[o.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[o.jsx("button",{onClick:()=>k(D.id),disabled:R===0,className:"p-0.5 text-slate-400 hover:text-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:o.jsx(B6,{className:"w-4 h-4"})}),o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center font-bold text-blue-700 text-sm",children:R+1}),o.jsx("button",{onClick:()=>z(D.id),disabled:R===H.length-1,className:"p-0.5 text-slate-400 hover:text-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:o.jsx(V6,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[o.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:D.clientName}),o.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 border border-blue-200 text-[10px] font-bold rounded-md",children:"WAITING"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-slate-500",children:[D.serviceName&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(_s,{className:"w-3 h-3 text-blue-400"}),D.serviceName]}),D.staffName&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(nu,{className:"w-3 h-3 text-violet-400"}),D.staffName]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(jn,{className:"w-3 h-3"}),D.estimatedDuration||30,"min"]})]})]}),o.jsxs("div",{className:"text-right mr-2",children:[o.jsx("div",{className:"text-sm font-bold text-amber-600",children:l3(K)}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"est. wait"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("button",{onClick:()=>P(D.id),className:"flex items-center gap-1 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 text-emerald-700 border border-emerald-200 rounded-lg text-xs font-semibold transition-all",title:"Start Service",children:[o.jsx(bp,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:"Start"})]}),o.jsxs("button",{onClick:()=>q(D.id),className:"flex items-center gap-1 px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 rounded-lg text-xs font-semibold transition-all",title:"No-show",children:[o.jsx(ba,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:"No-show"})]})]})]},D.id)})})]}),U.length>0&&o.jsxs("div",{className:"mb-5",children:[o.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[o.jsx(bp,{className:"w-4 h-4 text-emerald-500"}),"In Progress",o.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 text-xs font-bold rounded-full",children:U.length})]}),o.jsx("div",{className:"space-y-2",children:U.map(D=>o.jsxs("div",{className:"flex items-center gap-3 border border-emerald-200 bg-emerald-50/50 rounded-xl p-3.5 transition-all",children:[o.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center",children:o.jsx(bp,{className:"w-4 h-4 text-emerald-600"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[o.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:D.clientName}),o.jsx("span",{className:"px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 text-[10px] font-bold rounded-md",children:"IN PROGRESS"})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-slate-500",children:[D.serviceName&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(_s,{className:"w-3 h-3 text-blue-400"}),D.serviceName]}),D.staffName&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(nu,{className:"w-3 h-3 text-violet-400"}),D.staffName]})]})]}),o.jsxs("div",{className:"text-right mr-2",children:[o.jsx("div",{className:"text-sm font-bold text-emerald-600",children:r3(D.startedAt)}),o.jsx("div",{className:"text-[10px] text-slate-400",children:"elapsed"})]}),o.jsxs("button",{onClick:()=>M(D.id),className:"flex items-center gap-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded-lg text-xs font-semibold transition-all",title:"Complete",children:[o.jsx(ys,{className:"w-3.5 h-3.5"}),o.jsx("span",{className:"hidden sm:inline",children:"Complete"})]})]},D.id))})]})]})]}),B.length>0&&o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsxs("button",{onClick:()=>x(!g),className:"w-full flex items-center justify-between",children:[o.jsxs("h3",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[o.jsx(ys,{className:"w-4 h-4 text-slate-400"}),"Completed Today",o.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 border border-slate-200 text-xs font-bold rounded-full",children:B.length})]}),o.jsx(d0,{className:`w-4 h-4 text-slate-400 transition-transform ${g?"rotate-90":""}`})]}),g&&o.jsx("div",{className:"mt-3 space-y-2",children:B.map(D=>o.jsxs("div",{className:"flex items-center gap-3 border border-slate-100 rounded-lg p-3 bg-slate-50/50",children:[o.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center bg-slate-100",children:D.status==="no-show"?o.jsx(ba,{className:"w-3.5 h-3.5 text-red-400"}):o.jsx(ys,{className:"w-3.5 h-3.5 text-emerald-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-slate-700 text-sm truncate",children:D.clientName}),o.jsx("span",{className:`text-[10px] font-bold rounded-md px-1.5 py-0.5 border ${D.status==="no-show"?"bg-red-50 text-red-600 border-red-200":"bg-emerald-50 text-emerald-600 border-emerald-200"}`,children:D.status==="no-show"?"NO-SHOW":"COMPLETED"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[D.serviceName&&o.jsx("span",{children:D.serviceName}),D.staffName&&o.jsxs("span",{children:[" ",D.staffName]})]})]})]},D.id))})]})]})}const c3=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function wp(s){const[e,n]=s.split(":").map(Number);return e*60+n}function u3(s,e){if(s.status!=="waiting"||s.serviceId&&e.serviceId&&s.serviceId!==e.serviceId||s.staffId&&s.staffId!=="any"&&e.staffId&&s.staffId!==e.staffId)return!1;if(e.date){if(s.preferredDate&&s.preferredDate!==e.date)return!1;if(s.preferredDays&&s.preferredDays.length>0){const n=new Date(e.date+"T12:00:00"),i=c3[n.getDay()];if(!s.preferredDays.includes(i))return!1}}if(e.time&&s.preferredTimeRange){const n=wp(e.time),i=wp(s.preferredTimeRange.start),l=wp(s.preferredTimeRange.end);if(!(s.preferredTimeRange.start==="00:00"&&s.preferredTimeRange.end==="23:59")&&(n<i||n>l))return!1}return!0}function d3(s,e){return s.filter(n=>u3(n,e)).sort((n,i)=>(n.createdAt||"").localeCompare(i.createdAt||""))}const H_=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}];function qr(s){if(!s)return"";const[e,n]=s.split(":").map(Number),i=e>=12?"PM":"AM",l=e%12||12;return n===0?`${l}${i}`:`${l}:${n.toString().padStart(2,"0")}${i}`}function h3({user:s}){const{slug:e}=vo(),n=bo(),[i,l]=E.useState(null),[u,h]=E.useState(null),[p,g]=E.useState(!0),[x,b]=E.useState(!1),[w,T]=E.useState([]),[C,H]=E.useState([]),[U,V]=E.useState([]),[B,G]=E.useState([]),[Q,ge]=E.useState("schedule"),[pe,le]=E.useState(null),[j,A]=E.useState("all"),[I,P]=E.useState("all"),[M,q]=E.useState([]),[k,z]=E.useState(null),[D,R]=E.useState(null),[K,he]=E.useState({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""});E.useEffect(()=>{if(!s){n(`/shop/${e}/login`,{replace:!0});return}(async()=>{g(!0);try{const ue=bs(Je(we,"shops"),ss("slug","==",e)),Ee=await vs(ue);if(Ee.empty){b(!0),g(!1);return}const ee=Ee.docs[0],xe=ee.data();if(xe.ownerUid!==s.uid){b(!0),g(!1);return}l(xe),h(ee.id)}catch(ue){console.error("Error checking ownership:",ue),b(!0)}finally{g(!1)}})()},[s,e,n]),E.useEffect(()=>{if(!u)return;const $=pn(Je(we,"shops",u,"availability"),je=>{const ke=je.docs.map(Be=>({id:Be.id,...Be.data()}));T(ke)}),ue=pn(Je(we,"shops",u,"bookings"),je=>{const ke=je.docs.map(Be=>({id:Be.id,...Be.data()}));H(ke)}),Ee=pn(Je(we,"shops",u,"staff"),je=>{const ke=je.docs.map(Be=>({id:Be.id,...Be.data()})).filter(Be=>Be.active!==!1).sort((Be,Re)=>(Be.name||"").localeCompare(Re.name||""));V(ke)}),ee=pn(Je(we,"shops",u,"waitlist"),je=>{const ke=je.docs.map(Be=>({id:Be.id,...Be.data()})).sort((Be,Re)=>(Be.createdAt||"").localeCompare(Re.createdAt||""));q(ke)}),xe=pn(Je(we,"shops",u,"services"),je=>{const ke=je.docs.map(Be=>({id:Be.id,...Be.data()})).filter(Be=>Be.active!==!1).sort((Be,Re)=>(Be.name||"").localeCompare(Re.name||""));G(ke)});return()=>{$(),ue(),Ee(),ee(),xe()}},[u]);const Ne=async()=>{await gR(nl),n(`/shop/${e}`,{replace:!0})},ve=async $=>{$.preventDefault();const{date:ue,startTime:Ee,endTime:ee,slotDuration:xe,staffId:je}=K,ke=parseInt(xe),[Be,Re]=Ee.split(":").map(Number),[Oe,gt]=ee.split(":").map(Number),Lt=Be*60+Re,bt=Oe*60+gt;let an=Lt;for(;an+ke<=bt;){const Pn=Math.floor(an/60),Fn=an%60,mr=`${Pn.toString().padStart(2,"0")}:${Fn.toString().padStart(2,"0")}`,rn={date:ue,time:mr,duration:ke,available:!0};if(je){const Hn=U.find(wn=>wn.id===je);rn.staffId=je,rn.staffName=Hn?.name||""}await li(Je(we,"shops",u,"availability"),rn),an+=ke}he({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""})},O=async $=>{await WI(tt(we,"shops",u,"availability",$))},ne=$=>{const ue={date:$.date,time:$.time,staffId:$.staffId||null,serviceId:$.serviceId||null},Ee=d3(M,ue);Ee.length>0&&z({matches:Ee,slot:ue})},re=async($,ue)=>{for(const Ee of $)await nt(tt(we,"shops",u,"waitlist",Ee.id),{status:"notified",notifiedAt:new Date().toISOString(),notifiedSlot:{date:ue.date,time:ue.time,staffId:ue.staffId||null,staffName:ue.staffName||null}});z(null)},be=async $=>{await nt(tt(we,"shops",u,"waitlist",$),{status:"notified",notifiedAt:new Date().toISOString()})},ye=async $=>{await nt(tt(we,"shops",u,"waitlist",$),{status:"expired"})},Ie=async $=>{const ue=C.find(Ee=>Ee.id===$);if(ue&&ue.recurringGroupId){R({bookingId:$,recurringGroupId:ue.recurringGroupId});return}if(await nt(tt(we,"shops",u,"bookings",$),{status:"cancelled"}),ue&&ue.slotId&&!ue.slotId.startsWith("wh-")&&!ue.slotId.startsWith("recurring-"))try{await nt(tt(we,"shops",u,"availability",ue.slotId),{available:!0})}catch(Ee){console.warn("Could not re-open slot:",Ee)}ue&&ne(ue)},oe=async $=>{const ue=C.find(Ee=>Ee.id===$);if(await nt(tt(we,"shops",u,"bookings",$),{status:"cancelled"}),ue&&ue.slotId&&!ue.slotId.startsWith("wh-")&&!ue.slotId.startsWith("recurring-"))try{await nt(tt(we,"shops",u,"availability",ue.slotId),{available:!0})}catch(Ee){console.warn("Could not re-open slot:",Ee)}ue&&ne(ue),R(null)},Ue=async($,ue)=>{const Ee=C.find(xe=>xe.id===$);if(!Ee)return;const ee=C.filter(xe=>xe.recurringGroupId===ue&&xe.date>=Ee.date&&(xe.status==="pending"||xe.status==="confirmed"));for(const xe of ee)if(await nt(tt(we,"shops",u,"bookings",xe.id),{status:"cancelled"}),xe.slotId&&!xe.slotId.startsWith("wh-")&&!xe.slotId.startsWith("recurring-"))try{await nt(tt(we,"shops",u,"availability",xe.slotId),{available:!0})}catch(je){console.warn("Could not re-open slot:",je)}Ee&&ne(Ee),R(null)},Me=async $=>{await nt(tt(we,"shops",u,"bookings",$),{status:"confirmed"})},$e=async $=>{const ue=C.find(Ee=>Ee.id===$);if(await nt(tt(we,"shops",u,"bookings",$),{status:"rejected"}),ue&&ue.slotId&&!ue.slotId.startsWith("wh-"))try{await nt(tt(we,"shops",u,"availability",ue.slotId),{available:!0})}catch(Ee){console.warn("Could not re-open slot:",Ee)}ue&&ne(ue)},st=async()=>{const $=!i?.requireApproval;try{await nt(tt(we,"shops",u),{requireApproval:$}),l(ue=>({...ue,requireApproval:$}))}catch(ue){console.error("Error updating requireApproval:",ue)}},$t=async $=>{const ue=parseInt($);try{await nt(tt(we,"shops",u),{bufferMinutes:ue}),l(Ee=>({...Ee,bufferMinutes:ue}))}catch(Ee){console.error("Error updating buffer minutes:",Ee)}},nn=($,ue)=>new Date(`${$}T${ue}`).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),Et=E.useMemo(()=>{const $={},ue=j==="all"?U:U.filter(ee=>ee.id===j),Ee=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(const ee of ue)ee.weeklyHours&&Ee.forEach((xe,je)=>{ee.weeklyHours[xe]?.enabled&&($[je]=!0)});return $},[U,j]),Ot=E.useMemo(()=>(j==="all"?U:U.filter(ue=>ue.id===j)).filter(ue=>ue.weeklyHours?H_.some(Ee=>ue.weeklyHours[Ee.key]?.enabled):!1),[U,j]),sn=E.useMemo(()=>{const $=new Date,ue=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}-${String($.getDate()).padStart(2,"0")}`,Ee=$.getDay(),ee=Ee===0?-6:1-Ee,xe=new Date($);xe.setDate($.getDate()+ee),xe.setHours(0,0,0,0);const je=new Date(xe);je.setDate(xe.getDate()+6),je.setHours(23,59,59,999);const ke=`${xe.getFullYear()}-${String(xe.getMonth()+1).padStart(2,"0")}-${String(xe.getDate()).padStart(2,"0")}`,Be=`${je.getFullYear()}-${String(je.getMonth()+1).padStart(2,"0")}-${String(je.getDate()).padStart(2,"0")}`,Re=C.filter(Lt=>Lt.date===ue).length,Oe=C.filter(Lt=>Lt.date>=ke&&Lt.date<=Be).length,gt=new Set(C.map(Lt=>Lt.clientEmail?.toLowerCase()).filter(Boolean)).size;return{todayBookings:Re,weekBookings:Oe,uniqueClients:gt,totalBookings:C.length}},[C]),as=E.useMemo(()=>C.filter($=>$.status==="pending").length,[C]),Vn=E.useMemo(()=>M.filter($=>$.status==="waiting").length,[M]),[At,Te]=E.useState(0);if(E.useEffect(()=>{if(!u)return;const $=pn(Je(we,"shops",u,"walkins"),ue=>{const Ee=ue.docs.filter(ee=>ee.data().status==="waiting").length;Te(Ee)});return()=>$()},[u]),p)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading dashboard"})]})});if(x)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(aE,{className:"w-8 h-8 text-red-500"})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Unauthorized"}),o.jsx("p",{className:"text-slate-600 mb-6",children:"You don't have access to this dashboard."}),o.jsx(Qe,{to:`/shop/${e}/login`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:"Login"})]})});const Ve=j==="all"?w:w.filter($=>$.staffId===j),Ze=j==="all"?C:C.filter($=>$.staffId===j),Rt=Ve.reduce(($,ue)=>($[ue.date]||($[ue.date]=[]),$[ue.date].push(ue),$),{}),ft=Ze.reduce(($,ue)=>($[ue.date]||($[ue.date]=[]),$[ue.date].push(ue),$),{}),rt=pe?Object.keys(Rt).filter($=>$===pe).sort():Object.keys(Rt).sort(),Gt=pe?Ze.filter($=>$.date===pe):Ze,mt=I==="all"?Gt:I==="pending"?Gt.filter($=>$.status==="pending"):I==="confirmed"?Gt.filter($=>!$.status||$.status==="confirmed"):Gt.filter($=>$.status==="cancelled"||$.status==="rejected"),is={all:Gt.length,pending:Gt.filter($=>$.status==="pending").length,confirmed:Gt.filter($=>!$.status||$.status==="confirmed").length,cancelled:Gt.filter($=>$.status==="cancelled"||$.status==="rejected").length},Ns=[{key:"schedule",label:"Schedule",icon:Vt},{key:"walkins",label:"Walk-ins",icon:CD},{key:"analytics",label:"Analytics",icon:D6},{key:"waitlist",label:"Waitlist",icon:Zp},{key:"staff",label:"Staff",icon:vn},{key:"services",label:"Services",icon:_s},{key:"settings",label:"Settings",icon:vD}];return o.jsxs("div",{className:"min-h-screen bg-slate-50",children:[o.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(i.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{className:"hidden sm:block",children:[o.jsx("h1",{className:"text-base font-bold text-slate-900 leading-tight",children:i.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Dashboard"})]})]}),o.jsx("div",{className:"flex items-center bg-slate-100 p-1 rounded-xl",children:Ns.map($=>{const ue=$.icon;return o.jsxs("button",{onClick:()=>ge($.key),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${Q===$.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[o.jsx(ue,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:$.label}),$.key==="schedule"&&as>0&&o.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-amber-500 text-white text-[10px] font-bold rounded-full leading-none",children:as}),$.key==="walkins"&&At>0&&o.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-emerald-500 text-white text-[10px] font-bold rounded-full leading-none",children:At}),$.key==="waitlist"&&Vn>0&&o.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-500 text-white text-[10px] font-bold rounded-full leading-none",children:Vn})]},$.key)})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(Qe,{to:`/shop/${e}`,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[o.jsx(Q6,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"View Page"})]}),o.jsxs("button",{onClick:Ne,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all",children:[o.jsx(iD,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[Q==="schedule"&&o.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 animate-fade-in",children:[{label:"Today's Bookings",value:sn.todayBookings,icon:D_,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:sn.weekBookings,icon:h0,color:"bg-violet-100 text-violet-600"},{label:"Total Bookings",value:sn.totalBookings,icon:nE,color:"bg-emerald-100 text-emerald-600"},{label:"Unique Clients",value:sn.uniqueClients,icon:vn,color:"bg-amber-100 text-amber-600"}].map($=>{const ue=$.icon;return o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("div",{className:`w-10 h-10 ${$.color} rounded-xl flex items-center justify-center`,children:o.jsx(ue,{className:"w-5 h-5"})})}),o.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:$.value}),o.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:$.label})]},$.label)})}),Q==="walkins"&&o.jsx(o3,{shopId:u,services:B,staff:U,bookings:C}),Q==="analytics"&&o.jsx(a3,{bookings:C}),Q==="staff"&&o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:o.jsx(n3,{shopId:u})}),Q==="services"&&o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:o.jsx(WD,{shopId:u})}),k&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:o.jsx(to,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Waitlist Match!"}),o.jsxs("p",{className:"text-sm text-slate-500",children:[k.matches.length," client",k.matches.length!==1?"s":""," on the waitlist match this freed slot"]})]})]}),o.jsx("div",{className:"bg-slate-50 rounded-xl p-3 mb-4 text-sm",children:o.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[o.jsx(Vt,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"font-medium",children:[new Date(k.slot.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," at ",(()=>{const[$,ue]=k.slot.time.split(":"),Ee=parseInt($);return`${Ee%12||12}:${ue} ${Ee>=12?"PM":"AM"}`})()]})]})}),o.jsx("div",{className:"space-y-2 mb-5 max-h-48 overflow-y-auto",children:k.matches.map($=>o.jsx("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border border-blue-100 rounded-lg",children:o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:$.clientName}),o.jsx("span",{className:"text-xs text-slate-500 ml-2",children:$.serviceName})]})},$.id))}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>re(k.matches,k.slot),className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:[o.jsx(to,{className:"w-4 h-4"}),"Notify All"]}),o.jsx("button",{onClick:()=>z(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Dismiss"})]})]})}),D&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:o.jsx(Zi,{className:"w-5 h-5 text-red-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Cancel Recurring Booking"}),o.jsx("p",{className:"text-sm text-slate-500",children:"This booking is part of a recurring series"})]})]}),o.jsxs("div",{className:"space-y-2 mb-5",children:[o.jsxs("button",{onClick:()=>oe(D.bookingId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[o.jsx(ba,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this one only"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments stay active"})]})]}),o.jsxs("button",{onClick:()=>Ue(D.bookingId,D.recurringGroupId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[o.jsx(Zi,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future in series"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments"})]})]})]}),o.jsx("button",{onClick:()=>R(null),className:"w-full px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Never mind"})]})}),Q==="waitlist"&&o.jsx("div",{className:"animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Waitlist"}),Vn>0&&o.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:[Vn," waiting"]})]}),o.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[M.length," total"]})]}),M.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:o.jsx(Zp,{className:"w-6 h-6 text-slate-400"})}),o.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No waitlist entries yet"}),o.jsx("p",{className:"text-xs text-slate-400",children:"Clients can join the waitlist when no slots are available on your booking page."})]}):o.jsx("div",{children:(()=>{const $={};return M.forEach(ue=>{const Ee=ue.serviceName||"Other";$[Ee]||($[Ee]=[]),$[Ee].push(ue)}),Object.entries($).sort(([ue],[Ee])=>ue.localeCompare(Ee)).map(([ue,Ee])=>o.jsxs("div",{className:"mb-6 last:mb-0",children:[o.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100 flex items-center gap-2",children:[o.jsx(_s,{className:"w-3.5 h-3.5 text-blue-500"}),ue,o.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",Ee.filter(ee=>ee.status==="waiting").length," waiting)"]})]}),o.jsx("div",{className:"space-y-2.5",children:Ee.sort((ee,xe)=>(ee.createdAt||"").localeCompare(xe.createdAt||"")).map(ee=>{const xe={waiting:"bg-blue-50 text-blue-700 border-blue-200",notified:"bg-emerald-50 text-emerald-700 border-emerald-200",booked:"bg-emerald-50 text-emerald-700 border-emerald-200",expired:"bg-slate-100 text-slate-500 border-slate-200"},je={waiting:"Waiting",notified:"Notified",booked:"Booked",expired:"Removed"},ke=ee.createdAt?(()=>{const Re=Date.now()-new Date(ee.createdAt).getTime(),Oe=Math.floor(Re/864e5),gt=Math.floor(Re/36e5);return Oe>0?`${Oe}d`:`${gt}h`})():"",Be={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return o.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(nu,{className:"w-4 h-4 text-blue-600"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:ee.clientName}),o.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${xe[ee.status]||xe.waiting}`,children:je[ee.status]||"Waiting"})]}),o.jsxs("div",{className:"text-xs text-slate-500",children:["Joined ",ke," ago",ee.refCode&&o.jsx("span",{className:"font-mono text-slate-400 ml-2",children:ee.refCode})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[ee.status==="waiting"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>be(ee.id),className:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all",title:"Notify client",children:o.jsx(to,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>ye(ee.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove from waitlist",children:o.jsx(go,{className:"w-4 h-4"})})]}),ee.status==="notified"&&o.jsx("button",{onClick:()=>ye(ee.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove",children:o.jsx(go,{className:"w-3.5 h-3.5"})})]})]}),o.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[ee.staffName&&ee.staffName!=="Any Available"&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(vn,{className:"w-3 h-3 text-violet-400"}),o.jsx("span",{className:"text-violet-600",children:ee.staffName})]}),ee.preferredDate&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Vt,{className:"w-3 h-3 text-slate-400"}),o.jsxs("span",{children:["Preferred: ",new Date(ee.preferredDate+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]}),ee.preferredDays&&ee.preferredDays.length>0&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Vt,{className:"w-3 h-3 text-slate-400"}),o.jsxs("span",{children:["Days: ",ee.preferredDays.map(Re=>Be[Re]||Re).join(", ")]})]}),ee.preferredTimeRange&&!(ee.preferredTimeRange.start==="00:00"&&ee.preferredTimeRange.end==="23:59")&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(jn,{className:"w-3 h-3 text-slate-400"}),o.jsxs("span",{children:["Time: ",qr(ee.preferredTimeRange.start),"",qr(ee.preferredTimeRange.end)]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(M_,{className:"w-3 h-3"}),ee.clientEmail]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(O_,{className:"w-3 h-3"}),ee.clientPhone]})]}),ee.status==="notified"&&ee.notifiedSlot&&o.jsxs("div",{className:"mt-1.5 px-2.5 py-1.5 bg-emerald-50 border border-emerald-200 rounded-lg inline-flex items-center gap-1.5",children:[o.jsx(to,{className:"w-3 h-3 text-emerald-500"}),o.jsxs("span",{className:"text-emerald-700 font-medium",children:["Notified about ",new Date(ee.notifiedSlot.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ",qr(ee.notifiedSlot.time)]})]})]})]},ee.id)})})]},ue))})()})]})}),Q==="settings"&&o.jsx("div",{className:"max-w-2xl animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Shop Settings"}),o.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure your booking preferences"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[o.jsxs("div",{className:"pr-4",children:[o.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Require Booking Approval"}),o.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Review and approve bookings before they're confirmed"})]}),o.jsx("button",{type:"button",onClick:st,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${i?.requireApproval?"bg-blue-500":"bg-slate-300"}`,children:o.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${i?.requireApproval?"translate-x-6":"translate-x-1"}`})})]}),i?.requireApproval&&o.jsxs("div",{className:"p-3.5 bg-amber-50 border border-amber-200 rounded-xl text-xs text-amber-800 leading-relaxed",children:[o.jsx("strong",{children:" Approval mode is on."}),' New bookings will appear as "Pending" until you approve or reject them. Time slots are held while pending to prevent double-booking.']}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[o.jsxs("div",{className:"pr-4",children:[o.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Buffer Time Between Bookings"}),o.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Add a gap between consecutive appointments"})]}),o.jsxs("select",{value:i?.bufferMinutes||0,onChange:$=>$t($.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[o.jsx("option",{value:"0",children:"No buffer"}),o.jsx("option",{value:"5",children:"5 minutes"}),o.jsx("option",{value:"10",children:"10 minutes"}),o.jsx("option",{value:"15",children:"15 minutes"}),o.jsx("option",{value:"30",children:"30 minutes"})]})]})]})]})}),Q==="schedule"&&o.jsxs("div",{className:"animate-fade-in",children:[U.length>0&&o.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5",children:"Filter by Staff"}),o.jsxs("select",{value:j,onChange:$=>A($.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[o.jsx("option",{value:"all",children:"All Staff"}),U.map($=>o.jsxs("option",{value:$.id,children:[$.name,$.role?`  ${$.role}`:""]},$.id))]})]})}),Ot.length>0&&o.jsxs("div",{className:"mb-6 bg-violet-50 border border-violet-200 rounded-xl p-5",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(lE,{className:"w-4 h-4 text-violet-600"}),o.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Recurring Weekly Hours"})]}),o.jsx("div",{className:"space-y-2.5",children:Ot.map($=>{const ue=H_.filter(Ee=>$.weeklyHours[Ee.key]?.enabled);return o.jsxs("div",{className:"flex items-start gap-2.5",children:[o.jsx("div",{className:"w-7 h-7 bg-violet-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:o.jsx(vn,{className:"w-3.5 h-3.5 text-violet-600"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:$.name}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ue.map(Ee=>{const ee=$.weeklyHours[Ee.key];return o.jsxs("span",{className:"inline-block px-2 py-0.5 bg-white text-violet-700 border border-violet-200 rounded text-xs font-medium",children:[Ee.short," ",qr(ee.start),"",qr(ee.end),ee.break&&o.jsxs("span",{className:"text-amber-600 ml-1",children:["(break ",qr(ee.break.start),"",qr(ee.break.end),")"]})]},Ee.key)})})]})]},$.id)})}),o.jsx("p",{className:"text-xs text-violet-500 mt-3",children:"Slots auto-generate on the booking page. Manage hours in the Staff tab."})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Monthly Overview"}),o.jsx(KD,{slotsByDate:Rt,bookingsByDate:ft,selectedDate:pe,onSelectDate:le,recurringDayFlags:Et}),pe&&o.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[o.jsxs("span",{className:"text-sm text-slate-600",children:["Showing: ",o.jsx("strong",{className:"text-slate-900",children:new Date(pe+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),o.jsx("button",{onClick:()=>le(null),className:"text-xs px-3 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-all border border-slate-200",children:"Show All"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:Ot.length>0?"Add Custom Slots":"Create Time Slots"}),Ot.length>0&&o.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Use this for one-off availability outside regular hours."}),!Ot.length&&o.jsx("div",{className:"mb-4"}),o.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[U.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Staff Member"}),o.jsxs("select",{value:K.staffId,onChange:$=>he({...K,staffId:$.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[o.jsx("option",{value:"",children:"Select a staff member"}),U.map($=>o.jsxs("option",{value:$.id,children:[$.name,$.role?`  ${$.role}`:""]},$.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Date"}),o.jsx("input",{type:"date",value:K.date,onChange:$=>he({...K,date:$.target.value}),required:!0,min:new Date().toISOString().split("T")[0],className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Start"}),o.jsx("input",{type:"time",value:K.startTime,onChange:$=>he({...K,startTime:$.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"End"}),o.jsx("input",{type:"time",value:K.endTime,onChange:$=>he({...K,endTime:$.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Slot Duration"}),o.jsxs("select",{value:K.slotDuration,onChange:$=>he({...K,slotDuration:$.target.value}),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[o.jsx("option",{value:"15",children:"15 minutes"}),o.jsx("option",{value:"30",children:"30 minutes"}),o.jsx("option",{value:"45",children:"45 minutes"}),o.jsx("option",{value:"60",children:"1 hour"}),o.jsx("option",{value:"90",children:"1.5 hours"}),o.jsx("option",{value:"120",children:"2 hours"})]})]}),o.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[o.jsx(lr,{className:"w-4 h-4"}),"Generate Slots"]})]}),o.jsxs("div",{className:"mt-4 p-3.5 bg-blue-50 border border-blue-100 rounded-xl text-xs text-slate-600 leading-relaxed",children:[o.jsx("strong",{className:"text-slate-700",children:" Tip:"})," ",Ot.length>0?"Weekly hours auto-generate slots. Use this for one-off slots outside regular hours.":U.length>0?"Select a staff member, pick a date, and set working hours to create slots.":"Set your hours and slot duration. We'll create all the time slots for that day."]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900",children:pe?"Bookings":"All Bookings"}),is.pending>0&&o.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 border border-amber-200 text-xs font-bold rounded-full",children:[is.pending," pending"]})]}),o.jsx("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:mt.length})]}),o.jsx("div",{className:"flex items-center gap-1 mb-4 p-1 bg-slate-100 rounded-lg overflow-x-auto",children:[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"confirmed",label:"Confirmed"},{key:"cancelled",label:"Cancelled"}].map($=>o.jsxs("button",{onClick:()=>P($.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-semibold transition-all whitespace-nowrap ${I===$.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[$.label,o.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${I===$.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:is[$.key]})]},$.key))}),mt.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:o.jsx(D_,{className:"w-6 h-6 text-slate-400"})}),o.jsx("p",{className:"text-sm text-slate-500 font-medium",children:I!=="all"?`No ${I} bookings`:pe?"No bookings for this date":"No bookings yet"})]}):o.jsx("div",{className:"space-y-2.5 max-h-[500px] overflow-y-auto pr-1",children:mt.sort(($,ue)=>`${$.date}${$.time}`.localeCompare(`${ue.date}${ue.time}`)).map($=>{const ue=$.status||"confirmed",Ee={pending:"bg-amber-50 text-amber-700 border-amber-200",confirmed:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200",cancelled:"bg-slate-100 text-slate-500 border-slate-200"},ee={pending:"Pending",confirmed:"Confirmed",rejected:"Rejected",cancelled:"Cancelled"};return o.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(nu,{className:"w-4 h-4 text-blue-600"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:$.clientName}),o.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${Ee[ue]}`,children:ee[ue]}),$.recurring&&o.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",title:"Recurring appointment",children:o.jsx(Zi,{className:"w-2.5 h-2.5"})})]}),o.jsx("div",{className:"text-xs text-slate-500",children:nn($.date,$.time)})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[ue==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>Me($.id),className:"p-1.5 text-emerald-500 hover:text-emerald-700 hover:bg-emerald-50 rounded-lg transition-all",title:"Approve booking",children:o.jsx(Fc,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>$e($.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Reject booking",children:o.jsx(ba,{className:"w-4 h-4"})})]}),ue==="confirmed"&&o.jsx("button",{onClick:()=>Ie($.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Cancel booking",children:o.jsx(tu,{className:"w-3.5 h-3.5"})})]})]}),o.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[$.serviceName&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(_s,{className:"w-3 h-3 text-blue-400"}),o.jsx("span",{className:"font-medium text-slate-700",children:$.serviceName}),$.servicePrice!=null&&o.jsxs("span",{className:"text-blue-600 font-semibold",children:["$",Number($.servicePrice).toFixed(2)]})]}),$.staffName&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(vn,{className:"w-3 h-3 text-violet-400"}),o.jsx("span",{className:"text-violet-600",children:$.staffName})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(M_,{className:"w-3 h-3"}),$.clientEmail]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(O_,{className:"w-3 h-3"}),$.clientPhone]})]}),o.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[$.refCode&&o.jsxs("span",{className:"font-mono text-[10px] text-slate-400",children:["REF: ",$.refCode]}),$.recurring&&o.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-indigo-50 border border-indigo-200 rounded text-[10px] font-semibold text-indigo-600",children:" Recurring"})]})]})]},$.id)})})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("h2",{className:"text-lg font-bold text-slate-900",children:pe?"Custom Time Slots":"All Custom Time Slots"}),o.jsx("span",{className:"text-xs font-semibold text-slate-500 bg-slate-100 px-2.5 py-1 rounded-lg",children:pe?(Rt[pe]||[]).length:Ve.length})]}),Ot.length>0&&o.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Recurring slots from weekly hours auto-generate  not shown here."}),!Ot.length&&o.jsx("div",{className:"mb-4"}),rt.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:o.jsx(Vt,{className:"w-6 h-6 text-slate-400"})}),o.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:pe?"No custom slots for this date":"No custom slots yet"}),o.jsx("p",{className:"text-xs text-slate-400",children:Ot.length>0?"Recurring hours handle most scheduling.":"Use the form above to generate availability."})]}):o.jsx("div",{className:"space-y-6",children:rt.map($=>o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100",children:new Date($).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2.5",children:Rt[$].sort((ue,Ee)=>ue.time.localeCompare(Ee.time)).map(ue=>o.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3.5 text-center group hover:border-slate-300 transition-all",children:[o.jsx("div",{className:"text-sm font-bold text-slate-900 mb-0.5",children:ue.time}),o.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[ue.duration," min"]}),ue.staffName&&o.jsxs("div",{className:"text-xs text-violet-600 mb-1.5 flex items-center justify-center gap-1",children:[o.jsx(vn,{className:"w-3 h-3"}),ue.staffName]}),o.jsx("div",{className:"mb-2",children:ue.available?o.jsx("span",{className:"inline-block px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-md text-xs font-medium",children:"Available"}):o.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-50 text-red-700 border border-red-200 rounded-md text-xs font-medium",children:"Booked"})}),ue.available&&o.jsxs("button",{onClick:()=>O(ue.id),className:"opacity-0 group-hover:opacity-100 flex items-center justify-center gap-1 w-full px-2 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-xs font-medium transition-all border border-red-200",children:[o.jsx(tu,{className:"w-3 h-3"}),"Remove"]})]},ue.id))})]},$))})]})]})]})]})}function f3({user:s}){const{slug:e}=vo(),n=bo(),[i,l]=E.useState(""),[u,h]=E.useState(""),[p,g]=E.useState(""),[x,b]=E.useState(!1);E.useEffect(()=>{if(!s)return;(async()=>{const C=bs(Je(we,"shops"),ss("slug","==",e)),H=await vs(C);H.empty||H.docs[0].data().ownerUid===s.uid&&n(`/shop/${e}/dashboard`,{replace:!0})})()},[s,e,n]);const w=async T=>{T.preventDefault(),g(""),b(!0);try{const H=(await Ww(nl,i,u)).user,U=bs(Je(we,"shops"),ss("slug","==",e)),V=await vs(U);if(V.empty){g("Shop not found"),b(!1);return}if(V.docs[0].data().ownerUid!==H.uid){g("You are not the owner of this shop"),await nl.signOut(),b(!1);return}n(`/shop/${e}/dashboard`,{replace:!0})}catch(C){switch(C.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":g("Invalid email or password");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/too-many-requests":g("Too many failed attempts. Please try again later.");break;default:g("Login failed. Please try again.")}h("")}finally{b(!1)}};return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsxs(Qe,{to:"/",className:"inline-flex items-center gap-2.5",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:o.jsx(Ca,{className:"w-5 h-5 text-white"})}),o.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),o.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),o.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),o.jsx("input",{type:"email",value:i,onChange:T=>{l(T.target.value),g("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),o.jsx("input",{type:"password",value:u,onChange:T=>{h(T.target.value),g("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&o.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[o.jsx("span",{children:""})," ",p]})]}),o.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):"Sign In"})]}),o.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:o.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",o.jsx(Qe,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(Qe,{to:`/shop/${e}`,className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[o.jsx(Aa,{className:"w-3.5 h-3.5"}),"Back to booking page"]})})]})})}function $_({name:s,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const i=(s||"").split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2);return o.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:i||"?"})}function G_(){return o.jsxs(Qe,{to:"/",className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:o.jsx(Ca,{className:"w-3.5 h-3.5 text-white"})}),o.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function m3(){const{slug:s,refCode:e}=vo(),[n,i]=E.useState(null),[l,u]=E.useState(null),[h,p]=E.useState(!0),[g,x]=E.useState(!1),[b,w]=E.useState(null),[T,C]=E.useState(null),[H,U]=E.useState(!1),[V,B]=E.useState([]),[G,Q]=E.useState([]),[ge,pe]=E.useState([]),[le,j]=E.useState([]),[A,I]=E.useState(!1),[P,M]=E.useState(!1),[q,k]=E.useState(null),[z,D]=E.useState(null),[R,K]=E.useState(null),[he,Ne]=E.useState(!1),[ve,O]=E.useState("");E.useEffect(()=>{(async()=>{p(!0);try{const Ve=bs(Je(we,"shops"),ss("slug","==",s)),Ze=await vs(Ve);if(Ze.empty)x(!0);else{const Rt=Ze.docs[0];i(Rt.data()),u(Rt.id)}}catch(Ve){console.error("Error looking up shop:",Ve),x(!0)}finally{p(!1)}})()},[s]),E.useEffect(()=>{if(!l)return;(async()=>{try{const Ve=bs(Je(we,"shops",l,"bookings"),ss("refCode","==",e.toUpperCase())),Ze=await vs(Ve);if(Ze.empty)U(!0);else{const Rt=Ze.docs[0];w(Rt.data()),C(Rt.id)}}catch(Ve){console.error("Error looking up booking:",Ve),U(!0)}})()},[l,e]),E.useEffect(()=>{if(!l||!b)return;const Te=pn(Je(we,"shops",l,"bookings"),ft=>{B(ft.docs.map(rt=>({id:rt.id,...rt.data()})))}),Ve=pn(Je(we,"shops",l,"availability"),ft=>{const rt=new Date,Gt=ft.docs.map(mt=>({id:mt.id,...mt.data()})).filter(mt=>new Date(`${mt.date}T${mt.time}`)>rt);Q(Gt)}),Ze=pn(Je(we,"shops",l,"staff"),ft=>{pe(ft.docs.map(rt=>({id:rt.id,...rt.data()})).filter(rt=>rt.active!==!1).sort((rt,Gt)=>(rt.name||"").localeCompare(Gt.name||"")))}),Rt=pn(Je(we,"shops",l,"services"),ft=>{j(ft.docs.map(rt=>({id:rt.id,...rt.data()})).filter(rt=>rt.active!==!1))});return()=>{Te(),Ve(),Ze(),Rt()}},[l,b]);const ne=n?.bufferMinutes||0,re=E.useMemo(()=>{if(!b)return null;if(b.serviceId){const Te=le.find(Ve=>Ve.id===b.serviceId);if(Te)return Te}return b.serviceName?{id:b.serviceId,name:b.serviceName,price:b.servicePrice,duration:b.serviceDuration||b.duration}:null},[b,le]),be=E.useMemo(()=>{if(!A||!b)return[];const Te=new Date,Ve=re?.duration||b.duration||60;let Ze=G.filter(mt=>mt.available);Ze=Ze.filter(mt=>mt.duration>=Ve),b.staffId&&(Ze=Ze.filter(mt=>mt.staffId===b.staffId||!mt.staffId));const Rt=b.staffId?ge.filter(mt=>mt.id===b.staffId):ge,ft=uE(Rt,Ve,ne,4).filter(mt=>new Date(`${mt.date}T${mt.time}`)>Te),rt=hE(ft,Ze),Gt=V.filter(mt=>mt.id!==T);return dE(rt,Gt,ne)},[A,b,T,G,ge,V,ne,re]),ye=E.useMemo(()=>[...new Set(be.map(Te=>Te.date))].sort(),[be]),Ie=E.useMemo(()=>z?be.filter(Te=>Te.date===z):[],[z,be]),oe=async(Te="single")=>{Ne(!0);try{if(await nt(tt(we,"shops",l,"bookings",T),{status:"cancelled"}),b.slotId&&!b.slotId.startsWith("wh-")&&!b.slotId.startsWith("recurring-"))try{await nt(tt(we,"shops",l,"availability",b.slotId),{available:!0})}catch(Ve){console.warn("Could not re-open slot:",Ve)}if(Te==="future"&&b.recurringGroupId){const Ve=V.filter(Ze=>Ze.recurringGroupId===b.recurringGroupId&&Ze.id!==T&&Ze.date>=b.date&&(Ze.status==="pending"||Ze.status==="confirmed"));for(const Ze of Ve)if(await nt(tt(we,"shops",l,"bookings",Ze.id),{status:"cancelled"}),Ze.slotId&&!Ze.slotId.startsWith("wh-")&&!Ze.slotId.startsWith("recurring-"))try{await nt(tt(we,"shops",l,"availability",Ze.slotId),{available:!0})}catch(Rt){console.warn("Could not re-open slot:",Rt)}}w(Ve=>({...Ve,status:"cancelled"})),M(!1),k(null),O("cancelled")}catch(Ve){console.error("Cancel error:",Ve),O("error")}finally{Ne(!1)}},Ue=async()=>{if(R){Ne(!0);try{const Te={date:R.date,time:R.time,slotId:R.id};if(R.staffId&&(Te.staffId=R.staffId,Te.staffName=R.staffName||""),n?.requireApproval&&(Te.status="pending"),b.slotId&&!b.slotId.startsWith("wh-"))try{await nt(tt(we,"shops",l,"availability",b.slotId),{available:!0})}catch(Ve){console.warn("Could not re-open old slot:",Ve)}if(!R.generated&&R.id)try{await nt(tt(we,"shops",l,"availability",R.id),{available:!1})}catch(Ve){console.warn("Could not block new slot:",Ve)}await nt(tt(we,"shops",l,"bookings",T),Te),w(Ve=>({...Ve,...Te})),I(!1),D(null),K(null),O("rescheduled")}catch(Te){console.error("Reschedule error:",Te),O("error")}finally{Ne(!1)}}},Me=Te=>new Date(Te+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),$e=Te=>{const[Ve,Ze]=Te.split(":"),Rt=parseInt(Ve),ft=Rt>=12?"PM":"AM";return`${Rt%12||12}:${Ze} ${ft}`},st=Te=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(Te),$t=Te=>{if(!Te)return"";if(Te<60)return`${Te} min`;const Ve=Math.floor(Te/60),Ze=Te%60;return Ze?`${Ve}h ${Ze}m`:`${Ve} hour${Ve>1?"s":""}`};if(h)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),o.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,o.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),o.jsxs(Qe,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Aa,{className:"w-4 h-4"}),"Go Home"]})]})});if(H)return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),o.jsx(G_,{})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Ah,{className:"w-8 h-8 text-amber-500"})}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Not Found"}),o.jsx("p",{className:"text-slate-600 mb-2",children:"No booking found with reference code"}),o.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),o.jsxs(Qe,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Vt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking"})]})});const nn=b.status||"confirmed",Et=nn==="pending"||nn==="confirmed",Ot=nn==="cancelled",sn=nn==="rejected",as={pending:{label:"Pending Approval",color:"bg-amber-100 text-amber-700 border-amber-200",icon:jn},confirmed:{label:"Confirmed",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ys},cancelled:{label:"Cancelled",color:"bg-slate-100 text-slate-500 border-slate-200",icon:ba},rejected:{label:"Rejected",color:"bg-red-100 text-red-700 border-red-200",icon:ba}},Vn=as[nn]||as.confirmed,At=Vn.icon;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),o.jsx(G_,{})]})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[ve==="rescheduled"&&o.jsx("div",{className:"mb-6 animate-scale-in",children:o.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(iE,{className:"w-8 h-8 text-emerald-600"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Rescheduled!"}),o.jsx("p",{className:"text-slate-600 mb-4",children:n?.requireApproval?"Your booking has been rescheduled and is pending approval.":"Your booking has been successfully rescheduled."}),o.jsx("button",{onClick:()=>O(""),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View updated details "})]})}),ve==="cancelled"&&o.jsx("div",{className:"mb-6 animate-scale-in",children:o.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-lg p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(ba,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Cancelled"}),o.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking has been cancelled."}),o.jsxs(Qe,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[o.jsx(Vt,{className:"w-4 h-4"}),"Book a new appointment"]})]})}),ve==="error"&&o.jsx("div",{className:"mb-6 animate-scale-in",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Something went wrong. Please try again."})]})}),!A&&o.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Your Booking"}),o.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference: ",o.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),(Ot||sn)&&o.jsxs("div",{className:`mb-4 p-4 rounded-xl border flex items-center gap-3 ${Ot?"bg-slate-50 border-slate-200":"bg-red-50 border-red-200"}`,children:[o.jsx(At,{className:`w-5 h-5 ${Ot?"text-slate-400":"text-red-500"}`}),o.jsx("span",{className:`font-medium text-sm ${Ot?"text-slate-600":"text-red-700"}`,children:Ot?"This booking has been cancelled.":"This booking has been rejected by the shop."})]}),b.recurringGroupId&&o.jsxs("div",{className:"mb-4 p-3.5 bg-blue-50 border border-blue-200 rounded-xl flex items-center gap-2.5",children:[o.jsx(Zi,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Part of a recurring series"}),b.recurringInterval&&o.jsxs("p",{className:"text-xs text-blue-600 mt-0.5",children:["Repeats every ",b.recurringInterval==="weekly"?"week":b.recurringInterval==="biweekly"?"2 weeks":b.recurringInterval==="fourweekly"?"4 weeks":b.recurringInterval==="monthly"?"month":b.recurringInterval]})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${Vn.color}`,children:[o.jsx(At,{className:"w-3.5 h-3.5"}),Vn.label]})]}),b.serviceName&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(_s,{className:"w-4 h-4 text-blue-600"})}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.servicePrice!=null&&o.jsx("span",{className:"font-bold text-blue-600",children:st(b.servicePrice)})]}),b.staffName&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx($_,{name:b.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),o.jsxs("span",{className:"font-semibold text-slate-800",children:[Me(b.date)," at ",$e(b.time)]})]}),o.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(jn,{className:"w-4 h-4 text-slate-500"})}),o.jsx("span",{children:$t(b.serviceDuration||b.duration)})]})]}),Et&&!ve&&o.jsx("div",{className:"space-y-3",children:P?o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 animate-scale-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:o.jsx(Ah,{className:"w-5 h-5 text-red-500"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-900",children:"Are you sure?"}),o.jsx("p",{className:"text-sm text-slate-600",children:"This action cannot be undone."})]})]}),b.recurringGroupId&&!q&&o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("button",{onClick:()=>k("single"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[o.jsx(ba,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this appointment only"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments in the series remain active"})]})]}),o.jsxs("button",{onClick:()=>k("future"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[o.jsx(Zi,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future appointments"}),o.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments in the series"})]})]}),o.jsx("button",{onClick:()=>M(!1),className:"w-full px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Go Back"})]}),(!b.recurringGroupId||q)&&o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>oe(q||"single"),disabled:he,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[he?o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}):o.jsx(ba,{className:"w-4 h-4"}),he?"Cancelling":q==="future"?"Cancel All Future":"Yes, Cancel"]}),o.jsx("button",{onClick:()=>{q?k(null):M(!1)},disabled:he,className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Go Back"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{onClick:()=>{I(!0),O("")},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[o.jsx(lE,{className:"w-4 h-4"}),"Reschedule Booking"]}),o.jsxs("button",{onClick:()=>{M(!0),k(null)},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-white hover:bg-red-50 text-red-600 rounded-xl font-semibold border border-red-200 hover:border-red-300 transition-all",children:[o.jsx(ba,{className:"w-4 h-4"}),"Cancel Booking"]})]})}),(Ot||sn)&&o.jsx("div",{className:"text-center",children:o.jsxs(Qe,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[o.jsx(Vt,{className:"w-4 h-4"}),"Book Again"]})})]}),A&&o.jsxs("div",{className:"animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[o.jsxs("button",{onClick:()=>{I(!1),D(null),K(null)},className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[o.jsx(Aa,{className:"w-3.5 h-3.5"}),"Back to Booking"]}),b.serviceName&&o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[o.jsx(_s,{className:"w-3.5 h-3.5 text-blue-500"}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName}),b.servicePrice!=null&&o.jsx("span",{className:"text-blue-600 font-bold",children:st(b.servicePrice)})]}),b.staffName&&o.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[o.jsx($_,{name:b.staffName,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a New Time"}),o.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Pick a new date and time for your appointment"})]}),ye.length===0?o.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),o.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"No time slots are currently available. Check back soon!"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"mb-8",children:o.jsx(cE,{availableDates:ye,selectedDate:z,onSelectDate:Te=>{D(Te),K(null)}})}),z&&o.jsxs("div",{className:"animate-slide-down",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",Me(z)]}),o.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[Ie.length," slot",Ie.length!==1?"s":""]})]}),Ie.length===0?o.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:o.jsx("p",{className:"text-slate-500",children:"No slots available for this date"})}):o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:Ie.sort((Te,Ve)=>Te.time.localeCompare(Ve.time)).map(Te=>{const Ve=R?.id===Te.id;return o.jsxs("button",{onClick:()=>K(Te),className:`group border rounded-xl p-4 transition-all duration-200 text-center ${Ve?"bg-blue-600 border-blue-600 text-white shadow-md shadow-blue-600/30":"bg-white border-slate-200 hover:border-blue-400 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5"}`,children:[o.jsx("div",{className:`text-lg font-bold mb-1 ${Ve?"text-white":"text-slate-900 group-hover:text-blue-700"} transition-colors`,children:$e(Te.time)}),Te.staffName&&o.jsxs("div",{className:`text-xs mb-0.5 flex items-center justify-center gap-1 ${Ve?"text-blue-100":"text-violet-600"}`,children:[o.jsx(vn,{className:"w-3 h-3"}),Te.staffName]}),o.jsx("div",{className:`text-xs ${Ve?"text-blue-200":"text-slate-400"}`,children:$t(b.serviceDuration||b.duration)})]},Te.id)})}),R&&o.jsxs("div",{className:"mt-6 animate-fade-in",children:[o.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 shadow-sm p-5 mb-4",children:[o.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"New Appointment Time"}),o.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[o.jsx(Vt,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"font-semibold text-slate-800",children:[Me(R.date)," at ",$e(R.time)]})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Ue,disabled:he,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:he?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Rescheduling"]}):o.jsxs(o.Fragment,{children:[o.jsx(ys,{className:"w-4 h-4"}),"Confirm Reschedule"]})}),o.jsx("button",{onClick:()=>K(null),className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]})]}),!z&&o.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]})]}),o.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:o.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",o.jsx(Qe,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function Y_(){return o.jsxs(Qe,{to:"/",className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:o.jsx(Ca,{className:"w-3.5 h-3.5 text-white"})}),o.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function p3(s){if(!s)return"Any time";const e=n=>{const[i,l]=n.split(":").map(Number),u=i>=12?"PM":"AM",h=i%12||12;return l===0?`${h}${u}`:`${h}:${l.toString().padStart(2,"0")}${u}`};return s.start==="00:00"&&s.end==="23:59"?"Any time":`${e(s.start)}  ${e(s.end)}`}function g3(s){if(!s||s.length===0)return"Any day";const e={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return s.map(n=>e[n]||n).join(", ")}function x3(s){if(!s)return"";const e=new Date,n=new Date(s),i=e-n,l=Math.floor(i/6e4);if(l<60)return`${l}m ago`;const u=Math.floor(l/60);return u<24?`${u}h ago`:`${Math.floor(u/24)}d ago`}function y3(){const{slug:s,refCode:e}=vo(),[n,i]=E.useState(null),[l,u]=E.useState(null),[h,p]=E.useState(!0),[g,x]=E.useState(!1),[b,w]=E.useState(null),[T,C]=E.useState(!1),[H,U]=E.useState(null);if(E.useEffect(()=>{(async()=>{p(!0);try{const le=bs(Je(we,"shops"),ss("slug","==",s)),j=await vs(le);if(j.empty)x(!0);else{const A=j.docs[0];i(A.data()),u(A.id)}}catch(le){console.error("Error looking up shop:",le),x(!0)}finally{p(!1)}})()},[s]),E.useEffect(()=>{if(!l)return;(async()=>{try{const le=bs(Je(we,"shops",l,"waitlist"),ss("refCode","==",e.toUpperCase())),j=await vs(le);if(j.empty){C(!0);return}const A=j.docs[0],I={id:A.id,...A.data()};w(I);const P=bs(Je(we,"shops",l,"waitlist"),ss("serviceId","==",I.serviceId),ss("status","==","waiting")),k=(await vs(P)).docs.map(z=>({id:z.id,...z.data()})).sort((z,D)=>(z.createdAt||"").localeCompare(D.createdAt||"")).findIndex(z=>z.id===I.id);k>=0&&U(k+1)}catch(le){console.error("Error looking up waitlist entry:",le),C(!0)}})()},[l,e]),h)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),o.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,o.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),o.jsxs(Qe,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Aa,{className:"w-4 h-4"}),"Go Home"]})]})});if(T)return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),o.jsx(Y_,{})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Ah,{className:"w-8 h-8 text-amber-500"})}),o.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Waitlist Entry Not Found"}),o.jsx("p",{className:"text-slate-600 mb-2",children:"No waitlist entry found with reference code"}),o.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),o.jsxs(Qe,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Vt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading waitlist"})]})});const V={waiting:{label:"Waiting",color:"bg-blue-100 text-blue-700 border-blue-200",icon:jn},notified:{label:"Slot Available!",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:to},booked:{label:"Booked",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:ys},expired:{label:"Expired",color:"bg-slate-100 text-slate-500 border-slate-200",icon:jn}},B=V[b.status]||V.waiting,G=B.icon,Q=pe=>pe?new Date(pe+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",ge=pe=>{if(!pe)return"";const[le,j]=pe.split(":"),A=parseInt(le),I=A>=12?"PM":"AM";return`${A%12||12}:${j} ${I}`};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),o.jsx(Y_,{})]})}),o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:o.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[b.status==="notified"&&o.jsx("div",{className:"mb-6 animate-scale-in",children:o.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(to,{className:"w-8 h-8 text-emerald-600"})}),o.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"A Slot Is Available!"}),o.jsxs("p",{className:"text-slate-600 mb-4",children:["A slot has opened up for ",b.serviceName,". Book now before it's taken!"]}),b.notifiedSlot&&o.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-xl text-sm text-emerald-700 font-medium mb-4",children:[o.jsx(Vt,{className:"w-4 h-4"}),Q(b.notifiedSlot.date)," at"," ",ge(b.notifiedSlot.time),b.notifiedSlot.staffName&&o.jsxs("span",{className:"text-emerald-600",children:[" ","with ",b.notifiedSlot.staffName]})]}),o.jsx("div",{children:o.jsxs(Qe,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-emerald-600/20 hover:shadow-lg",children:[o.jsx(Vt,{className:"w-4 h-4"}),"Book Now "]})})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Waitlist Status"}),o.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference:"," ",o.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${B.color}`,children:[o.jsx(G,{className:"w-3.5 h-3.5"}),B.label]})]}),b.status==="waiting"&&H!=null&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Position"}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(Zp,{className:"w-4 h-4 text-blue-500"}),o.jsxs("span",{className:"font-bold text-slate-900 text-lg",children:["#",H]}),o.jsx("span",{className:"text-sm text-slate-500",children:"in line"})]})]}),b.serviceName&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(_s,{className:"w-4 h-4 text-blue-600"})}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.staffName&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center",children:o.jsx(vn,{className:"w-4 h-4 text-violet-600"})}),o.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),b.preferredDate&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),o.jsxs("span",{className:"text-sm text-slate-700",children:["Preferred: ",Q(b.preferredDate)]})]}),b.preferredDays&&b.preferredDays.length>0&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),o.jsxs("span",{className:"text-sm text-slate-700",children:["Days: ",g3(b.preferredDays)]})]}),b.preferredTimeRange&&o.jsxs("div",{className:"flex items-center gap-2.5",children:[o.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:o.jsx(jn,{className:"w-4 h-4 text-slate-500"})}),o.jsxs("span",{className:"text-sm text-slate-700",children:["Time: ",p3(b.preferredTimeRange)]})]}),b.createdAt&&o.jsxs("div",{className:"pt-2 border-t border-slate-100 text-xs text-slate-400",children:["Joined ",x3(b.createdAt)]})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(Qe,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[o.jsx(Vt,{className:"w-4 h-4"}),b.status==="notified"?"Book Now":"Check Available Slots"]})})]})}),o.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:o.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:o.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",o.jsx(Qe,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function b3(){return o.jsxs(Qe,{to:"/",className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:o.jsx(Ca,{className:"w-3.5 h-3.5 text-white"})}),o.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",o.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function K_(s){if(s==null)return"";if(s<1)return"Next up!";if(s<60)return`~${s} min`;const e=Math.floor(s/60),n=s%60;return n>0?`~${e}h ${n}m`:`~${e}h`}function v3(){const{slug:s}=vo(),[e,n]=E.useState(null),[i,l]=E.useState(null),[u,h]=E.useState(!0),[p,g]=E.useState(!1),[x,b]=E.useState([]),[w,T]=E.useState([]),[C,H]=E.useState([]),[U,V]=E.useState(!1),[B,G]=E.useState(!1),[Q,ge]=E.useState(!1),[pe,le]=E.useState(""),[j,A]=E.useState(0),[I,P]=E.useState({clientName:"",serviceId:""}),[M,q]=E.useState(Date.now());E.useEffect(()=>{const ve=setInterval(()=>q(Date.now()),3e4);return()=>clearInterval(ve)},[]),E.useEffect(()=>{(async()=>{h(!0);try{const O=bs(Je(we,"shops"),ss("slug","==",s)),ne=await vs(O);if(ne.empty)g(!0);else{const re=ne.docs[0];n(re.data()),l(re.id)}}catch(O){console.error("Error looking up shop:",O),g(!0)}finally{h(!1)}})()},[s]),E.useEffect(()=>{if(!i)return;const ve=pn(Je(we,"shops",i,"walkins"),re=>{const be=re.docs.map(ye=>({id:ye.id,...ye.data()}));b(be)}),O=pn(Je(we,"shops",i,"staff"),re=>{const be=re.docs.map(ye=>({id:ye.id,...ye.data()})).filter(ye=>ye.active!==!1);T(be)}),ne=pn(Je(we,"shops",i,"services"),re=>{const be=re.docs.map(ye=>({id:ye.id,...ye.data()})).filter(ye=>ye.active!==!1).sort((ye,Ie)=>(ye.name||"").localeCompare(Ie.name||""));H(be)});return()=>{ve(),O(),ne()}},[i]);const k=E.useMemo(()=>x.filter(ve=>ve.status==="waiting").sort((ve,O)=>(ve.position||0)-(O.position||0)),[x]),z=E.useMemo(()=>x.filter(ve=>ve.status==="in-progress"),[x]),D=E.useMemo(()=>Math.max(w.length,1),[w]),R=E.useMemo(()=>mE({waitingQueue:k,inProgress:z,staffCount:D,defaultDuration:30}),[k,z,D]),K=E.useMemo(()=>fE({waitingAhead:k,inProgress:z,staffCount:D,defaultDuration:30}),[k,z,D]),he=E.useMemo(()=>{const ve=new Date;return ve.setHours(0,0,0,0),x.filter(O=>{const ne=O.joinedAt?.toDate?.()||(O.joinedAt?new Date(O.joinedAt):null);return ne&&ne>=ve}).length},[x]),Ne=async ve=>{ve.preventDefault(),G(!0);const O=C.find(ye=>ye.id===I.serviceId),re=(k.length>0?Math.max(...k.map(ye=>ye.position||0)):0)+1,be=I.clientName.trim()||`Walk-in #${he+1}`;try{await li(Je(we,"shops",i,"walkins"),{clientName:be,serviceId:I.serviceId||null,serviceName:O?.name||null,staffId:null,staffName:null,estimatedDuration:O?.duration||30,status:"waiting",position:re,joinedAt:wt.now(),startedAt:null,completedAt:null,estimatedWaitMinutes:null}),le(be),A(re),ge(!0),V(!1),P({clientName:"",serviceId:""})}catch(ye){console.error("Error joining queue:",ye)}finally{G(!1)}};return u?o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):p?o.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:o.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:o.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),o.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),o.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,o.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),o.jsxs(Qe,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[o.jsx(Aa,{className:"w-4 h-4"}),"Go Home"]})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[o.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e?.name||"")[0]?.toUpperCase()||"S"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e?.name}),o.jsx("p",{className:"text-xs text-slate-500",children:"Live Queue"})]})]}),o.jsx(b3,{})]})}),o.jsxs("div",{className:"max-w-2xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[Q&&o.jsxs("div",{className:"mb-6 bg-emerald-50 border border-emerald-200 rounded-2xl p-6 text-center animate-scale-in",children:[o.jsx("div",{className:"w-14 h-14 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-3",children:o.jsx(vn,{className:"w-7 h-7 text-emerald-600"})}),o.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-1",children:"You're in the queue!"}),o.jsxs("p",{className:"text-slate-600 text-sm mb-2",children:[o.jsx("strong",{children:pe}),"  Position #",j]}),o.jsx("button",{onClick:()=>ge(!1),className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium",children:"Dismiss"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:o.jsx(vn,{className:"w-6 h-6 text-blue-600"})}),o.jsx("div",{className:"text-3xl font-extrabold text-slate-900",children:k.length}),o.jsx("div",{className:"text-sm font-medium text-slate-500 mt-1",children:"People Waiting"})]}),o.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[o.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:o.jsx(oE,{className:"w-6 h-6 text-amber-600"})}),o.jsx("div",{className:"text-3xl font-extrabold text-slate-900",children:K_(K)}),o.jsx("div",{className:"text-sm font-medium text-slate-500 mt-1",children:"Est. Wait (New)"})]})]}),z.length>0&&o.jsxs("div",{className:"mb-6",children:[o.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center gap-2",children:[o.jsx(Ca,{className:"w-5 h-5 text-emerald-500"}),"Currently Being Served"]}),o.jsx("div",{className:"space-y-2",children:z.map(ve=>o.jsxs("div",{className:"bg-white rounded-xl border border-emerald-200 p-4 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:o.jsx(Ca,{className:"w-5 h-5 text-emerald-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-slate-900",children:ve.clientName}),o.jsx("div",{className:"text-xs text-slate-500",children:ve.serviceName||"Service in progress"})]})]},ve.id))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center gap-2",children:[o.jsx(jn,{className:"w-5 h-5 text-blue-500"}),"Queue"]}),k.length===0?o.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-10 text-center",children:[o.jsx("div",{className:"w-14 h-14 bg-emerald-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:o.jsx(vn,{className:"w-7 h-7 text-emerald-500"})}),o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"No Wait!"}),o.jsx("p",{className:"text-sm text-slate-500",children:"The queue is empty  you can walk right in!"})]}):o.jsx("div",{className:"space-y-2",children:k.map((ve,O)=>{const ne=R.get(ve.id);return o.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center font-extrabold text-blue-700 text-lg flex-shrink-0",children:O+1}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-slate-900 text-lg truncate",children:ve.clientName}),ve.serviceName&&o.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-1",children:[o.jsx(_s,{className:"w-3 h-3"}),ve.serviceName]})]}),o.jsxs("div",{className:"text-right flex-shrink-0",children:[o.jsx("div",{className:"text-lg font-bold text-amber-600",children:K_(ne)}),o.jsx("div",{className:"text-xs text-slate-400",children:"est. wait"})]})]},ve.id)})})]}),!Q&&o.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:U?o.jsxs("form",{onSubmit:Ne,children:[o.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Join the Queue"}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Your Name"}),o.jsx("input",{type:"text",value:I.clientName,onChange:ve=>P(O=>({...O,clientName:ve.target.value})),placeholder:"Optional",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-lg"})]}),C.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Service"}),o.jsxs("select",{value:I.serviceId,onChange:ve=>P(O=>({...O,serviceId:ve.target.value})),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-lg",children:[o.jsx("option",{value:"",children:"Select a service"}),C.map(ve=>o.jsxs("option",{value:ve.id,children:[ve.name," (",ve.duration,"min  $",Number(ve.price).toFixed(2),")"]},ve.id))]})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{type:"submit",disabled:B,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg shadow-md shadow-blue-600/20 transition-all disabled:opacity-50",children:[o.jsx(lr,{className:"w-5 h-5"}),B?"Joining":"Join Queue"]}),o.jsx("button",{type:"button",onClick:()=>{V(!1),P({clientName:"",serviceId:""})},className:"px-6 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]}):o.jsxs("button",{onClick:()=>V(!0),className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg shadow-md shadow-blue-600/20 transition-all hover:-translate-y-0.5",children:[o.jsx(lr,{className:"w-5 h-5"}),"Join the Queue"]})})]}),o.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:o.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-between",children:[o.jsxs(Qe,{to:`/shop/${s}`,className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[o.jsx(Vt,{className:"w-4 h-4"}),"Book Online"]}),o.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",o.jsx(Qe,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})]})})]})}function _3(){const[s,e]=E.useState(null),[n,i]=E.useState(!0);return E.useEffect(()=>{const l=pR(nl,u=>{e(u),i(!1)});return()=>l()},[]),n?o.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:o.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[o.jsx("div",{className:"spinner"}),o.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):o.jsx(ES,{children:o.jsxs(eS,{children:[o.jsx(Ks,{path:"/",element:o.jsx(VD,{})}),o.jsx(Ks,{path:"/register",element:o.jsx(LD,{})}),o.jsx(Ks,{path:"/login",element:o.jsx(UD,{user:s})}),o.jsx(Ks,{path:"/shop/:slug",element:o.jsx(YD,{})}),o.jsx(Ks,{path:"/shop/:slug/booking/:refCode",element:o.jsx(m3,{})}),o.jsx(Ks,{path:"/shop/:slug/waitlist/:refCode",element:o.jsx(y3,{})}),o.jsx(Ks,{path:"/shop/:slug/queue",element:o.jsx(v3,{})}),o.jsx(Ks,{path:"/shop/:slug/login",element:o.jsx(f3,{user:s})}),o.jsx(Ks,{path:"/shop/:slug/dashboard",element:o.jsx(h3,{user:s})}),o.jsx(Ks,{path:"*",element:o.jsx(JT,{to:"/",replace:!0})})]})})}nT.createRoot(document.getElementById("root")).render(o.jsx(K2.StrictMode,{children:o.jsx(_3,{})}));
