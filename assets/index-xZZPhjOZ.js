(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();function B_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Hm={exports:{}},bc={};var Sb;function DN(){if(Sb)return bc;Sb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,l,u){var d=null;if(u!==void 0&&(d=""+u),l.key!==void 0&&(d=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:s,type:i,key:d,ref:l!==void 0?l:null,props:u}}return bc.Fragment=e,bc.jsx=n,bc.jsxs=n,bc}var Ab;function MN(){return Ab||(Ab=1,Hm.exports=DN()),Hm.exports}var c=MN(),$m={exports:{}},Ke={};var Rb;function ON(){if(Rb)return Ke;Rb=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function C(V){return V===null||typeof V!="object"?null:(V=N&&V[N]||V["@@iterator"],typeof V=="function"?V:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,M={};function L(V,ne,de){this.props=V,this.context=ne,this.refs=M,this.updater=de||H}L.prototype.isReactComponent={},L.prototype.setState=function(V,ne){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ne,"setState")},L.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function F(){}F.prototype=L.prototype;function Q(V,ne,de){this.props=V,this.context=ne,this.refs=M,this.updater=de||H}var ue=Q.prototype=new F;ue.constructor=Q,B(ue,L.prototype),ue.isPureReactComponent=!0;var fe=Array.isArray;function re(){}var S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(V,ne,de){var ge=de.ref;return{$$typeof:s,type:V,key:ne,ref:ge!==void 0?ge:null,props:de}}function O(V,ne){return R(V.type,ne,V.props)}function k(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function U(V){var ne={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(de){return ne[de]})}var I=/\/+/g;function Me(V,ne){return typeof V=="object"&&V!==null&&V.key!=null?U(""+V.key):ne.toString(36)}function ke(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(re,re):(V.status="pending",V.then(function(ne){V.status==="pending"&&(V.status="fulfilled",V.value=ne)},function(ne){V.status==="pending"&&(V.status="rejected",V.reason=ne)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function G(V,ne,de,ge,Se){var Ve=typeof V;(Ve==="undefined"||Ve==="boolean")&&(V=null);var se=!1;if(V===null)se=!0;else switch(Ve){case"bigint":case"string":case"number":se=!0;break;case"object":switch(V.$$typeof){case s:case e:se=!0;break;case b:return se=V._init,G(se(V._payload),ne,de,ge,Se)}}if(se)return Se=Se(V),se=ge===""?"."+Me(V,0):ge,fe(Se)?(de="",se!=null&&(de=se.replace(I,"$&/")+"/"),G(Se,ne,de,"",function(Fe){return Fe})):Se!=null&&(k(Se)&&(Se=O(Se,de+(Se.key==null||V&&V.key===Se.key?"":(""+Se.key).replace(I,"$&/")+"/")+se)),ne.push(Se)),1;se=0;var De=ge===""?".":ge+":";if(fe(V))for(var Ae=0;Ae<V.length;Ae++)ge=V[Ae],Ve=De+Me(ge,Ae),se+=G(ge,ne,de,Ve,Se);else if(Ae=C(V),typeof Ae=="function")for(V=Ae.call(V),Ae=0;!(ge=V.next()).done;)ge=ge.value,Ve=De+Me(ge,Ae++),se+=G(ge,ne,de,Ve,Se);else if(Ve==="object"){if(typeof V.then=="function")return G(ke(V),ne,de,ge,Se);throw ne=String(V),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return se}function he(V,ne,de){if(V==null)return V;var ge=[],Se=0;return G(V,ge,"","",function(Ve){return ne.call(de,Ve,Se++)}),ge}function we(V){if(V._status===-1){var ne=V._result;ne=ne(),ne.then(function(de){(V._status===0||V._status===-1)&&(V._status=1,V._result=de)},function(de){(V._status===0||V._status===-1)&&(V._status=2,V._result=de)}),V._status===-1&&(V._status=0,V._result=ne)}if(V._status===1)return V._result.default;throw V._result}var Ge=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},He={map:he,forEach:function(V,ne,de){he(V,function(){ne.apply(this,arguments)},de)},count:function(V){var ne=0;return he(V,function(){ne++}),ne},toArray:function(V){return he(V,function(ne){return ne})||[]},only:function(V){if(!k(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ke.Activity=w,Ke.Children=He,Ke.Component=L,Ke.Fragment=n,Ke.Profiler=l,Ke.PureComponent=Q,Ke.StrictMode=i,Ke.Suspense=g,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(V){return S.H.useMemoCache(V)}},Ke.cache=function(V){return function(){return V.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(V,ne,de){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var ge=B({},V.props),Se=V.key;if(ne!=null)for(Ve in ne.key!==void 0&&(Se=""+ne.key),ne)!A.call(ne,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&ne.ref===void 0||(ge[Ve]=ne[Ve]);var Ve=arguments.length-2;if(Ve===1)ge.children=de;else if(1<Ve){for(var se=Array(Ve),De=0;De<Ve;De++)se[De]=arguments[De+2];ge.children=se}return R(V.type,Se,ge)},Ke.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Ke.createElement=function(V,ne,de){var ge,Se={},Ve=null;if(ne!=null)for(ge in ne.key!==void 0&&(Ve=""+ne.key),ne)A.call(ne,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Se[ge]=ne[ge]);var se=arguments.length-2;if(se===1)Se.children=de;else if(1<se){for(var De=Array(se),Ae=0;Ae<se;Ae++)De[Ae]=arguments[Ae+2];Se.children=De}if(V&&V.defaultProps)for(ge in se=V.defaultProps,se)Se[ge]===void 0&&(Se[ge]=se[ge]);return R(V,Ve,Se)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(V){return{$$typeof:p,render:V}},Ke.isValidElement=k,Ke.lazy=function(V){return{$$typeof:b,_payload:{_status:-1,_result:V},_init:we}},Ke.memo=function(V,ne){return{$$typeof:y,type:V,compare:ne===void 0?null:ne}},Ke.startTransition=function(V){var ne=S.T,de={};S.T=de;try{var ge=V(),Se=S.S;Se!==null&&Se(de,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(re,Ge)}catch(Ve){Ge(Ve)}finally{ne!==null&&de.types!==null&&(ne.types=de.types),S.T=ne}},Ke.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Ke.use=function(V){return S.H.use(V)},Ke.useActionState=function(V,ne,de){return S.H.useActionState(V,ne,de)},Ke.useCallback=function(V,ne){return S.H.useCallback(V,ne)},Ke.useContext=function(V){return S.H.useContext(V)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(V,ne){return S.H.useDeferredValue(V,ne)},Ke.useEffect=function(V,ne){return S.H.useEffect(V,ne)},Ke.useEffectEvent=function(V){return S.H.useEffectEvent(V)},Ke.useId=function(){return S.H.useId()},Ke.useImperativeHandle=function(V,ne,de){return S.H.useImperativeHandle(V,ne,de)},Ke.useInsertionEffect=function(V,ne){return S.H.useInsertionEffect(V,ne)},Ke.useLayoutEffect=function(V,ne){return S.H.useLayoutEffect(V,ne)},Ke.useMemo=function(V,ne){return S.H.useMemo(V,ne)},Ke.useOptimistic=function(V,ne){return S.H.useOptimistic(V,ne)},Ke.useReducer=function(V,ne,de){return S.H.useReducer(V,ne,de)},Ke.useRef=function(V){return S.H.useRef(V)},Ke.useState=function(V){return S.H.useState(V)},Ke.useSyncExternalStore=function(V,ne,de){return S.H.useSyncExternalStore(V,ne,de)},Ke.useTransition=function(){return S.H.useTransition()},Ke.version="19.2.4",Ke}var jb;function Qp(){return jb||(jb=1,$m.exports=ON()),$m.exports}var j=Qp();const VN=B_(j);var Gm={exports:{}},vc={},Ym={exports:{}},Km={};var Cb;function PN(){return Cb||(Cb=1,(function(s){function e(G,he){var we=G.length;G.push(he);e:for(;0<we;){var Ge=we-1>>>1,He=G[Ge];if(0<l(He,he))G[Ge]=he,G[we]=He,we=Ge;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var he=G[0],we=G.pop();if(we!==he){G[0]=we;e:for(var Ge=0,He=G.length,V=He>>>1;Ge<V;){var ne=2*(Ge+1)-1,de=G[ne],ge=ne+1,Se=G[ge];if(0>l(de,we))ge<He&&0>l(Se,de)?(G[Ge]=Se,G[ge]=we,Ge=ge):(G[Ge]=de,G[ne]=we,Ge=ne);else if(ge<He&&0>l(Se,we))G[Ge]=Se,G[ge]=we,Ge=ge;else break e}}return he}function l(G,he){var we=G.sortIndex-he.sortIndex;return we!==0?we:G.id-he.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],y=[],b=1,w=null,N=3,C=!1,H=!1,B=!1,M=!1,L=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ue(G){for(var he=n(y);he!==null;){if(he.callback===null)i(y);else if(he.startTime<=G)i(y),he.sortIndex=he.expirationTime,e(g,he);else break;he=n(y)}}function fe(G){if(B=!1,ue(G),!H)if(n(g)!==null)H=!0,re||(re=!0,U());else{var he=n(y);he!==null&&ke(fe,he.startTime-G)}}var re=!1,S=-1,A=5,R=-1;function O(){return M?!0:!(s.unstable_now()-R<A)}function k(){if(M=!1,re){var G=s.unstable_now();R=G;var he=!0;try{e:{H=!1,B&&(B=!1,F(S),S=-1),C=!0;var we=N;try{t:{for(ue(G),w=n(g);w!==null&&!(w.expirationTime>G&&O());){var Ge=w.callback;if(typeof Ge=="function"){w.callback=null,N=w.priorityLevel;var He=Ge(w.expirationTime<=G);if(G=s.unstable_now(),typeof He=="function"){w.callback=He,ue(G),he=!0;break t}w===n(g)&&i(g),ue(G)}else i(g);w=n(g)}if(w!==null)he=!0;else{var V=n(y);V!==null&&ke(fe,V.startTime-G),he=!1}}break e}finally{w=null,N=we,C=!1}he=void 0}}finally{he?U():re=!1}}}var U;if(typeof Q=="function")U=function(){Q(k)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,Me=I.port2;I.port1.onmessage=k,U=function(){Me.postMessage(null)}}else U=function(){L(k,0)};function ke(G,he){S=L(function(){G(s.unstable_now())},he)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(G){switch(N){case 1:case 2:case 3:var he=3;break;default:he=N}var we=N;N=he;try{return G()}finally{N=we}},s.unstable_requestPaint=function(){M=!0},s.unstable_runWithPriority=function(G,he){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var we=N;N=G;try{return he()}finally{N=we}},s.unstable_scheduleCallback=function(G,he,we){var Ge=s.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Ge+we:Ge):we=Ge,G){case 1:var He=-1;break;case 2:He=250;break;case 5:He=1073741823;break;case 4:He=1e4;break;default:He=5e3}return He=we+He,G={id:b++,callback:he,priorityLevel:G,startTime:we,expirationTime:He,sortIndex:-1},we>Ge?(G.sortIndex=we,e(y,G),n(g)===null&&G===n(y)&&(B?(F(S),S=-1):B=!0,ke(fe,we-Ge))):(G.sortIndex=He,e(g,G),H||C||(H=!0,re||(re=!0,U()))),G},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(G){var he=N;return function(){var we=N;N=he;try{return G.apply(this,arguments)}finally{N=we}}}})(Km)),Km}var Ib;function LN(){return Ib||(Ib=1,Ym.exports=PN()),Ym.exports}var Qm={exports:{}},Vn={};var kb;function UN(){if(kb)return Vn;kb=1;var s=Qp();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)y+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(g,y,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:g,containerInfo:y,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Vn.createPortal=function(g,y){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,b)},Vn.flushSync=function(g){var y=d.T,b=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=y,i.p=b,i.d.f()}},Vn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},Vn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Vn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var b=y.as,w=p(b,y.crossOrigin),N=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;b==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:C}):b==="script"&&i.d.X(g,{crossOrigin:w,integrity:N,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Vn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var b=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},Vn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var b=y.as,w=p(b,y.crossOrigin);i.d.L(g,b,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Vn.preloadModule=function(g,y){if(typeof g=="string")if(y){var b=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},Vn.requestFormReset=function(g){i.d.r(g)},Vn.unstable_batchedUpdates=function(g,y){return g(y)},Vn.useFormState=function(g,y,b){return d.H.useFormState(g,y,b)},Vn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Vn.version="19.2.4",Vn}var Db;function BN(){if(Db)return Qm.exports;Db=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Qm.exports=UN(),Qm.exports}var Mb;function zN(){if(Mb)return vc;Mb=1;var s=LN(),e=Qp(),n=BN();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var a=t,r=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(r=a.return),t=a.return;while(t)}return a.tag===3?r:null}function d(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function p(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(i(188))}function y(t){var a=t.alternate;if(!a){if(a=u(t),a===null)throw Error(i(188));return a!==t?null:t}for(var r=t,o=a;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(o=f.return,o!==null){r=o;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return g(f),t;if(m===o)return g(f),a;m=m.sibling}throw Error(i(188))}if(r.return!==o.return)r=f,o=m;else{for(var v=!1,E=f.child;E;){if(E===r){v=!0,r=f,o=m;break}if(E===o){v=!0,o=f,r=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===r){v=!0,r=m,o=f;break}if(E===o){v=!0,o=m,r=f;break}E=E.sibling}if(!v)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:a}function b(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=b(t),a!==null)return a;t=t.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function Me(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case L:return"Profiler";case M:return"StrictMode";case fe:return"Suspense";case re:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case H:return"Portal";case Q:return t.displayName||"Context";case F:return(t._context.displayName||"Context")+".Consumer";case ue:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case S:return a=t.displayName||null,a!==null?a:Me(t.type)||"Memo";case A:a=t._payload,t=t._init;try{return Me(t(a))}catch{}}return null}var ke=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Ge=[],He=-1;function V(t){return{current:t}}function ne(t){0>He||(t.current=Ge[He],Ge[He]=null,He--)}function de(t,a){He++,Ge[He]=t.current,t.current=a}var ge=V(null),Se=V(null),Ve=V(null),se=V(null);function De(t,a){switch(de(Ve,a),de(Se,t),de(ge,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Qx(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Qx(a),t=Xx(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ne(ge),de(ge,t)}function Ae(){ne(ge),ne(Se),ne(Ve)}function Fe(t){t.memoizedState!==null&&de(se,t);var a=ge.current,r=Xx(a,t.type);a!==r&&(de(Se,t),de(ge,r))}function tt(t){Se.current===t&&(ne(ge),ne(Se)),se.current===t&&(ne(se),pc._currentValue=we)}var Gt,It;function pt(t){if(Gt===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);Gt=a&&a[1]||"",It=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gt+t+It}var gn=!1;function sn(t,a){if(!t||gn)return"";gn=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var W=Z}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(Z){W=Z}t.call(ie.prototype)}}else{try{throw Error()}catch(Z){W=Z}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var D=v.split(`
`),K=E.split(`
`);for(f=o=0;o<D.length&&!D[o].includes("DetermineComponentFrameRoot");)o++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(o===D.length||f===K.length)for(o=D.length-1,f=K.length-1;1<=o&&0<=f&&D[o]!==K[f];)f--;for(;1<=o&&0<=f;o--,f--)if(D[o]!==K[f]){if(o!==1||f!==1)do if(o--,f--,0>f||D[o]!==K[f]){var te=`
`+D[o].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=o&&0<=f);break}}}finally{gn=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?pt(r):""}function ss(t,a){switch(t.tag){case 26:case 27:case 5:return pt(t.type);case 16:return pt("Lazy");case 13:return t.child!==a&&a!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return sn(t.type,!1);case 11:return sn(t.type.render,!1);case 1:return sn(t.type,!0);case 31:return pt("Activity");default:return""}}function zn(t){try{var a="",r=null;do a+=ss(t,r),r=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var vt=Object.prototype.hasOwnProperty,be=s.unstable_scheduleCallback,Re=s.unstable_cancelCallback,$e=s.unstable_shouldYield,Pt=s.unstable_requestPaint,at=s.unstable_now,ut=s.unstable_getCurrentPriorityLevel,z=s.unstable_ImmediatePriority,ee=s.unstable_UserBlockingPriority,ye=s.unstable_NormalPriority,xe=s.unstable_LowPriority,Oe=s.unstable_IdlePriority,_t=s.log,ft=s.unstable_setDisableYieldValue,ce=null,me=null;function Be(t){if(typeof _t=="function"&&ft(t),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(ce,t)}catch{}}var Pe=Math.clz32?Math.clz32:je,gt=Math.log,Le=Math.LN2;function je(t){return t>>>=0,t===0?32:31-(gt(t)/Le|0)|0}var At=256,vn=262144,wt=4194304;function yn(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Dn(t,a,r){var o=t.pendingLanes;if(o===0)return 0;var f=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~m,o!==0?f=yn(o):(v&=E,v!==0?f=yn(v):r||(r=E&~t,r!==0&&(f=yn(r))))):(E=o&~m,E!==0?f=yn(E):v!==0?f=yn(v):r||(r=o&~t,r!==0&&(f=yn(r)))),f===0?0:a!==0&&a!==f&&(a&m)===0&&(m=f&-f,r=a&-a,m>=r||m===32&&(r&4194048)!==0)?a:f}function qn(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function _o(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mn(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function as(t){for(var a=[],r=0;31>r;r++)a.push(t);return a}function On(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function il(t,a,r,o,f,m){var v=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var E=t.entanglements,D=t.expirationTimes,K=t.hiddenUpdates;for(r=v&~r;0<r;){var te=31-Pe(r),ie=1<<te;E[te]=0,D[te]=-1;var W=K[te];if(W!==null)for(K[te]=null,te=0;te<W.length;te++){var Z=W[te];Z!==null&&(Z.lane&=-536870913)}r&=~ie}o!==0&&Ra(t,o,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~a))}function Ra(t,a,r){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-Pe(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function hr(t,a){var r=t.entangledLanes|=a;for(t=t.entanglements;r;){var o=31-Pe(r),f=1<<o;f&a|t[o]&a&&(t[o]|=a),r&=~f}}function ii(t,a){var r=a&-a;return r=(r&42)!==0?1:ri(r),(r&(t.suspendedLanes|a))!==0?0:r}function ri(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ja(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function mu(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:bb(t.type))}function Vs(t,a){var r=he.p;try{return he.p=t,a()}finally{he.p=r}}var Ps=Math.random().toString(36).slice(2),an="__reactFiber$"+Ps,_n="__reactProps$"+Ps,Js="__reactContainer$"+Ps,rl="__reactEvents$"+Ps,Qd="__reactListeners$"+Ps,pu="__reactHandles$"+Ps,gu="__reactResources$"+Ps,Zs="__reactMarker$"+Ps;function ll(t){delete t[an],delete t[_n],delete t[rl],delete t[Qd],delete t[pu]}function ea(t){var a=t[an];if(a)return a;for(var r=t.parentNode;r;){if(a=r[Js]||r[an]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(t=sb(t);t!==null;){if(r=t[an])return r;t=sb(t)}return a}t=r,r=t.parentNode}return null}function vs(t){if(t=t[an]||t[Js]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function is(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function ta(t){var a=t[gu];return a||(a=t[gu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function rn(t){t[Zs]=!0}var wo=new Set,Eo={};function na(t,a){sa(t,a),sa(t+"Capture",a)}function sa(t,a){for(Eo[t]=a,t=0;t<a.length;t++)wo.add(a[t])}var To=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),No={},So={};function yu(t){return vt.call(So,t)?!0:vt.call(No,t)?!1:To.test(t)?So[t]=!0:(No[t]=!0,!1)}function ol(t,a,r){if(yu(a))if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+r)}}function rs(t,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+r)}}function ln(t,a,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(a,r,""+o)}}function wn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function li(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ao(t,a,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(v){r=""+v,m.call(this,v)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Rt(t){if(!t._valueTracker){var a=li(t)?"checked":"value";t._valueTracker=Ao(t,a,""+t[a])}}function dr(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var r=a.getValue(),o="";return t&&(o=li(t)?t.checked?"true":"false":t.value),t=o,t!==r?(a.setValue(t),!0):!1}function aa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var fr=/[\n"\\]/g;function Gn(t){return t.replace(fr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function cl(t,a,r,o,f,m,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),a!=null?v==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+wn(a)):t.value!==""+wn(a)&&(t.value=""+wn(a)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),a!=null?Ro(t,v,wn(a)):r!=null?Ro(t,v,wn(r)):o!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+wn(E):t.removeAttribute("name")}function xu(t,a,r,o,f,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),a!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||a!=null)){Rt(t);return}r=r!=null?""+wn(r):"",a=a!=null?""+wn(a):r,E||a===t.value||(t.value=a),t.defaultValue=a}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Rt(t)}function Ro(t,a,r){a==="number"&&aa(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function oi(t,a,r,o){if(t=t.options,a){a={};for(var f=0;f<r.length;f++)a["$"+r[f]]=!0;for(r=0;r<t.length;r++)f=a.hasOwnProperty("$"+t[r].value),t[r].selected!==f&&(t[r].selected=f),f&&o&&(t[r].defaultSelected=!0)}else{for(r=""+wn(r),a=null,f=0;f<t.length;f++){if(t[f].value===r){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function bu(t,a,r){if(a!=null&&(a=""+wn(a),a!==t.value&&(t.value=a),r==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=r!=null?""+wn(r):""}function ci(t,a,r,o){if(a==null){if(o!=null){if(r!=null)throw Error(i(92));if(ke(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),a=r}r=wn(a),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),Rt(t)}function Yn(t,a){if(a){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=a;return}}t.textContent=a}var vu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jo(t,a,r){var o=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,r):typeof r!="number"||r===0||vu.has(a)?a==="float"?t.cssFloat=r:t[a]=(""+r).trim():t[a]=r+"px"}function Co(t,a,r){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in a)o=a[f],a.hasOwnProperty(f)&&r[f]!==o&&jo(t,f,o)}else for(var m in a)a.hasOwnProperty(m)&&jo(t,m,a[m])}function ul(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _u=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ui=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hl(t){return ui.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ls(){}var Io=null;function _s(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hi=null,ia=null;function mr(t){var a=vs(t);if(a&&(t=a.stateNode)){var r=t[_n]||null;e:switch(t=a.stateNode,a.type){case"input":if(cl(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Gn(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var o=r[a];if(o!==t&&o.form===t.form){var f=o[_n]||null;if(!f)throw Error(i(90));cl(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<r.length;a++)o=r[a],o.form===t.form&&dr(o)}break e;case"textarea":bu(t,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&oi(t,!!r.multiple,a,!1)}}}var dl=!1;function di(t,a,r){if(dl)return t(a,r);dl=!0;try{var o=t(a);return o}finally{if(dl=!1,(hi!==null||ia!==null)&&(mh(),hi&&(a=hi,t=ia,ia=hi=null,mr(a),t)))for(a=0;a<t.length;a++)mr(t[a])}}function Us(t,a){var r=t.stateNode;if(r===null)return null;var o=r[_n]||null;if(o===null)return null;r=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,a,typeof r));return r}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pr=!1;if(ws)try{var kt={};Object.defineProperty(kt,"passive",{get:function(){pr=!0}}),window.addEventListener("test",kt,kt),window.removeEventListener("test",kt,kt)}catch{pr=!1}var ra=null,ko=null,gr=null;function Do(){if(gr)return gr;var t,a=ko,r=a.length,o,f="value"in ra?ra.value:ra.textContent,m=f.length;for(t=0;t<r&&a[t]===f[t];t++);var v=r-t;for(o=1;o<=v&&a[r-o]===f[m-o];o++);return gr=f.slice(t,1<o?1-o:void 0)}function yr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Ca(){return!0}function Bs(){return!1}function Nn(t){function a(r,o,f,m,v){this._reactName=r,this._targetInst=f,this.type=o,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ca:Bs,this.isPropagationStopped=Bs,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ca)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ca)},persist:function(){},isPersistent:Ca}),a}var Ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=Nn(Ia),fi=w({},Ia,{view:0,detail:0}),Mo=Nn(fi),mi,fl,oa,ml=w({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oa&&(oa&&t.type==="mousemove"?(mi=t.screenX-oa.screenX,fl=t.screenY-oa.screenY):fl=mi=0,oa=t),mi)},movementY:function(t){return"movementY"in t?t.movementY:fl}}),Oo=Nn(ml),xr=w({},ml,{dataTransfer:0}),wu=Nn(xr),Eu=w({},fi,{relatedTarget:0}),br=Nn(Eu),Vo=w({},Ia,{animationName:0,elapsedTime:0,pseudoElement:0}),Tu=Nn(Vo),pl=w({},Ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Nu=Nn(pl),Su=w({},Ia,{data:0}),ca=Nn(Su),Au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cu(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=ju[t])?!!a[t]:!1}function pi(){return Cu}var Fn=w({},fi,{key:function(t){if(t.key){var a=Au[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=yr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ru[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(t){return t.type==="keypress"?yr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Iu=Nn(Fn),ku=w({},ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ka=Nn(ku),h=w({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi}),x=Nn(h),_=w({},Ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=Nn(_),$=w({},ml,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J=Nn($),pe=w({},Ia,{newState:0,oldState:0}),We=Nn(pe),Zt=[9,13,27,32],Et=ws&&"CompositionEvent"in window,qt=null;ws&&"documentMode"in document&&(qt=document.documentMode);var Es=ws&&"TextEvent"in window&&!qt,ua=ws&&(!Et||qt&&8<qt&&11>=qt),zs=" ",qs=!1;function vr(t,a){switch(t){case"keyup":return Zt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gl(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yl=!1;function sT(t,a){switch(t){case"compositionend":return gl(a);case"keypress":return a.which!==32?null:(qs=!0,zs);case"textInput":return t=a.data,t===zs&&qs?null:t;default:return null}}function aT(t,a){if(yl)return t==="compositionend"||!Et&&vr(t,a)?(t=Do(),gr=ko=ra=null,yl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ua&&a.locale!=="ko"?null:a.data;default:return null}}var iT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r0(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!iT[t.type]:a==="textarea"}function l0(t,a,r,o){hi?ia?ia.push(o):ia=[o]:hi=o,a=_h(a,"onChange"),0<a.length&&(r=new la("onChange","change",null,r,o),t.push({event:r,listeners:a}))}var Po=null,Lo=null;function rT(t){Fx(t,0)}function Du(t){var a=is(t);if(dr(a))return t}function o0(t,a){if(t==="change")return a}var c0=!1;if(ws){var Xd;if(ws){var Wd="oninput"in document;if(!Wd){var u0=document.createElement("div");u0.setAttribute("oninput","return;"),Wd=typeof u0.oninput=="function"}Xd=Wd}else Xd=!1;c0=Xd&&(!document.documentMode||9<document.documentMode)}function h0(){Po&&(Po.detachEvent("onpropertychange",d0),Lo=Po=null)}function d0(t){if(t.propertyName==="value"&&Du(Lo)){var a=[];l0(a,Lo,t,_s(t)),di(rT,a)}}function lT(t,a,r){t==="focusin"?(h0(),Po=a,Lo=r,Po.attachEvent("onpropertychange",d0)):t==="focusout"&&h0()}function oT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Du(Lo)}function cT(t,a){if(t==="click")return Du(a)}function uT(t,a){if(t==="input"||t==="change")return Du(a)}function hT(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ls=typeof Object.is=="function"?Object.is:hT;function Uo(t,a){if(ls(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var r=Object.keys(t),o=Object.keys(a);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var f=r[o];if(!vt.call(a,f)||!ls(t[f],a[f]))return!1}return!0}function f0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function m0(t,a){var r=f0(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=a&&o>=a)return{node:r,offset:a-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=f0(r)}}function p0(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?p0(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function g0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=aa(t.document);a instanceof t.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)t=a.contentWindow;else break;a=aa(t.document)}return a}function Jd(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var dT=ws&&"documentMode"in document&&11>=document.documentMode,xl=null,Zd=null,Bo=null,ef=!1;function y0(t,a,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ef||xl==null||xl!==aa(o)||(o=xl,"selectionStart"in o&&Jd(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Bo&&Uo(Bo,o)||(Bo=o,o=_h(Zd,"onSelect"),0<o.length&&(a=new la("onSelect","select",null,a,r),t.push({event:a,listeners:o}),a.target=xl)))}function _r(t,a){var r={};return r[t.toLowerCase()]=a.toLowerCase(),r["Webkit"+t]="webkit"+a,r["Moz"+t]="moz"+a,r}var bl={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionrun:_r("Transition","TransitionRun"),transitionstart:_r("Transition","TransitionStart"),transitioncancel:_r("Transition","TransitionCancel"),transitionend:_r("Transition","TransitionEnd")},tf={},x0={};ws&&(x0=document.createElement("div").style,"AnimationEvent"in window||(delete bl.animationend.animation,delete bl.animationiteration.animation,delete bl.animationstart.animation),"TransitionEvent"in window||delete bl.transitionend.transition);function wr(t){if(tf[t])return tf[t];if(!bl[t])return t;var a=bl[t],r;for(r in a)if(a.hasOwnProperty(r)&&r in x0)return tf[t]=a[r];return t}var b0=wr("animationend"),v0=wr("animationiteration"),_0=wr("animationstart"),fT=wr("transitionrun"),mT=wr("transitionstart"),pT=wr("transitioncancel"),w0=wr("transitionend"),E0=new Map,nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nf.push("scrollEnd");function Fs(t,a){E0.set(t,a),na(a,[t])}var Mu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ts=[],vl=0,sf=0;function Ou(){for(var t=vl,a=sf=vl=0;a<t;){var r=Ts[a];Ts[a++]=null;var o=Ts[a];Ts[a++]=null;var f=Ts[a];Ts[a++]=null;var m=Ts[a];if(Ts[a++]=null,o!==null&&f!==null){var v=o.pending;v===null?f.next=f:(f.next=v.next,v.next=f),o.pending=f}m!==0&&T0(r,f,m)}}function Vu(t,a,r,o){Ts[vl++]=t,Ts[vl++]=a,Ts[vl++]=r,Ts[vl++]=o,sf|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function af(t,a,r,o){return Vu(t,a,r,o),Pu(t)}function Er(t,a){return Vu(t,null,null,a),Pu(t)}function T0(t,a,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var f=!1,m=t.return;m!==null;)m.childLanes|=r,o=m.alternate,o!==null&&(o.childLanes|=r),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&a!==null&&(f=31-Pe(r),t=m.hiddenUpdates,o=t[f],o===null?t[f]=[a]:o.push(a),a.lane=r|536870912),m):null}function Pu(t){if(50<oc)throw oc=0,mm=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var _l={};function gT(t,a,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(t,a,r,o){return new gT(t,a,r,o)}function rf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Da(t,a){var r=t.alternate;return r===null?(r=os(t.tag,a,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=a,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,a=t.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function N0(t,a){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,a=r.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Lu(t,a,r,o,f,m){var v=0;if(o=t,typeof t=="function")rf(t)&&(v=1);else if(typeof t=="string")v=_N(t,r,ge.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=os(31,r,a,f),t.elementType=R,t.lanes=m,t;case B:return Tr(r.children,f,m,a);case M:v=8,f|=24;break;case L:return t=os(12,r,a,f|2),t.elementType=L,t.lanes=m,t;case fe:return t=os(13,r,a,f),t.elementType=fe,t.lanes=m,t;case re:return t=os(19,r,a,f),t.elementType=re,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:v=10;break e;case F:v=9;break e;case ue:v=11;break e;case S:v=14;break e;case A:v=16,o=null;break e}v=29,r=Error(i(130,t===null?"null":typeof t,"")),o=null}return a=os(v,r,a,f),a.elementType=t,a.type=o,a.lanes=m,a}function Tr(t,a,r,o){return t=os(7,t,o,a),t.lanes=r,t}function lf(t,a,r){return t=os(6,t,null,a),t.lanes=r,t}function S0(t){var a=os(18,null,null,0);return a.stateNode=t,a}function of(t,a,r){return a=os(4,t.children!==null?t.children:[],t.key,a),a.lanes=r,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var A0=new WeakMap;function Ns(t,a){if(typeof t=="object"&&t!==null){var r=A0.get(t);return r!==void 0?r:(a={value:t,source:a,stack:zn(a)},A0.set(t,a),a)}return{value:t,source:a,stack:zn(a)}}var wl=[],El=0,Uu=null,zo=0,Ss=[],As=0,gi=null,ha=1,da="";function Ma(t,a){wl[El++]=zo,wl[El++]=Uu,Uu=t,zo=a}function R0(t,a,r){Ss[As++]=ha,Ss[As++]=da,Ss[As++]=gi,gi=t;var o=ha;t=da;var f=32-Pe(o)-1;o&=~(1<<f),r+=1;var m=32-Pe(a)+f;if(30<m){var v=f-f%5;m=(o&(1<<v)-1).toString(32),o>>=v,f-=v,ha=1<<32-Pe(a)+f|r<<f|o,da=m+t}else ha=1<<m|r<<f|o,da=t}function cf(t){t.return!==null&&(Ma(t,1),R0(t,1,0))}function uf(t){for(;t===Uu;)Uu=wl[--El],wl[El]=null,zo=wl[--El],wl[El]=null;for(;t===gi;)gi=Ss[--As],Ss[As]=null,da=Ss[--As],Ss[As]=null,ha=Ss[--As],Ss[As]=null}function j0(t,a){Ss[As++]=ha,Ss[As++]=da,Ss[As++]=gi,ha=a.id,da=a.overflow,gi=t}var Sn=null,Ut=null,ht=!1,yi=null,Rs=!1,hf=Error(i(519));function xi(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qo(Ns(a,t)),hf}function C0(t){var a=t.stateNode,r=t.type,o=t.memoizedProps;switch(a[an]=t,a[_n]=o,r){case"dialog":st("cancel",a),st("close",a);break;case"iframe":case"object":case"embed":st("load",a);break;case"video":case"audio":for(r=0;r<uc.length;r++)st(uc[r],a);break;case"source":st("error",a);break;case"img":case"image":case"link":st("error",a),st("load",a);break;case"details":st("toggle",a);break;case"input":st("invalid",a),xu(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":st("invalid",a);break;case"textarea":st("invalid",a),ci(a,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||o.suppressHydrationWarning===!0||Yx(a.textContent,r)?(o.popover!=null&&(st("beforetoggle",a),st("toggle",a)),o.onScroll!=null&&st("scroll",a),o.onScrollEnd!=null&&st("scrollend",a),o.onClick!=null&&(a.onclick=Ls),a=!0):a=!1,a||xi(t,!0)}function I0(t){for(Sn=t.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Rs=!1;return;case 27:case 3:Rs=!0;return;default:Sn=Sn.return}}function Tl(t){if(t!==Sn)return!1;if(!ht)return I0(t),ht=!0,!1;var a=t.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||jm(t.type,t.memoizedProps)),r=!r),r&&Ut&&xi(t),I0(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ut=nb(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Ut=nb(t)}else a===27?(a=Ut,ki(t.type)?(t=Mm,Mm=null,Ut=t):Ut=a):Ut=Sn?Cs(t.stateNode.nextSibling):null;return!0}function Nr(){Ut=Sn=null,ht=!1}function df(){var t=yi;return t!==null&&(Wn===null?Wn=t:Wn.push.apply(Wn,t),yi=null),t}function qo(t){yi===null?yi=[t]:yi.push(t)}var ff=V(null),Sr=null,Oa=null;function bi(t,a,r){de(ff,a._currentValue),a._currentValue=r}function Va(t){t._currentValue=ff.current,ne(ff)}function mf(t,a,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===r)break;t=t.return}}function pf(t,a,r,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var D=0;D<a.length;D++)if(E.context===a[D]){m.lanes|=r,E=m.alternate,E!==null&&(E.lanes|=r),mf(m.return,r,t),o||(v=null);break e}m=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(i(341));v.lanes|=r,m=v.alternate,m!==null&&(m.lanes|=r),mf(v,r,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Nl(t,a,r,o){t=null;for(var f=a,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var E=f.type;ls(f.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(f===se.current){if(v=f.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(pc):t=[pc])}f=f.return}t!==null&&pf(a,t,r,o),a.flags|=262144}function Bu(t){for(t=t.firstContext;t!==null;){if(!ls(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ar(t){Sr=t,Oa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function An(t){return k0(Sr,t)}function zu(t,a){return Sr===null&&Ar(t),k0(t,a)}function k0(t,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},Oa===null){if(t===null)throw Error(i(308));Oa=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Oa=Oa.next=a;return r}var yT=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(r){return r()})}},xT=s.unstable_scheduleCallback,bT=s.unstable_NormalPriority,on={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gf(){return{controller:new yT,data:new Map,refCount:0}}function Fo(t){t.refCount--,t.refCount===0&&xT(bT,function(){t.controller.abort()})}var Ho=null,yf=0,Sl=0,Al=null;function vT(t,a){if(Ho===null){var r=Ho=[];yf=0,Sl=vm(),Al={status:"pending",value:void 0,then:function(o){r.push(o)}}}return yf++,a.then(D0,D0),a}function D0(){if(--yf===0&&Ho!==null){Al!==null&&(Al.status="fulfilled");var t=Ho;Ho=null,Sl=0,Al=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function _T(t,a){var r=[],o={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var f=0;f<r.length;f++)(0,r[f])(a)},function(f){for(o.status="rejected",o.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),o}var M0=G.S;G.S=function(t,a){yx=at(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&vT(t,a),M0!==null&&M0(t,a)};var Rr=V(null);function xf(){var t=Rr.current;return t!==null?t:Vt.pooledCache}function qu(t,a){a===null?de(Rr,Rr.current):de(Rr,a.pool)}function O0(){var t=xf();return t===null?null:{parent:on._currentValue,pool:t}}var Rl=Error(i(460)),bf=Error(i(474)),Fu=Error(i(542)),Hu={then:function(){}};function V0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function P0(t,a,r){switch(r=t[r],r===void 0?t.push(a):r!==a&&(a.then(Ls,Ls),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,U0(t),t;default:if(typeof a.status=="string")a.then(Ls,Ls);else{if(t=Vt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=o}},function(o){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,U0(t),t}throw Cr=a,Rl}}function jr(t){try{var a=t._init;return a(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Cr=r,Rl):r}}var Cr=null;function L0(){if(Cr===null)throw Error(i(459));var t=Cr;return Cr=null,t}function U0(t){if(t===Rl||t===Fu)throw Error(i(483))}var jl=null,$o=0;function $u(t){var a=$o;return $o+=1,jl===null&&(jl=[]),P0(jl,t,a)}function Go(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Gu(t,a){throw a.$$typeof===N?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function B0(t){function a(q,P){if(t){var Y=q.deletions;Y===null?(q.deletions=[P],q.flags|=16):Y.push(P)}}function r(q,P){if(!t)return null;for(;P!==null;)a(q,P),P=P.sibling;return null}function o(q){for(var P=new Map;q!==null;)q.key!==null?P.set(q.key,q):P.set(q.index,q),q=q.sibling;return P}function f(q,P){return q=Da(q,P),q.index=0,q.sibling=null,q}function m(q,P,Y){return q.index=Y,t?(Y=q.alternate,Y!==null?(Y=Y.index,Y<P?(q.flags|=67108866,P):Y):(q.flags|=67108866,P)):(q.flags|=1048576,P)}function v(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function E(q,P,Y,ae){return P===null||P.tag!==6?(P=lf(Y,q.mode,ae),P.return=q,P):(P=f(P,Y),P.return=q,P)}function D(q,P,Y,ae){var Ce=Y.type;return Ce===B?te(q,P,Y.props.children,ae,Y.key):P!==null&&(P.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===A&&jr(Ce)===P.type)?(P=f(P,Y.props),Go(P,Y),P.return=q,P):(P=Lu(Y.type,Y.key,Y.props,null,q.mode,ae),Go(P,Y),P.return=q,P)}function K(q,P,Y,ae){return P===null||P.tag!==4||P.stateNode.containerInfo!==Y.containerInfo||P.stateNode.implementation!==Y.implementation?(P=of(Y,q.mode,ae),P.return=q,P):(P=f(P,Y.children||[]),P.return=q,P)}function te(q,P,Y,ae,Ce){return P===null||P.tag!==7?(P=Tr(Y,q.mode,ae,Ce),P.return=q,P):(P=f(P,Y),P.return=q,P)}function ie(q,P,Y){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=lf(""+P,q.mode,Y),P.return=q,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case C:return Y=Lu(P.type,P.key,P.props,null,q.mode,Y),Go(Y,P),Y.return=q,Y;case H:return P=of(P,q.mode,Y),P.return=q,P;case A:return P=jr(P),ie(q,P,Y)}if(ke(P)||U(P))return P=Tr(P,q.mode,Y,null),P.return=q,P;if(typeof P.then=="function")return ie(q,$u(P),Y);if(P.$$typeof===Q)return ie(q,zu(q,P),Y);Gu(q,P)}return null}function W(q,P,Y,ae){var Ce=P!==null?P.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Ce!==null?null:E(q,P,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case C:return Y.key===Ce?D(q,P,Y,ae):null;case H:return Y.key===Ce?K(q,P,Y,ae):null;case A:return Y=jr(Y),W(q,P,Y,ae)}if(ke(Y)||U(Y))return Ce!==null?null:te(q,P,Y,ae,null);if(typeof Y.then=="function")return W(q,P,$u(Y),ae);if(Y.$$typeof===Q)return W(q,P,zu(q,Y),ae);Gu(q,Y)}return null}function Z(q,P,Y,ae,Ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return q=q.get(Y)||null,E(P,q,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case C:return q=q.get(ae.key===null?Y:ae.key)||null,D(P,q,ae,Ce);case H:return q=q.get(ae.key===null?Y:ae.key)||null,K(P,q,ae,Ce);case A:return ae=jr(ae),Z(q,P,Y,ae,Ce)}if(ke(ae)||U(ae))return q=q.get(Y)||null,te(P,q,ae,Ce,null);if(typeof ae.then=="function")return Z(q,P,Y,$u(ae),Ce);if(ae.$$typeof===Q)return Z(q,P,Y,zu(P,ae),Ce);Gu(P,ae)}return null}function Ee(q,P,Y,ae){for(var Ce=null,yt=null,Ne=P,Ze=P=0,rt=null;Ne!==null&&Ze<Y.length;Ze++){Ne.index>Ze?(rt=Ne,Ne=null):rt=Ne.sibling;var xt=W(q,Ne,Y[Ze],ae);if(xt===null){Ne===null&&(Ne=rt);break}t&&Ne&&xt.alternate===null&&a(q,Ne),P=m(xt,P,Ze),yt===null?Ce=xt:yt.sibling=xt,yt=xt,Ne=rt}if(Ze===Y.length)return r(q,Ne),ht&&Ma(q,Ze),Ce;if(Ne===null){for(;Ze<Y.length;Ze++)Ne=ie(q,Y[Ze],ae),Ne!==null&&(P=m(Ne,P,Ze),yt===null?Ce=Ne:yt.sibling=Ne,yt=Ne);return ht&&Ma(q,Ze),Ce}for(Ne=o(Ne);Ze<Y.length;Ze++)rt=Z(Ne,q,Ze,Y[Ze],ae),rt!==null&&(t&&rt.alternate!==null&&Ne.delete(rt.key===null?Ze:rt.key),P=m(rt,P,Ze),yt===null?Ce=rt:yt.sibling=rt,yt=rt);return t&&Ne.forEach(function(Pi){return a(q,Pi)}),ht&&Ma(q,Ze),Ce}function Ue(q,P,Y,ae){if(Y==null)throw Error(i(151));for(var Ce=null,yt=null,Ne=P,Ze=P=0,rt=null,xt=Y.next();Ne!==null&&!xt.done;Ze++,xt=Y.next()){Ne.index>Ze?(rt=Ne,Ne=null):rt=Ne.sibling;var Pi=W(q,Ne,xt.value,ae);if(Pi===null){Ne===null&&(Ne=rt);break}t&&Ne&&Pi.alternate===null&&a(q,Ne),P=m(Pi,P,Ze),yt===null?Ce=Pi:yt.sibling=Pi,yt=Pi,Ne=rt}if(xt.done)return r(q,Ne),ht&&Ma(q,Ze),Ce;if(Ne===null){for(;!xt.done;Ze++,xt=Y.next())xt=ie(q,xt.value,ae),xt!==null&&(P=m(xt,P,Ze),yt===null?Ce=xt:yt.sibling=xt,yt=xt);return ht&&Ma(q,Ze),Ce}for(Ne=o(Ne);!xt.done;Ze++,xt=Y.next())xt=Z(Ne,q,Ze,xt.value,ae),xt!==null&&(t&&xt.alternate!==null&&Ne.delete(xt.key===null?Ze:xt.key),P=m(xt,P,Ze),yt===null?Ce=xt:yt.sibling=xt,yt=xt);return t&&Ne.forEach(function(kN){return a(q,kN)}),ht&&Ma(q,Ze),Ce}function Ot(q,P,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===B&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case C:e:{for(var Ce=Y.key;P!==null;){if(P.key===Ce){if(Ce=Y.type,Ce===B){if(P.tag===7){r(q,P.sibling),ae=f(P,Y.props.children),ae.return=q,q=ae;break e}}else if(P.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===A&&jr(Ce)===P.type){r(q,P.sibling),ae=f(P,Y.props),Go(ae,Y),ae.return=q,q=ae;break e}r(q,P);break}else a(q,P);P=P.sibling}Y.type===B?(ae=Tr(Y.props.children,q.mode,ae,Y.key),ae.return=q,q=ae):(ae=Lu(Y.type,Y.key,Y.props,null,q.mode,ae),Go(ae,Y),ae.return=q,q=ae)}return v(q);case H:e:{for(Ce=Y.key;P!==null;){if(P.key===Ce)if(P.tag===4&&P.stateNode.containerInfo===Y.containerInfo&&P.stateNode.implementation===Y.implementation){r(q,P.sibling),ae=f(P,Y.children||[]),ae.return=q,q=ae;break e}else{r(q,P);break}else a(q,P);P=P.sibling}ae=of(Y,q.mode,ae),ae.return=q,q=ae}return v(q);case A:return Y=jr(Y),Ot(q,P,Y,ae)}if(ke(Y))return Ee(q,P,Y,ae);if(U(Y)){if(Ce=U(Y),typeof Ce!="function")throw Error(i(150));return Y=Ce.call(Y),Ue(q,P,Y,ae)}if(typeof Y.then=="function")return Ot(q,P,$u(Y),ae);if(Y.$$typeof===Q)return Ot(q,P,zu(q,Y),ae);Gu(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,P!==null&&P.tag===6?(r(q,P.sibling),ae=f(P,Y),ae.return=q,q=ae):(r(q,P),ae=lf(Y,q.mode,ae),ae.return=q,q=ae),v(q)):r(q,P)}return function(q,P,Y,ae){try{$o=0;var Ce=Ot(q,P,Y,ae);return jl=null,Ce}catch(Ne){if(Ne===Rl||Ne===Fu)throw Ne;var yt=os(29,Ne,null,q.mode);return yt.lanes=ae,yt.return=q,yt}}}var Ir=B0(!0),z0=B0(!1),vi=!1;function vf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _f(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _i(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function wi(t,a,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Tt&2)!==0){var f=o.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),o.pending=a,a=Pu(t),T0(t,null,r),a}return Vu(t,o,a,r),Pu(t)}function Yo(t,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,r|=o,a.lanes=r,hr(t,r)}}function wf(t,a){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,r=r.next}while(r!==null);m===null?f=m=a:m=m.next=a}else f=m=a;r={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=a:t.next=a,r.lastBaseUpdate=a}var Ef=!1;function Ko(){if(Ef){var t=Al;if(t!==null)throw t}}function Qo(t,a,r,o){Ef=!1;var f=t.updateQueue;vi=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var D=E,K=D.next;D.next=null,v===null?m=K:v.next=K,v=D;var te=t.alternate;te!==null&&(te=te.updateQueue,E=te.lastBaseUpdate,E!==v&&(E===null?te.firstBaseUpdate=K:E.next=K,te.lastBaseUpdate=D))}if(m!==null){var ie=f.baseState;v=0,te=K=D=null,E=m;do{var W=E.lane&-536870913,Z=W!==E.lane;if(Z?(it&W)===W:(o&W)===W){W!==0&&W===Sl&&(Ef=!0),te!==null&&(te=te.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ee=t,Ue=E;W=a;var Ot=r;switch(Ue.tag){case 1:if(Ee=Ue.payload,typeof Ee=="function"){ie=Ee.call(Ot,ie,W);break e}ie=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Ue.payload,W=typeof Ee=="function"?Ee.call(Ot,ie,W):Ee,W==null)break e;ie=w({},ie,W);break e;case 2:vi=!0}}W=E.callback,W!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:E.tag,payload:E.payload,callback:E.callback,next:null},te===null?(K=te=Z,D=ie):te=te.next=Z,v|=W;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;Z=E,E=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);te===null&&(D=ie),f.baseState=D,f.firstBaseUpdate=K,f.lastBaseUpdate=te,m===null&&(f.shared.lanes=0),Ai|=v,t.lanes=v,t.memoizedState=ie}}function q0(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function F0(t,a){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)q0(r[t],a)}var Cl=V(null),Yu=V(0);function H0(t,a){t=$a,de(Yu,t),de(Cl,a),$a=t|a.baseLanes}function Tf(){de(Yu,$a),de(Cl,Cl.current)}function Nf(){$a=Yu.current,ne(Cl),ne(Yu)}var cs=V(null),js=null;function Ei(t){var a=t.alternate;de(en,en.current&1),de(cs,t),js===null&&(a===null||Cl.current!==null||a.memoizedState!==null)&&(js=t)}function Sf(t){de(en,en.current),de(cs,t),js===null&&(js=t)}function $0(t){t.tag===22?(de(en,en.current),de(cs,t),js===null&&(js=t)):Ti()}function Ti(){de(en,en.current),de(cs,cs.current)}function us(t){ne(cs),js===t&&(js=null),ne(en)}var en=V(0);function Ku(t){for(var a=t;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||km(r)||Dm(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Pa=0,Je=null,Dt=null,cn=null,Qu=!1,Il=!1,kr=!1,Xu=0,Xo=0,kl=null,wT=0;function Qt(){throw Error(i(321))}function Af(t,a){if(a===null)return!1;for(var r=0;r<a.length&&r<t.length;r++)if(!ls(t[r],a[r]))return!1;return!0}function Rf(t,a,r,o,f,m){return Pa=m,Je=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,G.H=t===null||t.memoizedState===null?Ry:Ff,kr=!1,m=r(o,f),kr=!1,Il&&(m=Y0(a,r,o,f)),G0(t),m}function G0(t){G.H=Zo;var a=Dt!==null&&Dt.next!==null;if(Pa=0,cn=Dt=Je=null,Qu=!1,Xo=0,kl=null,a)throw Error(i(300));t===null||un||(t=t.dependencies,t!==null&&Bu(t)&&(un=!0))}function Y0(t,a,r,o){Je=t;var f=0;do{if(Il&&(kl=null),Xo=0,Il=!1,25<=f)throw Error(i(301));if(f+=1,cn=Dt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}G.H=jy,m=a(r,o)}while(Il);return m}function ET(){var t=G.H,a=t.useState()[0];return a=typeof a.then=="function"?Wo(a):a,t=t.useState()[0],(Dt!==null?Dt.memoizedState:null)!==t&&(Je.flags|=1024),a}function jf(){var t=Xu!==0;return Xu=0,t}function Cf(t,a,r){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~r}function If(t){if(Qu){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Qu=!1}Pa=0,cn=Dt=Je=null,Il=!1,Xo=Xu=0,kl=null}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Je.memoizedState=cn=t:cn=cn.next=t,cn}function tn(){if(Dt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var a=cn===null?Je.memoizedState:cn.next;if(a!==null)cn=a,Dt=t;else{if(t===null)throw Je.alternate===null?Error(i(467)):Error(i(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},cn===null?Je.memoizedState=cn=t:cn=cn.next=t}return cn}function Wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wo(t){var a=Xo;return Xo+=1,kl===null&&(kl=[]),t=P0(kl,t,a),a=Je,(cn===null?a.memoizedState:cn.next)===null&&(a=a.alternate,G.H=a===null||a.memoizedState===null?Ry:Ff),t}function Ju(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Wo(t);if(t.$$typeof===Q)return An(t)}throw Error(i(438,String(t)))}function kf(t){var a=null,r=Je.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var o=Je.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Wu(),Je.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(t),o=0;o<t;o++)r[o]=O;return a.index++,r}function La(t,a){return typeof a=="function"?a(t):a}function Zu(t){var a=tn();return Df(a,Dt,t)}function Df(t,a,r){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var f=t.baseQueue,m=o.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}a.baseQueue=f=m,o.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{a=f.next;var E=v=null,D=null,K=a,te=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(it&ie)===ie:(Pa&ie)===ie){var W=K.revertLane;if(W===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===Sl&&(te=!0);else if((Pa&W)===W){K=K.next,W===Sl&&(te=!0);continue}else ie={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},D===null?(E=D=ie,v=m):D=D.next=ie,Je.lanes|=W,Ai|=W;ie=K.action,kr&&r(m,ie),m=K.hasEagerState?K.eagerState:r(m,ie)}else W={lane:ie,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},D===null?(E=D=W,v=m):D=D.next=W,Je.lanes|=ie,Ai|=ie;K=K.next}while(K!==null&&K!==a);if(D===null?v=m:D.next=E,!ls(m,t.memoizedState)&&(un=!0,te&&(r=Al,r!==null)))throw r;t.memoizedState=m,t.baseState=v,t.baseQueue=D,o.lastRenderedState=m}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Mf(t){var a=tn(),r=a.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var o=r.dispatch,f=r.pending,m=a.memoizedState;if(f!==null){r.pending=null;var v=f=f.next;do m=t(m,v.action),v=v.next;while(v!==f);ls(m,a.memoizedState)||(un=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),r.lastRenderedState=m}return[m,o]}function K0(t,a,r){var o=Je,f=tn(),m=ht;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=a();var v=!ls((Dt||f).memoizedState,r);if(v&&(f.memoizedState=r,un=!0),f=f.queue,Pf(W0.bind(null,o,f,t),[t]),f.getSnapshot!==a||v||cn!==null&&cn.memoizedState.tag&1){if(o.flags|=2048,Dl(9,{destroy:void 0},X0.bind(null,o,f,r,a),null),Vt===null)throw Error(i(349));m||(Pa&127)!==0||Q0(o,a,r)}return r}function Q0(t,a,r){t.flags|=16384,t={getSnapshot:a,value:r},a=Je.updateQueue,a===null?(a=Wu(),Je.updateQueue=a,a.stores=[t]):(r=a.stores,r===null?a.stores=[t]:r.push(t))}function X0(t,a,r,o){a.value=r,a.getSnapshot=o,J0(a)&&Z0(t)}function W0(t,a,r){return r(function(){J0(a)&&Z0(t)})}function J0(t){var a=t.getSnapshot;t=t.value;try{var r=a();return!ls(t,r)}catch{return!0}}function Z0(t){var a=Er(t,2);a!==null&&Jn(a,t,2)}function Of(t){var a=Hn();if(typeof t=="function"){var r=t;if(t=r(),kr){Be(!0);try{r()}finally{Be(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},a}function ey(t,a,r,o){return t.baseState=r,Df(t,Dt,typeof o=="function"?o:La)}function TT(t,a,r,o,f){if(nh(t))throw Error(i(485));if(t=a.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};G.T!==null?r(!0):m.isTransition=!1,o(m),r=a.pending,r===null?(m.next=a.pending=m,ty(a,m)):(m.next=r.next,a.pending=r.next=m)}}function ty(t,a){var r=a.action,o=a.payload,f=t.state;if(a.isTransition){var m=G.T,v={};G.T=v;try{var E=r(f,o),D=G.S;D!==null&&D(v,E),ny(t,a,E)}catch(K){Vf(t,a,K)}finally{m!==null&&v.types!==null&&(m.types=v.types),G.T=m}}else try{m=r(f,o),ny(t,a,m)}catch(K){Vf(t,a,K)}}function ny(t,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){sy(t,a,o)},function(o){return Vf(t,a,o)}):sy(t,a,r)}function sy(t,a,r){a.status="fulfilled",a.value=r,ay(a),t.state=r,a=t.pending,a!==null&&(r=a.next,r===a?t.pending=null:(r=r.next,a.next=r,ty(t,r)))}function Vf(t,a,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=r,ay(a),a=a.next;while(a!==o)}t.action=null}function ay(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function iy(t,a){return a}function ry(t,a){if(ht){var r=Vt.formState;if(r!==null){e:{var o=Je;if(ht){if(Ut){t:{for(var f=Ut,m=Rs;f.nodeType!==8;){if(!m){f=null;break t}if(f=Cs(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ut=Cs(f.nextSibling),o=f.data==="F!";break e}}xi(o)}o=!1}o&&(a=r[0])}}return r=Hn(),r.memoizedState=r.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iy,lastRenderedState:a},r.queue=o,r=Ny.bind(null,Je,o),o.dispatch=r,o=Of(!1),m=qf.bind(null,Je,!1,o.queue),o=Hn(),f={state:a,dispatch:null,action:t,pending:null},o.queue=f,r=TT.bind(null,Je,f,m,r),f.dispatch=r,o.memoizedState=t,[a,r,!1]}function ly(t){var a=tn();return oy(a,Dt,t)}function oy(t,a,r){if(a=Df(t,a,iy)[0],t=Zu(La)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=Wo(a)}catch(v){throw v===Rl?Fu:v}else o=a;a=tn();var f=a.queue,m=f.dispatch;return r!==a.memoizedState&&(Je.flags|=2048,Dl(9,{destroy:void 0},NT.bind(null,f,r),null)),[o,m,t]}function NT(t,a){t.action=a}function cy(t){var a=tn(),r=Dt;if(r!==null)return oy(a,r,t);tn(),a=a.memoizedState,r=tn();var o=r.queue.dispatch;return r.memoizedState=t,[a,o,!1]}function Dl(t,a,r,o){return t={tag:t,create:r,deps:o,inst:a,next:null},a=Je.updateQueue,a===null&&(a=Wu(),Je.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,a.lastEffect=t),t}function uy(){return tn().memoizedState}function eh(t,a,r,o){var f=Hn();Je.flags|=t,f.memoizedState=Dl(1|a,{destroy:void 0},r,o===void 0?null:o)}function th(t,a,r,o){var f=tn();o=o===void 0?null:o;var m=f.memoizedState.inst;Dt!==null&&o!==null&&Af(o,Dt.memoizedState.deps)?f.memoizedState=Dl(a,m,r,o):(Je.flags|=t,f.memoizedState=Dl(1|a,m,r,o))}function hy(t,a){eh(8390656,8,t,a)}function Pf(t,a){th(2048,8,t,a)}function ST(t){Je.flags|=4;var a=Je.updateQueue;if(a===null)a=Wu(),Je.updateQueue=a,a.events=[t];else{var r=a.events;r===null?a.events=[t]:r.push(t)}}function dy(t){var a=tn().memoizedState;return ST({ref:a,nextImpl:t}),function(){if((Tt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function fy(t,a){return th(4,2,t,a)}function my(t,a){return th(4,4,t,a)}function py(t,a){if(typeof a=="function"){t=t();var r=a(t);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function gy(t,a,r){r=r!=null?r.concat([t]):null,th(4,4,py.bind(null,a,t),r)}function Lf(){}function yy(t,a){var r=tn();a=a===void 0?null:a;var o=r.memoizedState;return a!==null&&Af(a,o[1])?o[0]:(r.memoizedState=[t,a],t)}function xy(t,a){var r=tn();a=a===void 0?null:a;var o=r.memoizedState;if(a!==null&&Af(a,o[1]))return o[0];if(o=t(),kr){Be(!0);try{t()}finally{Be(!1)}}return r.memoizedState=[o,a],o}function Uf(t,a,r){return r===void 0||(Pa&1073741824)!==0&&(it&261930)===0?t.memoizedState=a:(t.memoizedState=r,t=bx(),Je.lanes|=t,Ai|=t,r)}function by(t,a,r,o){return ls(r,a)?r:Cl.current!==null?(t=Uf(t,r,o),ls(t,a)||(un=!0),t):(Pa&42)===0||(Pa&1073741824)!==0&&(it&261930)===0?(un=!0,t.memoizedState=r):(t=bx(),Je.lanes|=t,Ai|=t,a)}function vy(t,a,r,o,f){var m=he.p;he.p=m!==0&&8>m?m:8;var v=G.T,E={};G.T=E,qf(t,!1,a,r);try{var D=f(),K=G.S;if(K!==null&&K(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var te=_T(D,o);Jo(t,a,te,fs(t))}else Jo(t,a,o,fs(t))}catch(ie){Jo(t,a,{then:function(){},status:"rejected",reason:ie},fs())}finally{he.p=m,v!==null&&E.types!==null&&(v.types=E.types),G.T=v}}function AT(){}function Bf(t,a,r,o){if(t.tag!==5)throw Error(i(476));var f=_y(t).queue;vy(t,f,a,we,r===null?AT:function(){return wy(t),r(o)})}function _y(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:we},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:r},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function wy(t){var a=_y(t);a.next===null&&(a=t.alternate.memoizedState),Jo(t,a.next.queue,{},fs())}function zf(){return An(pc)}function Ey(){return tn().memoizedState}function Ty(){return tn().memoizedState}function RT(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var r=fs();t=_i(r);var o=wi(a,t,r);o!==null&&(Jn(o,a,r),Yo(o,a,r)),a={cache:gf()},t.payload=a;return}a=a.return}}function jT(t,a,r){var o=fs();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},nh(t)?Sy(a,r):(r=af(t,a,r,o),r!==null&&(Jn(r,t,o),Ay(r,a,o)))}function Ny(t,a,r){var o=fs();Jo(t,a,r,o)}function Jo(t,a,r,o){var f={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(nh(t))Sy(a,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var v=a.lastRenderedState,E=m(v,r);if(f.hasEagerState=!0,f.eagerState=E,ls(E,v))return Vu(t,a,f,0),Vt===null&&Ou(),!1}catch{}if(r=af(t,a,f,o),r!==null)return Jn(r,t,o),Ay(r,a,o),!0}return!1}function qf(t,a,r,o){if(o={lane:2,revertLane:vm(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},nh(t)){if(a)throw Error(i(479))}else a=af(t,r,o,2),a!==null&&Jn(a,t,2)}function nh(t){var a=t.alternate;return t===Je||a!==null&&a===Je}function Sy(t,a){Il=Qu=!0;var r=t.pending;r===null?a.next=a:(a.next=r.next,r.next=a),t.pending=a}function Ay(t,a,r){if((r&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,r|=o,a.lanes=r,hr(t,r)}}var Zo={readContext:An,use:Ju,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Zo.useEffectEvent=Qt;var Ry={readContext:An,use:Ju,useCallback:function(t,a){return Hn().memoizedState=[t,a===void 0?null:a],t},useContext:An,useEffect:hy,useImperativeHandle:function(t,a,r){r=r!=null?r.concat([t]):null,eh(4194308,4,py.bind(null,a,t),r)},useLayoutEffect:function(t,a){return eh(4194308,4,t,a)},useInsertionEffect:function(t,a){eh(4,2,t,a)},useMemo:function(t,a){var r=Hn();a=a===void 0?null:a;var o=t();if(kr){Be(!0);try{t()}finally{Be(!1)}}return r.memoizedState=[o,a],o},useReducer:function(t,a,r){var o=Hn();if(r!==void 0){var f=r(a);if(kr){Be(!0);try{r(a)}finally{Be(!1)}}}else f=a;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=jT.bind(null,Je,t),[o.memoizedState,t]},useRef:function(t){var a=Hn();return t={current:t},a.memoizedState=t},useState:function(t){t=Of(t);var a=t.queue,r=Ny.bind(null,Je,a);return a.dispatch=r,[t.memoizedState,r]},useDebugValue:Lf,useDeferredValue:function(t,a){var r=Hn();return Uf(r,t,a)},useTransition:function(){var t=Of(!1);return t=vy.bind(null,Je,t.queue,!0,!1),Hn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,r){var o=Je,f=Hn();if(ht){if(r===void 0)throw Error(i(407));r=r()}else{if(r=a(),Vt===null)throw Error(i(349));(it&127)!==0||Q0(o,a,r)}f.memoizedState=r;var m={value:r,getSnapshot:a};return f.queue=m,hy(W0.bind(null,o,m,t),[t]),o.flags|=2048,Dl(9,{destroy:void 0},X0.bind(null,o,m,r,a),null),r},useId:function(){var t=Hn(),a=Vt.identifierPrefix;if(ht){var r=da,o=ha;r=(o&~(1<<32-Pe(o)-1)).toString(32)+r,a="_"+a+"R_"+r,r=Xu++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=wT++,a="_"+a+"r_"+r.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:zf,useFormState:ry,useActionState:ry,useOptimistic:function(t){var a=Hn();a.memoizedState=a.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=qf.bind(null,Je,!0,r),r.dispatch=a,[t,a]},useMemoCache:kf,useCacheRefresh:function(){return Hn().memoizedState=RT.bind(null,Je)},useEffectEvent:function(t){var a=Hn(),r={impl:t};return a.memoizedState=r,function(){if((Tt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Ff={readContext:An,use:Ju,useCallback:yy,useContext:An,useEffect:Pf,useImperativeHandle:gy,useInsertionEffect:fy,useLayoutEffect:my,useMemo:xy,useReducer:Zu,useRef:uy,useState:function(){return Zu(La)},useDebugValue:Lf,useDeferredValue:function(t,a){var r=tn();return by(r,Dt.memoizedState,t,a)},useTransition:function(){var t=Zu(La)[0],a=tn().memoizedState;return[typeof t=="boolean"?t:Wo(t),a]},useSyncExternalStore:K0,useId:Ey,useHostTransitionStatus:zf,useFormState:ly,useActionState:ly,useOptimistic:function(t,a){var r=tn();return ey(r,Dt,t,a)},useMemoCache:kf,useCacheRefresh:Ty};Ff.useEffectEvent=dy;var jy={readContext:An,use:Ju,useCallback:yy,useContext:An,useEffect:Pf,useImperativeHandle:gy,useInsertionEffect:fy,useLayoutEffect:my,useMemo:xy,useReducer:Mf,useRef:uy,useState:function(){return Mf(La)},useDebugValue:Lf,useDeferredValue:function(t,a){var r=tn();return Dt===null?Uf(r,t,a):by(r,Dt.memoizedState,t,a)},useTransition:function(){var t=Mf(La)[0],a=tn().memoizedState;return[typeof t=="boolean"?t:Wo(t),a]},useSyncExternalStore:K0,useId:Ey,useHostTransitionStatus:zf,useFormState:cy,useActionState:cy,useOptimistic:function(t,a){var r=tn();return Dt!==null?ey(r,Dt,t,a):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:kf,useCacheRefresh:Ty};jy.useEffectEvent=dy;function Hf(t,a,r,o){a=t.memoizedState,r=r(o,a),r=r==null?a:w({},a,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var $f={enqueueSetState:function(t,a,r){t=t._reactInternals;var o=fs(),f=_i(o);f.payload=a,r!=null&&(f.callback=r),a=wi(t,f,o),a!==null&&(Jn(a,t,o),Yo(a,t,o))},enqueueReplaceState:function(t,a,r){t=t._reactInternals;var o=fs(),f=_i(o);f.tag=1,f.payload=a,r!=null&&(f.callback=r),a=wi(t,f,o),a!==null&&(Jn(a,t,o),Yo(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var r=fs(),o=_i(r);o.tag=2,a!=null&&(o.callback=a),a=wi(t,o,r),a!==null&&(Jn(a,t,r),Yo(a,t,r))}};function Cy(t,a,r,o,f,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,v):a.prototype&&a.prototype.isPureReactComponent?!Uo(r,o)||!Uo(f,m):!0}function Iy(t,a,r,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,o),a.state!==t&&$f.enqueueReplaceState(a,a.state,null)}function Dr(t,a){var r=a;if("ref"in a){r={};for(var o in a)o!=="ref"&&(r[o]=a[o])}if(t=t.defaultProps){r===a&&(r=w({},r));for(var f in t)r[f]===void 0&&(r[f]=t[f])}return r}function ky(t){Mu(t)}function Dy(t){console.error(t)}function My(t){Mu(t)}function sh(t,a){try{var r=t.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function Oy(t,a,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Gf(t,a,r){return r=_i(r),r.tag=3,r.payload={element:null},r.callback=function(){sh(t,a)},r}function Vy(t){return t=_i(t),t.tag=3,t}function Py(t,a,r,o){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;t.payload=function(){return f(m)},t.callback=function(){Oy(a,r,o)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Oy(a,r,o),typeof f!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function CT(t,a,r,o,f){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=r.alternate,a!==null&&Nl(a,r,f,!0),r=cs.current,r!==null){switch(r.tag){case 31:case 13:return js===null?ph():r.alternate===null&&Xt===0&&(Xt=3),r.flags&=-257,r.flags|=65536,r.lanes=f,o===Hu?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([o]):a.add(o),ym(t,o,f)),!1;case 22:return r.flags|=65536,o===Hu?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([o]):r.add(o)),ym(t,o,f)),!1}throw Error(i(435,r.tag))}return ym(t,o,f),ph(),!1}if(ht)return a=cs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,o!==hf&&(t=Error(i(422),{cause:o}),qo(Ns(t,r)))):(o!==hf&&(a=Error(i(423),{cause:o}),qo(Ns(a,r))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=Ns(o,r),f=Gf(t.stateNode,o,f),wf(t,f),Xt!==4&&(Xt=2)),!1;var m=Error(i(520),{cause:o});if(m=Ns(m,r),lc===null?lc=[m]:lc.push(m),Xt!==4&&(Xt=2),a===null)return!0;o=Ns(o,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,t=f&-f,r.lanes|=t,t=Gf(r.stateNode,o,t),wf(r,t),!1;case 1:if(a=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ri===null||!Ri.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Vy(f),Py(f,t,r,o),wf(r,f),!1}r=r.return}while(r!==null);return!1}var Yf=Error(i(461)),un=!1;function Rn(t,a,r,o){a.child=t===null?z0(a,null,r,o):Ir(a,t.child,r,o)}function Ly(t,a,r,o,f){r=r.render;var m=a.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Ar(a),o=Rf(t,a,r,v,m,f),E=jf(),t!==null&&!un?(Cf(t,a,f),Ua(t,a,f)):(ht&&E&&cf(a),a.flags|=1,Rn(t,a,o,f),a.child)}function Uy(t,a,r,o,f){if(t===null){var m=r.type;return typeof m=="function"&&!rf(m)&&m.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=m,By(t,a,m,o,f)):(t=Lu(r.type,null,o,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(m=t.child,!tm(t,f)){var v=m.memoizedProps;if(r=r.compare,r=r!==null?r:Uo,r(v,o)&&t.ref===a.ref)return Ua(t,a,f)}return a.flags|=1,t=Da(m,o),t.ref=a.ref,t.return=a,a.child=t}function By(t,a,r,o,f){if(t!==null){var m=t.memoizedProps;if(Uo(m,o)&&t.ref===a.ref)if(un=!1,a.pendingProps=o=m,tm(t,f))(t.flags&131072)!==0&&(un=!0);else return a.lanes=t.lanes,Ua(t,a,f)}return Kf(t,a,r,o,f)}function zy(t,a,r,o){var f=o.children,m=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,t!==null){for(o=a.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~m}else o=0,a.child=null;return qy(t,a,m,r,o)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&qu(a,m!==null?m.cachePool:null),m!==null?H0(a,m):Tf(),$0(a);else return o=a.lanes=536870912,qy(t,a,m!==null?m.baseLanes|r:r,r,o)}else m!==null?(qu(a,m.cachePool),H0(a,m),Ti(),a.memoizedState=null):(t!==null&&qu(a,null),Tf(),Ti());return Rn(t,a,f,r),a.child}function ec(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function qy(t,a,r,o,f){var m=xf();return m=m===null?null:{parent:on._currentValue,pool:m},a.memoizedState={baseLanes:r,cachePool:m},t!==null&&qu(a,null),Tf(),$0(a),t!==null&&Nl(t,a,o,!0),a.childLanes=f,null}function ah(t,a){return a=rh({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Fy(t,a,r){return Ir(a,t.child,null,r),t=ah(a,a.pendingProps),t.flags|=2,us(a),a.memoizedState=null,t}function IT(t,a,r){var o=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(ht){if(o.mode==="hidden")return t=ah(a,o),a.lanes=536870912,ec(null,t);if(Sf(a),(t=Ut)?(t=tb(t,Rs),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:gi!==null?{id:ha,overflow:da}:null,retryLane:536870912,hydrationErrors:null},r=S0(t),r.return=a,a.child=r,Sn=a,Ut=null)):t=null,t===null)throw xi(a);return a.lanes=536870912,null}return ah(a,o)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(Sf(a),f)if(a.flags&256)a.flags&=-257,a=Fy(t,a,r);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(un||Nl(t,a,r,!1),f=(r&t.childLanes)!==0,un||f){if(o=Vt,o!==null&&(v=ii(o,r),v!==0&&v!==m.retryLane))throw m.retryLane=v,Er(t,v),Jn(o,t,v),Yf;ph(),a=Fy(t,a,r)}else t=m.treeContext,Ut=Cs(v.nextSibling),Sn=a,ht=!0,yi=null,Rs=!1,t!==null&&j0(a,t),a=ah(a,o),a.flags|=4096;return a}return t=Da(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function ih(t,a){var r=a.ref;if(r===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(a.flags|=4194816)}}function Kf(t,a,r,o,f){return Ar(a),r=Rf(t,a,r,o,void 0,f),o=jf(),t!==null&&!un?(Cf(t,a,f),Ua(t,a,f)):(ht&&o&&cf(a),a.flags|=1,Rn(t,a,r,f),a.child)}function Hy(t,a,r,o,f,m){return Ar(a),a.updateQueue=null,r=Y0(a,o,r,f),G0(t),o=jf(),t!==null&&!un?(Cf(t,a,m),Ua(t,a,m)):(ht&&o&&cf(a),a.flags|=1,Rn(t,a,r,m),a.child)}function $y(t,a,r,o,f){if(Ar(a),a.stateNode===null){var m=_l,v=r.contextType;typeof v=="object"&&v!==null&&(m=An(v)),m=new r(o,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=$f,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=o,m.state=a.memoizedState,m.refs={},vf(a),v=r.contextType,m.context=typeof v=="object"&&v!==null?An(v):_l,m.state=a.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(Hf(a,r,v,o),m.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&$f.enqueueReplaceState(m,m.state,null),Qo(a,o,m,f),Ko(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){m=a.stateNode;var E=a.memoizedProps,D=Dr(r,E);m.props=D;var K=m.context,te=r.contextType;v=_l,typeof te=="object"&&te!==null&&(v=An(te));var ie=r.getDerivedStateFromProps;te=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,te||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||K!==v)&&Iy(a,m,o,v),vi=!1;var W=a.memoizedState;m.state=W,Qo(a,o,m,f),Ko(),K=a.memoizedState,E||W!==K||vi?(typeof ie=="function"&&(Hf(a,r,ie,o),K=a.memoizedState),(D=vi||Cy(a,r,D,o,W,K,v))?(te||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=K),m.props=o,m.state=K,m.context=v,o=D):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{m=a.stateNode,_f(t,a),v=a.memoizedProps,te=Dr(r,v),m.props=te,ie=a.pendingProps,W=m.context,K=r.contextType,D=_l,typeof K=="object"&&K!==null&&(D=An(K)),E=r.getDerivedStateFromProps,(K=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==ie||W!==D)&&Iy(a,m,o,D),vi=!1,W=a.memoizedState,m.state=W,Qo(a,o,m,f),Ko();var Z=a.memoizedState;v!==ie||W!==Z||vi||t!==null&&t.dependencies!==null&&Bu(t.dependencies)?(typeof E=="function"&&(Hf(a,r,E,o),Z=a.memoizedState),(te=vi||Cy(a,r,te,o,W,Z,D)||t!==null&&t.dependencies!==null&&Bu(t.dependencies))?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,Z,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,Z,D)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=Z),m.props=o,m.state=Z,m.context=D,o=te):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&W===t.memoizedState||(a.flags|=1024),o=!1)}return m=o,ih(t,a),o=(a.flags&128)!==0,m||o?(m=a.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,t!==null&&o?(a.child=Ir(a,t.child,null,f),a.child=Ir(a,null,r,f)):Rn(t,a,r,f),a.memoizedState=m.state,t=a.child):t=Ua(t,a,f),t}function Gy(t,a,r,o){return Nr(),a.flags|=256,Rn(t,a,r,o),a.child}var Qf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xf(t){return{baseLanes:t,cachePool:O0()}}function Wf(t,a,r){return t=t!==null?t.childLanes&~r:0,a&&(t|=ds),t}function Yy(t,a,r){var o=a.pendingProps,f=!1,m=(a.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(en.current&2)!==0),v&&(f=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(ht){if(f?Ei(a):Ti(),(t=Ut)?(t=tb(t,Rs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:gi!==null?{id:ha,overflow:da}:null,retryLane:536870912,hydrationErrors:null},r=S0(t),r.return=a,a.child=r,Sn=a,Ut=null)):t=null,t===null)throw xi(a);return Dm(t)?a.lanes=32:a.lanes=536870912,null}var E=o.children;return o=o.fallback,f?(Ti(),f=a.mode,E=rh({mode:"hidden",children:E},f),o=Tr(o,f,r,null),E.return=a,o.return=a,E.sibling=o,a.child=E,o=a.child,o.memoizedState=Xf(r),o.childLanes=Wf(t,v,r),a.memoizedState=Qf,ec(null,o)):(Ei(a),Jf(a,E))}var D=t.memoizedState;if(D!==null&&(E=D.dehydrated,E!==null)){if(m)a.flags&256?(Ei(a),a.flags&=-257,a=Zf(t,a,r)):a.memoizedState!==null?(Ti(),a.child=t.child,a.flags|=128,a=null):(Ti(),E=o.fallback,f=a.mode,o=rh({mode:"visible",children:o.children},f),E=Tr(E,f,r,null),E.flags|=2,o.return=a,E.return=a,o.sibling=E,a.child=o,Ir(a,t.child,null,r),o=a.child,o.memoizedState=Xf(r),o.childLanes=Wf(t,v,r),a.memoizedState=Qf,a=ec(null,o));else if(Ei(a),Dm(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var K=v.dgst;v=K,o=Error(i(419)),o.stack="",o.digest=v,qo({value:o,source:null,stack:null}),a=Zf(t,a,r)}else if(un||Nl(t,a,r,!1),v=(r&t.childLanes)!==0,un||v){if(v=Vt,v!==null&&(o=ii(v,r),o!==0&&o!==D.retryLane))throw D.retryLane=o,Er(t,o),Jn(v,t,o),Yf;km(E)||ph(),a=Zf(t,a,r)}else km(E)?(a.flags|=192,a.child=t.child,a=null):(t=D.treeContext,Ut=Cs(E.nextSibling),Sn=a,ht=!0,yi=null,Rs=!1,t!==null&&j0(a,t),a=Jf(a,o.children),a.flags|=4096);return a}return f?(Ti(),E=o.fallback,f=a.mode,D=t.child,K=D.sibling,o=Da(D,{mode:"hidden",children:o.children}),o.subtreeFlags=D.subtreeFlags&65011712,K!==null?E=Da(K,E):(E=Tr(E,f,r,null),E.flags|=2),E.return=a,o.return=a,o.sibling=E,a.child=o,ec(null,o),o=a.child,E=t.child.memoizedState,E===null?E=Xf(r):(f=E.cachePool,f!==null?(D=on._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=O0(),E={baseLanes:E.baseLanes|r,cachePool:f}),o.memoizedState=E,o.childLanes=Wf(t,v,r),a.memoizedState=Qf,ec(t.child,o)):(Ei(a),r=t.child,t=r.sibling,r=Da(r,{mode:"visible",children:o.children}),r.return=a,r.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=r,a.memoizedState=null,r)}function Jf(t,a){return a=rh({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function rh(t,a){return t=os(22,t,null,a),t.lanes=0,t}function Zf(t,a,r){return Ir(a,t.child,null,r),t=Jf(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Ky(t,a,r){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),mf(t.return,a,r)}function em(t,a,r,o,f,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:f,treeForkCount:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=r,v.tailMode=f,v.treeForkCount=m)}function Qy(t,a,r){var o=a.pendingProps,f=o.revealOrder,m=o.tail;o=o.children;var v=en.current,E=(v&2)!==0;if(E?(v=v&1|2,a.flags|=128):v&=1,de(en,v),Rn(t,a,o,r),o=ht?zo:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ky(t,r,a);else if(t.tag===19)Ky(t,r,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(r=a.child,f=null;r!==null;)t=r.alternate,t!==null&&Ku(t)===null&&(f=r),r=r.sibling;r=f,r===null?(f=a.child,a.child=null):(f=r.sibling,r.sibling=null),em(a,!1,f,r,m,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Ku(t)===null){a.child=f;break}t=f.sibling,f.sibling=r,r=f,f=t}em(a,!0,r,null,m,o);break;case"together":em(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function Ua(t,a,r){if(t!==null&&(a.dependencies=t.dependencies),Ai|=a.lanes,(r&a.childLanes)===0)if(t!==null){if(Nl(t,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,r=Da(t,t.pendingProps),a.child=r,r.return=a;t.sibling!==null;)t=t.sibling,r=r.sibling=Da(t,t.pendingProps),r.return=a;r.sibling=null}return a.child}function tm(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Bu(t)))}function kT(t,a,r){switch(a.tag){case 3:De(a,a.stateNode.containerInfo),bi(a,on,t.memoizedState.cache),Nr();break;case 27:case 5:Fe(a);break;case 4:De(a,a.stateNode.containerInfo);break;case 10:bi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Sf(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(Ei(a),a.flags|=128,null):(r&a.child.childLanes)!==0?Yy(t,a,r):(Ei(a),t=Ua(t,a,r),t!==null?t.sibling:null);Ei(a);break;case 19:var f=(t.flags&128)!==0;if(o=(r&a.childLanes)!==0,o||(Nl(t,a,r,!1),o=(r&a.childLanes)!==0),f){if(o)return Qy(t,a,r);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),de(en,en.current),o)break;return null;case 22:return a.lanes=0,zy(t,a,r,a.pendingProps);case 24:bi(a,on,t.memoizedState.cache)}return Ua(t,a,r)}function Xy(t,a,r){if(t!==null)if(t.memoizedProps!==a.pendingProps)un=!0;else{if(!tm(t,r)&&(a.flags&128)===0)return un=!1,kT(t,a,r);un=(t.flags&131072)!==0}else un=!1,ht&&(a.flags&1048576)!==0&&R0(a,zo,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=jr(a.elementType),a.type=t,typeof t=="function")rf(t)?(o=Dr(t,o),a.tag=1,a=$y(null,a,t,o,r)):(a.tag=0,a=Kf(null,a,t,o,r));else{if(t!=null){var f=t.$$typeof;if(f===ue){a.tag=11,a=Ly(null,a,t,o,r);break e}else if(f===S){a.tag=14,a=Uy(null,a,t,o,r);break e}}throw a=Me(t)||t,Error(i(306,a,""))}}return a;case 0:return Kf(t,a,a.type,a.pendingProps,r);case 1:return o=a.type,f=Dr(o,a.pendingProps),$y(t,a,o,f,r);case 3:e:{if(De(a,a.stateNode.containerInfo),t===null)throw Error(i(387));o=a.pendingProps;var m=a.memoizedState;f=m.element,_f(t,a),Qo(a,o,null,r);var v=a.memoizedState;if(o=v.cache,bi(a,on,o),o!==m.cache&&pf(a,[on],r,!0),Ko(),o=v.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=Gy(t,a,o,r);break e}else if(o!==f){f=Ns(Error(i(424)),a),qo(f),a=Gy(t,a,o,r);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Ut=Cs(t.firstChild),Sn=a,ht=!0,yi=null,Rs=!0,r=z0(a,null,o,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Nr(),o===f){a=Ua(t,a,r);break e}Rn(t,a,o,r)}a=a.child}return a;case 26:return ih(t,a),t===null?(r=lb(a.type,null,a.pendingProps,null))?a.memoizedState=r:ht||(r=a.type,t=a.pendingProps,o=wh(Ve.current).createElement(r),o[an]=a,o[_n]=t,jn(o,r,t),rn(o),a.stateNode=o):a.memoizedState=lb(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Fe(a),t===null&&ht&&(o=a.stateNode=ab(a.type,a.pendingProps,Ve.current),Sn=a,Rs=!0,f=Ut,ki(a.type)?(Mm=f,Ut=Cs(o.firstChild)):Ut=f),Rn(t,a,a.pendingProps.children,r),ih(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&ht&&((f=o=Ut)&&(o=oN(o,a.type,a.pendingProps,Rs),o!==null?(a.stateNode=o,Sn=a,Ut=Cs(o.firstChild),Rs=!1,f=!0):f=!1),f||xi(a)),Fe(a),f=a.type,m=a.pendingProps,v=t!==null?t.memoizedProps:null,o=m.children,jm(f,m)?o=null:v!==null&&jm(f,v)&&(a.flags|=32),a.memoizedState!==null&&(f=Rf(t,a,ET,null,null,r),pc._currentValue=f),ih(t,a),Rn(t,a,o,r),a.child;case 6:return t===null&&ht&&((t=r=Ut)&&(r=cN(r,a.pendingProps,Rs),r!==null?(a.stateNode=r,Sn=a,Ut=null,t=!0):t=!1),t||xi(a)),null;case 13:return Yy(t,a,r);case 4:return De(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=Ir(a,null,o,r):Rn(t,a,o,r),a.child;case 11:return Ly(t,a,a.type,a.pendingProps,r);case 7:return Rn(t,a,a.pendingProps,r),a.child;case 8:return Rn(t,a,a.pendingProps.children,r),a.child;case 12:return Rn(t,a,a.pendingProps.children,r),a.child;case 10:return o=a.pendingProps,bi(a,a.type,o.value),Rn(t,a,o.children,r),a.child;case 9:return f=a.type._context,o=a.pendingProps.children,Ar(a),f=An(f),o=o(f),a.flags|=1,Rn(t,a,o,r),a.child;case 14:return Uy(t,a,a.type,a.pendingProps,r);case 15:return By(t,a,a.type,a.pendingProps,r);case 19:return Qy(t,a,r);case 31:return IT(t,a,r);case 22:return zy(t,a,r,a.pendingProps);case 24:return Ar(a),o=An(on),t===null?(f=xf(),f===null&&(f=Vt,m=gf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),a.memoizedState={parent:o,cache:f},vf(a),bi(a,on,f)):((t.lanes&r)!==0&&(_f(t,a),Qo(a,null,null,r),Ko()),f=t.memoizedState,m=a.memoizedState,f.parent!==o?(f={parent:o,cache:o},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),bi(a,on,o)):(o=m.cache,bi(a,on,o),o!==f.cache&&pf(a,[on],r,!0))),Rn(t,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ba(t){t.flags|=4}function nm(t,a,r,o,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Ex())t.flags|=8192;else throw Cr=Hu,bf}else t.flags&=-16777217}function Wy(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!db(a))if(Ex())t.flags|=8192;else throw Cr=Hu,bf}function lh(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Mn():536870912,t.lanes|=a,Pl|=a)}function tc(t,a){if(!ht)switch(t.tailMode){case"hidden":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Bt(t){var a=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(a)for(var f=t.child;f!==null;)r|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)r|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=r,a}function DT(t,a,r){var o=a.pendingProps;switch(uf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(a),null;case 1:return Bt(a),null;case 3:return r=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Va(on),Ae(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Tl(a)?Ba(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,df())),Bt(a),null;case 26:var f=a.type,m=a.memoizedState;return t===null?(Ba(a),m!==null?(Bt(a),Wy(a,m)):(Bt(a),nm(a,f,null,o,r))):m?m!==t.memoizedState?(Ba(a),Bt(a),Wy(a,m)):(Bt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&Ba(a),Bt(a),nm(a,f,t,o,r)),null;case 27:if(tt(a),r=Ve.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ba(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return Bt(a),null}t=ge.current,Tl(a)?C0(a):(t=ab(f,o,r),a.stateNode=t,Ba(a))}return Bt(a),null;case 5:if(tt(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ba(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return Bt(a),null}if(m=ge.current,Tl(a))C0(a);else{var v=wh(Ve.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?v.createElement(f,{is:o.is}):v.createElement(f)}}m[an]=a,m[_n]=o;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=m;e:switch(jn(m,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ba(a)}}return Bt(a),nm(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,r),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Ba(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(i(166));if(t=Ve.current,Tl(a)){if(t=a.stateNode,r=a.memoizedProps,o=null,f=Sn,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[an]=a,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||Yx(t.nodeValue,r)),t||xi(a,!0)}else t=wh(t).createTextNode(o),t[an]=a,a.stateNode=t}return Bt(a),null;case 31:if(r=a.memoizedState,t===null||t.memoizedState!==null){if(o=Tl(a),r!==null){if(t===null){if(!o)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[an]=a}else Nr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),t=!1}else r=df(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return a.flags&256?(us(a),a):(us(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Bt(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=Tl(a),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[an]=a}else Nr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Bt(a),f=!1}else f=df(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(us(a),a):(us(a),null)}return us(a),(a.flags&128)!==0?(a.lanes=r,a):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=a.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048)),r!==t&&r&&(a.child.flags|=8192),lh(a,a.updateQueue),Bt(a),null);case 4:return Ae(),t===null&&Tm(a.stateNode.containerInfo),Bt(a),null;case 10:return Va(a.type),Bt(a),null;case 19:if(ne(en),o=a.memoizedState,o===null)return Bt(a),null;if(f=(a.flags&128)!==0,m=o.rendering,m===null)if(f)tc(o,!1);else{if(Xt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(m=Ku(t),m!==null){for(a.flags|=128,tc(o,!1),t=m.updateQueue,a.updateQueue=t,lh(a,t),a.subtreeFlags=0,t=r,r=a.child;r!==null;)N0(r,t),r=r.sibling;return de(en,en.current&1|2),ht&&Ma(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&at()>dh&&(a.flags|=128,f=!0,tc(o,!1),a.lanes=4194304)}else{if(!f)if(t=Ku(m),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,lh(a,t),tc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!ht)return Bt(a),null}else 2*at()-o.renderingStartTime>dh&&r!==536870912&&(a.flags|=128,f=!0,tc(o,!1),a.lanes=4194304);o.isBackwards?(m.sibling=a.child,a.child=m):(t=o.last,t!==null?t.sibling=m:a.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=at(),t.sibling=null,r=en.current,de(en,f?r&1|2:r&1),ht&&Ma(a,o.treeForkCount),t):(Bt(a),null);case 22:case 23:return us(a),Nf(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(r&536870912)!==0&&(a.flags&128)===0&&(Bt(a),a.subtreeFlags&6&&(a.flags|=8192)):Bt(a),r=a.updateQueue,r!==null&&lh(a,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==r&&(a.flags|=2048),t!==null&&ne(Rr),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Va(on),Bt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function MT(t,a){switch(uf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Va(on),Ae(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return tt(a),null;case 31:if(a.memoizedState!==null){if(us(a),a.alternate===null)throw Error(i(340));Nr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(us(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Nr()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return ne(en),null;case 4:return Ae(),null;case 10:return Va(a.type),null;case 22:case 23:return us(a),Nf(),t!==null&&ne(Rr),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Va(on),null;case 25:return null;default:return null}}function Jy(t,a){switch(uf(a),a.tag){case 3:Va(on),Ae();break;case 26:case 27:case 5:tt(a);break;case 4:Ae();break;case 31:a.memoizedState!==null&&us(a);break;case 13:us(a);break;case 19:ne(en);break;case 10:Va(a.type);break;case 22:case 23:us(a),Nf(),t!==null&&ne(Rr);break;case 24:Va(on)}}function nc(t,a){try{var r=a.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var f=o.next;r=f;do{if((r.tag&t)===t){o=void 0;var m=r.create,v=r.inst;o=m(),v.destroy=o}r=r.next}while(r!==f)}}catch(E){Ct(a,a.return,E)}}function Ni(t,a,r){try{var o=a.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var m=f.next;o=m;do{if((o.tag&t)===t){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=a;var D=r,K=E;try{K()}catch(te){Ct(f,D,te)}}}o=o.next}while(o!==m)}}catch(te){Ct(a,a.return,te)}}function Zy(t){var a=t.updateQueue;if(a!==null){var r=t.stateNode;try{F0(a,r)}catch(o){Ct(t,t.return,o)}}}function ex(t,a,r){r.props=Dr(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){Ct(t,a,o)}}function sc(t,a){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(f){Ct(t,a,f)}}function fa(t,a){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(f){Ct(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Ct(t,a,f)}else r.current=null}function tx(t){var a=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(f){Ct(t,t.return,f)}}function sm(t,a,r){try{var o=t.stateNode;nN(o,t.type,r,a),o[_n]=a}catch(f){Ct(t,t.return,f)}}function nx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ki(t.type)||t.tag===4}function am(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ki(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function im(t,a,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(t),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=Ls));else if(o!==4&&(o===27&&ki(t.type)&&(r=t.stateNode,a=null),t=t.child,t!==null))for(im(t,a,r),t=t.sibling;t!==null;)im(t,a,r),t=t.sibling}function oh(t,a,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?r.insertBefore(t,a):r.appendChild(t);else if(o!==4&&(o===27&&ki(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(oh(t,a,r),t=t.sibling;t!==null;)oh(t,a,r),t=t.sibling}function sx(t){var a=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);jn(a,o,r),a[an]=t,a[_n]=r}catch(m){Ct(t,t.return,m)}}var za=!1,hn=!1,rm=!1,ax=typeof WeakSet=="function"?WeakSet:Set,En=null;function OT(t,a){if(t=t.containerInfo,Am=jh,t=g0(t),Jd(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var f=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var v=0,E=-1,D=-1,K=0,te=0,ie=t,W=null;t:for(;;){for(var Z;ie!==r||f!==0&&ie.nodeType!==3||(E=v+f),ie!==m||o!==0&&ie.nodeType!==3||(D=v+o),ie.nodeType===3&&(v+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)W=ie,ie=Z;for(;;){if(ie===t)break t;if(W===r&&++K===f&&(E=v),W===m&&++te===o&&(D=v),(Z=ie.nextSibling)!==null)break;ie=W,W=ie.parentNode}ie=Z}r=E===-1||D===-1?null:{start:E,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(Rm={focusedElem:t,selectionRange:r},jh=!1,En=a;En!==null;)if(a=En,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,En=t;else for(;En!==null;){switch(a=En,m=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)f=t[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,r=a,f=m.memoizedProps,m=m.memoizedState,o=r.stateNode;try{var Ee=Dr(r.type,f);t=o.getSnapshotBeforeUpdate(Ee,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ue){Ct(r,r.return,Ue)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,r=t.nodeType,r===9)Im(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Im(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,En=t;break}En=a.return}}function ix(t,a,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Fa(t,r),o&4&&nc(5,r);break;case 1:if(Fa(t,r),o&4)if(t=r.stateNode,a===null)try{t.componentDidMount()}catch(v){Ct(r,r.return,v)}else{var f=Dr(r.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ct(r,r.return,v)}}o&64&&Zy(r),o&512&&sc(r,r.return);break;case 3:if(Fa(t,r),o&64&&(t=r.updateQueue,t!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{F0(t,a)}catch(v){Ct(r,r.return,v)}}break;case 27:a===null&&o&4&&sx(r);case 26:case 5:Fa(t,r),a===null&&o&4&&tx(r),o&512&&sc(r,r.return);break;case 12:Fa(t,r);break;case 31:Fa(t,r),o&4&&ox(t,r);break;case 13:Fa(t,r),o&4&&cx(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=HT.bind(null,r),uN(t,r))));break;case 22:if(o=r.memoizedState!==null||za,!o){a=a!==null&&a.memoizedState!==null||hn,f=za;var m=hn;za=o,(hn=a)&&!m?Ha(t,r,(r.subtreeFlags&8772)!==0):Fa(t,r),za=f,hn=m}break;case 30:break;default:Fa(t,r)}}function rx(t){var a=t.alternate;a!==null&&(t.alternate=null,rx(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&ll(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ft=null,Kn=!1;function qa(t,a,r){for(r=r.child;r!==null;)lx(t,a,r),r=r.sibling}function lx(t,a,r){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(ce,r)}catch{}switch(r.tag){case 26:hn||fa(r,a),qa(t,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:hn||fa(r,a);var o=Ft,f=Kn;ki(r.type)&&(Ft=r.stateNode,Kn=!1),qa(t,a,r),dc(r.stateNode),Ft=o,Kn=f;break;case 5:hn||fa(r,a);case 6:if(o=Ft,f=Kn,Ft=null,qa(t,a,r),Ft=o,Kn=f,Ft!==null)if(Kn)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(r.stateNode)}catch(m){Ct(r,a,m)}else try{Ft.removeChild(r.stateNode)}catch(m){Ct(r,a,m)}break;case 18:Ft!==null&&(Kn?(t=Ft,Zx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),$l(t)):Zx(Ft,r.stateNode));break;case 4:o=Ft,f=Kn,Ft=r.stateNode.containerInfo,Kn=!0,qa(t,a,r),Ft=o,Kn=f;break;case 0:case 11:case 14:case 15:Ni(2,r,a),hn||Ni(4,r,a),qa(t,a,r);break;case 1:hn||(fa(r,a),o=r.stateNode,typeof o.componentWillUnmount=="function"&&ex(r,a,o)),qa(t,a,r);break;case 21:qa(t,a,r);break;case 22:hn=(o=hn)||r.memoizedState!==null,qa(t,a,r),hn=o;break;default:qa(t,a,r)}}function ox(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{$l(t)}catch(r){Ct(a,a.return,r)}}}function cx(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{$l(t)}catch(r){Ct(a,a.return,r)}}function VT(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new ax),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new ax),a;default:throw Error(i(435,t.tag))}}function ch(t,a){var r=VT(t);a.forEach(function(o){if(!r.has(o)){r.add(o);var f=$T.bind(null,t,o);o.then(f,f)}})}function Qn(t,a){var r=a.deletions;if(r!==null)for(var o=0;o<r.length;o++){var f=r[o],m=t,v=a,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(ki(E.type)){Ft=E.stateNode,Kn=!1;break e}break;case 5:Ft=E.stateNode,Kn=!1;break e;case 3:case 4:Ft=E.stateNode.containerInfo,Kn=!0;break e}E=E.return}if(Ft===null)throw Error(i(160));lx(m,v,f),Ft=null,Kn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)ux(a,t),a=a.sibling}var Hs=null;function ux(t,a){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Qn(a,t),Xn(t),o&4&&(Ni(3,t,t.return),nc(3,t),Ni(5,t,t.return));break;case 1:Qn(a,t),Xn(t),o&512&&(hn||r===null||fa(r,r.return)),o&64&&za&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var f=Hs;if(Qn(a,t),Xn(t),o&512&&(hn||r===null||fa(r,r.return)),o&4){var m=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Zs]||m[an]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(o),f.head.insertBefore(m,f.querySelector("head > title"))),jn(m,o,r),m[an]=t,rn(m),o=m;break e;case"link":var v=ub("link","href",f).get(o+(r.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(E,1);break t}}m=f.createElement(o),jn(m,o,r),f.head.appendChild(m);break;case"meta":if(v=ub("meta","content",f).get(o+(r.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(E,1);break t}}m=f.createElement(o),jn(m,o,r),f.head.appendChild(m);break;default:throw Error(i(468,o))}m[an]=t,rn(m),o=m}t.stateNode=o}else hb(f,t.type,t.stateNode);else t.stateNode=cb(f,o,t.memoizedProps);else m!==o?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,o===null?hb(f,t.type,t.stateNode):cb(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&sm(t,t.memoizedProps,r.memoizedProps)}break;case 27:Qn(a,t),Xn(t),o&512&&(hn||r===null||fa(r,r.return)),r!==null&&o&4&&sm(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Qn(a,t),Xn(t),o&512&&(hn||r===null||fa(r,r.return)),t.flags&32){f=t.stateNode;try{Yn(f,"")}catch(Ee){Ct(t,t.return,Ee)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,sm(t,f,r!==null?r.memoizedProps:f)),o&1024&&(rm=!0);break;case 6:if(Qn(a,t),Xn(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(Ee){Ct(t,t.return,Ee)}}break;case 3:if(Nh=null,f=Hs,Hs=Eh(a.containerInfo),Qn(a,t),Hs=f,Xn(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{$l(a.containerInfo)}catch(Ee){Ct(t,t.return,Ee)}rm&&(rm=!1,hx(t));break;case 4:o=Hs,Hs=Eh(t.stateNode.containerInfo),Qn(a,t),Xn(t),Hs=o;break;case 12:Qn(a,t),Xn(t);break;case 31:Qn(a,t),Xn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ch(t,o)));break;case 13:Qn(a,t),Xn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(hh=at()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ch(t,o)));break;case 22:f=t.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,K=za,te=hn;if(za=K||f,hn=te||D,Qn(a,t),hn=te,za=K,Xn(t),o&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(r===null||D||za||hn||Mr(t)),r=null,a=t;;){if(a.tag===5||a.tag===26){if(r===null){D=r=a;try{if(m=D.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=D.stateNode;var ie=D.memoizedProps.style,W=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;E.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Ee){Ct(D,D.return,Ee)}}}else if(a.tag===6){if(r===null){D=a;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(Ee){Ct(D,D.return,Ee)}}}else if(a.tag===18){if(r===null){D=a;try{var Z=D.stateNode;f?eb(Z,!0):eb(D.stateNode,!1)}catch(Ee){Ct(D,D.return,Ee)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,ch(t,r))));break;case 19:Qn(a,t),Xn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ch(t,o)));break;case 30:break;case 21:break;default:Qn(a,t),Xn(t)}}function Xn(t){var a=t.flags;if(a&2){try{for(var r,o=t.return;o!==null;){if(nx(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var f=r.stateNode,m=am(t);oh(t,m,f);break;case 5:var v=r.stateNode;r.flags&32&&(Yn(v,""),r.flags&=-33);var E=am(t);oh(t,E,v);break;case 3:case 4:var D=r.stateNode.containerInfo,K=am(t);im(t,K,D);break;default:throw Error(i(161))}}catch(te){Ct(t,t.return,te)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function hx(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;hx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Fa(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ix(t,a.alternate,a),a=a.sibling}function Mr(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Ni(4,a,a.return),Mr(a);break;case 1:fa(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&ex(a,a.return,r),Mr(a);break;case 27:dc(a.stateNode);case 26:case 5:fa(a,a.return),Mr(a);break;case 22:a.memoizedState===null&&Mr(a);break;case 30:Mr(a);break;default:Mr(a)}t=t.sibling}}function Ha(t,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,f=t,m=a,v=m.flags;switch(m.tag){case 0:case 11:case 15:Ha(f,m,r),nc(4,m);break;case 1:if(Ha(f,m,r),o=m,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){Ct(o,o.return,K)}if(o=m,f=o.updateQueue,f!==null){var E=o.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)q0(D[f],E)}catch(K){Ct(o,o.return,K)}}r&&v&64&&Zy(m),sc(m,m.return);break;case 27:sx(m);case 26:case 5:Ha(f,m,r),r&&o===null&&v&4&&tx(m),sc(m,m.return);break;case 12:Ha(f,m,r);break;case 31:Ha(f,m,r),r&&v&4&&ox(f,m);break;case 13:Ha(f,m,r),r&&v&4&&cx(f,m);break;case 22:m.memoizedState===null&&Ha(f,m,r),sc(m,m.return);break;case 30:break;default:Ha(f,m,r)}a=a.sibling}}function lm(t,a){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Fo(r))}function om(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Fo(t))}function $s(t,a,r,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)dx(t,a,r,o),a=a.sibling}function dx(t,a,r,o){var f=a.flags;switch(a.tag){case 0:case 11:case 15:$s(t,a,r,o),f&2048&&nc(9,a);break;case 1:$s(t,a,r,o);break;case 3:$s(t,a,r,o),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Fo(t)));break;case 12:if(f&2048){$s(t,a,r,o),t=a.stateNode;try{var m=a.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){Ct(a,a.return,D)}}else $s(t,a,r,o);break;case 31:$s(t,a,r,o);break;case 13:$s(t,a,r,o);break;case 23:break;case 22:m=a.stateNode,v=a.alternate,a.memoizedState!==null?m._visibility&2?$s(t,a,r,o):ac(t,a):m._visibility&2?$s(t,a,r,o):(m._visibility|=2,Ml(t,a,r,o,(a.subtreeFlags&10256)!==0||!1)),f&2048&&lm(v,a);break;case 24:$s(t,a,r,o),f&2048&&om(a.alternate,a);break;default:$s(t,a,r,o)}}function Ml(t,a,r,o,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var m=t,v=a,E=r,D=o,K=v.flags;switch(v.tag){case 0:case 11:case 15:Ml(m,v,E,D,f),nc(8,v);break;case 23:break;case 22:var te=v.stateNode;v.memoizedState!==null?te._visibility&2?Ml(m,v,E,D,f):ac(m,v):(te._visibility|=2,Ml(m,v,E,D,f)),f&&K&2048&&lm(v.alternate,v);break;case 24:Ml(m,v,E,D,f),f&&K&2048&&om(v.alternate,v);break;default:Ml(m,v,E,D,f)}a=a.sibling}}function ac(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=t,o=a,f=o.flags;switch(o.tag){case 22:ac(r,o),f&2048&&lm(o.alternate,o);break;case 24:ac(r,o),f&2048&&om(o.alternate,o);break;default:ac(r,o)}a=a.sibling}}var ic=8192;function Ol(t,a,r){if(t.subtreeFlags&ic)for(t=t.child;t!==null;)fx(t,a,r),t=t.sibling}function fx(t,a,r){switch(t.tag){case 26:Ol(t,a,r),t.flags&ic&&t.memoizedState!==null&&wN(r,Hs,t.memoizedState,t.memoizedProps);break;case 5:Ol(t,a,r);break;case 3:case 4:var o=Hs;Hs=Eh(t.stateNode.containerInfo),Ol(t,a,r),Hs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=ic,ic=16777216,Ol(t,a,r),ic=o):Ol(t,a,r));break;default:Ol(t,a,r)}}function mx(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function rc(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var o=a[r];En=o,gx(o,t)}mx(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)px(t),t=t.sibling}function px(t){switch(t.tag){case 0:case 11:case 15:rc(t),t.flags&2048&&Ni(9,t,t.return);break;case 3:rc(t);break;case 12:rc(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,uh(t)):rc(t);break;default:rc(t)}}function uh(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var o=a[r];En=o,gx(o,t)}mx(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Ni(8,a,a.return),uh(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,uh(a));break;default:uh(a)}t=t.sibling}}function gx(t,a){for(;En!==null;){var r=En;switch(r.tag){case 0:case 11:case 15:Ni(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Fo(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,En=o;else e:for(r=t;En!==null;){o=En;var f=o.sibling,m=o.return;if(rx(o),o===r){En=null;break e}if(f!==null){f.return=m,En=f;break e}En=m}}}var PT={getCacheForType:function(t){var a=An(on),r=a.data.get(t);return r===void 0&&(r=t(),a.data.set(t,r)),r},cacheSignal:function(){return An(on).controller.signal}},LT=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Vt=null,nt=null,it=0,jt=0,hs=null,Si=!1,Vl=!1,cm=!1,$a=0,Xt=0,Ai=0,Or=0,um=0,ds=0,Pl=0,lc=null,Wn=null,hm=!1,hh=0,yx=0,dh=1/0,fh=null,Ri=null,xn=0,ji=null,Ll=null,Ga=0,dm=0,fm=null,xx=null,oc=0,mm=null;function fs(){return(Tt&2)!==0&&it!==0?it&-it:G.T!==null?vm():mu()}function bx(){if(ds===0)if((it&536870912)===0||ht){var t=vn;vn<<=1,(vn&3932160)===0&&(vn=262144),ds=t}else ds=536870912;return t=cs.current,t!==null&&(t.flags|=32),ds}function Jn(t,a,r){(t===Vt&&(jt===2||jt===9)||t.cancelPendingCommit!==null)&&(Ul(t,0),Ci(t,it,ds,!1)),On(t,r),((Tt&2)===0||t!==Vt)&&(t===Vt&&((Tt&2)===0&&(Or|=r),Xt===4&&Ci(t,it,ds,!1)),ma(t))}function vx(t,a,r){if((Tt&6)!==0)throw Error(i(327));var o=!r&&(a&127)===0&&(a&t.expiredLanes)===0||qn(t,a),f=o?zT(t,a):gm(t,a,!0),m=o;do{if(f===0){Vl&&!o&&Ci(t,a,0,!1);break}else{if(r=t.current.alternate,m&&!UT(r)){f=gm(t,a,!1),m=!1;continue}if(f===2){if(m=a,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var E=t;f=lc;var D=E.current.memoizedState.isDehydrated;if(D&&(Ul(E,v).flags|=256),v=gm(E,v,!1),v!==2){if(cm&&!D){E.errorRecoveryDisabledLanes|=m,Or|=m,f=4;break e}m=Wn,Wn=f,m!==null&&(Wn===null?Wn=m:Wn.push.apply(Wn,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Ul(t,0),Ci(t,a,0,!0);break}e:{switch(o=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Ci(o,a,ds,!Si);break e;case 2:Wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=hh+300-at(),10<f)){if(Ci(o,a,ds,!Si),Dn(o,0,!0)!==0)break e;Ga=a,o.timeoutHandle=Wx(_x.bind(null,o,r,Wn,fh,hm,a,ds,Or,Pl,Si,m,"Throttled",-0,0),f);break e}_x(o,r,Wn,fh,hm,a,ds,Or,Pl,Si,m,null,-0,0)}}break}while(!0);ma(t)}function _x(t,a,r,o,f,m,v,E,D,K,te,ie,W,Z){if(t.timeoutHandle=-1,ie=a.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ls},fx(a,m,ie);var Ee=(m&62914560)===m?hh-at():(m&4194048)===m?yx-at():0;if(Ee=EN(ie,Ee),Ee!==null){Ga=m,t.cancelPendingCommit=Ee(jx.bind(null,t,a,m,r,o,f,v,E,D,te,ie,null,W,Z)),Ci(t,m,v,!K);return}}jx(t,a,m,r,o,f,v,E,D)}function UT(t){for(var a=t;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var f=r[o],m=f.getSnapshot;f=f.value;try{if(!ls(m(),f))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ci(t,a,r,o){a&=~um,a&=~Or,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var f=a;0<f;){var m=31-Pe(f),v=1<<m;o[m]=-1,f&=~v}r!==0&&Ra(t,r,a)}function mh(){return(Tt&6)===0?(cc(0),!1):!0}function pm(){if(nt!==null){if(jt===0)var t=nt.return;else t=nt,Oa=Sr=null,If(t),jl=null,$o=0,t=nt;for(;t!==null;)Jy(t.alternate,t),t=t.return;nt=null}}function Ul(t,a){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,iN(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Ga=0,pm(),Vt=t,nt=r=Da(t.current,null),it=a,jt=0,hs=null,Si=!1,Vl=qn(t,a),cm=!1,Pl=ds=um=Or=Ai=Xt=0,Wn=lc=null,hm=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var f=31-Pe(o),m=1<<f;a|=t[f],o&=~m}return $a=a,Ou(),r}function wx(t,a){Je=null,G.H=Zo,a===Rl||a===Fu?(a=L0(),jt=3):a===bf?(a=L0(),jt=4):jt=a===Yf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,hs=a,nt===null&&(Xt=1,sh(t,Ns(a,t.current)))}function Ex(){var t=cs.current;return t===null?!0:(it&4194048)===it?js===null:(it&62914560)===it||(it&536870912)!==0?t===js:!1}function Tx(){var t=G.H;return G.H=Zo,t===null?Zo:t}function Nx(){var t=G.A;return G.A=PT,t}function ph(){Xt=4,Si||(it&4194048)!==it&&cs.current!==null||(Vl=!0),(Ai&134217727)===0&&(Or&134217727)===0||Vt===null||Ci(Vt,it,ds,!1)}function gm(t,a,r){var o=Tt;Tt|=2;var f=Tx(),m=Nx();(Vt!==t||it!==a)&&(fh=null,Ul(t,a)),a=!1;var v=Xt;e:do try{if(jt!==0&&nt!==null){var E=nt,D=hs;switch(jt){case 8:pm(),v=6;break e;case 3:case 2:case 9:case 6:cs.current===null&&(a=!0);var K=jt;if(jt=0,hs=null,Bl(t,E,D,K),r&&Vl){v=0;break e}break;default:K=jt,jt=0,hs=null,Bl(t,E,D,K)}}BT(),v=Xt;break}catch(te){wx(t,te)}while(!0);return a&&t.shellSuspendCounter++,Oa=Sr=null,Tt=o,G.H=f,G.A=m,nt===null&&(Vt=null,it=0,Ou()),v}function BT(){for(;nt!==null;)Sx(nt)}function zT(t,a){var r=Tt;Tt|=2;var o=Tx(),f=Nx();Vt!==t||it!==a?(fh=null,dh=at()+500,Ul(t,a)):Vl=qn(t,a);e:do try{if(jt!==0&&nt!==null){a=nt;var m=hs;t:switch(jt){case 1:jt=0,hs=null,Bl(t,a,m,1);break;case 2:case 9:if(V0(m)){jt=0,hs=null,Ax(a);break}a=function(){jt!==2&&jt!==9||Vt!==t||(jt=7),ma(t)},m.then(a,a);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:V0(m)?(jt=0,hs=null,Ax(a)):(jt=0,hs=null,Bl(t,a,m,7));break;case 5:var v=null;switch(nt.tag){case 26:v=nt.memoizedState;case 5:case 27:var E=nt;if(v?db(v):E.stateNode.complete){jt=0,hs=null;var D=E.sibling;if(D!==null)nt=D;else{var K=E.return;K!==null?(nt=K,gh(K)):nt=null}break t}}jt=0,hs=null,Bl(t,a,m,5);break;case 6:jt=0,hs=null,Bl(t,a,m,6);break;case 8:pm(),Xt=6;break e;default:throw Error(i(462))}}qT();break}catch(te){wx(t,te)}while(!0);return Oa=Sr=null,G.H=o,G.A=f,Tt=r,nt!==null?0:(Vt=null,it=0,Ou(),Xt)}function qT(){for(;nt!==null&&!$e();)Sx(nt)}function Sx(t){var a=Xy(t.alternate,t,$a);t.memoizedProps=t.pendingProps,a===null?gh(t):nt=a}function Ax(t){var a=t,r=a.alternate;switch(a.tag){case 15:case 0:a=Hy(r,a,a.pendingProps,a.type,void 0,it);break;case 11:a=Hy(r,a,a.pendingProps,a.type.render,a.ref,it);break;case 5:If(a);default:Jy(r,a),a=nt=N0(a,$a),a=Xy(r,a,$a)}t.memoizedProps=t.pendingProps,a===null?gh(t):nt=a}function Bl(t,a,r,o){Oa=Sr=null,If(a),jl=null,$o=0;var f=a.return;try{if(CT(t,f,a,r,it)){Xt=1,sh(t,Ns(r,t.current)),nt=null;return}}catch(m){if(f!==null)throw nt=f,m;Xt=1,sh(t,Ns(r,t.current)),nt=null;return}a.flags&32768?(ht||o===1?t=!0:Vl||(it&536870912)!==0?t=!1:(Si=t=!0,(o===2||o===9||o===3||o===6)&&(o=cs.current,o!==null&&o.tag===13&&(o.flags|=16384))),Rx(a,t)):gh(a)}function gh(t){var a=t;do{if((a.flags&32768)!==0){Rx(a,Si);return}t=a.return;var r=DT(a.alternate,a,$a);if(r!==null){nt=r;return}if(a=a.sibling,a!==null){nt=a;return}nt=a=t}while(a!==null);Xt===0&&(Xt=5)}function Rx(t,a){do{var r=MT(t.alternate,t);if(r!==null){r.flags&=32767,nt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(t=t.sibling,t!==null)){nt=t;return}nt=t=r}while(t!==null);Xt=6,nt=null}function jx(t,a,r,o,f,m,v,E,D){t.cancelPendingCommit=null;do yh();while(xn!==0);if((Tt&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(m=a.lanes|a.childLanes,m|=sf,il(t,r,m,v,E,D),t===Vt&&(nt=Vt=null,it=0),Ll=a,ji=t,Ga=r,dm=m,fm=f,xx=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,GT(ye,function(){return Mx(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,f=he.p,he.p=2,v=Tt,Tt|=4;try{OT(t,a,r)}finally{Tt=v,he.p=f,G.T=o}}xn=1,Cx(),Ix(),kx()}}function Cx(){if(xn===1){xn=0;var t=ji,a=Ll,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=G.T,G.T=null;var o=he.p;he.p=2;var f=Tt;Tt|=4;try{ux(a,t);var m=Rm,v=g0(t.containerInfo),E=m.focusedElem,D=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&p0(E.ownerDocument.documentElement,E)){if(D!==null&&Jd(E)){var K=D.start,te=D.end;if(te===void 0&&(te=K),"selectionStart"in E)E.selectionStart=K,E.selectionEnd=Math.min(te,E.value.length);else{var ie=E.ownerDocument||document,W=ie&&ie.defaultView||window;if(W.getSelection){var Z=W.getSelection(),Ee=E.textContent.length,Ue=Math.min(D.start,Ee),Ot=D.end===void 0?Ue:Math.min(D.end,Ee);!Z.extend&&Ue>Ot&&(v=Ot,Ot=Ue,Ue=v);var q=m0(E,Ue),P=m0(E,Ot);if(q&&P&&(Z.rangeCount!==1||Z.anchorNode!==q.node||Z.anchorOffset!==q.offset||Z.focusNode!==P.node||Z.focusOffset!==P.offset)){var Y=ie.createRange();Y.setStart(q.node,q.offset),Z.removeAllRanges(),Ue>Ot?(Z.addRange(Y),Z.extend(P.node,P.offset)):(Y.setEnd(P.node,P.offset),Z.addRange(Y))}}}}for(ie=[],Z=E;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ie.length;E++){var ae=ie[E];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}jh=!!Am,Rm=Am=null}finally{Tt=f,he.p=o,G.T=r}}t.current=a,xn=2}}function Ix(){if(xn===2){xn=0;var t=ji,a=Ll,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=G.T,G.T=null;var o=he.p;he.p=2;var f=Tt;Tt|=4;try{ix(t,a.alternate,a)}finally{Tt=f,he.p=o,G.T=r}}xn=3}}function kx(){if(xn===4||xn===3){xn=0,Pt();var t=ji,a=Ll,r=Ga,o=xx;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?xn=5:(xn=0,Ll=ji=null,Dx(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Ri=null),ja(r),a=a.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(ce,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=G.T,f=he.p,he.p=2,G.T=null;try{for(var m=t.onRecoverableError,v=0;v<o.length;v++){var E=o[v];m(E.value,{componentStack:E.stack})}}finally{G.T=a,he.p=f}}(Ga&3)!==0&&yh(),ma(t),f=t.pendingLanes,(r&261930)!==0&&(f&42)!==0?t===mm?oc++:(oc=0,mm=t):oc=0,cc(0)}}function Dx(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Fo(a)))}function yh(){return Cx(),Ix(),kx(),Mx()}function Mx(){if(xn!==5)return!1;var t=ji,a=dm;dm=0;var r=ja(Ga),o=G.T,f=he.p;try{he.p=32>r?32:r,G.T=null,r=fm,fm=null;var m=ji,v=Ga;if(xn=0,Ll=ji=null,Ga=0,(Tt&6)!==0)throw Error(i(331));var E=Tt;if(Tt|=4,px(m.current),dx(m,m.current,v,r),Tt=E,cc(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(ce,m)}catch{}return!0}finally{he.p=f,G.T=o,Dx(t,a)}}function Ox(t,a,r){a=Ns(r,a),a=Gf(t.stateNode,a,2),t=wi(t,a,2),t!==null&&(On(t,2),ma(t))}function Ct(t,a,r){if(t.tag===3)Ox(t,t,r);else for(;a!==null;){if(a.tag===3){Ox(a,t,r);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ri===null||!Ri.has(o))){t=Ns(r,t),r=Vy(2),o=wi(a,r,2),o!==null&&(Py(r,o,a,t),On(o,2),ma(o));break}}a=a.return}}function ym(t,a,r){var o=t.pingCache;if(o===null){o=t.pingCache=new LT;var f=new Set;o.set(a,f)}else f=o.get(a),f===void 0&&(f=new Set,o.set(a,f));f.has(r)||(cm=!0,f.add(r),t=FT.bind(null,t,a,r),a.then(t,t))}function FT(t,a,r){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Vt===t&&(it&r)===r&&(Xt===4||Xt===3&&(it&62914560)===it&&300>at()-hh?(Tt&2)===0&&Ul(t,0):um|=r,Pl===it&&(Pl=0)),ma(t)}function Vx(t,a){a===0&&(a=Mn()),t=Er(t,a),t!==null&&(On(t,a),ma(t))}function HT(t){var a=t.memoizedState,r=0;a!==null&&(r=a.retryLane),Vx(t,r)}function $T(t,a){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(r=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(a),Vx(t,r)}function GT(t,a){return be(t,a)}var xh=null,zl=null,xm=!1,bh=!1,bm=!1,Ii=0;function ma(t){t!==zl&&t.next===null&&(zl===null?xh=zl=t:zl=zl.next=t),bh=!0,xm||(xm=!0,KT())}function cc(t,a){if(!bm&&bh){bm=!0;do for(var r=!1,o=xh;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var m=0;else{var v=o.suspendedLanes,E=o.pingedLanes;m=(1<<31-Pe(42|t)+1)-1,m&=f&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,Bx(o,m))}else m=it,m=Dn(o,o===Vt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||qn(o,m)||(r=!0,Bx(o,m));o=o.next}while(r);bm=!1}}function YT(){Px()}function Px(){bh=xm=!1;var t=0;Ii!==0&&aN()&&(t=Ii);for(var a=at(),r=null,o=xh;o!==null;){var f=o.next,m=Lx(o,a);m===0?(o.next=null,r===null?xh=f:r.next=f,f===null&&(zl=r)):(r=o,(t!==0||(m&3)!==0)&&(bh=!0)),o=f}xn!==0&&xn!==5||cc(t),Ii!==0&&(Ii=0)}function Lx(t,a){for(var r=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-Pe(m),E=1<<v,D=f[v];D===-1?((E&r)===0||(E&o)!==0)&&(f[v]=_o(E,a)):D<=a&&(t.expiredLanes|=E),m&=~E}if(a=Vt,r=it,r=Dn(t,t===a?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===a&&(jt===2||jt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Re(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||qn(t,r)){if(a=r&-r,a===t.callbackPriority)return a;switch(o!==null&&Re(o),ja(r)){case 2:case 8:r=ee;break;case 32:r=ye;break;case 268435456:r=Oe;break;default:r=ye}return o=Ux.bind(null,t),r=be(r,o),t.callbackPriority=a,t.callbackNode=r,a}return o!==null&&o!==null&&Re(o),t.callbackPriority=2,t.callbackNode=null,2}function Ux(t,a){if(xn!==0&&xn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(yh()&&t.callbackNode!==r)return null;var o=it;return o=Dn(t,t===Vt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(vx(t,o,a),Lx(t,at()),t.callbackNode!=null&&t.callbackNode===r?Ux.bind(null,t):null)}function Bx(t,a){if(yh())return null;vx(t,a,!0)}function KT(){rN(function(){(Tt&6)!==0?be(z,YT):Px()})}function vm(){if(Ii===0){var t=Sl;t===0&&(t=At,At<<=1,(At&261888)===0&&(At=256)),Ii=t}return Ii}function zx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:hl(""+t)}function qx(t,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,t.id&&r.setAttribute("form",t.id),a.parentNode.insertBefore(r,a),t=new FormData(t),r.parentNode.removeChild(r),t}function QT(t,a,r,o,f){if(a==="submit"&&r&&r.stateNode===f){var m=zx((f[_n]||null).action),v=o.submitter;v&&(a=(a=v[_n]||null)?zx(a.formAction):v.getAttribute("formAction"),a!==null&&(m=a,v=null));var E=new la("action","action",null,o,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ii!==0){var D=v?qx(f,v):new FormData(f);Bf(r,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(E.preventDefault(),D=v?qx(f,v):new FormData(f),Bf(r,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var _m=0;_m<nf.length;_m++){var wm=nf[_m],XT=wm.toLowerCase(),WT=wm[0].toUpperCase()+wm.slice(1);Fs(XT,"on"+WT)}Fs(b0,"onAnimationEnd"),Fs(v0,"onAnimationIteration"),Fs(_0,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(fT,"onTransitionRun"),Fs(mT,"onTransitionStart"),Fs(pT,"onTransitionCancel"),Fs(w0,"onTransitionEnd"),sa("onMouseEnter",["mouseout","mouseover"]),sa("onMouseLeave",["mouseout","mouseover"]),sa("onPointerEnter",["pointerout","pointerover"]),sa("onPointerLeave",["pointerout","pointerover"]),na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),na("onBeforeInput",["compositionend","keypress","textInput","paste"]),na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(uc));function Fx(t,a){a=(a&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],f=o.event;o=o.listeners;e:{var m=void 0;if(a)for(var v=o.length-1;0<=v;v--){var E=o[v],D=E.instance,K=E.currentTarget;if(E=E.listener,D!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=K;try{m(f)}catch(te){Mu(te)}f.currentTarget=null,m=D}else for(v=0;v<o.length;v++){if(E=o[v],D=E.instance,K=E.currentTarget,E=E.listener,D!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=K;try{m(f)}catch(te){Mu(te)}f.currentTarget=null,m=D}}}}function st(t,a){var r=a[rl];r===void 0&&(r=a[rl]=new Set);var o=t+"__bubble";r.has(o)||(Hx(a,t,2,!1),r.add(o))}function Em(t,a,r){var o=0;a&&(o|=4),Hx(r,t,o,a)}var vh="_reactListening"+Math.random().toString(36).slice(2);function Tm(t){if(!t[vh]){t[vh]=!0,wo.forEach(function(r){r!=="selectionchange"&&(JT.has(r)||Em(r,!1,t),Em(r,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[vh]||(a[vh]=!0,Em("selectionchange",!1,a))}}function Hx(t,a,r,o){switch(bb(a)){case 2:var f=SN;break;case 8:f=AN;break;default:f=Um}r=f.bind(null,a,r,t),f=void 0,!pr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(a,r,{capture:!0,passive:f}):t.addEventListener(a,r,!0):f!==void 0?t.addEventListener(a,r,{passive:f}):t.addEventListener(a,r,!1)}function Nm(t,a,r,o,f){var m=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=o.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=ea(E),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){o=m=v;continue e}E=E.parentNode}}o=o.return}di(function(){var K=m,te=_s(r),ie=[];e:{var W=E0.get(t);if(W!==void 0){var Z=la,Ee=t;switch(t){case"keypress":if(yr(r)===0)break e;case"keydown":case"keyup":Z=Iu;break;case"focusin":Ee="focus",Z=br;break;case"focusout":Ee="blur",Z=br;break;case"beforeblur":case"afterblur":Z=br;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=x;break;case b0:case v0:case _0:Z=Tu;break;case w0:Z=T;break;case"scroll":case"scrollend":Z=Mo;break;case"wheel":Z=J;break;case"copy":case"cut":case"paste":Z=Nu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=ka;break;case"toggle":case"beforetoggle":Z=We}var Ue=(a&4)!==0,Ot=!Ue&&(t==="scroll"||t==="scrollend"),q=Ue?W!==null?W+"Capture":null:W;Ue=[];for(var P=K,Y;P!==null;){var ae=P;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||q===null||(ae=Us(P,q),ae!=null&&Ue.push(hc(P,ae,Y))),Ot)break;P=P.return}0<Ue.length&&(W=new Z(W,Ee,null,r,te),ie.push({event:W,listeners:Ue}))}}if((a&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",W&&r!==Io&&(Ee=r.relatedTarget||r.fromElement)&&(ea(Ee)||Ee[Js]))break e;if((Z||W)&&(W=te.window===te?te:(W=te.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(Ee=r.relatedTarget||r.toElement,Z=K,Ee=Ee?ea(Ee):null,Ee!==null&&(Ot=u(Ee),Ue=Ee.tag,Ee!==Ot||Ue!==5&&Ue!==27&&Ue!==6)&&(Ee=null)):(Z=null,Ee=K),Z!==Ee)){if(Ue=Oo,ae="onMouseLeave",q="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Ue=ka,ae="onPointerLeave",q="onPointerEnter",P="pointer"),Ot=Z==null?W:is(Z),Y=Ee==null?W:is(Ee),W=new Ue(ae,P+"leave",Z,r,te),W.target=Ot,W.relatedTarget=Y,ae=null,ea(te)===K&&(Ue=new Ue(q,P+"enter",Ee,r,te),Ue.target=Y,Ue.relatedTarget=Ot,ae=Ue),Ot=ae,Z&&Ee)t:{for(Ue=ZT,q=Z,P=Ee,Y=0,ae=q;ae;ae=Ue(ae))Y++;ae=0;for(var Ce=P;Ce;Ce=Ue(Ce))ae++;for(;0<Y-ae;)q=Ue(q),Y--;for(;0<ae-Y;)P=Ue(P),ae--;for(;Y--;){if(q===P||P!==null&&q===P.alternate){Ue=q;break t}q=Ue(q),P=Ue(P)}Ue=null}else Ue=null;Z!==null&&$x(ie,W,Z,Ue,!1),Ee!==null&&Ot!==null&&$x(ie,Ot,Ee,Ue,!0)}}e:{if(W=K?is(K):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var yt=o0;else if(r0(W))if(c0)yt=uT;else{yt=oT;var Ne=lT}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?K&&ul(K.elementType)&&(yt=o0):yt=cT;if(yt&&(yt=yt(t,K))){l0(ie,yt,r,te);break e}Ne&&Ne(t,W,K),t==="focusout"&&K&&W.type==="number"&&K.memoizedProps.value!=null&&Ro(W,"number",W.value)}switch(Ne=K?is(K):window,t){case"focusin":(r0(Ne)||Ne.contentEditable==="true")&&(xl=Ne,Zd=K,Bo=null);break;case"focusout":Bo=Zd=xl=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,y0(ie,r,te);break;case"selectionchange":if(dT)break;case"keydown":case"keyup":y0(ie,r,te)}var Ze;if(Et)e:{switch(t){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else yl?vr(t,r)&&(rt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(rt="onCompositionStart");rt&&(ua&&r.locale!=="ko"&&(yl||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&yl&&(Ze=Do()):(ra=te,ko="value"in ra?ra.value:ra.textContent,yl=!0)),Ne=_h(K,rt),0<Ne.length&&(rt=new ca(rt,t,null,r,te),ie.push({event:rt,listeners:Ne}),Ze?rt.data=Ze:(Ze=gl(r),Ze!==null&&(rt.data=Ze)))),(Ze=Es?sT(t,r):aT(t,r))&&(rt=_h(K,"onBeforeInput"),0<rt.length&&(Ne=new ca("onBeforeInput","beforeinput",null,r,te),ie.push({event:Ne,listeners:rt}),Ne.data=Ze)),QT(ie,t,K,r,te)}Fx(ie,a)})}function hc(t,a,r){return{instance:t,listener:a,currentTarget:r}}function _h(t,a){for(var r=a+"Capture",o=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Us(t,r),f!=null&&o.unshift(hc(t,f,m)),f=Us(t,a),f!=null&&o.push(hc(t,f,m))),t.tag===3)return o;t=t.return}return[]}function ZT(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function $x(t,a,r,o,f){for(var m=a._reactName,v=[];r!==null&&r!==o;){var E=r,D=E.alternate,K=E.stateNode;if(E=E.tag,D!==null&&D===o)break;E!==5&&E!==26&&E!==27||K===null||(D=K,f?(K=Us(r,m),K!=null&&v.unshift(hc(r,K,D))):f||(K=Us(r,m),K!=null&&v.push(hc(r,K,D)))),r=r.return}v.length!==0&&t.push({event:a,listeners:v})}var eN=/\r\n?/g,tN=/\u0000|\uFFFD/g;function Gx(t){return(typeof t=="string"?t:""+t).replace(eN,`
`).replace(tN,"")}function Yx(t,a){return a=Gx(a),Gx(t)===a}function Mt(t,a,r,o,f,m){switch(r){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||Yn(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&Yn(t,""+o);break;case"className":rs(t,"class",o);break;case"tabIndex":rs(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":rs(t,r,o);break;case"style":Co(t,o,m);break;case"data":if(a!=="object"){rs(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=hl(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(a!=="input"&&Mt(t,a,"name",f.name,f,null),Mt(t,a,"formEncType",f.formEncType,f,null),Mt(t,a,"formMethod",f.formMethod,f,null),Mt(t,a,"formTarget",f.formTarget,f,null)):(Mt(t,a,"encType",f.encType,f,null),Mt(t,a,"method",f.method,f,null),Mt(t,a,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=hl(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=Ls);break;case"onScroll":o!=null&&st("scroll",t);break;case"onScrollEnd":o!=null&&st("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=hl(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":st("beforetoggle",t),st("toggle",t),ol(t,"popover",o);break;case"xlinkActuate":ln(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ln(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ln(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ln(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ln(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ln(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ln(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ln(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ln(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ol(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=_u.get(r)||r,ol(t,r,o))}}function Sm(t,a,r,o,f,m){switch(r){case"style":Co(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof o=="string"?Yn(t,o):(typeof o=="number"||typeof o=="bigint")&&Yn(t,""+o);break;case"onScroll":o!=null&&st("scroll",t);break;case"onScrollEnd":o!=null&&st("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ls);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Eo.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),a=r.slice(2,f?r.length-7:void 0),m=t[_n]||null,m=m!=null?m[r]:null,typeof m=="function"&&t.removeEventListener(a,m,f),typeof o=="function")){typeof m!="function"&&m!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(a,o,f);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):ol(t,r,o)}}}function jn(t,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",t),st("load",t);var o=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var v=r[m];if(v!=null)switch(m){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Mt(t,a,m,v,r,null)}}f&&Mt(t,a,"srcSet",r.srcSet,r,null),o&&Mt(t,a,"src",r.src,r,null);return;case"input":st("invalid",t);var E=m=v=f=null,D=null,K=null;for(o in r)if(r.hasOwnProperty(o)){var te=r[o];if(te!=null)switch(o){case"name":f=te;break;case"type":v=te;break;case"checked":D=te;break;case"defaultChecked":K=te;break;case"value":m=te;break;case"defaultValue":E=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:Mt(t,a,o,te,r,null)}}xu(t,m,E,D,K,v,f,!1);return;case"select":st("invalid",t),o=v=m=null;for(f in r)if(r.hasOwnProperty(f)&&(E=r[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Mt(t,a,f,E,r,null)}a=m,r=v,t.multiple=!!o,a!=null?oi(t,!!o,a,!1):r!=null&&oi(t,!!o,r,!0);return;case"textarea":st("invalid",t),m=f=o=null;for(v in r)if(r.hasOwnProperty(v)&&(E=r[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:Mt(t,a,v,E,r,null)}ci(t,o,f,m);return;case"option":for(D in r)r.hasOwnProperty(D)&&(o=r[D],o!=null)&&(D==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":Mt(t,a,D,o,r,null));return;case"dialog":st("beforetoggle",t),st("toggle",t),st("cancel",t),st("close",t);break;case"iframe":case"object":st("load",t);break;case"video":case"audio":for(o=0;o<uc.length;o++)st(uc[o],t);break;case"image":st("error",t),st("load",t);break;case"details":st("toggle",t);break;case"embed":case"source":case"link":st("error",t),st("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in r)if(r.hasOwnProperty(K)&&(o=r[K],o!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Mt(t,a,K,o,r,null)}return;default:if(ul(a)){for(te in r)r.hasOwnProperty(te)&&(o=r[te],o!==void 0&&Sm(t,a,te,o,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(o=r[E],o!=null&&Mt(t,a,E,o,r,null))}function nN(t,a,r,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,E=null,D=null,K=null,te=null;for(Z in r){var ie=r[Z];if(r.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":D=ie;default:o.hasOwnProperty(Z)||Mt(t,a,Z,null,o,ie)}}for(var W in o){var Z=o[W];if(ie=r[W],o.hasOwnProperty(W)&&(Z!=null||ie!=null))switch(W){case"type":m=Z;break;case"name":f=Z;break;case"checked":K=Z;break;case"defaultChecked":te=Z;break;case"value":v=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,a));break;default:Z!==ie&&Mt(t,a,W,Z,o,ie)}}cl(t,v,E,D,K,te,m,f);return;case"select":Z=v=E=W=null;for(m in r)if(D=r[m],r.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Z=D;default:o.hasOwnProperty(m)||Mt(t,a,m,null,o,D)}for(f in o)if(m=o[f],D=r[f],o.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":W=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==D&&Mt(t,a,f,m,o,D)}a=E,r=v,o=Z,W!=null?oi(t,!!r,W,!1):!!o!=!!r&&(a!=null?oi(t,!!r,a,!0):oi(t,!!r,r?[]:"",!1));return;case"textarea":Z=W=null;for(E in r)if(f=r[E],r.hasOwnProperty(E)&&f!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Mt(t,a,E,null,o,f)}for(v in o)if(f=o[v],m=r[v],o.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":W=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&Mt(t,a,v,f,o,m)}bu(t,W,Z);return;case"option":for(var Ee in r)W=r[Ee],r.hasOwnProperty(Ee)&&W!=null&&!o.hasOwnProperty(Ee)&&(Ee==="selected"?t.selected=!1:Mt(t,a,Ee,null,o,W));for(D in o)W=o[D],Z=r[D],o.hasOwnProperty(D)&&W!==Z&&(W!=null||Z!=null)&&(D==="selected"?t.selected=W&&typeof W!="function"&&typeof W!="symbol":Mt(t,a,D,W,o,Z));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in r)W=r[Ue],r.hasOwnProperty(Ue)&&W!=null&&!o.hasOwnProperty(Ue)&&Mt(t,a,Ue,null,o,W);for(K in o)if(W=o[K],Z=r[K],o.hasOwnProperty(K)&&W!==Z&&(W!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,a));break;default:Mt(t,a,K,W,o,Z)}return;default:if(ul(a)){for(var Ot in r)W=r[Ot],r.hasOwnProperty(Ot)&&W!==void 0&&!o.hasOwnProperty(Ot)&&Sm(t,a,Ot,void 0,o,W);for(te in o)W=o[te],Z=r[te],!o.hasOwnProperty(te)||W===Z||W===void 0&&Z===void 0||Sm(t,a,te,W,o,Z);return}}for(var q in r)W=r[q],r.hasOwnProperty(q)&&W!=null&&!o.hasOwnProperty(q)&&Mt(t,a,q,null,o,W);for(ie in o)W=o[ie],Z=r[ie],!o.hasOwnProperty(ie)||W===Z||W==null&&Z==null||Mt(t,a,ie,W,o,Z)}function Kx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sN(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var f=r[o],m=f.transferSize,v=f.initiatorType,E=f.duration;if(m&&E&&Kx(v)){for(v=0,E=f.responseEnd,o+=1;o<r.length;o++){var D=r[o],K=D.startTime;if(K>E)break;var te=D.transferSize,ie=D.initiatorType;te&&Kx(ie)&&(D=D.responseEnd,v+=te*(D<E?1:(E-K)/(D-K)))}if(--o,a+=8*(m+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Am=null,Rm=null;function wh(t){return t.nodeType===9?t:t.ownerDocument}function Qx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xx(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function jm(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Cm=null;function aN(){var t=window.event;return t&&t.type==="popstate"?t===Cm?!1:(Cm=t,!0):(Cm=null,!1)}var Wx=typeof setTimeout=="function"?setTimeout:void 0,iN=typeof clearTimeout=="function"?clearTimeout:void 0,Jx=typeof Promise=="function"?Promise:void 0,rN=typeof queueMicrotask=="function"?queueMicrotask:typeof Jx<"u"?function(t){return Jx.resolve(null).then(t).catch(lN)}:Wx;function lN(t){setTimeout(function(){throw t})}function ki(t){return t==="head"}function Zx(t,a){var r=a,o=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(f),$l(a);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")dc(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,dc(r);for(var m=r.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[Zs]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=v}}else r==="body"&&dc(t.ownerDocument.body);r=f}while(r);$l(a)}function eb(t,a){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function Im(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Im(r),ll(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function oN(t,a,r,o){for(;t.nodeType===1;){var f=r;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Zs])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Cs(t.nextSibling),t===null)break}return null}function cN(t,a,r){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Cs(t.nextSibling),t===null))return null;return t}function tb(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Cs(t.nextSibling),t===null))return null;return t}function km(t){return t.data==="$?"||t.data==="$~"}function Dm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function uN(t,a){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||r.readyState!=="loading")a();else{var o=function(){a(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Cs(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Mm=null;function nb(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(a===0)return Cs(t.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}t=t.nextSibling}return null}function sb(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return t;a--}else r!=="/$"&&r!=="/&"||a++}t=t.previousSibling}return null}function ab(t,a,r){switch(a=wh(r),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function dc(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);ll(t)}var Is=new Map,ib=new Set;function Eh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ya=he.d;he.d={f:hN,r:dN,D:fN,C:mN,L:pN,m:gN,X:xN,S:yN,M:bN};function hN(){var t=Ya.f(),a=mh();return t||a}function dN(t){var a=vs(t);a!==null&&a.tag===5&&a.type==="form"?wy(a):Ya.r(t)}var ql=typeof document>"u"?null:document;function rb(t,a,r){var o=ql;if(o&&typeof a=="string"&&a){var f=Gn(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),ib.has(f)||(ib.add(f),t={rel:t,crossOrigin:r,href:a},o.querySelector(f)===null&&(a=o.createElement("link"),jn(a,"link",t),rn(a),o.head.appendChild(a)))}}function fN(t){Ya.D(t),rb("dns-prefetch",t,null)}function mN(t,a){Ya.C(t,a),rb("preconnect",t,a)}function pN(t,a,r){Ya.L(t,a,r);var o=ql;if(o&&t&&a){var f='link[rel="preload"][as="'+Gn(a)+'"]';a==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Gn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Gn(r.imageSizes)+'"]')):f+='[href="'+Gn(t)+'"]';var m=f;switch(a){case"style":m=Fl(t);break;case"script":m=Hl(t)}Is.has(m)||(t=w({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:t,as:a},r),Is.set(m,t),o.querySelector(f)!==null||a==="style"&&o.querySelector(fc(m))||a==="script"&&o.querySelector(mc(m))||(a=o.createElement("link"),jn(a,"link",t),rn(a),o.head.appendChild(a)))}}function gN(t,a){Ya.m(t,a);var r=ql;if(r&&t){var o=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Gn(o)+'"][href="'+Gn(t)+'"]',m=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Hl(t)}if(!Is.has(m)&&(t=w({rel:"modulepreload",href:t},a),Is.set(m,t),r.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(mc(m)))return}o=r.createElement("link"),jn(o,"link",t),rn(o),r.head.appendChild(o)}}}function yN(t,a,r){Ya.S(t,a,r);var o=ql;if(o&&t){var f=ta(o).hoistableStyles,m=Fl(t);a=a||"default";var v=f.get(m);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(fc(m)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":a},r),(r=Is.get(m))&&Om(t,r);var D=v=o.createElement("link");rn(D),jn(D,"link",t),D._p=new Promise(function(K,te){D.onload=K,D.onerror=te}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Th(v,a,o)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(m,v)}}}function xN(t,a){Ya.X(t,a);var r=ql;if(r&&t){var o=ta(r).hoistableScripts,f=Hl(t),m=o.get(f);m||(m=r.querySelector(mc(f)),m||(t=w({src:t,async:!0},a),(a=Is.get(f))&&Vm(t,a),m=r.createElement("script"),rn(m),jn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function bN(t,a){Ya.M(t,a);var r=ql;if(r&&t){var o=ta(r).hoistableScripts,f=Hl(t),m=o.get(f);m||(m=r.querySelector(mc(f)),m||(t=w({src:t,async:!0,type:"module"},a),(a=Is.get(f))&&Vm(t,a),m=r.createElement("script"),rn(m),jn(m,"link",t),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function lb(t,a,r,o){var f=(f=Ve.current)?Eh(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=Fl(r.href),r=ta(f).hoistableStyles,o=r.get(a),o||(o={type:"style",instance:null,count:0,state:null},r.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=Fl(r.href);var m=ta(f).hoistableStyles,v=m.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=f.querySelector(fc(t)))&&!m._p&&(v.instance=m,v.state.loading=5),Is.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Is.set(t,r),m||vN(f,t,r,v.state))),a&&o===null)throw Error(i(528,""));return v}if(a&&o!==null)throw Error(i(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Hl(r),r=ta(f).hoistableScripts,o=r.get(a),o||(o={type:"script",instance:null,count:0,state:null},r.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Fl(t){return'href="'+Gn(t)+'"'}function fc(t){return'link[rel="stylesheet"]['+t+"]"}function ob(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function vN(t,a,r,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),jn(a,"link",r),rn(a),t.head.appendChild(a))}function Hl(t){return'[src="'+Gn(t)+'"]'}function mc(t){return"script[async]"+t}function cb(t,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+Gn(r.href)+'"]');if(o)return a.instance=o,rn(o),o;var f=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),rn(o),jn(o,"style",f),Th(o,r.precedence,t),a.instance=o;case"stylesheet":f=Fl(r.href);var m=t.querySelector(fc(f));if(m)return a.state.loading|=4,a.instance=m,rn(m),m;o=ob(r),(f=Is.get(f))&&Om(o,f),m=(t.ownerDocument||t).createElement("link"),rn(m);var v=m;return v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),jn(m,"link",o),a.state.loading|=4,Th(m,r.precedence,t),a.instance=m;case"script":return m=Hl(r.src),(f=t.querySelector(mc(m)))?(a.instance=f,rn(f),f):(o=r,(f=Is.get(m))&&(o=w({},r),Vm(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),rn(f),jn(f,"link",o),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,Th(o,r.precedence,t));return a.instance}function Th(t,a,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,m=f,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===a)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(t,a.firstChild))}function Om(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Vm(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Nh=null;function ub(t,a,r){if(Nh===null){var o=new Map,f=Nh=new Map;f.set(r,o)}else f=Nh,o=f.get(r),o||(o=new Map,f.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),f=0;f<r.length;f++){var m=r[f];if(!(m[Zs]||m[an]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(a)||"";v=t+v;var E=o.get(v);E?E.push(m):o.set(v,[m])}}return o}function hb(t,a,r){t=t.ownerDocument||t,t.head.insertBefore(r,a==="title"?t.querySelector("head > title"):null)}function _N(t,a,r){if(r===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function db(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function wN(t,a,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Fl(o.href),m=a.querySelector(fc(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Sh.bind(t),a.then(t,t)),r.state.loading|=4,r.instance=m,rn(m);return}m=a.ownerDocument||a,o=ob(o),(f=Is.get(f))&&Om(o,f),m=m.createElement("link"),rn(m);var v=m;v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),jn(m,"link",o),r.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Sh.bind(t),a.addEventListener("load",r),a.addEventListener("error",r))}}var Pm=0;function EN(t,a){return t.stylesheets&&t.count===0&&Rh(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&Rh(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+a);0<t.imgBytes&&Pm===0&&(Pm=62500*sN());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Rh(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Pm?50:800)+a);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Sh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ah=null;function Rh(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ah=new Map,a.forEach(TN,t),Ah=null,Sh.call(t))}function TN(t,a){if(!(a.state.loading&4)){var r=Ah.get(t);if(r)var o=r.get(null);else{r=new Map,Ah.set(t,r);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),o=v)}o&&r.set(null,o)}f=a.instance,v=f.getAttribute("data-precedence"),m=r.get(v)||o,m===o&&r.set(null,f),r.set(v,f),this.count++,o=Sh.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var pc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function NN(t,a,r,o,f,m,v,E,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=as(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.hiddenUpdates=as(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function fb(t,a,r,o,f,m,v,E,D,K,te,ie){return t=new NN(t,a,r,v,D,K,te,ie,E),a=1,m===!0&&(a|=24),m=os(3,null,null,a),t.current=m,m.stateNode=t,a=gf(),a.refCount++,t.pooledCache=a,a.refCount++,m.memoizedState={element:o,isDehydrated:r,cache:a},vf(m),t}function mb(t){return t?(t=_l,t):_l}function pb(t,a,r,o,f,m){f=mb(f),o.context===null?o.context=f:o.pendingContext=f,o=_i(a),o.payload={element:r},m=m===void 0?null:m,m!==null&&(o.callback=m),r=wi(t,o,a),r!==null&&(Jn(r,t,a),Yo(r,t,a))}function gb(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<a?r:a}}function Lm(t,a){gb(t,a),(t=t.alternate)&&gb(t,a)}function yb(t){if(t.tag===13||t.tag===31){var a=Er(t,67108864);a!==null&&Jn(a,t,67108864),Lm(t,67108864)}}function xb(t){if(t.tag===13||t.tag===31){var a=fs();a=ri(a);var r=Er(t,a);r!==null&&Jn(r,t,a),Lm(t,a)}}var jh=!0;function SN(t,a,r,o){var f=G.T;G.T=null;var m=he.p;try{he.p=2,Um(t,a,r,o)}finally{he.p=m,G.T=f}}function AN(t,a,r,o){var f=G.T;G.T=null;var m=he.p;try{he.p=8,Um(t,a,r,o)}finally{he.p=m,G.T=f}}function Um(t,a,r,o){if(jh){var f=Bm(o);if(f===null)Nm(t,a,o,Ch,r),vb(t,o);else if(jN(f,t,a,r,o))o.stopPropagation();else if(vb(t,o),a&4&&-1<RN.indexOf(t)){for(;f!==null;){var m=vs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=yn(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var D=1<<31-Pe(v);E.entanglements[1]|=D,v&=~D}ma(m),(Tt&6)===0&&(dh=at()+500,cc(0))}}break;case 31:case 13:E=Er(m,2),E!==null&&Jn(E,m,2),mh(),Lm(m,2)}if(m=Bm(o),m===null&&Nm(t,a,o,Ch,r),m===f)break;f=m}f!==null&&o.stopPropagation()}else Nm(t,a,o,null,r)}}function Bm(t){return t=_s(t),zm(t)}var Ch=null;function zm(t){if(Ch=null,t=ea(t),t!==null){var a=u(t);if(a===null)t=null;else{var r=a.tag;if(r===13){if(t=d(a),t!==null)return t;t=null}else if(r===31){if(t=p(a),t!==null)return t;t=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Ch=t,null}function bb(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case z:return 2;case ee:return 8;case ye:case xe:return 32;case Oe:return 268435456;default:return 32}default:return 32}}var qm=!1,Di=null,Mi=null,Oi=null,gc=new Map,yc=new Map,Vi=[],RN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vb(t,a){switch(t){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":gc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":yc.delete(a.pointerId)}}function xc(t,a,r,o,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:a,domEventName:r,eventSystemFlags:o,nativeEvent:m,targetContainers:[f]},a!==null&&(a=vs(a),a!==null&&yb(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function jN(t,a,r,o,f){switch(a){case"focusin":return Di=xc(Di,t,a,r,o,f),!0;case"dragenter":return Mi=xc(Mi,t,a,r,o,f),!0;case"mouseover":return Oi=xc(Oi,t,a,r,o,f),!0;case"pointerover":var m=f.pointerId;return gc.set(m,xc(gc.get(m)||null,t,a,r,o,f)),!0;case"gotpointercapture":return m=f.pointerId,yc.set(m,xc(yc.get(m)||null,t,a,r,o,f)),!0}return!1}function _b(t){var a=ea(t.target);if(a!==null){var r=u(a);if(r!==null){if(a=r.tag,a===13){if(a=d(r),a!==null){t.blockedOn=a,Vs(t.priority,function(){xb(r)});return}}else if(a===31){if(a=p(r),a!==null){t.blockedOn=a,Vs(t.priority,function(){xb(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var r=Bm(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Io=o,r.target.dispatchEvent(o),Io=null}else return a=vs(r),a!==null&&yb(a),t.blockedOn=r,!1;a.shift()}return!0}function wb(t,a,r){Ih(t)&&r.delete(a)}function CN(){qm=!1,Di!==null&&Ih(Di)&&(Di=null),Mi!==null&&Ih(Mi)&&(Mi=null),Oi!==null&&Ih(Oi)&&(Oi=null),gc.forEach(wb),yc.forEach(wb)}function kh(t,a){t.blockedOn===a&&(t.blockedOn=null,qm||(qm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,CN)))}var Dh=null;function Eb(t){Dh!==t&&(Dh=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Dh===t&&(Dh=null);for(var a=0;a<t.length;a+=3){var r=t[a],o=t[a+1],f=t[a+2];if(typeof o!="function"){if(zm(o||r)===null)continue;break}var m=vs(r);m!==null&&(t.splice(a,3),a-=3,Bf(m,{pending:!0,data:f,method:r.method,action:o},o,f))}}))}function $l(t){function a(D){return kh(D,t)}Di!==null&&kh(Di,t),Mi!==null&&kh(Mi,t),Oi!==null&&kh(Oi,t),gc.forEach(a),yc.forEach(a);for(var r=0;r<Vi.length;r++){var o=Vi[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Vi.length&&(r=Vi[0],r.blockedOn===null);)_b(r),r.blockedOn===null&&Vi.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var f=r[o],m=r[o+1],v=f[_n]||null;if(typeof m=="function")v||Eb(r);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[_n]||null)E=v.formAction;else if(zm(f)!==null)continue}else E=v.action;typeof E=="function"?r[o+1]=E:(r.splice(o,3),o-=3),Eb(r)}}}function Tb(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function Fm(t){this._internalRoot=t}Mh.prototype.render=Fm.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var r=a.current,o=fs();pb(r,o,t,a,null,null)},Mh.prototype.unmount=Fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;pb(t.current,2,null,t,null,null),mh(),a[Js]=null}};function Mh(t){this._internalRoot=t}Mh.prototype.unstable_scheduleHydration=function(t){if(t){var a=mu();t={blockedOn:null,target:t,priority:a};for(var r=0;r<Vi.length&&a!==0&&a<Vi[r].priority;r++);Vi.splice(r,0,t),r===0&&_b(t)}};var Nb=e.version;if(Nb!=="19.2.4")throw Error(i(527,Nb,"19.2.4"));he.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=y(a),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var IN={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{ce=Oh.inject(IN),me=Oh}catch{}}return vc.createRoot=function(t,a){if(!l(t))throw Error(i(299));var r=!1,o="",f=ky,m=Dy,v=My;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=fb(t,1,!1,null,null,r,o,null,f,m,v,Tb),t[Js]=a.current,Tm(t),new Fm(a)},vc.hydrateRoot=function(t,a,r){if(!l(t))throw Error(i(299));var o=!1,f="",m=ky,v=Dy,E=My,D=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.formState!==void 0&&(D=r.formState)),a=fb(t,1,!0,a,r??null,o,f,D,m,v,E,Tb),a.context=mb(null),r=a.current,o=fs(),o=ri(o),f=_i(o),f.callback=null,wi(r,f,o),r=o,a.current.lanes=r,On(a,r),ma(a),t[Js]=a.current,Tm(t),new Mh(a)},vc.version="19.2.4",vc}var Ob;function qN(){if(Ob)return Gm.exports;Ob=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Gm.exports=zN(),Gm.exports}var FN=qN();const HN=B_(FN);var Vb="popstate";function $N(s={}){function e(l,u){let{pathname:d="/",search:p="",hash:g=""}=Jr(l.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),yp("",{pathname:d,search:p,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(l,u){let d=l.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let g=l.location.href,y=g.indexOf("#");p=y===-1?g:g.slice(0,y)}return p+"#"+(typeof u=="string"?u:Bc(u))}function i(l,u){Os(l.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return YN(e,n,i,s)}function Ht(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Os(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GN(){return Math.random().toString(36).substring(2,10)}function Pb(s,e){return{usr:s.state,key:s.key,idx:e}}function yp(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Jr(e):e,state:n,key:e&&e.key||i||GN()}}function Bc({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Jr(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function YN(s,e,n,i={}){let{window:l=document.defaultView,v5Compat:u=!1}=i,d=l.history,p="POP",g=null,y=b();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function b(){return(d.state||{idx:null}).idx}function w(){p="POP";let M=b(),L=M==null?null:M-y;y=M,g&&g({action:p,location:B.location,delta:L})}function N(M,L){p="PUSH";let F=yp(B.location,M,L);n&&n(F,M),y=b()+1;let Q=Pb(F,y),ue=B.createHref(F);try{d.pushState(Q,"",ue)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;l.location.assign(ue)}u&&g&&g({action:p,location:B.location,delta:1})}function C(M,L){p="REPLACE";let F=yp(B.location,M,L);n&&n(F,M),y=b();let Q=Pb(F,y),ue=B.createHref(F);d.replaceState(Q,"",ue),u&&g&&g({action:p,location:B.location,delta:0})}function H(M){return KN(M)}let B={get action(){return p},get location(){return s(l,d)},listen(M){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(Vb,w),g=M,()=>{l.removeEventListener(Vb,w),g=null}},createHref(M){return e(l,M)},createURL:H,encodeLocation(M){let L=H(M);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:N,replace:C,go(M){return d.go(M)}};return B}function KN(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ht(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Bc(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function z_(s,e,n="/"){return QN(s,e,n,!1)}function QN(s,e,n,i){let l=typeof e=="string"?Jr(e):e,u=ei(l.pathname||"/",n);if(u==null)return null;let d=q_(s);XN(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let y=l2(u);p=i2(d[g],y,i)}return p}function q_(s,e=[],n=[],i="",l=!1){let u=(d,p,g=l,y)=>{let b={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(i)&&g)return;Ht(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length)}let w=Xa([i,b.relativePath]),N=n.concat(b);d.children&&d.children.length>0&&(Ht(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),q_(d.children,e,N,w,g)),!(d.path==null&&!d.index)&&e.push({path:w,score:s2(w,d.index),routesMeta:N})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of F_(d.path))u(d,p,!0,g)}),e}function F_(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,l=n.endsWith("?"),u=n.replace(/\?$/,"");if(i.length===0)return l?[u,""]:[u];let d=F_(i.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),l&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function XN(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:a2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var WN=/^:[\w-]+$/,JN=3,ZN=2,e2=1,t2=10,n2=-2,Lb=s=>s==="*";function s2(s,e){let n=s.split("/"),i=n.length;return n.some(Lb)&&(i+=n2),e&&(i+=ZN),n.filter(l=>!Lb(l)).reduce((l,u)=>l+(WN.test(u)?JN:u===""?e2:t2),i)}function a2(s,e){return s.length===e.length&&s.slice(0,-1).every((i,l)=>i===e[l])?s[s.length-1]-e[e.length-1]:0}function i2(s,e,n=!1){let{routesMeta:i}=s,l={},u="/",d=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,b=u==="/"?e:e.slice(u.length)||"/",w=sd({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},b),N=g.route;if(!w&&y&&n&&!i[i.length-1].route.index&&(w=sd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!w)return null;Object.assign(l,w.params),d.push({params:l,pathname:Xa([u,w.pathname]),pathnameBase:h2(Xa([u,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(u=Xa([u,w.pathnameBase]))}return d}function sd(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=r2(s.path,s.caseSensitive,s.end),l=e.match(n);if(!l)return null;let u=l[0],d=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:i.reduce((y,{paramName:b,isOptional:w},N)=>{if(b==="*"){let H=p[N]||"";d=u.slice(0,u.length-H.length).replace(/(.)\/+$/,"$1")}const C=p[N];return w&&!C?y[b]=void 0:y[b]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:d,pattern:s}}function r2(s,e=!1,n=!0){Os(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),i]}function l2(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Os(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ei(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var o2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function c2(s,e="/"){let{pathname:n,search:i="",hash:l=""}=typeof s=="string"?Jr(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=Ub(n.substring(1),"/"):u=Ub(n,e)):u=e,{pathname:u,search:d2(i),hash:f2(l)}}function Ub(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function Xm(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function u2(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xp(s){let e=u2(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Wp(s,e,n,i=!1){let l;typeof s=="string"?l=Jr(s):(l={...s},Ht(!l.pathname||!l.pathname.includes("?"),Xm("?","pathname","search",l)),Ht(!l.pathname||!l.pathname.includes("#"),Xm("#","pathname","hash",l)),Ht(!l.search||!l.search.includes("#"),Xm("#","search","hash",l)));let u=s===""||l.pathname==="",d=u?"/":l.pathname,p;if(d==null)p=n;else{let w=e.length-1;if(!i&&d.startsWith("..")){let N=d.split("/");for(;N[0]==="..";)N.shift(),w-=1;l.pathname=N.join("/")}p=w>=0?e[w]:"/"}let g=c2(l,p),y=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(y||b)&&(g.pathname+="/"),g}var Xa=s=>s.join("/").replace(/\/\/+/g,"/"),h2=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),d2=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,f2=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,m2=class{constructor(s,e,n,i=!1){this.status=s,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function p2(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function g2(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var H_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $_(s,e){let n=s;if(typeof n!="string"||!o2.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,l=!1;if(H_)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=ei(d.pathname,e);d.origin===u.origin&&p!=null?n=p+d.search+d.hash:l=!0}catch{Os(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var G_=["POST","PUT","PATCH","DELETE"];new Set(G_);var y2=["GET",...G_];new Set(y2);var fo=j.createContext(null);fo.displayName="DataRouter";var Nd=j.createContext(null);Nd.displayName="DataRouterState";var x2=j.createContext(!1),Y_=j.createContext({isTransitioning:!1});Y_.displayName="ViewTransition";var b2=j.createContext(new Map);b2.displayName="Fetchers";var v2=j.createContext(null);v2.displayName="Await";var bs=j.createContext(null);bs.displayName="Navigation";var Jc=j.createContext(null);Jc.displayName="Location";var Ws=j.createContext({outlet:null,matches:[],isDataRoute:!1});Ws.displayName="Route";var Jp=j.createContext(null);Jp.displayName="RouteError";var K_="REACT_ROUTER_ERROR",_2="REDIRECT",w2="ROUTE_ERROR_RESPONSE";function E2(s){if(s.startsWith(`${K_}:${_2}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function T2(s){if(s.startsWith(`${K_}:${w2}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new m2(e.status,e.statusText,e.data)}catch{}}function N2(s,{relative:e}={}){Ht(mo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=j.useContext(bs),{hash:l,pathname:u,search:d}=eu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Xa([n,u])),i.createHref({pathname:p,search:d,hash:l})}function mo(){return j.useContext(Jc)!=null}function ir(){return Ht(mo(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Jc).location}var Q_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function X_(s){j.useContext(bs).static||j.useLayoutEffect(s)}function po(){let{isDataRoute:s}=j.useContext(Ws);return s?L2():S2()}function S2(){Ht(mo(),"useNavigate() may be used only in the context of a <Router> component.");let s=j.useContext(fo),{basename:e,navigator:n}=j.useContext(bs),{matches:i}=j.useContext(Ws),{pathname:l}=ir(),u=JSON.stringify(Xp(i)),d=j.useRef(!1);return X_(()=>{d.current=!0}),j.useCallback((g,y={})=>{if(Os(d.current,Q_),!d.current)return;if(typeof g=="number"){n.go(g);return}let b=Wp(g,JSON.parse(u),l,y.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:Xa([e,b.pathname])),(y.replace?n.replace:n.push)(b,y.state,y)},[e,n,u,l,s])}j.createContext(null);function Zc(){let{matches:s}=j.useContext(Ws),e=s[s.length-1];return e?e.params:{}}function eu(s,{relative:e}={}){let{matches:n}=j.useContext(Ws),{pathname:i}=ir(),l=JSON.stringify(Xp(n));return j.useMemo(()=>Wp(s,JSON.parse(l),i,e==="path"),[s,l,i,e])}function A2(s,e){return W_(s,e)}function W_(s,e,n,i,l){Ht(mo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(bs),{matches:d}=j.useContext(Ws),p=d[d.length-1],g=p?p.params:{},y=p?p.pathname:"/",b=p?p.pathnameBase:"/",w=p&&p.route;{let F=w&&w.path||"";Z_(y,!w||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let N=ir(),C;if(e){let F=typeof e=="string"?Jr(e):e;Ht(b==="/"||F.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${F.pathname}" was given in the \`location\` prop.`),C=F}else C=N;let H=C.pathname||"/",B=H;if(b!=="/"){let F=b.replace(/^\//,"").split("/");B="/"+H.replace(/^\//,"").split("/").slice(F.length).join("/")}let M=z_(s,{pathname:B});Os(w||M!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Os(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=k2(M&&M.map(F=>Object.assign({},F,{params:Object.assign({},g,F.params),pathname:Xa([b,u.encodeLocation?u.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?b:Xa([b,u.encodeLocation?u.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),d,n,i,l);return e&&L?j.createElement(Jc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},L):L}function R2(){let s=P2(),e=p2(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:l},n):null,d)}var j2=j.createElement(R2,null),J_=class extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=T2(s.digest);n&&(s=n)}let e=s!==void 0?j.createElement(Ws.Provider,{value:this.props.routeContext},j.createElement(Jp.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?j.createElement(C2,{error:s},e):e}};J_.contextType=x2;var Wm=new WeakMap;function C2({children:s,error:e}){let{basename:n}=j.useContext(bs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=E2(e.digest);if(i){let l=Wm.get(e);if(l)throw l;let u=$_(i.location,n);if(H_&&!Wm.get(e))if(u.isExternal||i.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:i.replace}));throw Wm.set(e,d),d}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function I2({routeContext:s,match:e,children:n}){let i=j.useContext(fo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Ws.Provider,{value:s},n)}function k2(s,e=[],n=null,i=null,l=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,d=n?.errors;if(d!=null){let b=u.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);Ht(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(n)for(let b=0;b<u.length;b++){let w=u[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=b),w.route.id){let{loaderData:N,errors:C}=n,H=w.route.loader&&!N.hasOwnProperty(w.route.id)&&(!C||C[w.route.id]===void 0);if(w.route.lazy||H){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=n&&i?(b,w)=>{i(b,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:g2(n.matches),errorInfo:w})}:void 0;return u.reduceRight((b,w,N)=>{let C,H=!1,B=null,M=null;n&&(C=d&&w.route.id?d[w.route.id]:void 0,B=w.route.errorElement||j2,p&&(g<0&&N===0?(Z_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),H=!0,M=null):g===N&&(H=!0,M=w.route.hydrateFallbackElement||null)));let L=e.concat(u.slice(0,N+1)),F=()=>{let Q;return C?Q=B:H?Q=M:w.route.Component?Q=j.createElement(w.route.Component,null):w.route.element?Q=w.route.element:Q=b,j.createElement(I2,{match:w,routeContext:{outlet:b,matches:L,isDataRoute:n!=null},children:Q})};return n&&(w.route.ErrorBoundary||w.route.errorElement||N===0)?j.createElement(J_,{location:n.location,revalidation:n.revalidation,component:B,error:C,children:F(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:y}):F()},null)}function Zp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D2(s){let e=j.useContext(fo);return Ht(e,Zp(s)),e}function M2(s){let e=j.useContext(Nd);return Ht(e,Zp(s)),e}function O2(s){let e=j.useContext(Ws);return Ht(e,Zp(s)),e}function eg(s){let e=O2(s),n=e.matches[e.matches.length-1];return Ht(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function V2(){return eg("useRouteId")}function P2(){let s=j.useContext(Jp),e=M2("useRouteError"),n=eg("useRouteError");return s!==void 0?s:e.errors?.[n]}function L2(){let{router:s}=D2("useNavigate"),e=eg("useNavigate"),n=j.useRef(!1);return X_(()=>{n.current=!0}),j.useCallback(async(l,u={})=>{Os(n.current,Q_),n.current&&(typeof l=="number"?await s.navigate(l):await s.navigate(l,{fromRouteId:e,...u}))},[s,e])}var Bb={};function Z_(s,e,n){!e&&!Bb[s]&&(Bb[s]=!0,Os(!1,n))}j.memo(U2);function U2({routes:s,future:e,state:n,onError:i}){return W_(s,void 0,n,i,e)}function B2({to:s,replace:e,state:n,relative:i}){Ht(mo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=j.useContext(bs);Os(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=j.useContext(Ws),{pathname:d}=ir(),p=po(),g=Wp(s,Xp(u),d,i==="path"),y=JSON.stringify(g);return j.useEffect(()=>{p(JSON.parse(y),{replace:e,state:n,relative:i})},[p,y,i,e,n]),null}function pa(s){Ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function z2({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:l,static:u=!1,unstable_useTransitions:d}){Ht(!mo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=j.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:d,future:{}}),[p,l,u,d]);typeof n=="string"&&(n=Jr(n));let{pathname:y="/",search:b="",hash:w="",state:N=null,key:C="default"}=n,H=j.useMemo(()=>{let B=ei(y,p);return B==null?null:{location:{pathname:B,search:b,hash:w,state:N,key:C},navigationType:i}},[p,y,b,w,N,C,i]);return Os(H!=null,`<Router basename="${p}"> is not able to match the URL "${y}${b}${w}" because it does not start with the basename, so the <Router> won't render anything.`),H==null?null:j.createElement(bs.Provider,{value:g},j.createElement(Jc.Provider,{children:e,value:H}))}function q2({children:s,location:e}){return A2(xp(s),e)}function xp(s,e=[]){let n=[];return j.Children.forEach(s,(i,l)=>{if(!j.isValidElement(i))return;let u=[...e,l];if(i.type===j.Fragment){n.push.apply(n,xp(i.props.children,u));return}Ht(i.type===pa,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ht(!i.props.index||!i.props.children,"An index route cannot have child routes.");let d={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=xp(i.props.children,u)),n.push(d)}),n}var $h="get",Gh="application/x-www-form-urlencoded";function Sd(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function F2(s){return Sd(s)&&s.tagName.toLowerCase()==="button"}function H2(s){return Sd(s)&&s.tagName.toLowerCase()==="form"}function $2(s){return Sd(s)&&s.tagName.toLowerCase()==="input"}function G2(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function Y2(s,e){return s.button===0&&(!e||e==="_self")&&!G2(s)}var Vh=null;function K2(){if(Vh===null)try{new FormData(document.createElement("form"),0),Vh=!1}catch{Vh=!0}return Vh}var Q2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jm(s){return s!=null&&!Q2.has(s)?(Os(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gh}"`),null):s}function X2(s,e){let n,i,l,u,d;if(H2(s)){let p=s.getAttribute("action");i=p?ei(p,e):null,n=s.getAttribute("method")||$h,l=Jm(s.getAttribute("enctype"))||Gh,u=new FormData(s)}else if(F2(s)||$2(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?ei(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||$h,l=Jm(s.getAttribute("formenctype"))||Jm(p.getAttribute("enctype"))||Gh,u=new FormData(p,s),!K2()){let{name:y,type:b,value:w}=s;if(b==="image"){let N=y?`${y}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else y&&u.append(y,w)}}else{if(Sd(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$h,i=null,l=Gh,d=s}return u&&l==="text/plain"&&(d=u,u=void 0),{action:i,method:n.toLowerCase(),encType:l,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function W2(s,e,n,i){let l=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${i}`:l.pathname=`${l.pathname}.${i}`:l.pathname==="/"?l.pathname=`_root.${i}`:e&&ei(l.pathname,e)==="/"?l.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${i}`,l}async function J2(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Z2(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function eS(s,e,n){let i=await Promise.all(s.map(async l=>{let u=e.routes[l.route.id];if(u){let d=await J2(u,n);return d.links?d.links():[]}return[]}));return aS(i.flat(1).filter(Z2).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function zb(s,e,n,i,l,u){let d=(g,y)=>n[y]?g.route.id!==n[y].route.id:!0,p=(g,y)=>n[y].pathname!==g.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>d(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let b=i.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(d(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function tS(s,e,{includeHydrateFallback:n}={}){return nS(s.map(i=>{let l=e.routes[i.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function nS(s){return[...new Set(s)]}function sS(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function aS(s,e){let n=new Set;return new Set(e),s.reduce((i,l)=>{let u=JSON.stringify(sS(l));return n.has(u)||(n.add(u),i.push({key:u,link:l})),i},[])}function ew(){let s=j.useContext(fo);return tg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function iS(){let s=j.useContext(Nd);return tg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var ng=j.createContext(void 0);ng.displayName="FrameworkContext";function tw(){let s=j.useContext(ng);return tg(s,"You must render this element inside a <HydratedRouter> element"),s}function rS(s,e){let n=j.useContext(ng),[i,l]=j.useState(!1),[u,d]=j.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:b,onTouchStart:w}=e,N=j.useRef(null);j.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let B=L=>{L.forEach(F=>{d(F.isIntersecting)})},M=new IntersectionObserver(B,{threshold:.5});return N.current&&M.observe(N.current),()=>{M.disconnect()}}},[s]),j.useEffect(()=>{if(i){let B=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(B)}}},[i]);let C=()=>{l(!0)},H=()=>{l(!1),d(!1)};return n?s!=="intent"?[u,N,{}]:[u,N,{onFocus:_c(p,C),onBlur:_c(g,H),onMouseEnter:_c(y,C),onMouseLeave:_c(b,H),onTouchStart:_c(w,C)}]:[!1,N,{}]}function _c(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function lS({page:s,...e}){let{router:n}=ew(),i=j.useMemo(()=>z_(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?j.createElement(cS,{page:s,matches:i,...e}):null}function oS(s){let{manifest:e,routeModules:n}=tw(),[i,l]=j.useState([]);return j.useEffect(()=>{let u=!1;return eS(s,e,n).then(d=>{u||l(d)}),()=>{u=!0}},[s,e,n]),i}function cS({page:s,matches:e,...n}){let i=ir(),{future:l,manifest:u,routeModules:d}=tw(),{basename:p}=ew(),{loaderData:g,matches:y}=iS(),b=j.useMemo(()=>zb(s,e,y,u,i,"data"),[s,e,y,u,i]),w=j.useMemo(()=>zb(s,e,y,u,i,"assets"),[s,e,y,u,i]),N=j.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let B=new Set,M=!1;if(e.forEach(F=>{let Q=u.routes[F.route.id];!Q||!Q.hasLoader||(!b.some(ue=>ue.route.id===F.route.id)&&F.route.id in g&&d[F.route.id]?.shouldRevalidate||Q.hasClientLoader?M=!0:B.add(F.route.id))}),B.size===0)return[];let L=W2(s,p,l.unstable_trailingSlashAwareDataRequests,"data");return M&&B.size>0&&L.searchParams.set("_routes",e.filter(F=>B.has(F.route.id)).map(F=>F.route.id).join(",")),[L.pathname+L.search]},[p,l.unstable_trailingSlashAwareDataRequests,g,i,u,b,e,s,d]),C=j.useMemo(()=>tS(w,u),[w,u]),H=oS(w);return j.createElement(j.Fragment,null,N.map(B=>j.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),C.map(B=>j.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),H.map(({key:B,link:M})=>j.createElement("link",{key:B,nonce:n.nonce,...M,crossOrigin:M.crossOrigin??n.crossOrigin})))}function uS(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var hS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hS&&(window.__reactRouterVersion="7.13.0")}catch{}function dS({basename:s,children:e,unstable_useTransitions:n,window:i}){let l=j.useRef();l.current==null&&(l.current=$N({window:i,v5Compat:!0}));let u=l.current,[d,p]=j.useState({action:u.action,location:u.location}),g=j.useCallback(y=>{n===!1?p(y):j.startTransition(()=>p(y))},[n]);return j.useLayoutEffect(()=>u.listen(g),[u,g]),j.createElement(z2,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var nw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=j.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:l,reloadDocument:u,replace:d,state:p,target:g,to:y,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:N,...C},H){let{basename:B,unstable_useTransitions:M}=j.useContext(bs),L=typeof y=="string"&&nw.test(y),F=$_(y,B);y=F.to;let Q=N2(y,{relative:l}),[ue,fe,re]=rS(i,C),S=gS(y,{replace:d,state:p,target:g,preventScrollReset:b,relative:l,viewTransition:w,unstable_defaultShouldRevalidate:N,unstable_useTransitions:M});function A(O){e&&e(O),O.defaultPrevented||S(O)}let R=j.createElement("a",{...C,...re,href:F.absoluteURL||Q,onClick:F.isExternal||u?e:A,ref:uS(H,fe),target:g,"data-discover":!L&&n==="render"?"true":void 0});return ue&&!L?j.createElement(j.Fragment,null,R,j.createElement(lS,{page:Q})):R});et.displayName="Link";var fS=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:l=!1,style:u,to:d,viewTransition:p,children:g,...y},b){let w=eu(d,{relative:y.relative}),N=ir(),C=j.useContext(Nd),{navigator:H,basename:B}=j.useContext(bs),M=C!=null&&_S(w)&&p===!0,L=H.encodeLocation?H.encodeLocation(w).pathname:w.pathname,F=N.pathname,Q=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(F=F.toLowerCase(),Q=Q?Q.toLowerCase():null,L=L.toLowerCase()),Q&&B&&(Q=ei(Q,B)||Q);const ue=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let fe=F===L||!l&&F.startsWith(L)&&F.charAt(ue)==="/",re=Q!=null&&(Q===L||!l&&Q.startsWith(L)&&Q.charAt(L.length)==="/"),S={isActive:fe,isPending:re,isTransitioning:M},A=fe?e:void 0,R;typeof i=="function"?R=i(S):R=[i,fe?"active":null,re?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(S):u;return j.createElement(et,{...y,"aria-current":A,className:R,ref:b,style:O,to:d,viewTransition:p},typeof g=="function"?g(S):g)});fS.displayName="NavLink";var mS=j.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:l,state:u,method:d=$h,action:p,onSubmit:g,relative:y,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:N,...C},H)=>{let{unstable_useTransitions:B}=j.useContext(bs),M=bS(),L=vS(p,{relative:y}),F=d.toLowerCase()==="get"?"get":"post",Q=typeof p=="string"&&nw.test(p),ue=fe=>{if(g&&g(fe),fe.defaultPrevented)return;fe.preventDefault();let re=fe.nativeEvent.submitter,S=re?.getAttribute("formmethod")||d,A=()=>M(re||fe.currentTarget,{fetcherKey:e,method:S,navigate:n,replace:l,state:u,relative:y,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:N});B&&n!==!1?j.startTransition(()=>A()):A()};return j.createElement("form",{ref:H,method:F,action:L,onSubmit:i?g:ue,...C,"data-discover":!Q&&s==="render"?"true":void 0})});mS.displayName="Form";function pS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sw(s){let e=j.useContext(fo);return Ht(e,pS(s)),e}function gS(s,{target:e,replace:n,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let y=po(),b=ir(),w=eu(s,{relative:u});return j.useCallback(N=>{if(Y2(N,e)){N.preventDefault();let C=n!==void 0?n:Bc(b)===Bc(w),H=()=>y(s,{replace:C,state:i,preventScrollReset:l,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?j.startTransition(()=>H()):H()}},[b,y,w,n,i,e,s,l,u,d,p,g])}var yS=0,xS=()=>`__${String(++yS)}__`;function bS(){let{router:s}=sw("useSubmit"),{basename:e}=j.useContext(bs),n=V2(),i=s.fetch,l=s.navigate;return j.useCallback(async(u,d={})=>{let{action:p,method:g,encType:y,formData:b,body:w}=X2(u,e);if(d.navigate===!1){let N=d.fetcherKey||xS();await i(N,n,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:w,formMethod:d.method||g,formEncType:d.encType||y,flushSync:d.flushSync})}else await l(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:w,formMethod:d.method||g,formEncType:d.encType||y,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[i,l,e,n])}function vS(s,{relative:e}={}){let{basename:n}=j.useContext(bs),i=j.useContext(Ws);Ht(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),u={...eu(s||".",{relative:e})},d=ir();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let b=p.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Xa([n,u.pathname])),Bc(u)}function _S(s,{relative:e}={}){let n=j.useContext(Y_);Ht(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=sw("useViewTransitionState"),l=eu(s,{relative:e});if(!n.isTransitioning)return!1;let u=ei(n.currentLocation.pathname,i)||n.currentLocation.pathname,d=ei(n.nextLocation.pathname,i)||n.nextLocation.pathname;return sd(l.pathname,d)!=null||sd(l.pathname,u)!=null}const wS=()=>{};var qb={};const aw=function(s){const e=[];let n=0;for(let i=0;i<s.length;i++){let l=s.charCodeAt(i);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++i)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},ES=function(s){const e=[];let n=0,i=0;for(;n<s.length;){const l=s[n++];if(l<128)e[i++]=String.fromCharCode(l);else if(l>191&&l<224){const u=s[n++];e[i++]=String.fromCharCode((l&31)<<6|u&63)}else if(l>239&&l<365){const u=s[n++],d=s[n++],p=s[n++],g=((l&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[i++]=String.fromCharCode((l&15)<<12|(u&63)<<6|d&63)}}return e.join("")},iw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let l=0;l<s.length;l+=3){const u=s[l],d=l+1<s.length,p=d?s[l+1]:0,g=l+2<s.length,y=g?s[l+2]:0,b=u>>2,w=(u&3)<<4|p>>4;let N=(p&15)<<2|y>>6,C=y&63;g||(C=64,d||(N=64)),i.push(n[b],n[w],n[N],n[C])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(aw(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):ES(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let l=0;l<s.length;){const u=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const y=l<s.length?n[s.charAt(l)]:64;++l;const w=l<s.length?n[s.charAt(l)]:64;if(++l,u==null||p==null||y==null||w==null)throw new TS;const N=u<<2|p>>4;if(i.push(N),y!==64){const C=p<<4&240|y>>2;if(i.push(C),w!==64){const H=y<<6&192|w;i.push(H)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class TS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NS=function(s){const e=aw(s);return iw.encodeByteArray(e,!0)},ad=function(s){return NS(s).replace(/\./g,"")},rw=function(s){try{return iw.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function SS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const AS=()=>SS().__FIREBASE_DEFAULTS__,RS=()=>{if(typeof process>"u"||typeof qb>"u")return;const s=qb.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},jS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&rw(s[1]);return e&&JSON.parse(e)},Ad=()=>{try{return wS()||AS()||RS()||jS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},lw=s=>Ad()?.emulatorHosts?.[s],ow=s=>{const e=lw(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},cw=()=>Ad()?.config,uw=s=>Ad()?.[`_${s}`];class CS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}function rr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sg(s){return(await fetch(s,{credentials:"include"})).ok}function hw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",l=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${i}`,aud:i,iat:l,exp:l+3600,auth_time:l,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[ad(JSON.stringify(n)),ad(JSON.stringify(d)),""].join(".")}const Ic={};function IS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Ic))Ic[e]?s.emulator.push(e):s.prod.push(e);return s}function kS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Fb=!1;function ag(s,e){if(typeof window>"u"||typeof document>"u"||!rr(window.location.host)||Ic[s]===e||Ic[s]||Fb)return;Ic[s]=e;function n(N){return`__firebase__banner__${N}`}const i="__firebase__banner",u=IS().prod.length>0;function d(){const N=document.getElementById(i);N&&N.remove()}function p(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,C){N.setAttribute("width","24"),N.setAttribute("id",C),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function y(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{Fb=!0,d()},N}function b(N,C){N.setAttribute("id",C),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=kS(i),C=n("text"),H=document.getElementById(C)||document.createElement("span"),B=n("learnmore"),M=document.getElementById(B)||document.createElement("a"),L=n("preprendIcon"),F=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const Q=N.element;p(Q),b(M,B);const ue=y();g(F,L),Q.append(F,H,M,ue),document.body.appendChild(Q)}u?(H.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,H.innerText="Preview backend running in this workspace."),H.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bn())}function MS(){const s=Ad()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function PS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LS(){const s=Bn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function US(){return!MS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function BS(){try{return typeof indexedDB=="object"}catch{return!1}}function zS(){return new Promise((s,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(i);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(n){e(n)}})}const qS="FirebaseError";class Aa extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=qS,Object.setPrototypeOf(this,Aa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tu.prototype.create)}}class tu{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},l=`${this.service}/${e}`,u=this.errors[e],d=u?FS(u,i):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new Aa(l,p,i)}}function FS(s,e){return s.replace(HS,(n,i)=>{const l=e[i];return l!=null?String(l):`<${i}?>`})}const HS=/\{\$([^}]+)}/g;function $S(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function qr(s,e){if(s===e)return!0;const n=Object.keys(s),i=Object.keys(e);for(const l of n){if(!i.includes(l))return!1;const u=s[l],d=e[l];if(Hb(u)&&Hb(d)){if(!qr(u,d))return!1}else if(u!==d)return!1}for(const l of i)if(!n.includes(l))return!1;return!0}function Hb(s){return s!==null&&typeof s=="object"}function nu(s){const e=[];for(const[n,i]of Object.entries(s))Array.isArray(i)?i.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Tc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[l,u]=i.split("=");e[decodeURIComponent(l)]=decodeURIComponent(u)}}),e}function Nc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function GS(s,e){const n=new YS(s,e);return n.subscribe.bind(n)}class YS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let l;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");KS(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:i},l.next===void 0&&(l.next=Zm),l.error===void 0&&(l.error=Zm),l.complete===void 0&&(l.complete=Zm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Zm(){}function $t(s){return s&&s._delegate?s._delegate:s}class Ji{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Pr="[DEFAULT]";class QS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new CS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&i.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(i)return null;throw l}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(WS(e))try{this.getOrInitializeService({instanceIdentifier:Pr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:l});i.resolve(u)}catch{}}}}clearInstance(e=Pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pr){return this.instances.has(e)}getOptions(e=Pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&d.resolve(l)}return l}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(i)??new Set;l.add(e),this.onInitCallbacks.set(i,l);const u=this.instances.get(i);return u&&e(u,i),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const l of i)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:XS(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Pr){return this.component?this.component.multipleInstances?e:Pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XS(s){return s===Pr?void 0:s}function WS(s){return s.instantiationMode==="EAGER"}class JS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var lt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(lt||(lt={}));const ZS={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},eA=lt.INFO,tA={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},nA=(s,e,...n)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),l=tA[e];if(l)console[l](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ig{constructor(e){this.name=e,this._logLevel=eA,this._logHandler=nA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const sA=(s,e)=>e.some(n=>s instanceof n);let $b,Gb;function aA(){return $b||($b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iA(){return Gb||(Gb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dw=new WeakMap,bp=new WeakMap,fw=new WeakMap,ep=new WeakMap,rg=new WeakMap;function rA(s){const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(Gi(s.result)),l()},d=()=>{i(s.error),l()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&dw.set(n,s)}).catch(()=>{}),rg.set(e,s),e}function lA(s){if(bp.has(s))return;const e=new Promise((n,i)=>{const l=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),l()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});bp.set(s,e)}let vp={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return bp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||fw.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gi(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function oA(s){vp=s(vp)}function cA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=s.call(tp(this),e,...n);return fw.set(i,e.sort?e.sort():[e]),Gi(i)}:iA().includes(s)?function(...e){return s.apply(tp(this),e),Gi(dw.get(this))}:function(...e){return Gi(s.apply(tp(this),e))}}function uA(s){return typeof s=="function"?cA(s):(s instanceof IDBTransaction&&lA(s),sA(s,aA())?new Proxy(s,vp):s)}function Gi(s){if(s instanceof IDBRequest)return rA(s);if(ep.has(s))return ep.get(s);const e=uA(s);return e!==s&&(ep.set(s,e),rg.set(e,s)),e}const tp=s=>rg.get(s);function hA(s,e,{blocked:n,upgrade:i,blocking:l,terminated:u}={}){const d=indexedDB.open(s,e),p=Gi(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Gi(d.result),g.oldVersion,g.newVersion,Gi(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),l&&g.addEventListener("versionchange",y=>l(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const dA=["get","getKey","getAll","getAllKeys","count"],fA=["put","add","delete","clear"],np=new Map;function Yb(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(np.get(e))return np.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,l=fA.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(l||dA.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,l?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),l&&g.done]))[0]};return np.set(e,u),u}oA(s=>({...s,get:(e,n,i)=>Yb(e,n)||s.get(e,n,i),has:(e,n)=>!!Yb(e,n)||s.has(e,n)}));class mA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function pA(s){return s.getComponent()?.type==="VERSION"}const _p="@firebase/app",Kb="0.14.7";const ti=new ig("@firebase/app"),gA="@firebase/app-compat",yA="@firebase/analytics-compat",xA="@firebase/analytics",bA="@firebase/app-check-compat",vA="@firebase/app-check",_A="@firebase/auth",wA="@firebase/auth-compat",EA="@firebase/database",TA="@firebase/data-connect",NA="@firebase/database-compat",SA="@firebase/functions",AA="@firebase/functions-compat",RA="@firebase/installations",jA="@firebase/installations-compat",CA="@firebase/messaging",IA="@firebase/messaging-compat",kA="@firebase/performance",DA="@firebase/performance-compat",MA="@firebase/remote-config",OA="@firebase/remote-config-compat",VA="@firebase/storage",PA="@firebase/storage-compat",LA="@firebase/firestore",UA="@firebase/ai",BA="@firebase/firestore-compat",zA="firebase",qA="12.8.0";const wp="[DEFAULT]",FA={[_p]:"fire-core",[gA]:"fire-core-compat",[xA]:"fire-analytics",[yA]:"fire-analytics-compat",[vA]:"fire-app-check",[bA]:"fire-app-check-compat",[_A]:"fire-auth",[wA]:"fire-auth-compat",[EA]:"fire-rtdb",[TA]:"fire-data-connect",[NA]:"fire-rtdb-compat",[SA]:"fire-fn",[AA]:"fire-fn-compat",[RA]:"fire-iid",[jA]:"fire-iid-compat",[CA]:"fire-fcm",[IA]:"fire-fcm-compat",[kA]:"fire-perf",[DA]:"fire-perf-compat",[MA]:"fire-rc",[OA]:"fire-rc-compat",[VA]:"fire-gcs",[PA]:"fire-gcs-compat",[LA]:"fire-fst",[BA]:"fire-fst-compat",[UA]:"fire-vertex","fire-js":"fire-js",[zA]:"fire-js-all"};const id=new Map,HA=new Map,Ep=new Map;function Qb(s,e){try{s.container.addComponent(e)}catch(n){ti.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Fr(s){const e=s.name;if(Ep.has(e))return ti.debug(`There were multiple attempts to register component ${e}.`),!1;Ep.set(e,s);for(const n of id.values())Qb(n,s);for(const n of HA.values())Qb(n,s);return!0}function Rd(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function ps(s){return s==null?!1:s.settings!==void 0}const $A={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new tu("app","Firebase",$A);class GA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}const Zr=qA;function mw(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const i={name:wp,automaticDataCollectionEnabled:!0,...e},l=i.name;if(typeof l!="string"||!l)throw Yi.create("bad-app-name",{appName:String(l)});if(n||(n=cw()),!n)throw Yi.create("no-options");const u=id.get(l);if(u){if(qr(n,u.options)&&qr(i,u.config))return u;throw Yi.create("duplicate-app",{appName:l})}const d=new JS(l);for(const g of Ep.values())d.addComponent(g);const p=new GA(n,i,d);return id.set(l,p),p}function lg(s=wp){const e=id.get(s);if(!e&&s===wp&&cw())return mw();if(!e)throw Yi.create("no-app",{appName:s});return e}function ba(s,e,n){let i=FA[s]??s;n&&(i+=`-${n}`);const l=i.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const d=[`Unable to register library "${i}" with version "${e}":`];l&&d.push(`library name "${i}" contains illegal characters (whitespace or "/")`),l&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ti.warn(d.join(" "));return}Fr(new Ji(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const YA="firebase-heartbeat-database",KA=1,zc="firebase-heartbeat-store";let sp=null;function pw(){return sp||(sp=hA(YA,KA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(zc)}catch(n){console.warn(n)}}}}).catch(s=>{throw Yi.create("idb-open",{originalErrorMessage:s.message})})),sp}async function QA(s){try{const n=(await pw()).transaction(zc),i=await n.objectStore(zc).get(gw(s));return await n.done,i}catch(e){if(e instanceof Aa)ti.warn(e.message);else{const n=Yi.create("idb-get",{originalErrorMessage:e?.message});ti.warn(n.message)}}}async function Xb(s,e){try{const i=(await pw()).transaction(zc,"readwrite");await i.objectStore(zc).put(e,gw(s)),await i.done}catch(n){if(n instanceof Aa)ti.warn(n.message);else{const i=Yi.create("idb-set",{originalErrorMessage:n?.message});ti.warn(i.message)}}}function gw(s){return`${s.name}!${s.options.appId}`}const XA=1024,WA=30;class JA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Wb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(l=>l.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>WA){const l=tR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ti.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wb(),{heartbeatsToSend:n,unsentEntries:i}=ZA(this._heartbeatsCache.heartbeats),l=ad(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return ti.warn(e),""}}}function Wb(){return new Date().toISOString().substring(0,10)}function ZA(s,e=XA){const n=[];let i=s.slice();for(const l of s){const u=n.find(d=>d.agent===l.agent);if(u){if(u.dates.push(l.date),Jb(n)>e){u.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),Jb(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class eR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BS()?zS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Xb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Jb(s){return ad(JSON.stringify({version:2,heartbeats:s})).length}function tR(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,e=i);return e}function nR(s){Fr(new Ji("platform-logger",e=>new mA(e),"PRIVATE")),Fr(new Ji("heartbeat",e=>new JA(e),"PRIVATE")),ba(_p,Kb,s),ba(_p,Kb,"esm2020"),ba("fire-js","")}nR("");function yw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sR=yw,xw=new tu("auth","Firebase",yw());const rd=new ig("@firebase/auth");function aR(s,...e){rd.logLevel<=lt.WARN&&rd.warn(`Auth (${Zr}): ${s}`,...e)}function Yh(s,...e){rd.logLevel<=lt.ERROR&&rd.error(`Auth (${Zr}): ${s}`,...e)}function Qs(s,...e){throw og(s,...e)}function va(s,...e){return og(s,...e)}function bw(s,e,n){const i={...sR(),[e]:n};return new tu("auth","Firebase",i).create(e,{appName:s.name})}function Wa(s){return bw(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function og(s,...e){if(typeof s!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(n,...i)}return xw.create(s,...e)}function ze(s,e,...n){if(!s)throw og(e,...n)}function Ka(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Yh(e),new Error(e)}function ni(s,e){s||Ka(e)}function Tp(){return typeof self<"u"&&self.location?.href||""}function iR(){return Zb()==="http:"||Zb()==="https:"}function Zb(){return typeof self<"u"&&self.location?.protocol||null}function rR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iR()||VS()||"connection"in navigator)?navigator.onLine:!0}function lR(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class su{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=DS()||PS()}get(){return rR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cg(s,e){ni(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class vw{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ka("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ka("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ka("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const cR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],uR=new su(3e4,6e4);function lr(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function or(s,e,n,i,l={}){return _w(s,l,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const p=nu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return OS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&rr(s.emulatorConfig.host)&&(y.credentials="include"),vw.fetch()(await ww(s,s.config.apiHost,n,p),y)})}async function _w(s,e,n){s._canInitEmulator=!1;const i={...oR,...e};try{const l=new dR(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Ph(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ph(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw Ph(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw Ph(s,"user-disabled",d);const b=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw bw(s,b,y);Qs(s,b)}}catch(l){if(l instanceof Aa)throw l;Qs(s,"network-request-failed",{message:String(l)})}}async function au(s,e,n,i,l={}){const u=await or(s,e,n,i,l);return"mfaPendingCredential"in u&&Qs(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function ww(s,e,n,i){const l=`${e}${n}?${i}`,u=s,d=u.config.emulator?cg(s.config,l):`${s.config.apiScheme}://${l}`;return cR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function hR(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(va(this.auth,"network-request-failed")),uR.get())})}}function Ph(s,e,n){const i={appName:s.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const l=va(s,e,i);return l.customData._tokenResponse=n,l}function ev(s){return s!==void 0&&s.enterprise!==void 0}class fR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mR(s,e){return or(s,"GET","/v2/recaptchaConfig",lr(s,e))}async function pR(s,e){return or(s,"POST","/v1/accounts:delete",e)}async function ld(s,e){return or(s,"POST","/v1/accounts:lookup",e)}function kc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gR(s,e=!1){const n=$t(s),i=await n.getIdToken(e),l=ug(i);ze(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,d=u?.sign_in_provider;return{claims:l,token:i,authTime:kc(ap(l.auth_time)),issuedAtTime:kc(ap(l.iat)),expirationTime:kc(ap(l.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ap(s){return Number(s)*1e3}function ug(s){const[e,n,i]=s.split(".");if(e===void 0||n===void 0||i===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{const l=rw(n);return l?JSON.parse(l):(Yh("Failed to decode base64 JWT payload"),null)}catch(l){return Yh("Caught error parsing JWT payload as JSON",l?.toString()),null}}function tv(s){const e=ug(s);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function qc(s,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Aa&&yR(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function yR({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class xR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Np{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function od(s){const e=s.auth,n=await s.getIdToken(),i=await qc(s,ld(e,{idToken:n}));ze(i?.users.length,e,"internal-error");const l=i.users[0];s._notifyReloadListener(l);const u=l.providerUserInfo?.length?Ew(l.providerUserInfo):[],d=vR(s.providerData,u),p=s.isAnonymous,g=!(s.email&&l.passwordHash)&&!d?.length,y=p?g:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Np(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(s,b)}async function bR(s){const e=$t(s);await od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vR(s,e){return[...s.filter(i=>!e.some(l=>l.providerId===i.providerId)),...e]}function Ew(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function _R(s,e){const n=await _w(s,{},async()=>{const i=nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,d=await ww(s,l,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&rr(s.emulatorConfig.host)&&(g.credentials="include"),vw.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wR(s,e){return or(s,"POST","/v2/accounts:revokeToken",lr(s,e))}class Zl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const n=tv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:l,expiresIn:u}=await _R(e,n);this.updateTokensAndExpiration(i,l,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:l,expirationTime:u}=n,d=new Zl;return i&&(ze(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),l&&(ze(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),u&&(ze(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zl,this.toJSON())}_performRefresh(){return Ka("not implemented")}}function Li(s,e){ze(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Gs{constructor({uid:e,auth:n,stsTokenManager:i,...l}){this.providerId="firebase",this.proactiveRefresh=new xR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Np(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await qc(this,this.stsTokenManager.getToken(this.auth,e));return ze(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gR(this,e)}reload(){return bR(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await od(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ps(this.auth.app))return Promise.reject(Wa(this.auth));const e=await this.getIdToken();return await qc(this,pR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,l=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:C,providerData:H,stsTokenManager:B}=n;ze(w&&B,e,"internal-error");const M=Zl.fromJSON(this.name,B);ze(typeof w=="string",e,"internal-error"),Li(i,e.name),Li(l,e.name),ze(typeof N=="boolean",e,"internal-error"),ze(typeof C=="boolean",e,"internal-error"),Li(u,e.name),Li(d,e.name),Li(p,e.name),Li(g,e.name),Li(y,e.name),Li(b,e.name);const L=new Gs({uid:w,auth:e,email:l,emailVerified:N,displayName:i,isAnonymous:C,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:M,createdAt:y,lastLoginAt:b});return H&&Array.isArray(H)&&(L.providerData=H.map(F=>({...F}))),g&&(L._redirectEventId=g),L}static async _fromIdTokenResponse(e,n,i=!1){const l=new Zl;l.updateFromServerResponse(n);const u=new Gs({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:i});return await od(u),u}static async _fromGetAccountInfoResponse(e,n,i){const l=n.users[0];ze(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Ew(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!u?.length,p=new Zl;p.updateFromIdToken(i);const g=new Gs({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),y={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new Np(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const nv=new Map;function Qa(s){ni(s instanceof Function,"Expected a class definition");let e=nv.get(s);return e?(ni(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,nv.set(s,e),e)}class Tw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tw.type="NONE";const sv=Tw;function Kh(s,e,n){return`firebase:${s}:${e}:${n}`}class eo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:l,name:u}=this.auth;this.fullUserKey=Kh(this.userKey,l.apiKey,u),this.fullPersistenceKey=Kh("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ld(this.auth,{idToken:e}).catch(()=>{});return n?Gs._fromGetAccountInfoResponse(this.auth,n,e):null}return Gs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new eo(Qa(sv),e,i);const l=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=l[0]||Qa(sv);const d=Kh(i,e.config.apiKey,e.name);let p=null;for(const y of n)try{const b=await y._get(d);if(b){let w;if(typeof b=="string"){const N=await ld(e,{idToken:b}).catch(()=>{});if(!N)break;w=await Gs._fromGetAccountInfoResponse(e,N,b)}else w=Gs._fromJSON(e,b);y!==u&&(p=w),u=y;break}}catch{}const g=l.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new eo(u,e,i):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new eo(u,e,i))}}function av(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Cw(e))return"Blackberry";if(Iw(e))return"Webos";if(Sw(e))return"Safari";if((e.includes("chrome/")||Aw(e))&&!e.includes("edge/"))return"Chrome";if(jw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(n);if(i?.length===2)return i[1]}return"Other"}function Nw(s=Bn()){return/firefox\//i.test(s)}function Sw(s=Bn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Aw(s=Bn()){return/crios\//i.test(s)}function Rw(s=Bn()){return/iemobile/i.test(s)}function jw(s=Bn()){return/android/i.test(s)}function Cw(s=Bn()){return/blackberry/i.test(s)}function Iw(s=Bn()){return/webos/i.test(s)}function hg(s=Bn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function ER(s=Bn()){return hg(s)&&!!window.navigator?.standalone}function TR(){return LS()&&document.documentMode===10}function kw(s=Bn()){return hg(s)||jw(s)||Iw(s)||Cw(s)||/windows phone/i.test(s)||Rw(s)}function Dw(s,e=[]){let n;switch(s){case"Browser":n=av(Bn());break;case"Worker":n=`${av(Bn())}-${s}`;break;default:n=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zr}/${i}`}class NR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});i.onAbort=n,this.queue.push(i);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function SR(s,e={}){return or(s,"GET","/v2/passwordPolicy",lr(s,e))}const AR=6;class RR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let l=0;l<e.length;l++)i=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,l,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class jR{constructor(e,n,i,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iv(this),this.idTokenSubscription=new iv(this),this.beforeStateQueue=new NR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await eo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ld(this,{idToken:e}),i=await Gs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ps(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(i=p.user,l=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await od(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ps(this.app))return Promise.reject(Wa(this));const n=e?$t(e):null;return n&&ze(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ps(this.app)?Promise.reject(Wa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ps(this.app)?Promise.reject(Wa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SR(this),n=new RR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tu("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await wR(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qa(e)||this._popupRedirectResolver;ze(n,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[Qa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,i,l);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Dw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aR(`Error while retrieving App Check token: ${e.error}`),e?.token}}function el(s){return $t(s)}class iv{constructor(e){this.auth=e,this.observer=null,this.addObserver=GS(n=>this.observer=n)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let jd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CR(s){jd=s}function Mw(s){return jd.loadJS(s)}function IR(){return jd.recaptchaEnterpriseScript}function kR(){return jd.gapiScript}function DR(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class MR{constructor(){this.enterprise=new OR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class OR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const VR="recaptcha-enterprise",Ow="NO_RECAPTCHA";class PR{constructor(e){this.type=VR,this.auth=el(e)}async verify(e="verify",n=!1){async function i(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{mR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new fR(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(g=>{p(g)})})}function l(u,d,p){const g=window.grecaptcha;ev(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(Ow)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MR().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{i(this.auth).then(p=>{if(!n&&ev(window.grecaptcha))l(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=IR();g.length!==0&&(g+=p),Mw(g).then(()=>{l(p,u,d)}).catch(y=>{d(y)})}}).catch(p=>{d(p)})})}}async function rv(s,e,n,i=!1,l=!1){const u=new PR(s);let d;if(l)d=Ow;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Sp(s,e,n,i,l){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await rv(s,e,n,n==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await rv(s,e,n,n==="getOobCode");return i(s,d)}else return Promise.reject(u)})}function LR(s,e){const n=Rd(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),u=n.getOptions();if(qr(u,e??{}))return l;Qs(l,"already-initialized")}return n.initialize({options:e})}function UR(s,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Qa);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function BR(s,e,n){const i=el(s);ze(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const l=!1,u=Vw(e),{host:d,port:p}=zR(e),g=p===null?"":`:${p}`,y={url:`${u}//${d}${g}/`},b=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!i._canInitEmulator){ze(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ze(qr(y,i.config.emulator)&&qr(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,rr(d)?(sg(`${u}//${d}${g}`),ag("Auth",!0)):qR()}function Vw(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function zR(s){const e=Vw(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(i);if(l){const u=l[1];return{host:u,port:lv(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:lv(d)}}}function lv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function qR(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ka("not implemented")}_getIdTokenResponse(e){return Ka("not implemented")}_linkToIdToken(e,n){return Ka("not implemented")}_getReauthenticationResolver(e){return Ka("not implemented")}}async function FR(s,e){return or(s,"POST","/v1/accounts:signUp",e)}async function HR(s,e){return au(s,"POST","/v1/accounts:signInWithPassword",lr(s,e))}async function $R(s,e){return au(s,"POST","/v1/accounts:signInWithEmailLink",lr(s,e))}async function GR(s,e){return au(s,"POST","/v1/accounts:signInWithEmailLink",lr(s,e))}class Fc extends dg{constructor(e,n,i,l=null){super("password",i),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Fc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Fc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sp(e,n,"signInWithPassword",HR);case"emailLink":return $R(e,{email:this._email,oobCode:this._password});default:Qs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sp(e,i,"signUpPassword",FR);case"emailLink":return GR(e,{idToken:n,email:this._email,oobCode:this._password});default:Qs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function to(s,e){return au(s,"POST","/v1/accounts:signInWithIdp",lr(s,e))}const YR="http://localhost";class Hr extends dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Hr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:l,...u}=n;if(!i||!l)return null;const d=new Hr(i,l);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return to(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,to(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,to(e,n)}buildRequest(){const e={requestUri:YR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=nu(n)}return e}}function KR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QR(s){const e=Tc(Nc(s)).link,n=e?Tc(Nc(e)).deep_link_id:null,i=Tc(Nc(s)).deep_link_id;return(i?Tc(Nc(i)).link:null)||i||n||e||s}class fg{constructor(e){const n=Tc(Nc(e)),i=n.apiKey??null,l=n.oobCode??null,u=KR(n.mode??null);ze(i&&l&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=QR(e);try{return new fg(n)}catch{return null}}}class go{constructor(){this.providerId=go.PROVIDER_ID}static credential(e,n){return Fc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=fg.parseLink(n);return ze(i,"argument-error"),Fc._fromEmailAndCode(e,i.code,i.tenantId)}}go.PROVIDER_ID="password";go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Pw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class iu extends Pw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Bi extends iu{constructor(){super("facebook.com")}static credential(e){return Hr._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bi.PROVIDER_ID="facebook.com";class zi extends iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Hr._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return zi.credential(n,i)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";class qi extends iu{constructor(){super("github.com")}static credential(e){return Hr._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qi.credential(e.oauthAccessToken)}catch{return null}}}qi.GITHUB_SIGN_IN_METHOD="github.com";qi.PROVIDER_ID="github.com";class Fi extends iu{constructor(){super("twitter.com")}static credential(e,n){return Hr._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Fi.credential(n,i)}catch{return null}}}Fi.TWITTER_SIGN_IN_METHOD="twitter.com";Fi.PROVIDER_ID="twitter.com";async function XR(s,e){return au(s,"POST","/v1/accounts:signUp",lr(s,e))}class $r{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,l=!1){const u=await Gs._fromIdTokenResponse(e,i,l),d=ov(i);return new $r({user:u,providerId:d,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const l=ov(i);return new $r({user:e,providerId:l,_tokenResponse:i,operationType:n})}}function ov(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class cd extends Aa{constructor(e,n,i,l){super(n.code,n.message),this.operationType=i,this.user=l,Object.setPrototypeOf(this,cd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,l){return new cd(e,n,i,l)}}function Lw(s,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?cd._fromErrorAndOperation(s,u,e,i):u})}async function WR(s,e,n=!1){const i=await qc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return $r._forOperation(s,"link",i)}async function JR(s,e,n=!1){const{auth:i}=s;if(ps(i.app))return Promise.reject(Wa(i));const l="reauthenticate";try{const u=await qc(s,Lw(i,l,e,s),n);ze(u.idToken,i,"internal-error");const d=ug(u.idToken);ze(d,i,"internal-error");const{sub:p}=d;return ze(s.uid===p,i,"user-mismatch"),$r._forOperation(s,l,u)}catch(u){throw u?.code==="auth/user-not-found"&&Qs(i,"user-mismatch"),u}}async function Uw(s,e,n=!1){if(ps(s.app))return Promise.reject(Wa(s));const i="signIn",l=await Lw(s,i,e),u=await $r._fromIdTokenResponse(s,i,l);return n||await s._updateCurrentUser(u.user),u}async function ZR(s,e){return Uw(el(s),e)}async function Bw(s){const e=el(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ej(s,e,n){if(ps(s.app))return Promise.reject(Wa(s));const i=el(s),d=await Sp(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",XR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Bw(s),g}),p=await $r._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(p.user),p}function zw(s,e,n){return ps(s.app)?Promise.reject(Wa(s)):ZR($t(s),go.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Bw(s),i})}function tj(s,e,n,i){return $t(s).onIdTokenChanged(e,n,i)}function nj(s,e,n){return $t(s).beforeAuthStateChanged(e,n)}function sj(s,e,n,i){return $t(s).onAuthStateChanged(e,n,i)}function aj(s){return $t(s).signOut()}const ud="__sak";class qw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ud,"1"),this.storage.removeItem(ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const ij=1e3,rj=10;class Fw extends qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),l=this.localCache[n];i!==l&&e(n,l,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const i=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(i);!n&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);TR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,rj):l()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},ij)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Fw.type="LOCAL";const lj=Fw;class Hw extends qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Hw.type="SESSION";const $w=Hw;function oj(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const i=new Cd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:l,data:u}=n.data,d=this.handlersMap[l];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:l});const p=Array.from(d).map(async y=>y(n.origin,u)),g=await oj(p);n.ports[0].postMessage({status:"done",eventId:i,eventType:l,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];function mg(s="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return s+n}class cj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const y=mg("",20);l.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:l,onMessage(w){const N=w;if(N.data.eventId===y)switch(N.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(N.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function _a(){return window}function uj(s){_a().location.href=s}function Gw(){return typeof _a().WorkerGlobalScope<"u"&&typeof _a().importScripts=="function"}async function hj(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dj(){return navigator?.serviceWorker?.controller||null}function fj(){return Gw()?self:null}const Yw="firebaseLocalStorageDb",mj=1,hd="firebaseLocalStorage",Kw="fbase_key";class ru{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Id(s,e){return s.transaction([hd],e?"readwrite":"readonly").objectStore(hd)}function pj(){const s=indexedDB.deleteDatabase(Yw);return new ru(s).toPromise()}function Ap(){const s=indexedDB.open(Yw,mj);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(hd,{keyPath:Kw})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(hd)?e(i):(i.close(),await pj(),e(await Ap()))})})}async function cv(s,e,n){const i=Id(s,!0).put({[Kw]:e,value:n});return new ru(i).toPromise()}async function gj(s,e){const n=Id(s,!1).get(e),i=await new ru(n).toPromise();return i===void 0?null:i.value}function uv(s,e){const n=Id(s,!0).delete(e);return new ru(n).toPromise()}const yj=800,xj=3;class Qw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ap(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>xj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(fj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hj(),!this.activeServiceWorker)return;this.sender=new cj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ap();return await cv(e,ud,"1"),await uv(e,ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>cv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>gj(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>uv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const u=Id(l,!1).getAll();return new ru(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:l,value:u}of e)i.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!i.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const l of Array.from(i))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qw.type="LOCAL";const bj=Qw;new su(3e4,6e4);function vj(s,e){return e?Qa(e):(ze(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class pg extends dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,n){return to(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _j(s){return Uw(s.auth,new pg(s),s.bypassAuthState)}function wj(s){const{auth:e,user:n}=s;return ze(n,e,"internal-error"),JR(n,new pg(s),s.bypassAuthState)}async function Ej(s){const{auth:e,user:n}=s;return ze(n,e,"internal-error"),WR(n,new pg(s),s.bypassAuthState)}class Xw{constructor(e,n,i,l,u=!1){this.auth=e,this.resolver=i,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:l,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _j;case"linkViaPopup":case"linkViaRedirect":return Ej;case"reauthViaPopup":case"reauthViaRedirect":return wj;default:Qs(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tj=new su(2e3,1e4);class Xl extends Xw{constructor(e,n,i,l,u){super(e,n,l,u),this.provider=i,this.authWindow=null,this.pollId=null,Xl.currentPopupAction&&Xl.currentPopupAction.cancel(),Xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=mg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(va(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(va(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(va(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Tj.get())};e()}}Xl.currentPopupAction=null;const Nj="pendingRedirect",Qh=new Map;class Sj extends Xw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Qh.get(this.auth._key());if(!e){try{const i=await Aj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Qh.set(this.auth._key(),e)}return this.bypassAuthState||Qh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Aj(s,e){const n=Cj(e),i=jj(s);if(!await i._isAvailable())return!1;const l=await i._get(n)==="true";return await i._remove(n),l}function Rj(s,e){Qh.set(s._key(),e)}function jj(s){return Qa(s._redirectPersistence)}function Cj(s){return Kh(Nj,s.config.apiKey,s.name)}async function Ij(s,e,n=!1){if(ps(s.app))return Promise.reject(Wa(s));const i=el(s),l=vj(i,e),d=await new Sj(i,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}const kj=600*1e3;class Dj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Ww(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(va(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kj&&this.cachedEventUids.clear(),this.cachedEventUids.has(hv(e))}saveEventToCache(e){this.cachedEventUids.add(hv(e)),this.lastProcessedEventTime=Date.now()}}function hv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Ww({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function Mj(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ww(s);default:return!1}}async function Oj(s,e={}){return or(s,"GET","/v1/projects",e)}const Vj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pj=/^https?/;async function Lj(s){if(s.config.emulator)return;const{authorizedDomains:e}=await Oj(s);for(const n of e)try{if(Uj(n))return}catch{}Qs(s,"unauthorized-domain")}function Uj(s){const e=Tp(),{protocol:n,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===i}if(!Pj.test(n))return!1;if(Vj.test(s))return i===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(i)}const Bj=new su(3e4,6e4);function dv(){const s=_a().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function zj(s){return new Promise((e,n)=>{function i(){dv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dv(),n(va(s,"network-request-failed"))},timeout:Bj.get()})}if(_a().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(_a().gapi?.load)i();else{const l=DR("iframefcb");return _a()[l]=()=>{gapi.load?i():n(va(s,"network-request-failed"))},Mw(`${kR()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Xh=null,e})}let Xh=null;function qj(s){return Xh=Xh||zj(s),Xh}const Fj=new su(5e3,15e3),Hj="__/auth/iframe",$j="emulator/auth/iframe",Gj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kj(s){const e=s.config;ze(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?cg(e,$j):`https://${s.config.authDomain}/${Hj}`,i={apiKey:e.apiKey,appName:s.name,v:Zr},l=Yj.get(s.config.apiHost);l&&(i.eid=l);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${nu(i).slice(1)}`}async function Qj(s){const e=await qj(s),n=_a().gapi;return ze(n,s,"internal-error"),e.open({where:document.body,url:Kj(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gj,dontclear:!0},i=>new Promise(async(l,u)=>{await i.restyle({setHideOnLeave:!1});const d=va(s,"network-request-failed"),p=_a().setTimeout(()=>{u(d)},Fj.get());function g(){_a().clearTimeout(p),l(i)}i.ping(g).then(g,()=>{u(d)})}))}const Xj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wj=500,Jj=600,Zj="_blank",eC="http://localhost";class fv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tC(s,e,n,i=Wj,l=Jj){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...Xj,width:i.toString(),height:l.toString(),top:u,left:d},y=Bn().toLowerCase();n&&(p=Aw(y)?Zj:n),Nw(y)&&(e=e||eC,g.scrollbars="yes");const b=Object.entries(g).reduce((N,[C,H])=>`${N}${C}=${H},`,"");if(ER(y)&&p!=="_self")return nC(e||"",p),new fv(null);const w=window.open(e||"",p,b);ze(w,s,"popup-blocked");try{w.focus()}catch{}return new fv(w)}function nC(s,e){const n=document.createElement("a");n.href=s,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}const sC="__/auth/handler",aC="emulator/auth/handler",iC=encodeURIComponent("fac");async function mv(s,e,n,i,l,u){ze(s.config.authDomain,s,"auth-domain-config-required"),ze(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:i,v:Zr,eventId:l};if(e instanceof Pw){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",$S(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))d[b]=w}if(e instanceof iu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),y=g?`#${iC}=${encodeURIComponent(g)}`:"";return`${rC(s)}?${nu(p).slice(1)}${y}`}function rC({config:s}){return s.emulator?cg(s,aC):`https://${s.authDomain}/${sC}`}const ip="webStorageSupport";class lC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$w,this._completeRedirectFn=Ij,this._overrideRedirectResult=Rj}async _openPopup(e,n,i,l){ni(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await mv(e,n,i,Tp(),l);return tC(e,u,mg())}async _openRedirect(e,n,i,l){await this._originValidation(e);const u=await mv(e,n,i,Tp(),l);return uj(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(ni(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Qj(e),i=new Dj(e);return n.register("authEvent",l=>(ze(l?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ip,{type:ip},l=>{const u=l?.[0]?.[ip];u!==void 0&&n(!!u),Qs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Lj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kw()||Sw()||hg()}}const oC=lC;var pv="@firebase/auth",gv="1.12.0";class cC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function uC(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hC(s){Fr(new Ji("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=i.options;ze(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dw(s)},y=new jR(i,l,u,g);return UR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Fr(new Ji("auth-internal",e=>{const n=el(e.getProvider("auth").getImmediate());return(i=>new cC(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ba(pv,gv,uC(s)),ba(pv,gv,"esm2020")}const dC=300,fC=uw("authIdTokenMaxAge")||dC;let yv=null;const mC=s=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>fC)return;const l=n?.token;yv!==l&&(yv=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function pC(s=lg()){const e=Rd(s,"auth");if(e.isInitialized())return e.getImmediate();const n=LR(s,{popupRedirectResolver:oC,persistence:[bj,lj,$w]}),i=uw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=mC(u.toString());nj(n,d,()=>d(n.currentUser)),tj(n,p=>d(p))}}const l=lw("auth");return l&&BR(n,`http://${l}`),n}function gC(){return document.getElementsByTagName("head")?.[0]??document}CR({loadJS(s){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=l=>{const u=va("internal-error");u.customData=l,n(u)},i.type="text/javascript",i.charset="UTF-8",gC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hC("Browser");var yC="firebase",xC="12.8.0";ba(yC,xC,"app");var xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ki,Jw;(function(){var s;function e(S,A){function R(){}R.prototype=A.prototype,S.F=A.prototype,S.prototype=new R,S.prototype.constructor=S,S.D=function(O,k,U){for(var I=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)I[Me-2]=arguments[Me];return A.prototype[k].apply(O,I)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(S,A,R){R||(R=0);const O=Array(16);if(typeof A=="string")for(var k=0;k<16;++k)O[k]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(k=0;k<16;++k)O[k]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=S.g[0],R=S.g[1],k=S.g[2];let U=S.g[3],I;I=A+(U^R&(k^U))+O[0]+3614090360&4294967295,A=R+(I<<7&4294967295|I>>>25),I=U+(k^A&(R^k))+O[1]+3905402710&4294967295,U=A+(I<<12&4294967295|I>>>20),I=k+(R^U&(A^R))+O[2]+606105819&4294967295,k=U+(I<<17&4294967295|I>>>15),I=R+(A^k&(U^A))+O[3]+3250441966&4294967295,R=k+(I<<22&4294967295|I>>>10),I=A+(U^R&(k^U))+O[4]+4118548399&4294967295,A=R+(I<<7&4294967295|I>>>25),I=U+(k^A&(R^k))+O[5]+1200080426&4294967295,U=A+(I<<12&4294967295|I>>>20),I=k+(R^U&(A^R))+O[6]+2821735955&4294967295,k=U+(I<<17&4294967295|I>>>15),I=R+(A^k&(U^A))+O[7]+4249261313&4294967295,R=k+(I<<22&4294967295|I>>>10),I=A+(U^R&(k^U))+O[8]+1770035416&4294967295,A=R+(I<<7&4294967295|I>>>25),I=U+(k^A&(R^k))+O[9]+2336552879&4294967295,U=A+(I<<12&4294967295|I>>>20),I=k+(R^U&(A^R))+O[10]+4294925233&4294967295,k=U+(I<<17&4294967295|I>>>15),I=R+(A^k&(U^A))+O[11]+2304563134&4294967295,R=k+(I<<22&4294967295|I>>>10),I=A+(U^R&(k^U))+O[12]+1804603682&4294967295,A=R+(I<<7&4294967295|I>>>25),I=U+(k^A&(R^k))+O[13]+4254626195&4294967295,U=A+(I<<12&4294967295|I>>>20),I=k+(R^U&(A^R))+O[14]+2792965006&4294967295,k=U+(I<<17&4294967295|I>>>15),I=R+(A^k&(U^A))+O[15]+1236535329&4294967295,R=k+(I<<22&4294967295|I>>>10),I=A+(k^U&(R^k))+O[1]+4129170786&4294967295,A=R+(I<<5&4294967295|I>>>27),I=U+(R^k&(A^R))+O[6]+3225465664&4294967295,U=A+(I<<9&4294967295|I>>>23),I=k+(A^R&(U^A))+O[11]+643717713&4294967295,k=U+(I<<14&4294967295|I>>>18),I=R+(U^A&(k^U))+O[0]+3921069994&4294967295,R=k+(I<<20&4294967295|I>>>12),I=A+(k^U&(R^k))+O[5]+3593408605&4294967295,A=R+(I<<5&4294967295|I>>>27),I=U+(R^k&(A^R))+O[10]+38016083&4294967295,U=A+(I<<9&4294967295|I>>>23),I=k+(A^R&(U^A))+O[15]+3634488961&4294967295,k=U+(I<<14&4294967295|I>>>18),I=R+(U^A&(k^U))+O[4]+3889429448&4294967295,R=k+(I<<20&4294967295|I>>>12),I=A+(k^U&(R^k))+O[9]+568446438&4294967295,A=R+(I<<5&4294967295|I>>>27),I=U+(R^k&(A^R))+O[14]+3275163606&4294967295,U=A+(I<<9&4294967295|I>>>23),I=k+(A^R&(U^A))+O[3]+4107603335&4294967295,k=U+(I<<14&4294967295|I>>>18),I=R+(U^A&(k^U))+O[8]+1163531501&4294967295,R=k+(I<<20&4294967295|I>>>12),I=A+(k^U&(R^k))+O[13]+2850285829&4294967295,A=R+(I<<5&4294967295|I>>>27),I=U+(R^k&(A^R))+O[2]+4243563512&4294967295,U=A+(I<<9&4294967295|I>>>23),I=k+(A^R&(U^A))+O[7]+1735328473&4294967295,k=U+(I<<14&4294967295|I>>>18),I=R+(U^A&(k^U))+O[12]+2368359562&4294967295,R=k+(I<<20&4294967295|I>>>12),I=A+(R^k^U)+O[5]+4294588738&4294967295,A=R+(I<<4&4294967295|I>>>28),I=U+(A^R^k)+O[8]+2272392833&4294967295,U=A+(I<<11&4294967295|I>>>21),I=k+(U^A^R)+O[11]+1839030562&4294967295,k=U+(I<<16&4294967295|I>>>16),I=R+(k^U^A)+O[14]+4259657740&4294967295,R=k+(I<<23&4294967295|I>>>9),I=A+(R^k^U)+O[1]+2763975236&4294967295,A=R+(I<<4&4294967295|I>>>28),I=U+(A^R^k)+O[4]+1272893353&4294967295,U=A+(I<<11&4294967295|I>>>21),I=k+(U^A^R)+O[7]+4139469664&4294967295,k=U+(I<<16&4294967295|I>>>16),I=R+(k^U^A)+O[10]+3200236656&4294967295,R=k+(I<<23&4294967295|I>>>9),I=A+(R^k^U)+O[13]+681279174&4294967295,A=R+(I<<4&4294967295|I>>>28),I=U+(A^R^k)+O[0]+3936430074&4294967295,U=A+(I<<11&4294967295|I>>>21),I=k+(U^A^R)+O[3]+3572445317&4294967295,k=U+(I<<16&4294967295|I>>>16),I=R+(k^U^A)+O[6]+76029189&4294967295,R=k+(I<<23&4294967295|I>>>9),I=A+(R^k^U)+O[9]+3654602809&4294967295,A=R+(I<<4&4294967295|I>>>28),I=U+(A^R^k)+O[12]+3873151461&4294967295,U=A+(I<<11&4294967295|I>>>21),I=k+(U^A^R)+O[15]+530742520&4294967295,k=U+(I<<16&4294967295|I>>>16),I=R+(k^U^A)+O[2]+3299628645&4294967295,R=k+(I<<23&4294967295|I>>>9),I=A+(k^(R|~U))+O[0]+4096336452&4294967295,A=R+(I<<6&4294967295|I>>>26),I=U+(R^(A|~k))+O[7]+1126891415&4294967295,U=A+(I<<10&4294967295|I>>>22),I=k+(A^(U|~R))+O[14]+2878612391&4294967295,k=U+(I<<15&4294967295|I>>>17),I=R+(U^(k|~A))+O[5]+4237533241&4294967295,R=k+(I<<21&4294967295|I>>>11),I=A+(k^(R|~U))+O[12]+1700485571&4294967295,A=R+(I<<6&4294967295|I>>>26),I=U+(R^(A|~k))+O[3]+2399980690&4294967295,U=A+(I<<10&4294967295|I>>>22),I=k+(A^(U|~R))+O[10]+4293915773&4294967295,k=U+(I<<15&4294967295|I>>>17),I=R+(U^(k|~A))+O[1]+2240044497&4294967295,R=k+(I<<21&4294967295|I>>>11),I=A+(k^(R|~U))+O[8]+1873313359&4294967295,A=R+(I<<6&4294967295|I>>>26),I=U+(R^(A|~k))+O[15]+4264355552&4294967295,U=A+(I<<10&4294967295|I>>>22),I=k+(A^(U|~R))+O[6]+2734768916&4294967295,k=U+(I<<15&4294967295|I>>>17),I=R+(U^(k|~A))+O[13]+1309151649&4294967295,R=k+(I<<21&4294967295|I>>>11),I=A+(k^(R|~U))+O[4]+4149444226&4294967295,A=R+(I<<6&4294967295|I>>>26),I=U+(R^(A|~k))+O[11]+3174756917&4294967295,U=A+(I<<10&4294967295|I>>>22),I=k+(A^(U|~R))+O[2]+718787259&4294967295,k=U+(I<<15&4294967295|I>>>17),I=R+(U^(k|~A))+O[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+U&4294967295}i.prototype.v=function(S,A){A===void 0&&(A=S.length);const R=A-this.blockSize,O=this.C;let k=this.h,U=0;for(;U<A;){if(k==0)for(;U<=R;)l(this,S,U),U+=this.blockSize;if(typeof S=="string"){for(;U<A;)if(O[k++]=S.charCodeAt(U++),k==this.blockSize){l(this,O),k=0;break}}else for(;U<A;)if(O[k++]=S[U++],k==this.blockSize){l(this,O),k=0;break}}this.h=k,this.o+=A},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;A=this.o*8;for(var R=S.length-8;R<S.length;++R)S[R]=A&255,A/=256;for(this.v(S),S=Array(16),A=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)S[A++]=this.g[R]>>>O&255;return S};function u(S,A){var R=p;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=A(S)}function d(S,A){this.h=A;const R=[];let O=!0;for(let k=S.length-1;k>=0;k--){const U=S[k]|0;O&&U==A||(R[k]=U,O=!1)}this.g=R}var p={};function g(S){return-128<=S&&S<128?u(S,function(A){return new d([A|0],A<0?-1:0)}):new d([S|0],S<0?-1:0)}function y(S){if(isNaN(S)||!isFinite(S))return w;if(S<0)return M(y(-S));const A=[];let R=1;for(let O=0;S>=R;O++)A[O]=S/R|0,R*=4294967296;return new d(A,0)}function b(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return M(b(S.substring(1),A));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(A,8));let O=w;for(let U=0;U<S.length;U+=8){var k=Math.min(8,S.length-U);const I=parseInt(S.substring(U,U+k),A);k<8?(k=y(Math.pow(A,k)),O=O.j(k).add(y(I))):(O=O.j(R),O=O.add(y(I)))}return O}var w=g(0),N=g(1),C=g(16777216);s=d.prototype,s.m=function(){if(B(this))return-M(this).m();let S=0,A=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);S+=(O>=0?O:4294967296+O)*A,A*=4294967296}return S},s.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(H(this))return"0";if(B(this))return"-"+M(this).toString(S);const A=y(Math.pow(S,6));var R=this;let O="";for(;;){const k=ue(R,A).g;R=L(R,k.j(A));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(S);if(R=k,H(R))return U+O;for(;U.length<6;)U="0"+U;O=U+O}},s.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function H(S){if(S.h!=0)return!1;for(let A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function B(S){return S.h==-1}s.l=function(S){return S=L(this,S),B(S)?-1:H(S)?0:1};function M(S){const A=S.g.length,R=[];for(let O=0;O<A;O++)R[O]=~S.g[O];return new d(R,~S.h).add(N)}s.abs=function(){return B(this)?M(this):this},s.add=function(S){const A=Math.max(this.g.length,S.g.length),R=[];let O=0;for(let k=0;k<=A;k++){let U=O+(this.i(k)&65535)+(S.i(k)&65535),I=(U>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);O=I>>>16,U&=65535,I&=65535,R[k]=I<<16|U}return new d(R,R[R.length-1]&-2147483648?-1:0)};function L(S,A){return S.add(M(A))}s.j=function(S){if(H(this)||H(S))return w;if(B(this))return B(S)?M(this).j(M(S)):M(M(this).j(S));if(B(S))return M(this.j(M(S)));if(this.l(C)<0&&S.l(C)<0)return y(this.m()*S.m());const A=this.g.length+S.g.length,R=[];for(var O=0;O<2*A;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let k=0;k<S.g.length;k++){const U=this.i(O)>>>16,I=this.i(O)&65535,Me=S.i(k)>>>16,ke=S.i(k)&65535;R[2*O+2*k]+=I*ke,F(R,2*O+2*k),R[2*O+2*k+1]+=U*ke,F(R,2*O+2*k+1),R[2*O+2*k+1]+=I*Me,F(R,2*O+2*k+1),R[2*O+2*k+2]+=U*Me,F(R,2*O+2*k+2)}for(S=0;S<A;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=A;S<2*A;S++)R[S]=0;return new d(R,0)};function F(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function Q(S,A){this.g=S,this.h=A}function ue(S,A){if(H(A))throw Error("division by zero");if(H(S))return new Q(w,w);if(B(S))return A=ue(M(S),A),new Q(M(A.g),M(A.h));if(B(A))return A=ue(S,M(A)),new Q(M(A.g),A.h);if(S.g.length>30){if(B(S)||B(A))throw Error("slowDivide_ only works with positive integers.");for(var R=N,O=A;O.l(S)<=0;)R=fe(R),O=fe(O);var k=re(R,1),U=re(O,1);for(O=re(O,2),R=re(R,2);!H(O);){var I=U.add(O);I.l(S)<=0&&(k=k.add(R),U=I),O=re(O,1),R=re(R,1)}return A=L(S,k.j(A)),new Q(k,A)}for(k=w;S.l(A)>=0;){for(R=Math.max(1,Math.floor(S.m()/A.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),U=y(R),I=U.j(A);B(I)||I.l(S)>0;)R-=O,U=y(R),I=U.j(A);H(U)&&(U=N),k=k.add(U),S=L(S,I)}return new Q(k,S)}s.B=function(S){return ue(this,S).h},s.and=function(S){const A=Math.max(this.g.length,S.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)&S.i(O);return new d(R,this.h&S.h)},s.or=function(S){const A=Math.max(this.g.length,S.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)|S.i(O);return new d(R,this.h|S.h)},s.xor=function(S){const A=Math.max(this.g.length,S.g.length),R=[];for(let O=0;O<A;O++)R[O]=this.i(O)^S.i(O);return new d(R,this.h^S.h)};function fe(S){const A=S.g.length+1,R=[];for(let O=0;O<A;O++)R[O]=S.i(O)<<1|S.i(O-1)>>>31;return new d(R,S.h)}function re(S,A){const R=A>>5;A%=32;const O=S.g.length-R,k=[];for(let U=0;U<O;U++)k[U]=A>0?S.i(U+R)>>>A|S.i(U+R+1)<<32-A:S.i(U+R);return new d(k,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Jw=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=b,Ki=d}).apply(typeof xv<"u"?xv:typeof self<"u"?self:typeof window<"u"?window:{});var Lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Zw,Sc,e1,Wh,Rp,t1,n1,s1;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lh=="object"&&Lh];for(var x=0;x<h.length;++x){var _=h[x];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function l(h,x){if(x)e:{var _=i;h=h.split(".");for(var T=0;T<h.length-1;T++){var $=h[T];if(!($ in _))break e;_=_[$]}h=h[h.length-1],T=_[h],x=x(T),x!=T&&x!=null&&e(_,h,{configurable:!0,writable:!0,value:x})}}l("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(h){return h||function(x){var _=[],T;for(T in x)Object.prototype.hasOwnProperty.call(x,T)&&_.push([T,x[T]]);return _}});var u=u||{},d=this||self;function p(h){var x=typeof h;return x=="object"&&h!=null||x=="function"}function g(h,x,_){return h.call.apply(h.bind,arguments)}function y(h,x,_){return y=g,y.apply(null,arguments)}function b(h,x){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),h.apply(this,T)}}function w(h,x){function _(){}_.prototype=x.prototype,h.Z=x.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(T,$,J){for(var pe=Array(arguments.length-2),We=2;We<arguments.length;We++)pe[We-2]=arguments[We];return x.prototype[$].apply(T,pe)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const x=h.length;if(x>0){const _=Array(x);for(let T=0;T<x;T++)_[T]=h[T];return _}return[]}function H(h,x){for(let T=1;T<arguments.length;T++){const $=arguments[T];var _=typeof $;if(_=_!="object"?_:$?Array.isArray($)?"array":_:"null",_=="array"||_=="object"&&typeof $.length=="number"){_=h.length||0;const J=$.length||0;h.length=_+J;for(let pe=0;pe<J;pe++)h[_+pe]=$[pe]}else h.push($)}}class B{constructor(x,_){this.i=x,this.j=_,this.h=0,this.g=null}get(){let x;return this.h>0?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function M(h){d.setTimeout(()=>{throw h},0)}function L(){var h=S;let x=null;return h.g&&(x=h.g,h.g=h.g.next,h.g||(h.h=null),x.next=null),x}class F{constructor(){this.h=this.g=null}add(x,_){const T=Q.get();T.set(x,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Q=new B(()=>new ue,h=>h.reset());class ue{constructor(){this.next=this.g=this.h=null}set(x,_){this.h=x,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,re=!1,S=new F,A=()=>{const h=Promise.resolve(void 0);fe=()=>{h.then(R)}};function R(){for(var h;h=L();){try{h.h.call(h.g)}catch(_){M(_)}var x=Q;x.j(h),x.h<100&&(x.h++,h.next=x.g,x.g=h)}re=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,x){this.type=h,this.g=this.target=x,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,x=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,x),d.removeEventListener("test",_,x)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function Me(h,x){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,x)}w(Me,k),Me.prototype.init=function(h,x){const _=this.type=h.type,T=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=x,x=h.relatedTarget,x||(_=="mouseover"?x=h.fromElement:_=="mouseout"&&(x=h.toElement)),this.relatedTarget=x,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),G=0;function he(h,x,_,T,$){this.listener=h,this.proxy=null,this.src=x,this.type=_,this.capture=!!T,this.ha=$,this.key=++G,this.da=this.fa=!1}function we(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ge(h,x,_){for(const T in h)x.call(_,h[T],T,h)}function He(h,x){for(const _ in h)x.call(void 0,h[_],_,h)}function V(h){const x={};for(const _ in h)x[_]=h[_];return x}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(h,x){let _,T;for(let $=1;$<arguments.length;$++){T=arguments[$];for(_ in T)h[_]=T[_];for(let J=0;J<ne.length;J++)_=ne[J],Object.prototype.hasOwnProperty.call(T,_)&&(h[_]=T[_])}}function ge(h){this.src=h,this.g={},this.h=0}ge.prototype.add=function(h,x,_,T,$){const J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);const pe=Ve(h,x,T,$);return pe>-1?(x=h[pe],_||(x.fa=!1)):(x=new he(x,this.src,J,!!T,$),x.fa=_,h.push(x)),x};function Se(h,x){const _=x.type;if(_ in h.g){var T=h.g[_],$=Array.prototype.indexOf.call(T,x,void 0),J;(J=$>=0)&&Array.prototype.splice.call(T,$,1),J&&(we(x),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Ve(h,x,_,T){for(let $=0;$<h.length;++$){const J=h[$];if(!J.da&&J.listener==x&&J.capture==!!_&&J.ha==T)return $}return-1}var se="closure_lm_"+(Math.random()*1e6|0),De={};function Ae(h,x,_,T,$){if(Array.isArray(x)){for(let J=0;J<x.length;J++)Ae(h,x[J],_,T,$);return null}return _=zn(_),h&&h[ke]?h.J(x,_,p(T)?!!T.capture:!1,$):Fe(h,x,_,!1,T,$)}function Fe(h,x,_,T,$,J){if(!x)throw Error("Invalid event type");const pe=p($)?!!$.capture:!!$;let We=sn(h);if(We||(h[se]=We=new ge(h)),_=We.add(x,_,T,pe,J),_.proxy)return _;if(T=tt(),_.proxy=T,T.src=h,T.listener=_,h.addEventListener)U||($=pe),$===void 0&&($=!1),h.addEventListener(x.toString(),T,$);else if(h.attachEvent)h.attachEvent(pt(x.toString()),T);else if(h.addListener&&h.removeListener)h.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function tt(){function h(_){return x.call(h.src,h.listener,_)}const x=gn;return h}function Gt(h,x,_,T,$){if(Array.isArray(x))for(var J=0;J<x.length;J++)Gt(h,x[J],_,T,$);else T=p(T)?!!T.capture:!!T,_=zn(_),h&&h[ke]?(h=h.i,J=String(x).toString(),J in h.g&&(x=h.g[J],_=Ve(x,_,T,$),_>-1&&(we(x[_]),Array.prototype.splice.call(x,_,1),x.length==0&&(delete h.g[J],h.h--)))):h&&(h=sn(h))&&(x=h.g[x.toString()],h=-1,x&&(h=Ve(x,_,T,$)),(_=h>-1?x[h]:null)&&It(_))}function It(h){if(typeof h!="number"&&h&&!h.da){var x=h.src;if(x&&x[ke])Se(x.i,h);else{var _=h.type,T=h.proxy;x.removeEventListener?x.removeEventListener(_,T,h.capture):x.detachEvent?x.detachEvent(pt(_),T):x.addListener&&x.removeListener&&x.removeListener(T),(_=sn(x))?(Se(_,h),_.h==0&&(_.src=null,x[se]=null)):we(h)}}}function pt(h){return h in De?De[h]:De[h]="on"+h}function gn(h,x){if(h.da)h=!0;else{x=new Me(x,this);const _=h.listener,T=h.ha||h.src;h.fa&&It(h),h=_.call(T,x)}return h}function sn(h){return h=h[se],h instanceof ge?h:null}var ss="__closure_events_fn_"+(Math.random()*1e9>>>0);function zn(h){return typeof h=="function"?h:(h[ss]||(h[ss]=function(x){return h.handleEvent(x)}),h[ss])}function vt(){O.call(this),this.i=new ge(this),this.M=this,this.G=null}w(vt,O),vt.prototype[ke]=!0,vt.prototype.removeEventListener=function(h,x,_,T){Gt(this,h,x,_,T)};function be(h,x){var _,T=h.G;if(T)for(_=[];T;T=T.G)_.push(T);if(h=h.M,T=x.type||x,typeof x=="string")x=new k(x,h);else if(x instanceof k)x.target=x.target||h;else{var $=x;x=new k(T,h),de(x,$)}$=!0;let J,pe;if(_)for(pe=_.length-1;pe>=0;pe--)J=x.g=_[pe],$=Re(J,T,!0,x)&&$;if(J=x.g=h,$=Re(J,T,!0,x)&&$,$=Re(J,T,!1,x)&&$,_)for(pe=0;pe<_.length;pe++)J=x.g=_[pe],$=Re(J,T,!1,x)&&$}vt.prototype.N=function(){if(vt.Z.N.call(this),this.i){var h=this.i;for(const x in h.g){const _=h.g[x];for(let T=0;T<_.length;T++)we(_[T]);delete h.g[x],h.h--}}this.G=null},vt.prototype.J=function(h,x,_,T){return this.i.add(String(h),x,!1,_,T)},vt.prototype.K=function(h,x,_,T){return this.i.add(String(h),x,!0,_,T)};function Re(h,x,_,T){if(x=h.i.g[String(x)],!x)return!0;x=x.concat();let $=!0;for(let J=0;J<x.length;++J){const pe=x[J];if(pe&&!pe.da&&pe.capture==_){const We=pe.listener,Zt=pe.ha||pe.src;pe.fa&&Se(h.i,pe),$=We.call(Zt,T)!==!1&&$}}return $&&!T.defaultPrevented}function $e(h,x){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(x)>2147483647?-1:d.setTimeout(h,x||0)}function Pt(h){h.g=$e(()=>{h.g=null,h.i&&(h.i=!1,Pt(h))},h.l);const x=h.h;h.h=null,h.m.apply(null,x)}class at extends O{constructor(x,_){super(),this.m=x,this.l=_,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:Pt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ut(h){O.call(this),this.h=h,this.g={}}w(ut,O);var z=[];function ee(h){Ge(h.g,function(x,_){this.g.hasOwnProperty(_)&&It(x)},h),h.g={}}ut.prototype.N=function(){ut.Z.N.call(this),ee(this)},ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ye=d.JSON.stringify,xe=d.JSON.parse,Oe=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function _t(){}function ft(){}var ce={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function me(){k.call(this,"d")}w(me,k);function Be(){k.call(this,"c")}w(Be,k);var Pe={},gt=null;function Le(){return gt=gt||new vt}Pe.Ia="serverreachability";function je(h){k.call(this,Pe.Ia,h)}w(je,k);function At(h){const x=Le();be(x,new je(x))}Pe.STAT_EVENT="statevent";function vn(h,x){k.call(this,Pe.STAT_EVENT,h),this.stat=x}w(vn,k);function wt(h){const x=Le();be(x,new vn(x,h))}Pe.Ja="timingevent";function yn(h,x){k.call(this,Pe.Ja,h),this.size=x}w(yn,k);function Dn(h,x){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},x)}function qn(){this.g=!0}qn.prototype.ua=function(){this.g=!1};function _o(h,x,_,T,$,J){h.info(function(){if(h.g)if(J){var pe="",We=J.split("&");for(let Et=0;Et<We.length;Et++){var Zt=We[Et].split("=");if(Zt.length>1){const qt=Zt[0];Zt=Zt[1];const Es=qt.split("_");pe=Es.length>=2&&Es[1]=="type"?pe+(qt+"="+Zt+"&"):pe+(qt+"=redacted&")}}}else pe=null;else pe=J;return"XMLHTTP REQ ("+T+") [attempt "+$+"]: "+x+`
`+_+`
`+pe})}function Mn(h,x,_,T,$,J,pe){h.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+$+"]: "+x+`
`+_+`
`+J+" "+pe})}function as(h,x,_,T){h.info(function(){return"XMLHTTP TEXT ("+x+"): "+il(h,_)+(T?" "+T:"")})}function On(h,x){h.info(function(){return"TIMEOUT: "+x})}qn.prototype.info=function(){};function il(h,x){if(!h.g)return x;if(!x)return null;try{const J=JSON.parse(x);if(J){for(h=0;h<J.length;h++)if(Array.isArray(J[h])){var _=J[h];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var $=T[0];if($!="noop"&&$!="stop"&&$!="close")for(let pe=1;pe<T.length;pe++)T[pe]=""}}}}return ye(J)}catch{return x}}var Ra={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},hr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ii;function ri(){}w(ri,_t),ri.prototype.g=function(){return new XMLHttpRequest},ii=new ri;function ja(h){return encodeURIComponent(String(h))}function mu(h){var x=1;h=h.split(":");const _=[];for(;x>0&&h.length;)_.push(h.shift()),x--;return h.length&&_.push(h.join(":")),_}function Vs(h,x,_,T){this.j=h,this.i=x,this.l=_,this.S=T||1,this.V=new ut(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ps}function Ps(){this.i=null,this.g="",this.h=!1}var an={},_n={};function Js(h,x,_){h.M=1,h.A=dr(ln(x)),h.u=_,h.R=!0,rl(h,null)}function rl(h,x){h.F=Date.now(),Zs(h),h.B=ln(h.A);var _=h.B,T=h.S;Array.isArray(T)||(T=[String(T)]),ul(_.i,"t",T),h.C=0,_=h.j.L,h.h=new Ps,h.g=ju(h.j,_?x:null,!h.u),h.P>0&&(h.O=new at(y(h.Y,h,h.g),h.P)),x=h.V,_=h.g,T=h.ba;var $="readystatechange";Array.isArray($)||($&&(z[0]=$.toString()),$=z);for(let J=0;J<$.length;J++){const pe=Ae(_,$[J],T||x.handleEvent,!1,x.h||x);if(!pe)break;x.g[pe.key]=pe}x=h.J?V(h.J):{},h.u?(h.v||(h.v="POST"),x["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,x)):(h.v="GET",h.g.ea(h.B,h.v,null,x)),At(),_o(h.i,h.v,h.B,h.l,h.S,h.u)}Vs.prototype.ba=function(h){h=h.target;const x=this.O;x&&Bs(h)==3?x.j():this.Y(h)},Vs.prototype.Y=function(h){try{if(h==this.g)e:{const We=Bs(this.g),Zt=this.g.ya(),Et=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||Nn(this.g)))){this.K||We!=4||Zt==7||(Zt==8||Et<=0?At(3):At(2)),ea(this);var x=this.g.ca();this.X=x;var _=Qd(this);if(this.o=x==200,Mn(this.i,this.v,this.B,this.l,this.S,We,x),this.o){if(this.U&&!this.L){t:{if(this.g){var T,$=this.g;if((T=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(T)){var J=T;break t}}J=null}if(h=J)as(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ta(this,h);else{this.o=!1,this.m=3,wt(12),is(this),vs(this);break e}}if(this.R){h=!0;let qt;for(;!this.K&&this.C<_.length;)if(qt=gu(this,_),qt==_n){We==4&&(this.m=4,wt(14),h=!1),as(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==an){this.m=4,wt(15),as(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else as(this.i,this.l,qt,null),ta(this,qt);if(pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||_.length!=0||this.h.h||(this.m=1,wt(16),h=!1),this.o=this.o&&h,!h)as(this.i,this.l,_,"[Invalid Chunked Response]"),is(this),vs(this);else if(_.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Vo(pe),pe.P=!0,wt(11))}}else as(this.i,this.l,_,null),ta(this,_);We==4&&is(this),this.o&&!this.K&&(We==4?Nu(this.j,this):(this.o=!1,Zs(this)))}else Ia(this.g),x==400&&_.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),is(this),vs(this)}}}catch{}};function Qd(h){if(!pu(h))return h.g.la();const x=Nn(h.g);if(x==="")return"";let _="";const T=x.length,$=Bs(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return is(h),vs(h),"";h.h.i=new d.TextDecoder}for(let J=0;J<T;J++)h.h.h=!0,_+=h.h.i.decode(x[J],{stream:!($&&J==T-1)});return x.length=0,h.h.g+=_,h.C=0,h.h.g}function pu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function gu(h,x){var _=h.C,T=x.indexOf(`
`,_);return T==-1?_n:(_=Number(x.substring(_,T)),isNaN(_)?an:(T+=1,T+_>x.length?_n:(x=x.slice(T,T+_),h.C=T+_,x)))}Vs.prototype.cancel=function(){this.K=!0,is(this)};function Zs(h){h.T=Date.now()+h.H,ll(h,h.H)}function ll(h,x){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Dn(y(h.aa,h),x)}function ea(h){h.D&&(d.clearTimeout(h.D),h.D=null)}Vs.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(On(this.i,this.B),this.M!=2&&(At(),wt(17)),is(this),this.m=2,vs(this)):ll(this,this.T-h)};function vs(h){h.j.I==0||h.K||Nu(h.j,h)}function is(h){ea(h);var x=h.O;x&&typeof x.dispose=="function"&&x.dispose(),h.O=null,ee(h.V),h.g&&(x=h.g,h.g=null,x.abort(),x.dispose())}function ta(h,x){try{var _=h.j;if(_.I!=0&&(_.g==h||sa(_.h,h))){if(!h.L&&sa(_.h,h)&&_.I==3){try{var T=_.Ba.g.parse(x)}catch{T=null}if(Array.isArray(T)&&T.length==3){var $=T;if($[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)pl(_),mi(_);else break e;br(_),wt(18)}}else _.xa=$[1],0<_.xa-_.K&&$[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Dn(y(_.Va,_),6e3));na(_.h)<=1&&_.ta&&(_.ta=void 0)}else ca(_,11)}else if((h.L||_.g==h)&&pl(_),!I(x))for($=_.Ba.g.parse(x),x=0;x<$.length;x++){let Et=$[x];const qt=Et[0];if(!(qt<=_.K))if(_.K=qt,Et=Et[1],_.I==2)if(Et[0]=="c"){_.M=Et[1],_.ba=Et[2];const Es=Et[3];Es!=null&&(_.ka=Es,_.j.info("VER="+_.ka));const ua=Et[4];ua!=null&&(_.za=ua,_.j.info("SVER="+_.za));const zs=Et[5];zs!=null&&typeof zs=="number"&&zs>0&&(T=1.5*zs,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const qs=h.g;if(qs){const vr=qs.g?qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vr){var J=T.h;J.g||vr.indexOf("spdy")==-1&&vr.indexOf("quic")==-1&&vr.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(To(J,J.h),J.h=null))}if(T.G){const gl=qs.g?qs.g.getResponseHeader("X-HTTP-Session-Id"):null;gl&&(T.wa=gl,Rt(T.J,T.G,gl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var pe=h;if(T.na=Ru(T,T.L?T.ba:null,T.W),pe.L){No(T.h,pe);var We=pe,Zt=T.O;Zt&&(We.H=Zt),We.D&&(ea(We),Zs(We)),T.g=pe}else Eu(T);_.i.length>0&&oa(_)}else Et[0]!="stop"&&Et[0]!="close"||ca(_,7);else _.I==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?ca(_,7):Mo(_):Et[0]!="noop"&&_.l&&_.l.qa(Et),_.A=0)}}At(4)}catch{}}var rn=class{constructor(h,x){this.g=h,this.map=x}};function wo(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Eo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function na(h){return h.h?1:h.g?h.g.size:0}function sa(h,x){return h.h?h.h==x:h.g?h.g.has(x):!1}function To(h,x){h.g?h.g.add(x):h.h=x}function No(h,x){h.h&&h.h==x?h.h=null:h.g&&h.g.has(x)&&h.g.delete(x)}wo.prototype.cancel=function(){if(this.i=So(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function So(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let x=h.i;for(const _ of h.g.values())x=x.concat(_.G);return x}return C(h.i)}var yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ol(h,x){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const T=h[_].indexOf("=");let $,J=null;T>=0?($=h[_].substring(0,T),J=h[_].substring(T+1)):$=h[_],x($,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function rs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let x;h instanceof rs?(this.l=h.l,wn(this,h.j),this.o=h.o,this.g=h.g,li(this,h.u),this.h=h.h,Ao(this,_u(h.i)),this.m=h.m):h&&(x=String(h).match(yu))?(this.l=!1,wn(this,x[1]||"",!0),this.o=aa(x[2]||""),this.g=aa(x[3]||"",!0),li(this,x[4]),this.h=aa(x[5]||"",!0),Ao(this,x[6]||"",!0),this.m=aa(x[7]||"")):(this.l=!1,this.i=new ci(null,this.l))}rs.prototype.toString=function(){const h=[];var x=this.j;x&&h.push(fr(x,cl,!0),":");var _=this.g;return(_||x=="file")&&(h.push("//"),(x=this.o)&&h.push(fr(x,cl,!0),"@"),h.push(ja(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(fr(_,_.charAt(0)=="/"?Ro:xu,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",fr(_,bu)),h.join("")},rs.prototype.resolve=function(h){const x=ln(this);let _=!!h.j;_?wn(x,h.j):_=!!h.o,_?x.o=h.o:_=!!h.g,_?x.g=h.g:_=h.u!=null;var T=h.h;if(_)li(x,h.u);else if(_=!!h.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var $=x.h.lastIndexOf("/");$!=-1&&(T=x.h.slice(0,$+1)+T)}if($=T,$==".."||$==".")T="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){T=$.lastIndexOf("/",0)==0,$=$.split("/");const J=[];for(let pe=0;pe<$.length;){const We=$[pe++];We=="."?T&&pe==$.length&&J.push(""):We==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),T&&pe==$.length&&J.push("")):(J.push(We),T=!0)}T=J.join("/")}else T=$}return _?x.h=T:_=h.i.toString()!=="",_?Ao(x,_u(h.i)):_=!!h.m,_&&(x.m=h.m),x};function ln(h){return new rs(h)}function wn(h,x,_){h.j=_?aa(x,!0):x,h.j&&(h.j=h.j.replace(/:$/,""))}function li(h,x){if(x){if(x=Number(x),isNaN(x)||x<0)throw Error("Bad port number "+x);h.u=x}else h.u=null}function Ao(h,x,_){x instanceof ci?(h.i=x,hl(h.i,h.l)):(_||(x=fr(x,oi)),h.i=new ci(x,h.l))}function Rt(h,x,_){h.i.set(x,_)}function dr(h){return Rt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function aa(h,x){return h?x?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function fr(h,x,_){return typeof h=="string"?(h=encodeURI(h).replace(x,Gn),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Gn(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var cl=/[#\/\?@]/g,xu=/[#\?:]/g,Ro=/[#\?]/g,oi=/[#\?@]/g,bu=/#/g;function ci(h,x){this.h=this.g=null,this.i=h||null,this.j=!!x}function Yn(h){h.g||(h.g=new Map,h.h=0,h.i&&ol(h.i,function(x,_){h.add(decodeURIComponent(x.replace(/\+/g," ")),_)}))}s=ci.prototype,s.add=function(h,x){Yn(this),this.i=null,h=ui(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(x),this.h+=1,this};function vu(h,x){Yn(h),x=ui(h,x),h.g.has(x)&&(h.i=null,h.h-=h.g.get(x).length,h.g.delete(x))}function jo(h,x){return Yn(h),x=ui(h,x),h.g.has(x)}s.forEach=function(h,x){Yn(this),this.g.forEach(function(_,T){_.forEach(function($){h.call(x,$,T,this)},this)},this)};function Co(h,x){Yn(h);let _=[];if(typeof x=="string")jo(h,x)&&(_=_.concat(h.g.get(ui(h,x))));else for(h=Array.from(h.g.values()),x=0;x<h.length;x++)_=_.concat(h[x]);return _}s.set=function(h,x){return Yn(this),this.i=null,h=ui(this,h),jo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[x]),this.h+=1,this},s.get=function(h,x){return h?(h=Co(this,h),h.length>0?String(h[0]):x):x};function ul(h,x,_){vu(h,x),_.length>0&&(h.i=null,h.g.set(ui(h,x),C(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],x=Array.from(this.g.keys());for(let T=0;T<x.length;T++){var _=x[T];const $=ja(_);_=Co(this,_);for(let J=0;J<_.length;J++){let pe=$;_[J]!==""&&(pe+="="+ja(_[J])),h.push(pe)}}return this.i=h.join("&")};function _u(h){const x=new ci;return x.i=h.i,h.g&&(x.g=new Map(h.g),x.h=h.h),x}function ui(h,x){return x=String(x),h.j&&(x=x.toLowerCase()),x}function hl(h,x){x&&!h.j&&(Yn(h),h.i=null,h.g.forEach(function(_,T){const $=T.toLowerCase();T!=$&&(vu(this,T),ul(this,$,_))},h)),h.j=x}function Ls(h,x){const _=new qn;if(d.Image){const T=new Image;T.onload=b(_s,_,"TestLoadImage: loaded",!0,x,T),T.onerror=b(_s,_,"TestLoadImage: error",!1,x,T),T.onabort=b(_s,_,"TestLoadImage: abort",!1,x,T),T.ontimeout=b(_s,_,"TestLoadImage: timeout",!1,x,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=h}else x(!1)}function Io(h,x){const _=new qn,T=new AbortController,$=setTimeout(()=>{T.abort(),_s(_,"TestPingServer: timeout",!1,x)},1e4);fetch(h,{signal:T.signal}).then(J=>{clearTimeout($),J.ok?_s(_,"TestPingServer: ok",!0,x):_s(_,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout($),_s(_,"TestPingServer: error",!1,x)})}function _s(h,x,_,T,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),T(_)}catch{}}function hi(){this.g=new Oe}function ia(h){this.i=h.Sb||null,this.h=h.ab||!1}w(ia,_t),ia.prototype.g=function(){return new mr(this.i,this.h)};function mr(h,x){vt.call(this),this.H=h,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(mr,vt),s=mr.prototype,s.open=function(h,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=x,this.readyState=1,Us(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const x={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(x.body=h),(this.H||d).fetch(new Request(this.D,x)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Us(this)),this.g&&(this.readyState=3,Us(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function dl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var x=h.value?h.value:new Uint8Array(0);(x=this.B.decode(x,{stream:!h.done}))&&(this.response=this.responseText+=x)}h.done?di(this):Us(this),this.readyState==3&&dl(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,di(this))},s.Na=function(h){this.g&&(this.response=h,di(this))},s.ga=function(){this.g&&di(this)};function di(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Us(h)}s.setRequestHeader=function(h,x){this.A.append(h,x)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],x=this.h.entries();for(var _=x.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=x.next();return h.join(`\r
`)};function Us(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(mr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ws(h){let x="";return Ge(h,function(_,T){x+=T,x+=":",x+=_,x+=`\r
`}),x}function pr(h,x,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=ws(_),typeof h=="string"?_!=null&&ja(_):Rt(h,x,_))}function kt(h){vt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(kt,vt);var ra=/^https?$/i,ko=["POST","PUT"];s=kt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,x,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);x=x?x.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ii.g(),this.g.onreadystatechange=N(y(this.Ca,this));try{this.B=!0,this.g.open(x,String(h),!0),this.B=!1}catch(J){gr(this,J);return}if(h=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var $ in T)_.set($,T[$]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const J of T.keys())_.set(J,T.get(J));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(J=>J.toLowerCase()=="content-type"),$=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(ko,x,void 0)>=0)||T||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,pe]of _)this.g.setRequestHeader(J,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(J){gr(this,J)}};function gr(h,x){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=x,h.o=5,Do(h),Ca(h)}function Do(h){h.A||(h.A=!0,be(h,"complete"),be(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,be(this,"complete"),be(this,"abort"),Ca(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ca(this,!0)),kt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?yr(this):this.Xa())},s.Xa=function(){yr(this)};function yr(h){if(h.h&&typeof u<"u"){if(h.v&&Bs(h)==4)setTimeout(h.Ca.bind(h),0);else if(be(h,"readystatechange"),Bs(h)==4){h.h=!1;try{const J=h.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var _;if(!(_=x)){var T;if(T=J===0){let pe=String(h.D).match(yu)[1]||null;!pe&&d.self&&d.self.location&&(pe=d.self.location.protocol.slice(0,-1)),T=!ra.test(pe?pe.toLowerCase():"")}_=T}if(_)be(h,"complete"),be(h,"success");else{h.o=6;try{var $=Bs(h)>2?h.g.statusText:""}catch{$=""}h.l=$+" ["+h.ca()+"]",Do(h)}}finally{Ca(h)}}}}function Ca(h,x){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,x||be(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function Bs(h){return h.g?h.g.readyState:0}s.ca=function(){try{return Bs(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var x=this.g.responseText;return h&&x.indexOf(h)==0&&(x=x.substring(h.length)),xe(x)}};function Nn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ia(h){const x={};h=(h.g&&Bs(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<h.length;T++){if(I(h[T]))continue;var _=mu(h[T]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const J=x[$]||[];x[$]=J,J.push(_)}He(x,function(T){return T.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function la(h,x,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||x}function fi(h){this.za=0,this.i=[],this.j=new qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=la("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=la("baseRetryDelayMs",5e3,h),this.Za=la("retryDelaySeedMs",1e4,h),this.Ta=la("forwardChannelMaxRetries",2,h),this.va=la("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new wo(h&&h.concurrentRequestLimit),this.Ba=new hi,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=fi.prototype,s.ka=8,s.I=1,s.connect=function(h,x,_,T){wt(0),this.W=h,this.H=x||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Ru(this,null,this.W),oa(this)};function Mo(h){if(fl(h),h.I==3){var x=h.V++,_=ln(h.J);if(Rt(_,"SID",h.M),Rt(_,"RID",x),Rt(_,"TYPE","terminate"),xr(h,_),x=new Vs(h,h.j,x),x.M=2,x.A=dr(ln(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(x.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=x.A,_=!0),_||(x.g=ju(x.j,null),x.g.ea(x.A)),x.F=Date.now(),Zs(x)}Au(h)}function mi(h){h.g&&(Vo(h),h.g.cancel(),h.g=null)}function fl(h){mi(h),h.v&&(d.clearTimeout(h.v),h.v=null),pl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function oa(h){if(!Eo(h.h)&&!h.m){h.m=!0;var x=h.Ea;fe||A(),re||(fe(),re=!0),S.add(x,h),h.D=0}}function ml(h,x){return na(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=x.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Dn(y(h.Ea,h,x),Su(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const $=new Vs(this,this.j,h);let J=this.o;if(this.U&&(J?(J=V(J),de(J,this.U)):J=this.U),this.u!==null||this.R||($.J=J,J=null),this.S)e:{for(var x=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(x+=T,x>4096){x=_;break e}if(x===4096||_===this.i.length-1){x=_+1;break e}}x=1e3}else x=1e3;x=wu(this,$,x),_=ln(this.J),Rt(_,"RID",h),Rt(_,"CVER",22),this.G&&Rt(_,"X-HTTP-Session-Id",this.G),xr(this,_),J&&(this.R?x="headers="+ja(ws(J))+"&"+x:this.u&&pr(_,this.u,J)),To(this.h,$),this.Ra&&Rt(_,"TYPE","init"),this.S?(Rt(_,"$req",x),Rt(_,"SID","null"),$.U=!0,Js($,_,null)):Js($,_,x),this.I=2}}else this.I==3&&(h?Oo(this,h):this.i.length==0||Eo(this.h)||Oo(this))};function Oo(h,x){var _;x?_=x.l:_=h.V++;const T=ln(h.J);Rt(T,"SID",h.M),Rt(T,"RID",_),Rt(T,"AID",h.K),xr(h,T),h.u&&h.o&&pr(T,h.u,h.o),_=new Vs(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),x&&(h.i=x.G.concat(h.i)),x=wu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),To(h.h,_),Js(_,T,x)}function xr(h,x){h.H&&Ge(h.H,function(_,T){Rt(x,T,_)}),h.l&&Ge({},function(_,T){Rt(x,T,_)})}function wu(h,x,_){_=Math.min(h.i.length,_);const T=h.l?y(h.l.Ka,h.l,h):null;e:{var $=h.i;let We=-1;for(;;){const Zt=["count="+_];We==-1?_>0?(We=$[0].g,Zt.push("ofs="+We)):We=0:Zt.push("ofs="+We);let Et=!0;for(let qt=0;qt<_;qt++){var J=$[qt].g;const Es=$[qt].map;if(J-=We,J<0)We=Math.max(0,$[qt].g-100),Et=!1;else try{J="req"+J+"_"||"";try{var pe=Es instanceof Map?Es:Object.entries(Es);for(const[ua,zs]of pe){let qs=zs;p(zs)&&(qs=ye(zs)),Zt.push(J+ua+"="+encodeURIComponent(qs))}}catch(ua){throw Zt.push(J+"type="+encodeURIComponent("_badmap")),ua}}catch{T&&T(Es)}}if(Et){pe=Zt.join("&");break e}}pe=void 0}return h=h.i.splice(0,_),x.G=h,pe}function Eu(h){if(!h.g&&!h.v){h.Y=1;var x=h.Da;fe||A(),re||(fe(),re=!0),S.add(x,h),h.A=0}}function br(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Dn(y(h.Da,h),Su(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,Tu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Dn(y(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),mi(this),Tu(this))};function Vo(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function Tu(h){h.g=new Vs(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var x=ln(h.na);Rt(x,"RID","rpc"),Rt(x,"SID",h.M),Rt(x,"AID",h.K),Rt(x,"CI",h.F?"0":"1"),!h.F&&h.ia&&Rt(x,"TO",h.ia),Rt(x,"TYPE","xmlhttp"),xr(h,x),h.u&&h.o&&pr(x,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=dr(ln(x)),_.u=null,_.R=!0,rl(_,h)}s.Va=function(){this.C!=null&&(this.C=null,mi(this),br(this),wt(19))};function pl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Nu(h,x){var _=null;if(h.g==x){pl(h),Vo(h),h.g=null;var T=2}else if(sa(h.h,x))_=x.G,No(h.h,x),T=1;else return;if(h.I!=0){if(x.o)if(T==1){_=x.u?x.u.length:0,x=Date.now()-x.F;var $=h.D;T=Le(),be(T,new yn(T,_)),oa(h)}else Eu(h);else if($=x.m,$==3||$==0&&x.X>0||!(T==1&&ml(h,x)||T==2&&br(h)))switch(_&&_.length>0&&(x=h.h,x.i=x.i.concat(_)),$){case 1:ca(h,5);break;case 4:ca(h,10);break;case 3:ca(h,6);break;default:ca(h,2)}}}function Su(h,x){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*x}function ca(h,x){if(h.j.info("Error code "+x),x==2){var _=y(h.bb,h),T=h.Ua;const $=!T;T=new rs(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||wn(T,"https"),dr(T),$?Ls(T.toString(),_):Io(T.toString(),_)}else wt(2);h.I=0,h.l&&h.l.pa(x),Au(h),fl(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Au(h){if(h.I=0,h.ja=[],h.l){const x=So(h.h);(x.length!=0||h.i.length!=0)&&(H(h.ja,x),H(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function Ru(h,x,_){var T=_ instanceof rs?ln(_):new rs(_);if(T.g!="")x&&(T.g=x+"."+T.g),li(T,T.u);else{var $=d.location;T=$.protocol,x=x?x+"."+$.hostname:$.hostname,$=+$.port;const J=new rs(null);T&&wn(J,T),x&&(J.g=x),$&&li(J,$),_&&(J.h=_),T=J}return _=h.G,x=h.wa,_&&x&&Rt(T,_,x),Rt(T,"VER",h.ka),xr(h,T),T}function ju(h,x,_){if(x&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return x=h.Aa&&!h.ma?new kt(new ia({ab:_})):new kt(h.ma),x.Fa(h.L),x}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cu(){}s=Cu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function pi(){}pi.prototype.g=function(h,x){return new Fn(h,x)};function Fn(h,x){vt.call(this),this.g=new fi(x),this.l=h,this.h=x&&x.messageUrlParams||null,h=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(h?h["X-WebChannel-Content-Type"]=x.messageContentType:h={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.sa&&(h?h["X-WebChannel-Client-Profile"]=x.sa:h={"X-WebChannel-Client-Profile":x.sa}),this.g.U=h,(h=x&&x.Qb)&&!I(h)&&(this.g.u=h),this.A=x&&x.supportsCrossDomainXhr||!1,this.v=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!I(x)&&(this.g.G=x,h=this.h,h!==null&&x in h&&(h=this.h,x in h&&delete h[x])),this.j=new ka(this)}w(Fn,vt),Fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Mo(this.g)},Fn.prototype.o=function(h){var x=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=ye(h),h=_);x.i.push(new rn(x.Ya++,h)),x.I==3&&oa(x)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Mo(this.g),delete this.g,Fn.Z.N.call(this)};function Iu(h){me.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var x=h.__sm__;if(x){e:{for(const _ in x){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,x=x!==null&&h in x?x[h]:void 0),this.data=x}else this.data=h}w(Iu,me);function ku(){Be.call(this),this.status=1}w(ku,Be);function ka(h){this.g=h}w(ka,Cu),ka.prototype.ra=function(){be(this.g,"a")},ka.prototype.qa=function(h){be(this.g,new Iu(h))},ka.prototype.pa=function(h){be(this.g,new ku)},ka.prototype.oa=function(){be(this.g,"b")},pi.prototype.createWebChannel=pi.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,s1=function(){return new pi},n1=function(){return Le()},t1=Pe,Rp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ra.NO_ERROR=0,Ra.TIMEOUT=8,Ra.HTTP_ERROR=6,Wh=Ra,hr.COMPLETE="complete",e1=hr,ft.EventType=ce,ce.OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",vt.prototype.listen=vt.prototype.J,Sc=ft,kt.prototype.listenOnce=kt.prototype.K,kt.prototype.getLastError=kt.prototype.Ha,kt.prototype.getLastErrorCode=kt.prototype.ya,kt.prototype.getStatus=kt.prototype.ca,kt.prototype.getResponseJson=kt.prototype.La,kt.prototype.getResponseText=kt.prototype.la,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Fa,Zw=kt}).apply(typeof Lh<"u"?Lh:typeof self<"u"?self:typeof window<"u"?window:{});let Ln=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ln.UNAUTHENTICATED=new Ln(null),Ln.GOOGLE_CREDENTIALS=new Ln("google-credentials-uid"),Ln.FIRST_PARTY=new Ln("first-party-uid"),Ln.MOCK_USER=new Ln("mock-user");let yo="12.8.0";function bC(s){yo=s}const Gr=new ig("@firebase/firestore");function Gl(){return Gr.logLevel}function _e(s,...e){if(Gr.logLevel<=lt.DEBUG){const n=e.map(gg);Gr.debug(`Firestore (${yo}): ${s}`,...n)}}function si(s,...e){if(Gr.logLevel<=lt.ERROR){const n=e.map(gg);Gr.error(`Firestore (${yo}): ${s}`,...n)}}function ao(s,...e){if(Gr.logLevel<=lt.WARN){const n=e.map(gg);Gr.warn(`Firestore (${yo}): ${s}`,...n)}}function gg(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function qe(s,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,a1(s,i,n)}function a1(s,e,n){let i=`FIRESTORE (${yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw si(i),new Error(i)}function St(s,e,n,i){let l="Unexpected state";typeof n=="string"?l=n:i=n,s||a1(e,l,i)}function Qe(s,e){return s}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Aa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class i1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Ln.UNAUTHENTICATED)))}shutdown(){}}class _C{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class wC{constructor(e){this.t=e,this.currentUser=Ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){St(this.o===void 0,42304);let i=this.i;const l=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let u=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Qi,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await l(this.currentUser)}))},p=g=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Qi)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(St(typeof i.accessToken=="string",31837,{l:i}),new i1(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new Ln(e)}}class EC{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Ln.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class TC{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new EC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ps(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){St(this.o===void 0,3512);const i=u=>{u.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,_e("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const l=u=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>l(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?l(u):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(St(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function SC(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}class yg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const l=SC(40);for(let u=0;u<l.length;++u)i.length<20&&l[u]<n&&(i+=e.charAt(l[u]%62))}return i}}function ot(s,e){return s<e?-1:s>e?1:0}function jp(s,e){const n=Math.min(s.length,e.length);for(let i=0;i<n;i++){const l=s.charAt(i),u=e.charAt(i);if(l!==u)return rp(l)===rp(u)?ot(l,u):rp(l)?1:-1}return ot(s.length,e.length)}const AC=55296,RC=57343;function rp(s){const e=s.charCodeAt(0);return e>=AC&&e<=RC}function io(s,e,n){return s.length===e.length&&s.every(((i,l)=>n(i,e[l])))}const vv="__name__";class ga{constructor(e,n,i){n===void 0?n=0:n>e.length&&qe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&qe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ga.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ga?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let l=0;l<i;l++){const u=ga.compareSegments(e.get(l),n.get(l));if(u!==0)return u}return ot(e.length,n.length)}static compareSegments(e,n){const i=ga.isNumericId(e),l=ga.isNumericId(n);return i&&!l?-1:!i&&l?1:i&&l?ga.extractNumericId(e).compare(ga.extractNumericId(n)):jp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ki.fromString(e.substring(4,e.length-2))}}class Lt extends ga{construct(e,n,i){return new Lt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ve(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((l=>l.length>0)))}return new Lt(n)}static emptyPath(){return new Lt([])}}const jC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends ga{construct(e,n,i){return new In(e,n,i)}static isValidIdentifier(e){return jC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vv}static keyField(){return new In([vv])}static fromServerFormat(e){const n=[];let i="",l=0;const u=()=>{if(i.length===0)throw new ve(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new ve(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[l+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ve(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(i+=p,l++):(u(),l++)}if(u(),d)throw new ve(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(n)}static emptyPath(){return new In([])}}class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(Lt.fromString(e))}static fromName(e){return new Ie(Lt.fromString(e).popFirst(5))}static empty(){return new Ie(Lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new Lt(e.slice()))}}function r1(s,e,n){if(!n)throw new ve(le.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function CC(s,e,n,i){if(e===!0&&i===!0)throw new ve(le.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function _v(s){if(!Ie.isDocumentKey(s))throw new ve(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function wv(s){if(Ie.isDocumentKey(s))throw new ve(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function l1(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function kd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":qe(12329,{type:typeof s})}function wa(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ve(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kd(s);throw new ve(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function mn(s,e){const n={typeString:s};return e&&(n.value=e),n}function lu(s,e){if(!l1(s))throw new ve(le.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const l=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const d=s[i];if(l&&typeof d!==l){n=`JSON field '${i}' must be a ${l}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new ve(le.INVALID_ARGUMENT,n);return!0}const Ev=-62135596800,Tv=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Tv);return new zt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ve(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ve(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ev)throw new ve(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tv}_compareTo(e){return this.seconds===e.seconds?ot(this.nanoseconds,e.nanoseconds):ot(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lu(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ev;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:mn("string",zt._jsonSchemaVersion),seconds:mn("number"),nanoseconds:mn("number")};class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new zt(0,0))}static max(){return new Ye(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Hc=-1;function IC(s,e){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,l=Ye.fromTimestamp(i===1e9?new zt(n+1,0):new zt(n,i));return new Zi(l,Ie.empty(),e)}function kC(s){return new Zi(s.readTime,s.key,Hc)}class Zi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Zi(Ye.min(),Ie.empty(),Hc)}static max(){return new Zi(Ye.max(),Ie.empty(),Hc)}}function DC(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(s.documentKey,e.documentKey),n!==0?n:ot(s.largestBatchId,e.largestBatchId))}const MC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function xo(s){if(s.code!==le.FAILED_PRECONDITION||s.message!==MC)throw s;_e("LocalStore","Unexpectedly lost primary lease")}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((i,l)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,l)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,i)=>{n(e)}))}static reject(e){return new oe(((n,i)=>{i(e)}))}static waitFor(e){return new oe(((n,i)=>{let l=0,u=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++u,d&&u===l&&n()}),(g=>i(g)))})),d=!0,u===l&&n()}))}static or(e){let n=oe.resolve(!1);for(const i of e)n=n.next((l=>l?oe.resolve(l):i()));return n}static forEach(e,n){const i=[];return e.forEach(((l,u)=>{i.push(n.call(this,l,u))})),this.waitFor(i)}static mapArray(e,n){return new oe(((i,l)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((b=>{d[y]=b,++p,p===u&&i(d)}),(b=>l(b)))}}))}static doWhile(e,n){return new oe(((i,l)=>{const u=()=>{e()===!0?n().next((()=>{u()}),l):i()};u()}))}}function VC(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function bo(s){return s.name==="IndexedDbTransactionError"}class Dd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Dd.ce=-1;const xg=-1;function Md(s){return s==null}function dd(s){return s===0&&1/s==-1/0}function PC(s){return typeof s=="number"&&Number.isInteger(s)&&!dd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const o1="";function LC(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Nv(e)),e=UC(s.get(n),e);return Nv(e)}function UC(s,e){let n=e;const i=s.length;for(let l=0;l<i;l++){const u=s.charAt(l);switch(u){case"\0":n+="";break;case o1:n+="";break;default:n+=u}}return n}function Nv(s){return s+o1+""}function Sv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function cr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function c1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Kt{constructor(e,n){this.comparator=e,this.root=n||Cn.EMPTY}insert(e,n){return new Kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const l=this.comparator(e,i.key);if(l===0)return n+i.left.size;l<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uh(this.root,e,this.comparator,!0)}}class Uh{constructor(e,n,i,l){this.isReverse=l,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&l&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Cn{constructor(e,n,i,l,u){this.key=e,this.value=n,this.color=i??Cn.RED,this.left=l??Cn.EMPTY,this.right=u??Cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,l,u){return new Cn(e??this.key,n??this.value,i??this.color,l??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let l=this;const u=i(e,l.key);return l=u<0?l.copy(null,null,null,l.left.insert(e,n,i),null):u===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,i)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Cn.EMPTY;i=l.right.min(),l=l.copy(i.key,i.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,n,i,l,u){return this}insert(e,n,i){return new Cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bn{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const l=i.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Av(this.data.getIterator())}getIteratorFrom(e){return new Av(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(this.comparator(l,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new bn(this.comparator);return n.data=e,n}}class Av{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gs{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new gs([])}unionWith(e){let n=new bn(In.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new gs(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return io(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}class u1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new u1("Invalid base64 string: "+u):u}})(e);return new kn(n)}static fromUint8Array(e){const n=(function(l){let u="";for(let d=0;d<l.length;++d)u+=String.fromCharCode(l[d]);return u})(e);return new kn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ot(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kn.EMPTY_BYTE_STRING=new kn("");const BC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function er(s){if(St(!!s,39018),typeof s=="string"){let e=0;const n=BC.exec(s);if(St(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nn(s.seconds),nanos:nn(s.nanos)}}function nn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function tr(s){return typeof s=="string"?kn.fromBase64String(s):kn.fromUint8Array(s)}const h1="server_timestamp",d1="__type__",f1="__previous_value__",m1="__local_write_time__";function bg(s){return(s?.mapValue?.fields||{})[d1]?.stringValue===h1}function Od(s){const e=s.mapValue.fields[f1];return bg(e)?Od(e):e}function $c(s){const e=er(s.mapValue.fields[m1].timestampValue);return new zt(e.seconds,e.nanos)}class zC{constructor(e,n,i,l,u,d,p,g,y,b,w){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=l,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=b,this.apiKey=w}}const fd="(default)";class Gc{constructor(e,n){this.projectId=e,this.database=n||fd}static empty(){return new Gc("","")}get isDefaultDatabase(){return this.database===fd}isEqual(e){return e instanceof Gc&&e.projectId===this.projectId&&e.database===this.database}}function qC(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ve(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gc(s.options.projectId,e)}const p1="__type__",FC="__max__",Bh={mapValue:{}},g1="__vector__",md="value";function nr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?bg(s)?4:$C(s)?9007199254740991:HC(s)?10:11:qe(28295,{value:s})}function Sa(s,e){if(s===e)return!0;const n=nr(s);if(n!==nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return $c(s).isEqual($c(e));case 3:return(function(l,u){if(typeof l.timestampValue=="string"&&typeof u.timestampValue=="string"&&l.timestampValue.length===u.timestampValue.length)return l.timestampValue===u.timestampValue;const d=er(l.timestampValue),p=er(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,u){return tr(l.bytesValue).isEqual(tr(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,u){return nn(l.geoPointValue.latitude)===nn(u.geoPointValue.latitude)&&nn(l.geoPointValue.longitude)===nn(u.geoPointValue.longitude)})(s,e);case 2:return(function(l,u){if("integerValue"in l&&"integerValue"in u)return nn(l.integerValue)===nn(u.integerValue);if("doubleValue"in l&&"doubleValue"in u){const d=nn(l.doubleValue),p=nn(u.doubleValue);return d===p?dd(d)===dd(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return io(s.arrayValue.values||[],e.arrayValue.values||[],Sa);case 10:case 11:return(function(l,u){const d=l.mapValue.fields||{},p=u.mapValue.fields||{};if(Sv(d)!==Sv(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Sa(d[g],p[g])))return!1;return!0})(s,e);default:return qe(52216,{left:s})}}function Yc(s,e){return(s.values||[]).find((n=>Sa(n,e)))!==void 0}function ro(s,e){if(s===e)return 0;const n=nr(s),i=nr(e);if(n!==i)return ot(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ot(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=nn(u.integerValue||u.doubleValue),g=nn(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return Rv(s.timestampValue,e.timestampValue);case 4:return Rv($c(s),$c(e));case 5:return jp(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=tr(u),g=tr(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let y=0;y<p.length&&y<g.length;y++){const b=ot(p[y],g[y]);if(b!==0)return b}return ot(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=ot(nn(u.latitude),nn(d.latitude));return p!==0?p:ot(nn(u.longitude),nn(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return jv(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},y=p[md]?.arrayValue,b=g[md]?.arrayValue,w=ot(y?.values?.length||0,b?.values?.length||0);return w!==0?w:jv(y,b)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Bh.mapValue&&d===Bh.mapValue)return 0;if(u===Bh.mapValue)return 1;if(d===Bh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=d.fields||{},b=Object.keys(y);g.sort(),b.sort();for(let w=0;w<g.length&&w<b.length;++w){const N=jp(g[w],b[w]);if(N!==0)return N;const C=ro(p[g[w]],y[b[w]]);if(C!==0)return C}return ot(g.length,b.length)})(s.mapValue,e.mapValue);default:throw qe(23264,{he:n})}}function Rv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return ot(s,e);const n=er(s),i=er(e),l=ot(n.seconds,i.seconds);return l!==0?l:ot(n.nanos,i.nanos)}function jv(s,e){const n=s.values||[],i=e.values||[];for(let l=0;l<n.length&&l<i.length;++l){const u=ro(n[l],i[l]);if(u)return u}return ot(n.length,i.length)}function lo(s){return Cp(s)}function Cp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=er(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return tr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Ie.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",l=!0;for(const u of n.values||[])l?l=!1:i+=",",i+=Cp(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let l="{",u=!0;for(const d of i)u?u=!1:l+=",",l+=`${d}:${Cp(n.fields[d])}`;return l+"}"})(s.mapValue):qe(61005,{value:s})}function Jh(s){switch(nr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Od(s);return e?16+Jh(e):16;case 5:return 2*s.stringValue.length;case 6:return tr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((l,u)=>l+Jh(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let l=0;return cr(i.fields,((u,d)=>{l+=u.length+Jh(d)})),l})(s.mapValue);default:throw qe(13486,{value:s})}}function Cv(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Ip(s){return!!s&&"integerValue"in s}function vg(s){return!!s&&"arrayValue"in s}function Iv(s){return!!s&&"nullValue"in s}function kv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Zh(s){return!!s&&"mapValue"in s}function HC(s){return(s?.mapValue?.fields||{})[p1]?.stringValue===g1}function Dc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return cr(s.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Dc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dc(s.arrayValue.values[n]);return e}return{...s}}function $C(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===FC}class es{constructor(e){this.value=e}static empty(){return new es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(n)}setAll(e){let n=In.emptyPath(),i={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,i,l),i={},l=[],n=p.popLast()}d?i[p.lastSegment()]=Dc(d):l.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,l)}delete(e){const n=this.field(e.popLast());Zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let l=n.mapValue.fields[e.get(i)];Zh(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,i){cr(n,((l,u)=>e[l]=u));for(const l of i)delete e[l]}clone(){return new es(Dc(this.value))}}function y1(s){const e=[];return cr(s.fields,((n,i)=>{const l=new In([n]);if(Zh(i)){const u=y1(i.mapValue).fields;if(u.length===0)e.push(l);else for(const d of u)e.push(l.child(d))}else e.push(l)})),new gs(e)}class Un{constructor(e,n,i,l,u,d,p){this.key=e,this.documentType=n,this.version=i,this.readTime=l,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Un(e,0,Ye.min(),Ye.min(),Ye.min(),es.empty(),0)}static newFoundDocument(e,n,i,l){return new Un(e,1,n,Ye.min(),i,l,0)}static newNoDocument(e,n){return new Un(e,2,n,Ye.min(),Ye.min(),es.empty(),0)}static newUnknownDocument(e,n){return new Un(e,3,n,Ye.min(),Ye.min(),es.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pd{constructor(e,n){this.position=e,this.inclusive=n}}function Dv(s,e,n){let i=0;for(let l=0;l<s.position.length;l++){const u=e[l],d=s.position[l];if(u.field.isKeyField()?i=Ie.comparator(Ie.fromName(d.referenceValue),n.key):i=ro(d,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function Mv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Sa(s.position[n],e.position[n]))return!1;return!0}class gd{constructor(e,n="asc"){this.field=e,this.dir=n}}function GC(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class x1{}class fn extends x1{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new KC(e,n,i):n==="array-contains"?new WC(e,i):n==="in"?new JC(e,i):n==="not-in"?new ZC(e,i):n==="array-contains-any"?new eI(e,i):new fn(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new QC(e,i):new XC(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ro(n,this.value)):n!==null&&nr(this.value)===nr(n)&&this.matchesComparison(ro(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xs extends x1{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xs(e,n)}matches(e){return b1(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function b1(s){return s.op==="and"}function v1(s){return YC(s)&&b1(s)}function YC(s){for(const e of s.filters)if(e instanceof Xs)return!1;return!0}function kp(s){if(s instanceof fn)return s.field.canonicalString()+s.op.toString()+lo(s.value);if(v1(s))return s.filters.map((e=>kp(e))).join(",");{const e=s.filters.map((n=>kp(n))).join(",");return`${s.op}(${e})`}}function _1(s,e){return s instanceof fn?(function(i,l){return l instanceof fn&&i.op===l.op&&i.field.isEqual(l.field)&&Sa(i.value,l.value)})(s,e):s instanceof Xs?(function(i,l){return l instanceof Xs&&i.op===l.op&&i.filters.length===l.filters.length?i.filters.reduce(((u,d,p)=>u&&_1(d,l.filters[p])),!0):!1})(s,e):void qe(19439)}function w1(s){return s instanceof fn?(function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`})(s):s instanceof Xs?(function(n){return n.op.toString()+" {"+n.getFilters().map(w1).join(" ,")+"}"})(s):"Filter"}class KC extends fn{constructor(e,n,i){super(e,n,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class QC extends fn{constructor(e,n){super(e,"in",n),this.keys=E1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class XC extends fn{constructor(e,n){super(e,"not-in",n),this.keys=E1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function E1(s,e){return(e.arrayValue?.values||[]).map((n=>Ie.fromName(n.referenceValue)))}class WC extends fn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return vg(n)&&Yc(n.arrayValue,this.value)}}class JC extends fn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yc(this.value.arrayValue,n)}}class ZC extends fn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yc(this.value.arrayValue,n)}}class eI extends fn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!vg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Yc(this.value.arrayValue,i)))}}class tI{constructor(e,n=null,i=[],l=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=l,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function Ov(s,e=null,n=[],i=[],l=null,u=null,d=null){return new tI(s,e,n,i,l,u,d)}function _g(s){const e=Qe(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>kp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),Md(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>lo(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>lo(i))).join(",")),e.Te=n}return e.Te}function wg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!GC(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!_1(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Mv(s.startAt,e.startAt)&&Mv(s.endAt,e.endAt)}function Dp(s){return Ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class ou{constructor(e,n=null,i=[],l=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=l,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function nI(s,e,n,i,l,u,d,p){return new ou(s,e,n,i,l,u,d,p)}function Eg(s){return new ou(s)}function Vv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function sI(s){return Ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function T1(s){return s.collectionGroup!==null}function Mc(s){const e=Qe(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new bn(In.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new gd(u,i))})),n.has(In.keyField().canonicalString())||e.Ie.push(new gd(In.keyField(),i))}return e.Ie}function Ea(s){const e=Qe(s);return e.Ee||(e.Ee=aI(e,Mc(s))),e.Ee}function aI(s,e){if(s.limitType==="F")return Ov(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const u=l.dir==="desc"?"asc":"desc";return new gd(l.field,u)}));const n=s.endAt?new pd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new pd(s.startAt.position,s.startAt.inclusive):null;return Ov(s.path,s.collectionGroup,e,s.filters,s.limit,n,i)}}function Mp(s,e){const n=s.filters.concat([e]);return new ou(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Op(s,e,n){return new ou(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Vd(s,e){return wg(Ea(s),Ea(e))&&s.limitType===e.limitType}function N1(s){return`${_g(Ea(s))}|lt:${s.limitType}`}function Yl(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((l=>w1(l))).join(", ")}]`),Md(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((l=>lo(l))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((l=>lo(l))).join(",")),`Target(${i})`})(Ea(s))}; limitType=${s.limitType})`}function Pd(s,e){return e.isFoundDocument()&&(function(i,l){const u=l.key.path;return i.collectionGroup!==null?l.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Ie.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,l){for(const u of Mc(i))if(!u.field.isKeyField()&&l.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,l){for(const u of i.filters)if(!u.matches(l))return!1;return!0})(s,e)&&(function(i,l){return!(i.startAt&&!(function(d,p,g){const y=Dv(d,p,g);return d.inclusive?y<=0:y<0})(i.startAt,Mc(i),l)||i.endAt&&!(function(d,p,g){const y=Dv(d,p,g);return d.inclusive?y>=0:y>0})(i.endAt,Mc(i),l))})(s,e)}function iI(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function S1(s){return(e,n)=>{let i=!1;for(const l of Mc(s)){const u=rI(l,e,n);if(u!==0)return u;i=i||l.field.isKeyField()}return 0}}function rI(s,e,n){const i=s.field.isKeyField()?Ie.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),y=p.data.field(u);return g!==null&&y!==null?ro(g,y):qe(42886)})(s.field,e,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return qe(19790,{direction:s.dir})}}class tl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[l,u]of i)if(this.equalsFn(l,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),l=this.inner[i];if(l===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let u=0;u<l.length;u++)if(this.equalsFn(l[u][0],e))return void(l[u]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return i.length===1?delete this.inner[n]:i.splice(l,1),this.innerSize--,!0;return!1}forEach(e){cr(this.inner,((n,i)=>{for(const[l,u]of i)e(l,u)}))}isEmpty(){return c1(this.inner)}size(){return this.innerSize}}const lI=new Kt(Ie.comparator);function ai(){return lI}const A1=new Kt(Ie.comparator);function Ac(...s){let e=A1;for(const n of s)e=e.insert(n.key,n);return e}function R1(s){let e=A1;return s.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Lr(){return Oc()}function j1(){return Oc()}function Oc(){return new tl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const oI=new Kt(Ie.comparator),cI=new bn(Ie.comparator);function ct(...s){let e=cI;for(const n of s)e=e.add(n);return e}const uI=new bn(ot);function hI(){return uI}function Tg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dd(e)?"-0":e}}function C1(s){return{integerValue:""+s}}function dI(s,e){return PC(e)?C1(e):Tg(s,e)}class Ld{constructor(){this._=void 0}}function fI(s,e,n){return s instanceof Kc?(function(l,u){const d={fields:{[d1]:{stringValue:h1},[m1]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return u&&bg(u)&&(u=Od(u)),u&&(d.fields[f1]=u),{mapValue:d}})(n,e):s instanceof Qc?k1(s,e):s instanceof Xc?D1(s,e):(function(l,u){const d=I1(l,u),p=Pv(d)+Pv(l.Ae);return Ip(d)&&Ip(l.Ae)?C1(p):Tg(l.serializer,p)})(s,e)}function mI(s,e,n){return s instanceof Qc?k1(s,e):s instanceof Xc?D1(s,e):n}function I1(s,e){return s instanceof yd?(function(i){return Ip(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Kc extends Ld{}class Qc extends Ld{constructor(e){super(),this.elements=e}}function k1(s,e){const n=M1(e);for(const i of s.elements)n.some((l=>Sa(l,i)))||n.push(i);return{arrayValue:{values:n}}}class Xc extends Ld{constructor(e){super(),this.elements=e}}function D1(s,e){let n=M1(e);for(const i of s.elements)n=n.filter((l=>!Sa(l,i)));return{arrayValue:{values:n}}}class yd extends Ld{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Pv(s){return nn(s.integerValue||s.doubleValue)}function M1(s){return vg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class pI{constructor(e,n){this.field=e,this.transform=n}}function gI(s,e){return s.field.isEqual(e.field)&&(function(i,l){return i instanceof Qc&&l instanceof Qc||i instanceof Xc&&l instanceof Xc?io(i.elements,l.elements,Sa):i instanceof yd&&l instanceof yd?Sa(i.Ae,l.Ae):i instanceof Kc&&l instanceof Kc})(s.transform,e.transform)}class yI{constructor(e,n){this.version=e,this.transformResults=n}}class Ys{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ys}static exists(e){return new Ys(void 0,e)}static updateTime(e){return new Ys(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ed(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Ud{}function O1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Ng(s.key,Ys.none()):new cu(s.key,s.data,Ys.none());{const n=s.data,i=es.empty();let l=new bn(In.comparator);for(let u of e.fields)if(!l.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?i.delete(u):i.set(u,d),l=l.add(u)}return new ur(s.key,i,new gs(l.toArray()),Ys.none())}}function xI(s,e,n){s instanceof cu?(function(l,u,d){const p=l.value.clone(),g=Uv(l.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof ur?(function(l,u,d){if(!ed(l.precondition,u))return void u.convertToUnknownDocument(d.version);const p=Uv(l.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(V1(l)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(l,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Vc(s,e,n,i){return s instanceof cu?(function(u,d,p,g){if(!ed(u.precondition,d))return p;const y=u.value.clone(),b=Bv(u.fieldTransforms,g,d);return y.setAll(b),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,n,i):s instanceof ur?(function(u,d,p,g){if(!ed(u.precondition,d))return p;const y=Bv(u.fieldTransforms,g,d),b=d.data;return b.setAll(V1(u)),b.setAll(y),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,n,i):(function(u,d,p){return ed(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function bI(s,e){let n=null;for(const i of s.fieldTransforms){const l=e.data.field(i.field),u=I1(i.transform,l||null);u!=null&&(n===null&&(n=es.empty()),n.set(i.field,u))}return n||null}function Lv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,l){return i===void 0&&l===void 0||!(!i||!l)&&io(i,l,((u,d)=>gI(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class cu extends Ud{constructor(e,n,i,l=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ur extends Ud{constructor(e,n,i,l,u=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=l,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function V1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);e.set(n,i)}})),e}function Uv(s,e,n){const i=new Map;St(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let l=0;l<n.length;l++){const u=s[l],d=u.transform,p=e.data.field(u.field);i.set(u.field,mI(d,p,n[l]))}return i}function Bv(s,e,n){const i=new Map;for(const l of s){const u=l.transform,d=n.data.field(l.field);i.set(l.field,fI(u,d,e))}return i}class Ng extends Ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vI extends Ud{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _I{constructor(e,n,i,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=l}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const u=this.mutations[l];u.key.isEqual(e.key)&&xI(u,e,i[l])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Vc(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Vc(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=j1();return this.mutations.forEach((l=>{const u=e.get(l.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(l.key)?null:p;const g=O1(d,p);g!==null&&i.set(l.key,g),d.isValidDocument()||d.convertToNoDocument(Ye.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ct())}isEqual(e){return this.batchId===e.batchId&&io(this.mutations,e.mutations,((n,i)=>Lv(n,i)))&&io(this.baseMutations,e.baseMutations,((n,i)=>Lv(n,i)))}}class Sg{constructor(e,n,i,l){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=l}static from(e,n,i){St(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let l=(function(){return oI})();const u=e.mutations;for(let d=0;d<u.length;d++)l=l.insert(u[d].key,i[d].version);return new Sg(e,n,i,l)}}class wI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class EI{constructor(e,n){this.count=e,this.unchangedNames=n}}var dn,dt;function TI(s){switch(s){case le.OK:return qe(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return qe(15467,{code:s})}}function P1(s){if(s===void 0)return si("GRPC error has no .code"),le.UNKNOWN;switch(s){case dn.OK:return le.OK;case dn.CANCELLED:return le.CANCELLED;case dn.UNKNOWN:return le.UNKNOWN;case dn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case dn.INTERNAL:return le.INTERNAL;case dn.UNAVAILABLE:return le.UNAVAILABLE;case dn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case dn.NOT_FOUND:return le.NOT_FOUND;case dn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case dn.ABORTED:return le.ABORTED;case dn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case dn.DATA_LOSS:return le.DATA_LOSS;default:return qe(39323,{code:s})}}(dt=dn||(dn={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";function NI(){return new TextEncoder}const SI=new Ki([4294967295,4294967295],0);function zv(s){const e=NI().encode(s),n=new Jw;return n.update(e),new Uint8Array(n.digest())}function qv(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),l=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ki([n,i],0),new Ki([l,u],0)]}class Ag{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Rc(`Invalid padding: ${n}`);if(i<0)throw new Rc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Rc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Rc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ki.fromNumber(this.ge)}ye(e,n,i){let l=e.add(n.multiply(Ki.fromNumber(i)));return l.compare(SI)===1&&(l=new Ki([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=zv(e),[i,l]=qv(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);if(!this.we(d))return!1}return!0}static create(e,n,i){const l=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Ag(u,l,n);return i.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=zv(e),[i,l]=qv(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(i,l,u);this.be(d)}}be(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Rc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Bd{constructor(e,n,i,l,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=l,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const l=new Map;return l.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Bd(Ye.min(),l,new Kt(ot),ai(),ct())}}class uu{constructor(e,n,i,l,u){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=l,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new uu(i,n,ct(),ct(),ct())}}class td{constructor(e,n,i,l){this.Se=e,this.removedTargetIds=n,this.key=i,this.De=l}}class L1{constructor(e,n){this.targetId=e,this.Ce=n}}class U1{constructor(e,n,i=kn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=l}}class Fv{constructor(){this.ve=0,this.Fe=Hv(),this.Me=kn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ct(),n=ct(),i=ct();return this.Fe.forEach(((l,u)=>{switch(u){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:i=i.add(l);break;default:qe(38017,{changeType:u})}})),new uu(this.Me,this.xe,e,n,i)}Ke(){this.Oe=!1,this.Fe=Hv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class AI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ai(),this.He=zh(),this.Je=zh(),this.Ze=new Kt(ot)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:qe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,i=e.Ce.count,l=this.ot(n);if(l){const u=l.target;if(Dp(u))if(i===0){const d=new Ie(u.path);this.et(n,d,Un.newNoDocument(d,Ye.min()))}else St(i===1,20013,{expectedCount:i});else{const d=this._t(n);if(d!==i){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:l=0},hashCount:u=0}=n;let d,p;try{d=tr(i).toUint8Array()}catch(g){if(g instanceof u1)return ao("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new Ag(d,l,u)}catch(g){return ao(g instanceof Rc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let l=0;return i.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&Dp(p.target)){const g=new Ie(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Un.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let i=ct();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const l=new Bd(e,n,this.Ze,this.je,i);return this.je=ai(),this.He=zh(),this.Je=zh(),this.Ze=new Kt(ot),l}Ye(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,i),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.qe(n,1):l.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Fv,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new bn(ot),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new bn(ot),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function zh(){return new Kt(Ie.comparator)}function Hv(){return new Kt(Ie.comparator)}const RI={asc:"ASCENDING",desc:"DESCENDING"},jI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},CI={and:"AND",or:"OR"};class II{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vp(s,e){return s.useProto3Json||Md(e)?e:{value:e}}function xd(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function kI(s,e){return xd(s,e.toTimestamp())}function Ta(s){return St(!!s,49232),Ye.fromTimestamp((function(n){const i=er(n);return new zt(i.seconds,i.nanos)})(s))}function Rg(s,e){return Pp(s,e).canonicalString()}function Pp(s,e){const n=(function(l){return new Lt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function z1(s){const e=Lt.fromString(s);return St(G1(e),10190,{key:e.toString()}),e}function Lp(s,e){return Rg(s.databaseId,e.path)}function lp(s,e){const n=z1(e);if(n.get(1)!==s.databaseId.projectId)throw new ve(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ve(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Ie(F1(n))}function q1(s,e){return Rg(s.databaseId,e)}function DI(s){const e=z1(s);return e.length===4?Lt.emptyPath():F1(e)}function Up(s){return new Lt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function F1(s){return St(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function $v(s,e,n){return{name:Lp(s,e),fields:n.value.mapValue.fields}}function MI(s,e){let n;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:qe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],u=(function(y,b){return y.useProto3Json?(St(b===void 0||typeof b=="string",58123),kn.fromBase64String(b||"")):(St(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),kn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(y){const b=y.code===void 0?le.UNKNOWN:P1(y.code);return new ve(b,y.message||"")})(d);n=new U1(i,l,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const l=lp(s,i.document.name),u=Ta(i.document.updateTime),d=i.document.createTime?Ta(i.document.createTime):Ye.min(),p=new es({mapValue:{fields:i.document.fields}}),g=Un.newFoundDocument(l,u,d,p),y=i.targetIds||[],b=i.removedTargetIds||[];n=new td(y,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const l=lp(s,i.document),u=i.readTime?Ta(i.readTime):Ye.min(),d=Un.newNoDocument(l,u),p=i.removedTargetIds||[];n=new td([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const l=lp(s,i.document),u=i.removedTargetIds||[];n=new td([],u,l,null)}else{if(!("filter"in e))return qe(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:l=0,unchangedNames:u}=i,d=new EI(l,u),p=i.targetId;n=new L1(p,d)}}return n}function OI(s,e){let n;if(e instanceof cu)n={update:$v(s,e.key,e.value)};else if(e instanceof Ng)n={delete:Lp(s,e.key)};else if(e instanceof ur)n={update:$v(s,e.key,e.data),updateMask:HI(e.fieldMask)};else{if(!(e instanceof vI))return qe(16599,{dt:e.type});n={verify:Lp(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const p=d.transform;if(p instanceof Kc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Qc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Xc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof yd)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw qe(20930,{transform:d.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(l,u){return u.updateTime!==void 0?{updateTime:kI(l,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:qe(27497)})(s,e.precondition)),n}function VI(s,e){return s&&s.length>0?(St(e!==void 0,14353),s.map((n=>(function(l,u){let d=l.updateTime?Ta(l.updateTime):Ta(u);return d.isEqual(Ye.min())&&(d=Ta(u)),new yI(d,l.transformResults||[])})(n,e)))):[]}function PI(s,e){return{documents:[q1(s,e.path)]}}function LI(s,e){const n={structuredQuery:{}},i=e.path;let l;e.collectionGroup!==null?(l=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=q1(s,l);const u=(function(y){if(y.length!==0)return $1(Xs.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(y){if(y.length!==0)return y.map((b=>(function(N){return{field:Kl(N.field),direction:zI(N.dir)}})(b)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=Vp(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:l}}function UI(s){let e=DI(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let l=null;if(i>0){St(i===1,65062);const b=n.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let u=[];n.where&&(u=(function(w){const N=H1(w);return N instanceof Xs&&v1(N)?N.getFilters():[N]})(n.where));let d=[];n.orderBy&&(d=(function(w){return w.map((N=>(function(H){return new gd(Ql(H.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(H.direction))})(N)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let N;return N=typeof w=="object"?w.value:w,Md(N)?null:N})(n.limit));let g=null;n.startAt&&(g=(function(w){const N=!!w.before,C=w.values||[];return new pd(C,N)})(n.startAt));let y=null;return n.endAt&&(y=(function(w){const N=!w.before,C=w.values||[];return new pd(C,N)})(n.endAt)),nI(e,l,d,u,p,"F",g,y)}function BI(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function H1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ql(n.unaryFilter.field);return fn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const l=Ql(n.unaryFilter.field);return fn.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ql(n.unaryFilter.field);return fn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ql(n.unaryFilter.field);return fn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}})(s):s.fieldFilter!==void 0?(function(n){return fn.create(Ql(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Xs.create(n.compositeFilter.filters.map((i=>H1(i))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return qe(1026)}})(n.compositeFilter.op))})(s):qe(30097,{filter:s})}function zI(s){return RI[s]}function qI(s){return jI[s]}function FI(s){return CI[s]}function Kl(s){return{fieldPath:s.canonicalString()}}function Ql(s){return In.fromServerFormat(s.fieldPath)}function $1(s){return s instanceof fn?(function(n){if(n.op==="=="){if(kv(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NAN"}};if(Iv(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kv(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NOT_NAN"}};if(Iv(n.value))return{unaryFilter:{field:Kl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(n.field),op:qI(n.op),value:n.value}}})(s):s instanceof Xs?(function(n){const i=n.getFilters().map((l=>$1(l)));return i.length===1?i[0]:{compositeFilter:{op:FI(n.op),filters:i}}})(s):qe(54877,{filter:s})}function HI(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function G1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function Y1(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class $i{constructor(e,n,i,l,u=Ye.min(),d=Ye.min(),p=kn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=l,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new $i(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $I{constructor(e){this.yt=e}}function GI(s){const e=UI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Op(e,e.limit,"L"):e}class YI{constructor(){this.Sn=new KI}addToCollectionParentIndex(e,n){return this.Sn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(Zi.min())}updateCollectionGroup(e,n,i){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class KI{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n]||new bn(Lt.comparator),u=!l.has(i);return this.index[n]=l.add(i),u}has(e){const n=e.lastSegment(),i=e.popLast(),l=this.index[n];return l&&l.has(i)}getEntries(e){return(this.index[e]||new bn(Lt.comparator)).toArray()}}const Gv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},K1=41943040;class Zn{static withCacheSize(e){return new Zn(e,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(K1,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);class oo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new oo(0)}static ar(){return new oo(-1)}}const Yv="LruGarbageCollector",QI=1048576;function Kv([s,e],[n,i]){const l=ot(s,n);return l===0?ot(e,i):l}class XI{constructor(e){this.Pr=e,this.buffer=new bn(Kv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Kv(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class WI{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){_e(Yv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bo(n)?_e(Yv,"Ignoring IndexedDB error during garbage collection: ",n):await xo(n)}await this.Ar(3e5)}))}}class JI{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(Dd.ce);const i=new XI(n);return this.Vr.forEachTarget(e,(l=>i.Er(l.sequenceNumber))).next((()=>this.Vr.mr(e,(l=>i.Er(l))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.Vr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Gv)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gv):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let i,l,u,d,p,g,y;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,d=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(i=w,p=Date.now(),this.removeTargets(e,i,n)))).next((w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(y=Date.now(),Gl()<=lt.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-b}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:u,documentsRemoved:w}))))}}function ZI(s,e){return new JI(s,e)}class e5{constructor(){this.changes=new tl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?oe.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class t5{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class n5{constructor(e,n,i,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=l}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(i=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(i!==null&&Vc(i.mutation,l,gs.empty(),zt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,ct()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=ct()){const l=Lr();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,i).next((u=>{let d=Ac();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const i=Lr();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,ct())))}populateOverlays(e,n,i){const l=[];return i.forEach((u=>{n.has(u)||l.push(u)})),this.documentOverlayCache.getOverlays(e,l).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,i,l){let u=ai();const d=Oc(),p=(function(){return Oc()})();return n.forEach(((g,y)=>{const b=i.get(y.key);l.has(y.key)&&(b===void 0||b.mutation instanceof ur)?u=u.insert(y.key,y):b!==void 0?(d.set(y.key,b.mutation.getFieldMask()),Vc(b.mutation,y,b.mutation.getFieldMask(),zt.now())):d.set(y.key,gs.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,b)=>d.set(y,b))),n.forEach(((y,b)=>p.set(y,new t5(b,d.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const i=Oc();let l=new Kt(((d,p)=>d-p)),u=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let b=i.get(g)||gs.empty();b=p.applyToLocalView(y,b),i.set(g,b);const w=(l.get(p.batchId)||ct()).add(g);l=l.insert(p.batchId,w)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,b=g.value,w=j1();b.forEach((N=>{if(!u.has(N)){const C=O1(n.get(N),i.get(N));C!==null&&w.set(N,C),u=u.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,w))}return oe.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,l){return sI(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):T1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,l):this.getDocumentsMatchingCollectionQuery(e,n,i,l)}getNextDocuments(e,n,i,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,l).next((u=>{const d=l-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,l-u.size):oe.resolve(Lr());let p=Hc,g=u;return d.next((y=>oe.forEach(y,((b,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),u.get(b)?oe.resolve():this.remoteDocumentCache.getEntry(e,b).next((N=>{g=g.insert(b,N)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,ct()))).next((b=>({batchId:p,changes:R1(b)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next((i=>{let l=Ac();return i.isFoundDocument()&&(l=l.insert(i.key,i)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,l){const u=n.collectionGroup;let d=Ac();return this.indexManager.getCollectionParents(e,u).next((p=>oe.forEach(p,(g=>{const y=(function(w,N){return new ou(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,l).next((b=>{b.forEach(((w,N)=>{d=d.insert(w,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,i,l){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,u,l)))).next((d=>{u.forEach(((g,y)=>{const b=y.getKey();d.get(b)===null&&(d=d.insert(b,Un.newInvalidDocument(b)))}));let p=Ac();return d.forEach(((g,y)=>{const b=u.get(g);b!==void 0&&Vc(b.mutation,y,gs.empty(),zt.now()),Pd(n,y)&&(p=p.insert(g,y))})),p}))}}class s5{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return oe.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Ta(l.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(l){return{name:l.name,query:GI(l.bundledQuery),readTime:Ta(l.readTime)}})(n)),oe.resolve()}}class a5{constructor(){this.overlays=new Kt(Ie.comparator),this.Lr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Lr();return oe.forEach(n,(l=>this.getOverlay(e,l).next((u=>{u!==null&&i.set(l,u)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((l,u)=>{this.bt(e,n,u)})),oe.resolve()}removeOverlaysForBatchId(e,n,i){const l=this.Lr.get(i);return l!==void 0&&(l.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(i)),oe.resolve()}getOverlaysForCollection(e,n,i){const l=Lr(),u=n.length+1,d=new Ie(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&l.set(g.getKey(),g)}return oe.resolve(l)}getOverlaysForCollectionGroup(e,n,i,l){let u=new Kt(((y,b)=>y-b));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>i){let b=u.get(y.largestBatchId);b===null&&(b=Lr(),u=u.insert(y.largestBatchId,b)),b.set(y.getKey(),y)}}const p=Lr(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,b)=>p.set(y,b))),!(p.size()>=l)););return oe.resolve(p)}bt(e,n,i){const l=this.overlays.get(i.key);if(l!==null){const d=this.Lr.get(l.largestBatchId).delete(i.key);this.Lr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new wI(n,i));let u=this.Lr.get(n);u===void 0&&(u=ct(),this.Lr.set(n,u)),this.Lr.set(n,u.add(i.key))}}class i5{constructor(){this.sessionToken=kn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}class jg{constructor(){this.kr=new bn(Tn.Kr),this.qr=new bn(Tn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const i=new Tn(e,n);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Wr(new Tn(e,n))}Qr(e,n){e.forEach((i=>this.removeReference(i,n)))}Gr(e){const n=new Ie(new Lt([])),i=new Tn(n,e),l=new Tn(n,e+1),u=[];return this.qr.forEachInRange([i,l],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ie(new Lt([])),i=new Tn(n,e),l=new Tn(n,e+1);let u=ct();return this.qr.forEachInRange([i,l],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new Tn(e,0),i=this.kr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Tn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ie.comparator(e.key,n.key)||ot(e.Hr,n.Hr)}static Ur(e,n){return ot(e.Hr,n.Hr)||Ie.comparator(e.key,n.key)}}class r5{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new bn(Tn.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,l){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new _I(u,n,i,l);this.mutationQueue.push(d);for(const p of l)this.Jr=this.Jr.add(new Tn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,n){return oe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,l=this.Xr(i),u=l<0?0:l;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?xg:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Tn(n,0),l=new Tn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([i,l],(d=>{const p=this.Zr(d.Hr);u.push(p)})),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new bn(ot);return n.forEach((l=>{const u=new Tn(l,0),d=new Tn(l,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{i=i.add(p.Hr)}))})),oe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,l=i.length+1;let u=i;Ie.isDocumentKey(u)||(u=u.child(""));const d=new Tn(new Ie(u),0);let p=new bn(ot);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===l&&(p=p.add(g.Hr)),!0)}),d),oe.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((i=>{const l=this.Zr(i);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){St(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return oe.forEach(n.mutations,(l=>{const u=new Tn(l.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,n){const i=new Tn(n,0),l=this.Jr.firstAfterOrEqual(i);return oe.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class l5{constructor(e){this.ti=e,this.docs=(function(){return new Kt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,l=this.docs.get(i),u=l?l.size:0,d=this.ti(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return oe.resolve(i?i.document.mutableCopy():Un.newInvalidDocument(n))}getEntries(e,n){let i=ai();return n.forEach((l=>{const u=this.docs.get(l);i=i.insert(l,u?u.document.mutableCopy():Un.newInvalidDocument(l))})),oe.resolve(i)}getDocumentsMatchingQuery(e,n,i,l){let u=ai();const d=n.path,p=new Ie(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:b}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||DC(kC(b),i)<=0||(l.has(b.key)||Pd(n,b))&&(u=u.insert(b.key,b.mutableCopy()))}return oe.resolve(u)}getAllFromCollectionGroup(e,n,i,l){qe(9500)}ni(e,n){return oe.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new o5(this)}getSize(e){return oe.resolve(this.size)}}class o5 extends e5{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,l)=>{l.isValidDocument()?n.push(this.Mr.addEntry(e,l)):this.Mr.removeEntry(i)})),oe.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class c5{constructor(e){this.persistence=e,this.ri=new tl((n=>_g(n)),wg),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.ii=0,this.si=new jg,this.targetCount=0,this.oi=oo._r()}forEachTarget(e,n){return this.ri.forEach(((i,l)=>n(l))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.ii&&(this.ii=n),oe.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new oo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.lr(n),oe.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,i){let l=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&i.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),oe.waitFor(u).next((()=>l))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const i=this.ri.get(n)||null;return oe.resolve(i)}addMatchingKeys(e,n,i){return this.si.$r(n,i),oe.resolve()}removeMatchingKeys(e,n,i){this.si.Qr(n,i);const l=this.persistence.referenceDelegate,u=[];return l&&n.forEach((d=>{u.push(l.markPotentiallyOrphaned(e,d))})),oe.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const i=this.si.jr(n);return oe.resolve(i)}containsKey(e,n){return oe.resolve(this.si.containsKey(n))}}class Q1{constructor(e,n){this._i={},this.overlays={},this.ai=new Dd(0),this.ui=!1,this.ui=!0,this.ci=new i5,this.referenceDelegate=e(this),this.li=new c5(this),this.indexManager=new YI,this.remoteDocumentCache=(function(l){return new l5(l)})((i=>this.referenceDelegate.hi(i))),this.serializer=new $I(n),this.Pi=new s5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new a5,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this._i[e.toKey()];return i||(i=new r5(n,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,i){_e("MemoryPersistence","Starting transaction:",e);const l=new u5(this.ai.next());return this.referenceDelegate.Ti(),i(l).next((u=>this.referenceDelegate.Ii(l).next((()=>u)))).toPromise().then((u=>(l.raiseOnCommittedEvent(),u)))}Ei(e,n){return oe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,n))))}}class u5 extends OC{constructor(e){super(),this.currentSequenceNumber=e}}class Cg{constructor(e){this.persistence=e,this.Ri=new jg,this.Ai=null}static Vi(e){return new Cg(e)}get di(){if(this.Ai)return this.Ai;throw qe(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.di.delete(i.toString()),oe.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.di.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((l=>this.di.add(l.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((u=>this.di.add(u.toString())))})).next((()=>i.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(i=>{const l=Ie.fromPath(i);return this.mi(e,l).next((u=>{u||n.removeEntry(l,Ye.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((i=>{i?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class bd{constructor(e,n){this.persistence=e,this.fi=new tl((i=>LC(i.path)),((i,l)=>i.isEqual(l))),this.garbageCollector=ZI(this,n)}static Vi(e,n){return new bd(e,n)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((l=>i+l))))}pr(e){let n=0;return this.mr(e,(i=>{n++})).next((()=>n))}mr(e,n){return oe.forEach(this.fi,((i,l)=>this.wr(e,i,l).next((u=>u?oe.resolve():n(l)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const l=this.persistence.getRemoteDocumentCache(),u=l.newChangeBuffer();return l.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(i++,u.removeEntry(d,Ye.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,i){return this.fi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),oe.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jh(e.data.value)),n}wr(e,n,i){return oe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.fi.get(n);return oe.resolve(l!==void 0&&l>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ig{constructor(e,n,i,l){this.targetId=e,this.fromCache=n,this.Ts=i,this.Is=l}static Es(e,n){let i=ct(),l=ct();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:l=l.add(u.doc.key)}return new Ig(e,n.fromCache,i,l)}}class h5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class d5{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return US()?8:VC(Bn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,l){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,l,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new h5;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,i,l){return i.documentReadCount<this.Vs?(Gl()<=lt.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Yl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(Gl()<=lt.DEBUG&&_e("QueryEngine","Query:",Yl(n),"scans",i.documentReadCount,"local documents and returns",l,"documents as results."),i.documentReadCount>this.ds*l?(Gl()<=lt.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Yl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ea(n))):oe.resolve())}gs(e,n){if(Vv(n))return oe.resolve(null);let i=Ea(n);return this.indexManager.getIndexType(e,i).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=Op(n,null,"F"),i=Ea(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=ct(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,d,g.readTime)?this.gs(e,Op(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,i,l){return Vv(n)||l.isEqual(Ye.min())?oe.resolve(null):this.fs.getDocuments(e,i).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,i,l)?oe.resolve(null):(Gl()<=lt.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Yl(n)),this.Ds(e,d,n,IC(l,Hc)).next((p=>p)))}))}bs(e,n){let i=new bn(S1(e));return n.forEach(((l,u)=>{Pd(e,u)&&(i=i.add(u))})),i}Ss(e,n,i,l){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(l)>0)}ys(e,n,i){return Gl()<=lt.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Yl(n)),this.fs.getDocumentsMatchingQuery(e,n,Zi.min(),i)}Ds(e,n,i,l){return this.fs.getDocumentsMatchingQuery(e,i,l).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const kg="LocalStore",f5=3e8;class m5{constructor(e,n,i,l){this.persistence=e,this.Cs=n,this.serializer=l,this.vs=new Kt(ot),this.Fs=new tl((u=>_g(u)),wg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n5(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function p5(s,e,n,i){return new m5(s,e,n,i)}async function X1(s,e){const n=Qe(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let l;return n.mutationQueue.getAllMutationBatches(i).next((u=>(l=u,n.Os(e),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],p=[];let g=ct();for(const y of l){d.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}for(const y of u){p.push(y.batchId);for(const b of y.mutations)g=g.add(b.key)}return n.localDocuments.getDocuments(i,g).next((y=>({Ns:y,removedBatchIds:d,addedBatchIds:p})))}))}))}function g5(s,e){const n=Qe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const l=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,b){const w=y.batch,N=w.keys();let C=oe.resolve();return N.forEach((H=>{C=C.next((()=>b.getEntry(g,H))).next((B=>{const M=y.docVersions.get(H);St(M!==null,48541),B.version.compareTo(M)<0&&(w.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),b.addEntry(B)))}))})),C.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,i,e,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=ct();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,l)))}))}function W1(s){const e=Qe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function y5(s,e){const n=Qe(s),i=e.snapshotVersion;let l=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});l=n.vs;const p=[];e.targetChanges.forEach(((b,w)=>{const N=l.get(w);if(!N)return;p.push(n.li.removeMatchingKeys(u,b.removedDocuments,w).next((()=>n.li.addMatchingKeys(u,b.addedDocuments,w))));let C=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(kn.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):b.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(b.resumeToken,i)),l=l.insert(w,C),(function(B,M,L){return B.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=f5?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(N,C,b)&&p.push(n.li.updateTargetData(u,C))}));let g=ai(),y=ct();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(x5(u,d,e.documentUpdates).next((b=>{g=b.Bs,y=b.Ls}))),!i.isEqual(Ye.min())){const b=n.li.getLastRemoteSnapshotVersion(u).next((w=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(b)}return oe.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=l,u)))}function x5(s,e,n){let i=ct(),l=ct();return n.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=ai();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(l=l.add(p)),g.isNoDocument()&&g.version.isEqual(Ye.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):_e(kg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:d,Ls:l}}))}function b5(s,e){const n=Qe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=xg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function v5(s,e){const n=Qe(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let l;return n.li.getTargetData(i,e).next((u=>u?(l=u,oe.resolve(l)):n.li.allocateTargetId(i).next((d=>(l=new $i(e,d,"TargetPurposeListen",i.currentSequenceNumber),n.li.addTargetData(i,l).next((()=>l)))))))})).then((i=>{const l=n.vs.get(i.targetId);return(l===null||i.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.vs=n.vs.insert(i.targetId,i),n.Fs.set(e,i.targetId)),i}))}async function Bp(s,e,n){const i=Qe(s),l=i.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!bo(d))throw d;_e(kg,`Failed to update sequence numbers for target ${e}: ${d}`)}i.vs=i.vs.remove(e),i.Fs.delete(l.target)}function Qv(s,e,n){const i=Qe(s);let l=Ye.min(),u=ct();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,b){const w=Qe(g),N=w.Fs.get(b);return N!==void 0?oe.resolve(w.vs.get(N)):w.li.getTargetData(y,b)})(i,d,Ea(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>i.Cs.getDocumentsMatchingQuery(d,e,n?l:Ye.min(),n?u:ct()))).next((p=>(_5(i,iI(e),p),{documents:p,ks:u})))))}function _5(s,e,n){let i=s.Ms.get(e)||Ye.min();n.forEach(((l,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Ms.set(e,i)}class Xv{constructor(){this.activeTargetIds=hI()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w5{constructor(){this.vo=new Xv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,i){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Xv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class E5{Mo(e){}shutdown(){}}const Wv="ConnectivityMonitor";class Jv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){_e(Wv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){_e(Wv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let qh=null;function zp(){return qh===null?qh=(function(){return 268435456+Math.round(2147483648*Math.random())})():qh++,"0x"+qh.toString(16)}const op="RestConnection",T5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class N5{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${i}/databases/${l}`,this.$o=this.databaseId.database===fd?`project_id=${i}`:`project_id=${i}&database_id=${l}`}Wo(e,n,i,l,u){const d=zp(),p=this.Qo(e,n.toUriEncodedString());_e(op,`Sending RPC '${e}' ${d}:`,p,i);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,l,u);const{host:y}=new URL(p),b=rr(y);return this.zo(e,p,g,i,b).then((w=>(_e(op,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw ao(op,`RPC '${e}' ${d} failed with error: `,w,"url: ",p,"request:",i),w}))}jo(e,n,i,l,u,d){return this.Wo(e,n,i,l,u)}Go(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,u)=>e[u]=l)),i&&i.headers.forEach(((l,u)=>e[u]=l))}Qo(e,n){const i=T5[e];let l=`${this.qo}/v1/${n}:${i}`;return this.databaseInfo.apiKey&&(l=`${l}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),l}terminate(){}}class S5{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Pn="WebChannelConnection",wc=(s,e,n)=>{s.listen(e,(i=>{try{n(i)}catch(l){setTimeout((()=>{throw l}),0)}}))};class no extends N5{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!no.c_){const e=n1();wc(e,t1.STAT_EVENT,(n=>{n.stat===Rp.PROXY?_e(Pn,"STAT_EVENT: detected buffering proxy"):n.stat===Rp.NOPROXY&&_e(Pn,"STAT_EVENT: detected no buffering proxy")})),no.c_=!0}}zo(e,n,i,l,u){const d=zp();return new Promise(((p,g)=>{const y=new Zw;y.setWithCredentials(!0),y.listenOnce(e1.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Wh.NO_ERROR:const w=y.getResponseJson();_e(Pn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),p(w);break;case Wh.TIMEOUT:_e(Pn,`RPC '${e}' ${d} timed out`),g(new ve(le.DEADLINE_EXCEEDED,"Request time out"));break;case Wh.HTTP_ERROR:const N=y.getStatus();if(_e(Pn,`RPC '${e}' ${d} failed with status:`,N,"response text:",y.getResponseText()),N>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const H=C?.error;if(H&&H.status&&H.message){const B=(function(L){const F=L.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(F)>=0?F:le.UNKNOWN})(H.status);g(new ve(B,H.message))}else g(new ve(le.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ve(le.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{_e(Pn,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(l);_e(Pn,`RPC '${e}' ${d} sending request:`,l),y.send(n,"POST",b,i,15)}))}T_(e,n,i){const l=zp(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,i),p.encodeInitMessageHeaders=!0;const y=u.join("");_e(Pn,`Creating RPC '${e}' stream ${l}: ${y}`,p);const b=d.createWebChannel(y,p);this.I_(b);let w=!1,N=!1;const C=new S5({Ho:H=>{N?_e(Pn,`Not sending because RPC '${e}' stream ${l} is closed:`,H):(w||(_e(Pn,`Opening RPC '${e}' stream ${l} transport.`),b.open(),w=!0),_e(Pn,`RPC '${e}' stream ${l} sending:`,H),b.send(H))},Jo:()=>b.close()});return wc(b,Sc.EventType.OPEN,(()=>{N||(_e(Pn,`RPC '${e}' stream ${l} transport opened.`),C.i_())})),wc(b,Sc.EventType.CLOSE,(()=>{N||(N=!0,_e(Pn,`RPC '${e}' stream ${l} transport closed`),C.o_(),this.E_(b))})),wc(b,Sc.EventType.ERROR,(H=>{N||(N=!0,ao(Pn,`RPC '${e}' stream ${l} transport errored. Name:`,H.name,"Message:",H.message),C.o_(new ve(le.UNAVAILABLE,"The operation could not be completed")))})),wc(b,Sc.EventType.MESSAGE,(H=>{if(!N){const B=H.data[0];St(!!B,16349);const M=B,L=M?.error||M[0]?.error;if(L){_e(Pn,`RPC '${e}' stream ${l} received error:`,L);const F=L.status;let Q=(function(re){const S=dn[re];if(S!==void 0)return P1(S)})(F),ue=L.message;Q===void 0&&(Q=le.INTERNAL,ue="Unknown error status: "+F+" with message "+L.message),N=!0,C.o_(new ve(Q,ue)),b.close()}else _e(Pn,`RPC '${e}' stream ${l} received:`,B),C.__(B)}})),no.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,i){super.Go(e,n,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return s1()}}function A5(s){return new no(s)}function cp(){return typeof document<"u"?document:null}function zd(s){return new II(s,!0)}no.c_=!1;class J1{constructor(e,n,i=1e3,l=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=i,this.A_=l,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-i);l>0&&_e("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Zv="PersistentStream";class Z1{constructor(e,n,i,l,u,d,p,g){this.Ci=e,this.b_=i,this.S_=l,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===le.RESOURCE_EXHAUSTED?(si(n.toString()),si("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,l])=>{this.D_===n&&this.G_(i,l)}),(i=>{e((()=>{const l=new ve(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(l)}))}))}G_(e,n){const i=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((l=>{i((()=>this.z_(l)))})),this.stream.onMessage((l=>{i((()=>++this.F_==1?this.H_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return _e(Zv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(_e(Zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class R5 extends Z1{constructor(e,n,i,l,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,l,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=MI(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Ye.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Ye.min():d.readTime?Ta(d.readTime):Ye.min()})(e);return this.listener.J_(n,i)}Z_(e){const n={};n.database=Up(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=Dp(g)?{documents:PI(u,g)}:{query:LI(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=B1(u,d.resumeToken);const y=Vp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}else if(d.snapshotVersion.compareTo(Ye.min())>0){p.readTime=xd(u,d.snapshotVersion.toTimestamp());const y=Vp(u,d.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=BI(this.serializer,e);i&&(n.labels=i),this.K_(n)}X_(e){const n={};n.database=Up(this.serializer),n.removeTarget=e,this.K_(n)}}class j5 extends Z1{constructor(e,n,i,l,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,l,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=VI(e.writeResults,e.commitTime),i=Ta(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Up(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>OI(this.serializer,i)))};this.K_(n)}}class C5{}class I5 extends C5{constructor(e,n,i,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ve(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,Pp(n,i),l,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ve(le.UNKNOWN,u.toString())}))}jo(e,n,i,l,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,Pp(n,i),l,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ve(le.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function k5(s,e,n,i){return new I5(s,e,n,i)}class D5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(si(n),this.aa=!1):_e("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Yr="RemoteStore";class M5{constructor(e,n,i,l,u){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{i.enqueueAndForget((async()=>{nl(this)&&(_e(Yr,"Restarting streams for network reachability change."),await(async function(g){const y=Qe(g);y.Ea.add(4),await hu(y),y.Va.set("Unknown"),y.Ea.delete(4),await qd(y)})(this))}))})),this.Va=new D5(i,l)}}async function qd(s){if(nl(s))for(const e of s.Ra)await e(!0)}async function hu(s){for(const e of s.Ra)await e(!1)}function eE(s,e){const n=Qe(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Vg(n)?Og(n):vo(n).O_()&&Mg(n,e))}function Dg(s,e){const n=Qe(s),i=vo(n);n.Ia.delete(e),i.O_()&&tE(n,e),n.Ia.size===0&&(i.O_()?i.L_():nl(n)&&n.Va.set("Unknown"))}function Mg(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vo(s).Z_(e)}function tE(s,e){s.da.$e(e),vo(s).X_(e)}function Og(s){s.da=new AI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),vo(s).start(),s.Va.ua()}function Vg(s){return nl(s)&&!vo(s).x_()&&s.Ia.size>0}function nl(s){return Qe(s).Ea.size===0}function nE(s){s.da=void 0}async function O5(s){s.Va.set("Online")}async function V5(s){s.Ia.forEach(((e,n)=>{Mg(s,e)}))}async function P5(s,e){nE(s),Vg(s)?(s.Va.ha(e),Og(s)):s.Va.set("Unknown")}async function L5(s,e,n){if(s.Va.set("Online"),e instanceof U1&&e.state===2&&e.cause)try{await(async function(l,u){const d=u.cause;for(const p of u.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.da.removeTarget(p))})(s,e)}catch(i){_e(Yr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vd(s,i)}else if(e instanceof td?s.da.Xe(e):e instanceof L1?s.da.st(e):s.da.tt(e),!n.isEqual(Ye.min()))try{const i=await W1(s.localStore);n.compareTo(i)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(y);b&&u.Ia.set(y,b.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,y)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(kn.EMPTY_BYTE_STRING,b.snapshotVersion)),tE(u,g);const w=new $i(b.target,g,y,b.sequenceNumber);Mg(u,w)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(i){_e(Yr,"Failed to raise snapshot:",i),await vd(s,i)}}async function vd(s,e,n){if(!bo(e))throw e;s.Ea.add(1),await hu(s),s.Va.set("Offline"),n||(n=()=>W1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{_e(Yr,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await qd(s)}))}function sE(s,e){return e().catch((n=>vd(s,n,e)))}async function Fd(s){const e=Qe(s),n=sr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xg;for(;U5(e);)try{const l=await b5(e.localStore,i);if(l===null){e.Ta.length===0&&n.L_();break}i=l.batchId,B5(e,l)}catch(l){await vd(e,l)}aE(e)&&iE(e)}function U5(s){return nl(s)&&s.Ta.length<10}function B5(s,e){s.Ta.push(e);const n=sr(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function aE(s){return nl(s)&&!sr(s).x_()&&s.Ta.length>0}function iE(s){sr(s).start()}async function z5(s){sr(s).ra()}async function q5(s){const e=sr(s);for(const n of s.Ta)e.ea(n.mutations)}async function F5(s,e,n){const i=s.Ta.shift(),l=Sg.from(i,e,n);await sE(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Fd(s)}async function H5(s,e){e&&sr(s).Y_&&await(async function(i,l){if((function(d){return TI(d)&&d!==le.ABORTED})(l.code)){const u=i.Ta.shift();sr(i).B_(),await sE(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,l))),await Fd(i)}})(s,e),aE(s)&&iE(s)}async function e_(s,e){const n=Qe(s);n.asyncQueue.verifyOperationInProgress(),_e(Yr,"RemoteStore received new credentials");const i=nl(n);n.Ea.add(3),await hu(n),i&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qd(n)}async function $5(s,e){const n=Qe(s);e?(n.Ea.delete(2),await qd(n)):e||(n.Ea.add(2),await hu(n),n.Va.set("Unknown"))}function vo(s){return s.ma||(s.ma=(function(n,i,l){const u=Qe(n);return u.sa(),new R5(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:O5.bind(null,s),Yo:V5.bind(null,s),t_:P5.bind(null,s),J_:L5.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Vg(s)?Og(s):s.Va.set("Unknown")):(await s.ma.stop(),nE(s))}))),s.ma}function sr(s){return s.fa||(s.fa=(function(n,i,l){const u=Qe(n);return u.sa(),new j5(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,l)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:z5.bind(null,s),t_:H5.bind(null,s),ta:q5.bind(null,s),na:F5.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await Fd(s)):(await s.fa.stop(),s.Ta.length>0&&(_e(Yr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Pg{constructor(e,n,i,l,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=l,this.removalCallback=u,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,l,u){const d=Date.now()+i,p=new Pg(e,n,d,l,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lg(s,e){if(si("AsyncQueue",`${e}: ${s}`),bo(s))return new ve(le.UNAVAILABLE,`${e}: ${s}`);throw s}class so{static emptySet(e){return new so(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ie.comparator(n.key,i.key):(n,i)=>Ie.comparator(n.key,i.key),this.keyedMap=Ac(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof so)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,u=i.getNext().key;if(!l.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new so;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}class t_{constructor(){this.ga=new Kt(Ie.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):qe(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class co{constructor(e,n,i,l,u,d,p,g,y){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=l,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,i,l,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new co(e,n,so.emptySet(n),d,i,l,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==i[l].type||!n[l].doc.isEqual(i[l].doc))return!1;return!0}}class G5{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Y5{constructor(){this.queries=n_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const l=Qe(n),u=l.queries;l.queries=n_(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(i)}))})(this,new ve(le.ABORTED,"Firestore shutting down"))}}function n_(){return new tl((s=>N1(s)),Vd)}async function rE(s,e){const n=Qe(s);let i=3;const l=e.query;let u=n.queries.get(l);u?!u.Sa()&&e.Da()&&(i=2):(u=new G5,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(l,!0);break;case 1:u.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=Lg(d,`Initialization of query '${Yl(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Ug(n)}async function lE(s,e){const n=Qe(s),i=e.query;let l=3;const u=n.queries.get(i);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?l=e.Da()?0:1:!u.Sa()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function K5(s,e){const n=Qe(s);let i=!1;for(const l of e){const u=l.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(l)&&(i=!0);d.wa=l}}i&&Ug(n)}function Q5(s,e,n){const i=Qe(s),l=i.queries.get(e);if(l)for(const u of l.ba)u.onError(n);i.queries.delete(e)}function Ug(s){s.Ca.forEach((e=>{e.next()}))}var qp,s_;(s_=qp||(qp={})).Ma="default",s_.Cache="cache";class oE{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const l of e.docChanges)l.type!==3&&i.push(l);e=new co(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qp.Cache}}class cE{constructor(e){this.key=e}}class uE{constructor(e){this.key=e}}class X5{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ct(),this.mutatedKeys=ct(),this.eu=S1(e),this.tu=new so(this.eu)}get nu(){return this.Za}ru(e,n){const i=n?n.iu:new t_,l=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const g=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,y=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,w)=>{const N=l.get(b),C=Pd(this.query,w)?w:null,H=!!N&&this.mutatedKeys.has(N.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let M=!1;N&&C?N.data.isEqual(C.data)?H!==B&&(i.track({type:3,doc:C}),M=!0):this.su(N,C)||(i.track({type:2,doc:C}),M=!0,(g&&this.eu(C,g)>0||y&&this.eu(C,y)<0)&&(p=!0)):!N&&C?(i.track({type:0,doc:C}),M=!0):N&&!C&&(i.track({type:1,doc:N}),M=!0,(g||y)&&(p=!0)),M&&(C?(d=d.add(C),u=B?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),i.track({type:1,doc:b})}return{tu:d,iu:i,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,l){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,w)=>(function(C,H){const B=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{Vt:M})}};return B(C)-B(H)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(i),l=l??!1;const p=n&&!l?this._u():[],g=this.Ya.size===0&&this.current&&!l?1:0,y=g!==this.Xa;return this.Xa=g,d.length!==0||y?{snapshot:new co(this.query,e.tu,u,d,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new t_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ct(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const n=[];return e.forEach((i=>{this.Ya.has(i)||n.push(new uE(i))})),this.Ya.forEach((i=>{e.has(i)||n.push(new cE(i))})),n}cu(e){this.Za=e.ks,this.Ya=ct();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Bg="SyncEngine";class W5{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class J5{constructor(e){this.key=e,this.hu=!1}}class Z5{constructor(e,n,i,l,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=l,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new tl((p=>N1(p)),Vd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Kt(Ie.comparator),this.Au=new Map,this.Vu=new jg,this.du={},this.mu=new Map,this.fu=oo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function e4(s,e,n=!0){const i=gE(s);let l;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),l=u.view.lu()):l=await hE(i,e,n,!0),l}async function t4(s,e){const n=gE(s);await hE(n,e,!0,!1)}async function hE(s,e,n,i){const l=await v5(s.localStore,Ea(e)),u=l.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let p;return i&&(p=await n4(s,e,u,d==="current",l.resumeToken)),s.isPrimaryClient&&n&&eE(s.remoteStore,l),p}async function n4(s,e,n,i,l){s.pu=(w,N,C)=>(async function(B,M,L,F){let Q=M.view.ru(L);Q.Ss&&(Q=await Qv(B.localStore,M.query,!1).then((({documents:S})=>M.view.ru(S,Q))));const ue=F&&F.targetChanges.get(M.targetId),fe=F&&F.targetMismatches.get(M.targetId)!=null,re=M.view.applyChanges(Q,B.isPrimaryClient,ue,fe);return i_(B,M.targetId,re.au),re.snapshot})(s,w,N,C);const u=await Qv(s.localStore,e,!0),d=new X5(e,u.ks),p=d.ru(u.documents),g=uu.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",l),y=d.applyChanges(p,s.isPrimaryClient,g);i_(s,n,y.au);const b=new W5(e,n,d);return s.Tu.set(e,b),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function s4(s,e,n){const i=Qe(s),l=i.Tu.get(e),u=i.Iu.get(l.targetId);if(u.length>1)return i.Iu.set(l.targetId,u.filter((d=>!Vd(d,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(l.targetId),i.sharedClientState.isActiveQueryTarget(l.targetId)||await Bp(i.localStore,l.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(l.targetId),n&&Dg(i.remoteStore,l.targetId),Fp(i,l.targetId)})).catch(xo)):(Fp(i,l.targetId),await Bp(i.localStore,l.targetId,!0))}async function a4(s,e){const n=Qe(s),i=n.Tu.get(e),l=n.Iu.get(i.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Dg(n.remoteStore,i.targetId))}async function i4(s,e,n){const i=d4(s);try{const l=await(function(d,p){const g=Qe(d),y=zt.now(),b=p.reduce(((C,H)=>C.add(H.key)),ct());let w,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let H=ai(),B=ct();return g.xs.getEntries(C,b).next((M=>{H=M,H.forEach(((L,F)=>{F.isValidDocument()||(B=B.add(L))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,H))).next((M=>{w=M;const L=[];for(const F of p){const Q=bI(F,w.get(F.key).overlayedDocument);Q!=null&&L.push(new ur(F.key,Q,y1(Q.value.mapValue),Ys.exists(!0)))}return g.mutationQueue.addMutationBatch(C,y,L,p)})).next((M=>{N=M;const L=M.applyToLocalDocumentSet(w,B);return g.documentOverlayCache.saveOverlays(C,M.batchId,L)}))})).then((()=>({batchId:N.batchId,changes:R1(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(l.batchId),(function(d,p,g){let y=d.du[d.currentUser.toKey()];y||(y=new Kt(ot)),y=y.insert(p,g),d.du[d.currentUser.toKey()]=y})(i,l.batchId,n),await du(i,l.changes),await Fd(i.remoteStore)}catch(l){const u=Lg(l,"Failed to persist write");n.reject(u)}}async function dE(s,e){const n=Qe(s);try{const i=await y5(n.localStore,e);e.targetChanges.forEach(((l,u)=>{const d=n.Au.get(u);d&&(St(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?St(d.hu,14607):l.removedDocuments.size>0&&(St(d.hu,42227),d.hu=!1))})),await du(n,i,e)}catch(i){await xo(i)}}function a_(s,e,n){const i=Qe(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const l=[];i.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const g=Qe(d);g.onlineState=p;let y=!1;g.queries.forEach(((b,w)=>{for(const N of w.ba)N.va(p)&&(y=!0)})),y&&Ug(g)})(i.eventManager,e),l.length&&i.Pu.J_(l),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function r4(s,e,n){const i=Qe(s);i.sharedClientState.updateQueryState(e,"rejected",n);const l=i.Au.get(e),u=l&&l.key;if(u){let d=new Kt(Ie.comparator);d=d.insert(u,Un.newNoDocument(u,Ye.min()));const p=ct().add(u),g=new Bd(Ye.min(),new Map,new Kt(ot),d,p);await dE(i,g),i.Ru=i.Ru.remove(u),i.Au.delete(e),zg(i)}else await Bp(i.localStore,e,!1).then((()=>Fp(i,e,n))).catch(xo)}async function l4(s,e){const n=Qe(s),i=e.batch.batchId;try{const l=await g5(n.localStore,e);mE(n,i,null),fE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await du(n,l)}catch(l){await xo(l)}}async function o4(s,e,n){const i=Qe(s);try{const l=await(function(d,p){const g=Qe(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let b;return g.mutationQueue.lookupMutationBatch(y,p).next((w=>(St(w!==null,37113),b=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,b))).next((()=>g.localDocuments.getDocuments(y,b)))}))})(i.localStore,e);mE(i,e,n),fE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await du(i,l)}catch(l){await xo(l)}}function fE(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function mE(s,e,n){const i=Qe(s);let l=i.du[i.currentUser.toKey()];if(l){const u=l.get(e);u&&(n?u.reject(n):u.resolve(),l=l.remove(e)),i.du[i.currentUser.toKey()]=l}}function Fp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((i=>{s.Vu.containsKey(i)||pE(s,i)}))}function pE(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Dg(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),zg(s))}function i_(s,e,n){for(const i of n)i instanceof cE?(s.Vu.addReference(i.key,e),c4(s,i)):i instanceof uE?(_e(Bg,"Document no longer in limbo: "+i.key),s.Vu.removeReference(i.key,e),s.Vu.containsKey(i.key)||pE(s,i.key)):qe(19791,{wu:i})}function c4(s,e){const n=e.key,i=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(i)||(_e(Bg,"New document in limbo: "+n),s.Eu.add(i),zg(s))}function zg(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Ie(Lt.fromString(e)),i=s.fu.next();s.Au.set(i,new J5(n)),s.Ru=s.Ru.insert(n,i),eE(s.remoteStore,new $i(Ea(Eg(n.path)),i,"TargetPurposeLimboResolution",Dd.ce))}}async function du(s,e,n){const i=Qe(s),l=[],u=[],d=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{d.push(i.pu(g,e,n).then((y=>{if((y||n)&&i.isPrimaryClient){const b=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(y){l.push(y);const b=Ig.Es(g.targetId,y);u.push(b)}})))})),await Promise.all(d),i.Pu.J_(l),await(async function(g,y){const b=Qe(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>oe.forEach(y,(N=>oe.forEach(N.Ts,(C=>b.persistence.referenceDelegate.addReference(w,N.targetId,C))).next((()=>oe.forEach(N.Is,(C=>b.persistence.referenceDelegate.removeReference(w,N.targetId,C)))))))))}catch(w){if(!bo(w))throw w;_e(kg,"Failed to update sequence numbers: "+w)}for(const w of y){const N=w.targetId;if(!w.fromCache){const C=b.vs.get(N),H=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(H);b.vs=b.vs.insert(N,B)}}})(i.localStore,u))}async function u4(s,e){const n=Qe(s);if(!n.currentUser.isEqual(e)){_e(Bg,"User change. New user:",e.toKey());const i=await X1(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new ve(le.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await du(n,i.Ns)}}function h4(s,e){const n=Qe(s),i=n.Au.get(e);if(i&&i.hu)return ct().add(i.key);{let l=ct();const u=n.Iu.get(e);if(!u)return l;for(const d of u){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function gE(s){const e=Qe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=dE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=h4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r4.bind(null,e),e.Pu.J_=K5.bind(null,e.eventManager),e.Pu.yu=Q5.bind(null,e.eventManager),e}function d4(s){const e=Qe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=o4.bind(null,e),e}class _d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return p5(this.persistence,new d5,e.initialUser,this.serializer)}Cu(e){return new Q1(Cg.Vi,this.serializer)}Du(e){return new w5}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_d.provider={build:()=>new _d};class f4 extends _d{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){St(this.persistence.referenceDelegate instanceof bd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new WI(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new Q1((i=>bd.Vi(i,n)),this.serializer)}}class Hp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>a_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=u4.bind(null,this.syncEngine),await $5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Y5})()}createDatastore(e){const n=zd(e.databaseInfo.databaseId),i=A5(e.databaseInfo);return k5(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,l,u,d,p){return new M5(i,l,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>a_(this.syncEngine,n,0)),(function(){return Jv.v()?new Jv:new E5})())}createSyncEngine(e,n){return(function(l,u,d,p,g,y,b){const w=new Z5(l,u,d,p,g,y);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Qe(n);_e(Yr,"RemoteStore shutting down."),i.Ea.add(5),await hu(i),i.Aa.shutdown(),i.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Hp.provider={build:()=>new Hp};class yE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):si("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ar="FirestoreClient";class m4{constructor(e,n,i,l,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this._databaseInfo=l,this.user=Ln.UNAUTHENTICATED,this.clientId=yg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{_e(ar,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(_e(ar,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Lg(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function up(s,e){s.asyncQueue.verifyOperationInProgress(),_e(ar,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async l=>{i.isEqual(l)||(await X1(e.localStore,l),i=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function r_(s,e){s.asyncQueue.verifyOperationInProgress();const n=await p4(s);_e(ar,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((i=>e_(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,l)=>e_(e.remoteStore,l))),s._onlineComponents=e}async function p4(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){_e(ar,"Using user provided OfflineComponentProvider");try{await up(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===le.FAILED_PRECONDITION||l.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),await up(s,new _d)}}else _e(ar,"Using default OfflineComponentProvider"),await up(s,new f4(void 0));return s._offlineComponents}async function xE(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(_e(ar,"Using user provided OnlineComponentProvider"),await r_(s,s._uninitializedComponentsProvider._online)):(_e(ar,"Using default OnlineComponentProvider"),await r_(s,new Hp))),s._onlineComponents}function g4(s){return xE(s).then((e=>e.syncEngine))}async function $p(s){const e=await xE(s),n=e.eventManager;return n.onListen=e4.bind(null,e.syncEngine),n.onUnlisten=s4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=t4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=a4.bind(null,e.syncEngine),n}function y4(s,e,n,i){const l=new yE(i),u=new oE(e,l,n);return s.asyncQueue.enqueueAndForget((async()=>rE(await $p(s),u))),()=>{l.Nu(),s.asyncQueue.enqueueAndForget((async()=>lE(await $p(s),u)))}}function x4(s,e,n={}){const i=new Qi;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,y){const b=new yE({next:N=>{b.Nu(),d.enqueueAndForget((()=>lE(u,w))),N.fromCache&&g.source==="server"?y.reject(new ve(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(N)},error:N=>y.reject(N)}),w=new oE(p,b,{includeMetadataChanges:!0,Ka:!0});return rE(u,w)})(await $p(s),s.asyncQueue,e,n,i))),i.promise}function b4(s,e){const n=new Qi;return s.asyncQueue.enqueueAndForget((async()=>i4(await g4(s),e,n))),n.promise}function bE(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const v4="ComponentProvider",l_=new Map;function _4(s,e,n,i,l){return new zC(s,e,n,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,bE(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator,i)}const vE="firestore.googleapis.com",o_=!0;class c_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vE,this.ssl=o_}else this.host=e.host,this.ssl=e.ssl??o_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=K1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QI)throw new ve(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bE(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ve(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ve(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ve(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,l){return i.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hd{constructor(e,n,i,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new c_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new c_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new vC;switch(i.type){case"firstParty":return new TC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ve(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=l_.get(n);i&&(_e(v4,"Removing Datastore"),l_.delete(n),i.terminate())})(this),Promise.resolve()}}function w4(s,e,n,i={}){s=wa(s,Hd);const l=rr(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(sg(`https://${p}`),ag("Firestore",!0)),u.host!==vE&&u.host!==p&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:l,emulatorOptions:i};if(!qr(g,d)&&(s._setSettings(g),i.mockUserToken)){let y,b;if(typeof i.mockUserToken=="string")y=i.mockUserToken,b=Ln.MOCK_USER;else{y=hw(i.mockUserToken,s._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new ve(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Ln(w)}s._authCredentials=new _C(new i1(y,b))}}class sl{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new sl(this.firestore,e,this._query)}}class pn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(lu(n,pn._jsonSchema))return new pn(e,i||null,new Ie(Lt.fromString(n.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:mn("string",pn._jsonSchemaVersion),referencePath:mn("string")};class Xi extends sl{constructor(e,n,i){super(e,n,Eg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ie(e))}withConverter(e){return new Xi(this.firestore,e,this._path)}}function mt(s,e,...n){if(s=$t(s),r1("collection","path",e),s instanceof Hd){const i=Lt.fromString(e,...n);return wv(i),new Xi(s,null,i)}{if(!(s instanceof pn||s instanceof Xi))throw new ve(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Lt.fromString(e,...n));return wv(i),new Xi(s.firestore,null,i)}}function bt(s,e,...n){if(s=$t(s),arguments.length===1&&(e=yg.newId()),r1("doc","path",e),s instanceof Hd){const i=Lt.fromString(e,...n);return _v(i),new pn(s,null,new Ie(i))}{if(!(s instanceof pn||s instanceof Xi))throw new ve(le.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Lt.fromString(e,...n));return _v(i),new pn(s.firestore,s instanceof Xi?s.converter:null,new Ie(i))}}const u_="AsyncQueue";class h_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J1(this,"async_queue_retry"),this._c=()=>{const i=cp();i&&_e(u_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=cp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=cp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Qi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!bo(e))throw e;_e(u_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,si("INTERNAL UNHANDLED ERROR: ",d_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=Pg.createAndSchedule(this,e,n,i,(u=>this.hc(u)));return this.tc.push(l),l}uc(){this.nc&&qe(47125,{Pc:d_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function d_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Kr extends Hd{constructor(e,n,i,l){super(e,n,i,l),this.type="firestore",this._queue=new h_,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h_(e),this._firestoreClient=void 0,await e}}}function E4(s,e){const n=typeof s=="object"?s:lg(),i=typeof s=="string"?s:fd,l=Rd(n,"firestore").getImmediate({identifier:i});if(!l._initialized){const u=ow("firestore");u&&w4(l,...u)}return l}function qg(s){if(s._terminated)throw new ve(le.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||T4(s),s._firestoreClient}function T4(s){const e=s._freezeSettings(),n=_4(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new m4(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(l){const u=l?._online.build();return{_offline:l?._offline.build(u),_online:u}})(s._componentsProvider))}class ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ks(kn.fromBase64String(e))}catch(n){throw new ve(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ks(kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ks._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lu(e,ks._jsonSchema))return ks.fromBase64String(e.bytes)}}ks._jsonSchemaVersion="firestore/bytes/1.0",ks._jsonSchema={type:mn("string",ks._jsonSchemaVersion),bytes:mn("string")};class Fg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ve(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $d{constructor(e){this._methodName=e}}class Na{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ve(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ve(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ot(this._lat,e._lat)||ot(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Na._jsonSchemaVersion}}static fromJSON(e){if(lu(e,Na._jsonSchema))return new Na(e.latitude,e.longitude)}}Na._jsonSchemaVersion="firestore/geoPoint/1.0",Na._jsonSchema={type:mn("string",Na._jsonSchemaVersion),latitude:mn("number"),longitude:mn("number")};class Ks{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,l){if(i.length!==l.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==l[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lu(e,Ks._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ks(e.vectorValues);throw new ve(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ks._jsonSchemaVersion="firestore/vectorValue/1.0",Ks._jsonSchema={type:mn("string",Ks._jsonSchemaVersion),vectorValues:mn("object")};const N4=/^__.*__$/;class S4{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new cu(e,this.data,n,this.fieldTransforms)}}class _E{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{dataSource:s})}}class Hg{constructor(e,n,i,l,u,d){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=l,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Hg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){const n=this.path?.child(e),i=this.contextWith({path:n,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return wd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(wE(this.dataSource)&&N4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class A4{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||zd(e)}createContext(e,n,i,l=!1){return new Hg({dataSource:e,methodName:n,targetDoc:i,path:In.emptyPath(),arrayElement:!1,hasConverter:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $g(s){const e=s._freezeSettings(),n=zd(s._databaseId);return new A4(s._databaseId,!!e.ignoreUndefinedProperties,n)}function R4(s,e,n,i,l,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,n,l);Yg("Data must be an object, but it was:",d,i);const p=EE(i,d);let g,y;if(u.merge)g=new gs(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const N=uo(e,w,n);if(!d.contains(N))throw new ve(le.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);SE(b,N)||b.push(N)}g=new gs(b),y=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=d.fieldTransforms;return new S4(new es(p),g,y)}class Gd extends $d{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gd}}class Gg extends $d{_toFieldTransform(e){return new pI(e.path,new Kc)}isEqual(e){return e instanceof Gg}}function j4(s,e,n,i){const l=s.createContext(1,e,n);Yg("Data must be an object, but it was:",l,i);const u=[],d=es.empty();cr(i,((g,y)=>{const b=NE(e,g,n);y=$t(y);const w=l.childContextForFieldPath(b);if(y instanceof Gd)u.push(b);else{const N=fu(y,w);N!=null&&(u.push(b),d.set(b,N))}}));const p=new gs(u);return new _E(d,p,l.fieldTransforms)}function C4(s,e,n,i,l,u){const d=s.createContext(1,e,n),p=[uo(e,i,n)],g=[l];if(u.length%2!=0)throw new ve(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)p.push(uo(e,u[N])),g.push(u[N+1]);const y=[],b=es.empty();for(let N=p.length-1;N>=0;--N)if(!SE(y,p[N])){const C=p[N];let H=g[N];H=$t(H);const B=d.childContextForFieldPath(C);if(H instanceof Gd)y.push(C);else{const M=fu(H,B);M!=null&&(y.push(C),b.set(C,M))}}const w=new gs(y);return new _E(b,w,d.fieldTransforms)}function I4(s,e,n,i=!1){return fu(n,s.createContext(i?4:3,e))}function fu(s,e){if(TE(s=$t(s)))return Yg("Unsupported field value:",e,s),EE(s,e);if(s instanceof $d)return(function(i,l){if(!wE(l.dataSource))throw l.createError(`${i._methodName}() can only be used with update() and set()`);if(!l.path)throw l.createError(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(l);u&&l.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,l){const u=[];let d=0;for(const p of i){let g=fu(p,l.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,l){if((i=$t(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dI(l.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=zt.fromDate(i);return{timestampValue:xd(l.serializer,u)}}if(i instanceof zt){const u=new zt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:xd(l.serializer,u)}}if(i instanceof Na)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ks)return{bytesValue:B1(l.serializer,i._byteString)};if(i instanceof pn){const u=l.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw l.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Rg(i.firestore._databaseId||l.databaseId,i._key.path)}}if(i instanceof Ks)return(function(d,p){const g=d instanceof Ks?d.toArray():d;return{mapValue:{fields:{[p1]:{stringValue:g1},[md]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return Tg(p.serializer,b)}))}}}}}})(i,l);if(Y1(i))return i._toProto(l.serializer);throw l.createError(`Unsupported field value: ${kd(i)}`)})(s,e)}function EE(s,e){const n={};return c1(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cr(s,((i,l)=>{const u=fu(l,e.childContextForField(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function TE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof zt||s instanceof Na||s instanceof ks||s instanceof pn||s instanceof $d||s instanceof Ks||Y1(s))}function Yg(s,e,n){if(!TE(n)||!l1(n)){const i=kd(n);throw i==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+i)}}function uo(s,e,n){if((e=$t(e))instanceof Fg)return e._internalPath;if(typeof e=="string")return NE(s,e);throw wd("Field path arguments must be of type string or ",s,!1,void 0,n)}const k4=new RegExp("[~\\*/\\[\\]]");function NE(s,e,n){if(e.search(k4)>=0)throw wd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Fg(...e.split("."))._internalPath}catch{throw wd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function wd(s,e,n,i,l){const u=i&&!i.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${l}`),g+=")"),new ve(le.INVALID_ARGUMENT,p+s+g)}function SE(s,e){return s.some((n=>n.isEqual(e)))}class D4{convertValue(e,n="none"){switch(nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return cr(e,((l,u)=>{i[l]=this.convertValue(u,n)})),i}convertVectorValue(e){const n=e.fields?.[md].arrayValue?.values?.map((i=>nn(i.doubleValue)));return new Ks(n)}convertGeoPoint(e){return new Na(nn(e.latitude),nn(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Od(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const n=er(e);return new zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Lt.fromString(e);St(G1(i),9688,{name:e});const l=new Gc(i.get(1),i.get(3)),u=new Ie(i.popFirst(5));return l.isEqual(n)||si(`Document ${u} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class Kg extends D4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function Qg(){return new Gg("serverTimestamp")}const f_="@firebase/firestore",m_="4.10.0";function p_(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const l=n;for(const u of i)if(u in l&&typeof l[u]=="function")return!0;return!1})(s,["next","error","complete"])}class AE{constructor(e,n,i,l,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=l,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(uo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class M4 extends AE{data(){return super.data()}}function RE(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ve(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xg{}class O4 extends Xg{}function Ds(s,e,...n){let i=[];e instanceof Xg&&i.push(e),i=i.concat(n),(function(u){const d=u.filter((g=>g instanceof Wg)).length,p=u.filter((g=>g instanceof Yd)).length;if(d>1||d>0&&p>0)throw new ve(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const l of i)s=l._apply(s);return s}class Yd extends O4{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Yd(e,n,i)}_apply(e){const n=this._parse(e);return jE(e._query,n),new sl(e.firestore,e.converter,Mp(e._query,n))}_parse(e){const n=$g(e.firestore);return(function(u,d,p,g,y,b,w){let N;if(y.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new ve(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){y_(w,b);const H=[];for(const B of w)H.push(g_(g,u,B));N={arrayValue:{values:H}}}else N=g_(g,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||y_(w,b),N=I4(p,d,w,b==="in"||b==="not-in");return fn.create(y,b,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ys(s,e,n){const i=e,l=uo("where",s);return Yd._create(l,i,n)}class Wg extends Xg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Wg(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Xs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(l,u){let d=l;const p=u.getFlattenedFilters();for(const g of p)jE(d,g),d=Mp(d,g)})(e._query,n),new sl(e.firestore,e.converter,Mp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function g_(s,e,n){if(typeof(n=$t(n))=="string"){if(n==="")throw new ve(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!T1(e)&&n.indexOf("/")!==-1)throw new ve(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Lt.fromString(n));if(!Ie.isDocumentKey(i))throw new ve(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Cv(s,new Ie(i))}if(n instanceof pn)return Cv(s,n._key);throw new ve(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kd(n)}.`)}function y_(s,e){if(!Array.isArray(s)||s.length===0)throw new ve(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jE(s,e){const n=(function(l,u){for(const d of l)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ve(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function V4(s,e,n){let i;return i=s?s.toFirestore(e):e,i}class jc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ur extends AE{constructor(e,n,i,l,u,d){super(e,n,i,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(uo("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ur._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ur._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ur._jsonSchema={type:mn("string",Ur._jsonSchemaVersion),bundleSource:mn("string","DocumentSnapshot"),bundleName:mn("string"),bundle:mn("string")};class nd extends Ur{data(e={}){return super.data(e)}}class Br{constructor(e,n,i,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new jc(l.hasPendingWrites,l.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new nd(this._firestore,this._userDataWriter,i.key,i,new jc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ve(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,u){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const g=new nd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new jc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new nd(l._firestore,l._userDataWriter,p.doc.key,p.doc,new jc(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let y=-1,b=-1;return p.type!==0&&(y=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),b=d.indexOf(p.doc.key)),{type:P4(p.type),doc:g,oldIndex:y,newIndex:b}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Br._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],l=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),l.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function P4(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:s})}}Br._jsonSchemaVersion="firestore/querySnapshot/1.0",Br._jsonSchema={type:mn("string",Br._jsonSchemaVersion),bundleSource:mn("string","QuerySnapshot"),bundleName:mn("string"),bundle:mn("string")};function Ms(s){s=wa(s,sl);const e=wa(s.firestore,Kr),n=qg(e),i=new Kg(e);return RE(s._query),x4(n,s._query).then((l=>new Br(e,i,s,l)))}function Nt(s,e,n,...i){s=wa(s,pn);const l=wa(s.firestore,Kr),u=$g(l);let d;return d=typeof(e=$t(e))=="string"||e instanceof Fg?C4(u,"updateDoc",s._key,e,n,i):j4(u,"updateDoc",s._key,e),Jg(l,[d.toMutation(s._key,Ys.exists(!0))])}function L4(s){return Jg(wa(s.firestore,Kr),[new Ng(s._key,Ys.none())])}function Qr(s,e){const n=wa(s.firestore,Kr),i=bt(s),l=V4(s.converter,e),u=$g(s.firestore);return Jg(n,[R4(u,"addDoc",i._key,l,s.converter!==null,{}).toMutation(i._key,Ys.exists(!1))]).then((()=>i))}function ts(s,...e){s=$t(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||p_(e[i])||(n=e[i++]);const l={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(p_(e[i])){const y=e[i];e[i]=y.next?.bind(y),e[i+1]=y.error?.bind(y),e[i+2]=y.complete?.bind(y)}let u,d,p;if(s instanceof pn)d=wa(s.firestore,Kr),p=Eg(s._key.path),u={next:y=>{e[i]&&e[i](U4(d,s,y))},error:e[i+1],complete:e[i+2]};else{const y=wa(s,sl);d=wa(y.firestore,Kr),p=y._query;const b=new Kg(d);u={next:w=>{e[i]&&e[i](new Br(d,b,y,w))},error:e[i+1],complete:e[i+2]},RE(s._query)}const g=qg(d);return y4(g,p,l,u)}function Jg(s,e){const n=qg(s);return b4(n,e)}function U4(s,e,n){const i=n.docs.get(e._key),l=new Kg(s);return new Ur(s,l,e._key,i,new jc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){bC(Zr),Fr(new Ji("firestore",((i,{instanceIdentifier:l,options:u})=>{const d=i.getProvider("app").getImmediate(),p=new Kr(new wC(i.getProvider("auth-internal")),new NC(d,i.getProvider("app-check-internal")),qC(d,l),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),ba(f_,m_,e),ba(f_,m_,"esm2020")})();const CE="firebasestorage.googleapis.com",IE="storageBucket",B4=120*1e3,z4=600*1e3;class Jt extends Aa{constructor(e,n,i=0){super(hp(e),`Firebase Storage: ${n} (${hp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return hp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wt||(Wt={}));function hp(s){return"storage/"+s}function Zg(){const s="An unknown error occurred, please check the error payload for server response.";return new Jt(Wt.UNKNOWN,s)}function q4(s){return new Jt(Wt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function F4(s){return new Jt(Wt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function H4(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Jt(Wt.UNAUTHENTICATED,s)}function $4(){return new Jt(Wt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function G4(s){return new Jt(Wt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function Y4(){return new Jt(Wt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function K4(){return new Jt(Wt.CANCELED,"User canceled the upload/download.")}function Q4(s){return new Jt(Wt.INVALID_URL,"Invalid URL '"+s+"'.")}function X4(s){return new Jt(Wt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function W4(){return new Jt(Wt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+IE+"' property when initializing the app?")}function J4(){return new Jt(Wt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Z4(){return new Jt(Wt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ek(s){return new Jt(Wt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Gp(s){return new Jt(Wt.INVALID_ARGUMENT,s)}function kE(){return new Jt(Wt.APP_DELETED,"The Firebase app was deleted.")}function tk(s){return new Jt(Wt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pc(s,e){return new Jt(Wt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Ec(s){throw new Jt(Wt.INTERNAL_ERROR,"Internal error: "+s)}class xs{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=xs.makeFromUrl(e,n)}catch{return new xs(e,"")}if(i.path==="")return i;throw X4(e)}static makeFromUrl(e,n){let i=null;const l="([A-Za-z0-9.\\-_]+)";function u(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+l+d,"i"),g={bucket:1,path:3};function y(ue){ue.path_=decodeURIComponent(ue.path)}const b="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${b}/b/${l}/o${N}`,"i"),H={bucket:1,path:3},B=n===CE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",L=new RegExp(`^https?://${B}/${l}/${M}`,"i"),Q=[{regex:p,indices:g,postModify:u},{regex:C,indices:H,postModify:y},{regex:L,indices:{bucket:1,path:2},postModify:y}];for(let ue=0;ue<Q.length;ue++){const fe=Q[ue],re=fe.regex.exec(e);if(re){const S=re[fe.indices.bucket];let A=re[fe.indices.path];A||(A=""),i=new xs(S,A),fe.postModify(i);break}}if(i==null)throw Q4(e);return i}}class nk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sk(s,e,n){let i=1,l=null,u=null,d=!1,p=0;function g(){return p===2}let y=!1;function b(...M){y||(y=!0,e.apply(null,M))}function w(M){l=setTimeout(()=>{l=null,s(C,g())},M)}function N(){u&&clearTimeout(u)}function C(M,...L){if(y){N();return}if(M){N(),b.call(null,M,...L);return}if(g()||d){N(),b.call(null,M,...L);return}i<64&&(i*=2);let Q;p===1?(p=2,Q=0):Q=(i+Math.random())*1e3,w(Q)}let H=!1;function B(M){H||(H=!0,N(),!y&&(l!==null?(M||(p=2),clearTimeout(l),w(0)):M||(p=1)))}return w(0),u=setTimeout(()=>{d=!0,B(!0)},n),B}function ak(s){s(!1)}function ik(s){return s!==void 0}function rk(s){return typeof s=="object"&&!Array.isArray(s)}function e0(s){return typeof s=="string"||s instanceof String}function x_(s){return t0()&&s instanceof Blob}function t0(){return typeof Blob<"u"}function b_(s,e,n,i){if(i<e)throw Gp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>n)throw Gp(`Invalid value for '${s}'. Expected ${n} or less.`)}function Kd(s,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${s}`}function DE(s){const e=encodeURIComponent;let n="?";for(const i in s)if(s.hasOwnProperty(i)){const l=e(i)+"="+e(s[i]);n=n+l+"&"}return n=n.slice(0,-1),n}var zr;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(zr||(zr={}));function lk(s,e){const n=s>=500&&s<600,l=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||l||u}class ok{constructor(e,n,i,l,u,d,p,g,y,b,w,N=!0,C=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=l,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=b,this.connectionFactory_=w,this.retry=N,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,B)=>{this.resolve_=H,this.reject_=B,this.start_()})}start_(){const e=(i,l)=>{if(l){i(!1,new Fh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===zr.NO_ERROR,g=u.getStatus();if(!p||lk(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===zr.ABORT;i(!1,new Fh(!1,null,b));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new Fh(y,u))})},n=(i,l)=>{const u=this.resolve_,d=this.reject_,p=l.connection;if(l.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());ik(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=Zg();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(l.canceled){const g=this.appDelete_?kE():K4();d(g)}else{const g=Y4();d(g)}};this.canceled_?n(!1,new Fh(!1,null,!0)):this.backoffId_=sk(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ak(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Fh{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function ck(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function uk(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hk(s,e){e&&(s["X-Firebase-GMPID"]=e)}function dk(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function fk(s,e,n,i,l,u,d=!0,p=!1){const g=DE(s.urlParams),y=s.url+g,b=Object.assign({},s.headers);return hk(b,e),ck(b,n),uk(b,u),dk(b,i),new ok(y,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,l,d,p)}function mk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pk(...s){const e=mk();if(e!==void 0){const n=new e;for(let i=0;i<s.length;i++)n.append(s[i]);return n.getBlob()}else{if(t0())return new Blob(s);throw new Jt(Wt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gk(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function yk(s){if(typeof atob>"u")throw ek("base-64");return atob(s)}const ya={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dp{constructor(e,n){this.data=e,this.contentType=n||null}}function xk(s,e){switch(s){case ya.RAW:return new dp(ME(e));case ya.BASE64:case ya.BASE64URL:return new dp(OE(s,e));case ya.DATA_URL:return new dp(vk(e),_k(e))}throw Zg()}function ME(s){const e=[];for(let n=0;n<s.length;n++){let i=s.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=i,d=s.charCodeAt(++n);i=65536|(u&1023)<<10|d&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function bk(s){let e;try{e=decodeURIComponent(s)}catch{throw Pc(ya.DATA_URL,"Malformed data URL.")}return ME(e)}function OE(s,e){switch(s){case ya.BASE64:{const l=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(l||u)throw Pc(s,"Invalid character '"+(l?"-":"_")+"' found: is it base64url encoded?");break}case ya.BASE64URL:{const l=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(l||u)throw Pc(s,"Invalid character '"+(l?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=yk(e)}catch(l){throw l.message.includes("polyfill")?l:Pc(s,"Invalid character found")}const i=new Uint8Array(n.length);for(let l=0;l<n.length;l++)i[l]=n.charCodeAt(l);return i}class VE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Pc(ya.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=wk(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function vk(s){const e=new VE(s);return e.base64?OE(ya.BASE64,e.rest):bk(e.rest)}function _k(s){return new VE(s).contentType}function wk(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class Hi{constructor(e,n){let i=0,l="";x_(e)?(this.data_=e,i=e.size,l=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=l}size(){return this.size_}type(){return this.type_}slice(e,n){if(x_(this.data_)){const i=this.data_,l=gk(i,e,n);return l===null?null:new Hi(l)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Hi(i,!0)}}static getBlob(...e){if(t0()){const n=e.map(i=>i instanceof Hi?i.data_:i);return new Hi(pk.apply(null,n))}else{const n=e.map(d=>e0(d)?xk(ya.RAW,d).data:d.data_);let i=0;n.forEach(d=>{i+=d.byteLength});const l=new Uint8Array(i);let u=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)l[u++]=d[p]}),new Hi(l,!0)}}uploadData(){return this.data_}}function PE(s){let e;try{e=JSON.parse(s)}catch{return null}return rk(e)?e:null}function Ek(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function Tk(s,e){const n=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?n:s+"/"+n}function LE(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function Nk(s,e){return e}class $n{constructor(e,n,i,l){this.server=e,this.local=n||e,this.writable=!!i,this.xform=l||Nk}}let Hh=null;function Sk(s){return!e0(s)||s.length<2?s:LE(s)}function UE(){if(Hh)return Hh;const s=[];s.push(new $n("bucket")),s.push(new $n("generation")),s.push(new $n("metageneration")),s.push(new $n("name","fullPath",!0));function e(u,d){return Sk(d)}const n=new $n("name");n.xform=e,s.push(n);function i(u,d){return d!==void 0?Number(d):d}const l=new $n("size");return l.xform=i,s.push(l),s.push(new $n("timeCreated")),s.push(new $n("updated")),s.push(new $n("md5Hash",null,!0)),s.push(new $n("cacheControl",null,!0)),s.push(new $n("contentDisposition",null,!0)),s.push(new $n("contentEncoding",null,!0)),s.push(new $n("contentLanguage",null,!0)),s.push(new $n("contentType",null,!0)),s.push(new $n("metadata","customMetadata",!0)),Hh=s,Hh}function Ak(s,e){function n(){const i=s.bucket,l=s.fullPath,u=new xs(i,l);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function Rk(s,e,n){const i={};i.type="file";const l=n.length;for(let u=0;u<l;u++){const d=n[u];i[d.local]=d.xform(i,e[d.server])}return Ak(i,s),i}function BE(s,e,n){const i=PE(e);return i===null?null:Rk(s,i,n)}function jk(s,e,n,i){const l=PE(e);if(l===null||!e0(l.downloadTokens))return null;const u=l.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(y=>{const b=s.bucket,w=s.fullPath,N="/b/"+d(b)+"/o/"+d(w),C=Kd(N,n,i),H=DE({alt:"media",token:y});return C+H})[0]}function Ck(s,e){const n={},i=e.length;for(let l=0;l<i;l++){const u=e[l];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}class n0{constructor(e,n,i,l){this.url=e,this.method=n,this.handler=i,this.timeout=l,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function zE(s){if(!s)throw Zg()}function Ik(s,e){function n(i,l){const u=BE(s,l,e);return zE(u!==null),u}return n}function kk(s,e){function n(i,l){const u=BE(s,l,e);return zE(u!==null),jk(u,l,s.host,s._protocol)}return n}function qE(s){function e(n,i){let l;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?l=$4():l=H4():n.getStatus()===402?l=F4(s.bucket):n.getStatus()===403?l=G4(s.path):l=i,l.status=n.getStatus(),l.serverResponse=i.serverResponse,l}return e}function FE(s){const e=qE(s);function n(i,l){let u=e(i,l);return i.getStatus()===404&&(u=q4(s.path)),u.serverResponse=l.serverResponse,u}return n}function Dk(s,e,n){const i=e.fullServerUrl(),l=Kd(i,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new n0(l,u,kk(s,n),d);return p.errorHandler=FE(e),p}function Mk(s,e){const n=e.fullServerUrl(),i=Kd(n,s.host,s._protocol),l="DELETE",u=s.maxOperationRetryTime;function d(g,y){}const p=new n0(i,l,d,u);return p.successCodes=[200,204],p.errorHandler=FE(e),p}function Ok(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Vk(s,e,n){const i=Object.assign({},n);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=Ok(null,e)),i}function Pk(s,e,n,i,l){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let Q="";for(let ue=0;ue<2;ue++)Q=Q+Math.random().toString().slice(2);return Q}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const y=Vk(e,i,l),b=Ck(y,n),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,N=`\r
--`+g+"--",C=Hi.getBlob(w,i,N);if(C===null)throw J4();const H={name:y.fullPath},B=Kd(u,s.host,s._protocol),M="POST",L=s.maxUploadRetryTime,F=new n0(B,M,Ik(s,n),L);return F.urlParams=H,F.headers=d,F.body=C.uploadData(),F.errorHandler=qE(e),F}class Lk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,l,u){if(this.sent_)throw Ec("cannot .send() more than once");if(rr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ec("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ec("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ec("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ec("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Uk extends Lk{initXhr(){this.xhr_.responseType="text"}}function s0(){return new Uk}class Xr{constructor(e,n){this._service=e,n instanceof xs?this._location=n:this._location=xs.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xr(e,n)}get root(){const e=new xs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LE(this._location.path)}get storage(){return this._service}get parent(){const e=Ek(this._location.path);if(e===null)return null;const n=new xs(this._location.bucket,e);return new Xr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tk(e)}}function Bk(s,e,n){s._throwIfRoot("uploadBytes");const i=Pk(s.storage,s._location,UE(),new Hi(e,!0),n);return s.storage.makeRequestWithTokens(i,s0).then(l=>({metadata:l,ref:s}))}function zk(s){s._throwIfRoot("getDownloadURL");const e=Dk(s.storage,s._location,UE());return s.storage.makeRequestWithTokens(e,s0).then(n=>{if(n===null)throw Z4();return n})}function qk(s){s._throwIfRoot("deleteObject");const e=Mk(s.storage,s._location);return s.storage.makeRequestWithTokens(e,s0)}function Fk(s,e){const n=Tk(s._location.path,e),i=new xs(s._location.bucket,n);return new Xr(s.storage,i)}function Hk(s){return/^[A-Za-z]+:\/\//.test(s)}function $k(s,e){return new Xr(s,e)}function HE(s,e){if(s instanceof a0){const n=s;if(n._bucket==null)throw W4();const i=new Xr(n,n._bucket);return e!=null?HE(i,e):i}else return e!==void 0?Fk(s,e):s}function Gk(s,e){if(e&&Hk(e)){if(s instanceof a0)return $k(s,e);throw Gp("To use ref(service, url), the first argument must be a Storage instance.")}else return HE(s,e)}function v_(s,e){const n=e?.[IE];return n==null?null:xs.makeFromBucketSpec(n,s)}function Yk(s,e,n,i={}){s.host=`${e}:${n}`;const l=rr(e);l&&(sg(`https://${s.host}/b`),ag("Storage",!0)),s._isUsingEmulator=!0,s._protocol=l?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:hw(u,s.app.options.projectId))}class a0{constructor(e,n,i,l,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=l,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=CE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=B4,this._maxUploadRetryTime=z4,this._requests=new Set,l!=null?this._bucket=xs.makeFromBucketSpec(l,this._host):this._bucket=v_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xs.makeFromBucketSpec(this._url,e):this._bucket=v_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){b_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){b_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ps(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xr(this,e)}_makeRequest(e,n,i,l,u=!0){if(this._deleted)return new nk(kE());{const d=fk(e,this._appId,i,l,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[i,l]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,l).getPromise()}}const __="@firebase/storage",w_="0.14.0";const $E="storage";function Kk(s,e,n){return s=$t(s),Bk(s,e,n)}function Qk(s){return s=$t(s),zk(s)}function Xk(s){return s=$t(s),qk(s)}function E_(s,e){return s=$t(s),Gk(s,e)}function Wk(s=lg(),e){s=$t(s);const i=Rd(s,$E).getImmediate({identifier:e}),l=ow("storage");return l&&Jk(i,...l),i}function Jk(s,e,n,i={}){Yk(s,e,n,i)}function Zk(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),l=s.getProvider("app-check-internal");return new a0(n,i,l,e,Zr)}function eD(){Fr(new Ji($E,Zk,"PUBLIC").setMultipleInstances(!0)),ba(__,w_,""),ba(__,w_,"esm2020")}eD();const tD={apiKey:"AIzaSyC1qZ9fK-6LFBxVWZsAD4dZq-KVg36A7f8",authDomain:"scheduler-65e51.firebaseapp.com",projectId:"scheduler-65e51",storageBucket:"scheduler-65e51.firebasestorage.app",messagingSenderId:"93993791456",appId:"1:93993791456:web:3a777a2da0dad4b8b74585"},i0=mw(tD),Te=E4(i0),Wr=pC(i0),T_=Wk(i0);const GE=(...s)=>s.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();const nD=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const sD=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase());const N_=s=>{const e=sD(s);return e.charAt(0).toUpperCase()+e.slice(1)};var aD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const iD=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const rD=j.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:u,iconNode:d,...p},g)=>j.createElement("svg",{ref:g,...aD,width:e,height:e,stroke:s,strokeWidth:i?Number(n)*24/Number(e):n,className:GE("lucide",l),...!u&&!iD(p)&&{"aria-hidden":"true"},...p},[...d.map(([y,b])=>j.createElement(y,b)),...Array.isArray(u)?u:[u]]));const Xe=(s,e)=>{const n=j.forwardRef(({className:i,...l},u)=>j.createElement(rD,{ref:u,iconNode:e,className:GE(`lucide-${nD(N_(s))}`,`lucide-${s}`,i),...l}));return n.displayName=N_(s),n};const lD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ja=Xe("arrow-left",lD);const oD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Lc=Xe("arrow-right",oD);const cD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Wl=Xe("bell",cD);const uD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],fp=Xe("calendar-check",uD);const hD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],S_=Xe("calendar-days",hD);const dD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Yt=Xe("calendar",dD);const fD=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],mD=Xe("camera",fD);const pD=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],gD=Xe("chart-column",pD);const yD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Uc=Xe("check",yD);const xD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],YE=Xe("chevron-left",xD);const bD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],KE=Xe("chevron-right",bD);const vD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xa=Xe("circle-check-big",vD);const _D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ui=Xe("circle-x",_D);const wD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ns=Xe("clock",wD);const ED=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],TD=Xe("coffee",ED);const ND=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],SD=Xe("eye",ND);const AD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],RD=Xe("globe",AD);const jD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],CD=Xe("image",jD);const ID=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],Yp=Xe("list-ordered",ID);const kD=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],Ed=Xe("list-plus",kD);const DD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],mp=Xe("loader-circle",DD);const MD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],QE=Xe("lock",MD);const OD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],VD=Xe("log-out",OD);const PD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],A_=Xe("mail",PD);const LD=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],XE=Xe("party-popper",LD);const UD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],WE=Xe("pen-line",UD);const BD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],R_=Xe("phone",BD);const zD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Td=Xe("plus",zD);const qD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],JE=Xe("refresh-cw",qD);const FD=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],Wi=Xe("repeat",FD);const HD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$D=Xe("save",HD);const GD=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],al=Xe("scissors",GD);const YD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],KD=Xe("settings",YD);const QD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],XD=Xe("sparkles",QD);const WD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],j_=Xe("star",WD);const JD=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Za=Xe("tag",JD);const ZD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Wc=Xe("trash-2",ZD);const e6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],t6=Xe("trending-up",e6);const n6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Kp=Xe("triangle-alert",n6);const s6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],C_=Xe("user",s6);const a6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ms=Xe("users",a6);const i6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ho=Xe("x",i6);const r6=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],l6=Xe("zap",r6);function I_({className:s=""}){return c.jsxs(et,{to:"/",className:`flex items-center gap-2.5 ${s}`,children:[c.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:c.jsx(al,{className:"w-[18px] h-[18px] text-white"})}),c.jsxs("span",{className:"text-xl font-extrabold tracking-tight text-slate-900",children:["Book",c.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function o6(){return c.jsxs("div",{className:"min-h-screen bg-white",children:[c.jsx("nav",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-100",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[c.jsx(I_,{}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(et,{to:"/login",className:"px-4 py-2.5 text-sm font-semibold text-slate-600 hover:text-slate-900 transition-colors",children:"Sign In"}),c.jsxs(et,{to:"/register",className:"hidden sm:inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:["Get Started Free",c.jsx(Lc,{className:"w-4 h-4"})]}),c.jsx(et,{to:"/register",className:"sm:hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all",children:"Start Free"})]})]})}),c.jsxs("section",{className:"relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 -z-10",children:[c.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-50 rounded-full blur-3xl opacity-60 -translate-y-1/2 translate-x-1/3"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-violet-50 rounded-full blur-3xl opacity-50 translate-y-1/3 -translate-x-1/4"})]}),c.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 pt-16 sm:pt-24 pb-16 sm:pb-20",children:c.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[c.jsxs("div",{className:"animate-fade-in-up",children:[c.jsxs("div",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 bg-blue-50 border border-blue-100 rounded-full text-sm font-medium text-blue-700 mb-6",children:[c.jsx(XD,{className:"w-3.5 h-3.5"}),"Free for beauty professionals"]}),c.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-[3.5rem] font-extrabold text-slate-900 leading-[1.1] mb-6 tracking-tight",children:["Online booking",c.jsx("br",{}),c.jsx("span",{className:"text-blue-600",children:"made effortless"})]}),c.jsx("p",{className:"text-lg sm:text-xl text-slate-600 leading-relaxed mb-8 max-w-lg",children:"Let clients book 24/7. Manage your team, services, and schedule from one beautiful dashboard. No more phone tag."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-10",children:[c.jsxs(et,{to:"/register",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-base shadow-lg shadow-blue-600/25 hover:shadow-xl hover:shadow-blue-600/30 transition-all hover:-translate-y-0.5",children:["Start for Free",c.jsx(Lc,{className:"w-4 h-4"})]}),c.jsx("a",{href:"#how-it-works",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-base border border-slate-200 transition-all",children:"See How It Works"})]}),c.jsxs("div",{className:"flex items-center gap-5 text-sm text-slate-500",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(xa,{className:"w-4 h-4 text-emerald-500"}),c.jsx("span",{children:"Free to use"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(xa,{className:"w-4 h-4 text-emerald-500"}),c.jsx("span",{children:"No credit card"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(xa,{className:"w-4 h-4 text-emerald-500"}),c.jsx("span",{children:"Setup in 2 min"})]})]})]}),c.jsxs("div",{className:"relative animate-fade-in-up",style:{animationDelay:"150ms"},children:[c.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl shadow-slate-200/60 border border-slate-200/80 overflow-hidden",children:[c.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-slate-50 border-b border-slate-100",children:[c.jsxs("div",{className:"flex gap-1.5",children:[c.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),c.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),c.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"})]}),c.jsx("div",{className:"flex-1 mx-4",children:c.jsx("div",{className:"bg-white border border-slate-200 rounded-lg px-3 py-1.5 text-xs text-slate-400 font-mono",children:"bookflow.app/shop/janes-salon"})})]}),c.jsxs("div",{className:"p-6 space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-sm font-bold",children:"J"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-bold text-slate-900",children:"Jane's Salon"}),c.jsx("div",{className:"text-xs text-slate-500",children:"Book your next appointment"})]})]}),c.jsx("div",{className:"space-y-2.5",children:[{name:"Haircut & Style",price:"$45",time:"45 min",color:"bg-blue-500"},{name:"Color Treatment",price:"$120",time:"2 hours",color:"bg-violet-500"},{name:"Blowout",price:"$35",time:"30 min",color:"bg-emerald-500"}].map(s=>c.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-slate-50 rounded-xl border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/50 transition-all cursor-default",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-2 h-8 ${s.color} rounded-full`}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-slate-800",children:s.name}),c.jsx("div",{className:"text-xs text-slate-500",children:s.time})]})]}),c.jsx("div",{className:"text-sm font-bold text-slate-900",children:s.price})]},s.name))})]})]}),c.jsxs("div",{className:"absolute -bottom-4 -left-4 bg-white rounded-xl shadow-lg shadow-slate-200/60 border border-slate-100 px-4 py-3 flex items-center gap-3 animate-float",children:[c.jsx("div",{className:"w-9 h-9 bg-emerald-100 rounded-full flex items-center justify-center",children:c.jsx(xa,{className:"w-5 h-5 text-emerald-600"})}),c.jsxs("div",{children:[c.jsx("div",{className:"text-xs text-slate-500",children:"Booking confirmed"}),c.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Tomorrow at 2:00 PM"})]})]})]})]})})]}),c.jsx("section",{className:"border-y border-slate-100 bg-slate-50/50",children:c.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-8 sm:py-10",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8 sm:gap-16 text-center",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"500+"}),c.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Businesses trust BookFlow"})]}),c.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"10,000+"}),c.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Appointments booked"})]}),c.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-center gap-1 text-2xl sm:text-3xl font-extrabold text-slate-900",children:["4.9 ",c.jsx(j_,{className:"w-5 h-5 text-amber-400 fill-amber-400"})]}),c.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Average rating"})]})]})})}),c.jsx("section",{className:"py-20 sm:py-28",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[c.jsxs("div",{className:"text-center mb-14",children:[c.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Everything you need to run your bookings"}),c.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Built specifically for beauty professionals, salons, and service businesses. Simple, powerful, and free."})]}),c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 stagger-children",children:[{icon:c.jsx(Yt,{className:"w-6 h-6"}),title:"Smart Scheduling",desc:"Set weekly hours with breaks. Slots auto-generate so your calendar is always up to date.",color:"bg-blue-100 text-blue-600"},{icon:c.jsx(ms,{className:"w-6 h-6"}),title:"Multi-Staff Support",desc:"Add your whole team. Each member gets their own schedule, hours, and bookings.",color:"bg-violet-100 text-violet-600"},{icon:c.jsx(l6,{className:"w-6 h-6"}),title:"Instant Booking",desc:"Clients pick a service, choose a stylist, and book  all in under a minute.",color:"bg-amber-100 text-amber-600"},{icon:c.jsx(RD,{className:"w-6 h-6"}),title:"Your Own Booking Page",desc:"Get a unique link to share anywhere. No app downloads needed for your clients.",color:"bg-emerald-100 text-emerald-600"}].map(s=>c.jsxs("div",{className:"group bg-white rounded-2xl p-7 border border-slate-200/80 hover:border-slate-300 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[c.jsx("div",{className:`w-12 h-12 ${s.color} rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300`,children:s.icon}),c.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:s.title}),c.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:s.desc})]},s.title))})]})}),c.jsx("section",{id:"how-it-works",className:"py-20 sm:py-28 bg-slate-50 border-y border-slate-100",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[c.jsxs("div",{className:"text-center mb-14",children:[c.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Up and running in minutes"}),c.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Three simple steps to start accepting online bookings today."})]}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-8 lg:gap-12 relative",children:[c.jsx("div",{className:"hidden md:block absolute top-14 left-[calc(16.67%+1rem)] right-[calc(16.67%+1rem)] h-px bg-gradient-to-r from-blue-200 via-violet-200 to-emerald-200"}),[{step:"1",title:"Create your account",desc:"Sign up free in 30 seconds. Name your shop and you're in.",color:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/30"},{step:"2",title:"Set up your shop",desc:"Add your services, team, and weekly hours. BookFlow handles the rest.",color:"from-violet-500 to-violet-600",shadow:"shadow-violet-500/30"},{step:"3",title:"Share your link",desc:"Send your booking page to clients. They book, you get notified.",color:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/30"}].map(s=>c.jsxs("div",{className:"relative text-center",children:[c.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${s.color} rounded-2xl flex items-center justify-center mx-auto mb-6 text-white text-xl font-extrabold shadow-lg ${s.shadow} relative z-10`,children:s.step}),c.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:s.title}),c.jsx("p",{className:"text-slate-600 leading-relaxed max-w-xs mx-auto",children:s.desc})]},s.step))]})]})}),c.jsx("section",{className:"py-20 sm:py-28",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[c.jsxs("div",{className:"text-center mb-14",children:[c.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Loved by professionals"}),c.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"See why salons and stylists are switching to BookFlow."})]}),c.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{quote:"BookFlow replaced our paper appointment book. Clients love being able to book online anytime.",name:"Maria Santos",role:"Salon Owner",initials:"MS",color:"bg-blue-100 text-blue-700"},{quote:"Setting up was incredibly easy. I had my booking page live and shared with clients in under 10 minutes.",name:"David Chen",role:"Barber",initials:"DC",color:"bg-violet-100 text-violet-700"},{quote:"The multi-staff feature is perfect. Each stylist manages their own schedule and clients can pick who they want.",name:"Lisa Park",role:"Studio Manager",initials:"LP",color:"bg-emerald-100 text-emerald-700"}].map(s=>c.jsxs("div",{className:"bg-white rounded-2xl p-7 border border-slate-200/80 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[c.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(5)].map((e,n)=>c.jsx(j_,{className:"w-4 h-4 text-amber-400 fill-amber-400"},n))}),c.jsxs("p",{className:"text-slate-700 leading-relaxed mb-6",children:['"',s.quote,'"']}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:`w-10 h-10 ${s.color} rounded-full flex items-center justify-center text-sm font-bold`,children:s.initials}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s.name}),c.jsx("div",{className:"text-xs text-slate-500",children:s.role})]})]})]},s.name))})]})}),c.jsxs("section",{className:"py-20 sm:py-28 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 relative overflow-hidden",children:[c.jsxs("div",{className:"absolute inset-0 -z-0",children:[c.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),c.jsx("div",{className:"absolute bottom-0 right-1/4 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl"})]}),c.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto px-5 sm:px-8 text-center",children:[c.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold text-white mb-6 leading-tight",children:"Ready to streamline your bookings?"}),c.jsx("p",{className:"text-lg text-slate-400 mb-10 max-w-xl mx-auto",children:"Join hundreds of professionals who have ditched the old appointment book. Set up in minutes, free forever."}),c.jsxs(et,{to:"/register",className:"inline-flex items-center gap-2 px-8 py-4 bg-white hover:bg-slate-50 text-slate-900 rounded-xl font-bold text-lg transition-all hover:shadow-xl hover:shadow-white/10 hover:-translate-y-0.5",children:["Create Your Free Account",c.jsx(Lc,{className:"w-5 h-5"})]})]})]}),c.jsx("footer",{className:"bg-white border-t border-slate-100",children:c.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-10",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[c.jsx(I_,{}),c.jsxs("div",{className:"flex items-center gap-6 text-sm text-slate-500",children:[c.jsx(et,{to:"/register",className:"hover:text-slate-900 transition-colors",children:"Sign Up"}),c.jsx("span",{className:"text-slate-200",children:""}),c.jsx(et,{to:"/login",className:"hover:text-slate-900 transition-colors",children:"Sign In"}),c.jsx("span",{className:"text-slate-200",children:""}),c.jsx("a",{href:"#how-it-works",className:"hover:text-slate-900 transition-colors",children:"How It Works"})]}),c.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," BookFlow. All rights reserved."]})]})})})]})}function c6(s){return s.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function u6(){const s=po(),[e,n]=j.useState(""),[i,l]=j.useState(""),[u,d]=j.useState(""),[p,g]=j.useState(""),[y,b]=j.useState(!1),w=c6(e),N=async C=>{if(C.preventDefault(),g(""),!w){g("Please enter a valid shop name");return}if(u.length<6){g("Password must be at least 6 characters");return}b(!0);try{const H=Ds(mt(Te,"shops"),ys("slug","==",w));if(!(await Ms(H)).empty){g("A shop with that name already exists. Please choose a different name."),b(!1);return}const L=(await ej(Wr,i,u)).user;await Qr(mt(Te,"shops"),{name:e.trim(),slug:w,ownerUid:L.uid,ownerEmail:i,createdAt:Qg()}),s(`/shop/${w}/dashboard`)}catch(H){switch(H.code){case"auth/email-already-in-use":g("An account with this email already exists");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/weak-password":g("Password must be at least 6 characters");break;default:g("Registration failed. Please try again.")}}finally{b(!1)}};return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:c.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[c.jsx("div",{className:"text-center mb-8",children:c.jsxs(et,{to:"/",className:"inline-flex items-center gap-2.5",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:c.jsx(al,{className:"w-5 h-5 text-white"})}),c.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",c.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),c.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Create your shop"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Set up your booking page in seconds  it's free"})]}),c.jsxs("form",{onSubmit:N,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Shop Name"}),c.jsx("input",{type:"text",value:e,onChange:C=>{n(C.target.value),g("")},placeholder:"Jane's Salon",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),w&&c.jsxs("p",{className:"mt-1.5 text-xs text-slate-400",children:["Your page: ",c.jsxs("span",{className:"font-mono text-blue-600 font-medium",children:["bookflow.app/shop/",w]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),c.jsx("input",{type:"email",value:i,onChange:C=>{l(C.target.value),g("")},placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),c.jsx("input",{type:"password",value:u,onChange:C=>{d(C.target.value),g("")},placeholder:"At least 6 characters",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&c.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[c.jsx("span",{children:""})," ",p]})]}),c.jsx("button",{type:"submit",disabled:y,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:y?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Creating your shop"]}):c.jsxs(c.Fragment,{children:["Create Shop",c.jsx(Lc,{className:"w-4 h-4"})]})})]}),c.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:c.jsxs("p",{className:"text-sm text-slate-500",children:["Already have an account?"," ",c.jsx(et,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Sign in"})]})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs(et,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[c.jsx(Ja,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function h6({user:s}){const e=po(),[n,i]=j.useState(""),[l,u]=j.useState(""),[d,p]=j.useState(""),[g,y]=j.useState(!1);j.useState(()=>{if(!s)return;(async()=>{const N=Ds(mt(Te,"shops"),ys("ownerUid","==",s.uid)),C=await Ms(N);if(!C.empty){const H=C.docs[0].data();e(`/shop/${H.slug}/dashboard`,{replace:!0})}})()},[s,e]);const b=async w=>{w.preventDefault(),p(""),y(!0);try{const C=(await zw(Wr,n,l)).user,H=Ds(mt(Te,"shops"),ys("ownerUid","==",C.uid)),B=await Ms(H);if(B.empty){p("No shop found for this account. Need to create one?"),await Wr.signOut(),y(!1);return}const M=B.docs[0].data();e(`/shop/${M.slug}/dashboard`,{replace:!0})}catch(N){switch(N.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":p("Invalid email or password");break;case"auth/invalid-email":p("Please enter a valid email address");break;case"auth/too-many-requests":p("Too many failed attempts. Please try again later.");break;default:p("Login failed. Please try again.")}u("")}finally{y(!1)}};return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:c.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[c.jsx("div",{className:"text-center mb-8",children:c.jsxs(et,{to:"/",className:"inline-flex items-center gap-2.5",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:c.jsx(al,{className:"w-5 h-5 text-white"})}),c.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",c.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),c.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),c.jsx("input",{type:"email",value:n,onChange:w=>{i(w.target.value),p("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),c.jsx("input",{type:"password",value:l,onChange:w=>{u(w.target.value),p("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${d?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),d&&c.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[c.jsx("span",{children:""})," ",d]})]}),c.jsx("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:g?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):c.jsxs(c.Fragment,{children:["Sign In",c.jsx(Lc,{className:"w-4 h-4"})]})})]}),c.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:c.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",c.jsx(et,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs(et,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[c.jsx(Ja,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function ZE({availableDates:s,selectedDate:e,onSelectDate:n}){const[i,l]=j.useState(new Date),u=L=>{const F=L.getFullYear(),Q=L.getMonth(),ue=new Date(F,Q,1),re=new Date(F,Q+1,0).getDate(),S=ue.getDay();return{daysInMonth:re,startingDayOfWeek:S,year:F,month:Q}},{daysInMonth:d,startingDayOfWeek:p,year:g,month:y}=u(i),b=()=>{l(new Date(i.getFullYear(),i.getMonth()-1))},w=()=>{l(new Date(i.getFullYear(),i.getMonth()+1))},N=L=>{const F=`${g}-${String(y+1).padStart(2,"0")}-${String(L).padStart(2,"0")}`;return s.includes(F)},C=L=>`${g}-${String(y+1).padStart(2,"0")}-${String(L).padStart(2,"0")}`===e,H=L=>{if(N(L)){const F=`${g}-${String(y+1).padStart(2,"0")}-${String(L).padStart(2,"0")}`;n(F)}},B=["January","February","March","April","May","June","July","August","September","October","November","December"],M=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return c.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5 sm:p-6 shadow-sm",children:[c.jsxs("div",{className:"flex justify-between items-center mb-5",children:[c.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:c.jsx(YE,{className:"w-5 h-5 text-slate-600"})}),c.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[B[y]," ",g]}),c.jsx("button",{onClick:w,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:c.jsx(KE,{className:"w-5 h-5 text-slate-600"})})]}),c.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:M.map(L=>c.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:L},L))}),c.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:p}).map((L,F)=>c.jsx("div",{},`empty-${F}`)),Array.from({length:d}).map((L,F)=>{const Q=F+1,ue=N(Q),fe=C(Q),re=new Date,S=re.getDate()===Q&&re.getMonth()===y&&re.getFullYear()===g;return c.jsxs("button",{onClick:()=>H(Q),disabled:!ue,className:`
                relative p-2.5 sm:p-3 text-center rounded-lg text-sm font-semibold transition-all duration-200
                ${fe?"bg-blue-600 text-white shadow-md shadow-blue-600/30":ue?"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 hover:border-emerald-300 cursor-pointer":S?"text-slate-900 font-bold":"text-slate-300 cursor-not-allowed"}
              `,children:[Q,S&&!fe&&c.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]},Q)})]}),c.jsxs("div",{className:"mt-4 flex gap-5 text-xs text-slate-500",children:[c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-3 h-3 bg-emerald-50 border border-emerald-200 rounded"}),c.jsx("span",{children:"Available"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),c.jsx("span",{children:"Selected"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),c.jsx("span",{children:"Today"})]})]})]})}const d6=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"},{key:"saturday",label:"Sat"},{key:"sunday",label:"Sun"}],k_=[{key:"morning",label:"Morning (9AM12PM)",start:"09:00",end:"12:00"},{key:"afternoon",label:"Afternoon (12PM5PM)",start:"12:00",end:"17:00"},{key:"evening",label:"Evening (5PM9PM)",start:"17:00",end:"21:00"},{key:"any",label:"Any time",start:"00:00",end:"23:59"}];function f6(){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="WL";for(let n=0;n<4;n++)e+=s.charAt(Math.floor(Math.random()*s.length));return e}function D_({shopId:s,slug:e,selectedService:n,selectedStaff:i,staffMembers:l,preferredDate:u,onSuccess:d,onCancel:p}){const[g,y]=j.useState({name:"",email:"",phone:""}),[b,w]=j.useState([]),[N,C]=j.useState("any"),[H,B]=j.useState(!1),[M,L]=j.useState(!1),[F,Q]=j.useState(""),ue=re=>{w(S=>S.includes(re)?S.filter(A=>A!==re):[...S,re])},fe=async re=>{re.preventDefault(),B(!0);try{const S=f6(),A=k_.find(U=>U.key===N),R=i&&i!=="any"?i.id:"any",O=i&&i!=="any"?i.name:"Any Available",k={clientName:g.name,clientEmail:g.email,clientPhone:g.phone,serviceId:n?.id||null,serviceName:n?.name||"Any Service",staffId:R,staffName:O,preferredDate:u||null,preferredDays:b.length>0?b:null,preferredTimeRange:A?{start:A.start,end:A.end}:null,status:"waiting",refCode:S,createdAt:new Date().toISOString(),notifiedAt:null,notifiedSlot:null};await Qr(mt(Te,"shops",s,"waitlist"),k),Q(S),L(!0),d&&d(S)}catch(S){console.error("Waitlist error:",S)}finally{B(!1)}};return M?c.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg shadow-blue-100/50 p-8 text-center animate-scale-in",children:[c.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(xa,{className:"w-8 h-8 text-blue-600"})}),c.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"You're on the Waitlist!"}),c.jsxs("p",{className:"text-slate-600 mb-4",children:["We'll notify you when a slot opens up",n?` for ${n.name}`:"","."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your waitlist reference"}),c.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:F})]}),c.jsxs("a",{href:`#/shop/${e}/waitlist/${F}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[c.jsx(ns,{className:"w-4 h-4"}),"Check Waitlist Status"]}),c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to check your position and get notified"})]}):c.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg p-6 animate-fade-in",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:c.jsx(Ed,{className:"w-5 h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Join the Waitlist"}),c.jsx("p",{className:"text-sm text-slate-500",children:"We'll notify you when a slot opens up"})]})]}),c.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),c.jsx("input",{type:"text",value:g.name,onChange:re=>y({...g,name:re.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),c.jsx("input",{type:"email",value:g.email,onChange:re=>y({...g,email:re.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),c.jsx("input",{type:"tel",value:g.phone,onChange:re=>y({...g,phone:re.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Preferred Days ",c.jsx("span",{className:"text-slate-400 font-normal",children:"(optional)"})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:d6.map(re=>c.jsx("button",{type:"button",onClick:()=>ue(re.key),className:`px-3.5 py-2 rounded-lg text-sm font-semibold transition-all border ${b.includes(re.key)?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:re.label},re.key))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Preferred Time"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:k_.map(re=>c.jsx("button",{type:"button",onClick:()=>C(re.key),className:`px-3.5 py-2.5 rounded-lg text-sm font-medium transition-all border text-left ${N===re.key?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:re.label},re.key))})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"submit",disabled:H,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:H?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Joining"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ed,{className:"w-4 h-4"}),"Join Waitlist"]})}),p&&c.jsx("button",{type:"button",onClick:p,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})}const m6=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function Jl(s){const[e,n]=s.split(":").map(Number);return e*60+n}function M_(s){const e=Math.floor(s/60),n=s%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function p6(s){const e=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),i=String(s.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function g6(s,e,n,i,l,u){if(!s)return[];const p=new Date(e+"T12:00:00").getDay(),g=m6[p],y=s[g];if(!y||!y.enabled)return[];const b=Jl(y.start),w=Jl(y.end),N=y.break?Jl(y.break.start):null,C=y.break?Jl(y.break.end):null,H=n+i,B=[];let M=b;for(;M+n<=w;){const L=M+n;if(N!==null&&C!==null&&M<C&&L>N){M=C;continue}B.push({id:`wh-${l}-${e}-${M_(M)}`,date:e,time:M_(M),duration:n,available:!0,staffId:l,staffName:u,generated:!0}),M+=H}return B}function eT(s,e,n=0,i=4){const l=[],u=new Date;u.setHours(0,0,0,0);const d=new Date(u);d.setDate(d.getDate()+i*7);for(const p of s){if(!p.weeklyHours)continue;const g=new Date(u);for(;g<d;){const y=p6(g),b=g6(p.weeklyHours,y,e,n,p.id,p.name);l.push(...b),g.setDate(g.getDate()+1)}}return l}function tT(s,e,n=0){const i=e.filter(l=>!l.status||l.status==="pending"||l.status==="confirmed");return s.filter(l=>{const u=Jl(l.time),d=u+l.duration;return!i.some(g=>{if(l.staffId&&g.staffId&&g.staffId!==l.staffId||g.date!==l.date)return!1;const y=Jl(g.time),b=g.serviceDuration||g.duration||l.duration,w=y+b;return!(d+n<=y||w+n<=u)})})}function nT(s,e){const n=new Set(e.map(l=>`${l.staffId||""}-${l.date}-${l.time}`)),i=s.filter(l=>{const u=`${l.staffId||""}-${l.date}-${l.time}`;return!n.has(u)});return[...e,...i]}function Cc({name:s,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const i=(s||"").split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2);return c.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:i||"?"})}function y6(){return c.jsxs(et,{to:"/",className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:c.jsx(al,{className:"w-3.5 h-3.5 text-white"})}),c.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",c.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function x6({member:s,onClose:e}){const[n,i]=j.useState(null),l=s.portfolio||[];return j.useEffect(()=>{const u=d=>{d.key==="Escape"&&(n!==null?i(null):e())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[n,e]),c.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[c.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),c.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-scale-in",children:[c.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 bg-slate-100 hover:bg-slate-200 rounded-full flex items-center justify-center text-slate-600 transition-all z-10",children:c.jsx(X,{className:"w-4 h-4"})}),c.jsxs("div",{className:"p-6 pb-4 border-b border-slate-100",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Cc,{name:s.name,className:"w-14 h-14",bgClass:"bg-violet-100 text-violet-700"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s.name}),s.role&&c.jsx("p",{className:"text-sm text-violet-600 font-medium",children:s.role})]})]}),s.bio&&c.jsx("p",{className:"mt-3 text-sm text-slate-600 leading-relaxed",children:s.bio})]}),c.jsx("div",{className:"p-6",children:l.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:c.jsx(Image,{className:"w-6 h-6 text-slate-400"})}),c.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet"})]}):c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:l.map((u,d)=>c.jsxs("button",{onClick:()=>i(d),className:"group relative aspect-square rounded-xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5",children:[c.jsx("img",{src:u.url,alt:u.caption||"Portfolio",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),u.caption&&c.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-2.5 pt-6",children:c.jsx("p",{className:"text-xs text-white font-medium truncate",children:u.caption})})]},d))})})]}),n!==null&&l[n]&&c.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90",children:[c.jsx("button",{onClick:()=>i(null),className:"absolute top-4 right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:c.jsx(X,{className:"w-5 h-5"})}),n>0&&c.jsx("button",{onClick:()=>i(n-1),className:"absolute left-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:c.jsx(ChevronLeft,{className:"w-5 h-5"})}),n<l.length-1&&c.jsx("button",{onClick:()=>i(n+1),className:"absolute right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:c.jsx(ChevronRight,{className:"w-5 h-5"})}),c.jsxs("div",{className:"max-w-4xl max-h-[85vh] flex flex-col items-center",children:[c.jsx("img",{src:l[n].url,alt:l[n].caption||"Portfolio",className:"max-w-full max-h-[75vh] object-contain rounded-lg"}),l[n].caption&&c.jsx("p",{className:"mt-3 text-sm text-white/90 font-medium text-center px-4",children:l[n].caption}),c.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[n+1," / ",l.length]})]})]})]})}function b6(){const{slug:s}=Zc(),[e,n]=j.useState(null),[i,l]=j.useState(null),[u,d]=j.useState(!0),[p,g]=j.useState(!1),[y,b]=j.useState([]),[w,N]=j.useState([]),[C,H]=j.useState(null),[B,M]=j.useState(null),[L,F]=j.useState([]),[Q,ue]=j.useState([]),[fe,re]=j.useState(!1),[S,A]=j.useState(null),[R,O]=j.useState(null),[k,U]=j.useState(""),[I,Me]=j.useState(!1),[ke,G]=j.useState({name:"",email:"",phone:""}),[he,we]=j.useState(""),[Ge,He]=j.useState(!1),[V,ne]=j.useState(null),[de,ge]=j.useState(!1),[Se,Ve]=j.useState("biweekly"),[se,De]=j.useState(null);j.useEffect(()=>{(async()=>{d(!0),g(!1);try{const me=Ds(mt(Te,"shops"),ys("slug","==",s)),Be=await Ms(me);if(Be.empty)g(!0);else{const Pe=Be.docs[0];n(Pe.data()),l(Pe.id)}}catch(me){console.error("Error looking up shop:",me),g(!0)}finally{d(!1)}})()},[s]),j.useEffect(()=>{if(!i)return;const ce=ts(mt(Te,"shops",i,"services"),gt=>{const Le=gt.docs.map(je=>({id:je.id,...je.data()})).filter(je=>je.active!==!1).sort((je,At)=>(je.name||"").localeCompare(At.name||""));b(Le)}),me=ts(mt(Te,"shops",i,"availability"),gt=>{const Le=new Date,je=gt.docs.map(At=>({id:At.id,...At.data()})).filter(At=>new Date(`${At.date}T${At.time}`)>Le);F(je)}),Be=ts(mt(Te,"shops",i,"bookings"),gt=>{const Le=gt.docs.map(je=>({id:je.id,...je.data()}));ue(Le)}),Pe=ts(mt(Te,"shops",i,"staff"),gt=>{const Le=gt.docs.map(je=>({id:je.id,...je.data()})).filter(je=>je.active!==!1).sort((je,At)=>(je.name||"").localeCompare(At.name||""));N(Le)});return()=>{ce(),me(),Be(),Pe()}},[i]),j.useEffect(()=>{w.length===1?M(w[0]):w.length===0&&M(null)},[w]);const Ae=y.length>0;w.length>0;const Fe=w.length>1,tt=e?.bufferMinutes||0,Gt=j.useMemo(()=>{const ce=new Date;let me=L.filter(Le=>Le.available);if(C&&(me=me.filter(Le=>Le.duration>=C.duration)),B&&B!=="any"&&(me=me.filter(Le=>Le.staffId===B.id||!Le.staffId)),!C)return me;const Be=B&&B!=="any"?w.filter(Le=>Le.id===B.id):w,Pe=eT(Be,C.duration,tt,4).filter(Le=>new Date(`${Le.date}T${Le.time}`)>ce),gt=nT(Pe,me);return tT(gt,Q,tt)},[L,C,B,w,Q,tt]),It=(ce,me,Be=3)=>{const Pe=[],gt=new Date(ce+"T12:00:00"),Le=new Date(gt);Le.setMonth(Le.getMonth()+Be);let je=new Date(gt);for(me==="weekly"?je.setDate(je.getDate()+7):me==="biweekly"?je.setDate(je.getDate()+14):me==="fourweekly"?je.setDate(je.getDate()+28):me==="monthly"&&je.setMonth(je.getMonth()+1);je<=Le;){const At=je.getFullYear(),vn=String(je.getMonth()+1).padStart(2,"0"),wt=String(je.getDate()).padStart(2,"0");Pe.push(`${At}-${vn}-${wt}`),me==="weekly"?je.setDate(je.getDate()+7):me==="biweekly"?je.setDate(je.getDate()+14):me==="fourweekly"?je.setDate(je.getDate()+28):me==="monthly"&&je.setMonth(je.getMonth()+1)}return Pe},pt=j.useMemo(()=>{if(!de||!S)return null;const ce=It(S.date,Se),me=C?C.duration:S.duration||60,Be=B&&B!=="any"?B.id:S.staffId,Pe=S.time,gt=Q.filter(Mn=>!Mn.status||Mn.status==="pending"||Mn.status==="confirmed"),Le=Mn=>{const[as,On]=Mn.split(":").map(Number);return as*60+On},je=Le(Pe),At=je+me;let vn=[],wt=[];const yn=new Set;ce.forEach(Mn=>{gt.some(On=>{if(Be&&On.staffId&&On.staffId!==Be||On.date!==Mn)return!1;const il=Le(On.time),Ra=On.serviceDuration||On.duration||me,hr=il+Ra,ii=tt||0;return!(At+ii<=il||hr+ii<=je)})||yn.has(Mn)?wt.push(Mn):(vn.push(Mn),yn.add(Mn))});const Dn=ce.length>0?ce[ce.length-1]:S.date,qn=new Date(Dn+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),_o={weekly:"week",biweekly:"2 weeks",fourweekly:"4 weeks",monthly:"month"};return{available:vn,conflicts:wt,total:vn.length+1,skipped:wt.length,endDate:qn,intervalLabel:_o[Se]||Se}},[de,Se,S,C,B,Q,tt]),gn=ce=>{H(ce),w.length>1&&M(null),O(null),A(null),re(!1),U("")},sn=ce=>{M(ce),O(null),A(null),re(!1),U("")},ss=()=>{H(null),w.length>1&&M(null),O(null),A(null),re(!1)},zn=()=>{O(null),A(null),re(!1),Fe?M(null):Ae&&H(null)},vt=ce=>{A(ce),re(!0),U("")},be=()=>{const ce="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let me="BK";for(let Be=0;Be<4;Be++)me+=ce.charAt(Math.floor(Math.random()*ce.length));return me},Re=async ce=>{ce.preventDefault(),Me(!0),De(null);try{const me=be(),Be=e?.requireApproval?"pending":"confirmed",Pe=de?`rg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`:null,gt=de&&pt?pt.endDate:null,Le={slotId:S.id,date:S.date,time:S.time,duration:C?C.duration:S.duration,clientName:ke.name,clientEmail:ke.email,clientPhone:ke.phone,bookedAt:new Date().toISOString(),status:Be,refCode:me};C&&(Le.serviceId=C.id,Le.serviceName=C.name,Le.servicePrice=C.price,Le.serviceDuration=C.duration),B&&B!=="any"?(Le.staffId=B.id,Le.staffName=B.name):S.staffId&&(Le.staffId=S.staffId,Le.staffName=S.staffName||""),de&&Pe&&(Le.recurring=!0,Le.recurringInterval=Se,Le.recurringGroupId=Pe,Le.recurringUntil=gt),await Qr(mt(Te,"shops",i,"bookings"),Le),S.generated||await Nt(bt(Te,"shops",i,"availability",S.id),{available:!1});let je=1,At=0;if(de&&pt){const vn=pt.available;At=pt.skipped;for(const wt of vn){const yn=be(),Dn={...Le,date:wt,slotId:`recurring-${Pe}-${wt}`,refCode:yn,bookedAt:new Date().toISOString()};await Qr(mt(Te,"shops",i,"bookings"),Dn),je++}De({created:je,skipped:At})}G({name:"",email:"",phone:""}),re(!1),A(null),H(null),O(null),M(w.length===1?w[0]:null),ge(!1),we(me),e?.requireApproval?U(" Your booking request has been submitted! The shop will review and confirm it shortly."):U(" Booking confirmed! You will receive a confirmation email shortly.")}catch(me){console.error("Booking error:",me),U(" Something went wrong. Please try again.")}finally{Me(!1)}},$e=ce=>new Date(ce+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),Pt=ce=>{const[me,Be]=ce.split(":"),Pe=parseInt(me),gt=Pe>=12?"PM":"AM";return`${Pe%12||12}:${Be} ${gt}`},at=ce=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(ce),ut=ce=>{if(ce<60)return`${ce} min`;const me=Math.floor(ce/60),Be=ce%60;return Be?`${me}h ${Be}m`:`${me} hour${me>1?"s":""}`};if(u)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[c.jsx("div",{className:"spinner"}),c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking page"})]})});if(p)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:c.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[c.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:c.jsx(Yt,{className:"w-8 h-8 text-slate-400"})}),c.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),c.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,c.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),c.jsxs(et,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[c.jsx(Ja,{className:"w-4 h-4"}),"Go Home"]})]})});const z=[...new Set(Gt.map(ce=>ce.date))].sort(),ee=R?Gt.filter(ce=>ce.date===R):Gt,xe=fe?"form":Ae&&!C?"services":Fe&&!B?"staff":"calendar",Oe=[];Ae&&Oe.push({key:"services",label:"Service"}),Fe&&Oe.push({key:"staff",label:"Stylist"}),Oe.push({key:"calendar",label:"Date & Time"}),Oe.push({key:"form",label:"Confirm"});const _t=Oe.findIndex(ce=>ce.key===xe),ft=["border-l-blue-500","border-l-violet-500","border-l-emerald-500","border-l-amber-500","border-l-rose-500","border-l-cyan-500","border-l-indigo-500","border-l-pink-500","border-l-teal-500"];return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[c.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e.name||"")[0]?.toUpperCase()||"S"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e.name}),c.jsx("p",{className:"text-xs text-slate-500",children:"Book your appointment"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs(et,{to:`/shop/${s}/login`,className:"flex items-center gap-1.5 px-3.5 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[c.jsx(QE,{className:"w-3.5 h-3.5"}),c.jsx("span",{className:"hidden sm:inline",children:"Owner"})]}),c.jsx(y6,{})]})]})}),c.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[Oe.length>1&&c.jsx("div",{className:"flex items-center justify-center gap-0 mb-8 animate-fade-in",children:Oe.map((ce,me)=>{const Be=ce.key===xe,Pe=me<_t;return c.jsxs(j.Fragment,{children:[me>0&&c.jsx("div",{className:`w-8 sm:w-14 h-0.5 transition-colors duration-300 ${me<=_t?"bg-blue-500":"bg-slate-200"}`}),c.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[c.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 ${Be?"bg-blue-600 text-white shadow-md shadow-blue-600/30 scale-110":Pe?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:Pe?c.jsx(xa,{className:"w-5 h-5"}):me+1}),c.jsx("span",{className:`text-xs font-medium hidden sm:block transition-colors ${Be?"text-blue-700":Pe?"text-blue-600":"text-slate-400"}`,children:ce.label})]})]},ce.key)})}),k&&c.jsx("div",{className:"mb-8 animate-scale-in",children:k.startsWith("")?c.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(XE,{className:"w-8 h-8 text-emerald-600"})}),c.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Confirmed!"}),c.jsx("p",{className:"text-slate-600 mb-4",children:"You're all set. We'll send a confirmation to your email."}),se&&c.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[c.jsx(Wi,{className:"w-4 h-4"}),"Recurring Series Created"]}),c.jsxs("p",{className:"text-sm text-slate-700",children:[se.created," appointment",se.created!==1?"s":""," booked"]}),se.skipped>0&&c.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",se.skipped," date",se.skipped!==1?"s":""," skipped due to conflicts"]})]}),he&&c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),c.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:he})]}),he&&c.jsxs("div",{className:"mb-4",children:[c.jsxs(et,{to:`/shop/${s}/booking/${he}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[c.jsx(fp,{className:"w-4 h-4"}),"Manage Your Booking"]}),c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),c.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-lg text-sm text-emerald-700 font-medium",children:[c.jsx(fp,{className:"w-4 h-4"}),"Add to your calendar to remember"]})]}):k.startsWith("")?c.jsxs("div",{className:"bg-white rounded-2xl border border-amber-200 shadow-lg shadow-amber-100/50 p-8 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(ns,{className:"w-8 h-8 text-amber-600"})}),c.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Request Submitted!"}),c.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking request has been submitted! The shop will review and confirm it shortly."}),se&&c.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[c.jsx(Wi,{className:"w-4 h-4"}),"Recurring Series Created"]}),c.jsxs("p",{className:"text-sm text-slate-700",children:[se.created," appointment",se.created!==1?"s":""," submitted"]}),se.skipped>0&&c.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",se.skipped," date",se.skipped!==1?"s":""," skipped due to conflicts"]})]}),he&&c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),c.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:he})]}),he&&c.jsxs("div",{className:"mb-4",children:[c.jsxs(et,{to:`/shop/${s}/booking/${he}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[c.jsx(fp,{className:"w-4 h-4"}),"Manage Your Booking"]}),c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),c.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700 font-medium",children:[c.jsx(ns,{className:"w-4 h-4"}),"You'll be notified once it's confirmed"]})]}):c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Something went wrong. Please try again."})]})}),xe==="services"&&c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a Service"}),c.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select the service you'd like to book"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 stagger-children",children:y.map((ce,me)=>c.jsxs("button",{onClick:()=>gn(ce),className:`group text-left bg-white border-l-4 ${ft[me%ft.length]} border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5`,children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors pr-2",children:ce.name}),c.jsx("span",{className:"text-xl font-extrabold text-blue-600 whitespace-nowrap",children:at(ce.price)})]}),ce.description&&c.jsx("p",{className:"text-sm text-slate-500 mb-3 line-clamp-2 leading-relaxed",children:ce.description}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-400",children:[c.jsx(ns,{className:"w-3.5 h-3.5"}),c.jsx("span",{children:ut(ce.duration)})]}),c.jsx("span",{className:"text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]})]},ce.id))})]}),xe==="staff"&&c.jsxs("div",{className:"animate-fade-in",children:[Ae&&C&&c.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[c.jsxs("button",{onClick:ss,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[c.jsx(Ja,{className:"w-3.5 h-3.5"}),"Back"]}),c.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[c.jsx(Za,{className:"w-3.5 h-3.5 text-blue-500"}),c.jsx("span",{className:"font-semibold text-slate-800",children:C.name}),c.jsx("span",{className:"text-blue-600 font-bold",children:at(C.price)})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose Your Stylist"}),c.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select your preferred professional"})]}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 stagger-children",children:[c.jsxs("button",{onClick:()=>sn("any"),className:"group text-left bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[c.jsxs("div",{className:"flex items-center gap-3.5 mb-3",children:[c.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(ms,{className:"w-5 h-5 text-slate-500"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:"Any Available"}),c.jsx("p",{className:"text-xs text-slate-500",children:"First available professional"})]})]}),c.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),w.map(ce=>{const me=ce.portfolio||[];return c.jsxs("div",{className:"group bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[c.jsxs("button",{onClick:()=>sn(ce),className:"w-full text-left",children:[c.jsxs("div",{className:"flex items-center gap-3.5 mb-2",children:[c.jsx(Cc,{name:ce.name}),c.jsxs("div",{className:"min-w-0",children:[c.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:ce.name}),ce.role&&c.jsx("p",{className:"text-xs text-slate-500",children:ce.role})]})]}),ce.bio&&c.jsx("p",{className:"text-xs text-slate-500 leading-relaxed mb-2 line-clamp-2",children:ce.bio}),me.length>0&&c.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[me.slice(0,3).map((Be,Pe)=>c.jsx("img",{src:Be.url,alt:Be.caption||"Work",className:"w-10 h-10 rounded-md object-cover border border-slate-200"},Pe)),me.length>3&&c.jsxs("span",{className:"w-10 h-10 rounded-md bg-slate-100 border border-slate-200 flex items-center justify-center text-xs text-slate-500 font-semibold",children:["+",me.length-3]})]}),c.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),me.length>0&&c.jsxs("button",{onClick:Be=>{Be.stopPropagation(),ne(ce)},className:"mt-2 w-full flex items-center justify-center gap-1.5 py-1.5 text-xs font-semibold text-violet-600 hover:text-violet-700 hover:bg-violet-50 rounded-lg transition-all",children:[c.jsx(Image,{className:"w-3.5 h-3.5"}),"View Portfolio (",me.length,")"]})]},ce.id)})]})]}),xe==="calendar"&&c.jsxs("div",{className:"animate-fade-in",children:[(Ae||Fe)&&c.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[c.jsxs("button",{onClick:zn,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[c.jsx(Ja,{className:"w-3.5 h-3.5"}),"Back"]}),C&&c.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[c.jsx(Za,{className:"w-3.5 h-3.5 text-blue-500"}),c.jsx("span",{className:"font-semibold text-slate-800",children:C.name}),c.jsx("span",{className:"text-blue-600 font-bold",children:at(C.price)}),c.jsxs("span",{className:"text-slate-400",children:[" ",ut(C.duration)]})]}),B&&B!=="any"&&c.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[c.jsx(Cc,{name:B.name,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),c.jsx("span",{className:"font-semibold text-slate-800",children:B.name})]}),B==="any"&&c.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[c.jsx(ms,{className:"w-3.5 h-3.5 text-slate-500"}),c.jsx("span",{className:"font-semibold text-slate-700",children:"Any Available"})]})]}),z.length===0?c.jsx("div",{children:Ge?c.jsx("div",{className:"max-w-lg mx-auto",children:c.jsx(D_,{shopId:i,slug:s,selectedService:C,selectedStaff:B,staffMembers:w,preferredDate:null,onCancel:()=>He(!1)})}):c.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:c.jsx(Yt,{className:"w-8 h-8 text-slate-400"})}),c.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),c.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:C?`No time slots available for ${C.name} (${ut(C.duration)}). Join the waitlist to be notified when a slot opens up!`:"Check back soon for new availability, or join the waitlist!"}),c.jsxs("button",{onClick:()=>He(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:[c.jsx(Ed,{className:"w-4 h-4"}),"Join Waitlist"]})]})}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Select a Date"}),c.jsx("p",{className:"text-slate-500 text-sm",children:"Pick a day that works for you"})]}),c.jsx("div",{className:"mb-8",children:c.jsx(ZE,{availableDates:z,selectedDate:R,onSelectDate:O})}),R&&c.jsxs("div",{className:"animate-slide-down",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",$e(R)]}),c.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[ee.length," slot",ee.length!==1?"s":""]})]}),ee.length===0?c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[c.jsx("p",{className:"text-slate-500 mb-4",children:"No times available for this date"}),Ge?c.jsx("div",{className:"mt-4 text-left",children:c.jsx(D_,{shopId:i,slug:s,selectedService:C,selectedStaff:B,staffMembers:w,preferredDate:R,onCancel:()=>He(!1)})}):c.jsxs("button",{onClick:()=>He(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[c.jsx(Ed,{className:"w-4 h-4"}),"Join the Waitlist"]})]}):c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:ee.sort((ce,me)=>ce.time.localeCompare(me.time)).map(ce=>c.jsxs("button",{onClick:()=>vt(ce),className:"group bg-white border border-slate-200 hover:border-blue-400 rounded-xl p-4 transition-all duration-200 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5 text-center",children:[c.jsx("div",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-700 transition-colors mb-1",children:Pt(ce.time)}),ce.staffName&&B==="any"&&c.jsxs("div",{className:"text-xs text-violet-600 mb-0.5 flex items-center justify-center gap-1",children:[c.jsx(ms,{className:"w-3 h-3"}),ce.staffName]}),c.jsx("div",{className:"text-xs text-slate-400",children:C?ut(C.duration):`${ce.duration} min`})]},ce.id))})]}),!R&&c.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]}),xe==="form"&&c.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Complete Your Booking"}),c.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Review your details and confirm"}),c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[C&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:c.jsx(Za,{className:"w-4 h-4 text-blue-600"})}),c.jsx("span",{className:"font-semibold text-slate-800",children:C.name})]}),c.jsx("span",{className:"font-bold text-blue-600",children:at(C.price)})]}),B&&B!=="any"&&c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx(Cc,{name:B.name,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold text-slate-800",children:B.name}),B.role&&c.jsxs("span",{className:"text-slate-400 text-sm ml-1.5",children:[" ",B.role]})]})]}),B==="any"&&S?.staffName&&c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx(Cc,{name:S.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),c.jsx("span",{className:"font-semibold text-slate-800",children:S.staffName})]}),c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:c.jsx(Yt,{className:"w-4 h-4 text-slate-600"})}),c.jsxs("span",{className:"font-semibold text-slate-800",children:[$e(S.date)," at ",Pt(S.time)]})]}),c.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:c.jsx(ns,{className:"w-4 h-4 text-slate-500"})}),c.jsx("span",{children:C?ut(C.duration):`${S.duration} min`})]})]}),c.jsxs("form",{onSubmit:Re,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),c.jsx("input",{type:"text",value:ke.name,onChange:ce=>G({...ke,name:ce.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),c.jsx("input",{type:"email",value:ke.email,onChange:ce=>G({...ke,email:ce.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),c.jsx("input",{type:"tel",value:ke.phone,onChange:ce=>G({...ke,phone:ce.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:c.jsx(Wi,{className:"w-4 h-4 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Make this recurring"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Book the same slot on a regular schedule"})]})]}),c.jsx("button",{type:"button",onClick:()=>ge(!de),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${de?"bg-blue-500":"bg-slate-300"}`,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${de?"translate-x-6":"translate-x-1"}`})})]}),de&&c.jsxs("div",{className:"space-y-3 pt-1 animate-fade-in",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Repeat every"}),c.jsxs("select",{value:Se,onChange:ce=>Ve(ce.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[c.jsx("option",{value:"weekly",children:"Week"}),c.jsx("option",{value:"biweekly",children:"2 Weeks"}),c.jsx("option",{value:"fourweekly",children:"4 Weeks"}),c.jsx("option",{value:"monthly",children:"Month"})]})]}),pt&&c.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[c.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[" Every ",pt.intervalLabel," through ",pt.endDate]}),c.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[pt.total," total appointment",pt.total!==1?"s":""]}),pt.skipped>0&&c.jsxs("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:[" ",pt.skipped," date",pt.skipped!==1?"s":""," will be skipped due to existing bookings"]})]})]})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"submit",disabled:I,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:I?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Booking"]}):c.jsxs(c.Fragment,{children:[c.jsx(xa,{className:"w-4 h-4"}),"Confirm Booking"]})}),c.jsx("button",{type:"button",onClick:()=>{re(!1),A(null)},className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})]}),V&&c.jsx(x6,{member:V,onClose:()=>ne(null)}),c.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:c.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:c.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",c.jsx(et,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function v6({slotsByDate:s,bookingsByDate:e,selectedDate:n,onSelectDate:i,recurringDayFlags:l={}}){const[u,d]=j.useState(new Date),p=ue=>{const fe=ue.getFullYear(),re=ue.getMonth(),S=new Date(fe,re,1),R=new Date(fe,re+1,0).getDate(),O=S.getDay();return{daysInMonth:R,startingDayOfWeek:O,year:fe,month:re}},{daysInMonth:g,startingDayOfWeek:y,year:b,month:w}=p(u),N=()=>{d(new Date(u.getFullYear(),u.getMonth()-1))},C=()=>{d(new Date(u.getFullYear(),u.getMonth()+1))},H=ue=>`${b}-${String(w+1).padStart(2,"0")}-${String(ue).padStart(2,"0")}`,B=ue=>{const fe=H(ue),re=s[fe]||[],S=e[fe]||[],A=re.filter(O=>O.available).length,R=S.length;return{availableCount:A,bookedCount:R,hasData:re.length>0||S.length>0}},M=ue=>{const fe=H(ue);i(fe===n?null:fe)},L=["January","February","March","April","May","June","July","August","September","October","November","December"],F=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Q=new Date;return Q.setHours(0,0,0,0),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-5",children:[c.jsx("button",{onClick:N,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:c.jsx(YE,{className:"w-5 h-5 text-slate-600"})}),c.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[L[w]," ",b]}),c.jsx("button",{onClick:C,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:c.jsx(KE,{className:"w-5 h-5 text-slate-600"})})]}),c.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:F.map(ue=>c.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:ue},ue))}),c.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:y}).map((ue,fe)=>c.jsx("div",{},`empty-${fe}`)),Array.from({length:g}).map((ue,fe)=>{const re=fe+1,S=H(re),{availableCount:A,bookedCount:R,hasData:O}=B(re),k=S===n,U=new Date,I=U.getDate()===re&&U.getMonth()===w&&U.getFullYear()===b,Me=new Date(b,w,re),ke=Me.getDay(),G=l[ke]&&Me>=Q;return c.jsxs("button",{onClick:()=>M(re),className:`
                relative p-2 text-center rounded-lg text-sm font-semibold transition-all duration-200 min-h-[56px] flex flex-col items-center justify-start cursor-pointer
                ${k?"bg-blue-600 text-white shadow-md shadow-blue-600/30":O||G?"bg-slate-50 hover:bg-slate-100 text-slate-900 border border-slate-200 hover:border-slate-300":I?"text-slate-900 font-bold hover:bg-slate-50":"text-slate-400 hover:bg-slate-50"}
              `,children:[c.jsxs("span",{className:`text-sm ${I&&!k?"relative":""}`,children:[re,I&&!k&&c.jsx("span",{className:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]}),(O||G)&&c.jsxs("div",{className:"flex gap-0.5 mt-1 flex-wrap justify-center",children:[G&&c.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${k?"bg-white/20 text-white":"bg-violet-100 text-violet-700"}`,children:"R"}),A>0&&c.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${k?"bg-white/20 text-white":"bg-emerald-100 text-emerald-700"}`,children:A}),R>0&&c.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${k?"bg-white/20 text-white":"bg-blue-100 text-blue-700"}`,children:R})]})]},re)})]}),c.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-slate-500",children:[Object.keys(l).length>0&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-3.5 h-3.5 bg-violet-100 border border-violet-200 rounded flex items-center justify-center text-[7px] font-bold text-violet-700",children:"R"}),c.jsx("span",{children:"Recurring"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-3.5 h-3.5 bg-emerald-100 border border-emerald-200 rounded"}),c.jsx("span",{children:"Available"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-3.5 h-3.5 bg-blue-100 border border-blue-200 rounded"}),c.jsx("span",{children:"Booked"})]}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"w-3.5 h-3.5 bg-blue-600 rounded"}),c.jsx("span",{children:"Selected"})]})]})]})}const _6=[{value:15,label:"15 min"},{value:30,label:"30 min"},{value:45,label:"45 min"},{value:60,label:"1 hour"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}];function w6({shopId:s}){const[e,n]=j.useState([]),[i,l]=j.useState(!1),[u,d]=j.useState(null),[p,g]=j.useState({name:"",description:"",duration:30,price:""}),[y,b]=j.useState(!1);j.useEffect(()=>{if(!s)return;const L=ts(mt(Te,"shops",s,"services"),F=>{const Q=F.docs.map(ue=>({id:ue.id,...ue.data()})).filter(ue=>ue.active!==!1).sort((ue,fe)=>(ue.name||"").localeCompare(fe.name||""));n(Q)});return()=>L()},[s]);const w=()=>{g({name:"",description:"",duration:30,price:""}),l(!1),d(null)},N=async L=>{L.preventDefault(),b(!0);const F={name:p.name.trim(),description:p.description.trim(),duration:parseInt(p.duration),price:parseFloat(p.price),active:!0};try{u?await Nt(bt(Te,"shops",s,"services",u),F):await Qr(mt(Te,"shops",s,"services"),{...F,createdAt:Qg()}),w()}catch(Q){console.error("Error saving service:",Q)}finally{b(!1)}},C=L=>{g({name:L.name,description:L.description||"",duration:L.duration,price:L.price.toString()}),d(L.id),l(!0)},H=async L=>{try{await Nt(bt(Te,"shops",s,"services",L),{active:!1})}catch(F){console.error("Error deleting service:",F)}},B=L=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(L),M=L=>{if(L<60)return`${L} min`;const F=Math.floor(L/60),Q=L%60;return Q?`${F}h ${Q}m`:`${F}h`};return c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Services"}),c.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Define the services you offer  clients will pick one before booking"})]}),!i&&c.jsxs("button",{onClick:()=>{w(),l(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[c.jsx(Td,{className:"w-4 h-4"}),"Add Service"]})]}),i&&c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Service":"New Service"}),c.jsxs("form",{onSubmit:N,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Service Name *"}),c.jsx("input",{type:"text",value:p.name,onChange:L=>g({...p,name:L.target.value}),required:!0,placeholder:"e.g. Haircut",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description (optional)"}),c.jsx("input",{type:"text",value:p.description,onChange:L=>g({...p,description:L.target.value}),placeholder:"e.g. Classic cut and style",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Duration *"}),c.jsx("select",{value:p.duration,onChange:L=>g({...p,duration:L.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:_6.map(L=>c.jsx("option",{value:L.value,children:L.label},L.value))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Price (USD) *"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-semibold",children:"$"}),c.jsx("input",{type:"number",step:"0.01",min:"0",value:p.price,onChange:L=>g({...p,price:L.target.value}),required:!0,placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsxs("button",{type:"submit",disabled:y,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[c.jsx(Uc,{className:"w-4 h-4"}),y?"Saving":u?"Update Service":"Add Service"]}),c.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[c.jsx(ho,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?c.jsxs("div",{className:"text-center py-16",children:[c.jsx("div",{className:"text-5xl mb-3",children:""}),c.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No services yet"}),c.jsx("p",{className:"text-sm text-slate-600",children:"Add your first service so clients can choose what to book"})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(L=>c.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:L.name}),L.description&&c.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:L.description})]}),c.jsx("span",{className:"text-xl font-bold text-blue-600 whitespace-nowrap ml-3",children:B(L.price)})]}),c.jsx("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4",children:c.jsxs("span",{className:"flex items-center gap-1.5",children:[c.jsx(ns,{className:"w-4 h-4"}),M(L.duration)]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>C(L),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:[c.jsx(WE,{className:"w-3.5 h-3.5"}),"Edit"]}),c.jsx("button",{onClick:()=>H(L.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:c.jsx(Wc,{className:"w-3.5 h-3.5"})})]})]},L.id))})]})}const pp=[{key:"monday",label:"Monday",short:"Mon"},{key:"tuesday",label:"Tuesday",short:"Tue"},{key:"wednesday",label:"Wednesday",short:"Wed"},{key:"thursday",label:"Thursday",short:"Thu"},{key:"friday",label:"Friday",short:"Fri"},{key:"saturday",label:"Saturday",short:"Sat"},{key:"sunday",label:"Sunday",short:"Sun"}],E6={enabled:!1,start:"09:00",end:"17:00",break:null};function T6({shopId:s,staffId:e,staffName:n,weeklyHours:i,onClose:l}){const[u,d]=j.useState(()=>{const M={};for(const L of pp){const F=i?.[L.key];F?M[L.key]={enabled:!!F.enabled,start:F.start||"09:00",end:F.end||"17:00",break:F.break?{start:F.break.start,end:F.break.end}:null}:M[L.key]={...E6}}return M}),[p,g]=j.useState(!1),[y,b]=j.useState(null),w=(M,L,F)=>{d(Q=>({...Q,[M]:{...Q[M],[L]:F}}))},N=M=>{d(L=>({...L,[M]:{...L[M],break:L[M].break?null:{start:"12:00",end:"13:00"}}}))},C=(M,L,F)=>{d(Q=>({...Q,[M]:{...Q[M],break:{...Q[M].break,[L]:F}}}))},H=M=>{const L=u[M];d(F=>{const Q={...F};for(const ue of pp)ue.key!==M&&(Q[ue.key]={enabled:L.enabled,start:L.start,end:L.end,break:L.break?{...L.break}:null});return Q}),b(M),setTimeout(()=>b(null),1500)},B=async()=>{g(!0);try{await Nt(bt(Te,"shops",s,"staff",e),{weeklyHours:u}),l()}catch(M){console.error("Error saving weekly hours:",M)}finally{g(!1)}};return c.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Weekly Hours"}),c.jsx("p",{className:"text-sm text-slate-500",children:n})]}),c.jsx("button",{onClick:l,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:c.jsx(ho,{className:"w-5 h-5 text-slate-400"})})]}),c.jsx("div",{className:"space-y-3",children:pp.map(({key:M,label:L})=>{const F=u[M];return c.jsx("div",{className:`rounded-xl p-4 transition-all ${F.enabled?"bg-blue-50 border border-blue-200":"bg-slate-50 border border-slate-200"}`,children:c.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-3 min-w-[140px]",children:[c.jsx("button",{type:"button",onClick:()=>w(M,"enabled",!F.enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${F.enabled?"bg-blue-500":"bg-slate-300"}`,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${F.enabled?"translate-x-6":"translate-x-1"}`})}),c.jsx("span",{className:`font-semibold text-sm ${F.enabled?"text-slate-900":"text-slate-400"}`,children:L})]}),F.enabled?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ns,{className:"w-4 h-4 text-blue-500"}),c.jsx("input",{type:"time",value:F.start,onChange:Q=>w(M,"start",Q.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),c.jsx("span",{className:"text-slate-400 text-sm",children:"to"}),c.jsx("input",{type:"time",value:F.end,onChange:Q=>w(M,"end",Q.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{type:"button",onClick:()=>N(M),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${F.break?"bg-amber-100 text-amber-700 border border-amber-200":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,children:[c.jsx(TD,{className:"w-3.5 h-3.5"}),F.break?"Break":"+ Break"]}),F.break&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("input",{type:"time",value:F.break.start,onChange:Q=>C(M,"start",Q.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"}),c.jsx("span",{className:"text-slate-400 text-xs",children:""}),c.jsx("input",{type:"time",value:F.break.end,onChange:Q=>C(M,"end",Q.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"})]})]}),c.jsx("button",{type:"button",onClick:()=>H(M),className:"text-xs text-blue-500 hover:text-blue-700 font-medium transition-colors whitespace-nowrap",children:y===M?" Copied!":"Copy to all"})]}):c.jsx("span",{className:"text-sm text-slate-400 italic",children:"Day off"})]})},M)})}),c.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-200",children:[c.jsxs("button",{onClick:B,disabled:p,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[c.jsx($D,{className:"w-4 h-4"}),p?"Saving":"Save Hours"]}),c.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[c.jsx(ho,{className:"w-4 h-4"}),"Cancel"]})]})]})}const N6=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}],S6=5*1024*1024,A6=["image/jpeg","image/png","image/webp"];function O_(s){if(!s)return"";const[e,n]=s.split(":").map(Number),i=e>=12?"p":"a",l=e%12||12;return n===0?`${l}${i}`:`${l}:${n.toString().padStart(2,"0")}${i}`}function R6({shopId:s}){const[e,n]=j.useState([]),[i,l]=j.useState(!1),[u,d]=j.useState(null),[p,g]=j.useState(null),[y,b]=j.useState(null),[w,N]=j.useState({name:"",role:""}),[C,H]=j.useState(!1),[B,M]=j.useState(null),[L,F]=j.useState(""),[Q,ue]=j.useState(!1),[fe,re]=j.useState(!1),[S,A]=j.useState(""),[R,O]=j.useState(null),[k,U]=j.useState(null),[I,Me]=j.useState(null),ke=j.useRef(null);j.useEffect(()=>{if(!s)return;const se=ts(mt(Te,"shops",s,"staff"),De=>{const Ae=De.docs.map(Fe=>({id:Fe.id,...Fe.data()})).filter(Fe=>Fe.active!==!1).sort((Fe,tt)=>(Fe.name||"").localeCompare(tt.name||""));n(Ae)});return()=>se()},[s]);const G=()=>{N({name:"",role:""}),l(!1),d(null)},he=async se=>{se.preventDefault(),H(!0);const De={name:w.name.trim(),role:w.role.trim(),active:!0};try{u?await Nt(bt(Te,"shops",s,"staff",u),De):await Qr(mt(Te,"shops",s,"staff"),{...De,email:"",bio:"",portfolio:[],createdAt:Qg()}),G()}catch(Ae){console.error("Error saving staff member:",Ae)}finally{H(!1)}},we=se=>{N({name:se.name,role:se.role||""}),d(se.id),l(!0)},Ge=async se=>{try{await Nt(bt(Te,"shops",s,"staff",se),{active:!1})}catch(De){console.error("Error deleting staff member:",De)}},He=se=>{M(se.id),F(se.bio||"")},V=async se=>{ue(!0);try{await Nt(bt(Te,"shops",s,"staff",se),{bio:L.trim()}),M(null),F("")}catch(De){console.error("Error saving bio:",De)}finally{ue(!1)}},ne=se=>{O(se),A(""),U(null),setTimeout(()=>{ke.current&&(ke.current.value="",ke.current.click())},50)},de=se=>{const De=se.target.files?.[0];if(De){if(!A6.includes(De.type)){alert("Please select a JPG, PNG, or WebP image.");return}if(De.size>S6){alert("File size must be under 5MB.");return}U(De)}},ge=async se=>{if(k){re(!0);try{const De=Date.now(),Ae=k.name.split(".").pop(),Fe=`${De}.${Ae}`,tt=`shops/${s}/staff/${se}/portfolio/${Fe}`,Gt=E_(T_,tt);await Kk(Gt,k);const It=await Qk(Gt),gn=e.find(sn=>sn.id===se)?.portfolio||[];await Nt(bt(Te,"shops",s,"staff",se),{portfolio:[...gn,{url:It,storagePath:tt,caption:S.trim(),uploadedAt:new Date().toISOString()}]}),O(null),A(""),U(null)}catch(De){console.error("Error uploading photo:",De),alert("Upload failed. Please try again.")}finally{re(!1)}}},Se=async(se,De)=>{const Ae=e.find(tt=>tt.id===se);if(!Ae)return;const Fe=Ae.portfolio[De];if(Fe){Me(`${se}-${De}`);try{if(Fe.storagePath)try{const Gt=E_(T_,Fe.storagePath);await Xk(Gt)}catch(Gt){console.warn("Storage delete warning:",Gt)}const tt=Ae.portfolio.filter((Gt,It)=>It!==De);await Nt(bt(Te,"shops",s,"staff",se),{portfolio:tt})}catch(tt){console.error("Error deleting photo:",tt),alert("Failed to delete photo.")}finally{Me(null)}}},Ve=se=>{if(!se)return null;const De=N6.filter(Ae=>se[Ae.key]?.enabled);return De.length===0?null:De.map(Ae=>{const Fe=se[Ae.key];return`${Ae.short} ${O_(Fe.start)}${O_(Fe.end)}`})};return c.jsxs("div",{children:[c.jsx("input",{ref:ke,type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:de}),c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Staff"}),c.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Manage your team  assign availability and bookings per staff member"})]}),!i&&c.jsxs("button",{onClick:()=>{G(),l(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[c.jsx(Td,{className:"w-4 h-4"}),"Add Staff"]})]}),i&&c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Staff Member":"New Staff Member"}),c.jsxs("form",{onSubmit:he,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name *"}),c.jsx("input",{type:"text",value:w.name,onChange:se=>N({...w,name:se.target.value}),required:!0,placeholder:"e.g. Jane Smith",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Role (optional)"}),c.jsx("input",{type:"text",value:w.role,onChange:se=>N({...w,role:se.target.value}),placeholder:"e.g. Senior Stylist",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsxs("button",{type:"submit",disabled:C,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[c.jsx(Uc,{className:"w-4 h-4"}),C?"Saving":u?"Update Staff":"Add Staff"]}),c.jsxs("button",{type:"button",onClick:G,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[c.jsx(ho,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?c.jsxs("div",{className:"text-center py-16",children:[c.jsx("div",{className:"text-5xl mb-3",children:""}),c.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No staff members yet"}),c.jsx("p",{className:"text-sm text-slate-600",children:"Add your team members to assign them availability and bookings"})]}):c.jsx("div",{className:"space-y-4",children:e.map(se=>{const De=Ve(se.weeklyHours),Ae=se.portfolio||[];return c.jsxs("div",{children:[c.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:se.name}),se.role&&c.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:se.role})]}),c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(ms,{className:"w-5 h-5 text-blue-600"})})]}),c.jsx("div",{className:"mb-3",children:B===se.id?c.jsxs("div",{className:"space-y-2",children:[c.jsx("textarea",{value:L,onChange:Fe=>F(Fe.target.value),placeholder:"Write a short bio  specialties, experience, personality",rows:3,maxLength:500,className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>V(se.id),disabled:Q,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[Q?c.jsx(mp,{className:"w-3 h-3 animate-spin"}):c.jsx(Uc,{className:"w-3 h-3"}),"Save Bio"]}),c.jsx("button",{onClick:()=>{M(null),F("")},className:"px-3 py-1.5 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"}),c.jsxs("span",{className:"text-xs text-slate-400 ml-auto",children:[L.length,"/500"]})]})]}):c.jsx("div",{onClick:()=>He(se),className:"cursor-pointer group",children:se.bio?c.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed group-hover:text-slate-800 transition-colors",children:[se.bio,c.jsx("span",{className:"ml-1.5 text-xs text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"edit"})]}):c.jsx("p",{className:"text-sm text-slate-400 italic group-hover:text-blue-500 transition-colors",children:"+ Add a bio"})})}),De?c.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5",children:De.map((Fe,tt)=>c.jsx("span",{className:"inline-block px-2 py-0.5 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium",children:Fe},tt))}):c.jsx("p",{className:"text-xs text-slate-400 mb-3 italic",children:"No weekly hours set"}),Ae.length>0&&y!==se.id&&c.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[c.jsx("div",{className:"flex -space-x-1",children:Ae.slice(0,4).map((Fe,tt)=>c.jsx("img",{src:Fe.url,alt:Fe.caption||"Portfolio",className:"w-10 h-10 rounded-lg object-cover border-2 border-white shadow-sm"},tt))}),c.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[Ae.length," photo",Ae.length!==1?"s":""]})]}),c.jsxs("div",{className:"flex gap-2 flex-wrap",children:[c.jsxs("button",{onClick:()=>g(p===se.id?null:se.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${p===se.id?"bg-blue-100 text-blue-700 border-blue-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[c.jsx(ns,{className:"w-3.5 h-3.5"}),"Set Hours"]}),c.jsxs("button",{onClick:()=>b(y===se.id?null:se.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${y===se.id?"bg-violet-100 text-violet-700 border-violet-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[c.jsx(mD,{className:"w-3.5 h-3.5"}),"Portfolio"]}),c.jsx("button",{onClick:()=>we(se),className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:c.jsx(WE,{className:"w-3.5 h-3.5"})}),c.jsx("button",{onClick:()=>Ge(se.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:c.jsx(Wc,{className:"w-3.5 h-3.5"})})]})]}),p===se.id&&c.jsx("div",{className:"mt-2",children:c.jsx(T6,{shopId:s,staffId:se.id,staffName:se.name,weeklyHours:se.weeklyHours,onClose:()=>g(null)})}),y===se.id&&c.jsxs("div",{className:"mt-2 bg-white border-2 border-violet-200 rounded-xl p-5",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-sm font-bold text-slate-800 flex items-center gap-2",children:[c.jsx(CD,{className:"w-4 h-4 text-violet-600"}),"Portfolio  ",se.name]}),c.jsxs("button",{onClick:()=>ne(se.id),disabled:fe,className:"flex items-center gap-1.5 px-3 py-1.5 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[c.jsx(Td,{className:"w-3 h-3"}),"Add Photo"]})]}),R===se.id&&k&&c.jsxs("div",{className:"mb-4 p-3 bg-violet-50 border border-violet-200 rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[c.jsx("div",{className:"w-16 h-16 rounded-lg bg-slate-200 overflow-hidden flex-shrink-0",children:c.jsx("img",{src:URL.createObjectURL(k),alt:"Preview",className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-xs text-slate-600 font-medium mb-1 truncate",children:k.name}),c.jsxs("p",{className:"text-xs text-slate-400",children:[(k.size/1024/1024).toFixed(1)," MB"]})]})]}),c.jsx("input",{type:"text",value:S,onChange:Fe=>A(Fe.target.value),placeholder:"Add a caption (optional)",maxLength:200,className:"w-full px-3 py-2 text-sm border border-violet-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-400 focus:border-transparent mb-2"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>ge(se.id),disabled:fe,className:"flex items-center gap-1.5 px-4 py-2 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:fe?c.jsxs(c.Fragment,{children:[c.jsx(mp,{className:"w-3 h-3 animate-spin"}),"Uploading"]}):c.jsxs(c.Fragment,{children:[c.jsx(Uc,{className:"w-3 h-3"}),"Upload"]})}),c.jsx("button",{onClick:()=>{O(null),U(null),A("")},className:"px-3 py-2 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}),Ae.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-3xl mb-2",children:""}),c.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet. Add some to showcase work!"})]}):c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:Ae.map((Fe,tt)=>c.jsxs("div",{className:"group relative bg-slate-50 rounded-lg overflow-hidden border border-slate-200 shadow-sm",children:[c.jsx("div",{className:"aspect-square",children:c.jsx("img",{src:Fe.url,alt:Fe.caption||"Portfolio photo",className:"w-full h-full object-cover"})}),Fe.caption&&c.jsx("div",{className:"px-2 py-1.5",children:c.jsx("p",{className:"text-xs text-slate-600 truncate",children:Fe.caption})}),c.jsx("button",{onClick:()=>Se(se.id,tt),disabled:I===`${se.id}-${tt}`,className:"absolute top-1.5 right-1.5 w-7 h-7 bg-red-500/90 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-md disabled:opacity-50",title:"Delete photo",children:I===`${se.id}-${tt}`?c.jsx(mp,{className:"w-3.5 h-3.5 animate-spin"}):c.jsx(Wc,{className:"w-3.5 h-3.5"})})]},tt))})]})]},se.id)})})]})}const j6=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function gp(s){const[e,n]=s.split(":").map(Number);return e*60+n}function C6(s,e){if(s.status!=="waiting"||s.serviceId&&e.serviceId&&s.serviceId!==e.serviceId||s.staffId&&s.staffId!=="any"&&e.staffId&&s.staffId!==e.staffId)return!1;if(e.date){if(s.preferredDate&&s.preferredDate!==e.date)return!1;if(s.preferredDays&&s.preferredDays.length>0){const n=new Date(e.date+"T12:00:00"),i=j6[n.getDay()];if(!s.preferredDays.includes(i))return!1}}if(e.time&&s.preferredTimeRange){const n=gp(e.time),i=gp(s.preferredTimeRange.start),l=gp(s.preferredTimeRange.end);if(!(s.preferredTimeRange.start==="00:00"&&s.preferredTimeRange.end==="23:59")&&(n<i||n>l))return!1}return!0}function I6(s,e){return s.filter(n=>C6(n,e)).sort((n,i)=>(n.createdAt||"").localeCompare(i.createdAt||""))}const V_=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}];function Vr(s){if(!s)return"";const[e,n]=s.split(":").map(Number),i=e>=12?"PM":"AM",l=e%12||12;return n===0?`${l}${i}`:`${l}:${n.toString().padStart(2,"0")}${i}`}function k6({user:s}){const{slug:e}=Zc(),n=po(),[i,l]=j.useState(null),[u,d]=j.useState(null),[p,g]=j.useState(!0),[y,b]=j.useState(!1),[w,N]=j.useState([]),[C,H]=j.useState([]),[B,M]=j.useState([]),[L,F]=j.useState("schedule"),[Q,ue]=j.useState(null),[fe,re]=j.useState("all"),[S,A]=j.useState("all"),[R,O]=j.useState([]),[k,U]=j.useState(null),[I,Me]=j.useState(null),[ke,G]=j.useState({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""});j.useEffect(()=>{if(!s){n(`/shop/${e}/login`,{replace:!0});return}(async()=>{g(!0);try{const ee=Ds(mt(Te,"shops"),ys("slug","==",e)),ye=await Ms(ee);if(ye.empty){b(!0),g(!1);return}const xe=ye.docs[0],Oe=xe.data();if(Oe.ownerUid!==s.uid){b(!0),g(!1);return}l(Oe),d(xe.id)}catch(ee){console.error("Error checking ownership:",ee),b(!0)}finally{g(!1)}})()},[s,e,n]),j.useEffect(()=>{if(!u)return;const z=ts(mt(Te,"shops",u,"availability"),Oe=>{const _t=Oe.docs.map(ft=>({id:ft.id,...ft.data()}));N(_t)}),ee=ts(mt(Te,"shops",u,"bookings"),Oe=>{const _t=Oe.docs.map(ft=>({id:ft.id,...ft.data()}));H(_t)}),ye=ts(mt(Te,"shops",u,"staff"),Oe=>{const _t=Oe.docs.map(ft=>({id:ft.id,...ft.data()})).filter(ft=>ft.active!==!1).sort((ft,ce)=>(ft.name||"").localeCompare(ce.name||""));M(_t)}),xe=ts(mt(Te,"shops",u,"waitlist"),Oe=>{const _t=Oe.docs.map(ft=>({id:ft.id,...ft.data()})).sort((ft,ce)=>(ft.createdAt||"").localeCompare(ce.createdAt||""));O(_t)});return()=>{z(),ee(),ye(),xe()}},[u]);const he=async()=>{await aj(Wr),n(`/shop/${e}`,{replace:!0})},we=async z=>{z.preventDefault();const{date:ee,startTime:ye,endTime:xe,slotDuration:Oe,staffId:_t}=ke,ft=parseInt(Oe),[ce,me]=ye.split(":").map(Number),[Be,Pe]=xe.split(":").map(Number),gt=ce*60+me,Le=Be*60+Pe;let je=gt;for(;je+ft<=Le;){const At=Math.floor(je/60),vn=je%60,wt=`${At.toString().padStart(2,"0")}:${vn.toString().padStart(2,"0")}`,yn={date:ee,time:wt,duration:ft,available:!0};if(_t){const Dn=B.find(qn=>qn.id===_t);yn.staffId=_t,yn.staffName=Dn?.name||""}await Qr(mt(Te,"shops",u,"availability"),yn),je+=ft}G({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""})},Ge=async z=>{await L4(bt(Te,"shops",u,"availability",z))},He=z=>{const ee={date:z.date,time:z.time,staffId:z.staffId||null,serviceId:z.serviceId||null},ye=I6(R,ee);ye.length>0&&U({matches:ye,slot:ee})},V=async(z,ee)=>{for(const ye of z)await Nt(bt(Te,"shops",u,"waitlist",ye.id),{status:"notified",notifiedAt:new Date().toISOString(),notifiedSlot:{date:ee.date,time:ee.time,staffId:ee.staffId||null,staffName:ee.staffName||null}});U(null)},ne=async z=>{await Nt(bt(Te,"shops",u,"waitlist",z),{status:"notified",notifiedAt:new Date().toISOString()})},de=async z=>{await Nt(bt(Te,"shops",u,"waitlist",z),{status:"expired"})},ge=async z=>{const ee=C.find(ye=>ye.id===z);if(ee&&ee.recurringGroupId){Me({bookingId:z,recurringGroupId:ee.recurringGroupId});return}if(await Nt(bt(Te,"shops",u,"bookings",z),{status:"cancelled"}),ee&&ee.slotId&&!ee.slotId.startsWith("wh-")&&!ee.slotId.startsWith("recurring-"))try{await Nt(bt(Te,"shops",u,"availability",ee.slotId),{available:!0})}catch(ye){console.warn("Could not re-open slot:",ye)}ee&&He(ee)},Se=async z=>{const ee=C.find(ye=>ye.id===z);if(await Nt(bt(Te,"shops",u,"bookings",z),{status:"cancelled"}),ee&&ee.slotId&&!ee.slotId.startsWith("wh-")&&!ee.slotId.startsWith("recurring-"))try{await Nt(bt(Te,"shops",u,"availability",ee.slotId),{available:!0})}catch(ye){console.warn("Could not re-open slot:",ye)}ee&&He(ee),Me(null)},Ve=async(z,ee)=>{const ye=C.find(Oe=>Oe.id===z);if(!ye)return;const xe=C.filter(Oe=>Oe.recurringGroupId===ee&&Oe.date>=ye.date&&(Oe.status==="pending"||Oe.status==="confirmed"));for(const Oe of xe)if(await Nt(bt(Te,"shops",u,"bookings",Oe.id),{status:"cancelled"}),Oe.slotId&&!Oe.slotId.startsWith("wh-")&&!Oe.slotId.startsWith("recurring-"))try{await Nt(bt(Te,"shops",u,"availability",Oe.slotId),{available:!0})}catch(_t){console.warn("Could not re-open slot:",_t)}ye&&He(ye),Me(null)},se=async z=>{await Nt(bt(Te,"shops",u,"bookings",z),{status:"confirmed"})},De=async z=>{const ee=C.find(ye=>ye.id===z);if(await Nt(bt(Te,"shops",u,"bookings",z),{status:"rejected"}),ee&&ee.slotId&&!ee.slotId.startsWith("wh-"))try{await Nt(bt(Te,"shops",u,"availability",ee.slotId),{available:!0})}catch(ye){console.warn("Could not re-open slot:",ye)}ee&&He(ee)},Ae=async()=>{const z=!i?.requireApproval;try{await Nt(bt(Te,"shops",u),{requireApproval:z}),l(ee=>({...ee,requireApproval:z}))}catch(ee){console.error("Error updating requireApproval:",ee)}},Fe=async z=>{const ee=parseInt(z);try{await Nt(bt(Te,"shops",u),{bufferMinutes:ee}),l(ye=>({...ye,bufferMinutes:ee}))}catch(ye){console.error("Error updating buffer minutes:",ye)}},tt=(z,ee)=>new Date(`${z}T${ee}`).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),Gt=j.useMemo(()=>{const z={},ee=fe==="all"?B:B.filter(xe=>xe.id===fe),ye=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(const xe of ee)xe.weeklyHours&&ye.forEach((Oe,_t)=>{xe.weeklyHours[Oe]?.enabled&&(z[_t]=!0)});return z},[B,fe]),It=j.useMemo(()=>(fe==="all"?B:B.filter(ee=>ee.id===fe)).filter(ee=>ee.weeklyHours?V_.some(ye=>ee.weeklyHours[ye.key]?.enabled):!1),[B,fe]),pt=j.useMemo(()=>{const z=new Date,ee=`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}-${String(z.getDate()).padStart(2,"0")}`,ye=z.getDay(),xe=ye===0?-6:1-ye,Oe=new Date(z);Oe.setDate(z.getDate()+xe),Oe.setHours(0,0,0,0);const _t=new Date(Oe);_t.setDate(Oe.getDate()+6),_t.setHours(23,59,59,999);const ft=`${Oe.getFullYear()}-${String(Oe.getMonth()+1).padStart(2,"0")}-${String(Oe.getDate()).padStart(2,"0")}`,ce=`${_t.getFullYear()}-${String(_t.getMonth()+1).padStart(2,"0")}-${String(_t.getDate()).padStart(2,"0")}`,me=C.filter(gt=>gt.date===ee).length,Be=C.filter(gt=>gt.date>=ft&&gt.date<=ce).length,Pe=new Set(C.map(gt=>gt.clientEmail?.toLowerCase()).filter(Boolean)).size;return{todayBookings:me,weekBookings:Be,uniqueClients:Pe,totalBookings:C.length}},[C]),gn=j.useMemo(()=>C.filter(z=>z.status==="pending").length,[C]),sn=j.useMemo(()=>R.filter(z=>z.status==="waiting").length,[R]);if(p)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[c.jsx("div",{className:"spinner"}),c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading dashboard"})]})});if(y)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:c.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:c.jsx(QE,{className:"w-8 h-8 text-red-500"})}),c.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Unauthorized"}),c.jsx("p",{className:"text-slate-600 mb-6",children:"You don't have access to this dashboard."}),c.jsx(et,{to:`/shop/${e}/login`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:"Login"})]})});const ss=fe==="all"?w:w.filter(z=>z.staffId===fe),zn=fe==="all"?C:C.filter(z=>z.staffId===fe),vt=ss.reduce((z,ee)=>(z[ee.date]||(z[ee.date]=[]),z[ee.date].push(ee),z),{}),be=zn.reduce((z,ee)=>(z[ee.date]||(z[ee.date]=[]),z[ee.date].push(ee),z),{}),Re=Q?Object.keys(vt).filter(z=>z===Q).sort():Object.keys(vt).sort(),$e=Q?zn.filter(z=>z.date===Q):zn,Pt=S==="all"?$e:S==="pending"?$e.filter(z=>z.status==="pending"):S==="confirmed"?$e.filter(z=>!z.status||z.status==="confirmed"):$e.filter(z=>z.status==="cancelled"||z.status==="rejected"),at={all:$e.length,pending:$e.filter(z=>z.status==="pending").length,confirmed:$e.filter(z=>!z.status||z.status==="confirmed").length,cancelled:$e.filter(z=>z.status==="cancelled"||z.status==="rejected").length},ut=[{key:"schedule",label:"Schedule",icon:Yt},{key:"waitlist",label:"Waitlist",icon:Yp},{key:"staff",label:"Staff",icon:ms},{key:"services",label:"Services",icon:Za},{key:"settings",label:"Settings",icon:KD}];return c.jsxs("div",{className:"min-h-screen bg-slate-50",children:[c.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"h-16 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(i.name||"")[0]?.toUpperCase()||"S"}),c.jsxs("div",{className:"hidden sm:block",children:[c.jsx("h1",{className:"text-base font-bold text-slate-900 leading-tight",children:i.name}),c.jsx("p",{className:"text-xs text-slate-500",children:"Dashboard"})]})]}),c.jsx("div",{className:"flex items-center bg-slate-100 p-1 rounded-xl",children:ut.map(z=>{const ee=z.icon;return c.jsxs("button",{onClick:()=>F(z.key),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${L===z.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[c.jsx(ee,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:z.label}),z.key==="schedule"&&gn>0&&c.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-amber-500 text-white text-[10px] font-bold rounded-full leading-none",children:gn}),z.key==="waitlist"&&sn>0&&c.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-500 text-white text-[10px] font-bold rounded-full leading-none",children:sn})]},z.key)})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(et,{to:`/shop/${e}`,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[c.jsx(SD,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"View Page"})]}),c.jsxs("button",{onClick:he,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all",children:[c.jsx(VD,{className:"w-4 h-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[L==="schedule"&&c.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 animate-fade-in",children:[{label:"Today's Bookings",value:pt.todayBookings,icon:S_,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:pt.weekBookings,icon:t6,color:"bg-violet-100 text-violet-600"},{label:"Total Bookings",value:pt.totalBookings,icon:gD,color:"bg-emerald-100 text-emerald-600"},{label:"Unique Clients",value:pt.uniqueClients,icon:ms,color:"bg-amber-100 text-amber-600"}].map(z=>{const ee=z.icon;return c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[c.jsx("div",{className:"flex items-center justify-between mb-3",children:c.jsx("div",{className:`w-10 h-10 ${z.color} rounded-xl flex items-center justify-center`,children:c.jsx(ee,{className:"w-5 h-5"})})}),c.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:z.value}),c.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:z.label})]},z.label)})}),L==="staff"&&c.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:c.jsx(R6,{shopId:u})}),L==="services"&&c.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:c.jsx(w6,{shopId:u})}),k&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:c.jsx(Wl,{className:"w-5 h-5 text-blue-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Waitlist Match!"}),c.jsxs("p",{className:"text-sm text-slate-500",children:[k.matches.length," client",k.matches.length!==1?"s":""," on the waitlist match this freed slot"]})]})]}),c.jsx("div",{className:"bg-slate-50 rounded-xl p-3 mb-4 text-sm",children:c.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[c.jsx(Yt,{className:"w-4 h-4 text-blue-500"}),c.jsxs("span",{className:"font-medium",children:[new Date(k.slot.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," at ",(()=>{const[z,ee]=k.slot.time.split(":"),ye=parseInt(z);return`${ye%12||12}:${ee} ${ye>=12?"PM":"AM"}`})()]})]})}),c.jsx("div",{className:"space-y-2 mb-5 max-h-48 overflow-y-auto",children:k.matches.map(z=>c.jsx("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border border-blue-100 rounded-lg",children:c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-slate-900",children:z.clientName}),c.jsx("span",{className:"text-xs text-slate-500 ml-2",children:z.serviceName})]})},z.id))}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:()=>V(k.matches,k.slot),className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:[c.jsx(Wl,{className:"w-4 h-4"}),"Notify All"]}),c.jsx("button",{onClick:()=>U(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Dismiss"})]})]})}),I&&c.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:c.jsx(Wi,{className:"w-5 h-5 text-red-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Cancel Recurring Booking"}),c.jsx("p",{className:"text-sm text-slate-500",children:"This booking is part of a recurring series"})]})]}),c.jsxs("div",{className:"space-y-2 mb-5",children:[c.jsxs("button",{onClick:()=>Se(I.bookingId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[c.jsx(Ui,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this one only"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments stay active"})]})]}),c.jsxs("button",{onClick:()=>Ve(I.bookingId,I.recurringGroupId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[c.jsx(Wi,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future in series"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments"})]})]})]}),c.jsx("button",{onClick:()=>Me(null),className:"w-full px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Never mind"})]})}),L==="waitlist"&&c.jsx("div",{className:"animate-fade-in",children:c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[c.jsxs("div",{className:"flex items-center justify-between mb-5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Waitlist"}),sn>0&&c.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:[sn," waiting"]})]}),c.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[R.length," total"]})]}),R.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:c.jsx(Yp,{className:"w-6 h-6 text-slate-400"})}),c.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No waitlist entries yet"}),c.jsx("p",{className:"text-xs text-slate-400",children:"Clients can join the waitlist when no slots are available on your booking page."})]}):c.jsx("div",{children:(()=>{const z={};return R.forEach(ee=>{const ye=ee.serviceName||"Other";z[ye]||(z[ye]=[]),z[ye].push(ee)}),Object.entries(z).sort(([ee],[ye])=>ee.localeCompare(ye)).map(([ee,ye])=>c.jsxs("div",{className:"mb-6 last:mb-0",children:[c.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100 flex items-center gap-2",children:[c.jsx(Za,{className:"w-3.5 h-3.5 text-blue-500"}),ee,c.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",ye.filter(xe=>xe.status==="waiting").length," waiting)"]})]}),c.jsx("div",{className:"space-y-2.5",children:ye.sort((xe,Oe)=>(xe.createdAt||"").localeCompare(Oe.createdAt||"")).map(xe=>{const Oe={waiting:"bg-blue-50 text-blue-700 border-blue-200",notified:"bg-emerald-50 text-emerald-700 border-emerald-200",booked:"bg-emerald-50 text-emerald-700 border-emerald-200",expired:"bg-slate-100 text-slate-500 border-slate-200"},_t={waiting:"Waiting",notified:"Notified",booked:"Booked",expired:"Removed"},ft=xe.createdAt?(()=>{const me=Date.now()-new Date(xe.createdAt).getTime(),Be=Math.floor(me/864e5),Pe=Math.floor(me/36e5);return Be>0?`${Be}d`:`${Pe}h`})():"",ce={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return c.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(C_,{className:"w-4 h-4 text-blue-600"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:xe.clientName}),c.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${Oe[xe.status]||Oe.waiting}`,children:_t[xe.status]||"Waiting"})]}),c.jsxs("div",{className:"text-xs text-slate-500",children:["Joined ",ft," ago",xe.refCode&&c.jsx("span",{className:"font-mono text-slate-400 ml-2",children:xe.refCode})]})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[xe.status==="waiting"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>ne(xe.id),className:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all",title:"Notify client",children:c.jsx(Wl,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>de(xe.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove from waitlist",children:c.jsx(ho,{className:"w-4 h-4"})})]}),xe.status==="notified"&&c.jsx("button",{onClick:()=>de(xe.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove",children:c.jsx(ho,{className:"w-3.5 h-3.5"})})]})]}),c.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[xe.staffName&&xe.staffName!=="Any Available"&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(ms,{className:"w-3 h-3 text-violet-400"}),c.jsx("span",{className:"text-violet-600",children:xe.staffName})]}),xe.preferredDate&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Yt,{className:"w-3 h-3 text-slate-400"}),c.jsxs("span",{children:["Preferred: ",new Date(xe.preferredDate+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]}),xe.preferredDays&&xe.preferredDays.length>0&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Yt,{className:"w-3 h-3 text-slate-400"}),c.jsxs("span",{children:["Days: ",xe.preferredDays.map(me=>ce[me]||me).join(", ")]})]}),xe.preferredTimeRange&&!(xe.preferredTimeRange.start==="00:00"&&xe.preferredTimeRange.end==="23:59")&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(ns,{className:"w-3 h-3 text-slate-400"}),c.jsxs("span",{children:["Time: ",Vr(xe.preferredTimeRange.start),"",Vr(xe.preferredTimeRange.end)]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(A_,{className:"w-3 h-3"}),xe.clientEmail]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(R_,{className:"w-3 h-3"}),xe.clientPhone]})]}),xe.status==="notified"&&xe.notifiedSlot&&c.jsxs("div",{className:"mt-1.5 px-2.5 py-1.5 bg-emerald-50 border border-emerald-200 rounded-lg inline-flex items-center gap-1.5",children:[c.jsx(Wl,{className:"w-3 h-3 text-emerald-500"}),c.jsxs("span",{className:"text-emerald-700 font-medium",children:["Notified about ",new Date(xe.notifiedSlot.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ",Vr(xe.notifiedSlot.time)]})]})]})]},xe.id)})})]},ee))})()})]})}),L==="settings"&&c.jsx("div",{className:"max-w-2xl animate-fade-in",children:c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Shop Settings"}),c.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure your booking preferences"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[c.jsxs("div",{className:"pr-4",children:[c.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Require Booking Approval"}),c.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Review and approve bookings before they're confirmed"})]}),c.jsx("button",{type:"button",onClick:Ae,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${i?.requireApproval?"bg-blue-500":"bg-slate-300"}`,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${i?.requireApproval?"translate-x-6":"translate-x-1"}`})})]}),i?.requireApproval&&c.jsxs("div",{className:"p-3.5 bg-amber-50 border border-amber-200 rounded-xl text-xs text-amber-800 leading-relaxed",children:[c.jsx("strong",{children:" Approval mode is on."}),' New bookings will appear as "Pending" until you approve or reject them. Time slots are held while pending to prevent double-booking.']}),c.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[c.jsxs("div",{className:"pr-4",children:[c.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Buffer Time Between Bookings"}),c.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Add a gap between consecutive appointments"})]}),c.jsxs("select",{value:i?.bufferMinutes||0,onChange:z=>Fe(z.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[c.jsx("option",{value:"0",children:"No buffer"}),c.jsx("option",{value:"5",children:"5 minutes"}),c.jsx("option",{value:"10",children:"10 minutes"}),c.jsx("option",{value:"15",children:"15 minutes"}),c.jsx("option",{value:"30",children:"30 minutes"})]})]})]})]})}),L==="schedule"&&c.jsxs("div",{className:"animate-fade-in",children:[B.length>0&&c.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5",children:"Filter by Staff"}),c.jsxs("select",{value:fe,onChange:z=>re(z.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[c.jsx("option",{value:"all",children:"All Staff"}),B.map(z=>c.jsxs("option",{value:z.id,children:[z.name,z.role?`  ${z.role}`:""]},z.id))]})]})}),It.length>0&&c.jsxs("div",{className:"mb-6 bg-violet-50 border border-violet-200 rounded-xl p-5",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(JE,{className:"w-4 h-4 text-violet-600"}),c.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Recurring Weekly Hours"})]}),c.jsx("div",{className:"space-y-2.5",children:It.map(z=>{const ee=V_.filter(ye=>z.weeklyHours[ye.key]?.enabled);return c.jsxs("div",{className:"flex items-start gap-2.5",children:[c.jsx("div",{className:"w-7 h-7 bg-violet-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:c.jsx(ms,{className:"w-3.5 h-3.5 text-violet-600"})}),c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:z.name}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ee.map(ye=>{const xe=z.weeklyHours[ye.key];return c.jsxs("span",{className:"inline-block px-2 py-0.5 bg-white text-violet-700 border border-violet-200 rounded text-xs font-medium",children:[ye.short," ",Vr(xe.start),"",Vr(xe.end),xe.break&&c.jsxs("span",{className:"text-amber-600 ml-1",children:["(break ",Vr(xe.break.start),"",Vr(xe.break.end),")"]})]},ye.key)})})]})]},z.id)})}),c.jsx("p",{className:"text-xs text-violet-500 mt-3",children:"Slots auto-generate on the booking page. Manage hours in the Staff tab."})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Monthly Overview"}),c.jsx(v6,{slotsByDate:vt,bookingsByDate:be,selectedDate:Q,onSelectDate:ue,recurringDayFlags:Gt}),Q&&c.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[c.jsxs("span",{className:"text-sm text-slate-600",children:["Showing: ",c.jsx("strong",{className:"text-slate-900",children:new Date(Q+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),c.jsx("button",{onClick:()=>ue(null),className:"text-xs px-3 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-all border border-slate-200",children:"Show All"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:It.length>0?"Add Custom Slots":"Create Time Slots"}),It.length>0&&c.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Use this for one-off availability outside regular hours."}),!It.length&&c.jsx("div",{className:"mb-4"}),c.jsxs("form",{onSubmit:we,className:"space-y-4",children:[B.length>0&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Staff Member"}),c.jsxs("select",{value:ke.staffId,onChange:z=>G({...ke,staffId:z.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[c.jsx("option",{value:"",children:"Select a staff member"}),B.map(z=>c.jsxs("option",{value:z.id,children:[z.name,z.role?`  ${z.role}`:""]},z.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Date"}),c.jsx("input",{type:"date",value:ke.date,onChange:z=>G({...ke,date:z.target.value}),required:!0,min:new Date().toISOString().split("T")[0],className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Start"}),c.jsx("input",{type:"time",value:ke.startTime,onChange:z=>G({...ke,startTime:z.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"End"}),c.jsx("input",{type:"time",value:ke.endTime,onChange:z=>G({...ke,endTime:z.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Slot Duration"}),c.jsxs("select",{value:ke.slotDuration,onChange:z=>G({...ke,slotDuration:z.target.value}),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[c.jsx("option",{value:"15",children:"15 minutes"}),c.jsx("option",{value:"30",children:"30 minutes"}),c.jsx("option",{value:"45",children:"45 minutes"}),c.jsx("option",{value:"60",children:"1 hour"}),c.jsx("option",{value:"90",children:"1.5 hours"}),c.jsx("option",{value:"120",children:"2 hours"})]})]}),c.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[c.jsx(Td,{className:"w-4 h-4"}),"Generate Slots"]})]}),c.jsxs("div",{className:"mt-4 p-3.5 bg-blue-50 border border-blue-100 rounded-xl text-xs text-slate-600 leading-relaxed",children:[c.jsx("strong",{className:"text-slate-700",children:" Tip:"})," ",It.length>0?"Weekly hours auto-generate slots. Use this for one-off slots outside regular hours.":B.length>0?"Select a staff member, pick a date, and set working hours to create slots.":"Set your hours and slot duration. We'll create all the time slots for that day."]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-900",children:Q?"Bookings":"All Bookings"}),at.pending>0&&c.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 border border-amber-200 text-xs font-bold rounded-full",children:[at.pending," pending"]})]}),c.jsx("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:Pt.length})]}),c.jsx("div",{className:"flex items-center gap-1 mb-4 p-1 bg-slate-100 rounded-lg overflow-x-auto",children:[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"confirmed",label:"Confirmed"},{key:"cancelled",label:"Cancelled"}].map(z=>c.jsxs("button",{onClick:()=>A(z.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-semibold transition-all whitespace-nowrap ${S===z.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[z.label,c.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${S===z.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:at[z.key]})]},z.key))}),Pt.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:c.jsx(S_,{className:"w-6 h-6 text-slate-400"})}),c.jsx("p",{className:"text-sm text-slate-500 font-medium",children:S!=="all"?`No ${S} bookings`:Q?"No bookings for this date":"No bookings yet"})]}):c.jsx("div",{className:"space-y-2.5 max-h-[500px] overflow-y-auto pr-1",children:Pt.sort((z,ee)=>`${z.date}${z.time}`.localeCompare(`${ee.date}${ee.time}`)).map(z=>{const ee=z.status||"confirmed",ye={pending:"bg-amber-50 text-amber-700 border-amber-200",confirmed:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200",cancelled:"bg-slate-100 text-slate-500 border-slate-200"},xe={pending:"Pending",confirmed:"Confirmed",rejected:"Rejected",cancelled:"Cancelled"};return c.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[c.jsxs("div",{className:"flex items-start justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(C_,{className:"w-4 h-4 text-blue-600"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:z.clientName}),c.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${ye[ee]}`,children:xe[ee]}),z.recurring&&c.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",title:"Recurring appointment",children:c.jsx(Wi,{className:"w-2.5 h-2.5"})})]}),c.jsx("div",{className:"text-xs text-slate-500",children:tt(z.date,z.time)})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[ee==="pending"&&c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>se(z.id),className:"p-1.5 text-emerald-500 hover:text-emerald-700 hover:bg-emerald-50 rounded-lg transition-all",title:"Approve booking",children:c.jsx(Uc,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>De(z.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Reject booking",children:c.jsx(Ui,{className:"w-4 h-4"})})]}),ee==="confirmed"&&c.jsx("button",{onClick:()=>ge(z.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Cancel booking",children:c.jsx(Wc,{className:"w-3.5 h-3.5"})})]})]}),c.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[z.serviceName&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Za,{className:"w-3 h-3 text-blue-400"}),c.jsx("span",{className:"font-medium text-slate-700",children:z.serviceName}),z.servicePrice!=null&&c.jsxs("span",{className:"text-blue-600 font-semibold",children:["$",Number(z.servicePrice).toFixed(2)]})]}),z.staffName&&c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(ms,{className:"w-3 h-3 text-violet-400"}),c.jsx("span",{className:"text-violet-600",children:z.staffName})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(A_,{className:"w-3 h-3"}),z.clientEmail]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(R_,{className:"w-3 h-3"}),z.clientPhone]})]}),c.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[z.refCode&&c.jsxs("span",{className:"font-mono text-[10px] text-slate-400",children:["REF: ",z.refCode]}),z.recurring&&c.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-indigo-50 border border-indigo-200 rounded text-[10px] font-semibold text-indigo-600",children:" Recurring"})]})]})]},z.id)})})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("h2",{className:"text-lg font-bold text-slate-900",children:Q?"Custom Time Slots":"All Custom Time Slots"}),c.jsx("span",{className:"text-xs font-semibold text-slate-500 bg-slate-100 px-2.5 py-1 rounded-lg",children:Q?(vt[Q]||[]).length:ss.length})]}),It.length>0&&c.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Recurring slots from weekly hours auto-generate  not shown here."}),!It.length&&c.jsx("div",{className:"mb-4"}),Re.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:c.jsx(Yt,{className:"w-6 h-6 text-slate-400"})}),c.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:Q?"No custom slots for this date":"No custom slots yet"}),c.jsx("p",{className:"text-xs text-slate-400",children:It.length>0?"Recurring hours handle most scheduling.":"Use the form above to generate availability."})]}):c.jsx("div",{className:"space-y-6",children:Re.map(z=>c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100",children:new Date(z).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2.5",children:vt[z].sort((ee,ye)=>ee.time.localeCompare(ye.time)).map(ee=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3.5 text-center group hover:border-slate-300 transition-all",children:[c.jsx("div",{className:"text-sm font-bold text-slate-900 mb-0.5",children:ee.time}),c.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[ee.duration," min"]}),ee.staffName&&c.jsxs("div",{className:"text-xs text-violet-600 mb-1.5 flex items-center justify-center gap-1",children:[c.jsx(ms,{className:"w-3 h-3"}),ee.staffName]}),c.jsx("div",{className:"mb-2",children:ee.available?c.jsx("span",{className:"inline-block px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-md text-xs font-medium",children:"Available"}):c.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-50 text-red-700 border border-red-200 rounded-md text-xs font-medium",children:"Booked"})}),ee.available&&c.jsxs("button",{onClick:()=>Ge(ee.id),className:"opacity-0 group-hover:opacity-100 flex items-center justify-center gap-1 w-full px-2 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-xs font-medium transition-all border border-red-200",children:[c.jsx(Wc,{className:"w-3 h-3"}),"Remove"]})]},ee.id))})]},z))})]})]})]})]})}function D6({user:s}){const{slug:e}=Zc(),n=po(),[i,l]=j.useState(""),[u,d]=j.useState(""),[p,g]=j.useState(""),[y,b]=j.useState(!1);j.useEffect(()=>{if(!s)return;(async()=>{const C=Ds(mt(Te,"shops"),ys("slug","==",e)),H=await Ms(C);H.empty||H.docs[0].data().ownerUid===s.uid&&n(`/shop/${e}/dashboard`,{replace:!0})})()},[s,e,n]);const w=async N=>{N.preventDefault(),g(""),b(!0);try{const H=(await zw(Wr,i,u)).user,B=Ds(mt(Te,"shops"),ys("slug","==",e)),M=await Ms(B);if(M.empty){g("Shop not found"),b(!1);return}if(M.docs[0].data().ownerUid!==H.uid){g("You are not the owner of this shop"),await Wr.signOut(),b(!1);return}n(`/shop/${e}/dashboard`,{replace:!0})}catch(C){switch(C.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":g("Invalid email or password");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/too-many-requests":g("Too many failed attempts. Please try again later.");break;default:g("Login failed. Please try again.")}d("")}finally{b(!1)}};return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:c.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[c.jsx("div",{className:"text-center mb-8",children:c.jsxs(et,{to:"/",className:"inline-flex items-center gap-2.5",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:c.jsx(al,{className:"w-5 h-5 text-white"})}),c.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Book",c.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}),c.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),c.jsxs("form",{onSubmit:w,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),c.jsx("input",{type:"email",value:i,onChange:N=>{l(N.target.value),g("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),c.jsx("input",{type:"password",value:u,onChange:N=>{d(N.target.value),g("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&c.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[c.jsx("span",{children:""})," ",p]})]}),c.jsx("button",{type:"submit",disabled:y,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:y?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):"Sign In"})]}),c.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:c.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",c.jsx(et,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs(et,{to:`/shop/${e}`,className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[c.jsx(Ja,{className:"w-3.5 h-3.5"}),"Back to booking page"]})})]})})}function P_({name:s,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const i=(s||"").split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2);return c.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:i||"?"})}function L_(){return c.jsxs(et,{to:"/",className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:c.jsx(al,{className:"w-3.5 h-3.5 text-white"})}),c.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",c.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function M6(){const{slug:s,refCode:e}=Zc(),[n,i]=j.useState(null),[l,u]=j.useState(null),[d,p]=j.useState(!0),[g,y]=j.useState(!1),[b,w]=j.useState(null),[N,C]=j.useState(null),[H,B]=j.useState(!1),[M,L]=j.useState([]),[F,Q]=j.useState([]),[ue,fe]=j.useState([]),[re,S]=j.useState([]),[A,R]=j.useState(!1),[O,k]=j.useState(!1),[U,I]=j.useState(null),[Me,ke]=j.useState(null),[G,he]=j.useState(null),[we,Ge]=j.useState(!1),[He,V]=j.useState("");j.useEffect(()=>{(async()=>{p(!0);try{const Re=Ds(mt(Te,"shops"),ys("slug","==",s)),$e=await Ms(Re);if($e.empty)y(!0);else{const Pt=$e.docs[0];i(Pt.data()),u(Pt.id)}}catch(Re){console.error("Error looking up shop:",Re),y(!0)}finally{p(!1)}})()},[s]),j.useEffect(()=>{if(!l)return;(async()=>{try{const Re=Ds(mt(Te,"shops",l,"bookings"),ys("refCode","==",e.toUpperCase())),$e=await Ms(Re);if($e.empty)B(!0);else{const Pt=$e.docs[0];w(Pt.data()),C(Pt.id)}}catch(Re){console.error("Error looking up booking:",Re),B(!0)}})()},[l,e]),j.useEffect(()=>{if(!l||!b)return;const be=ts(mt(Te,"shops",l,"bookings"),at=>{L(at.docs.map(ut=>({id:ut.id,...ut.data()})))}),Re=ts(mt(Te,"shops",l,"availability"),at=>{const ut=new Date,z=at.docs.map(ee=>({id:ee.id,...ee.data()})).filter(ee=>new Date(`${ee.date}T${ee.time}`)>ut);Q(z)}),$e=ts(mt(Te,"shops",l,"staff"),at=>{fe(at.docs.map(ut=>({id:ut.id,...ut.data()})).filter(ut=>ut.active!==!1).sort((ut,z)=>(ut.name||"").localeCompare(z.name||"")))}),Pt=ts(mt(Te,"shops",l,"services"),at=>{S(at.docs.map(ut=>({id:ut.id,...ut.data()})).filter(ut=>ut.active!==!1))});return()=>{be(),Re(),$e(),Pt()}},[l,b]);const ne=n?.bufferMinutes||0,de=j.useMemo(()=>{if(!b)return null;if(b.serviceId){const be=re.find(Re=>Re.id===b.serviceId);if(be)return be}return b.serviceName?{id:b.serviceId,name:b.serviceName,price:b.servicePrice,duration:b.serviceDuration||b.duration}:null},[b,re]),ge=j.useMemo(()=>{if(!A||!b)return[];const be=new Date,Re=de?.duration||b.duration||60;let $e=F.filter(ee=>ee.available);$e=$e.filter(ee=>ee.duration>=Re),b.staffId&&($e=$e.filter(ee=>ee.staffId===b.staffId||!ee.staffId));const Pt=b.staffId?ue.filter(ee=>ee.id===b.staffId):ue,at=eT(Pt,Re,ne,4).filter(ee=>new Date(`${ee.date}T${ee.time}`)>be),ut=nT(at,$e),z=M.filter(ee=>ee.id!==N);return tT(ut,z,ne)},[A,b,N,F,ue,M,ne,de]),Se=j.useMemo(()=>[...new Set(ge.map(be=>be.date))].sort(),[ge]),Ve=j.useMemo(()=>Me?ge.filter(be=>be.date===Me):[],[Me,ge]),se=async(be="single")=>{Ge(!0);try{if(await Nt(bt(Te,"shops",l,"bookings",N),{status:"cancelled"}),b.slotId&&!b.slotId.startsWith("wh-")&&!b.slotId.startsWith("recurring-"))try{await Nt(bt(Te,"shops",l,"availability",b.slotId),{available:!0})}catch(Re){console.warn("Could not re-open slot:",Re)}if(be==="future"&&b.recurringGroupId){const Re=M.filter($e=>$e.recurringGroupId===b.recurringGroupId&&$e.id!==N&&$e.date>=b.date&&($e.status==="pending"||$e.status==="confirmed"));for(const $e of Re)if(await Nt(bt(Te,"shops",l,"bookings",$e.id),{status:"cancelled"}),$e.slotId&&!$e.slotId.startsWith("wh-")&&!$e.slotId.startsWith("recurring-"))try{await Nt(bt(Te,"shops",l,"availability",$e.slotId),{available:!0})}catch(Pt){console.warn("Could not re-open slot:",Pt)}}w(Re=>({...Re,status:"cancelled"})),k(!1),I(null),V("cancelled")}catch(Re){console.error("Cancel error:",Re),V("error")}finally{Ge(!1)}},De=async()=>{if(G){Ge(!0);try{const be={date:G.date,time:G.time,slotId:G.id};if(G.staffId&&(be.staffId=G.staffId,be.staffName=G.staffName||""),n?.requireApproval&&(be.status="pending"),b.slotId&&!b.slotId.startsWith("wh-"))try{await Nt(bt(Te,"shops",l,"availability",b.slotId),{available:!0})}catch(Re){console.warn("Could not re-open old slot:",Re)}if(!G.generated&&G.id)try{await Nt(bt(Te,"shops",l,"availability",G.id),{available:!1})}catch(Re){console.warn("Could not block new slot:",Re)}await Nt(bt(Te,"shops",l,"bookings",N),be),w(Re=>({...Re,...be})),R(!1),ke(null),he(null),V("rescheduled")}catch(be){console.error("Reschedule error:",be),V("error")}finally{Ge(!1)}}},Ae=be=>new Date(be+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),Fe=be=>{const[Re,$e]=be.split(":"),Pt=parseInt(Re),at=Pt>=12?"PM":"AM";return`${Pt%12||12}:${$e} ${at}`},tt=be=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(be),Gt=be=>{if(!be)return"";if(be<60)return`${be} min`;const Re=Math.floor(be/60),$e=be%60;return $e?`${Re}h ${$e}m`:`${Re} hour${Re>1?"s":""}`};if(d)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[c.jsx("div",{className:"spinner"}),c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:c.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[c.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:c.jsx(Yt,{className:"w-8 h-8 text-slate-400"})}),c.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),c.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,c.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),c.jsxs(et,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[c.jsx(Ja,{className:"w-4 h-4"}),"Go Home"]})]})});if(H)return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[c.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),c.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),c.jsx(L_,{})]})}),c.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:c.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[c.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:c.jsx(Kp,{className:"w-8 h-8 text-amber-500"})}),c.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Not Found"}),c.jsx("p",{className:"text-slate-600 mb-2",children:"No booking found with reference code"}),c.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),c.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[c.jsx(Yt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[c.jsx("div",{className:"spinner"}),c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking"})]})});const It=b.status||"confirmed",pt=It==="pending"||It==="confirmed",gn=It==="cancelled",sn=It==="rejected",ss={pending:{label:"Pending Approval",color:"bg-amber-100 text-amber-700 border-amber-200",icon:ns},confirmed:{label:"Confirmed",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:xa},cancelled:{label:"Cancelled",color:"bg-slate-100 text-slate-500 border-slate-200",icon:Ui},rejected:{label:"Rejected",color:"bg-red-100 text-red-700 border-red-200",icon:Ui}},zn=ss[It]||ss.confirmed,vt=zn.icon;return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[c.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),c.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),c.jsx(L_,{})]})}),c.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[He==="rescheduled"&&c.jsx("div",{className:"mb-6 animate-scale-in",children:c.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(XE,{className:"w-8 h-8 text-emerald-600"})}),c.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Rescheduled!"}),c.jsx("p",{className:"text-slate-600 mb-4",children:n?.requireApproval?"Your booking has been rescheduled and is pending approval.":"Your booking has been successfully rescheduled."}),c.jsx("button",{onClick:()=>V(""),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View updated details "})]})}),He==="cancelled"&&c.jsx("div",{className:"mb-6 animate-scale-in",children:c.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-lg p-8 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Ui,{className:"w-8 h-8 text-slate-400"})}),c.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Cancelled"}),c.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking has been cancelled."}),c.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[c.jsx(Yt,{className:"w-4 h-4"}),"Book a new appointment"]})]})}),He==="error"&&c.jsx("div",{className:"mb-6 animate-scale-in",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Something went wrong. Please try again."})]})}),!A&&c.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Your Booking"}),c.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference: ",c.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),(gn||sn)&&c.jsxs("div",{className:`mb-4 p-4 rounded-xl border flex items-center gap-3 ${gn?"bg-slate-50 border-slate-200":"bg-red-50 border-red-200"}`,children:[c.jsx(vt,{className:`w-5 h-5 ${gn?"text-slate-400":"text-red-500"}`}),c.jsx("span",{className:`font-medium text-sm ${gn?"text-slate-600":"text-red-700"}`,children:gn?"This booking has been cancelled.":"This booking has been rejected by the shop."})]}),b.recurringGroupId&&c.jsxs("div",{className:"mb-4 p-3.5 bg-blue-50 border border-blue-200 rounded-xl flex items-center gap-2.5",children:[c.jsx(Wi,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Part of a recurring series"}),b.recurringInterval&&c.jsxs("p",{className:"text-xs text-blue-600 mt-0.5",children:["Repeats every ",b.recurringInterval==="weekly"?"week":b.recurringInterval==="biweekly"?"2 weeks":b.recurringInterval==="fourweekly"?"4 weeks":b.recurringInterval==="monthly"?"month":b.recurringInterval]})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),c.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${zn.color}`,children:[c.jsx(vt,{className:"w-3.5 h-3.5"}),zn.label]})]}),b.serviceName&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:c.jsx(Za,{className:"w-4 h-4 text-blue-600"})}),c.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.servicePrice!=null&&c.jsx("span",{className:"font-bold text-blue-600",children:tt(b.servicePrice)})]}),b.staffName&&c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx(P_,{name:b.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),c.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:c.jsx(Yt,{className:"w-4 h-4 text-slate-600"})}),c.jsxs("span",{className:"font-semibold text-slate-800",children:[Ae(b.date)," at ",Fe(b.time)]})]}),c.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:c.jsx(ns,{className:"w-4 h-4 text-slate-500"})}),c.jsx("span",{children:Gt(b.serviceDuration||b.duration)})]})]}),pt&&!He&&c.jsx("div",{className:"space-y-3",children:O?c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 animate-scale-in",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:c.jsx(Kp,{className:"w-5 h-5 text-red-500"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-slate-900",children:"Are you sure?"}),c.jsx("p",{className:"text-sm text-slate-600",children:"This action cannot be undone."})]})]}),b.recurringGroupId&&!U&&c.jsxs("div",{className:"space-y-2 mb-4",children:[c.jsxs("button",{onClick:()=>I("single"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[c.jsx(Ui,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this appointment only"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments in the series remain active"})]})]}),c.jsxs("button",{onClick:()=>I("future"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[c.jsx(Wi,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future appointments"}),c.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments in the series"})]})]}),c.jsx("button",{onClick:()=>k(!1),className:"w-full px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Go Back"})]}),(!b.recurringGroupId||U)&&c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{onClick:()=>se(U||"single"),disabled:we,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[we?c.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}):c.jsx(Ui,{className:"w-4 h-4"}),we?"Cancelling":U==="future"?"Cancel All Future":"Yes, Cancel"]}),c.jsx("button",{onClick:()=>{U?I(null):k(!1)},disabled:we,className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Go Back"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:()=>{R(!0),V("")},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[c.jsx(JE,{className:"w-4 h-4"}),"Reschedule Booking"]}),c.jsxs("button",{onClick:()=>{k(!0),I(null)},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-white hover:bg-red-50 text-red-600 rounded-xl font-semibold border border-red-200 hover:border-red-300 transition-all",children:[c.jsx(Ui,{className:"w-4 h-4"}),"Cancel Booking"]})]})}),(gn||sn)&&c.jsx("div",{className:"text-center",children:c.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[c.jsx(Yt,{className:"w-4 h-4"}),"Book Again"]})})]}),A&&c.jsxs("div",{className:"animate-fade-in",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[c.jsxs("button",{onClick:()=>{R(!1),ke(null),he(null)},className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[c.jsx(Ja,{className:"w-3.5 h-3.5"}),"Back to Booking"]}),b.serviceName&&c.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[c.jsx(Za,{className:"w-3.5 h-3.5 text-blue-500"}),c.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName}),b.servicePrice!=null&&c.jsx("span",{className:"text-blue-600 font-bold",children:tt(b.servicePrice)})]}),b.staffName&&c.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[c.jsx(P_,{name:b.staffName,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),c.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a New Time"}),c.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Pick a new date and time for your appointment"})]}),Se.length===0?c.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:c.jsx(Yt,{className:"w-8 h-8 text-slate-400"})}),c.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),c.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"No time slots are currently available. Check back soon!"})]}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"mb-8",children:c.jsx(ZE,{availableDates:Se,selectedDate:Me,onSelectDate:be=>{ke(be),he(null)}})}),Me&&c.jsxs("div",{className:"animate-slide-down",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",Ae(Me)]}),c.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[Ve.length," slot",Ve.length!==1?"s":""]})]}),Ve.length===0?c.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:c.jsx("p",{className:"text-slate-500",children:"No slots available for this date"})}):c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:Ve.sort((be,Re)=>be.time.localeCompare(Re.time)).map(be=>{const Re=G?.id===be.id;return c.jsxs("button",{onClick:()=>he(be),className:`group border rounded-xl p-4 transition-all duration-200 text-center ${Re?"bg-blue-600 border-blue-600 text-white shadow-md shadow-blue-600/30":"bg-white border-slate-200 hover:border-blue-400 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5"}`,children:[c.jsx("div",{className:`text-lg font-bold mb-1 ${Re?"text-white":"text-slate-900 group-hover:text-blue-700"} transition-colors`,children:Fe(be.time)}),be.staffName&&c.jsxs("div",{className:`text-xs mb-0.5 flex items-center justify-center gap-1 ${Re?"text-blue-100":"text-violet-600"}`,children:[c.jsx(ms,{className:"w-3 h-3"}),be.staffName]}),c.jsx("div",{className:`text-xs ${Re?"text-blue-200":"text-slate-400"}`,children:Gt(b.serviceDuration||b.duration)})]},be.id)})}),G&&c.jsxs("div",{className:"mt-6 animate-fade-in",children:[c.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 shadow-sm p-5 mb-4",children:[c.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"New Appointment Time"}),c.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[c.jsx(Yt,{className:"w-4 h-4 text-blue-500"}),c.jsxs("span",{className:"font-semibold text-slate-800",children:[Ae(G.date)," at ",Fe(G.time)]})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:De,disabled:we,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:we?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Rescheduling"]}):c.jsxs(c.Fragment,{children:[c.jsx(xa,{className:"w-4 h-4"}),"Confirm Reschedule"]})}),c.jsx("button",{onClick:()=>he(null),className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]})]}),!Me&&c.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]})]}),c.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:c.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:c.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",c.jsx(et,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function U_(){return c.jsxs(et,{to:"/",className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:c.jsx(al,{className:"w-3.5 h-3.5 text-white"})}),c.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Book",c.jsx("span",{className:"text-blue-600",children:"Flow"})]})]})}function O6(s){if(!s)return"Any time";const e=n=>{const[i,l]=n.split(":").map(Number),u=i>=12?"PM":"AM",d=i%12||12;return l===0?`${d}${u}`:`${d}:${l.toString().padStart(2,"0")}${u}`};return s.start==="00:00"&&s.end==="23:59"?"Any time":`${e(s.start)}  ${e(s.end)}`}function V6(s){if(!s||s.length===0)return"Any day";const e={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return s.map(n=>e[n]||n).join(", ")}function P6(s){if(!s)return"";const e=new Date,n=new Date(s),i=e-n,l=Math.floor(i/6e4);if(l<60)return`${l}m ago`;const u=Math.floor(l/60);return u<24?`${u}h ago`:`${Math.floor(u/24)}d ago`}function L6(){const{slug:s,refCode:e}=Zc(),[n,i]=j.useState(null),[l,u]=j.useState(null),[d,p]=j.useState(!0),[g,y]=j.useState(!1),[b,w]=j.useState(null),[N,C]=j.useState(!1),[H,B]=j.useState(null);if(j.useEffect(()=>{(async()=>{p(!0);try{const re=Ds(mt(Te,"shops"),ys("slug","==",s)),S=await Ms(re);if(S.empty)y(!0);else{const A=S.docs[0];i(A.data()),u(A.id)}}catch(re){console.error("Error looking up shop:",re),y(!0)}finally{p(!1)}})()},[s]),j.useEffect(()=>{if(!l)return;(async()=>{try{const re=Ds(mt(Te,"shops",l,"waitlist"),ys("refCode","==",e.toUpperCase())),S=await Ms(re);if(S.empty){C(!0);return}const A=S.docs[0],R={id:A.id,...A.data()};w(R);const O=Ds(mt(Te,"shops",l,"waitlist"),ys("serviceId","==",R.serviceId),ys("status","==","waiting")),I=(await Ms(O)).docs.map(Me=>({id:Me.id,...Me.data()})).sort((Me,ke)=>(Me.createdAt||"").localeCompare(ke.createdAt||"")).findIndex(Me=>Me.id===R.id);I>=0&&B(I+1)}catch(re){console.error("Error looking up waitlist entry:",re),C(!0)}})()},[l,e]),d)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[c.jsx("div",{className:"spinner"}),c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:c.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[c.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:c.jsx(Yt,{className:"w-8 h-8 text-slate-400"})}),c.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),c.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,c.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),c.jsxs(et,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[c.jsx(Ja,{className:"w-4 h-4"}),"Go Home"]})]})});if(N)return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[c.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),c.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),c.jsx(U_,{})]})}),c.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:c.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[c.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:c.jsx(Kp,{className:"w-8 h-8 text-amber-500"})}),c.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Waitlist Entry Not Found"}),c.jsx("p",{className:"text-slate-600 mb-2",children:"No waitlist entry found with reference code"}),c.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),c.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[c.jsx(Yt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return c.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[c.jsx("div",{className:"spinner"}),c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading waitlist"})]})});const M={waiting:{label:"Waiting",color:"bg-blue-100 text-blue-700 border-blue-200",icon:ns},notified:{label:"Slot Available!",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Wl},booked:{label:"Booked",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:xa},expired:{label:"Expired",color:"bg-slate-100 text-slate-500 border-slate-200",icon:ns}},L=M[b.status]||M.waiting,F=L.icon,Q=fe=>fe?new Date(fe+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",ue=fe=>{if(!fe)return"";const[re,S]=fe.split(":"),A=parseInt(re),R=A>=12?"PM":"AM";return`${A%12||12}:${S} ${R}`};return c.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[c.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),c.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),c.jsx(U_,{})]})}),c.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:c.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[b.status==="notified"&&c.jsx("div",{className:"mb-6 animate-scale-in",children:c.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Wl,{className:"w-8 h-8 text-emerald-600"})}),c.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"A Slot Is Available!"}),c.jsxs("p",{className:"text-slate-600 mb-4",children:["A slot has opened up for ",b.serviceName,". Book now before it's taken!"]}),b.notifiedSlot&&c.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-xl text-sm text-emerald-700 font-medium mb-4",children:[c.jsx(Yt,{className:"w-4 h-4"}),Q(b.notifiedSlot.date)," at"," ",ue(b.notifiedSlot.time),b.notifiedSlot.staffName&&c.jsxs("span",{className:"text-emerald-600",children:[" ","with ",b.notifiedSlot.staffName]})]}),c.jsx("div",{children:c.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-emerald-600/20 hover:shadow-lg",children:[c.jsx(Yt,{className:"w-4 h-4"}),"Book Now "]})})]})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Waitlist Status"}),c.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference:"," ",c.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),c.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),c.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${L.color}`,children:[c.jsx(F,{className:"w-3.5 h-3.5"}),L.label]})]}),b.status==="waiting"&&H!=null&&c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Position"}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx(Yp,{className:"w-4 h-4 text-blue-500"}),c.jsxs("span",{className:"font-bold text-slate-900 text-lg",children:["#",H]}),c.jsx("span",{className:"text-sm text-slate-500",children:"in line"})]})]}),b.serviceName&&c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:c.jsx(Za,{className:"w-4 h-4 text-blue-600"})}),c.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.staffName&&c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center",children:c.jsx(ms,{className:"w-4 h-4 text-violet-600"})}),c.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),b.preferredDate&&c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:c.jsx(Yt,{className:"w-4 h-4 text-slate-600"})}),c.jsxs("span",{className:"text-sm text-slate-700",children:["Preferred: ",Q(b.preferredDate)]})]}),b.preferredDays&&b.preferredDays.length>0&&c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:c.jsx(Yt,{className:"w-4 h-4 text-slate-600"})}),c.jsxs("span",{className:"text-sm text-slate-700",children:["Days: ",V6(b.preferredDays)]})]}),b.preferredTimeRange&&c.jsxs("div",{className:"flex items-center gap-2.5",children:[c.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:c.jsx(ns,{className:"w-4 h-4 text-slate-500"})}),c.jsxs("span",{className:"text-sm text-slate-700",children:["Time: ",O6(b.preferredTimeRange)]})]}),b.createdAt&&c.jsxs("div",{className:"pt-2 border-t border-slate-100 text-xs text-slate-400",children:["Joined ",P6(b.createdAt)]})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs(et,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[c.jsx(Yt,{className:"w-4 h-4"}),b.status==="notified"?"Book Now":"Check Available Slots"]})})]})}),c.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:c.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:c.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",c.jsx(et,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"BookFlow"})]})})})]})}function U6(){const[s,e]=j.useState(null),[n,i]=j.useState(!0);return j.useEffect(()=>{const l=sj(Wr,u=>{e(u),i(!1)});return()=>l()},[]),n?c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[c.jsx("div",{className:"spinner"}),c.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):c.jsx(dS,{children:c.jsxs(q2,{children:[c.jsx(pa,{path:"/",element:c.jsx(o6,{})}),c.jsx(pa,{path:"/register",element:c.jsx(u6,{})}),c.jsx(pa,{path:"/login",element:c.jsx(h6,{user:s})}),c.jsx(pa,{path:"/shop/:slug",element:c.jsx(b6,{})}),c.jsx(pa,{path:"/shop/:slug/booking/:refCode",element:c.jsx(M6,{})}),c.jsx(pa,{path:"/shop/:slug/waitlist/:refCode",element:c.jsx(L6,{})}),c.jsx(pa,{path:"/shop/:slug/login",element:c.jsx(D6,{user:s})}),c.jsx(pa,{path:"/shop/:slug/dashboard",element:c.jsx(k6,{user:s})}),c.jsx(pa,{path:"*",element:c.jsx(B2,{to:"/",replace:!0})})]})})}HN.createRoot(document.getElementById("root")).render(c.jsx(VN.StrictMode,{children:c.jsx(U6,{})}));
