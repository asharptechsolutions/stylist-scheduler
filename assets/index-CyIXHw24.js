(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function F0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ep={exports:{}},Vc={};var jv;function iS(){if(jv)return Vc;jv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:d,ref:o!==void 0?o:null,props:u}}return Vc.Fragment=e,Vc.jsx=n,Vc.jsxs=n,Vc}var Ev;function lS(){return Ev||(Ev=1,Ep.exports=iS()),Ep.exports}var i=lS(),Sp={exports:{}},Xe={};var Sv;function oS(){if(Sv)return Xe;Sv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),N=Symbol.iterator;function T(O){return O===null||typeof O!="object"?null:(O=N&&O[N]||O["@@iterator"],typeof O=="function"?O:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,M={};function U(O,te,ce){this.props=O,this.context=te,this.refs=M,this.updater=ce||L}U.prototype.isReactComponent={},U.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},U.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function G(){}G.prototype=U.prototype;function q(O,te,ce){this.props=O,this.context=te,this.refs=M,this.updater=ce||L}var ie=q.prototype=new G;ie.constructor=q,V(ie,U.prototype),ie.isPureReactComponent=!0;var ue=Array.isArray;function W(){}var E={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function k(O,te,ce){var pe=ce.ref;return{$$typeof:s,type:O,key:te,ref:pe!==void 0?pe:null,props:ce}}function B(O,te){return k(O.type,te,O.props)}function P(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function H(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ce){return te[ce]})}var I=/\/+/g;function $(O,te){return typeof O=="object"&&O!==null&&O.key!=null?H(""+O.key):te.toString(36)}function D(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(W,W):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function R(O,te,ce,pe,we){var Ie=typeof O;(Ie==="undefined"||Ie==="boolean")&&(O=null);var ze=!1;if(O===null)ze=!0;else switch(Ie){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(O.$$typeof){case s:case e:ze=!0;break;case y:return ze=O._init,R(ze(O._payload),te,ce,pe,we)}}if(ze)return we=we(O),ze=pe===""?"."+$(O,0):pe,ue(we)?(ce="",ze!=null&&(ce=ze.replace(I,"$&/")+"/"),R(we,te,ce,"",function(nn){return nn})):we!=null&&(P(we)&&(we=B(we,ce+(we.key==null||O&&O.key===we.key?"":(""+we.key).replace(I,"$&/")+"/")+ze)),te.push(we)),1;ze=0;var Rt=pe===""?".":pe+":";if(ue(O))for(var mt=0;mt<O.length;mt++)pe=O[mt],Ie=Rt+$(pe,mt),ze+=R(pe,te,ce,Ie,we);else if(mt=T(O),typeof mt=="function")for(O=mt.call(O),mt=0;!(pe=O.next()).done;)pe=pe.value,Ie=Rt+$(pe,mt++),ze+=R(pe,te,ce,Ie,we);else if(Ie==="object"){if(typeof O.then=="function")return R(D(O),te,ce,pe,we);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ze}function K(O,te,ce){if(O==null)return O;var pe=[],we=0;return R(O,pe,"","",function(Ie){return te.call(ce,Ie,we++)}),pe}function oe(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(ce){(O._status===0||O._status===-1)&&(O._status=1,O._result=ce)},function(ce){(O._status===0||O._status===-1)&&(O._status=2,O._result=ce)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var Se=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ge={map:K,forEach:function(O,te,ce){K(O,function(){te.apply(this,arguments)},ce)},count:function(O){var te=0;return K(O,function(){te++}),te},toArray:function(O){return K(O,function(te){return te})||[]},only:function(O){if(!P(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Xe.Activity=w,Xe.Children=ge,Xe.Component=U,Xe.Fragment=n,Xe.Profiler=o,Xe.PureComponent=q,Xe.StrictMode=r,Xe.Suspense=g,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return E.H.useMemoCache(O)}},Xe.cache=function(O){return function(){return O.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(O,te,ce){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var pe=V({},O.props),we=O.key;if(te!=null)for(Ie in te.key!==void 0&&(we=""+te.key),te)!A.call(te,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&te.ref===void 0||(pe[Ie]=te[Ie]);var Ie=arguments.length-2;if(Ie===1)pe.children=ce;else if(1<Ie){for(var ze=Array(Ie),Rt=0;Rt<Ie;Rt++)ze[Rt]=arguments[Rt+2];pe.children=ze}return k(O.type,we,pe)},Xe.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Xe.createElement=function(O,te,ce){var pe,we={},Ie=null;if(te!=null)for(pe in te.key!==void 0&&(Ie=""+te.key),te)A.call(te,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(we[pe]=te[pe]);var ze=arguments.length-2;if(ze===1)we.children=ce;else if(1<ze){for(var Rt=Array(ze),mt=0;mt<ze;mt++)Rt[mt]=arguments[mt+2];we.children=Rt}if(O&&O.defaultProps)for(pe in ze=O.defaultProps,ze)we[pe]===void 0&&(we[pe]=ze[pe]);return k(O,Ie,we)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(O){return{$$typeof:p,render:O}},Xe.isValidElement=P,Xe.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:oe}},Xe.memo=function(O,te){return{$$typeof:x,type:O,compare:te===void 0?null:te}},Xe.startTransition=function(O){var te=E.T,ce={};E.T=ce;try{var pe=O(),we=E.S;we!==null&&we(ce,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(W,Se)}catch(Ie){Se(Ie)}finally{te!==null&&ce.types!==null&&(te.types=ce.types),E.T=te}},Xe.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},Xe.use=function(O){return E.H.use(O)},Xe.useActionState=function(O,te,ce){return E.H.useActionState(O,te,ce)},Xe.useCallback=function(O,te){return E.H.useCallback(O,te)},Xe.useContext=function(O){return E.H.useContext(O)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(O,te){return E.H.useDeferredValue(O,te)},Xe.useEffect=function(O,te){return E.H.useEffect(O,te)},Xe.useEffectEvent=function(O){return E.H.useEffectEvent(O)},Xe.useId=function(){return E.H.useId()},Xe.useImperativeHandle=function(O,te,ce){return E.H.useImperativeHandle(O,te,ce)},Xe.useInsertionEffect=function(O,te){return E.H.useInsertionEffect(O,te)},Xe.useLayoutEffect=function(O,te){return E.H.useLayoutEffect(O,te)},Xe.useMemo=function(O,te){return E.H.useMemo(O,te)},Xe.useOptimistic=function(O,te){return E.H.useOptimistic(O,te)},Xe.useReducer=function(O,te,ce){return E.H.useReducer(O,te,ce)},Xe.useRef=function(O){return E.H.useRef(O)},Xe.useState=function(O){return E.H.useState(O)},Xe.useSyncExternalStore=function(O,te,ce){return E.H.useSyncExternalStore(O,te,ce)},Xe.useTransition=function(){return E.H.useTransition()},Xe.version="19.2.4",Xe}var Tv;function q0(){return Tv||(Tv=1,Sp.exports=oS()),Sp.exports}var j=q0();const $t=F0(j);var Tp={exports:{}},Lc={},Ap={exports:{}},Cp={};var Av;function cS(){return Av||(Av=1,(function(s){function e(R,K){var oe=R.length;R.push(K);e:for(;0<oe;){var Se=oe-1>>>1,ge=R[Se];if(0<o(ge,K))R[Se]=K,R[oe]=ge,oe=Se;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var K=R[0],oe=R.pop();if(oe!==K){R[0]=oe;e:for(var Se=0,ge=R.length,O=ge>>>1;Se<O;){var te=2*(Se+1)-1,ce=R[te],pe=te+1,we=R[pe];if(0>o(ce,oe))pe<ge&&0>o(we,ce)?(R[Se]=we,R[pe]=oe,Se=pe):(R[Se]=ce,R[te]=oe,Se=te);else if(pe<ge&&0>o(we,oe))R[Se]=we,R[pe]=oe,Se=pe;else break e}}return K}function o(R,K){var oe=R.sortIndex-K.sortIndex;return oe!==0?oe:R.id-K.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],x=[],y=1,w=null,N=3,T=!1,L=!1,V=!1,M=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function ie(R){for(var K=n(x);K!==null;){if(K.callback===null)r(x);else if(K.startTime<=R)r(x),K.sortIndex=K.expirationTime,e(g,K);else break;K=n(x)}}function ue(R){if(V=!1,ie(R),!L)if(n(g)!==null)L=!0,W||(W=!0,H());else{var K=n(x);K!==null&&D(ue,K.startTime-R)}}var W=!1,E=-1,A=5,k=-1;function B(){return M?!0:!(s.unstable_now()-k<A)}function P(){if(M=!1,W){var R=s.unstable_now();k=R;var K=!0;try{e:{L=!1,V&&(V=!1,G(E),E=-1),T=!0;var oe=N;try{t:{for(ie(R),w=n(g);w!==null&&!(w.expirationTime>R&&B());){var Se=w.callback;if(typeof Se=="function"){w.callback=null,N=w.priorityLevel;var ge=Se(w.expirationTime<=R);if(R=s.unstable_now(),typeof ge=="function"){w.callback=ge,ie(R),K=!0;break t}w===n(g)&&r(g),ie(R)}else r(g);w=n(g)}if(w!==null)K=!0;else{var O=n(x);O!==null&&D(ue,O.startTime-R),K=!1}}break e}finally{w=null,N=oe,T=!1}K=void 0}}finally{K?H():W=!1}}}var H;if(typeof q=="function")H=function(){q(P)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,$=I.port2;I.port1.onmessage=P,H=function(){$.postMessage(null)}}else H=function(){U(P,0)};function D(R,K){E=U(function(){R(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(R){R.callback=null},s.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(R){switch(N){case 1:case 2:case 3:var K=3;break;default:K=N}var oe=N;N=K;try{return R()}finally{N=oe}},s.unstable_requestPaint=function(){M=!0},s.unstable_runWithPriority=function(R,K){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var oe=N;N=R;try{return K()}finally{N=oe}},s.unstable_scheduleCallback=function(R,K,oe){var Se=s.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Se+oe:Se):oe=Se,R){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=oe+ge,R={id:y++,callback:K,priorityLevel:R,startTime:oe,expirationTime:ge,sortIndex:-1},oe>Se?(R.sortIndex=oe,e(x,R),n(g)===null&&R===n(x)&&(V?(G(E),E=-1):V=!0,D(ue,oe-Se))):(R.sortIndex=ge,e(g,R),L||T||(L=!0,W||(W=!0,H()))),R},s.unstable_shouldYield=B,s.unstable_wrapCallback=function(R){var K=N;return function(){var oe=N;N=K;try{return R.apply(this,arguments)}finally{N=oe}}}})(Cp)),Cp}var Cv;function uS(){return Cv||(Cv=1,Ap.exports=cS()),Ap.exports}var Rp={exports:{}},Hn={};var Rv;function dS(){if(Rv)return Hn;Rv=1;var s=q0();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)x+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,x,y){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:x,implementation:y}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Hn.createPortal=function(g,x){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(g,x,null,y)},Hn.flushSync=function(g){var x=d.T,y=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=x,r.p=y,r.d.f()}},Hn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(g,x))},Hn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Hn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var y=x.as,w=p(y,x.crossOrigin),N=typeof x.integrity=="string"?x.integrity:void 0,T=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;y==="style"?r.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:N,fetchPriority:T}):y==="script"&&r.d.X(g,{crossOrigin:w,integrity:N,fetchPriority:T,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Hn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var y=p(x.as,x.crossOrigin);r.d.M(g,{crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(g)},Hn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var y=x.as,w=p(y,x.crossOrigin);r.d.L(g,y,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Hn.preloadModule=function(g,x){if(typeof g=="string")if(x){var y=p(x.as,x.crossOrigin);r.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:y,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(g)},Hn.requestFormReset=function(g){r.d.r(g)},Hn.unstable_batchedUpdates=function(g,x){return g(x)},Hn.useFormState=function(g,x,y){return d.H.useFormState(g,x,y)},Hn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Hn.version="19.2.4",Hn}var kv;function hS(){if(kv)return Rp.exports;kv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rp.exports=dS(),Rp.exports}var Iv;function fS(){if(Iv)return Lc;Iv=1;var s=uS(),e=q0(),n=hS();function r(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var a=t,l=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(l=a.return),t=a.return;while(t)}return a.tag===3?l:null}function d(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function p(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function x(t){var a=t.alternate;if(!a){if(a=u(t),a===null)throw Error(r(188));return a!==t?null:t}for(var l=t,c=a;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return g(f),t;if(m===c)return g(f),a;m=m.sibling}throw Error(r(188))}if(l.return!==c.return)l=f,c=m;else{for(var v=!1,S=f.child;S;){if(S===l){v=!0,l=f,c=m;break}if(S===c){v=!0,c=f,l=m;break}S=S.sibling}if(!v){for(S=m.child;S;){if(S===l){v=!0,l=m,c=f;break}if(S===c){v=!0,c=m,l=f;break}S=S.sibling}if(!v)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?t:a}function y(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=y(t),a!==null)return a;t=t.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),q=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ue=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function H(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function $(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case U:return"Profiler";case M:return"StrictMode";case ue:return"Suspense";case W:return"SuspenseList";case k:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case L:return"Portal";case q:return t.displayName||"Context";case G:return(t._context.displayName||"Context")+".Consumer";case ie:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case E:return a=t.displayName||null,a!==null?a:$(t.type)||"Memo";case A:a=t._payload,t=t._init;try{return $(t(a))}catch{}}return null}var D=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},Se=[],ge=-1;function O(t){return{current:t}}function te(t){0>ge||(t.current=Se[ge],Se[ge]=null,ge--)}function ce(t,a){ge++,Se[ge]=t.current,t.current=a}var pe=O(null),we=O(null),Ie=O(null),ze=O(null);function Rt(t,a){switch(ce(Ie,a),ce(we,t),ce(pe,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Yy(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Yy(a),t=Wy(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}te(pe),ce(pe,t)}function mt(){te(pe),te(we),te(Ie)}function nn(t){t.memoizedState!==null&&ce(ze,t);var a=pe.current,l=Wy(a,t.type);a!==l&&(ce(we,t),ce(pe,l))}function se(t){we.current===t&&(te(pe),te(we)),ze.current===t&&(te(ze),Dc._currentValue=oe)}var Ne,de;function Ae(t){if(Ne===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Ne=a&&a[1]||"",de=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ne+t+de}var De=!1;function Le(t,a){if(!t||De)return"";De=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(le){var ne=le}Reflect.construct(t,[],xe)}else{try{xe.call()}catch(le){ne=le}t.call(xe.prototype)}}else{try{throw Error()}catch(le){ne=le}(xe=t())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(le){if(le&&ne&&typeof le.stack=="string")return[le.stack,ne.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],S=m[1];if(v&&S){var z=v.split(`
`),ee=S.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===ee.length)for(c=z.length-1,f=ee.length-1;1<=c&&0<=f&&z[c]!==ee[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==ee[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==ee[f]){var he=`
`+z[c].replace(" at new "," at ");return t.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",t.displayName)),he}while(1<=c&&0<=f);break}}}finally{De=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?Ae(l):""}function nt(t,a){switch(t.tag){case 26:case 27:case 5:return Ae(t.type);case 16:return Ae("Lazy");case 13:return t.child!==a&&a!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return Le(t.type,!1);case 11:return Le(t.type.render,!1);case 1:return Le(t.type,!0);case 31:return Ae("Activity");default:return""}}function ct(t){try{var a="",l=null;do a+=nt(t,l),l=t,t=t.return;while(t);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ut=Object.prototype.hasOwnProperty,Ce=s.unstable_scheduleCallback,Pe=s.unstable_cancelCallback,ot=s.unstable_shouldYield,Kt=s.unstable_requestPaint,jt=s.unstable_now,wt=s.unstable_getCurrentPriorityLevel,$n=s.unstable_ImmediatePriority,Nt=s.unstable_UserBlockingPriority,In=s.unstable_NormalPriority,$a=s.unstable_LowPriority,Ps=s.unstable_IdlePriority,Cn=s.log,Zs=s.unstable_setDisableYieldValue,xn=null,zt=null;function F(t){if(typeof Cn=="function"&&Zs(t),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(xn,t)}catch{}}var ae=Math.clz32?Math.clz32:Ke,je=Math.log,_e=Math.LN2;function Ke(t){return t>>>=0,t===0?32:31-(je(t)/_e|0)|0}var st=256,ye=262144,fe=4194304;function Ve(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function tt(t,a,l){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=Ve(c):(v&=S,v!==0?f=Ve(v):l||(l=S&~t,l!==0&&(f=Ve(l))))):(S=c&~m,S!==0?f=Ve(S):v!==0?f=Ve(v):l||(l=c&~t,l!==0&&(f=Ve(l)))),f===0?0:a!==0&&a!==f&&(a&m)===0&&(m=f&-f,l=a&-a,m>=l||m===32&&(l&4194048)!==0)?a:f}function dt(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Ue(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $e(){var t=fe;return fe<<=1,(fe&62914560)===0&&(fe=4194304),t}function Et(t){for(var a=[],l=0;31>l;l++)a.push(t);return a}function sn(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ts(t,a,l,c,f,m){var v=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var S=t.entanglements,z=t.expirationTimes,ee=t.hiddenUpdates;for(l=v&~l;0<l;){var he=31-ae(l),xe=1<<he;S[he]=0,z[he]=-1;var ne=ee[he];if(ne!==null)for(ee[he]=null,he=0;he<ne.length;he++){var le=ne[he];le!==null&&(le.lane&=-536870913)}l&=~xe}c!==0&&ns(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(v&~a))}function ns(t,a,l){t.pendingLanes|=a,t.suspendedLanes&=~a;var c=31-ae(a);t.entangledLanes|=a,t.entanglements[c]=t.entanglements[c]|1073741824|l&261930}function ys(t,a){var l=t.entangledLanes|=a;for(t=t.entanglements;l;){var c=31-ae(l),f=1<<c;f&a|t[c]&a&&(t[c]|=a),l&=~f}}function Ha(t,a){var l=a&-a;return l=(l&42)!==0?1:ea(l),(l&(t.suspendedLanes|a))!==0?0:l}function ea(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function hn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ai(){var t=K.p;return t!==0?t:(t=window.event,t===void 0?32:xv(t.type))}function bn(t,a){var l=K.p;try{return K.p=t,a()}finally{K.p=l}}var ss=Math.random().toString(36).slice(2),an="__reactFiber$"+ss,yn="__reactProps$"+ss,vs="__reactContainer$"+ss,Ci="__reactEvents$"+ss,kf="__reactListeners$"+ss,Mu="__reactHandles$"+ss,Ou="__reactResources$"+ss,ga="__reactMarker$"+ss;function jl(t){delete t[an],delete t[yn],delete t[Ci],delete t[kf],delete t[Mu]}function xa(t){var a=t[an];if(a)return a;for(var l=t.parentNode;l;){if(a=l[vs]||l[an]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(t=tv(t);t!==null;){if(l=t[an])return l;t=tv(t)}return a}t=l,l=t.parentNode}return null}function Vs(t){if(t=t[an]||t[vs]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function ws(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(r(33))}function ba(t){var a=t[Ou];return a||(a=t[Ou]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function vn(t){t[ga]=!0}var Bo=new Set,zo={};function ya(t,a){va(t,a),va(t+"Capture",a)}function va(t,a){for(zo[t]=a,t=0;t<a.length;t++)Bo.add(a[t])}var Fo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qo={},$o={};function Pu(t){return ut.call($o,t)?!0:ut.call(qo,t)?!1:Fo.test(t)?$o[t]=!0:(qo[t]=!0,!1)}function El(t,a,l){if(Pu(a))if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+l)}}function _s(t,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+l)}}function wn(t,a,l,c){if(c===null)t.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(a,l,""+c)}}function Dn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Er(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ho(t,a,l){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,m.call(this,v)}}),Object.defineProperty(t,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Dt(t){if(!t._valueTracker){var a=Er(t)?"checked":"value";t._valueTracker=Ho(t,a,""+t[a])}}function Ri(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return t&&(c=Er(t)?t.checked?"true":"false":t.value),t=c,t!==l?(a.setValue(t),!0):!1}function wa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ki=/[\n"\\]/g;function as(t){return t.replace(ki,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Sl(t,a,l,c,f,m,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),a!=null?v==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Dn(a)):t.value!==""+Dn(a)&&(t.value=""+Dn(a)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),a!=null?Go(t,v,Dn(a)):l!=null?Go(t,v,Dn(l)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+Dn(S):t.removeAttribute("name")}function Vu(t,a,l,c,f,m,v,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),a!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||a!=null)){Dt(t);return}l=l!=null?""+Dn(l):"",a=a!=null?""+Dn(a):l,S||a===t.value||(t.value=a),t.defaultValue=a}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=S?t.checked:!!c,t.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),Dt(t)}function Go(t,a,l){a==="number"&&wa(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Sr(t,a,l,c){if(t=t.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=a.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&c&&(t[l].defaultSelected=!0)}else{for(l=""+Dn(l),a=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function Lu(t,a,l){if(a!=null&&(a=""+Dn(a),a!==t.value&&(t.value=a),l==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=l!=null?""+Dn(l):""}function Tr(t,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(D(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=Dn(a),t.defaultValue=l,c=t.textContent,c===l&&c!==""&&c!==null&&(t.value=c),Dt(t)}function rs(t,a){if(a){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=a;return}}t.textContent=a}var Uu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yo(t,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":c?t.setProperty(a,l):typeof l!="number"||l===0||Uu.has(a)?a==="float"?t.cssFloat=l:t[a]=(""+l).trim():t[a]=l+"px"}function Wo(t,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(t=t.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in a)c=a[f],a.hasOwnProperty(f)&&l[f]!==c&&Yo(t,f,c)}else for(var m in a)a.hasOwnProperty(m)&&Yo(t,m,a[m])}function Tl(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ar=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Al(t){return Ar.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ta(){}var Ko=null;function Ls(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cr=null,_a=null;function Ii(t){var a=Vs(t);if(a&&(t=a.stateNode)){var l=t[yn]||null;e:switch(t=a.stateNode,a.type){case"input":if(Sl(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+as(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==t&&c.form===t.form){var f=c[yn]||null;if(!f)throw Error(r(90));Sl(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===t.form&&Ri(c)}break e;case"textarea":Lu(t,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Sr(t,!!l.multiple,a,!1)}}}var Cl=!1;function Rr(t,a,l){if(Cl)return t(a,l);Cl=!0;try{var c=t(a);return c}finally{if(Cl=!1,(Cr!==null||_a!==null)&&(Dd(),Cr&&(a=Cr,t=_a,_a=Cr=null,Ii(a),t)))for(a=0;a<t.length;a++)Ii(t[a])}}function na(t,a){var l=t.stateNode;if(l===null)return null;var c=l[yn]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Di=!1;if(Us)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Di=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch{Di=!1}var Na=null,Qo=null,Mi=null;function Xo(){if(Mi)return Mi;var t,a=Qo,l=a.length,c,f="value"in Na?Na.value:Na.textContent,m=f.length;for(t=0;t<l&&a[t]===f[t];t++);var v=l-t;for(c=1;c<=v&&a[l-c]===f[m-c];c++);return Mi=f.slice(t,1<c?1-c:void 0)}function Oi(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Ga(){return!0}function sa(){return!1}function Pn(t){function a(l,c,f,m,v){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(l=t[S],this[S]=l?l(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ga:sa,this.isPropagationStopped=sa,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),a}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=Pn(Ya),kr=w({},Ya,{view:0,detail:0}),Jo=Pn(kr),Ir,Rl,Ea,kl=w({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ea&&(Ea&&t.type==="mousemove"?(Ir=t.screenX-Ea.screenX,Rl=t.screenY-Ea.screenY):Rl=Ir=0,Ea=t),Ir)},movementY:function(t){return"movementY"in t?t.movementY:Rl}}),Zo=Pn(kl),Pi=w({},kl,{dataTransfer:0}),zu=Pn(Pi),Fu=w({},kr,{relatedTarget:0}),Vi=Pn(Fu),ec=w({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=Pn(ec),Il=w({},Ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$u=Pn(Il),Hu=w({},Ya,{data:0}),Sa=Pn(Hu),Gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ku(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=Wu[t])?!!a[t]:!1}function Dr(){return Ku}var Xn=w({},kr,{key:function(t){if(t.key){var a=Gu[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Oi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Yu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dr,charCode:function(t){return t.type==="keypress"?Oi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qu=Pn(Xn),Xu=w({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wa=Pn(Xu),h=w({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dr}),b=Pn(h),_=w({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=Pn(_),J=w({},kl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Pn(J),Te=w({},Ya,{newState:0,oldState:0}),at=Pn(Te),fn=[9,13,27,32],At=Us&&"CompositionEvent"in window,Qt=null;Us&&"documentMode"in document&&(Qt=document.documentMode);var Bs=Us&&"TextEvent"in window&&!Qt,Ta=Us&&(!At||Qt&&8<Qt&&11>=Qt),aa=" ",ra=!1;function Li(t,a){switch(t){case"keyup":return fn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dl(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ml=!1;function Rj(t,a){switch(t){case"compositionend":return Dl(a);case"keypress":return a.which!==32?null:(ra=!0,aa);case"textInput":return t=a.data,t===aa&&ra?null:t;default:return null}}function kj(t,a){if(Ml)return t==="compositionend"||!At&&Li(t,a)?(t=Xo(),Mi=Qo=Na=null,Ml=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ta&&a.locale!=="ko"?null:a.data;default:return null}}var Ij={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ax(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Ij[t.type]:a==="textarea"}function rx(t,a,l,c){Cr?_a?_a.push(c):_a=[c]:Cr=c,a=Bd(a,"onChange"),0<a.length&&(l=new ja("onChange","change",null,l,c),t.push({event:l,listeners:a}))}var tc=null,nc=null;function Dj(t){zy(t,0)}function Ju(t){var a=ws(t);if(Ri(a))return t}function ix(t,a){if(t==="change")return a}var lx=!1;if(Us){var If;if(Us){var Df="oninput"in document;if(!Df){var ox=document.createElement("div");ox.setAttribute("oninput","return;"),Df=typeof ox.oninput=="function"}If=Df}else If=!1;lx=If&&(!document.documentMode||9<document.documentMode)}function cx(){tc&&(tc.detachEvent("onpropertychange",ux),nc=tc=null)}function ux(t){if(t.propertyName==="value"&&Ju(nc)){var a=[];rx(a,nc,t,Ls(t)),Rr(Dj,a)}}function Mj(t,a,l){t==="focusin"?(cx(),tc=a,nc=l,tc.attachEvent("onpropertychange",ux)):t==="focusout"&&cx()}function Oj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ju(nc)}function Pj(t,a){if(t==="click")return Ju(a)}function Vj(t,a){if(t==="input"||t==="change")return Ju(a)}function Lj(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Ns=typeof Object.is=="function"?Object.is:Lj;function sc(t,a){if(Ns(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var l=Object.keys(t),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!ut.call(a,f)||!Ns(t[f],a[f]))return!1}return!0}function dx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hx(t,a){var l=dx(t);t=0;for(var c;l;){if(l.nodeType===3){if(c=t+l.textContent.length,t<=a&&c>=a)return{node:l,offset:a-t};t=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=dx(l)}}function fx(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?fx(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function mx(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=wa(t.document);a instanceof t.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)t=a.contentWindow;else break;a=wa(t.document)}return a}function Mf(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Uj=Us&&"documentMode"in document&&11>=document.documentMode,Ol=null,Of=null,ac=null,Pf=!1;function px(t,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Pf||Ol==null||Ol!==wa(c)||(c=Ol,"selectionStart"in c&&Mf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ac&&sc(ac,c)||(ac=c,c=Bd(Of,"onSelect"),0<c.length&&(a=new ja("onSelect","select",null,a,l),t.push({event:a,listeners:c}),a.target=Ol)))}function Ui(t,a){var l={};return l[t.toLowerCase()]=a.toLowerCase(),l["Webkit"+t]="webkit"+a,l["Moz"+t]="moz"+a,l}var Pl={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionrun:Ui("Transition","TransitionRun"),transitionstart:Ui("Transition","TransitionStart"),transitioncancel:Ui("Transition","TransitionCancel"),transitionend:Ui("Transition","TransitionEnd")},Vf={},gx={};Us&&(gx=document.createElement("div").style,"AnimationEvent"in window||(delete Pl.animationend.animation,delete Pl.animationiteration.animation,delete Pl.animationstart.animation),"TransitionEvent"in window||delete Pl.transitionend.transition);function Bi(t){if(Vf[t])return Vf[t];if(!Pl[t])return t;var a=Pl[t],l;for(l in a)if(a.hasOwnProperty(l)&&l in gx)return Vf[t]=a[l];return t}var xx=Bi("animationend"),bx=Bi("animationiteration"),yx=Bi("animationstart"),Bj=Bi("transitionrun"),zj=Bi("transitionstart"),Fj=Bi("transitioncancel"),vx=Bi("transitionend"),wx=new Map,Lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lf.push("scrollEnd");function ia(t,a){wx.set(t,a),ya(a,[t])}var Zu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},zs=[],Vl=0,Uf=0;function ed(){for(var t=Vl,a=Uf=Vl=0;a<t;){var l=zs[a];zs[a++]=null;var c=zs[a];zs[a++]=null;var f=zs[a];zs[a++]=null;var m=zs[a];if(zs[a++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&_x(l,f,m)}}function td(t,a,l,c){zs[Vl++]=t,zs[Vl++]=a,zs[Vl++]=l,zs[Vl++]=c,Uf|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function Bf(t,a,l,c){return td(t,a,l,c),nd(t)}function zi(t,a){return td(t,null,null,a),nd(t)}function _x(t,a,l){t.lanes|=l;var c=t.alternate;c!==null&&(c.lanes|=l);for(var f=!1,m=t.return;m!==null;)m.childLanes|=l,c=m.alternate,c!==null&&(c.childLanes|=l),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&a!==null&&(f=31-ae(l),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[a]:c.push(a),a.lane=l|536870912),m):null}function nd(t){if(50<Sc)throw Sc=0,Km=null,Error(r(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var Ll={};function qj(t,a,l,c){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function js(t,a,l,c){return new qj(t,a,l,c)}function zf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ka(t,a){var l=t.alternate;return l===null?(l=js(t.tag,a,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=a,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,a=t.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Nx(t,a){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,a=l.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function sd(t,a,l,c,f,m){var v=0;if(c=t,typeof t=="function")zf(t)&&(v=1);else if(typeof t=="string")v=WE(t,l,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case k:return t=js(31,l,a,f),t.elementType=k,t.lanes=m,t;case V:return Fi(l.children,f,m,a);case M:v=8,f|=24;break;case U:return t=js(12,l,a,f|2),t.elementType=U,t.lanes=m,t;case ue:return t=js(13,l,a,f),t.elementType=ue,t.lanes=m,t;case W:return t=js(19,l,a,f),t.elementType=W,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case q:v=10;break e;case G:v=9;break e;case ie:v=11;break e;case E:v=14;break e;case A:v=16,c=null;break e}v=29,l=Error(r(130,t===null?"null":typeof t,"")),c=null}return a=js(v,l,a,f),a.elementType=t,a.type=c,a.lanes=m,a}function Fi(t,a,l,c){return t=js(7,t,c,a),t.lanes=l,t}function Ff(t,a,l){return t=js(6,t,null,a),t.lanes=l,t}function jx(t){var a=js(18,null,null,0);return a.stateNode=t,a}function qf(t,a,l){return a=js(4,t.children!==null?t.children:[],t.key,a),a.lanes=l,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Ex=new WeakMap;function Fs(t,a){if(typeof t=="object"&&t!==null){var l=Ex.get(t);return l!==void 0?l:(a={value:t,source:a,stack:ct(a)},Ex.set(t,a),a)}return{value:t,source:a,stack:ct(a)}}var Ul=[],Bl=0,ad=null,rc=0,qs=[],$s=0,Mr=null,Aa=1,Ca="";function Qa(t,a){Ul[Bl++]=rc,Ul[Bl++]=ad,ad=t,rc=a}function Sx(t,a,l){qs[$s++]=Aa,qs[$s++]=Ca,qs[$s++]=Mr,Mr=t;var c=Aa;t=Ca;var f=32-ae(c)-1;c&=~(1<<f),l+=1;var m=32-ae(a)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Aa=1<<32-ae(a)+f|l<<f|c,Ca=m+t}else Aa=1<<m|l<<f|c,Ca=t}function $f(t){t.return!==null&&(Qa(t,1),Sx(t,1,0))}function Hf(t){for(;t===ad;)ad=Ul[--Bl],Ul[Bl]=null,rc=Ul[--Bl],Ul[Bl]=null;for(;t===Mr;)Mr=qs[--$s],qs[$s]=null,Ca=qs[--$s],qs[$s]=null,Aa=qs[--$s],qs[$s]=null}function Tx(t,a){qs[$s++]=Aa,qs[$s++]=Ca,qs[$s++]=Mr,Aa=a.id,Ca=a.overflow,Mr=t}var Vn=null,Yt=null,vt=!1,Or=null,Hs=!1,Gf=Error(r(519));function Pr(t){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ic(Fs(a,t)),Gf}function Ax(t){var a=t.stateNode,l=t.type,c=t.memoizedProps;switch(a[an]=t,a[yn]=c,l){case"dialog":ft("cancel",a),ft("close",a);break;case"iframe":case"object":case"embed":ft("load",a);break;case"video":case"audio":for(l=0;l<Ac.length;l++)ft(Ac[l],a);break;case"source":ft("error",a);break;case"img":case"image":case"link":ft("error",a),ft("load",a);break;case"details":ft("toggle",a);break;case"input":ft("invalid",a),Vu(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ft("invalid",a);break;case"textarea":ft("invalid",a),Tr(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||Hy(a.textContent,l)?(c.popover!=null&&(ft("beforetoggle",a),ft("toggle",a)),c.onScroll!=null&&ft("scroll",a),c.onScrollEnd!=null&&ft("scrollend",a),c.onClick!=null&&(a.onclick=ta),a=!0):a=!1,a||Pr(t,!0)}function Cx(t){for(Vn=t.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:Hs=!1;return;case 27:case 3:Hs=!0;return;default:Vn=Vn.return}}function zl(t){if(t!==Vn)return!1;if(!vt)return Cx(t),vt=!0,!1;var a=t.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||up(t.type,t.memoizedProps)),l=!l),l&&Yt&&Pr(t),Cx(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Yt=ev(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));Yt=ev(t)}else a===27?(a=Yt,Qr(t.type)?(t=pp,pp=null,Yt=t):Yt=a):Yt=Vn?Ys(t.stateNode.nextSibling):null;return!0}function qi(){Yt=Vn=null,vt=!1}function Yf(){var t=Or;return t!==null&&(cs===null?cs=t:cs.push.apply(cs,t),Or=null),t}function ic(t){Or===null?Or=[t]:Or.push(t)}var Wf=O(null),$i=null,Xa=null;function Vr(t,a,l){ce(Wf,a._currentValue),a._currentValue=l}function Ja(t){t._currentValue=Wf.current,te(Wf)}function Kf(t,a,l){for(;t!==null;){var c=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),t===l)break;t=t.return}}function Qf(t,a,l,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var z=0;z<a.length;z++)if(S.context===a[z]){m.lanes|=l,S=m.alternate,S!==null&&(S.lanes|=l),Kf(m.return,l,t),c||(v=null);break e}m=S.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=l,m=v.alternate,m!==null&&(m.lanes|=l),Kf(v,l,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Fl(t,a,l,c){t=null;for(var f=a,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var S=f.type;Ns(f.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(f===ze.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Dc):t=[Dc])}f=f.return}t!==null&&Qf(a,t,l,c),a.flags|=262144}function rd(t){for(t=t.firstContext;t!==null;){if(!Ns(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Hi(t){$i=t,Xa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ln(t){return Rx($i,t)}function id(t,a){return $i===null&&Hi(t),Rx(t,a)}function Rx(t,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xa===null){if(t===null)throw Error(r(308));Xa=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Xa=Xa.next=a;return l}var $j=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(l,c){t.push(c)}};this.abort=function(){a.aborted=!0,t.forEach(function(l){return l()})}},Hj=s.unstable_scheduleCallback,Gj=s.unstable_NormalPriority,_n={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xf(){return{controller:new $j,data:new Map,refCount:0}}function lc(t){t.refCount--,t.refCount===0&&Hj(Gj,function(){t.controller.abort()})}var oc=null,Jf=0,ql=0,$l=null;function Yj(t,a){if(oc===null){var l=oc=[];Jf=0,ql=tp(),$l={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Jf++,a.then(kx,kx),a}function kx(){if(--Jf===0&&oc!==null){$l!==null&&($l.status="fulfilled");var t=oc;oc=null,ql=0,$l=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Wj(t,a){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return t.then(function(){c.status="fulfilled",c.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var Ix=R.S;R.S=function(t,a){py=jt(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Yj(t,a),Ix!==null&&Ix(t,a)};var Gi=O(null);function Zf(){var t=Gi.current;return t!==null?t:Ft.pooledCache}function ld(t,a){a===null?ce(Gi,Gi.current):ce(Gi,a.pool)}function Dx(){var t=Zf();return t===null?null:{parent:_n._currentValue,pool:t}}var Hl=Error(r(460)),em=Error(r(474)),od=Error(r(542)),cd={then:function(){}};function Mx(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ox(t,a,l){switch(l=t[l],l===void 0?t.push(a):l!==a&&(a.then(ta,ta),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Vx(t),t;default:if(typeof a.status=="string")a.then(ta,ta);else{if(t=Ft,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=a,t.status="pending",t.then(function(c){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=c}},function(c){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Vx(t),t}throw Wi=a,Hl}}function Yi(t){try{var a=t._init;return a(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Wi=l,Hl):l}}var Wi=null;function Px(){if(Wi===null)throw Error(r(459));var t=Wi;return Wi=null,t}function Vx(t){if(t===Hl||t===od)throw Error(r(483))}var Gl=null,cc=0;function ud(t){var a=cc;return cc+=1,Gl===null&&(Gl=[]),Ox(Gl,t,a)}function uc(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function dd(t,a){throw a.$$typeof===N?Error(r(525)):(t=Object.prototype.toString.call(a),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Lx(t){function a(Q,Y){if(t){var Z=Q.deletions;Z===null?(Q.deletions=[Y],Q.flags|=16):Z.push(Y)}}function l(Q,Y){if(!t)return null;for(;Y!==null;)a(Q,Y),Y=Y.sibling;return null}function c(Q){for(var Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function f(Q,Y){return Q=Ka(Q,Y),Q.index=0,Q.sibling=null,Q}function m(Q,Y,Z){return Q.index=Z,t?(Z=Q.alternate,Z!==null?(Z=Z.index,Z<Y?(Q.flags|=67108866,Y):Z):(Q.flags|=67108866,Y)):(Q.flags|=1048576,Y)}function v(Q){return t&&Q.alternate===null&&(Q.flags|=67108866),Q}function S(Q,Y,Z,me){return Y===null||Y.tag!==6?(Y=Ff(Z,Q.mode,me),Y.return=Q,Y):(Y=f(Y,Z),Y.return=Q,Y)}function z(Q,Y,Z,me){var Fe=Z.type;return Fe===V?he(Q,Y,Z.props.children,me,Z.key):Y!==null&&(Y.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===A&&Yi(Fe)===Y.type)?(Y=f(Y,Z.props),uc(Y,Z),Y.return=Q,Y):(Y=sd(Z.type,Z.key,Z.props,null,Q.mode,me),uc(Y,Z),Y.return=Q,Y)}function ee(Q,Y,Z,me){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Z.containerInfo||Y.stateNode.implementation!==Z.implementation?(Y=qf(Z,Q.mode,me),Y.return=Q,Y):(Y=f(Y,Z.children||[]),Y.return=Q,Y)}function he(Q,Y,Z,me,Fe){return Y===null||Y.tag!==7?(Y=Fi(Z,Q.mode,me,Fe),Y.return=Q,Y):(Y=f(Y,Z),Y.return=Q,Y)}function xe(Q,Y,Z){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Ff(""+Y,Q.mode,Z),Y.return=Q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case T:return Z=sd(Y.type,Y.key,Y.props,null,Q.mode,Z),uc(Z,Y),Z.return=Q,Z;case L:return Y=qf(Y,Q.mode,Z),Y.return=Q,Y;case A:return Y=Yi(Y),xe(Q,Y,Z)}if(D(Y)||H(Y))return Y=Fi(Y,Q.mode,Z,null),Y.return=Q,Y;if(typeof Y.then=="function")return xe(Q,ud(Y),Z);if(Y.$$typeof===q)return xe(Q,id(Q,Y),Z);dd(Q,Y)}return null}function ne(Q,Y,Z,me){var Fe=Y!==null?Y.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Fe!==null?null:S(Q,Y,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return Z.key===Fe?z(Q,Y,Z,me):null;case L:return Z.key===Fe?ee(Q,Y,Z,me):null;case A:return Z=Yi(Z),ne(Q,Y,Z,me)}if(D(Z)||H(Z))return Fe!==null?null:he(Q,Y,Z,me,null);if(typeof Z.then=="function")return ne(Q,Y,ud(Z),me);if(Z.$$typeof===q)return ne(Q,Y,id(Q,Z),me);dd(Q,Z)}return null}function le(Q,Y,Z,me,Fe){if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return Q=Q.get(Z)||null,S(Y,Q,""+me,Fe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case T:return Q=Q.get(me.key===null?Z:me.key)||null,z(Y,Q,me,Fe);case L:return Q=Q.get(me.key===null?Z:me.key)||null,ee(Y,Q,me,Fe);case A:return me=Yi(me),le(Q,Y,Z,me,Fe)}if(D(me)||H(me))return Q=Q.get(Z)||null,he(Y,Q,me,Fe,null);if(typeof me.then=="function")return le(Q,Y,Z,ud(me),Fe);if(me.$$typeof===q)return le(Q,Y,Z,id(Y,me),Fe);dd(Y,me)}return null}function Oe(Q,Y,Z,me){for(var Fe=null,St=null,Be=Y,lt=Y=0,gt=null;Be!==null&&lt<Z.length;lt++){Be.index>lt?(gt=Be,Be=null):gt=Be.sibling;var Tt=ne(Q,Be,Z[lt],me);if(Tt===null){Be===null&&(Be=gt);break}t&&Be&&Tt.alternate===null&&a(Q,Be),Y=m(Tt,Y,lt),St===null?Fe=Tt:St.sibling=Tt,St=Tt,Be=gt}if(lt===Z.length)return l(Q,Be),vt&&Qa(Q,lt),Fe;if(Be===null){for(;lt<Z.length;lt++)Be=xe(Q,Z[lt],me),Be!==null&&(Y=m(Be,Y,lt),St===null?Fe=Be:St.sibling=Be,St=Be);return vt&&Qa(Q,lt),Fe}for(Be=c(Be);lt<Z.length;lt++)gt=le(Be,Q,lt,Z[lt],me),gt!==null&&(t&&gt.alternate!==null&&Be.delete(gt.key===null?lt:gt.key),Y=m(gt,Y,lt),St===null?Fe=gt:St.sibling=gt,St=gt);return t&&Be.forEach(function(ti){return a(Q,ti)}),vt&&Qa(Q,lt),Fe}function He(Q,Y,Z,me){if(Z==null)throw Error(r(151));for(var Fe=null,St=null,Be=Y,lt=Y=0,gt=null,Tt=Z.next();Be!==null&&!Tt.done;lt++,Tt=Z.next()){Be.index>lt?(gt=Be,Be=null):gt=Be.sibling;var ti=ne(Q,Be,Tt.value,me);if(ti===null){Be===null&&(Be=gt);break}t&&Be&&ti.alternate===null&&a(Q,Be),Y=m(ti,Y,lt),St===null?Fe=ti:St.sibling=ti,St=ti,Be=gt}if(Tt.done)return l(Q,Be),vt&&Qa(Q,lt),Fe;if(Be===null){for(;!Tt.done;lt++,Tt=Z.next())Tt=xe(Q,Tt.value,me),Tt!==null&&(Y=m(Tt,Y,lt),St===null?Fe=Tt:St.sibling=Tt,St=Tt);return vt&&Qa(Q,lt),Fe}for(Be=c(Be);!Tt.done;lt++,Tt=Z.next())Tt=le(Be,Q,lt,Tt.value,me),Tt!==null&&(t&&Tt.alternate!==null&&Be.delete(Tt.key===null?lt:Tt.key),Y=m(Tt,Y,lt),St===null?Fe=Tt:St.sibling=Tt,St=Tt);return t&&Be.forEach(function(rS){return a(Q,rS)}),vt&&Qa(Q,lt),Fe}function Bt(Q,Y,Z,me){if(typeof Z=="object"&&Z!==null&&Z.type===V&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:e:{for(var Fe=Z.key;Y!==null;){if(Y.key===Fe){if(Fe=Z.type,Fe===V){if(Y.tag===7){l(Q,Y.sibling),me=f(Y,Z.props.children),me.return=Q,Q=me;break e}}else if(Y.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===A&&Yi(Fe)===Y.type){l(Q,Y.sibling),me=f(Y,Z.props),uc(me,Z),me.return=Q,Q=me;break e}l(Q,Y);break}else a(Q,Y);Y=Y.sibling}Z.type===V?(me=Fi(Z.props.children,Q.mode,me,Z.key),me.return=Q,Q=me):(me=sd(Z.type,Z.key,Z.props,null,Q.mode,me),uc(me,Z),me.return=Q,Q=me)}return v(Q);case L:e:{for(Fe=Z.key;Y!==null;){if(Y.key===Fe)if(Y.tag===4&&Y.stateNode.containerInfo===Z.containerInfo&&Y.stateNode.implementation===Z.implementation){l(Q,Y.sibling),me=f(Y,Z.children||[]),me.return=Q,Q=me;break e}else{l(Q,Y);break}else a(Q,Y);Y=Y.sibling}me=qf(Z,Q.mode,me),me.return=Q,Q=me}return v(Q);case A:return Z=Yi(Z),Bt(Q,Y,Z,me)}if(D(Z))return Oe(Q,Y,Z,me);if(H(Z)){if(Fe=H(Z),typeof Fe!="function")throw Error(r(150));return Z=Fe.call(Z),He(Q,Y,Z,me)}if(typeof Z.then=="function")return Bt(Q,Y,ud(Z),me);if(Z.$$typeof===q)return Bt(Q,Y,id(Q,Z),me);dd(Q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,Y!==null&&Y.tag===6?(l(Q,Y.sibling),me=f(Y,Z),me.return=Q,Q=me):(l(Q,Y),me=Ff(Z,Q.mode,me),me.return=Q,Q=me),v(Q)):l(Q,Y)}return function(Q,Y,Z,me){try{cc=0;var Fe=Bt(Q,Y,Z,me);return Gl=null,Fe}catch(Be){if(Be===Hl||Be===od)throw Be;var St=js(29,Be,null,Q.mode);return St.lanes=me,St.return=Q,St}}}var Ki=Lx(!0),Ux=Lx(!1),Lr=!1;function tm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nm(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ur(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Br(t,a,l){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Ct&2)!==0){var f=c.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a,a=nd(t),_x(t,null,l),a}return td(t,c,a,l),nd(t)}function dc(t,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=t.pendingLanes,l|=c,a.lanes=l,ys(t,l)}}function sm(t,a){var l=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var v={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,l=l.next}while(l!==null);m===null?f=m=a:m=m.next=a}else f=m=a;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=a:t.next=a,l.lastBaseUpdate=a}var am=!1;function hc(){if(am){var t=$l;if(t!==null)throw t}}function fc(t,a,l,c){am=!1;var f=t.updateQueue;Lr=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var z=S,ee=z.next;z.next=null,v===null?m=ee:v.next=ee,v=z;var he=t.alternate;he!==null&&(he=he.updateQueue,S=he.lastBaseUpdate,S!==v&&(S===null?he.firstBaseUpdate=ee:S.next=ee,he.lastBaseUpdate=z))}if(m!==null){var xe=f.baseState;v=0,he=ee=z=null,S=m;do{var ne=S.lane&-536870913,le=ne!==S.lane;if(le?(pt&ne)===ne:(c&ne)===ne){ne!==0&&ne===ql&&(am=!0),he!==null&&(he=he.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Oe=t,He=S;ne=a;var Bt=l;switch(He.tag){case 1:if(Oe=He.payload,typeof Oe=="function"){xe=Oe.call(Bt,xe,ne);break e}xe=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=He.payload,ne=typeof Oe=="function"?Oe.call(Bt,xe,ne):Oe,ne==null)break e;xe=w({},xe,ne);break e;case 2:Lr=!0}}ne=S.callback,ne!==null&&(t.flags|=64,le&&(t.flags|=8192),le=f.callbacks,le===null?f.callbacks=[ne]:le.push(ne))}else le={lane:ne,tag:S.tag,payload:S.payload,callback:S.callback,next:null},he===null?(ee=he=le,z=xe):he=he.next=le,v|=ne;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;le=S,S=le.next,le.next=null,f.lastBaseUpdate=le,f.shared.pending=null}}while(!0);he===null&&(z=xe),f.baseState=z,f.firstBaseUpdate=ee,f.lastBaseUpdate=he,m===null&&(f.shared.lanes=0),Hr|=v,t.lanes=v,t.memoizedState=xe}}function Bx(t,a){if(typeof t!="function")throw Error(r(191,t));t.call(a)}function zx(t,a){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Bx(l[t],a)}var Yl=O(null),hd=O(0);function Fx(t,a){t=lr,ce(hd,t),ce(Yl,a),lr=t|a.baseLanes}function rm(){ce(hd,lr),ce(Yl,Yl.current)}function im(){lr=hd.current,te(Yl),te(hd)}var Es=O(null),Gs=null;function zr(t){var a=t.alternate;ce(mn,mn.current&1),ce(Es,t),Gs===null&&(a===null||Yl.current!==null||a.memoizedState!==null)&&(Gs=t)}function lm(t){ce(mn,mn.current),ce(Es,t),Gs===null&&(Gs=t)}function qx(t){t.tag===22?(ce(mn,mn.current),ce(Es,t),Gs===null&&(Gs=t)):Fr()}function Fr(){ce(mn,mn.current),ce(Es,Es.current)}function Ss(t){te(Es),Gs===t&&(Gs=null),te(mn)}var mn=O(0);function fd(t){for(var a=t;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||fp(l)||mp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Za=0,rt=null,Lt=null,Nn=null,md=!1,Wl=!1,Qi=!1,pd=0,mc=0,Kl=null,Kj=0;function rn(){throw Error(r(321))}function om(t,a){if(a===null)return!1;for(var l=0;l<a.length&&l<t.length;l++)if(!Ns(t[l],a[l]))return!1;return!0}function cm(t,a,l,c,f,m){return Za=m,rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,R.H=t===null||t.memoizedState===null?Sb:jm,Qi=!1,m=l(c,f),Qi=!1,Wl&&(m=Hx(a,l,c,f)),$x(t),m}function $x(t){R.H=xc;var a=Lt!==null&&Lt.next!==null;if(Za=0,Nn=Lt=rt=null,md=!1,mc=0,Kl=null,a)throw Error(r(300));t===null||jn||(t=t.dependencies,t!==null&&rd(t)&&(jn=!0))}function Hx(t,a,l,c){rt=t;var f=0;do{if(Wl&&(Kl=null),mc=0,Wl=!1,25<=f)throw Error(r(301));if(f+=1,Nn=Lt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}R.H=Tb,m=a(l,c)}while(Wl);return m}function Qj(){var t=R.H,a=t.useState()[0];return a=typeof a.then=="function"?pc(a):a,t=t.useState()[0],(Lt!==null?Lt.memoizedState:null)!==t&&(rt.flags|=1024),a}function um(){var t=pd!==0;return pd=0,t}function dm(t,a,l){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~l}function hm(t){if(md){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}md=!1}Za=0,Nn=Lt=rt=null,Wl=!1,mc=pd=0,Kl=null}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?rt.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function pn(){if(Lt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=Lt.next;var a=Nn===null?rt.memoizedState:Nn.next;if(a!==null)Nn=a,Lt=t;else{if(t===null)throw rt.alternate===null?Error(r(467)):Error(r(310));Lt=t,t={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Nn===null?rt.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function gd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(t){var a=mc;return mc+=1,Kl===null&&(Kl=[]),t=Ox(Kl,t,a),a=rt,(Nn===null?a.memoizedState:Nn.next)===null&&(a=a.alternate,R.H=a===null||a.memoizedState===null?Sb:jm),t}function xd(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return pc(t);if(t.$$typeof===q)return Ln(t)}throw Error(r(438,String(t)))}function fm(t){var a=null,l=rt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=rt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=gd(),rt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(t),c=0;c<t;c++)l[c]=B;return a.index++,l}function er(t,a){return typeof a=="function"?a(t):a}function bd(t){var a=pn();return mm(a,Lt,t)}function mm(t,a,l){var c=t.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}a.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{a=f.next;var S=v=null,z=null,ee=a,he=!1;do{var xe=ee.lane&-536870913;if(xe!==ee.lane?(pt&xe)===xe:(Za&xe)===xe){var ne=ee.revertLane;if(ne===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),xe===ql&&(he=!0);else if((Za&ne)===ne){ee=ee.next,ne===ql&&(he=!0);continue}else xe={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},z===null?(S=z=xe,v=m):z=z.next=xe,rt.lanes|=ne,Hr|=ne;xe=ee.action,Qi&&l(m,xe),m=ee.hasEagerState?ee.eagerState:l(m,xe)}else ne={lane:xe,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},z===null?(S=z=ne,v=m):z=z.next=ne,rt.lanes|=xe,Hr|=xe;ee=ee.next}while(ee!==null&&ee!==a);if(z===null?v=m:z.next=S,!Ns(m,t.memoizedState)&&(jn=!0,he&&(l=$l,l!==null)))throw l;t.memoizedState=m,t.baseState=v,t.baseQueue=z,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function pm(t){var a=pn(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=t;var c=l.dispatch,f=l.pending,m=a.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do m=t(m,v.action),v=v.next;while(v!==f);Ns(m,a.memoizedState)||(jn=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),l.lastRenderedState=m}return[m,c]}function Gx(t,a,l){var c=rt,f=pn(),m=vt;if(m){if(l===void 0)throw Error(r(407));l=l()}else l=a();var v=!Ns((Lt||f).memoizedState,l);if(v&&(f.memoizedState=l,jn=!0),f=f.queue,bm(Kx.bind(null,c,f,t),[t]),f.getSnapshot!==a||v||Nn!==null&&Nn.memoizedState.tag&1){if(c.flags|=2048,Ql(9,{destroy:void 0},Wx.bind(null,c,f,l,a),null),Ft===null)throw Error(r(349));m||(Za&127)!==0||Yx(c,a,l)}return l}function Yx(t,a,l){t.flags|=16384,t={getSnapshot:a,value:l},a=rt.updateQueue,a===null?(a=gd(),rt.updateQueue=a,a.stores=[t]):(l=a.stores,l===null?a.stores=[t]:l.push(t))}function Wx(t,a,l,c){a.value=l,a.getSnapshot=c,Qx(a)&&Xx(t)}function Kx(t,a,l){return l(function(){Qx(a)&&Xx(t)})}function Qx(t){var a=t.getSnapshot;t=t.value;try{var l=a();return!Ns(t,l)}catch{return!0}}function Xx(t){var a=zi(t,2);a!==null&&us(a,t,2)}function gm(t){var a=Jn();if(typeof t=="function"){var l=t;if(t=l(),Qi){F(!0);try{l()}finally{F(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:t},a}function Jx(t,a,l,c){return t.baseState=l,mm(t,Lt,typeof c=="function"?c:er)}function Xj(t,a,l,c,f){if(wd(t))throw Error(r(485));if(t=a.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};R.T!==null?l(!0):m.isTransition=!1,c(m),l=a.pending,l===null?(m.next=a.pending=m,Zx(a,m)):(m.next=l.next,a.pending=l.next=m)}}function Zx(t,a){var l=a.action,c=a.payload,f=t.state;if(a.isTransition){var m=R.T,v={};R.T=v;try{var S=l(f,c),z=R.S;z!==null&&z(v,S),eb(t,a,S)}catch(ee){xm(t,a,ee)}finally{m!==null&&v.types!==null&&(m.types=v.types),R.T=m}}else try{m=l(f,c),eb(t,a,m)}catch(ee){xm(t,a,ee)}}function eb(t,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){tb(t,a,c)},function(c){return xm(t,a,c)}):tb(t,a,l)}function tb(t,a,l){a.status="fulfilled",a.value=l,nb(a),t.state=l,a=t.pending,a!==null&&(l=a.next,l===a?t.pending=null:(l=l.next,a.next=l,Zx(t,l)))}function xm(t,a,l){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,nb(a),a=a.next;while(a!==c)}t.action=null}function nb(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function sb(t,a){return a}function ab(t,a){if(vt){var l=Ft.formState;if(l!==null){e:{var c=rt;if(vt){if(Yt){t:{for(var f=Yt,m=Hs;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ys(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Yt=Ys(f.nextSibling),c=f.data==="F!";break e}}Pr(c)}c=!1}c&&(a=l[0])}}return l=Jn(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sb,lastRenderedState:a},l.queue=c,l=Nb.bind(null,rt,c),c.dispatch=l,c=gm(!1),m=Nm.bind(null,rt,!1,c.queue),c=Jn(),f={state:a,dispatch:null,action:t,pending:null},c.queue=f,l=Xj.bind(null,rt,f,m,l),f.dispatch=l,c.memoizedState=t,[a,l,!1]}function rb(t){var a=pn();return ib(a,Lt,t)}function ib(t,a,l){if(a=mm(t,a,sb)[0],t=bd(er)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=pc(a)}catch(v){throw v===Hl?od:v}else c=a;a=pn();var f=a.queue,m=f.dispatch;return l!==a.memoizedState&&(rt.flags|=2048,Ql(9,{destroy:void 0},Jj.bind(null,f,l),null)),[c,m,t]}function Jj(t,a){t.action=a}function lb(t){var a=pn(),l=Lt;if(l!==null)return ib(a,l,t);pn(),a=a.memoizedState,l=pn();var c=l.queue.dispatch;return l.memoizedState=t,[a,c,!1]}function Ql(t,a,l,c){return t={tag:t,create:l,deps:c,inst:a,next:null},a=rt.updateQueue,a===null&&(a=gd(),rt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=t.next=t:(c=l.next,l.next=t,t.next=c,a.lastEffect=t),t}function ob(){return pn().memoizedState}function yd(t,a,l,c){var f=Jn();rt.flags|=t,f.memoizedState=Ql(1|a,{destroy:void 0},l,c===void 0?null:c)}function vd(t,a,l,c){var f=pn();c=c===void 0?null:c;var m=f.memoizedState.inst;Lt!==null&&c!==null&&om(c,Lt.memoizedState.deps)?f.memoizedState=Ql(a,m,l,c):(rt.flags|=t,f.memoizedState=Ql(1|a,m,l,c))}function cb(t,a){yd(8390656,8,t,a)}function bm(t,a){vd(2048,8,t,a)}function Zj(t){rt.flags|=4;var a=rt.updateQueue;if(a===null)a=gd(),rt.updateQueue=a,a.events=[t];else{var l=a.events;l===null?a.events=[t]:l.push(t)}}function ub(t){var a=pn().memoizedState;return Zj({ref:a,nextImpl:t}),function(){if((Ct&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function db(t,a){return vd(4,2,t,a)}function hb(t,a){return vd(4,4,t,a)}function fb(t,a){if(typeof a=="function"){t=t();var l=a(t);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function mb(t,a,l){l=l!=null?l.concat([t]):null,vd(4,4,fb.bind(null,a,t),l)}function ym(){}function pb(t,a){var l=pn();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&om(a,c[1])?c[0]:(l.memoizedState=[t,a],t)}function gb(t,a){var l=pn();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&om(a,c[1]))return c[0];if(c=t(),Qi){F(!0);try{t()}finally{F(!1)}}return l.memoizedState=[c,a],c}function vm(t,a,l){return l===void 0||(Za&1073741824)!==0&&(pt&261930)===0?t.memoizedState=a:(t.memoizedState=l,t=xy(),rt.lanes|=t,Hr|=t,l)}function xb(t,a,l,c){return Ns(l,a)?l:Yl.current!==null?(t=vm(t,l,c),Ns(t,a)||(jn=!0),t):(Za&42)===0||(Za&1073741824)!==0&&(pt&261930)===0?(jn=!0,t.memoizedState=l):(t=xy(),rt.lanes|=t,Hr|=t,a)}function bb(t,a,l,c,f){var m=K.p;K.p=m!==0&&8>m?m:8;var v=R.T,S={};R.T=S,Nm(t,!1,a,l);try{var z=f(),ee=R.S;if(ee!==null&&ee(S,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var he=Wj(z,c);gc(t,a,he,Cs(t))}else gc(t,a,c,Cs(t))}catch(xe){gc(t,a,{then:function(){},status:"rejected",reason:xe},Cs())}finally{K.p=m,v!==null&&S.types!==null&&(v.types=S.types),R.T=v}}function eE(){}function wm(t,a,l,c){if(t.tag!==5)throw Error(r(476));var f=yb(t).queue;bb(t,f,a,oe,l===null?eE:function(){return vb(t),l(c)})}function yb(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:oe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:l},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function vb(t){var a=yb(t);a.next===null&&(a=t.alternate.memoizedState),gc(t,a.next.queue,{},Cs())}function _m(){return Ln(Dc)}function wb(){return pn().memoizedState}function _b(){return pn().memoizedState}function tE(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var l=Cs();t=Ur(l);var c=Br(a,t,l);c!==null&&(us(c,a,l),dc(c,a,l)),a={cache:Xf()},t.payload=a;return}a=a.return}}function nE(t,a,l){var c=Cs();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},wd(t)?jb(a,l):(l=Bf(t,a,l,c),l!==null&&(us(l,t,c),Eb(l,a,c)))}function Nb(t,a,l){var c=Cs();gc(t,a,l,c)}function gc(t,a,l,c){var f={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(wd(t))jb(a,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var v=a.lastRenderedState,S=m(v,l);if(f.hasEagerState=!0,f.eagerState=S,Ns(S,v))return td(t,a,f,0),Ft===null&&ed(),!1}catch{}if(l=Bf(t,a,f,c),l!==null)return us(l,t,c),Eb(l,a,c),!0}return!1}function Nm(t,a,l,c){if(c={lane:2,revertLane:tp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},wd(t)){if(a)throw Error(r(479))}else a=Bf(t,l,c,2),a!==null&&us(a,t,2)}function wd(t){var a=t.alternate;return t===rt||a!==null&&a===rt}function jb(t,a){Wl=md=!0;var l=t.pending;l===null?a.next=a:(a.next=l.next,l.next=a),t.pending=a}function Eb(t,a,l){if((l&4194048)!==0){var c=a.lanes;c&=t.pendingLanes,l|=c,a.lanes=l,ys(t,l)}}var xc={readContext:Ln,use:xd,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};xc.useEffectEvent=rn;var Sb={readContext:Ln,use:xd,useCallback:function(t,a){return Jn().memoizedState=[t,a===void 0?null:a],t},useContext:Ln,useEffect:cb,useImperativeHandle:function(t,a,l){l=l!=null?l.concat([t]):null,yd(4194308,4,fb.bind(null,a,t),l)},useLayoutEffect:function(t,a){return yd(4194308,4,t,a)},useInsertionEffect:function(t,a){yd(4,2,t,a)},useMemo:function(t,a){var l=Jn();a=a===void 0?null:a;var c=t();if(Qi){F(!0);try{t()}finally{F(!1)}}return l.memoizedState=[c,a],c},useReducer:function(t,a,l){var c=Jn();if(l!==void 0){var f=l(a);if(Qi){F(!0);try{l(a)}finally{F(!1)}}}else f=a;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=nE.bind(null,rt,t),[c.memoizedState,t]},useRef:function(t){var a=Jn();return t={current:t},a.memoizedState=t},useState:function(t){t=gm(t);var a=t.queue,l=Nb.bind(null,rt,a);return a.dispatch=l,[t.memoizedState,l]},useDebugValue:ym,useDeferredValue:function(t,a){var l=Jn();return vm(l,t,a)},useTransition:function(){var t=gm(!1);return t=bb.bind(null,rt,t.queue,!0,!1),Jn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,l){var c=rt,f=Jn();if(vt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Ft===null)throw Error(r(349));(pt&127)!==0||Yx(c,a,l)}f.memoizedState=l;var m={value:l,getSnapshot:a};return f.queue=m,cb(Kx.bind(null,c,m,t),[t]),c.flags|=2048,Ql(9,{destroy:void 0},Wx.bind(null,c,m,l,a),null),l},useId:function(){var t=Jn(),a=Ft.identifierPrefix;if(vt){var l=Ca,c=Aa;l=(c&~(1<<32-ae(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=pd++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=Kj++,a="_"+a+"r_"+l.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:_m,useFormState:ab,useActionState:ab,useOptimistic:function(t){var a=Jn();a.memoizedState=a.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Nm.bind(null,rt,!0,l),l.dispatch=a,[t,a]},useMemoCache:fm,useCacheRefresh:function(){return Jn().memoizedState=tE.bind(null,rt)},useEffectEvent:function(t){var a=Jn(),l={impl:t};return a.memoizedState=l,function(){if((Ct&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},jm={readContext:Ln,use:xd,useCallback:pb,useContext:Ln,useEffect:bm,useImperativeHandle:mb,useInsertionEffect:db,useLayoutEffect:hb,useMemo:gb,useReducer:bd,useRef:ob,useState:function(){return bd(er)},useDebugValue:ym,useDeferredValue:function(t,a){var l=pn();return xb(l,Lt.memoizedState,t,a)},useTransition:function(){var t=bd(er)[0],a=pn().memoizedState;return[typeof t=="boolean"?t:pc(t),a]},useSyncExternalStore:Gx,useId:wb,useHostTransitionStatus:_m,useFormState:rb,useActionState:rb,useOptimistic:function(t,a){var l=pn();return Jx(l,Lt,t,a)},useMemoCache:fm,useCacheRefresh:_b};jm.useEffectEvent=ub;var Tb={readContext:Ln,use:xd,useCallback:pb,useContext:Ln,useEffect:bm,useImperativeHandle:mb,useInsertionEffect:db,useLayoutEffect:hb,useMemo:gb,useReducer:pm,useRef:ob,useState:function(){return pm(er)},useDebugValue:ym,useDeferredValue:function(t,a){var l=pn();return Lt===null?vm(l,t,a):xb(l,Lt.memoizedState,t,a)},useTransition:function(){var t=pm(er)[0],a=pn().memoizedState;return[typeof t=="boolean"?t:pc(t),a]},useSyncExternalStore:Gx,useId:wb,useHostTransitionStatus:_m,useFormState:lb,useActionState:lb,useOptimistic:function(t,a){var l=pn();return Lt!==null?Jx(l,Lt,t,a):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:fm,useCacheRefresh:_b};Tb.useEffectEvent=ub;function Em(t,a,l,c){a=t.memoizedState,l=l(c,a),l=l==null?a:w({},a,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Sm={enqueueSetState:function(t,a,l){t=t._reactInternals;var c=Cs(),f=Ur(c);f.payload=a,l!=null&&(f.callback=l),a=Br(t,f,c),a!==null&&(us(a,t,c),dc(a,t,c))},enqueueReplaceState:function(t,a,l){t=t._reactInternals;var c=Cs(),f=Ur(c);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=Br(t,f,c),a!==null&&(us(a,t,c),dc(a,t,c))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var l=Cs(),c=Ur(l);c.tag=2,a!=null&&(c.callback=a),a=Br(t,c,l),a!==null&&(us(a,t,l),dc(a,t,l))}};function Ab(t,a,l,c,f,m,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,v):a.prototype&&a.prototype.isPureReactComponent?!sc(l,c)||!sc(f,m):!0}function Cb(t,a,l,c){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==t&&Sm.enqueueReplaceState(a,a.state,null)}function Xi(t,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(t=t.defaultProps){l===a&&(l=w({},l));for(var f in t)l[f]===void 0&&(l[f]=t[f])}return l}function Rb(t){Zu(t)}function kb(t){console.error(t)}function Ib(t){Zu(t)}function _d(t,a){try{var l=t.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function Db(t,a,l){try{var c=t.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Tm(t,a,l){return l=Ur(l),l.tag=3,l.payload={element:null},l.callback=function(){_d(t,a)},l}function Mb(t){return t=Ur(t),t.tag=3,t}function Ob(t,a,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){Db(a,l,c)}}var v=l.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Db(a,l,c),typeof f!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function sE(t,a,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&Fl(a,l,f,!0),l=Es.current,l!==null){switch(l.tag){case 31:case 13:return Gs===null?Md():l.alternate===null&&ln===0&&(ln=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===cd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),Jm(t,c,f)),!1;case 22:return l.flags|=65536,c===cd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),Jm(t,c,f)),!1}throw Error(r(435,l.tag))}return Jm(t,c,f),Md(),!1}if(vt)return a=Es.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,c!==Gf&&(t=Error(r(422),{cause:c}),ic(Fs(t,l)))):(c!==Gf&&(a=Error(r(423),{cause:c}),ic(Fs(a,l))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=Fs(c,l),f=Tm(t.stateNode,c,f),sm(t,f),ln!==4&&(ln=2)),!1;var m=Error(r(520),{cause:c});if(m=Fs(m,l),Ec===null?Ec=[m]:Ec.push(m),ln!==4&&(ln=2),a===null)return!0;c=Fs(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,t=f&-f,l.lanes|=t,t=Tm(l.stateNode,c,t),sm(l,t),!1;case 1:if(a=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Gr===null||!Gr.has(m))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Mb(f),Ob(f,t,l,c),sm(l,f),!1}l=l.return}while(l!==null);return!1}var Am=Error(r(461)),jn=!1;function Un(t,a,l,c){a.child=t===null?Ux(a,null,l,c):Ki(a,t.child,l,c)}function Pb(t,a,l,c,f){l=l.render;var m=a.ref;if("ref"in c){var v={};for(var S in c)S!=="ref"&&(v[S]=c[S])}else v=c;return Hi(a),c=cm(t,a,l,v,m,f),S=um(),t!==null&&!jn?(dm(t,a,f),tr(t,a,f)):(vt&&S&&$f(a),a.flags|=1,Un(t,a,c,f),a.child)}function Vb(t,a,l,c,f){if(t===null){var m=l.type;return typeof m=="function"&&!zf(m)&&m.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=m,Lb(t,a,m,c,f)):(t=sd(l.type,null,c,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(m=t.child,!Pm(t,f)){var v=m.memoizedProps;if(l=l.compare,l=l!==null?l:sc,l(v,c)&&t.ref===a.ref)return tr(t,a,f)}return a.flags|=1,t=Ka(m,c),t.ref=a.ref,t.return=a,a.child=t}function Lb(t,a,l,c,f){if(t!==null){var m=t.memoizedProps;if(sc(m,c)&&t.ref===a.ref)if(jn=!1,a.pendingProps=c=m,Pm(t,f))(t.flags&131072)!==0&&(jn=!0);else return a.lanes=t.lanes,tr(t,a,f)}return Cm(t,a,l,c,f)}function Ub(t,a,l,c){var f=c.children,m=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,t!==null){for(c=a.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,a.child=null;return Bb(t,a,m,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&ld(a,m!==null?m.cachePool:null),m!==null?Fx(a,m):rm(),qx(a);else return c=a.lanes=536870912,Bb(t,a,m!==null?m.baseLanes|l:l,l,c)}else m!==null?(ld(a,m.cachePool),Fx(a,m),Fr(),a.memoizedState=null):(t!==null&&ld(a,null),rm(),Fr());return Un(t,a,f,l),a.child}function bc(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Bb(t,a,l,c,f){var m=Zf();return m=m===null?null:{parent:_n._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},t!==null&&ld(a,null),rm(),qx(a),t!==null&&Fl(t,a,c,!0),a.childLanes=f,null}function Nd(t,a){return a=Ed({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function zb(t,a,l){return Ki(a,t.child,null,l),t=Nd(a,a.pendingProps),t.flags|=2,Ss(a),a.memoizedState=null,t}function aE(t,a,l){var c=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(vt){if(c.mode==="hidden")return t=Nd(a,c),a.lanes=536870912,bc(null,t);if(lm(a),(t=Yt)?(t=Zy(t,Hs),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Mr!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},l=jx(t),l.return=a,a.child=l,Vn=a,Yt=null)):t=null,t===null)throw Pr(a);return a.lanes=536870912,null}return Nd(a,c)}var m=t.memoizedState;if(m!==null){var v=m.dehydrated;if(lm(a),f)if(a.flags&256)a.flags&=-257,a=zb(t,a,l);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(r(558));else if(jn||Fl(t,a,l,!1),f=(l&t.childLanes)!==0,jn||f){if(c=Ft,c!==null&&(v=Ha(c,l),v!==0&&v!==m.retryLane))throw m.retryLane=v,zi(t,v),us(c,t,v),Am;Md(),a=zb(t,a,l)}else t=m.treeContext,Yt=Ys(v.nextSibling),Vn=a,vt=!0,Or=null,Hs=!1,t!==null&&Tx(a,t),a=Nd(a,c),a.flags|=4096;return a}return t=Ka(t.child,{mode:c.mode,children:c.children}),t.ref=a.ref,a.child=t,t.return=a,t}function jd(t,a){var l=a.ref;if(l===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(t===null||t.ref!==l)&&(a.flags|=4194816)}}function Cm(t,a,l,c,f){return Hi(a),l=cm(t,a,l,c,void 0,f),c=um(),t!==null&&!jn?(dm(t,a,f),tr(t,a,f)):(vt&&c&&$f(a),a.flags|=1,Un(t,a,l,f),a.child)}function Fb(t,a,l,c,f,m){return Hi(a),a.updateQueue=null,l=Hx(a,c,l,f),$x(t),c=um(),t!==null&&!jn?(dm(t,a,m),tr(t,a,m)):(vt&&c&&$f(a),a.flags|=1,Un(t,a,l,m),a.child)}function qb(t,a,l,c,f){if(Hi(a),a.stateNode===null){var m=Ll,v=l.contextType;typeof v=="object"&&v!==null&&(m=Ln(v)),m=new l(c,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Sm,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=c,m.state=a.memoizedState,m.refs={},tm(a),v=l.contextType,m.context=typeof v=="object"&&v!==null?Ln(v):Ll,m.state=a.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(Em(a,l,v,c),m.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Sm.enqueueReplaceState(m,m.state,null),fc(a,c,m,f),hc(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(t===null){m=a.stateNode;var S=a.memoizedProps,z=Xi(l,S);m.props=z;var ee=m.context,he=l.contextType;v=Ll,typeof he=="object"&&he!==null&&(v=Ln(he));var xe=l.getDerivedStateFromProps;he=typeof xe=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||ee!==v)&&Cb(a,m,c,v),Lr=!1;var ne=a.memoizedState;m.state=ne,fc(a,c,m,f),hc(),ee=a.memoizedState,S||ne!==ee||Lr?(typeof xe=="function"&&(Em(a,l,xe,c),ee=a.memoizedState),(z=Lr||Ab(a,l,z,c,ne,ee,v))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=ee),m.props=c,m.state=ee,m.context=v,c=z):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{m=a.stateNode,nm(t,a),v=a.memoizedProps,he=Xi(l,v),m.props=he,xe=a.pendingProps,ne=m.context,ee=l.contextType,z=Ll,typeof ee=="object"&&ee!==null&&(z=Ln(ee)),S=l.getDerivedStateFromProps,(ee=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==xe||ne!==z)&&Cb(a,m,c,z),Lr=!1,ne=a.memoizedState,m.state=ne,fc(a,c,m,f),hc();var le=a.memoizedState;v!==xe||ne!==le||Lr||t!==null&&t.dependencies!==null&&rd(t.dependencies)?(typeof S=="function"&&(Em(a,l,S,c),le=a.memoizedState),(he=Lr||Ab(a,l,he,c,ne,le,z)||t!==null&&t.dependencies!==null&&rd(t.dependencies))?(ee||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,le,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,le,z)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&ne===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&ne===t.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=le),m.props=c,m.state=le,m.context=z,c=he):(typeof m.componentDidUpdate!="function"||v===t.memoizedProps&&ne===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&ne===t.memoizedState||(a.flags|=1024),c=!1)}return m=c,jd(t,a),c=(a.flags&128)!==0,m||c?(m=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,t!==null&&c?(a.child=Ki(a,t.child,null,f),a.child=Ki(a,null,l,f)):Un(t,a,l,f),a.memoizedState=m.state,t=a.child):t=tr(t,a,f),t}function $b(t,a,l,c){return qi(),a.flags|=256,Un(t,a,l,c),a.child}var Rm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function km(t){return{baseLanes:t,cachePool:Dx()}}function Im(t,a,l){return t=t!==null?t.childLanes&~l:0,a&&(t|=As),t}function Hb(t,a,l){var c=a.pendingProps,f=!1,m=(a.flags&128)!==0,v;if((v=m)||(v=t!==null&&t.memoizedState===null?!1:(mn.current&2)!==0),v&&(f=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,t===null){if(vt){if(f?zr(a):Fr(),(t=Yt)?(t=Zy(t,Hs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Mr!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},l=jx(t),l.return=a,a.child=l,Vn=a,Yt=null)):t=null,t===null)throw Pr(a);return mp(t)?a.lanes=32:a.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(Fr(),f=a.mode,S=Ed({mode:"hidden",children:S},f),c=Fi(c,f,l,null),S.return=a,c.return=a,S.sibling=c,a.child=S,c=a.child,c.memoizedState=km(l),c.childLanes=Im(t,v,l),a.memoizedState=Rm,bc(null,c)):(zr(a),Dm(a,S))}var z=t.memoizedState;if(z!==null&&(S=z.dehydrated,S!==null)){if(m)a.flags&256?(zr(a),a.flags&=-257,a=Mm(t,a,l)):a.memoizedState!==null?(Fr(),a.child=t.child,a.flags|=128,a=null):(Fr(),S=c.fallback,f=a.mode,c=Ed({mode:"visible",children:c.children},f),S=Fi(S,f,l,null),S.flags|=2,c.return=a,S.return=a,c.sibling=S,a.child=c,Ki(a,t.child,null,l),c=a.child,c.memoizedState=km(l),c.childLanes=Im(t,v,l),a.memoizedState=Rm,a=bc(null,c));else if(zr(a),mp(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var ee=v.dgst;v=ee,c=Error(r(419)),c.stack="",c.digest=v,ic({value:c,source:null,stack:null}),a=Mm(t,a,l)}else if(jn||Fl(t,a,l,!1),v=(l&t.childLanes)!==0,jn||v){if(v=Ft,v!==null&&(c=Ha(v,l),c!==0&&c!==z.retryLane))throw z.retryLane=c,zi(t,c),us(v,t,c),Am;fp(S)||Md(),a=Mm(t,a,l)}else fp(S)?(a.flags|=192,a.child=t.child,a=null):(t=z.treeContext,Yt=Ys(S.nextSibling),Vn=a,vt=!0,Or=null,Hs=!1,t!==null&&Tx(a,t),a=Dm(a,c.children),a.flags|=4096);return a}return f?(Fr(),S=c.fallback,f=a.mode,z=t.child,ee=z.sibling,c=Ka(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,ee!==null?S=Ka(ee,S):(S=Fi(S,f,l,null),S.flags|=2),S.return=a,c.return=a,c.sibling=S,a.child=c,bc(null,c),c=a.child,S=t.child.memoizedState,S===null?S=km(l):(f=S.cachePool,f!==null?(z=_n._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=Dx(),S={baseLanes:S.baseLanes|l,cachePool:f}),c.memoizedState=S,c.childLanes=Im(t,v,l),a.memoizedState=Rm,bc(t.child,c)):(zr(a),l=t.child,t=l.sibling,l=Ka(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,t!==null&&(v=a.deletions,v===null?(a.deletions=[t],a.flags|=16):v.push(t)),a.child=l,a.memoizedState=null,l)}function Dm(t,a){return a=Ed({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Ed(t,a){return t=js(22,t,null,a),t.lanes=0,t}function Mm(t,a,l){return Ki(a,t.child,null,l),t=Dm(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Gb(t,a,l){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a),Kf(t.return,a,l)}function Om(t,a,l,c,f,m){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f,treeForkCount:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=l,v.tailMode=f,v.treeForkCount=m)}function Yb(t,a,l){var c=a.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=mn.current,S=(v&2)!==0;if(S?(v=v&1|2,a.flags|=128):v&=1,ce(mn,v),Un(t,a,c,l),c=vt?rc:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gb(t,l,a);else if(t.tag===19)Gb(t,l,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(l=a.child,f=null;l!==null;)t=l.alternate,t!==null&&fd(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),Om(a,!1,f,l,m,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&fd(t)===null){a.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}Om(a,!0,l,null,m,c);break;case"together":Om(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function tr(t,a,l){if(t!==null&&(a.dependencies=t.dependencies),Hr|=a.lanes,(l&a.childLanes)===0)if(t!==null){if(Fl(t,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(r(153));if(a.child!==null){for(t=a.child,l=Ka(t,t.pendingProps),a.child=l,l.return=a;t.sibling!==null;)t=t.sibling,l=l.sibling=Ka(t,t.pendingProps),l.return=a;l.sibling=null}return a.child}function Pm(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&rd(t)))}function rE(t,a,l){switch(a.tag){case 3:Rt(a,a.stateNode.containerInfo),Vr(a,_n,t.memoizedState.cache),qi();break;case 27:case 5:nn(a);break;case 4:Rt(a,a.stateNode.containerInfo);break;case 10:Vr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,lm(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(zr(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Hb(t,a,l):(zr(a),t=tr(t,a,l),t!==null?t.sibling:null);zr(a);break;case 19:var f=(t.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(Fl(t,a,l,!1),c=(l&a.childLanes)!==0),f){if(c)return Yb(t,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(mn,mn.current),c)break;return null;case 22:return a.lanes=0,Ub(t,a,l,a.pendingProps);case 24:Vr(a,_n,t.memoizedState.cache)}return tr(t,a,l)}function Wb(t,a,l){if(t!==null)if(t.memoizedProps!==a.pendingProps)jn=!0;else{if(!Pm(t,l)&&(a.flags&128)===0)return jn=!1,rE(t,a,l);jn=(t.flags&131072)!==0}else jn=!1,vt&&(a.flags&1048576)!==0&&Sx(a,rc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(t=Yi(a.elementType),a.type=t,typeof t=="function")zf(t)?(c=Xi(t,c),a.tag=1,a=qb(null,a,t,c,l)):(a.tag=0,a=Cm(null,a,t,c,l));else{if(t!=null){var f=t.$$typeof;if(f===ie){a.tag=11,a=Pb(null,a,t,c,l);break e}else if(f===E){a.tag=14,a=Vb(null,a,t,c,l);break e}}throw a=$(t)||t,Error(r(306,a,""))}}return a;case 0:return Cm(t,a,a.type,a.pendingProps,l);case 1:return c=a.type,f=Xi(c,a.pendingProps),qb(t,a,c,f,l);case 3:e:{if(Rt(a,a.stateNode.containerInfo),t===null)throw Error(r(387));c=a.pendingProps;var m=a.memoizedState;f=m.element,nm(t,a),fc(a,c,null,l);var v=a.memoizedState;if(c=v.cache,Vr(a,_n,c),c!==m.cache&&Qf(a,[_n],l,!0),hc(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=$b(t,a,c,l);break e}else if(c!==f){f=Fs(Error(r(424)),a),ic(f),a=$b(t,a,c,l);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,Yt=Ys(t.firstChild),Vn=a,vt=!0,Or=null,Hs=!0,l=Ux(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(qi(),c===f){a=tr(t,a,l);break e}Un(t,a,c,l)}a=a.child}return a;case 26:return jd(t,a),t===null?(l=rv(a.type,null,a.pendingProps,null))?a.memoizedState=l:vt||(l=a.type,t=a.pendingProps,c=zd(Ie.current).createElement(l),c[an]=a,c[yn]=t,Bn(c,l,t),vn(c),a.stateNode=c):a.memoizedState=rv(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return nn(a),t===null&&vt&&(c=a.stateNode=nv(a.type,a.pendingProps,Ie.current),Vn=a,Hs=!0,f=Yt,Qr(a.type)?(pp=f,Yt=Ys(c.firstChild)):Yt=f),Un(t,a,a.pendingProps.children,l),jd(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&vt&&((f=c=Yt)&&(c=OE(c,a.type,a.pendingProps,Hs),c!==null?(a.stateNode=c,Vn=a,Yt=Ys(c.firstChild),Hs=!1,f=!0):f=!1),f||Pr(a)),nn(a),f=a.type,m=a.pendingProps,v=t!==null?t.memoizedProps:null,c=m.children,up(f,m)?c=null:v!==null&&up(f,v)&&(a.flags|=32),a.memoizedState!==null&&(f=cm(t,a,Qj,null,null,l),Dc._currentValue=f),jd(t,a),Un(t,a,c,l),a.child;case 6:return t===null&&vt&&((t=l=Yt)&&(l=PE(l,a.pendingProps,Hs),l!==null?(a.stateNode=l,Vn=a,Yt=null,t=!0):t=!1),t||Pr(a)),null;case 13:return Hb(t,a,l);case 4:return Rt(a,a.stateNode.containerInfo),c=a.pendingProps,t===null?a.child=Ki(a,null,c,l):Un(t,a,c,l),a.child;case 11:return Pb(t,a,a.type,a.pendingProps,l);case 7:return Un(t,a,a.pendingProps,l),a.child;case 8:return Un(t,a,a.pendingProps.children,l),a.child;case 12:return Un(t,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,Vr(a,a.type,c.value),Un(t,a,c.children,l),a.child;case 9:return f=a.type._context,c=a.pendingProps.children,Hi(a),f=Ln(f),c=c(f),a.flags|=1,Un(t,a,c,l),a.child;case 14:return Vb(t,a,a.type,a.pendingProps,l);case 15:return Lb(t,a,a.type,a.pendingProps,l);case 19:return Yb(t,a,l);case 31:return aE(t,a,l);case 22:return Ub(t,a,l,a.pendingProps);case 24:return Hi(a),c=Ln(_n),t===null?(f=Zf(),f===null&&(f=Ft,m=Xf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=l),f=m),a.memoizedState={parent:c,cache:f},tm(a),Vr(a,_n,f)):((t.lanes&l)!==0&&(nm(t,a),fc(a,null,null,l),hc()),f=t.memoizedState,m=a.memoizedState,f.parent!==c?(f={parent:c,cache:c},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Vr(a,_n,c)):(c=m.cache,Vr(a,_n,c),c!==f.cache&&Qf(a,[_n],l,!0))),Un(t,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function nr(t){t.flags|=4}function Vm(t,a,l,c,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(wy())t.flags|=8192;else throw Wi=cd,em}else t.flags&=-16777217}function Kb(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!uv(a))if(wy())t.flags|=8192;else throw Wi=cd,em}function Sd(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?$e():536870912,t.lanes|=a,eo|=a)}function yc(t,a){if(!vt)switch(t.tailMode){case"hidden":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Wt(t){var a=t.alternate!==null&&t.alternate.child===t.child,l=0,c=0;if(a)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=l,a}function iE(t,a,l){var c=a.pendingProps;switch(Hf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(a),null;case 1:return Wt(a),null;case 3:return l=a.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Ja(_n),mt(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(zl(a)?nr(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Yf())),Wt(a),null;case 26:var f=a.type,m=a.memoizedState;return t===null?(nr(a),m!==null?(Wt(a),Kb(a,m)):(Wt(a),Vm(a,f,null,c,l))):m?m!==t.memoizedState?(nr(a),Wt(a),Kb(a,m)):(Wt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==c&&nr(a),Wt(a),Vm(a,f,t,c,l)),null;case 27:if(se(a),l=Ie.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&nr(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Wt(a),null}t=pe.current,zl(a)?Ax(a):(t=nv(f,c,l),a.stateNode=t,nr(a))}return Wt(a),null;case 5:if(se(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==c&&nr(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Wt(a),null}if(m=pe.current,zl(a))Ax(a);else{var v=zd(Ie.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[an]=a,m[yn]=c;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=m;e:switch(Bn(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&nr(a)}}return Wt(a),Vm(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,l),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==c&&nr(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(t=Ie.current,zl(a)){if(t=a.stateNode,l=a.memoizedProps,c=null,f=Vn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[an]=a,t=!!(t.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Hy(t.nodeValue,l)),t||Pr(a,!0)}else t=zd(t).createTextNode(c),t[an]=a,a.stateNode=t}return Wt(a),null;case 31:if(l=a.memoizedState,t===null||t.memoizedState!==null){if(c=zl(a),l!==null){if(t===null){if(!c)throw Error(r(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[an]=a}else qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Wt(a),t=!1}else l=Yf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return a.flags&256?(Ss(a),a):(Ss(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Wt(a),null;case 13:if(c=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=zl(a),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(r(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[an]=a}else qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Wt(a),f=!1}else f=Yf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Ss(a),a):(Ss(a),null)}return Ss(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,t=t!==null&&t.memoizedState!==null,l&&(c=a.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),l!==t&&l&&(a.child.flags|=8192),Sd(a,a.updateQueue),Wt(a),null);case 4:return mt(),t===null&&rp(a.stateNode.containerInfo),Wt(a),null;case 10:return Ja(a.type),Wt(a),null;case 19:if(te(mn),c=a.memoizedState,c===null)return Wt(a),null;if(f=(a.flags&128)!==0,m=c.rendering,m===null)if(f)yc(c,!1);else{if(ln!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(m=fd(t),m!==null){for(a.flags|=128,yc(c,!1),t=m.updateQueue,a.updateQueue=t,Sd(a,t),a.subtreeFlags=0,t=l,l=a.child;l!==null;)Nx(l,t),l=l.sibling;return ce(mn,mn.current&1|2),vt&&Qa(a,c.treeForkCount),a.child}t=t.sibling}c.tail!==null&&jt()>kd&&(a.flags|=128,f=!0,yc(c,!1),a.lanes=4194304)}else{if(!f)if(t=fd(m),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,Sd(a,t),yc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!vt)return Wt(a),null}else 2*jt()-c.renderingStartTime>kd&&l!==536870912&&(a.flags|=128,f=!0,yc(c,!1),a.lanes=4194304);c.isBackwards?(m.sibling=a.child,a.child=m):(t=c.last,t!==null?t.sibling=m:a.child=m,c.last=m)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=jt(),t.sibling=null,l=mn.current,ce(mn,f?l&1|2:l&1),vt&&Qa(a,c.treeForkCount),t):(Wt(a),null);case 22:case 23:return Ss(a),im(),c=a.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(Wt(a),a.subtreeFlags&6&&(a.flags|=8192)):Wt(a),l=a.updateQueue,l!==null&&Sd(a,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),t!==null&&te(Gi),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ja(_n),Wt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function lE(t,a){switch(Hf(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Ja(_n),mt(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return se(a),null;case 31:if(a.memoizedState!==null){if(Ss(a),a.alternate===null)throw Error(r(340));qi()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Ss(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(r(340));qi()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return te(mn),null;case 4:return mt(),null;case 10:return Ja(a.type),null;case 22:case 23:return Ss(a),im(),t!==null&&te(Gi),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Ja(_n),null;case 25:return null;default:return null}}function Qb(t,a){switch(Hf(a),a.tag){case 3:Ja(_n),mt();break;case 26:case 27:case 5:se(a);break;case 4:mt();break;case 31:a.memoizedState!==null&&Ss(a);break;case 13:Ss(a);break;case 19:te(mn);break;case 10:Ja(a.type);break;case 22:case 23:Ss(a),im(),t!==null&&te(Gi);break;case 24:Ja(_n)}}function vc(t,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){c=void 0;var m=l.create,v=l.inst;c=m(),v.destroy=c}l=l.next}while(l!==f)}}catch(S){Ot(a,a.return,S)}}function qr(t,a,l){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var v=c.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,f=a;var z=l,ee=S;try{ee()}catch(he){Ot(f,z,he)}}}c=c.next}while(c!==m)}}catch(he){Ot(a,a.return,he)}}function Xb(t){var a=t.updateQueue;if(a!==null){var l=t.stateNode;try{zx(a,l)}catch(c){Ot(t,t.return,c)}}}function Jb(t,a,l){l.props=Xi(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(c){Ot(t,a,c)}}function wc(t,a){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof l=="function"?t.refCleanup=l(c):l.current=c}}catch(f){Ot(t,a,f)}}function Ra(t,a){var l=t.ref,c=t.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){Ot(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){Ot(t,a,f)}else l.current=null}function Zb(t){var a=t.type,l=t.memoizedProps,c=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){Ot(t,t.return,f)}}function Lm(t,a,l){try{var c=t.stateNode;CE(c,t.type,l,a),c[yn]=a}catch(f){Ot(t,t.return,f)}}function ey(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qr(t.type)||t.tag===4}function Um(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ey(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bm(t,a,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(t),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=ta));else if(c!==4&&(c===27&&Qr(t.type)&&(l=t.stateNode,a=null),t=t.child,t!==null))for(Bm(t,a,l),t=t.sibling;t!==null;)Bm(t,a,l),t=t.sibling}function Td(t,a,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,a?l.insertBefore(t,a):l.appendChild(t);else if(c!==4&&(c===27&&Qr(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(Td(t,a,l),t=t.sibling;t!==null;)Td(t,a,l),t=t.sibling}function ty(t){var a=t.stateNode,l=t.memoizedProps;try{for(var c=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);Bn(a,c,l),a[an]=t,a[yn]=l}catch(m){Ot(t,t.return,m)}}var sr=!1,En=!1,zm=!1,ny=typeof WeakSet=="function"?WeakSet:Set,Mn=null;function oE(t,a){if(t=t.containerInfo,op=Wd,t=mx(t),Mf(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var v=0,S=-1,z=-1,ee=0,he=0,xe=t,ne=null;t:for(;;){for(var le;xe!==l||f!==0&&xe.nodeType!==3||(S=v+f),xe!==m||c!==0&&xe.nodeType!==3||(z=v+c),xe.nodeType===3&&(v+=xe.nodeValue.length),(le=xe.firstChild)!==null;)ne=xe,xe=le;for(;;){if(xe===t)break t;if(ne===l&&++ee===f&&(S=v),ne===m&&++he===c&&(z=v),(le=xe.nextSibling)!==null)break;xe=ne,ne=xe.parentNode}xe=le}l=S===-1||z===-1?null:{start:S,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(cp={focusedElem:t,selectionRange:l},Wd=!1,Mn=a;Mn!==null;)if(a=Mn,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Mn=t;else for(;Mn!==null;){switch(a=Mn,m=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)f=t[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,l=a,f=m.memoizedProps,m=m.memoizedState,c=l.stateNode;try{var Oe=Xi(l.type,f);t=c.getSnapshotBeforeUpdate(Oe,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(He){Ot(l,l.return,He)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,l=t.nodeType,l===9)hp(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":hp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=a.sibling,t!==null){t.return=a.return,Mn=t;break}Mn=a.return}}function sy(t,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:rr(t,l),c&4&&vc(5,l);break;case 1:if(rr(t,l),c&4)if(t=l.stateNode,a===null)try{t.componentDidMount()}catch(v){Ot(l,l.return,v)}else{var f=Xi(l.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Ot(l,l.return,v)}}c&64&&Xb(l),c&512&&wc(l,l.return);break;case 3:if(rr(t,l),c&64&&(t=l.updateQueue,t!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{zx(t,a)}catch(v){Ot(l,l.return,v)}}break;case 27:a===null&&c&4&&ty(l);case 26:case 5:rr(t,l),a===null&&c&4&&Zb(l),c&512&&wc(l,l.return);break;case 12:rr(t,l);break;case 31:rr(t,l),c&4&&iy(t,l);break;case 13:rr(t,l),c&4&&ly(t,l),c&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=xE.bind(null,l),VE(t,l))));break;case 22:if(c=l.memoizedState!==null||sr,!c){a=a!==null&&a.memoizedState!==null||En,f=sr;var m=En;sr=c,(En=a)&&!m?ir(t,l,(l.subtreeFlags&8772)!==0):rr(t,l),sr=f,En=m}break;case 30:break;default:rr(t,l)}}function ay(t){var a=t.alternate;a!==null&&(t.alternate=null,ay(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&jl(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Xt=null,is=!1;function ar(t,a,l){for(l=l.child;l!==null;)ry(t,a,l),l=l.sibling}function ry(t,a,l){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(xn,l)}catch{}switch(l.tag){case 26:En||Ra(l,a),ar(t,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:En||Ra(l,a);var c=Xt,f=is;Qr(l.type)&&(Xt=l.stateNode,is=!1),ar(t,a,l),Rc(l.stateNode),Xt=c,is=f;break;case 5:En||Ra(l,a);case 6:if(c=Xt,f=is,Xt=null,ar(t,a,l),Xt=c,is=f,Xt!==null)if(is)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(l.stateNode)}catch(m){Ot(l,a,m)}else try{Xt.removeChild(l.stateNode)}catch(m){Ot(l,a,m)}break;case 18:Xt!==null&&(is?(t=Xt,Xy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),oo(t)):Xy(Xt,l.stateNode));break;case 4:c=Xt,f=is,Xt=l.stateNode.containerInfo,is=!0,ar(t,a,l),Xt=c,is=f;break;case 0:case 11:case 14:case 15:qr(2,l,a),En||qr(4,l,a),ar(t,a,l);break;case 1:En||(Ra(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Jb(l,a,c)),ar(t,a,l);break;case 21:ar(t,a,l);break;case 22:En=(c=En)||l.memoizedState!==null,ar(t,a,l),En=c;break;default:ar(t,a,l)}}function iy(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{oo(t)}catch(l){Ot(a,a.return,l)}}}function ly(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{oo(t)}catch(l){Ot(a,a.return,l)}}function cE(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new ny),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new ny),a;default:throw Error(r(435,t.tag))}}function Ad(t,a){var l=cE(t);a.forEach(function(c){if(!l.has(c)){l.add(c);var f=bE.bind(null,t,c);c.then(f,f)}})}function ls(t,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],m=t,v=a,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(Qr(S.type)){Xt=S.stateNode,is=!1;break e}break;case 5:Xt=S.stateNode,is=!1;break e;case 3:case 4:Xt=S.stateNode.containerInfo,is=!0;break e}S=S.return}if(Xt===null)throw Error(r(160));ry(m,v,f),Xt=null,is=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)oy(a,t),a=a.sibling}var la=null;function oy(t,a){var l=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ls(a,t),os(t),c&4&&(qr(3,t,t.return),vc(3,t),qr(5,t,t.return));break;case 1:ls(a,t),os(t),c&512&&(En||l===null||Ra(l,l.return)),c&64&&sr&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=la;if(ls(a,t),os(t),c&512&&(En||l===null||Ra(l,l.return)),c&4){var m=l!==null?l.memoizedState:null;if(c=t.memoizedState,l===null)if(c===null)if(t.stateNode===null){e:{c=t.type,l=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ga]||m[an]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Bn(m,c,l),m[an]=t,vn(m),c=m;break e;case"link":var v=ov("link","href",f).get(c+(l.href||""));if(v){for(var S=0;S<v.length;S++)if(m=v[S],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){v.splice(S,1);break t}}m=f.createElement(c),Bn(m,c,l),f.head.appendChild(m);break;case"meta":if(v=ov("meta","content",f).get(c+(l.content||""))){for(S=0;S<v.length;S++)if(m=v[S],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){v.splice(S,1);break t}}m=f.createElement(c),Bn(m,c,l),f.head.appendChild(m);break;default:throw Error(r(468,c))}m[an]=t,vn(m),c=m}t.stateNode=c}else cv(f,t.type,t.stateNode);else t.stateNode=lv(f,c,t.memoizedProps);else m!==c?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,c===null?cv(f,t.type,t.stateNode):lv(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Lm(t,t.memoizedProps,l.memoizedProps)}break;case 27:ls(a,t),os(t),c&512&&(En||l===null||Ra(l,l.return)),l!==null&&c&4&&Lm(t,t.memoizedProps,l.memoizedProps);break;case 5:if(ls(a,t),os(t),c&512&&(En||l===null||Ra(l,l.return)),t.flags&32){f=t.stateNode;try{rs(f,"")}catch(Oe){Ot(t,t.return,Oe)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,Lm(t,f,l!==null?l.memoizedProps:f)),c&1024&&(zm=!0);break;case 6:if(ls(a,t),os(t),c&4){if(t.stateNode===null)throw Error(r(162));c=t.memoizedProps,l=t.stateNode;try{l.nodeValue=c}catch(Oe){Ot(t,t.return,Oe)}}break;case 3:if($d=null,f=la,la=Fd(a.containerInfo),ls(a,t),la=f,os(t),c&4&&l!==null&&l.memoizedState.isDehydrated)try{oo(a.containerInfo)}catch(Oe){Ot(t,t.return,Oe)}zm&&(zm=!1,cy(t));break;case 4:c=la,la=Fd(t.stateNode.containerInfo),ls(a,t),os(t),la=c;break;case 12:ls(a,t),os(t);break;case 31:ls(a,t),os(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ad(t,c)));break;case 13:ls(a,t),os(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Rd=jt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ad(t,c)));break;case 22:f=t.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,ee=sr,he=En;if(sr=ee||f,En=he||z,ls(a,t),En=he,sr=ee,os(t),c&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(l===null||z||sr||En||Ji(t)),l=null,a=t;;){if(a.tag===5||a.tag===26){if(l===null){z=l=a;try{if(m=z.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=z.stateNode;var xe=z.memoizedProps.style,ne=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;S.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Oe){Ot(z,z.return,Oe)}}}else if(a.tag===6){if(l===null){z=a;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(Oe){Ot(z,z.return,Oe)}}}else if(a.tag===18){if(l===null){z=a;try{var le=z.stateNode;f?Jy(le,!0):Jy(z.stateNode,!1)}catch(Oe){Ot(z,z.return,Oe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=t.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Ad(t,l))));break;case 19:ls(a,t),os(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Ad(t,c)));break;case 30:break;case 21:break;default:ls(a,t),os(t)}}function os(t){var a=t.flags;if(a&2){try{for(var l,c=t.return;c!==null;){if(ey(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var f=l.stateNode,m=Um(t);Td(t,m,f);break;case 5:var v=l.stateNode;l.flags&32&&(rs(v,""),l.flags&=-33);var S=Um(t);Td(t,S,v);break;case 3:case 4:var z=l.stateNode.containerInfo,ee=Um(t);Bm(t,ee,z);break;default:throw Error(r(161))}}catch(he){Ot(t,t.return,he)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function cy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;cy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function rr(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)sy(t,a.alternate,a),a=a.sibling}function Ji(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:qr(4,a,a.return),Ji(a);break;case 1:Ra(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Jb(a,a.return,l),Ji(a);break;case 27:Rc(a.stateNode);case 26:case 5:Ra(a,a.return),Ji(a);break;case 22:a.memoizedState===null&&Ji(a);break;case 30:Ji(a);break;default:Ji(a)}t=t.sibling}}function ir(t,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,f=t,m=a,v=m.flags;switch(m.tag){case 0:case 11:case 15:ir(f,m,l),vc(4,m);break;case 1:if(ir(f,m,l),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){Ot(c,c.return,ee)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)Bx(z[f],S)}catch(ee){Ot(c,c.return,ee)}}l&&v&64&&Xb(m),wc(m,m.return);break;case 27:ty(m);case 26:case 5:ir(f,m,l),l&&c===null&&v&4&&Zb(m),wc(m,m.return);break;case 12:ir(f,m,l);break;case 31:ir(f,m,l),l&&v&4&&iy(f,m);break;case 13:ir(f,m,l),l&&v&4&&ly(f,m);break;case 22:m.memoizedState===null&&ir(f,m,l),wc(m,m.return);break;case 30:break;default:ir(f,m,l)}a=a.sibling}}function Fm(t,a){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&lc(l))}function qm(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&lc(t))}function oa(t,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)uy(t,a,l,c),a=a.sibling}function uy(t,a,l,c){var f=a.flags;switch(a.tag){case 0:case 11:case 15:oa(t,a,l,c),f&2048&&vc(9,a);break;case 1:oa(t,a,l,c);break;case 3:oa(t,a,l,c),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&lc(t)));break;case 12:if(f&2048){oa(t,a,l,c),t=a.stateNode;try{var m=a.memoizedProps,v=m.id,S=m.onPostCommit;typeof S=="function"&&S(v,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){Ot(a,a.return,z)}}else oa(t,a,l,c);break;case 31:oa(t,a,l,c);break;case 13:oa(t,a,l,c);break;case 23:break;case 22:m=a.stateNode,v=a.alternate,a.memoizedState!==null?m._visibility&2?oa(t,a,l,c):_c(t,a):m._visibility&2?oa(t,a,l,c):(m._visibility|=2,Xl(t,a,l,c,(a.subtreeFlags&10256)!==0||!1)),f&2048&&Fm(v,a);break;case 24:oa(t,a,l,c),f&2048&&qm(a.alternate,a);break;default:oa(t,a,l,c)}}function Xl(t,a,l,c,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var m=t,v=a,S=l,z=c,ee=v.flags;switch(v.tag){case 0:case 11:case 15:Xl(m,v,S,z,f),vc(8,v);break;case 23:break;case 22:var he=v.stateNode;v.memoizedState!==null?he._visibility&2?Xl(m,v,S,z,f):_c(m,v):(he._visibility|=2,Xl(m,v,S,z,f)),f&&ee&2048&&Fm(v.alternate,v);break;case 24:Xl(m,v,S,z,f),f&&ee&2048&&qm(v.alternate,v);break;default:Xl(m,v,S,z,f)}a=a.sibling}}function _c(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=t,c=a,f=c.flags;switch(c.tag){case 22:_c(l,c),f&2048&&Fm(c.alternate,c);break;case 24:_c(l,c),f&2048&&qm(c.alternate,c);break;default:_c(l,c)}a=a.sibling}}var Nc=8192;function Jl(t,a,l){if(t.subtreeFlags&Nc)for(t=t.child;t!==null;)dy(t,a,l),t=t.sibling}function dy(t,a,l){switch(t.tag){case 26:Jl(t,a,l),t.flags&Nc&&t.memoizedState!==null&&KE(l,la,t.memoizedState,t.memoizedProps);break;case 5:Jl(t,a,l);break;case 3:case 4:var c=la;la=Fd(t.stateNode.containerInfo),Jl(t,a,l),la=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=Nc,Nc=16777216,Jl(t,a,l),Nc=c):Jl(t,a,l));break;default:Jl(t,a,l)}}function hy(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function jc(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Mn=c,my(c,t)}hy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fy(t),t=t.sibling}function fy(t){switch(t.tag){case 0:case 11:case 15:jc(t),t.flags&2048&&qr(9,t,t.return);break;case 3:jc(t);break;case 12:jc(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Cd(t)):jc(t);break;default:jc(t)}}function Cd(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Mn=c,my(c,t)}hy(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:qr(8,a,a.return),Cd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Cd(a));break;default:Cd(a)}t=t.sibling}}function my(t,a){for(;Mn!==null;){var l=Mn;switch(l.tag){case 0:case 11:case 15:qr(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:lc(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Mn=c;else e:for(l=t;Mn!==null;){c=Mn;var f=c.sibling,m=c.return;if(ay(c),c===l){Mn=null;break e}if(f!==null){f.return=m,Mn=f;break e}Mn=m}}}var uE={getCacheForType:function(t){var a=Ln(_n),l=a.data.get(t);return l===void 0&&(l=t(),a.data.set(t,l)),l},cacheSignal:function(){return Ln(_n).controller.signal}},dE=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Ft=null,ht=null,pt=0,Mt=0,Ts=null,$r=!1,Zl=!1,$m=!1,lr=0,ln=0,Hr=0,Zi=0,Hm=0,As=0,eo=0,Ec=null,cs=null,Gm=!1,Rd=0,py=0,kd=1/0,Id=null,Gr=null,Rn=0,Yr=null,to=null,or=0,Ym=0,Wm=null,gy=null,Sc=0,Km=null;function Cs(){return(Ct&2)!==0&&pt!==0?pt&-pt:R.T!==null?tp():Ai()}function xy(){if(As===0)if((pt&536870912)===0||vt){var t=ye;ye<<=1,(ye&3932160)===0&&(ye=262144),As=t}else As=536870912;return t=Es.current,t!==null&&(t.flags|=32),As}function us(t,a,l){(t===Ft&&(Mt===2||Mt===9)||t.cancelPendingCommit!==null)&&(no(t,0),Wr(t,pt,As,!1)),sn(t,l),((Ct&2)===0||t!==Ft)&&(t===Ft&&((Ct&2)===0&&(Zi|=l),ln===4&&Wr(t,pt,As,!1)),ka(t))}function by(t,a,l){if((Ct&6)!==0)throw Error(r(327));var c=!l&&(a&127)===0&&(a&t.expiredLanes)===0||dt(t,a),f=c?mE(t,a):Xm(t,a,!0),m=c;do{if(f===0){Zl&&!c&&Wr(t,a,0,!1);break}else{if(l=t.current.alternate,m&&!hE(l)){f=Xm(t,a,!1),m=!1;continue}if(f===2){if(m=a,t.errorRecoveryDisabledLanes&m)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var S=t;f=Ec;var z=S.current.memoizedState.isDehydrated;if(z&&(no(S,v).flags|=256),v=Xm(S,v,!1),v!==2){if($m&&!z){S.errorRecoveryDisabledLanes|=m,Zi|=m,f=4;break e}m=cs,cs=f,m!==null&&(cs===null?cs=m:cs.push.apply(cs,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){no(t,0),Wr(t,a,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Wr(c,a,As,!$r);break e;case 2:cs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(f=Rd+300-jt(),10<f)){if(Wr(c,a,As,!$r),tt(c,0,!0)!==0)break e;or=a,c.timeoutHandle=Ky(yy.bind(null,c,l,cs,Id,Gm,a,As,Zi,eo,$r,m,"Throttled",-0,0),f);break e}yy(c,l,cs,Id,Gm,a,As,Zi,eo,$r,m,null,-0,0)}}break}while(!0);ka(t)}function yy(t,a,l,c,f,m,v,S,z,ee,he,xe,ne,le){if(t.timeoutHandle=-1,xe=a.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ta},dy(a,m,xe);var Oe=(m&62914560)===m?Rd-jt():(m&4194048)===m?py-jt():0;if(Oe=QE(xe,Oe),Oe!==null){or=m,t.cancelPendingCommit=Oe(Ty.bind(null,t,a,m,l,c,f,v,S,z,he,xe,null,ne,le)),Wr(t,m,v,!ee);return}}Ty(t,a,m,l,c,f,v,S,z)}function hE(t){for(var a=t;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!Ns(m(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Wr(t,a,l,c){a&=~Hm,a&=~Zi,t.suspendedLanes|=a,t.pingedLanes&=~a,c&&(t.warmLanes|=a),c=t.expirationTimes;for(var f=a;0<f;){var m=31-ae(f),v=1<<m;c[m]=-1,f&=~v}l!==0&&ns(t,l,a)}function Dd(){return(Ct&6)===0?(Tc(0),!1):!0}function Qm(){if(ht!==null){if(Mt===0)var t=ht.return;else t=ht,Xa=$i=null,hm(t),Gl=null,cc=0,t=ht;for(;t!==null;)Qb(t.alternate,t),t=t.return;ht=null}}function no(t,a){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,IE(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),or=0,Qm(),Ft=t,ht=l=Ka(t.current,null),pt=a,Mt=0,Ts=null,$r=!1,Zl=dt(t,a),$m=!1,eo=As=Hm=Zi=Hr=ln=0,cs=Ec=null,Gm=!1,(a&8)!==0&&(a|=a&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=a;0<c;){var f=31-ae(c),m=1<<f;a|=t[f],c&=~m}return lr=a,ed(),l}function vy(t,a){rt=null,R.H=xc,a===Hl||a===od?(a=Px(),Mt=3):a===em?(a=Px(),Mt=4):Mt=a===Am?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ts=a,ht===null&&(ln=1,_d(t,Fs(a,t.current)))}function wy(){var t=Es.current;return t===null?!0:(pt&4194048)===pt?Gs===null:(pt&62914560)===pt||(pt&536870912)!==0?t===Gs:!1}function _y(){var t=R.H;return R.H=xc,t===null?xc:t}function Ny(){var t=R.A;return R.A=uE,t}function Md(){ln=4,$r||(pt&4194048)!==pt&&Es.current!==null||(Zl=!0),(Hr&134217727)===0&&(Zi&134217727)===0||Ft===null||Wr(Ft,pt,As,!1)}function Xm(t,a,l){var c=Ct;Ct|=2;var f=_y(),m=Ny();(Ft!==t||pt!==a)&&(Id=null,no(t,a)),a=!1;var v=ln;e:do try{if(Mt!==0&&ht!==null){var S=ht,z=Ts;switch(Mt){case 8:Qm(),v=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(a=!0);var ee=Mt;if(Mt=0,Ts=null,so(t,S,z,ee),l&&Zl){v=0;break e}break;default:ee=Mt,Mt=0,Ts=null,so(t,S,z,ee)}}fE(),v=ln;break}catch(he){vy(t,he)}while(!0);return a&&t.shellSuspendCounter++,Xa=$i=null,Ct=c,R.H=f,R.A=m,ht===null&&(Ft=null,pt=0,ed()),v}function fE(){for(;ht!==null;)jy(ht)}function mE(t,a){var l=Ct;Ct|=2;var c=_y(),f=Ny();Ft!==t||pt!==a?(Id=null,kd=jt()+500,no(t,a)):Zl=dt(t,a);e:do try{if(Mt!==0&&ht!==null){a=ht;var m=Ts;t:switch(Mt){case 1:Mt=0,Ts=null,so(t,a,m,1);break;case 2:case 9:if(Mx(m)){Mt=0,Ts=null,Ey(a);break}a=function(){Mt!==2&&Mt!==9||Ft!==t||(Mt=7),ka(t)},m.then(a,a);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:Mx(m)?(Mt=0,Ts=null,Ey(a)):(Mt=0,Ts=null,so(t,a,m,7));break;case 5:var v=null;switch(ht.tag){case 26:v=ht.memoizedState;case 5:case 27:var S=ht;if(v?uv(v):S.stateNode.complete){Mt=0,Ts=null;var z=S.sibling;if(z!==null)ht=z;else{var ee=S.return;ee!==null?(ht=ee,Od(ee)):ht=null}break t}}Mt=0,Ts=null,so(t,a,m,5);break;case 6:Mt=0,Ts=null,so(t,a,m,6);break;case 8:Qm(),ln=6;break e;default:throw Error(r(462))}}pE();break}catch(he){vy(t,he)}while(!0);return Xa=$i=null,R.H=c,R.A=f,Ct=l,ht!==null?0:(Ft=null,pt=0,ed(),ln)}function pE(){for(;ht!==null&&!ot();)jy(ht)}function jy(t){var a=Wb(t.alternate,t,lr);t.memoizedProps=t.pendingProps,a===null?Od(t):ht=a}function Ey(t){var a=t,l=a.alternate;switch(a.tag){case 15:case 0:a=Fb(l,a,a.pendingProps,a.type,void 0,pt);break;case 11:a=Fb(l,a,a.pendingProps,a.type.render,a.ref,pt);break;case 5:hm(a);default:Qb(l,a),a=ht=Nx(a,lr),a=Wb(l,a,lr)}t.memoizedProps=t.pendingProps,a===null?Od(t):ht=a}function so(t,a,l,c){Xa=$i=null,hm(a),Gl=null,cc=0;var f=a.return;try{if(sE(t,f,a,l,pt)){ln=1,_d(t,Fs(l,t.current)),ht=null;return}}catch(m){if(f!==null)throw ht=f,m;ln=1,_d(t,Fs(l,t.current)),ht=null;return}a.flags&32768?(vt||c===1?t=!0:Zl||(pt&536870912)!==0?t=!1:($r=t=!0,(c===2||c===9||c===3||c===6)&&(c=Es.current,c!==null&&c.tag===13&&(c.flags|=16384))),Sy(a,t)):Od(a)}function Od(t){var a=t;do{if((a.flags&32768)!==0){Sy(a,$r);return}t=a.return;var l=iE(a.alternate,a,lr);if(l!==null){ht=l;return}if(a=a.sibling,a!==null){ht=a;return}ht=a=t}while(a!==null);ln===0&&(ln=5)}function Sy(t,a){do{var l=lE(t.alternate,t);if(l!==null){l.flags&=32767,ht=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(t=t.sibling,t!==null)){ht=t;return}ht=t=l}while(t!==null);ln=6,ht=null}function Ty(t,a,l,c,f,m,v,S,z){t.cancelPendingCommit=null;do Pd();while(Rn!==0);if((Ct&6)!==0)throw Error(r(327));if(a!==null){if(a===t.current)throw Error(r(177));if(m=a.lanes|a.childLanes,m|=Uf,ts(t,l,m,v,S,z),t===Ft&&(ht=Ft=null,pt=0),to=a,Yr=t,or=l,Ym=m,Wm=f,gy=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,yE(In,function(){return Iy(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=R.T,R.T=null,f=K.p,K.p=2,v=Ct,Ct|=4;try{oE(t,a,l)}finally{Ct=v,K.p=f,R.T=c}}Rn=1,Ay(),Cy(),Ry()}}function Ay(){if(Rn===1){Rn=0;var t=Yr,a=to,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var c=K.p;K.p=2;var f=Ct;Ct|=4;try{oy(a,t);var m=cp,v=mx(t.containerInfo),S=m.focusedElem,z=m.selectionRange;if(v!==S&&S&&S.ownerDocument&&fx(S.ownerDocument.documentElement,S)){if(z!==null&&Mf(S)){var ee=z.start,he=z.end;if(he===void 0&&(he=ee),"selectionStart"in S)S.selectionStart=ee,S.selectionEnd=Math.min(he,S.value.length);else{var xe=S.ownerDocument||document,ne=xe&&xe.defaultView||window;if(ne.getSelection){var le=ne.getSelection(),Oe=S.textContent.length,He=Math.min(z.start,Oe),Bt=z.end===void 0?He:Math.min(z.end,Oe);!le.extend&&He>Bt&&(v=Bt,Bt=He,He=v);var Q=hx(S,He),Y=hx(S,Bt);if(Q&&Y&&(le.rangeCount!==1||le.anchorNode!==Q.node||le.anchorOffset!==Q.offset||le.focusNode!==Y.node||le.focusOffset!==Y.offset)){var Z=xe.createRange();Z.setStart(Q.node,Q.offset),le.removeAllRanges(),He>Bt?(le.addRange(Z),le.extend(Y.node,Y.offset)):(Z.setEnd(Y.node,Y.offset),le.addRange(Z))}}}}for(xe=[],le=S;le=le.parentNode;)le.nodeType===1&&xe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<xe.length;S++){var me=xe[S];me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}Wd=!!op,cp=op=null}finally{Ct=f,K.p=c,R.T=l}}t.current=a,Rn=2}}function Cy(){if(Rn===2){Rn=0;var t=Yr,a=to,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var c=K.p;K.p=2;var f=Ct;Ct|=4;try{sy(t,a.alternate,a)}finally{Ct=f,K.p=c,R.T=l}}Rn=3}}function Ry(){if(Rn===4||Rn===3){Rn=0,Kt();var t=Yr,a=to,l=or,c=gy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Rn=5:(Rn=0,to=Yr=null,ky(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(Gr=null),hn(l),a=a.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(xn,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=R.T,f=K.p,K.p=2,R.T=null;try{for(var m=t.onRecoverableError,v=0;v<c.length;v++){var S=c[v];m(S.value,{componentStack:S.stack})}}finally{R.T=a,K.p=f}}(or&3)!==0&&Pd(),ka(t),f=t.pendingLanes,(l&261930)!==0&&(f&42)!==0?t===Km?Sc++:(Sc=0,Km=t):Sc=0,Tc(0)}}function ky(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,lc(a)))}function Pd(){return Ay(),Cy(),Ry(),Iy()}function Iy(){if(Rn!==5)return!1;var t=Yr,a=Ym;Ym=0;var l=hn(or),c=R.T,f=K.p;try{K.p=32>l?32:l,R.T=null,l=Wm,Wm=null;var m=Yr,v=or;if(Rn=0,to=Yr=null,or=0,(Ct&6)!==0)throw Error(r(331));var S=Ct;if(Ct|=4,fy(m.current),uy(m,m.current,v,l),Ct=S,Tc(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(xn,m)}catch{}return!0}finally{K.p=f,R.T=c,ky(t,a)}}function Dy(t,a,l){a=Fs(l,a),a=Tm(t.stateNode,a,2),t=Br(t,a,2),t!==null&&(sn(t,2),ka(t))}function Ot(t,a,l){if(t.tag===3)Dy(t,t,l);else for(;a!==null;){if(a.tag===3){Dy(a,t,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Gr===null||!Gr.has(c))){t=Fs(l,t),l=Mb(2),c=Br(a,l,2),c!==null&&(Ob(l,c,a,t),sn(c,2),ka(c));break}}a=a.return}}function Jm(t,a,l){var c=t.pingCache;if(c===null){c=t.pingCache=new dE;var f=new Set;c.set(a,f)}else f=c.get(a),f===void 0&&(f=new Set,c.set(a,f));f.has(l)||($m=!0,f.add(l),t=gE.bind(null,t,a,l),a.then(t,t))}function gE(t,a,l){var c=t.pingCache;c!==null&&c.delete(a),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,Ft===t&&(pt&l)===l&&(ln===4||ln===3&&(pt&62914560)===pt&&300>jt()-Rd?(Ct&2)===0&&no(t,0):Hm|=l,eo===pt&&(eo=0)),ka(t)}function My(t,a){a===0&&(a=$e()),t=zi(t,a),t!==null&&(sn(t,a),ka(t))}function xE(t){var a=t.memoizedState,l=0;a!==null&&(l=a.retryLane),My(t,l)}function bE(t,a){var l=0;switch(t.tag){case 31:case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),My(t,l)}function yE(t,a){return Ce(t,a)}var Vd=null,ao=null,Zm=!1,Ld=!1,ep=!1,Kr=0;function ka(t){t!==ao&&t.next===null&&(ao===null?Vd=ao=t:ao=ao.next=t),Ld=!0,Zm||(Zm=!0,wE())}function Tc(t,a){if(!ep&&Ld){ep=!0;do for(var l=!1,c=Vd;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-ae(42|t)+1)-1,m&=f&~(v&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Ly(c,m))}else m=pt,m=tt(c,c===Ft?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||dt(c,m)||(l=!0,Ly(c,m));c=c.next}while(l);ep=!1}}function vE(){Oy()}function Oy(){Ld=Zm=!1;var t=0;Kr!==0&&kE()&&(t=Kr);for(var a=jt(),l=null,c=Vd;c!==null;){var f=c.next,m=Py(c,a);m===0?(c.next=null,l===null?Vd=f:l.next=f,f===null&&(ao=l)):(l=c,(t!==0||(m&3)!==0)&&(Ld=!0)),c=f}Rn!==0&&Rn!==5||Tc(t),Kr!==0&&(Kr=0)}function Py(t,a){for(var l=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var v=31-ae(m),S=1<<v,z=f[v];z===-1?((S&l)===0||(S&c)!==0)&&(f[v]=Ue(S,a)):z<=a&&(t.expiredLanes|=S),m&=~S}if(a=Ft,l=pt,l=tt(t,t===a?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,l===0||t===a&&(Mt===2||Mt===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Pe(c),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||dt(t,l)){if(a=l&-l,a===t.callbackPriority)return a;switch(c!==null&&Pe(c),hn(l)){case 2:case 8:l=Nt;break;case 32:l=In;break;case 268435456:l=Ps;break;default:l=In}return c=Vy.bind(null,t),l=Ce(l,c),t.callbackPriority=a,t.callbackNode=l,a}return c!==null&&c!==null&&Pe(c),t.callbackPriority=2,t.callbackNode=null,2}function Vy(t,a){if(Rn!==0&&Rn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(Pd()&&t.callbackNode!==l)return null;var c=pt;return c=tt(t,t===Ft?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(by(t,c,a),Py(t,jt()),t.callbackNode!=null&&t.callbackNode===l?Vy.bind(null,t):null)}function Ly(t,a){if(Pd())return null;by(t,a,!0)}function wE(){DE(function(){(Ct&6)!==0?Ce($n,vE):Oy()})}function tp(){if(Kr===0){var t=ql;t===0&&(t=st,st<<=1,(st&261888)===0&&(st=256)),Kr=t}return Kr}function Uy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Al(""+t)}function By(t,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,t.id&&l.setAttribute("form",t.id),a.parentNode.insertBefore(l,a),t=new FormData(t),l.parentNode.removeChild(l),t}function _E(t,a,l,c,f){if(a==="submit"&&l&&l.stateNode===f){var m=Uy((f[yn]||null).action),v=c.submitter;v&&(a=(a=v[yn]||null)?Uy(a.formAction):v.getAttribute("formAction"),a!==null&&(m=a,v=null));var S=new ja("action","action",null,c,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Kr!==0){var z=v?By(f,v):new FormData(f);wm(l,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(S.preventDefault(),z=v?By(f,v):new FormData(f),wm(l,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var np=0;np<Lf.length;np++){var sp=Lf[np],NE=sp.toLowerCase(),jE=sp[0].toUpperCase()+sp.slice(1);ia(NE,"on"+jE)}ia(xx,"onAnimationEnd"),ia(bx,"onAnimationIteration"),ia(yx,"onAnimationStart"),ia("dblclick","onDoubleClick"),ia("focusin","onFocus"),ia("focusout","onBlur"),ia(Bj,"onTransitionRun"),ia(zj,"onTransitionStart"),ia(Fj,"onTransitionCancel"),ia(vx,"onTransitionEnd"),va("onMouseEnter",["mouseout","mouseover"]),va("onMouseLeave",["mouseout","mouseover"]),va("onPointerEnter",["pointerout","pointerover"]),va("onPointerLeave",["pointerout","pointerover"]),ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ac));function zy(t,a){a=(a&4)!==0;for(var l=0;l<t.length;l++){var c=t[l],f=c.event;c=c.listeners;e:{var m=void 0;if(a)for(var v=c.length-1;0<=v;v--){var S=c[v],z=S.instance,ee=S.currentTarget;if(S=S.listener,z!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ee;try{m(f)}catch(he){Zu(he)}f.currentTarget=null,m=z}else for(v=0;v<c.length;v++){if(S=c[v],z=S.instance,ee=S.currentTarget,S=S.listener,z!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ee;try{m(f)}catch(he){Zu(he)}f.currentTarget=null,m=z}}}}function ft(t,a){var l=a[Ci];l===void 0&&(l=a[Ci]=new Set);var c=t+"__bubble";l.has(c)||(Fy(a,t,2,!1),l.add(c))}function ap(t,a,l){var c=0;a&&(c|=4),Fy(l,t,c,a)}var Ud="_reactListening"+Math.random().toString(36).slice(2);function rp(t){if(!t[Ud]){t[Ud]=!0,Bo.forEach(function(l){l!=="selectionchange"&&(EE.has(l)||ap(l,!1,t),ap(l,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Ud]||(a[Ud]=!0,ap("selectionchange",!1,a))}}function Fy(t,a,l,c){switch(xv(a)){case 2:var f=ZE;break;case 8:f=eS;break;default:f=vp}l=f.bind(null,a,l,t),f=void 0,!Di||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(a,l,{capture:!0,passive:f}):t.addEventListener(a,l,!0):f!==void 0?t.addEventListener(a,l,{passive:f}):t.addEventListener(a,l,!1)}function ip(t,a,l,c,f){var m=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===f)break;if(v===4)for(v=c.return;v!==null;){var z=v.tag;if((z===3||z===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;S!==null;){if(v=xa(S),v===null)return;if(z=v.tag,z===5||z===6||z===26||z===27){c=m=v;continue e}S=S.parentNode}}c=c.return}Rr(function(){var ee=m,he=Ls(l),xe=[];e:{var ne=wx.get(t);if(ne!==void 0){var le=ja,Oe=t;switch(t){case"keypress":if(Oi(l)===0)break e;case"keydown":case"keyup":le=Qu;break;case"focusin":Oe="focus",le=Vi;break;case"focusout":Oe="blur",le=Vi;break;case"beforeblur":case"afterblur":le=Vi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=b;break;case xx:case bx:case yx:le=qu;break;case vx:le=C;break;case"scroll":case"scrollend":le=Jo;break;case"wheel":le=re;break;case"copy":case"cut":case"paste":le=$u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Wa;break;case"toggle":case"beforetoggle":le=at}var He=(a&4)!==0,Bt=!He&&(t==="scroll"||t==="scrollend"),Q=He?ne!==null?ne+"Capture":null:ne;He=[];for(var Y=ee,Z;Y!==null;){var me=Y;if(Z=me.stateNode,me=me.tag,me!==5&&me!==26&&me!==27||Z===null||Q===null||(me=na(Y,Q),me!=null&&He.push(Cc(Y,me,Z))),Bt)break;Y=Y.return}0<He.length&&(ne=new le(ne,Oe,null,l,he),xe.push({event:ne,listeners:He}))}}if((a&7)===0){e:{if(ne=t==="mouseover"||t==="pointerover",le=t==="mouseout"||t==="pointerout",ne&&l!==Ko&&(Oe=l.relatedTarget||l.fromElement)&&(xa(Oe)||Oe[vs]))break e;if((le||ne)&&(ne=he.window===he?he:(ne=he.ownerDocument)?ne.defaultView||ne.parentWindow:window,le?(Oe=l.relatedTarget||l.toElement,le=ee,Oe=Oe?xa(Oe):null,Oe!==null&&(Bt=u(Oe),He=Oe.tag,Oe!==Bt||He!==5&&He!==27&&He!==6)&&(Oe=null)):(le=null,Oe=ee),le!==Oe)){if(He=Zo,me="onMouseLeave",Q="onMouseEnter",Y="mouse",(t==="pointerout"||t==="pointerover")&&(He=Wa,me="onPointerLeave",Q="onPointerEnter",Y="pointer"),Bt=le==null?ne:ws(le),Z=Oe==null?ne:ws(Oe),ne=new He(me,Y+"leave",le,l,he),ne.target=Bt,ne.relatedTarget=Z,me=null,xa(he)===ee&&(He=new He(Q,Y+"enter",Oe,l,he),He.target=Z,He.relatedTarget=Bt,me=He),Bt=me,le&&Oe)t:{for(He=SE,Q=le,Y=Oe,Z=0,me=Q;me;me=He(me))Z++;me=0;for(var Fe=Y;Fe;Fe=He(Fe))me++;for(;0<Z-me;)Q=He(Q),Z--;for(;0<me-Z;)Y=He(Y),me--;for(;Z--;){if(Q===Y||Y!==null&&Q===Y.alternate){He=Q;break t}Q=He(Q),Y=He(Y)}He=null}else He=null;le!==null&&qy(xe,ne,le,He,!1),Oe!==null&&Bt!==null&&qy(xe,Bt,Oe,He,!0)}}e:{if(ne=ee?ws(ee):window,le=ne.nodeName&&ne.nodeName.toLowerCase(),le==="select"||le==="input"&&ne.type==="file")var St=ix;else if(ax(ne))if(lx)St=Vj;else{St=Oj;var Be=Mj}else le=ne.nodeName,!le||le.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&Tl(ee.elementType)&&(St=ix):St=Pj;if(St&&(St=St(t,ee))){rx(xe,St,l,he);break e}Be&&Be(t,ne,ee),t==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&Go(ne,"number",ne.value)}switch(Be=ee?ws(ee):window,t){case"focusin":(ax(Be)||Be.contentEditable==="true")&&(Ol=Be,Of=ee,ac=null);break;case"focusout":ac=Of=Ol=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,px(xe,l,he);break;case"selectionchange":if(Uj)break;case"keydown":case"keyup":px(xe,l,he)}var lt;if(At)e:{switch(t){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else Ml?Li(t,l)&&(gt="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(gt="onCompositionStart");gt&&(Ta&&l.locale!=="ko"&&(Ml||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&Ml&&(lt=Xo()):(Na=he,Qo="value"in Na?Na.value:Na.textContent,Ml=!0)),Be=Bd(ee,gt),0<Be.length&&(gt=new Sa(gt,t,null,l,he),xe.push({event:gt,listeners:Be}),lt?gt.data=lt:(lt=Dl(l),lt!==null&&(gt.data=lt)))),(lt=Bs?Rj(t,l):kj(t,l))&&(gt=Bd(ee,"onBeforeInput"),0<gt.length&&(Be=new Sa("onBeforeInput","beforeinput",null,l,he),xe.push({event:Be,listeners:gt}),Be.data=lt)),_E(xe,t,ee,l,he)}zy(xe,a)})}function Cc(t,a,l){return{instance:t,listener:a,currentTarget:l}}function Bd(t,a){for(var l=a+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=na(t,l),f!=null&&c.unshift(Cc(t,f,m)),f=na(t,a),f!=null&&c.push(Cc(t,f,m))),t.tag===3)return c;t=t.return}return[]}function SE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function qy(t,a,l,c,f){for(var m=a._reactName,v=[];l!==null&&l!==c;){var S=l,z=S.alternate,ee=S.stateNode;if(S=S.tag,z!==null&&z===c)break;S!==5&&S!==26&&S!==27||ee===null||(z=ee,f?(ee=na(l,m),ee!=null&&v.unshift(Cc(l,ee,z))):f||(ee=na(l,m),ee!=null&&v.push(Cc(l,ee,z)))),l=l.return}v.length!==0&&t.push({event:a,listeners:v})}var TE=/\r\n?/g,AE=/\u0000|\uFFFD/g;function $y(t){return(typeof t=="string"?t:""+t).replace(TE,`
`).replace(AE,"")}function Hy(t,a){return a=$y(a),$y(t)===a}function Ut(t,a,l,c,f,m){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||rs(t,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&rs(t,""+c);break;case"className":_s(t,"class",c);break;case"tabIndex":_s(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":_s(t,l,c);break;case"style":Wo(t,c,m);break;case"data":if(a!=="object"){_s(t,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){t.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=Al(""+c),t.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(a!=="input"&&Ut(t,a,"name",f.name,f,null),Ut(t,a,"formEncType",f.formEncType,f,null),Ut(t,a,"formMethod",f.formMethod,f,null),Ut(t,a,"formTarget",f.formTarget,f,null)):(Ut(t,a,"encType",f.encType,f,null),Ut(t,a,"method",f.method,f,null),Ut(t,a,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=Al(""+c),t.setAttribute(l,c);break;case"onClick":c!=null&&(t.onclick=ta);break;case"onScroll":c!=null&&ft("scroll",t);break;case"onScrollEnd":c!=null&&ft("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=l}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}l=Al(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""+c):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":c===!0?t.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,c):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(l,c):t.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(l):t.setAttribute(l,c);break;case"popover":ft("beforetoggle",t),ft("toggle",t),El(t,"popover",c);break;case"xlinkActuate":wn(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":wn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":wn(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":wn(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":wn(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":wn(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":wn(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":wn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":wn(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":El(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Bu.get(l)||l,El(t,l,c))}}function lp(t,a,l,c,f,m){switch(l){case"style":Wo(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(r(60));t.innerHTML=l}}break;case"children":typeof c=="string"?rs(t,c):(typeof c=="number"||typeof c=="bigint")&&rs(t,""+c);break;case"onScroll":c!=null&&ft("scroll",t);break;case"onScrollEnd":c!=null&&ft("scrollend",t);break;case"onClick":c!=null&&(t.onclick=ta);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),m=t[yn]||null,m=m!=null?m[l]:null,typeof m=="function"&&t.removeEventListener(a,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(a,c,f);break e}l in t?t[l]=c:c===!0?t.setAttribute(l,""):El(t,l,c)}}}function Bn(t,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",t),ft("load",t);var c=!1,f=!1,m;for(m in l)if(l.hasOwnProperty(m)){var v=l[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ut(t,a,m,v,l,null)}}f&&Ut(t,a,"srcSet",l.srcSet,l,null),c&&Ut(t,a,"src",l.src,l,null);return;case"input":ft("invalid",t);var S=m=v=f=null,z=null,ee=null;for(c in l)if(l.hasOwnProperty(c)){var he=l[c];if(he!=null)switch(c){case"name":f=he;break;case"type":v=he;break;case"checked":z=he;break;case"defaultChecked":ee=he;break;case"value":m=he;break;case"defaultValue":S=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,a));break;default:Ut(t,a,c,he,l,null)}}Vu(t,m,S,z,ee,v,f,!1);return;case"select":ft("invalid",t),c=v=m=null;for(f in l)if(l.hasOwnProperty(f)&&(S=l[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":v=S;break;case"multiple":c=S;default:Ut(t,a,f,S,l,null)}a=m,l=v,t.multiple=!!c,a!=null?Sr(t,!!c,a,!1):l!=null&&Sr(t,!!c,l,!0);return;case"textarea":ft("invalid",t),m=f=c=null;for(v in l)if(l.hasOwnProperty(v)&&(S=l[v],S!=null))switch(v){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:Ut(t,a,v,S,l,null)}Tr(t,c,f,m);return;case"option":for(z in l)l.hasOwnProperty(z)&&(c=l[z],c!=null)&&(z==="selected"?t.selected=c&&typeof c!="function"&&typeof c!="symbol":Ut(t,a,z,c,l,null));return;case"dialog":ft("beforetoggle",t),ft("toggle",t),ft("cancel",t),ft("close",t);break;case"iframe":case"object":ft("load",t);break;case"video":case"audio":for(c=0;c<Ac.length;c++)ft(Ac[c],t);break;case"image":ft("error",t),ft("load",t);break;case"details":ft("toggle",t);break;case"embed":case"source":case"link":ft("error",t),ft("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in l)if(l.hasOwnProperty(ee)&&(c=l[ee],c!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ut(t,a,ee,c,l,null)}return;default:if(Tl(a)){for(he in l)l.hasOwnProperty(he)&&(c=l[he],c!==void 0&&lp(t,a,he,c,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(c=l[S],c!=null&&Ut(t,a,S,c,l,null))}function CE(t,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,S=null,z=null,ee=null,he=null;for(le in l){var xe=l[le];if(l.hasOwnProperty(le)&&xe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":z=xe;default:c.hasOwnProperty(le)||Ut(t,a,le,null,c,xe)}}for(var ne in c){var le=c[ne];if(xe=l[ne],c.hasOwnProperty(ne)&&(le!=null||xe!=null))switch(ne){case"type":m=le;break;case"name":f=le;break;case"checked":ee=le;break;case"defaultChecked":he=le;break;case"value":v=le;break;case"defaultValue":S=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,a));break;default:le!==xe&&Ut(t,a,ne,le,c,xe)}}Sl(t,v,S,z,ee,he,m,f);return;case"select":le=v=S=ne=null;for(m in l)if(z=l[m],l.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":le=z;default:c.hasOwnProperty(m)||Ut(t,a,m,null,c,z)}for(f in c)if(m=c[f],z=l[f],c.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":ne=m;break;case"defaultValue":S=m;break;case"multiple":v=m;default:m!==z&&Ut(t,a,f,m,c,z)}a=S,l=v,c=le,ne!=null?Sr(t,!!l,ne,!1):!!c!=!!l&&(a!=null?Sr(t,!!l,a,!0):Sr(t,!!l,l?[]:"",!1));return;case"textarea":le=ne=null;for(S in l)if(f=l[S],l.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ut(t,a,S,null,c,f)}for(v in c)if(f=c[v],m=l[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":ne=f;break;case"defaultValue":le=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Ut(t,a,v,f,c,m)}Lu(t,ne,le);return;case"option":for(var Oe in l)ne=l[Oe],l.hasOwnProperty(Oe)&&ne!=null&&!c.hasOwnProperty(Oe)&&(Oe==="selected"?t.selected=!1:Ut(t,a,Oe,null,c,ne));for(z in c)ne=c[z],le=l[z],c.hasOwnProperty(z)&&ne!==le&&(ne!=null||le!=null)&&(z==="selected"?t.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":Ut(t,a,z,ne,c,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in l)ne=l[He],l.hasOwnProperty(He)&&ne!=null&&!c.hasOwnProperty(He)&&Ut(t,a,He,null,c,ne);for(ee in c)if(ne=c[ee],le=l[ee],c.hasOwnProperty(ee)&&ne!==le&&(ne!=null||le!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,a));break;default:Ut(t,a,ee,ne,c,le)}return;default:if(Tl(a)){for(var Bt in l)ne=l[Bt],l.hasOwnProperty(Bt)&&ne!==void 0&&!c.hasOwnProperty(Bt)&&lp(t,a,Bt,void 0,c,ne);for(he in c)ne=c[he],le=l[he],!c.hasOwnProperty(he)||ne===le||ne===void 0&&le===void 0||lp(t,a,he,ne,c,le);return}}for(var Q in l)ne=l[Q],l.hasOwnProperty(Q)&&ne!=null&&!c.hasOwnProperty(Q)&&Ut(t,a,Q,null,c,ne);for(xe in c)ne=c[xe],le=l[xe],!c.hasOwnProperty(xe)||ne===le||ne==null&&le==null||Ut(t,a,xe,ne,c,le)}function Gy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var f=l[c],m=f.transferSize,v=f.initiatorType,S=f.duration;if(m&&S&&Gy(v)){for(v=0,S=f.responseEnd,c+=1;c<l.length;c++){var z=l[c],ee=z.startTime;if(ee>S)break;var he=z.transferSize,xe=z.initiatorType;he&&Gy(xe)&&(z=z.responseEnd,v+=he*(z<S?1:(S-ee)/(z-ee)))}if(--c,a+=8*(m+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var op=null,cp=null;function zd(t){return t.nodeType===9?t:t.ownerDocument}function Yy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wy(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function up(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var dp=null;function kE(){var t=window.event;return t&&t.type==="popstate"?t===dp?!1:(dp=t,!0):(dp=null,!1)}var Ky=typeof setTimeout=="function"?setTimeout:void 0,IE=typeof clearTimeout=="function"?clearTimeout:void 0,Qy=typeof Promise=="function"?Promise:void 0,DE=typeof queueMicrotask=="function"?queueMicrotask:typeof Qy<"u"?function(t){return Qy.resolve(null).then(t).catch(ME)}:Ky;function ME(t){setTimeout(function(){throw t})}function Qr(t){return t==="head"}function Xy(t,a){var l=a,c=0;do{var f=l.nextSibling;if(t.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(c===0){t.removeChild(f),oo(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Rc(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Rc(l);for(var m=l.firstChild;m;){var v=m.nextSibling,S=m.nodeName;m[ga]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=v}}else l==="body"&&Rc(t.ownerDocument.body);l=f}while(l);oo(a)}function Jy(t,a){var l=t;t=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=c}while(l)}function hp(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":hp(l),jl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function OE(t,a,l,c){for(;t.nodeType===1;){var f=l;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[ga])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Ys(t.nextSibling),t===null)break}return null}function PE(t,a,l){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Ys(t.nextSibling),t===null))return null;return t}function Zy(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ys(t.nextSibling),t===null))return null;return t}function fp(t){return t.data==="$?"||t.data==="$~"}function mp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function VE(t,a){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Ys(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var pp=null;function ev(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(a===0)return Ys(t.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}t=t.nextSibling}return null}function tv(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return t;a--}else l!=="/$"&&l!=="/&"||a++}t=t.previousSibling}return null}function nv(t,a,l){switch(a=zd(l),t){case"html":if(t=a.documentElement,!t)throw Error(r(452));return t;case"head":if(t=a.head,!t)throw Error(r(453));return t;case"body":if(t=a.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Rc(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);jl(t)}var Ws=new Map,sv=new Set;function Fd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var cr=K.d;K.d={f:LE,r:UE,D:BE,C:zE,L:FE,m:qE,X:HE,S:$E,M:GE};function LE(){var t=cr.f(),a=Dd();return t||a}function UE(t){var a=Vs(t);a!==null&&a.tag===5&&a.type==="form"?vb(a):cr.r(t)}var ro=typeof document>"u"?null:document;function av(t,a,l){var c=ro;if(c&&typeof a=="string"&&a){var f=as(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),sv.has(f)||(sv.add(f),t={rel:t,crossOrigin:l,href:a},c.querySelector(f)===null&&(a=c.createElement("link"),Bn(a,"link",t),vn(a),c.head.appendChild(a)))}}function BE(t){cr.D(t),av("dns-prefetch",t,null)}function zE(t,a){cr.C(t,a),av("preconnect",t,a)}function FE(t,a,l){cr.L(t,a,l);var c=ro;if(c&&t&&a){var f='link[rel="preload"][as="'+as(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+as(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+as(l.imageSizes)+'"]')):f+='[href="'+as(t)+'"]';var m=f;switch(a){case"style":m=io(t);break;case"script":m=lo(t)}Ws.has(m)||(t=w({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:t,as:a},l),Ws.set(m,t),c.querySelector(f)!==null||a==="style"&&c.querySelector(kc(m))||a==="script"&&c.querySelector(Ic(m))||(a=c.createElement("link"),Bn(a,"link",t),vn(a),c.head.appendChild(a)))}}function qE(t,a){cr.m(t,a);var l=ro;if(l&&t){var c=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+as(c)+'"][href="'+as(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=lo(t)}if(!Ws.has(m)&&(t=w({rel:"modulepreload",href:t},a),Ws.set(m,t),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ic(m)))return}c=l.createElement("link"),Bn(c,"link",t),vn(c),l.head.appendChild(c)}}}function $E(t,a,l){cr.S(t,a,l);var c=ro;if(c&&t){var f=ba(c).hoistableStyles,m=io(t);a=a||"default";var v=f.get(m);if(!v){var S={loading:0,preload:null};if(v=c.querySelector(kc(m)))S.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":a},l),(l=Ws.get(m))&&gp(t,l);var z=v=c.createElement("link");vn(z),Bn(z,"link",t),z._p=new Promise(function(ee,he){z.onload=ee,z.onerror=he}),z.addEventListener("load",function(){S.loading|=1}),z.addEventListener("error",function(){S.loading|=2}),S.loading|=4,qd(v,a,c)}v={type:"stylesheet",instance:v,count:1,state:S},f.set(m,v)}}}function HE(t,a){cr.X(t,a);var l=ro;if(l&&t){var c=ba(l).hoistableScripts,f=lo(t),m=c.get(f);m||(m=l.querySelector(Ic(f)),m||(t=w({src:t,async:!0},a),(a=Ws.get(f))&&xp(t,a),m=l.createElement("script"),vn(m),Bn(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function GE(t,a){cr.M(t,a);var l=ro;if(l&&t){var c=ba(l).hoistableScripts,f=lo(t),m=c.get(f);m||(m=l.querySelector(Ic(f)),m||(t=w({src:t,async:!0,type:"module"},a),(a=Ws.get(f))&&xp(t,a),m=l.createElement("script"),vn(m),Bn(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function rv(t,a,l,c){var f=(f=Ie.current)?Fd(f):null;if(!f)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=io(l.href),l=ba(f).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=io(l.href);var m=ba(f).hoistableStyles,v=m.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,v),(m=f.querySelector(kc(t)))&&!m._p&&(v.instance=m,v.state.loading=5),Ws.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ws.set(t,l),m||YE(f,t,l,v.state))),a&&c===null)throw Error(r(528,""));return v}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=lo(l),l=ba(f).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function io(t){return'href="'+as(t)+'"'}function kc(t){return'link[rel="stylesheet"]['+t+"]"}function iv(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function YE(t,a,l,c){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=t.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Bn(a,"link",l),vn(a),t.head.appendChild(a))}function lo(t){return'[src="'+as(t)+'"]'}function Ic(t){return"script[async]"+t}function lv(t,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=t.querySelector('style[data-href~="'+as(l.href)+'"]');if(c)return a.instance=c,vn(c),c;var f=w({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),vn(c),Bn(c,"style",f),qd(c,l.precedence,t),a.instance=c;case"stylesheet":f=io(l.href);var m=t.querySelector(kc(f));if(m)return a.state.loading|=4,a.instance=m,vn(m),m;c=iv(l),(f=Ws.get(f))&&gp(c,f),m=(t.ownerDocument||t).createElement("link"),vn(m);var v=m;return v._p=new Promise(function(S,z){v.onload=S,v.onerror=z}),Bn(m,"link",c),a.state.loading|=4,qd(m,l.precedence,t),a.instance=m;case"script":return m=lo(l.src),(f=t.querySelector(Ic(m)))?(a.instance=f,vn(f),f):(c=l,(f=Ws.get(m))&&(c=w({},l),xp(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),vn(f),Bn(f,"link",c),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,qd(c,l.precedence,t));return a.instance}function qd(t,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var S=c[v];if(S.dataset.precedence===a)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(t,a.firstChild))}function gp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function xp(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var $d=null;function ov(t,a,l){if($d===null){var c=new Map,f=$d=new Map;f.set(l,c)}else f=$d,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(t))return c;for(c.set(t,null),l=l.getElementsByTagName(t),f=0;f<l.length;f++){var m=l[f];if(!(m[ga]||m[an]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(a)||"";v=t+v;var S=c.get(v);S?S.push(m):c.set(v,[m])}}return c}function cv(t,a,l){t=t.ownerDocument||t,t.head.insertBefore(l,a==="title"?t.querySelector("head > title"):null)}function WE(t,a,l){if(l===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function uv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function KE(t,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=io(c.href),m=a.querySelector(kc(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Hd.bind(t),a.then(t,t)),l.state.loading|=4,l.instance=m,vn(m);return}m=a.ownerDocument||a,c=iv(c),(f=Ws.get(f))&&gp(c,f),m=m.createElement("link"),vn(m);var v=m;v._p=new Promise(function(S,z){v.onload=S,v.onerror=z}),Bn(m,"link",c),l.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Hd.bind(t),a.addEventListener("load",l),a.addEventListener("error",l))}}var bp=0;function QE(t,a){return t.stylesheets&&t.count===0&&Yd(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var c=setTimeout(function(){if(t.stylesheets&&Yd(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+a);0<t.imgBytes&&bp===0&&(bp=62500*RE());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Yd(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>bp?50:800)+a);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Hd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Gd=null;function Yd(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Gd=new Map,a.forEach(XE,t),Gd=null,Hd.call(t))}function XE(t,a){if(!(a.state.loading&4)){var l=Gd.get(t);if(l)var c=l.get(null);else{l=new Map,Gd.set(t,l);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(l.set(v.dataset.precedence,v),c=v)}c&&l.set(null,c)}f=a.instance,v=f.getAttribute("data-precedence"),m=l.get(v)||c,m===c&&l.set(null,f),l.set(v,f),this.count++,c=Hd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var Dc={$$typeof:q,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function JE(t,a,l,c,f,m,v,S,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Et(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Et(0),this.hiddenUpdates=Et(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function dv(t,a,l,c,f,m,v,S,z,ee,he,xe){return t=new JE(t,a,l,v,z,ee,he,xe,S),a=1,m===!0&&(a|=24),m=js(3,null,null,a),t.current=m,m.stateNode=t,a=Xf(),a.refCount++,t.pooledCache=a,a.refCount++,m.memoizedState={element:c,isDehydrated:l,cache:a},tm(m),t}function hv(t){return t?(t=Ll,t):Ll}function fv(t,a,l,c,f,m){f=hv(f),c.context===null?c.context=f:c.pendingContext=f,c=Ur(a),c.payload={element:l},m=m===void 0?null:m,m!==null&&(c.callback=m),l=Br(t,c,a),l!==null&&(us(l,t,a),dc(l,t,a))}function mv(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<a?l:a}}function yp(t,a){mv(t,a),(t=t.alternate)&&mv(t,a)}function pv(t){if(t.tag===13||t.tag===31){var a=zi(t,67108864);a!==null&&us(a,t,67108864),yp(t,67108864)}}function gv(t){if(t.tag===13||t.tag===31){var a=Cs();a=ea(a);var l=zi(t,a);l!==null&&us(l,t,a),yp(t,a)}}var Wd=!0;function ZE(t,a,l,c){var f=R.T;R.T=null;var m=K.p;try{K.p=2,vp(t,a,l,c)}finally{K.p=m,R.T=f}}function eS(t,a,l,c){var f=R.T;R.T=null;var m=K.p;try{K.p=8,vp(t,a,l,c)}finally{K.p=m,R.T=f}}function vp(t,a,l,c){if(Wd){var f=wp(c);if(f===null)ip(t,a,c,Kd,l),bv(t,c);else if(nS(f,t,a,l,c))c.stopPropagation();else if(bv(t,c),a&4&&-1<tS.indexOf(t)){for(;f!==null;){var m=Vs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ve(m.pendingLanes);if(v!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var z=1<<31-ae(v);S.entanglements[1]|=z,v&=~z}ka(m),(Ct&6)===0&&(kd=jt()+500,Tc(0))}}break;case 31:case 13:S=zi(m,2),S!==null&&us(S,m,2),Dd(),yp(m,2)}if(m=wp(c),m===null&&ip(t,a,c,Kd,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else ip(t,a,c,null,l)}}function wp(t){return t=Ls(t),_p(t)}var Kd=null;function _p(t){if(Kd=null,t=xa(t),t!==null){var a=u(t);if(a===null)t=null;else{var l=a.tag;if(l===13){if(t=d(a),t!==null)return t;t=null}else if(l===31){if(t=p(a),t!==null)return t;t=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Kd=t,null}function xv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case $n:return 2;case Nt:return 8;case In:case $a:return 32;case Ps:return 268435456;default:return 32}default:return 32}}var Np=!1,Xr=null,Jr=null,Zr=null,Mc=new Map,Oc=new Map,ei=[],tS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bv(t,a){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Mc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oc.delete(a.pointerId)}}function Pc(t,a,l,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},a!==null&&(a=Vs(a),a!==null&&pv(a)),t):(t.eventSystemFlags|=c,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function nS(t,a,l,c,f){switch(a){case"focusin":return Xr=Pc(Xr,t,a,l,c,f),!0;case"dragenter":return Jr=Pc(Jr,t,a,l,c,f),!0;case"mouseover":return Zr=Pc(Zr,t,a,l,c,f),!0;case"pointerover":var m=f.pointerId;return Mc.set(m,Pc(Mc.get(m)||null,t,a,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Oc.set(m,Pc(Oc.get(m)||null,t,a,l,c,f)),!0}return!1}function yv(t){var a=xa(t.target);if(a!==null){var l=u(a);if(l!==null){if(a=l.tag,a===13){if(a=d(l),a!==null){t.blockedOn=a,bn(t.priority,function(){gv(l)});return}}else if(a===31){if(a=p(l),a!==null){t.blockedOn=a,bn(t.priority,function(){gv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Qd(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var l=wp(t.nativeEvent);if(l===null){l=t.nativeEvent;var c=new l.constructor(l.type,l);Ko=c,l.target.dispatchEvent(c),Ko=null}else return a=Vs(l),a!==null&&pv(a),t.blockedOn=l,!1;a.shift()}return!0}function vv(t,a,l){Qd(t)&&l.delete(a)}function sS(){Np=!1,Xr!==null&&Qd(Xr)&&(Xr=null),Jr!==null&&Qd(Jr)&&(Jr=null),Zr!==null&&Qd(Zr)&&(Zr=null),Mc.forEach(vv),Oc.forEach(vv)}function Xd(t,a){t.blockedOn===a&&(t.blockedOn=null,Np||(Np=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,sS)))}var Jd=null;function wv(t){Jd!==t&&(Jd=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Jd===t&&(Jd=null);for(var a=0;a<t.length;a+=3){var l=t[a],c=t[a+1],f=t[a+2];if(typeof c!="function"){if(_p(c||l)===null)continue;break}var m=Vs(l);m!==null&&(t.splice(a,3),a-=3,wm(m,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function oo(t){function a(z){return Xd(z,t)}Xr!==null&&Xd(Xr,t),Jr!==null&&Xd(Jr,t),Zr!==null&&Xd(Zr,t),Mc.forEach(a),Oc.forEach(a);for(var l=0;l<ei.length;l++){var c=ei[l];c.blockedOn===t&&(c.blockedOn=null)}for(;0<ei.length&&(l=ei[0],l.blockedOn===null);)yv(l),l.blockedOn===null&&ei.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],v=f[yn]||null;if(typeof m=="function")v||wv(l);else if(v){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[yn]||null)S=v.formAction;else if(_p(f)!==null)continue}else S=v.action;typeof S=="function"?l[c+1]=S:(l.splice(c,3),c-=3),wv(l)}}}function _v(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function jp(t){this._internalRoot=t}Zd.prototype.render=jp.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=Cs();fv(l,c,t,a,null,null)},Zd.prototype.unmount=jp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;fv(t.current,2,null,t,null,null),Dd(),a[vs]=null}};function Zd(t){this._internalRoot=t}Zd.prototype.unstable_scheduleHydration=function(t){if(t){var a=Ai();t={blockedOn:null,target:t,priority:a};for(var l=0;l<ei.length&&a!==0&&a<ei[l].priority;l++);ei.splice(l,0,t),l===0&&yv(t)}};var Nv=e.version;if(Nv!=="19.2.4")throw Error(r(527,Nv,"19.2.4"));K.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=x(a),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var aS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{xn=eh.inject(aS),zt=eh}catch{}}return Lc.createRoot=function(t,a){if(!o(t))throw Error(r(299));var l=!1,c="",f=Rb,m=kb,v=Ib;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=dv(t,1,!1,null,null,l,c,null,f,m,v,_v),t[vs]=a.current,rp(t),new jp(a)},Lc.hydrateRoot=function(t,a,l){if(!o(t))throw Error(r(299));var c=!1,f="",m=Rb,v=kb,S=Ib,z=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),a=dv(t,1,!0,a,l??null,c,f,z,m,v,S,_v),a.context=hv(null),l=a.current,c=Cs(),c=ea(c),f=Ur(c),f.callback=null,Br(l,f,c),l=c,a.current.lanes=l,sn(a,l),ka(a),t[vs]=a.current,rp(t),new Zd(a)},Lc.version="19.2.4",Lc}var Dv;function mS(){if(Dv)return Tp.exports;Dv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Tp.exports=fS(),Tp.exports}var pS=mS();const gS=F0(pS);var Mv="popstate";function xS(s={}){function e(o,u){let{pathname:d="/",search:p="",hash:g=""}=bl(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),a0("",{pathname:d,search:p,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(o,u){let d=o.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let g=o.location.href,x=g.indexOf("#");p=x===-1?g:g.slice(0,x)}return p+"#"+(typeof u=="string"?u:ru(u))}function r(o,u){Js(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return yS(e,n,r,s)}function Zt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Js(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bS(){return Math.random().toString(36).substring(2,10)}function Ov(s,e){return{usr:s.state,key:s.key,idx:e}}function a0(s,e,n=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?bl(e):e,state:n,key:e&&e.key||r||bS()}}function ru({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function bl(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function yS(s,e,n,r={}){let{window:o=document.defaultView,v5Compat:u=!1}=r,d=o.history,p="POP",g=null,x=y();x==null&&(x=0,d.replaceState({...d.state,idx:x},""));function y(){return(d.state||{idx:null}).idx}function w(){p="POP";let M=y(),U=M==null?null:M-x;x=M,g&&g({action:p,location:V.location,delta:U})}function N(M,U){p="PUSH";let G=a0(V.location,M,U);n&&n(G,M),x=y()+1;let q=Ov(G,x),ie=V.createHref(G);try{d.pushState(q,"",ie)}catch(ue){if(ue instanceof DOMException&&ue.name==="DataCloneError")throw ue;o.location.assign(ie)}u&&g&&g({action:p,location:V.location,delta:1})}function T(M,U){p="REPLACE";let G=a0(V.location,M,U);n&&n(G,M),x=y();let q=Ov(G,x),ie=V.createHref(G);d.replaceState(q,"",ie),u&&g&&g({action:p,location:V.location,delta:0})}function L(M){return vS(M)}let V={get action(){return p},get location(){return s(o,d)},listen(M){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Mv,w),g=M,()=>{o.removeEventListener(Mv,w),g=null}},createHref(M){return e(o,M)},createURL:L,encodeLocation(M){let U=L(M);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:N,replace:T,go(M){return d.go(M)}};return V}function vS(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Zt(n,"No window.location.(origin|href) available to create URL");let r=typeof s=="string"?s:ru(s);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function e_(s,e,n="/"){return wS(s,e,n,!1)}function wS(s,e,n,r){let o=typeof e=="string"?bl(e):e,u=br(o.pathname||"/",n);if(u==null)return null;let d=t_(s);_S(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let x=DS(u);p=kS(d[g],x,r)}return p}function t_(s,e=[],n=[],r="",o=!1){let u=(d,p,g=o,x)=>{let y={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&g)return;Zt(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let w=fr([r,y.relativePath]),N=n.concat(y);d.children&&d.children.length>0&&(Zt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),t_(d.children,e,N,w,g)),!(d.path==null&&!d.index)&&e.push({path:w,score:CS(w,d.index),routesMeta:N})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of n_(d.path))u(d,p,!0,g)}),e}function n_(s){let e=s.split("/");if(e.length===0)return[];let[n,...r]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(r.length===0)return o?[u,""]:[u];let d=n_(r.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function _S(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:RS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var NS=/^:[\w-]+$/,jS=3,ES=2,SS=1,TS=10,AS=-2,Pv=s=>s==="*";function CS(s,e){let n=s.split("/"),r=n.length;return n.some(Pv)&&(r+=AS),e&&(r+=ES),n.filter(o=>!Pv(o)).reduce((o,u)=>o+(NS.test(u)?jS:u===""?SS:TS),r)}function RS(s,e){return s.length===e.length&&s.slice(0,-1).every((r,o)=>r===e[o])?s[s.length-1]-e[e.length-1]:0}function kS(s,e,n=!1){let{routesMeta:r}=s,o={},u="/",d=[];for(let p=0;p<r.length;++p){let g=r[p],x=p===r.length-1,y=u==="/"?e:e.slice(u.length)||"/",w=Rh({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},y),N=g.route;if(!w&&x&&n&&!r[r.length-1].route.index&&(w=Rh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},y)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:fr([u,w.pathname]),pathnameBase:VS(fr([u,w.pathnameBase])),route:N}),w.pathnameBase!=="/"&&(u=fr([u,w.pathnameBase]))}return d}function Rh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,r]=IS(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((x,{paramName:y,isOptional:w},N)=>{if(y==="*"){let L=p[N]||"";d=u.slice(0,u.length-L.length).replace(/(.)\/+$/,"$1")}const T=p[N];return w&&!T?x[y]=void 0:x[y]=(T||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:d,pattern:s}}function IS(s,e=!1,n=!0){Js(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(r.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function DS(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Js(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function br(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=s.charAt(n);return r&&r!=="/"?null:s.slice(n)||"/"}var MS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function OS(s,e="/"){let{pathname:n,search:r="",hash:o=""}=typeof s=="string"?bl(s):s,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=Vv(n.substring(1),"/"):u=Vv(n,e)):u=e,{pathname:u,search:LS(r),hash:US(o)}}function Vv(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function kp(s,e,n,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PS(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $0(s){let e=PS(s);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function H0(s,e,n,r=!1){let o;typeof s=="string"?o=bl(s):(o={...s},Zt(!o.pathname||!o.pathname.includes("?"),kp("?","pathname","search",o)),Zt(!o.pathname||!o.pathname.includes("#"),kp("#","pathname","hash",o)),Zt(!o.search||!o.search.includes("#"),kp("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,p;if(d==null)p=n;else{let w=e.length-1;if(!r&&d.startsWith("..")){let N=d.split("/");for(;N[0]==="..";)N.shift(),w-=1;o.pathname=N.join("/")}p=w>=0?e[w]:"/"}let g=OS(o,p),x=d&&d!=="/"&&d.endsWith("/"),y=(u||d===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(x||y)&&(g.pathname+="/"),g}var fr=s=>s.join("/").replace(/\/\/+/g,"/"),VS=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),LS=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,US=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,BS=class{constructor(s,e,n,r=!1){this.status=s,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function zS(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function FS(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var s_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function a_(s,e){let n=s;if(typeof n!="string"||!MS.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,o=!1;if(s_)try{let u=new URL(window.location.href),d=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=br(d.pathname,e);d.origin===u.origin&&p!=null?n=p+d.search+d.hash:o=!0}catch{Js(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var r_=["POST","PUT","PATCH","DELETE"];new Set(r_);var qS=["GET",...r_];new Set(qS);var ko=j.createContext(null);ko.displayName="DataRouter";var Zh=j.createContext(null);Zh.displayName="DataRouterState";var $S=j.createContext(!1),i_=j.createContext({isTransitioning:!1});i_.displayName="ViewTransition";var HS=j.createContext(new Map);HS.displayName="Fetchers";var GS=j.createContext(null);GS.displayName="Await";var Os=j.createContext(null);Os.displayName="Navigation";var bu=j.createContext(null);bu.displayName="Location";var pa=j.createContext({outlet:null,matches:[],isDataRoute:!1});pa.displayName="Route";var G0=j.createContext(null);G0.displayName="RouteError";var l_="REACT_ROUTER_ERROR",YS="REDIRECT",WS="ROUTE_ERROR_RESPONSE";function KS(s){if(s.startsWith(`${l_}:${YS}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function QS(s){if(s.startsWith(`${l_}:${WS}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new BS(e.status,e.statusText,e.data)}catch{}}function XS(s,{relative:e}={}){Zt(Io(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=j.useContext(Os),{hash:o,pathname:u,search:d}=yu(s,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:fr([n,u])),r.createHref({pathname:p,search:d,hash:o})}function Io(){return j.useContext(bu)!=null}function _i(){return Zt(Io(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(bu).location}var o_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function c_(s){j.useContext(Os).static||j.useLayoutEffect(s)}function Do(){let{isDataRoute:s}=j.useContext(pa);return s?uT():JS()}function JS(){Zt(Io(),"useNavigate() may be used only in the context of a <Router> component.");let s=j.useContext(ko),{basename:e,navigator:n}=j.useContext(Os),{matches:r}=j.useContext(pa),{pathname:o}=_i(),u=JSON.stringify($0(r)),d=j.useRef(!1);return c_(()=>{d.current=!0}),j.useCallback((g,x={})=>{if(Js(d.current,o_),!d.current)return;if(typeof g=="number"){n.go(g);return}let y=H0(g,JSON.parse(u),o,x.relative==="path");s==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:fr([e,y.pathname])),(x.replace?n.replace:n.push)(y,x.state,x)},[e,n,u,o,s])}j.createContext(null);function Mo(){let{matches:s}=j.useContext(pa),e=s[s.length-1];return e?e.params:{}}function yu(s,{relative:e}={}){let{matches:n}=j.useContext(pa),{pathname:r}=_i(),o=JSON.stringify($0(n));return j.useMemo(()=>H0(s,JSON.parse(o),r,e==="path"),[s,o,r,e])}function ZS(s,e){return u_(s,e)}function u_(s,e,n,r,o){Zt(Io(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=j.useContext(Os),{matches:d}=j.useContext(pa),p=d[d.length-1],g=p?p.params:{},x=p?p.pathname:"/",y=p?p.pathnameBase:"/",w=p&&p.route;{let G=w&&w.path||"";h_(x,!w||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let N=_i(),T;if(e){let G=typeof e=="string"?bl(e):e;Zt(y==="/"||G.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${G.pathname}" was given in the \`location\` prop.`),T=G}else T=N;let L=T.pathname||"/",V=L;if(y!=="/"){let G=y.replace(/^\//,"").split("/");V="/"+L.replace(/^\//,"").split("/").slice(G.length).join("/")}let M=e_(s,{pathname:V});Js(w||M!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Js(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=aT(M&&M.map(G=>Object.assign({},G,{params:Object.assign({},g,G.params),pathname:fr([y,u.encodeLocation?u.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?y:fr([y,u.encodeLocation?u.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),d,n,r,o);return e&&U?j.createElement(bu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},U):U}function eT(){let s=cT(),e=zS(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:u},"ErrorBoundary")," or"," ",j.createElement("code",{style:u},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:o},n):null,d)}var tT=j.createElement(eT,null),d_=class extends j.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const n=QS(s.digest);n&&(s=n)}let e=s!==void 0?j.createElement(pa.Provider,{value:this.props.routeContext},j.createElement(G0.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?j.createElement(nT,{error:s},e):e}};d_.contextType=$S;var Ip=new WeakMap;function nT({children:s,error:e}){let{basename:n}=j.useContext(Os);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=KS(e.digest);if(r){let o=Ip.get(e);if(o)throw o;let u=a_(r.location,n);if(s_&&!Ip.get(e))if(u.isExternal||r.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:r.replace}));throw Ip.set(e,d),d}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function sT({routeContext:s,match:e,children:n}){let r=j.useContext(ko);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(pa.Provider,{value:s},n)}function aT(s,e=[],n=null,r=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let u=s,d=n?.errors;if(d!=null){let y=u.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);Zt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let p=!1,g=-1;if(n)for(let y=0;y<u.length;y++){let w=u[y];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=y),w.route.id){let{loaderData:N,errors:T}=n,L=w.route.loader&&!N.hasOwnProperty(w.route.id)&&(!T||T[w.route.id]===void 0);if(w.route.lazy||L){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let x=n&&r?(y,w)=>{r(y,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:FS(n.matches),errorInfo:w})}:void 0;return u.reduceRight((y,w,N)=>{let T,L=!1,V=null,M=null;n&&(T=d&&w.route.id?d[w.route.id]:void 0,V=w.route.errorElement||tT,p&&(g<0&&N===0?(h_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,M=null):g===N&&(L=!0,M=w.route.hydrateFallbackElement||null)));let U=e.concat(u.slice(0,N+1)),G=()=>{let q;return T?q=V:L?q=M:w.route.Component?q=j.createElement(w.route.Component,null):w.route.element?q=w.route.element:q=y,j.createElement(sT,{match:w,routeContext:{outlet:y,matches:U,isDataRoute:n!=null},children:q})};return n&&(w.route.ErrorBoundary||w.route.errorElement||N===0)?j.createElement(d_,{location:n.location,revalidation:n.revalidation,component:V,error:T,children:G(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:x}):G()},null)}function Y0(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rT(s){let e=j.useContext(ko);return Zt(e,Y0(s)),e}function iT(s){let e=j.useContext(Zh);return Zt(e,Y0(s)),e}function lT(s){let e=j.useContext(pa);return Zt(e,Y0(s)),e}function W0(s){let e=lT(s),n=e.matches[e.matches.length-1];return Zt(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function oT(){return W0("useRouteId")}function cT(){let s=j.useContext(G0),e=iT("useRouteError"),n=W0("useRouteError");return s!==void 0?s:e.errors?.[n]}function uT(){let{router:s}=rT("useNavigate"),e=W0("useNavigate"),n=j.useRef(!1);return c_(()=>{n.current=!0}),j.useCallback(async(o,u={})=>{Js(n.current,o_),n.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var Lv={};function h_(s,e,n){!e&&!Lv[s]&&(Lv[s]=!0,Js(!1,n))}j.memo(dT);function dT({routes:s,future:e,state:n,onError:r}){return u_(s,void 0,n,r,e)}function hT({to:s,replace:e,state:n,relative:r}){Zt(Io(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=j.useContext(Os);Js(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=j.useContext(pa),{pathname:d}=_i(),p=Do(),g=H0(s,$0(u),d,r==="path"),x=JSON.stringify(g);return j.useEffect(()=>{p(JSON.parse(x),{replace:e,state:n,relative:r})},[p,x,r,e,n]),null}function ca(s){Zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fT({basename:s="/",children:e=null,location:n,navigationType:r="POP",navigator:o,static:u=!1,unstable_useTransitions:d}){Zt(!Io(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=j.useMemo(()=>({basename:p,navigator:o,static:u,unstable_useTransitions:d,future:{}}),[p,o,u,d]);typeof n=="string"&&(n=bl(n));let{pathname:x="/",search:y="",hash:w="",state:N=null,key:T="default"}=n,L=j.useMemo(()=>{let V=br(x,p);return V==null?null:{location:{pathname:V,search:y,hash:w,state:N,key:T},navigationType:r}},[p,x,y,w,N,T,r]);return Js(L!=null,`<Router basename="${p}"> is not able to match the URL "${x}${y}${w}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:j.createElement(Os.Provider,{value:g},j.createElement(bu.Provider,{children:e,value:L}))}function mT({children:s,location:e}){return ZS(r0(s),e)}function r0(s,e=[]){let n=[];return j.Children.forEach(s,(r,o)=>{if(!j.isValidElement(r))return;let u=[...e,o];if(r.type===j.Fragment){n.push.apply(n,r0(r.props.children,u));return}Zt(r.type===ca,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=r0(r.props.children,u)),n.push(d)}),n}var ph="get",gh="application/x-www-form-urlencoded";function ef(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function pT(s){return ef(s)&&s.tagName.toLowerCase()==="button"}function gT(s){return ef(s)&&s.tagName.toLowerCase()==="form"}function xT(s){return ef(s)&&s.tagName.toLowerCase()==="input"}function bT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function yT(s,e){return s.button===0&&(!e||e==="_self")&&!bT(s)}var th=null;function vT(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var wT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dp(s){return s!=null&&!wT.has(s)?(Js(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gh}"`),null):s}function _T(s,e){let n,r,o,u,d;if(gT(s)){let p=s.getAttribute("action");r=p?br(p,e):null,n=s.getAttribute("method")||ph,o=Dp(s.getAttribute("enctype"))||gh,u=new FormData(s)}else if(pT(s)||xT(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(r=g?br(g,e):null,n=s.getAttribute("formmethod")||p.getAttribute("method")||ph,o=Dp(s.getAttribute("formenctype"))||Dp(p.getAttribute("enctype"))||gh,u=new FormData(p,s),!vT()){let{name:x,type:y,value:w}=s;if(y==="image"){let N=x?`${x}.`:"";u.append(`${N}x`,"0"),u.append(`${N}y`,"0")}else x&&u.append(x,w)}}else{if(ef(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ph,r=null,o=gh,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function K0(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function NT(s,e,n,r){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${r}`:o.pathname=`${o.pathname}.${r}`:o.pathname==="/"?o.pathname=`_root.${r}`:e&&br(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function jT(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ET(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function ST(s,e,n){let r=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await jT(u,n);return d.links?d.links():[]}return[]}));return RT(r.flat(1).filter(ET).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Uv(s,e,n,r,o,u){let d=(g,x)=>n[x]?g.route.id!==n[x].route.id:!0,p=(g,x)=>n[x].pathname!==g.pathname||n[x].route.path?.endsWith("*")&&n[x].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,x)=>d(g,x)||p(g,x)):u==="data"?e.filter((g,x)=>{let y=r.routes[g.route.id];if(!y||!y.hasLoader)return!1;if(d(g,x)||p(g,x))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function TT(s,e,{includeHydrateFallback:n}={}){return AT(s.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function AT(s){return[...new Set(s)]}function CT(s){let e={},n=Object.keys(s).sort();for(let r of n)e[r]=s[r];return e}function RT(s,e){let n=new Set;return new Set(e),s.reduce((r,o)=>{let u=JSON.stringify(CT(o));return n.has(u)||(n.add(u),r.push({key:u,link:o})),r},[])}function f_(){let s=j.useContext(ko);return K0(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function kT(){let s=j.useContext(Zh);return K0(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Q0=j.createContext(void 0);Q0.displayName="FrameworkContext";function m_(){let s=j.useContext(Q0);return K0(s,"You must render this element inside a <HydratedRouter> element"),s}function IT(s,e){let n=j.useContext(Q0),[r,o]=j.useState(!1),[u,d]=j.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:x,onMouseLeave:y,onTouchStart:w}=e,N=j.useRef(null);j.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let V=U=>{U.forEach(G=>{d(G.isIntersecting)})},M=new IntersectionObserver(V,{threshold:.5});return N.current&&M.observe(N.current),()=>{M.disconnect()}}},[s]),j.useEffect(()=>{if(r){let V=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(V)}}},[r]);let T=()=>{o(!0)},L=()=>{o(!1),d(!1)};return n?s!=="intent"?[u,N,{}]:[u,N,{onFocus:Uc(p,T),onBlur:Uc(g,L),onMouseEnter:Uc(x,T),onMouseLeave:Uc(y,L),onTouchStart:Uc(w,T)}]:[!1,N,{}]}function Uc(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function DT({page:s,...e}){let{router:n}=f_(),r=j.useMemo(()=>e_(n.routes,s,n.basename),[n.routes,s,n.basename]);return r?j.createElement(OT,{page:s,matches:r,...e}):null}function MT(s){let{manifest:e,routeModules:n}=m_(),[r,o]=j.useState([]);return j.useEffect(()=>{let u=!1;return ST(s,e,n).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,n]),r}function OT({page:s,matches:e,...n}){let r=_i(),{future:o,manifest:u,routeModules:d}=m_(),{basename:p}=f_(),{loaderData:g,matches:x}=kT(),y=j.useMemo(()=>Uv(s,e,x,u,r,"data"),[s,e,x,u,r]),w=j.useMemo(()=>Uv(s,e,x,u,r,"assets"),[s,e,x,u,r]),N=j.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let V=new Set,M=!1;if(e.forEach(G=>{let q=u.routes[G.route.id];!q||!q.hasLoader||(!y.some(ie=>ie.route.id===G.route.id)&&G.route.id in g&&d[G.route.id]?.shouldRevalidate||q.hasClientLoader?M=!0:V.add(G.route.id))}),V.size===0)return[];let U=NT(s,p,o.unstable_trailingSlashAwareDataRequests,"data");return M&&V.size>0&&U.searchParams.set("_routes",e.filter(G=>V.has(G.route.id)).map(G=>G.route.id).join(",")),[U.pathname+U.search]},[p,o.unstable_trailingSlashAwareDataRequests,g,r,u,y,e,s,d]),T=j.useMemo(()=>TT(w,u),[w,u]),L=MT(w);return j.createElement(j.Fragment,null,N.map(V=>j.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...n})),T.map(V=>j.createElement("link",{key:V,rel:"modulepreload",href:V,...n})),L.map(({key:V,link:M})=>j.createElement("link",{key:V,nonce:n.nonce,...M,crossOrigin:M.crossOrigin??n.crossOrigin})))}function PT(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var VT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VT&&(window.__reactRouterVersion="7.13.0")}catch{}function LT({basename:s,children:e,unstable_useTransitions:n,window:r}){let o=j.useRef();o.current==null&&(o.current=xS({window:r,v5Compat:!0}));let u=o.current,[d,p]=j.useState({action:u.action,location:u.location}),g=j.useCallback(x=>{n===!1?p(x):j.startTransition(()=>p(x))},[n]);return j.useLayoutEffect(()=>u.listen(g),[u,g]),j.createElement(fT,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:n})}var p_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ze=j.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:o,reloadDocument:u,replace:d,state:p,target:g,to:x,preventScrollReset:y,viewTransition:w,unstable_defaultShouldRevalidate:N,...T},L){let{basename:V,unstable_useTransitions:M}=j.useContext(Os),U=typeof x=="string"&&p_.test(x),G=a_(x,V);x=G.to;let q=XS(x,{relative:o}),[ie,ue,W]=IT(r,T),E=FT(x,{replace:d,state:p,target:g,preventScrollReset:y,relative:o,viewTransition:w,unstable_defaultShouldRevalidate:N,unstable_useTransitions:M});function A(B){e&&e(B),B.defaultPrevented||E(B)}let k=j.createElement("a",{...T,...W,href:G.absoluteURL||q,onClick:G.isExternal||u?e:A,ref:PT(L,ue),target:g,"data-discover":!U&&n==="render"?"true":void 0});return ie&&!U?j.createElement(j.Fragment,null,k,j.createElement(DT,{page:q})):k});Ze.displayName="Link";var UT=j.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:o=!1,style:u,to:d,viewTransition:p,children:g,...x},y){let w=yu(d,{relative:x.relative}),N=_i(),T=j.useContext(Zh),{navigator:L,basename:V}=j.useContext(Os),M=T!=null&&YT(w)&&p===!0,U=L.encodeLocation?L.encodeLocation(w).pathname:w.pathname,G=N.pathname,q=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;n||(G=G.toLowerCase(),q=q?q.toLowerCase():null,U=U.toLowerCase()),q&&V&&(q=br(q,V)||q);const ie=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let ue=G===U||!o&&G.startsWith(U)&&G.charAt(ie)==="/",W=q!=null&&(q===U||!o&&q.startsWith(U)&&q.charAt(U.length)==="/"),E={isActive:ue,isPending:W,isTransitioning:M},A=ue?e:void 0,k;typeof r=="function"?k=r(E):k=[r,ue?"active":null,W?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let B=typeof u=="function"?u(E):u;return j.createElement(Ze,{...x,"aria-current":A,className:k,ref:y,style:B,to:d,viewTransition:p},typeof g=="function"?g(E):g)});UT.displayName="NavLink";var BT=j.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:o,state:u,method:d=ph,action:p,onSubmit:g,relative:x,preventScrollReset:y,viewTransition:w,unstable_defaultShouldRevalidate:N,...T},L)=>{let{unstable_useTransitions:V}=j.useContext(Os),M=HT(),U=GT(p,{relative:x}),G=d.toLowerCase()==="get"?"get":"post",q=typeof p=="string"&&p_.test(p),ie=ue=>{if(g&&g(ue),ue.defaultPrevented)return;ue.preventDefault();let W=ue.nativeEvent.submitter,E=W?.getAttribute("formmethod")||d,A=()=>M(W||ue.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:o,state:u,relative:x,preventScrollReset:y,viewTransition:w,unstable_defaultShouldRevalidate:N});V&&n!==!1?j.startTransition(()=>A()):A()};return j.createElement("form",{ref:L,method:G,action:U,onSubmit:r?g:ie,...T,"data-discover":!q&&s==="render"?"true":void 0})});BT.displayName="Form";function zT(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g_(s){let e=j.useContext(ko);return Zt(e,zT(s)),e}function FT(s,{target:e,replace:n,state:r,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let x=Do(),y=_i(),w=yu(s,{relative:u});return j.useCallback(N=>{if(yT(N,e)){N.preventDefault();let T=n!==void 0?n:ru(y)===ru(w),L=()=>x(s,{replace:T,state:r,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?j.startTransition(()=>L()):L()}},[y,x,w,n,r,e,s,o,u,d,p,g])}var qT=0,$T=()=>`__${String(++qT)}__`;function HT(){let{router:s}=g_("useSubmit"),{basename:e}=j.useContext(Os),n=oT(),r=s.fetch,o=s.navigate;return j.useCallback(async(u,d={})=>{let{action:p,method:g,encType:x,formData:y,body:w}=_T(u,e);if(d.navigate===!1){let N=d.fetcherKey||$T();await r(N,n,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:w,formMethod:d.method||g,formEncType:d.encType||x,flushSync:d.flushSync})}else await o(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:w,formMethod:d.method||g,formEncType:d.encType||x,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[r,o,e,n])}function GT(s,{relative:e}={}){let{basename:n}=j.useContext(Os),r=j.useContext(pa);Zt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),u={...yu(s||".",{relative:e})},d=_i();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(y=>y==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let y=p.toString();u.search=y?`?${y}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:fr([n,u.pathname])),ru(u)}function YT(s,{relative:e}={}){let n=j.useContext(i_);Zt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=g_("useViewTransitionState"),o=yu(s,{relative:e});if(!n.isTransitioning)return!1;let u=br(n.currentLocation.pathname,r)||n.currentLocation.pathname,d=br(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Rh(o.pathname,d)!=null||Rh(o.pathname,u)!=null}const WT=()=>{};var Bv={};const x_=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},KT=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],d=s[n++],p=s[n++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],d=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},b_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,p=d?s[o+1]:0,g=o+2<s.length,x=g?s[o+2]:0,y=u>>2,w=(u&3)<<4|p>>4;let N=(p&15)<<2|x>>6,T=x&63;g||(T=64,d||(N=64)),r.push(n[y],n[w],n[N],n[T])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(x_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):KT(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],p=o<s.length?n[s.charAt(o)]:0;++o;const x=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||p==null||x==null||w==null)throw new QT;const N=u<<2|p>>4;if(r.push(N),x!==64){const T=p<<4&240|x>>2;if(r.push(T),w!==64){const L=x<<6&192|w;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class QT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XT=function(s){const e=x_(s);return b_.encodeByteArray(e,!0)},kh=function(s){return XT(s).replace(/\./g,"")},y_=function(s){try{return b_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function JT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const ZT=()=>JT().__FIREBASE_DEFAULTS__,e5=()=>{if(typeof process>"u"||typeof Bv>"u")return;const s=Bv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},t5=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&y_(s[1]);return e&&JSON.parse(e)},tf=()=>{try{return WT()||ZT()||e5()||t5()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},v_=s=>tf()?.emulatorHosts?.[s],w_=s=>{const e=v_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},__=()=>tf()?.config,N_=s=>tf()?.[`_${s}`];class n5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function Ni(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X0(s){return(await fetch(s,{credentials:"include"})).ok}function j_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[kh(JSON.stringify(n)),kh(JSON.stringify(d)),""].join(".")}const Jc={};function s5(){const s={prod:[],emulator:[]};for(const e of Object.keys(Jc))Jc[e]?s.emulator.push(e):s.prod.push(e);return s}function a5(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let zv=!1;function J0(s,e){if(typeof window>"u"||typeof document>"u"||!Ni(window.location.host)||Jc[s]===e||Jc[s]||zv)return;Jc[s]=e;function n(N){return`__firebase__banner__${N}`}const r="__firebase__banner",u=s5().prod.length>0;function d(){const N=document.getElementById(r);N&&N.remove()}function p(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function g(N,T){N.setAttribute("width","24"),N.setAttribute("id",T),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function x(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{zv=!0,d()},N}function y(N,T){N.setAttribute("id",T),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function w(){const N=a5(r),T=n("text"),L=document.getElementById(T)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),U=n("preprendIcon"),G=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const q=N.element;p(q),y(M,V);const ie=x();g(G,U),q.append(G,L,M,ie),document.body.appendChild(q)}u?(L.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function r5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function i5(){const s=tf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function o5(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function c5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function u5(){const s=Qn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function d5(){return!i5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function h5(){try{return typeof indexedDB=="object"}catch{return!1}}function f5(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const m5="FirebaseError";class qa extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=m5,Object.setPrototypeOf(this,qa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?p5(u,r):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new qa(o,p,r)}}function p5(s,e){return s.replace(g5,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const g5=/\{\$([^}]+)}/g;function x5(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ol(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],d=e[o];if(Fv(u)&&Fv(d)){if(!ol(u,d))return!1}else if(u!==d)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Fv(s){return s!==null&&typeof s=="object"}function wu(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Gc(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function b5(s,e){const n=new y5(s,e);return n.subscribe.bind(n)}class y5{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");v5(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=Mp),o.error===void 0&&(o.error=Mp),o.complete===void 0&&(o.complete=Mp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function v5(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Mp(){}function en(s){return s&&s._delegate?s._delegate:s}class mi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const sl="[DEFAULT]";class w5{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new n5;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(N5(e))try{this.getOrInitializeService({instanceIdentifier:sl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=sl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sl){return this.instances.has(e)}getOptions(e=sl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&d.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_5(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sl){return this.component?this.component.multipleInstances?e:sl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _5(s){return s===sl?void 0:s}function N5(s){return s.instantiationMode==="EAGER"}class j5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new w5(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var xt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(xt||(xt={}));const E5={debug:xt.DEBUG,verbose:xt.VERBOSE,info:xt.INFO,warn:xt.WARN,error:xt.ERROR,silent:xt.SILENT},S5=xt.INFO,T5={[xt.DEBUG]:"log",[xt.VERBOSE]:"log",[xt.INFO]:"info",[xt.WARN]:"warn",[xt.ERROR]:"error"},A5=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=T5[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Z0{constructor(e){this.name=e,this._logLevel=S5,this._logHandler=A5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xt.DEBUG,...e),this._logHandler(this,xt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xt.VERBOSE,...e),this._logHandler(this,xt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xt.INFO,...e),this._logHandler(this,xt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xt.WARN,...e),this._logHandler(this,xt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xt.ERROR,...e),this._logHandler(this,xt.ERROR,...e)}}const C5=(s,e)=>e.some(n=>s instanceof n);let qv,$v;function R5(){return qv||(qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k5(){return $v||($v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E_=new WeakMap,i0=new WeakMap,S_=new WeakMap,Op=new WeakMap,eg=new WeakMap;function I5(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{n(ci(s.result)),o()},d=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&E_.set(n,s)}).catch(()=>{}),eg.set(e,s),e}function D5(s){if(i0.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});i0.set(s,e)}let l0={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return i0.get(s);if(e==="objectStoreNames")return s.objectStoreNames||S_.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ci(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function M5(s){l0=s(l0)}function O5(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Pp(this),e,...n);return S_.set(r,e.sort?e.sort():[e]),ci(r)}:k5().includes(s)?function(...e){return s.apply(Pp(this),e),ci(E_.get(this))}:function(...e){return ci(s.apply(Pp(this),e))}}function P5(s){return typeof s=="function"?O5(s):(s instanceof IDBTransaction&&D5(s),C5(s,R5())?new Proxy(s,l0):s)}function ci(s){if(s instanceof IDBRequest)return I5(s);if(Op.has(s))return Op.get(s);const e=P5(s);return e!==s&&(Op.set(s,e),eg.set(e,s)),e}const Pp=s=>eg.get(s);function V5(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),p=ci(d);return r&&d.addEventListener("upgradeneeded",g=>{r(ci(d.result),g.oldVersion,g.newVersion,ci(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",x=>o(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const L5=["get","getKey","getAll","getAllKeys","count"],U5=["put","add","delete","clear"],Vp=new Map;function Hv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Vp.get(e))return Vp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=U5.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||L5.includes(n)))return;const u=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let x=g.store;return r&&(x=x.index(p.shift())),(await Promise.all([x[n](...p),o&&g.done]))[0]};return Vp.set(e,u),u}M5(s=>({...s,get:(e,n,r)=>Hv(e,n)||s.get(e,n,r),has:(e,n)=>!!Hv(e,n)||s.has(e,n)}));class B5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(z5(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function z5(s){return s.getComponent()?.type==="VERSION"}const o0="@firebase/app",Gv="0.14.7";const yr=new Z0("@firebase/app"),F5="@firebase/app-compat",q5="@firebase/analytics-compat",$5="@firebase/analytics",H5="@firebase/app-check-compat",G5="@firebase/app-check",Y5="@firebase/auth",W5="@firebase/auth-compat",K5="@firebase/database",Q5="@firebase/data-connect",X5="@firebase/database-compat",J5="@firebase/functions",Z5="@firebase/functions-compat",eA="@firebase/installations",tA="@firebase/installations-compat",nA="@firebase/messaging",sA="@firebase/messaging-compat",aA="@firebase/performance",rA="@firebase/performance-compat",iA="@firebase/remote-config",lA="@firebase/remote-config-compat",oA="@firebase/storage",cA="@firebase/storage-compat",uA="@firebase/firestore",dA="@firebase/ai",hA="@firebase/firestore-compat",fA="firebase",mA="12.8.0";const c0="[DEFAULT]",pA={[o0]:"fire-core",[F5]:"fire-core-compat",[$5]:"fire-analytics",[q5]:"fire-analytics-compat",[G5]:"fire-app-check",[H5]:"fire-app-check-compat",[Y5]:"fire-auth",[W5]:"fire-auth-compat",[K5]:"fire-rtdb",[Q5]:"fire-data-connect",[X5]:"fire-rtdb-compat",[J5]:"fire-fn",[Z5]:"fire-fn-compat",[eA]:"fire-iid",[tA]:"fire-iid-compat",[nA]:"fire-fcm",[sA]:"fire-fcm-compat",[aA]:"fire-perf",[rA]:"fire-perf-compat",[iA]:"fire-rc",[lA]:"fire-rc-compat",[oA]:"fire-gcs",[cA]:"fire-gcs-compat",[uA]:"fire-fst",[hA]:"fire-fst-compat",[dA]:"fire-vertex","fire-js":"fire-js",[fA]:"fire-js-all"};const Ih=new Map,gA=new Map,u0=new Map;function Yv(s,e){try{s.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function cl(s){const e=s.name;if(u0.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;u0.set(e,s);for(const n of Ih.values())Yv(n,s);for(const n of gA.values())Yv(n,s);return!0}function nf(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Rs(s){return s==null?!1:s.settings!==void 0}const xA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new vu("app","Firebase",xA);class bA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}}const yl=mA;function T_(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:c0,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw ui.create("bad-app-name",{appName:String(o)});if(n||(n=__()),!n)throw ui.create("no-options");const u=Ih.get(o);if(u){if(ol(n,u.options)&&ol(r,u.config))return u;throw ui.create("duplicate-app",{appName:o})}const d=new j5(o);for(const g of u0.values())d.addComponent(g);const p=new bA(n,r,d);return Ih.set(o,p),p}function tg(s=c0){const e=Ih.get(s);if(!e&&s===c0&&__())return T_();if(!e)throw ui.create("no-app",{appName:s});return e}function Oa(s,e,n){let r=pA[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(d.join(" "));return}cl(new mi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const yA="firebase-heartbeat-database",vA=1,iu="firebase-heartbeat-store";let Lp=null;function A_(){return Lp||(Lp=V5(yA,vA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(iu)}catch(n){console.warn(n)}}}}).catch(s=>{throw ui.create("idb-open",{originalErrorMessage:s.message})})),Lp}async function wA(s){try{const n=(await A_()).transaction(iu),r=await n.objectStore(iu).get(C_(s));return await n.done,r}catch(e){if(e instanceof qa)yr.warn(e.message);else{const n=ui.create("idb-get",{originalErrorMessage:e?.message});yr.warn(n.message)}}}async function Wv(s,e){try{const r=(await A_()).transaction(iu,"readwrite");await r.objectStore(iu).put(e,C_(s)),await r.done}catch(n){if(n instanceof qa)yr.warn(n.message);else{const r=ui.create("idb-set",{originalErrorMessage:n?.message});yr.warn(r.message)}}}function C_(s){return`${s.name}!${s.options.appId}`}const _A=1024,NA=30;class jA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Kv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>NA){const o=TA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){yr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Kv(),{heartbeatsToSend:n,unsentEntries:r}=EA(this._heartbeatsCache.heartbeats),o=kh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return yr.warn(e),""}}}function Kv(){return new Date().toISOString().substring(0,10)}function EA(s,e=_A){const n=[];let r=s.slice();for(const o of s){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),Qv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Qv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return h5()?f5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wA(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Wv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qv(s){return kh(JSON.stringify({version:2,heartbeats:s})).length}function TA(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}function AA(s){cl(new mi("platform-logger",e=>new B5(e),"PRIVATE")),cl(new mi("heartbeat",e=>new jA(e),"PRIVATE")),Oa(o0,Gv,s),Oa(o0,Gv,"esm2020"),Oa("fire-js","")}AA("");function R_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CA=R_,k_=new vu("auth","Firebase",R_());const Dh=new Z0("@firebase/auth");function RA(s,...e){Dh.logLevel<=xt.WARN&&Dh.warn(`Auth (${yl}): ${s}`,...e)}function xh(s,...e){Dh.logLevel<=xt.ERROR&&Dh.error(`Auth (${yl}): ${s}`,...e)}function fa(s,...e){throw ng(s,...e)}function Pa(s,...e){return ng(s,...e)}function I_(s,e,n){const r={...CA(),[e]:n};return new vu("auth","Firebase",r).create(e,{appName:s.name})}function mr(s){return I_(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return k_.create(s,...e)}function Ye(s,e,...n){if(!s)throw ng(e,...n)}function ur(s){const e="INTERNAL ASSERTION FAILED: "+s;throw xh(e),new Error(e)}function vr(s,e){s||ur(e)}function d0(){return typeof self<"u"&&self.location?.href||""}function kA(){return Xv()==="http:"||Xv()==="https:"}function Xv(){return typeof self<"u"&&self.location?.protocol||null}function IA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kA()||o5()||"connection"in navigator)?navigator.onLine:!0}function DA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class _u{constructor(e,n){this.shortDelay=e,this.longDelay=n,vr(n>e,"Short delay should be less than long delay!"),this.isMobile=r5()||c5()}get(){return IA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sg(s,e){vr(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class D_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const MA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const OA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PA=new _u(3e4,6e4);function ji(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ei(s,e,n,r,o={}){return M_(s,o,async()=>{let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});const p=wu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const x={method:e,headers:g,...u};return l5()||(x.referrerPolicy="no-referrer"),s.emulatorConfig&&Ni(s.emulatorConfig.host)&&(x.credentials="include"),D_.fetch()(await O_(s,s.config.apiHost,n,p),x)})}async function M_(s,e,n){s._canInitEmulator=!1;const r={...MA,...e};try{const o=new LA(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw nh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,x]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw nh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw nh(s,"user-disabled",d);const y=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw I_(s,y,x);fa(s,y)}}catch(o){if(o instanceof qa)throw o;fa(s,"network-request-failed",{message:String(o)})}}async function Nu(s,e,n,r,o={}){const u=await Ei(s,e,n,r,o);return"mfaPendingCredential"in u&&fa(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function O_(s,e,n,r){const o=`${e}${n}?${r}`,u=s,d=u.config.emulator?sg(s.config,o):`${s.config.apiScheme}://${o}`;return OA.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function VA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pa(this.auth,"network-request-failed")),PA.get())})}}function nh(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Pa(s,e,r);return o.customData._tokenResponse=n,o}function Jv(s){return s!==void 0&&s.enterprise!==void 0}class UA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return VA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BA(s,e){return Ei(s,"GET","/v2/recaptchaConfig",ji(s,e))}async function zA(s,e){return Ei(s,"POST","/v1/accounts:delete",e)}async function Mh(s,e){return Ei(s,"POST","/v1/accounts:lookup",e)}function Zc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FA(s,e=!1){const n=en(s),r=await n.getIdToken(e),o=ag(r);Ye(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:r,authTime:Zc(Up(o.auth_time)),issuedAtTime:Zc(Up(o.iat)),expirationTime:Zc(Up(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Up(s){return Number(s)*1e3}function ag(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return xh("JWT malformed, contained fewer than 3 sections"),null;try{const o=y_(n);return o?JSON.parse(o):(xh("Failed to decode base64 JWT payload"),null)}catch(o){return xh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Zv(s){const e=ag(s);return Ye(e,"internal-error"),Ye(typeof e.exp<"u","internal-error"),Ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lu(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qa&&qA(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function qA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class $A{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class h0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Oh(s){const e=s.auth,n=await s.getIdToken(),r=await lu(s,Mh(e,{idToken:n}));Ye(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?P_(o.providerUserInfo):[],d=GA(s.providerData,u),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!d?.length,x=p?g:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new h0(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(s,y)}async function HA(s){const e=en(s);await Oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GA(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function P_(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function YA(s,e){const n=await M_(s,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await O_(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return s.emulatorConfig&&Ni(s.emulatorConfig.host)&&(g.credentials="include"),D_.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WA(s,e){return Ei(s,"POST","/v2/accounts:revokeToken",ji(s,e))}class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ye(e.idToken,"internal-error"),Ye(typeof e.idToken<"u","internal-error"),Ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ye(e.length!==0,"internal-error");const n=Zv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await YA(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,d=new xo;return r&&(Ye(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(Ye(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Ye(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return ur("not implemented")}}function ni(s,e){Ye(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ua{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new $A(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new h0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await lu(this,this.stsTokenManager.getToken(this.auth,e));return Ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FA(this,e)}reload(){return HA(this)}_assign(e){this!==e&&(Ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ua({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Oh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rs(this.auth.app))return Promise.reject(mr(this.auth));const e=await this.getIdToken();return await lu(this,zA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,x=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:w,emailVerified:N,isAnonymous:T,providerData:L,stsTokenManager:V}=n;Ye(w&&V,e,"internal-error");const M=xo.fromJSON(this.name,V);Ye(typeof w=="string",e,"internal-error"),ni(r,e.name),ni(o,e.name),Ye(typeof N=="boolean",e,"internal-error"),Ye(typeof T=="boolean",e,"internal-error"),ni(u,e.name),ni(d,e.name),ni(p,e.name),ni(g,e.name),ni(x,e.name),ni(y,e.name);const U=new ua({uid:w,auth:e,email:o,emailVerified:N,displayName:r,isAnonymous:T,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:M,createdAt:x,lastLoginAt:y});return L&&Array.isArray(L)&&(U.providerData=L.map(G=>({...G}))),g&&(U._redirectEventId=g),U}static async _fromIdTokenResponse(e,n,r=!1){const o=new xo;o.updateFromServerResponse(n);const u=new ua({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Oh(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ye(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?P_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,p=new xo;p.updateFromIdToken(r);const g=new ua({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new h0(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,x),g}}const ew=new Map;function dr(s){vr(s instanceof Function,"Expected a class definition");let e=ew.get(s);return e?(vr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,ew.set(s,e),e)}class V_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}V_.type="NONE";const tw=V_;function bh(s,e,n){return`firebase:${s}:${e}:${n}`}class bo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=bh(this.userKey,o.apiKey,u),this.fullPersistenceKey=bh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mh(this.auth,{idToken:e}).catch(()=>{});return n?ua._fromGetAccountInfoResponse(this.auth,n,e):null}return ua._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new bo(dr(tw),e,r);const o=(await Promise.all(n.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=o[0]||dr(tw);const d=bh(r,e.config.apiKey,e.name);let p=null;for(const x of n)try{const y=await x._get(d);if(y){let w;if(typeof y=="string"){const N=await Mh(e,{idToken:y}).catch(()=>{});if(!N)break;w=await ua._fromGetAccountInfoResponse(e,N,y)}else w=ua._fromJSON(e,y);x!==u&&(p=w),u=x;break}}catch{}const g=o.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new bo(u,e,r):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(n.map(async x=>{if(x!==u)try{await x._remove(d)}catch{}})),new bo(u,e,r))}}function nw(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(L_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(q_(e))return"Blackberry";if($_(e))return"Webos";if(U_(e))return"Safari";if((e.includes("chrome/")||B_(e))&&!e.includes("edge/"))return"Chrome";if(F_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if(r?.length===2)return r[1]}return"Other"}function L_(s=Qn()){return/firefox\//i.test(s)}function U_(s=Qn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function B_(s=Qn()){return/crios\//i.test(s)}function z_(s=Qn()){return/iemobile/i.test(s)}function F_(s=Qn()){return/android/i.test(s)}function q_(s=Qn()){return/blackberry/i.test(s)}function $_(s=Qn()){return/webos/i.test(s)}function rg(s=Qn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function KA(s=Qn()){return rg(s)&&!!window.navigator?.standalone}function QA(){return u5()&&document.documentMode===10}function H_(s=Qn()){return rg(s)||F_(s)||$_(s)||q_(s)||/windows phone/i.test(s)||z_(s)}function G_(s,e=[]){let n;switch(s){case"Browser":n=nw(Qn());break;case"Worker":n=`${nw(Qn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yl}/${r}`}class XA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function JA(s,e={}){return Ei(s,"GET","/v2/passwordPolicy",ji(s,e))}const ZA=6;class eC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??ZA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class tC{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sw(this),this.idTokenSubscription=new sw(this),this.beforeStateQueue=new XA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mh(this,{idToken:e}),r=await ua._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rs(this.app))return Promise.reject(mr(this));const n=e?en(e):null;return n&&Ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rs(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rs(this.app)?Promise.reject(mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JA(this),n=new eC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WA(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dr(e)||this._popupRedirectResolver;Ye(n,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ye(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=G_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&RA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function vl(s){return en(s)}class sw{constructor(e){this.auth=e,this.observer=null,this.addObserver=b5(n=>this.observer=n)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nC(s){sf=s}function Y_(s){return sf.loadJS(s)}function sC(){return sf.recaptchaEnterpriseScript}function aC(){return sf.gapiScript}function rC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class iC{constructor(){this.enterprise=new lC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class lC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const oC="recaptcha-enterprise",W_="NO_RECAPTCHA";class cC{constructor(e){this.type=oC,this.auth=vl(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{BA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const x=new UA(g);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,d(x.siteKey)}}).catch(g=>{p(g)})})}function o(u,d,p){const g=window.grecaptcha;Jv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(x=>{d(x)}).catch(()=>{d(W_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iC().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{r(this.auth).then(p=>{if(!n&&Jv(window.grecaptcha))o(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=sC();g.length!==0&&(g+=p),Y_(g).then(()=>{o(p,u,d)}).catch(x=>{d(x)})}}).catch(p=>{d(p)})})}}async function aw(s,e,n,r=!1,o=!1){const u=new cC(s);let d;if(o)d=W_;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,x=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function f0(s,e,n,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await aw(s,e,n,n==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await aw(s,e,n,n==="getOobCode");return r(s,d)}else return Promise.reject(u)})}function uC(s,e){const n=nf(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ol(u,e??{}))return o;fa(o,"already-initialized")}return n.initialize({options:e})}function dC(s,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(dr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function hC(s,e,n){const r=vl(s);Ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=K_(e),{host:d,port:p}=fC(e),g=p===null?"":`:${p}`,x={url:`${u}//${d}${g}/`},y=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ye(ol(x,r.config.emulator)&&ol(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Ni(d)?(X0(`${u}//${d}${g}`),J0("Auth",!0)):mC()}function K_(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function fC(s){const e=K_(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:rw(r.substr(u.length+1))}}else{const[u,d]=r.split(":");return{host:u,port:rw(d)}}}function rw(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function mC(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class ig{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ur("not implemented")}_getIdTokenResponse(e){return ur("not implemented")}_linkToIdToken(e,n){return ur("not implemented")}_getReauthenticationResolver(e){return ur("not implemented")}}async function pC(s,e){return Ei(s,"POST","/v1/accounts:signUp",e)}async function gC(s,e){return Nu(s,"POST","/v1/accounts:signInWithPassword",ji(s,e))}async function xC(s,e){return Nu(s,"POST","/v1/accounts:signInWithEmailLink",ji(s,e))}async function bC(s,e){return Nu(s,"POST","/v1/accounts:signInWithEmailLink",ji(s,e))}class ou extends ig{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new ou(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ou(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f0(e,n,"signInWithPassword",gC);case"emailLink":return xC(e,{email:this._email,oobCode:this._password});default:fa(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f0(e,r,"signUpPassword",pC);case"emailLink":return bC(e,{idToken:n,email:this._email,oobCode:this._password});default:fa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function yo(s,e){return Nu(s,"POST","/v1/accounts:signInWithIdp",ji(s,e))}const yC="http://localhost";class ul extends ig{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ul(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fa("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const d=new ul(r,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return yo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,yo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yo(e,n)}buildRequest(){const e={requestUri:yC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}function vC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wC(s){const e=Hc(Gc(s)).link,n=e?Hc(Gc(e)).deep_link_id:null,r=Hc(Gc(s)).deep_link_id;return(r?Hc(Gc(r)).link:null)||r||n||e||s}class lg{constructor(e){const n=Hc(Gc(e)),r=n.apiKey??null,o=n.oobCode??null,u=vC(n.mode??null);Ye(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=wC(e);try{return new lg(n)}catch{return null}}}class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,n){return ou._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=lg.parseLink(n);return Ye(r,"argument-error"),ou._fromEmailAndCode(e,r.code,r.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Q_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ju extends Q_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class si extends ju{constructor(){super("facebook.com")}static credential(e){return ul._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.FACEBOOK_SIGN_IN_METHOD="facebook.com";si.PROVIDER_ID="facebook.com";class ai extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ul._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ai.credential(n,r)}catch{return null}}}ai.GOOGLE_SIGN_IN_METHOD="google.com";ai.PROVIDER_ID="google.com";class ri extends ju{constructor(){super("github.com")}static credential(e){return ul._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";class ii extends ju{constructor(){super("twitter.com")}static credential(e,n){return ul._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.TWITTER_SIGN_IN_METHOD="twitter.com";ii.PROVIDER_ID="twitter.com";async function _C(s,e){return Nu(s,"POST","/v1/accounts:signUp",ji(s,e))}class dl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await ua._fromIdTokenResponse(e,r,o),d=iw(r);return new dl({user:u,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=iw(r);return new dl({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function iw(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Ph extends qa{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Ph.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Ph(e,n,r,o)}}function X_(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Ph._fromErrorAndOperation(s,u,e,r):u})}async function NC(s,e,n=!1){const r=await lu(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return dl._forOperation(s,"link",r)}async function jC(s,e,n=!1){const{auth:r}=s;if(Rs(r.app))return Promise.reject(mr(r));const o="reauthenticate";try{const u=await lu(s,X_(r,o,e,s),n);Ye(u.idToken,r,"internal-error");const d=ag(u.idToken);Ye(d,r,"internal-error");const{sub:p}=d;return Ye(s.uid===p,r,"user-mismatch"),dl._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&fa(r,"user-mismatch"),u}}async function J_(s,e,n=!1){if(Rs(s.app))return Promise.reject(mr(s));const r="signIn",o=await X_(s,r,e),u=await dl._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}async function EC(s,e){return J_(vl(s),e)}async function Z_(s){const e=vl(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function SC(s,e,n){if(Rs(s.app))return Promise.reject(mr(s));const r=vl(s),d=await f0(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_C).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Z_(s),g}),p=await dl._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(p.user),p}function eN(s,e,n){return Rs(s.app)?Promise.reject(mr(s)):EC(en(s),Oo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Z_(s),r})}function TC(s,e,n,r){return en(s).onIdTokenChanged(e,n,r)}function AC(s,e,n){return en(s).beforeAuthStateChanged(e,n)}function CC(s,e,n,r){return en(s).onAuthStateChanged(e,n,r)}function RC(s){return en(s).signOut()}const Vh="__sak";class tN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const kC=1e3,IC=10;class nN extends tN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=H_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},u=this.storage.getItem(r);QA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,IC):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}nN.type="LOCAL";const DC=nN;class sN extends tN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sN.type="SESSION";const aN=sN;function MC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new af(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(d).map(async x=>x(n.origin,u)),g=await MC(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];function og(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}class OC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const x=og("",20);o.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(w){const N=w;if(N.data.eventId===x)switch(N.data.status){case"ack":clearTimeout(y),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(N.data.response);break;default:clearTimeout(y),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Va(){return window}function PC(s){Va().location.href=s}function rN(){return typeof Va().WorkerGlobalScope<"u"&&typeof Va().importScripts=="function"}async function VC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LC(){return navigator?.serviceWorker?.controller||null}function UC(){return rN()?self:null}const iN="firebaseLocalStorageDb",BC=1,Lh="firebaseLocalStorage",lN="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rf(s,e){return s.transaction([Lh],e?"readwrite":"readonly").objectStore(Lh)}function zC(){const s=indexedDB.deleteDatabase(iN);return new Eu(s).toPromise()}function m0(){const s=indexedDB.open(iN,BC);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Lh,{keyPath:lN})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Lh)?e(r):(r.close(),await zC(),e(await m0()))})})}async function lw(s,e,n){const r=rf(s,!0).put({[lN]:e,value:n});return new Eu(r).toPromise()}async function FC(s,e){const n=rf(s,!1).get(e),r=await new Eu(n).toPromise();return r===void 0?null:r.value}function ow(s,e){const n=rf(s,!0).delete(e);return new Eu(n).toPromise()}const qC=800,$C=3;class oN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await m0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$C)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(UC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await VC(),!this.activeServiceWorker)return;this.sender=new OC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await m0();return await lw(e,Vh,"1"),await ow(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>lw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ow(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=rf(o,!1).getAll();return new Eu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oN.type="LOCAL";const HC=oN;new _u(3e4,6e4);function GC(s,e){return e?dr(e):(Ye(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class cg extends ig{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YC(s){return J_(s.auth,new cg(s),s.bypassAuthState)}function WC(s){const{auth:e,user:n}=s;return Ye(n,e,"internal-error"),jC(n,new cg(s),s.bypassAuthState)}async function KC(s){const{auth:e,user:n}=s;return Ye(n,e,"internal-error"),NC(n,new cg(s),s.bypassAuthState)}class cN{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YC;case"linkViaPopup":case"linkViaRedirect":return KC;case"reauthViaPopup":case"reauthViaRedirect":return WC;default:fa(this.auth,"internal-error")}}resolve(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const QC=new _u(2e3,1e4);class mo extends cN{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ye(e,this.auth,"internal-error"),e}async onExecution(){vr(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QC.get())};e()}}mo.currentPopupAction=null;const XC="pendingRedirect",yh=new Map;class JC extends cN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const r=await ZC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZC(s,e){const n=n4(e),r=t4(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function e4(s,e){yh.set(s._key(),e)}function t4(s){return dr(s._redirectPersistence)}function n4(s){return bh(XC,s.config.apiKey,s.name)}async function s4(s,e,n=!1){if(Rs(s.app))return Promise.reject(mr(s));const r=vl(s),o=GC(r,e),d=await new JC(r,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const a4=600*1e3;class r4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!uN(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Pa(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=a4&&this.cachedEventUids.clear(),this.cachedEventUids.has(cw(e))}saveEventToCache(e){this.cachedEventUids.add(cw(e)),this.lastProcessedEventTime=Date.now()}}function cw(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function uN({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function i4(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return uN(s);default:return!1}}async function l4(s,e={}){return Ei(s,"GET","/v1/projects",e)}const o4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c4=/^https?/;async function u4(s){if(s.config.emulator)return;const{authorizedDomains:e}=await l4(s);for(const n of e)try{if(d4(n))return}catch{}fa(s,"unauthorized-domain")}function d4(s){const e=d0(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!c4.test(n))return!1;if(o4.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const h4=new _u(3e4,6e4);function uw(){const s=Va().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function f4(s){return new Promise((e,n)=>{function r(){uw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uw(),n(Pa(s,"network-request-failed"))},timeout:h4.get()})}if(Va().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Va().gapi?.load)r();else{const o=rC("iframefcb");return Va()[o]=()=>{gapi.load?r():n(Pa(s,"network-request-failed"))},Y_(`${aC()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw vh=null,e})}let vh=null;function m4(s){return vh=vh||f4(s),vh}const p4=new _u(5e3,15e3),g4="__/auth/iframe",x4="emulator/auth/iframe",b4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},y4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function v4(s){const e=s.config;Ye(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?sg(e,x4):`https://${s.config.authDomain}/${g4}`,r={apiKey:e.apiKey,appName:s.name,v:yl},o=y4.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${wu(r).slice(1)}`}async function w4(s){const e=await m4(s),n=Va().gapi;return Ye(n,s,"internal-error"),e.open({where:document.body,url:v4(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:b4,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const d=Pa(s,"network-request-failed"),p=Va().setTimeout(()=>{u(d)},p4.get());function g(){Va().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{u(d)})}))}const _4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},N4=500,j4=600,E4="_blank",S4="http://localhost";class dw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function T4(s,e,n,r=N4,o=j4){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={..._4,width:r.toString(),height:o.toString(),top:u,left:d},x=Qn().toLowerCase();n&&(p=B_(x)?E4:n),L_(x)&&(e=e||S4,g.scrollbars="yes");const y=Object.entries(g).reduce((N,[T,L])=>`${N}${T}=${L},`,"");if(KA(x)&&p!=="_self")return A4(e||"",p),new dw(null);const w=window.open(e||"",p,y);Ye(w,s,"popup-blocked");try{w.focus()}catch{}return new dw(w)}function A4(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const C4="__/auth/handler",R4="emulator/auth/handler",k4=encodeURIComponent("fac");async function hw(s,e,n,r,o,u){Ye(s.config.authDomain,s,"auth-domain-config-required"),Ye(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:yl,eventId:o};if(e instanceof Q_){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",x5(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,w]of Object.entries({}))d[y]=w}if(e instanceof ju){const y=e.getScopes().filter(w=>w!=="");y.length>0&&(d.scopes=y.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const y of Object.keys(p))p[y]===void 0&&delete p[y];const g=await s._getAppCheckToken(),x=g?`#${k4}=${encodeURIComponent(g)}`:"";return`${I4(s)}?${wu(p).slice(1)}${x}`}function I4({config:s}){return s.emulator?sg(s,R4):`https://${s.authDomain}/${C4}`}const Bp="webStorageSupport";class D4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aN,this._completeRedirectFn=s4,this._overrideRedirectResult=e4}async _openPopup(e,n,r,o){vr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await hw(e,n,r,d0(),o);return T4(e,u,og())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await hw(e,n,r,d0(),o);return PC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(vr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await w4(e),r=new r4(e);return n.register("authEvent",o=>(Ye(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bp,{type:Bp},o=>{const u=o?.[0]?.[Bp];u!==void 0&&n(!!u),fa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=u4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return H_()||U_()||rg()}}const M4=D4;var fw="@firebase/auth",mw="1.12.0";class O4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function P4(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function V4(s){cl(new mi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;Ye(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G_(s)},x=new tC(r,o,u,g);return dC(x,n),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cl(new mi("auth-internal",e=>{const n=vl(e.getProvider("auth").getImmediate());return(r=>new O4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oa(fw,mw,P4(s)),Oa(fw,mw,"esm2020")}const L4=300,U4=N_("authIdTokenMaxAge")||L4;let pw=null;const B4=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>U4)return;const o=n?.token;pw!==o&&(pw=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function z4(s=tg()){const e=nf(s,"auth");if(e.isInitialized())return e.getImmediate();const n=uC(s,{popupRedirectResolver:M4,persistence:[HC,DC,aN]}),r=N_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const d=B4(u.toString());AC(n,d,()=>d(n.currentUser)),TC(n,p=>d(p))}}const o=v_("auth");return o&&hC(n,`http://${o}`),n}function F4(){return document.getElementsByTagName("head")?.[0]??document}nC({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Pa("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",F4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});V4("Browser");var q4="firebase",$4="12.8.0";Oa(q4,$4,"app");var gw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var di,dN;(function(){var s;function e(E,A){function k(){}k.prototype=A.prototype,E.F=A.prototype,E.prototype=new k,E.prototype.constructor=E,E.D=function(B,P,H){for(var I=Array(arguments.length-2),$=2;$<arguments.length;$++)I[$-2]=arguments[$];return A.prototype[P].apply(B,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(E,A,k){k||(k=0);const B=Array(16);if(typeof A=="string")for(var P=0;P<16;++P)B[P]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(P=0;P<16;++P)B[P]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=E.g[0],k=E.g[1],P=E.g[2];let H=E.g[3],I;I=A+(H^k&(P^H))+B[0]+3614090360&4294967295,A=k+(I<<7&4294967295|I>>>25),I=H+(P^A&(k^P))+B[1]+3905402710&4294967295,H=A+(I<<12&4294967295|I>>>20),I=P+(k^H&(A^k))+B[2]+606105819&4294967295,P=H+(I<<17&4294967295|I>>>15),I=k+(A^P&(H^A))+B[3]+3250441966&4294967295,k=P+(I<<22&4294967295|I>>>10),I=A+(H^k&(P^H))+B[4]+4118548399&4294967295,A=k+(I<<7&4294967295|I>>>25),I=H+(P^A&(k^P))+B[5]+1200080426&4294967295,H=A+(I<<12&4294967295|I>>>20),I=P+(k^H&(A^k))+B[6]+2821735955&4294967295,P=H+(I<<17&4294967295|I>>>15),I=k+(A^P&(H^A))+B[7]+4249261313&4294967295,k=P+(I<<22&4294967295|I>>>10),I=A+(H^k&(P^H))+B[8]+1770035416&4294967295,A=k+(I<<7&4294967295|I>>>25),I=H+(P^A&(k^P))+B[9]+2336552879&4294967295,H=A+(I<<12&4294967295|I>>>20),I=P+(k^H&(A^k))+B[10]+4294925233&4294967295,P=H+(I<<17&4294967295|I>>>15),I=k+(A^P&(H^A))+B[11]+2304563134&4294967295,k=P+(I<<22&4294967295|I>>>10),I=A+(H^k&(P^H))+B[12]+1804603682&4294967295,A=k+(I<<7&4294967295|I>>>25),I=H+(P^A&(k^P))+B[13]+4254626195&4294967295,H=A+(I<<12&4294967295|I>>>20),I=P+(k^H&(A^k))+B[14]+2792965006&4294967295,P=H+(I<<17&4294967295|I>>>15),I=k+(A^P&(H^A))+B[15]+1236535329&4294967295,k=P+(I<<22&4294967295|I>>>10),I=A+(P^H&(k^P))+B[1]+4129170786&4294967295,A=k+(I<<5&4294967295|I>>>27),I=H+(k^P&(A^k))+B[6]+3225465664&4294967295,H=A+(I<<9&4294967295|I>>>23),I=P+(A^k&(H^A))+B[11]+643717713&4294967295,P=H+(I<<14&4294967295|I>>>18),I=k+(H^A&(P^H))+B[0]+3921069994&4294967295,k=P+(I<<20&4294967295|I>>>12),I=A+(P^H&(k^P))+B[5]+3593408605&4294967295,A=k+(I<<5&4294967295|I>>>27),I=H+(k^P&(A^k))+B[10]+38016083&4294967295,H=A+(I<<9&4294967295|I>>>23),I=P+(A^k&(H^A))+B[15]+3634488961&4294967295,P=H+(I<<14&4294967295|I>>>18),I=k+(H^A&(P^H))+B[4]+3889429448&4294967295,k=P+(I<<20&4294967295|I>>>12),I=A+(P^H&(k^P))+B[9]+568446438&4294967295,A=k+(I<<5&4294967295|I>>>27),I=H+(k^P&(A^k))+B[14]+3275163606&4294967295,H=A+(I<<9&4294967295|I>>>23),I=P+(A^k&(H^A))+B[3]+4107603335&4294967295,P=H+(I<<14&4294967295|I>>>18),I=k+(H^A&(P^H))+B[8]+1163531501&4294967295,k=P+(I<<20&4294967295|I>>>12),I=A+(P^H&(k^P))+B[13]+2850285829&4294967295,A=k+(I<<5&4294967295|I>>>27),I=H+(k^P&(A^k))+B[2]+4243563512&4294967295,H=A+(I<<9&4294967295|I>>>23),I=P+(A^k&(H^A))+B[7]+1735328473&4294967295,P=H+(I<<14&4294967295|I>>>18),I=k+(H^A&(P^H))+B[12]+2368359562&4294967295,k=P+(I<<20&4294967295|I>>>12),I=A+(k^P^H)+B[5]+4294588738&4294967295,A=k+(I<<4&4294967295|I>>>28),I=H+(A^k^P)+B[8]+2272392833&4294967295,H=A+(I<<11&4294967295|I>>>21),I=P+(H^A^k)+B[11]+1839030562&4294967295,P=H+(I<<16&4294967295|I>>>16),I=k+(P^H^A)+B[14]+4259657740&4294967295,k=P+(I<<23&4294967295|I>>>9),I=A+(k^P^H)+B[1]+2763975236&4294967295,A=k+(I<<4&4294967295|I>>>28),I=H+(A^k^P)+B[4]+1272893353&4294967295,H=A+(I<<11&4294967295|I>>>21),I=P+(H^A^k)+B[7]+4139469664&4294967295,P=H+(I<<16&4294967295|I>>>16),I=k+(P^H^A)+B[10]+3200236656&4294967295,k=P+(I<<23&4294967295|I>>>9),I=A+(k^P^H)+B[13]+681279174&4294967295,A=k+(I<<4&4294967295|I>>>28),I=H+(A^k^P)+B[0]+3936430074&4294967295,H=A+(I<<11&4294967295|I>>>21),I=P+(H^A^k)+B[3]+3572445317&4294967295,P=H+(I<<16&4294967295|I>>>16),I=k+(P^H^A)+B[6]+76029189&4294967295,k=P+(I<<23&4294967295|I>>>9),I=A+(k^P^H)+B[9]+3654602809&4294967295,A=k+(I<<4&4294967295|I>>>28),I=H+(A^k^P)+B[12]+3873151461&4294967295,H=A+(I<<11&4294967295|I>>>21),I=P+(H^A^k)+B[15]+530742520&4294967295,P=H+(I<<16&4294967295|I>>>16),I=k+(P^H^A)+B[2]+3299628645&4294967295,k=P+(I<<23&4294967295|I>>>9),I=A+(P^(k|~H))+B[0]+4096336452&4294967295,A=k+(I<<6&4294967295|I>>>26),I=H+(k^(A|~P))+B[7]+1126891415&4294967295,H=A+(I<<10&4294967295|I>>>22),I=P+(A^(H|~k))+B[14]+2878612391&4294967295,P=H+(I<<15&4294967295|I>>>17),I=k+(H^(P|~A))+B[5]+4237533241&4294967295,k=P+(I<<21&4294967295|I>>>11),I=A+(P^(k|~H))+B[12]+1700485571&4294967295,A=k+(I<<6&4294967295|I>>>26),I=H+(k^(A|~P))+B[3]+2399980690&4294967295,H=A+(I<<10&4294967295|I>>>22),I=P+(A^(H|~k))+B[10]+4293915773&4294967295,P=H+(I<<15&4294967295|I>>>17),I=k+(H^(P|~A))+B[1]+2240044497&4294967295,k=P+(I<<21&4294967295|I>>>11),I=A+(P^(k|~H))+B[8]+1873313359&4294967295,A=k+(I<<6&4294967295|I>>>26),I=H+(k^(A|~P))+B[15]+4264355552&4294967295,H=A+(I<<10&4294967295|I>>>22),I=P+(A^(H|~k))+B[6]+2734768916&4294967295,P=H+(I<<15&4294967295|I>>>17),I=k+(H^(P|~A))+B[13]+1309151649&4294967295,k=P+(I<<21&4294967295|I>>>11),I=A+(P^(k|~H))+B[4]+4149444226&4294967295,A=k+(I<<6&4294967295|I>>>26),I=H+(k^(A|~P))+B[11]+3174756917&4294967295,H=A+(I<<10&4294967295|I>>>22),I=P+(A^(H|~k))+B[2]+718787259&4294967295,P=H+(I<<15&4294967295|I>>>17),I=k+(H^(P|~A))+B[9]+3951481745&4294967295,E.g[0]=E.g[0]+A&4294967295,E.g[1]=E.g[1]+(P+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+H&4294967295}r.prototype.v=function(E,A){A===void 0&&(A=E.length);const k=A-this.blockSize,B=this.C;let P=this.h,H=0;for(;H<A;){if(P==0)for(;H<=k;)o(this,E,H),H+=this.blockSize;if(typeof E=="string"){for(;H<A;)if(B[P++]=E.charCodeAt(H++),P==this.blockSize){o(this,B),P=0;break}}else for(;H<A;)if(B[P++]=E[H++],P==this.blockSize){o(this,B),P=0;break}}this.h=P,this.o+=A},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var A=1;A<E.length-8;++A)E[A]=0;A=this.o*8;for(var k=E.length-8;k<E.length;++k)E[k]=A&255,A/=256;for(this.v(E),E=Array(16),A=0,k=0;k<4;++k)for(let B=0;B<32;B+=8)E[A++]=this.g[k]>>>B&255;return E};function u(E,A){var k=p;return Object.prototype.hasOwnProperty.call(k,E)?k[E]:k[E]=A(E)}function d(E,A){this.h=A;const k=[];let B=!0;for(let P=E.length-1;P>=0;P--){const H=E[P]|0;B&&H==A||(k[P]=H,B=!1)}this.g=k}var p={};function g(E){return-128<=E&&E<128?u(E,function(A){return new d([A|0],A<0?-1:0)}):new d([E|0],E<0?-1:0)}function x(E){if(isNaN(E)||!isFinite(E))return w;if(E<0)return M(x(-E));const A=[];let k=1;for(let B=0;E>=k;B++)A[B]=E/k|0,k*=4294967296;return new d(A,0)}function y(E,A){if(E.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(E.charAt(0)=="-")return M(y(E.substring(1),A));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=x(Math.pow(A,8));let B=w;for(let H=0;H<E.length;H+=8){var P=Math.min(8,E.length-H);const I=parseInt(E.substring(H,H+P),A);P<8?(P=x(Math.pow(A,P)),B=B.j(P).add(x(I))):(B=B.j(k),B=B.add(x(I)))}return B}var w=g(0),N=g(1),T=g(16777216);s=d.prototype,s.m=function(){if(V(this))return-M(this).m();let E=0,A=1;for(let k=0;k<this.g.length;k++){const B=this.i(k);E+=(B>=0?B:4294967296+B)*A,A*=4294967296}return E},s.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(L(this))return"0";if(V(this))return"-"+M(this).toString(E);const A=x(Math.pow(E,6));var k=this;let B="";for(;;){const P=ie(k,A).g;k=U(k,P.j(A));let H=((k.g.length>0?k.g[0]:k.h)>>>0).toString(E);if(k=P,L(k))return H+B;for(;H.length<6;)H="0"+H;B=H+B}},s.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function L(E){if(E.h!=0)return!1;for(let A=0;A<E.g.length;A++)if(E.g[A]!=0)return!1;return!0}function V(E){return E.h==-1}s.l=function(E){return E=U(this,E),V(E)?-1:L(E)?0:1};function M(E){const A=E.g.length,k=[];for(let B=0;B<A;B++)k[B]=~E.g[B];return new d(k,~E.h).add(N)}s.abs=function(){return V(this)?M(this):this},s.add=function(E){const A=Math.max(this.g.length,E.g.length),k=[];let B=0;for(let P=0;P<=A;P++){let H=B+(this.i(P)&65535)+(E.i(P)&65535),I=(H>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);B=I>>>16,H&=65535,I&=65535,k[P]=I<<16|H}return new d(k,k[k.length-1]&-2147483648?-1:0)};function U(E,A){return E.add(M(A))}s.j=function(E){if(L(this)||L(E))return w;if(V(this))return V(E)?M(this).j(M(E)):M(M(this).j(E));if(V(E))return M(this.j(M(E)));if(this.l(T)<0&&E.l(T)<0)return x(this.m()*E.m());const A=this.g.length+E.g.length,k=[];for(var B=0;B<2*A;B++)k[B]=0;for(B=0;B<this.g.length;B++)for(let P=0;P<E.g.length;P++){const H=this.i(B)>>>16,I=this.i(B)&65535,$=E.i(P)>>>16,D=E.i(P)&65535;k[2*B+2*P]+=I*D,G(k,2*B+2*P),k[2*B+2*P+1]+=H*D,G(k,2*B+2*P+1),k[2*B+2*P+1]+=I*$,G(k,2*B+2*P+1),k[2*B+2*P+2]+=H*$,G(k,2*B+2*P+2)}for(E=0;E<A;E++)k[E]=k[2*E+1]<<16|k[2*E];for(E=A;E<2*A;E++)k[E]=0;return new d(k,0)};function G(E,A){for(;(E[A]&65535)!=E[A];)E[A+1]+=E[A]>>>16,E[A]&=65535,A++}function q(E,A){this.g=E,this.h=A}function ie(E,A){if(L(A))throw Error("division by zero");if(L(E))return new q(w,w);if(V(E))return A=ie(M(E),A),new q(M(A.g),M(A.h));if(V(A))return A=ie(E,M(A)),new q(M(A.g),A.h);if(E.g.length>30){if(V(E)||V(A))throw Error("slowDivide_ only works with positive integers.");for(var k=N,B=A;B.l(E)<=0;)k=ue(k),B=ue(B);var P=W(k,1),H=W(B,1);for(B=W(B,2),k=W(k,2);!L(B);){var I=H.add(B);I.l(E)<=0&&(P=P.add(k),H=I),B=W(B,1),k=W(k,1)}return A=U(E,P.j(A)),new q(P,A)}for(P=w;E.l(A)>=0;){for(k=Math.max(1,Math.floor(E.m()/A.m())),B=Math.ceil(Math.log(k)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),H=x(k),I=H.j(A);V(I)||I.l(E)>0;)k-=B,H=x(k),I=H.j(A);L(H)&&(H=N),P=P.add(H),E=U(E,I)}return new q(P,E)}s.B=function(E){return ie(this,E).h},s.and=function(E){const A=Math.max(this.g.length,E.g.length),k=[];for(let B=0;B<A;B++)k[B]=this.i(B)&E.i(B);return new d(k,this.h&E.h)},s.or=function(E){const A=Math.max(this.g.length,E.g.length),k=[];for(let B=0;B<A;B++)k[B]=this.i(B)|E.i(B);return new d(k,this.h|E.h)},s.xor=function(E){const A=Math.max(this.g.length,E.g.length),k=[];for(let B=0;B<A;B++)k[B]=this.i(B)^E.i(B);return new d(k,this.h^E.h)};function ue(E){const A=E.g.length+1,k=[];for(let B=0;B<A;B++)k[B]=E.i(B)<<1|E.i(B-1)>>>31;return new d(k,E.h)}function W(E,A){const k=A>>5;A%=32;const B=E.g.length-k,P=[];for(let H=0;H<B;H++)P[H]=A>0?E.i(H+k)>>>A|E.i(H+k+1)<<32-A:E.i(H+k);return new d(P,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,dN=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=y,di=d}).apply(typeof gw<"u"?gw:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var hN,Yc,fN,wh,p0,mN,pN,gN;(function(){var s,e=Object.defineProperty;function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var b=0;b<h.length;++b){var _=h[b];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function o(h,b){if(b)e:{var _=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var J=h[C];if(!(J in _))break e;_=_[J]}h=h[h.length-1],C=_[h],b=b(C),b!=C&&b!=null&&e(_,h,{configurable:!0,writable:!0,value:b})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(b){var _=[],C;for(C in b)Object.prototype.hasOwnProperty.call(b,C)&&_.push([C,b[C]]);return _}});var u=u||{},d=this||self;function p(h){var b=typeof h;return b=="object"&&h!=null||b=="function"}function g(h,b,_){return h.call.apply(h.bind,arguments)}function x(h,b,_){return x=g,x.apply(null,arguments)}function y(h,b){var _=Array.prototype.slice.call(arguments,1);return function(){var C=_.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function w(h,b){function _(){}_.prototype=b.prototype,h.Z=b.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(C,J,re){for(var Te=Array(arguments.length-2),at=2;at<arguments.length;at++)Te[at-2]=arguments[at];return b.prototype[J].apply(C,Te)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function T(h){const b=h.length;if(b>0){const _=Array(b);for(let C=0;C<b;C++)_[C]=h[C];return _}return[]}function L(h,b){for(let C=1;C<arguments.length;C++){const J=arguments[C];var _=typeof J;if(_=_!="object"?_:J?Array.isArray(J)?"array":_:"null",_=="array"||_=="object"&&typeof J.length=="number"){_=h.length||0;const re=J.length||0;h.length=_+re;for(let Te=0;Te<re;Te++)h[_+Te]=J[Te]}else h.push(J)}}class V{constructor(b,_){this.i=b,this.j=_,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function M(h){d.setTimeout(()=>{throw h},0)}function U(){var h=E;let b=null;return h.g&&(b=h.g,h.g=h.g.next,h.g||(h.h=null),b.next=null),b}class G{constructor(){this.h=this.g=null}add(b,_){const C=q.get();C.set(b,_),this.h?this.h.next=C:this.g=C,this.h=C}}var q=new V(()=>new ie,h=>h.reset());class ie{constructor(){this.next=this.g=this.h=null}set(b,_){this.h=b,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,W=!1,E=new G,A=()=>{const h=Promise.resolve(void 0);ue=()=>{h.then(k)}};function k(){for(var h;h=U();){try{h.h.call(h.g)}catch(_){M(_)}var b=q;b.j(h),b.h<100&&(b.h++,h.next=b.g,b.g=h)}W=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,b){this.type=h,this.g=this.target=b,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,b=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,b),d.removeEventListener("test",_,b)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function $(h,b){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,b)}w($,P),$.prototype.init=function(h,b){const _=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=b,b=h.relatedTarget,b||(_=="mouseover"?b=h.fromElement:_=="mouseout"&&(b=h.toElement)),this.relatedTarget=b,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var D="closure_listenable_"+(Math.random()*1e6|0),R=0;function K(h,b,_,C,J){this.listener=h,this.proxy=null,this.src=b,this.type=_,this.capture=!!C,this.ha=J,this.key=++R,this.da=this.fa=!1}function oe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Se(h,b,_){for(const C in h)b.call(_,h[C],C,h)}function ge(h,b){for(const _ in h)b.call(void 0,h[_],_,h)}function O(h){const b={};for(const _ in h)b[_]=h[_];return b}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,b){let _,C;for(let J=1;J<arguments.length;J++){C=arguments[J];for(_ in C)h[_]=C[_];for(let re=0;re<te.length;re++)_=te[re],Object.prototype.hasOwnProperty.call(C,_)&&(h[_]=C[_])}}function pe(h){this.src=h,this.g={},this.h=0}pe.prototype.add=function(h,b,_,C,J){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const Te=Ie(h,b,C,J);return Te>-1?(b=h[Te],_||(b.fa=!1)):(b=new K(b,this.src,re,!!C,J),b.fa=_,h.push(b)),b};function we(h,b){const _=b.type;if(_ in h.g){var C=h.g[_],J=Array.prototype.indexOf.call(C,b,void 0),re;(re=J>=0)&&Array.prototype.splice.call(C,J,1),re&&(oe(b),h.g[_].length==0&&(delete h.g[_],h.h--))}}function Ie(h,b,_,C){for(let J=0;J<h.length;++J){const re=h[J];if(!re.da&&re.listener==b&&re.capture==!!_&&re.ha==C)return J}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Rt={};function mt(h,b,_,C,J){if(Array.isArray(b)){for(let re=0;re<b.length;re++)mt(h,b[re],_,C,J);return null}return _=ct(_),h&&h[D]?h.J(b,_,p(C)?!!C.capture:!1,J):nn(h,b,_,!1,C,J)}function nn(h,b,_,C,J,re){if(!b)throw Error("Invalid event type");const Te=p(J)?!!J.capture:!!J;let at=Le(h);if(at||(h[ze]=at=new pe(h)),_=at.add(b,_,C,Te,re),_.proxy)return _;if(C=se(),_.proxy=C,C.src=h,C.listener=_,h.addEventListener)H||(J=Te),J===void 0&&(J=!1),h.addEventListener(b.toString(),C,J);else if(h.attachEvent)h.attachEvent(Ae(b.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return _}function se(){function h(_){return b.call(h.src,h.listener,_)}const b=De;return h}function Ne(h,b,_,C,J){if(Array.isArray(b))for(var re=0;re<b.length;re++)Ne(h,b[re],_,C,J);else C=p(C)?!!C.capture:!!C,_=ct(_),h&&h[D]?(h=h.i,re=String(b).toString(),re in h.g&&(b=h.g[re],_=Ie(b,_,C,J),_>-1&&(oe(b[_]),Array.prototype.splice.call(b,_,1),b.length==0&&(delete h.g[re],h.h--)))):h&&(h=Le(h))&&(b=h.g[b.toString()],h=-1,b&&(h=Ie(b,_,C,J)),(_=h>-1?b[h]:null)&&de(_))}function de(h){if(typeof h!="number"&&h&&!h.da){var b=h.src;if(b&&b[D])we(b.i,h);else{var _=h.type,C=h.proxy;b.removeEventListener?b.removeEventListener(_,C,h.capture):b.detachEvent?b.detachEvent(Ae(_),C):b.addListener&&b.removeListener&&b.removeListener(C),(_=Le(b))?(we(_,h),_.h==0&&(_.src=null,b[ze]=null)):oe(h)}}}function Ae(h){return h in Rt?Rt[h]:Rt[h]="on"+h}function De(h,b){if(h.da)h=!0;else{b=new $(b,this);const _=h.listener,C=h.ha||h.src;h.fa&&de(h),h=_.call(C,b)}return h}function Le(h){return h=h[ze],h instanceof pe?h:null}var nt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ct(h){return typeof h=="function"?h:(h[nt]||(h[nt]=function(b){return h.handleEvent(b)}),h[nt])}function ut(){B.call(this),this.i=new pe(this),this.M=this,this.G=null}w(ut,B),ut.prototype[D]=!0,ut.prototype.removeEventListener=function(h,b,_,C){Ne(this,h,b,_,C)};function Ce(h,b){var _,C=h.G;if(C)for(_=[];C;C=C.G)_.push(C);if(h=h.M,C=b.type||b,typeof b=="string")b=new P(b,h);else if(b instanceof P)b.target=b.target||h;else{var J=b;b=new P(C,h),ce(b,J)}J=!0;let re,Te;if(_)for(Te=_.length-1;Te>=0;Te--)re=b.g=_[Te],J=Pe(re,C,!0,b)&&J;if(re=b.g=h,J=Pe(re,C,!0,b)&&J,J=Pe(re,C,!1,b)&&J,_)for(Te=0;Te<_.length;Te++)re=b.g=_[Te],J=Pe(re,C,!1,b)&&J}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var h=this.i;for(const b in h.g){const _=h.g[b];for(let C=0;C<_.length;C++)oe(_[C]);delete h.g[b],h.h--}}this.G=null},ut.prototype.J=function(h,b,_,C){return this.i.add(String(h),b,!1,_,C)},ut.prototype.K=function(h,b,_,C){return this.i.add(String(h),b,!0,_,C)};function Pe(h,b,_,C){if(b=h.i.g[String(b)],!b)return!0;b=b.concat();let J=!0;for(let re=0;re<b.length;++re){const Te=b[re];if(Te&&!Te.da&&Te.capture==_){const at=Te.listener,fn=Te.ha||Te.src;Te.fa&&we(h.i,Te),J=at.call(fn,C)!==!1&&J}}return J&&!C.defaultPrevented}function ot(h,b){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:d.setTimeout(h,b||0)}function Kt(h){h.g=ot(()=>{h.g=null,h.i&&(h.i=!1,Kt(h))},h.l);const b=h.h;h.h=null,h.m.apply(null,b)}class jt extends B{constructor(b,_){super(),this.m=b,this.l=_,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Kt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wt(h){B.call(this),this.h=h,this.g={}}w(wt,B);var $n=[];function Nt(h){Se(h.g,function(b,_){this.g.hasOwnProperty(_)&&de(b)},h),h.g={}}wt.prototype.N=function(){wt.Z.N.call(this),Nt(this)},wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=d.JSON.stringify,$a=d.JSON.parse,Ps=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Cn(){}function Zs(){}var xn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zt(){P.call(this,"d")}w(zt,P);function F(){P.call(this,"c")}w(F,P);var ae={},je=null;function _e(){return je=je||new ut}ae.Ia="serverreachability";function Ke(h){P.call(this,ae.Ia,h)}w(Ke,P);function st(h){const b=_e();Ce(b,new Ke(b))}ae.STAT_EVENT="statevent";function ye(h,b){P.call(this,ae.STAT_EVENT,h),this.stat=b}w(ye,P);function fe(h){const b=_e();Ce(b,new ye(b,h))}ae.Ja="timingevent";function Ve(h,b){P.call(this,ae.Ja,h),this.size=b}w(Ve,P);function tt(h,b){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},b)}function dt(){this.g=!0}dt.prototype.ua=function(){this.g=!1};function Ue(h,b,_,C,J,re){h.info(function(){if(h.g)if(re){var Te="",at=re.split("&");for(let At=0;At<at.length;At++){var fn=at[At].split("=");if(fn.length>1){const Qt=fn[0];fn=fn[1];const Bs=Qt.split("_");Te=Bs.length>=2&&Bs[1]=="type"?Te+(Qt+"="+fn+"&"):Te+(Qt+"=redacted&")}}}else Te=null;else Te=re;return"XMLHTTP REQ ("+C+") [attempt "+J+"]: "+b+`
`+_+`
`+Te})}function $e(h,b,_,C,J,re,Te){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+J+"]: "+b+`
`+_+`
`+re+" "+Te})}function Et(h,b,_,C){h.info(function(){return"XMLHTTP TEXT ("+b+"): "+ts(h,_)+(C?" "+C:"")})}function sn(h,b){h.info(function(){return"TIMEOUT: "+b})}dt.prototype.info=function(){};function ts(h,b){if(!h.g)return b;if(!b)return null;try{const re=JSON.parse(b);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var _=re[h];if(!(_.length<2)){var C=_[1];if(Array.isArray(C)&&!(C.length<1)){var J=C[0];if(J!="noop"&&J!="stop"&&J!="close")for(let Te=1;Te<C.length;Te++)C[Te]=""}}}}return In(re)}catch{return b}}var ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ys={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ha;function ea(){}w(ea,Cn),ea.prototype.g=function(){return new XMLHttpRequest},Ha=new ea;function hn(h){return encodeURIComponent(String(h))}function Ai(h){var b=1;h=h.split(":");const _=[];for(;b>0&&h.length;)_.push(h.shift()),b--;return h.length&&_.push(h.join(":")),_}function bn(h,b,_,C){this.j=h,this.i=b,this.l=_,this.S=C||1,this.V=new wt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ss}function ss(){this.i=null,this.g="",this.h=!1}var an={},yn={};function vs(h,b,_){h.M=1,h.A=Ri(wn(b)),h.u=_,h.R=!0,Ci(h,null)}function Ci(h,b){h.F=Date.now(),ga(h),h.B=wn(h.A);var _=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),Tl(_.i,"t",C),h.C=0,_=h.j.L,h.h=new ss,h.g=Wu(h.j,_?b:null,!h.u),h.P>0&&(h.O=new jt(x(h.Y,h,h.g),h.P)),b=h.V,_=h.g,C=h.ba;var J="readystatechange";Array.isArray(J)||(J&&($n[0]=J.toString()),J=$n);for(let re=0;re<J.length;re++){const Te=mt(_,J[re],C||b.handleEvent,!1,b.h||b);if(!Te)break;b.g[Te.key]=Te}b=h.J?O(h.J):{},h.u?(h.v||(h.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,b)):(h.v="GET",h.g.ea(h.B,h.v,null,b)),st(),Ue(h.i,h.v,h.B,h.l,h.S,h.u)}bn.prototype.ba=function(h){h=h.target;const b=this.O;b&&sa(h)==3?b.j():this.Y(h)},bn.prototype.Y=function(h){try{if(h==this.g)e:{const at=sa(this.g),fn=this.g.ya(),At=this.g.ca();if(!(at<3)&&(at!=3||this.g&&(this.h.h||this.g.la()||Pn(this.g)))){this.K||at!=4||fn==7||(fn==8||At<=0?st(3):st(2)),xa(this);var b=this.g.ca();this.X=b;var _=kf(this);if(this.o=b==200,$e(this.i,this.v,this.B,this.l,this.S,at,b),this.o){if(this.U&&!this.L){t:{if(this.g){var C,J=this.g;if((C=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(C)){var re=C;break t}}re=null}if(h=re)Et(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ba(this,h);else{this.o=!1,this.m=3,fe(12),ws(this),Vs(this);break e}}if(this.R){h=!0;let Qt;for(;!this.K&&this.C<_.length;)if(Qt=Ou(this,_),Qt==yn){at==4&&(this.m=4,fe(14),h=!1),Et(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==an){this.m=4,fe(15),Et(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Et(this.i,this.l,Qt,null),ba(this,Qt);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||_.length!=0||this.h.h||(this.m=1,fe(16),h=!1),this.o=this.o&&h,!h)Et(this.i,this.l,_,"[Invalid Chunked Response]"),ws(this),Vs(this);else if(_.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ec(Te),Te.P=!0,fe(11))}}else Et(this.i,this.l,_,null),ba(this,_);at==4&&ws(this),this.o&&!this.K&&(at==4?$u(this.j,this):(this.o=!1,ga(this)))}else Ya(this.g),b==400&&_.indexOf("Unknown SID")>0?(this.m=3,fe(12)):(this.m=0,fe(13)),ws(this),Vs(this)}}}catch{}};function kf(h){if(!Mu(h))return h.g.la();const b=Pn(h.g);if(b==="")return"";let _="";const C=b.length,J=sa(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ws(h),Vs(h),"";h.h.i=new d.TextDecoder}for(let re=0;re<C;re++)h.h.h=!0,_+=h.h.i.decode(b[re],{stream:!(J&&re==C-1)});return b.length=0,h.h.g+=_,h.C=0,h.h.g}function Mu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ou(h,b){var _=h.C,C=b.indexOf(`
`,_);return C==-1?yn:(_=Number(b.substring(_,C)),isNaN(_)?an:(C+=1,C+_>b.length?yn:(b=b.slice(C,C+_),h.C=C+_,b)))}bn.prototype.cancel=function(){this.K=!0,ws(this)};function ga(h){h.T=Date.now()+h.H,jl(h,h.H)}function jl(h,b){if(h.D!=null)throw Error("WatchDog timer not null");h.D=tt(x(h.aa,h),b)}function xa(h){h.D&&(d.clearTimeout(h.D),h.D=null)}bn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(sn(this.i,this.B),this.M!=2&&(st(),fe(17)),ws(this),this.m=2,Vs(this)):jl(this,this.T-h)};function Vs(h){h.j.I==0||h.K||$u(h.j,h)}function ws(h){xa(h);var b=h.O;b&&typeof b.dispose=="function"&&b.dispose(),h.O=null,Nt(h.V),h.g&&(b=h.g,h.g=null,b.abort(),b.dispose())}function ba(h,b){try{var _=h.j;if(_.I!=0&&(_.g==h||va(_.h,h))){if(!h.L&&va(_.h,h)&&_.I==3){try{var C=_.Ba.g.parse(b)}catch{C=null}if(Array.isArray(C)&&C.length==3){var J=C;if(J[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Il(_),Ir(_);else break e;Vi(_),fe(18)}}else _.xa=J[1],0<_.xa-_.K&&J[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=tt(x(_.Va,_),6e3));ya(_.h)<=1&&_.ta&&(_.ta=void 0)}else Sa(_,11)}else if((h.L||_.g==h)&&Il(_),!I(b))for(J=_.Ba.g.parse(b),b=0;b<J.length;b++){let At=J[b];const Qt=At[0];if(!(Qt<=_.K))if(_.K=Qt,At=At[1],_.I==2)if(At[0]=="c"){_.M=At[1],_.ba=At[2];const Bs=At[3];Bs!=null&&(_.ka=Bs,_.j.info("VER="+_.ka));const Ta=At[4];Ta!=null&&(_.za=Ta,_.j.info("SVER="+_.za));const aa=At[5];aa!=null&&typeof aa=="number"&&aa>0&&(C=1.5*aa,_.O=C,_.j.info("backChannelRequestTimeoutMs_="+C)),C=_;const ra=h.g;if(ra){const Li=ra.g?ra.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Li){var re=C.h;re.g||Li.indexOf("spdy")==-1&&Li.indexOf("quic")==-1&&Li.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Fo(re,re.h),re.h=null))}if(C.G){const Dl=ra.g?ra.g.getResponseHeader("X-HTTP-Session-Id"):null;Dl&&(C.wa=Dl,Dt(C.J,C.G,Dl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),C=_;var Te=h;if(C.na=Yu(C,C.L?C.ba:null,C.W),Te.L){qo(C.h,Te);var at=Te,fn=C.O;fn&&(at.H=fn),at.D&&(xa(at),ga(at)),C.g=Te}else Fu(C);_.i.length>0&&Ea(_)}else At[0]!="stop"&&At[0]!="close"||Sa(_,7);else _.I==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?Sa(_,7):Jo(_):At[0]!="noop"&&_.l&&_.l.qa(At),_.A=0)}}st(4)}catch{}}var vn=class{constructor(h,b){this.g=h,this.map=b}};function Bo(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ya(h){return h.h?1:h.g?h.g.size:0}function va(h,b){return h.h?h.h==b:h.g?h.g.has(b):!1}function Fo(h,b){h.g?h.g.add(b):h.h=b}function qo(h,b){h.h&&h.h==b?h.h=null:h.g&&h.g.has(b)&&h.g.delete(b)}Bo.prototype.cancel=function(){if(this.i=$o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function $o(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let b=h.i;for(const _ of h.g.values())b=b.concat(_.G);return b}return T(h.i)}var Pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function El(h,b){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const C=h[_].indexOf("=");let J,re=null;C>=0?(J=h[_].substring(0,C),re=h[_].substring(C+1)):J=h[_],b(J,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function _s(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;h instanceof _s?(this.l=h.l,Dn(this,h.j),this.o=h.o,this.g=h.g,Er(this,h.u),this.h=h.h,Ho(this,Bu(h.i)),this.m=h.m):h&&(b=String(h).match(Pu))?(this.l=!1,Dn(this,b[1]||"",!0),this.o=wa(b[2]||""),this.g=wa(b[3]||"",!0),Er(this,b[4]),this.h=wa(b[5]||"",!0),Ho(this,b[6]||"",!0),this.m=wa(b[7]||"")):(this.l=!1,this.i=new Tr(null,this.l))}_s.prototype.toString=function(){const h=[];var b=this.j;b&&h.push(ki(b,Sl,!0),":");var _=this.g;return(_||b=="file")&&(h.push("//"),(b=this.o)&&h.push(ki(b,Sl,!0),"@"),h.push(hn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(ki(_,_.charAt(0)=="/"?Go:Vu,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",ki(_,Lu)),h.join("")},_s.prototype.resolve=function(h){const b=wn(this);let _=!!h.j;_?Dn(b,h.j):_=!!h.o,_?b.o=h.o:_=!!h.g,_?b.g=h.g:_=h.u!=null;var C=h.h;if(_)Er(b,h.u);else if(_=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var J=b.h.lastIndexOf("/");J!=-1&&(C=b.h.slice(0,J+1)+C)}if(J=C,J==".."||J==".")C="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){C=J.lastIndexOf("/",0)==0,J=J.split("/");const re=[];for(let Te=0;Te<J.length;){const at=J[Te++];at=="."?C&&Te==J.length&&re.push(""):at==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),C&&Te==J.length&&re.push("")):(re.push(at),C=!0)}C=re.join("/")}else C=J}return _?b.h=C:_=h.i.toString()!=="",_?Ho(b,Bu(h.i)):_=!!h.m,_&&(b.m=h.m),b};function wn(h){return new _s(h)}function Dn(h,b,_){h.j=_?wa(b,!0):b,h.j&&(h.j=h.j.replace(/:$/,""))}function Er(h,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);h.u=b}else h.u=null}function Ho(h,b,_){b instanceof Tr?(h.i=b,Al(h.i,h.l)):(_||(b=ki(b,Sr)),h.i=new Tr(b,h.l))}function Dt(h,b,_){h.i.set(b,_)}function Ri(h){return Dt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function wa(h,b){return h?b?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ki(h,b,_){return typeof h=="string"?(h=encodeURI(h).replace(b,as),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function as(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Sl=/[#\/\?@]/g,Vu=/[#\?:]/g,Go=/[#\?]/g,Sr=/[#\?@]/g,Lu=/#/g;function Tr(h,b){this.h=this.g=null,this.i=h||null,this.j=!!b}function rs(h){h.g||(h.g=new Map,h.h=0,h.i&&El(h.i,function(b,_){h.add(decodeURIComponent(b.replace(/\+/g," ")),_)}))}s=Tr.prototype,s.add=function(h,b){rs(this),this.i=null,h=Ar(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(b),this.h+=1,this};function Uu(h,b){rs(h),b=Ar(h,b),h.g.has(b)&&(h.i=null,h.h-=h.g.get(b).length,h.g.delete(b))}function Yo(h,b){return rs(h),b=Ar(h,b),h.g.has(b)}s.forEach=function(h,b){rs(this),this.g.forEach(function(_,C){_.forEach(function(J){h.call(b,J,C,this)},this)},this)};function Wo(h,b){rs(h);let _=[];if(typeof b=="string")Yo(h,b)&&(_=_.concat(h.g.get(Ar(h,b))));else for(h=Array.from(h.g.values()),b=0;b<h.length;b++)_=_.concat(h[b]);return _}s.set=function(h,b){return rs(this),this.i=null,h=Ar(this,h),Yo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[b]),this.h+=1,this},s.get=function(h,b){return h?(h=Wo(this,h),h.length>0?String(h[0]):b):b};function Tl(h,b,_){Uu(h,b),_.length>0&&(h.i=null,h.g.set(Ar(h,b),T(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],b=Array.from(this.g.keys());for(let C=0;C<b.length;C++){var _=b[C];const J=hn(_);_=Wo(this,_);for(let re=0;re<_.length;re++){let Te=J;_[re]!==""&&(Te+="="+hn(_[re])),h.push(Te)}}return this.i=h.join("&")};function Bu(h){const b=new Tr;return b.i=h.i,h.g&&(b.g=new Map(h.g),b.h=h.h),b}function Ar(h,b){return b=String(b),h.j&&(b=b.toLowerCase()),b}function Al(h,b){b&&!h.j&&(rs(h),h.i=null,h.g.forEach(function(_,C){const J=C.toLowerCase();C!=J&&(Uu(this,C),Tl(this,J,_))},h)),h.j=b}function ta(h,b){const _=new dt;if(d.Image){const C=new Image;C.onload=y(Ls,_,"TestLoadImage: loaded",!0,b,C),C.onerror=y(Ls,_,"TestLoadImage: error",!1,b,C),C.onabort=y(Ls,_,"TestLoadImage: abort",!1,b,C),C.ontimeout=y(Ls,_,"TestLoadImage: timeout",!1,b,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else b(!1)}function Ko(h,b){const _=new dt,C=new AbortController,J=setTimeout(()=>{C.abort(),Ls(_,"TestPingServer: timeout",!1,b)},1e4);fetch(h,{signal:C.signal}).then(re=>{clearTimeout(J),re.ok?Ls(_,"TestPingServer: ok",!0,b):Ls(_,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(J),Ls(_,"TestPingServer: error",!1,b)})}function Ls(h,b,_,C,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),C(_)}catch{}}function Cr(){this.g=new Ps}function _a(h){this.i=h.Sb||null,this.h=h.ab||!1}w(_a,Cn),_a.prototype.g=function(){return new Ii(this.i,this.h)};function Ii(h,b){ut.call(this),this.H=h,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ii,ut),s=Ii.prototype,s.open=function(h,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=b,this.readyState=1,na(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(b.body=h),(this.H||d).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,na(this)),this.g&&(this.readyState=3,na(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var b=h.value?h.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!h.done}))&&(this.response=this.responseText+=b)}h.done?Rr(this):na(this),this.readyState==3&&Cl(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Rr(this))},s.Na=function(h){this.g&&(this.response=h,Rr(this))},s.ga=function(){this.g&&Rr(this)};function Rr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,na(h)}s.setRequestHeader=function(h,b){this.A.append(h,b)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],b=this.h.entries();for(var _=b.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=b.next();return h.join(`\r
`)};function na(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Us(h){let b="";return Se(h,function(_,C){b+=C,b+=":",b+=_,b+=`\r
`}),b}function Di(h,b,_){e:{for(C in _){var C=!1;break e}C=!0}C||(_=Us(_),typeof h=="string"?_!=null&&hn(_):Dt(h,b,_))}function Vt(h){ut.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Vt,ut);var Na=/^https?$/i,Qo=["POST","PUT"];s=Vt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,b,_,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);b=b?b.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ha.g(),this.g.onreadystatechange=N(x(this.Ca,this));try{this.B=!0,this.g.open(b,String(h),!0),this.B=!1}catch(re){Mi(this,re);return}if(h=_||"",_=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var J in C)_.set(J,C[J]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const re of C.keys())_.set(re,C.get(re));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(_.keys()).find(re=>re.toLowerCase()=="content-type"),J=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Qo,b,void 0)>=0)||C||J||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Te]of _)this.g.setRequestHeader(re,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Mi(this,re)}};function Mi(h,b){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=b,h.o=5,Xo(h),Ga(h)}function Xo(h){h.A||(h.A=!0,Ce(h,"complete"),Ce(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ce(this,"complete"),Ce(this,"abort"),Ga(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ga(this,!0)),Vt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Oi(this):this.Xa())},s.Xa=function(){Oi(this)};function Oi(h){if(h.h&&typeof u<"u"){if(h.v&&sa(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ce(h,"readystatechange"),sa(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var _;if(!(_=b)){var C;if(C=re===0){let Te=String(h.D).match(Pu)[1]||null;!Te&&d.self&&d.self.location&&(Te=d.self.location.protocol.slice(0,-1)),C=!Na.test(Te?Te.toLowerCase():"")}_=C}if(_)Ce(h,"complete"),Ce(h,"success");else{h.o=6;try{var J=sa(h)>2?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.ca()+"]",Xo(h)}}finally{Ga(h)}}}}function Ga(h,b){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,b||Ce(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function sa(h){return h.g?h.g.readyState:0}s.ca=function(){try{return sa(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var b=this.g.responseText;return h&&b.indexOf(h)==0&&(b=b.substring(h.length)),$a(b)}};function Pn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ya(h){const b={};h=(h.g&&sa(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(I(h[C]))continue;var _=Ai(h[C]);const J=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const re=b[J]||[];b[J]=re,re.push(_)}ge(b,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(h,b,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||b}function kr(h){this.za=0,this.i=[],this.j=new dt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ja("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ja("baseRetryDelayMs",5e3,h),this.Za=ja("retryDelaySeedMs",1e4,h),this.Ta=ja("forwardChannelMaxRetries",2,h),this.va=ja("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Bo(h&&h.concurrentRequestLimit),this.Ba=new Cr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=kr.prototype,s.ka=8,s.I=1,s.connect=function(h,b,_,C){fe(0),this.W=h,this.H=b||{},_&&C!==void 0&&(this.H.OSID=_,this.H.OAID=C),this.F=this.X,this.J=Yu(this,null,this.W),Ea(this)};function Jo(h){if(Rl(h),h.I==3){var b=h.V++,_=wn(h.J);if(Dt(_,"SID",h.M),Dt(_,"RID",b),Dt(_,"TYPE","terminate"),Pi(h,_),b=new bn(h,h.j,b),b.M=2,b.A=Ri(wn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(b.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=b.A,_=!0),_||(b.g=Wu(b.j,null),b.g.ea(b.A)),b.F=Date.now(),ga(b)}Gu(h)}function Ir(h){h.g&&(ec(h),h.g.cancel(),h.g=null)}function Rl(h){Ir(h),h.v&&(d.clearTimeout(h.v),h.v=null),Il(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Ea(h){if(!zo(h.h)&&!h.m){h.m=!0;var b=h.Ea;ue||A(),W||(ue(),W=!0),E.add(b,h),h.D=0}}function kl(h,b){return ya(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=b.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=tt(x(h.Ea,h,b),Hu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const J=new bn(this,this.j,h);let re=this.o;if(this.U&&(re?(re=O(re),ce(re,this.U)):re=this.U),this.u!==null||this.R||(J.J=re,re=null),this.S)e:{for(var b=0,_=0;_<this.i.length;_++){t:{var C=this.i[_];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(b+=C,b>4096){b=_;break e}if(b===4096||_===this.i.length-1){b=_+1;break e}}b=1e3}else b=1e3;b=zu(this,J,b),_=wn(this.J),Dt(_,"RID",h),Dt(_,"CVER",22),this.G&&Dt(_,"X-HTTP-Session-Id",this.G),Pi(this,_),re&&(this.R?b="headers="+hn(Us(re))+"&"+b:this.u&&Di(_,this.u,re)),Fo(this.h,J),this.Ra&&Dt(_,"TYPE","init"),this.S?(Dt(_,"$req",b),Dt(_,"SID","null"),J.U=!0,vs(J,_,null)):vs(J,_,b),this.I=2}}else this.I==3&&(h?Zo(this,h):this.i.length==0||zo(this.h)||Zo(this))};function Zo(h,b){var _;b?_=b.l:_=h.V++;const C=wn(h.J);Dt(C,"SID",h.M),Dt(C,"RID",_),Dt(C,"AID",h.K),Pi(h,C),h.u&&h.o&&Di(C,h.u,h.o),_=new bn(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),b&&(h.i=b.G.concat(h.i)),b=zu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Fo(h.h,_),vs(_,C,b)}function Pi(h,b){h.H&&Se(h.H,function(_,C){Dt(b,C,_)}),h.l&&Se({},function(_,C){Dt(b,C,_)})}function zu(h,b,_){_=Math.min(h.i.length,_);const C=h.l?x(h.l.Ka,h.l,h):null;e:{var J=h.i;let at=-1;for(;;){const fn=["count="+_];at==-1?_>0?(at=J[0].g,fn.push("ofs="+at)):at=0:fn.push("ofs="+at);let At=!0;for(let Qt=0;Qt<_;Qt++){var re=J[Qt].g;const Bs=J[Qt].map;if(re-=at,re<0)at=Math.max(0,J[Qt].g-100),At=!1;else try{re="req"+re+"_"||"";try{var Te=Bs instanceof Map?Bs:Object.entries(Bs);for(const[Ta,aa]of Te){let ra=aa;p(aa)&&(ra=In(aa)),fn.push(re+Ta+"="+encodeURIComponent(ra))}}catch(Ta){throw fn.push(re+"type="+encodeURIComponent("_badmap")),Ta}}catch{C&&C(Bs)}}if(At){Te=fn.join("&");break e}}Te=void 0}return h=h.i.splice(0,_),b.G=h,Te}function Fu(h){if(!h.g&&!h.v){h.Y=1;var b=h.Da;ue||A(),W||(ue(),W=!0),E.add(b,h),h.A=0}}function Vi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=tt(x(h.Da,h),Hu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=tt(x(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,fe(10),Ir(this),qu(this))};function ec(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function qu(h){h.g=new bn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var b=wn(h.na);Dt(b,"RID","rpc"),Dt(b,"SID",h.M),Dt(b,"AID",h.K),Dt(b,"CI",h.F?"0":"1"),!h.F&&h.ia&&Dt(b,"TO",h.ia),Dt(b,"TYPE","xmlhttp"),Pi(h,b),h.u&&h.o&&Di(b,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Ri(wn(b)),_.u=null,_.R=!0,Ci(_,h)}s.Va=function(){this.C!=null&&(this.C=null,Ir(this),Vi(this),fe(19))};function Il(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function $u(h,b){var _=null;if(h.g==b){Il(h),ec(h),h.g=null;var C=2}else if(va(h.h,b))_=b.G,qo(h.h,b),C=1;else return;if(h.I!=0){if(b.o)if(C==1){_=b.u?b.u.length:0,b=Date.now()-b.F;var J=h.D;C=_e(),Ce(C,new Ve(C,_)),Ea(h)}else Fu(h);else if(J=b.m,J==3||J==0&&b.X>0||!(C==1&&kl(h,b)||C==2&&Vi(h)))switch(_&&_.length>0&&(b=h.h,b.i=b.i.concat(_)),J){case 1:Sa(h,5);break;case 4:Sa(h,10);break;case 3:Sa(h,6);break;default:Sa(h,2)}}}function Hu(h,b){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*b}function Sa(h,b){if(h.j.info("Error code "+b),b==2){var _=x(h.bb,h),C=h.Ua;const J=!C;C=new _s(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Dn(C,"https"),Ri(C),J?ta(C.toString(),_):Ko(C.toString(),_)}else fe(2);h.I=0,h.l&&h.l.pa(b),Gu(h),Rl(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function Gu(h){if(h.I=0,h.ja=[],h.l){const b=$o(h.h);(b.length!=0||h.i.length!=0)&&(L(h.ja,b),L(h.ja,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.oa()}}function Yu(h,b,_){var C=_ instanceof _s?wn(_):new _s(_);if(C.g!="")b&&(C.g=b+"."+C.g),Er(C,C.u);else{var J=d.location;C=J.protocol,b=b?b+"."+J.hostname:J.hostname,J=+J.port;const re=new _s(null);C&&Dn(re,C),b&&(re.g=b),J&&Er(re,J),_&&(re.h=_),C=re}return _=h.G,b=h.wa,_&&b&&Dt(C,_,b),Dt(C,"VER",h.ka),Pi(h,C),C}function Wu(h,b,_){if(b&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=h.Aa&&!h.ma?new Vt(new _a({ab:_})):new Vt(h.ma),b.Fa(h.L),b}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ku(){}s=Ku.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Dr(){}Dr.prototype.g=function(h,b){return new Xn(h,b)};function Xn(h,b){ut.call(this),this.g=new kr(b),this.l=h,this.h=b&&b.messageUrlParams||null,h=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(h?h["X-WebChannel-Content-Type"]=b.messageContentType:h={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(h?h["X-WebChannel-Client-Profile"]=b.sa:h={"X-WebChannel-Client-Profile":b.sa}),this.g.U=h,(h=b&&b.Qb)&&!I(h)&&(this.g.u=h),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!I(b)&&(this.g.G=b,h=this.h,h!==null&&b in h&&(h=this.h,b in h&&delete h[b])),this.j=new Wa(this)}w(Xn,ut),Xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){Jo(this.g)},Xn.prototype.o=function(h){var b=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=In(h),h=_);b.i.push(new vn(b.Ya++,h)),b.I==3&&Ea(b)},Xn.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,Xn.Z.N.call(this)};function Qu(h){zt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var b=h.__sm__;if(b){e:{for(const _ in b){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,b=b!==null&&h in b?b[h]:void 0),this.data=b}else this.data=h}w(Qu,zt);function Xu(){F.call(this),this.status=1}w(Xu,F);function Wa(h){this.g=h}w(Wa,Ku),Wa.prototype.ra=function(){Ce(this.g,"a")},Wa.prototype.qa=function(h){Ce(this.g,new Qu(h))},Wa.prototype.pa=function(h){Ce(this.g,new Xu)},Wa.prototype.oa=function(){Ce(this.g,"b")},Dr.prototype.createWebChannel=Dr.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,gN=function(){return new Dr},pN=function(){return _e()},mN=ae,p0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,wh=ns,ys.COMPLETE="complete",fN=ys,Zs.EventType=xn,xn.OPEN="a",xn.CLOSE="b",xn.ERROR="c",xn.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Yc=Zs,Vt.prototype.listenOnce=Vt.prototype.K,Vt.prototype.getLastError=Vt.prototype.Ha,Vt.prototype.getLastErrorCode=Vt.prototype.ya,Vt.prototype.getStatus=Vt.prototype.ca,Vt.prototype.getResponseJson=Vt.prototype.La,Vt.prototype.getResponseText=Vt.prototype.la,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Fa,hN=Vt}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});let Yn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");let Po="12.8.0";function H4(s){Po=s}const hl=new Z0("@firebase/firestore");function co(){return hl.logLevel}function Me(s,...e){if(hl.logLevel<=xt.DEBUG){const n=e.map(ug);hl.debug(`Firestore (${Po}): ${s}`,...n)}}function wr(s,...e){if(hl.logLevel<=xt.ERROR){const n=e.map(ug);hl.error(`Firestore (${Po}): ${s}`,...n)}}function No(s,...e){if(hl.logLevel<=xt.WARN){const n=e.map(ug);hl.warn(`Firestore (${Po}): ${s}`,...n)}}function ug(s){if(typeof s=="string")return s;try{return(function(n){return JSON.stringify(n)})(s)}catch{return s}}function We(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,xN(s,r,n)}function xN(s,e,n){let r=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw wr(r),new Error(r)}function It(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||xN(e,o,r)}function et(s,e){return s}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends qa{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class bN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class G4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Yn.UNAUTHENTICATED)))}shutdown(){}}class Y4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class W4{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){It(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pr)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new bN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new Yn(e)}}class K4{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Q4{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new K4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){It(this.o===void 0,3512);const r=u=>{u.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(It(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new xw(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function J4(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}class dg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=J4(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function bt(s,e){return s<e?-1:s>e?1:0}function g0(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return zp(o)===zp(u)?bt(o,u):zp(o)?1:-1}return bt(s.length,e.length)}const Z4=55296,eR=57343;function zp(s){const e=s.charCodeAt(0);return e>=Z4&&e<=eR}function jo(s,e,n){return s.length===e.length&&s.every(((r,o)=>n(r,e[o])))}const bw="__name__";class Ia{constructor(e,n,r){n===void 0?n=0:n>e.length&&We(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&We(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ia?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=Ia.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return bt(e.length,n.length)}static compareSegments(e,n){const r=Ia.isNumericId(e),o=Ia.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?Ia.extractNumericId(e).compare(Ia.extractNumericId(n)):g0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return di.fromString(e.substring(4,e.length-2))}}class Gt extends Ia{construct(e,n,r){return new Gt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new Gt(n)}static emptyPath(){return new Gt([])}}const tR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends Ia{construct(e,n,r){return new Fn(e,n,r)}static isValidIdentifier(e){return tR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bw}static keyField(){return new Fn([bw])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ke(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ke(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ke(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(r+=p,o++):(u(),o++)}if(u(),d)throw new ke(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(n)}static emptyPath(){return new Fn([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Gt.fromString(e))}static fromName(e){return new qe(Gt.fromString(e).popFirst(5))}static empty(){return new qe(Gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Gt(e.slice()))}}function yN(s,e,n){if(!n)throw new ke(be.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function nR(s,e,n,r){if(e===!0&&r===!0)throw new ke(be.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function yw(s){if(!qe.isDocumentKey(s))throw new ke(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function vw(s){if(qe.isDocumentKey(s))throw new ke(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function vN(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function lf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":We(12329,{type:typeof s})}function ps(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ke(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lf(s);throw new ke(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}function An(s,e){const n={typeString:s};return e&&(n.value=e),n}function Su(s,e){if(!vN(s))throw new ke(be.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const d=s[r];if(o&&typeof d!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new ke(be.INVALID_ARGUMENT,n);return!0}const ww=-62135596800,_w=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_w);return new kt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ke(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ke(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ww)throw new ke(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_w}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,kt._jsonSchema))return new kt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ww;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kt._jsonSchemaVersion="firestore/timestamp/1.0",kt._jsonSchema={type:An("string",kt._jsonSchemaVersion),seconds:An("number"),nanoseconds:An("number")};class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new kt(0,0))}static max(){return new Qe(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const cu=-1;function sR(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Qe.fromTimestamp(r===1e9?new kt(n+1,0):new kt(n,r));return new pi(o,qe.empty(),e)}function aR(s){return new pi(s.readTime,s.key,cu)}class pi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pi(Qe.min(),qe.empty(),cu)}static max(){return new pi(Qe.max(),qe.empty(),cu)}}function rR(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=qe.comparator(s.documentKey,e.documentKey),n!==0?n:bt(s.largestBatchId,e.largestBatchId))}const iR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vo(s){if(s.code!==be.FAILED_PRECONDITION||s.message!==iR)throw s;Me("LocalStore","Unexpectedly lost primary lease")}class ve{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ve(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ve?n:ve.resolve(n)}catch(n){return ve.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ve.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ve.reject(n)}static resolve(e){return new ve(((n,r)=>{n(e)}))}static reject(e){return new ve(((n,r)=>{r(e)}))}static waitFor(e){return new ve(((n,r)=>{let o=0,u=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++u,d&&u===o&&n()}),(g=>r(g)))})),d=!0,u===o&&n()}))}static or(e){let n=ve.resolve(!1);for(const r of e)n=n.next((o=>o?ve.resolve(o):r()));return n}static forEach(e,n){const r=[];return e.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(e,n){return new ve(((r,o)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const x=g;n(e[x]).next((y=>{d[x]=y,++p,p===u&&r(d)}),(y=>o(y)))}}))}static doWhile(e,n){return new ve(((r,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):r()};u()}))}}function oR(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lo(s){return s.name==="IndexedDbTransactionError"}class of{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}of.ce=-1;const hg=-1;function cf(s){return s==null}function Uh(s){return s===0&&1/s==-1/0}function cR(s){return typeof s=="number"&&Number.isInteger(s)&&!Uh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const wN="";function uR(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Nw(e)),e=dR(s.get(n),e);return Nw(e)}function dR(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case wN:n+="";break;default:n+=u}}return n}function Nw(s){return s+wN+""}function jw(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Si(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function _N(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class tn{constructor(e,n){this.comparator=e,this.root=n||zn.EMPTY}insert(e,n){return new tn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??zn.RED,this.left=o??zn.EMPTY,this.right=u??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new zn(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return zn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new zn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class kn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ew(this.data.getIterator())}getIteratorFrom(e){return new Ew(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new kn(this.comparator);return n.data=e,n}}class Ew{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ks{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new ks([])}unionWith(e){let n=new kn(Fn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ks(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class NN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new NN("Invalid base64 string: "+u):u}})(e);return new qn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new qn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const hR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(s){if(It(!!s,39018),typeof s=="string"){let e=0;const n=hR.exec(s);if(It(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gn(s.seconds),nanos:gn(s.nanos)}}function gn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function xi(s){return typeof s=="string"?qn.fromBase64String(s):qn.fromUint8Array(s)}const jN="server_timestamp",EN="__type__",SN="__previous_value__",TN="__local_write_time__";function fg(s){return(s?.mapValue?.fields||{})[EN]?.stringValue===jN}function uf(s){const e=s.mapValue.fields[SN];return fg(e)?uf(e):e}function uu(s){const e=gi(s.mapValue.fields[TN].timestampValue);return new kt(e.seconds,e.nanos)}class fR{constructor(e,n,r,o,u,d,p,g,x,y,w){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=y,this.apiKey=w}}const Bh="(default)";class du{constructor(e,n){this.projectId=e,this.database=n||Bh}static empty(){return new du("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}function mR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new ke(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(s.options.projectId,e)}const AN="__type__",pR="__max__",rh={mapValue:{}},CN="__vector__",zh="value";function bi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?fg(s)?4:xR(s)?9007199254740991:gR(s)?10:11:We(28295,{value:s})}function Fa(s,e){if(s===e)return!0;const n=bi(s);if(n!==bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return uu(s).isEqual(uu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=gi(o.timestampValue),p=gi(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return xi(o.bytesValue).isEqual(xi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return gn(o.geoPointValue.latitude)===gn(u.geoPointValue.latitude)&&gn(o.geoPointValue.longitude)===gn(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return gn(o.integerValue)===gn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=gn(o.doubleValue),p=gn(u.doubleValue);return d===p?Uh(d)===Uh(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return jo(s.arrayValue.values||[],e.arrayValue.values||[],Fa);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},p=u.mapValue.fields||{};if(jw(d)!==jw(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Fa(d[g],p[g])))return!1;return!0})(s,e);default:return We(52216,{left:s})}}function hu(s,e){return(s.values||[]).find((n=>Fa(n,e)))!==void 0}function Eo(s,e){if(s===e)return 0;const n=bi(s),r=bi(e);if(n!==r)return bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bt(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=gn(u.integerValue||u.doubleValue),g=gn(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return Sw(s.timestampValue,e.timestampValue);case 4:return Sw(uu(s),uu(e));case 5:return g0(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=xi(u),g=xi(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let x=0;x<p.length&&x<g.length;x++){const y=bt(p[x],g[x]);if(y!==0)return y}return bt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=bt(gn(u.latitude),gn(d.latitude));return p!==0?p:bt(gn(u.longitude),gn(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Tw(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},x=p[zh]?.arrayValue,y=g[zh]?.arrayValue,w=bt(x?.values?.length||0,y?.values?.length||0);return w!==0?w:Tw(x,y)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===rh.mapValue&&d===rh.mapValue)return 0;if(u===rh.mapValue)return 1;if(d===rh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),x=d.fields||{},y=Object.keys(x);g.sort(),y.sort();for(let w=0;w<g.length&&w<y.length;++w){const N=g0(g[w],y[w]);if(N!==0)return N;const T=Eo(p[g[w]],x[y[w]]);if(T!==0)return T}return bt(g.length,y.length)})(s.mapValue,e.mapValue);default:throw We(23264,{he:n})}}function Sw(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return bt(s,e);const n=gi(s),r=gi(e),o=bt(n.seconds,r.seconds);return o!==0?o:bt(n.nanos,r.nanos)}function Tw(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=Eo(n[o],r[o]);if(u)return u}return bt(n.length,r.length)}function So(s){return x0(s)}function x0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return xi(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return qe.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=x0(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of r)u?u=!1:o+=",",o+=`${d}:${x0(n.fields[d])}`;return o+"}"})(s.mapValue):We(61005,{value:s})}function _h(s){switch(bi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uf(s);return e?16+_h(e):16;case 5:return 2*s.stringValue.length;case 6:return xi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+_h(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Si(r.fields,((u,d)=>{o+=u.length+_h(d)})),o})(s.mapValue);default:throw We(13486,{value:s})}}function Aw(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function b0(s){return!!s&&"integerValue"in s}function mg(s){return!!s&&"arrayValue"in s}function Cw(s){return!!s&&"nullValue"in s}function Rw(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Nh(s){return!!s&&"mapValue"in s}function gR(s){return(s?.mapValue?.fields||{})[AN]?.stringValue===CN}function eu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Si(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=eu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eu(s.arrayValue.values[n]);return e}return{...s}}function xR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===pR}class hs{constructor(e){this.value=e}static empty(){return new hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)}setAll(e){let n=Fn.emptyPath(),r={},o=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=p.popLast()}d?r[p.lastSegment()]=eu(d):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());Nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fa(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Nh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Si(n,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new hs(eu(this.value))}}function RN(s){const e=[];return Si(s.fields,((n,r)=>{const o=new Fn([n]);if(Nh(r)){const u=RN(r.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new ks(e)}class Wn{constructor(e,n,r,o,u,d,p){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Wn(e,0,Qe.min(),Qe.min(),Qe.min(),hs.empty(),0)}static newFoundDocument(e,n,r,o){return new Wn(e,1,n,Qe.min(),r,o,0)}static newNoDocument(e,n){return new Wn(e,2,n,Qe.min(),Qe.min(),hs.empty(),0)}static newUnknownDocument(e,n){return new Wn(e,3,n,Qe.min(),Qe.min(),hs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Fh{constructor(e,n){this.position=e,this.inclusive=n}}function kw(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?r=qe.comparator(qe.fromName(d.referenceValue),n.key):r=Eo(d,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Iw(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Fa(s.position[n],e.position[n]))return!1;return!0}class qh{constructor(e,n="asc"){this.field=e,this.dir=n}}function bR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class kN{}class Tn extends kN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vR(e,n,r):n==="array-contains"?new NR(e,r):n==="in"?new jR(e,r):n==="not-in"?new ER(e,r):n==="array-contains-any"?new SR(e,r):new Tn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wR(e,r):new _R(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Eo(n,this.value)):n!==null&&bi(this.value)===bi(n)&&this.matchesComparison(Eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ma extends kN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ma(e,n)}matches(e){return IN(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function IN(s){return s.op==="and"}function DN(s){return yR(s)&&IN(s)}function yR(s){for(const e of s.filters)if(e instanceof ma)return!1;return!0}function y0(s){if(s instanceof Tn)return s.field.canonicalString()+s.op.toString()+So(s.value);if(DN(s))return s.filters.map((e=>y0(e))).join(",");{const e=s.filters.map((n=>y0(n))).join(",");return`${s.op}(${e})`}}function MN(s,e){return s instanceof Tn?(function(r,o){return o instanceof Tn&&r.op===o.op&&r.field.isEqual(o.field)&&Fa(r.value,o.value)})(s,e):s instanceof ma?(function(r,o){return o instanceof ma&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,d,p)=>u&&MN(d,o.filters[p])),!0):!1})(s,e):void We(19439)}function ON(s){return s instanceof Tn?(function(n){return`${n.field.canonicalString()} ${n.op} ${So(n.value)}`})(s):s instanceof ma?(function(n){return n.op.toString()+" {"+n.getFilters().map(ON).join(" ,")+"}"})(s):"Filter"}class vR extends Tn{constructor(e,n,r){super(e,n,r),this.key=qe.fromName(r.referenceValue)}matches(e){const n=qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class wR extends Tn{constructor(e,n){super(e,"in",n),this.keys=PN("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class _R extends Tn{constructor(e,n){super(e,"not-in",n),this.keys=PN("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function PN(s,e){return(e.arrayValue?.values||[]).map((n=>qe.fromName(n.referenceValue)))}class NR extends Tn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mg(n)&&hu(n.arrayValue,this.value)}}class jR extends Tn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&hu(this.value.arrayValue,n)}}class ER extends Tn{constructor(e,n){super(e,"not-in",n)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hu(this.value.arrayValue,n)}}class SR extends Tn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>hu(this.value.arrayValue,r)))}}class TR{constructor(e,n=null,r=[],o=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function Dw(s,e=null,n=[],r=[],o=null,u=null,d=null){return new TR(s,e,n,r,o,u,d)}function pg(s){const e=et(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>y0(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>So(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>So(r))).join(",")),e.Te=n}return e.Te}function gg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!bR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!MN(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Iw(s.startAt,e.startAt)&&Iw(s.endAt,e.endAt)}function v0(s){return qe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Tu{constructor(e,n=null,r=[],o=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function AR(s,e,n,r,o,u,d,p){return new Tu(s,e,n,r,o,u,d,p)}function df(s){return new Tu(s)}function Mw(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function CR(s){return qe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function VN(s){return s.collectionGroup!==null}function tu(s){const e=et(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new kn(Fn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new qh(u,r))})),n.has(Fn.keyField().canonicalString())||e.Ie.push(new qh(Fn.keyField(),r))}return e.Ie}function La(s){const e=et(s);return e.Ee||(e.Ee=RR(e,tu(s))),e.Ee}function RR(s,e){if(s.limitType==="F")return Dw(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new qh(o.field,u)}));const n=s.endAt?new Fh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Fh(s.startAt.position,s.startAt.inclusive):null;return Dw(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function w0(s,e){const n=s.filters.concat([e]);return new Tu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function _0(s,e,n){return new Tu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function hf(s,e){return gg(La(s),La(e))&&s.limitType===e.limitType}function LN(s){return`${pg(La(s))}|lt:${s.limitType}`}function uo(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>ON(o))).join(", ")}]`),cf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>So(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>So(o))).join(",")),`Target(${r})`})(La(s))}; limitType=${s.limitType})`}function ff(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):qe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of tu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(d,p,g){const x=kw(d,p,g);return d.inclusive?x<=0:x<0})(r.startAt,tu(r),o)||r.endAt&&!(function(d,p,g){const x=kw(d,p,g);return d.inclusive?x>=0:x>0})(r.endAt,tu(r),o))})(s,e)}function kR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function UN(s){return(e,n)=>{let r=!1;for(const o of tu(s)){const u=IR(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function IR(s,e,n){const r=s.field.isKeyField()?qe.comparator(e.key,n.key):(function(u,d,p){const g=d.data.field(u),x=p.data.field(u);return g!==null&&x!==null?Eo(g,x):We(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return We(19790,{direction:s.dir})}}class wl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Si(this.inner,((n,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return _N(this.inner)}size(){return this.innerSize}}const DR=new tn(qe.comparator);function _r(){return DR}const BN=new tn(qe.comparator);function Wc(...s){let e=BN;for(const n of s)e=e.insert(n.key,n);return e}function zN(s){let e=BN;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function al(){return nu()}function FN(){return nu()}function nu(){return new wl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const MR=new tn(qe.comparator),OR=new kn(qe.comparator);function yt(...s){let e=OR;for(const n of s)e=e.add(n);return e}const PR=new kn(bt);function VR(){return PR}function xg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function qN(s){return{integerValue:""+s}}function LR(s,e){return cR(e)?qN(e):xg(s,e)}class mf{constructor(){this._=void 0}}function UR(s,e,n){return s instanceof fu?(function(o,u){const d={fields:{[EN]:{stringValue:jN},[TN]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&fg(u)&&(u=uf(u)),u&&(d.fields[SN]=u),{mapValue:d}})(n,e):s instanceof mu?HN(s,e):s instanceof pu?GN(s,e):(function(o,u){const d=$N(o,u),p=Ow(d)+Ow(o.Ae);return b0(d)&&b0(o.Ae)?qN(p):xg(o.serializer,p)})(s,e)}function BR(s,e,n){return s instanceof mu?HN(s,e):s instanceof pu?GN(s,e):n}function $N(s,e){return s instanceof $h?(function(r){return b0(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class fu extends mf{}class mu extends mf{constructor(e){super(),this.elements=e}}function HN(s,e){const n=YN(e);for(const r of s.elements)n.some((o=>Fa(o,r)))||n.push(r);return{arrayValue:{values:n}}}class pu extends mf{constructor(e){super(),this.elements=e}}function GN(s,e){let n=YN(e);for(const r of s.elements)n=n.filter((o=>!Fa(o,r)));return{arrayValue:{values:n}}}class $h extends mf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ow(s){return gn(s.integerValue||s.doubleValue)}function YN(s){return mg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class zR{constructor(e,n){this.field=e,this.transform=n}}function FR(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof mu&&o instanceof mu||r instanceof pu&&o instanceof pu?jo(r.elements,o.elements,Fa):r instanceof $h&&o instanceof $h?Fa(r.Ae,o.Ae):r instanceof fu&&o instanceof fu})(s.transform,e.transform)}class qR{constructor(e,n){this.version=e,this.transformResults=n}}class Xs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xs}static exists(e){return new Xs(void 0,e)}static updateTime(e){return new Xs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class pf{}function WN(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new bg(s.key,Xs.none()):new Au(s.key,s.data,Xs.none());{const n=s.data,r=hs.empty();let o=new kn(Fn.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?r.delete(u):r.set(u,d),o=o.add(u)}return new Ti(s.key,r,new ks(o.toArray()),Xs.none())}}function $R(s,e,n){s instanceof Au?(function(o,u,d){const p=o.value.clone(),g=Vw(o.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof Ti?(function(o,u,d){if(!jh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const p=Vw(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(KN(o)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,n):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function su(s,e,n,r){return s instanceof Au?(function(u,d,p,g){if(!jh(u.precondition,d))return p;const x=u.value.clone(),y=Lw(u.fieldTransforms,g,d);return x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(s,e,n,r):s instanceof Ti?(function(u,d,p,g){if(!jh(u.precondition,d))return p;const x=Lw(u.fieldTransforms,g,d),y=d.data;return y.setAll(KN(u)),y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,n,r):(function(u,d,p){return jh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function HR(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=$N(r.transform,o||null);u!=null&&(n===null&&(n=hs.empty()),n.set(r.field,u))}return n||null}function Pw(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&jo(r,o,((u,d)=>FR(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Au extends pf{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ti extends pf{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function KN(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function Vw(s,e,n){const r=new Map;It(s.length===n.length,32656,{Ve:n.length,de:s.length});for(let o=0;o<n.length;o++){const u=s[o],d=u.transform,p=e.data.field(u.field);r.set(u.field,BR(d,p,n[o]))}return r}function Lw(s,e,n){const r=new Map;for(const o of s){const u=o.transform,d=n.data.field(o.field);r.set(o.field,UR(u,d,e))}return r}class bg extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GR extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YR{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&$R(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FN();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=n.has(o.key)?null:p;const g=WN(d,p);g!==null&&r.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Qe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),yt())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,((n,r)=>Pw(n,r)))&&jo(this.baseMutations,e.baseMutations,((n,r)=>Pw(n,r)))}}class yg{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){It(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return MR})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new yg(e,n,r,o)}}class WR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class KR{constructor(e,n){this.count=e,this.unchangedNames=n}}var Sn,_t;function QR(s){switch(s){case be.OK:return We(64938);case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0;default:return We(15467,{code:s})}}function QN(s){if(s===void 0)return wr("GRPC error has no .code"),be.UNKNOWN;switch(s){case Sn.OK:return be.OK;case Sn.CANCELLED:return be.CANCELLED;case Sn.UNKNOWN:return be.UNKNOWN;case Sn.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Sn.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Sn.INTERNAL:return be.INTERNAL;case Sn.UNAVAILABLE:return be.UNAVAILABLE;case Sn.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Sn.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Sn.NOT_FOUND:return be.NOT_FOUND;case Sn.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Sn.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Sn.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Sn.ABORTED:return be.ABORTED;case Sn.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Sn.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Sn.DATA_LOSS:return be.DATA_LOSS;default:return We(39323,{code:s})}}(_t=Sn||(Sn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";function XR(){return new TextEncoder}const JR=new di([4294967295,4294967295],0);function Uw(s){const e=XR().encode(s),n=new dN;return n.update(e),new Uint8Array(n.digest())}function Bw(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new di([n,r],0),new di([o,u],0)]}class vg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kc(`Invalid padding: ${n}`);if(r<0)throw new Kc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=di.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(di.fromNumber(r)));return o.compare(JR)===1&&(o=new di([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Uw(e),[r,o]=Bw(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,o,u);if(!this.we(d))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new vg(u,o,n);return r.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=Uw(e),[r,o]=Bw(n);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,o,u);this.be(d)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gf{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gf(Qe.min(),o,new tn(bt),_r(),yt())}}class Cu{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Cu(r,n,yt(),yt(),yt())}}class Eh{constructor(e,n,r,o){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=o}}class XN{constructor(e,n){this.targetId=e,this.Ce=n}}class JN{constructor(e,n,r=qn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class zw{constructor(){this.ve=0,this.Fe=Fw(),this.Me=qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=yt(),n=yt(),r=yt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:We(38017,{changeType:u})}})),new Cu(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Fw()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class ZR{constructor(e){this.Ge=e,this.ze=new Map,this.je=_r(),this.He=ih(),this.Je=ih(),this.Ze=new tn(bt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:We(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(v0(u))if(r===0){const d=new qe(u.path);this.et(n,d,Wn.newNoDocument(d,Qe.min()))}else It(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(n);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,x)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let d,p;try{d=xi(r).toUint8Array()}catch(g){if(g instanceof NN)return No("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new vg(d,o,u)}catch(g){return No(g instanceof Kc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&v0(p.target)){const g=new qe(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Wn.newNoDocument(g,e))}u.Be&&(n.set(d,u.ke()),u.Ke())}}));let r=yt();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new gf(e,n,this.Ze,this.je,r);return this.je=_r(),this.He=ih(),this.Je=ih(),this.Ze=new tn(bt),o}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new zw,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new kn(bt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new kn(bt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zw),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ih(){return new tn(qe.comparator)}function Fw(){return new tn(qe.comparator)}const ek={asc:"ASCENDING",desc:"DESCENDING"},tk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nk={and:"AND",or:"OR"};class sk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function N0(s,e){return s.useProto3Json||cf(e)?e:{value:e}}function Hh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZN(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function ak(s,e){return Hh(s,e.toTimestamp())}function Ua(s){return It(!!s,49232),Qe.fromTimestamp((function(n){const r=gi(n);return new kt(r.seconds,r.nanos)})(s))}function wg(s,e){return j0(s,e).canonicalString()}function j0(s,e){const n=(function(o){return new Gt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function e2(s){const e=Gt.fromString(s);return It(r2(e),10190,{key:e.toString()}),e}function E0(s,e){return wg(s.databaseId,e.path)}function Fp(s,e){const n=e2(e);if(n.get(1)!==s.databaseId.projectId)throw new ke(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ke(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new qe(n2(n))}function t2(s,e){return wg(s.databaseId,e)}function rk(s){const e=e2(s);return e.length===4?Gt.emptyPath():n2(e)}function S0(s){return new Gt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function n2(s){return It(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function qw(s,e,n){return{name:E0(s,e),fields:n.value.mapValue.fields}}function ik(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:We(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(x,y){return x.useProto3Json?(It(y===void 0||typeof y=="string",58123),qn.fromBase64String(y||"")):(It(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),qn.fromUint8Array(y||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(x){const y=x.code===void 0?be.UNKNOWN:QN(x.code);return new ke(y,x.message||"")})(d);n=new JN(r,o,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Fp(s,r.document.name),u=Ua(r.document.updateTime),d=r.document.createTime?Ua(r.document.createTime):Qe.min(),p=new hs({mapValue:{fields:r.document.fields}}),g=Wn.newFoundDocument(o,u,d,p),x=r.targetIds||[],y=r.removedTargetIds||[];n=new Eh(x,y,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Fp(s,r.document),u=r.readTime?Ua(r.readTime):Qe.min(),d=Wn.newNoDocument(o,u),p=r.removedTargetIds||[];n=new Eh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Fp(s,r.document),u=r.removedTargetIds||[];n=new Eh([],u,o,null)}else{if(!("filter"in e))return We(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,d=new KR(o,u),p=r.targetId;n=new XN(p,d)}}return n}function lk(s,e){let n;if(e instanceof Au)n={update:qw(s,e.key,e.value)};else if(e instanceof bg)n={delete:E0(s,e.key)};else if(e instanceof Ti)n={update:qw(s,e.key,e.data),updateMask:gk(e.fieldMask)};else{if(!(e instanceof GR))return We(16599,{dt:e.type});n={verify:E0(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(u,d){const p=d.transform;if(p instanceof fu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof mu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof pu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof $h)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw We(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:ak(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:We(27497)})(s,e.precondition)),n}function ok(s,e){return s&&s.length>0?(It(e!==void 0,14353),s.map((n=>(function(o,u){let d=o.updateTime?Ua(o.updateTime):Ua(u);return d.isEqual(Qe.min())&&(d=Ua(u)),new qR(d,o.transformResults||[])})(n,e)))):[]}function ck(s,e){return{documents:[t2(s,e.path)]}}function uk(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=t2(s,o);const u=(function(x){if(x.length!==0)return a2(ma.create(x,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const d=(function(x){if(x.length!==0)return x.map((y=>(function(N){return{field:ho(N.field),direction:fk(N.dir)}})(y)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=N0(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:n,parent:o}}function dk(s){let e=rk(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){It(r===1,65062);const y=n.from[0];y.allDescendants?o=y.collectionId:e=e.child(y.collectionId)}let u=[];n.where&&(u=(function(w){const N=s2(w);return N instanceof ma&&DN(N)?N.getFilters():[N]})(n.where));let d=[];n.orderBy&&(d=(function(w){return w.map((N=>(function(L){return new qh(fo(L.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(N)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let N;return N=typeof w=="object"?w.value:w,cf(N)?null:N})(n.limit));let g=null;n.startAt&&(g=(function(w){const N=!!w.before,T=w.values||[];return new Fh(T,N)})(n.startAt));let x=null;return n.endAt&&(x=(function(w){const N=!w.before,T=w.values||[];return new Fh(T,N)})(n.endAt)),AR(e,o,d,u,p,"F",g,x)}function hk(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function s2(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fo(n.unaryFilter.field);return Tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=fo(n.unaryFilter.field);return Tn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=fo(n.unaryFilter.field);return Tn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=fo(n.unaryFilter.field);return Tn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Tn.create(fo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return ma.create(n.compositeFilter.filters.map((r=>s2(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return We(1026)}})(n.compositeFilter.op))})(s):We(30097,{filter:s})}function fk(s){return ek[s]}function mk(s){return tk[s]}function pk(s){return nk[s]}function ho(s){return{fieldPath:s.canonicalString()}}function fo(s){return Fn.fromServerFormat(s.fieldPath)}function a2(s){return s instanceof Tn?(function(n){if(n.op==="=="){if(Rw(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NAN"}};if(Cw(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rw(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NAN"}};if(Cw(n.value))return{unaryFilter:{field:ho(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(n.field),op:mk(n.op),value:n.value}}})(s):s instanceof ma?(function(n){const r=n.getFilters().map((o=>a2(o)));return r.length===1?r[0]:{compositeFilter:{op:pk(n.op),filters:r}}})(s):We(54877,{filter:s})}function gk(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function r2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function i2(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class oi{constructor(e,n,r,o,u=Qe.min(),d=Qe.min(),p=qn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class xk{constructor(e){this.yt=e}}function bk(s){const e=dk({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?_0(e,e.limit,"L"):e}class yk{constructor(){this.Sn=new vk}addToCollectionParentIndex(e,n){return this.Sn.add(n),ve.resolve()}getCollectionParents(e,n){return ve.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ve.resolve()}deleteFieldIndex(e,n){return ve.resolve()}deleteAllFieldIndexes(e){return ve.resolve()}createTargetIndexes(e,n){return ve.resolve()}getDocumentsMatchingTarget(e,n){return ve.resolve(null)}getIndexType(e,n){return ve.resolve(0)}getFieldIndexes(e,n){return ve.resolve([])}getNextCollectionGroupToUpdate(e){return ve.resolve(null)}getMinOffset(e,n){return ve.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,n){return ve.resolve(pi.min())}updateCollectionGroup(e,n,r){return ve.resolve()}updateIndexEntries(e,n){return ve.resolve()}}class vk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new kn(Gt.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new kn(Gt.comparator)).toArray()}}const $w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},l2=41943040;class ds{static withCacheSize(e){return new ds(e,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}ds.DEFAULT_COLLECTION_PERCENTILE=10,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ds.DEFAULT=new ds(l2,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ds.DISABLED=new ds(-1,0,0);class To{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new To(0)}static ar(){return new To(-1)}}const Hw="LruGarbageCollector",wk=1048576;function Gw([s,e],[n,r]){const o=bt(s,n);return o===0?bt(e,r):o}class _k{constructor(e){this.Pr=e,this.buffer=new kn(Gw),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Gw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Nk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Me(Hw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Lo(n)?Me(Hw,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Ar(3e5)}))}}class jk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ve.resolve(of.ce);const r=new _k(n);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),ve.resolve($w)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$w):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,o,u,d,p,g,x;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,p=Date.now(),this.removeTargets(e,r,n)))).next((w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(x=Date.now(),co()<=xt.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-y}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-y}ms`),ve.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function Ek(s,e){return new jk(s,e)}class Sk{constructor(){this.changes=new wl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ve.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Tk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Ak{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(r!==null&&su(r.mutation,o,ks.empty(),kt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,yt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=yt()){const o=al();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,r).next((u=>{let d=Wc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=al();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,yt())))}populateOverlays(e,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,r,o){let u=_r();const d=nu(),p=(function(){return nu()})();return n.forEach(((g,x)=>{const y=r.get(x.key);o.has(x.key)&&(y===void 0||y.mutation instanceof Ti)?u=u.insert(x.key,x):y!==void 0?(d.set(x.key,y.mutation.getFieldMask()),su(y.mutation,x,y.mutation.getFieldMask(),kt.now())):d.set(x.key,ks.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((x,y)=>d.set(x,y))),n.forEach(((x,y)=>p.set(x,new Tk(y,d.get(x)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=nu();let o=new tn(((d,p)=>d-p)),u=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((g=>{const x=n.get(g);if(x===null)return;let y=r.get(g)||ks.empty();y=p.applyToLocalView(x,y),r.set(g,y);const w=(o.get(p.batchId)||yt()).add(g);o=o.insert(p.batchId,w)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),x=g.key,y=g.value,w=FN();y.forEach((N=>{if(!u.has(N)){const T=WN(n.get(N),r.get(N));T!==null&&w.set(N,T),u=u.add(N)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,w))}return ve.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,o){return CR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):ve.resolve(al());let p=cu,g=u;return d.next((x=>ve.forEach(x,((y,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),u.get(y)?ve.resolve():this.remoteDocumentCache.getEntry(e,y).next((N=>{g=g.insert(y,N)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,g,x,yt()))).next((y=>({batchId:p,changes:zN(y)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new qe(n)).next((r=>{let o=Wc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let d=Wc();return this.indexManager.getCollectionParents(e,u).next((p=>ve.forEach(p,(g=>{const x=(function(w,N){return new Tu(N,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,r,o).next((y=>{y.forEach(((w,N)=>{d=d.insert(w,N)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o)))).next((d=>{u.forEach(((g,x)=>{const y=x.getKey();d.get(y)===null&&(d=d.insert(y,Wn.newInvalidDocument(y)))}));let p=Wc();return d.forEach(((g,x)=>{const y=u.get(g);y!==void 0&&su(y.mutation,x,ks.empty(),kt.now()),ff(n,x)&&(p=p.insert(g,x))})),p}))}}class Ck{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ve.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Ua(o.createTime)}})(n)),ve.resolve()}getNamedQuery(e,n){return ve.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:bk(o.bundledQuery),readTime:Ua(o.readTime)}})(n)),ve.resolve()}}class Rk{constructor(){this.overlays=new tn(qe.comparator),this.Lr=new Map}getOverlay(e,n){return ve.resolve(this.overlays.get(n))}getOverlays(e,n){const r=al();return ve.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((o,u)=>{this.bt(e,n,u)})),ve.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(r)),ve.resolve()}getOverlaysForCollection(e,n,r){const o=al(),u=n.length+1,d=new qe(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,x=g.getKey();if(!n.isPrefixOf(x.path))break;x.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ve.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new tn(((x,y)=>x-y));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===n&&x.largestBatchId>r){let y=u.get(x.largestBatchId);y===null&&(y=al(),u=u.insert(x.largestBatchId,y)),y.set(x.getKey(),x)}}const p=al(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,y)=>p.set(x,y))),!(p.size()>=o)););return ve.resolve(p)}bt(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new WR(n,r));let u=this.Lr.get(n);u===void 0&&(u=yt(),this.Lr.set(n,u)),this.Lr.set(n,u.add(r.key))}}class kk{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return ve.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ve.resolve()}}class _g{constructor(){this.kr=new kn(On.Kr),this.qr=new kn(On.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new On(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new On(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new qe(new Gt([])),r=new On(n,e),o=new On(n,e+1),u=[];return this.qr.forEachInRange([r,o],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new qe(new Gt([])),r=new On(n,e),o=new On(n,e+1);let u=yt();return this.qr.forEachInRange([r,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const n=new On(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class On{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return qe.comparator(e.key,n.key)||bt(e.Hr,n.Hr)}static Ur(e,n){return bt(e.Hr,n.Hr)||qe.comparator(e.key,n.key)}}class Ik{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new kn(On.Kr)}checkEmpty(e){return ve.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new YR(u,n,r,o);this.mutationQueue.push(d);for(const p of o)this.Jr=this.Jr.add(new On(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ve.resolve(d)}lookupMutationBatch(e,n){return ve.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.Xr(r),u=o<0?0:o;return ve.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ve.resolve(this.mutationQueue.length===0?hg:this.Yn-1)}getAllMutationBatches(e){return ve.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new On(n,0),o=new On(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([r,o],(d=>{const p=this.Zr(d.Hr);u.push(p)})),ve.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kn(bt);return n.forEach((o=>{const u=new On(o,0),d=new On(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{r=r.add(p.Hr)}))})),ve.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const d=new On(new qe(u),0);let p=new kn(bt);return this.Jr.forEachWhile((g=>{const x=g.key.path;return!!r.isPrefixOf(x)&&(x.length===o&&(p=p.add(g.Hr)),!0)}),d),ve.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){It(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ve.forEach(n.mutations,(o=>{const u=new On(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new On(n,0),o=this.Jr.firstAfterOrEqual(r);return ve.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ve.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Dk{constructor(e){this.ti=e,this.docs=(function(){return new tn(qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,d=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ve.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(n))}getEntries(e,n){let r=_r();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Wn.newInvalidDocument(o))})),ve.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=_r();const d=n.path,p=new qe(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:x,value:{document:y}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||rR(aR(y),r)<=0||(o.has(y.key)||ff(n,y))&&(u=u.insert(y.key,y.mutableCopy()))}return ve.resolve(u)}getAllFromCollectionGroup(e,n,r,o){We(9500)}ni(e,n){return ve.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Mk(this)}getSize(e){return ve.resolve(this.size)}}class Mk extends Sk{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),ve.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class Ok{constructor(e){this.persistence=e,this.ri=new wl((n=>pg(n)),gg),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.ii=0,this.si=new _g,this.targetCount=0,this.oi=To._r()}forEachTarget(e,n){return this.ri.forEach(((r,o)=>n(o))),ve.resolve()}getLastRemoteSnapshotVersion(e){return ve.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ve.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ve.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),ve.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new To(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ve.resolve()}updateTargetData(e,n){return this.lr(n),ve.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ve.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ve.waitFor(u).next((()=>o))}getTargetCount(e){return ve.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return ve.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),ve.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ve.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ve.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return ve.resolve(r)}containsKey(e,n){return ve.resolve(this.si.containsKey(n))}}class o2{constructor(e,n){this._i={},this.overlays={},this.ai=new of(0),this.ui=!1,this.ui=!0,this.ci=new kk,this.referenceDelegate=e(this),this.li=new Ok(this),this.indexManager=new yk,this.remoteDocumentCache=(function(o){return new Dk(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new xk(n),this.Pi=new Ck(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new Ik(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Me("MemoryPersistence","Starting transaction:",e);const o=new Pk(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return ve.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class Pk extends lR{constructor(e){super(),this.currentSequenceNumber=e}}class Ng{constructor(e){this.persistence=e,this.Ri=new _g,this.Ai=null}static Vi(e){return new Ng(e)}get di(){if(this.Ai)return this.Ai;throw We(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),ve.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),ve.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ve.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ve.forEach(this.di,(r=>{const o=qe.fromPath(r);return this.mi(e,o).next((u=>{u||n.removeEntry(o,Qe.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return ve.or([()=>ve.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Gh{constructor(e,n){this.persistence=e,this.fi=new wl((r=>uR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=Ek(this,n)}static Vi(e,n){return new Gh(e,n)}Ti(){}Ii(e){return ve.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((o=>r+o))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return ve.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((u=>u?ve.resolve():n(o)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,n).next((p=>{p||(r++,u.removeEntry(d,Qe.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ve.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),ve.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),ve.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ve.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_h(e.data.value)),n}wr(e,n,r){return ve.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return ve.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class jg{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=o}static Es(e,n){let r=yt(),o=yt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new jg(e,n.fromCache,r,o)}}class Vk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Lk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return d5()?8:oR(Qn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.gs(e,n).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,n,o,r).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new Vk;return this.ys(e,n,d).next((p=>{if(u.result=p,this.As)return this.ws(e,n,d,p.size)}))})).next((()=>u.result))}ws(e,n,r,o){return r.documentReadCount<this.Vs?(co()<=xt.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ve.resolve()):(co()<=xt.DEBUG&&Me("QueryEngine","Query:",uo(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(co()<=xt.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,La(n))):ve.resolve())}gs(e,n){if(Mw(n))return ve.resolve(null);let r=La(n);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=_0(n,null,"F"),r=La(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const d=yt(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const x=this.bs(n,p);return this.Ss(n,x,d,g.readTime)?this.gs(e,_0(n,null,"F")):this.Ds(e,x,n,g)}))))})))))}ps(e,n,r,o){return Mw(n)||o.isEqual(Qe.min())?ve.resolve(null):this.fs.getDocuments(e,r).next((u=>{const d=this.bs(n,u);return this.Ss(n,d,r,o)?ve.resolve(null):(co()<=xt.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),uo(n)),this.Ds(e,d,n,sR(o,cu)).next((p=>p)))}))}bs(e,n){let r=new kn(UN(e));return n.forEach(((o,u)=>{ff(e,u)&&(r=r.add(u))})),r}Ss(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,r){return co()<=xt.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",uo(n)),this.fs.getDocumentsMatchingQuery(e,n,pi.min(),r)}Ds(e,n,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((u=>(n.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Eg="LocalStore",Uk=3e8;class Bk{constructor(e,n,r,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new tn(bt),this.Fs=new wl((u=>pg(u)),gg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ak(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function zk(s,e,n,r){return new Bk(s,e,n,r)}async function c2(s,e){const n=et(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const d=[],p=[];let g=yt();for(const x of o){d.push(x.batchId);for(const y of x.mutations)g=g.add(y.key)}for(const x of u){p.push(x.batchId);for(const y of x.mutations)g=g.add(y.key)}return n.localDocuments.getDocuments(r,g).next((x=>({Ns:x,removedBatchIds:d,addedBatchIds:p})))}))}))}function Fk(s,e){const n=et(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,x,y){const w=x.batch,N=w.keys();let T=ve.resolve();return N.forEach((L=>{T=T.next((()=>y.getEntry(g,L))).next((V=>{const M=x.docVersions.get(L);It(M!==null,48541),V.version.compareTo(M)<0&&(w.applyToRemoteDocument(V,x),V.isValidDocument()&&(V.setReadTime(x.commitVersion),y.addEntry(V)))}))})),T.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(n,r,e,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=yt();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(g=g.add(p.batch.mutations[x].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function u2(s){const e=et(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function qk(s,e){const n=et(s),r=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((y,w)=>{const N=o.get(w);if(!N)return;p.push(n.li.removeMatchingKeys(u,y.removedDocuments,w).next((()=>n.li.addMatchingKeys(u,y.addedDocuments,w))));let T=N.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?T=T.withResumeToken(qn.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):y.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(y.resumeToken,r)),o=o.insert(w,T),(function(V,M,U){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=Uk?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(N,T,y)&&p.push(n.li.updateTargetData(u,T))}));let g=_r(),x=yt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,y))})),p.push($k(u,d,e.documentUpdates).next((y=>{g=y.Bs,x=y.Ls}))),!r.isEqual(Qe.min())){const y=n.li.getLastRemoteSnapshotVersion(u).next((w=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(y)}return ve.waitFor(p).next((()=>d.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,x))).next((()=>g))})).then((u=>(n.vs=o,u)))}function $k(s,e,n){let r=yt(),o=yt();return n.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let d=_r();return n.forEach(((p,g)=>{const x=u.get(p);g.isFoundDocument()!==x.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Qe.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):Me(Eg,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function Hk(s,e){const n=et(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=hg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Gk(s,e){const n=et(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.li.getTargetData(r,e).next((u=>u?(o=u,ve.resolve(o)):n.li.allocateTargetId(r).next((d=>(o=new oi(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function T0(s,e,n){const r=et(s),o=r.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Lo(d))throw d;Me(Eg,`Failed to update sequence numbers for target ${e}: ${d}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function Yw(s,e,n){const r=et(s);let o=Qe.min(),u=yt();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,y){const w=et(g),N=w.Fs.get(y);return N!==void 0?ve.resolve(w.vs.get(N)):w.li.getTargetData(x,y)})(r,d,La(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(d,e,n?o:Qe.min(),n?u:yt()))).next((p=>(Yk(r,kR(e),p),{documents:p,ks:u})))))}function Yk(s,e,n){let r=s.Ms.get(e)||Qe.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Ms.set(e,r)}class Ww{constructor(){this.activeTargetIds=VR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wk{constructor(){this.vo=new Ww,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Ww,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Kk{Mo(e){}shutdown(){}}const Kw="ConnectivityMonitor";class Qw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Me(Kw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Me(Kw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let lh=null;function A0(){return lh===null?lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():lh++,"0x"+lh.toString(16)}const qp="RestConnection",Qk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Xk{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===Bh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,n,r,o,u){const d=A0(),p=this.Qo(e,n.toUriEncodedString());Me(qp,`Sending RPC '${e}' ${d}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:x}=new URL(p),y=Ni(x);return this.zo(e,p,g,r,y).then((w=>(Me(qp,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw No(qp,`RPC '${e}' ${d} failed with error: `,w,"url: ",p,"request:",r),w}))}jo(e,n,r,o,u,d){return this.Wo(e,n,r,o,u)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Po})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const r=Qk[e];let o=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class Jk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Gn="WebChannelConnection",Bc=(s,e,n)=>{s.listen(e,(r=>{try{n(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class vo extends Xk{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!vo.c_){const e=pN();Bc(e,mN.STAT_EVENT,(n=>{n.stat===p0.PROXY?Me(Gn,"STAT_EVENT: detected buffering proxy"):n.stat===p0.NOPROXY&&Me(Gn,"STAT_EVENT: detected no buffering proxy")})),vo.c_=!0}}zo(e,n,r,o,u){const d=A0();return new Promise(((p,g)=>{const x=new hN;x.setWithCredentials(!0),x.listenOnce(fN.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case wh.NO_ERROR:const w=x.getResponseJson();Me(Gn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),p(w);break;case wh.TIMEOUT:Me(Gn,`RPC '${e}' ${d} timed out`),g(new ke(be.DEADLINE_EXCEEDED,"Request time out"));break;case wh.HTTP_ERROR:const N=x.getStatus();if(Me(Gn,`RPC '${e}' ${d} failed with status:`,N,"response text:",x.getResponseText()),N>0){let T=x.getResponseJson();Array.isArray(T)&&(T=T[0]);const L=T?.error;if(L&&L.status&&L.message){const V=(function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(G)>=0?G:be.UNKNOWN})(L.status);g(new ke(V,L.message))}else g(new ke(be.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new ke(be.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Me(Gn,`RPC '${e}' ${d} completed.`)}}));const y=JSON.stringify(o);Me(Gn,`RPC '${e}' ${d} sending request:`,o),x.send(n,"POST",y,r,15)}))}T_(e,n,r){const o=A0(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const x=u.join("");Me(Gn,`Creating RPC '${e}' stream ${o}: ${x}`,p);const y=d.createWebChannel(x,p);this.I_(y);let w=!1,N=!1;const T=new Jk({Ho:L=>{N?Me(Gn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(w||(Me(Gn,`Opening RPC '${e}' stream ${o} transport.`),y.open(),w=!0),Me(Gn,`RPC '${e}' stream ${o} sending:`,L),y.send(L))},Jo:()=>y.close()});return Bc(y,Yc.EventType.OPEN,(()=>{N||(Me(Gn,`RPC '${e}' stream ${o} transport opened.`),T.i_())})),Bc(y,Yc.EventType.CLOSE,(()=>{N||(N=!0,Me(Gn,`RPC '${e}' stream ${o} transport closed`),T.o_(),this.E_(y))})),Bc(y,Yc.EventType.ERROR,(L=>{N||(N=!0,No(Gn,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),T.o_(new ke(be.UNAVAILABLE,"The operation could not be completed")))})),Bc(y,Yc.EventType.MESSAGE,(L=>{if(!N){const V=L.data[0];It(!!V,16349);const M=V,U=M?.error||M[0]?.error;if(U){Me(Gn,`RPC '${e}' stream ${o} received error:`,U);const G=U.status;let q=(function(W){const E=Sn[W];if(E!==void 0)return QN(E)})(G),ie=U.message;q===void 0&&(q=be.INTERNAL,ie="Unknown error status: "+G+" with message "+U.message),N=!0,T.o_(new ke(q,ie)),y.close()}else Me(Gn,`RPC '${e}' stream ${o} received:`,V),T.__(V)}})),vo.u_(),setTimeout((()=>{T.s_()}),0),T}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return gN()}}function Zk(s){return new vo(s)}function $p(){return typeof document<"u"?document:null}function xf(s){return new sk(s,!0)}vo.c_=!1;class d2{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&Me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Xw="PersistentStream";class h2{constructor(e,n,r,o,u,d,p,g){this.Ci=e,this.b_=r,this.S_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new d2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===be.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{e((()=>{const o=new ke(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Me(Xw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Me(Xw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class e6 extends h2{constructor(e,n,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,d),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ik(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Qe.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Qe.min():d.readTime?Ua(d.readTime):Qe.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=S0(this.serializer),n.addTarget=(function(u,d){let p;const g=d.target;if(p=v0(g)?{documents:ck(u,g)}:{query:uk(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=ZN(u,d.resumeToken);const x=N0(u,d.expectedCount);x!==null&&(p.expectedCount=x)}else if(d.snapshotVersion.compareTo(Qe.min())>0){p.readTime=Hh(u,d.snapshotVersion.toTimestamp());const x=N0(u,d.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,e);const r=hk(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=S0(this.serializer),n.removeTarget=e,this.K_(n)}}class t6 extends h2{constructor(e,n,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ok(e.writeResults,e.commitTime),r=Ua(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=S0(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>lk(this.serializer,r)))};this.K_(n)}}class n6{}class s6 extends n6{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ke(be.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,j0(n,r),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ke(be.UNKNOWN,u.toString())}))}jo(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,j0(n,r),o,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ke(be.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function a6(s,e,n,r){return new s6(s,e,n,r)}class r6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(wr(n),this.aa=!1):Me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const fl="RemoteStore";class i6{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{r.enqueueAndForget((async()=>{_l(this)&&(Me(fl,"Restarting streams for network reachability change."),await(async function(g){const x=et(g);x.Ea.add(4),await Ru(x),x.Va.set("Unknown"),x.Ea.delete(4),await bf(x)})(this))}))})),this.Va=new r6(r,o)}}async function bf(s){if(_l(s))for(const e of s.Ra)await e(!0)}async function Ru(s){for(const e of s.Ra)await e(!1)}function f2(s,e){const n=et(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Cg(n)?Ag(n):Uo(n).O_()&&Tg(n,e))}function Sg(s,e){const n=et(s),r=Uo(n);n.Ia.delete(e),r.O_()&&m2(n,e),n.Ia.size===0&&(r.O_()?r.L_():_l(n)&&n.Va.set("Unknown"))}function Tg(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uo(s).Z_(e)}function m2(s,e){s.da.$e(e),Uo(s).X_(e)}function Ag(s){s.da=new ZR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Uo(s).start(),s.Va.ua()}function Cg(s){return _l(s)&&!Uo(s).x_()&&s.Ia.size>0}function _l(s){return et(s).Ea.size===0}function p2(s){s.da=void 0}async function l6(s){s.Va.set("Online")}async function o6(s){s.Ia.forEach(((e,n)=>{Tg(s,e)}))}async function c6(s,e){p2(s),Cg(s)?(s.Va.ha(e),Ag(s)):s.Va.set("Unknown")}async function u6(s,e,n){if(s.Va.set("Online"),e instanceof JN&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.da.removeTarget(p))})(s,e)}catch(r){Me(fl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yh(s,r)}else if(e instanceof Eh?s.da.Xe(e):e instanceof XN?s.da.st(e):s.da.tt(e),!n.isEqual(Qe.min()))try{const r=await u2(s.localStore);n.compareTo(r)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const y=u.Ia.get(x);y&&u.Ia.set(x,y.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,x)=>{const y=u.Ia.get(g);if(!y)return;u.Ia.set(g,y.withResumeToken(qn.EMPTY_BYTE_STRING,y.snapshotVersion)),m2(u,g);const w=new oi(y.target,g,x,y.sequenceNumber);Tg(u,w)})),u.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){Me(fl,"Failed to raise snapshot:",r),await Yh(s,r)}}async function Yh(s,e,n){if(!Lo(e))throw e;s.Ea.add(1),await Ru(s),s.Va.set("Offline"),n||(n=()=>u2(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Me(fl,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await bf(s)}))}function g2(s,e){return e().catch((n=>Yh(s,n,e)))}async function yf(s){const e=et(s),n=yi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;d6(e);)try{const o=await Hk(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,h6(e,o)}catch(o){await Yh(e,o)}x2(e)&&b2(e)}function d6(s){return _l(s)&&s.Ta.length<10}function h6(s,e){s.Ta.push(e);const n=yi(s);n.O_()&&n.Y_&&n.ea(e.mutations)}function x2(s){return _l(s)&&!yi(s).x_()&&s.Ta.length>0}function b2(s){yi(s).start()}async function f6(s){yi(s).ra()}async function m6(s){const e=yi(s);for(const n of s.Ta)e.ea(n.mutations)}async function p6(s,e,n){const r=s.Ta.shift(),o=yg.from(r,e,n);await g2(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await yf(s)}async function g6(s,e){e&&yi(s).Y_&&await(async function(r,o){if((function(d){return QR(d)&&d!==be.ABORTED})(o.code)){const u=r.Ta.shift();yi(r).B_(),await g2(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await yf(r)}})(s,e),x2(s)&&b2(s)}async function Jw(s,e){const n=et(s);n.asyncQueue.verifyOperationInProgress(),Me(fl,"RemoteStore received new credentials");const r=_l(n);n.Ea.add(3),await Ru(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await bf(n)}async function x6(s,e){const n=et(s);e?(n.Ea.delete(2),await bf(n)):e||(n.Ea.add(2),await Ru(n),n.Va.set("Unknown"))}function Uo(s){return s.ma||(s.ma=(function(n,r,o){const u=et(n);return u.sa(),new e6(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:l6.bind(null,s),Yo:o6.bind(null,s),t_:c6.bind(null,s),J_:u6.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Cg(s)?Ag(s):s.Va.set("Unknown")):(await s.ma.stop(),p2(s))}))),s.ma}function yi(s){return s.fa||(s.fa=(function(n,r,o){const u=et(n);return u.sa(),new t6(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:f6.bind(null,s),t_:g6.bind(null,s),ta:m6.bind(null,s),na:p6.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await yf(s)):(await s.fa.stop(),s.Ta.length>0&&(Me(fl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Rg{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const d=Date.now()+r,p=new Rg(e,n,d,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kg(s,e){if(wr("AsyncQueue",`${e}: ${s}`),Lo(s))return new ke(be.UNAVAILABLE,`${e}: ${s}`);throw s}class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||qe.comparator(n.key,r.key):(n,r)=>qe.comparator(n.key,r.key),this.keyedMap=Wc(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class Zw{constructor(){this.ga=new tn(qe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):We(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ao{constructor(e,n,r,o,u,d,p,g,x){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,n,r,o,u){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new Ao(e,n,wo.emptySet(n),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}class b6{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class y6{constructor(){this.queries=e1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=et(n),u=o.queries;o.queries=e1(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(r)}))})(this,new ke(be.ABORTED,"Firestore shutting down"))}}function e1(){return new wl((s=>LN(s)),hf)}async function Ig(s,e){const n=et(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(r=2):(u=new b6,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const p=kg(d,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Mg(n)}async function Dg(s,e){const n=et(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function v6(s,e){const n=et(s);let r=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const p of d.ba)p.Fa(o)&&(r=!0);d.wa=o}}r&&Mg(n)}function w6(s,e,n){const r=et(s),o=r.queries.get(e);if(o)for(const u of o.ba)u.onError(n);r.queries.delete(e)}function Mg(s){s.Ca.forEach((e=>{e.next()}))}var C0,t1;(t1=C0||(C0={})).Ma="default",t1.Cache="cache";class Og{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==C0.Cache}}class y2{constructor(e){this.key=e}}class v2{constructor(e){this.key=e}}class _6{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=yt(),this.mutatedKeys=yt(),this.eu=UN(e),this.tu=new wo(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Zw,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,x=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((y,w)=>{const N=o.get(y),T=ff(this.query,w)?w:null,L=!!N&&this.mutatedKeys.has(N.key),V=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let M=!1;N&&T?N.data.isEqual(T.data)?L!==V&&(r.track({type:3,doc:T}),M=!0):this.su(N,T)||(r.track({type:2,doc:T}),M=!0,(g&&this.eu(T,g)>0||x&&this.eu(T,x)<0)&&(p=!0)):!N&&T?(r.track({type:0,doc:T}),M=!0):N&&!T&&(r.track({type:1,doc:N}),M=!0,(g||x)&&(p=!0)),M&&(T?(d=d.add(T),u=V?u.add(y):u.delete(y)):(d=d.delete(y),u=u.delete(y)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const y=this.query.limitType==="F"?d.last():d.first();d=d.delete(y.key),u=u.delete(y.key),r.track({type:1,doc:y})}return{tu:d,iu:r,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((y,w)=>(function(T,L){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Vt:M})}};return V(T)-V(L)})(y.type,w.type)||this.eu(y.doc,w.doc))),this.ou(r),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,x=g!==this.Xa;return this.Xa=g,d.length!==0||x?{snapshot:new Ao(this.query,e.tu,u,d,e.mutatedKeys,g===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=yt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new v2(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new y2(r))})),n}cu(e){this.Za=e.ks,this.Ya=yt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Pg="SyncEngine";class N6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class j6{constructor(e){this.key=e,this.hu=!1}}class E6{constructor(e,n,r,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new wl((p=>LN(p)),hf),this.Iu=new Map,this.Eu=new Set,this.Ru=new tn(qe.comparator),this.Au=new Map,this.Vu=new _g,this.du={},this.mu=new Map,this.fu=To.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S6(s,e,n=!0){const r=S2(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await w2(r,e,n,!0),o}async function T6(s,e){const n=S2(s);await w2(n,e,!0,!1)}async function w2(s,e,n,r){const o=await Gk(s.localStore,La(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,n);let p;return r&&(p=await A6(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&n&&f2(s.remoteStore,o),p}async function A6(s,e,n,r,o){s.pu=(w,N,T)=>(async function(V,M,U,G){let q=M.view.ru(U);q.Ss&&(q=await Yw(V.localStore,M.query,!1).then((({documents:E})=>M.view.ru(E,q))));const ie=G&&G.targetChanges.get(M.targetId),ue=G&&G.targetMismatches.get(M.targetId)!=null,W=M.view.applyChanges(q,V.isPrimaryClient,ie,ue);return s1(V,M.targetId,W.au),W.snapshot})(s,w,N,T);const u=await Yw(s.localStore,e,!0),d=new _6(e,u.ks),p=d.ru(u.documents),g=Cu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),x=d.applyChanges(p,s.isPrimaryClient,g);s1(s,n,x.au);const y=new N6(e,n,d);return s.Tu.set(e,y),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),x.snapshot}async function C6(s,e,n){const r=et(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((d=>!hf(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await T0(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Sg(r.remoteStore,o.targetId),R0(r,o.targetId)})).catch(Vo)):(R0(r,o.targetId),await T0(r.localStore,o.targetId,!0))}async function R6(s,e){const n=et(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sg(n.remoteStore,r.targetId))}async function k6(s,e,n){const r=L6(s);try{const o=await(function(d,p){const g=et(d),x=kt.now(),y=p.reduce(((T,L)=>T.add(L.key)),yt());let w,N;return g.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let L=_r(),V=yt();return g.xs.getEntries(T,y).next((M=>{L=M,L.forEach(((U,G)=>{G.isValidDocument()||(V=V.add(U))}))})).next((()=>g.localDocuments.getOverlayedDocuments(T,L))).next((M=>{w=M;const U=[];for(const G of p){const q=HR(G,w.get(G.key).overlayedDocument);q!=null&&U.push(new Ti(G.key,q,RN(q.value.mapValue),Xs.exists(!0)))}return g.mutationQueue.addMutationBatch(T,x,U,p)})).next((M=>{N=M;const U=M.applyToLocalDocumentSet(w,V);return g.documentOverlayCache.saveOverlays(T,M.batchId,U)}))})).then((()=>({batchId:N.batchId,changes:zN(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let x=d.du[d.currentUser.toKey()];x||(x=new tn(bt)),x=x.insert(p,g),d.du[d.currentUser.toKey()]=x})(r,o.batchId,n),await ku(r,o.changes),await yf(r.remoteStore)}catch(o){const u=kg(o,"Failed to persist write");n.reject(u)}}async function _2(s,e){const n=et(s);try{const r=await qk(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=n.Au.get(u);d&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?It(d.hu,14607):o.removedDocuments.size>0&&(It(d.hu,42227),d.hu=!1))})),await ku(n,r,e)}catch(r){await Vo(r)}}function n1(s,e,n){const r=et(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=et(d);g.onlineState=p;let x=!1;g.queries.forEach(((y,w)=>{for(const N of w.ba)N.va(p)&&(x=!0)})),x&&Mg(g)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function I6(s,e,n){const r=et(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let d=new tn(qe.comparator);d=d.insert(u,Wn.newNoDocument(u,Qe.min()));const p=yt().add(u),g=new gf(Qe.min(),new Map,new tn(bt),d,p);await _2(r,g),r.Ru=r.Ru.remove(u),r.Au.delete(e),Vg(r)}else await T0(r.localStore,e,!1).then((()=>R0(r,e,n))).catch(Vo)}async function D6(s,e){const n=et(s),r=e.batch.batchId;try{const o=await Fk(n.localStore,e);j2(n,r,null),N2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ku(n,o)}catch(o){await Vo(o)}}async function M6(s,e,n){const r=et(s);try{const o=await(function(d,p){const g=et(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let y;return g.mutationQueue.lookupMutationBatch(x,p).next((w=>(It(w!==null,37113),y=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,y,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,y))).next((()=>g.localDocuments.getDocuments(x,y)))}))})(r.localStore,e);j2(r,e,n),N2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ku(r,o)}catch(o){await Vo(o)}}function N2(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function j2(s,e,n){const r=et(s);let o=r.du[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function R0(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||E2(s,r)}))}function E2(s,e){s.Eu.delete(e.path.canonicalString());const n=s.Ru.get(e);n!==null&&(Sg(s.remoteStore,n),s.Ru=s.Ru.remove(e),s.Au.delete(n),Vg(s))}function s1(s,e,n){for(const r of n)r instanceof y2?(s.Vu.addReference(r.key,e),O6(s,r)):r instanceof v2?(Me(Pg,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||E2(s,r.key)):We(19791,{wu:r})}function O6(s,e){const n=e.key,r=n.path.canonicalString();s.Ru.get(n)||s.Eu.has(r)||(Me(Pg,"New document in limbo: "+n),s.Eu.add(r),Vg(s))}function Vg(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new qe(Gt.fromString(e)),r=s.fu.next();s.Au.set(r,new j6(n)),s.Ru=s.Ru.insert(n,r),f2(s.remoteStore,new oi(La(df(n.path)),r,"TargetPurposeLimboResolution",of.ce))}}async function ku(s,e,n){const r=et(s),o=[],u=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{d.push(r.pu(g,e,n).then((x=>{if((x||n)&&r.isPrimaryClient){const y=x?!x.fromCache:n?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,y?"current":"not-current")}if(x){o.push(x);const y=jg.Es(g.targetId,x);u.push(y)}})))})),await Promise.all(d),r.Pu.J_(o),await(async function(g,x){const y=et(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ve.forEach(x,(N=>ve.forEach(N.Ts,(T=>y.persistence.referenceDelegate.addReference(w,N.targetId,T))).next((()=>ve.forEach(N.Is,(T=>y.persistence.referenceDelegate.removeReference(w,N.targetId,T)))))))))}catch(w){if(!Lo(w))throw w;Me(Eg,"Failed to update sequence numbers: "+w)}for(const w of x){const N=w.targetId;if(!w.fromCache){const T=y.vs.get(N),L=T.snapshotVersion,V=T.withLastLimboFreeSnapshotVersion(L);y.vs=y.vs.insert(N,V)}}})(r.localStore,u))}async function P6(s,e){const n=et(s);if(!n.currentUser.isEqual(e)){Me(Pg,"User change. New user:",e.toKey());const r=await c2(n.localStore,e);n.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new ke(be.CANCELLED,d))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ku(n,r.Ns)}}function V6(s,e){const n=et(s),r=n.Au.get(e);if(r&&r.hu)return yt().add(r.key);{let o=yt();const u=n.Iu.get(e);if(!u)return o;for(const d of u){const p=n.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function S2(s){const e=et(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=_2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I6.bind(null,e),e.Pu.J_=v6.bind(null,e.eventManager),e.Pu.yu=w6.bind(null,e.eventManager),e}function L6(s){const e=et(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M6.bind(null,e),e}class Wh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return zk(this.persistence,new Lk,e.initialUser,this.serializer)}Cu(e){return new o2(Ng.Vi,this.serializer)}Du(e){return new Wk}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wh.provider={build:()=>new Wh};class U6 extends Wh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){It(this.persistence.referenceDelegate instanceof Gh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Nk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ds.withCacheSize(this.cacheSizeBytes):ds.DEFAULT;return new o2((r=>Gh.Vi(r,n)),this.serializer)}}class k0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>n1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=P6.bind(null,this.syncEngine),await x6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new y6})()}createDatastore(e){const n=xf(e.databaseInfo.databaseId),r=Zk(e.databaseInfo);return a6(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,o,u,d,p){return new i6(r,o,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>n1(this.syncEngine,n,0)),(function(){return Qw.v()?new Qw:new Kk})())}createSyncEngine(e,n){return(function(o,u,d,p,g,x,y){const w=new E6(o,u,d,p,g,x);return y&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=et(n);Me(fl,"RemoteStore shutting down."),r.Ea.add(5),await Ru(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}k0.provider={build:()=>new k0};class Lg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const vi="FirestoreClient";class B6{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=o,this.user=Yn.UNAUTHENTICATED,this.clientId=dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async d=>{Me(vi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(Me(vi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Hp(s,e){s.asyncQueue.verifyOperationInProgress(),Me(vi,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await c2(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function a1(s,e){s.asyncQueue.verifyOperationInProgress();const n=await z6(s);Me(vi,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>Jw(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>Jw(e.remoteStore,o))),s._onlineComponents=e}async function z6(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Me(vi,"Using user provided OfflineComponentProvider");try{await Hp(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===be.FAILED_PRECONDITION||o.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await Hp(s,new Wh)}}else Me(vi,"Using default OfflineComponentProvider"),await Hp(s,new U6(void 0));return s._offlineComponents}async function T2(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Me(vi,"Using user provided OnlineComponentProvider"),await a1(s,s._uninitializedComponentsProvider._online)):(Me(vi,"Using default OnlineComponentProvider"),await a1(s,new k0))),s._onlineComponents}function F6(s){return T2(s).then((e=>e.syncEngine))}async function Kh(s){const e=await T2(s),n=e.eventManager;return n.onListen=S6.bind(null,e.syncEngine),n.onUnlisten=C6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=T6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=R6.bind(null,e.syncEngine),n}function q6(s,e,n,r){const o=new Lg(r),u=new Og(e,o,n);return s.asyncQueue.enqueueAndForget((async()=>Ig(await Kh(s),u))),()=>{o.Nu(),s.asyncQueue.enqueueAndForget((async()=>Dg(await Kh(s),u)))}}function $6(s,e,n={}){const r=new pr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,x){const y=new Lg({next:N=>{y.Nu(),d.enqueueAndForget((()=>Dg(u,w)));const T=N.docs.has(p);!T&&N.fromCache?x.reject(new ke(be.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&N.fromCache&&g&&g.source==="server"?x.reject(new ke(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new Og(df(p.path),y,{includeMetadataChanges:!0,Ka:!0});return Ig(u,w)})(await Kh(s),s.asyncQueue,e,n,r))),r.promise}function H6(s,e,n={}){const r=new pr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,x){const y=new Lg({next:N=>{y.Nu(),d.enqueueAndForget((()=>Dg(u,w))),N.fromCache&&g.source==="server"?x.reject(new ke(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(N)},error:N=>x.reject(N)}),w=new Og(p,y,{includeMetadataChanges:!0,Ka:!0});return Ig(u,w)})(await Kh(s),s.asyncQueue,e,n,r))),r.promise}function G6(s,e){const n=new pr;return s.asyncQueue.enqueueAndForget((async()=>k6(await F6(s),e,n))),n.promise}function A2(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const Y6="ComponentProvider",r1=new Map;function W6(s,e,n,r,o){return new fR(s,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,A2(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}const C2="firestore.googleapis.com",i1=!0;class l1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ke(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C2,this.ssl=i1}else this.host=e.host,this.ssl=e.ssl??i1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=l2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wk)throw new ke(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=A2(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ke(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ke(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ke(be.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vf{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new G4;switch(r.type){case"firstParty":return new Q4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=r1.get(n);r&&(Me(Y6,"Removing Datastore"),r1.delete(n),r.terminate())})(this),Promise.resolve()}}function K6(s,e,n,r={}){s=ps(s,vf);const o=Ni(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;o&&(X0(`https://${p}`),J0("Firestore",!0)),u.host!==C2&&u.host!==p&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:r};if(!ol(g,d)&&(s._setSettings(g),r.mockUserToken)){let x,y;if(typeof r.mockUserToken=="string")x=r.mockUserToken,y=Yn.MOCK_USER;else{x=j_(r.mockUserToken,s._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ke(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Yn(w)}s._authCredentials=new Y4(new bN(x,y))}}class Nl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nl(this.firestore,e,this._query)}}class on{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Su(n,on._jsonSchema))return new on(e,r||null,new qe(Gt.fromString(n.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:An("string",on._jsonSchemaVersion),referencePath:An("string")};class hi extends Nl{constructor(e,n,r){super(e,n,df(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new qe(e))}withConverter(e){return new hi(this.firestore,e,this._path)}}function Je(s,e,...n){if(s=en(s),yN("collection","path",e),s instanceof vf){const r=Gt.fromString(e,...n);return vw(r),new hi(s,null,r)}{if(!(s instanceof on||s instanceof hi))throw new ke(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Gt.fromString(e,...n));return vw(r),new hi(s.firestore,null,r)}}function Ge(s,e,...n){if(s=en(s),arguments.length===1&&(e=dg.newId()),yN("doc","path",e),s instanceof vf){const r=Gt.fromString(e,...n);return yw(r),new on(s,null,new qe(r))}{if(!(s instanceof on||s instanceof hi))throw new ke(be.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Gt.fromString(e,...n));return yw(r),new on(s.firestore,s instanceof hi?s.converter:null,new qe(r))}}const o1="AsyncQueue";class c1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new d2(this,"async_queue_retry"),this._c=()=>{const r=$p();r&&Me(o1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=$p();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$p();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Lo(e))throw e;Me(o1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,wr("INTERNAL UNHANDLED ERROR: ",u1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Rg.createAndSchedule(this,e,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&We(47125,{Pc:u1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function u1(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Nr extends vf{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new c1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c1(e),this._firestoreClient=void 0,await e}}}function Q6(s,e){const n=typeof s=="object"?s:tg(),r=typeof s=="string"?s:Bh,o=nf(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=w_("firestore");u&&K6(o,...u)}return o}function wf(s){if(s._terminated)throw new ke(be.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||X6(s),s._firestoreClient}function X6(s){const e=s._freezeSettings(),n=W6(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new B6(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(qn.fromBase64String(e))}catch(n){throw new ke(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ks(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ks._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,Ks._jsonSchema))return Ks.fromBase64String(e.bytes)}}Ks._jsonSchemaVersion="firestore/bytes/1.0",Ks._jsonSchema={type:An("string",Ks._jsonSchemaVersion),bytes:An("string")};class Ug{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ke(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _f{constructor(e){this._methodName=e}}class Ba{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ke(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ke(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ba._jsonSchemaVersion}}static fromJSON(e){if(Su(e,Ba._jsonSchema))return new Ba(e.latitude,e.longitude)}}Ba._jsonSchemaVersion="firestore/geoPoint/1.0",Ba._jsonSchema={type:An("string",Ba._jsonSchemaVersion),latitude:An("number"),longitude:An("number")};class da{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:da._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,da._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new da(e.vectorValues);throw new ke(be.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}da._jsonSchemaVersion="firestore/vectorValue/1.0",da._jsonSchema={type:An("string",da._jsonSchemaVersion),vectorValues:An("object")};const J6=/^__.*__$/;class Z6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new Au(e,this.data,n,this.fieldTransforms)}}class R2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function k2(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{dataSource:s})}}class Bg{constructor(e,n,r,o,u,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const n=this.path?.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Qh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(k2(this.dataSource)&&J6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class eI{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xf(e)}createContext(e,n,r,o=!1){return new Bg({dataSource:e,methodName:n,targetDoc:r,path:Fn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nf(s){const e=s._freezeSettings(),n=xf(s._databaseId);return new eI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function I2(s,e,n,r,o,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,n,o);Fg("Data must be an object, but it was:",d,r);const p=D2(r,d);let g,x;if(u.merge)g=new ks(d.fieldMask),x=d.fieldTransforms;else if(u.mergeFields){const y=[];for(const w of u.mergeFields){const N=Co(e,w,n);if(!d.contains(N))throw new ke(be.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);P2(y,N)||y.push(N)}g=new ks(y),x=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=d.fieldTransforms;return new Z6(new hs(p),g,x)}class jf extends _f{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}class zg extends _f{_toFieldTransform(e){return new zR(e.path,new fu)}isEqual(e){return e instanceof zg}}function tI(s,e,n,r){const o=s.createContext(1,e,n);Fg("Data must be an object, but it was:",o,r);const u=[],d=hs.empty();Si(r,((g,x)=>{const y=O2(e,g,n);x=en(x);const w=o.childContextForFieldPath(y);if(x instanceof jf)u.push(y);else{const N=Iu(x,w);N!=null&&(u.push(y),d.set(y,N))}}));const p=new ks(u);return new R2(d,p,o.fieldTransforms)}function nI(s,e,n,r,o,u){const d=s.createContext(1,e,n),p=[Co(e,r,n)],g=[o];if(u.length%2!=0)throw new ke(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<u.length;N+=2)p.push(Co(e,u[N])),g.push(u[N+1]);const x=[],y=hs.empty();for(let N=p.length-1;N>=0;--N)if(!P2(x,p[N])){const T=p[N];let L=g[N];L=en(L);const V=d.childContextForFieldPath(T);if(L instanceof jf)x.push(T);else{const M=Iu(L,V);M!=null&&(x.push(T),y.set(T,M))}}const w=new ks(x);return new R2(y,w,d.fieldTransforms)}function sI(s,e,n,r=!1){return Iu(n,s.createContext(r?4:3,e))}function Iu(s,e){if(M2(s=en(s)))return Fg("Unsupported field value:",e,s),D2(s,e);if(s instanceof _f)return(function(r,o){if(!k2(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const u=[];let d=0;for(const p of r){let g=Iu(p,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=kt.fromDate(r);return{timestampValue:Hh(o.serializer,u)}}if(r instanceof kt){const u=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hh(o.serializer,u)}}if(r instanceof Ba)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ks)return{bytesValue:ZN(o.serializer,r._byteString)};if(r instanceof on){const u=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(u))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:wg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof da)return(function(d,p){const g=d instanceof da?d.toArray():d;return{mapValue:{fields:{[AN]:{stringValue:CN},[zh]:{arrayValue:{values:g.map((y=>{if(typeof y!="number")throw p.createError("VectorValues must only contain numeric values.");return xg(p.serializer,y)}))}}}}}})(r,o);if(i2(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${lf(r)}`)})(s,e)}function D2(s,e){const n={};return _N(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Si(s,((r,o)=>{const u=Iu(o,e.childContextForField(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function M2(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof kt||s instanceof Ba||s instanceof Ks||s instanceof on||s instanceof _f||s instanceof da||i2(s))}function Fg(s,e,n){if(!M2(n)||!vN(n)){const r=lf(n);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function Co(s,e,n){if((e=en(e))instanceof Ug)return e._internalPath;if(typeof e=="string")return O2(s,e);throw Qh("Field path arguments must be of type string or ",s,!1,void 0,n)}const aI=new RegExp("[~\\*/\\[\\]]");function O2(s,e,n){if(e.search(aI)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Ug(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Qh(s,e,n,r,o){const u=r&&!r.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${r}`),d&&(g+=` in document ${o}`),g+=")"),new ke(be.INVALID_ARGUMENT,p+s+g)}function P2(s,e){return s.some((n=>n.isEqual(e)))}class rI{convertValue(e,n="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Si(e,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(e){const n=e.fields?.[zh].arrayValue?.values?.map((r=>gn(r.doubleValue)));return new da(n)}convertGeoPoint(e){return new Ba(gn(e.latitude),gn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=uf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const n=gi(e);return new kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Gt.fromString(e);It(r2(r),9688,{name:e});const o=new du(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return o.isEqual(n)||wr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class qg extends rI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}function $g(){return new zg("serverTimestamp")}const d1="@firebase/firestore",h1="4.10.0";function f1(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class V2{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Co("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iI extends V2{data(){return super.data()}}function L2(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ke(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hg{}class lI extends Hg{}function Ds(s,e,...n){let r=[];e instanceof Hg&&r.push(e),r=r.concat(n),(function(u){const d=u.filter((g=>g instanceof Gg)).length,p=u.filter((g=>g instanceof Ef)).length;if(d>1||d>0&&p>0)throw new ke(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Ef extends lI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ef(e,n,r)}_apply(e){const n=this._parse(e);return U2(e._query,n),new Nl(e.firestore,e.converter,w0(e._query,n))}_parse(e){const n=Nf(e.firestore);return(function(u,d,p,g,x,y,w){let N;if(x.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ke(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){p1(w,y);const L=[];for(const V of w)L.push(m1(g,u,V));N={arrayValue:{values:L}}}else N=m1(g,u,w)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||p1(w,y),N=sI(p,d,w,y==="in"||y==="not-in");return Tn.create(x,y,N)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ms(s,e,n){const r=e,o=Co("where",s);return Ef._create(o,r,n)}class Gg extends Hg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gg(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:ma.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let d=o;const p=u.getFlattenedFilters();for(const g of p)U2(d,g),d=w0(d,g)})(e._query,n),new Nl(e.firestore,e.converter,w0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function m1(s,e,n){if(typeof(n=en(n))=="string"){if(n==="")throw new ke(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VN(e)&&n.indexOf("/")!==-1)throw new ke(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Gt.fromString(n));if(!qe.isDocumentKey(r))throw new ke(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Aw(s,new qe(r))}if(n instanceof on)return Aw(s,n._key);throw new ke(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lf(n)}.`)}function p1(s,e){if(!Array.isArray(s)||s.length===0)throw new ke(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U2(s,e){const n=(function(o,u){for(const d of o)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ke(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function B2(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class Qc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rl extends V2{constructor(e,n,r,o,u,d){super(e,n,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Sh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Co("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(be.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=rl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}rl._jsonSchemaVersion="firestore/documentSnapshot/1.0",rl._jsonSchema={type:An("string",rl._jsonSchemaVersion),bundleSource:An("string","DocumentSnapshot"),bundleName:An("string"),bundle:An("string")};class Sh extends rl{data(e={}){return super.data(e)}}class il{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Qc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Sh(this._firestore,this._userDataWriter,r.key,r,new Qc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ke(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new Sh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Qc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new Sh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Qc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let x=-1,y=-1;return p.type!==0&&(x=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),y=d.indexOf(p.doc.key)),{type:oI(p.type),doc:g,oldIndex:x,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(be.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:s})}}il._jsonSchemaVersion="firestore/querySnapshot/1.0",il._jsonSchema={type:An("string",il._jsonSchemaVersion),bundleSource:An("string","QuerySnapshot"),bundleName:An("string"),bundle:An("string")};function Gp(s){s=ps(s,on);const e=ps(s.firestore,Nr),n=wf(e);return $6(n,s._key).then((r=>z2(e,s,r)))}function Ms(s){s=ps(s,Nl);const e=ps(s.firestore,Nr),n=wf(e),r=new qg(e);return L2(s._query),H6(n,s._query).then((o=>new il(e,r,s,o)))}function Yp(s,e,n){s=ps(s,on);const r=ps(s.firestore,Nr),o=B2(s.converter,e),u=Nf(r);return Sf(r,[I2(u,"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Xs.none())])}function it(s,e,n,...r){s=ps(s,on);const o=ps(s.firestore,Nr),u=Nf(o);let d;return d=typeof(e=en(e))=="string"||e instanceof Ug?nI(u,"updateDoc",s._key,e,n,r):tI(u,"updateDoc",s._key,e),Sf(o,[d.toMutation(s._key,Xs.exists(!0))])}function cI(s){return Sf(ps(s.firestore,Nr),[new bg(s._key,Xs.none())])}function jr(s,e){const n=ps(s.firestore,Nr),r=Ge(s),o=B2(s.converter,e),u=Nf(s.firestore);return Sf(n,[I2(u,"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Xs.exists(!1))]).then((()=>r))}function Jt(s,...e){s=en(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||f1(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(f1(e[r])){const x=e[r];e[r]=x.next?.bind(x),e[r+1]=x.error?.bind(x),e[r+2]=x.complete?.bind(x)}let u,d,p;if(s instanceof on)d=ps(s.firestore,Nr),p=df(s._key.path),u={next:x=>{e[r]&&e[r](z2(d,s,x))},error:e[r+1],complete:e[r+2]};else{const x=ps(s,Nl);d=ps(x.firestore,Nr),p=x._query;const y=new qg(d);u={next:w=>{e[r]&&e[r](new il(d,y,x,w))},error:e[r+1],complete:e[r+2]},L2(s._query)}const g=wf(d);return q6(g,p,o,u)}function Sf(s,e){const n=wf(s);return G6(n,e)}function z2(s,e,n){const r=n.docs.get(e._key),o=new qg(s);return new rl(s,o,e._key,r,new Qc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){H4(yl),cl(new mi("firestore",((r,{instanceIdentifier:o,options:u})=>{const d=r.getProvider("app").getImmediate(),p=new Nr(new W4(r.getProvider("auth-internal")),new X4(d,r.getProvider("app-check-internal")),mR(d,o),d);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Oa(d1,h1,e),Oa(d1,h1,"esm2020")})();const F2="firebasestorage.googleapis.com",q2="storageBucket",uI=120*1e3,dI=600*1e3;class dn extends qa{constructor(e,n,r=0){super(Wp(e),`Firebase Storage: ${n} (${Wp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var un;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(un||(un={}));function Wp(s){return"storage/"+s}function Yg(){const s="An unknown error occurred, please check the error payload for server response.";return new dn(un.UNKNOWN,s)}function hI(s){return new dn(un.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function fI(s){return new dn(un.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function mI(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dn(un.UNAUTHENTICATED,s)}function pI(){return new dn(un.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gI(s){return new dn(un.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function xI(){return new dn(un.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bI(){return new dn(un.CANCELED,"User canceled the upload/download.")}function yI(s){return new dn(un.INVALID_URL,"Invalid URL '"+s+"'.")}function vI(s){return new dn(un.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function wI(){return new dn(un.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+q2+"' property when initializing the app?")}function _I(){return new dn(un.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NI(){return new dn(un.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jI(s){return new dn(un.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function I0(s){return new dn(un.INVALID_ARGUMENT,s)}function $2(){return new dn(un.APP_DELETED,"The Firebase app was deleted.")}function EI(s){return new dn(un.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function au(s,e){return new dn(un.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function zc(s){throw new dn(un.INTERNAL_ERROR,"Internal error: "+s)}class Is{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Is.makeFromUrl(e,n)}catch{return new Is(e,"")}if(r.path==="")return r;throw vI(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function x(ie){ie.path_=decodeURIComponent(ie.path)}const y="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",T=new RegExp(`^https?://${w}/${y}/b/${o}/o${N}`,"i"),L={bucket:1,path:3},V=n===F2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",U=new RegExp(`^https?://${V}/${o}/${M}`,"i"),q=[{regex:p,indices:g,postModify:u},{regex:T,indices:L,postModify:x},{regex:U,indices:{bucket:1,path:2},postModify:x}];for(let ie=0;ie<q.length;ie++){const ue=q[ie],W=ue.regex.exec(e);if(W){const E=W[ue.indices.bucket];let A=W[ue.indices.path];A||(A=""),r=new Is(E,A),ue.postModify(r);break}}if(r==null)throw yI(e);return r}}class SI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function TI(s,e,n){let r=1,o=null,u=null,d=!1,p=0;function g(){return p===2}let x=!1;function y(...M){x||(x=!0,e.apply(null,M))}function w(M){o=setTimeout(()=>{o=null,s(T,g())},M)}function N(){u&&clearTimeout(u)}function T(M,...U){if(x){N();return}if(M){N(),y.call(null,M,...U);return}if(g()||d){N(),y.call(null,M,...U);return}r<64&&(r*=2);let q;p===1?(p=2,q=0):q=(r+Math.random())*1e3,w(q)}let L=!1;function V(M){L||(L=!0,N(),!x&&(o!==null?(M||(p=2),clearTimeout(o),w(0)):M||(p=1)))}return w(0),u=setTimeout(()=>{d=!0,V(!0)},n),V}function AI(s){s(!1)}function CI(s){return s!==void 0}function RI(s){return typeof s=="object"&&!Array.isArray(s)}function Wg(s){return typeof s=="string"||s instanceof String}function g1(s){return Kg()&&s instanceof Blob}function Kg(){return typeof Blob<"u"}function x1(s,e,n,r){if(r<e)throw I0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw I0(`Invalid value for '${s}'. Expected ${n} or less.`)}function Tf(s,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${s}`}function H2(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var ll;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(ll||(ll={}));function kI(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||o||u}class II{constructor(e,n,r,o,u,d,p,g,x,y,w,N=!0,T=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=x,this.progressCallback_=y,this.connectionFactory_=w,this.retry=N,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,V)=>{this.resolve_=L,this.reject_=V,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new oh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,x=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,x)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===ll.NO_ERROR,g=u.getStatus();if(!p||kI(g,this.additionalRetryCodes_)&&this.retry){const y=u.getErrorCode()===ll.ABORT;r(!1,new oh(!1,null,y));return}const x=this.successCodes_.indexOf(g)!==-1;r(!0,new oh(x,u))})},n=(r,o)=>{const u=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());CI(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=Yg();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?$2():bI();d(g)}else{const g=xI();d(g)}};this.canceled_?n(!1,new oh(!1,null,!0)):this.backoffId_=TI(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class oh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function DI(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function MI(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OI(s,e){e&&(s["X-Firebase-GMPID"]=e)}function PI(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function VI(s,e,n,r,o,u,d=!0,p=!1){const g=H2(s.urlParams),x=s.url+g,y=Object.assign({},s.headers);return OI(y,e),DI(y,n),MI(y,u),PI(y,r),new II(x,s.method,y,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,p)}function LI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function UI(...s){const e=LI();if(e!==void 0){const n=new e;for(let r=0;r<s.length;r++)n.append(s[r]);return n.getBlob()}else{if(Kg())return new Blob(s);throw new dn(un.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function BI(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}function zI(s){if(typeof atob>"u")throw jI("base-64");return atob(s)}const Ma={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kp{constructor(e,n){this.data=e,this.contentType=n||null}}function FI(s,e){switch(s){case Ma.RAW:return new Kp(G2(e));case Ma.BASE64:case Ma.BASE64URL:return new Kp(Y2(s,e));case Ma.DATA_URL:return new Kp($I(e),HI(e))}throw Yg()}function G2(s){const e=[];for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=r,d=s.charCodeAt(++n);r=65536|(u&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function qI(s){let e;try{e=decodeURIComponent(s)}catch{throw au(Ma.DATA_URL,"Malformed data URL.")}return G2(e)}function Y2(s,e){switch(s){case Ma.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw au(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ma.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw au(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zI(e)}catch(o){throw o.message.includes("polyfill")?o:au(s,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class W2{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw au(Ma.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=GI(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function $I(s){const e=new W2(s);return e.base64?Y2(Ma.BASE64,e.rest):qI(e.rest)}function HI(s){return new W2(s).contentType}function GI(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class li{constructor(e,n){let r=0,o="";g1(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(g1(this.data_)){const r=this.data_,o=BI(r,e,n);return o===null?null:new li(o)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new li(r,!0)}}static getBlob(...e){if(Kg()){const n=e.map(r=>r instanceof li?r.data_:r);return new li(UI.apply(null,n))}else{const n=e.map(d=>Wg(d)?FI(Ma.RAW,d).data:d.data_);let r=0;n.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let u=0;return n.forEach(d=>{for(let p=0;p<d.length;p++)o[u++]=d[p]}),new li(o,!0)}}uploadData(){return this.data_}}function K2(s){let e;try{e=JSON.parse(s)}catch{return null}return RI(e)?e:null}function YI(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function WI(s,e){const n=e.split("/").filter(r=>r.length>0).join("/");return s.length===0?n:s+"/"+n}function Q2(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function KI(s,e){return e}class Zn{constructor(e,n,r,o){this.server=e,this.local=n||e,this.writable=!!r,this.xform=o||KI}}let ch=null;function QI(s){return!Wg(s)||s.length<2?s:Q2(s)}function X2(){if(ch)return ch;const s=[];s.push(new Zn("bucket")),s.push(new Zn("generation")),s.push(new Zn("metageneration")),s.push(new Zn("name","fullPath",!0));function e(u,d){return QI(d)}const n=new Zn("name");n.xform=e,s.push(n);function r(u,d){return d!==void 0?Number(d):d}const o=new Zn("size");return o.xform=r,s.push(o),s.push(new Zn("timeCreated")),s.push(new Zn("updated")),s.push(new Zn("md5Hash",null,!0)),s.push(new Zn("cacheControl",null,!0)),s.push(new Zn("contentDisposition",null,!0)),s.push(new Zn("contentEncoding",null,!0)),s.push(new Zn("contentLanguage",null,!0)),s.push(new Zn("contentType",null,!0)),s.push(new Zn("metadata","customMetadata",!0)),ch=s,ch}function XI(s,e){function n(){const r=s.bucket,o=s.fullPath,u=new Is(r,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function JI(s,e,n){const r={};r.type="file";const o=n.length;for(let u=0;u<o;u++){const d=n[u];r[d.local]=d.xform(r,e[d.server])}return XI(r,s),r}function J2(s,e,n){const r=K2(e);return r===null?null:JI(s,r,n)}function ZI(s,e,n,r){const o=K2(e);if(o===null||!Wg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(x=>{const y=s.bucket,w=s.fullPath,N="/b/"+d(y)+"/o/"+d(w),T=Tf(N,n,r),L=H2({alt:"media",token:x});return T+L})[0]}function e3(s,e){const n={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}class Qg{constructor(e,n,r,o){this.url=e,this.method=n,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Z2(s){if(!s)throw Yg()}function t3(s,e){function n(r,o){const u=J2(s,o,e);return Z2(u!==null),u}return n}function n3(s,e){function n(r,o){const u=J2(s,o,e);return Z2(u!==null),ZI(u,o,s.host,s._protocol)}return n}function ej(s){function e(n,r){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=pI():o=mI():n.getStatus()===402?o=fI(s.bucket):n.getStatus()===403?o=gI(s.path):o=r,o.status=n.getStatus(),o.serverResponse=r.serverResponse,o}return e}function tj(s){const e=ej(s);function n(r,o){let u=e(r,o);return r.getStatus()===404&&(u=hI(s.path)),u.serverResponse=o.serverResponse,u}return n}function s3(s,e,n){const r=e.fullServerUrl(),o=Tf(r,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new Qg(o,u,n3(s,n),d);return p.errorHandler=tj(e),p}function a3(s,e){const n=e.fullServerUrl(),r=Tf(n,s.host,s._protocol),o="DELETE",u=s.maxOperationRetryTime;function d(g,x){}const p=new Qg(r,o,d,u);return p.successCodes=[200,204],p.errorHandler=tj(e),p}function r3(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function i3(s,e,n){const r=Object.assign({},n);return r.fullPath=s.path,r.size=e.size(),r.contentType||(r.contentType=r3(null,e)),r}function l3(s,e,n,r,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let q="";for(let ie=0;ie<2;ie++)q=q+Math.random().toString().slice(2);return q}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const x=i3(e,r,o),y=e3(x,n),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+g+`\r
Content-Type: `+x.contentType+`\r
\r
`,N=`\r
--`+g+"--",T=li.getBlob(w,r,N);if(T===null)throw _I();const L={name:x.fullPath},V=Tf(u,s.host,s._protocol),M="POST",U=s.maxUploadRetryTime,G=new Qg(V,M,t3(s,n),U);return G.urlParams=L,G.headers=d,G.body=T.uploadData(),G.errorHandler=ej(e),G}class o3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ll.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ll.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ll.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,o,u){if(this.sent_)throw zc("cannot .send() more than once");if(Ni(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class c3 extends o3{initXhr(){this.xhr_.responseType="text"}}function Xg(){return new c3}class ml{constructor(e,n){this._service=e,n instanceof Is?this._location=n:this._location=Is.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ml(e,n)}get root(){const e=new Is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Q2(this._location.path)}get storage(){return this._service}get parent(){const e=YI(this._location.path);if(e===null)return null;const n=new Is(this._location.bucket,e);return new ml(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw EI(e)}}function u3(s,e,n){s._throwIfRoot("uploadBytes");const r=l3(s.storage,s._location,X2(),new li(e,!0),n);return s.storage.makeRequestWithTokens(r,Xg).then(o=>({metadata:o,ref:s}))}function d3(s){s._throwIfRoot("getDownloadURL");const e=s3(s.storage,s._location,X2());return s.storage.makeRequestWithTokens(e,Xg).then(n=>{if(n===null)throw NI();return n})}function h3(s){s._throwIfRoot("deleteObject");const e=a3(s.storage,s._location);return s.storage.makeRequestWithTokens(e,Xg)}function f3(s,e){const n=WI(s._location.path,e),r=new Is(s._location.bucket,n);return new ml(s.storage,r)}function m3(s){return/^[A-Za-z]+:\/\//.test(s)}function p3(s,e){return new ml(s,e)}function nj(s,e){if(s instanceof Jg){const n=s;if(n._bucket==null)throw wI();const r=new ml(n,n._bucket);return e!=null?nj(r,e):r}else return e!==void 0?f3(s,e):s}function g3(s,e){if(e&&m3(e)){if(s instanceof Jg)return p3(s,e);throw I0("To use ref(service, url), the first argument must be a Storage instance.")}else return nj(s,e)}function b1(s,e){const n=e?.[q2];return n==null?null:Is.makeFromBucketSpec(n,s)}function x3(s,e,n,r={}){s.host=`${e}:${n}`;const o=Ni(e);o&&(X0(`https://${s.host}/b`),J0("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=r;u&&(s._overrideAuthToken=typeof u=="string"?u:j_(u,s.app.options.projectId))}class Jg{constructor(e,n,r,o,u,d=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=F2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uI,this._maxUploadRetryTime=dI,this._requests=new Set,o!=null?this._bucket=Is.makeFromBucketSpec(o,this._host):this._bucket=b1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Is.makeFromBucketSpec(this._url,e):this._bucket=b1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){x1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){x1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ml(this,e)}_makeRequest(e,n,r,o,u=!0){if(this._deleted)return new SI($2());{const d=VI(e,this._appId,r,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const y1="@firebase/storage",v1="0.14.0";const sj="storage";function b3(s,e,n){return s=en(s),u3(s,e,n)}function y3(s){return s=en(s),d3(s)}function v3(s){return s=en(s),h3(s)}function w1(s,e){return s=en(s),g3(s,e)}function w3(s=tg(),e){s=en(s);const r=nf(s,sj).getImmediate({identifier:e}),o=w_("storage");return o&&_3(r,...o),r}function _3(s,e,n,r={}){x3(s,e,n,r)}function N3(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Jg(n,r,o,e,yl)}function j3(){cl(new mi(sj,N3,"PUBLIC").setMultipleInstances(!0)),Oa(y1,v1,""),Oa(y1,v1,"esm2020")}j3();const E3={apiKey:"AIzaSyC1qZ9fK-6LFBxVWZsAD4dZq-KVg36A7f8",authDomain:"scheduler-65e51.firebaseapp.com",projectId:"scheduler-65e51",storageBucket:"scheduler-65e51.firebasestorage.app",messagingSenderId:"93993791456",appId:"1:93993791456:web:3a777a2da0dad4b8b74585"},Zg=T_(E3),Ee=Q6(Zg),pl=z4(Zg),_1=w3(Zg);const aj=(...s)=>s.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();const S3=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const T3=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());const N1=s=>{const e=T3(s);return e.charAt(0).toUpperCase()+e.slice(1)};var A3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const C3=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const R3=j.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:d,...p},g)=>j.createElement("svg",{ref:g,...A3,width:e,height:e,stroke:s,strokeWidth:r?Number(n)*24/Number(e):n,className:aj("lucide",o),...!u&&!C3(p)&&{"aria-hidden":"true"},...p},[...d.map(([x,y])=>j.createElement(x,y)),...Array.isArray(u)?u:[u]]));const Re=(s,e)=>{const n=j.forwardRef(({className:r,...o},u)=>j.createElement(R3,{ref:u,iconNode:e,className:aj(`lucide-${S3(N1(s))}`,`lucide-${s}`,r),...o}));return n.displayName=N1(s),n};const k3=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],I3=Re("arrow-down-right",k3);const D3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],za=Re("arrow-left",D3);const M3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_o=Re("arrow-right",M3);const O3=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],P3=Re("arrow-up-down",O3);const V3=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],L3=Re("arrow-up-right",V3);const U3=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],po=Re("bell",U3);const B3=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],z3=Re("bot",B3);const F3=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],q3=Re("building-2",F3);const $3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],ha=Re("calendar-check",$3);const H3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],j1=Re("calendar-days",H3);const G3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Pt=Re("calendar",G3);const Y3=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],W3=Re("camera",Y3);const K3=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ex=Re("chart-column",K3);const Q3=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],X3=Re("chart-pie",Q3);const J3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fs=Re("check",J3);const Z3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],D0=Re("chevron-down",Z3);const eD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],rj=Re("chevron-left",eD);const tD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],tx=Re("chevron-right",tD);const nD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],M0=Re("chevron-up",nD);const sD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gu=Re("circle-alert",sD);const aD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Kn=Re("circle-check-big",aD);const rD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Da=Re("circle-x",rD);const iD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cn=Re("clock",iD);const lD=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],oD=Re("code",lD);const cD=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],uD=Re("coffee",cD);const dD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],hD=Re("copy",dD);const fD=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],gr=Re("credit-card",fD);const mD=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Af=Re("crown",mD);const pD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],O0=Re("dollar-sign",pD);const gD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Th=Re("external-link",gD);const xD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],E1=Re("eye",xD);const bD=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],yD=Re("ghost",bD);const vD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],wD=Re("globe",vD);const _D=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],ND=Re("headphones",_D);const jD=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],nx=Re("heart",jD);const ED=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],SD=Re("image",ED);const TD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],S1=Re("info",TD);const AD=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],P0=Re("list-ordered",AD);const CD=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],Xh=Re("list-plus",CD);const RD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Qs=Re("loader-circle",RD);const kD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Jh=Re("lock",kD);const ID=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],T1=Re("log-out",ID);const DD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],V0=Re("mail",DD);const MD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],OD=Re("map-pin",MD);const PD=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],VD=Re("menu",PD);const LD=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],L0=Re("message-square",LD);const UD=[["path",{d:"M5 12h14",key:"1ays0h"}]],BD=Re("minus",UD);const zD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],FD=Re("palette",zD);const qD=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],ij=Re("party-popper",qD);const $D=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],lj=Re("pen-line",$D);const HD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],U0=Re("phone",HD);const GD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Qp=Re("play",GD);const YD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wi=Re("plus",YD);const WD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sx=Re("refresh-cw",WD);const KD=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],fi=Re("repeat",KD);const QD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],XD=Re("save",QD);const JD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ZD=Re("search",JD);const eM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Xp=Re("send",eM);const tM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nM=Re("settings",tM);const sM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],aM=Re("shield",sM);const rM=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],oj=Re("sparkles",rM);const iM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],A1=Re("star",iM);const lM=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],C1=Re("sticky-note",lM);const oM=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],gs=Re("tag",oM);const cM=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],cj=Re("thermometer",cM);const uM=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],uj=Re("timer",uM);const dM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xu=Re("trash-2",dM);const hM=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Cf=Re("trending-up",hM);const fM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gl=Re("triangle-alert",fM);const mM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],dj=Re("user-plus",mM);const pM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xl=Re("user",pM);const gM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ht=Re("users",gM);const xM=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],R1=Re("wallet",xM);const bM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xr=Re("x",bM);const yM=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Du=Re("zap",yM);function k1({className:s=""}){return i.jsxs(Ze,{to:"/",className:`flex items-center gap-2.5 ${s}`,children:[i.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(ha,{className:"w-[18px] h-[18px] text-white"})}),i.jsxs("span",{className:"text-xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function vM(){return i.jsxs("div",{className:"min-h-screen bg-white",children:[i.jsx("nav",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-100",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsx(k1,{}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ze,{to:"/login",className:"px-4 py-2.5 text-sm font-semibold text-slate-600 hover:text-slate-900 transition-colors",children:"Sign In"}),i.jsxs(Ze,{to:"/register",className:"hidden sm:inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:["Get Started Free",i.jsx(_o,{className:"w-4 h-4"})]}),i.jsx(Ze,{to:"/register",className:"sm:hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all",children:"Start Free"})]})]})}),i.jsxs("section",{className:"relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 -z-10",children:[i.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-50 rounded-full blur-3xl opacity-60 -translate-y-1/2 translate-x-1/3"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-violet-50 rounded-full blur-3xl opacity-50 translate-y-1/3 -translate-x-1/4"})]}),i.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 pt-16 sm:pt-24 pb-16 sm:pb-20",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[i.jsxs("div",{className:"animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 bg-blue-50 border border-blue-100 rounded-full text-sm font-medium text-blue-700 mb-6",children:[i.jsx(oj,{className:"w-3.5 h-3.5"}),"Free for beauty professionals"]}),i.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-[3.5rem] font-extrabold text-slate-900 leading-[1.1] mb-6 tracking-tight",children:["Online booking",i.jsx("br",{}),i.jsx("span",{className:"text-blue-600",children:"made effortless"})]}),i.jsx("p",{className:"text-lg sm:text-xl text-slate-600 leading-relaxed mb-8 max-w-lg",children:"Let clients book 24/7. Manage your team, services, and schedule from one beautiful dashboard. No more phone tag."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-10",children:[i.jsxs(Ze,{to:"/register",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-base shadow-lg shadow-blue-600/25 hover:shadow-xl hover:shadow-blue-600/30 transition-all hover:-translate-y-0.5",children:["Start for Free",i.jsx(_o,{className:"w-4 h-4"})]}),i.jsx("a",{href:"#how-it-works",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-base border border-slate-200 transition-all",children:"See How It Works"})]}),i.jsxs("div",{className:"flex items-center gap-5 text-sm text-slate-500",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Kn,{className:"w-4 h-4 text-emerald-500"}),i.jsx("span",{children:"Free to use"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Kn,{className:"w-4 h-4 text-emerald-500"}),i.jsx("span",{children:"No credit card"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Kn,{className:"w-4 h-4 text-emerald-500"}),i.jsx("span",{children:"Setup in 2 min"})]})]})]}),i.jsxs("div",{className:"relative animate-fade-in-up",style:{animationDelay:"150ms"},children:[i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl shadow-slate-200/60 border border-slate-200/80 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-slate-50 border-b border-slate-100",children:[i.jsxs("div",{className:"flex gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"})]}),i.jsx("div",{className:"flex-1 mx-4",children:i.jsx("div",{className:"bg-white border border-slate-200 rounded-lg px-3 py-1.5 text-xs text-slate-400 font-mono",children:"bookflow.app/shop/janes-salon"})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-sm font-bold",children:"J"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-slate-900",children:"Jane's Salon"}),i.jsx("div",{className:"text-xs text-slate-500",children:"Book your next appointment"})]})]}),i.jsx("div",{className:"space-y-2.5",children:[{name:"Haircut & Style",price:"$45",time:"45 min",color:"bg-blue-500"},{name:"Color Treatment",price:"$120",time:"2 hours",color:"bg-violet-500"},{name:"Blowout",price:"$35",time:"30 min",color:"bg-emerald-500"}].map(s=>i.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-slate-50 rounded-xl border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/50 transition-all cursor-default",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-2 h-8 ${s.color} rounded-full`}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-slate-800",children:s.name}),i.jsx("div",{className:"text-xs text-slate-500",children:s.time})]})]}),i.jsx("div",{className:"text-sm font-bold text-slate-900",children:s.price})]},s.name))})]})]}),i.jsxs("div",{className:"absolute -bottom-4 -left-4 bg-white rounded-xl shadow-lg shadow-slate-200/60 border border-slate-100 px-4 py-3 flex items-center gap-3 animate-float",children:[i.jsx("div",{className:"w-9 h-9 bg-emerald-100 rounded-full flex items-center justify-center",children:i.jsx(Kn,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Booking confirmed"}),i.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Tomorrow at 2:00 PM"})]})]})]})]})})]}),i.jsx("section",{className:"border-y border-slate-100 bg-slate-50/50",children:i.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-8 sm:py-10",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8 sm:gap-16 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"500+"}),i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Businesses trust SpotBookie"})]}),i.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"10,000+"}),i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Appointments booked"})]}),i.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 text-2xl sm:text-3xl font-extrabold text-slate-900",children:["4.9 ",i.jsx(A1,{className:"w-5 h-5 text-amber-400 fill-amber-400"})]}),i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Average rating"})]})]})})}),i.jsx("section",{className:"py-20 sm:py-28",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[i.jsxs("div",{className:"text-center mb-14",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Everything you need to run your bookings"}),i.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Built specifically for beauty professionals, salons, and service businesses. Simple, powerful, and free."})]}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 stagger-children",children:[{icon:i.jsx(Pt,{className:"w-6 h-6"}),title:"Smart Scheduling",desc:"Set weekly hours with breaks. Slots auto-generate so your calendar is always up to date.",color:"bg-blue-100 text-blue-600"},{icon:i.jsx(Ht,{className:"w-6 h-6"}),title:"Multi-Staff Support",desc:"Add your whole team. Each member gets their own schedule, hours, and bookings.",color:"bg-violet-100 text-violet-600"},{icon:i.jsx(Du,{className:"w-6 h-6"}),title:"Instant Booking",desc:"Clients pick a service, choose a stylist, and book  all in under a minute.",color:"bg-amber-100 text-amber-600"},{icon:i.jsx(wD,{className:"w-6 h-6"}),title:"Your Own Booking Page",desc:"Get a unique link to share anywhere. No app downloads needed for your clients.",color:"bg-emerald-100 text-emerald-600"}].map(s=>i.jsxs("div",{className:"group bg-white rounded-2xl p-7 border border-slate-200/80 hover:border-slate-300 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[i.jsx("div",{className:`w-12 h-12 ${s.color} rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300`,children:s.icon}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:s.title}),i.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:s.desc})]},s.title))})]})}),i.jsx("section",{id:"how-it-works",className:"py-20 sm:py-28 bg-slate-50 border-y border-slate-100",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[i.jsxs("div",{className:"text-center mb-14",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Up and running in minutes"}),i.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Three simple steps to start accepting online bookings today."})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8 lg:gap-12 relative",children:[i.jsx("div",{className:"hidden md:block absolute top-14 left-[calc(16.67%+1rem)] right-[calc(16.67%+1rem)] h-px bg-gradient-to-r from-blue-200 via-violet-200 to-emerald-200"}),[{step:"1",title:"Create your account",desc:"Sign up free in 30 seconds. Name your shop and you're in.",color:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/30"},{step:"2",title:"Set up your shop",desc:"Add your services, team, and weekly hours. SpotBookie handles the rest.",color:"from-violet-500 to-violet-600",shadow:"shadow-violet-500/30"},{step:"3",title:"Share your link",desc:"Send your booking page to clients. They book, you get notified.",color:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/30"}].map(s=>i.jsxs("div",{className:"relative text-center",children:[i.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${s.color} rounded-2xl flex items-center justify-center mx-auto mb-6 text-white text-xl font-extrabold shadow-lg ${s.shadow} relative z-10`,children:s.step}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:s.title}),i.jsx("p",{className:"text-slate-600 leading-relaxed max-w-xs mx-auto",children:s.desc})]},s.step))]})]})}),i.jsx("section",{className:"py-20 sm:py-28",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[i.jsxs("div",{className:"text-center mb-14",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Loved by professionals"}),i.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"See why salons and stylists are switching to SpotBookie."})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{quote:"SpotBookie replaced our paper appointment book. Clients love being able to book online anytime.",name:"Maria Santos",role:"Salon Owner",initials:"MS",color:"bg-blue-100 text-blue-700"},{quote:"Setting up was incredibly easy. I had my booking page live and shared with clients in under 10 minutes.",name:"David Chen",role:"Barber",initials:"DC",color:"bg-violet-100 text-violet-700"},{quote:"The multi-staff feature is perfect. Each stylist manages their own schedule and clients can pick who they want.",name:"Lisa Park",role:"Studio Manager",initials:"LP",color:"bg-emerald-100 text-emerald-700"}].map(s=>i.jsxs("div",{className:"bg-white rounded-2xl p-7 border border-slate-200/80 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[i.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(5)].map((e,n)=>i.jsx(A1,{className:"w-4 h-4 text-amber-400 fill-amber-400"},n))}),i.jsxs("p",{className:"text-slate-700 leading-relaxed mb-6",children:['"',s.quote,'"']}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 ${s.color} rounded-full flex items-center justify-center text-sm font-bold`,children:s.initials}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s.name}),i.jsx("div",{className:"text-xs text-slate-500",children:s.role})]})]})]},s.name))})]})}),i.jsxs("section",{className:"py-20 sm:py-28 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 -z-0",children:[i.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto px-5 sm:px-8 text-center",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold text-white mb-6 leading-tight",children:"Ready to streamline your bookings?"}),i.jsx("p",{className:"text-lg text-slate-400 mb-10 max-w-xl mx-auto",children:"Join hundreds of professionals who have ditched the old appointment book. Set up in minutes, free forever."}),i.jsxs(Ze,{to:"/register",className:"inline-flex items-center gap-2 px-8 py-4 bg-white hover:bg-slate-50 text-slate-900 rounded-xl font-bold text-lg transition-all hover:shadow-xl hover:shadow-white/10 hover:-translate-y-0.5",children:["Create Your Free Account",i.jsx(_o,{className:"w-5 h-5"})]})]})]}),i.jsx("footer",{className:"bg-white border-t border-slate-100",children:i.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-10",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[i.jsx(k1,{}),i.jsxs("div",{className:"flex items-center gap-6 text-sm text-slate-500",children:[i.jsx(Ze,{to:"/register",className:"hover:text-slate-900 transition-colors",children:"Sign Up"}),i.jsx("span",{className:"text-slate-200",children:""}),i.jsx(Ze,{to:"/login",className:"hover:text-slate-900 transition-colors",children:"Sign In"}),i.jsx("span",{className:"text-slate-200",children:""}),i.jsx("a",{href:"#how-it-works",className:"hover:text-slate-900 transition-colors",children:"How It Works"})]}),i.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," SpotBookie. All rights reserved."]})]})})})]})}function wM(s){return s.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function _M(){const s=Do(),[e,n]=j.useState(""),[r,o]=j.useState(""),[u,d]=j.useState(""),[p,g]=j.useState(""),[x,y]=j.useState(!1),w=wM(e),N=async T=>{if(T.preventDefault(),g(""),!w){g("Please enter a valid shop name");return}if(u.length<6){g("Password must be at least 6 characters");return}y(!0);try{const L=Ds(Je(Ee,"shops"),ms("slug","==",w));if(!(await Ms(L)).empty){g("A shop with that name already exists. Please choose a different name."),y(!1);return}const U=(await SC(pl,r,u)).user;await jr(Je(Ee,"shops"),{name:e.trim(),slug:w,ownerUid:U.uid,ownerEmail:r,createdAt:$g()}),s(`/shop/${w}/dashboard`)}catch(L){switch(L.code){case"auth/email-already-in-use":g("An account with this email already exists");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/weak-password":g("Password must be at least 6 characters");break;default:g("Registration failed. Please try again.")}}finally{y(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsxs(Ze,{to:"/",className:"inline-flex items-center gap-2.5",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(ha,{className:"w-5 h-5 text-white"})}),i.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Create your shop"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Set up your booking page in seconds  it's free"})]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Shop Name"}),i.jsx("input",{type:"text",value:e,onChange:T=>{n(T.target.value),g("")},placeholder:"Jane's Salon",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),w&&i.jsxs("p",{className:"mt-1.5 text-xs text-slate-400",children:["Your page: ",i.jsxs("span",{className:"font-mono text-blue-600 font-medium",children:["bookflow.app/shop/",w]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:r,onChange:T=>{o(T.target.value),g("")},placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),i.jsx("input",{type:"password",value:u,onChange:T=>{d(T.target.value),g("")},placeholder:"At least 6 characters",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&i.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",p]})]}),i.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Creating your shop"]}):i.jsxs(i.Fragment,{children:["Create Shop",i.jsx(_o,{className:"w-4 h-4"})]})})]}),i.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Already have an account?"," ",i.jsx(Ze,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Sign in"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(Ze,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function NM({user:s}){const e=Do(),[n,r]=j.useState(""),[o,u]=j.useState(""),[d,p]=j.useState(""),[g,x]=j.useState(!1);j.useState(()=>{if(!s)return;(async()=>{const N=Ds(Je(Ee,"shops"),ms("ownerUid","==",s.uid)),T=await Ms(N);if(!T.empty){const L=T.docs[0].data();e(`/shop/${L.slug}/dashboard`,{replace:!0})}})()},[s,e]);const y=async w=>{w.preventDefault(),p(""),x(!0);try{const T=(await eN(pl,n,o)).user,L=Ds(Je(Ee,"shops"),ms("ownerUid","==",T.uid)),V=await Ms(L);if(V.empty){p("No shop found for this account. Need to create one?"),await pl.signOut(),x(!1);return}const M=V.docs[0].data();e(`/shop/${M.slug}/dashboard`,{replace:!0})}catch(N){switch(N.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":p("Invalid email or password");break;case"auth/invalid-email":p("Please enter a valid email address");break;case"auth/too-many-requests":p("Too many failed attempts. Please try again later.");break;default:p("Login failed. Please try again.")}u("")}finally{x(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsxs(Ze,{to:"/",className:"inline-flex items-center gap-2.5",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(ha,{className:"w-5 h-5 text-white"})}),i.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:n,onChange:w=>{r(w.target.value),p("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),i.jsx("input",{type:"password",value:o,onChange:w=>{u(w.target.value),p("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${d?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),d&&i.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",d]})]}),i.jsx("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:g?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):i.jsxs(i.Fragment,{children:["Sign In",i.jsx(_o,{className:"w-4 h-4"})]})})]}),i.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",i.jsx(Ze,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(Ze,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function hj({availableDates:s,selectedDate:e,onSelectDate:n}){const[r,o]=j.useState(new Date),u=U=>{const G=U.getFullYear(),q=U.getMonth(),ie=new Date(G,q,1),W=new Date(G,q+1,0).getDate(),E=ie.getDay();return{daysInMonth:W,startingDayOfWeek:E,year:G,month:q}},{daysInMonth:d,startingDayOfWeek:p,year:g,month:x}=u(r),y=()=>{o(new Date(r.getFullYear(),r.getMonth()-1))},w=()=>{o(new Date(r.getFullYear(),r.getMonth()+1))},N=U=>{const G=`${g}-${String(x+1).padStart(2,"0")}-${String(U).padStart(2,"0")}`;return s.includes(G)},T=U=>`${g}-${String(x+1).padStart(2,"0")}-${String(U).padStart(2,"0")}`===e,L=U=>{if(N(U)){const G=`${g}-${String(x+1).padStart(2,"0")}-${String(U).padStart(2,"0")}`;n(G)}},V=["January","February","March","April","May","June","July","August","September","October","November","December"],M=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return i.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5 sm:p-6 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-5",children:[i.jsx("button",{onClick:y,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(rj,{className:"w-5 h-5 text-slate-600"})}),i.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[V[x]," ",g]}),i.jsx("button",{onClick:w,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(tx,{className:"w-5 h-5 text-slate-600"})})]}),i.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:M.map(U=>i.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:U},U))}),i.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:p}).map((U,G)=>i.jsx("div",{},`empty-${G}`)),Array.from({length:d}).map((U,G)=>{const q=G+1,ie=N(q),ue=T(q),W=new Date,E=W.getDate()===q&&W.getMonth()===x&&W.getFullYear()===g;return i.jsxs("button",{onClick:()=>L(q),disabled:!ie,className:`
                relative p-2.5 sm:p-3 text-center rounded-lg text-sm font-semibold transition-all duration-200
                ${ue?"bg-blue-600 text-white shadow-md shadow-blue-600/30":ie?"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 hover:border-emerald-300 cursor-pointer":E?"text-slate-900 font-bold":"text-slate-300 cursor-not-allowed"}
              `,children:[q,E&&!ue&&i.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]},q)})]}),i.jsxs("div",{className:"mt-4 flex gap-5 text-xs text-slate-500",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 bg-emerald-50 border border-emerald-200 rounded"}),i.jsx("span",{children:"Available"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),i.jsx("span",{children:"Selected"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),i.jsx("span",{children:"Today"})]})]})]})}const jM=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"},{key:"saturday",label:"Sat"},{key:"sunday",label:"Sun"}],I1=[{key:"morning",label:"Morning (9AM12PM)",start:"09:00",end:"12:00"},{key:"afternoon",label:"Afternoon (12PM5PM)",start:"12:00",end:"17:00"},{key:"evening",label:"Evening (5PM9PM)",start:"17:00",end:"21:00"},{key:"any",label:"Any time",start:"00:00",end:"23:59"}];function EM(){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="WL";for(let n=0;n<4;n++)e+=s.charAt(Math.floor(Math.random()*s.length));return e}function D1({shopId:s,slug:e,selectedService:n,selectedStaff:r,staffMembers:o,preferredDate:u,onSuccess:d,onCancel:p}){const[g,x]=j.useState({name:"",email:"",phone:""}),[y,w]=j.useState([]),[N,T]=j.useState("any"),[L,V]=j.useState(!1),[M,U]=j.useState(!1),[G,q]=j.useState(""),ie=W=>{w(E=>E.includes(W)?E.filter(A=>A!==W):[...E,W])},ue=async W=>{W.preventDefault(),V(!0);try{const E=EM(),A=I1.find(H=>H.key===N),k=r&&r!=="any"?r.id:"any",B=r&&r!=="any"?r.name:"Any Available",P={clientName:g.name,clientEmail:g.email,clientPhone:g.phone,serviceId:n?.id||null,serviceName:n?.name||"Any Service",staffId:k,staffName:B,preferredDate:u||null,preferredDays:y.length>0?y:null,preferredTimeRange:A?{start:A.start,end:A.end}:null,status:"waiting",refCode:E,createdAt:new Date().toISOString(),notifiedAt:null,notifiedSlot:null};await jr(Je(Ee,"shops",s,"waitlist"),P),q(E),U(!0),d&&d(E)}catch(E){console.error("Waitlist error:",E)}finally{V(!1)}};return M?i.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg shadow-blue-100/50 p-8 text-center animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Kn,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"You're on the Waitlist!"}),i.jsxs("p",{className:"text-slate-600 mb-4",children:["We'll notify you when a slot opens up",n?` for ${n.name}`:"","."]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your waitlist reference"}),i.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:G})]}),i.jsxs("a",{href:`#/shop/${e}/waitlist/${G}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(cn,{className:"w-4 h-4"}),"Check Waitlist Status"]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to check your position and get notified"})]}):i.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg p-6 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:i.jsx(Xh,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Join the Waitlist"}),i.jsx("p",{className:"text-sm text-slate-500",children:"We'll notify you when a slot opens up"})]})]}),i.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),i.jsx("input",{type:"text",value:g.name,onChange:W=>x({...g,name:W.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:g.email,onChange:W=>x({...g,email:W.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),i.jsx("input",{type:"tel",value:g.phone,onChange:W=>x({...g,phone:W.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Preferred Days ",i.jsx("span",{className:"text-slate-400 font-normal",children:"(optional)"})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:jM.map(W=>i.jsx("button",{type:"button",onClick:()=>ie(W.key),className:`px-3.5 py-2 rounded-lg text-sm font-semibold transition-all border ${y.includes(W.key)?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:W.label},W.key))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Preferred Time"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:I1.map(W=>i.jsx("button",{type:"button",onClick:()=>T(W.key),className:`px-3.5 py-2.5 rounded-lg text-sm font-medium transition-all border text-left ${N===W.key?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:W.label},W.key))})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:L,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:L?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Joining"]}):i.jsxs(i.Fragment,{children:[i.jsx(Xh,{className:"w-4 h-4"}),"Join Waitlist"]})}),p&&i.jsx("button",{type:"button",onClick:p,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})}var Jp={exports:{}},Zp,M1;function SM(){if(M1)return Zp;M1=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Zp=s,Zp}var e0,O1;function TM(){if(O1)return e0;O1=1;var s=SM();function e(){}function n(){}return n.resetWarningCache=e,e0=function(){function r(d,p,g,x,y,w){if(w!==s){var N=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw N.name="Invariant Violation",N}}r.isRequired=r;function o(){return r}var u={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:e};return u.PropTypes=u,u},e0}var P1;function AM(){return P1||(P1=1,Jp.exports=TM()()),Jp.exports}var CM=AM();const qt=F0(CM);function V1(s,e){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),n.push.apply(n,r)}return n}function L1(s){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V1(Object(n),!0).forEach(function(r){fj(s,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):V1(Object(n)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(n,r))})}return s}function Ah(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ah=function(e){return typeof e}:Ah=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(s)}function fj(s,e,n){return e in s?Object.defineProperty(s,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[e]=n,s}function RM(s,e){if(s==null)return{};var n={},r=Object.keys(s),o,u;for(u=0;u<r.length;u++)o=r[u],!(e.indexOf(o)>=0)&&(n[o]=s[o]);return n}function kM(s,e){if(s==null)return{};var n=RM(s,e),r,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);for(o=0;o<u.length;o++)r=u[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(n[r]=s[r])}return n}function mj(s,e){return IM(s)||DM(s,e)||MM(s,e)||OM()}function IM(s){if(Array.isArray(s))return s}function DM(s,e){var n=s&&(typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"]);if(n!=null){var r=[],o=!0,u=!1,d,p;try{for(n=n.call(s);!(o=(d=n.next()).done)&&(r.push(d.value),!(e&&r.length===e));o=!0);}catch(g){u=!0,p=g}finally{try{!o&&n.return!=null&&n.return()}finally{if(u)throw p}}return r}}function MM(s,e){if(s){if(typeof s=="string")return U1(s,e);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U1(s,e)}}function U1(s,e){(e==null||e>s.length)&&(e=s.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=s[n];return r}function OM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var es=function(e,n,r){var o=!!r,u=$t.useRef(r);$t.useEffect(function(){u.current=r},[r]),$t.useEffect(function(){if(!o||!e)return function(){};var d=function(){u.current&&u.current.apply(u,arguments)};return e.on(n,d),function(){e.off(n,d)}},[o,n,e,u])},B0=function(e){var n=$t.useRef(e);return $t.useEffect(function(){n.current=e},[e]),n.current},Ro=function(e){return e!==null&&Ah(e)==="object"},PM=function(e){return Ro(e)&&typeof e.then=="function"},VM=function(e){return Ro(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},B1="[object Object]",LM=function s(e,n){if(!Ro(e)||!Ro(n))return e===n;var r=Array.isArray(e),o=Array.isArray(n);if(r!==o)return!1;var u=Object.prototype.toString.call(e)===B1,d=Object.prototype.toString.call(n)===B1;if(u!==d)return!1;if(!u&&!r)return e===n;var p=Object.keys(e),g=Object.keys(n);if(p.length!==g.length)return!1;for(var x={},y=0;y<p.length;y+=1)x[p[y]]=!0;for(var w=0;w<g.length;w+=1)x[g[w]]=!0;var N=Object.keys(x);if(N.length!==p.length)return!1;var T=e,L=n,V=function(U){return s(T[U],L[U])};return N.every(V)},pj=function(e,n,r){return Ro(e)?Object.keys(e).reduce(function(o,u){var d=!Ro(n)||!LM(e[u],n[u]);return r.includes(u)?(d&&console.warn("Unsupported prop change: options.".concat(u," is not a mutable property.")),o):d?L1(L1({},o||{}),{},fj({},u,e[u])):o},null):null},gj="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",z1=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gj;if(e===null||VM(e))return e;throw new Error(n)},UM=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gj;if(PM(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(o){return z1(o,n)})};var r=z1(e,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},BM=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.6.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.6.0",url:"https://stripe.com/docs/stripe-js/react"}))},Rf=$t.createContext(null);Rf.displayName="ElementsContext";var xj=function(e,n){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return e},bj=function(e){var n=e.stripe,r=e.options,o=e.children,u=$t.useMemo(function(){return UM(n)},[n]),d=$t.useState(function(){return{stripe:u.tag==="sync"?u.stripe:null,elements:u.tag==="sync"?u.stripe.elements(r):null}}),p=mj(d,2),g=p[0],x=p[1];$t.useEffect(function(){var N=!0,T=function(V){x(function(M){return M.stripe?M:{stripe:V,elements:V.elements(r)}})};return u.tag==="async"&&!g.stripe?u.stripePromise.then(function(L){L&&N&&T(L)}):u.tag==="sync"&&!g.stripe&&T(u.stripe),function(){N=!1}},[u,g,r]);var y=B0(n);$t.useEffect(function(){y!==null&&y!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[y,n]);var w=B0(r);return $t.useEffect(function(){if(g.elements){var N=pj(r,w,["clientSecret","fonts"]);N&&g.elements.update(N)}},[r,w,g.elements]),$t.useEffect(function(){BM(g.stripe)},[g.stripe]),$t.createElement(Rf.Provider,{value:g},o)};bj.propTypes={stripe:qt.any,options:qt.object};var zM=function(e){var n=$t.useContext(Rf);return xj(n,e)},FM=function(){var e=zM("calls useElements()"),n=e.elements;return n};qt.func.isRequired;var yj=$t.createContext(null);yj.displayName="CheckoutContext";qt.any,qt.shape({clientSecret:qt.oneOfType([qt.string,qt.instanceOf(Promise)]).isRequired,elementsOptions:qt.object}).isRequired;var z0=function(e){var n=$t.useContext(yj),r=$t.useContext(Rf);if(n){if(r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n}else return xj(r,e)},qM=["mode"],$M=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},xs=function(e,n){var r="".concat($M(e),"Element"),o=function(g){var x=g.id,y=g.className,w=g.options,N=w===void 0?{}:w,T=g.onBlur,L=g.onFocus,V=g.onReady,M=g.onChange,U=g.onEscape,G=g.onClick,q=g.onLoadError,ie=g.onLoaderStart,ue=g.onNetworksChange,W=g.onConfirm,E=g.onCancel,A=g.onShippingAddressChange,k=g.onShippingRateChange,B=g.onSavedPaymentMethodRemove,P=g.onSavedPaymentMethodUpdate,H=z0("mounts <".concat(r,">")),I="elements"in H?H.elements:null,$="checkoutState"in H?H.checkoutState:null,D=$?.type==="success"||$?.type==="loading"?$.sdk:null,R=$t.useState(null),K=mj(R,2),oe=K[0],Se=K[1],ge=$t.useRef(null),O=$t.useRef(null);es(oe,"blur",T),es(oe,"focus",L),es(oe,"escape",U),es(oe,"click",G),es(oe,"loaderror",q),es(oe,"loaderstart",ie),es(oe,"networkschange",ue),es(oe,"confirm",W),es(oe,"cancel",E),es(oe,"shippingaddresschange",A),es(oe,"shippingratechange",k),es(oe,"savedpaymentmethodremove",B),es(oe,"savedpaymentmethodupdate",P),es(oe,"change",M);var te;V&&(e==="expressCheckout"?te=V:te=function(){V(oe)}),es(oe,"ready",te),$t.useLayoutEffect(function(){if(ge.current===null&&O.current!==null&&(I||D)){var pe=null;if(D)switch(e){case"paymentForm":pe=D.createPaymentFormElement(N);break;case"payment":pe=D.createPaymentElement(N);break;case"address":if("mode"in N){var we=N.mode,Ie=kM(N,qM);if(we==="shipping")pe=D.createShippingAddressElement(Ie);else if(we==="billing")pe=D.createBillingAddressElement(Ie);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":pe=D.createExpressCheckoutElement(N);break;case"currencySelector":pe=D.createCurrencySelectorElement();break;case"taxId":pe=D.createTaxIdElement(N);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else I&&(pe=I.create(e,N));ge.current=pe,Se(pe),pe&&pe.mount(O.current)}},[I,D,N]);var ce=B0(N);return $t.useEffect(function(){if(ge.current){var pe=pj(N,ce,["paymentRequest"]);pe&&"update"in ge.current&&ge.current.update(pe)}},[N,ce]),$t.useLayoutEffect(function(){return function(){if(ge.current&&typeof ge.current.destroy=="function")try{ge.current.destroy(),ge.current=null}catch{}}},[]),$t.createElement("div",{id:x,className:y,ref:O})},u=function(g){z0("mounts <".concat(r,">"));var x=g.id,y=g.className;return $t.createElement("div",{id:x,className:y})},d=n?u:o;return d.propTypes={id:qt.string,className:qt.string,onChange:qt.func,onBlur:qt.func,onFocus:qt.func,onReady:qt.func,onEscape:qt.func,onClick:qt.func,onLoadError:qt.func,onLoaderStart:qt.func,onNetworksChange:qt.func,onConfirm:qt.func,onCancel:qt.func,onShippingAddressChange:qt.func,onShippingRateChange:qt.func,onSavedPaymentMethodRemove:qt.func,onSavedPaymentMethodUpdate:qt.func,options:qt.object},d.displayName=r,d.__elementType=e,d},bs=typeof window>"u",HM=$t.createContext(null);HM.displayName="EmbeddedCheckoutProviderContext";var GM=function(){var e=z0("calls useStripe()"),n=e.stripe;return n};xs("auBankAccount",bs);var F1=xs("card",bs);xs("cardNumber",bs);xs("cardExpiry",bs);xs("cardCvc",bs);xs("iban",bs);xs("payment",bs);xs("expressCheckout",bs);xs("paymentRequestButton",bs);xs("linkAuthentication",bs);xs("address",bs);xs("shippingAddress",bs);xs("paymentMethodMessaging",bs);xs("taxId",bs);function Ch(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ch=function(e){return typeof e}:Ch=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ch(s)}var vj="clover",YM=function(e){return e===3?"v3":e},wj="https://js.stripe.com",WM="".concat(wj,"/").concat(vj,"/stripe.js"),KM=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,QM=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var XM=function(e){return KM.test(e)||QM.test(e)},JM=function(){for(var e=document.querySelectorAll('script[src^="'.concat(wj,'"]')),n=0;n<e.length;n++){var r=e[n];if(XM(r.src))return r}return null},q1=function(e){var n="",r=document.createElement("script");r.src="".concat(WM).concat(n);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(r),r},ZM=function(e,n){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.7.0",startTime:n})},Fc=null,uh=null,dh=null,eO=function(e){return function(n){e(new Error("Failed to load Stripe.js",{cause:n}))}},tO=function(e,n){return function(){window.Stripe?e(window.Stripe):n(new Error("Stripe.js not available"))}},nO=function(e){return Fc!==null?Fc:(Fc=new Promise(function(n,r){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var o=JM();if(!(o&&e)){if(!o)o=q1(e);else if(o&&dh!==null&&uh!==null){var u;o.removeEventListener("load",dh),o.removeEventListener("error",uh),(u=o.parentNode)===null||u===void 0||u.removeChild(o),o=q1(e)}}dh=tO(n,r),uh=eO(r),o.addEventListener("load",dh),o.addEventListener("error",uh)}catch(d){r(d);return}}),Fc.catch(function(n){return Fc=null,Promise.reject(n)}))},sO=function(e,n,r){if(e===null)return null;var o=n[0];if(typeof o!="string")throw new Error("Expected publishable key to be of type string, got type ".concat(Ch(o)," instead."));var u=o.match(/^pk_test/),d=YM(e.version),p=vj;u&&d!==p&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("8.7.0"," expected Stripe.js@").concat(p,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,n);return ZM(g,r),g},qc,_j=!1,Nj=function(){return qc||(qc=nO(null).catch(function(e){return qc=null,Promise.reject(e)}),qc)};Promise.resolve().then(function(){return Nj()}).catch(function(s){_j||console.warn(s)});var aO=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];_j=!0;var o=Date.now();return Nj().then(function(u){return sO(u,n,o)})};const rO=aO("pk_test_51NXZytLhwB1Jyzw82kEuknbGp3F4vTdnqmBrVmzsHqKYeldrpbiWInM6U2v2ojnsLW4u251zbpRk2UiXnwBgiQZo00bK99q5kj"),iO="https://us-central1-scheduler-65e51.cloudfunctions.net",lO={style:{base:{fontSize:"16px",color:"#1e293b",fontFamily:"system-ui, -apple-system, sans-serif","::placeholder":{color:"#94a3b8"}},invalid:{color:"#ef4444",iconColor:"#ef4444"}}};function oO({amount:s,onSuccess:e,onCancel:n,clientInfo:r,serviceName:o,shopId:u,bookingRefCode:d,shopHasConnect:p=!0}){const g=GM(),x=FM(),[y,w]=j.useState(!1),[N,T]=j.useState(null),[L,V]=j.useState(!1),M=async G=>{if(G.preventDefault(),!g||!x)return;w(!0),T(null);const q=x.getElement(F1),{error:ie,paymentMethod:ue}=await g.createPaymentMethod({type:"card",card:q,billing_details:{name:r.name,email:r.email,phone:r.phone}});if(ie){T(ie.message),w(!1);return}if(p&&u)try{const W=await fetch(`${iO}/createDepositPaymentIntent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:u,amount:s,serviceName:o,clientName:r.name,clientEmail:r.email,bookingRefCode:d,paymentMethodId:ue.id})}),E=await W.json();if(!W.ok){E.needsConnect?T("This shop has not connected Stripe yet. Please contact the shop owner."):E.needsOnboarding?T("This shop is still setting up payments. Please try again later."):T(E.error||"Payment failed. Please try again."),w(!1);return}console.log("Payment processed:",E.paymentIntentId),w(!1),e({paymentMethodId:ue.id,paymentIntentId:E.paymentIntentId,last4:ue.card.last4,brand:ue.card.brand,amount:E.amount})}catch(W){console.error("Payment error:",W),T("Payment failed. Please try again."),w(!1)}else console.log("Payment method created (no Connect):",ue.id),await new Promise(W=>setTimeout(W,500)),w(!1),e({paymentMethodId:ue.id,last4:ue.card.last4,brand:ue.card.brand})},U=G=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(G/100);return i.jsxs("form",{onSubmit:M,className:"space-y-5",children:[i.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl p-5 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-emerald-100 text-sm font-medium",children:["Deposit for ",o]}),i.jsx("p",{className:"text-3xl font-bold mt-1",children:U(s)})]}),i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:i.jsx(gr,{className:"w-6 h-6"})})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Card Details"}),i.jsx("div",{className:"p-4 border-2 border-slate-200 rounded-xl focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-500/20 transition-all bg-white",children:i.jsx(F1,{options:lO,onChange:G=>{V(G.complete),G.error?T(G.error.message):T(null)}})})]}),N&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:[i.jsx(gu,{className:"w-4 h-4 flex-shrink-0"}),N]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[i.jsx(Jh,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Your payment is secured with 256-bit encryption"})]}),i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:[i.jsx(gu,{className:"w-4 h-4 flex-shrink-0"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Test Mode:"})," Use card number ",i.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"4242 4242 4242 4242"})," with any future date and CVC."]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:y||!g||!L,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold shadow-md shadow-emerald-600/20 hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:y?i.jsxs(i.Fragment,{children:[i.jsx(Qs,{className:"w-4 h-4 animate-spin"}),"Processing"]}):i.jsxs(i.Fragment,{children:[i.jsx(Jh,{className:"w-4 h-4"}),"Pay ",U(s)]})}),i.jsx("button",{type:"button",onClick:n,disabled:y,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200 disabled:opacity-50",children:"Back"})]})]})}function cO({amount:s,onSuccess:e,onCancel:n,clientInfo:r,serviceName:o,shopId:u,bookingRefCode:d,shopHasConnect:p=!0}){return i.jsx(bj,{stripe:rO,children:i.jsx(oO,{amount:s,onSuccess:e,onCancel:n,clientInfo:r,serviceName:o,shopId:u,bookingRefCode:d,shopHasConnect:p})})}const uO=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function go(s){const[e,n]=s.split(":").map(Number);return e*60+n}function $1(s){const e=Math.floor(s/60),n=s%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function dO(s){const e=s.getFullYear(),n=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${e}-${n}-${r}`}function hO(s,e,n,r,o,u){if(!s)return[];const p=new Date(e+"T12:00:00").getDay(),g=uO[p],x=s[g];if(!x||!x.enabled)return[];const y=go(x.start),w=go(x.end),N=x.break?go(x.break.start):null,T=x.break?go(x.break.end):null,L=n+r,V=[];let M=y;for(;M+n<=w;){const U=M+n;if(N!==null&&T!==null&&M<T&&U>N){M=T;continue}V.push({id:`wh-${o}-${e}-${$1(M)}`,date:e,time:$1(M),duration:n,available:!0,staffId:o,staffName:u,generated:!0}),M+=L}return V}function jj(s,e,n=0,r=4){const o=[],u=new Date;u.setHours(0,0,0,0);const d=new Date(u);d.setDate(d.getDate()+r*7);for(const p of s){if(!p.weeklyHours)continue;const g=new Date(u);for(;g<d;){const x=dO(g),y=hO(p.weeklyHours,x,e,n,p.id,p.name);o.push(...y),g.setDate(g.getDate()+1)}}return o}function Ej(s,e,n=0){const r=e.filter(o=>!o.status||o.status==="pending"||o.status==="confirmed");return s.filter(o=>{const u=go(o.time),d=u+o.duration;return!r.some(g=>{if(o.staffId&&g.staffId&&g.staffId!==o.staffId||g.date!==o.date)return!1;const x=go(g.time),y=g.serviceDuration||g.duration||o.duration,w=x+y;return!(d+n<=x||w+n<=u)})})}function Sj(s,e){const n=new Set(e.map(o=>`${o.staffId||""}-${o.date}-${o.time}`)),r=s.filter(o=>{const u=`${o.staffId||""}-${o.date}-${o.time}`;return!n.has(u)});return[...e,...r]}function Xc({name:s,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const r=(s||"").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return i.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:r||"?"})}function fO(){return i.jsxs(Ze,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(ha,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function mO({member:s,onClose:e}){const[n,r]=j.useState(null),o=s.portfolio||[];return j.useEffect(()=>{const u=d=>{d.key==="Escape"&&(n!==null?r(null):e())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[n,e]),i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-scale-in",children:[i.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 bg-slate-100 hover:bg-slate-200 rounded-full flex items-center justify-center text-slate-600 transition-all z-10",children:i.jsx(X,{className:"w-4 h-4"})}),i.jsxs("div",{className:"p-6 pb-4 border-b border-slate-100",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Xc,{name:s.name,className:"w-14 h-14",bgClass:"bg-violet-100 text-violet-700"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s.name}),s.role&&i.jsx("p",{className:"text-sm text-violet-600 font-medium",children:s.role})]})]}),s.bio&&i.jsx("p",{className:"mt-3 text-sm text-slate-600 leading-relaxed",children:s.bio})]}),i.jsx("div",{className:"p-6",children:o.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Image,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet"})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:o.map((u,d)=>i.jsxs("button",{onClick:()=>r(d),className:"group relative aspect-square rounded-xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5",children:[i.jsx("img",{src:u.url,alt:u.caption||"Portfolio",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),u.caption&&i.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-2.5 pt-6",children:i.jsx("p",{className:"text-xs text-white font-medium truncate",children:u.caption})})]},d))})})]}),n!==null&&o[n]&&i.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90",children:[i.jsx("button",{onClick:()=>r(null),className:"absolute top-4 right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:i.jsx(X,{className:"w-5 h-5"})}),n>0&&i.jsx("button",{onClick:()=>r(n-1),className:"absolute left-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:i.jsx(ChevronLeft,{className:"w-5 h-5"})}),n<o.length-1&&i.jsx("button",{onClick:()=>r(n+1),className:"absolute right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:i.jsx(ChevronRight,{className:"w-5 h-5"})}),i.jsxs("div",{className:"max-w-4xl max-h-[85vh] flex flex-col items-center",children:[i.jsx("img",{src:o[n].url,alt:o[n].caption||"Portfolio",className:"max-w-full max-h-[75vh] object-contain rounded-lg"}),o[n].caption&&i.jsx("p",{className:"mt-3 text-sm text-white/90 font-medium text-center px-4",children:o[n].caption}),i.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[n+1," / ",o.length]})]})]})]})}function pO(){const{slug:s}=Mo(),[e,n]=j.useState(null),[r,o]=j.useState(null),[u,d]=j.useState(!0),[p,g]=j.useState(!1),[x,y]=j.useState([]),[w,N]=j.useState([]),[T,L]=j.useState(null),[V,M]=j.useState(null),[U,G]=j.useState([]),[q,ie]=j.useState([]),[ue,W]=j.useState(!1),[E,A]=j.useState(null),[k,B]=j.useState(null),[P,H]=j.useState(""),[I,$]=j.useState(!1),[D,R]=j.useState({name:"",email:"",phone:""}),[K,oe]=j.useState(""),[Se,ge]=j.useState(!1),[O,te]=j.useState(null),[ce,pe]=j.useState(!1),[we,Ie]=j.useState("biweekly"),[ze,Rt]=j.useState(null),[mt,nn]=j.useState(!1),[se,Ne]=j.useState(null);j.useEffect(()=>{(async()=>{d(!0),g(!1);try{const fe=Ds(Je(Ee,"shops"),ms("slug","==",s)),Ve=await Ms(fe);if(Ve.empty)g(!0);else{const tt=Ve.docs[0];n(tt.data()),o(tt.id)}}catch(fe){console.error("Error looking up shop:",fe),g(!0)}finally{d(!1)}})()},[s]),j.useEffect(()=>{if(!r)return;const ye=Jt(Je(Ee,"shops",r,"services"),dt=>{const Ue=dt.docs.map($e=>({id:$e.id,...$e.data()})).filter($e=>$e.active!==!1).sort(($e,Et)=>($e.name||"").localeCompare(Et.name||""));y(Ue)}),fe=Jt(Je(Ee,"shops",r,"availability"),dt=>{const Ue=new Date,$e=dt.docs.map(Et=>({id:Et.id,...Et.data()})).filter(Et=>new Date(`${Et.date}T${Et.time}`)>Ue);G($e)}),Ve=Jt(Je(Ee,"shops",r,"bookings"),dt=>{const Ue=dt.docs.map($e=>({id:$e.id,...$e.data()}));ie(Ue)}),tt=Jt(Je(Ee,"shops",r,"staff"),dt=>{const Ue=dt.docs.map($e=>({id:$e.id,...$e.data()})).filter($e=>$e.active!==!1).sort(($e,Et)=>($e.name||"").localeCompare(Et.name||""));N(Ue)});return()=>{ye(),fe(),Ve(),tt()}},[r]),j.useEffect(()=>{w.length===1?M(w[0]):w.length===0&&M(null)},[w]);const de=x.length>0;w.length>0;const Ae=w.length>1,De=e?.bufferMinutes||0,Le=j.useMemo(()=>{const ye=new Date;let fe=U.filter(Ue=>Ue.available);if(T&&(fe=fe.filter(Ue=>Ue.duration>=T.duration)),V&&V!=="any"&&(fe=fe.filter(Ue=>Ue.staffId===V.id||!Ue.staffId)),!T)return fe;const Ve=V&&V!=="any"?w.filter(Ue=>Ue.id===V.id):w,tt=jj(Ve,T.duration,De,4).filter(Ue=>new Date(`${Ue.date}T${Ue.time}`)>ye),dt=Sj(tt,fe);return Ej(dt,q,De)},[U,T,V,w,q,De]),nt=(ye,fe,Ve=3)=>{const tt=[],dt=new Date(ye+"T12:00:00"),Ue=new Date(dt);Ue.setMonth(Ue.getMonth()+Ve);let $e=new Date(dt);for(fe==="weekly"?$e.setDate($e.getDate()+7):fe==="biweekly"?$e.setDate($e.getDate()+14):fe==="fourweekly"?$e.setDate($e.getDate()+28):fe==="monthly"&&$e.setMonth($e.getMonth()+1);$e<=Ue;){const Et=$e.getFullYear(),sn=String($e.getMonth()+1).padStart(2,"0"),ts=String($e.getDate()).padStart(2,"0");tt.push(`${Et}-${sn}-${ts}`),fe==="weekly"?$e.setDate($e.getDate()+7):fe==="biweekly"?$e.setDate($e.getDate()+14):fe==="fourweekly"?$e.setDate($e.getDate()+28):fe==="monthly"&&$e.setMonth($e.getMonth()+1)}return tt},ct=j.useMemo(()=>{if(!ce||!E)return null;const ye=nt(E.date,we),fe=T?T.duration:E.duration||60,Ve=V&&V!=="any"?V.id:E.staffId,tt=E.time,dt=q.filter(hn=>!hn.status||hn.status==="pending"||hn.status==="confirmed"),Ue=hn=>{const[Ai,bn]=hn.split(":").map(Number);return Ai*60+bn},$e=Ue(tt),Et=$e+fe;let sn=[],ts=[];const ns=new Set;ye.forEach(hn=>{dt.some(bn=>{if(Ve&&bn.staffId&&bn.staffId!==Ve||bn.date!==hn)return!1;const ss=Ue(bn.time),an=bn.serviceDuration||bn.duration||fe,yn=ss+an,vs=De||0;return!(Et+vs<=ss||yn+vs<=$e)})||ns.has(hn)?ts.push(hn):(sn.push(hn),ns.add(hn))});const ys=ye.length>0?ye[ye.length-1]:E.date,Ha=new Date(ys+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ea={weekly:"week",biweekly:"2 weeks",fourweekly:"4 weeks",monthly:"month"};return{available:sn,conflicts:ts,total:sn.length+1,skipped:ts.length,endDate:Ha,intervalLabel:ea[we]||we}},[ce,we,E,T,V,q,De]),ut=ye=>{L(ye),w.length>1&&M(null),B(null),A(null),W(!1),H("")},Ce=ye=>{M(ye),B(null),A(null),W(!1),H("")},Pe=()=>{L(null),w.length>1&&M(null),B(null),A(null),W(!1)},ot=()=>{B(null),A(null),W(!1),Ae?M(null):de&&L(null)},Kt=ye=>{A(ye),W(!0),H("")},jt=()=>{const ye="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let fe="BK";for(let Ve=0;Ve<4;Ve++)fe+=ye.charAt(Math.floor(Math.random()*ye.length));return fe},wt=ye=>{ye.preventDefault(),zt?nn(!0):Nt()},$n=ye=>{Ne(ye),Nt(ye)},Nt=async(ye=null)=>{$(!0),Rt(null);try{const fe=jt(),Ve=e?.requireApproval?"pending":"confirmed",tt=ce?`rg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`:null,dt=ce&&ct?ct.endDate:null,Ue={slotId:E.id,date:E.date,time:E.time,duration:T?T.duration:E.duration,clientName:D.name,clientEmail:D.email,clientPhone:D.phone,bookedAt:new Date().toISOString(),status:Ve,refCode:fe};if(T&&(Ue.serviceId=T.id,Ue.serviceName=T.name,Ue.servicePrice=T.price,Ue.serviceDuration=T.duration,Ue.depositPercent=T.depositPercent||0),ye||se){const sn=ye||se;Ue.depositPaid=!0,Ue.depositAmount=F/100,Ue.paymentMethodId=sn.paymentMethodId,Ue.cardLast4=sn.last4,Ue.cardBrand=sn.brand}V&&V!=="any"?(Ue.staffId=V.id,Ue.staffName=V.name):E.staffId&&(Ue.staffId=E.staffId,Ue.staffName=E.staffName||""),ce&&tt&&(Ue.recurring=!0,Ue.recurringInterval=we,Ue.recurringGroupId=tt,Ue.recurringUntil=dt),await jr(Je(Ee,"shops",r,"bookings"),Ue),E.generated||await it(Ge(Ee,"shops",r,"availability",E.id),{available:!1});let $e=1,Et=0;if(ce&&ct){const sn=ct.available;Et=ct.skipped;for(const ts of sn){const ns=jt(),ys={...Ue,date:ts,slotId:`recurring-${tt}-${ts}`,refCode:ns,bookedAt:new Date().toISOString()};await jr(Je(Ee,"shops",r,"bookings"),ys),$e++}Rt({created:$e,skipped:Et})}R({name:"",email:"",phone:""}),W(!1),nn(!1),Ne(null),A(null),L(null),B(null),M(w.length===1?w[0]:null),pe(!1),oe(fe),e?.requireApproval?H(" Your booking request has been submitted! The shop will review and confirm it shortly."):H(" Booking confirmed! You will receive a confirmation email shortly.")}catch(fe){console.error("Booking error:",fe),H(" Something went wrong. Please try again.")}finally{$(!1)}},In=ye=>new Date(ye+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),$a=ye=>{const[fe,Ve]=ye.split(":"),tt=parseInt(fe),dt=tt>=12?"PM":"AM";return`${tt%12||12}:${Ve} ${dt}`},Ps=ye=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(ye),Cn=ye=>{if(ye<60)return`${ye} min`;const fe=Math.floor(ye/60),Ve=ye%60;return Ve?`${fe}h ${Ve}m`:`${fe} hour${fe>1?"s":""}`};if(u)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking page"})]})});if(p)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Pt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(Ze,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(za,{className:"w-4 h-4"}),"Go Home"]})]})});const Zs=[...new Set(Le.map(ye=>ye.date))].sort(),xn=k?Le.filter(ye=>ye.date===k):Le,zt=T&&T.depositPercent>0,F=zt?Math.round(T.price*(T.depositPercent/100)*100):0,je=mt?"payment":ue?"form":de&&!T?"services":Ae&&!V?"staff":"calendar",_e=[];de&&_e.push({key:"services",label:"Service"}),Ae&&_e.push({key:"staff",label:"Stylist"}),_e.push({key:"calendar",label:"Date & Time"}),_e.push({key:"form",label:"Details"}),zt&&_e.push({key:"payment",label:"Payment"});const Ke=_e.findIndex(ye=>ye.key===je),st=["border-l-blue-500","border-l-violet-500","border-l-emerald-500","border-l-amber-500","border-l-rose-500","border-l-cyan-500","border-l-indigo-500","border-l-pink-500","border-l-teal-500"];return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Book your appointment"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Ze,{to:`/shop/${s}/login`,className:"flex items-center gap-1.5 px-3.5 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[i.jsx(Jh,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"Owner"})]}),i.jsx(fO,{})]})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[_e.length>1&&i.jsx("div",{className:"flex items-center justify-center gap-0 mb-8 animate-fade-in",children:_e.map((ye,fe)=>{const Ve=ye.key===je,tt=fe<Ke;return i.jsxs(j.Fragment,{children:[fe>0&&i.jsx("div",{className:`w-8 sm:w-14 h-0.5 transition-colors duration-300 ${fe<=Ke?"bg-blue-500":"bg-slate-200"}`}),i.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[i.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 ${Ve?"bg-blue-600 text-white shadow-md shadow-blue-600/30 scale-110":tt?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:tt?i.jsx(Kn,{className:"w-5 h-5"}):fe+1}),i.jsx("span",{className:`text-xs font-medium hidden sm:block transition-colors ${Ve?"text-blue-700":tt?"text-blue-600":"text-slate-400"}`,children:ye.label})]})]},ye.key)})}),P&&i.jsx("div",{className:"mb-8 animate-scale-in",children:P.startsWith("")?i.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ij,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Confirmed!"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"You're all set. We'll send a confirmation to your email."}),ze&&i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[i.jsx(fi,{className:"w-4 h-4"}),"Recurring Series Created"]}),i.jsxs("p",{className:"text-sm text-slate-700",children:[ze.created," appointment",ze.created!==1?"s":""," booked"]}),ze.skipped>0&&i.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",ze.skipped," date",ze.skipped!==1?"s":""," skipped due to conflicts"]})]}),K&&i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),i.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:K})]}),K&&i.jsxs("div",{className:"mb-4",children:[i.jsxs(Ze,{to:`/shop/${s}/booking/${K}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(ha,{className:"w-4 h-4"}),"Manage Your Booking"]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-lg text-sm text-emerald-700 font-medium",children:[i.jsx(ha,{className:"w-4 h-4"}),"Add to your calendar to remember"]})]}):P.startsWith("")?i.jsxs("div",{className:"bg-white rounded-2xl border border-amber-200 shadow-lg shadow-amber-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(cn,{className:"w-8 h-8 text-amber-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Request Submitted!"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking request has been submitted! The shop will review and confirm it shortly."}),ze&&i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[i.jsx(fi,{className:"w-4 h-4"}),"Recurring Series Created"]}),i.jsxs("p",{className:"text-sm text-slate-700",children:[ze.created," appointment",ze.created!==1?"s":""," submitted"]}),ze.skipped>0&&i.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",ze.skipped," date",ze.skipped!==1?"s":""," skipped due to conflicts"]})]}),K&&i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),i.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:K})]}),K&&i.jsxs("div",{className:"mb-4",children:[i.jsxs(Ze,{to:`/shop/${s}/booking/${K}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(ha,{className:"w-4 h-4"}),"Manage Your Booking"]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700 font-medium",children:[i.jsx(cn,{className:"w-4 h-4"}),"You'll be notified once it's confirmed"]})]}):i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Something went wrong. Please try again."})]})}),je==="services"&&i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a Service"}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select the service you'd like to book"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 stagger-children",children:x.map((ye,fe)=>i.jsxs("button",{onClick:()=>ut(ye),className:`group text-left bg-white border-l-4 ${st[fe%st.length]} border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors pr-2",children:ye.name}),i.jsx("span",{className:"text-xl font-extrabold text-blue-600 whitespace-nowrap",children:Ps(ye.price)})]}),ye.description&&i.jsx("p",{className:"text-sm text-slate-500 mb-3 line-clamp-2 leading-relaxed",children:ye.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-400",children:[i.jsx(cn,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:Cn(ye.duration)})]}),i.jsx("span",{className:"text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]})]},ye.id))})]}),je==="staff"&&i.jsxs("div",{className:"animate-fade-in",children:[de&&T&&i.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[i.jsxs("button",{onClick:Pe,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back"]}),i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[i.jsx(gs,{className:"w-3.5 h-3.5 text-blue-500"}),i.jsx("span",{className:"font-semibold text-slate-800",children:T.name}),i.jsx("span",{className:"text-blue-600 font-bold",children:Ps(T.price)})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose Your Stylist"}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select your preferred professional"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 stagger-children",children:[i.jsxs("button",{onClick:()=>Ce("any"),className:"group text-left bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[i.jsxs("div",{className:"flex items-center gap-3.5 mb-3",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(Ht,{className:"w-5 h-5 text-slate-500"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:"Any Available"}),i.jsx("p",{className:"text-xs text-slate-500",children:"First available professional"})]})]}),i.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),w.map(ye=>{const fe=ye.portfolio||[];return i.jsxs("div",{className:"group bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[i.jsxs("button",{onClick:()=>Ce(ye),className:"w-full text-left",children:[i.jsxs("div",{className:"flex items-center gap-3.5 mb-2",children:[i.jsx(Xc,{name:ye.name}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:ye.name}),ye.role&&i.jsx("p",{className:"text-xs text-slate-500",children:ye.role})]})]}),ye.bio&&i.jsx("p",{className:"text-xs text-slate-500 leading-relaxed mb-2 line-clamp-2",children:ye.bio}),fe.length>0&&i.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[fe.slice(0,3).map((Ve,tt)=>i.jsx("img",{src:Ve.url,alt:Ve.caption||"Work",className:"w-10 h-10 rounded-md object-cover border border-slate-200"},tt)),fe.length>3&&i.jsxs("span",{className:"w-10 h-10 rounded-md bg-slate-100 border border-slate-200 flex items-center justify-center text-xs text-slate-500 font-semibold",children:["+",fe.length-3]})]}),i.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),fe.length>0&&i.jsxs("button",{onClick:Ve=>{Ve.stopPropagation(),te(ye)},className:"mt-2 w-full flex items-center justify-center gap-1.5 py-1.5 text-xs font-semibold text-violet-600 hover:text-violet-700 hover:bg-violet-50 rounded-lg transition-all",children:[i.jsx(Image,{className:"w-3.5 h-3.5"}),"View Portfolio (",fe.length,")"]})]},ye.id)})]})]}),je==="calendar"&&i.jsxs("div",{className:"animate-fade-in",children:[(de||Ae)&&i.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[i.jsxs("button",{onClick:ot,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back"]}),T&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[i.jsx(gs,{className:"w-3.5 h-3.5 text-blue-500"}),i.jsx("span",{className:"font-semibold text-slate-800",children:T.name}),i.jsx("span",{className:"text-blue-600 font-bold",children:Ps(T.price)}),i.jsxs("span",{className:"text-slate-400",children:[" ",Cn(T.duration)]})]}),V&&V!=="any"&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[i.jsx(Xc,{name:V.name,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:V.name})]}),V==="any"&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[i.jsx(Ht,{className:"w-3.5 h-3.5 text-slate-500"}),i.jsx("span",{className:"font-semibold text-slate-700",children:"Any Available"})]})]}),Zs.length===0?i.jsx("div",{children:Se?i.jsx("div",{className:"max-w-lg mx-auto",children:i.jsx(D1,{shopId:r,slug:s,selectedService:T,selectedStaff:V,staffMembers:w,preferredDate:null,onCancel:()=>ge(!1)})}):i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Pt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),i.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:T?`No time slots available for ${T.name} (${Cn(T.duration)}). Join the waitlist to be notified when a slot opens up!`:"Check back soon for new availability, or join the waitlist!"}),i.jsxs("button",{onClick:()=>ge(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:[i.jsx(Xh,{className:"w-4 h-4"}),"Join Waitlist"]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Select a Date"}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Pick a day that works for you"})]}),i.jsx("div",{className:"mb-8",children:i.jsx(hj,{availableDates:Zs,selectedDate:k,onSelectDate:B})}),k&&i.jsxs("div",{className:"animate-slide-down",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",In(k)]}),i.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[xn.length," slot",xn.length!==1?"s":""]})]}),xn.length===0?i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[i.jsx("p",{className:"text-slate-500 mb-4",children:"No times available for this date"}),Se?i.jsx("div",{className:"mt-4 text-left",children:i.jsx(D1,{shopId:r,slug:s,selectedService:T,selectedStaff:V,staffMembers:w,preferredDate:k,onCancel:()=>ge(!1)})}):i.jsxs("button",{onClick:()=>ge(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(Xh,{className:"w-4 h-4"}),"Join the Waitlist"]})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:xn.sort((ye,fe)=>ye.time.localeCompare(fe.time)).map(ye=>i.jsxs("button",{onClick:()=>Kt(ye),className:"group bg-white border border-slate-200 hover:border-blue-400 rounded-xl p-4 transition-all duration-200 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5 text-center",children:[i.jsx("div",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-700 transition-colors mb-1",children:$a(ye.time)}),ye.staffName&&V==="any"&&i.jsxs("div",{className:"text-xs text-violet-600 mb-0.5 flex items-center justify-center gap-1",children:[i.jsx(Ht,{className:"w-3 h-3"}),ye.staffName]}),i.jsx("div",{className:"text-xs text-slate-400",children:T?Cn(T.duration):`${ye.duration} min`})]},ye.id))})]}),!k&&i.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]}),je==="form"&&i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Complete Your Booking"}),i.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Review your details and confirm"}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[T&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(gs,{className:"w-4 h-4 text-blue-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:T.name})]}),i.jsx("span",{className:"font-bold text-blue-600",children:Ps(T.price)})]}),V&&V!=="any"&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(Xc,{name:V.name,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-slate-800",children:V.name}),V.role&&i.jsxs("span",{className:"text-slate-400 text-sm ml-1.5",children:[" ",V.role]})]})]}),V==="any"&&E?.staffName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(Xc,{name:E.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:E.staffName})]}),i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Pt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"font-semibold text-slate-800",children:[In(E.date)," at ",$a(E.time)]})]}),i.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(cn,{className:"w-4 h-4 text-slate-500"})}),i.jsx("span",{children:T?Cn(T.duration):`${E.duration} min`})]})]}),i.jsxs("form",{onSubmit:wt,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),i.jsx("input",{type:"text",value:D.name,onChange:ye=>R({...D,name:ye.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:D.email,onChange:ye=>R({...D,email:ye.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),i.jsx("input",{type:"tel",value:D.phone,onChange:ye=>R({...D,phone:ye.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(fi,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Make this recurring"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Book the same slot on a regular schedule"})]})]}),i.jsx("button",{type:"button",onClick:()=>pe(!ce),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${ce?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${ce?"translate-x-6":"translate-x-1"}`})})]}),ce&&i.jsxs("div",{className:"space-y-3 pt-1 animate-fade-in",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Repeat every"}),i.jsxs("select",{value:we,onChange:ye=>Ie(ye.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[i.jsx("option",{value:"weekly",children:"Week"}),i.jsx("option",{value:"biweekly",children:"2 Weeks"}),i.jsx("option",{value:"fourweekly",children:"4 Weeks"}),i.jsx("option",{value:"monthly",children:"Month"})]})]}),ct&&i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[" Every ",ct.intervalLabel," through ",ct.endDate]}),i.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[ct.total," total appointment",ct.total!==1?"s":""]}),ct.skipped>0&&i.jsxs("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:[" ",ct.skipped," date",ct.skipped!==1?"s":""," will be skipped due to existing bookings"]})]})]})]}),zt&&i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 border border-emerald-200 rounded-xl",children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0",children:i.jsx(gr,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-emerald-800",children:["$",(F/100).toFixed(2)," deposit required"]}),i.jsxs("p",{className:"text-xs text-emerald-600",children:[T.depositPercent,"% of service price  Remaining $",(T.price-F/100).toFixed(2)," due at appointment"]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:I,className:`flex-1 flex items-center justify-center gap-2 px-6 py-3.5 ${zt?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-600/20 hover:shadow-emerald-600/25":"bg-blue-600 hover:bg-blue-700 shadow-blue-600/20 hover:shadow-blue-600/25"} text-white rounded-xl font-semibold shadow-md hover:shadow-lg transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0`,children:I?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Booking"]}):zt?i.jsxs(i.Fragment,{children:[i.jsx(gr,{className:"w-4 h-4"}),"Continue to Payment"]}):i.jsxs(i.Fragment,{children:[i.jsx(Kn,{className:"w-4 h-4"}),"Confirm Booking"]})}),i.jsx("button",{type:"button",onClick:()=>{W(!1),A(null)},className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]}),je==="payment"&&i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Secure Payment"}),i.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Complete your deposit to confirm your booking"}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(Pt,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800",children:T?.name}),i.jsxs("p",{className:"text-sm text-slate-500",children:[E&&In(E.date)," at ",E&&$a(E.time)]})]})]}),i.jsxs("div",{className:"text-sm text-slate-600 pl-13",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Client:"})," ",D.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",D.email]})]})]}),!e?.payoutsEnabled&&i.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(gr,{className:"w-4 h-4 text-amber-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-amber-800 text-sm",children:"Payment Setup in Progress"}),i.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"This shop is still setting up their payment system. You can still book, but payment will be collected at the time of your appointment."}),i.jsx("button",{onClick:()=>Nt(),disabled:I,className:"mt-3 flex items-center gap-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-semibold text-sm transition-all disabled:opacity-50",children:I?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Booking"]}):i.jsxs(i.Fragment,{children:[i.jsx(Kn,{className:"w-4 h-4"}),"Book Without Deposit"]})})]})]})}),e?.payoutsEnabled&&i.jsx(cO,{amount:F,serviceName:T?.name||"Service",clientInfo:D,onSuccess:$n,onCancel:()=>nn(!1),shopId:r,bookingRefCode:null,shopHasConnect:e?.payoutsEnabled}),!e?.payoutsEnabled&&i.jsx("button",{onClick:()=>nn(!1),className:"w-full px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:" Back"})]})]}),O&&i.jsx(mO,{member:O,onClose:()=>te(null)}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(Ze,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})})})]})}function gO({slotsByDate:s,bookingsByDate:e,selectedDate:n,onSelectDate:r,recurringDayFlags:o={}}){const[u,d]=j.useState(new Date),p=ie=>{const ue=ie.getFullYear(),W=ie.getMonth(),E=new Date(ue,W,1),k=new Date(ue,W+1,0).getDate(),B=E.getDay();return{daysInMonth:k,startingDayOfWeek:B,year:ue,month:W}},{daysInMonth:g,startingDayOfWeek:x,year:y,month:w}=p(u),N=()=>{d(new Date(u.getFullYear(),u.getMonth()-1))},T=()=>{d(new Date(u.getFullYear(),u.getMonth()+1))},L=ie=>`${y}-${String(w+1).padStart(2,"0")}-${String(ie).padStart(2,"0")}`,V=ie=>{const ue=L(ie),W=s[ue]||[],E=e[ue]||[],A=W.filter(B=>B.available).length,k=E.length;return{availableCount:A,bookedCount:k,hasData:W.length>0||E.length>0}},M=ie=>{const ue=L(ie);r(ue===n?null:ue)},U=["January","February","March","April","May","June","July","August","September","October","November","December"],G=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],q=new Date;return q.setHours(0,0,0,0),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-5",children:[i.jsx("button",{onClick:N,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(rj,{className:"w-5 h-5 text-slate-600"})}),i.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[U[w]," ",y]}),i.jsx("button",{onClick:T,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(tx,{className:"w-5 h-5 text-slate-600"})})]}),i.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:G.map(ie=>i.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:ie},ie))}),i.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:x}).map((ie,ue)=>i.jsx("div",{},`empty-${ue}`)),Array.from({length:g}).map((ie,ue)=>{const W=ue+1,E=L(W),{availableCount:A,bookedCount:k,hasData:B}=V(W),P=E===n,H=new Date,I=H.getDate()===W&&H.getMonth()===w&&H.getFullYear()===y,$=new Date(y,w,W),D=$.getDay(),R=o[D]&&$>=q;return i.jsxs("button",{onClick:()=>M(W),className:`
                relative p-2 text-center rounded-lg text-sm font-semibold transition-all duration-200 min-h-[56px] flex flex-col items-center justify-start cursor-pointer
                ${P?"bg-blue-600 text-white shadow-md shadow-blue-600/30":B||R?"bg-slate-50 hover:bg-slate-100 text-slate-900 border border-slate-200 hover:border-slate-300":I?"text-slate-900 font-bold hover:bg-slate-50":"text-slate-400 hover:bg-slate-50"}
              `,children:[i.jsxs("span",{className:`text-sm ${I&&!P?"relative":""}`,children:[W,I&&!P&&i.jsx("span",{className:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]}),(B||R)&&i.jsxs("div",{className:"flex gap-0.5 mt-1 flex-wrap justify-center",children:[R&&i.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${P?"bg-white/20 text-white":"bg-violet-100 text-violet-700"}`,children:"R"}),A>0&&i.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${P?"bg-white/20 text-white":"bg-emerald-100 text-emerald-700"}`,children:A}),k>0&&i.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${P?"bg-white/20 text-white":"bg-blue-100 text-blue-700"}`,children:k})]})]},W)})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-slate-500",children:[Object.keys(o).length>0&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-violet-100 border border-violet-200 rounded flex items-center justify-center text-[7px] font-bold text-violet-700",children:"R"}),i.jsx("span",{children:"Recurring"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-emerald-100 border border-emerald-200 rounded"}),i.jsx("span",{children:"Available"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-blue-100 border border-blue-200 rounded"}),i.jsx("span",{children:"Booked"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-blue-600 rounded"}),i.jsx("span",{children:"Selected"})]})]})]})}const xO=[{value:15,label:"15 min"},{value:30,label:"30 min"},{value:45,label:"45 min"},{value:60,label:"1 hour"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}],bO=[{value:0,label:"No deposit required"},{value:10,label:"10%"},{value:20,label:"20%"},{value:25,label:"25%"},{value:50,label:"50%"},{value:100,label:"Full payment upfront"}];function yO({shopId:s}){const[e,n]=j.useState([]),[r,o]=j.useState(!1),[u,d]=j.useState(null),[p,g]=j.useState({name:"",description:"",duration:30,price:"",depositPercent:0}),[x,y]=j.useState(!1);j.useEffect(()=>{if(!s)return;const U=Jt(Je(Ee,"shops",s,"services"),G=>{const q=G.docs.map(ie=>({id:ie.id,...ie.data()})).filter(ie=>ie.active!==!1).sort((ie,ue)=>(ie.name||"").localeCompare(ue.name||""));n(q)});return()=>U()},[s]);const w=()=>{g({name:"",description:"",duration:30,price:"",depositPercent:0}),o(!1),d(null)},N=async U=>{U.preventDefault(),y(!0);const G={name:p.name.trim(),description:p.description.trim(),duration:parseInt(p.duration),price:parseFloat(p.price),depositPercent:parseInt(p.depositPercent)||0,active:!0};try{u?await it(Ge(Ee,"shops",s,"services",u),G):await jr(Je(Ee,"shops",s,"services"),{...G,createdAt:$g()}),w()}catch(q){console.error("Error saving service:",q)}finally{y(!1)}},T=U=>{g({name:U.name,description:U.description||"",duration:U.duration,price:U.price.toString(),depositPercent:U.depositPercent||0}),d(U.id),o(!0)},L=async U=>{try{await it(Ge(Ee,"shops",s,"services",U),{active:!1})}catch(G){console.error("Error deleting service:",G)}},V=U=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(U),M=U=>{if(U<60)return`${U} min`;const G=Math.floor(U/60),q=U%60;return q?`${G}h ${q}m`:`${G}h`};return i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Services"}),i.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Define the services you offer  clients will pick one before booking"})]}),!r&&i.jsxs("button",{onClick:()=>{w(),o(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[i.jsx(wi,{className:"w-4 h-4"}),"Add Service"]})]}),r&&i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Service":"New Service"}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Service Name *"}),i.jsx("input",{type:"text",value:p.name,onChange:U=>g({...p,name:U.target.value}),required:!0,placeholder:"e.g. Haircut",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description (optional)"}),i.jsx("input",{type:"text",value:p.description,onChange:U=>g({...p,description:U.target.value}),placeholder:"e.g. Classic cut and style",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Duration *"}),i.jsx("select",{value:p.duration,onChange:U=>g({...p,duration:U.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:xO.map(U=>i.jsx("option",{value:U.value,children:U.label},U.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Price (USD) *"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-semibold",children:"$"}),i.jsx("input",{type:"number",step:"0.01",min:"0",value:p.price,onChange:U=>g({...p,price:U.target.value}),required:!0,placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx(gr,{className:"w-4 h-4 text-emerald-500"}),"Deposit Required"]})}),i.jsx("select",{value:p.depositPercent,onChange:U=>g({...p,depositPercent:U.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:bO.map(U=>i.jsx("option",{value:U.value,children:U.label},U.value))})]})]}),p.depositPercent>0&&p.price&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-emerald-50 border border-emerald-200 rounded-lg text-sm",children:[i.jsx(gr,{className:"w-4 h-4 text-emerald-600"}),i.jsxs("span",{className:"text-emerald-800",children:["Clients will pay ",i.jsxs("strong",{children:["$",((parseFloat(p.price)||0)*(parseInt(p.depositPercent)/100)).toFixed(2)]})," deposit at booking",parseInt(p.depositPercent)<100&&i.jsxs("span",{children:[" ($",((parseFloat(p.price)||0)*(1-parseInt(p.depositPercent)/100)).toFixed(2)," remaining due at appointment)"]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[i.jsx(fs,{className:"w-4 h-4"}),x?"Saving":u?"Update Service":"Add Service"]}),i.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[i.jsx(xr,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No services yet"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Add your first service so clients can choose what to book"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(U=>i.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:U.name}),U.description&&i.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:U.description})]}),i.jsx("span",{className:"text-xl font-bold text-blue-600 whitespace-nowrap ml-3",children:V(U.price)})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx(cn,{className:"w-4 h-4"}),M(U.duration)]}),U.depositPercent>0&&i.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full text-xs font-medium",children:[i.jsx(gr,{className:"w-3 h-3"}),U.depositPercent,"% deposit"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>T(U),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:[i.jsx(lj,{className:"w-3.5 h-3.5"}),"Edit"]}),i.jsx("button",{onClick:()=>L(U.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:i.jsx(xu,{className:"w-3.5 h-3.5"})})]})]},U.id))})]})}const t0=[{key:"monday",label:"Monday",short:"Mon"},{key:"tuesday",label:"Tuesday",short:"Tue"},{key:"wednesday",label:"Wednesday",short:"Wed"},{key:"thursday",label:"Thursday",short:"Thu"},{key:"friday",label:"Friday",short:"Fri"},{key:"saturday",label:"Saturday",short:"Sat"},{key:"sunday",label:"Sunday",short:"Sun"}],vO={enabled:!1,start:"09:00",end:"17:00",break:null};function wO({shopId:s,staffId:e,staffName:n,weeklyHours:r,onClose:o}){const[u,d]=j.useState(()=>{const M={};for(const U of t0){const G=r?.[U.key];G?M[U.key]={enabled:!!G.enabled,start:G.start||"09:00",end:G.end||"17:00",break:G.break?{start:G.break.start,end:G.break.end}:null}:M[U.key]={...vO}}return M}),[p,g]=j.useState(!1),[x,y]=j.useState(null),w=(M,U,G)=>{d(q=>({...q,[M]:{...q[M],[U]:G}}))},N=M=>{d(U=>({...U,[M]:{...U[M],break:U[M].break?null:{start:"12:00",end:"13:00"}}}))},T=(M,U,G)=>{d(q=>({...q,[M]:{...q[M],break:{...q[M].break,[U]:G}}}))},L=M=>{const U=u[M];d(G=>{const q={...G};for(const ie of t0)ie.key!==M&&(q[ie.key]={enabled:U.enabled,start:U.start,end:U.end,break:U.break?{...U.break}:null});return q}),y(M),setTimeout(()=>y(null),1500)},V=async()=>{g(!0);try{await it(Ge(Ee,"shops",s,"staff",e),{weeklyHours:u}),o()}catch(M){console.error("Error saving weekly hours:",M)}finally{g(!1)}};return i.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Weekly Hours"}),i.jsx("p",{className:"text-sm text-slate-500",children:n})]}),i.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(xr,{className:"w-5 h-5 text-slate-400"})})]}),i.jsx("div",{className:"space-y-3",children:t0.map(({key:M,label:U})=>{const G=u[M];return i.jsx("div",{className:`rounded-xl p-4 transition-all ${G.enabled?"bg-blue-50 border border-blue-200":"bg-slate-50 border border-slate-200"}`,children:i.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-[140px]",children:[i.jsx("button",{type:"button",onClick:()=>w(M,"enabled",!G.enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${G.enabled?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${G.enabled?"translate-x-6":"translate-x-1"}`})}),i.jsx("span",{className:`font-semibold text-sm ${G.enabled?"text-slate-900":"text-slate-400"}`,children:U})]}),G.enabled?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cn,{className:"w-4 h-4 text-blue-500"}),i.jsx("input",{type:"time",value:G.start,onChange:q=>w(M,"start",q.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("span",{className:"text-slate-400 text-sm",children:"to"}),i.jsx("input",{type:"time",value:G.end,onChange:q=>w(M,"end",q.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>N(M),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${G.break?"bg-amber-100 text-amber-700 border border-amber-200":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,children:[i.jsx(uD,{className:"w-3.5 h-3.5"}),G.break?"Break":"+ Break"]}),G.break&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("input",{type:"time",value:G.break.start,onChange:q=>T(M,"start",q.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"}),i.jsx("span",{className:"text-slate-400 text-xs",children:""}),i.jsx("input",{type:"time",value:G.break.end,onChange:q=>T(M,"end",q.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"})]})]}),i.jsx("button",{type:"button",onClick:()=>L(M),className:"text-xs text-blue-500 hover:text-blue-700 font-medium transition-colors whitespace-nowrap",children:x===M?" Copied!":"Copy to all"})]}):i.jsx("span",{className:"text-sm text-slate-400 italic",children:"Day off"})]})},M)})}),i.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-200",children:[i.jsxs("button",{onClick:V,disabled:p,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[i.jsx(XD,{className:"w-4 h-4"}),p?"Saving":"Save Hours"]}),i.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[i.jsx(xr,{className:"w-4 h-4"}),"Cancel"]})]})]})}const hr={free:{name:"Free",price:0,staffLimit:1,platformFeePercent:5,features:["basicBooking","emailNotifications"]},pro:{name:"Pro",price:29,priceId:null,staffLimit:5,platformFeePercent:0,features:["basicBooking","emailNotifications","aiAssistant","recurringBookings","waitlist","crm","analytics","smsNotifications","customBranding"]},unlimited:{name:"Unlimited",price:79,priceId:null,staffLimit:1/0,platformFeePercent:0,features:["basicBooking","emailNotifications","aiAssistant","recurringBookings","waitlist","crm","analytics","smsNotifications","customBranding","walkIns","multiLocation","noBranding","apiAccess","prioritySupport"]}},_O={basicBooking:{name:"Online Booking",description:"Accept bookings through your booking page"},emailNotifications:{name:"Email Notifications",description:"Automatic booking confirmations and reminders"},aiAssistant:{name:"AI Booking Assistant",description:"Smart suggestions and automated responses"},recurringBookings:{name:"Recurring Bookings",description:"Schedule repeating appointments"},waitlist:{name:"Waitlist",description:"Let clients join a waitlist when fully booked"},crm:{name:"Client CRM",description:"Client notes, history, and win-back tracking"},analytics:{name:"Analytics",description:"Detailed booking and revenue analytics"},smsNotifications:{name:"SMS Notifications",description:"Send text message reminders to clients"},customBranding:{name:"Custom Branding",description:"Customize colors and branding on your booking page"},walkIns:{name:"Walk-in Queue",description:"Manage walk-in clients with live queue"},multiLocation:{name:"Multi-Location",description:"Manage multiple business locations"},noBranding:{name:"Remove SpotBookie Branding",description:"White-label your booking experience"},apiAccess:{name:"API Access",description:"Integrate with external tools and systems"},prioritySupport:{name:"Priority Support",description:"24/7 priority customer support"}};function Tj(s){const e=s?.subscriptionTier||"free";return hr[e]?.staffLimit||1}function NO(s,e){const n=Tj(s);return e<n}function jO(s,e){const n=hr[s]||hr.free,r=hr[e];return r?r.features.filter(o=>!n.features.includes(o)):[]}function EO(s){const e=["free","pro","unlimited"],n=e.indexOf(s||"free");return e.slice(n+1).map(r=>({key:r,...hr[r],newFeatures:jO(s,r)}))}const SO="https://us-central1-scheduler-65e51.cloudfunctions.net",TO={pro:"price_1Sxx7ILhwB1Jyzw8UvRxE5FT",unlimited:"price_1Sxx7JLhwB1Jyzw8uw9BRYhO"};function AO({isOpen:s,onClose:e,shopId:n,slug:r,currentTier:o="free",feature:u,title:d,description:p}){const[g,x]=j.useState(null),[y,w]=j.useState(null);if(!s)return null;const N=EO(o),T=async L=>{x(L),w(null);try{const V=await fetch(`${SO}/createCheckoutSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:n,priceId:TO[L],successUrl:`${window.location.origin}/#/shop/${r}/dashboard?subscription=success`,cancelUrl:`${window.location.origin}/#/shop/${r}/dashboard?subscription=canceled`})}),M=await V.json();if(!V.ok)throw new Error(M.error||"Failed to create checkout session");window.location.href=M.url}catch(V){console.error("Upgrade error:",V),w(V.message),x(null)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-violet-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/20",children:i.jsx(Af,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:d||"Upgrade Required"}),i.jsx("p",{className:"text-sm text-slate-500",children:p||"Unlock more features with a premium plan"})]})]}),i.jsx("button",{onClick:e,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all",children:i.jsx(xr,{className:"w-5 h-5"})})]}),y&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:y}),i.jsx("div",{className:"space-y-3",children:N.map(L=>i.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${L.key==="pro"?"border-blue-300 bg-blue-50/50":"border-violet-300 bg-violet-50/50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-slate-900",children:L.name}),i.jsxs("p",{className:"text-lg font-extrabold text-slate-900",children:["$",L.price,i.jsx("span",{className:"text-sm font-normal text-slate-500",children:"/month"})]})]}),i.jsx("button",{onClick:()=>T(L.key),disabled:g,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-sm transition-all disabled:opacity-50 ${L.key==="pro"?"bg-blue-500 hover:bg-blue-600 text-white shadow-md shadow-blue-500/20":"bg-violet-500 hover:bg-violet-600 text-white shadow-md shadow-violet-500/20"}`,children:g===L.key?i.jsx(Qs,{className:"w-4 h-4 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(Du,{className:"w-4 h-4"}),"Upgrade"]})})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[L.key==="pro"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white border border-blue-200 rounded-lg text-xs font-medium text-blue-700",children:[i.jsx(Ht,{className:"w-3 h-3"}),"5 staff"]}),L.key==="unlimited"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white border border-violet-200 rounded-lg text-xs font-medium text-violet-700",children:[i.jsx(Ht,{className:"w-3 h-3"}),"Unlimited staff"]}),i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-emerald-50 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700",children:[i.jsx(fs,{className:"w-3 h-3"}),"No platform fees"]})]})]},L.key))}),i.jsx("p",{className:"text-xs text-slate-400 text-center mt-4",children:"Cancel anytime  14-day money-back guarantee"})]})})}function CO({currentCount:s,limit:e,onUpgradeClick:n}){const r=s>=e,o=s>=e-1&&s<e;return!r&&!o?null:i.jsxs("div",{className:`rounded-xl p-4 flex items-center justify-between gap-4 mb-4 ${r?"bg-amber-50 border border-amber-200":"bg-blue-50 border border-blue-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${r?"bg-amber-100":"bg-blue-100"}`,children:i.jsx(Ht,{className:`w-5 h-5 ${r?"text-amber-600":"text-blue-600"}`})}),i.jsxs("div",{children:[i.jsx("p",{className:`font-semibold text-sm ${r?"text-amber-900":"text-blue-900"}`,children:r?"Staff limit reached":"Almost at staff limit"}),i.jsxs("p",{className:"text-xs text-slate-600",children:["You have ",s," of ",e," staff member",e!==1?"s":"",".",r?" Upgrade to add more.":" Upgrade before you need more."]})]})]}),i.jsxs("button",{onClick:n,className:`flex items-center gap-1.5 px-4 py-2 rounded-lg font-semibold text-sm transition-all shadow-md flex-shrink-0 ${r?"bg-amber-500 hover:bg-amber-600 text-white shadow-amber-500/20":"bg-blue-500 hover:bg-blue-600 text-white shadow-blue-500/20"}`,children:[i.jsx(Du,{className:"w-4 h-4"}),"Upgrade"]})]})}const RO=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}],kO=5*1024*1024,IO=["image/jpeg","image/png","image/webp"];function H1(s){if(!s)return"";const[e,n]=s.split(":").map(Number),r=e>=12?"p":"a",o=e%12||12;return n===0?`${o}${r}`:`${o}:${n.toString().padStart(2,"0")}${r}`}function DO({shopId:s,shop:e,slug:n}){const[r,o]=j.useState([]),[u,d]=j.useState(!1),[p,g]=j.useState(null),[x,y]=j.useState(null),[w,N]=j.useState(null),[T,L]=j.useState({name:"",role:""}),[V,M]=j.useState(!1),[U,G]=j.useState(!1),q=Tj(e),ie=NO(e,r.length),[ue,W]=j.useState(null),[E,A]=j.useState(""),[k,B]=j.useState(!1),[P,H]=j.useState(!1),[I,$]=j.useState(""),[D,R]=j.useState(null),[K,oe]=j.useState(null),[Se,ge]=j.useState(null),O=j.useRef(null);j.useEffect(()=>{if(!s)return;const de=Jt(Je(Ee,"shops",s,"staff"),Ae=>{const De=Ae.docs.map(Le=>({id:Le.id,...Le.data()})).filter(Le=>Le.active!==!1).sort((Le,nt)=>(Le.name||"").localeCompare(nt.name||""));o(De)});return()=>de()},[s]);const te=()=>{L({name:"",role:""}),d(!1),g(null)},ce=async de=>{de.preventDefault(),M(!0);const Ae={name:T.name.trim(),role:T.role.trim(),active:!0};try{p?await it(Ge(Ee,"shops",s,"staff",p),Ae):await jr(Je(Ee,"shops",s,"staff"),{...Ae,email:"",bio:"",portfolio:[],createdAt:$g()}),te()}catch(De){console.error("Error saving staff member:",De)}finally{M(!1)}},pe=de=>{L({name:de.name,role:de.role||""}),g(de.id),d(!0)},we=async de=>{try{await it(Ge(Ee,"shops",s,"staff",de),{active:!1})}catch(Ae){console.error("Error deleting staff member:",Ae)}},Ie=de=>{W(de.id),A(de.bio||"")},ze=async de=>{B(!0);try{await it(Ge(Ee,"shops",s,"staff",de),{bio:E.trim()}),W(null),A("")}catch(Ae){console.error("Error saving bio:",Ae)}finally{B(!1)}},Rt=de=>{R(de),$(""),oe(null),setTimeout(()=>{O.current&&(O.current.value="",O.current.click())},50)},mt=de=>{const Ae=de.target.files?.[0];if(Ae){if(!IO.includes(Ae.type)){alert("Please select a JPG, PNG, or WebP image.");return}if(Ae.size>kO){alert("File size must be under 5MB.");return}oe(Ae)}},nn=async de=>{if(K){H(!0);try{const Ae=Date.now(),De=K.name.split(".").pop(),Le=`${Ae}.${De}`,nt=`shops/${s}/staff/${de}/portfolio/${Le}`,ct=w1(_1,nt);await b3(ct,K);const ut=await y3(ct),Pe=r.find(ot=>ot.id===de)?.portfolio||[];await it(Ge(Ee,"shops",s,"staff",de),{portfolio:[...Pe,{url:ut,storagePath:nt,caption:I.trim(),uploadedAt:new Date().toISOString()}]}),R(null),$(""),oe(null)}catch(Ae){console.error("Error uploading photo:",Ae),alert("Upload failed. Please try again.")}finally{H(!1)}}},se=async(de,Ae)=>{const De=r.find(nt=>nt.id===de);if(!De)return;const Le=De.portfolio[Ae];if(Le){ge(`${de}-${Ae}`);try{if(Le.storagePath)try{const ct=w1(_1,Le.storagePath);await v3(ct)}catch(ct){console.warn("Storage delete warning:",ct)}const nt=De.portfolio.filter((ct,ut)=>ut!==Ae);await it(Ge(Ee,"shops",s,"staff",de),{portfolio:nt})}catch(nt){console.error("Error deleting photo:",nt),alert("Failed to delete photo.")}finally{ge(null)}}},Ne=de=>{if(!de)return null;const Ae=RO.filter(De=>de[De.key]?.enabled);return Ae.length===0?null:Ae.map(De=>{const Le=de[De.key];return`${De.short} ${H1(Le.start)}${H1(Le.end)}`})};return i.jsxs("div",{children:[i.jsx("input",{ref:O,type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:mt}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Staff"}),i.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Manage your team  assign availability and bookings per staff member"})]}),!u&&(ie?i.jsxs("button",{onClick:()=>{te(),d(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[i.jsx(wi,{className:"w-4 h-4"}),"Add Staff"]}):i.jsxs("button",{onClick:()=>G(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white rounded-xl font-semibold shadow-lg shadow-amber-500/30 hover:shadow-xl hover:shadow-amber-500/40 transition-all hover:-translate-y-0.5",children:[i.jsx(Af,{className:"w-4 h-4"}),"Upgrade to Add More"]}))]}),i.jsx(CO,{currentCount:r.length,limit:q,onUpgradeClick:()=>G(!0)}),i.jsx(AO,{isOpen:U,onClose:()=>G(!1),shopId:s,slug:n,currentTier:e?.subscriptionTier||"free",title:"Add More Staff Members",description:`Your ${e?.subscriptionTier||"Free"} plan allows ${q} staff member${q!==1?"s":""}. Upgrade to add more.`}),u&&i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:p?"Edit Staff Member":"New Staff Member"}),i.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name *"}),i.jsx("input",{type:"text",value:T.name,onChange:de=>L({...T,name:de.target.value}),required:!0,placeholder:"e.g. Jane Smith",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Role (optional)"}),i.jsx("input",{type:"text",value:T.role,onChange:de=>L({...T,role:de.target.value}),placeholder:"e.g. Senior Stylist",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs("button",{type:"submit",disabled:V,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[i.jsx(fs,{className:"w-4 h-4"}),V?"Saving":p?"Update Staff":"Add Staff"]}),i.jsxs("button",{type:"button",onClick:te,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[i.jsx(xr,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),r.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No staff members yet"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Add your team members to assign them availability and bookings"})]}):i.jsx("div",{className:"space-y-4",children:r.map(de=>{const Ae=Ne(de.weeklyHours),De=de.portfolio||[];return i.jsxs("div",{children:[i.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:de.name}),de.role&&i.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:de.role})]}),i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(Ht,{className:"w-5 h-5 text-blue-600"})})]}),i.jsx("div",{className:"mb-3",children:ue===de.id?i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:E,onChange:Le=>A(Le.target.value),placeholder:"Write a short bio  specialties, experience, personality",rows:3,maxLength:500,className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>ze(de.id),disabled:k,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[k?i.jsx(Qs,{className:"w-3 h-3 animate-spin"}):i.jsx(fs,{className:"w-3 h-3"}),"Save Bio"]}),i.jsx("button",{onClick:()=>{W(null),A("")},className:"px-3 py-1.5 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"}),i.jsxs("span",{className:"text-xs text-slate-400 ml-auto",children:[E.length,"/500"]})]})]}):i.jsx("div",{onClick:()=>Ie(de),className:"cursor-pointer group",children:de.bio?i.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed group-hover:text-slate-800 transition-colors",children:[de.bio,i.jsx("span",{className:"ml-1.5 text-xs text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"edit"})]}):i.jsx("p",{className:"text-sm text-slate-400 italic group-hover:text-blue-500 transition-colors",children:"+ Add a bio"})})}),Ae?i.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5",children:Ae.map((Le,nt)=>i.jsx("span",{className:"inline-block px-2 py-0.5 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium",children:Le},nt))}):i.jsx("p",{className:"text-xs text-slate-400 mb-3 italic",children:"No weekly hours set"}),De.length>0&&w!==de.id&&i.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[i.jsx("div",{className:"flex -space-x-1",children:De.slice(0,4).map((Le,nt)=>i.jsx("img",{src:Le.url,alt:Le.caption||"Portfolio",className:"w-10 h-10 rounded-lg object-cover border-2 border-white shadow-sm"},nt))}),i.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[De.length," photo",De.length!==1?"s":""]})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsxs("button",{onClick:()=>y(x===de.id?null:de.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${x===de.id?"bg-blue-100 text-blue-700 border-blue-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[i.jsx(cn,{className:"w-3.5 h-3.5"}),"Set Hours"]}),i.jsxs("button",{onClick:()=>N(w===de.id?null:de.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${w===de.id?"bg-violet-100 text-violet-700 border-violet-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[i.jsx(W3,{className:"w-3.5 h-3.5"}),"Portfolio"]}),i.jsx("button",{onClick:()=>pe(de),className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:i.jsx(lj,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>we(de.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:i.jsx(xu,{className:"w-3.5 h-3.5"})})]})]}),x===de.id&&i.jsx("div",{className:"mt-2",children:i.jsx(wO,{shopId:s,staffId:de.id,staffName:de.name,weeklyHours:de.weeklyHours,onClose:()=>y(null)})}),w===de.id&&i.jsxs("div",{className:"mt-2 bg-white border-2 border-violet-200 rounded-xl p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-800 flex items-center gap-2",children:[i.jsx(SD,{className:"w-4 h-4 text-violet-600"}),"Portfolio  ",de.name]}),i.jsxs("button",{onClick:()=>Rt(de.id),disabled:P,className:"flex items-center gap-1.5 px-3 py-1.5 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[i.jsx(wi,{className:"w-3 h-3"}),"Add Photo"]})]}),D===de.id&&K&&i.jsxs("div",{className:"mb-4 p-3 bg-violet-50 border border-violet-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-16 h-16 rounded-lg bg-slate-200 overflow-hidden flex-shrink-0",children:i.jsx("img",{src:URL.createObjectURL(K),alt:"Preview",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-xs text-slate-600 font-medium mb-1 truncate",children:K.name}),i.jsxs("p",{className:"text-xs text-slate-400",children:[(K.size/1024/1024).toFixed(1)," MB"]})]})]}),i.jsx("input",{type:"text",value:I,onChange:Le=>$(Le.target.value),placeholder:"Add a caption (optional)",maxLength:200,className:"w-full px-3 py-2 text-sm border border-violet-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-400 focus:border-transparent mb-2"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>nn(de.id),disabled:P,className:"flex items-center gap-1.5 px-4 py-2 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:P?i.jsxs(i.Fragment,{children:[i.jsx(Qs,{className:"w-3 h-3 animate-spin"}),"Uploading"]}):i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-3 h-3"}),"Upload"]})}),i.jsx("button",{onClick:()=>{R(null),oe(null),$("")},className:"px-3 py-2 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}),De.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet. Add some to showcase work!"})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:De.map((Le,nt)=>i.jsxs("div",{className:"group relative bg-slate-50 rounded-lg overflow-hidden border border-slate-200 shadow-sm",children:[i.jsx("div",{className:"aspect-square",children:i.jsx("img",{src:Le.url,alt:Le.caption||"Portfolio photo",className:"w-full h-full object-cover"})}),Le.caption&&i.jsx("div",{className:"px-2 py-1.5",children:i.jsx("p",{className:"text-xs text-slate-600 truncate",children:Le.caption})}),i.jsx("button",{onClick:()=>se(de.id,nt),disabled:Se===`${de.id}-${nt}`,className:"absolute top-1.5 right-1.5 w-7 h-7 bg-red-500/90 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-md disabled:opacity-50",title:"Delete photo",children:Se===`${de.id}-${nt}`?i.jsx(Qs,{className:"w-3.5 h-3.5 animate-spin"}):i.jsx(xu,{className:"w-3.5 h-3.5"})})]},nt))})]})]},de.id)})})]})}function el(s){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function MO(s){const e=new Date(s),n=e.getDay(),r=n===0?-6:1-n;return e.setDate(e.getDate()+r),e.setHours(0,0,0,0),e}function tl(s){return`$${Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function G1(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Y1(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{weekday:"short"})}function n0(s,e){return e===0&&s===0?0:e===0?100:(s-e)/e*100}function OO({bookings:s}){const[e,n]=j.useState(null),[r,o]=j.useState(null),u=j.useMemo(()=>s.filter($=>$.status==="confirmed"||$.status==="pending"||!$.status),[s]),d=j.useMemo(()=>{const $=new Date;return $.setHours(0,0,0,0),$},[]),p=j.useMemo(()=>el(d),[d]),g=j.useMemo(()=>MO(d),[d]),x=j.useMemo(()=>{const $=new Date(g);return $.setDate($.getDate()+6),$},[g]),y=j.useMemo(()=>{const $=new Date(g);return $.setDate($.getDate()-7),$},[g]),w=j.useMemo(()=>{const $=new Date(y);return $.setDate($.getDate()+6),$},[y]),N=j.useMemo(()=>new Date(d.getFullYear(),d.getMonth(),1),[d]),T=j.useMemo(()=>new Date(d.getFullYear(),d.getMonth()-1,1),[d]),L=j.useMemo(()=>{const $=new Date(N);return $.setDate($.getDate()-1),$},[N]),V=j.useMemo(()=>{const $=new Date(d);return $.setDate($.getDate()-1),el($)},[d]),M=j.useMemo(()=>{const $=ce=>ce.reduce((pe,we)=>pe+(Number(we.servicePrice)||0),0),D=(ce,pe,we)=>ce.date>=el(pe)&&ce.date<=el(we),R=$(u.filter(ce=>ce.date===p)),K=$(u.filter(ce=>ce.date===V)),oe=$(u.filter(ce=>D(ce,g,x))),Se=$(u.filter(ce=>D(ce,y,w))),ge=$(u.filter(ce=>D(ce,N,d))),O=$(u.filter(ce=>D(ce,T,L))),te=$(u);return{today:R,todayChange:n0(R,K),week:oe,weekChange:n0(oe,Se),month:ge,monthChange:n0(ge,O),allTime:te}},[u,p,V,g,x,y,w,N,L,d]),U=j.useMemo(()=>{const $=[];for(let D=13;D>=0;D--){const R=new Date(d);R.setDate(R.getDate()-D),$.push(el(R))}return $},[d]),G=j.useMemo(()=>{const $={};return U.forEach(D=>{$[D]=0}),u.forEach(D=>{$[D.date]!==void 0&&($[D.date]+=Number(D.servicePrice)||0)}),U.map(D=>({date:D,value:$[D]}))},[u,U]),q=j.useMemo(()=>Math.max(...G.map($=>$.value),1),[G]),ie=j.useMemo(()=>{const $={},D={};return U.forEach(R=>{$[R]=0,D[R]=0}),s.forEach(R=>{$[R.date]!==void 0&&(R.status==="cancelled"||R.status==="rejected"?D[R.date]++:$[R.date]++)}),U.map(R=>({date:R,confirmed:$[R],cancelled:D[R],total:$[R]+D[R]}))},[s,U]),ue=j.useMemo(()=>Math.max(...ie.map($=>$.total),1),[ie]),W=j.useMemo(()=>{const $=s.length;if($===0)return 100;const D=s.filter(R=>R.status==="cancelled"||R.status==="rejected").length;return Math.round(($-D)/$*100)},[s]),E=j.useMemo(()=>{const $=Array.from({length:7},()=>Array(24).fill(0));u.forEach(R=>{if(!R.date||!R.time)return;const oe=new Date(R.date+"T12:00:00").getDay(),Se=parseInt(R.time.split(":")[0],10);!isNaN(oe)&&!isNaN(Se)&&$[oe][Se]++});let D=0;return $.forEach(R=>R.forEach(K=>{K>D&&(D=K)})),{grid:$,max:D}},[u]),A=j.useMemo(()=>{const $={};return u.forEach(D=>{const R=D.serviceName||"Unknown";$[R]||($[R]={name:R,count:0,revenue:0}),$[R].count++,$[R].revenue+=Number(D.servicePrice)||0}),Object.values($).map(D=>({...D,avgRevenue:D.count>0?D.revenue/D.count:0})).sort((D,R)=>R.revenue-D.revenue)},[u]),k=j.useMemo(()=>{const $={};return u.forEach(D=>{const R=D.staffName||"Unassigned";$[R]||($[R]={name:R,count:0,revenue:0,clients:new Set}),$[R].count++,$[R].revenue+=Number(D.servicePrice)||0,D.clientEmail&&$[R].clients.add(D.clientEmail.toLowerCase())}),Object.values($).map(D=>({...D,clientCount:D.clients.size})).sort((D,R)=>R.revenue-D.revenue)},[u]),B=j.useMemo(()=>{const $=u.map(we=>we.clientEmail?.toLowerCase()).filter(Boolean),D=new Set($).size,R=u.filter(we=>we.date>=el(N)&&we.date<=p),K=new Set(R.map(we=>we.clientEmail?.toLowerCase()).filter(Boolean)),oe=u.filter(we=>we.date<el(N)),Se=new Set(oe.map(we=>we.clientEmail?.toLowerCase()).filter(Boolean));let ge=0,O=0;K.forEach(we=>{Se.has(we)?O++:ge++});const te={};u.forEach(we=>{const Ie=we.clientEmail?.toLowerCase();Ie&&(te[Ie]||(te[Ie]={email:Ie,name:we.clientName||Ie,count:0}),te[Ie].count++,we.clientName&&(te[Ie].name=we.clientName))});const ce=Object.values(te).sort((we,Ie)=>Ie.count-we.count).slice(0,10),pe=D>0?u.length/D:0;return{uniqueClients:D,newThisMonth:ge,returningThisMonth:O,topClients:ce,avgBookingsPerClient:pe}},[u,N,p]),P=({value:$,suffix:D="vs prev"})=>{if($===0)return i.jsxs("span",{className:"flex items-center gap-0.5 text-xs font-medium text-slate-400",children:[i.jsx(BD,{className:"w-3 h-3"})," 0% ",D]});const R=$>0;return i.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-semibold ${R?"text-emerald-600":"text-red-500"}`,children:[R?i.jsx(L3,{className:"w-3 h-3"}):i.jsx(I3,{className:"w-3 h-3"}),R?"+":"",Math.round($),"% ",D]})},H=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I=Array.from({length:15},($,D)=>D+7);return i.jsxs("div",{className:"animate-fade-in space-y-6",children:[i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Today's Revenue",value:M.today,change:M.todayChange,suffix:"vs yesterday",icon:O0,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:M.week,change:M.weekChange,suffix:"vs last week",icon:Cf,color:"bg-violet-100 text-violet-600"},{label:"This Month",value:M.month,change:M.monthChange,suffix:"vs last month",icon:Pt,color:"bg-emerald-100 text-emerald-600"},{label:"All-time Revenue",value:M.allTime,change:null,icon:ex,color:"bg-amber-100 text-amber-600"}].map($=>{const D=$.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${$.color} rounded-xl flex items-center justify-center`,children:i.jsx(D,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:tl($.value)}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5 mb-1",children:$.label}),$.change!==null&&i.jsx(P,{value:$.change,suffix:$.suffix})]},$.label)})}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Revenue"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Last 14 days  confirmed & pending bookings"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-[600px]",children:[i.jsxs("div",{className:"flex items-end gap-0",children:[i.jsxs("div",{className:"flex flex-col justify-between h-48 pr-2 text-right flex-shrink-0 w-16",children:[i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:tl(q)}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:tl(q/2)}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"$0"})]}),i.jsx("div",{className:"flex-1 flex items-end gap-1 h-48 border-b border-l border-slate-200 pl-1 pb-0 relative",children:G.map(($,D)=>{const R=q>0?$.value/q*100:0,K=e===D;return i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative group",onMouseEnter:()=>n(D),onMouseLeave:()=>n(null),onTouchStart:()=>n(D),children:[K&&i.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[tl($.value),i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),i.jsx("div",{className:"w-full rounded-t-md transition-all duration-200 cursor-pointer",style:{height:`${Math.max(R,$.value>0?2:0)}%`,background:K?"linear-gradient(to top, #2563eb, #60a5fa)":"linear-gradient(to top, #3b82f6, #93c5fd)",minHeight:$.value>0?"4px":"0px"}})]},$.date)})})]}),i.jsx("div",{className:"flex ml-16 pl-1",children:G.map($=>i.jsxs("div",{className:"flex-1 text-center",children:[i.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:Y1($.date)}),i.jsx("div",{className:"text-[9px] text-slate-400",children:G1($.date)})]},$.date))})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-5",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Booking Trends"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Last 14 days breakdown"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-blue-500"})," Confirmed"]}),i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-red-400"})," Cancelled"]}),i.jsxs("span",{className:"px-2.5 py-1 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg font-semibold",children:[W,"% completion"]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-[600px]",children:[i.jsxs("div",{className:"flex items-end gap-0",children:[i.jsxs("div",{className:"flex flex-col justify-between h-40 pr-2 text-right flex-shrink-0 w-16",children:[i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:ue}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Math.round(ue/2)}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"0"})]}),i.jsx("div",{className:"flex-1 flex items-end gap-1 h-40 border-b border-l border-slate-200 pl-1 relative",children:ie.map(($,D)=>{const R=ue>0?$.confirmed/ue*100:0,K=ue>0?$.cancelled/ue*100:0,oe=r===D;return i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative",onMouseEnter:()=>o(D),onMouseLeave:()=>o(null),onTouchStart:()=>o(D),children:[oe&&i.jsxs("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[$.confirmed," confirmed, ",$.cancelled," cancelled",i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),i.jsxs("div",{className:"w-full flex flex-col items-stretch",children:[$.cancelled>0&&i.jsx("div",{className:"w-full rounded-t-md bg-red-400 transition-all duration-200",style:{height:`${Math.max(K,2)}%`}}),$.confirmed>0&&i.jsx("div",{className:`w-full bg-blue-500 transition-all duration-200 ${$.cancelled===0?"rounded-t-md":""}`,style:{height:`${Math.max(R,2)}%`}})]})]},$.date)})})]}),i.jsx("div",{className:"flex ml-16 pl-1",children:ie.map($=>i.jsxs("div",{className:"flex-1 text-center",children:[i.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:Y1($.date)}),i.jsx("div",{className:"text-[9px] text-slate-400",children:G1($.date)})]},$.date))})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Busiest Times"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Booking density by day of week and hour"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-[600px]",children:[i.jsxs("table",{className:"w-full border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"w-12"}),I.map($=>i.jsxs("th",{className:"text-[10px] text-slate-400 font-medium pb-2 text-center px-0.5",children:[$%12||12,$>=12?"p":"a"]},$))]})}),i.jsx("tbody",{children:[1,2,3,4,5,6,0].map($=>i.jsxs("tr",{children:[i.jsx("td",{className:"text-[11px] text-slate-500 font-semibold pr-2 py-0.5 text-right",children:H[$]}),I.map(D=>{const R=E.grid[$][D],K=E.max||1,oe=R/K;let Se="bg-slate-50";return R>0&&(oe<=.2?Se="bg-blue-100":oe<=.4?Se="bg-blue-200":oe<=.6?Se="bg-blue-300":oe<=.8?Se="bg-blue-500 text-white":Se="bg-blue-700 text-white"),i.jsx("td",{className:"px-0.5 py-0.5",children:i.jsx("div",{className:`w-full aspect-square rounded-sm ${Se} flex items-center justify-center text-[9px] font-bold transition-all hover:ring-2 hover:ring-blue-400 hover:ring-offset-1 cursor-default`,title:`${H[$]} ${D}:00  ${R} booking${R!==1?"s":""}`,children:R>0?R:""})},D)})]},$))})]}),i.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-3",children:[i.jsx("span",{className:"text-[10px] text-slate-400",children:"Less"}),["bg-slate-50","bg-blue-100","bg-blue-200","bg-blue-300","bg-blue-500","bg-blue-700"].map(($,D)=>i.jsx("div",{className:`w-4 h-4 rounded-sm ${$} border border-slate-200`},D)),i.jsx("span",{className:"text-[10px] text-slate-400",children:"More"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Top Services"}),i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Ranked by revenue from confirmed & pending bookings"}),A.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(gs,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No service data yet"})]}):i.jsx("div",{className:"space-y-2",children:A.map(($,D)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 font-bold text-sm flex-shrink-0",children:D+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:$.name}),i.jsxs("div",{className:"text-xs text-slate-500",children:[$.count," booking",$.count!==1?"s":"","  avg ",tl($.avgRevenue)]})]}),i.jsx("div",{className:"text-sm font-bold text-blue-600 flex-shrink-0",children:tl($.revenue)})]},$.name))})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Staff Performance"}),i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Bookings, revenue & clients per staff member"}),k.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ht,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No staff data yet"})]}):i.jsx("div",{className:"space-y-2",children:k.map(($,D)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center text-violet-600 font-bold text-sm flex-shrink-0",children:D+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:$.name}),i.jsxs("div",{className:"text-xs text-slate-500",children:[$.count," booking",$.count!==1?"s":"","  ",$.clientCount," client",$.clientCount!==1?"s":""]})]}),i.jsx("div",{className:"text-sm font-bold text-violet-600 flex-shrink-0",children:tl($.revenue)})]},$.name))})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Client Insights"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Understanding your client base"}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[i.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:B.uniqueClients}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:"Total Unique Clients"})]}),i.jsxs("div",{className:"bg-emerald-50 rounded-xl border border-emerald-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-emerald-700",children:B.newThisMonth}),i.jsx("div",{className:"text-xs font-medium text-emerald-600 mt-0.5",children:"New This Month"})]}),i.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-blue-700",children:B.returningThisMonth}),i.jsx("div",{className:"text-xs font-medium text-blue-600 mt-0.5",children:"Returning This Month"})]}),i.jsxs("div",{className:"bg-violet-50 rounded-xl border border-violet-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-violet-700",children:B.avgBookingsPerClient.toFixed(1)}),i.jsx("div",{className:"text-xs font-medium text-violet-600 mt-0.5",children:"Avg Bookings / Client"})]})]}),i.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"Top Clients by Frequency"}),B.topClients.length===0?i.jsxs("div",{className:"text-center py-6",children:[i.jsx(xl,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No client data yet"})]}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:B.topClients.map(($,D)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center text-amber-700 font-bold text-xs flex-shrink-0",children:D+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:$.name}),i.jsx("div",{className:"text-xs text-slate-400 truncate",children:$.email})]}),i.jsxs("div",{className:"flex-shrink-0 px-2.5 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-bold",children:[$.count," visit",$.count!==1?"s":""]})]},$.email))})]})]})}function Aj({waitingAhead:s=[],inProgress:e=[],staffCount:n=1,upcomingBookings:r=[],defaultDuration:o=30}){const u=Math.max(n,1),d=Date.now(),p=e.map(y=>{const w=y.startedAt?.toDate?.()||(y.startedAt?new Date(y.startedAt):null);if(!w)return 0;const N=(d-w.getTime())/6e4,T=y.estimatedDuration||o;return Math.max(0,T-N)});p.sort((y,w)=>y-w);const g=[];for(let y=0;y<u;y++)g.push(p[y]||0);g.sort((y,w)=>y-w);const x=s.map(y=>y.estimatedDuration||o);for(const y of x)g[0]+=y,g.sort((w,N)=>w-N);return Math.round(g[0])}function Cj({waitingQueue:s=[],inProgress:e=[],staffCount:n=1,upcomingBookings:r=[],defaultDuration:o=30}){const u=new Map;for(let d=0;d<s.length;d++){const p=s.slice(0,d),g=Aj({waitingAhead:p,inProgress:e,staffCount:n,upcomingBookings:r,defaultDuration:o});u.set(s[d].id,g)}return u}function PO(s=[],e=3){const n=new Date,r=new Date(n.getTime()+e*60*60*1e3),o=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`;return s.filter(u=>{if(u.status==="cancelled"||u.status==="rejected"||u.date!==o)return!1;const d=new Date(`${u.date}T${u.time}`);return d>=n&&d<=r}).sort((u,d)=>`${u.time}`.localeCompare(`${d.time}`))}function VO(s){if(!s)return"0m";const e=s?.toDate?.()||new Date(s),n=Math.floor((Date.now()-e.getTime())/6e4);if(n<1)return"<1m";if(n<60)return`${n}m`;const r=Math.floor(n/60),o=n%60;return o>0?`${r}h ${o}m`:`${r}h`}function LO(s){if(s==null)return"";if(s<1)return"Next up";if(s<60)return`~${s}m`;const e=Math.floor(s/60),n=s%60;return n>0?`~${e}h ${n}m`:`~${e}h`}function UO({shopId:s,services:e,staff:n,bookings:r}){const[o,u]=j.useState([]),[d,p]=j.useState(!1),[g,x]=j.useState(!1),[y,w]=j.useState(!1),[N,T]=j.useState({clientName:"",serviceId:"",staffId:"",estimatedDuration:30});j.useEffect(()=>{if(!s)return;const D=Jt(Je(Ee,"shops",s,"walkins"),R=>{const K=R.docs.map(oe=>({id:oe.id,...oe.data()}));u(K)});return()=>D()},[s]);const L=j.useMemo(()=>o.filter(D=>D.status==="waiting").sort((D,R)=>(D.position||0)-(R.position||0)),[o]),V=j.useMemo(()=>o.filter(D=>D.status==="in-progress").sort((D,R)=>{const K=D.startedAt?.toDate?.()?.getTime()||0,oe=R.startedAt?.toDate?.()?.getTime()||0;return K-oe}),[o]),M=j.useMemo(()=>{const D=new Date;return D.setHours(0,0,0,0),D},[]),U=j.useMemo(()=>o.filter(D=>{if(D.status!=="completed"&&D.status!=="no-show")return!1;const R=D.completedAt?.toDate?.()||(D.completedAt?new Date(D.completedAt):null);return R?R>=M:!1}).sort((D,R)=>{const K=D.completedAt?.toDate?.()?.getTime()||0;return(R.completedAt?.toDate?.()?.getTime()||0)-K}),[o,M]),G=j.useMemo(()=>Math.max(n.filter(D=>D.active!==!1).length,1),[n]),q=j.useMemo(()=>PO(r,3),[r]),ie=j.useMemo(()=>Cj({waitingQueue:L,inProgress:V,staffCount:G,upcomingBookings:q,defaultDuration:30}),[L,V,G,q]),ue=j.useMemo(()=>{const D=U.filter(K=>K.status==="completed"&&K.joinedAt&&K.startedAt).map(K=>{const oe=K.joinedAt?.toDate?.()||new Date(K.joinedAt),Se=K.startedAt?.toDate?.()||new Date(K.startedAt);return Math.floor((Se.getTime()-oe.getTime())/6e4)}).filter(K=>K>=0),R=D.length>0?Math.round(D.reduce((K,oe)=>K+oe,0)/D.length):0;return{waiting:L.length,avgWait:R,completedToday:U.filter(K=>K.status==="completed").length}},[L,U]),W=D=>{const R=e.find(K=>K.id===D);T(K=>({...K,serviceId:D,estimatedDuration:R?.duration||30}))},E=()=>L.length===0?1:Math.max(...L.map(D=>D.position||0))+1,A=j.useMemo(()=>o.filter(D=>{const R=D.joinedAt?.toDate?.()||(D.joinedAt?new Date(D.joinedAt):null);return R&&R>=M}).length,[o,M]),k=async D=>{D.preventDefault(),w(!0);const R=e.find(ge=>ge.id===N.serviceId),K=n.find(ge=>ge.id===N.staffId),oe=E(),Se=N.clientName.trim()||`Walk-in #${A+1}`;try{await jr(Je(Ee,"shops",s,"walkins"),{clientName:Se,serviceId:N.serviceId||null,serviceName:R?.name||null,staffId:N.staffId||null,staffName:K?.name||null,estimatedDuration:parseInt(N.estimatedDuration)||30,status:"waiting",position:oe,joinedAt:kt.now(),startedAt:null,completedAt:null,estimatedWaitMinutes:null}),T({clientName:"",serviceId:"",staffId:"",estimatedDuration:30}),p(!1)}catch(ge){console.error("Error adding walk-in:",ge)}finally{w(!1)}},B=async D=>{try{await it(Ge(Ee,"shops",s,"walkins",D),{status:"in-progress",startedAt:kt.now()});const R=L.filter(K=>K.id!==D).sort((K,oe)=>(K.position||0)-(oe.position||0));for(let K=0;K<R.length;K++)await it(Ge(Ee,"shops",s,"walkins",R[K].id),{position:K+1})}catch(R){console.error("Error starting service:",R)}},P=async D=>{try{await it(Ge(Ee,"shops",s,"walkins",D),{status:"completed",completedAt:kt.now()})}catch(R){console.error("Error completing service:",R)}},H=async D=>{try{await it(Ge(Ee,"shops",s,"walkins",D),{status:"no-show",completedAt:kt.now()});const R=L.filter(K=>K.id!==D).sort((K,oe)=>(K.position||0)-(oe.position||0));for(let K=0;K<R.length;K++)await it(Ge(Ee,"shops",s,"walkins",R[K].id),{position:K+1})}catch(R){console.error("Error marking no-show:",R)}},I=async D=>{const R=L.findIndex(Se=>Se.id===D);if(R<=0)return;const K=L[R-1],oe=L[R];try{await it(Ge(Ee,"shops",s,"walkins",oe.id),{position:K.position}),await it(Ge(Ee,"shops",s,"walkins",K.id),{position:oe.position})}catch(Se){console.error("Error reordering:",Se)}},$=async D=>{const R=L.findIndex(Se=>Se.id===D);if(R<0||R>=L.length-1)return;const K=L[R+1],oe=L[R];try{await it(Ge(Ee,"shops",s,"walkins",oe.id),{position:K.position}),await it(Ge(Ee,"shops",s,"walkins",K.id),{position:oe.position})}catch(Se){console.error("Error reordering:",Se)}};return i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[{label:"Currently Waiting",value:ue.waiting,icon:Ht,color:"bg-blue-100 text-blue-600"},{label:"Avg Wait",value:ue.avgWait>0?`${ue.avgWait}m`:"",icon:uj,color:"bg-amber-100 text-amber-600"},{label:"Completed Today",value:ue.completedToday,icon:Cf,color:"bg-emerald-100 text-emerald-600"}].map(D=>{const R=D.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${D.color} rounded-xl flex items-center justify-center`,children:i.jsx(R,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:D.value}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:D.label})]},D.label)})}),q.length>0&&i.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(gl,{className:"w-4 h-4 text-amber-600"}),i.jsx("span",{className:"text-sm font-bold text-amber-800",children:"Upcoming Online Bookings"})]}),i.jsx("div",{className:"space-y-1",children:q.slice(0,5).map(D=>{const[R,K]=(D.time||"").split(":"),oe=parseInt(R),Se=`${oe%12||12}:${K} ${oe>=12?"PM":"AM"}`;return i.jsxs("div",{className:"text-xs text-amber-700 flex items-center gap-2",children:[i.jsx(cn,{className:"w-3 h-3"}),i.jsx("span",{className:"font-medium",children:Se}),i.jsx("span",{children:""}),i.jsx("span",{children:D.clientName}),D.serviceName&&i.jsxs("span",{className:"text-amber-500",children:["(",D.serviceName,")"]}),D.staffName&&i.jsxs("span",{className:"text-violet-600",children:["with ",D.staffName]})]},D.id)})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Walk-in Queue"}),!d&&i.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 transition-all hover:-translate-y-0.5",children:[i.jsx(wi,{className:"w-4 h-4"}),"Add Walk-in"]})]}),d&&i.jsxs("form",{onSubmit:k,className:"mb-5 p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"New Walk-in"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Client Name"}),i.jsx("input",{type:"text",value:N.clientName,onChange:D=>T(R=>({...R,clientName:D.target.value})),placeholder:`Walk-in #${A+1}`,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Service"}),i.jsxs("select",{value:N.serviceId,onChange:D=>W(D.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"",children:"No service selected"}),e.map(D=>i.jsxs("option",{value:D.id,children:[D.name," (",D.duration,"min)"]},D.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Staff Preference"}),i.jsxs("select",{value:N.staffId,onChange:D=>T(R=>({...R,staffId:D.target.value})),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"",children:"Next available"}),n.map(D=>i.jsx("option",{value:D.id,children:D.name},D.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Est. Duration (min)"}),i.jsx("select",{value:N.estimatedDuration,onChange:D=>T(R=>({...R,estimatedDuration:parseInt(D.target.value)})),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[15,30,45,60,90,120].map(D=>i.jsx("option",{value:D,children:D<60?`${D} min`:`${D/60}h${D%60?` ${D%60}m`:""}`},D))})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{type:"submit",disabled:y,className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 transition-all disabled:opacity-50",children:[i.jsx(wi,{className:"w-4 h-4"}),y?"Adding":"Add to Queue"]}),i.jsx("button",{type:"button",onClick:()=>{p(!1),T({clientName:"",serviceId:"",staffId:"",estimatedDuration:30})},className:"px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Cancel"})]})]}),L.length===0&&V.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Ht,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No walk-ins in queue"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Add a walk-in client to start the queue."})]}):i.jsxs(i.Fragment,{children:[L.length>0&&i.jsxs("div",{className:"mb-5",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[i.jsx(cn,{className:"w-4 h-4 text-blue-500"}),"Waiting",i.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:L.length})]}),i.jsx("div",{className:"space-y-2",children:L.map((D,R)=>{const K=ie.get(D.id);return i.jsxs("div",{className:"group flex items-center gap-3 border border-slate-200 rounded-xl p-3.5 hover:border-slate-300 hover:shadow-sm transition-all",children:[i.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[i.jsx("button",{onClick:()=>I(D.id),disabled:R===0,className:"p-0.5 text-slate-400 hover:text-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:i.jsx(M0,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center font-bold text-blue-700 text-sm",children:R+1}),i.jsx("button",{onClick:()=>$(D.id),disabled:R===L.length-1,className:"p-0.5 text-slate-400 hover:text-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:i.jsx(D0,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:D.clientName}),i.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 border border-blue-200 text-[10px] font-bold rounded-md",children:"WAITING"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-slate-500",children:[D.serviceName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(gs,{className:"w-3 h-3 text-blue-400"}),D.serviceName]}),D.staffName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(xl,{className:"w-3 h-3 text-violet-400"}),D.staffName]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(cn,{className:"w-3 h-3"}),D.estimatedDuration||30,"min"]})]})]}),i.jsxs("div",{className:"text-right mr-2",children:[i.jsx("div",{className:"text-sm font-bold text-amber-600",children:LO(K)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"est. wait"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:()=>B(D.id),className:"flex items-center gap-1 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 text-emerald-700 border border-emerald-200 rounded-lg text-xs font-semibold transition-all",title:"Start Service",children:[i.jsx(Qp,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"Start"})]}),i.jsxs("button",{onClick:()=>H(D.id),className:"flex items-center gap-1 px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 rounded-lg text-xs font-semibold transition-all",title:"No-show",children:[i.jsx(Da,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"No-show"})]})]})]},D.id)})})]}),V.length>0&&i.jsxs("div",{className:"mb-5",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[i.jsx(Qp,{className:"w-4 h-4 text-emerald-500"}),"In Progress",i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 text-xs font-bold rounded-full",children:V.length})]}),i.jsx("div",{className:"space-y-2",children:V.map(D=>i.jsxs("div",{className:"flex items-center gap-3 border border-emerald-200 bg-emerald-50/50 rounded-xl p-3.5 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center",children:i.jsx(Qp,{className:"w-4 h-4 text-emerald-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:D.clientName}),i.jsx("span",{className:"px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 text-[10px] font-bold rounded-md",children:"IN PROGRESS"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-slate-500",children:[D.serviceName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(gs,{className:"w-3 h-3 text-blue-400"}),D.serviceName]}),D.staffName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(xl,{className:"w-3 h-3 text-violet-400"}),D.staffName]})]})]}),i.jsxs("div",{className:"text-right mr-2",children:[i.jsx("div",{className:"text-sm font-bold text-emerald-600",children:VO(D.startedAt)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"elapsed"})]}),i.jsxs("button",{onClick:()=>P(D.id),className:"flex items-center gap-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded-lg text-xs font-semibold transition-all",title:"Complete",children:[i.jsx(Kn,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"Complete"})]})]},D.id))})]})]})]}),U.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("button",{onClick:()=>x(!g),className:"w-full flex items-center justify-between",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[i.jsx(Kn,{className:"w-4 h-4 text-slate-400"}),"Completed Today",i.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 border border-slate-200 text-xs font-bold rounded-full",children:U.length})]}),i.jsx(tx,{className:`w-4 h-4 text-slate-400 transition-transform ${g?"rotate-90":""}`})]}),g&&i.jsx("div",{className:"mt-3 space-y-2",children:U.map(D=>i.jsxs("div",{className:"flex items-center gap-3 border border-slate-100 rounded-lg p-3 bg-slate-50/50",children:[i.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center bg-slate-100",children:D.status==="no-show"?i.jsx(Da,{className:"w-3.5 h-3.5 text-red-400"}):i.jsx(Kn,{className:"w-3.5 h-3.5 text-emerald-400"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-slate-700 text-sm truncate",children:D.clientName}),i.jsx("span",{className:`text-[10px] font-bold rounded-md px-1.5 py-0.5 border ${D.status==="no-show"?"bg-red-50 text-red-600 border-red-200":"bg-emerald-50 text-emerald-600 border-emerald-200"}`,children:D.status==="no-show"?"NO-SHOW":"COMPLETED"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[D.serviceName&&i.jsx("span",{children:D.serviceName}),D.staffName&&i.jsxs("span",{children:[" ",D.staffName]})]})]})]},D.id))})]})]})}function BO(s,e){const n=new Date(s+"T12:00:00"),r=e.getTime()-n.getTime();return Math.floor(r/864e5)}function hh(s){return`$${Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function $c(s){return s?new Date(s+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function zO(s,e,n){return s>90?"lost":s>n?"at-risk":s>e?"getting-cold":"active"}const fh={active:{label:"Active",bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",icon:nx,iconColor:"text-emerald-500"},"getting-cold":{label:"Getting Cold",bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200",icon:cj,iconColor:"text-amber-500"},"at-risk":{label:"At Risk",bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",icon:gl,iconColor:"text-orange-500"},lost:{label:"Lost",bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:yD,iconColor:"text-red-500"}};function FO({shopId:s,bookings:e,shop:n,slug:r}){const[o,u]=j.useState({}),[d,p]=j.useState(null),[g,x]=j.useState(null),[y,w]=j.useState(""),[N,T]=j.useState(""),[L,V]=j.useState("all"),[M,U]=j.useState("lastVisit"),[G,q]=j.useState("asc"),[ie,ue]=j.useState(null),[W,E]=j.useState(!1),[A,k]=j.useState(null),[B,P]=j.useState(!1),[H,I]=j.useState(null),$=n?.winbackSettings?.warningDays||30,D=n?.winbackSettings?.inactiveDays||60,R=n?.winbackSettings?.enabled!==!1,K=se=>se.toLowerCase().replace(/\./g,"_dot_").replace(/@/g,"_at_");j.useEffect(()=>{if(!s)return;const se=Jt(Je(Ee,"shops",s,"clientNotes"),Ne=>{const de={};Ne.docs.forEach(Ae=>{de[Ae.id]=Ae.data()}),u(de)});return()=>se()},[s]);const oe=j.useMemo(()=>new Date,[]),Se=j.useMemo(()=>e.filter(se=>se.status==="confirmed"||se.status==="pending"||!se.status),[e]),ge=j.useMemo(()=>{const se={};return Se.forEach(Ne=>{const de=Ne.clientEmail?.toLowerCase();if(!de)return;se[de]||(se[de]={email:de,name:Ne.clientName||de,phone:Ne.clientPhone||"",totalVisits:0,totalSpent:0,lastVisitDate:null,firstVisitDate:null,bookings:[],serviceFrequency:{},staffFrequency:{}});const Ae=se[de];Ne.clientName&&(Ae.name=Ne.clientName),Ne.clientPhone&&(Ae.phone=Ne.clientPhone),Ae.totalVisits++,Ae.totalSpent+=Number(Ne.servicePrice)||0,Ae.bookings.push(Ne),(!Ae.lastVisitDate||Ne.date>Ae.lastVisitDate)&&(Ae.lastVisitDate=Ne.date),(!Ae.firstVisitDate||Ne.date<Ae.firstVisitDate)&&(Ae.firstVisitDate=Ne.date),Ne.serviceName&&(Ae.serviceFrequency[Ne.serviceName]=(Ae.serviceFrequency[Ne.serviceName]||0)+1),Ne.staffName&&(Ae.staffFrequency[Ne.staffName]=(Ae.staffFrequency[Ne.staffName]||0)+1)}),Object.values(se).map(Ne=>{const de=Ne.lastVisitDate?BO(Ne.lastVisitDate,oe):999,Ae=zO(de,$,D),De=Object.entries(Ne.serviceFrequency).sort((Ce,Pe)=>Pe[1]-Ce[1])[0]?.[0]||null,Le=Object.entries(Ne.staffFrequency).sort((Ce,Pe)=>Pe[1]-Ce[1])[0]?.[0]||null,nt=Ne.totalVisits>0?Ne.totalSpent/Ne.totalVisits:0,ct=K(Ne.email),ut=o[ct];return{...Ne,daysSinceLastVisit:de,status:Ae,favoriteService:De,favoriteStaff:Le,avgSpending:nt,encodedEmail:ct,notes:ut?.notes||"",contacted:ut?.contacted||!1,contactedAt:ut?.contactedAt||null,tags:ut?.tags||[]}})},[Se,oe,$,D,o]),O=j.useMemo(()=>{const se={all:ge.length,active:0,"getting-cold":0,"at-risk":0,lost:0};return ge.forEach(Ne=>{se[Ne.status]++}),se},[ge]),te=j.useMemo(()=>ge.filter(se=>(se.status==="at-risk"||se.status==="lost")&&!se.contacted),[ge]),ce=j.useMemo(()=>{let se=ge;if(N.trim()){const Ne=N.toLowerCase();se=se.filter(de=>de.name.toLowerCase().includes(Ne)||de.email.includes(Ne)||de.phone.includes(Ne))}return L!=="all"&&(se=se.filter(Ne=>Ne.status===L)),se=[...se].sort((Ne,de)=>{if(M==="lastVisit"){const Ae=(Ne.lastVisitDate||"").localeCompare(de.lastVisitDate||"");return G==="asc"?Ae:-Ae}return M==="totalVisits"?G==="desc"?de.totalVisits-Ne.totalVisits:Ne.totalVisits-de.totalVisits:M==="totalSpent"?G==="desc"?de.totalSpent-Ne.totalSpent:Ne.totalSpent-de.totalSpent:0}),se},[ge,N,L,M,G]),pe=se=>{M===se?q(Ne=>Ne==="asc"?"desc":"asc"):(U(se),q(se==="lastVisit"?"asc":"desc"))},we=j.useCallback(se=>{const Ne=n?.name||"our shop",de=`${window.location.origin}${window.location.pathname}#/shop/${r}`;return`Hi ${se.name.split(" ")[0]}, we miss you at ${Ne}! It's been ${se.daysSinceLastVisit} days since your last visit.${se.favoriteService?` Book your next ${se.favoriteService} today:`:" Book your next appointment:"} ${de}`},[n,r]),Ie=se=>{const Ne=we(se);k({email:se.email,encodedEmail:se.encodedEmail,name:se.name,message:Ne})},ze=async(se,Ne)=>{try{await navigator.clipboard.writeText(se),ue(Ne),setTimeout(()=>ue(null),2e3)}catch(de){console.error("Failed to copy:",de)}},Rt=async se=>{I(se);try{const Ne=Ge(Ee,"shops",s,"clientNotes",se),de=await Gp(Ne),Ae=de.exists()?de.data():{};await Yp(Ne,{...Ae,contacted:!0,contactedAt:new Date().toISOString()}),k(null)}catch(Ne){console.error("Error marking as contacted:",Ne)}finally{I(null)}},mt=async se=>{try{const Ne=Ge(Ee,"shops",s,"clientNotes",se),de=await Gp(Ne),Ae=de.exists()?de.data():{};await Yp(Ne,{...Ae,contacted:!1,contactedAt:null})}catch(Ne){console.error("Error resetting contacted status:",Ne)}},nn=async se=>{P(!0);try{const Ne=Ge(Ee,"shops",s,"clientNotes",se),de=await Gp(Ne),Ae=de.exists()?de.data():{};await Yp(Ne,{...Ae,notes:y}),x(null)}catch(Ne){console.error("Error saving notes:",Ne)}finally{P(!1)}};return i.jsxs("div",{className:"animate-fade-in space-y-6",children:[R&&te.length>0&&i.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-5",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>E(!W),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:i.jsx(gl,{className:"w-5 h-5 text-orange-600"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[te.length," client",te.length!==1?"s":""," need",te.length===1?"s":""," attention"]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Haven't visited in over ",D," days  send a win-back message to re-engage"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"px-2.5 py-1 bg-orange-100 text-orange-700 border border-orange-200 text-xs font-bold rounded-lg",children:te.length}),W?i.jsx(M0,{className:"w-5 h-5 text-slate-400"}):i.jsx(D0,{className:"w-5 h-5 text-slate-400"})]})]}),W&&i.jsx("div",{className:"mt-4 space-y-2.5",children:te.sort((se,Ne)=>Ne.daysSinceLastVisit-se.daysSinceLastVisit).map(se=>i.jsxs("div",{className:"bg-white rounded-xl border border-orange-100 p-4 flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx("div",{className:"w-9 h-9 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(xl,{className:"w-4 h-4 text-orange-600"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:se.name}),i.jsxs("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${fh[se.status].bg} ${fh[se.status].text} ${fh[se.status].border}`,children:[se.daysSinceLastVisit," days ago"]})]}),i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2 flex-wrap mt-0.5",children:[i.jsxs("span",{children:["Last: ",$c(se.lastVisitDate)]}),se.favoriteService&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-slate-300",children:""}),i.jsxs("span",{className:"text-blue-600",children:["Loves ",se.favoriteService]})]}),i.jsx("span",{className:"text-slate-300",children:""}),i.jsxs("span",{children:[se.totalVisits," visit",se.totalVisits!==1?"s":""]})]})]})]}),i.jsxs("button",{onClick:Ne=>{Ne.stopPropagation(),Ie(se)},className:"flex items-center gap-1.5 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-xl text-xs font-semibold transition-all shadow-sm flex-shrink-0",children:[i.jsx(Xp,{className:"w-3.5 h-3.5"}),"Send Win-back"]})]},se.email))})]}),A&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:i.jsx(L0,{className:"w-5 h-5 text-orange-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Win-back Message"}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Send to ",A.name]})]})]}),i.jsx("div",{className:"bg-slate-50 rounded-xl p-4 mb-4 border border-slate-200",children:i.jsx("textarea",{value:A.message,onChange:se=>k({...A,message:se.target.value}),rows:4,className:"w-full bg-transparent text-sm text-slate-700 resize-none focus:outline-none leading-relaxed"})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{ze(A.message,A.email)},className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:ie===A.email?i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-4 h-4"}),"Copied!"]}):i.jsxs(i.Fragment,{children:[i.jsx(hD,{className:"w-4 h-4"}),"Copy to Clipboard"]})}),i.jsxs("button",{onClick:()=>Rt(A.encodedEmail),disabled:H===A.encodedEmail,className:"flex items-center justify-center gap-2 px-5 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-emerald-600/20 disabled:opacity-50",children:[i.jsx(fs,{className:"w-4 h-4"}),"Mark Contacted"]}),i.jsx("button",{onClick:()=>k(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Close"})]})]})}),i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total Clients",value:O.all,icon:Ht,color:"bg-blue-100 text-blue-600"},{label:"Active",value:O.active,icon:nx,color:"bg-emerald-100 text-emerald-600"},{label:"Getting Cold",value:O["getting-cold"],icon:cj,color:"bg-amber-100 text-amber-600"},{label:"At Risk / Lost",value:O["at-risk"]+O.lost,icon:gl,color:"bg-red-100 text-red-600"}].map(se=>{const Ne=se.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${se.color} rounded-xl flex items-center justify-center`,children:i.jsx(Ne,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:se.value}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:se.label})]},se.label)})}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"All Clients"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Derived from booking history"})]}),i.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[ce.length," client",ce.length!==1?"s":""]})]}),i.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[i.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[i.jsx(ZD,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),i.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:N,onChange:se=>T(se.target.value),className:"w-full pl-10 pr-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),N&&i.jsx("button",{onClick:()=>T(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:i.jsx(xr,{className:"w-4 h-4 text-slate-400 hover:text-slate-600"})})]}),i.jsx("div",{className:"flex items-center gap-1 p-1 bg-slate-100 rounded-xl overflow-x-auto",children:[{key:"all",label:"All"},{key:"active",label:"Active"},{key:"getting-cold",label:"Cold"},{key:"at-risk",label:"At Risk"},{key:"lost",label:"Lost"}].map(se=>i.jsxs("button",{onClick:()=>V(se.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all whitespace-nowrap ${L===se.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[se.label,i.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${L===se.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:O[se.key]??0})]},se.key))}),i.jsx("div",{className:"flex items-center gap-1",children:[{key:"lastVisit",label:"Last Visit"},{key:"totalVisits",label:"Visits"},{key:"totalSpent",label:"Spent"}].map(se=>i.jsxs("button",{onClick:()=>pe(se.key),className:`flex items-center gap-1 px-3 py-2 rounded-lg text-xs font-semibold transition-all border ${M===se.key?"bg-blue-50 text-blue-700 border-blue-200":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,children:[se.label,M===se.key&&i.jsx(P3,{className:"w-3 h-3"})]},se.key))})]}),ce.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Ht,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No clients found"}),i.jsx("p",{className:"text-xs text-slate-400",children:N?"Try a different search term":"Client data will appear as bookings come in"})]}):i.jsx("div",{className:"space-y-2",children:ce.map(se=>{const Ne=d===se.email,de=fh[se.status],Ae=de.icon;return i.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden hover:border-slate-300 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 cursor-pointer hover:bg-slate-50/50 transition-all",onClick:()=>p(Ne?null:se.email),children:[i.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(xl,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:se.name}),i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-bold rounded-md border ${de.bg} ${de.text} ${de.border}`,children:[i.jsx(Ae,{className:"w-3 h-3"}),de.label]}),se.contacted&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",children:[i.jsx(Xp,{className:"w-2.5 h-2.5"}),"Contacted"]}),se.notes&&i.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-violet-50 text-violet-600 border-violet-200",children:i.jsx(C1,{className:"w-2.5 h-2.5"})})]}),i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-3 mt-0.5 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(V0,{className:"w-3 h-3"}),se.email]}),se.phone&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(U0,{className:"w-3 h-3"}),se.phone]})]})]}),i.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-shrink-0",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-bold text-slate-900",children:se.totalVisits}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"visits"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-bold text-blue-600",children:hh(se.totalSpent)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"spent"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-bold text-slate-700",children:$c(se.lastVisitDate)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"last visit"})]})]}),i.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(se.status==="at-risk"||se.status==="lost")&&!se.contacted&&i.jsx("button",{onClick:De=>{De.stopPropagation(),Ie(se)},className:"p-2 text-orange-500 hover:text-orange-700 hover:bg-orange-50 rounded-lg transition-all",title:"Send win-back message",children:i.jsx(Xp,{className:"w-4 h-4"})}),Ne?i.jsx(M0,{className:"w-4 h-4 text-slate-400"}):i.jsx(D0,{className:"w-4 h-4 text-slate-400"})]})]}),Ne&&i.jsxs("div",{className:"border-t border-slate-200 bg-slate-50/50 p-5 space-y-5",children:[i.jsxs("div",{className:"sm:hidden grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[i.jsx("div",{className:"text-lg font-bold text-slate-900",children:se.totalVisits}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"visits"})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[i.jsx("div",{className:"text-lg font-bold text-blue-600",children:hh(se.totalSpent)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"spent"})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[i.jsx("div",{className:"text-sm font-bold text-slate-700",children:$c(se.lastVisitDate)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"last visit"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Avg per Visit"}),i.jsx("div",{className:"text-sm font-bold text-slate-900",children:hh(se.avgSpending)})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"First Visit"}),i.jsx("div",{className:"text-sm font-bold text-slate-900",children:$c(se.firstVisitDate)})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Days Since Last Visit"}),i.jsxs("div",{className:"text-sm font-bold text-slate-900",children:[se.daysSinceLastVisit,"d"]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Favorite Service"}),i.jsx("div",{className:"text-sm font-bold text-blue-600 truncate",children:se.favoriteService||""})]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[i.jsx(gs,{className:"w-3.5 h-3.5 text-blue-500"}),"Services Used"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(se.serviceFrequency).sort((De,Le)=>Le[1]-De[1]).map(([De,Le])=>i.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg text-xs font-medium",children:[De,i.jsxs("span",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-[10px] font-bold",children:[Le,""]})]},De))})]}),Object.keys(se.staffFrequency).length>0&&i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[i.jsx(Ht,{className:"w-3.5 h-3.5 text-violet-500"}),"Staff Members Seen"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(se.staffFrequency).sort((De,Le)=>Le[1]-De[1]).map(([De,Le])=>i.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-violet-50 text-violet-700 border border-violet-200 rounded-lg text-xs font-medium",children:[De,i.jsxs("span",{className:"bg-violet-100 px-1.5 py-0.5 rounded text-[10px] font-bold",children:[Le,""]})]},De))})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[i.jsx(Pt,{className:"w-3.5 h-3.5 text-emerald-500"}),"Booking History",i.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",se.bookings.length,")"]})]}),i.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto",children:se.bookings.sort((De,Le)=>(Le.date+Le.time).localeCompare(De.date+De.time)).map((De,Le)=>i.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2 rounded-lg hover:bg-slate-50 text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-slate-700",children:$c(De.date)}),i.jsx("span",{className:"text-slate-400",children:De.time}),De.serviceName&&i.jsx("span",{className:"text-blue-600",children:De.serviceName})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[De.staffName&&i.jsx("span",{className:"text-violet-600",children:De.staffName}),De.servicePrice!=null&&i.jsx("span",{className:"font-semibold text-slate-900",children:hh(De.servicePrice)})]})]},Le))})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:[i.jsx(C1,{className:"w-3.5 h-3.5 text-amber-500"}),"Notes"]}),g!==se.encodedEmail&&i.jsx("button",{onClick:()=>{x(se.encodedEmail),w(se.notes||"")},className:"text-xs text-blue-600 hover:text-blue-800 font-semibold",children:se.notes?"Edit":"Add Notes"})]}),g===se.encodedEmail?i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:y,onChange:De=>w(De.target.value),placeholder:"Add notes about this client (e.g., preferences, allergies, favorite styles...)",rows:3,className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>nn(se.encodedEmail),disabled:B,className:"px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:B?"Saving...":"Save"}),i.jsx("button",{onClick:()=>x(null),className:"px-4 py-1.5 bg-white hover:bg-slate-50 text-slate-600 border border-slate-200 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}):i.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:se.notes||'No notes yet. Click "Add Notes" to save preferences, allergies, or anything useful.'})]}),se.contacted&&i.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg px-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[i.jsx(fs,{className:"w-4 h-4"}),i.jsxs("span",{className:"font-medium",children:["Contacted",se.contactedAt?` on ${new Date(se.contactedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`:""]})]}),i.jsx("button",{onClick:()=>mt(se.encodedEmail),className:"text-xs text-blue-600 hover:text-blue-800 font-semibold",children:"Reset"})]})]})]},se.email)})})]})]})}const W1="https://us-central1-scheduler-65e51.cloudfunctions.net",qO={pro:"price_1Sxx7ILhwB1Jyzw8UvRxE5FT",unlimited:"price_1Sxx7JLhwB1Jyzw8uw9BRYhO"},$O={basicBooking:Pt,emailNotifications:L0,aiAssistant:z3,recurringBookings:cn,waitlist:Ht,crm:Ht,analytics:ex,smsNotifications:L0,customBranding:FD,walkIns:dj,multiLocation:OD,noBranding:oj,apiAccess:oD,prioritySupport:ND};function HO({shopId:s,shop:e,slug:n}){const[r,o]=j.useState(e),[u,d]=j.useState(!1),[p,g]=j.useState(null),[x,y]=j.useState(!1);j.useEffect(()=>{if(!s)return;const q=Jt(Ge(Ee,"shops",s),ie=>{ie.exists()&&o(ie.data())});return()=>q()},[s]);const w=r?.subscriptionTier||"free",N=hr[w],T=r?.subscriptionStatus,L=r?.subscriptionEndsAt,V=q=>q?(q.toDate?q.toDate():new Date(q)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):null,M=async q=>{d(q),g(null);try{const ie=await fetch(`${W1}/createCheckoutSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s,priceId:qO[q],successUrl:`${window.location.origin}/stylist-scheduler/#/shop/${n}/dashboard?subscription=success`,cancelUrl:`${window.location.origin}/stylist-scheduler/#/shop/${n}/dashboard?subscription=canceled`})}),ue=await ie.json();if(!ie.ok)throw new Error(ue.error||"Failed to create checkout session");window.location.href=ue.url}catch(ie){console.error("Upgrade error:",ie),g(ie.message),d(null)}},U=async()=>{y(!0),g(null);try{const q=await fetch(`${W1}/createBillingPortalSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s,returnUrl:`${window.location.origin}/stylist-scheduler/#/shop/${n}/dashboard`})}),ie=await q.json();if(!q.ok)throw new Error(ie.error||"Failed to open billing portal");window.location.href=ie.url}catch(q){console.error("Billing portal error:",q),g(q.message),y(!1)}},G=[{key:"free",name:"Free",price:"$0",period:"forever",description:"Perfect for getting started",color:"slate",features:[{key:"staff",text:"1 staff member"},{key:"basicBooking",text:"Online booking"},{key:"emailNotifications",text:"Email notifications"},{key:"fee",text:"5% platform fee on deposits",negative:!0}]},{key:"pro",name:"Pro",price:"$29",period:"/month",description:"For growing businesses",color:"blue",popular:!0,features:[{key:"staff",text:"Up to 5 staff members"},{key:"basicBooking",text:"Online booking"},{key:"emailNotifications",text:"Email notifications"},{key:"aiAssistant",text:"AI booking assistant"},{key:"recurringBookings",text:"Recurring bookings"},{key:"waitlist",text:"Waitlist management"},{key:"crm",text:"Client CRM & notes"},{key:"analytics",text:"Analytics dashboard"},{key:"smsNotifications",text:"SMS notifications"},{key:"fee",text:"No platform fees",highlight:!0}]},{key:"unlimited",name:"Unlimited",price:"$79",period:"/month",description:"For established businesses",color:"violet",features:[{key:"staff",text:"Unlimited staff members"},{key:"everything",text:"Everything in Pro, plus:"},{key:"walkIns",text:"Walk-in queue management"},{key:"multiLocation",text:"Multi-location support"},{key:"noBranding",text:"Remove SpotBookie branding"},{key:"apiAccess",text:"API access"},{key:"prioritySupport",text:"Priority support"}]}];return i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("div",{className:`rounded-2xl p-6 mb-8 ${w==="unlimited"?"bg-gradient-to-r from-violet-500 to-purple-600":w==="pro"?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-slate-600 to-slate-700"}`,children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:i.jsx(Af,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("h2",{className:"text-xl font-bold text-white",children:[N.name," Plan"]}),T==="past_due"&&i.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full",children:"Payment Failed"}),L&&i.jsx("span",{className:"px-2 py-0.5 bg-amber-500 text-white text-xs font-bold rounded-full",children:"Canceling"})]}),i.jsx("p",{className:"text-white/80 text-sm mt-0.5",children:w==="free"?"Upgrade to unlock more features":L?`Access until ${V(L)}`:"Your subscription is active"})]})]}),w!=="free"&&i.jsxs("button",{onClick:U,disabled:x,className:"flex items-center gap-2 px-5 py-2.5 bg-white/20 hover:bg-white/30 text-white rounded-xl font-semibold text-sm transition-all disabled:opacity-50",children:[x?i.jsx(Qs,{className:"w-4 h-4 animate-spin"}):i.jsx(Th,{className:"w-4 h-4"}),"Manage Billing"]})]})}),p&&i.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[i.jsx(gu,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-red-800",children:"Something went wrong"}),i.jsx("p",{className:"text-sm text-red-600",children:p})]})]}),T==="past_due"&&i.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[i.jsx(gu,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-amber-800",children:"Payment Failed"}),i.jsx("p",{className:"text-sm text-amber-600",children:"Your last payment failed. Please update your payment method to keep your subscription active."}),i.jsx("button",{onClick:U,className:"mt-2 text-sm font-semibold text-amber-700 hover:text-amber-800 underline",children:"Update Payment Method "})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:G.map(q=>{const ie=q.key===w,ue=["free","pro","unlimited"].indexOf(q.key)<["free","pro","unlimited"].indexOf(w),W=!ie&&!ue;return i.jsxs("div",{className:`relative bg-white rounded-2xl border-2 p-6 transition-all ${q.popular?"border-blue-500 shadow-lg shadow-blue-500/10":ie?"border-emerald-500":"border-slate-200 hover:border-slate-300"}`,children:[q.popular&&i.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:i.jsx("span",{className:"px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full",children:"Most Popular"})}),ie&&i.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:i.jsx("span",{className:"px-3 py-1 bg-emerald-500 text-white text-xs font-bold rounded-full",children:"Current Plan"})}),i.jsxs("div",{className:"text-center mb-6 pt-2",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:q.name}),i.jsxs("div",{className:"mt-2 flex items-baseline justify-center gap-1",children:[i.jsx("span",{className:"text-4xl font-extrabold text-slate-900",children:q.price}),i.jsx("span",{className:"text-slate-500 text-sm",children:q.period})]}),i.jsx("p",{className:"text-sm text-slate-500 mt-2",children:q.description})]}),i.jsx("ul",{className:"space-y-3 mb-6",children:q.features.map((E,A)=>($O[E.key],i.jsxs("li",{className:"flex items-start gap-2.5",children:[i.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5 ${E.negative?"bg-red-100 text-red-500":E.highlight?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:E.negative?i.jsx("span",{className:"text-xs font-bold",children:"%"}):i.jsx(fs,{className:"w-3 h-3"})}),i.jsx("span",{className:`text-sm ${E.negative?"text-red-600":E.highlight?"text-emerald-700 font-medium":"text-slate-700"}`,children:E.text})]},A)))}),W?i.jsx("button",{onClick:()=>M(q.key),disabled:u,className:`w-full flex items-center justify-center gap-2 py-3 rounded-xl font-semibold text-sm transition-all ${q.key==="unlimited"?"bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 text-white shadow-lg shadow-violet-500/20":q.key==="pro"?"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg shadow-blue-500/20":"bg-slate-100 hover:bg-slate-200 text-slate-700"} disabled:opacity-50`,children:u===q.key?i.jsxs(i.Fragment,{children:[i.jsx(Qs,{className:"w-4 h-4 animate-spin"}),"Redirecting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Du,{className:"w-4 h-4"}),"Upgrade to ",q.name]})}):ie?i.jsx("div",{className:"w-full py-3 text-center text-sm font-semibold text-emerald-600 bg-emerald-50 rounded-xl border border-emerald-200",children:" Your Current Plan"}):i.jsx("div",{className:"w-full py-3 text-center text-sm font-medium text-slate-400 bg-slate-50 rounded-xl",children:"Included in your plan"})]},q.key)})}),i.jsxs("div",{className:"mt-12",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Feature Comparison"}),i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[i.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-slate-700",children:"Feature"}),i.jsx("th",{className:"text-center py-4 px-4 text-sm font-semibold text-slate-700",children:"Free"}),i.jsx("th",{className:"text-center py-4 px-4 text-sm font-semibold text-blue-600",children:"Pro"}),i.jsx("th",{className:"text-center py-4 px-4 text-sm font-semibold text-violet-600",children:"Unlimited"})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b border-slate-100",children:[i.jsx("td",{className:"py-3 px-6 text-sm text-slate-700",children:"Staff Members"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-slate-600",children:"1"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-slate-600",children:"5"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-slate-600",children:"Unlimited"})]}),i.jsxs("tr",{className:"border-b border-slate-100",children:[i.jsx("td",{className:"py-3 px-6 text-sm text-slate-700",children:"Platform Fee"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-red-500",children:"5%"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-emerald-600",children:"0%"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-emerald-600",children:"0%"})]}),Object.entries(_O).map(([q,ie])=>i.jsxs("tr",{className:"border-b border-slate-100 last:border-b-0",children:[i.jsx("td",{className:"py-3 px-6 text-sm text-slate-700",children:ie.name}),i.jsx("td",{className:"py-3 px-4 text-center",children:hr.free.features.includes(q)?i.jsx(fs,{className:"w-5 h-5 text-emerald-500 mx-auto"}):i.jsx("span",{className:"text-slate-300",children:""})}),i.jsx("td",{className:"py-3 px-4 text-center",children:hr.pro.features.includes(q)?i.jsx(fs,{className:"w-5 h-5 text-emerald-500 mx-auto"}):i.jsx("span",{className:"text-slate-300",children:""})}),i.jsx("td",{className:"py-3 px-4 text-center",children:hr.unlimited.features.includes(q)?i.jsx(fs,{className:"w-5 h-5 text-emerald-500 mx-auto"}):i.jsx("span",{className:"text-slate-300",children:""})})]},q))]})]})})]}),i.jsxs("div",{className:"mt-12",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Frequently Asked Questions"}),i.jsx("div",{className:"space-y-4",children:[{q:"Can I cancel anytime?",a:"Yes! You can cancel your subscription at any time. You'll continue to have access until the end of your billing period."},{q:"What happens if I downgrade?",a:"When you downgrade, you'll keep your current plan until the end of the billing period. After that, feature limits (like staff count) will apply."},{q:"What is the platform fee?",a:"On the Free plan, we charge a 5% fee on any deposits collected through SpotBookie. Pro and Unlimited plans have no platform fees."},{q:"Do you offer refunds?",a:"We offer a 14-day money-back guarantee for first-time subscribers. Contact us if you're not satisfied."}].map((q,ie)=>i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:q.q}),i.jsx("p",{className:"text-sm text-slate-600",children:q.a})]},ie))})]})]})}const mh="https://us-central1-scheduler-65e51.cloudfunctions.net";function GO({shopId:s,shop:e,slug:n}){const[r,o]=j.useState(e),[u,d]=j.useState(null),[p,g]=j.useState(null),[x,y]=j.useState(null);j.useEffect(()=>{if(!s)return;const W=Jt(Ge(Ee,"shops",s),E=>{E.exists()&&o(E.data())});return()=>W()},[s]);const w=!!r?.stripeAccountId,N=r?.stripeOnboardingComplete,T=r?.payoutsEnabled;r?.stripeAccountStatus;const L=r?.subscriptionTier||"free",V=L==="free"?"5%":"0%",M=async()=>{d("create"),g(null);try{const W=await fetch(`${mh}/createConnectAccount`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s,email:r.ownerEmail,businessName:r.name})}),E=await W.json();if(!W.ok)throw new Error(E.error||"Failed to create account");(!E.alreadyExists||!r.stripeOnboardingComplete)&&await U()}catch(W){console.error("Create account error:",W),g(W.message)}finally{d(null)}},U=async()=>{d("onboard"),g(null);try{const W=await fetch(`${mh}/createAccountLink`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s,returnUrl:`${window.location.origin}/stylist-scheduler/#/shop/${n}/dashboard?connect=return`,refreshUrl:`${window.location.origin}/stylist-scheduler/#/shop/${n}/dashboard?connect=refresh`})}),E=await W.json();if(!W.ok)throw new Error(E.error||"Failed to create onboarding link");window.location.href=E.url}catch(W){console.error("Onboarding error:",W),g(W.message),d(null)}},G=async()=>{d("dashboard"),g(null);try{const W=await fetch(`${mh}/getConnectDashboardLink`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s})}),E=await W.json();if(!W.ok)throw new Error(E.error||"Failed to get dashboard link");window.open(E.url,"_blank")}catch(W){console.error("Dashboard link error:",W),g(W.message)}finally{d(null)}},q=async()=>{d("balance"),g(null);try{const W=await fetch(`${mh}/getConnectBalance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s})}),E=await W.json();if(!W.ok)throw new Error(E.error||"Failed to fetch balance");y(E)}catch(W){console.error("Balance fetch error:",W),g(W.message)}finally{d(null)}};j.useEffect(()=>{T&&!x&&q()},[T]);const ie=(W,E="usd")=>new Intl.NumberFormat("en-US",{style:"currency",currency:E.toUpperCase()}).format(W/100),ue=W=>new Date(W*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Payments"}),i.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Connect Stripe to accept deposits and get paid"})]}),w&&T&&i.jsxs("button",{onClick:q,disabled:u==="balance",className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-all",children:[u==="balance"?i.jsx(Qs,{className:"w-3.5 h-3.5 animate-spin"}):i.jsx(sx,{className:"w-3.5 h-3.5"}),"Refresh"]})]}),p&&i.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[i.jsx(gu,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-red-800 text-sm",children:"Something went wrong"}),i.jsx("p",{className:"text-sm text-red-600",children:p})]})]}),!w&&i.jsx("div",{className:"bg-gradient-to-br from-violet-50 to-blue-50 rounded-2xl border border-violet-200 p-8",children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-lg flex items-center justify-center mb-5",children:i.jsx(gr,{className:"w-8 h-8 text-violet-600"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Accept Payments"}),i.jsx("p",{className:"text-slate-600 max-w-md mb-6",children:"Connect your Stripe account to accept deposit payments from clients when they book. Funds are transferred directly to your bank account."}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full max-w-xl mb-8",children:[{icon:aM,label:"Secure payments",desc:"256-bit encryption"},{icon:Du,label:"Fast payouts",desc:"2-day transfers"},{icon:O0,label:"Low fees",desc:"2.9% + 30"}].map(({icon:W,label:E,desc:A})=>i.jsxs("div",{className:"bg-white/70 rounded-xl p-4 text-center",children:[i.jsx(W,{className:"w-5 h-5 text-violet-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm font-semibold text-slate-900",children:E}),i.jsx("p",{className:"text-xs text-slate-500",children:A})]},E))}),i.jsx("button",{onClick:M,disabled:u==="create",className:"flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-violet-600 to-blue-600 hover:from-violet-700 hover:to-blue-700 text-white rounded-xl font-bold text-base shadow-lg shadow-violet-600/25 transition-all disabled:opacity-50",children:u==="create"?i.jsxs(i.Fragment,{children:[i.jsx(Qs,{className:"w-5 h-5 animate-spin"}),"Setting up..."]}):i.jsxs(i.Fragment,{children:[i.jsx(gr,{className:"w-5 h-5"}),"Connect with Stripe",i.jsx(_o,{className:"w-5 h-5"})]})}),L==="free"&&i.jsxs("p",{className:"mt-4 text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(S1,{className:"w-3.5 h-3.5"}),"Free tier: ",V," platform fee on deposits.",i.jsx("a",{href:"#",className:"text-violet-600 hover:underline",children:"Upgrade to remove"})]})]})}),w&&!N&&i.jsx("div",{className:"bg-amber-50 rounded-2xl border border-amber-200 p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center flex-shrink-0",children:i.jsx(cn,{className:"w-6 h-6 text-amber-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Complete Your Setup"}),i.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Your Stripe account is created, but you need to complete the onboarding process to start accepting payments."}),i.jsx("button",{onClick:U,disabled:u==="onboard",className:"flex items-center gap-2 px-5 py-2.5 bg-amber-600 hover:bg-amber-700 text-white rounded-xl font-semibold text-sm shadow-md transition-all disabled:opacity-50",children:u==="onboard"?i.jsxs(i.Fragment,{children:[i.jsx(Qs,{className:"w-4 h-4 animate-spin"}),"Redirecting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Th,{className:"w-4 h-4"}),"Complete Setup"]})})]})]})}),w&&N&&!T&&i.jsx("div",{className:"bg-blue-50 rounded-2xl border border-blue-200 p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:i.jsx(q3,{className:"w-6 h-6 text-blue-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Verification in Progress"}),i.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Stripe is reviewing your account. This usually takes a few minutes. Once approved, you'll be able to accept payments."}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs("button",{onClick:U,disabled:u==="onboard",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all disabled:opacity-50",children:[u==="onboard"?i.jsx(Qs,{className:"w-4 h-4 animate-spin"}):i.jsx(Th,{className:"w-4 h-4"}),"Check Status"]})})]})]})}),w&&T&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl p-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:i.jsx(Kn,{className:"w-7 h-7"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Stripe Connected"}),i.jsx("span",{className:"px-2 py-0.5 bg-white/20 text-xs font-bold rounded-full",children:"Active"})]}),i.jsx("p",{className:"text-white/80 text-sm mt-0.5",children:"You're ready to accept deposit payments"})]})]}),i.jsxs("button",{onClick:G,disabled:u==="dashboard",className:"flex items-center gap-2 px-5 py-2.5 bg-white/20 hover:bg-white/30 rounded-xl font-semibold text-sm transition-all disabled:opacity-50",children:[u==="dashboard"?i.jsx(Qs,{className:"w-4 h-4 animate-spin"}):i.jsx(Th,{className:"w-4 h-4"}),"Stripe Dashboard"]})]})}),x&&i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Available"}),i.jsx(R1,{className:"w-4 h-4 text-emerald-500"})]}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:x.balance.available[0]?ie(x.balance.available[0].amount,x.balance.available[0].currency):"$0.00"}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Ready to pay out"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Pending"}),i.jsx(cn,{className:"w-4 h-4 text-blue-500"})]}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:x.balance.pending[0]?ie(x.balance.pending[0].amount,x.balance.pending[0].currency):"$0.00"}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Processing"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Platform Fee"}),i.jsx(O0,{className:"w-4 h-4 text-violet-500"})]}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:V}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:L==="free"?"Upgrade to remove":"No platform fees"})]})]}),x?.recentCharges?.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-900",children:"Recent Payments"}),i.jsx("button",{onClick:G,className:"text-xs font-medium text-blue-600 hover:text-blue-700",children:"View All "})]}),i.jsx("div",{className:"space-y-3",children:x.recentCharges.slice(0,5).map(W=>i.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${W.status==="succeeded"?"bg-emerald-100":"bg-slate-100"}`,children:W.status==="succeeded"?i.jsx(Kn,{className:"w-4 h-4 text-emerald-600"}):i.jsx(cn,{className:"w-4 h-4 text-slate-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-900",children:W.metadata?.clientName||"Payment"}),i.jsxs("p",{className:"text-xs text-slate-400",children:[ue(W.created),W.metadata?.serviceName&&`  ${W.metadata.serviceName}`]})]})]}),i.jsx("span",{className:"text-sm font-bold text-slate-900",children:ie(W.amount,W.currency)})]},W.id))})]}),x?.recentPayouts?.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-900",children:"Recent Payouts"}),i.jsx(Cf,{className:"w-4 h-4 text-slate-400"})]}),i.jsx("div",{className:"space-y-3",children:x.recentPayouts.slice(0,3).map(W=>i.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${W.status==="paid"?"bg-emerald-100":"bg-amber-100"}`,children:i.jsx(R1,{className:`w-4 h-4 ${W.status==="paid"?"text-emerald-600":"text-amber-600"}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-900 capitalize",children:W.status}),i.jsx("p",{className:"text-xs text-slate-400",children:W.arrivalDate?`Arrives ${ue(W.arrivalDate)}`:ue(W.created)})]})]}),i.jsx("span",{className:"text-sm font-bold text-emerald-600",children:ie(W.amount,W.currency)})]},W.id))})]})]}),i.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-5",children:[i.jsxs("h3",{className:"font-bold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(S1,{className:"w-4 h-4 text-blue-500"}),"How it works"]}),i.jsxs("ul",{className:"space-y-2 text-sm text-slate-600",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),i.jsx("span",{children:"Client books an appointment and pays the deposit"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),i.jsxs("span",{children:["Payment goes directly to your Stripe account (minus Stripe's 2.9% + 30 fee",L==="free"&&` and ${V} platform fee`,")"]})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),i.jsx("span",{children:"Stripe automatically transfers funds to your bank (usually within 2 days)"})]})]})]})]})}const YO=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function s0(s){const[e,n]=s.split(":").map(Number);return e*60+n}function WO(s,e){if(s.status!=="waiting"||s.serviceId&&e.serviceId&&s.serviceId!==e.serviceId||s.staffId&&s.staffId!=="any"&&e.staffId&&s.staffId!==e.staffId)return!1;if(e.date){if(s.preferredDate&&s.preferredDate!==e.date)return!1;if(s.preferredDays&&s.preferredDays.length>0){const n=new Date(e.date+"T12:00:00"),r=YO[n.getDay()];if(!s.preferredDays.includes(r))return!1}}if(e.time&&s.preferredTimeRange){const n=s0(e.time),r=s0(s.preferredTimeRange.start),o=s0(s.preferredTimeRange.end);if(!(s.preferredTimeRange.start==="00:00"&&s.preferredTimeRange.end==="23:59")&&(n<r||n>o))return!1}return!0}function KO(s,e){return s.filter(n=>WO(n,e)).sort((n,r)=>(n.createdAt||"").localeCompare(r.createdAt||""))}const K1=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}];function nl(s){if(!s)return"";const[e,n]=s.split(":").map(Number),r=e>=12?"PM":"AM",o=e%12||12;return n===0?`${o}${r}`:`${o}:${n.toString().padStart(2,"0")}${r}`}function QO({user:s}){const{slug:e}=Mo(),n=Do(),[r,o]=j.useState(null),[u,d]=j.useState(null),[p,g]=j.useState(!0),[x,y]=j.useState(!1),[w,N]=j.useState([]),[T,L]=j.useState([]),[V,M]=j.useState([]),[U,G]=j.useState([]),[q,ie]=j.useState("schedule"),[ue,W]=j.useState(null),[E,A]=j.useState("all"),[k,B]=j.useState("all"),[P,H]=j.useState([]),[I,$]=j.useState(null),[D,R]=j.useState(null),[K,oe]=j.useState(!1),[Se,ge]=j.useState({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""});j.useEffect(()=>{if(!s){n(`/shop/${e}/login`,{replace:!0});return}(async()=>{g(!0);try{const ae=Ds(Je(Ee,"shops"),ms("slug","==",e)),je=await Ms(ae);if(je.empty){y(!0),g(!1);return}const _e=je.docs[0],Ke=_e.data();if(Ke.ownerUid!==s.uid){y(!0),g(!1);return}o(Ke),d(_e.id)}catch(ae){console.error("Error checking ownership:",ae),y(!0)}finally{g(!1)}})()},[s,e,n]),j.useEffect(()=>{if(!u)return;const F=Jt(Je(Ee,"shops",u,"availability"),st=>{const ye=st.docs.map(fe=>({id:fe.id,...fe.data()}));N(ye)}),ae=Jt(Je(Ee,"shops",u,"bookings"),st=>{const ye=st.docs.map(fe=>({id:fe.id,...fe.data()}));L(ye)}),je=Jt(Je(Ee,"shops",u,"staff"),st=>{const ye=st.docs.map(fe=>({id:fe.id,...fe.data()})).filter(fe=>fe.active!==!1).sort((fe,Ve)=>(fe.name||"").localeCompare(Ve.name||""));M(ye)}),_e=Jt(Je(Ee,"shops",u,"waitlist"),st=>{const ye=st.docs.map(fe=>({id:fe.id,...fe.data()})).sort((fe,Ve)=>(fe.createdAt||"").localeCompare(Ve.createdAt||""));H(ye)}),Ke=Jt(Je(Ee,"shops",u,"services"),st=>{const ye=st.docs.map(fe=>({id:fe.id,...fe.data()})).filter(fe=>fe.active!==!1).sort((fe,Ve)=>(fe.name||"").localeCompare(Ve.name||""));G(ye)});return()=>{F(),ae(),je(),_e(),Ke()}},[u]);const O=async()=>{await RC(pl),n(`/shop/${e}`,{replace:!0})},te=async F=>{F.preventDefault();const{date:ae,startTime:je,endTime:_e,slotDuration:Ke,staffId:st}=Se,ye=parseInt(Ke),[fe,Ve]=je.split(":").map(Number),[tt,dt]=_e.split(":").map(Number),Ue=fe*60+Ve,$e=tt*60+dt;let Et=Ue;for(;Et+ye<=$e;){const sn=Math.floor(Et/60),ts=Et%60,ns=`${sn.toString().padStart(2,"0")}:${ts.toString().padStart(2,"0")}`,ys={date:ae,time:ns,duration:ye,available:!0};if(st){const Ha=V.find(ea=>ea.id===st);ys.staffId=st,ys.staffName=Ha?.name||""}await jr(Je(Ee,"shops",u,"availability"),ys),Et+=ye}ge({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""})},ce=async F=>{await cI(Ge(Ee,"shops",u,"availability",F))},pe=F=>{const ae={date:F.date,time:F.time,staffId:F.staffId||null,serviceId:F.serviceId||null},je=KO(P,ae);je.length>0&&$({matches:je,slot:ae})},we=async(F,ae)=>{for(const je of F)await it(Ge(Ee,"shops",u,"waitlist",je.id),{status:"notified",notifiedAt:new Date().toISOString(),notifiedSlot:{date:ae.date,time:ae.time,staffId:ae.staffId||null,staffName:ae.staffName||null}});$(null)},Ie=async F=>{await it(Ge(Ee,"shops",u,"waitlist",F),{status:"notified",notifiedAt:new Date().toISOString()})},ze=async F=>{await it(Ge(Ee,"shops",u,"waitlist",F),{status:"expired"})},Rt=async F=>{const ae=T.find(je=>je.id===F);if(ae&&ae.recurringGroupId){R({bookingId:F,recurringGroupId:ae.recurringGroupId});return}if(await it(Ge(Ee,"shops",u,"bookings",F),{status:"cancelled"}),ae&&ae.slotId&&!ae.slotId.startsWith("wh-")&&!ae.slotId.startsWith("recurring-"))try{await it(Ge(Ee,"shops",u,"availability",ae.slotId),{available:!0})}catch(je){console.warn("Could not re-open slot:",je)}ae&&pe(ae)},mt=async F=>{const ae=T.find(je=>je.id===F);if(await it(Ge(Ee,"shops",u,"bookings",F),{status:"cancelled"}),ae&&ae.slotId&&!ae.slotId.startsWith("wh-")&&!ae.slotId.startsWith("recurring-"))try{await it(Ge(Ee,"shops",u,"availability",ae.slotId),{available:!0})}catch(je){console.warn("Could not re-open slot:",je)}ae&&pe(ae),R(null)},nn=async(F,ae)=>{const je=T.find(Ke=>Ke.id===F);if(!je)return;const _e=T.filter(Ke=>Ke.recurringGroupId===ae&&Ke.date>=je.date&&(Ke.status==="pending"||Ke.status==="confirmed"));for(const Ke of _e)if(await it(Ge(Ee,"shops",u,"bookings",Ke.id),{status:"cancelled"}),Ke.slotId&&!Ke.slotId.startsWith("wh-")&&!Ke.slotId.startsWith("recurring-"))try{await it(Ge(Ee,"shops",u,"availability",Ke.slotId),{available:!0})}catch(st){console.warn("Could not re-open slot:",st)}je&&pe(je),R(null)},se=async F=>{await it(Ge(Ee,"shops",u,"bookings",F),{status:"confirmed"})},Ne=async F=>{const ae=T.find(je=>je.id===F);if(await it(Ge(Ee,"shops",u,"bookings",F),{status:"rejected"}),ae&&ae.slotId&&!ae.slotId.startsWith("wh-"))try{await it(Ge(Ee,"shops",u,"availability",ae.slotId),{available:!0})}catch(je){console.warn("Could not re-open slot:",je)}ae&&pe(ae)},de=async()=>{const F=!r?.requireApproval;try{await it(Ge(Ee,"shops",u),{requireApproval:F}),o(ae=>({...ae,requireApproval:F}))}catch(ae){console.error("Error updating requireApproval:",ae)}},Ae=async F=>{const ae=parseInt(F);try{await it(Ge(Ee,"shops",u),{bufferMinutes:ae}),o(je=>({...je,bufferMinutes:ae}))}catch(je){console.error("Error updating buffer minutes:",je)}},De=(F,ae)=>new Date(`${F}T${ae}`).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),Le=j.useMemo(()=>{const F={},ae=E==="all"?V:V.filter(_e=>_e.id===E),je=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(const _e of ae)_e.weeklyHours&&je.forEach((Ke,st)=>{_e.weeklyHours[Ke]?.enabled&&(F[st]=!0)});return F},[V,E]),nt=j.useMemo(()=>(E==="all"?V:V.filter(ae=>ae.id===E)).filter(ae=>ae.weeklyHours?K1.some(je=>ae.weeklyHours[je.key]?.enabled):!1),[V,E]),ct=j.useMemo(()=>{const F=new Date,ae=`${F.getFullYear()}-${String(F.getMonth()+1).padStart(2,"0")}-${String(F.getDate()).padStart(2,"0")}`,je=F.getDay(),_e=je===0?-6:1-je,Ke=new Date(F);Ke.setDate(F.getDate()+_e),Ke.setHours(0,0,0,0);const st=new Date(Ke);st.setDate(Ke.getDate()+6),st.setHours(23,59,59,999);const ye=`${Ke.getFullYear()}-${String(Ke.getMonth()+1).padStart(2,"0")}-${String(Ke.getDate()).padStart(2,"0")}`,fe=`${st.getFullYear()}-${String(st.getMonth()+1).padStart(2,"0")}-${String(st.getDate()).padStart(2,"0")}`,Ve=T.filter(Ue=>Ue.date===ae).length,tt=T.filter(Ue=>Ue.date>=ye&&Ue.date<=fe).length,dt=new Set(T.map(Ue=>Ue.clientEmail?.toLowerCase()).filter(Boolean)).size;return{todayBookings:Ve,weekBookings:tt,uniqueClients:dt,totalBookings:T.length}},[T]),ut=j.useMemo(()=>T.filter(F=>F.status==="pending").length,[T]),Ce=j.useMemo(()=>P.filter(F=>F.status==="waiting").length,[P]),[Pe,ot]=j.useState(0),[Kt,jt]=j.useState({}),wt=j.useMemo(()=>{if(!r)return 0;r?.winbackSettings?.warningDays;const F=r?.winbackSettings?.inactiveDays||60;if(!(r?.winbackSettings?.enabled!==!1))return 0;const je=new Date,_e=T.filter(fe=>fe.status==="confirmed"||fe.status==="pending"||!fe.status),Ke={};_e.forEach(fe=>{const Ve=fe.clientEmail?.toLowerCase();Ve&&(!Ke[Ve]||fe.date>Ke[Ve])&&(Ke[Ve]=fe.date)});let st=0;const ye=fe=>fe.replace(/\./g,"_dot_").replace(/@/g,"_at_");return Object.entries(Ke).forEach(([fe,Ve])=>{if(Math.floor((je.getTime()-new Date(Ve+"T12:00:00").getTime())/864e5)>F){const dt=ye(fe);Kt[dt]?.contacted||st++}}),st},[T,r,Kt]);if(j.useEffect(()=>{if(!u)return;const F=Jt(Je(Ee,"shops",u,"clientNotes"),ae=>{const je={};ae.docs.forEach(_e=>{je[_e.id]=_e.data()}),jt(je)});return()=>F()},[u]),j.useEffect(()=>{if(!u)return;const F=Jt(Je(Ee,"shops",u,"walkins"),ae=>{const je=ae.docs.filter(_e=>_e.data().status==="waiting").length;ot(je)});return()=>F()},[u]),p)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading dashboard"})]})});if(x)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Jh,{className:"w-8 h-8 text-red-500"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Unauthorized"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"You don't have access to this dashboard."}),i.jsx(Ze,{to:`/shop/${e}/login`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:"Login"})]})});const $n=E==="all"?w:w.filter(F=>F.staffId===E),Nt=E==="all"?T:T.filter(F=>F.staffId===E),In=$n.reduce((F,ae)=>(F[ae.date]||(F[ae.date]=[]),F[ae.date].push(ae),F),{}),$a=Nt.reduce((F,ae)=>(F[ae.date]||(F[ae.date]=[]),F[ae.date].push(ae),F),{}),Ps=ue?Object.keys(In).filter(F=>F===ue).sort():Object.keys(In).sort(),Cn=ue?Nt.filter(F=>F.date===ue):Nt,Zs=k==="all"?Cn:k==="pending"?Cn.filter(F=>F.status==="pending"):k==="confirmed"?Cn.filter(F=>!F.status||F.status==="confirmed"):Cn.filter(F=>F.status==="cancelled"||F.status==="rejected"),xn={all:Cn.length,pending:Cn.filter(F=>F.status==="pending").length,confirmed:Cn.filter(F=>!F.status||F.status==="confirmed").length,cancelled:Cn.filter(F=>F.status==="cancelled"||F.status==="rejected").length},zt=[{key:"schedule",label:"Schedule",icon:Pt},{key:"clients",label:"Clients",icon:nx},{key:"walkins",label:"Walk-ins",icon:dj},{key:"analytics",label:"Analytics",icon:X3},{key:"waitlist",label:"Waitlist",icon:P0},{key:"staff",label:"Staff",icon:Ht},{key:"services",label:"Services",icon:gs},{key:"subscription",label:"Plan",icon:Af},{key:"settings",label:"Settings",icon:nM}];return i.jsxs("div",{className:"min-h-screen bg-slate-50",children:[i.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>oe(!0),className:"lg:hidden p-2 -ml-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg",children:i.jsx(VD,{className:"w-6 h-6"})}),i.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(r.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("h1",{className:"text-base font-bold text-slate-900 leading-tight",children:r.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Dashboard"})]})]}),i.jsx("div",{className:"hidden lg:flex items-center bg-slate-100 p-1 rounded-xl",children:zt.map(F=>{const ae=F.icon,_e=F.key==="schedule"&&ut>0?{count:ut,color:"bg-amber-500"}:F.key==="clients"&&wt>0?{count:wt,color:"bg-orange-500"}:F.key==="walkins"&&Pe>0?{count:Pe,color:"bg-emerald-500"}:F.key==="waitlist"&&Ce>0?{count:Ce,color:"bg-blue-500"}:null;return i.jsxs("button",{onClick:()=>ie(F.key),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${q===F.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[i.jsx(ae,{className:"w-4 h-4"}),i.jsx("span",{children:F.label}),_e&&i.jsx("span",{className:`ml-1 px-1.5 py-0.5 ${_e.color} text-white text-[10px] font-bold rounded-full leading-none`,children:_e.count})]},F.key)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(Ze,{to:`/shop/${e}`,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[i.jsx(E1,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"View Page"})]}),i.jsxs("button",{onClick:O,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all",children:[i.jsx(T1,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),K&&i.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>oe(!1)}),i.jsxs("div",{className:"fixed inset-y-0 left-0 w-72 bg-white shadow-2xl animate-slide-in-left",children:[i.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-slate-200",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm",children:(r.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-slate-900",children:r.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Dashboard"})]})]}),i.jsx("button",{onClick:()=>oe(!1),className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg",children:i.jsx(xr,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"p-3 space-y-1",children:zt.map(F=>{const ae=F.icon,_e=F.key==="schedule"&&ut>0?{count:ut,color:"bg-amber-500"}:F.key==="clients"&&wt>0?{count:wt,color:"bg-orange-500"}:F.key==="walkins"&&Pe>0?{count:Pe,color:"bg-emerald-500"}:F.key==="waitlist"&&Ce>0?{count:Ce,color:"bg-blue-500"}:null;return i.jsxs("button",{onClick:()=>{ie(F.key),oe(!1)},className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left font-medium transition-all ${q===F.key?"bg-blue-50 text-blue-700":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[i.jsx(ae,{className:`w-5 h-5 ${q===F.key?"text-blue-600":"text-slate-400"}`}),i.jsx("span",{className:"flex-1",children:F.label}),_e&&i.jsx("span",{className:`px-2 py-0.5 ${_e.color} text-white text-xs font-bold rounded-full`,children:_e.count})]},F.key)})}),i.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 border-t border-slate-200 bg-slate-50",children:[i.jsxs(Ze,{to:`/shop/${e}`,onClick:()=>oe(!1),className:"flex items-center gap-3 px-4 py-3 text-slate-600 hover:bg-white rounded-xl font-medium transition-all",children:[i.jsx(E1,{className:"w-5 h-5 text-slate-400"}),"View Public Page"]}),i.jsxs("button",{onClick:()=>{oe(!1),O()},className:"w-full flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 rounded-xl font-medium transition-all",children:[i.jsx(T1,{className:"w-5 h-5"}),"Logout"]})]})]})]}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[q==="schedule"&&i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 animate-fade-in",children:[{label:"Today's Bookings",value:ct.todayBookings,icon:j1,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:ct.weekBookings,icon:Cf,color:"bg-violet-100 text-violet-600"},{label:"Total Bookings",value:ct.totalBookings,icon:ex,color:"bg-emerald-100 text-emerald-600"},{label:"Unique Clients",value:ct.uniqueClients,icon:Ht,color:"bg-amber-100 text-amber-600"}].map(F=>{const ae=F.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${F.color} rounded-xl flex items-center justify-center`,children:i.jsx(ae,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:F.value}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:F.label})]},F.label)})}),q==="clients"&&i.jsx(FO,{shopId:u,bookings:T,shop:r,slug:e}),q==="walkins"&&i.jsx(UO,{shopId:u,services:U,staff:V,bookings:T}),q==="analytics"&&i.jsx(OO,{bookings:T}),q==="staff"&&i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:i.jsx(DO,{shopId:u,shop:r,slug:e})}),q==="services"&&i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:i.jsx(yO,{shopId:u})}),q==="subscription"&&i.jsx(HO,{shopId:u,shop:r,slug:e}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:i.jsx(po,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Waitlist Match!"}),i.jsxs("p",{className:"text-sm text-slate-500",children:[I.matches.length," client",I.matches.length!==1?"s":""," on the waitlist match this freed slot"]})]})]}),i.jsx("div",{className:"bg-slate-50 rounded-xl p-3 mb-4 text-sm",children:i.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[i.jsx(Pt,{className:"w-4 h-4 text-blue-500"}),i.jsxs("span",{className:"font-medium",children:[new Date(I.slot.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," at ",(()=>{const[F,ae]=I.slot.time.split(":"),je=parseInt(F);return`${je%12||12}:${ae} ${je>=12?"PM":"AM"}`})()]})]})}),i.jsx("div",{className:"space-y-2 mb-5 max-h-48 overflow-y-auto",children:I.matches.map(F=>i.jsx("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border border-blue-100 rounded-lg",children:i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:F.clientName}),i.jsx("span",{className:"text-xs text-slate-500 ml-2",children:F.serviceName})]})},F.id))}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>we(I.matches,I.slot),className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:[i.jsx(po,{className:"w-4 h-4"}),"Notify All"]}),i.jsx("button",{onClick:()=>$(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Dismiss"})]})]})}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:i.jsx(fi,{className:"w-5 h-5 text-red-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Cancel Recurring Booking"}),i.jsx("p",{className:"text-sm text-slate-500",children:"This booking is part of a recurring series"})]})]}),i.jsxs("div",{className:"space-y-2 mb-5",children:[i.jsxs("button",{onClick:()=>mt(D.bookingId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(Da,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this one only"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments stay active"})]})]}),i.jsxs("button",{onClick:()=>nn(D.bookingId,D.recurringGroupId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(fi,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future in series"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments"})]})]})]}),i.jsx("button",{onClick:()=>R(null),className:"w-full px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Never mind"})]})}),q==="waitlist"&&i.jsx("div",{className:"animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Waitlist"}),Ce>0&&i.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:[Ce," waiting"]})]}),i.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[P.length," total"]})]}),P.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(P0,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No waitlist entries yet"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Clients can join the waitlist when no slots are available on your booking page."})]}):i.jsx("div",{children:(()=>{const F={};return P.forEach(ae=>{const je=ae.serviceName||"Other";F[je]||(F[je]=[]),F[je].push(ae)}),Object.entries(F).sort(([ae],[je])=>ae.localeCompare(je)).map(([ae,je])=>i.jsxs("div",{className:"mb-6 last:mb-0",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100 flex items-center gap-2",children:[i.jsx(gs,{className:"w-3.5 h-3.5 text-blue-500"}),ae,i.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",je.filter(_e=>_e.status==="waiting").length," waiting)"]})]}),i.jsx("div",{className:"space-y-2.5",children:je.sort((_e,Ke)=>(_e.createdAt||"").localeCompare(Ke.createdAt||"")).map(_e=>{const Ke={waiting:"bg-blue-50 text-blue-700 border-blue-200",notified:"bg-emerald-50 text-emerald-700 border-emerald-200",booked:"bg-emerald-50 text-emerald-700 border-emerald-200",expired:"bg-slate-100 text-slate-500 border-slate-200"},st={waiting:"Waiting",notified:"Notified",booked:"Booked",expired:"Removed"},ye=_e.createdAt?(()=>{const Ve=Date.now()-new Date(_e.createdAt).getTime(),tt=Math.floor(Ve/864e5),dt=Math.floor(Ve/36e5);return tt>0?`${tt}d`:`${dt}h`})():"",fe={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return i.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(xl,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:_e.clientName}),i.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${Ke[_e.status]||Ke.waiting}`,children:st[_e.status]||"Waiting"})]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Joined ",ye," ago",_e.refCode&&i.jsx("span",{className:"font-mono text-slate-400 ml-2",children:_e.refCode})]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[_e.status==="waiting"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>Ie(_e.id),className:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all",title:"Notify client",children:i.jsx(po,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>ze(_e.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove from waitlist",children:i.jsx(xr,{className:"w-4 h-4"})})]}),_e.status==="notified"&&i.jsx("button",{onClick:()=>ze(_e.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove",children:i.jsx(xr,{className:"w-3.5 h-3.5"})})]})]}),i.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[_e.staffName&&_e.staffName!=="Any Available"&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Ht,{className:"w-3 h-3 text-violet-400"}),i.jsx("span",{className:"text-violet-600",children:_e.staffName})]}),_e.preferredDate&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Pt,{className:"w-3 h-3 text-slate-400"}),i.jsxs("span",{children:["Preferred: ",new Date(_e.preferredDate+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]}),_e.preferredDays&&_e.preferredDays.length>0&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Pt,{className:"w-3 h-3 text-slate-400"}),i.jsxs("span",{children:["Days: ",_e.preferredDays.map(Ve=>fe[Ve]||Ve).join(", ")]})]}),_e.preferredTimeRange&&!(_e.preferredTimeRange.start==="00:00"&&_e.preferredTimeRange.end==="23:59")&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(cn,{className:"w-3 h-3 text-slate-400"}),i.jsxs("span",{children:["Time: ",nl(_e.preferredTimeRange.start),"",nl(_e.preferredTimeRange.end)]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(V0,{className:"w-3 h-3"}),_e.clientEmail]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(U0,{className:"w-3 h-3"}),_e.clientPhone]})]}),_e.status==="notified"&&_e.notifiedSlot&&i.jsxs("div",{className:"mt-1.5 px-2.5 py-1.5 bg-emerald-50 border border-emerald-200 rounded-lg inline-flex items-center gap-1.5",children:[i.jsx(po,{className:"w-3 h-3 text-emerald-500"}),i.jsxs("span",{className:"text-emerald-700 font-medium",children:["Notified about ",new Date(_e.notifiedSlot.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ",nl(_e.notifiedSlot.time)]})]})]})]},_e.id)})})]},ae))})()})]})}),q==="settings"&&i.jsxs("div",{className:"max-w-2xl animate-fade-in space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Shop Settings"}),i.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure your booking preferences"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Require Booking Approval"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Review and approve bookings before they're confirmed"})]}),i.jsx("button",{type:"button",onClick:de,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${r?.requireApproval?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${r?.requireApproval?"translate-x-6":"translate-x-1"}`})})]}),r?.requireApproval&&i.jsxs("div",{className:"p-3.5 bg-amber-50 border border-amber-200 rounded-xl text-xs text-amber-800 leading-relaxed",children:[i.jsx("strong",{children:" Approval mode is on."}),' New bookings will appear as "Pending" until you approve or reject them. Time slots are held while pending to prevent double-booking.']}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Buffer Time Between Bookings"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Add a gap between consecutive appointments"})]}),i.jsxs("select",{value:r?.bufferMinutes||0,onChange:F=>Ae(F.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[i.jsx("option",{value:"0",children:"No buffer"}),i.jsx("option",{value:"5",children:"5 minutes"}),i.jsx("option",{value:"10",children:"10 minutes"}),i.jsx("option",{value:"15",children:"15 minutes"}),i.jsx("option",{value:"30",children:"30 minutes"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Client Retention"}),i.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure win-back alerts to re-engage inactive clients"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Enable Win-back Alerts"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Show alerts when clients haven't visited in a while"})]}),i.jsx("button",{type:"button",onClick:async()=>{const F=r?.winbackSettings||{},ae=F.enabled===!1;try{await it(Ge(Ee,"shops",u),{winbackSettings:{...F,enabled:ae}}),o(je=>({...je,winbackSettings:{...je.winbackSettings||{},enabled:ae}}))}catch(je){console.error("Error updating winback settings:",je)}},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${r?.winbackSettings?.enabled!==!1?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${r?.winbackSettings?.enabled!==!1?"translate-x-6":"translate-x-1"}`})})]}),r?.winbackSettings?.enabled!==!1&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Getting Cold Threshold"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:'Flag clients as "Getting Cold" after this many days without a booking'})]}),i.jsxs("select",{value:r?.winbackSettings?.warningDays||30,onChange:async F=>{const ae=parseInt(F.target.value),je=r?.winbackSettings||{};try{await it(Ge(Ee,"shops",u),{winbackSettings:{...je,warningDays:ae}}),o(_e=>({..._e,winbackSettings:{..._e.winbackSettings||{},warningDays:ae}}))}catch(_e){console.error("Error updating warning days:",_e)}},className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[i.jsx("option",{value:"14",children:"14 days"}),i.jsx("option",{value:"21",children:"21 days"}),i.jsx("option",{value:"30",children:"30 days"}),i.jsx("option",{value:"45",children:"45 days"}),i.jsx("option",{value:"60",children:"60 days"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"At Risk Threshold"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:'Flag clients as "At Risk" after this many days without a booking'})]}),i.jsxs("select",{value:r?.winbackSettings?.inactiveDays||60,onChange:async F=>{const ae=parseInt(F.target.value),je=r?.winbackSettings||{};try{await it(Ge(Ee,"shops",u),{winbackSettings:{...je,inactiveDays:ae}}),o(_e=>({..._e,winbackSettings:{..._e.winbackSettings||{},inactiveDays:ae}}))}catch(_e){console.error("Error updating inactive days:",_e)}},className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[i.jsx("option",{value:"30",children:"30 days"}),i.jsx("option",{value:"45",children:"45 days"}),i.jsx("option",{value:"60",children:"60 days"}),i.jsx("option",{value:"90",children:"90 days"}),i.jsx("option",{value:"120",children:"120 days"})]})]}),i.jsxs("div",{className:"p-3.5 bg-orange-50 border border-orange-200 rounded-xl text-xs text-orange-800 leading-relaxed",children:[i.jsx("strong",{children:" Tip:"}),' Clients flagged as "Lost" (over 90 days) will also appear in win-back alerts. Visit the ',i.jsx("strong",{children:"Clients"})," tab to view at-risk clients and send win-back messages."]})]})]})]}),i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:i.jsx(GO,{shopId:u,shop:r,slug:e})})]}),q==="schedule"&&i.jsxs("div",{className:"animate-fade-in",children:[V.length>0&&i.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5",children:"Filter by Staff"}),i.jsxs("select",{value:E,onChange:F=>A(F.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[i.jsx("option",{value:"all",children:"All Staff"}),V.map(F=>i.jsxs("option",{value:F.id,children:[F.name,F.role?`  ${F.role}`:""]},F.id))]})]})}),nt.length>0&&i.jsxs("div",{className:"mb-6 bg-violet-50 border border-violet-200 rounded-xl p-5",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(sx,{className:"w-4 h-4 text-violet-600"}),i.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Recurring Weekly Hours"})]}),i.jsx("div",{className:"space-y-2.5",children:nt.map(F=>{const ae=K1.filter(je=>F.weeklyHours[je.key]?.enabled);return i.jsxs("div",{className:"flex items-start gap-2.5",children:[i.jsx("div",{className:"w-7 h-7 bg-violet-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(Ht,{className:"w-3.5 h-3.5 text-violet-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:F.name}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ae.map(je=>{const _e=F.weeklyHours[je.key];return i.jsxs("span",{className:"inline-block px-2 py-0.5 bg-white text-violet-700 border border-violet-200 rounded text-xs font-medium",children:[je.short," ",nl(_e.start),"",nl(_e.end),_e.break&&i.jsxs("span",{className:"text-amber-600 ml-1",children:["(break ",nl(_e.break.start),"",nl(_e.break.end),")"]})]},je.key)})})]})]},F.id)})}),i.jsx("p",{className:"text-xs text-violet-500 mt-3",children:"Slots auto-generate on the booking page. Manage hours in the Staff tab."})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Monthly Overview"}),i.jsx(gO,{slotsByDate:In,bookingsByDate:$a,selectedDate:ue,onSelectDate:W,recurringDayFlags:Le}),ue&&i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm text-slate-600",children:["Showing: ",i.jsx("strong",{className:"text-slate-900",children:new Date(ue+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),i.jsx("button",{onClick:()=>W(null),className:"text-xs px-3 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-all border border-slate-200",children:"Show All"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:nt.length>0?"Add Custom Slots":"Create Time Slots"}),nt.length>0&&i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Use this for one-off availability outside regular hours."}),!nt.length&&i.jsx("div",{className:"mb-4"}),i.jsxs("form",{onSubmit:te,className:"space-y-4",children:[V.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Staff Member"}),i.jsxs("select",{value:Se.staffId,onChange:F=>ge({...Se,staffId:F.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"",children:"Select a staff member"}),V.map(F=>i.jsxs("option",{value:F.id,children:[F.name,F.role?`  ${F.role}`:""]},F.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Date"}),i.jsx("input",{type:"date",value:Se.date,onChange:F=>ge({...Se,date:F.target.value}),required:!0,min:new Date().toISOString().split("T")[0],className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Start"}),i.jsx("input",{type:"time",value:Se.startTime,onChange:F=>ge({...Se,startTime:F.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"End"}),i.jsx("input",{type:"time",value:Se.endTime,onChange:F=>ge({...Se,endTime:F.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Slot Duration"}),i.jsxs("select",{value:Se.slotDuration,onChange:F=>ge({...Se,slotDuration:F.target.value}),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"15",children:"15 minutes"}),i.jsx("option",{value:"30",children:"30 minutes"}),i.jsx("option",{value:"45",children:"45 minutes"}),i.jsx("option",{value:"60",children:"1 hour"}),i.jsx("option",{value:"90",children:"1.5 hours"}),i.jsx("option",{value:"120",children:"2 hours"})]})]}),i.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[i.jsx(wi,{className:"w-4 h-4"}),"Generate Slots"]})]}),i.jsxs("div",{className:"mt-4 p-3.5 bg-blue-50 border border-blue-100 rounded-xl text-xs text-slate-600 leading-relaxed",children:[i.jsx("strong",{className:"text-slate-700",children:" Tip:"})," ",nt.length>0?"Weekly hours auto-generate slots. Use this for one-off slots outside regular hours.":V.length>0?"Select a staff member, pick a date, and set working hours to create slots.":"Set your hours and slot duration. We'll create all the time slots for that day."]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:ue?"Bookings":"All Bookings"}),xn.pending>0&&i.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 border border-amber-200 text-xs font-bold rounded-full",children:[xn.pending," pending"]})]}),i.jsx("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:Zs.length})]}),i.jsx("div",{className:"flex items-center gap-1 mb-4 p-1 bg-slate-100 rounded-lg overflow-x-auto",children:[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"confirmed",label:"Confirmed"},{key:"cancelled",label:"Cancelled"}].map(F=>i.jsxs("button",{onClick:()=>B(F.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-semibold transition-all whitespace-nowrap ${k===F.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[F.label,i.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${k===F.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:xn[F.key]})]},F.key))}),Zs.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(j1,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium",children:k!=="all"?`No ${k} bookings`:ue?"No bookings for this date":"No bookings yet"})]}):i.jsx("div",{className:"space-y-2.5 max-h-[500px] overflow-y-auto pr-1",children:Zs.sort((F,ae)=>`${F.date}${F.time}`.localeCompare(`${ae.date}${ae.time}`)).map(F=>{const ae=F.status||"confirmed",je={pending:"bg-amber-50 text-amber-700 border-amber-200",confirmed:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200",cancelled:"bg-slate-100 text-slate-500 border-slate-200"},_e={pending:"Pending",confirmed:"Confirmed",rejected:"Rejected",cancelled:"Cancelled"};return i.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(xl,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:F.clientName}),i.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${je[ae]}`,children:_e[ae]}),F.recurring&&i.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",title:"Recurring appointment",children:i.jsx(fi,{className:"w-2.5 h-2.5"})})]}),i.jsx("div",{className:"text-xs text-slate-500",children:De(F.date,F.time)})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[ae==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>se(F.id),className:"p-1.5 text-emerald-500 hover:text-emerald-700 hover:bg-emerald-50 rounded-lg transition-all",title:"Approve booking",children:i.jsx(fs,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>Ne(F.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Reject booking",children:i.jsx(Da,{className:"w-4 h-4"})})]}),ae==="confirmed"&&i.jsx("button",{onClick:()=>Rt(F.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Cancel booking",children:i.jsx(xu,{className:"w-3.5 h-3.5"})})]})]}),i.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[F.serviceName&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(gs,{className:"w-3 h-3 text-blue-400"}),i.jsx("span",{className:"font-medium text-slate-700",children:F.serviceName}),F.servicePrice!=null&&i.jsxs("span",{className:"text-blue-600 font-semibold",children:["$",Number(F.servicePrice).toFixed(2)]})]}),F.staffName&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Ht,{className:"w-3 h-3 text-violet-400"}),i.jsx("span",{className:"text-violet-600",children:F.staffName})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(V0,{className:"w-3 h-3"}),F.clientEmail]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(U0,{className:"w-3 h-3"}),F.clientPhone]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[F.refCode&&i.jsxs("span",{className:"font-mono text-[10px] text-slate-400",children:["REF: ",F.refCode]}),F.recurring&&i.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-indigo-50 border border-indigo-200 rounded text-[10px] font-semibold text-indigo-600",children:" Recurring"})]})]})]},F.id)})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:ue?"Custom Time Slots":"All Custom Time Slots"}),i.jsx("span",{className:"text-xs font-semibold text-slate-500 bg-slate-100 px-2.5 py-1 rounded-lg",children:ue?(In[ue]||[]).length:$n.length})]}),nt.length>0&&i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Recurring slots from weekly hours auto-generate  not shown here."}),!nt.length&&i.jsx("div",{className:"mb-4"}),Ps.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Pt,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:ue?"No custom slots for this date":"No custom slots yet"}),i.jsx("p",{className:"text-xs text-slate-400",children:nt.length>0?"Recurring hours handle most scheduling.":"Use the form above to generate availability."})]}):i.jsx("div",{className:"space-y-6",children:Ps.map(F=>i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100",children:new Date(F).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2.5",children:In[F].sort((ae,je)=>ae.time.localeCompare(je.time)).map(ae=>i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3.5 text-center group hover:border-slate-300 transition-all",children:[i.jsx("div",{className:"text-sm font-bold text-slate-900 mb-0.5",children:ae.time}),i.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[ae.duration," min"]}),ae.staffName&&i.jsxs("div",{className:"text-xs text-violet-600 mb-1.5 flex items-center justify-center gap-1",children:[i.jsx(Ht,{className:"w-3 h-3"}),ae.staffName]}),i.jsx("div",{className:"mb-2",children:ae.available?i.jsx("span",{className:"inline-block px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-md text-xs font-medium",children:"Available"}):i.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-50 text-red-700 border border-red-200 rounded-md text-xs font-medium",children:"Booked"})}),ae.available&&i.jsxs("button",{onClick:()=>ce(ae.id),className:"opacity-0 group-hover:opacity-100 flex items-center justify-center gap-1 w-full px-2 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-xs font-medium transition-all border border-red-200",children:[i.jsx(xu,{className:"w-3 h-3"}),"Remove"]})]},ae.id))})]},F))})]})]})]})]})}function XO({user:s}){const{slug:e}=Mo(),n=Do(),[r,o]=j.useState(""),[u,d]=j.useState(""),[p,g]=j.useState(""),[x,y]=j.useState(!1);j.useEffect(()=>{if(!s)return;(async()=>{const T=Ds(Je(Ee,"shops"),ms("slug","==",e)),L=await Ms(T);L.empty||L.docs[0].data().ownerUid===s.uid&&n(`/shop/${e}/dashboard`,{replace:!0})})()},[s,e,n]);const w=async N=>{N.preventDefault(),g(""),y(!0);try{const L=(await eN(pl,r,u)).user,V=Ds(Je(Ee,"shops"),ms("slug","==",e)),M=await Ms(V);if(M.empty){g("Shop not found"),y(!1);return}if(M.docs[0].data().ownerUid!==L.uid){g("You are not the owner of this shop"),await pl.signOut(),y(!1);return}n(`/shop/${e}/dashboard`,{replace:!0})}catch(T){switch(T.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":g("Invalid email or password");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/too-many-requests":g("Too many failed attempts. Please try again later.");break;default:g("Login failed. Please try again.")}d("")}finally{y(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsxs(Ze,{to:"/",className:"inline-flex items-center gap-2.5",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(ha,{className:"w-5 h-5 text-white"})}),i.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:r,onChange:N=>{o(N.target.value),g("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),i.jsx("input",{type:"password",value:u,onChange:N=>{d(N.target.value),g("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&i.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",p]})]}),i.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):"Sign In"})]}),i.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",i.jsx(Ze,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(Ze,{to:`/shop/${e}`,className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back to booking page"]})})]})})}function Q1({name:s,className:e="w-12 h-12",bgClass:n="bg-blue-100 text-blue-700"}){const r=(s||"").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return i.jsx("div",{className:`${e} ${n} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:r||"?"})}function X1(){return i.jsxs(Ze,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(ha,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function JO(){const{slug:s,refCode:e}=Mo(),[n,r]=j.useState(null),[o,u]=j.useState(null),[d,p]=j.useState(!0),[g,x]=j.useState(!1),[y,w]=j.useState(null),[N,T]=j.useState(null),[L,V]=j.useState(!1),[M,U]=j.useState([]),[G,q]=j.useState([]),[ie,ue]=j.useState([]),[W,E]=j.useState([]),[A,k]=j.useState(!1),[B,P]=j.useState(!1),[H,I]=j.useState(null),[$,D]=j.useState(null),[R,K]=j.useState(null),[oe,Se]=j.useState(!1),[ge,O]=j.useState("");j.useEffect(()=>{(async()=>{p(!0);try{const Pe=Ds(Je(Ee,"shops"),ms("slug","==",s)),ot=await Ms(Pe);if(ot.empty)x(!0);else{const Kt=ot.docs[0];r(Kt.data()),u(Kt.id)}}catch(Pe){console.error("Error looking up shop:",Pe),x(!0)}finally{p(!1)}})()},[s]),j.useEffect(()=>{if(!o)return;(async()=>{try{const Pe=Ds(Je(Ee,"shops",o,"bookings"),ms("refCode","==",e.toUpperCase())),ot=await Ms(Pe);if(ot.empty)V(!0);else{const Kt=ot.docs[0];w(Kt.data()),T(Kt.id)}}catch(Pe){console.error("Error looking up booking:",Pe),V(!0)}})()},[o,e]),j.useEffect(()=>{if(!o||!y)return;const Ce=Jt(Je(Ee,"shops",o,"bookings"),jt=>{U(jt.docs.map(wt=>({id:wt.id,...wt.data()})))}),Pe=Jt(Je(Ee,"shops",o,"availability"),jt=>{const wt=new Date,$n=jt.docs.map(Nt=>({id:Nt.id,...Nt.data()})).filter(Nt=>new Date(`${Nt.date}T${Nt.time}`)>wt);q($n)}),ot=Jt(Je(Ee,"shops",o,"staff"),jt=>{ue(jt.docs.map(wt=>({id:wt.id,...wt.data()})).filter(wt=>wt.active!==!1).sort((wt,$n)=>(wt.name||"").localeCompare($n.name||"")))}),Kt=Jt(Je(Ee,"shops",o,"services"),jt=>{E(jt.docs.map(wt=>({id:wt.id,...wt.data()})).filter(wt=>wt.active!==!1))});return()=>{Ce(),Pe(),ot(),Kt()}},[o,y]);const te=n?.bufferMinutes||0,ce=j.useMemo(()=>{if(!y)return null;if(y.serviceId){const Ce=W.find(Pe=>Pe.id===y.serviceId);if(Ce)return Ce}return y.serviceName?{id:y.serviceId,name:y.serviceName,price:y.servicePrice,duration:y.serviceDuration||y.duration}:null},[y,W]),pe=j.useMemo(()=>{if(!A||!y)return[];const Ce=new Date,Pe=ce?.duration||y.duration||60;let ot=G.filter(Nt=>Nt.available);ot=ot.filter(Nt=>Nt.duration>=Pe),y.staffId&&(ot=ot.filter(Nt=>Nt.staffId===y.staffId||!Nt.staffId));const Kt=y.staffId?ie.filter(Nt=>Nt.id===y.staffId):ie,jt=jj(Kt,Pe,te,4).filter(Nt=>new Date(`${Nt.date}T${Nt.time}`)>Ce),wt=Sj(jt,ot),$n=M.filter(Nt=>Nt.id!==N);return Ej(wt,$n,te)},[A,y,N,G,ie,M,te,ce]),we=j.useMemo(()=>[...new Set(pe.map(Ce=>Ce.date))].sort(),[pe]),Ie=j.useMemo(()=>$?pe.filter(Ce=>Ce.date===$):[],[$,pe]),ze=async(Ce="single")=>{Se(!0);try{if(await it(Ge(Ee,"shops",o,"bookings",N),{status:"cancelled"}),y.slotId&&!y.slotId.startsWith("wh-")&&!y.slotId.startsWith("recurring-"))try{await it(Ge(Ee,"shops",o,"availability",y.slotId),{available:!0})}catch(Pe){console.warn("Could not re-open slot:",Pe)}if(Ce==="future"&&y.recurringGroupId){const Pe=M.filter(ot=>ot.recurringGroupId===y.recurringGroupId&&ot.id!==N&&ot.date>=y.date&&(ot.status==="pending"||ot.status==="confirmed"));for(const ot of Pe)if(await it(Ge(Ee,"shops",o,"bookings",ot.id),{status:"cancelled"}),ot.slotId&&!ot.slotId.startsWith("wh-")&&!ot.slotId.startsWith("recurring-"))try{await it(Ge(Ee,"shops",o,"availability",ot.slotId),{available:!0})}catch(Kt){console.warn("Could not re-open slot:",Kt)}}w(Pe=>({...Pe,status:"cancelled"})),P(!1),I(null),O("cancelled")}catch(Pe){console.error("Cancel error:",Pe),O("error")}finally{Se(!1)}},Rt=async()=>{if(R){Se(!0);try{const Ce={date:R.date,time:R.time,slotId:R.id};if(R.staffId&&(Ce.staffId=R.staffId,Ce.staffName=R.staffName||""),n?.requireApproval&&(Ce.status="pending"),y.slotId&&!y.slotId.startsWith("wh-"))try{await it(Ge(Ee,"shops",o,"availability",y.slotId),{available:!0})}catch(Pe){console.warn("Could not re-open old slot:",Pe)}if(!R.generated&&R.id)try{await it(Ge(Ee,"shops",o,"availability",R.id),{available:!1})}catch(Pe){console.warn("Could not block new slot:",Pe)}await it(Ge(Ee,"shops",o,"bookings",N),Ce),w(Pe=>({...Pe,...Ce})),k(!1),D(null),K(null),O("rescheduled")}catch(Ce){console.error("Reschedule error:",Ce),O("error")}finally{Se(!1)}}},mt=Ce=>new Date(Ce+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),nn=Ce=>{const[Pe,ot]=Ce.split(":"),Kt=parseInt(Pe),jt=Kt>=12?"PM":"AM";return`${Kt%12||12}:${ot} ${jt}`},se=Ce=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(Ce),Ne=Ce=>{if(!Ce)return"";if(Ce<60)return`${Ce} min`;const Pe=Math.floor(Ce/60),ot=Ce%60;return ot?`${Pe}h ${ot}m`:`${Pe} hour${Pe>1?"s":""}`};if(d)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Pt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(Ze,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(za,{className:"w-4 h-4"}),"Go Home"]})]})});if(L)return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),i.jsx(X1,{})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(gl,{className:"w-8 h-8 text-amber-500"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Not Found"}),i.jsx("p",{className:"text-slate-600 mb-2",children:"No booking found with reference code"}),i.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),i.jsxs(Ze,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(Pt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!y)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking"})]})});const de=y.status||"confirmed",Ae=de==="pending"||de==="confirmed",De=de==="cancelled",Le=de==="rejected",nt={pending:{label:"Pending Approval",color:"bg-amber-100 text-amber-700 border-amber-200",icon:cn},confirmed:{label:"Confirmed",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Kn},cancelled:{label:"Cancelled",color:"bg-slate-100 text-slate-500 border-slate-200",icon:Da},rejected:{label:"Rejected",color:"bg-red-100 text-red-700 border-red-200",icon:Da}},ct=nt[de]||nt.confirmed,ut=ct.icon;return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),i.jsx(X1,{})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[ge==="rescheduled"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(ij,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Rescheduled!"}),i.jsx("p",{className:"text-slate-600 mb-4",children:n?.requireApproval?"Your booking has been rescheduled and is pending approval.":"Your booking has been successfully rescheduled."}),i.jsx("button",{onClick:()=>O(""),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View updated details "})]})}),ge==="cancelled"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-lg p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Da,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Cancelled"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking has been cancelled."}),i.jsxs(Ze,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[i.jsx(Pt,{className:"w-4 h-4"}),"Book a new appointment"]})]})}),ge==="error"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Something went wrong. Please try again."})]})}),!A&&i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Your Booking"}),i.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference: ",i.jsx("span",{className:"font-mono font-bold text-blue-600",children:(y.refCode||e).toUpperCase()})]})]}),(De||Le)&&i.jsxs("div",{className:`mb-4 p-4 rounded-xl border flex items-center gap-3 ${De?"bg-slate-50 border-slate-200":"bg-red-50 border-red-200"}`,children:[i.jsx(ut,{className:`w-5 h-5 ${De?"text-slate-400":"text-red-500"}`}),i.jsx("span",{className:`font-medium text-sm ${De?"text-slate-600":"text-red-700"}`,children:De?"This booking has been cancelled.":"This booking has been rejected by the shop."})]}),y.recurringGroupId&&i.jsxs("div",{className:"mb-4 p-3.5 bg-blue-50 border border-blue-200 rounded-xl flex items-center gap-2.5",children:[i.jsx(fi,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Part of a recurring series"}),y.recurringInterval&&i.jsxs("p",{className:"text-xs text-blue-600 mt-0.5",children:["Repeats every ",y.recurringInterval==="weekly"?"week":y.recurringInterval==="biweekly"?"2 weeks":y.recurringInterval==="fourweekly"?"4 weeks":y.recurringInterval==="monthly"?"month":y.recurringInterval]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),i.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${ct.color}`,children:[i.jsx(ut,{className:"w-3.5 h-3.5"}),ct.label]})]}),y.serviceName&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(gs,{className:"w-4 h-4 text-blue-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:y.serviceName})]}),y.servicePrice!=null&&i.jsx("span",{className:"font-bold text-blue-600",children:se(y.servicePrice)})]}),y.staffName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(Q1,{name:y.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:y.staffName})]}),i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Pt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"font-semibold text-slate-800",children:[mt(y.date)," at ",nn(y.time)]})]}),i.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(cn,{className:"w-4 h-4 text-slate-500"})}),i.jsx("span",{children:Ne(y.serviceDuration||y.duration)})]})]}),Ae&&!ge&&i.jsx("div",{className:"space-y-3",children:B?i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(gl,{className:"w-5 h-5 text-red-500"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-slate-900",children:"Are you sure?"}),i.jsx("p",{className:"text-sm text-slate-600",children:"This action cannot be undone."})]})]}),y.recurringGroupId&&!H&&i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("button",{onClick:()=>I("single"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(Da,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this appointment only"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments in the series remain active"})]})]}),i.jsxs("button",{onClick:()=>I("future"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(fi,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future appointments"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments in the series"})]})]}),i.jsx("button",{onClick:()=>P(!1),className:"w-full px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Go Back"})]}),(!y.recurringGroupId||H)&&i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>ze(H||"single"),disabled:oe,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[oe?i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}):i.jsx(Da,{className:"w-4 h-4"}),oe?"Cancelling":H==="future"?"Cancel All Future":"Yes, Cancel"]}),i.jsx("button",{onClick:()=>{H?I(null):P(!1)},disabled:oe,className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Go Back"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>{k(!0),O("")},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[i.jsx(sx,{className:"w-4 h-4"}),"Reschedule Booking"]}),i.jsxs("button",{onClick:()=>{P(!0),I(null)},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-white hover:bg-red-50 text-red-600 rounded-xl font-semibold border border-red-200 hover:border-red-300 transition-all",children:[i.jsx(Da,{className:"w-4 h-4"}),"Cancel Booking"]})]})}),(De||Le)&&i.jsx("div",{className:"text-center",children:i.jsxs(Ze,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[i.jsx(Pt,{className:"w-4 h-4"}),"Book Again"]})})]}),A&&i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[i.jsxs("button",{onClick:()=>{k(!1),D(null),K(null)},className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back to Booking"]}),y.serviceName&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[i.jsx(gs,{className:"w-3.5 h-3.5 text-blue-500"}),i.jsx("span",{className:"font-semibold text-slate-800",children:y.serviceName}),y.servicePrice!=null&&i.jsx("span",{className:"text-blue-600 font-bold",children:se(y.servicePrice)})]}),y.staffName&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[i.jsx(Q1,{name:y.staffName,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:y.staffName})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a New Time"}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Pick a new date and time for your appointment"})]}),we.length===0?i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Pt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),i.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"No time slots are currently available. Check back soon!"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-8",children:i.jsx(hj,{availableDates:we,selectedDate:$,onSelectDate:Ce=>{D(Ce),K(null)}})}),$&&i.jsxs("div",{className:"animate-slide-down",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",mt($)]}),i.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[Ie.length," slot",Ie.length!==1?"s":""]})]}),Ie.length===0?i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:i.jsx("p",{className:"text-slate-500",children:"No slots available for this date"})}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:Ie.sort((Ce,Pe)=>Ce.time.localeCompare(Pe.time)).map(Ce=>{const Pe=R?.id===Ce.id;return i.jsxs("button",{onClick:()=>K(Ce),className:`group border rounded-xl p-4 transition-all duration-200 text-center ${Pe?"bg-blue-600 border-blue-600 text-white shadow-md shadow-blue-600/30":"bg-white border-slate-200 hover:border-blue-400 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5"}`,children:[i.jsx("div",{className:`text-lg font-bold mb-1 ${Pe?"text-white":"text-slate-900 group-hover:text-blue-700"} transition-colors`,children:nn(Ce.time)}),Ce.staffName&&i.jsxs("div",{className:`text-xs mb-0.5 flex items-center justify-center gap-1 ${Pe?"text-blue-100":"text-violet-600"}`,children:[i.jsx(Ht,{className:"w-3 h-3"}),Ce.staffName]}),i.jsx("div",{className:`text-xs ${Pe?"text-blue-200":"text-slate-400"}`,children:Ne(y.serviceDuration||y.duration)})]},Ce.id)})}),R&&i.jsxs("div",{className:"mt-6 animate-fade-in",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 shadow-sm p-5 mb-4",children:[i.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"New Appointment Time"}),i.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[i.jsx(Pt,{className:"w-4 h-4 text-blue-500"}),i.jsxs("span",{className:"font-semibold text-slate-800",children:[mt(R.date)," at ",nn(R.time)]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:Rt,disabled:oe,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:oe?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Rescheduling"]}):i.jsxs(i.Fragment,{children:[i.jsx(Kn,{className:"w-4 h-4"}),"Confirm Reschedule"]})}),i.jsx("button",{onClick:()=>K(null),className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]})]}),!$&&i.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]})]}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(Ze,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})})})]})}function J1(){return i.jsxs(Ze,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(ha,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function ZO(s){if(!s)return"Any time";const e=n=>{const[r,o]=n.split(":").map(Number),u=r>=12?"PM":"AM",d=r%12||12;return o===0?`${d}${u}`:`${d}:${o.toString().padStart(2,"0")}${u}`};return s.start==="00:00"&&s.end==="23:59"?"Any time":`${e(s.start)}  ${e(s.end)}`}function e9(s){if(!s||s.length===0)return"Any day";const e={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return s.map(n=>e[n]||n).join(", ")}function t9(s){if(!s)return"";const e=new Date,n=new Date(s),r=e-n,o=Math.floor(r/6e4);if(o<60)return`${o}m ago`;const u=Math.floor(o/60);return u<24?`${u}h ago`:`${Math.floor(u/24)}d ago`}function n9(){const{slug:s,refCode:e}=Mo(),[n,r]=j.useState(null),[o,u]=j.useState(null),[d,p]=j.useState(!0),[g,x]=j.useState(!1),[y,w]=j.useState(null),[N,T]=j.useState(!1),[L,V]=j.useState(null);if(j.useEffect(()=>{(async()=>{p(!0);try{const W=Ds(Je(Ee,"shops"),ms("slug","==",s)),E=await Ms(W);if(E.empty)x(!0);else{const A=E.docs[0];r(A.data()),u(A.id)}}catch(W){console.error("Error looking up shop:",W),x(!0)}finally{p(!1)}})()},[s]),j.useEffect(()=>{if(!o)return;(async()=>{try{const W=Ds(Je(Ee,"shops",o,"waitlist"),ms("refCode","==",e.toUpperCase())),E=await Ms(W);if(E.empty){T(!0);return}const A=E.docs[0],k={id:A.id,...A.data()};w(k);const B=Ds(Je(Ee,"shops",o,"waitlist"),ms("serviceId","==",k.serviceId),ms("status","==","waiting")),I=(await Ms(B)).docs.map($=>({id:$.id,...$.data()})).sort(($,D)=>($.createdAt||"").localeCompare(D.createdAt||"")).findIndex($=>$.id===k.id);I>=0&&V(I+1)}catch(W){console.error("Error looking up waitlist entry:",W),T(!0)}})()},[o,e]),d)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Pt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(Ze,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(za,{className:"w-4 h-4"}),"Go Home"]})]})});if(N)return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),i.jsx(J1,{})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(gl,{className:"w-8 h-8 text-amber-500"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Waitlist Entry Not Found"}),i.jsx("p",{className:"text-slate-600 mb-2",children:"No waitlist entry found with reference code"}),i.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),i.jsxs(Ze,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(Pt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!y)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading waitlist"})]})});const M={waiting:{label:"Waiting",color:"bg-blue-100 text-blue-700 border-blue-200",icon:cn},notified:{label:"Slot Available!",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:po},booked:{label:"Booked",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Kn},expired:{label:"Expired",color:"bg-slate-100 text-slate-500 border-slate-200",icon:cn}},U=M[y.status]||M.waiting,G=U.icon,q=ue=>ue?new Date(ue+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",ie=ue=>{if(!ue)return"";const[W,E]=ue.split(":"),A=parseInt(W),k=A>=12?"PM":"AM";return`${A%12||12}:${E} ${k}`};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(n?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:n?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),i.jsx(J1,{})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[y.status==="notified"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(po,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"A Slot Is Available!"}),i.jsxs("p",{className:"text-slate-600 mb-4",children:["A slot has opened up for ",y.serviceName,". Book now before it's taken!"]}),y.notifiedSlot&&i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-xl text-sm text-emerald-700 font-medium mb-4",children:[i.jsx(Pt,{className:"w-4 h-4"}),q(y.notifiedSlot.date)," at"," ",ie(y.notifiedSlot.time),y.notifiedSlot.staffName&&i.jsxs("span",{className:"text-emerald-600",children:[" ","with ",y.notifiedSlot.staffName]})]}),i.jsx("div",{children:i.jsxs(Ze,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-emerald-600/20 hover:shadow-lg",children:[i.jsx(Pt,{className:"w-4 h-4"}),"Book Now "]})})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Waitlist Status"}),i.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference:"," ",i.jsx("span",{className:"font-mono font-bold text-blue-600",children:(y.refCode||e).toUpperCase()})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),i.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${U.color}`,children:[i.jsx(G,{className:"w-3.5 h-3.5"}),U.label]})]}),y.status==="waiting"&&L!=null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Position"}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(P0,{className:"w-4 h-4 text-blue-500"}),i.jsxs("span",{className:"font-bold text-slate-900 text-lg",children:["#",L]}),i.jsx("span",{className:"text-sm text-slate-500",children:"in line"})]})]}),y.serviceName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(gs,{className:"w-4 h-4 text-blue-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:y.serviceName})]}),y.staffName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center",children:i.jsx(Ht,{className:"w-4 h-4 text-violet-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:y.staffName})]}),y.preferredDate&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Pt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"text-sm text-slate-700",children:["Preferred: ",q(y.preferredDate)]})]}),y.preferredDays&&y.preferredDays.length>0&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Pt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"text-sm text-slate-700",children:["Days: ",e9(y.preferredDays)]})]}),y.preferredTimeRange&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(cn,{className:"w-4 h-4 text-slate-500"})}),i.jsxs("span",{className:"text-sm text-slate-700",children:["Time: ",ZO(y.preferredTimeRange)]})]}),y.createdAt&&i.jsxs("div",{className:"pt-2 border-t border-slate-100 text-xs text-slate-400",children:["Joined ",t9(y.createdAt)]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(Ze,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(Pt,{className:"w-4 h-4"}),y.status==="notified"?"Book Now":"Check Available Slots"]})})]})}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(Ze,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})})})]})}function s9(){return i.jsxs(Ze,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(ha,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function Z1(s){if(s==null)return"";if(s<1)return"Next up!";if(s<60)return`~${s} min`;const e=Math.floor(s/60),n=s%60;return n>0?`~${e}h ${n}m`:`~${e}h`}function a9(){const{slug:s}=Mo(),[e,n]=j.useState(null),[r,o]=j.useState(null),[u,d]=j.useState(!0),[p,g]=j.useState(!1),[x,y]=j.useState([]),[w,N]=j.useState([]),[T,L]=j.useState([]),[V,M]=j.useState(!1),[U,G]=j.useState(!1),[q,ie]=j.useState(!1),[ue,W]=j.useState(""),[E,A]=j.useState(0),[k,B]=j.useState({clientName:"",serviceId:""}),[P,H]=j.useState(Date.now());j.useEffect(()=>{const ge=setInterval(()=>H(Date.now()),3e4);return()=>clearInterval(ge)},[]),j.useEffect(()=>{(async()=>{d(!0);try{const O=Ds(Je(Ee,"shops"),ms("slug","==",s)),te=await Ms(O);if(te.empty)g(!0);else{const ce=te.docs[0];n(ce.data()),o(ce.id)}}catch(O){console.error("Error looking up shop:",O),g(!0)}finally{d(!1)}})()},[s]),j.useEffect(()=>{if(!r)return;const ge=Jt(Je(Ee,"shops",r,"walkins"),ce=>{const pe=ce.docs.map(we=>({id:we.id,...we.data()}));y(pe)}),O=Jt(Je(Ee,"shops",r,"staff"),ce=>{const pe=ce.docs.map(we=>({id:we.id,...we.data()})).filter(we=>we.active!==!1);N(pe)}),te=Jt(Je(Ee,"shops",r,"services"),ce=>{const pe=ce.docs.map(we=>({id:we.id,...we.data()})).filter(we=>we.active!==!1).sort((we,Ie)=>(we.name||"").localeCompare(Ie.name||""));L(pe)});return()=>{ge(),O(),te()}},[r]);const I=j.useMemo(()=>x.filter(ge=>ge.status==="waiting").sort((ge,O)=>(ge.position||0)-(O.position||0)),[x]),$=j.useMemo(()=>x.filter(ge=>ge.status==="in-progress"),[x]),D=j.useMemo(()=>Math.max(w.length,1),[w]),R=j.useMemo(()=>Cj({waitingQueue:I,inProgress:$,staffCount:D,defaultDuration:30}),[I,$,D]),K=j.useMemo(()=>Aj({waitingAhead:I,inProgress:$,staffCount:D,defaultDuration:30}),[I,$,D]),oe=j.useMemo(()=>{const ge=new Date;return ge.setHours(0,0,0,0),x.filter(O=>{const te=O.joinedAt?.toDate?.()||(O.joinedAt?new Date(O.joinedAt):null);return te&&te>=ge}).length},[x]),Se=async ge=>{ge.preventDefault(),G(!0);const O=T.find(we=>we.id===k.serviceId),ce=(I.length>0?Math.max(...I.map(we=>we.position||0)):0)+1,pe=k.clientName.trim()||`Walk-in #${oe+1}`;try{await jr(Je(Ee,"shops",r,"walkins"),{clientName:pe,serviceId:k.serviceId||null,serviceName:O?.name||null,staffId:null,staffName:null,estimatedDuration:O?.duration||30,status:"waiting",position:ce,joinedAt:kt.now(),startedAt:null,completedAt:null,estimatedWaitMinutes:null}),W(pe),A(ce),ie(!0),M(!1),B({clientName:"",serviceId:""})}catch(we){console.error("Error joining queue:",we)}finally{G(!1)}};return u?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):p?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Pt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(Ze,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(za,{className:"w-4 h-4"}),"Go Home"]})]})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Live Queue"})]})]}),i.jsx(s9,{})]})}),i.jsxs("div",{className:"max-w-2xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[q&&i.jsxs("div",{className:"mb-6 bg-emerald-50 border border-emerald-200 rounded-2xl p-6 text-center animate-scale-in",children:[i.jsx("div",{className:"w-14 h-14 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Ht,{className:"w-7 h-7 text-emerald-600"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-1",children:"You're in the queue!"}),i.jsxs("p",{className:"text-slate-600 text-sm mb-2",children:[i.jsx("strong",{children:ue}),"  Position #",E]}),i.jsx("button",{onClick:()=>ie(!1),className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium",children:"Dismiss"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Ht,{className:"w-6 h-6 text-blue-600"})}),i.jsx("div",{className:"text-3xl font-extrabold text-slate-900",children:I.length}),i.jsx("div",{className:"text-sm font-medium text-slate-500 mt-1",children:"People Waiting"})]}),i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(uj,{className:"w-6 h-6 text-amber-600"})}),i.jsx("div",{className:"text-3xl font-extrabold text-slate-900",children:Z1(K)}),i.jsx("div",{className:"text-sm font-medium text-slate-500 mt-1",children:"Est. Wait (New)"})]})]}),$.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(Scissors,{className:"w-5 h-5 text-emerald-500"}),"Currently Being Served"]}),i.jsx("div",{className:"space-y-2",children:$.map(ge=>i.jsxs("div",{className:"bg-white rounded-xl border border-emerald-200 p-4 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:i.jsx(Scissors,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-slate-900",children:ge.clientName}),i.jsx("div",{className:"text-xs text-slate-500",children:ge.serviceName||"Service in progress"})]})]},ge.id))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(cn,{className:"w-5 h-5 text-blue-500"}),"Queue"]}),I.length===0?i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-10 text-center",children:[i.jsx("div",{className:"w-14 h-14 bg-emerald-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Ht,{className:"w-7 h-7 text-emerald-500"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"No Wait!"}),i.jsx("p",{className:"text-sm text-slate-500",children:"The queue is empty  you can walk right in!"})]}):i.jsx("div",{className:"space-y-2",children:I.map((ge,O)=>{const te=R.get(ge.id);return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center font-extrabold text-blue-700 text-lg flex-shrink-0",children:O+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-slate-900 text-lg truncate",children:ge.clientName}),ge.serviceName&&i.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-1",children:[i.jsx(gs,{className:"w-3 h-3"}),ge.serviceName]})]}),i.jsxs("div",{className:"text-right flex-shrink-0",children:[i.jsx("div",{className:"text-lg font-bold text-amber-600",children:Z1(te)}),i.jsx("div",{className:"text-xs text-slate-400",children:"est. wait"})]})]},ge.id)})})]}),!q&&i.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:V?i.jsxs("form",{onSubmit:Se,children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Join the Queue"}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Your Name"}),i.jsx("input",{type:"text",value:k.clientName,onChange:ge=>B(O=>({...O,clientName:ge.target.value})),placeholder:"Optional",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-lg"})]}),T.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Service"}),i.jsxs("select",{value:k.serviceId,onChange:ge=>B(O=>({...O,serviceId:ge.target.value})),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-lg",children:[i.jsx("option",{value:"",children:"Select a service"}),T.map(ge=>i.jsxs("option",{value:ge.id,children:[ge.name," (",ge.duration,"min  $",Number(ge.price).toFixed(2),")"]},ge.id))]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{type:"submit",disabled:U,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg shadow-md shadow-blue-600/20 transition-all disabled:opacity-50",children:[i.jsx(wi,{className:"w-5 h-5"}),U?"Joining":"Join Queue"]}),i.jsx("button",{type:"button",onClick:()=>{M(!1),B({clientName:"",serviceId:""})},className:"px-6 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]}):i.jsxs("button",{onClick:()=>M(!0),className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg shadow-md shadow-blue-600/20 transition-all hover:-translate-y-0.5",children:[i.jsx(wi,{className:"w-5 h-5"}),"Join the Queue"]})})]}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-between",children:[i.jsxs(Ze,{to:`/shop/${s}`,className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[i.jsx(Pt,{className:"w-4 h-4"}),"Book Online"]}),i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(Ze,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})]})})]})}function r9(){const[s,e]=j.useState(null),[n,r]=j.useState(!0);return j.useEffect(()=>{const o=CC(pl,u=>{e(u),r(!1)});return()=>o()},[]),n?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):i.jsx(LT,{children:i.jsxs(mT,{children:[i.jsx(ca,{path:"/",element:i.jsx(vM,{})}),i.jsx(ca,{path:"/register",element:i.jsx(_M,{})}),i.jsx(ca,{path:"/login",element:i.jsx(NM,{user:s})}),i.jsx(ca,{path:"/shop/:slug",element:i.jsx(pO,{})}),i.jsx(ca,{path:"/shop/:slug/booking/:refCode",element:i.jsx(JO,{})}),i.jsx(ca,{path:"/shop/:slug/waitlist/:refCode",element:i.jsx(n9,{})}),i.jsx(ca,{path:"/shop/:slug/queue",element:i.jsx(a9,{})}),i.jsx(ca,{path:"/shop/:slug/login",element:i.jsx(XO,{user:s})}),i.jsx(ca,{path:"/shop/:slug/dashboard",element:i.jsx(QO,{user:s})}),i.jsx(ca,{path:"*",element:i.jsx(hT,{to:"/",replace:!0})})]})})}gS.createRoot(document.getElementById("root")).render(i.jsx($t.StrictMode,{children:i.jsx(r9,{})}));
