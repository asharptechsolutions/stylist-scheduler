(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function q0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jp={exports:{}},Pc={};var Nv;function nj(){if(Nv)return Pc;Nv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:d,ref:o!==void 0?o:null,props:u}}return Pc.Fragment=e,Pc.jsx=t,Pc.jsxs=t,Pc}var Ev;function sj(){return Ev||(Ev=1,jp.exports=nj()),jp.exports}var i=sj(),Tp={exports:{}},et={};var Sv;function aj(){if(Sv)return et;Sv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),E=Symbol.iterator;function T(P){return P===null||typeof P!="object"?null:(P=E&&P[E]||P["@@iterator"],typeof P=="function"?P:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,O={};function B(P,J,ce){this.props=P,this.context=J,this.refs=O,this.updater=ce||L}B.prototype.isReactComponent={},B.prototype.setState=function(P,J){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,J,"setState")},B.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function Y(){}Y.prototype=B.prototype;function $(P,J,ce){this.props=P,this.context=J,this.refs=O,this.updater=ce||L}var ie=$.prototype=new Y;ie.constructor=$,V(ie,B.prototype),ie.isPureReactComponent=!0;var he=Array.isArray;function oe(){}var j={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function k(P,J,ce){var xe=ce.ref;return{$$typeof:s,type:P,key:J,ref:xe!==void 0?xe:null,props:ce}}function U(P,J){return k(P.type,J,P.props)}function M(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function F(P){var J={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ce){return J[ce]})}var I=/\/+/g;function q(P,J){return typeof P=="object"&&P!==null&&P.key!=null?F(""+P.key):J.toString(36)}function D(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(oe,oe):(P.status="pending",P.then(function(J){P.status==="pending"&&(P.status="fulfilled",P.value=J)},function(J){P.status==="pending"&&(P.status="rejected",P.reason=J)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function R(P,J,ce,xe,be){var De=typeof P;(De==="undefined"||De==="boolean")&&(P=null);var ze=!1;if(P===null)ze=!0;else switch(De){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(P.$$typeof){case s:case e:ze=!0;break;case b:return ze=P._init,R(ze(P._payload),J,ce,xe,be)}}if(ze)return be=be(P),ze=xe===""?"."+q(P,0):xe,he(be)?(ce="",ze!=null&&(ce=ze.replace(I,"$&/")+"/"),R(be,J,ce,"",function(dn){return dn})):be!=null&&(M(be)&&(be=U(be,ce+(be.key==null||P&&P.key===be.key?"":(""+be.key).replace(I,"$&/")+"/")+ze)),J.push(be)),1;ze=0;var Ct=xe===""?".":xe+":";if(he(P))for(var ft=0;ft<P.length;ft++)xe=P[ft],De=Ct+q(xe,ft),ze+=R(xe,J,ce,De,be);else if(ft=T(P),typeof ft=="function")for(P=ft.call(P),ft=0;!(xe=P.next()).done;)xe=xe.value,De=Ct+q(xe,ft++),ze+=R(xe,J,ce,De,be);else if(De==="object"){if(typeof P.then=="function")return R(D(P),J,ce,xe,be);throw J=String(P),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return ze}function W(P,J,ce){if(P==null)return P;var xe=[],be=0;return R(P,xe,"","",function(De){return J.call(ce,De,be++)}),xe}function le(P){if(P._status===-1){var J=P._result;J=J(),J.then(function(ce){(P._status===0||P._status===-1)&&(P._status=1,P._result=ce)},function(ce){(P._status===0||P._status===-1)&&(P._status=2,P._result=ce)}),P._status===-1&&(P._status=0,P._result=J)}if(P._status===1)return P._result.default;throw P._result}var Te=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ve={map:W,forEach:function(P,J,ce){W(P,function(){J.apply(this,arguments)},ce)},count:function(P){var J=0;return W(P,function(){J++}),J},toArray:function(P){return W(P,function(J){return J})||[]},only:function(P){if(!M(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return et.Activity=w,et.Children=ve,et.Component=B,et.Fragment=t,et.Profiler=o,et.PureComponent=$,et.StrictMode=r,et.Suspense=g,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,et.__COMPILER_RUNTIME={__proto__:null,c:function(P){return j.H.useMemoCache(P)}},et.cache=function(P){return function(){return P.apply(null,arguments)}},et.cacheSignal=function(){return null},et.cloneElement=function(P,J,ce){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var xe=V({},P.props),be=P.key;if(J!=null)for(De in J.key!==void 0&&(be=""+J.key),J)!A.call(J,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&J.ref===void 0||(xe[De]=J[De]);var De=arguments.length-2;if(De===1)xe.children=ce;else if(1<De){for(var ze=Array(De),Ct=0;Ct<De;Ct++)ze[Ct]=arguments[Ct+2];xe.children=ze}return k(P.type,be,xe)},et.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},et.createElement=function(P,J,ce){var xe,be={},De=null;if(J!=null)for(xe in J.key!==void 0&&(De=""+J.key),J)A.call(J,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(be[xe]=J[xe]);var ze=arguments.length-2;if(ze===1)be.children=ce;else if(1<ze){for(var Ct=Array(ze),ft=0;ft<ze;ft++)Ct[ft]=arguments[ft+2];be.children=Ct}if(P&&P.defaultProps)for(xe in ze=P.defaultProps,ze)be[xe]===void 0&&(be[xe]=ze[xe]);return k(P,De,be)},et.createRef=function(){return{current:null}},et.forwardRef=function(P){return{$$typeof:p,render:P}},et.isValidElement=M,et.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:le}},et.memo=function(P,J){return{$$typeof:x,type:P,compare:J===void 0?null:J}},et.startTransition=function(P){var J=j.T,ce={};j.T=ce;try{var xe=P(),be=j.S;be!==null&&be(ce,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(oe,Te)}catch(De){Te(De)}finally{J!==null&&ce.types!==null&&(J.types=ce.types),j.T=J}},et.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},et.use=function(P){return j.H.use(P)},et.useActionState=function(P,J,ce){return j.H.useActionState(P,J,ce)},et.useCallback=function(P,J){return j.H.useCallback(P,J)},et.useContext=function(P){return j.H.useContext(P)},et.useDebugValue=function(){},et.useDeferredValue=function(P,J){return j.H.useDeferredValue(P,J)},et.useEffect=function(P,J){return j.H.useEffect(P,J)},et.useEffectEvent=function(P){return j.H.useEffectEvent(P)},et.useId=function(){return j.H.useId()},et.useImperativeHandle=function(P,J,ce){return j.H.useImperativeHandle(P,J,ce)},et.useInsertionEffect=function(P,J){return j.H.useInsertionEffect(P,J)},et.useLayoutEffect=function(P,J){return j.H.useLayoutEffect(P,J)},et.useMemo=function(P,J){return j.H.useMemo(P,J)},et.useOptimistic=function(P,J){return j.H.useOptimistic(P,J)},et.useReducer=function(P,J,ce){return j.H.useReducer(P,J,ce)},et.useRef=function(P){return j.H.useRef(P)},et.useState=function(P){return j.H.useState(P)},et.useSyncExternalStore=function(P,J,ce){return j.H.useSyncExternalStore(P,J,ce)},et.useTransition=function(){return j.H.useTransition()},et.version="19.2.4",et}var jv;function F0(){return jv||(jv=1,Tp.exports=aj()),Tp.exports}var N=F0();const Ht=q0(N);var Ap={exports:{}},Vc={},Cp={exports:{}},kp={};var Tv;function rj(){return Tv||(Tv=1,(function(s){function e(R,W){var le=R.length;R.push(W);e:for(;0<le;){var Te=le-1>>>1,ve=R[Te];if(0<o(ve,W))R[Te]=W,R[le]=ve,le=Te;else break e}}function t(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var W=R[0],le=R.pop();if(le!==W){R[0]=le;e:for(var Te=0,ve=R.length,P=ve>>>1;Te<P;){var J=2*(Te+1)-1,ce=R[J],xe=J+1,be=R[xe];if(0>o(ce,le))xe<ve&&0>o(be,ce)?(R[Te]=be,R[xe]=le,Te=xe):(R[Te]=ce,R[J]=le,Te=J);else if(xe<ve&&0>o(be,le))R[Te]=be,R[xe]=le,Te=xe;else break e}}return W}function o(R,W){var le=R.sortIndex-W.sortIndex;return le!==0?le:R.id-W.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],x=[],b=1,w=null,E=3,T=!1,L=!1,V=!1,O=!1,B=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function ie(R){for(var W=t(x);W!==null;){if(W.callback===null)r(x);else if(W.startTime<=R)r(x),W.sortIndex=W.expirationTime,e(g,W);else break;W=t(x)}}function he(R){if(V=!1,ie(R),!L)if(t(g)!==null)L=!0,oe||(oe=!0,F());else{var W=t(x);W!==null&&D(he,W.startTime-R)}}var oe=!1,j=-1,A=5,k=-1;function U(){return O?!0:!(s.unstable_now()-k<A)}function M(){if(O=!1,oe){var R=s.unstable_now();k=R;var W=!0;try{e:{L=!1,V&&(V=!1,Y(j),j=-1),T=!0;var le=E;try{t:{for(ie(R),w=t(g);w!==null&&!(w.expirationTime>R&&U());){var Te=w.callback;if(typeof Te=="function"){w.callback=null,E=w.priorityLevel;var ve=Te(w.expirationTime<=R);if(R=s.unstable_now(),typeof ve=="function"){w.callback=ve,ie(R),W=!0;break t}w===t(g)&&r(g),ie(R)}else r(g);w=t(g)}if(w!==null)W=!0;else{var P=t(x);P!==null&&D(he,P.startTime-R),W=!1}}break e}finally{w=null,E=le,T=!1}W=void 0}}finally{W?F():oe=!1}}}var F;if(typeof $=="function")F=function(){$(M)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,q=I.port2;I.port1.onmessage=M,F=function(){q.postMessage(null)}}else F=function(){B(M,0)};function D(R,W){j=B(function(){R(s.unstable_now())},W)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(R){R.callback=null},s.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function(R){switch(E){case 1:case 2:case 3:var W=3;break;default:W=E}var le=E;E=W;try{return R()}finally{E=le}},s.unstable_requestPaint=function(){O=!0},s.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var le=E;E=R;try{return W()}finally{E=le}},s.unstable_scheduleCallback=function(R,W,le){var Te=s.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Te+le:Te):le=Te,R){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=le+ve,R={id:b++,callback:W,priorityLevel:R,startTime:le,expirationTime:ve,sortIndex:-1},le>Te?(R.sortIndex=le,e(x,R),t(g)===null&&R===t(x)&&(V?(Y(j),j=-1):V=!0,D(he,le-Te))):(R.sortIndex=ve,e(g,R),L||T||(L=!0,oe||(oe=!0,F()))),R},s.unstable_shouldYield=U,s.unstable_wrapCallback=function(R){var W=E;return function(){var le=E;E=W;try{return R.apply(this,arguments)}finally{E=le}}}})(kp)),kp}var Av;function ij(){return Av||(Av=1,Cp.exports=rj()),Cp.exports}var Rp={exports:{}},Hn={};var Cv;function lj(){if(Cv)return Hn;Cv=1;var s=F0();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)x+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,x,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:x,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Hn.createPortal=function(g,x){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(g,x,null,b)},Hn.flushSync=function(g){var x=d.T,b=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=x,r.p=b,r.d.f()}},Hn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(g,x))},Hn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Hn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var b=x.as,w=p(b,x.crossOrigin),E=typeof x.integrity=="string"?x.integrity:void 0,T=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;b==="style"?r.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:E,fetchPriority:T}):b==="script"&&r.d.X(g,{crossOrigin:w,integrity:E,fetchPriority:T,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Hn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var b=p(x.as,x.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(g)},Hn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var b=x.as,w=p(b,x.crossOrigin);r.d.L(g,b,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Hn.preloadModule=function(g,x){if(typeof g=="string")if(x){var b=p(x.as,x.crossOrigin);r.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(g)},Hn.requestFormReset=function(g){r.d.r(g)},Hn.unstable_batchedUpdates=function(g,x){return g(x)},Hn.useFormState=function(g,x,b){return d.H.useFormState(g,x,b)},Hn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Hn.version="19.2.4",Hn}var kv;function oj(){if(kv)return Rp.exports;kv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rp.exports=lj(),Rp.exports}var Rv;function cj(){if(Rv)return Vc;Rv=1;var s=ij(),e=F0(),t=oj();function r(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var a=n,l=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(l=a.return),n=a.return;while(n)}return a.tag===3?l:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function p(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function x(n){var a=n.alternate;if(!a){if(a=u(n),a===null)throw Error(r(188));return a!==n?null:n}for(var l=n,c=a;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return g(f),n;if(m===c)return g(f),a;m=m.sibling}throw Error(r(188))}if(l.return!==c.return)l=f,c=m;else{for(var v=!1,S=f.child;S;){if(S===l){v=!0,l=f,c=m;break}if(S===c){v=!0,c=f,l=m;break}S=S.sibling}if(!v){for(S=m.child;S;){if(S===l){v=!0,l=m,c=f;break}if(S===c){v=!0,c=m,l=f;break}S=S.sibling}if(!v)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?n:a}function b(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=b(n),a!==null)return a;n=n.sibling}return null}var w=Object.assign,E=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),$=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function F(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var I=Symbol.for("react.client.reference");function q(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===I?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case B:return"Profiler";case O:return"StrictMode";case he:return"Suspense";case oe:return"SuspenseList";case k:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case L:return"Portal";case $:return n.displayName||"Context";case Y:return(n._context.displayName||"Context")+".Consumer";case ie:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case j:return a=n.displayName||null,a!==null?a:q(n.type)||"Memo";case A:a=n._payload,n=n._init;try{return q(n(a))}catch{}}return null}var D=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Te=[],ve=-1;function P(n){return{current:n}}function J(n){0>ve||(n.current=Te[ve],Te[ve]=null,ve--)}function ce(n,a){ve++,Te[ve]=n.current,n.current=a}var xe=P(null),be=P(null),De=P(null),ze=P(null);function Ct(n,a){switch(ce(De,a),ce(be,n),ce(xe,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?Gy(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=Gy(a),n=Yy(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}J(xe),ce(xe,n)}function ft(){J(xe),J(be),J(De)}function dn(n){n.memoizedState!==null&&ce(ze,n);var a=xe.current,l=Yy(a,n.type);a!==l&&(ce(be,n),ce(xe,l))}function ne(n){be.current===n&&(J(xe),J(be)),ze.current===n&&(J(ze),Ic._currentValue=le)}var _e,ue;function Ae(n){if(_e===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);_e=a&&a[1]||"",ue=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+n+ue}var Ce=!1;function Pe(n,a){if(!n||Ce)return"";Ce=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(re){var te=re}Reflect.construct(n,[],pe)}else{try{pe.call()}catch(re){te=re}n.call(pe.prototype)}}else{try{throw Error()}catch(re){te=re}(pe=n())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],S=m[1];if(v&&S){var z=v.split(`
`),ee=S.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<ee.length&&!ee[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===ee.length)for(c=z.length-1,f=ee.length-1;1<=c&&0<=f&&z[c]!==ee[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==ee[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==ee[f]){var de=`
`+z[c].replace(" at new "," at ");return n.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",n.displayName)),de}while(1<=c&&0<=f);break}}}finally{Ce=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?Ae(l):""}function yt(n,a){switch(n.tag){case 26:case 27:case 5:return Ae(n.type);case 16:return Ae("Lazy");case 13:return n.child!==a&&a!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return Pe(n.type,!1);case 11:return Pe(n.type.render,!1);case 1:return Pe(n.type,!0);case 31:return Ae("Activity");default:return""}}function ct(n){try{var a="",l=null;do a+=yt(n,l),l=n,n=n.return;while(n);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ut=Object.prototype.hasOwnProperty,ke=s.unstable_scheduleCallback,Ve=s.unstable_cancelCallback,ot=s.unstable_shouldYield,Qt=s.unstable_requestPaint,_t=s.unstable_now,Nt=s.unstable_getCurrentPriorityLevel,An=s.unstable_ImmediatePriority,kt=s.unstable_UserBlockingPriority,Qn=s.unstable_NormalPriority,Fn=s.unstable_LowPriority,ys=s.unstable_IdlePriority,ts=s.log,Fa=s.unstable_setDisableYieldValue,H=null,se=null;function Ne(n){if(typeof ts=="function"&&Fa(n),se&&typeof se.setStrictMode=="function")try{se.setStrictMode(H,n)}catch{}}var we=Math.clz32?Math.clz32:qt,$e=Math.log,Je=Math.LN2;function qt(n){return n>>>=0,n===0?32:31-($e(n)/Je|0)|0}var Be=256,me=262144,Se=4194304;function Ke(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ze(n,a,l){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var S=c&134217727;return S!==0?(c=S&~m,c!==0?f=Ke(c):(v&=S,v!==0?f=Ke(v):l||(l=S&~n,l!==0&&(f=Ke(l))))):(S=c&~m,S!==0?f=Ke(S):v!==0?f=Ke(v):l||(l=c&~n,l!==0&&(f=Ke(l)))),f===0?0:a!==0&&a!==f&&(a&m)===0&&(m=f&-f,l=a&-a,m>=l||m===32&&(l&4194048)!==0)?a:f}function Et(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Ue(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function He(){var n=Se;return Se<<=1,(Se&62914560)===0&&(Se=4194304),n}function Dt(n){for(var a=[],l=0;31>l;l++)a.push(n);return a}function sn(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function $n(n,a,l,c,f,m){var v=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var S=n.entanglements,z=n.expirationTimes,ee=n.hiddenUpdates;for(l=v&~l;0<l;){var de=31-we(l),pe=1<<de;S[de]=0,z[de]=-1;var te=ee[de];if(te!==null)for(ee[de]=null,de=0;de<te.length;de++){var re=te[de];re!==null&&(re.lane&=-536870913)}l&=~pe}c!==0&&ns(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~a))}function ns(n,a,l){n.pendingLanes|=a,n.suspendedLanes&=~a;var c=31-we(a);n.entangledLanes|=a,n.entanglements[c]=n.entanglements[c]|1073741824|l&261930}function Js(n,a){var l=n.entangledLanes|=a;for(n=n.entanglements;l;){var c=31-we(l),f=1<<c;f&a|n[c]&a&&(n[c]|=a),l&=~f}}function Si(n,a){var l=a&-a;return l=(l&42)!==0?1:$a(l),(l&(n.suspendedLanes|a))!==0?0:l}function $a(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function hn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ji(){var n=W.p;return n!==0?n:(n=window.event,n===void 0?32:gv(n.type))}function xn(n,a){var l=W.p;try{return W.p=n,a()}finally{W.p=l}}var ss=Math.random().toString(36).slice(2),an="__reactFiber$"+ss,bn="__reactProps$"+ss,vs="__reactContainer$"+ss,Ti="__reactEvents$"+ss,If="__reactListeners$"+ss,Iu="__reactHandles$"+ss,Du="__reactResources$"+ss,pa="__reactMarker$"+ss;function _l(n){delete n[an],delete n[bn],delete n[Ti],delete n[If],delete n[Iu]}function ga(n){var a=n[an];if(a)return a;for(var l=n.parentNode;l;){if(a=l[vs]||l[an]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(n=ev(n);n!==null;){if(l=n[an])return l;n=ev(n)}return a}n=l,l=n.parentNode}return null}function Vs(n){if(n=n[an]||n[vs]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function ws(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(r(33))}function xa(n){var a=n[Du];return a||(a=n[Du]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function yn(n){n[pa]=!0}var Uo=new Set,Bo={};function ba(n,a){ya(n,a),ya(n+"Capture",a)}function ya(n,a){for(Bo[n]=a,n=0;n<a.length;n++)Uo.add(a[n])}var zo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qo={},Fo={};function Mu(n){return ut.call(Fo,n)?!0:ut.call(qo,n)?!1:zo.test(n)?Fo[n]=!0:(qo[n]=!0,!1)}function Nl(n,a,l){if(Mu(a))if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+l)}}function _s(n,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+l)}}function vn(n,a,l,c){if(c===null)n.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(a,l,""+c)}}function In(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _r(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function $o(n,a,l){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,m.call(this,v)}}),Object.defineProperty(n,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Mt(n){if(!n._valueTracker){var a=_r(n)?"checked":"value";n._valueTracker=$o(n,a,""+n[a])}}function Ai(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return n&&(c=_r(n)?n.checked?"true":"false":n.value),n=c,n!==l?(a.setValue(n),!0):!1}function va(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ci=/[\n"\\]/g;function as(n){return n.replace(Ci,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function El(n,a,l,c,f,m,v,S){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),a!=null?v==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+In(a)):n.value!==""+In(a)&&(n.value=""+In(a)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),a!=null?Ho(n,v,In(a)):l!=null?Ho(n,v,In(l)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+In(S):n.removeAttribute("name")}function Ou(n,a,l,c,f,m,v,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),a!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||a!=null)){Mt(n);return}l=l!=null?""+In(l):"",a=a!=null?""+In(a):l,S||a===n.value||(n.value=a),n.defaultValue=a}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=S?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Mt(n)}function Ho(n,a,l){a==="number"&&va(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Nr(n,a,l,c){if(n=n.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=a.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&c&&(n[l].defaultSelected=!0)}else{for(l=""+In(l),a=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}a!==null||n[f].disabled||(a=n[f])}a!==null&&(a.selected=!0)}}function Pu(n,a,l){if(a!=null&&(a=""+In(a),a!==n.value&&(n.value=a),l==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=l!=null?""+In(l):""}function Er(n,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(D(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=In(a),n.defaultValue=l,c=n.textContent,c===l&&c!==""&&c!==null&&(n.value=c),Mt(n)}function rs(n,a){if(a){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=a;return}}n.textContent=a}var Vu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Go(n,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":c?n.setProperty(a,l):typeof l!="number"||l===0||Vu.has(a)?a==="float"?n.cssFloat=l:n[a]=(""+l).trim():n[a]=l+"px"}function Yo(n,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(n=n.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in a)c=a[f],a.hasOwnProperty(f)&&l[f]!==c&&Go(n,f,c)}else for(var m in a)a.hasOwnProperty(m)&&Go(n,m,a[m])}function Sl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jl(n){return Sr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Zs(){}var Wo=null;function Ls(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var jr=null,wa=null;function ki(n){var a=Vs(n);if(a&&(n=a.stateNode)){var l=n[bn]||null;e:switch(n=a.stateNode,a.type){case"input":if(El(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+as(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==n&&c.form===n.form){var f=c[bn]||null;if(!f)throw Error(r(90));El(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===n.form&&Ai(c)}break e;case"textarea":Pu(n,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Nr(n,!!l.multiple,a,!1)}}}var Tl=!1;function Tr(n,a,l){if(Tl)return n(a,l);Tl=!0;try{var c=n(a);return c}finally{if(Tl=!1,(jr!==null||wa!==null)&&(Rd(),jr&&(a=jr,n=wa,wa=jr=null,ki(a),n)))for(a=0;a<n.length;a++)ki(n[a])}}function ea(n,a){var l=n.stateNode;if(l===null)return null;var c=l[bn]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ri=!1;if(Us)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{Ri=!1}var _a=null,Ko=null,Ii=null;function Qo(){if(Ii)return Ii;var n,a=Ko,l=a.length,c,f="value"in _a?_a.value:_a.textContent,m=f.length;for(n=0;n<l&&a[n]===f[n];n++);var v=l-n;for(c=1;c<=v&&a[l-c]===f[m-c];c++);return Ii=f.slice(n,1<c?1-c:void 0)}function Di(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Ha(){return!0}function ta(){return!1}function On(n){function a(l,c,f,m,v){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(l=n[S],this[S]=l?l(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ha:ta,this.isPropagationStopped=ta,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ha)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ha)},persist:function(){},isPersistent:Ha}),a}var Ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Na=On(Ga),Ar=w({},Ga,{view:0,detail:0}),Xo=On(Ar),Cr,Al,Ea,Cl=w({},Ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ea&&(Ea&&n.type==="mousemove"?(Cr=n.screenX-Ea.screenX,Al=n.screenY-Ea.screenY):Al=Cr=0,Ea=n),Cr)},movementY:function(n){return"movementY"in n?n.movementY:Al}}),Jo=On(Cl),Mi=w({},Cl,{dataTransfer:0}),Uu=On(Mi),Bu=w({},Ar,{relatedTarget:0}),Oi=On(Bu),Zo=w({},Ga,{animationName:0,elapsedTime:0,pseudoElement:0}),zu=On(Zo),kl=w({},Ga,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),qu=On(kl),Fu=w({},Ga,{data:0}),Sa=On(Fu),$u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yu(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Gu[n])?!!a[n]:!1}function kr(){return Yu}var Xn=w({},Ar,{key:function(n){if(n.key){var a=$u[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Di(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Hu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(n){return n.type==="keypress"?Di(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Di(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Wu=On(Xn),Ku=w({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ya=On(Ku),h=w({},Ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr}),y=On(h),_=w({},Ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=On(_),Q=w({},Cl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ae=On(Q),je=w({},Ga,{newState:0,oldState:0}),at=On(je),fn=[9,13,27,32],Tt=Us&&"CompositionEvent"in window,Xt=null;Us&&"documentMode"in document&&(Xt=document.documentMode);var Bs=Us&&"TextEvent"in window&&!Xt,ja=Us&&(!Tt||Xt&&8<Xt&&11>=Xt),na=" ",sa=!1;function Pi(n,a){switch(n){case"keyup":return fn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Il=!1;function jE(n,a){switch(n){case"compositionend":return Rl(a);case"keypress":return a.which!==32?null:(sa=!0,na);case"textInput":return n=a.data,n===na&&sa?null:n;default:return null}}function TE(n,a){if(Il)return n==="compositionend"||!Tt&&Pi(n,a)?(n=Qo(),Ii=Ko=_a=null,Il=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ja&&a.locale!=="ko"?null:a.data;default:return null}}var AE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sx(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!AE[n.type]:a==="textarea"}function ax(n,a,l,c){jr?wa?wa.push(c):wa=[c]:jr=c,a=Ld(a,"onChange"),0<a.length&&(l=new Na("onChange","change",null,l,c),n.push({event:l,listeners:a}))}var ec=null,tc=null;function CE(n){By(n,0)}function Qu(n){var a=ws(n);if(Ai(a))return n}function rx(n,a){if(n==="change")return a}var ix=!1;if(Us){var Df;if(Us){var Mf="oninput"in document;if(!Mf){var lx=document.createElement("div");lx.setAttribute("oninput","return;"),Mf=typeof lx.oninput=="function"}Df=Mf}else Df=!1;ix=Df&&(!document.documentMode||9<document.documentMode)}function ox(){ec&&(ec.detachEvent("onpropertychange",cx),tc=ec=null)}function cx(n){if(n.propertyName==="value"&&Qu(tc)){var a=[];ax(a,tc,n,Ls(n)),Tr(CE,a)}}function kE(n,a,l){n==="focusin"?(ox(),ec=a,tc=l,ec.attachEvent("onpropertychange",cx)):n==="focusout"&&ox()}function RE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qu(tc)}function IE(n,a){if(n==="click")return Qu(a)}function DE(n,a){if(n==="input"||n==="change")return Qu(a)}function ME(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var Ns=typeof Object.is=="function"?Object.is:ME;function nc(n,a){if(Ns(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var l=Object.keys(n),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!ut.call(a,f)||!Ns(n[f],a[f]))return!1}return!0}function ux(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function dx(n,a){var l=ux(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=a&&c>=a)return{node:l,offset:a-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ux(l)}}function hx(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?hx(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function fx(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=va(n.document);a instanceof n.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)n=a.contentWindow;else break;a=va(n.document)}return a}function Of(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var OE=Us&&"documentMode"in document&&11>=document.documentMode,Dl=null,Pf=null,sc=null,Vf=!1;function mx(n,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Vf||Dl==null||Dl!==va(c)||(c=Dl,"selectionStart"in c&&Of(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),sc&&nc(sc,c)||(sc=c,c=Ld(Pf,"onSelect"),0<c.length&&(a=new Na("onSelect","select",null,a,l),n.push({event:a,listeners:c}),a.target=Dl)))}function Vi(n,a){var l={};return l[n.toLowerCase()]=a.toLowerCase(),l["Webkit"+n]="webkit"+a,l["Moz"+n]="moz"+a,l}var Ml={animationend:Vi("Animation","AnimationEnd"),animationiteration:Vi("Animation","AnimationIteration"),animationstart:Vi("Animation","AnimationStart"),transitionrun:Vi("Transition","TransitionRun"),transitionstart:Vi("Transition","TransitionStart"),transitioncancel:Vi("Transition","TransitionCancel"),transitionend:Vi("Transition","TransitionEnd")},Lf={},px={};Us&&(px=document.createElement("div").style,"AnimationEvent"in window||(delete Ml.animationend.animation,delete Ml.animationiteration.animation,delete Ml.animationstart.animation),"TransitionEvent"in window||delete Ml.transitionend.transition);function Li(n){if(Lf[n])return Lf[n];if(!Ml[n])return n;var a=Ml[n],l;for(l in a)if(a.hasOwnProperty(l)&&l in px)return Lf[n]=a[l];return n}var gx=Li("animationend"),xx=Li("animationiteration"),bx=Li("animationstart"),PE=Li("transitionrun"),VE=Li("transitionstart"),LE=Li("transitioncancel"),yx=Li("transitionend"),vx=new Map,Uf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uf.push("scrollEnd");function aa(n,a){vx.set(n,a),ba(a,[n])}var Xu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zs=[],Ol=0,Bf=0;function Ju(){for(var n=Ol,a=Bf=Ol=0;a<n;){var l=zs[a];zs[a++]=null;var c=zs[a];zs[a++]=null;var f=zs[a];zs[a++]=null;var m=zs[a];if(zs[a++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&wx(l,f,m)}}function Zu(n,a,l,c){zs[Ol++]=n,zs[Ol++]=a,zs[Ol++]=l,zs[Ol++]=c,Bf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function zf(n,a,l,c){return Zu(n,a,l,c),ed(n)}function Ui(n,a){return Zu(n,null,null,a),ed(n)}function wx(n,a,l){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l);for(var f=!1,m=n.return;m!==null;)m.childLanes|=l,c=m.alternate,c!==null&&(c.childLanes|=l),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&a!==null&&(f=31-we(l),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[a]:c.push(a),a.lane=l|536870912),m):null}function ed(n){if(50<Sc)throw Sc=0,Qm=null,Error(r(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Pl={};function UE(n,a,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(n,a,l,c){return new UE(n,a,l,c)}function qf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Wa(n,a){var l=n.alternate;return l===null?(l=Es(n.tag,a,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=a,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,a=n.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function _x(n,a){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,a=l.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function td(n,a,l,c,f,m){var v=0;if(c=n,typeof n=="function")qf(n)&&(v=1);else if(typeof n=="string")v=$S(n,l,xe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case k:return n=Es(31,l,a,f),n.elementType=k,n.lanes=m,n;case V:return Bi(l.children,f,m,a);case O:v=8,f|=24;break;case B:return n=Es(12,l,a,f|2),n.elementType=B,n.lanes=m,n;case he:return n=Es(13,l,a,f),n.elementType=he,n.lanes=m,n;case oe:return n=Es(19,l,a,f),n.elementType=oe,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $:v=10;break e;case Y:v=9;break e;case ie:v=11;break e;case j:v=14;break e;case A:v=16,c=null;break e}v=29,l=Error(r(130,n===null?"null":typeof n,"")),c=null}return a=Es(v,l,a,f),a.elementType=n,a.type=c,a.lanes=m,a}function Bi(n,a,l,c){return n=Es(7,n,c,a),n.lanes=l,n}function Ff(n,a,l){return n=Es(6,n,null,a),n.lanes=l,n}function Nx(n){var a=Es(18,null,null,0);return a.stateNode=n,a}function $f(n,a,l){return a=Es(4,n.children!==null?n.children:[],n.key,a),a.lanes=l,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Ex=new WeakMap;function qs(n,a){if(typeof n=="object"&&n!==null){var l=Ex.get(n);return l!==void 0?l:(a={value:n,source:a,stack:ct(a)},Ex.set(n,a),a)}return{value:n,source:a,stack:ct(a)}}var Vl=[],Ll=0,nd=null,ac=0,Fs=[],$s=0,Rr=null,Ta=1,Aa="";function Ka(n,a){Vl[Ll++]=ac,Vl[Ll++]=nd,nd=n,ac=a}function Sx(n,a,l){Fs[$s++]=Ta,Fs[$s++]=Aa,Fs[$s++]=Rr,Rr=n;var c=Ta;n=Aa;var f=32-we(c)-1;c&=~(1<<f),l+=1;var m=32-we(a)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Ta=1<<32-we(a)+f|l<<f|c,Aa=m+n}else Ta=1<<m|l<<f|c,Aa=n}function Hf(n){n.return!==null&&(Ka(n,1),Sx(n,1,0))}function Gf(n){for(;n===nd;)nd=Vl[--Ll],Vl[Ll]=null,ac=Vl[--Ll],Vl[Ll]=null;for(;n===Rr;)Rr=Fs[--$s],Fs[$s]=null,Aa=Fs[--$s],Fs[$s]=null,Ta=Fs[--$s],Fs[$s]=null}function jx(n,a){Fs[$s++]=Ta,Fs[$s++]=Aa,Fs[$s++]=Rr,Ta=a.id,Aa=a.overflow,Rr=n}var Pn=null,Wt=null,vt=!1,Ir=null,Hs=!1,Yf=Error(r(519));function Dr(n){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw rc(qs(a,n)),Yf}function Tx(n){var a=n.stateNode,l=n.type,c=n.memoizedProps;switch(a[an]=n,a[bn]=c,l){case"dialog":ht("cancel",a),ht("close",a);break;case"iframe":case"object":case"embed":ht("load",a);break;case"video":case"audio":for(l=0;l<Tc.length;l++)ht(Tc[l],a);break;case"source":ht("error",a);break;case"img":case"image":case"link":ht("error",a),ht("load",a);break;case"details":ht("toggle",a);break;case"input":ht("invalid",a),Ou(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ht("invalid",a);break;case"textarea":ht("invalid",a),Er(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||$y(a.textContent,l)?(c.popover!=null&&(ht("beforetoggle",a),ht("toggle",a)),c.onScroll!=null&&ht("scroll",a),c.onScrollEnd!=null&&ht("scrollend",a),c.onClick!=null&&(a.onclick=Zs),a=!0):a=!1,a||Dr(n,!0)}function Ax(n){for(Pn=n.return;Pn;)switch(Pn.tag){case 5:case 31:case 13:Hs=!1;return;case 27:case 3:Hs=!0;return;default:Pn=Pn.return}}function Ul(n){if(n!==Pn)return!1;if(!vt)return Ax(n),vt=!0,!1;var a=n.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||dp(n.type,n.memoizedProps)),l=!l),l&&Wt&&Dr(n),Ax(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Wt=Zy(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Wt=Zy(n)}else a===27?(a=Wt,Yr(n.type)?(n=gp,gp=null,Wt=n):Wt=a):Wt=Pn?Ys(n.stateNode.nextSibling):null;return!0}function zi(){Wt=Pn=null,vt=!1}function Wf(){var n=Ir;return n!==null&&(cs===null?cs=n:cs.push.apply(cs,n),Ir=null),n}function rc(n){Ir===null?Ir=[n]:Ir.push(n)}var Kf=P(null),qi=null,Qa=null;function Mr(n,a,l){ce(Kf,a._currentValue),a._currentValue=l}function Xa(n){n._currentValue=Kf.current,J(Kf)}function Qf(n,a,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),n===l)break;n=n.return}}function Xf(n,a,l,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var z=0;z<a.length;z++)if(S.context===a[z]){m.lanes|=l,S=m.alternate,S!==null&&(S.lanes|=l),Qf(m.return,l,n),c||(v=null);break e}m=S.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=l,m=v.alternate,m!==null&&(m.lanes|=l),Qf(v,l,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Bl(n,a,l,c){n=null;for(var f=a,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var S=f.type;Ns(f.pendingProps.value,v.value)||(n!==null?n.push(S):n=[S])}}else if(f===ze.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Ic):n=[Ic])}f=f.return}n!==null&&Xf(a,n,l,c),a.flags|=262144}function sd(n){for(n=n.firstContext;n!==null;){if(!Ns(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Fi(n){qi=n,Qa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Vn(n){return Cx(qi,n)}function ad(n,a){return qi===null&&Fi(n),Cx(n,a)}function Cx(n,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Qa===null){if(n===null)throw Error(r(308));Qa=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Qa=Qa.next=a;return l}var BE=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(l,c){n.push(c)}};this.abort=function(){a.aborted=!0,n.forEach(function(l){return l()})}},zE=s.unstable_scheduleCallback,qE=s.unstable_NormalPriority,wn={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new BE,data:new Map,refCount:0}}function ic(n){n.refCount--,n.refCount===0&&zE(qE,function(){n.controller.abort()})}var lc=null,Zf=0,zl=0,ql=null;function FE(n,a){if(lc===null){var l=lc=[];Zf=0,zl=np(),ql={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Zf++,a.then(kx,kx),a}function kx(){if(--Zf===0&&lc!==null){ql!==null&&(ql.status="fulfilled");var n=lc;lc=null,zl=0,ql=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function $E(n,a){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return n.then(function(){c.status="fulfilled",c.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var Rx=R.S;R.S=function(n,a){my=_t(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&FE(n,a),Rx!==null&&Rx(n,a)};var $i=P(null);function em(){var n=$i.current;return n!==null?n:Ft.pooledCache}function rd(n,a){a===null?ce($i,$i.current):ce($i,a.pool)}function Ix(){var n=em();return n===null?null:{parent:wn._currentValue,pool:n}}var Fl=Error(r(460)),tm=Error(r(474)),id=Error(r(542)),ld={then:function(){}};function Dx(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Mx(n,a,l){switch(l=n[l],l===void 0?n.push(a):l!==a&&(a.then(Zs,Zs),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Px(n),n;default:if(typeof a.status=="string")a.then(Zs,Zs);else{if(n=Ft,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=a,n.status="pending",n.then(function(c){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=c}},function(c){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Px(n),n}throw Gi=a,Fl}}function Hi(n){try{var a=n._init;return a(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Gi=l,Fl):l}}var Gi=null;function Ox(){if(Gi===null)throw Error(r(459));var n=Gi;return Gi=null,n}function Px(n){if(n===Fl||n===id)throw Error(r(483))}var $l=null,oc=0;function od(n){var a=oc;return oc+=1,$l===null&&($l=[]),Mx($l,n,a)}function cc(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function cd(n,a){throw a.$$typeof===E?Error(r(525)):(n=Object.prototype.toString.call(a),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function Vx(n){function a(K,G){if(n){var Z=K.deletions;Z===null?(K.deletions=[G],K.flags|=16):Z.push(G)}}function l(K,G){if(!n)return null;for(;G!==null;)a(K,G),G=G.sibling;return null}function c(K){for(var G=new Map;K!==null;)K.key!==null?G.set(K.key,K):G.set(K.index,K),K=K.sibling;return G}function f(K,G){return K=Wa(K,G),K.index=0,K.sibling=null,K}function m(K,G,Z){return K.index=Z,n?(Z=K.alternate,Z!==null?(Z=Z.index,Z<G?(K.flags|=67108866,G):Z):(K.flags|=67108866,G)):(K.flags|=1048576,G)}function v(K){return n&&K.alternate===null&&(K.flags|=67108866),K}function S(K,G,Z,fe){return G===null||G.tag!==6?(G=Ff(Z,K.mode,fe),G.return=K,G):(G=f(G,Z),G.return=K,G)}function z(K,G,Z,fe){var qe=Z.type;return qe===V?de(K,G,Z.props.children,fe,Z.key):G!==null&&(G.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&Hi(qe)===G.type)?(G=f(G,Z.props),cc(G,Z),G.return=K,G):(G=td(Z.type,Z.key,Z.props,null,K.mode,fe),cc(G,Z),G.return=K,G)}function ee(K,G,Z,fe){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=$f(Z,K.mode,fe),G.return=K,G):(G=f(G,Z.children||[]),G.return=K,G)}function de(K,G,Z,fe,qe){return G===null||G.tag!==7?(G=Bi(Z,K.mode,fe,qe),G.return=K,G):(G=f(G,Z),G.return=K,G)}function pe(K,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Ff(""+G,K.mode,Z),G.return=K,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case T:return Z=td(G.type,G.key,G.props,null,K.mode,Z),cc(Z,G),Z.return=K,Z;case L:return G=$f(G,K.mode,Z),G.return=K,G;case A:return G=Hi(G),pe(K,G,Z)}if(D(G)||F(G))return G=Bi(G,K.mode,Z,null),G.return=K,G;if(typeof G.then=="function")return pe(K,od(G),Z);if(G.$$typeof===$)return pe(K,ad(K,G),Z);cd(K,G)}return null}function te(K,G,Z,fe){var qe=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return qe!==null?null:S(K,G,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return Z.key===qe?z(K,G,Z,fe):null;case L:return Z.key===qe?ee(K,G,Z,fe):null;case A:return Z=Hi(Z),te(K,G,Z,fe)}if(D(Z)||F(Z))return qe!==null?null:de(K,G,Z,fe,null);if(typeof Z.then=="function")return te(K,G,od(Z),fe);if(Z.$$typeof===$)return te(K,G,ad(K,Z),fe);cd(K,Z)}return null}function re(K,G,Z,fe,qe){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return K=K.get(Z)||null,S(G,K,""+fe,qe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case T:return K=K.get(fe.key===null?Z:fe.key)||null,z(G,K,fe,qe);case L:return K=K.get(fe.key===null?Z:fe.key)||null,ee(G,K,fe,qe);case A:return fe=Hi(fe),re(K,G,Z,fe,qe)}if(D(fe)||F(fe))return K=K.get(Z)||null,de(G,K,fe,qe,null);if(typeof fe.then=="function")return re(K,G,Z,od(fe),qe);if(fe.$$typeof===$)return re(K,G,Z,ad(G,fe),qe);cd(G,fe)}return null}function Oe(K,G,Z,fe){for(var qe=null,St=null,Le=G,lt=G=0,pt=null;Le!==null&&lt<Z.length;lt++){Le.index>lt?(pt=Le,Le=null):pt=Le.sibling;var jt=te(K,Le,Z[lt],fe);if(jt===null){Le===null&&(Le=pt);break}n&&Le&&jt.alternate===null&&a(K,Le),G=m(jt,G,lt),St===null?qe=jt:St.sibling=jt,St=jt,Le=pt}if(lt===Z.length)return l(K,Le),vt&&Ka(K,lt),qe;if(Le===null){for(;lt<Z.length;lt++)Le=pe(K,Z[lt],fe),Le!==null&&(G=m(Le,G,lt),St===null?qe=Le:St.sibling=Le,St=Le);return vt&&Ka(K,lt),qe}for(Le=c(Le);lt<Z.length;lt++)pt=re(Le,K,lt,Z[lt],fe),pt!==null&&(n&&pt.alternate!==null&&Le.delete(pt.key===null?lt:pt.key),G=m(pt,G,lt),St===null?qe=pt:St.sibling=pt,St=pt);return n&&Le.forEach(function(Jr){return a(K,Jr)}),vt&&Ka(K,lt),qe}function Ge(K,G,Z,fe){if(Z==null)throw Error(r(151));for(var qe=null,St=null,Le=G,lt=G=0,pt=null,jt=Z.next();Le!==null&&!jt.done;lt++,jt=Z.next()){Le.index>lt?(pt=Le,Le=null):pt=Le.sibling;var Jr=te(K,Le,jt.value,fe);if(Jr===null){Le===null&&(Le=pt);break}n&&Le&&Jr.alternate===null&&a(K,Le),G=m(Jr,G,lt),St===null?qe=Jr:St.sibling=Jr,St=Jr,Le=pt}if(jt.done)return l(K,Le),vt&&Ka(K,lt),qe;if(Le===null){for(;!jt.done;lt++,jt=Z.next())jt=pe(K,jt.value,fe),jt!==null&&(G=m(jt,G,lt),St===null?qe=jt:St.sibling=jt,St=jt);return vt&&Ka(K,lt),qe}for(Le=c(Le);!jt.done;lt++,jt=Z.next())jt=re(Le,K,lt,jt.value,fe),jt!==null&&(n&&jt.alternate!==null&&Le.delete(jt.key===null?lt:jt.key),G=m(jt,G,lt),St===null?qe=jt:St.sibling=jt,St=jt);return n&&Le.forEach(function(tj){return a(K,tj)}),vt&&Ka(K,lt),qe}function zt(K,G,Z,fe){if(typeof Z=="object"&&Z!==null&&Z.type===V&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:e:{for(var qe=Z.key;G!==null;){if(G.key===qe){if(qe=Z.type,qe===V){if(G.tag===7){l(K,G.sibling),fe=f(G,Z.props.children),fe.return=K,K=fe;break e}}else if(G.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===A&&Hi(qe)===G.type){l(K,G.sibling),fe=f(G,Z.props),cc(fe,Z),fe.return=K,K=fe;break e}l(K,G);break}else a(K,G);G=G.sibling}Z.type===V?(fe=Bi(Z.props.children,K.mode,fe,Z.key),fe.return=K,K=fe):(fe=td(Z.type,Z.key,Z.props,null,K.mode,fe),cc(fe,Z),fe.return=K,K=fe)}return v(K);case L:e:{for(qe=Z.key;G!==null;){if(G.key===qe)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){l(K,G.sibling),fe=f(G,Z.children||[]),fe.return=K,K=fe;break e}else{l(K,G);break}else a(K,G);G=G.sibling}fe=$f(Z,K.mode,fe),fe.return=K,K=fe}return v(K);case A:return Z=Hi(Z),zt(K,G,Z,fe)}if(D(Z))return Oe(K,G,Z,fe);if(F(Z)){if(qe=F(Z),typeof qe!="function")throw Error(r(150));return Z=qe.call(Z),Ge(K,G,Z,fe)}if(typeof Z.then=="function")return zt(K,G,od(Z),fe);if(Z.$$typeof===$)return zt(K,G,ad(K,Z),fe);cd(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,G!==null&&G.tag===6?(l(K,G.sibling),fe=f(G,Z),fe.return=K,K=fe):(l(K,G),fe=Ff(Z,K.mode,fe),fe.return=K,K=fe),v(K)):l(K,G)}return function(K,G,Z,fe){try{oc=0;var qe=zt(K,G,Z,fe);return $l=null,qe}catch(Le){if(Le===Fl||Le===id)throw Le;var St=Es(29,Le,null,K.mode);return St.lanes=fe,St.return=K,St}}}var Yi=Vx(!0),Lx=Vx(!1),Or=!1;function nm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sm(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Pr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Vr(n,a,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(At&2)!==0){var f=c.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a,a=ed(n),wx(n,null,l),a}return Zu(n,c,a,l),ed(n)}function uc(n,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=n.pendingLanes,l|=c,a.lanes=l,Js(n,l)}}function am(n,a){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var v={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,l=l.next}while(l!==null);m===null?f=m=a:m=m.next=a}else f=m=a;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=a:n.next=a,l.lastBaseUpdate=a}var rm=!1;function dc(){if(rm){var n=ql;if(n!==null)throw n}}function hc(n,a,l,c){rm=!1;var f=n.updateQueue;Or=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var z=S,ee=z.next;z.next=null,v===null?m=ee:v.next=ee,v=z;var de=n.alternate;de!==null&&(de=de.updateQueue,S=de.lastBaseUpdate,S!==v&&(S===null?de.firstBaseUpdate=ee:S.next=ee,de.lastBaseUpdate=z))}if(m!==null){var pe=f.baseState;v=0,de=ee=z=null,S=m;do{var te=S.lane&-536870913,re=te!==S.lane;if(re?(mt&te)===te:(c&te)===te){te!==0&&te===zl&&(rm=!0),de!==null&&(de=de.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Oe=n,Ge=S;te=a;var zt=l;switch(Ge.tag){case 1:if(Oe=Ge.payload,typeof Oe=="function"){pe=Oe.call(zt,pe,te);break e}pe=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ge.payload,te=typeof Oe=="function"?Oe.call(zt,pe,te):Oe,te==null)break e;pe=w({},pe,te);break e;case 2:Or=!0}}te=S.callback,te!==null&&(n.flags|=64,re&&(n.flags|=8192),re=f.callbacks,re===null?f.callbacks=[te]:re.push(te))}else re={lane:te,tag:S.tag,payload:S.payload,callback:S.callback,next:null},de===null?(ee=de=re,z=pe):de=de.next=re,v|=te;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;re=S,S=re.next,re.next=null,f.lastBaseUpdate=re,f.shared.pending=null}}while(!0);de===null&&(z=pe),f.baseState=z,f.firstBaseUpdate=ee,f.lastBaseUpdate=de,m===null&&(f.shared.lanes=0),qr|=v,n.lanes=v,n.memoizedState=pe}}function Ux(n,a){if(typeof n!="function")throw Error(r(191,n));n.call(a)}function Bx(n,a){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Ux(l[n],a)}var Hl=P(null),ud=P(0);function zx(n,a){n=ir,ce(ud,n),ce(Hl,a),ir=n|a.baseLanes}function im(){ce(ud,ir),ce(Hl,Hl.current)}function lm(){ir=ud.current,J(Hl),J(ud)}var Ss=P(null),Gs=null;function Lr(n){var a=n.alternate;ce(mn,mn.current&1),ce(Ss,n),Gs===null&&(a===null||Hl.current!==null||a.memoizedState!==null)&&(Gs=n)}function om(n){ce(mn,mn.current),ce(Ss,n),Gs===null&&(Gs=n)}function qx(n){n.tag===22?(ce(mn,mn.current),ce(Ss,n),Gs===null&&(Gs=n)):Ur()}function Ur(){ce(mn,mn.current),ce(Ss,Ss.current)}function js(n){J(Ss),Gs===n&&(Gs=null),J(mn)}var mn=P(0);function dd(n){for(var a=n;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||mp(l)||pp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ja=0,rt=null,Ut=null,_n=null,hd=!1,Gl=!1,Wi=!1,fd=0,fc=0,Yl=null,HE=0;function rn(){throw Error(r(321))}function cm(n,a){if(a===null)return!1;for(var l=0;l<a.length&&l<n.length;l++)if(!Ns(n[l],a[l]))return!1;return!0}function um(n,a,l,c,f,m){return Ja=m,rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,R.H=n===null||n.memoizedState===null?Sb:Sm,Wi=!1,m=l(c,f),Wi=!1,Gl&&(m=$x(a,l,c,f)),Fx(n),m}function Fx(n){R.H=gc;var a=Ut!==null&&Ut.next!==null;if(Ja=0,_n=Ut=rt=null,hd=!1,fc=0,Yl=null,a)throw Error(r(300));n===null||Nn||(n=n.dependencies,n!==null&&sd(n)&&(Nn=!0))}function $x(n,a,l,c){rt=n;var f=0;do{if(Gl&&(Yl=null),fc=0,Gl=!1,25<=f)throw Error(r(301));if(f+=1,_n=Ut=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}R.H=jb,m=a(l,c)}while(Gl);return m}function GE(){var n=R.H,a=n.useState()[0];return a=typeof a.then=="function"?mc(a):a,n=n.useState()[0],(Ut!==null?Ut.memoizedState:null)!==n&&(rt.flags|=1024),a}function dm(){var n=fd!==0;return fd=0,n}function hm(n,a,l){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~l}function fm(n){if(hd){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}hd=!1}Ja=0,_n=Ut=rt=null,Gl=!1,fc=fd=0,Yl=null}function Jn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _n===null?rt.memoizedState=_n=n:_n=_n.next=n,_n}function pn(){if(Ut===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=Ut.next;var a=_n===null?rt.memoizedState:_n.next;if(a!==null)_n=a,Ut=n;else{if(n===null)throw rt.alternate===null?Error(r(467)):Error(r(310));Ut=n,n={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},_n===null?rt.memoizedState=_n=n:_n=_n.next=n}return _n}function md(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mc(n){var a=fc;return fc+=1,Yl===null&&(Yl=[]),n=Mx(Yl,n,a),a=rt,(_n===null?a.memoizedState:_n.next)===null&&(a=a.alternate,R.H=a===null||a.memoizedState===null?Sb:Sm),n}function pd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return mc(n);if(n.$$typeof===$)return Vn(n)}throw Error(r(438,String(n)))}function mm(n){var a=null,l=rt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=rt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=md(),rt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(n),c=0;c<n;c++)l[c]=U;return a.index++,l}function Za(n,a){return typeof a=="function"?a(n):a}function gd(n){var a=pn();return pm(a,Ut,n)}function pm(n,a,l){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}a.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{a=f.next;var S=v=null,z=null,ee=a,de=!1;do{var pe=ee.lane&-536870913;if(pe!==ee.lane?(mt&pe)===pe:(Ja&pe)===pe){var te=ee.revertLane;if(te===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),pe===zl&&(de=!0);else if((Ja&te)===te){ee=ee.next,te===zl&&(de=!0);continue}else pe={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},z===null?(S=z=pe,v=m):z=z.next=pe,rt.lanes|=te,qr|=te;pe=ee.action,Wi&&l(m,pe),m=ee.hasEagerState?ee.eagerState:l(m,pe)}else te={lane:pe,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},z===null?(S=z=te,v=m):z=z.next=te,rt.lanes|=pe,qr|=pe;ee=ee.next}while(ee!==null&&ee!==a);if(z===null?v=m:z.next=S,!Ns(m,n.memoizedState)&&(Nn=!0,de&&(l=ql,l!==null)))throw l;n.memoizedState=m,n.baseState=v,n.baseQueue=z,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function gm(n){var a=pn(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var c=l.dispatch,f=l.pending,m=a.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);Ns(m,a.memoizedState)||(Nn=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),l.lastRenderedState=m}return[m,c]}function Hx(n,a,l){var c=rt,f=pn(),m=vt;if(m){if(l===void 0)throw Error(r(407));l=l()}else l=a();var v=!Ns((Ut||f).memoizedState,l);if(v&&(f.memoizedState=l,Nn=!0),f=f.queue,ym(Wx.bind(null,c,f,n),[n]),f.getSnapshot!==a||v||_n!==null&&_n.memoizedState.tag&1){if(c.flags|=2048,Wl(9,{destroy:void 0},Yx.bind(null,c,f,l,a),null),Ft===null)throw Error(r(349));m||(Ja&127)!==0||Gx(c,a,l)}return l}function Gx(n,a,l){n.flags|=16384,n={getSnapshot:a,value:l},a=rt.updateQueue,a===null?(a=md(),rt.updateQueue=a,a.stores=[n]):(l=a.stores,l===null?a.stores=[n]:l.push(n))}function Yx(n,a,l,c){a.value=l,a.getSnapshot=c,Kx(a)&&Qx(n)}function Wx(n,a,l){return l(function(){Kx(a)&&Qx(n)})}function Kx(n){var a=n.getSnapshot;n=n.value;try{var l=a();return!Ns(n,l)}catch{return!0}}function Qx(n){var a=Ui(n,2);a!==null&&us(a,n,2)}function xm(n){var a=Jn();if(typeof n=="function"){var l=n;if(n=l(),Wi){Ne(!0);try{l()}finally{Ne(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:n},a}function Xx(n,a,l,c){return n.baseState=l,pm(n,Ut,typeof c=="function"?c:Za)}function YE(n,a,l,c,f){if(yd(n))throw Error(r(485));if(n=a.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};R.T!==null?l(!0):m.isTransition=!1,c(m),l=a.pending,l===null?(m.next=a.pending=m,Jx(a,m)):(m.next=l.next,a.pending=l.next=m)}}function Jx(n,a){var l=a.action,c=a.payload,f=n.state;if(a.isTransition){var m=R.T,v={};R.T=v;try{var S=l(f,c),z=R.S;z!==null&&z(v,S),Zx(n,a,S)}catch(ee){bm(n,a,ee)}finally{m!==null&&v.types!==null&&(m.types=v.types),R.T=m}}else try{m=l(f,c),Zx(n,a,m)}catch(ee){bm(n,a,ee)}}function Zx(n,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){eb(n,a,c)},function(c){return bm(n,a,c)}):eb(n,a,l)}function eb(n,a,l){a.status="fulfilled",a.value=l,tb(a),n.state=l,a=n.pending,a!==null&&(l=a.next,l===a?n.pending=null:(l=l.next,a.next=l,Jx(n,l)))}function bm(n,a,l){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,tb(a),a=a.next;while(a!==c)}n.action=null}function tb(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function nb(n,a){return a}function sb(n,a){if(vt){var l=Ft.formState;if(l!==null){e:{var c=rt;if(vt){if(Wt){t:{for(var f=Wt,m=Hs;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ys(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Wt=Ys(f.nextSibling),c=f.data==="F!";break e}}Dr(c)}c=!1}c&&(a=l[0])}}return l=Jn(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nb,lastRenderedState:a},l.queue=c,l=_b.bind(null,rt,c),c.dispatch=l,c=xm(!1),m=Em.bind(null,rt,!1,c.queue),c=Jn(),f={state:a,dispatch:null,action:n,pending:null},c.queue=f,l=YE.bind(null,rt,f,m,l),f.dispatch=l,c.memoizedState=n,[a,l,!1]}function ab(n){var a=pn();return rb(a,Ut,n)}function rb(n,a,l){if(a=pm(n,a,nb)[0],n=gd(Za)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=mc(a)}catch(v){throw v===Fl?id:v}else c=a;a=pn();var f=a.queue,m=f.dispatch;return l!==a.memoizedState&&(rt.flags|=2048,Wl(9,{destroy:void 0},WE.bind(null,f,l),null)),[c,m,n]}function WE(n,a){n.action=a}function ib(n){var a=pn(),l=Ut;if(l!==null)return rb(a,l,n);pn(),a=a.memoizedState,l=pn();var c=l.queue.dispatch;return l.memoizedState=n,[a,c,!1]}function Wl(n,a,l,c){return n={tag:n,create:l,deps:c,inst:a,next:null},a=rt.updateQueue,a===null&&(a=md(),rt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,a.lastEffect=n),n}function lb(){return pn().memoizedState}function xd(n,a,l,c){var f=Jn();rt.flags|=n,f.memoizedState=Wl(1|a,{destroy:void 0},l,c===void 0?null:c)}function bd(n,a,l,c){var f=pn();c=c===void 0?null:c;var m=f.memoizedState.inst;Ut!==null&&c!==null&&cm(c,Ut.memoizedState.deps)?f.memoizedState=Wl(a,m,l,c):(rt.flags|=n,f.memoizedState=Wl(1|a,m,l,c))}function ob(n,a){xd(8390656,8,n,a)}function ym(n,a){bd(2048,8,n,a)}function KE(n){rt.flags|=4;var a=rt.updateQueue;if(a===null)a=md(),rt.updateQueue=a,a.events=[n];else{var l=a.events;l===null?a.events=[n]:l.push(n)}}function cb(n){var a=pn().memoizedState;return KE({ref:a,nextImpl:n}),function(){if((At&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function ub(n,a){return bd(4,2,n,a)}function db(n,a){return bd(4,4,n,a)}function hb(n,a){if(typeof a=="function"){n=n();var l=a(n);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function fb(n,a,l){l=l!=null?l.concat([n]):null,bd(4,4,hb.bind(null,a,n),l)}function vm(){}function mb(n,a){var l=pn();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&cm(a,c[1])?c[0]:(l.memoizedState=[n,a],n)}function pb(n,a){var l=pn();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&cm(a,c[1]))return c[0];if(c=n(),Wi){Ne(!0);try{n()}finally{Ne(!1)}}return l.memoizedState=[c,a],c}function wm(n,a,l){return l===void 0||(Ja&1073741824)!==0&&(mt&261930)===0?n.memoizedState=a:(n.memoizedState=l,n=gy(),rt.lanes|=n,qr|=n,l)}function gb(n,a,l,c){return Ns(l,a)?l:Hl.current!==null?(n=wm(n,l,c),Ns(n,a)||(Nn=!0),n):(Ja&42)===0||(Ja&1073741824)!==0&&(mt&261930)===0?(Nn=!0,n.memoizedState=l):(n=gy(),rt.lanes|=n,qr|=n,a)}function xb(n,a,l,c,f){var m=W.p;W.p=m!==0&&8>m?m:8;var v=R.T,S={};R.T=S,Em(n,!1,a,l);try{var z=f(),ee=R.S;if(ee!==null&&ee(S,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var de=$E(z,c);pc(n,a,de,Cs(n))}else pc(n,a,c,Cs(n))}catch(pe){pc(n,a,{then:function(){},status:"rejected",reason:pe},Cs())}finally{W.p=m,v!==null&&S.types!==null&&(v.types=S.types),R.T=v}}function QE(){}function _m(n,a,l,c){if(n.tag!==5)throw Error(r(476));var f=bb(n).queue;xb(n,f,a,le,l===null?QE:function(){return yb(n),l(c)})}function bb(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:le},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Za,lastRenderedState:l},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function yb(n){var a=bb(n);a.next===null&&(a=n.alternate.memoizedState),pc(n,a.next.queue,{},Cs())}function Nm(){return Vn(Ic)}function vb(){return pn().memoizedState}function wb(){return pn().memoizedState}function XE(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var l=Cs();n=Pr(l);var c=Vr(a,n,l);c!==null&&(us(c,a,l),uc(c,a,l)),a={cache:Jf()},n.payload=a;return}a=a.return}}function JE(n,a,l){var c=Cs();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yd(n)?Nb(a,l):(l=zf(n,a,l,c),l!==null&&(us(l,n,c),Eb(l,a,c)))}function _b(n,a,l){var c=Cs();pc(n,a,l,c)}function pc(n,a,l,c){var f={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(yd(n))Nb(a,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var v=a.lastRenderedState,S=m(v,l);if(f.hasEagerState=!0,f.eagerState=S,Ns(S,v))return Zu(n,a,f,0),Ft===null&&Ju(),!1}catch{}if(l=zf(n,a,f,c),l!==null)return us(l,n,c),Eb(l,a,c),!0}return!1}function Em(n,a,l,c){if(c={lane:2,revertLane:np(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},yd(n)){if(a)throw Error(r(479))}else a=zf(n,l,c,2),a!==null&&us(a,n,2)}function yd(n){var a=n.alternate;return n===rt||a!==null&&a===rt}function Nb(n,a){Gl=hd=!0;var l=n.pending;l===null?a.next=a:(a.next=l.next,l.next=a),n.pending=a}function Eb(n,a,l){if((l&4194048)!==0){var c=a.lanes;c&=n.pendingLanes,l|=c,a.lanes=l,Js(n,l)}}var gc={readContext:Vn,use:pd,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};gc.useEffectEvent=rn;var Sb={readContext:Vn,use:pd,useCallback:function(n,a){return Jn().memoizedState=[n,a===void 0?null:a],n},useContext:Vn,useEffect:ob,useImperativeHandle:function(n,a,l){l=l!=null?l.concat([n]):null,xd(4194308,4,hb.bind(null,a,n),l)},useLayoutEffect:function(n,a){return xd(4194308,4,n,a)},useInsertionEffect:function(n,a){xd(4,2,n,a)},useMemo:function(n,a){var l=Jn();a=a===void 0?null:a;var c=n();if(Wi){Ne(!0);try{n()}finally{Ne(!1)}}return l.memoizedState=[c,a],c},useReducer:function(n,a,l){var c=Jn();if(l!==void 0){var f=l(a);if(Wi){Ne(!0);try{l(a)}finally{Ne(!1)}}}else f=a;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=JE.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var a=Jn();return n={current:n},a.memoizedState=n},useState:function(n){n=xm(n);var a=n.queue,l=_b.bind(null,rt,a);return a.dispatch=l,[n.memoizedState,l]},useDebugValue:vm,useDeferredValue:function(n,a){var l=Jn();return wm(l,n,a)},useTransition:function(){var n=xm(!1);return n=xb.bind(null,rt,n.queue,!0,!1),Jn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,l){var c=rt,f=Jn();if(vt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Ft===null)throw Error(r(349));(mt&127)!==0||Gx(c,a,l)}f.memoizedState=l;var m={value:l,getSnapshot:a};return f.queue=m,ob(Wx.bind(null,c,m,n),[n]),c.flags|=2048,Wl(9,{destroy:void 0},Yx.bind(null,c,m,l,a),null),l},useId:function(){var n=Jn(),a=Ft.identifierPrefix;if(vt){var l=Aa,c=Ta;l=(c&~(1<<32-we(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=fd++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=HE++,a="_"+a+"r_"+l.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:Nm,useFormState:sb,useActionState:sb,useOptimistic:function(n){var a=Jn();a.memoizedState=a.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Em.bind(null,rt,!0,l),l.dispatch=a,[n,a]},useMemoCache:mm,useCacheRefresh:function(){return Jn().memoizedState=XE.bind(null,rt)},useEffectEvent:function(n){var a=Jn(),l={impl:n};return a.memoizedState=l,function(){if((At&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},Sm={readContext:Vn,use:pd,useCallback:mb,useContext:Vn,useEffect:ym,useImperativeHandle:fb,useInsertionEffect:ub,useLayoutEffect:db,useMemo:pb,useReducer:gd,useRef:lb,useState:function(){return gd(Za)},useDebugValue:vm,useDeferredValue:function(n,a){var l=pn();return gb(l,Ut.memoizedState,n,a)},useTransition:function(){var n=gd(Za)[0],a=pn().memoizedState;return[typeof n=="boolean"?n:mc(n),a]},useSyncExternalStore:Hx,useId:vb,useHostTransitionStatus:Nm,useFormState:ab,useActionState:ab,useOptimistic:function(n,a){var l=pn();return Xx(l,Ut,n,a)},useMemoCache:mm,useCacheRefresh:wb};Sm.useEffectEvent=cb;var jb={readContext:Vn,use:pd,useCallback:mb,useContext:Vn,useEffect:ym,useImperativeHandle:fb,useInsertionEffect:ub,useLayoutEffect:db,useMemo:pb,useReducer:gm,useRef:lb,useState:function(){return gm(Za)},useDebugValue:vm,useDeferredValue:function(n,a){var l=pn();return Ut===null?wm(l,n,a):gb(l,Ut.memoizedState,n,a)},useTransition:function(){var n=gm(Za)[0],a=pn().memoizedState;return[typeof n=="boolean"?n:mc(n),a]},useSyncExternalStore:Hx,useId:vb,useHostTransitionStatus:Nm,useFormState:ib,useActionState:ib,useOptimistic:function(n,a){var l=pn();return Ut!==null?Xx(l,Ut,n,a):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:mm,useCacheRefresh:wb};jb.useEffectEvent=cb;function jm(n,a,l,c){a=n.memoizedState,l=l(c,a),l=l==null?a:w({},a,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Tm={enqueueSetState:function(n,a,l){n=n._reactInternals;var c=Cs(),f=Pr(c);f.payload=a,l!=null&&(f.callback=l),a=Vr(n,f,c),a!==null&&(us(a,n,c),uc(a,n,c))},enqueueReplaceState:function(n,a,l){n=n._reactInternals;var c=Cs(),f=Pr(c);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=Vr(n,f,c),a!==null&&(us(a,n,c),uc(a,n,c))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var l=Cs(),c=Pr(l);c.tag=2,a!=null&&(c.callback=a),a=Vr(n,c,l),a!==null&&(us(a,n,l),uc(a,n,l))}};function Tb(n,a,l,c,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):a.prototype&&a.prototype.isPureReactComponent?!nc(l,c)||!nc(f,m):!0}function Ab(n,a,l,c){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==n&&Tm.enqueueReplaceState(a,a.state,null)}function Ki(n,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(n=n.defaultProps){l===a&&(l=w({},l));for(var f in n)l[f]===void 0&&(l[f]=n[f])}return l}function Cb(n){Xu(n)}function kb(n){console.error(n)}function Rb(n){Xu(n)}function vd(n,a){try{var l=n.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function Ib(n,a,l){try{var c=n.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Am(n,a,l){return l=Pr(l),l.tag=3,l.payload={element:null},l.callback=function(){vd(n,a)},l}function Db(n){return n=Pr(n),n.tag=3,n}function Mb(n,a,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Ib(a,l,c)}}var v=l.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Ib(a,l,c),typeof f!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function ZE(n,a,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&Bl(a,l,f,!0),l=Ss.current,l!==null){switch(l.tag){case 31:case 13:return Gs===null?Id():l.alternate===null&&ln===0&&(ln=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===ld?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),Zm(n,c,f)),!1;case 22:return l.flags|=65536,c===ld?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),Zm(n,c,f)),!1}throw Error(r(435,l.tag))}return Zm(n,c,f),Id(),!1}if(vt)return a=Ss.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,c!==Yf&&(n=Error(r(422),{cause:c}),rc(qs(n,l)))):(c!==Yf&&(a=Error(r(423),{cause:c}),rc(qs(a,l))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=qs(c,l),f=Am(n.stateNode,c,f),am(n,f),ln!==4&&(ln=2)),!1;var m=Error(r(520),{cause:c});if(m=qs(m,l),Ec===null?Ec=[m]:Ec.push(m),ln!==4&&(ln=2),a===null)return!0;c=qs(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,n=f&-f,l.lanes|=n,n=Am(l.stateNode,c,n),am(l,n),!1;case 1:if(a=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Fr===null||!Fr.has(m))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Db(f),Mb(f,n,l,c),am(l,f),!1}l=l.return}while(l!==null);return!1}var Cm=Error(r(461)),Nn=!1;function Ln(n,a,l,c){a.child=n===null?Lx(a,null,l,c):Yi(a,n.child,l,c)}function Ob(n,a,l,c,f){l=l.render;var m=a.ref;if("ref"in c){var v={};for(var S in c)S!=="ref"&&(v[S]=c[S])}else v=c;return Fi(a),c=um(n,a,l,v,m,f),S=dm(),n!==null&&!Nn?(hm(n,a,f),er(n,a,f)):(vt&&S&&Hf(a),a.flags|=1,Ln(n,a,c,f),a.child)}function Pb(n,a,l,c,f){if(n===null){var m=l.type;return typeof m=="function"&&!qf(m)&&m.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=m,Vb(n,a,m,c,f)):(n=td(l.type,null,c,a,a.mode,f),n.ref=a.ref,n.return=a,a.child=n)}if(m=n.child,!Vm(n,f)){var v=m.memoizedProps;if(l=l.compare,l=l!==null?l:nc,l(v,c)&&n.ref===a.ref)return er(n,a,f)}return a.flags|=1,n=Wa(m,c),n.ref=a.ref,n.return=a,a.child=n}function Vb(n,a,l,c,f){if(n!==null){var m=n.memoizedProps;if(nc(m,c)&&n.ref===a.ref)if(Nn=!1,a.pendingProps=c=m,Vm(n,f))(n.flags&131072)!==0&&(Nn=!0);else return a.lanes=n.lanes,er(n,a,f)}return km(n,a,l,c,f)}function Lb(n,a,l,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,n!==null){for(c=a.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,a.child=null;return Ub(n,a,m,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&rd(a,m!==null?m.cachePool:null),m!==null?zx(a,m):im(),qx(a);else return c=a.lanes=536870912,Ub(n,a,m!==null?m.baseLanes|l:l,l,c)}else m!==null?(rd(a,m.cachePool),zx(a,m),Ur(),a.memoizedState=null):(n!==null&&rd(a,null),im(),Ur());return Ln(n,a,f,l),a.child}function xc(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Ub(n,a,l,c,f){var m=em();return m=m===null?null:{parent:wn._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},n!==null&&rd(a,null),im(),qx(a),n!==null&&Bl(n,a,c,!0),a.childLanes=f,null}function wd(n,a){return a=Nd({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function Bb(n,a,l){return Yi(a,n.child,null,l),n=wd(a,a.pendingProps),n.flags|=2,js(a),a.memoizedState=null,n}function eS(n,a,l){var c=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(vt){if(c.mode==="hidden")return n=wd(a,c),a.lanes=536870912,xc(null,n);if(om(a),(n=Wt)?(n=Jy(n,Hs),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Rr!==null?{id:Ta,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},l=Nx(n),l.return=a,a.child=l,Pn=a,Wt=null)):n=null,n===null)throw Dr(a);return a.lanes=536870912,null}return wd(a,c)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(om(a),f)if(a.flags&256)a.flags&=-257,a=Bb(n,a,l);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(r(558));else if(Nn||Bl(n,a,l,!1),f=(l&n.childLanes)!==0,Nn||f){if(c=Ft,c!==null&&(v=Si(c,l),v!==0&&v!==m.retryLane))throw m.retryLane=v,Ui(n,v),us(c,n,v),Cm;Id(),a=Bb(n,a,l)}else n=m.treeContext,Wt=Ys(v.nextSibling),Pn=a,vt=!0,Ir=null,Hs=!1,n!==null&&jx(a,n),a=wd(a,c),a.flags|=4096;return a}return n=Wa(n.child,{mode:c.mode,children:c.children}),n.ref=a.ref,a.child=n,n.return=a,n}function _d(n,a){var l=a.ref;if(l===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(n===null||n.ref!==l)&&(a.flags|=4194816)}}function km(n,a,l,c,f){return Fi(a),l=um(n,a,l,c,void 0,f),c=dm(),n!==null&&!Nn?(hm(n,a,f),er(n,a,f)):(vt&&c&&Hf(a),a.flags|=1,Ln(n,a,l,f),a.child)}function zb(n,a,l,c,f,m){return Fi(a),a.updateQueue=null,l=$x(a,c,l,f),Fx(n),c=dm(),n!==null&&!Nn?(hm(n,a,m),er(n,a,m)):(vt&&c&&Hf(a),a.flags|=1,Ln(n,a,l,m),a.child)}function qb(n,a,l,c,f){if(Fi(a),a.stateNode===null){var m=Pl,v=l.contextType;typeof v=="object"&&v!==null&&(m=Vn(v)),m=new l(c,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Tm,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=c,m.state=a.memoizedState,m.refs={},nm(a),v=l.contextType,m.context=typeof v=="object"&&v!==null?Vn(v):Pl,m.state=a.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(jm(a,l,v,c),m.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&Tm.enqueueReplaceState(m,m.state,null),hc(a,c,m,f),dc(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(n===null){m=a.stateNode;var S=a.memoizedProps,z=Ki(l,S);m.props=z;var ee=m.context,de=l.contextType;v=Pl,typeof de=="object"&&de!==null&&(v=Vn(de));var pe=l.getDerivedStateFromProps;de=typeof pe=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,de||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||ee!==v)&&Ab(a,m,c,v),Or=!1;var te=a.memoizedState;m.state=te,hc(a,c,m,f),dc(),ee=a.memoizedState,S||te!==ee||Or?(typeof pe=="function"&&(jm(a,l,pe,c),ee=a.memoizedState),(z=Or||Tb(a,l,z,c,te,ee,v))?(de||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=ee),m.props=c,m.state=ee,m.context=v,c=z):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{m=a.stateNode,sm(n,a),v=a.memoizedProps,de=Ki(l,v),m.props=de,pe=a.pendingProps,te=m.context,ee=l.contextType,z=Pl,typeof ee=="object"&&ee!==null&&(z=Vn(ee)),S=l.getDerivedStateFromProps,(ee=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==pe||te!==z)&&Ab(a,m,c,z),Or=!1,te=a.memoizedState,m.state=te,hc(a,c,m,f),dc();var re=a.memoizedState;v!==pe||te!==re||Or||n!==null&&n.dependencies!==null&&sd(n.dependencies)?(typeof S=="function"&&(jm(a,l,S,c),re=a.memoizedState),(de=Or||Tb(a,l,de,c,te,re,z)||n!==null&&n.dependencies!==null&&sd(n.dependencies))?(ee||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,re,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,re,z)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=re),m.props=c,m.state=re,m.context=z,c=de):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&te===n.memoizedState||(a.flags|=1024),c=!1)}return m=c,_d(n,a),c=(a.flags&128)!==0,m||c?(m=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,n!==null&&c?(a.child=Yi(a,n.child,null,f),a.child=Yi(a,null,l,f)):Ln(n,a,l,f),a.memoizedState=m.state,n=a.child):n=er(n,a,f),n}function Fb(n,a,l,c){return zi(),a.flags|=256,Ln(n,a,l,c),a.child}var Rm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Im(n){return{baseLanes:n,cachePool:Ix()}}function Dm(n,a,l){return n=n!==null?n.childLanes&~l:0,a&&(n|=As),n}function $b(n,a,l){var c=a.pendingProps,f=!1,m=(a.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(mn.current&2)!==0),v&&(f=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,n===null){if(vt){if(f?Lr(a):Ur(),(n=Wt)?(n=Jy(n,Hs),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Rr!==null?{id:Ta,overflow:Aa}:null,retryLane:536870912,hydrationErrors:null},l=Nx(n),l.return=a,a.child=l,Pn=a,Wt=null)):n=null,n===null)throw Dr(a);return pp(n)?a.lanes=32:a.lanes=536870912,null}var S=c.children;return c=c.fallback,f?(Ur(),f=a.mode,S=Nd({mode:"hidden",children:S},f),c=Bi(c,f,l,null),S.return=a,c.return=a,S.sibling=c,a.child=S,c=a.child,c.memoizedState=Im(l),c.childLanes=Dm(n,v,l),a.memoizedState=Rm,xc(null,c)):(Lr(a),Mm(a,S))}var z=n.memoizedState;if(z!==null&&(S=z.dehydrated,S!==null)){if(m)a.flags&256?(Lr(a),a.flags&=-257,a=Om(n,a,l)):a.memoizedState!==null?(Ur(),a.child=n.child,a.flags|=128,a=null):(Ur(),S=c.fallback,f=a.mode,c=Nd({mode:"visible",children:c.children},f),S=Bi(S,f,l,null),S.flags|=2,c.return=a,S.return=a,c.sibling=S,a.child=c,Yi(a,n.child,null,l),c=a.child,c.memoizedState=Im(l),c.childLanes=Dm(n,v,l),a.memoizedState=Rm,a=xc(null,c));else if(Lr(a),pp(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var ee=v.dgst;v=ee,c=Error(r(419)),c.stack="",c.digest=v,rc({value:c,source:null,stack:null}),a=Om(n,a,l)}else if(Nn||Bl(n,a,l,!1),v=(l&n.childLanes)!==0,Nn||v){if(v=Ft,v!==null&&(c=Si(v,l),c!==0&&c!==z.retryLane))throw z.retryLane=c,Ui(n,c),us(v,n,c),Cm;mp(S)||Id(),a=Om(n,a,l)}else mp(S)?(a.flags|=192,a.child=n.child,a=null):(n=z.treeContext,Wt=Ys(S.nextSibling),Pn=a,vt=!0,Ir=null,Hs=!1,n!==null&&jx(a,n),a=Mm(a,c.children),a.flags|=4096);return a}return f?(Ur(),S=c.fallback,f=a.mode,z=n.child,ee=z.sibling,c=Wa(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,ee!==null?S=Wa(ee,S):(S=Bi(S,f,l,null),S.flags|=2),S.return=a,c.return=a,c.sibling=S,a.child=c,xc(null,c),c=a.child,S=n.child.memoizedState,S===null?S=Im(l):(f=S.cachePool,f!==null?(z=wn._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=Ix(),S={baseLanes:S.baseLanes|l,cachePool:f}),c.memoizedState=S,c.childLanes=Dm(n,v,l),a.memoizedState=Rm,xc(n.child,c)):(Lr(a),l=n.child,n=l.sibling,l=Wa(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,n!==null&&(v=a.deletions,v===null?(a.deletions=[n],a.flags|=16):v.push(n)),a.child=l,a.memoizedState=null,l)}function Mm(n,a){return a=Nd({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Nd(n,a){return n=Es(22,n,null,a),n.lanes=0,n}function Om(n,a,l){return Yi(a,n.child,null,l),n=Mm(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function Hb(n,a,l){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a),Qf(n.return,a,l)}function Pm(n,a,l,c,f,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f,treeForkCount:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=l,v.tailMode=f,v.treeForkCount=m)}function Gb(n,a,l){var c=a.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=mn.current,S=(v&2)!==0;if(S?(v=v&1|2,a.flags|=128):v&=1,ce(mn,v),Ln(n,a,c,l),c=vt?ac:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Hb(n,l,a);else if(n.tag===19)Hb(n,l,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(l=a.child,f=null;l!==null;)n=l.alternate,n!==null&&dd(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),Pm(a,!1,f,l,m,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(n=f.alternate,n!==null&&dd(n)===null){a.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Pm(a,!0,l,null,m,c);break;case"together":Pm(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function er(n,a,l){if(n!==null&&(a.dependencies=n.dependencies),qr|=a.lanes,(l&a.childLanes)===0)if(n!==null){if(Bl(n,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(r(153));if(a.child!==null){for(n=a.child,l=Wa(n,n.pendingProps),a.child=l,l.return=a;n.sibling!==null;)n=n.sibling,l=l.sibling=Wa(n,n.pendingProps),l.return=a;l.sibling=null}return a.child}function Vm(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&sd(n)))}function tS(n,a,l){switch(a.tag){case 3:Ct(a,a.stateNode.containerInfo),Mr(a,wn,n.memoizedState.cache),zi();break;case 27:case 5:dn(a);break;case 4:Ct(a,a.stateNode.containerInfo);break;case 10:Mr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,om(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Lr(a),a.flags|=128,null):(l&a.child.childLanes)!==0?$b(n,a,l):(Lr(a),n=er(n,a,l),n!==null?n.sibling:null);Lr(a);break;case 19:var f=(n.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(Bl(n,a,l,!1),c=(l&a.childLanes)!==0),f){if(c)return Gb(n,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(mn,mn.current),c)break;return null;case 22:return a.lanes=0,Lb(n,a,l,a.pendingProps);case 24:Mr(a,wn,n.memoizedState.cache)}return er(n,a,l)}function Yb(n,a,l){if(n!==null)if(n.memoizedProps!==a.pendingProps)Nn=!0;else{if(!Vm(n,l)&&(a.flags&128)===0)return Nn=!1,tS(n,a,l);Nn=(n.flags&131072)!==0}else Nn=!1,vt&&(a.flags&1048576)!==0&&Sx(a,ac,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(n=Hi(a.elementType),a.type=n,typeof n=="function")qf(n)?(c=Ki(n,c),a.tag=1,a=qb(null,a,n,c,l)):(a.tag=0,a=km(null,a,n,c,l));else{if(n!=null){var f=n.$$typeof;if(f===ie){a.tag=11,a=Ob(null,a,n,c,l);break e}else if(f===j){a.tag=14,a=Pb(null,a,n,c,l);break e}}throw a=q(n)||n,Error(r(306,a,""))}}return a;case 0:return km(n,a,a.type,a.pendingProps,l);case 1:return c=a.type,f=Ki(c,a.pendingProps),qb(n,a,c,f,l);case 3:e:{if(Ct(a,a.stateNode.containerInfo),n===null)throw Error(r(387));c=a.pendingProps;var m=a.memoizedState;f=m.element,sm(n,a),hc(a,c,null,l);var v=a.memoizedState;if(c=v.cache,Mr(a,wn,c),c!==m.cache&&Xf(a,[wn],l,!0),dc(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=Fb(n,a,c,l);break e}else if(c!==f){f=qs(Error(r(424)),a),rc(f),a=Fb(n,a,c,l);break e}else for(n=a.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Wt=Ys(n.firstChild),Pn=a,vt=!0,Ir=null,Hs=!0,l=Lx(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(zi(),c===f){a=er(n,a,l);break e}Ln(n,a,c,l)}a=a.child}return a;case 26:return _d(n,a),n===null?(l=av(a.type,null,a.pendingProps,null))?a.memoizedState=l:vt||(l=a.type,n=a.pendingProps,c=Ud(De.current).createElement(l),c[an]=a,c[bn]=n,Un(c,l,n),yn(c),a.stateNode=c):a.memoizedState=av(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return dn(a),n===null&&vt&&(c=a.stateNode=tv(a.type,a.pendingProps,De.current),Pn=a,Hs=!0,f=Wt,Yr(a.type)?(gp=f,Wt=Ys(c.firstChild)):Wt=f),Ln(n,a,a.pendingProps.children,l),_d(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&vt&&((f=c=Wt)&&(c=RS(c,a.type,a.pendingProps,Hs),c!==null?(a.stateNode=c,Pn=a,Wt=Ys(c.firstChild),Hs=!1,f=!0):f=!1),f||Dr(a)),dn(a),f=a.type,m=a.pendingProps,v=n!==null?n.memoizedProps:null,c=m.children,dp(f,m)?c=null:v!==null&&dp(f,v)&&(a.flags|=32),a.memoizedState!==null&&(f=um(n,a,GE,null,null,l),Ic._currentValue=f),_d(n,a),Ln(n,a,c,l),a.child;case 6:return n===null&&vt&&((n=l=Wt)&&(l=IS(l,a.pendingProps,Hs),l!==null?(a.stateNode=l,Pn=a,Wt=null,n=!0):n=!1),n||Dr(a)),null;case 13:return $b(n,a,l);case 4:return Ct(a,a.stateNode.containerInfo),c=a.pendingProps,n===null?a.child=Yi(a,null,c,l):Ln(n,a,c,l),a.child;case 11:return Ob(n,a,a.type,a.pendingProps,l);case 7:return Ln(n,a,a.pendingProps,l),a.child;case 8:return Ln(n,a,a.pendingProps.children,l),a.child;case 12:return Ln(n,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,Mr(a,a.type,c.value),Ln(n,a,c.children,l),a.child;case 9:return f=a.type._context,c=a.pendingProps.children,Fi(a),f=Vn(f),c=c(f),a.flags|=1,Ln(n,a,c,l),a.child;case 14:return Pb(n,a,a.type,a.pendingProps,l);case 15:return Vb(n,a,a.type,a.pendingProps,l);case 19:return Gb(n,a,l);case 31:return eS(n,a,l);case 22:return Lb(n,a,l,a.pendingProps);case 24:return Fi(a),c=Vn(wn),n===null?(f=em(),f===null&&(f=Ft,m=Jf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=l),f=m),a.memoizedState={parent:c,cache:f},nm(a),Mr(a,wn,f)):((n.lanes&l)!==0&&(sm(n,a),hc(a,null,null,l),dc()),f=n.memoizedState,m=a.memoizedState,f.parent!==c?(f={parent:c,cache:c},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Mr(a,wn,c)):(c=m.cache,Mr(a,wn,c),c!==f.cache&&Xf(a,[wn],l,!0))),Ln(n,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function tr(n){n.flags|=4}function Lm(n,a,l,c,f){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(vy())n.flags|=8192;else throw Gi=ld,tm}else n.flags&=-16777217}function Wb(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!cv(a))if(vy())n.flags|=8192;else throw Gi=ld,tm}function Ed(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?He():536870912,n.lanes|=a,Jl|=a)}function bc(n,a){if(!vt)switch(n.tailMode){case"hidden":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Kt(n){var a=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(a)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=l,a}function nS(n,a,l){var c=a.pendingProps;switch(Gf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(a),null;case 1:return Kt(a),null;case 3:return l=a.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Xa(wn),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Ul(a)?tr(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Wf())),Kt(a),null;case 26:var f=a.type,m=a.memoizedState;return n===null?(tr(a),m!==null?(Kt(a),Wb(a,m)):(Kt(a),Lm(a,f,null,c,l))):m?m!==n.memoizedState?(tr(a),Kt(a),Wb(a,m)):(Kt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==c&&tr(a),Kt(a),Lm(a,f,n,c,l)),null;case 27:if(ne(a),l=De.current,f=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==c&&tr(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Kt(a),null}n=xe.current,Ul(a)?Tx(a):(n=tv(f,c,l),a.stateNode=n,tr(a))}return Kt(a),null;case 5:if(ne(a),f=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==c&&tr(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Kt(a),null}if(m=xe.current,Ul(a))Tx(a);else{var v=Ud(De.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[an]=a,m[bn]=c;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=m;e:switch(Un(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&tr(a)}}return Kt(a),Lm(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,l),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==c&&tr(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(n=De.current,Ul(a)){if(n=a.stateNode,l=a.memoizedProps,c=null,f=Pn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[an]=a,n=!!(n.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||$y(n.nodeValue,l)),n||Dr(a,!0)}else n=Ud(n).createTextNode(c),n[an]=a,a.stateNode=n}return Kt(a),null;case 31:if(l=a.memoizedState,n===null||n.memoizedState!==null){if(c=Ul(a),l!==null){if(n===null){if(!c)throw Error(r(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[an]=a}else zi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Kt(a),n=!1}else l=Wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return a.flags&256?(js(a),a):(js(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Kt(a),null;case 13:if(c=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ul(a),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[an]=a}else zi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Kt(a),f=!1}else f=Wf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(js(a),a):(js(a),null)}return js(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,n=n!==null&&n.memoizedState!==null,l&&(c=a.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),l!==n&&l&&(a.child.flags|=8192),Ed(a,a.updateQueue),Kt(a),null);case 4:return ft(),n===null&&ip(a.stateNode.containerInfo),Kt(a),null;case 10:return Xa(a.type),Kt(a),null;case 19:if(J(mn),c=a.memoizedState,c===null)return Kt(a),null;if(f=(a.flags&128)!==0,m=c.rendering,m===null)if(f)bc(c,!1);else{if(ln!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(m=dd(n),m!==null){for(a.flags|=128,bc(c,!1),n=m.updateQueue,a.updateQueue=n,Ed(a,n),a.subtreeFlags=0,n=l,l=a.child;l!==null;)_x(l,n),l=l.sibling;return ce(mn,mn.current&1|2),vt&&Ka(a,c.treeForkCount),a.child}n=n.sibling}c.tail!==null&&_t()>Cd&&(a.flags|=128,f=!0,bc(c,!1),a.lanes=4194304)}else{if(!f)if(n=dd(m),n!==null){if(a.flags|=128,f=!0,n=n.updateQueue,a.updateQueue=n,Ed(a,n),bc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!vt)return Kt(a),null}else 2*_t()-c.renderingStartTime>Cd&&l!==536870912&&(a.flags|=128,f=!0,bc(c,!1),a.lanes=4194304);c.isBackwards?(m.sibling=a.child,a.child=m):(n=c.last,n!==null?n.sibling=m:a.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=_t(),n.sibling=null,l=mn.current,ce(mn,f?l&1|2:l&1),vt&&Ka(a,c.treeForkCount),n):(Kt(a),null);case 22:case 23:return js(a),lm(),c=a.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(Kt(a),a.subtreeFlags&6&&(a.flags|=8192)):Kt(a),l=a.updateQueue,l!==null&&Ed(a,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),n!==null&&J($i),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Xa(wn),Kt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function sS(n,a){switch(Gf(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Xa(wn),ft(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return ne(a),null;case 31:if(a.memoizedState!==null){if(js(a),a.alternate===null)throw Error(r(340));zi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(js(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(r(340));zi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return J(mn),null;case 4:return ft(),null;case 10:return Xa(a.type),null;case 22:case 23:return js(a),lm(),n!==null&&J($i),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Xa(wn),null;case 25:return null;default:return null}}function Kb(n,a){switch(Gf(a),a.tag){case 3:Xa(wn),ft();break;case 26:case 27:case 5:ne(a);break;case 4:ft();break;case 31:a.memoizedState!==null&&js(a);break;case 13:js(a);break;case 19:J(mn);break;case 10:Xa(a.type);break;case 22:case 23:js(a),lm(),n!==null&&J($i);break;case 24:Xa(wn)}}function yc(n,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&n)===n){c=void 0;var m=l.create,v=l.inst;c=m(),v.destroy=c}l=l.next}while(l!==f)}}catch(S){Pt(a,a.return,S)}}function Br(n,a,l){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var v=c.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,f=a;var z=l,ee=S;try{ee()}catch(de){Pt(f,z,de)}}}c=c.next}while(c!==m)}}catch(de){Pt(a,a.return,de)}}function Qb(n){var a=n.updateQueue;if(a!==null){var l=n.stateNode;try{Bx(a,l)}catch(c){Pt(n,n.return,c)}}}function Xb(n,a,l){l.props=Ki(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(c){Pt(n,a,c)}}function vc(n,a){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof l=="function"?n.refCleanup=l(c):l.current=c}}catch(f){Pt(n,a,f)}}function Ca(n,a){var l=n.ref,c=n.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){Pt(n,a,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){Pt(n,a,f)}else l.current=null}function Jb(n){var a=n.type,l=n.memoizedProps,c=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){Pt(n,n.return,f)}}function Um(n,a,l){try{var c=n.stateNode;SS(c,n.type,l,a),c[bn]=a}catch(f){Pt(n,n.return,f)}}function Zb(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Yr(n.type)||n.tag===4}function Bm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Zb(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Yr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zm(n,a,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(n),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Zs));else if(c!==4&&(c===27&&Yr(n.type)&&(l=n.stateNode,a=null),n=n.child,n!==null))for(zm(n,a,l),n=n.sibling;n!==null;)zm(n,a,l),n=n.sibling}function Sd(n,a,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,a?l.insertBefore(n,a):l.appendChild(n);else if(c!==4&&(c===27&&Yr(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Sd(n,a,l),n=n.sibling;n!==null;)Sd(n,a,l),n=n.sibling}function ey(n){var a=n.stateNode,l=n.memoizedProps;try{for(var c=n.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);Un(a,c,l),a[an]=n,a[bn]=l}catch(m){Pt(n,n.return,m)}}var nr=!1,En=!1,qm=!1,ty=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function aS(n,a){if(n=n.containerInfo,cp=Gd,n=fx(n),Of(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var v=0,S=-1,z=-1,ee=0,de=0,pe=n,te=null;t:for(;;){for(var re;pe!==l||f!==0&&pe.nodeType!==3||(S=v+f),pe!==m||c!==0&&pe.nodeType!==3||(z=v+c),pe.nodeType===3&&(v+=pe.nodeValue.length),(re=pe.firstChild)!==null;)te=pe,pe=re;for(;;){if(pe===n)break t;if(te===l&&++ee===f&&(S=v),te===m&&++de===c&&(z=v),(re=pe.nextSibling)!==null)break;pe=te,te=pe.parentNode}pe=re}l=S===-1||z===-1?null:{start:S,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(up={focusedElem:n,selectionRange:l},Gd=!1,Dn=a;Dn!==null;)if(a=Dn,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,Dn=n;else for(;Dn!==null;){switch(a=Dn,m=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)f=n[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,l=a,f=m.memoizedProps,m=m.memoizedState,c=l.stateNode;try{var Oe=Ki(l.type,f);n=c.getSnapshotBeforeUpdate(Oe,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ge){Pt(l,l.return,Ge)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,l=n.nodeType,l===9)fp(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":fp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=a.sibling,n!==null){n.return=a.return,Dn=n;break}Dn=a.return}}function ny(n,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ar(n,l),c&4&&yc(5,l);break;case 1:if(ar(n,l),c&4)if(n=l.stateNode,a===null)try{n.componentDidMount()}catch(v){Pt(l,l.return,v)}else{var f=Ki(l.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(f,a,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Pt(l,l.return,v)}}c&64&&Qb(l),c&512&&vc(l,l.return);break;case 3:if(ar(n,l),c&64&&(n=l.updateQueue,n!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Bx(n,a)}catch(v){Pt(l,l.return,v)}}break;case 27:a===null&&c&4&&ey(l);case 26:case 5:ar(n,l),a===null&&c&4&&Jb(l),c&512&&vc(l,l.return);break;case 12:ar(n,l);break;case 31:ar(n,l),c&4&&ry(n,l);break;case 13:ar(n,l),c&4&&iy(n,l),c&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=fS.bind(null,l),DS(n,l))));break;case 22:if(c=l.memoizedState!==null||nr,!c){a=a!==null&&a.memoizedState!==null||En,f=nr;var m=En;nr=c,(En=a)&&!m?rr(n,l,(l.subtreeFlags&8772)!==0):ar(n,l),nr=f,En=m}break;case 30:break;default:ar(n,l)}}function sy(n){var a=n.alternate;a!==null&&(n.alternate=null,sy(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&_l(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Jt=null,is=!1;function sr(n,a,l){for(l=l.child;l!==null;)ay(n,a,l),l=l.sibling}function ay(n,a,l){if(se&&typeof se.onCommitFiberUnmount=="function")try{se.onCommitFiberUnmount(H,l)}catch{}switch(l.tag){case 26:En||Ca(l,a),sr(n,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:En||Ca(l,a);var c=Jt,f=is;Yr(l.type)&&(Jt=l.stateNode,is=!1),sr(n,a,l),Cc(l.stateNode),Jt=c,is=f;break;case 5:En||Ca(l,a);case 6:if(c=Jt,f=is,Jt=null,sr(n,a,l),Jt=c,is=f,Jt!==null)if(is)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(l.stateNode)}catch(m){Pt(l,a,m)}else try{Jt.removeChild(l.stateNode)}catch(m){Pt(l,a,m)}break;case 18:Jt!==null&&(is?(n=Jt,Qy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),io(n)):Qy(Jt,l.stateNode));break;case 4:c=Jt,f=is,Jt=l.stateNode.containerInfo,is=!0,sr(n,a,l),Jt=c,is=f;break;case 0:case 11:case 14:case 15:Br(2,l,a),En||Br(4,l,a),sr(n,a,l);break;case 1:En||(Ca(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Xb(l,a,c)),sr(n,a,l);break;case 21:sr(n,a,l);break;case 22:En=(c=En)||l.memoizedState!==null,sr(n,a,l),En=c;break;default:sr(n,a,l)}}function ry(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{io(n)}catch(l){Pt(a,a.return,l)}}}function iy(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{io(n)}catch(l){Pt(a,a.return,l)}}function rS(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new ty),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new ty),a;default:throw Error(r(435,n.tag))}}function jd(n,a){var l=rS(n);a.forEach(function(c){if(!l.has(c)){l.add(c);var f=mS.bind(null,n,c);c.then(f,f)}})}function ls(n,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],m=n,v=a,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(Yr(S.type)){Jt=S.stateNode,is=!1;break e}break;case 5:Jt=S.stateNode,is=!1;break e;case 3:case 4:Jt=S.stateNode.containerInfo,is=!0;break e}S=S.return}if(Jt===null)throw Error(r(160));ay(m,v,f),Jt=null,is=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)ly(a,n),a=a.sibling}var ra=null;function ly(n,a){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ls(a,n),os(n),c&4&&(Br(3,n,n.return),yc(3,n),Br(5,n,n.return));break;case 1:ls(a,n),os(n),c&512&&(En||l===null||Ca(l,l.return)),c&64&&nr&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=ra;if(ls(a,n),os(n),c&512&&(En||l===null||Ca(l,l.return)),c&4){var m=l!==null?l.memoizedState:null;if(c=n.memoizedState,l===null)if(c===null)if(n.stateNode===null){e:{c=n.type,l=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[pa]||m[an]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Un(m,c,l),m[an]=n,yn(m),c=m;break e;case"link":var v=lv("link","href",f).get(c+(l.href||""));if(v){for(var S=0;S<v.length;S++)if(m=v[S],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){v.splice(S,1);break t}}m=f.createElement(c),Un(m,c,l),f.head.appendChild(m);break;case"meta":if(v=lv("meta","content",f).get(c+(l.content||""))){for(S=0;S<v.length;S++)if(m=v[S],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){v.splice(S,1);break t}}m=f.createElement(c),Un(m,c,l),f.head.appendChild(m);break;default:throw Error(r(468,c))}m[an]=n,yn(m),c=m}n.stateNode=c}else ov(f,n.type,n.stateNode);else n.stateNode=iv(f,c,n.memoizedProps);else m!==c?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,c===null?ov(f,n.type,n.stateNode):iv(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Um(n,n.memoizedProps,l.memoizedProps)}break;case 27:ls(a,n),os(n),c&512&&(En||l===null||Ca(l,l.return)),l!==null&&c&4&&Um(n,n.memoizedProps,l.memoizedProps);break;case 5:if(ls(a,n),os(n),c&512&&(En||l===null||Ca(l,l.return)),n.flags&32){f=n.stateNode;try{rs(f,"")}catch(Oe){Pt(n,n.return,Oe)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Um(n,f,l!==null?l.memoizedProps:f)),c&1024&&(qm=!0);break;case 6:if(ls(a,n),os(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,l=n.stateNode;try{l.nodeValue=c}catch(Oe){Pt(n,n.return,Oe)}}break;case 3:if(qd=null,f=ra,ra=Bd(a.containerInfo),ls(a,n),ra=f,os(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{io(a.containerInfo)}catch(Oe){Pt(n,n.return,Oe)}qm&&(qm=!1,oy(n));break;case 4:c=ra,ra=Bd(n.stateNode.containerInfo),ls(a,n),os(n),ra=c;break;case 12:ls(a,n),os(n);break;case 31:ls(a,n),os(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,jd(n,c)));break;case 13:ls(a,n),os(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ad=_t()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,jd(n,c)));break;case 22:f=n.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,ee=nr,de=En;if(nr=ee||f,En=de||z,ls(a,n),En=de,nr=ee,os(n),c&8192)e:for(a=n.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(l===null||z||nr||En||Qi(n)),l=null,a=n;;){if(a.tag===5||a.tag===26){if(l===null){z=l=a;try{if(m=z.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=z.stateNode;var pe=z.memoizedProps.style,te=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;S.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Oe){Pt(z,z.return,Oe)}}}else if(a.tag===6){if(l===null){z=a;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(Oe){Pt(z,z.return,Oe)}}}else if(a.tag===18){if(l===null){z=a;try{var re=z.stateNode;f?Xy(re,!0):Xy(z.stateNode,!1)}catch(Oe){Pt(z,z.return,Oe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=n.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,jd(n,l))));break;case 19:ls(a,n),os(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,jd(n,c)));break;case 30:break;case 21:break;default:ls(a,n),os(n)}}function os(n){var a=n.flags;if(a&2){try{for(var l,c=n.return;c!==null;){if(Zb(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var f=l.stateNode,m=Bm(n);Sd(n,m,f);break;case 5:var v=l.stateNode;l.flags&32&&(rs(v,""),l.flags&=-33);var S=Bm(n);Sd(n,S,v);break;case 3:case 4:var z=l.stateNode.containerInfo,ee=Bm(n);zm(n,ee,z);break;default:throw Error(r(161))}}catch(de){Pt(n,n.return,de)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function oy(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;oy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function ar(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ny(n,a.alternate,a),a=a.sibling}function Qi(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Br(4,a,a.return),Qi(a);break;case 1:Ca(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&Xb(a,a.return,l),Qi(a);break;case 27:Cc(a.stateNode);case 26:case 5:Ca(a,a.return),Qi(a);break;case 22:a.memoizedState===null&&Qi(a);break;case 30:Qi(a);break;default:Qi(a)}n=n.sibling}}function rr(n,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,f=n,m=a,v=m.flags;switch(m.tag){case 0:case 11:case 15:rr(f,m,l),yc(4,m);break;case 1:if(rr(f,m,l),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ee){Pt(c,c.return,ee)}if(c=m,f=c.updateQueue,f!==null){var S=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)Ux(z[f],S)}catch(ee){Pt(c,c.return,ee)}}l&&v&64&&Qb(m),vc(m,m.return);break;case 27:ey(m);case 26:case 5:rr(f,m,l),l&&c===null&&v&4&&Jb(m),vc(m,m.return);break;case 12:rr(f,m,l);break;case 31:rr(f,m,l),l&&v&4&&ry(f,m);break;case 13:rr(f,m,l),l&&v&4&&iy(f,m);break;case 22:m.memoizedState===null&&rr(f,m,l),vc(m,m.return);break;case 30:break;default:rr(f,m,l)}a=a.sibling}}function Fm(n,a){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&ic(l))}function $m(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&ic(n))}function ia(n,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)cy(n,a,l,c),a=a.sibling}function cy(n,a,l,c){var f=a.flags;switch(a.tag){case 0:case 11:case 15:ia(n,a,l,c),f&2048&&yc(9,a);break;case 1:ia(n,a,l,c);break;case 3:ia(n,a,l,c),f&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&ic(n)));break;case 12:if(f&2048){ia(n,a,l,c),n=a.stateNode;try{var m=a.memoizedProps,v=m.id,S=m.onPostCommit;typeof S=="function"&&S(v,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(z){Pt(a,a.return,z)}}else ia(n,a,l,c);break;case 31:ia(n,a,l,c);break;case 13:ia(n,a,l,c);break;case 23:break;case 22:m=a.stateNode,v=a.alternate,a.memoizedState!==null?m._visibility&2?ia(n,a,l,c):wc(n,a):m._visibility&2?ia(n,a,l,c):(m._visibility|=2,Kl(n,a,l,c,(a.subtreeFlags&10256)!==0||!1)),f&2048&&Fm(v,a);break;case 24:ia(n,a,l,c),f&2048&&$m(a.alternate,a);break;default:ia(n,a,l,c)}}function Kl(n,a,l,c,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var m=n,v=a,S=l,z=c,ee=v.flags;switch(v.tag){case 0:case 11:case 15:Kl(m,v,S,z,f),yc(8,v);break;case 23:break;case 22:var de=v.stateNode;v.memoizedState!==null?de._visibility&2?Kl(m,v,S,z,f):wc(m,v):(de._visibility|=2,Kl(m,v,S,z,f)),f&&ee&2048&&Fm(v.alternate,v);break;case 24:Kl(m,v,S,z,f),f&&ee&2048&&$m(v.alternate,v);break;default:Kl(m,v,S,z,f)}a=a.sibling}}function wc(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=n,c=a,f=c.flags;switch(c.tag){case 22:wc(l,c),f&2048&&Fm(c.alternate,c);break;case 24:wc(l,c),f&2048&&$m(c.alternate,c);break;default:wc(l,c)}a=a.sibling}}var _c=8192;function Ql(n,a,l){if(n.subtreeFlags&_c)for(n=n.child;n!==null;)uy(n,a,l),n=n.sibling}function uy(n,a,l){switch(n.tag){case 26:Ql(n,a,l),n.flags&_c&&n.memoizedState!==null&&HS(l,ra,n.memoizedState,n.memoizedProps);break;case 5:Ql(n,a,l);break;case 3:case 4:var c=ra;ra=Bd(n.stateNode.containerInfo),Ql(n,a,l),ra=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=_c,_c=16777216,Ql(n,a,l),_c=c):Ql(n,a,l));break;default:Ql(n,a,l)}}function dy(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function Nc(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Dn=c,fy(c,n)}dy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)hy(n),n=n.sibling}function hy(n){switch(n.tag){case 0:case 11:case 15:Nc(n),n.flags&2048&&Br(9,n,n.return);break;case 3:Nc(n);break;case 12:Nc(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Td(n)):Nc(n);break;default:Nc(n)}}function Td(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Dn=c,fy(c,n)}dy(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Br(8,a,a.return),Td(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Td(a));break;default:Td(a)}n=n.sibling}}function fy(n,a){for(;Dn!==null;){var l=Dn;switch(l.tag){case 0:case 11:case 15:Br(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ic(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Dn=c;else e:for(l=n;Dn!==null;){c=Dn;var f=c.sibling,m=c.return;if(sy(c),c===l){Dn=null;break e}if(f!==null){f.return=m,Dn=f;break e}Dn=m}}}var iS={getCacheForType:function(n){var a=Vn(wn),l=a.data.get(n);return l===void 0&&(l=n(),a.data.set(n,l)),l},cacheSignal:function(){return Vn(wn).controller.signal}},lS=typeof WeakMap=="function"?WeakMap:Map,At=0,Ft=null,dt=null,mt=0,Ot=0,Ts=null,zr=!1,Xl=!1,Hm=!1,ir=0,ln=0,qr=0,Xi=0,Gm=0,As=0,Jl=0,Ec=null,cs=null,Ym=!1,Ad=0,my=0,Cd=1/0,kd=null,Fr=null,Cn=0,$r=null,Zl=null,lr=0,Wm=0,Km=null,py=null,Sc=0,Qm=null;function Cs(){return(At&2)!==0&&mt!==0?mt&-mt:R.T!==null?np():ji()}function gy(){if(As===0)if((mt&536870912)===0||vt){var n=me;me<<=1,(me&3932160)===0&&(me=262144),As=n}else As=536870912;return n=Ss.current,n!==null&&(n.flags|=32),As}function us(n,a,l){(n===Ft&&(Ot===2||Ot===9)||n.cancelPendingCommit!==null)&&(eo(n,0),Hr(n,mt,As,!1)),sn(n,l),((At&2)===0||n!==Ft)&&(n===Ft&&((At&2)===0&&(Xi|=l),ln===4&&Hr(n,mt,As,!1)),ka(n))}function xy(n,a,l){if((At&6)!==0)throw Error(r(327));var c=!l&&(a&127)===0&&(a&n.expiredLanes)===0||Et(n,a),f=c?uS(n,a):Jm(n,a,!0),m=c;do{if(f===0){Xl&&!c&&Hr(n,a,0,!1);break}else{if(l=n.current.alternate,m&&!oS(l)){f=Jm(n,a,!1),m=!1;continue}if(f===2){if(m=a,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var S=n;f=Ec;var z=S.current.memoizedState.isDehydrated;if(z&&(eo(S,v).flags|=256),v=Jm(S,v,!1),v!==2){if(Hm&&!z){S.errorRecoveryDisabledLanes|=m,Xi|=m,f=4;break e}m=cs,cs=f,m!==null&&(cs===null?cs=m:cs.push.apply(cs,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){eo(n,0),Hr(n,a,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Hr(c,a,As,!zr);break e;case 2:cs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(f=Ad+300-_t(),10<f)){if(Hr(c,a,As,!zr),Ze(c,0,!0)!==0)break e;lr=a,c.timeoutHandle=Wy(by.bind(null,c,l,cs,kd,Ym,a,As,Xi,Jl,zr,m,"Throttled",-0,0),f);break e}by(c,l,cs,kd,Ym,a,As,Xi,Jl,zr,m,null,-0,0)}}break}while(!0);ka(n)}function by(n,a,l,c,f,m,v,S,z,ee,de,pe,te,re){if(n.timeoutHandle=-1,pe=a.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zs},uy(a,m,pe);var Oe=(m&62914560)===m?Ad-_t():(m&4194048)===m?my-_t():0;if(Oe=GS(pe,Oe),Oe!==null){lr=m,n.cancelPendingCommit=Oe(jy.bind(null,n,a,m,l,c,f,v,S,z,de,pe,null,te,re)),Hr(n,m,v,!ee);return}}jy(n,a,m,l,c,f,v,S,z)}function oS(n){for(var a=n;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!Ns(m(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Hr(n,a,l,c){a&=~Gm,a&=~Xi,n.suspendedLanes|=a,n.pingedLanes&=~a,c&&(n.warmLanes|=a),c=n.expirationTimes;for(var f=a;0<f;){var m=31-we(f),v=1<<m;c[m]=-1,f&=~v}l!==0&&ns(n,l,a)}function Rd(){return(At&6)===0?(jc(0),!1):!0}function Xm(){if(dt!==null){if(Ot===0)var n=dt.return;else n=dt,Qa=qi=null,fm(n),$l=null,oc=0,n=dt;for(;n!==null;)Kb(n.alternate,n),n=n.return;dt=null}}function eo(n,a){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,AS(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),lr=0,Xm(),Ft=n,dt=l=Wa(n.current,null),mt=a,Ot=0,Ts=null,zr=!1,Xl=Et(n,a),Hm=!1,Jl=As=Gm=Xi=qr=ln=0,cs=Ec=null,Ym=!1,(a&8)!==0&&(a|=a&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=a;0<c;){var f=31-we(c),m=1<<f;a|=n[f],c&=~m}return ir=a,Ju(),l}function yy(n,a){rt=null,R.H=gc,a===Fl||a===id?(a=Ox(),Ot=3):a===tm?(a=Ox(),Ot=4):Ot=a===Cm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ts=a,dt===null&&(ln=1,vd(n,qs(a,n.current)))}function vy(){var n=Ss.current;return n===null?!0:(mt&4194048)===mt?Gs===null:(mt&62914560)===mt||(mt&536870912)!==0?n===Gs:!1}function wy(){var n=R.H;return R.H=gc,n===null?gc:n}function _y(){var n=R.A;return R.A=iS,n}function Id(){ln=4,zr||(mt&4194048)!==mt&&Ss.current!==null||(Xl=!0),(qr&134217727)===0&&(Xi&134217727)===0||Ft===null||Hr(Ft,mt,As,!1)}function Jm(n,a,l){var c=At;At|=2;var f=wy(),m=_y();(Ft!==n||mt!==a)&&(kd=null,eo(n,a)),a=!1;var v=ln;e:do try{if(Ot!==0&&dt!==null){var S=dt,z=Ts;switch(Ot){case 8:Xm(),v=6;break e;case 3:case 2:case 9:case 6:Ss.current===null&&(a=!0);var ee=Ot;if(Ot=0,Ts=null,to(n,S,z,ee),l&&Xl){v=0;break e}break;default:ee=Ot,Ot=0,Ts=null,to(n,S,z,ee)}}cS(),v=ln;break}catch(de){yy(n,de)}while(!0);return a&&n.shellSuspendCounter++,Qa=qi=null,At=c,R.H=f,R.A=m,dt===null&&(Ft=null,mt=0,Ju()),v}function cS(){for(;dt!==null;)Ny(dt)}function uS(n,a){var l=At;At|=2;var c=wy(),f=_y();Ft!==n||mt!==a?(kd=null,Cd=_t()+500,eo(n,a)):Xl=Et(n,a);e:do try{if(Ot!==0&&dt!==null){a=dt;var m=Ts;t:switch(Ot){case 1:Ot=0,Ts=null,to(n,a,m,1);break;case 2:case 9:if(Dx(m)){Ot=0,Ts=null,Ey(a);break}a=function(){Ot!==2&&Ot!==9||Ft!==n||(Ot=7),ka(n)},m.then(a,a);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:Dx(m)?(Ot=0,Ts=null,Ey(a)):(Ot=0,Ts=null,to(n,a,m,7));break;case 5:var v=null;switch(dt.tag){case 26:v=dt.memoizedState;case 5:case 27:var S=dt;if(v?cv(v):S.stateNode.complete){Ot=0,Ts=null;var z=S.sibling;if(z!==null)dt=z;else{var ee=S.return;ee!==null?(dt=ee,Dd(ee)):dt=null}break t}}Ot=0,Ts=null,to(n,a,m,5);break;case 6:Ot=0,Ts=null,to(n,a,m,6);break;case 8:Xm(),ln=6;break e;default:throw Error(r(462))}}dS();break}catch(de){yy(n,de)}while(!0);return Qa=qi=null,R.H=c,R.A=f,At=l,dt!==null?0:(Ft=null,mt=0,Ju(),ln)}function dS(){for(;dt!==null&&!ot();)Ny(dt)}function Ny(n){var a=Yb(n.alternate,n,ir);n.memoizedProps=n.pendingProps,a===null?Dd(n):dt=a}function Ey(n){var a=n,l=a.alternate;switch(a.tag){case 15:case 0:a=zb(l,a,a.pendingProps,a.type,void 0,mt);break;case 11:a=zb(l,a,a.pendingProps,a.type.render,a.ref,mt);break;case 5:fm(a);default:Kb(l,a),a=dt=_x(a,ir),a=Yb(l,a,ir)}n.memoizedProps=n.pendingProps,a===null?Dd(n):dt=a}function to(n,a,l,c){Qa=qi=null,fm(a),$l=null,oc=0;var f=a.return;try{if(ZE(n,f,a,l,mt)){ln=1,vd(n,qs(l,n.current)),dt=null;return}}catch(m){if(f!==null)throw dt=f,m;ln=1,vd(n,qs(l,n.current)),dt=null;return}a.flags&32768?(vt||c===1?n=!0:Xl||(mt&536870912)!==0?n=!1:(zr=n=!0,(c===2||c===9||c===3||c===6)&&(c=Ss.current,c!==null&&c.tag===13&&(c.flags|=16384))),Sy(a,n)):Dd(a)}function Dd(n){var a=n;do{if((a.flags&32768)!==0){Sy(a,zr);return}n=a.return;var l=nS(a.alternate,a,ir);if(l!==null){dt=l;return}if(a=a.sibling,a!==null){dt=a;return}dt=a=n}while(a!==null);ln===0&&(ln=5)}function Sy(n,a){do{var l=sS(n.alternate,n);if(l!==null){l.flags&=32767,dt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(n=n.sibling,n!==null)){dt=n;return}dt=n=l}while(n!==null);ln=6,dt=null}function jy(n,a,l,c,f,m,v,S,z){n.cancelPendingCommit=null;do Md();while(Cn!==0);if((At&6)!==0)throw Error(r(327));if(a!==null){if(a===n.current)throw Error(r(177));if(m=a.lanes|a.childLanes,m|=Bf,$n(n,l,m,v,S,z),n===Ft&&(dt=Ft=null,mt=0),Zl=a,$r=n,lr=l,Wm=m,Km=f,py=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,pS(Qn,function(){return Ry(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=R.T,R.T=null,f=W.p,W.p=2,v=At,At|=4;try{aS(n,a,l)}finally{At=v,W.p=f,R.T=c}}Cn=1,Ty(),Ay(),Cy()}}function Ty(){if(Cn===1){Cn=0;var n=$r,a=Zl,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var c=W.p;W.p=2;var f=At;At|=4;try{ly(a,n);var m=up,v=fx(n.containerInfo),S=m.focusedElem,z=m.selectionRange;if(v!==S&&S&&S.ownerDocument&&hx(S.ownerDocument.documentElement,S)){if(z!==null&&Of(S)){var ee=z.start,de=z.end;if(de===void 0&&(de=ee),"selectionStart"in S)S.selectionStart=ee,S.selectionEnd=Math.min(de,S.value.length);else{var pe=S.ownerDocument||document,te=pe&&pe.defaultView||window;if(te.getSelection){var re=te.getSelection(),Oe=S.textContent.length,Ge=Math.min(z.start,Oe),zt=z.end===void 0?Ge:Math.min(z.end,Oe);!re.extend&&Ge>zt&&(v=zt,zt=Ge,Ge=v);var K=dx(S,Ge),G=dx(S,zt);if(K&&G&&(re.rangeCount!==1||re.anchorNode!==K.node||re.anchorOffset!==K.offset||re.focusNode!==G.node||re.focusOffset!==G.offset)){var Z=pe.createRange();Z.setStart(K.node,K.offset),re.removeAllRanges(),Ge>zt?(re.addRange(Z),re.extend(G.node,G.offset)):(Z.setEnd(G.node,G.offset),re.addRange(Z))}}}}for(pe=[],re=S;re=re.parentNode;)re.nodeType===1&&pe.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<pe.length;S++){var fe=pe[S];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Gd=!!cp,up=cp=null}finally{At=f,W.p=c,R.T=l}}n.current=a,Cn=2}}function Ay(){if(Cn===2){Cn=0;var n=$r,a=Zl,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var c=W.p;W.p=2;var f=At;At|=4;try{ny(n,a.alternate,a)}finally{At=f,W.p=c,R.T=l}}Cn=3}}function Cy(){if(Cn===4||Cn===3){Cn=0,Qt();var n=$r,a=Zl,l=lr,c=py;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Cn=5:(Cn=0,Zl=$r=null,ky(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Fr=null),hn(l),a=a.stateNode,se&&typeof se.onCommitFiberRoot=="function")try{se.onCommitFiberRoot(H,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=R.T,f=W.p,W.p=2,R.T=null;try{for(var m=n.onRecoverableError,v=0;v<c.length;v++){var S=c[v];m(S.value,{componentStack:S.stack})}}finally{R.T=a,W.p=f}}(lr&3)!==0&&Md(),ka(n),f=n.pendingLanes,(l&261930)!==0&&(f&42)!==0?n===Qm?Sc++:(Sc=0,Qm=n):Sc=0,jc(0)}}function ky(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,ic(a)))}function Md(){return Ty(),Ay(),Cy(),Ry()}function Ry(){if(Cn!==5)return!1;var n=$r,a=Wm;Wm=0;var l=hn(lr),c=R.T,f=W.p;try{W.p=32>l?32:l,R.T=null,l=Km,Km=null;var m=$r,v=lr;if(Cn=0,Zl=$r=null,lr=0,(At&6)!==0)throw Error(r(331));var S=At;if(At|=4,hy(m.current),cy(m,m.current,v,l),At=S,jc(0,!1),se&&typeof se.onPostCommitFiberRoot=="function")try{se.onPostCommitFiberRoot(H,m)}catch{}return!0}finally{W.p=f,R.T=c,ky(n,a)}}function Iy(n,a,l){a=qs(l,a),a=Am(n.stateNode,a,2),n=Vr(n,a,2),n!==null&&(sn(n,2),ka(n))}function Pt(n,a,l){if(n.tag===3)Iy(n,n,l);else for(;a!==null;){if(a.tag===3){Iy(a,n,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Fr===null||!Fr.has(c))){n=qs(l,n),l=Db(2),c=Vr(a,l,2),c!==null&&(Mb(l,c,a,n),sn(c,2),ka(c));break}}a=a.return}}function Zm(n,a,l){var c=n.pingCache;if(c===null){c=n.pingCache=new lS;var f=new Set;c.set(a,f)}else f=c.get(a),f===void 0&&(f=new Set,c.set(a,f));f.has(l)||(Hm=!0,f.add(l),n=hS.bind(null,n,a,l),a.then(n,n))}function hS(n,a,l){var c=n.pingCache;c!==null&&c.delete(a),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Ft===n&&(mt&l)===l&&(ln===4||ln===3&&(mt&62914560)===mt&&300>_t()-Ad?(At&2)===0&&eo(n,0):Gm|=l,Jl===mt&&(Jl=0)),ka(n)}function Dy(n,a){a===0&&(a=He()),n=Ui(n,a),n!==null&&(sn(n,a),ka(n))}function fS(n){var a=n.memoizedState,l=0;a!==null&&(l=a.retryLane),Dy(n,l)}function mS(n,a){var l=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),Dy(n,l)}function pS(n,a){return ke(n,a)}var Od=null,no=null,ep=!1,Pd=!1,tp=!1,Gr=0;function ka(n){n!==no&&n.next===null&&(no===null?Od=no=n:no=no.next=n),Pd=!0,ep||(ep=!0,xS())}function jc(n,a){if(!tp&&Pd){tp=!0;do for(var l=!1,c=Od;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,S=c.pingedLanes;m=(1<<31-we(42|n)+1)-1,m&=f&~(v&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Vy(c,m))}else m=mt,m=Ze(c,c===Ft?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Et(c,m)||(l=!0,Vy(c,m));c=c.next}while(l);tp=!1}}function gS(){My()}function My(){Pd=ep=!1;var n=0;Gr!==0&&TS()&&(n=Gr);for(var a=_t(),l=null,c=Od;c!==null;){var f=c.next,m=Oy(c,a);m===0?(c.next=null,l===null?Od=f:l.next=f,f===null&&(no=l)):(l=c,(n!==0||(m&3)!==0)&&(Pd=!0)),c=f}Cn!==0&&Cn!==5||jc(n),Gr!==0&&(Gr=0)}function Oy(n,a){for(var l=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-we(m),S=1<<v,z=f[v];z===-1?((S&l)===0||(S&c)!==0)&&(f[v]=Ue(S,a)):z<=a&&(n.expiredLanes|=S),m&=~S}if(a=Ft,l=mt,l=Ze(n,n===a?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,l===0||n===a&&(Ot===2||Ot===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ve(c),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Et(n,l)){if(a=l&-l,a===n.callbackPriority)return a;switch(c!==null&&Ve(c),hn(l)){case 2:case 8:l=kt;break;case 32:l=Qn;break;case 268435456:l=ys;break;default:l=Qn}return c=Py.bind(null,n),l=ke(l,c),n.callbackPriority=a,n.callbackNode=l,a}return c!==null&&c!==null&&Ve(c),n.callbackPriority=2,n.callbackNode=null,2}function Py(n,a){if(Cn!==0&&Cn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Md()&&n.callbackNode!==l)return null;var c=mt;return c=Ze(n,n===Ft?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(xy(n,c,a),Oy(n,_t()),n.callbackNode!=null&&n.callbackNode===l?Py.bind(null,n):null)}function Vy(n,a){if(Md())return null;xy(n,a,!0)}function xS(){CS(function(){(At&6)!==0?ke(An,gS):My()})}function np(){if(Gr===0){var n=zl;n===0&&(n=Be,Be<<=1,(Be&261888)===0&&(Be=256)),Gr=n}return Gr}function Ly(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:jl(""+n)}function Uy(n,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,n.id&&l.setAttribute("form",n.id),a.parentNode.insertBefore(l,a),n=new FormData(n),l.parentNode.removeChild(l),n}function bS(n,a,l,c,f){if(a==="submit"&&l&&l.stateNode===f){var m=Ly((f[bn]||null).action),v=c.submitter;v&&(a=(a=v[bn]||null)?Ly(a.formAction):v.getAttribute("formAction"),a!==null&&(m=a,v=null));var S=new Na("action","action",null,c,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Gr!==0){var z=v?Uy(f,v):new FormData(f);_m(l,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(S.preventDefault(),z=v?Uy(f,v):new FormData(f),_m(l,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var sp=0;sp<Uf.length;sp++){var ap=Uf[sp],yS=ap.toLowerCase(),vS=ap[0].toUpperCase()+ap.slice(1);aa(yS,"on"+vS)}aa(gx,"onAnimationEnd"),aa(xx,"onAnimationIteration"),aa(bx,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(PE,"onTransitionRun"),aa(VE,"onTransitionStart"),aa(LE,"onTransitionCancel"),aa(yx,"onTransitionEnd"),ya("onMouseEnter",["mouseout","mouseover"]),ya("onMouseLeave",["mouseout","mouseover"]),ya("onPointerEnter",["pointerout","pointerover"]),ya("onPointerLeave",["pointerout","pointerover"]),ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ba("onBeforeInput",["compositionend","keypress","textInput","paste"]),ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tc));function By(n,a){a=(a&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],f=c.event;c=c.listeners;e:{var m=void 0;if(a)for(var v=c.length-1;0<=v;v--){var S=c[v],z=S.instance,ee=S.currentTarget;if(S=S.listener,z!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ee;try{m(f)}catch(de){Xu(de)}f.currentTarget=null,m=z}else for(v=0;v<c.length;v++){if(S=c[v],z=S.instance,ee=S.currentTarget,S=S.listener,z!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=ee;try{m(f)}catch(de){Xu(de)}f.currentTarget=null,m=z}}}}function ht(n,a){var l=a[Ti];l===void 0&&(l=a[Ti]=new Set);var c=n+"__bubble";l.has(c)||(zy(a,n,2,!1),l.add(c))}function rp(n,a,l){var c=0;a&&(c|=4),zy(l,n,c,a)}var Vd="_reactListening"+Math.random().toString(36).slice(2);function ip(n){if(!n[Vd]){n[Vd]=!0,Uo.forEach(function(l){l!=="selectionchange"&&(wS.has(l)||rp(l,!1,n),rp(l,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Vd]||(a[Vd]=!0,rp("selectionchange",!1,a))}}function zy(n,a,l,c){switch(gv(a)){case 2:var f=KS;break;case 8:f=QS;break;default:f=wp}l=f.bind(null,a,l,n),f=void 0,!Ri||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(a,l,{capture:!0,passive:f}):n.addEventListener(a,l,!0):f!==void 0?n.addEventListener(a,l,{passive:f}):n.addEventListener(a,l,!1)}function lp(n,a,l,c,f){var m=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var S=c.stateNode.containerInfo;if(S===f)break;if(v===4)for(v=c.return;v!==null;){var z=v.tag;if((z===3||z===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;S!==null;){if(v=ga(S),v===null)return;if(z=v.tag,z===5||z===6||z===26||z===27){c=m=v;continue e}S=S.parentNode}}c=c.return}Tr(function(){var ee=m,de=Ls(l),pe=[];e:{var te=vx.get(n);if(te!==void 0){var re=Na,Oe=n;switch(n){case"keypress":if(Di(l)===0)break e;case"keydown":case"keyup":re=Wu;break;case"focusin":Oe="focus",re=Oi;break;case"focusout":Oe="blur",re=Oi;break;case"beforeblur":case"afterblur":re=Oi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Jo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Uu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=y;break;case gx:case xx:case bx:re=zu;break;case yx:re=C;break;case"scroll":case"scrollend":re=Xo;break;case"wheel":re=ae;break;case"copy":case"cut":case"paste":re=qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Ya;break;case"toggle":case"beforetoggle":re=at}var Ge=(a&4)!==0,zt=!Ge&&(n==="scroll"||n==="scrollend"),K=Ge?te!==null?te+"Capture":null:te;Ge=[];for(var G=ee,Z;G!==null;){var fe=G;if(Z=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||Z===null||K===null||(fe=ea(G,K),fe!=null&&Ge.push(Ac(G,fe,Z))),zt)break;G=G.return}0<Ge.length&&(te=new re(te,Oe,null,l,de),pe.push({event:te,listeners:Ge}))}}if((a&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",te&&l!==Wo&&(Oe=l.relatedTarget||l.fromElement)&&(ga(Oe)||Oe[vs]))break e;if((re||te)&&(te=de.window===de?de:(te=de.ownerDocument)?te.defaultView||te.parentWindow:window,re?(Oe=l.relatedTarget||l.toElement,re=ee,Oe=Oe?ga(Oe):null,Oe!==null&&(zt=u(Oe),Ge=Oe.tag,Oe!==zt||Ge!==5&&Ge!==27&&Ge!==6)&&(Oe=null)):(re=null,Oe=ee),re!==Oe)){if(Ge=Jo,fe="onMouseLeave",K="onMouseEnter",G="mouse",(n==="pointerout"||n==="pointerover")&&(Ge=Ya,fe="onPointerLeave",K="onPointerEnter",G="pointer"),zt=re==null?te:ws(re),Z=Oe==null?te:ws(Oe),te=new Ge(fe,G+"leave",re,l,de),te.target=zt,te.relatedTarget=Z,fe=null,ga(de)===ee&&(Ge=new Ge(K,G+"enter",Oe,l,de),Ge.target=Z,Ge.relatedTarget=zt,fe=Ge),zt=fe,re&&Oe)t:{for(Ge=_S,K=re,G=Oe,Z=0,fe=K;fe;fe=Ge(fe))Z++;fe=0;for(var qe=G;qe;qe=Ge(qe))fe++;for(;0<Z-fe;)K=Ge(K),Z--;for(;0<fe-Z;)G=Ge(G),fe--;for(;Z--;){if(K===G||G!==null&&K===G.alternate){Ge=K;break t}K=Ge(K),G=Ge(G)}Ge=null}else Ge=null;re!==null&&qy(pe,te,re,Ge,!1),Oe!==null&&zt!==null&&qy(pe,zt,Oe,Ge,!0)}}e:{if(te=ee?ws(ee):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var St=rx;else if(sx(te))if(ix)St=DE;else{St=RE;var Le=kE}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?ee&&Sl(ee.elementType)&&(St=rx):St=IE;if(St&&(St=St(n,ee))){ax(pe,St,l,de);break e}Le&&Le(n,te,ee),n==="focusout"&&ee&&te.type==="number"&&ee.memoizedProps.value!=null&&Ho(te,"number",te.value)}switch(Le=ee?ws(ee):window,n){case"focusin":(sx(Le)||Le.contentEditable==="true")&&(Dl=Le,Pf=ee,sc=null);break;case"focusout":sc=Pf=Dl=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,mx(pe,l,de);break;case"selectionchange":if(OE)break;case"keydown":case"keyup":mx(pe,l,de)}var lt;if(Tt)e:{switch(n){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Il?Pi(n,l)&&(pt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(pt="onCompositionStart");pt&&(ja&&l.locale!=="ko"&&(Il||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Il&&(lt=Qo()):(_a=de,Ko="value"in _a?_a.value:_a.textContent,Il=!0)),Le=Ld(ee,pt),0<Le.length&&(pt=new Sa(pt,n,null,l,de),pe.push({event:pt,listeners:Le}),lt?pt.data=lt:(lt=Rl(l),lt!==null&&(pt.data=lt)))),(lt=Bs?jE(n,l):TE(n,l))&&(pt=Ld(ee,"onBeforeInput"),0<pt.length&&(Le=new Sa("onBeforeInput","beforeinput",null,l,de),pe.push({event:Le,listeners:pt}),Le.data=lt)),bS(pe,n,ee,l,de)}By(pe,a)})}function Ac(n,a,l){return{instance:n,listener:a,currentTarget:l}}function Ld(n,a){for(var l=a+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ea(n,l),f!=null&&c.unshift(Ac(n,f,m)),f=ea(n,a),f!=null&&c.push(Ac(n,f,m))),n.tag===3)return c;n=n.return}return[]}function _S(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function qy(n,a,l,c,f){for(var m=a._reactName,v=[];l!==null&&l!==c;){var S=l,z=S.alternate,ee=S.stateNode;if(S=S.tag,z!==null&&z===c)break;S!==5&&S!==26&&S!==27||ee===null||(z=ee,f?(ee=ea(l,m),ee!=null&&v.unshift(Ac(l,ee,z))):f||(ee=ea(l,m),ee!=null&&v.push(Ac(l,ee,z)))),l=l.return}v.length!==0&&n.push({event:a,listeners:v})}var NS=/\r\n?/g,ES=/\u0000|\uFFFD/g;function Fy(n){return(typeof n=="string"?n:""+n).replace(NS,`
`).replace(ES,"")}function $y(n,a){return a=Fy(a),Fy(n)===a}function Bt(n,a,l,c,f,m){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||rs(n,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&rs(n,""+c);break;case"className":_s(n,"class",c);break;case"tabIndex":_s(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":_s(n,l,c);break;case"style":Yo(n,c,m);break;case"data":if(a!=="object"){_s(n,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){n.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=jl(""+c),n.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(a!=="input"&&Bt(n,a,"name",f.name,f,null),Bt(n,a,"formEncType",f.formEncType,f,null),Bt(n,a,"formMethod",f.formMethod,f,null),Bt(n,a,"formTarget",f.formTarget,f,null)):(Bt(n,a,"encType",f.encType,f,null),Bt(n,a,"method",f.method,f,null),Bt(n,a,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=jl(""+c),n.setAttribute(l,c);break;case"onClick":c!=null&&(n.onclick=Zs);break;case"onScroll":c!=null&&ht("scroll",n);break;case"onScrollEnd":c!=null&&ht("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=l}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}l=jl(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""+c):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":c===!0?n.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,c):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(l,c):n.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(l):n.setAttribute(l,c);break;case"popover":ht("beforetoggle",n),ht("toggle",n),Nl(n,"popover",c);break;case"xlinkActuate":vn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":vn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":vn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":vn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":vn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":vn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":vn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":vn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":vn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Nl(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Lu.get(l)||l,Nl(n,l,c))}}function op(n,a,l,c,f,m){switch(l){case"style":Yo(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=l}}break;case"children":typeof c=="string"?rs(n,c):(typeof c=="number"||typeof c=="bigint")&&rs(n,""+c);break;case"onScroll":c!=null&&ht("scroll",n);break;case"onScrollEnd":c!=null&&ht("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Zs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),m=n[bn]||null,m=m!=null?m[l]:null,typeof m=="function"&&n.removeEventListener(a,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(a,c,f);break e}l in n?n[l]=c:c===!0?n.setAttribute(l,""):Nl(n,l,c)}}}function Un(n,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",n),ht("load",n);var c=!1,f=!1,m;for(m in l)if(l.hasOwnProperty(m)){var v=l[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Bt(n,a,m,v,l,null)}}f&&Bt(n,a,"srcSet",l.srcSet,l,null),c&&Bt(n,a,"src",l.src,l,null);return;case"input":ht("invalid",n);var S=m=v=f=null,z=null,ee=null;for(c in l)if(l.hasOwnProperty(c)){var de=l[c];if(de!=null)switch(c){case"name":f=de;break;case"type":v=de;break;case"checked":z=de;break;case"defaultChecked":ee=de;break;case"value":m=de;break;case"defaultValue":S=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,a));break;default:Bt(n,a,c,de,l,null)}}Ou(n,m,S,z,ee,v,f,!1);return;case"select":ht("invalid",n),c=v=m=null;for(f in l)if(l.hasOwnProperty(f)&&(S=l[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":v=S;break;case"multiple":c=S;default:Bt(n,a,f,S,l,null)}a=m,l=v,n.multiple=!!c,a!=null?Nr(n,!!c,a,!1):l!=null&&Nr(n,!!c,l,!0);return;case"textarea":ht("invalid",n),m=f=c=null;for(v in l)if(l.hasOwnProperty(v)&&(S=l[v],S!=null))switch(v){case"value":c=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:Bt(n,a,v,S,l,null)}Er(n,c,f,m);return;case"option":for(z in l)l.hasOwnProperty(z)&&(c=l[z],c!=null)&&(z==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Bt(n,a,z,c,l,null));return;case"dialog":ht("beforetoggle",n),ht("toggle",n),ht("cancel",n),ht("close",n);break;case"iframe":case"object":ht("load",n);break;case"video":case"audio":for(c=0;c<Tc.length;c++)ht(Tc[c],n);break;case"image":ht("error",n),ht("load",n);break;case"details":ht("toggle",n);break;case"embed":case"source":case"link":ht("error",n),ht("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in l)if(l.hasOwnProperty(ee)&&(c=l[ee],c!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Bt(n,a,ee,c,l,null)}return;default:if(Sl(a)){for(de in l)l.hasOwnProperty(de)&&(c=l[de],c!==void 0&&op(n,a,de,c,l,void 0));return}}for(S in l)l.hasOwnProperty(S)&&(c=l[S],c!=null&&Bt(n,a,S,c,l,null))}function SS(n,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,S=null,z=null,ee=null,de=null;for(re in l){var pe=l[re];if(l.hasOwnProperty(re)&&pe!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":z=pe;default:c.hasOwnProperty(re)||Bt(n,a,re,null,c,pe)}}for(var te in c){var re=c[te];if(pe=l[te],c.hasOwnProperty(te)&&(re!=null||pe!=null))switch(te){case"type":m=re;break;case"name":f=re;break;case"checked":ee=re;break;case"defaultChecked":de=re;break;case"value":v=re;break;case"defaultValue":S=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(r(137,a));break;default:re!==pe&&Bt(n,a,te,re,c,pe)}}El(n,v,S,z,ee,de,m,f);return;case"select":re=v=S=te=null;for(m in l)if(z=l[m],l.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":re=z;default:c.hasOwnProperty(m)||Bt(n,a,m,null,c,z)}for(f in c)if(m=c[f],z=l[f],c.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":te=m;break;case"defaultValue":S=m;break;case"multiple":v=m;default:m!==z&&Bt(n,a,f,m,c,z)}a=S,l=v,c=re,te!=null?Nr(n,!!l,te,!1):!!c!=!!l&&(a!=null?Nr(n,!!l,a,!0):Nr(n,!!l,l?[]:"",!1));return;case"textarea":re=te=null;for(S in l)if(f=l[S],l.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Bt(n,a,S,null,c,f)}for(v in c)if(f=c[v],m=l[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":te=f;break;case"defaultValue":re=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Bt(n,a,v,f,c,m)}Pu(n,te,re);return;case"option":for(var Oe in l)te=l[Oe],l.hasOwnProperty(Oe)&&te!=null&&!c.hasOwnProperty(Oe)&&(Oe==="selected"?n.selected=!1:Bt(n,a,Oe,null,c,te));for(z in c)te=c[z],re=l[z],c.hasOwnProperty(z)&&te!==re&&(te!=null||re!=null)&&(z==="selected"?n.selected=te&&typeof te!="function"&&typeof te!="symbol":Bt(n,a,z,te,c,re));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in l)te=l[Ge],l.hasOwnProperty(Ge)&&te!=null&&!c.hasOwnProperty(Ge)&&Bt(n,a,Ge,null,c,te);for(ee in c)if(te=c[ee],re=l[ee],c.hasOwnProperty(ee)&&te!==re&&(te!=null||re!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,a));break;default:Bt(n,a,ee,te,c,re)}return;default:if(Sl(a)){for(var zt in l)te=l[zt],l.hasOwnProperty(zt)&&te!==void 0&&!c.hasOwnProperty(zt)&&op(n,a,zt,void 0,c,te);for(de in c)te=c[de],re=l[de],!c.hasOwnProperty(de)||te===re||te===void 0&&re===void 0||op(n,a,de,te,c,re);return}}for(var K in l)te=l[K],l.hasOwnProperty(K)&&te!=null&&!c.hasOwnProperty(K)&&Bt(n,a,K,null,c,te);for(pe in c)te=c[pe],re=l[pe],!c.hasOwnProperty(pe)||te===re||te==null&&re==null||Bt(n,a,pe,te,c,re)}function Hy(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var f=l[c],m=f.transferSize,v=f.initiatorType,S=f.duration;if(m&&S&&Hy(v)){for(v=0,S=f.responseEnd,c+=1;c<l.length;c++){var z=l[c],ee=z.startTime;if(ee>S)break;var de=z.transferSize,pe=z.initiatorType;de&&Hy(pe)&&(z=z.responseEnd,v+=de*(z<S?1:(S-ee)/(z-ee)))}if(--c,a+=8*(m+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var cp=null,up=null;function Ud(n){return n.nodeType===9?n:n.ownerDocument}function Gy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yy(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function dp(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var hp=null;function TS(){var n=window.event;return n&&n.type==="popstate"?n===hp?!1:(hp=n,!0):(hp=null,!1)}var Wy=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,Ky=typeof Promise=="function"?Promise:void 0,CS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ky<"u"?function(n){return Ky.resolve(null).then(n).catch(kS)}:Wy;function kS(n){setTimeout(function(){throw n})}function Yr(n){return n==="head"}function Qy(n,a){var l=a,c=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(c===0){n.removeChild(f),io(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")Cc(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Cc(l);for(var m=l.firstChild;m;){var v=m.nextSibling,S=m.nodeName;m[pa]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=v}}else l==="body"&&Cc(n.ownerDocument.body);l=f}while(l);io(a)}function Xy(n,a){var l=n;n=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=c}while(l)}function fp(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":fp(l),_l(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function RS(n,a,l,c){for(;n.nodeType===1;){var f=l;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[pa])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ys(n.nextSibling),n===null)break}return null}function IS(n,a,l){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Ys(n.nextSibling),n===null))return null;return n}function Jy(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ys(n.nextSibling),n===null))return null;return n}function mp(n){return n.data==="$?"||n.data==="$~"}function pp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function DS(n,a){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Ys(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var gp=null;function Zy(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(a===0)return Ys(n.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}n=n.nextSibling}return null}function ev(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return n;a--}else l!=="/$"&&l!=="/&"||a++}n=n.previousSibling}return null}function tv(n,a,l){switch(a=Ud(l),n){case"html":if(n=a.documentElement,!n)throw Error(r(452));return n;case"head":if(n=a.head,!n)throw Error(r(453));return n;case"body":if(n=a.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Cc(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);_l(n)}var Ws=new Map,nv=new Set;function Bd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var or=W.d;W.d={f:MS,r:OS,D:PS,C:VS,L:LS,m:US,X:zS,S:BS,M:qS};function MS(){var n=or.f(),a=Rd();return n||a}function OS(n){var a=Vs(n);a!==null&&a.tag===5&&a.type==="form"?yb(a):or.r(n)}var so=typeof document>"u"?null:document;function sv(n,a,l){var c=so;if(c&&typeof a=="string"&&a){var f=as(a);f='link[rel="'+n+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),nv.has(f)||(nv.add(f),n={rel:n,crossOrigin:l,href:a},c.querySelector(f)===null&&(a=c.createElement("link"),Un(a,"link",n),yn(a),c.head.appendChild(a)))}}function PS(n){or.D(n),sv("dns-prefetch",n,null)}function VS(n,a){or.C(n,a),sv("preconnect",n,a)}function LS(n,a,l){or.L(n,a,l);var c=so;if(c&&n&&a){var f='link[rel="preload"][as="'+as(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+as(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+as(l.imageSizes)+'"]')):f+='[href="'+as(n)+'"]';var m=f;switch(a){case"style":m=ao(n);break;case"script":m=ro(n)}Ws.has(m)||(n=w({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:n,as:a},l),Ws.set(m,n),c.querySelector(f)!==null||a==="style"&&c.querySelector(kc(m))||a==="script"&&c.querySelector(Rc(m))||(a=c.createElement("link"),Un(a,"link",n),yn(a),c.head.appendChild(a)))}}function US(n,a){or.m(n,a);var l=so;if(l&&n){var c=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+as(c)+'"][href="'+as(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ro(n)}if(!Ws.has(m)&&(n=w({rel:"modulepreload",href:n},a),Ws.set(m,n),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Rc(m)))return}c=l.createElement("link"),Un(c,"link",n),yn(c),l.head.appendChild(c)}}}function BS(n,a,l){or.S(n,a,l);var c=so;if(c&&n){var f=xa(c).hoistableStyles,m=ao(n);a=a||"default";var v=f.get(m);if(!v){var S={loading:0,preload:null};if(v=c.querySelector(kc(m)))S.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":a},l),(l=Ws.get(m))&&xp(n,l);var z=v=c.createElement("link");yn(z),Un(z,"link",n),z._p=new Promise(function(ee,de){z.onload=ee,z.onerror=de}),z.addEventListener("load",function(){S.loading|=1}),z.addEventListener("error",function(){S.loading|=2}),S.loading|=4,zd(v,a,c)}v={type:"stylesheet",instance:v,count:1,state:S},f.set(m,v)}}}function zS(n,a){or.X(n,a);var l=so;if(l&&n){var c=xa(l).hoistableScripts,f=ro(n),m=c.get(f);m||(m=l.querySelector(Rc(f)),m||(n=w({src:n,async:!0},a),(a=Ws.get(f))&&bp(n,a),m=l.createElement("script"),yn(m),Un(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function qS(n,a){or.M(n,a);var l=so;if(l&&n){var c=xa(l).hoistableScripts,f=ro(n),m=c.get(f);m||(m=l.querySelector(Rc(f)),m||(n=w({src:n,async:!0,type:"module"},a),(a=Ws.get(f))&&bp(n,a),m=l.createElement("script"),yn(m),Un(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function av(n,a,l,c){var f=(f=De.current)?Bd(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=ao(l.href),l=xa(f).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=ao(l.href);var m=xa(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(kc(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Ws.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ws.set(n,l),m||FS(f,n,l,v.state))),a&&c===null)throw Error(r(528,""));return v}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ro(l),l=xa(f).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function ao(n){return'href="'+as(n)+'"'}function kc(n){return'link[rel="stylesheet"]['+n+"]"}function rv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function FS(n,a,l,c){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=n.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Un(a,"link",l),yn(a),n.head.appendChild(a))}function ro(n){return'[src="'+as(n)+'"]'}function Rc(n){return"script[async]"+n}function iv(n,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=n.querySelector('style[data-href~="'+as(l.href)+'"]');if(c)return a.instance=c,yn(c),c;var f=w({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),yn(c),Un(c,"style",f),zd(c,l.precedence,n),a.instance=c;case"stylesheet":f=ao(l.href);var m=n.querySelector(kc(f));if(m)return a.state.loading|=4,a.instance=m,yn(m),m;c=rv(l),(f=Ws.get(f))&&xp(c,f),m=(n.ownerDocument||n).createElement("link"),yn(m);var v=m;return v._p=new Promise(function(S,z){v.onload=S,v.onerror=z}),Un(m,"link",c),a.state.loading|=4,zd(m,l.precedence,n),a.instance=m;case"script":return m=ro(l.src),(f=n.querySelector(Rc(m)))?(a.instance=f,yn(f),f):(c=l,(f=Ws.get(m))&&(c=w({},l),bp(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),yn(f),Un(f,"link",c),n.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,zd(c,l.precedence,n));return a.instance}function zd(n,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var S=c[v];if(S.dataset.precedence===a)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(n,a.firstChild))}function xp(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function bp(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var qd=null;function lv(n,a,l){if(qd===null){var c=new Map,f=qd=new Map;f.set(l,c)}else f=qd,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(n))return c;for(c.set(n,null),l=l.getElementsByTagName(n),f=0;f<l.length;f++){var m=l[f];if(!(m[pa]||m[an]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(a)||"";v=n+v;var S=c.get(v);S?S.push(m):c.set(v,[m])}}return c}function ov(n,a,l){n=n.ownerDocument||n,n.head.insertBefore(l,a==="title"?n.querySelector("head > title"):null)}function $S(n,a,l){if(l===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(n=a.disabled,typeof a.precedence=="string"&&n==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function cv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function HS(n,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=ao(c.href),m=a.querySelector(kc(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Fd.bind(n),a.then(n,n)),l.state.loading|=4,l.instance=m,yn(m);return}m=a.ownerDocument||a,c=rv(c),(f=Ws.get(f))&&xp(c,f),m=m.createElement("link"),yn(m);var v=m;v._p=new Promise(function(S,z){v.onload=S,v.onerror=z}),Un(m,"link",c),l.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=Fd.bind(n),a.addEventListener("load",l),a.addEventListener("error",l))}}var yp=0;function GS(n,a){return n.stylesheets&&n.count===0&&Hd(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var c=setTimeout(function(){if(n.stylesheets&&Hd(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+a);0<n.imgBytes&&yp===0&&(yp=62500*jS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Hd(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>yp?50:800)+a);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Fd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var $d=null;function Hd(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,$d=new Map,a.forEach(YS,n),$d=null,Fd.call(n))}function YS(n,a){if(!(a.state.loading&4)){var l=$d.get(n);if(l)var c=l.get(null);else{l=new Map,$d.set(n,l);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(l.set(v.dataset.precedence,v),c=v)}c&&l.set(null,c)}f=a.instance,v=f.getAttribute("data-precedence"),m=l.get(v)||c,m===c&&l.set(null,f),l.set(v,f),this.count++,c=Fd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),a.state.loading|=4}}var Ic={$$typeof:$,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function WS(n,a,l,c,f,m,v,S,z){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function uv(n,a,l,c,f,m,v,S,z,ee,de,pe){return n=new WS(n,a,l,v,z,ee,de,pe,S),a=1,m===!0&&(a|=24),m=Es(3,null,null,a),n.current=m,m.stateNode=n,a=Jf(),a.refCount++,n.pooledCache=a,a.refCount++,m.memoizedState={element:c,isDehydrated:l,cache:a},nm(m),n}function dv(n){return n?(n=Pl,n):Pl}function hv(n,a,l,c,f,m){f=dv(f),c.context===null?c.context=f:c.pendingContext=f,c=Pr(a),c.payload={element:l},m=m===void 0?null:m,m!==null&&(c.callback=m),l=Vr(n,c,a),l!==null&&(us(l,n,a),uc(l,n,a))}function fv(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<a?l:a}}function vp(n,a){fv(n,a),(n=n.alternate)&&fv(n,a)}function mv(n){if(n.tag===13||n.tag===31){var a=Ui(n,67108864);a!==null&&us(a,n,67108864),vp(n,67108864)}}function pv(n){if(n.tag===13||n.tag===31){var a=Cs();a=$a(a);var l=Ui(n,a);l!==null&&us(l,n,a),vp(n,a)}}var Gd=!0;function KS(n,a,l,c){var f=R.T;R.T=null;var m=W.p;try{W.p=2,wp(n,a,l,c)}finally{W.p=m,R.T=f}}function QS(n,a,l,c){var f=R.T;R.T=null;var m=W.p;try{W.p=8,wp(n,a,l,c)}finally{W.p=m,R.T=f}}function wp(n,a,l,c){if(Gd){var f=_p(c);if(f===null)lp(n,a,c,Yd,l),xv(n,c);else if(JS(f,n,a,l,c))c.stopPropagation();else if(xv(n,c),a&4&&-1<XS.indexOf(n)){for(;f!==null;){var m=Vs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Ke(m.pendingLanes);if(v!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var z=1<<31-we(v);S.entanglements[1]|=z,v&=~z}ka(m),(At&6)===0&&(Cd=_t()+500,jc(0))}}break;case 31:case 13:S=Ui(m,2),S!==null&&us(S,m,2),Rd(),vp(m,2)}if(m=_p(c),m===null&&lp(n,a,c,Yd,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else lp(n,a,c,null,l)}}function _p(n){return n=Ls(n),Np(n)}var Yd=null;function Np(n){if(Yd=null,n=ga(n),n!==null){var a=u(n);if(a===null)n=null;else{var l=a.tag;if(l===13){if(n=d(a),n!==null)return n;n=null}else if(l===31){if(n=p(a),n!==null)return n;n=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Yd=n,null}function gv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case An:return 2;case kt:return 8;case Qn:case Fn:return 32;case ys:return 268435456;default:return 32}default:return 32}}var Ep=!1,Wr=null,Kr=null,Qr=null,Dc=new Map,Mc=new Map,Xr=[],XS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xv(n,a){switch(n){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Dc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mc.delete(a.pointerId)}}function Oc(n,a,l,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},a!==null&&(a=Vs(a),a!==null&&mv(a)),n):(n.eventSystemFlags|=c,a=n.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),n)}function JS(n,a,l,c,f){switch(a){case"focusin":return Wr=Oc(Wr,n,a,l,c,f),!0;case"dragenter":return Kr=Oc(Kr,n,a,l,c,f),!0;case"mouseover":return Qr=Oc(Qr,n,a,l,c,f),!0;case"pointerover":var m=f.pointerId;return Dc.set(m,Oc(Dc.get(m)||null,n,a,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Mc.set(m,Oc(Mc.get(m)||null,n,a,l,c,f)),!0}return!1}function bv(n){var a=ga(n.target);if(a!==null){var l=u(a);if(l!==null){if(a=l.tag,a===13){if(a=d(l),a!==null){n.blockedOn=a,xn(n.priority,function(){pv(l)});return}}else if(a===31){if(a=p(l),a!==null){n.blockedOn=a,xn(n.priority,function(){pv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Wd(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var l=_p(n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);Wo=c,l.target.dispatchEvent(c),Wo=null}else return a=Vs(l),a!==null&&mv(a),n.blockedOn=l,!1;a.shift()}return!0}function yv(n,a,l){Wd(n)&&l.delete(a)}function ZS(){Ep=!1,Wr!==null&&Wd(Wr)&&(Wr=null),Kr!==null&&Wd(Kr)&&(Kr=null),Qr!==null&&Wd(Qr)&&(Qr=null),Dc.forEach(yv),Mc.forEach(yv)}function Kd(n,a){n.blockedOn===a&&(n.blockedOn=null,Ep||(Ep=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,ZS)))}var Qd=null;function vv(n){Qd!==n&&(Qd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Qd===n&&(Qd=null);for(var a=0;a<n.length;a+=3){var l=n[a],c=n[a+1],f=n[a+2];if(typeof c!="function"){if(Np(c||l)===null)continue;break}var m=Vs(l);m!==null&&(n.splice(a,3),a-=3,_m(m,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function io(n){function a(z){return Kd(z,n)}Wr!==null&&Kd(Wr,n),Kr!==null&&Kd(Kr,n),Qr!==null&&Kd(Qr,n),Dc.forEach(a),Mc.forEach(a);for(var l=0;l<Xr.length;l++){var c=Xr[l];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Xr.length&&(l=Xr[0],l.blockedOn===null);)bv(l),l.blockedOn===null&&Xr.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],v=f[bn]||null;if(typeof m=="function")v||vv(l);else if(v){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[bn]||null)S=v.formAction;else if(Np(f)!==null)continue}else S=v.action;typeof S=="function"?l[c+1]=S:(l.splice(c,3),c-=3),vv(l)}}}function wv(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function Sp(n){this._internalRoot=n}Xd.prototype.render=Sp.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=Cs();hv(l,c,n,a,null,null)},Xd.prototype.unmount=Sp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;hv(n.current,2,null,n,null,null),Rd(),a[vs]=null}};function Xd(n){this._internalRoot=n}Xd.prototype.unstable_scheduleHydration=function(n){if(n){var a=ji();n={blockedOn:null,target:n,priority:a};for(var l=0;l<Xr.length&&a!==0&&a<Xr[l].priority;l++);Xr.splice(l,0,n),l===0&&bv(n)}};var _v=e.version;if(_v!=="19.2.4")throw Error(r(527,_v,"19.2.4"));W.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=x(a),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var ej={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jd.isDisabled&&Jd.supportsFiber)try{H=Jd.inject(ej),se=Jd}catch{}}return Vc.createRoot=function(n,a){if(!o(n))throw Error(r(299));var l=!1,c="",f=Cb,m=kb,v=Rb;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=uv(n,1,!1,null,null,l,c,null,f,m,v,wv),n[vs]=a.current,ip(n),new Sp(a)},Vc.hydrateRoot=function(n,a,l){if(!o(n))throw Error(r(299));var c=!1,f="",m=Cb,v=kb,S=Rb,z=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(S=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),a=uv(n,1,!0,a,l??null,c,f,z,m,v,S,wv),a.context=dv(null),l=a.current,c=Cs(),c=$a(c),f=Pr(c),f.callback=null,Vr(l,f,c),l=c,a.current.lanes=l,sn(a,l),ka(a),n[vs]=a.current,ip(n),new Xd(a)},Vc.version="19.2.4",Vc}var Iv;function uj(){if(Iv)return Ap.exports;Iv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ap.exports=cj(),Ap.exports}var dj=uj();const hj=q0(dj);var Dv="popstate";function fj(s={}){function e(o,u){let{pathname:d="/",search:p="",hash:g=""}=gl(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),a0("",{pathname:d,search:p,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(o,u){let d=o.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let g=o.location.href,x=g.indexOf("#");p=x===-1?g:g.slice(0,x)}return p+"#"+(typeof u=="string"?u:ru(u))}function r(o,u){Xs(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return pj(e,t,r,s)}function Zt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Xs(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mj(){return Math.random().toString(36).substring(2,10)}function Mv(s,e){return{usr:s.state,key:s.key,idx:e}}function a0(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?gl(e):e,state:t,key:e&&e.key||r||mj()}}function ru({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function gl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function pj(s,e,t,r={}){let{window:o=document.defaultView,v5Compat:u=!1}=r,d=o.history,p="POP",g=null,x=b();x==null&&(x=0,d.replaceState({...d.state,idx:x},""));function b(){return(d.state||{idx:null}).idx}function w(){p="POP";let O=b(),B=O==null?null:O-x;x=O,g&&g({action:p,location:V.location,delta:B})}function E(O,B){p="PUSH";let Y=a0(V.location,O,B);t&&t(Y,O),x=b()+1;let $=Mv(Y,x),ie=V.createHref(Y);try{d.pushState($,"",ie)}catch(he){if(he instanceof DOMException&&he.name==="DataCloneError")throw he;o.location.assign(ie)}u&&g&&g({action:p,location:V.location,delta:1})}function T(O,B){p="REPLACE";let Y=a0(V.location,O,B);t&&t(Y,O),x=b();let $=Mv(Y,x),ie=V.createHref(Y);d.replaceState($,"",ie),u&&g&&g({action:p,location:V.location,delta:0})}function L(O){return gj(O)}let V={get action(){return p},get location(){return s(o,d)},listen(O){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Dv,w),g=O,()=>{o.removeEventListener(Dv,w),g=null}},createHref(O){return e(o,O)},createURL:L,encodeLocation(O){let B=L(O);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:E,replace:T,go(O){return d.go(O)}};return V}function gj(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Zt(t,"No window.location.(origin|href) available to create URL");let r=typeof s=="string"?s:ru(s);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function K1(s,e,t="/"){return xj(s,e,t,!1)}function xj(s,e,t,r){let o=typeof e=="string"?gl(e):e,u=pr(o.pathname||"/",t);if(u==null)return null;let d=Q1(s);bj(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let x=Cj(u);p=Tj(d[g],x,r)}return p}function Q1(s,e=[],t=[],r="",o=!1){let u=(d,p,g=o,x)=>{let b={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(r)&&g)return;Zt(b.relativePath.startsWith(r),`Absolute route path "${b.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(r.length)}let w=hr([r,b.relativePath]),E=t.concat(b);d.children&&d.children.length>0&&(Zt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),Q1(d.children,e,E,w,g)),!(d.path==null&&!d.index)&&e.push({path:w,score:Sj(w,d.index),routesMeta:E})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of X1(d.path))u(d,p,!0,g)}),e}function X1(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(r.length===0)return o?[u,""]:[u];let d=X1(r.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function bj(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:jj(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var yj=/^:[\w-]+$/,vj=3,wj=2,_j=1,Nj=10,Ej=-2,Ov=s=>s==="*";function Sj(s,e){let t=s.split("/"),r=t.length;return t.some(Ov)&&(r+=Ej),e&&(r+=wj),t.filter(o=>!Ov(o)).reduce((o,u)=>o+(yj.test(u)?vj:u===""?_j:Nj),r)}function jj(s,e){return s.length===e.length&&s.slice(0,-1).every((r,o)=>r===e[o])?s[s.length-1]-e[e.length-1]:0}function Tj(s,e,t=!1){let{routesMeta:r}=s,o={},u="/",d=[];for(let p=0;p<r.length;++p){let g=r[p],x=p===r.length-1,b=u==="/"?e:e.slice(u.length)||"/",w=Ah({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},b),E=g.route;if(!w&&x&&t&&!r[r.length-1].route.index&&(w=Ah({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:hr([u,w.pathname]),pathnameBase:Dj(hr([u,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(u=hr([u,w.pathnameBase]))}return d}function Ah(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=Aj(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((x,{paramName:b,isOptional:w},E)=>{if(b==="*"){let L=p[E]||"";d=u.slice(0,u.length-L.length).replace(/(.)\/+$/,"$1")}const T=p[E];return w&&!T?x[b]=void 0:x[b]=(T||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:d,pattern:s}}function Aj(s,e=!1,t=!0){Xs(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(r.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function Cj(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xs(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function pr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}var kj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Rj(s,e="/"){let{pathname:t,search:r="",hash:o=""}=typeof s=="string"?gl(s):s,u;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?u=Pv(t.substring(1),"/"):u=Pv(t,e)):u=e,{pathname:u,search:Mj(r),hash:Oj(o)}}function Pv(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Ip(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ij(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $0(s){let e=Ij(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function H0(s,e,t,r=!1){let o;typeof s=="string"?o=gl(s):(o={...s},Zt(!o.pathname||!o.pathname.includes("?"),Ip("?","pathname","search",o)),Zt(!o.pathname||!o.pathname.includes("#"),Ip("#","pathname","hash",o)),Zt(!o.search||!o.search.includes("#"),Ip("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,p;if(d==null)p=t;else{let w=e.length-1;if(!r&&d.startsWith("..")){let E=d.split("/");for(;E[0]==="..";)E.shift(),w-=1;o.pathname=E.join("/")}p=w>=0?e[w]:"/"}let g=Rj(o,p),x=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(x||b)&&(g.pathname+="/"),g}var hr=s=>s.join("/").replace(/\/\/+/g,"/"),Dj=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Mj=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Oj=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,Pj=class{constructor(s,e,t,r=!1){this.status=s,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Vj(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Lj(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var J1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Z1(s,e){let t=s;if(typeof t!="string"||!kj.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,o=!1;if(J1)try{let u=new URL(window.location.href),d=t.startsWith("//")?new URL(u.protocol+t):new URL(t),p=pr(d.pathname,e);d.origin===u.origin&&p!=null?t=p+d.search+d.hash:o=!0}catch{Xs(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var e_=["POST","PUT","PATCH","DELETE"];new Set(e_);var Uj=["GET",...e_];new Set(Uj);var ko=N.createContext(null);ko.displayName="DataRouter";var Zh=N.createContext(null);Zh.displayName="DataRouterState";var Bj=N.createContext(!1),t_=N.createContext({isTransitioning:!1});t_.displayName="ViewTransition";var zj=N.createContext(new Map);zj.displayName="Fetchers";var qj=N.createContext(null);qj.displayName="Await";var Ps=N.createContext(null);Ps.displayName="Navigation";var xu=N.createContext(null);xu.displayName="Location";var ma=N.createContext({outlet:null,matches:[],isDataRoute:!1});ma.displayName="Route";var G0=N.createContext(null);G0.displayName="RouteError";var n_="REACT_ROUTER_ERROR",Fj="REDIRECT",$j="ROUTE_ERROR_RESPONSE";function Hj(s){if(s.startsWith(`${n_}:${Fj}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Gj(s){if(s.startsWith(`${n_}:${$j}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Pj(e.status,e.statusText,e.data)}catch{}}function Yj(s,{relative:e}={}){Zt(Ro(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=N.useContext(Ps),{hash:o,pathname:u,search:d}=bu(s,{relative:e}),p=u;return t!=="/"&&(p=u==="/"?t:hr([t,u])),r.createHref({pathname:p,search:d,hash:o})}function Ro(){return N.useContext(xu)!=null}function yi(){return Zt(Ro(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(xu).location}var s_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function a_(s){N.useContext(Ps).static||N.useLayoutEffect(s)}function Io(){let{isDataRoute:s}=N.useContext(ma);return s?iT():Wj()}function Wj(){Zt(Ro(),"useNavigate() may be used only in the context of a <Router> component.");let s=N.useContext(ko),{basename:e,navigator:t}=N.useContext(Ps),{matches:r}=N.useContext(ma),{pathname:o}=yi(),u=JSON.stringify($0(r)),d=N.useRef(!1);return a_(()=>{d.current=!0}),N.useCallback((g,x={})=>{if(Xs(d.current,s_),!d.current)return;if(typeof g=="number"){t.go(g);return}let b=H0(g,JSON.parse(u),o,x.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:hr([e,b.pathname])),(x.replace?t.replace:t.push)(b,x.state,x)},[e,t,u,o,s])}N.createContext(null);function Do(){let{matches:s}=N.useContext(ma),e=s[s.length-1];return e?e.params:{}}function bu(s,{relative:e}={}){let{matches:t}=N.useContext(ma),{pathname:r}=yi(),o=JSON.stringify($0(t));return N.useMemo(()=>H0(s,JSON.parse(o),r,e==="path"),[s,o,r,e])}function Kj(s,e){return r_(s,e)}function r_(s,e,t,r,o){Zt(Ro(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=N.useContext(Ps),{matches:d}=N.useContext(ma),p=d[d.length-1],g=p?p.params:{},x=p?p.pathname:"/",b=p?p.pathnameBase:"/",w=p&&p.route;{let Y=w&&w.path||"";l_(x,!w||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let E=yi(),T;if(e){let Y=typeof e=="string"?gl(e):e;Zt(b==="/"||Y.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),T=Y}else T=E;let L=T.pathname||"/",V=L;if(b!=="/"){let Y=b.replace(/^\//,"").split("/");V="/"+L.replace(/^\//,"").split("/").slice(Y.length).join("/")}let O=K1(s,{pathname:V});Xs(w||O!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Xs(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=eT(O&&O.map(Y=>Object.assign({},Y,{params:Object.assign({},g,Y.params),pathname:hr([b,u.encodeLocation?u.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?b:hr([b,u.encodeLocation?u.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),d,t,r,o);return e&&B?N.createElement(xu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},B):B}function Qj(){let s=rT(),e=Vj(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:u},"ErrorBoundary")," or"," ",N.createElement("code",{style:u},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:o},t):null,d)}var Xj=N.createElement(Qj,null),i_=class extends N.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=Gj(s.digest);t&&(s=t)}let e=s!==void 0?N.createElement(ma.Provider,{value:this.props.routeContext},N.createElement(G0.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?N.createElement(Jj,{error:s},e):e}};i_.contextType=Bj;var Dp=new WeakMap;function Jj({children:s,error:e}){let{basename:t}=N.useContext(Ps);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=Hj(e.digest);if(r){let o=Dp.get(e);if(o)throw o;let u=Z1(r.location,t);if(J1&&!Dp.get(e))if(u.isExternal||r.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:r.replace}));throw Dp.set(e,d),d}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function Zj({routeContext:s,match:e,children:t}){let r=N.useContext(ko);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(ma.Provider,{value:s},t)}function eT(s,e=[],t=null,r=null,o=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,d=t?.errors;if(d!=null){let b=u.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);Zt(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(t)for(let b=0;b<u.length;b++){let w=u[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=b),w.route.id){let{loaderData:E,errors:T}=t,L=w.route.loader&&!E.hasOwnProperty(w.route.id)&&(!T||T[w.route.id]===void 0);if(w.route.lazy||L){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let x=t&&r?(b,w)=>{r(b,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:Lj(t.matches),errorInfo:w})}:void 0;return u.reduceRight((b,w,E)=>{let T,L=!1,V=null,O=null;t&&(T=d&&w.route.id?d[w.route.id]:void 0,V=w.route.errorElement||Xj,p&&(g<0&&E===0?(l_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,O=null):g===E&&(L=!0,O=w.route.hydrateFallbackElement||null)));let B=e.concat(u.slice(0,E+1)),Y=()=>{let $;return T?$=V:L?$=O:w.route.Component?$=N.createElement(w.route.Component,null):w.route.element?$=w.route.element:$=b,N.createElement(Zj,{match:w,routeContext:{outlet:b,matches:B,isDataRoute:t!=null},children:$})};return t&&(w.route.ErrorBoundary||w.route.errorElement||E===0)?N.createElement(i_,{location:t.location,revalidation:t.revalidation,component:V,error:T,children:Y(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:x}):Y()},null)}function Y0(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tT(s){let e=N.useContext(ko);return Zt(e,Y0(s)),e}function nT(s){let e=N.useContext(Zh);return Zt(e,Y0(s)),e}function sT(s){let e=N.useContext(ma);return Zt(e,Y0(s)),e}function W0(s){let e=sT(s),t=e.matches[e.matches.length-1];return Zt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function aT(){return W0("useRouteId")}function rT(){let s=N.useContext(G0),e=nT("useRouteError"),t=W0("useRouteError");return s!==void 0?s:e.errors?.[t]}function iT(){let{router:s}=tT("useNavigate"),e=W0("useNavigate"),t=N.useRef(!1);return a_(()=>{t.current=!0}),N.useCallback(async(o,u={})=>{Xs(t.current,s_),t.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var Vv={};function l_(s,e,t){!e&&!Vv[s]&&(Vv[s]=!0,Xs(!1,t))}N.memo(lT);function lT({routes:s,future:e,state:t,onError:r}){return r_(s,void 0,t,r,e)}function oT({to:s,replace:e,state:t,relative:r}){Zt(Ro(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(Ps);Xs(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=N.useContext(ma),{pathname:d}=yi(),p=Io(),g=H0(s,$0(u),d,r==="path"),x=JSON.stringify(g);return N.useEffect(()=>{p(JSON.parse(x),{replace:e,state:t,relative:r})},[p,x,r,e,t]),null}function la(s){Zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function cT({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:o,static:u=!1,unstable_useTransitions:d}){Zt(!Ro(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=N.useMemo(()=>({basename:p,navigator:o,static:u,unstable_useTransitions:d,future:{}}),[p,o,u,d]);typeof t=="string"&&(t=gl(t));let{pathname:x="/",search:b="",hash:w="",state:E=null,key:T="default"}=t,L=N.useMemo(()=>{let V=pr(x,p);return V==null?null:{location:{pathname:V,search:b,hash:w,state:E,key:T},navigationType:r}},[p,x,b,w,E,T,r]);return Xs(L!=null,`<Router basename="${p}"> is not able to match the URL "${x}${b}${w}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:N.createElement(Ps.Provider,{value:g},N.createElement(xu.Provider,{children:e,value:L}))}function uT({children:s,location:e}){return Kj(r0(s),e)}function r0(s,e=[]){let t=[];return N.Children.forEach(s,(r,o)=>{if(!N.isValidElement(r))return;let u=[...e,o];if(r.type===N.Fragment){t.push.apply(t,r0(r.props.children,u));return}Zt(r.type===la,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=r0(r.props.children,u)),t.push(d)}),t}var hh="get",fh="application/x-www-form-urlencoded";function ef(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function dT(s){return ef(s)&&s.tagName.toLowerCase()==="button"}function hT(s){return ef(s)&&s.tagName.toLowerCase()==="form"}function fT(s){return ef(s)&&s.tagName.toLowerCase()==="input"}function mT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function pT(s,e){return s.button===0&&(!e||e==="_self")&&!mT(s)}var Zd=null;function gT(){if(Zd===null)try{new FormData(document.createElement("form"),0),Zd=!1}catch{Zd=!0}return Zd}var xT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mp(s){return s!=null&&!xT.has(s)?(Xs(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fh}"`),null):s}function bT(s,e){let t,r,o,u,d;if(hT(s)){let p=s.getAttribute("action");r=p?pr(p,e):null,t=s.getAttribute("method")||hh,o=Mp(s.getAttribute("enctype"))||fh,u=new FormData(s)}else if(dT(s)||fT(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(r=g?pr(g,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||hh,o=Mp(s.getAttribute("formenctype"))||Mp(p.getAttribute("enctype"))||fh,u=new FormData(p,s),!gT()){let{name:x,type:b,value:w}=s;if(b==="image"){let E=x?`${x}.`:"";u.append(`${E}x`,"0"),u.append(`${E}y`,"0")}else x&&u.append(x,w)}}else{if(ef(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hh,r=null,o=fh,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:r,method:t.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function K0(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function yT(s,e,t,r){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${r}`:o.pathname=`${o.pathname}.${r}`:o.pathname==="/"?o.pathname=`_root.${r}`:e&&pr(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function vT(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wT(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function _T(s,e,t){let r=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await vT(u,t);return d.links?d.links():[]}return[]}));return jT(r.flat(1).filter(wT).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Lv(s,e,t,r,o,u){let d=(g,x)=>t[x]?g.route.id!==t[x].route.id:!0,p=(g,x)=>t[x].pathname!==g.pathname||t[x].route.path?.endsWith("*")&&t[x].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,x)=>d(g,x)||p(g,x)):u==="data"?e.filter((g,x)=>{let b=r.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(d(g,x)||p(g,x))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function NT(s,e,{includeHydrateFallback:t}={}){return ET(s.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function ET(s){return[...new Set(s)]}function ST(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function jT(s,e){let t=new Set;return new Set(e),s.reduce((r,o)=>{let u=JSON.stringify(ST(o));return t.has(u)||(t.add(u),r.push({key:u,link:o})),r},[])}function o_(){let s=N.useContext(ko);return K0(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function TT(){let s=N.useContext(Zh);return K0(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Q0=N.createContext(void 0);Q0.displayName="FrameworkContext";function c_(){let s=N.useContext(Q0);return K0(s,"You must render this element inside a <HydratedRouter> element"),s}function AT(s,e){let t=N.useContext(Q0),[r,o]=N.useState(!1),[u,d]=N.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:x,onMouseLeave:b,onTouchStart:w}=e,E=N.useRef(null);N.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let V=B=>{B.forEach(Y=>{d(Y.isIntersecting)})},O=new IntersectionObserver(V,{threshold:.5});return E.current&&O.observe(E.current),()=>{O.disconnect()}}},[s]),N.useEffect(()=>{if(r){let V=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(V)}}},[r]);let T=()=>{o(!0)},L=()=>{o(!1),d(!1)};return t?s!=="intent"?[u,E,{}]:[u,E,{onFocus:Lc(p,T),onBlur:Lc(g,L),onMouseEnter:Lc(x,T),onMouseLeave:Lc(b,L),onTouchStart:Lc(w,T)}]:[!1,E,{}]}function Lc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function CT({page:s,...e}){let{router:t}=o_(),r=N.useMemo(()=>K1(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?N.createElement(RT,{page:s,matches:r,...e}):null}function kT(s){let{manifest:e,routeModules:t}=c_(),[r,o]=N.useState([]);return N.useEffect(()=>{let u=!1;return _T(s,e,t).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,t]),r}function RT({page:s,matches:e,...t}){let r=yi(),{future:o,manifest:u,routeModules:d}=c_(),{basename:p}=o_(),{loaderData:g,matches:x}=TT(),b=N.useMemo(()=>Lv(s,e,x,u,r,"data"),[s,e,x,u,r]),w=N.useMemo(()=>Lv(s,e,x,u,r,"assets"),[s,e,x,u,r]),E=N.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let V=new Set,O=!1;if(e.forEach(Y=>{let $=u.routes[Y.route.id];!$||!$.hasLoader||(!b.some(ie=>ie.route.id===Y.route.id)&&Y.route.id in g&&d[Y.route.id]?.shouldRevalidate||$.hasClientLoader?O=!0:V.add(Y.route.id))}),V.size===0)return[];let B=yT(s,p,o.unstable_trailingSlashAwareDataRequests,"data");return O&&V.size>0&&B.searchParams.set("_routes",e.filter(Y=>V.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[B.pathname+B.search]},[p,o.unstable_trailingSlashAwareDataRequests,g,r,u,b,e,s,d]),T=N.useMemo(()=>NT(w,u),[w,u]),L=kT(w);return N.createElement(N.Fragment,null,E.map(V=>N.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),T.map(V=>N.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),L.map(({key:V,link:O})=>N.createElement("link",{key:V,nonce:t.nonce,...O,crossOrigin:O.crossOrigin??t.crossOrigin})))}function IT(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var DT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{DT&&(window.__reactRouterVersion="7.13.0")}catch{}function MT({basename:s,children:e,unstable_useTransitions:t,window:r}){let o=N.useRef();o.current==null&&(o.current=fj({window:r,v5Compat:!0}));let u=o.current,[d,p]=N.useState({action:u.action,location:u.location}),g=N.useCallback(x=>{t===!1?p(x):N.startTransition(()=>p(x))},[t]);return N.useLayoutEffect(()=>u.listen(g),[u,g]),N.createElement(cT,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:t})}var u_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=N.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:o,reloadDocument:u,replace:d,state:p,target:g,to:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:E,...T},L){let{basename:V,unstable_useTransitions:O}=N.useContext(Ps),B=typeof x=="string"&&u_.test(x),Y=Z1(x,V);x=Y.to;let $=Yj(x,{relative:o}),[ie,he,oe]=AT(r,T),j=LT(x,{replace:d,state:p,target:g,preventScrollReset:b,relative:o,viewTransition:w,unstable_defaultShouldRevalidate:E,unstable_useTransitions:O});function A(U){e&&e(U),U.defaultPrevented||j(U)}let k=N.createElement("a",{...T,...oe,href:Y.absoluteURL||$,onClick:Y.isExternal||u?e:A,ref:IT(L,he),target:g,"data-discover":!B&&t==="render"?"true":void 0});return ie&&!B?N.createElement(N.Fragment,null,k,N.createElement(CT,{page:$})):k});st.displayName="Link";var OT=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:o=!1,style:u,to:d,viewTransition:p,children:g,...x},b){let w=bu(d,{relative:x.relative}),E=yi(),T=N.useContext(Zh),{navigator:L,basename:V}=N.useContext(Ps),O=T!=null&&FT(w)&&p===!0,B=L.encodeLocation?L.encodeLocation(w).pathname:w.pathname,Y=E.pathname,$=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),$=$?$.toLowerCase():null,B=B.toLowerCase()),$&&V&&($=pr($,V)||$);const ie=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let he=Y===B||!o&&Y.startsWith(B)&&Y.charAt(ie)==="/",oe=$!=null&&($===B||!o&&$.startsWith(B)&&$.charAt(B.length)==="/"),j={isActive:he,isPending:oe,isTransitioning:O},A=he?e:void 0,k;typeof r=="function"?k=r(j):k=[r,he?"active":null,oe?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let U=typeof u=="function"?u(j):u;return N.createElement(st,{...x,"aria-current":A,className:k,ref:b,style:U,to:d,viewTransition:p},typeof g=="function"?g(j):g)});OT.displayName="NavLink";var PT=N.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:o,state:u,method:d=hh,action:p,onSubmit:g,relative:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:E,...T},L)=>{let{unstable_useTransitions:V}=N.useContext(Ps),O=zT(),B=qT(p,{relative:x}),Y=d.toLowerCase()==="get"?"get":"post",$=typeof p=="string"&&u_.test(p),ie=he=>{if(g&&g(he),he.defaultPrevented)return;he.preventDefault();let oe=he.nativeEvent.submitter,j=oe?.getAttribute("formmethod")||d,A=()=>O(oe||he.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:o,state:u,relative:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:E});V&&t!==!1?N.startTransition(()=>A()):A()};return N.createElement("form",{ref:L,method:Y,action:B,onSubmit:r?g:ie,...T,"data-discover":!$&&s==="render"?"true":void 0})});PT.displayName="Form";function VT(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d_(s){let e=N.useContext(ko);return Zt(e,VT(s)),e}function LT(s,{target:e,replace:t,state:r,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let x=Io(),b=yi(),w=bu(s,{relative:u});return N.useCallback(E=>{if(pT(E,e)){E.preventDefault();let T=t!==void 0?t:ru(b)===ru(w),L=()=>x(s,{replace:T,state:r,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?N.startTransition(()=>L()):L()}},[b,x,w,t,r,e,s,o,u,d,p,g])}var UT=0,BT=()=>`__${String(++UT)}__`;function zT(){let{router:s}=d_("useSubmit"),{basename:e}=N.useContext(Ps),t=aT(),r=s.fetch,o=s.navigate;return N.useCallback(async(u,d={})=>{let{action:p,method:g,encType:x,formData:b,body:w}=bT(u,e);if(d.navigate===!1){let E=d.fetcherKey||BT();await r(E,t,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:w,formMethod:d.method||g,formEncType:d.encType||x,flushSync:d.flushSync})}else await o(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:w,formMethod:d.method||g,formEncType:d.encType||x,replace:d.replace,state:d.state,fromRouteId:t,flushSync:d.flushSync,viewTransition:d.viewTransition})},[r,o,e,t])}function qT(s,{relative:e}={}){let{basename:t}=N.useContext(Ps),r=N.useContext(ma);Zt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),u={...bu(s||".",{relative:e})},d=yi();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let b=p.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:hr([t,u.pathname])),ru(u)}function FT(s,{relative:e}={}){let t=N.useContext(t_);Zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=d_("useViewTransitionState"),o=bu(s,{relative:e});if(!t.isTransitioning)return!1;let u=pr(t.currentLocation.pathname,r)||t.currentLocation.pathname,d=pr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ah(o.pathname,d)!=null||Ah(o.pathname,u)!=null}const $T=()=>{};var Uv={};const h_=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},HT=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],d=s[t++],p=s[t++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],d=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},f_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,p=d?s[o+1]:0,g=o+2<s.length,x=g?s[o+2]:0,b=u>>2,w=(u&3)<<4|p>>4;let E=(p&15)<<2|x>>6,T=x&63;g||(T=64,d||(E=64)),r.push(t[b],t[w],t[E],t[T])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(h_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):HT(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],p=o<s.length?t[s.charAt(o)]:0;++o;const x=o<s.length?t[s.charAt(o)]:64;++o;const w=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||p==null||x==null||w==null)throw new GT;const E=u<<2|p>>4;if(r.push(E),x!==64){const T=p<<4&240|x>>2;if(r.push(T),w!==64){const L=x<<6&192|w;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class GT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YT=function(s){const e=h_(s);return f_.encodeByteArray(e,!0)},Ch=function(s){return YT(s).replace(/\./g,"")},m_=function(s){try{return f_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function WT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const KT=()=>WT().__FIREBASE_DEFAULTS__,QT=()=>{if(typeof process>"u"||typeof Uv>"u")return;const s=Uv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},XT=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&m_(s[1]);return e&&JSON.parse(e)},tf=()=>{try{return $T()||KT()||QT()||XT()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},p_=s=>tf()?.emulatorHosts?.[s],g_=s=>{const e=p_(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},x_=()=>tf()?.config,b_=s=>tf()?.[`_${s}`];class JT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function vi(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X0(s){return(await fetch(s,{credentials:"include"})).ok}function y_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Ch(JSON.stringify(t)),Ch(JSON.stringify(d)),""].join(".")}const Xc={};function ZT(){const s={prod:[],emulator:[]};for(const e of Object.keys(Xc))Xc[e]?s.emulator.push(e):s.prod.push(e);return s}function eA(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Bv=!1;function J0(s,e){if(typeof window>"u"||typeof document>"u"||!vi(window.location.host)||Xc[s]===e||Xc[s]||Bv)return;Xc[s]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",u=ZT().prod.length>0;function d(){const E=document.getElementById(r);E&&E.remove()}function p(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function g(E,T){E.setAttribute("width","24"),E.setAttribute("id",T),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function x(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Bv=!0,d()},E}function b(E,T){E.setAttribute("id",T),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function w(){const E=eA(r),T=t("text"),L=document.getElementById(T)||document.createElement("span"),V=t("learnmore"),O=document.getElementById(V)||document.createElement("a"),B=t("preprendIcon"),Y=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const $=E.element;p($),b(O,V);const ie=x();g(Y,B),$.append(Y,L,O,ie),document.body.appendChild($)}u?(L.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function nA(){const s=tf()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function rA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iA(){const s=Kn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function lA(){return!nA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oA(){try{return typeof indexedDB=="object"}catch{return!1}}function cA(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const uA="FirebaseError";class qa extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=uA,Object.setPrototypeOf(this,qa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yu.prototype.create)}}class yu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?dA(u,r):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new qa(o,p,r)}}function dA(s,e){return s.replace(hA,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const hA=/\{\$([^}]+)}/g;function fA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function il(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const u=s[o],d=e[o];if(zv(u)&&zv(d)){if(!il(u,d))return!1}else if(u!==d)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function zv(s){return s!==null&&typeof s=="object"}function vu(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $c(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Hc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function mA(s,e){const t=new pA(s,e);return t.subscribe.bind(t)}class pA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");gA(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Op),o.error===void 0&&(o.error=Op),o.complete===void 0&&(o.complete=Op);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gA(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Op(){}function en(s){return s&&s._delegate?s._delegate:s}class di{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const tl="[DEFAULT]";class xA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new JT;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yA(e))try{this.getOrInitializeService({instanceIdentifier:tl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=tl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tl){return this.instances.has(e)}getOptions(e=tl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&d.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=tl){return this.component?this.component.multipleInstances?e:tl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bA(s){return s===tl?void 0:s}function yA(s){return s.instantiationMode==="EAGER"}class vA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var gt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(gt||(gt={}));const wA={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},_A=gt.INFO,NA={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},EA=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=NA[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Z0{constructor(e){this.name=e,this._logLevel=_A,this._logHandler=EA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const SA=(s,e)=>e.some(t=>s instanceof t);let qv,Fv;function jA(){return qv||(qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TA(){return Fv||(Fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v_=new WeakMap,i0=new WeakMap,w_=new WeakMap,Pp=new WeakMap,eg=new WeakMap;function AA(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{t(ii(s.result)),o()},d=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&v_.set(t,s)}).catch(()=>{}),eg.set(e,s),e}function CA(s){if(i0.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{t(),o()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});i0.set(s,e)}let l0={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return i0.get(s);if(e==="objectStoreNames")return s.objectStoreNames||w_.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ii(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function kA(s){l0=s(l0)}function RA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Vp(this),e,...t);return w_.set(r,e.sort?e.sort():[e]),ii(r)}:TA().includes(s)?function(...e){return s.apply(Vp(this),e),ii(v_.get(this))}:function(...e){return ii(s.apply(Vp(this),e))}}function IA(s){return typeof s=="function"?RA(s):(s instanceof IDBTransaction&&CA(s),SA(s,jA())?new Proxy(s,l0):s)}function ii(s){if(s instanceof IDBRequest)return AA(s);if(Pp.has(s))return Pp.get(s);const e=IA(s);return e!==s&&(Pp.set(s,e),eg.set(e,s)),e}const Vp=s=>eg.get(s);function DA(s,e,{blocked:t,upgrade:r,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),p=ii(d);return r&&d.addEventListener("upgradeneeded",g=>{r(ii(d.result),g.oldVersion,g.newVersion,ii(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",x=>o(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const MA=["get","getKey","getAll","getAllKeys","count"],OA=["put","add","delete","clear"],Lp=new Map;function $v(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=OA.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||MA.includes(t)))return;const u=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let x=g.store;return r&&(x=x.index(p.shift())),(await Promise.all([x[t](...p),o&&g.done]))[0]};return Lp.set(e,u),u}kA(s=>({...s,get:(e,t,r)=>$v(e,t)||s.get(e,t,r),has:(e,t)=>!!$v(e,t)||s.has(e,t)}));class PA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VA(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function VA(s){return s.getComponent()?.type==="VERSION"}const o0="@firebase/app",Hv="0.14.7";const gr=new Z0("@firebase/app"),LA="@firebase/app-compat",UA="@firebase/analytics-compat",BA="@firebase/analytics",zA="@firebase/app-check-compat",qA="@firebase/app-check",FA="@firebase/auth",$A="@firebase/auth-compat",HA="@firebase/database",GA="@firebase/data-connect",YA="@firebase/database-compat",WA="@firebase/functions",KA="@firebase/functions-compat",QA="@firebase/installations",XA="@firebase/installations-compat",JA="@firebase/messaging",ZA="@firebase/messaging-compat",e5="@firebase/performance",t5="@firebase/performance-compat",n5="@firebase/remote-config",s5="@firebase/remote-config-compat",a5="@firebase/storage",r5="@firebase/storage-compat",i5="@firebase/firestore",l5="@firebase/ai",o5="@firebase/firestore-compat",c5="firebase",u5="12.8.0";const c0="[DEFAULT]",d5={[o0]:"fire-core",[LA]:"fire-core-compat",[BA]:"fire-analytics",[UA]:"fire-analytics-compat",[qA]:"fire-app-check",[zA]:"fire-app-check-compat",[FA]:"fire-auth",[$A]:"fire-auth-compat",[HA]:"fire-rtdb",[GA]:"fire-data-connect",[YA]:"fire-rtdb-compat",[WA]:"fire-fn",[KA]:"fire-fn-compat",[QA]:"fire-iid",[XA]:"fire-iid-compat",[JA]:"fire-fcm",[ZA]:"fire-fcm-compat",[e5]:"fire-perf",[t5]:"fire-perf-compat",[n5]:"fire-rc",[s5]:"fire-rc-compat",[a5]:"fire-gcs",[r5]:"fire-gcs-compat",[i5]:"fire-fst",[o5]:"fire-fst-compat",[l5]:"fire-vertex","fire-js":"fire-js",[c5]:"fire-js-all"};const kh=new Map,h5=new Map,u0=new Map;function Gv(s,e){try{s.container.addComponent(e)}catch(t){gr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ll(s){const e=s.name;if(u0.has(e))return gr.debug(`There were multiple attempts to register component ${e}.`),!1;u0.set(e,s);for(const t of kh.values())Gv(t,s);for(const t of h5.values())Gv(t,s);return!0}function nf(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function ks(s){return s==null?!1:s.settings!==void 0}const f5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new yu("app","Firebase",f5);class m5{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}const xl=u5;function __(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:c0,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw li.create("bad-app-name",{appName:String(o)});if(t||(t=x_()),!t)throw li.create("no-options");const u=kh.get(o);if(u){if(il(t,u.options)&&il(r,u.config))return u;throw li.create("duplicate-app",{appName:o})}const d=new vA(o);for(const g of u0.values())d.addComponent(g);const p=new m5(t,r,d);return kh.set(o,p),p}function tg(s=c0){const e=kh.get(s);if(!e&&s===c0&&x_())return __();if(!e)throw li.create("no-app",{appName:s});return e}function Ma(s,e,t){let r=d5[s]??s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gr.warn(d.join(" "));return}ll(new di(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const p5="firebase-heartbeat-database",g5=1,iu="firebase-heartbeat-store";let Up=null;function N_(){return Up||(Up=DA(p5,g5,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(iu)}catch(t){console.warn(t)}}}}).catch(s=>{throw li.create("idb-open",{originalErrorMessage:s.message})})),Up}async function x5(s){try{const t=(await N_()).transaction(iu),r=await t.objectStore(iu).get(E_(s));return await t.done,r}catch(e){if(e instanceof qa)gr.warn(e.message);else{const t=li.create("idb-get",{originalErrorMessage:e?.message});gr.warn(t.message)}}}async function Yv(s,e){try{const r=(await N_()).transaction(iu,"readwrite");await r.objectStore(iu).put(e,E_(s)),await r.done}catch(t){if(t instanceof qa)gr.warn(t.message);else{const r=li.create("idb-set",{originalErrorMessage:t?.message});gr.warn(r.message)}}}function E_(s){return`${s.name}!${s.options.appId}`}const b5=1024,y5=30;class v5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Wv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>y5){const o=N5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){gr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wv(),{heartbeatsToSend:t,unsentEntries:r}=w5(this._heartbeatsCache.heartbeats),o=Ch(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return gr.warn(e),""}}}function Wv(){return new Date().toISOString().substring(0,10)}function w5(s,e=b5){const t=[];let r=s.slice();for(const o of s){const u=t.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),Kv(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Kv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class _5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oA()?cA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await x5(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Yv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Yv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Kv(s){return Ch(JSON.stringify({version:2,heartbeats:s})).length}function N5(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function E5(s){ll(new di("platform-logger",e=>new PA(e),"PRIVATE")),ll(new di("heartbeat",e=>new v5(e),"PRIVATE")),Ma(o0,Hv,s),Ma(o0,Hv,"esm2020"),Ma("fire-js","")}E5("");function S_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const S5=S_,j_=new yu("auth","Firebase",S_());const Rh=new Z0("@firebase/auth");function j5(s,...e){Rh.logLevel<=gt.WARN&&Rh.warn(`Auth (${xl}): ${s}`,...e)}function mh(s,...e){Rh.logLevel<=gt.ERROR&&Rh.error(`Auth (${xl}): ${s}`,...e)}function ha(s,...e){throw ng(s,...e)}function Oa(s,...e){return ng(s,...e)}function T_(s,e,t){const r={...S5(),[e]:t};return new yu("auth","Firebase",r).create(e,{appName:s.name})}function fr(s){return T_(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ng(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return j_.create(s,...e)}function Ye(s,e,...t){if(!s)throw ng(e,...t)}function cr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw mh(e),new Error(e)}function xr(s,e){s||cr(e)}function d0(){return typeof self<"u"&&self.location?.href||""}function T5(){return Qv()==="http:"||Qv()==="https:"}function Qv(){return typeof self<"u"&&self.location?.protocol||null}function A5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(T5()||aA()||"connection"in navigator)?navigator.onLine:!0}function C5(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class wu{constructor(e,t){this.shortDelay=e,this.longDelay=t,xr(t>e,"Short delay should be less than long delay!"),this.isMobile=tA()||rA()}get(){return A5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function sg(s,e){xr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class A_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const k5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const R5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],I5=new wu(3e4,6e4);function wi(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function _i(s,e,t,r,o={}){return C_(s,o,async()=>{let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});const p=vu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const x={method:e,headers:g,...u};return sA()||(x.referrerPolicy="no-referrer"),s.emulatorConfig&&vi(s.emulatorConfig.host)&&(x.credentials="include"),A_.fetch()(await k_(s,s.config.apiHost,t,p),x)})}async function C_(s,e,t){s._canInitEmulator=!1;const r={...k5,...e};try{const o=new M5(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw eh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,x]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw eh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw eh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw eh(s,"user-disabled",d);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw T_(s,b,x);ha(s,b)}}catch(o){if(o instanceof qa)throw o;ha(s,"network-request-failed",{message:String(o)})}}async function _u(s,e,t,r,o={}){const u=await _i(s,e,t,r,o);return"mfaPendingCredential"in u&&ha(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function k_(s,e,t,r){const o=`${e}${t}?${r}`,u=s,d=u.config.emulator?sg(s.config,o):`${s.config.apiScheme}://${o}`;return R5.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function D5(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class M5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Oa(this.auth,"network-request-failed")),I5.get())})}}function eh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Oa(s,e,r);return o.customData._tokenResponse=t,o}function Xv(s){return s!==void 0&&s.enterprise!==void 0}class O5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D5(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function P5(s,e){return _i(s,"GET","/v2/recaptchaConfig",wi(s,e))}async function V5(s,e){return _i(s,"POST","/v1/accounts:delete",e)}async function Ih(s,e){return _i(s,"POST","/v1/accounts:lookup",e)}function Jc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function L5(s,e=!1){const t=en(s),r=await t.getIdToken(e),o=ag(r);Ye(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:r,authTime:Jc(Bp(o.auth_time)),issuedAtTime:Jc(Bp(o.iat)),expirationTime:Jc(Bp(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Bp(s){return Number(s)*1e3}function ag(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return mh("JWT malformed, contained fewer than 3 sections"),null;try{const o=m_(t);return o?JSON.parse(o):(mh("Failed to decode base64 JWT payload"),null)}catch(o){return mh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Jv(s){const e=ag(s);return Ye(e,"internal-error"),Ye(typeof e.exp<"u","internal-error"),Ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof qa&&U5(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function U5({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class B5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class h0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jc(this.lastLoginAt),this.creationTime=Jc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Dh(s){const e=s.auth,t=await s.getIdToken(),r=await lu(s,Ih(e,{idToken:t}));Ye(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?R_(o.providerUserInfo):[],d=q5(s.providerData,u),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!d?.length,x=p?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new h0(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(s,b)}async function z5(s){const e=en(s);await Dh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q5(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function R_(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function F5(s,e){const t=await C_(s,{},async()=>{const r=vu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await k_(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return s.emulatorConfig&&vi(s.emulatorConfig.host)&&(g.credentials="include"),A_.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $5(s,e){return _i(s,"POST","/v2/accounts:revokeToken",wi(s,e))}class po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ye(e.idToken,"internal-error"),Ye(typeof e.idToken<"u","internal-error"),Ye(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ye(e.length!==0,"internal-error");const t=Jv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:u}=await F5(e,t);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:u}=t,d=new po;return r&&(Ye(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(Ye(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Ye(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new po,this.toJSON())}_performRefresh(){return cr("not implemented")}}function Zr(s,e){Ye(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class oa{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new B5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new h0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await lu(this,this.stsTokenManager.getToken(this.auth,e));return Ye(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return L5(this,e)}reload(){return z5(this)}_assign(e){this!==e&&(Ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new oa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Dh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ks(this.auth.app))return Promise.reject(fr(this.auth));const e=await this.getIdToken();return await lu(this,V5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,d=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,x=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:w,emailVerified:E,isAnonymous:T,providerData:L,stsTokenManager:V}=t;Ye(w&&V,e,"internal-error");const O=po.fromJSON(this.name,V);Ye(typeof w=="string",e,"internal-error"),Zr(r,e.name),Zr(o,e.name),Ye(typeof E=="boolean",e,"internal-error"),Ye(typeof T=="boolean",e,"internal-error"),Zr(u,e.name),Zr(d,e.name),Zr(p,e.name),Zr(g,e.name),Zr(x,e.name),Zr(b,e.name);const B=new oa({uid:w,auth:e,email:o,emailVerified:E,displayName:r,isAnonymous:T,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:O,createdAt:x,lastLoginAt:b});return L&&Array.isArray(L)&&(B.providerData=L.map(Y=>({...Y}))),g&&(B._redirectEventId=g),B}static async _fromIdTokenResponse(e,t,r=!1){const o=new po;o.updateFromServerResponse(t);const u=new oa({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Dh(u),u}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ye(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?R_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,p=new po;p.updateFromIdToken(r);const g=new oa({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new h0(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,x),g}}const Zv=new Map;function ur(s){xr(s instanceof Function,"Expected a class definition");let e=Zv.get(s);return e?(xr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Zv.set(s,e),e)}class I_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}I_.type="NONE";const ew=I_;function ph(s,e,t){return`firebase:${s}:${e}:${t}`}class go{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=ph(this.userKey,o.apiKey,u),this.fullPersistenceKey=ph("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ih(this.auth,{idToken:e}).catch(()=>{});return t?oa._fromGetAccountInfoResponse(this.auth,t,e):null}return oa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new go(ur(ew),e,r);const o=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=o[0]||ur(ew);const d=ph(r,e.config.apiKey,e.name);let p=null;for(const x of t)try{const b=await x._get(d);if(b){let w;if(typeof b=="string"){const E=await Ih(e,{idToken:b}).catch(()=>{});if(!E)break;w=await oa._fromGetAccountInfoResponse(e,E,b)}else w=oa._fromJSON(e,b);x!==u&&(p=w),u=x;break}}catch{}const g=o.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new go(u,e,r):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(t.map(async x=>{if(x!==u)try{await x._remove(d)}catch{}})),new go(u,e,r))}}function tw(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(P_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(D_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L_(e))return"Blackberry";if(U_(e))return"Webos";if(M_(e))return"Safari";if((e.includes("chrome/")||O_(e))&&!e.includes("edge/"))return"Chrome";if(V_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function D_(s=Kn()){return/firefox\//i.test(s)}function M_(s=Kn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function O_(s=Kn()){return/crios\//i.test(s)}function P_(s=Kn()){return/iemobile/i.test(s)}function V_(s=Kn()){return/android/i.test(s)}function L_(s=Kn()){return/blackberry/i.test(s)}function U_(s=Kn()){return/webos/i.test(s)}function rg(s=Kn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function H5(s=Kn()){return rg(s)&&!!window.navigator?.standalone}function G5(){return iA()&&document.documentMode===10}function B_(s=Kn()){return rg(s)||V_(s)||U_(s)||L_(s)||/windows phone/i.test(s)||P_(s)}function z_(s,e=[]){let t;switch(s){case"Browser":t=tw(Kn());break;case"Worker":t=`${tw(Kn())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${xl}/${r}`}class Y5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function W5(s,e={}){return _i(s,"GET","/v2/passwordPolicy",wi(s,e))}const K5=6;class Q5{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??K5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class X5{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nw(this),this.idTokenSubscription=new nw(this),this.beforeStateQueue=new Y5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=j_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ur(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await go.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ih(this,{idToken:e}),r=await oa._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ks(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=C5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ks(this.app))return Promise.reject(fr(this));const t=e?en(e):null;return t&&Ye(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ks(this.app)?Promise.reject(fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ks(this.app)?Promise.reject(fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await W5(this),t=new Q5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $5(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ur(e)||this._popupRedirectResolver;Ye(t,this,"argument-error"),this.redirectPersistenceManager=await go.create(this,[ur(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ye(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&j5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function bl(s){return en(s)}class nw{constructor(e){this.auth=e,this.observer=null,this.addObserver=mA(t=>this.observer=t)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let sf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function J5(s){sf=s}function q_(s){return sf.loadJS(s)}function Z5(){return sf.recaptchaEnterpriseScript}function eC(){return sf.gapiScript}function tC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class nC{constructor(){this.enterprise=new sC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class sC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const aC="recaptcha-enterprise",F_="NO_RECAPTCHA";class rC{constructor(e){this.type=aC,this.auth=bl(e)}async verify(e="verify",t=!1){async function r(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{P5(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const x=new O5(g);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,d(x.siteKey)}}).catch(g=>{p(g)})})}function o(u,d,p){const g=window.grecaptcha;Xv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(x=>{d(x)}).catch(()=>{d(F_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new nC().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{r(this.auth).then(p=>{if(!t&&Xv(window.grecaptcha))o(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=Z5();g.length!==0&&(g+=p),q_(g).then(()=>{o(p,u,d)}).catch(x=>{d(x)})}}).catch(p=>{d(p)})})}}async function sw(s,e,t,r=!1,o=!1){const u=new rC(s);let d;if(o)d=F_;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,x=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function f0(s,e,t,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await sw(s,e,t,t==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await sw(s,e,t,t==="getOobCode");return r(s,d)}else return Promise.reject(u)})}function iC(s,e){const t=nf(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(il(u,e??{}))return o;ha(o,"already-initialized")}return t.initialize({options:e})}function lC(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ur);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function oC(s,e,t){const r=bl(s);Ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=$_(e),{host:d,port:p}=cC(e),g=p===null?"":`:${p}`,x={url:`${u}//${d}${g}/`},b=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ye(il(x,r.config.emulator)&&il(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,vi(d)?(X0(`${u}//${d}${g}`),J0("Auth",!0)):uC()}function $_(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function cC(s){const e=$_(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:aw(r.substr(u.length+1))}}else{const[u,d]=r.split(":");return{host:u,port:aw(d)}}}function aw(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function uC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class ig{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,t){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}async function dC(s,e){return _i(s,"POST","/v1/accounts:signUp",e)}async function hC(s,e){return _u(s,"POST","/v1/accounts:signInWithPassword",wi(s,e))}async function fC(s,e){return _u(s,"POST","/v1/accounts:signInWithEmailLink",wi(s,e))}async function mC(s,e){return _u(s,"POST","/v1/accounts:signInWithEmailLink",wi(s,e))}class ou extends ig{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ou(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ou(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f0(e,t,"signInWithPassword",hC);case"emailLink":return fC(e,{email:this._email,oobCode:this._password});default:ha(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return f0(e,r,"signUpPassword",dC);case"emailLink":return mC(e,{idToken:t,email:this._email,oobCode:this._password});default:ha(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xo(s,e){return _u(s,"POST","/v1/accounts:signInWithIdp",wi(s,e))}const pC="http://localhost";class ol extends ig{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ol(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ha("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=t;if(!r||!o)return null;const d=new ol(r,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return xo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,xo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xo(e,t)}buildRequest(){const e={requestUri:pC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vu(t)}return e}}function gC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xC(s){const e=$c(Hc(s)).link,t=e?$c(Hc(e)).deep_link_id:null,r=$c(Hc(s)).deep_link_id;return(r?$c(Hc(r)).link:null)||r||t||e||s}class lg{constructor(e){const t=$c(Hc(e)),r=t.apiKey??null,o=t.oobCode??null,u=gC(t.mode??null);Ye(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=xC(e);try{return new lg(t)}catch{return null}}}class Mo{constructor(){this.providerId=Mo.PROVIDER_ID}static credential(e,t){return ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=lg.parseLink(t);return Ye(r,"argument-error"),ou._fromEmailAndCode(e,r.code,r.tenantId)}}Mo.PROVIDER_ID="password";Mo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class H_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nu extends H_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ei extends Nu{constructor(){super("facebook.com")}static credential(e){return ol._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.FACEBOOK_SIGN_IN_METHOD="facebook.com";ei.PROVIDER_ID="facebook.com";class ti extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ol._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ti.credential(t,r)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";class ni extends Nu{constructor(){super("github.com")}static credential(e){return ol._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.GITHUB_SIGN_IN_METHOD="github.com";ni.PROVIDER_ID="github.com";class si extends Nu{constructor(){super("twitter.com")}static credential(e,t){return ol._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return si.credential(t,r)}catch{return null}}}si.TWITTER_SIGN_IN_METHOD="twitter.com";si.PROVIDER_ID="twitter.com";async function bC(s,e){return _u(s,"POST","/v1/accounts:signUp",wi(s,e))}class cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const u=await oa._fromIdTokenResponse(e,r,o),d=rw(r);return new cl({user:u,providerId:d,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=rw(r);return new cl({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function rw(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Mh extends qa{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Mh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Mh(e,t,r,o)}}function G_(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Mh._fromErrorAndOperation(s,u,e,r):u})}async function yC(s,e,t=!1){const r=await lu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return cl._forOperation(s,"link",r)}async function vC(s,e,t=!1){const{auth:r}=s;if(ks(r.app))return Promise.reject(fr(r));const o="reauthenticate";try{const u=await lu(s,G_(r,o,e,s),t);Ye(u.idToken,r,"internal-error");const d=ag(u.idToken);Ye(d,r,"internal-error");const{sub:p}=d;return Ye(s.uid===p,r,"user-mismatch"),cl._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ha(r,"user-mismatch"),u}}async function Y_(s,e,t=!1){if(ks(s.app))return Promise.reject(fr(s));const r="signIn",o=await G_(s,r,e),u=await cl._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(u.user),u}async function wC(s,e){return Y_(bl(s),e)}async function W_(s){const e=bl(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _C(s,e,t){if(ks(s.app))return Promise.reject(fr(s));const r=bl(s),d=await f0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&W_(s),g}),p=await cl._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(p.user),p}function K_(s,e,t){return ks(s.app)?Promise.reject(fr(s)):wC(en(s),Mo.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&W_(s),r})}function NC(s,e,t,r){return en(s).onIdTokenChanged(e,t,r)}function EC(s,e,t){return en(s).beforeAuthStateChanged(e,t)}function SC(s,e,t,r){return en(s).onAuthStateChanged(e,t,r)}function jC(s){return en(s).signOut()}const Oh="__sak";class Q_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const TC=1e3,AC=10;class X_ extends Q_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!t&&this.localCache[r]===d||this.notifyListeners(r,d)},u=this.storage.getItem(r);G5()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,AC):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},TC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}X_.type="LOCAL";const CC=X_;class J_ extends Q_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}J_.type="SESSION";const Z_=J_;function kC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new af(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:u}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(d).map(async x=>x(t.origin,u)),g=await kC(p);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];function og(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class RC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const x=og("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(w){const E=w;if(E.data.eventId===x)switch(E.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(E.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Pa(){return window}function IC(s){Pa().location.href=s}function eN(){return typeof Pa().WorkerGlobalScope<"u"&&typeof Pa().importScripts=="function"}async function DC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MC(){return navigator?.serviceWorker?.controller||null}function OC(){return eN()?self:null}const tN="firebaseLocalStorageDb",PC=1,Ph="firebaseLocalStorage",nN="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function rf(s,e){return s.transaction([Ph],e?"readwrite":"readonly").objectStore(Ph)}function VC(){const s=indexedDB.deleteDatabase(tN);return new Eu(s).toPromise()}function m0(){const s=indexedDB.open(tN,PC);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Ph,{keyPath:nN})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Ph)?e(r):(r.close(),await VC(),e(await m0()))})})}async function iw(s,e,t){const r=rf(s,!0).put({[nN]:e,value:t});return new Eu(r).toPromise()}async function LC(s,e){const t=rf(s,!1).get(e),r=await new Eu(t).toPromise();return r===void 0?null:r.value}function lw(s,e){const t=rf(s,!0).delete(e);return new Eu(t).toPromise()}const UC=800,BC=3;class sN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await m0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>BC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(OC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await DC(),!this.activeServiceWorker)return;this.sender=new RC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await m0();return await iw(e,Oh,"1"),await lw(e,Oh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>iw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>LC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=rf(o,!1).getAll();return new Eu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),UC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sN.type="LOCAL";const zC=sN;new wu(3e4,6e4);function qC(s,e){return e?ur(e):(Ye(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class cg extends ig{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function FC(s){return Y_(s.auth,new cg(s),s.bypassAuthState)}function $C(s){const{auth:e,user:t}=s;return Ye(t,e,"internal-error"),vC(t,new cg(s),s.bypassAuthState)}async function HC(s){const{auth:e,user:t}=s;return Ye(t,e,"internal-error"),yC(t,new cg(s),s.bypassAuthState)}class aN{constructor(e,t,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FC;case"linkViaPopup":case"linkViaRedirect":return HC;case"reauthViaPopup":case"reauthViaRedirect":return $C;default:ha(this.auth,"internal-error")}}resolve(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const GC=new wu(2e3,1e4);class ho extends aN{constructor(e,t,r,o,u){super(e,t,o,u),this.provider=r,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ye(e,this.auth,"internal-error"),e}async onExecution(){xr(this.filter.length===1,"Popup operations only handle one event");const e=og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Oa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Oa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Oa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GC.get())};e()}}ho.currentPopupAction=null;const YC="pendingRedirect",gh=new Map;class WC extends aN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=gh.get(this.auth._key());if(!e){try{const r=await KC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gh.set(this.auth._key(),e)}return this.bypassAuthState||gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function KC(s,e){const t=JC(e),r=XC(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function QC(s,e){gh.set(s._key(),e)}function XC(s){return ur(s._redirectPersistence)}function JC(s){return ph(YC,s.config.apiKey,s.name)}async function ZC(s,e,t=!1){if(ks(s.app))return Promise.reject(fr(s));const r=bl(s),o=qC(r,e),d=await new WC(r,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const ek=600*1e3;class tk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rN(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Oa(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ek&&this.cachedEventUids.clear(),this.cachedEventUids.has(ow(e))}saveEventToCache(e){this.cachedEventUids.add(ow(e)),this.lastProcessedEventTime=Date.now()}}function ow(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function rN({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function nk(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rN(s);default:return!1}}async function sk(s,e={}){return _i(s,"GET","/v1/projects",e)}const ak=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rk=/^https?/;async function ik(s){if(s.config.emulator)return;const{authorizedDomains:e}=await sk(s);for(const t of e)try{if(lk(t))return}catch{}ha(s,"unauthorized-domain")}function lk(s){const e=d0(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===r}if(!rk.test(t))return!1;if(ak.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const ok=new wu(3e4,6e4);function cw(){const s=Pa().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function ck(s){return new Promise((e,t)=>{function r(){cw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cw(),t(Oa(s,"network-request-failed"))},timeout:ok.get()})}if(Pa().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Pa().gapi?.load)r();else{const o=tC("iframefcb");return Pa()[o]=()=>{gapi.load?r():t(Oa(s,"network-request-failed"))},q_(`${eC()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw xh=null,e})}let xh=null;function uk(s){return xh=xh||ck(s),xh}const dk=new wu(5e3,15e3),hk="__/auth/iframe",fk="emulator/auth/iframe",mk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gk(s){const e=s.config;Ye(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?sg(e,fk):`https://${s.config.authDomain}/${hk}`,r={apiKey:e.apiKey,appName:s.name,v:xl},o=pk.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${vu(r).slice(1)}`}async function xk(s){const e=await uk(s),t=Pa().gapi;return Ye(t,s,"internal-error"),e.open({where:document.body,url:gk(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mk,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const d=Oa(s,"network-request-failed"),p=Pa().setTimeout(()=>{u(d)},dk.get());function g(){Pa().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{u(d)})}))}const bk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yk=500,vk=600,wk="_blank",_k="http://localhost";class uw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nk(s,e,t,r=yk,o=vk){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...bk,width:r.toString(),height:o.toString(),top:u,left:d},x=Kn().toLowerCase();t&&(p=O_(x)?wk:t),D_(x)&&(e=e||_k,g.scrollbars="yes");const b=Object.entries(g).reduce((E,[T,L])=>`${E}${T}=${L},`,"");if(H5(x)&&p!=="_self")return Ek(e||"",p),new uw(null);const w=window.open(e||"",p,b);Ye(w,s,"popup-blocked");try{w.focus()}catch{}return new uw(w)}function Ek(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const Sk="__/auth/handler",jk="emulator/auth/handler",Tk=encodeURIComponent("fac");async function dw(s,e,t,r,o,u){Ye(s.config.authDomain,s,"auth-domain-config-required"),Ye(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:xl,eventId:o};if(e instanceof H_){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",fA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))d[b]=w}if(e instanceof Nu){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),x=g?`#${Tk}=${encodeURIComponent(g)}`:"";return`${Ak(s)}?${vu(p).slice(1)}${x}`}function Ak({config:s}){return s.emulator?sg(s,jk):`https://${s.authDomain}/${Sk}`}const zp="webStorageSupport";class Ck{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Z_,this._completeRedirectFn=ZC,this._overrideRedirectResult=QC}async _openPopup(e,t,r,o){xr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await dw(e,t,r,d0(),o);return Nk(e,u,og())}async _openRedirect(e,t,r,o){await this._originValidation(e);const u=await dw(e,t,r,d0(),o);return IC(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(xr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await xk(e),r=new tk(e);return t.register("authEvent",o=>(Ye(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(zp,{type:zp},o=>{const u=o?.[0]?.[zp];u!==void 0&&t(!!u),ha(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ik(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return B_()||M_()||rg()}}const kk=Ck;var hw="@firebase/auth",fw="1.12.0";class Rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ik(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dk(s){ll(new di("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;Ye(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z_(s)},x=new X5(r,o,u,g);return lC(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ll(new di("auth-internal",e=>{const t=bl(e.getProvider("auth").getImmediate());return(r=>new Rk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ma(hw,fw,Ik(s)),Ma(hw,fw,"esm2020")}const Mk=300,Ok=b_("authIdTokenMaxAge")||Mk;let mw=null;const Pk=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ok)return;const o=t?.token;mw!==o&&(mw=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Vk(s=tg()){const e=nf(s,"auth");if(e.isInitialized())return e.getImmediate();const t=iC(s,{popupRedirectResolver:kk,persistence:[zC,CC,Z_]}),r=b_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const d=Pk(u.toString());EC(t,d,()=>d(t.currentUser)),NC(t,p=>d(p))}}const o=p_("auth");return o&&oC(t,`http://${o}`),t}function Lk(){return document.getElementsByTagName("head")?.[0]??document}J5({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Oa("internal-error");u.customData=o,t(u)},r.type="text/javascript",r.charset="UTF-8",Lk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dk("Browser");var Uk="firebase",Bk="12.8.0";Ma(Uk,Bk,"app");var pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oi,iN;(function(){var s;function e(j,A){function k(){}k.prototype=A.prototype,j.F=A.prototype,j.prototype=new k,j.prototype.constructor=j,j.D=function(U,M,F){for(var I=Array(arguments.length-2),q=2;q<arguments.length;q++)I[q-2]=arguments[q];return A.prototype[M].apply(U,I)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(j,A,k){k||(k=0);const U=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)U[M]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(M=0;M<16;++M)U[M]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=j.g[0],k=j.g[1],M=j.g[2];let F=j.g[3],I;I=A+(F^k&(M^F))+U[0]+3614090360&4294967295,A=k+(I<<7&4294967295|I>>>25),I=F+(M^A&(k^M))+U[1]+3905402710&4294967295,F=A+(I<<12&4294967295|I>>>20),I=M+(k^F&(A^k))+U[2]+606105819&4294967295,M=F+(I<<17&4294967295|I>>>15),I=k+(A^M&(F^A))+U[3]+3250441966&4294967295,k=M+(I<<22&4294967295|I>>>10),I=A+(F^k&(M^F))+U[4]+4118548399&4294967295,A=k+(I<<7&4294967295|I>>>25),I=F+(M^A&(k^M))+U[5]+1200080426&4294967295,F=A+(I<<12&4294967295|I>>>20),I=M+(k^F&(A^k))+U[6]+2821735955&4294967295,M=F+(I<<17&4294967295|I>>>15),I=k+(A^M&(F^A))+U[7]+4249261313&4294967295,k=M+(I<<22&4294967295|I>>>10),I=A+(F^k&(M^F))+U[8]+1770035416&4294967295,A=k+(I<<7&4294967295|I>>>25),I=F+(M^A&(k^M))+U[9]+2336552879&4294967295,F=A+(I<<12&4294967295|I>>>20),I=M+(k^F&(A^k))+U[10]+4294925233&4294967295,M=F+(I<<17&4294967295|I>>>15),I=k+(A^M&(F^A))+U[11]+2304563134&4294967295,k=M+(I<<22&4294967295|I>>>10),I=A+(F^k&(M^F))+U[12]+1804603682&4294967295,A=k+(I<<7&4294967295|I>>>25),I=F+(M^A&(k^M))+U[13]+4254626195&4294967295,F=A+(I<<12&4294967295|I>>>20),I=M+(k^F&(A^k))+U[14]+2792965006&4294967295,M=F+(I<<17&4294967295|I>>>15),I=k+(A^M&(F^A))+U[15]+1236535329&4294967295,k=M+(I<<22&4294967295|I>>>10),I=A+(M^F&(k^M))+U[1]+4129170786&4294967295,A=k+(I<<5&4294967295|I>>>27),I=F+(k^M&(A^k))+U[6]+3225465664&4294967295,F=A+(I<<9&4294967295|I>>>23),I=M+(A^k&(F^A))+U[11]+643717713&4294967295,M=F+(I<<14&4294967295|I>>>18),I=k+(F^A&(M^F))+U[0]+3921069994&4294967295,k=M+(I<<20&4294967295|I>>>12),I=A+(M^F&(k^M))+U[5]+3593408605&4294967295,A=k+(I<<5&4294967295|I>>>27),I=F+(k^M&(A^k))+U[10]+38016083&4294967295,F=A+(I<<9&4294967295|I>>>23),I=M+(A^k&(F^A))+U[15]+3634488961&4294967295,M=F+(I<<14&4294967295|I>>>18),I=k+(F^A&(M^F))+U[4]+3889429448&4294967295,k=M+(I<<20&4294967295|I>>>12),I=A+(M^F&(k^M))+U[9]+568446438&4294967295,A=k+(I<<5&4294967295|I>>>27),I=F+(k^M&(A^k))+U[14]+3275163606&4294967295,F=A+(I<<9&4294967295|I>>>23),I=M+(A^k&(F^A))+U[3]+4107603335&4294967295,M=F+(I<<14&4294967295|I>>>18),I=k+(F^A&(M^F))+U[8]+1163531501&4294967295,k=M+(I<<20&4294967295|I>>>12),I=A+(M^F&(k^M))+U[13]+2850285829&4294967295,A=k+(I<<5&4294967295|I>>>27),I=F+(k^M&(A^k))+U[2]+4243563512&4294967295,F=A+(I<<9&4294967295|I>>>23),I=M+(A^k&(F^A))+U[7]+1735328473&4294967295,M=F+(I<<14&4294967295|I>>>18),I=k+(F^A&(M^F))+U[12]+2368359562&4294967295,k=M+(I<<20&4294967295|I>>>12),I=A+(k^M^F)+U[5]+4294588738&4294967295,A=k+(I<<4&4294967295|I>>>28),I=F+(A^k^M)+U[8]+2272392833&4294967295,F=A+(I<<11&4294967295|I>>>21),I=M+(F^A^k)+U[11]+1839030562&4294967295,M=F+(I<<16&4294967295|I>>>16),I=k+(M^F^A)+U[14]+4259657740&4294967295,k=M+(I<<23&4294967295|I>>>9),I=A+(k^M^F)+U[1]+2763975236&4294967295,A=k+(I<<4&4294967295|I>>>28),I=F+(A^k^M)+U[4]+1272893353&4294967295,F=A+(I<<11&4294967295|I>>>21),I=M+(F^A^k)+U[7]+4139469664&4294967295,M=F+(I<<16&4294967295|I>>>16),I=k+(M^F^A)+U[10]+3200236656&4294967295,k=M+(I<<23&4294967295|I>>>9),I=A+(k^M^F)+U[13]+681279174&4294967295,A=k+(I<<4&4294967295|I>>>28),I=F+(A^k^M)+U[0]+3936430074&4294967295,F=A+(I<<11&4294967295|I>>>21),I=M+(F^A^k)+U[3]+3572445317&4294967295,M=F+(I<<16&4294967295|I>>>16),I=k+(M^F^A)+U[6]+76029189&4294967295,k=M+(I<<23&4294967295|I>>>9),I=A+(k^M^F)+U[9]+3654602809&4294967295,A=k+(I<<4&4294967295|I>>>28),I=F+(A^k^M)+U[12]+3873151461&4294967295,F=A+(I<<11&4294967295|I>>>21),I=M+(F^A^k)+U[15]+530742520&4294967295,M=F+(I<<16&4294967295|I>>>16),I=k+(M^F^A)+U[2]+3299628645&4294967295,k=M+(I<<23&4294967295|I>>>9),I=A+(M^(k|~F))+U[0]+4096336452&4294967295,A=k+(I<<6&4294967295|I>>>26),I=F+(k^(A|~M))+U[7]+1126891415&4294967295,F=A+(I<<10&4294967295|I>>>22),I=M+(A^(F|~k))+U[14]+2878612391&4294967295,M=F+(I<<15&4294967295|I>>>17),I=k+(F^(M|~A))+U[5]+4237533241&4294967295,k=M+(I<<21&4294967295|I>>>11),I=A+(M^(k|~F))+U[12]+1700485571&4294967295,A=k+(I<<6&4294967295|I>>>26),I=F+(k^(A|~M))+U[3]+2399980690&4294967295,F=A+(I<<10&4294967295|I>>>22),I=M+(A^(F|~k))+U[10]+4293915773&4294967295,M=F+(I<<15&4294967295|I>>>17),I=k+(F^(M|~A))+U[1]+2240044497&4294967295,k=M+(I<<21&4294967295|I>>>11),I=A+(M^(k|~F))+U[8]+1873313359&4294967295,A=k+(I<<6&4294967295|I>>>26),I=F+(k^(A|~M))+U[15]+4264355552&4294967295,F=A+(I<<10&4294967295|I>>>22),I=M+(A^(F|~k))+U[6]+2734768916&4294967295,M=F+(I<<15&4294967295|I>>>17),I=k+(F^(M|~A))+U[13]+1309151649&4294967295,k=M+(I<<21&4294967295|I>>>11),I=A+(M^(k|~F))+U[4]+4149444226&4294967295,A=k+(I<<6&4294967295|I>>>26),I=F+(k^(A|~M))+U[11]+3174756917&4294967295,F=A+(I<<10&4294967295|I>>>22),I=M+(A^(F|~k))+U[2]+718787259&4294967295,M=F+(I<<15&4294967295|I>>>17),I=k+(F^(M|~A))+U[9]+3951481745&4294967295,j.g[0]=j.g[0]+A&4294967295,j.g[1]=j.g[1]+(M+(I<<21&4294967295|I>>>11))&4294967295,j.g[2]=j.g[2]+M&4294967295,j.g[3]=j.g[3]+F&4294967295}r.prototype.v=function(j,A){A===void 0&&(A=j.length);const k=A-this.blockSize,U=this.C;let M=this.h,F=0;for(;F<A;){if(M==0)for(;F<=k;)o(this,j,F),F+=this.blockSize;if(typeof j=="string"){for(;F<A;)if(U[M++]=j.charCodeAt(F++),M==this.blockSize){o(this,U),M=0;break}}else for(;F<A;)if(U[M++]=j[F++],M==this.blockSize){o(this,U),M=0;break}}this.h=M,this.o+=A},r.prototype.A=function(){var j=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);j[0]=128;for(var A=1;A<j.length-8;++A)j[A]=0;A=this.o*8;for(var k=j.length-8;k<j.length;++k)j[k]=A&255,A/=256;for(this.v(j),j=Array(16),A=0,k=0;k<4;++k)for(let U=0;U<32;U+=8)j[A++]=this.g[k]>>>U&255;return j};function u(j,A){var k=p;return Object.prototype.hasOwnProperty.call(k,j)?k[j]:k[j]=A(j)}function d(j,A){this.h=A;const k=[];let U=!0;for(let M=j.length-1;M>=0;M--){const F=j[M]|0;U&&F==A||(k[M]=F,U=!1)}this.g=k}var p={};function g(j){return-128<=j&&j<128?u(j,function(A){return new d([A|0],A<0?-1:0)}):new d([j|0],j<0?-1:0)}function x(j){if(isNaN(j)||!isFinite(j))return w;if(j<0)return O(x(-j));const A=[];let k=1;for(let U=0;j>=k;U++)A[U]=j/k|0,k*=4294967296;return new d(A,0)}function b(j,A){if(j.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(j.charAt(0)=="-")return O(b(j.substring(1),A));if(j.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=x(Math.pow(A,8));let U=w;for(let F=0;F<j.length;F+=8){var M=Math.min(8,j.length-F);const I=parseInt(j.substring(F,F+M),A);M<8?(M=x(Math.pow(A,M)),U=U.j(M).add(x(I))):(U=U.j(k),U=U.add(x(I)))}return U}var w=g(0),E=g(1),T=g(16777216);s=d.prototype,s.m=function(){if(V(this))return-O(this).m();let j=0,A=1;for(let k=0;k<this.g.length;k++){const U=this.i(k);j+=(U>=0?U:4294967296+U)*A,A*=4294967296}return j},s.toString=function(j){if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(L(this))return"0";if(V(this))return"-"+O(this).toString(j);const A=x(Math.pow(j,6));var k=this;let U="";for(;;){const M=ie(k,A).g;k=B(k,M.j(A));let F=((k.g.length>0?k.g[0]:k.h)>>>0).toString(j);if(k=M,L(k))return F+U;for(;F.length<6;)F="0"+F;U=F+U}},s.i=function(j){return j<0?0:j<this.g.length?this.g[j]:this.h};function L(j){if(j.h!=0)return!1;for(let A=0;A<j.g.length;A++)if(j.g[A]!=0)return!1;return!0}function V(j){return j.h==-1}s.l=function(j){return j=B(this,j),V(j)?-1:L(j)?0:1};function O(j){const A=j.g.length,k=[];for(let U=0;U<A;U++)k[U]=~j.g[U];return new d(k,~j.h).add(E)}s.abs=function(){return V(this)?O(this):this},s.add=function(j){const A=Math.max(this.g.length,j.g.length),k=[];let U=0;for(let M=0;M<=A;M++){let F=U+(this.i(M)&65535)+(j.i(M)&65535),I=(F>>>16)+(this.i(M)>>>16)+(j.i(M)>>>16);U=I>>>16,F&=65535,I&=65535,k[M]=I<<16|F}return new d(k,k[k.length-1]&-2147483648?-1:0)};function B(j,A){return j.add(O(A))}s.j=function(j){if(L(this)||L(j))return w;if(V(this))return V(j)?O(this).j(O(j)):O(O(this).j(j));if(V(j))return O(this.j(O(j)));if(this.l(T)<0&&j.l(T)<0)return x(this.m()*j.m());const A=this.g.length+j.g.length,k=[];for(var U=0;U<2*A;U++)k[U]=0;for(U=0;U<this.g.length;U++)for(let M=0;M<j.g.length;M++){const F=this.i(U)>>>16,I=this.i(U)&65535,q=j.i(M)>>>16,D=j.i(M)&65535;k[2*U+2*M]+=I*D,Y(k,2*U+2*M),k[2*U+2*M+1]+=F*D,Y(k,2*U+2*M+1),k[2*U+2*M+1]+=I*q,Y(k,2*U+2*M+1),k[2*U+2*M+2]+=F*q,Y(k,2*U+2*M+2)}for(j=0;j<A;j++)k[j]=k[2*j+1]<<16|k[2*j];for(j=A;j<2*A;j++)k[j]=0;return new d(k,0)};function Y(j,A){for(;(j[A]&65535)!=j[A];)j[A+1]+=j[A]>>>16,j[A]&=65535,A++}function $(j,A){this.g=j,this.h=A}function ie(j,A){if(L(A))throw Error("division by zero");if(L(j))return new $(w,w);if(V(j))return A=ie(O(j),A),new $(O(A.g),O(A.h));if(V(A))return A=ie(j,O(A)),new $(O(A.g),A.h);if(j.g.length>30){if(V(j)||V(A))throw Error("slowDivide_ only works with positive integers.");for(var k=E,U=A;U.l(j)<=0;)k=he(k),U=he(U);var M=oe(k,1),F=oe(U,1);for(U=oe(U,2),k=oe(k,2);!L(U);){var I=F.add(U);I.l(j)<=0&&(M=M.add(k),F=I),U=oe(U,1),k=oe(k,1)}return A=B(j,M.j(A)),new $(M,A)}for(M=w;j.l(A)>=0;){for(k=Math.max(1,Math.floor(j.m()/A.m())),U=Math.ceil(Math.log(k)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),F=x(k),I=F.j(A);V(I)||I.l(j)>0;)k-=U,F=x(k),I=F.j(A);L(F)&&(F=E),M=M.add(F),j=B(j,I)}return new $(M,j)}s.B=function(j){return ie(this,j).h},s.and=function(j){const A=Math.max(this.g.length,j.g.length),k=[];for(let U=0;U<A;U++)k[U]=this.i(U)&j.i(U);return new d(k,this.h&j.h)},s.or=function(j){const A=Math.max(this.g.length,j.g.length),k=[];for(let U=0;U<A;U++)k[U]=this.i(U)|j.i(U);return new d(k,this.h|j.h)},s.xor=function(j){const A=Math.max(this.g.length,j.g.length),k=[];for(let U=0;U<A;U++)k[U]=this.i(U)^j.i(U);return new d(k,this.h^j.h)};function he(j){const A=j.g.length+1,k=[];for(let U=0;U<A;U++)k[U]=j.i(U)<<1|j.i(U-1)>>>31;return new d(k,j.h)}function oe(j,A){const k=A>>5;A%=32;const U=j.g.length-k,M=[];for(let F=0;F<U;F++)M[F]=A>0?j.i(F+k)>>>A|j.i(F+k+1)<<32-A:j.i(F+k);return new d(M,j.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,iN=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=b,oi=d}).apply(typeof pw<"u"?pw:typeof self<"u"?self:typeof window<"u"?window:{});var th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var lN,Gc,oN,bh,p0,cN,uN,dN;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof th=="object"&&th];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var _=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var Q=h[C];if(!(Q in _))break e;_=_[Q]}h=h[h.length-1],C=_[h],y=y(C),y!=C&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var _=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&_.push([C,y[C]]);return _}});var u=u||{},d=this||self;function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=g,x.apply(null,arguments)}function b(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var C=_.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function w(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(C,Q,ae){for(var je=Array(arguments.length-2),at=2;at<arguments.length;at++)je[at-2]=arguments[at];return y.prototype[Q].apply(C,je)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function T(h){const y=h.length;if(y>0){const _=Array(y);for(let C=0;C<y;C++)_[C]=h[C];return _}return[]}function L(h,y){for(let C=1;C<arguments.length;C++){const Q=arguments[C];var _=typeof Q;if(_=_!="object"?_:Q?Array.isArray(Q)?"array":_:"null",_=="array"||_=="object"&&typeof Q.length=="number"){_=h.length||0;const ae=Q.length||0;h.length=_+ae;for(let je=0;je<ae;je++)h[_+je]=Q[je]}else h.push(Q)}}class V{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(h){d.setTimeout(()=>{throw h},0)}function B(){var h=j;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Y{constructor(){this.h=this.g=null}add(y,_){const C=$.get();C.set(y,_),this.h?this.h.next=C:this.g=C,this.h=C}}var $=new V(()=>new ie,h=>h.reset());class ie{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let he,oe=!1,j=new Y,A=()=>{const h=Promise.resolve(void 0);he=()=>{h.then(k)}};function k(){for(var h;h=B();){try{h.h.call(h.g)}catch(_){O(_)}var y=$;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}oe=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function I(h){return/^[\s\xa0]*$/.test(h)}function q(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}w(q,M),q.prototype.init=function(h,y){const _=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&q.Z.h.call(this)},q.prototype.h=function(){q.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var D="closure_listenable_"+(Math.random()*1e6|0),R=0;function W(h,y,_,C,Q){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!C,this.ha=Q,this.key=++R,this.da=this.fa=!1}function le(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Te(h,y,_){for(const C in h)y.call(_,h[C],C,h)}function ve(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function P(h){const y={};for(const _ in h)y[_]=h[_];return y}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(h,y){let _,C;for(let Q=1;Q<arguments.length;Q++){C=arguments[Q];for(_ in C)h[_]=C[_];for(let ae=0;ae<J.length;ae++)_=J[ae],Object.prototype.hasOwnProperty.call(C,_)&&(h[_]=C[_])}}function xe(h){this.src=h,this.g={},this.h=0}xe.prototype.add=function(h,y,_,C,Q){const ae=h.toString();h=this.g[ae],h||(h=this.g[ae]=[],this.h++);const je=De(h,y,C,Q);return je>-1?(y=h[je],_||(y.fa=!1)):(y=new W(y,this.src,ae,!!C,Q),y.fa=_,h.push(y)),y};function be(h,y){const _=y.type;if(_ in h.g){var C=h.g[_],Q=Array.prototype.indexOf.call(C,y,void 0),ae;(ae=Q>=0)&&Array.prototype.splice.call(C,Q,1),ae&&(le(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function De(h,y,_,C){for(let Q=0;Q<h.length;++Q){const ae=h[Q];if(!ae.da&&ae.listener==y&&ae.capture==!!_&&ae.ha==C)return Q}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Ct={};function ft(h,y,_,C,Q){if(Array.isArray(y)){for(let ae=0;ae<y.length;ae++)ft(h,y[ae],_,C,Q);return null}return _=ct(_),h&&h[D]?h.J(y,_,p(C)?!!C.capture:!1,Q):dn(h,y,_,!1,C,Q)}function dn(h,y,_,C,Q,ae){if(!y)throw Error("Invalid event type");const je=p(Q)?!!Q.capture:!!Q;let at=Pe(h);if(at||(h[ze]=at=new xe(h)),_=at.add(y,_,C,je,ae),_.proxy)return _;if(C=ne(),_.proxy=C,C.src=h,C.listener=_,h.addEventListener)F||(Q=je),Q===void 0&&(Q=!1),h.addEventListener(y.toString(),C,Q);else if(h.attachEvent)h.attachEvent(Ae(y.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ne(){function h(_){return y.call(h.src,h.listener,_)}const y=Ce;return h}function _e(h,y,_,C,Q){if(Array.isArray(y))for(var ae=0;ae<y.length;ae++)_e(h,y[ae],_,C,Q);else C=p(C)?!!C.capture:!!C,_=ct(_),h&&h[D]?(h=h.i,ae=String(y).toString(),ae in h.g&&(y=h.g[ae],_=De(y,_,C,Q),_>-1&&(le(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[ae],h.h--)))):h&&(h=Pe(h))&&(y=h.g[y.toString()],h=-1,y&&(h=De(y,_,C,Q)),(_=h>-1?y[h]:null)&&ue(_))}function ue(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[D])be(y.i,h);else{var _=h.type,C=h.proxy;y.removeEventListener?y.removeEventListener(_,C,h.capture):y.detachEvent?y.detachEvent(Ae(_),C):y.addListener&&y.removeListener&&y.removeListener(C),(_=Pe(y))?(be(_,h),_.h==0&&(_.src=null,y[ze]=null)):le(h)}}}function Ae(h){return h in Ct?Ct[h]:Ct[h]="on"+h}function Ce(h,y){if(h.da)h=!0;else{y=new q(y,this);const _=h.listener,C=h.ha||h.src;h.fa&&ue(h),h=_.call(C,y)}return h}function Pe(h){return h=h[ze],h instanceof xe?h:null}var yt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ct(h){return typeof h=="function"?h:(h[yt]||(h[yt]=function(y){return h.handleEvent(y)}),h[yt])}function ut(){U.call(this),this.i=new xe(this),this.M=this,this.G=null}w(ut,U),ut.prototype[D]=!0,ut.prototype.removeEventListener=function(h,y,_,C){_e(this,h,y,_,C)};function ke(h,y){var _,C=h.G;if(C)for(_=[];C;C=C.G)_.push(C);if(h=h.M,C=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var Q=y;y=new M(C,h),ce(y,Q)}Q=!0;let ae,je;if(_)for(je=_.length-1;je>=0;je--)ae=y.g=_[je],Q=Ve(ae,C,!0,y)&&Q;if(ae=y.g=h,Q=Ve(ae,C,!0,y)&&Q,Q=Ve(ae,C,!1,y)&&Q,_)for(je=0;je<_.length;je++)ae=y.g=_[je],Q=Ve(ae,C,!1,y)&&Q}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let C=0;C<_.length;C++)le(_[C]);delete h.g[y],h.h--}}this.G=null},ut.prototype.J=function(h,y,_,C){return this.i.add(String(h),y,!1,_,C)},ut.prototype.K=function(h,y,_,C){return this.i.add(String(h),y,!0,_,C)};function Ve(h,y,_,C){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let Q=!0;for(let ae=0;ae<y.length;++ae){const je=y[ae];if(je&&!je.da&&je.capture==_){const at=je.listener,fn=je.ha||je.src;je.fa&&be(h.i,je),Q=at.call(fn,C)!==!1&&Q}}return Q&&!C.defaultPrevented}function ot(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Qt(h){h.g=ot(()=>{h.g=null,h.i&&(h.i=!1,Qt(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class _t extends U{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nt(h){U.call(this),this.h=h,this.g={}}w(Nt,U);var An=[];function kt(h){Te(h.g,function(y,_){this.g.hasOwnProperty(_)&&ue(y)},h),h.g={}}Nt.prototype.N=function(){Nt.Z.N.call(this),kt(this)},Nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=d.JSON.stringify,Fn=d.JSON.parse,ys=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ts(){}function Fa(){}var H={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function se(){M.call(this,"d")}w(se,M);function Ne(){M.call(this,"c")}w(Ne,M);var we={},$e=null;function Je(){return $e=$e||new ut}we.Ia="serverreachability";function qt(h){M.call(this,we.Ia,h)}w(qt,M);function Be(h){const y=Je();ke(y,new qt(y))}we.STAT_EVENT="statevent";function me(h,y){M.call(this,we.STAT_EVENT,h),this.stat=y}w(me,M);function Se(h){const y=Je();ke(y,new me(y,h))}we.Ja="timingevent";function Ke(h,y){M.call(this,we.Ja,h),this.size=y}w(Ke,M);function Ze(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Et(){this.g=!0}Et.prototype.ua=function(){this.g=!1};function Ue(h,y,_,C,Q,ae){h.info(function(){if(h.g)if(ae){var je="",at=ae.split("&");for(let Tt=0;Tt<at.length;Tt++){var fn=at[Tt].split("=");if(fn.length>1){const Xt=fn[0];fn=fn[1];const Bs=Xt.split("_");je=Bs.length>=2&&Bs[1]=="type"?je+(Xt+"="+fn+"&"):je+(Xt+"=redacted&")}}}else je=null;else je=ae;return"XMLHTTP REQ ("+C+") [attempt "+Q+"]: "+y+`
`+_+`
`+je})}function He(h,y,_,C,Q,ae,je){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+Q+"]: "+y+`
`+_+`
`+ae+" "+je})}function Dt(h,y,_,C){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+$n(h,_)+(C?" "+C:"")})}function sn(h,y){h.info(function(){return"TIMEOUT: "+y})}Et.prototype.info=function(){};function $n(h,y){if(!h.g)return y;if(!y)return null;try{const ae=JSON.parse(y);if(ae){for(h=0;h<ae.length;h++)if(Array.isArray(ae[h])){var _=ae[h];if(!(_.length<2)){var C=_[1];if(Array.isArray(C)&&!(C.length<1)){var Q=C[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let je=1;je<C.length;je++)C[je]=""}}}}return Qn(ae)}catch{return y}}var ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Js={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Si;function $a(){}w($a,ts),$a.prototype.g=function(){return new XMLHttpRequest},Si=new $a;function hn(h){return encodeURIComponent(String(h))}function ji(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function xn(h,y,_,C){this.j=h,this.i=y,this.l=_,this.S=C||1,this.V=new Nt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ss}function ss(){this.i=null,this.g="",this.h=!1}var an={},bn={};function vs(h,y,_){h.M=1,h.A=Ai(vn(y)),h.u=_,h.R=!0,Ti(h,null)}function Ti(h,y){h.F=Date.now(),pa(h),h.B=vn(h.A);var _=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),Sl(_.i,"t",C),h.C=0,_=h.j.L,h.h=new ss,h.g=Gu(h.j,_?y:null,!h.u),h.P>0&&(h.O=new _t(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,C=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(An[0]=Q.toString()),Q=An);for(let ae=0;ae<Q.length;ae++){const je=ft(_,Q[ae],C||y.handleEvent,!1,y.h||y);if(!je)break;y.g[je.key]=je}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Be(),Ue(h.i,h.v,h.B,h.l,h.S,h.u)}xn.prototype.ba=function(h){h=h.target;const y=this.O;y&&ta(h)==3?y.j():this.Y(h)},xn.prototype.Y=function(h){try{if(h==this.g)e:{const at=ta(this.g),fn=this.g.ya(),Tt=this.g.ca();if(!(at<3)&&(at!=3||this.g&&(this.h.h||this.g.la()||On(this.g)))){this.K||at!=4||fn==7||(fn==8||Tt<=0?Be(3):Be(2)),ga(this);var y=this.g.ca();this.X=y;var _=If(this);if(this.o=y==200,He(this.i,this.v,this.B,this.l,this.S,at,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,Q=this.g;if((C=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(C)){var ae=C;break t}}ae=null}if(h=ae)Dt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xa(this,h);else{this.o=!1,this.m=3,Se(12),ws(this),Vs(this);break e}}if(this.R){h=!0;let Xt;for(;!this.K&&this.C<_.length;)if(Xt=Du(this,_),Xt==bn){at==4&&(this.m=4,Se(14),h=!1),Dt(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==an){this.m=4,Se(15),Dt(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Dt(this.i,this.l,Xt,null),xa(this,Xt);if(Iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||_.length!=0||this.h.h||(this.m=1,Se(16),h=!1),this.o=this.o&&h,!h)Dt(this.i,this.l,_,"[Invalid Chunked Response]"),ws(this),Vs(this);else if(_.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Zo(je),je.P=!0,Se(11))}}else Dt(this.i,this.l,_,null),xa(this,_);at==4&&ws(this),this.o&&!this.K&&(at==4?qu(this.j,this):(this.o=!1,pa(this)))}else Ga(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Se(12)):(this.m=0,Se(13)),ws(this),Vs(this)}}}catch{}};function If(h){if(!Iu(h))return h.g.la();const y=On(h.g);if(y==="")return"";let _="";const C=y.length,Q=ta(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ws(h),Vs(h),"";h.h.i=new d.TextDecoder}for(let ae=0;ae<C;ae++)h.h.h=!0,_+=h.h.i.decode(y[ae],{stream:!(Q&&ae==C-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function Iu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Du(h,y){var _=h.C,C=y.indexOf(`
`,_);return C==-1?bn:(_=Number(y.substring(_,C)),isNaN(_)?an:(C+=1,C+_>y.length?bn:(y=y.slice(C,C+_),h.C=C+_,y)))}xn.prototype.cancel=function(){this.K=!0,ws(this)};function pa(h){h.T=Date.now()+h.H,_l(h,h.H)}function _l(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ze(x(h.aa,h),y)}function ga(h){h.D&&(d.clearTimeout(h.D),h.D=null)}xn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(sn(this.i,this.B),this.M!=2&&(Be(),Se(17)),ws(this),this.m=2,Vs(this)):_l(this,this.T-h)};function Vs(h){h.j.I==0||h.K||qu(h.j,h)}function ws(h){ga(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,kt(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function xa(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||ya(_.h,h))){if(!h.L&&ya(_.h,h)&&_.I==3){try{var C=_.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var Q=C;if(Q[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)kl(_),Cr(_);else break e;Oi(_),Se(18)}}else _.xa=Q[1],0<_.xa-_.K&&Q[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Ze(x(_.Va,_),6e3));ba(_.h)<=1&&_.ta&&(_.ta=void 0)}else Sa(_,11)}else if((h.L||_.g==h)&&kl(_),!I(y))for(Q=_.Ba.g.parse(y),y=0;y<Q.length;y++){let Tt=Q[y];const Xt=Tt[0];if(!(Xt<=_.K))if(_.K=Xt,Tt=Tt[1],_.I==2)if(Tt[0]=="c"){_.M=Tt[1],_.ba=Tt[2];const Bs=Tt[3];Bs!=null&&(_.ka=Bs,_.j.info("VER="+_.ka));const ja=Tt[4];ja!=null&&(_.za=ja,_.j.info("SVER="+_.za));const na=Tt[5];na!=null&&typeof na=="number"&&na>0&&(C=1.5*na,_.O=C,_.j.info("backChannelRequestTimeoutMs_="+C)),C=_;const sa=h.g;if(sa){const Pi=sa.g?sa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var ae=C.h;ae.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(zo(ae,ae.h),ae.h=null))}if(C.G){const Rl=sa.g?sa.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(C.wa=Rl,Mt(C.J,C.G,Rl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),C=_;var je=h;if(C.na=Hu(C,C.L?C.ba:null,C.W),je.L){qo(C.h,je);var at=je,fn=C.O;fn&&(at.H=fn),at.D&&(ga(at),pa(at)),C.g=je}else Bu(C);_.i.length>0&&Ea(_)}else Tt[0]!="stop"&&Tt[0]!="close"||Sa(_,7);else _.I==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?Sa(_,7):Xo(_):Tt[0]!="noop"&&_.l&&_.l.qa(Tt),_.A=0)}}Be(4)}catch{}}var yn=class{constructor(h,y){this.g=h,this.map=y}};function Uo(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ba(h){return h.h?1:h.g?h.g.size:0}function ya(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function zo(h,y){h.g?h.g.add(y):h.h=y}function qo(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Uo.prototype.cancel=function(){if(this.i=Fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Fo(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return T(h.i)}var Mu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nl(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const C=h[_].indexOf("=");let Q,ae=null;C>=0?(Q=h[_].substring(0,C),ae=h[_].substring(C+1)):Q=h[_],y(Q,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function _s(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof _s?(this.l=h.l,In(this,h.j),this.o=h.o,this.g=h.g,_r(this,h.u),this.h=h.h,$o(this,Lu(h.i)),this.m=h.m):h&&(y=String(h).match(Mu))?(this.l=!1,In(this,y[1]||"",!0),this.o=va(y[2]||""),this.g=va(y[3]||"",!0),_r(this,y[4]),this.h=va(y[5]||"",!0),$o(this,y[6]||"",!0),this.m=va(y[7]||"")):(this.l=!1,this.i=new Er(null,this.l))}_s.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ci(y,El,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ci(y,El,!0),"@"),h.push(hn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Ci(_,_.charAt(0)=="/"?Ho:Ou,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Ci(_,Pu)),h.join("")},_s.prototype.resolve=function(h){const y=vn(this);let _=!!h.j;_?In(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var C=h.h;if(_)_r(y,h.u);else if(_=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var Q=y.h.lastIndexOf("/");Q!=-1&&(C=y.h.slice(0,Q+1)+C)}if(Q=C,Q==".."||Q==".")C="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){C=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ae=[];for(let je=0;je<Q.length;){const at=Q[je++];at=="."?C&&je==Q.length&&ae.push(""):at==".."?((ae.length>1||ae.length==1&&ae[0]!="")&&ae.pop(),C&&je==Q.length&&ae.push("")):(ae.push(at),C=!0)}C=ae.join("/")}else C=Q}return _?y.h=C:_=h.i.toString()!=="",_?$o(y,Lu(h.i)):_=!!h.m,_&&(y.m=h.m),y};function vn(h){return new _s(h)}function In(h,y,_){h.j=_?va(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function _r(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function $o(h,y,_){y instanceof Er?(h.i=y,jl(h.i,h.l)):(_||(y=Ci(y,Nr)),h.i=new Er(y,h.l))}function Mt(h,y,_){h.i.set(y,_)}function Ai(h){return Mt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function va(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ci(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,as),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function as(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var El=/[#\/\?@]/g,Ou=/[#\?:]/g,Ho=/[#\?]/g,Nr=/[#\?@]/g,Pu=/#/g;function Er(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function rs(h){h.g||(h.g=new Map,h.h=0,h.i&&Nl(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}s=Er.prototype,s.add=function(h,y){rs(this),this.i=null,h=Sr(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Vu(h,y){rs(h),y=Sr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Go(h,y){return rs(h),y=Sr(h,y),h.g.has(y)}s.forEach=function(h,y){rs(this),this.g.forEach(function(_,C){_.forEach(function(Q){h.call(y,Q,C,this)},this)},this)};function Yo(h,y){rs(h);let _=[];if(typeof y=="string")Go(h,y)&&(_=_.concat(h.g.get(Sr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}s.set=function(h,y){return rs(this),this.i=null,h=Sr(this,h),Go(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Yo(this,h),h.length>0?String(h[0]):y):y};function Sl(h,y,_){Vu(h,y),_.length>0&&(h.i=null,h.g.set(Sr(h,y),T(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var _=y[C];const Q=hn(_);_=Yo(this,_);for(let ae=0;ae<_.length;ae++){let je=Q;_[ae]!==""&&(je+="="+hn(_[ae])),h.push(je)}}return this.i=h.join("&")};function Lu(h){const y=new Er;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Sr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function jl(h,y){y&&!h.j&&(rs(h),h.i=null,h.g.forEach(function(_,C){const Q=C.toLowerCase();C!=Q&&(Vu(this,C),Sl(this,Q,_))},h)),h.j=y}function Zs(h,y){const _=new Et;if(d.Image){const C=new Image;C.onload=b(Ls,_,"TestLoadImage: loaded",!0,y,C),C.onerror=b(Ls,_,"TestLoadImage: error",!1,y,C),C.onabort=b(Ls,_,"TestLoadImage: abort",!1,y,C),C.ontimeout=b(Ls,_,"TestLoadImage: timeout",!1,y,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else y(!1)}function Wo(h,y){const _=new Et,C=new AbortController,Q=setTimeout(()=>{C.abort(),Ls(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:C.signal}).then(ae=>{clearTimeout(Q),ae.ok?Ls(_,"TestPingServer: ok",!0,y):Ls(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Q),Ls(_,"TestPingServer: error",!1,y)})}function Ls(h,y,_,C,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),C(_)}catch{}}function jr(){this.g=new ys}function wa(h){this.i=h.Sb||null,this.h=h.ab||!1}w(wa,ts),wa.prototype.g=function(){return new ki(this.i,this.h)};function ki(h,y){ut.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(ki,ut),s=ki.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ea(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Tl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Tl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Tr(this):ea(this),this.readyState==3&&Tl(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Tr(this))},s.Na=function(h){this.g&&(this.response=h,Tr(this))},s.ga=function(){this.g&&Tr(this)};function Tr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ea(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function ea(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Us(h){let y="";return Te(h,function(_,C){y+=C,y+=":",y+=_,y+=`\r
`}),y}function Ri(h,y,_){e:{for(C in _){var C=!1;break e}C=!0}C||(_=Us(_),typeof h=="string"?_!=null&&hn(_):Mt(h,y,_))}function Lt(h){ut.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Lt,ut);var _a=/^https?$/i,Ko=["POST","PUT"];s=Lt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,_,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Si.g(),this.g.onreadystatechange=E(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ae){Ii(this,ae);return}if(h=_||"",_=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var Q in C)_.set(Q,C[Q]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ae of C.keys())_.set(ae,C.get(ae));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(_.keys()).find(ae=>ae.toLowerCase()=="content-type"),Q=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Ko,y,void 0)>=0)||C||Q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,je]of _)this.g.setRequestHeader(ae,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ae){Ii(this,ae)}};function Ii(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Qo(h),Ha(h)}function Qo(h){h.A||(h.A=!0,ke(h,"complete"),ke(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ke(this,"complete"),ke(this,"abort"),Ha(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ha(this,!0)),Lt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Di(this):this.Xa())},s.Xa=function(){Di(this)};function Di(h){if(h.h&&typeof u<"u"){if(h.v&&ta(h)==4)setTimeout(h.Ca.bind(h),0);else if(ke(h,"readystatechange"),ta(h)==4){h.h=!1;try{const ae=h.ca();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var C;if(C=ae===0){let je=String(h.D).match(Mu)[1]||null;!je&&d.self&&d.self.location&&(je=d.self.location.protocol.slice(0,-1)),C=!_a.test(je?je.toLowerCase():"")}_=C}if(_)ke(h,"complete"),ke(h,"success");else{h.o=6;try{var Q=ta(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",Qo(h)}}finally{Ha(h)}}}}function Ha(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||ke(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ta(h){return h.g?h.g.readyState:0}s.ca=function(){try{return ta(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Fn(y)}};function On(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ga(h){const y={};h=(h.g&&ta(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(I(h[C]))continue;var _=ji(h[C]);const Q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ae=y[Q]||[];y[Q]=ae,ae.push(_)}ve(y,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Na(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function Ar(h){this.za=0,this.i=[],this.j=new Et,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Na("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Na("baseRetryDelayMs",5e3,h),this.Za=Na("retryDelaySeedMs",1e4,h),this.Ta=Na("forwardChannelMaxRetries",2,h),this.va=Na("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Uo(h&&h.concurrentRequestLimit),this.Ba=new jr,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ar.prototype,s.ka=8,s.I=1,s.connect=function(h,y,_,C){Se(0),this.W=h,this.H=y||{},_&&C!==void 0&&(this.H.OSID=_,this.H.OAID=C),this.F=this.X,this.J=Hu(this,null,this.W),Ea(this)};function Xo(h){if(Al(h),h.I==3){var y=h.V++,_=vn(h.J);if(Mt(_,"SID",h.M),Mt(_,"RID",y),Mt(_,"TYPE","terminate"),Mi(h,_),y=new xn(h,h.j,y),y.M=2,y.A=Ai(vn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=Gu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),pa(y)}$u(h)}function Cr(h){h.g&&(Zo(h),h.g.cancel(),h.g=null)}function Al(h){Cr(h),h.v&&(d.clearTimeout(h.v),h.v=null),kl(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Ea(h){if(!Bo(h.h)&&!h.m){h.m=!0;var y=h.Ea;he||A(),oe||(he(),oe=!0),j.add(y,h),h.D=0}}function Cl(h,y){return ba(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ze(x(h.Ea,h,y),Fu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new xn(this,this.j,h);let ae=this.o;if(this.U&&(ae?(ae=P(ae),ce(ae,this.U)):ae=this.U),this.u!==null||this.R||(Q.J=ae,ae=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var C=this.i[_];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Uu(this,Q,y),_=vn(this.J),Mt(_,"RID",h),Mt(_,"CVER",22),this.G&&Mt(_,"X-HTTP-Session-Id",this.G),Mi(this,_),ae&&(this.R?y="headers="+hn(Us(ae))+"&"+y:this.u&&Ri(_,this.u,ae)),zo(this.h,Q),this.Ra&&Mt(_,"TYPE","init"),this.S?(Mt(_,"$req",y),Mt(_,"SID","null"),Q.U=!0,vs(Q,_,null)):vs(Q,_,y),this.I=2}}else this.I==3&&(h?Jo(this,h):this.i.length==0||Bo(this.h)||Jo(this))};function Jo(h,y){var _;y?_=y.l:_=h.V++;const C=vn(h.J);Mt(C,"SID",h.M),Mt(C,"RID",_),Mt(C,"AID",h.K),Mi(h,C),h.u&&h.o&&Ri(C,h.u,h.o),_=new xn(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Uu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),zo(h.h,_),vs(_,C,y)}function Mi(h,y){h.H&&Te(h.H,function(_,C){Mt(y,C,_)}),h.l&&Te({},function(_,C){Mt(y,C,_)})}function Uu(h,y,_){_=Math.min(h.i.length,_);const C=h.l?x(h.l.Ka,h.l,h):null;e:{var Q=h.i;let at=-1;for(;;){const fn=["count="+_];at==-1?_>0?(at=Q[0].g,fn.push("ofs="+at)):at=0:fn.push("ofs="+at);let Tt=!0;for(let Xt=0;Xt<_;Xt++){var ae=Q[Xt].g;const Bs=Q[Xt].map;if(ae-=at,ae<0)at=Math.max(0,Q[Xt].g-100),Tt=!1;else try{ae="req"+ae+"_"||"";try{var je=Bs instanceof Map?Bs:Object.entries(Bs);for(const[ja,na]of je){let sa=na;p(na)&&(sa=Qn(na)),fn.push(ae+ja+"="+encodeURIComponent(sa))}}catch(ja){throw fn.push(ae+"type="+encodeURIComponent("_badmap")),ja}}catch{C&&C(Bs)}}if(Tt){je=fn.join("&");break e}}je=void 0}return h=h.i.splice(0,_),y.G=h,je}function Bu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;he||A(),oe||(he(),oe=!0),j.add(y,h),h.A=0}}function Oi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ze(x(h.Da,h),Fu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,zu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ze(x(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Se(10),Cr(this),zu(this))};function Zo(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function zu(h){h.g=new xn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=vn(h.na);Mt(y,"RID","rpc"),Mt(y,"SID",h.M),Mt(y,"AID",h.K),Mt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Mt(y,"TO",h.ia),Mt(y,"TYPE","xmlhttp"),Mi(h,y),h.u&&h.o&&Ri(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=Ai(vn(y)),_.u=null,_.R=!0,Ti(_,h)}s.Va=function(){this.C!=null&&(this.C=null,Cr(this),Oi(this),Se(19))};function kl(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function qu(h,y){var _=null;if(h.g==y){kl(h),Zo(h),h.g=null;var C=2}else if(ya(h.h,y))_=y.G,qo(h.h,y),C=1;else return;if(h.I!=0){if(y.o)if(C==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var Q=h.D;C=Je(),ke(C,new Ke(C,_)),Ea(h)}else Bu(h);else if(Q=y.m,Q==3||Q==0&&y.X>0||!(C==1&&Cl(h,y)||C==2&&Oi(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),Q){case 1:Sa(h,5);break;case 4:Sa(h,10);break;case 3:Sa(h,6);break;default:Sa(h,2)}}}function Fu(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function Sa(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),C=h.Ua;const Q=!C;C=new _s(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||In(C,"https"),Ai(C),Q?Zs(C.toString(),_):Wo(C.toString(),_)}else Se(2);h.I=0,h.l&&h.l.pa(y),$u(h),Al(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))};function $u(h){if(h.I=0,h.ja=[],h.l){const y=Fo(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ja,y),L(h.ja,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.oa()}}function Hu(h,y,_){var C=_ instanceof _s?vn(_):new _s(_);if(C.g!="")y&&(C.g=y+"."+C.g),_r(C,C.u);else{var Q=d.location;C=Q.protocol,y=y?y+"."+Q.hostname:Q.hostname,Q=+Q.port;const ae=new _s(null);C&&In(ae,C),y&&(ae.g=y),Q&&_r(ae,Q),_&&(ae.h=_),C=ae}return _=h.G,y=h.wa,_&&y&&Mt(C,_,y),Mt(C,"VER",h.ka),Mi(h,C),C}function Gu(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Lt(new wa({ab:_})):new Lt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yu(){}s=Yu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function kr(){}kr.prototype.g=function(h,y){return new Xn(h,y)};function Xn(h,y){ut.call(this),this.g=new Ar(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!I(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!I(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ya(this)}w(Xn,ut),Xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xn.prototype.close=function(){Xo(this.g)},Xn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Qn(h),h=_);y.i.push(new yn(y.Ya++,h)),y.I==3&&Ea(y)},Xn.prototype.N=function(){this.g.l=null,delete this.j,Xo(this.g),delete this.g,Xn.Z.N.call(this)};function Wu(h){se.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}w(Wu,se);function Ku(){Ne.call(this),this.status=1}w(Ku,Ne);function Ya(h){this.g=h}w(Ya,Yu),Ya.prototype.ra=function(){ke(this.g,"a")},Ya.prototype.qa=function(h){ke(this.g,new Wu(h))},Ya.prototype.pa=function(h){ke(this.g,new Ku)},Ya.prototype.oa=function(){ke(this.g,"b")},kr.prototype.createWebChannel=kr.prototype.g,Xn.prototype.send=Xn.prototype.o,Xn.prototype.open=Xn.prototype.m,Xn.prototype.close=Xn.prototype.close,dN=function(){return new kr},uN=function(){return Je()},cN=we,p0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,bh=ns,Js.COMPLETE="complete",oN=Js,Fa.EventType=H,H.OPEN="a",H.CLOSE="b",H.ERROR="c",H.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Gc=Fa,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,lN=Lt}).apply(typeof th<"u"?th:typeof self<"u"?self:typeof window<"u"?window:{});let Yn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");let Oo="12.8.0";function zk(s){Oo=s}const ul=new Z0("@firebase/firestore");function lo(){return ul.logLevel}function Me(s,...e){if(ul.logLevel<=gt.DEBUG){const t=e.map(ug);ul.debug(`Firestore (${Oo}): ${s}`,...t)}}function br(s,...e){if(ul.logLevel<=gt.ERROR){const t=e.map(ug);ul.error(`Firestore (${Oo}): ${s}`,...t)}}function _o(s,...e){if(ul.logLevel<=gt.WARN){const t=e.map(ug);ul.warn(`Firestore (${Oo}): ${s}`,...t)}}function ug(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function We(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,hN(s,r,t)}function hN(s,e,t){let r=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw br(r),new Error(r)}function It(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||hN(e,o,r)}function nt(s,e){return s}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends qa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class mr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class fN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yn.UNAUTHENTICATED)))}shutdown(){}}class Fk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $k{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){It(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let u=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new mr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new mr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new fN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new Yn(e)}}class Hk{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Gk{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Hk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ks(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){It(this.o===void 0,3512);const r=u=>{u.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(It(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new gw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Wk(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class dg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Wk(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%62))}return r}}function xt(s,e){return s<e?-1:s>e?1:0}function g0(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return qp(o)===qp(u)?xt(o,u):qp(o)?1:-1}return xt(s.length,e.length)}const Kk=55296,Qk=57343;function qp(s){const e=s.charCodeAt(0);return e>=Kk&&e<=Qk}function No(s,e,t){return s.length===e.length&&s.every(((r,o)=>t(r,e[o])))}const xw="__name__";class Ra{constructor(e,t,r){t===void 0?t=0:t>e.length&&We(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&We(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ra.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ra?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=Ra.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return xt(e.length,t.length)}static compareSegments(e,t){const r=Ra.isNumericId(e),o=Ra.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Ra.extractNumericId(e).compare(Ra.extractNumericId(t)):g0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oi.fromString(e.substring(4,e.length-2))}}class Yt extends Ra{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Yt(t)}static emptyPath(){return new Yt([])}}const Xk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Ra{construct(e,t,r){return new zn(e,t,r)}static isValidIdentifier(e){return Xk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xw}static keyField(){return new zn([xw])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(r.length===0)throw new Re(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Re(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Re(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(r+=p,o++):(u(),o++)}if(u(),d)throw new Re(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}class Fe{constructor(e){this.path=e}static fromPath(e){return new Fe(Yt.fromString(e))}static fromName(e){return new Fe(Yt.fromString(e).popFirst(5))}static empty(){return new Fe(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Fe(new Yt(e.slice()))}}function mN(s,e,t){if(!t)throw new Re(ge.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Jk(s,e,t,r){if(e===!0&&r===!0)throw new Re(ge.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function bw(s){if(!Fe.isDocumentKey(s))throw new Re(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function yw(s){if(Fe.isDocumentKey(s))throw new Re(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function pN(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function lf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":We(12329,{type:typeof s})}function ps(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Re(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lf(s);throw new Re(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function Tn(s,e){const t={typeString:s};return e&&(t.value=e),t}function Su(s,e){if(!pN(s))throw new Re(ge.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const d=s[r];if(o&&typeof d!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new Re(ge.INVALID_ARGUMENT,t);return!0}const vw=-62135596800,ww=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*ww);return new Rt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<vw)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ww}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-vw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:Tn("string",Rt._jsonSchemaVersion),seconds:Tn("number"),nanoseconds:Tn("number")};class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Rt(0,0))}static max(){return new Xe(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const cu=-1;function Zk(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Xe.fromTimestamp(r===1e9?new Rt(t+1,0):new Rt(t,r));return new hi(o,Fe.empty(),e)}function eR(s){return new hi(s.readTime,s.key,cu)}class hi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hi(Xe.min(),Fe.empty(),cu)}static max(){return new hi(Xe.max(),Fe.empty(),cu)}}function tR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Fe.comparator(s.documentKey,e.documentKey),t!==0?t:xt(s.largestBatchId,e.largestBatchId))}const nR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Po(s){if(s.code!==ge.FAILED_PRECONDITION||s.message!==nR)throw s;Me("LocalStore","Unexpectedly lost primary lease")}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ye.reject(t)}static resolve(e){return new ye(((t,r)=>{t(e)}))}static reject(e){return new ye(((t,r)=>{r(e)}))}static waitFor(e){return new ye(((t,r)=>{let o=0,u=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++u,d&&u===o&&t()}),(g=>r(g)))})),d=!0,u===o&&t()}))}static or(e){let t=ye.resolve(!1);for(const r of e)t=t.next((o=>o?ye.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,u)=>{r.push(t.call(this,o,u))})),this.waitFor(r)}static mapArray(e,t){return new ye(((r,o)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const x=g;t(e[x]).next((b=>{d[x]=b,++p,p===u&&r(d)}),(b=>o(b)))}}))}static doWhile(e,t){return new ye(((r,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):r()};u()}))}}function aR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vo(s){return s.name==="IndexedDbTransactionError"}class of{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}of.ce=-1;const hg=-1;function cf(s){return s==null}function Vh(s){return s===0&&1/s==-1/0}function rR(s){return typeof s=="number"&&Number.isInteger(s)&&!Vh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const gN="";function iR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=_w(e)),e=lR(s.get(t),e);return _w(e)}function lR(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case gN:t+="";break;default:t+=u}}return t}function _w(s){return s+gN+""}function Nw(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Ni(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function xN(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class nn{constructor(e,t){this.comparator=e,this.root=t||Bn.EMPTY}insert(e,t){return new nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nh(this.root,e,this.comparator,!0)}}class nh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Bn.RED,this.left=o??Bn.EMPTY,this.right=u??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Bn(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Bn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,t,r,o,u){return this}insert(e,t,r){return new Bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ew(this.data.getIterator())}getIteratorFrom(e){return new Ew(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class Ew{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Rs{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Rs([])}unionWith(e){let t=new Rn(zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Rs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class bN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new bN("Invalid base64 string: "+u):u}})(e);return new qn(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const oR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(s){if(It(!!s,39018),typeof s=="string"){let e=0;const t=oR.exec(s);if(It(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gn(s.seconds),nanos:gn(s.nanos)}}function gn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function mi(s){return typeof s=="string"?qn.fromBase64String(s):qn.fromUint8Array(s)}const yN="server_timestamp",vN="__type__",wN="__previous_value__",_N="__local_write_time__";function fg(s){return(s?.mapValue?.fields||{})[vN]?.stringValue===yN}function uf(s){const e=s.mapValue.fields[wN];return fg(e)?uf(e):e}function uu(s){const e=fi(s.mapValue.fields[_N].timestampValue);return new Rt(e.seconds,e.nanos)}class cR{constructor(e,t,r,o,u,d,p,g,x,b,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=b,this.apiKey=w}}const Lh="(default)";class du{constructor(e,t){this.projectId=e,this.database=t||Lh}static empty(){return new du("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}function uR(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Re(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(s.options.projectId,e)}const NN="__type__",dR="__max__",sh={mapValue:{}},EN="__vector__",Uh="value";function pi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?fg(s)?4:fR(s)?9007199254740991:hR(s)?10:11:We(28295,{value:s})}function za(s,e){if(s===e)return!0;const t=pi(s);if(t!==pi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return uu(s).isEqual(uu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=fi(o.timestampValue),p=fi(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return mi(o.bytesValue).isEqual(mi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return gn(o.geoPointValue.latitude)===gn(u.geoPointValue.latitude)&&gn(o.geoPointValue.longitude)===gn(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return gn(o.integerValue)===gn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=gn(o.doubleValue),p=gn(u.doubleValue);return d===p?Vh(d)===Vh(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return No(s.arrayValue.values||[],e.arrayValue.values||[],za);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},p=u.mapValue.fields||{};if(Nw(d)!==Nw(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!za(d[g],p[g])))return!1;return!0})(s,e);default:return We(52216,{left:s})}}function hu(s,e){return(s.values||[]).find((t=>za(t,e)))!==void 0}function Eo(s,e){if(s===e)return 0;const t=pi(s),r=pi(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=gn(u.integerValue||u.doubleValue),g=gn(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return Sw(s.timestampValue,e.timestampValue);case 4:return Sw(uu(s),uu(e));case 5:return g0(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=mi(u),g=mi(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let x=0;x<p.length&&x<g.length;x++){const b=xt(p[x],g[x]);if(b!==0)return b}return xt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=xt(gn(u.latitude),gn(d.latitude));return p!==0?p:xt(gn(u.longitude),gn(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return jw(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},x=p[Uh]?.arrayValue,b=g[Uh]?.arrayValue,w=xt(x?.values?.length||0,b?.values?.length||0);return w!==0?w:jw(x,b)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===sh.mapValue&&d===sh.mapValue)return 0;if(u===sh.mapValue)return 1;if(d===sh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),x=d.fields||{},b=Object.keys(x);g.sort(),b.sort();for(let w=0;w<g.length&&w<b.length;++w){const E=g0(g[w],b[w]);if(E!==0)return E;const T=Eo(p[g[w]],x[b[w]]);if(T!==0)return T}return xt(g.length,b.length)})(s.mapValue,e.mapValue);default:throw We(23264,{he:t})}}function Sw(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return xt(s,e);const t=fi(s),r=fi(e),o=xt(t.seconds,r.seconds);return o!==0?o:xt(t.nanos,r.nanos)}function jw(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const u=Eo(t[o],r[o]);if(u)return u}return xt(t.length,r.length)}function So(s){return x0(s)}function x0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=fi(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return mi(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Fe.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",o=!0;for(const u of t.values||[])o?o=!1:r+=",",r+=x0(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const d of r)u?u=!1:o+=",",o+=`${d}:${x0(t.fields[d])}`;return o+"}"})(s.mapValue):We(61005,{value:s})}function yh(s){switch(pi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uf(s);return e?16+yh(e):16;case 5:return 2*s.stringValue.length;case 6:return mi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+yh(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Ni(r.fields,((u,d)=>{o+=u.length+yh(d)})),o})(s.mapValue);default:throw We(13486,{value:s})}}function Tw(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function b0(s){return!!s&&"integerValue"in s}function mg(s){return!!s&&"arrayValue"in s}function Aw(s){return!!s&&"nullValue"in s}function Cw(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vh(s){return!!s&&"mapValue"in s}function hR(s){return(s?.mapValue?.fields||{})[NN]?.stringValue===EN}function Zc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Ni(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Zc(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zc(s.arrayValue.values[t]);return e}return{...s}}function fR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===dR}class hs{constructor(e){this.value=e}static empty(){return new hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!vh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zc(t)}setAll(e){let t=zn.emptyPath(),r={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=p.popLast()}d?r[p.lastSegment()]=Zc(d):o.push(p.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());vh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return za(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ni(t,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new hs(Zc(this.value))}}function SN(s){const e=[];return Ni(s.fields,((t,r)=>{const o=new zn([t]);if(vh(r)){const u=SN(r.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Rs(e)}class Wn{constructor(e,t,r,o,u,d,p){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Wn(e,0,Xe.min(),Xe.min(),Xe.min(),hs.empty(),0)}static newFoundDocument(e,t,r,o){return new Wn(e,1,t,Xe.min(),r,o,0)}static newNoDocument(e,t){return new Wn(e,2,t,Xe.min(),Xe.min(),hs.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,Xe.min(),Xe.min(),hs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bh{constructor(e,t){this.position=e,this.inclusive=t}}function kw(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?r=Fe.comparator(Fe.fromName(d.referenceValue),t.key):r=Eo(d,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rw(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!za(s.position[t],e.position[t]))return!1;return!0}class zh{constructor(e,t="asc"){this.field=e,this.dir=t}}function mR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class jN{}class jn extends jN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new gR(e,t,r):t==="array-contains"?new yR(e,r):t==="in"?new vR(e,r):t==="not-in"?new wR(e,r):t==="array-contains-any"?new _R(e,r):new jn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new xR(e,r):new bR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Eo(t,this.value)):t!==null&&pi(this.value)===pi(t)&&this.matchesComparison(Eo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fa extends jN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fa(e,t)}matches(e){return TN(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function TN(s){return s.op==="and"}function AN(s){return pR(s)&&TN(s)}function pR(s){for(const e of s.filters)if(e instanceof fa)return!1;return!0}function y0(s){if(s instanceof jn)return s.field.canonicalString()+s.op.toString()+So(s.value);if(AN(s))return s.filters.map((e=>y0(e))).join(",");{const e=s.filters.map((t=>y0(t))).join(",");return`${s.op}(${e})`}}function CN(s,e){return s instanceof jn?(function(r,o){return o instanceof jn&&r.op===o.op&&r.field.isEqual(o.field)&&za(r.value,o.value)})(s,e):s instanceof fa?(function(r,o){return o instanceof fa&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,d,p)=>u&&CN(d,o.filters[p])),!0):!1})(s,e):void We(19439)}function kN(s){return s instanceof jn?(function(t){return`${t.field.canonicalString()} ${t.op} ${So(t.value)}`})(s):s instanceof fa?(function(t){return t.op.toString()+" {"+t.getFilters().map(kN).join(" ,")+"}"})(s):"Filter"}class gR extends jn{constructor(e,t,r){super(e,t,r),this.key=Fe.fromName(r.referenceValue)}matches(e){const t=Fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class xR extends jn{constructor(e,t){super(e,"in",t),this.keys=RN("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class bR extends jn{constructor(e,t){super(e,"not-in",t),this.keys=RN("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function RN(s,e){return(e.arrayValue?.values||[]).map((t=>Fe.fromName(t.referenceValue)))}class yR extends jn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mg(t)&&hu(t.arrayValue,this.value)}}class vR extends jn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hu(this.value.arrayValue,t)}}class wR extends jn{constructor(e,t){super(e,"not-in",t)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hu(this.value.arrayValue,t)}}class _R extends jn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>hu(this.value.arrayValue,r)))}}class NR{constructor(e,t=null,r=[],o=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function Iw(s,e=null,t=[],r=[],o=null,u=null,d=null){return new NR(s,e,t,r,o,u,d)}function pg(s){const e=nt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>y0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),cf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>So(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>So(r))).join(",")),e.Te=t}return e.Te}function gg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!mR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!CN(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Rw(s.startAt,e.startAt)&&Rw(s.endAt,e.endAt)}function v0(s){return Fe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class ju{constructor(e,t=null,r=[],o=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function ER(s,e,t,r,o,u,d,p){return new ju(s,e,t,r,o,u,d,p)}function df(s){return new ju(s)}function Dw(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function SR(s){return Fe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function IN(s){return s.collectionGroup!==null}function eu(s){const e=nt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Rn(zn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new zh(u,r))})),t.has(zn.keyField().canonicalString())||e.Ie.push(new zh(zn.keyField(),r))}return e.Ie}function Va(s){const e=nt(s);return e.Ee||(e.Ee=jR(e,eu(s))),e.Ee}function jR(s,e){if(s.limitType==="F")return Iw(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new zh(o.field,u)}));const t=s.endAt?new Bh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Bh(s.startAt.position,s.startAt.inclusive):null;return Iw(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function w0(s,e){const t=s.filters.concat([e]);return new ju(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function _0(s,e,t){return new ju(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function hf(s,e){return gg(Va(s),Va(e))&&s.limitType===e.limitType}function DN(s){return`${pg(Va(s))}|lt:${s.limitType}`}function oo(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>kN(o))).join(", ")}]`),cf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>So(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>So(o))).join(",")),`Target(${r})`})(Va(s))}; limitType=${s.limitType})`}function ff(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Fe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of eu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(d,p,g){const x=kw(d,p,g);return d.inclusive?x<=0:x<0})(r.startAt,eu(r),o)||r.endAt&&!(function(d,p,g){const x=kw(d,p,g);return d.inclusive?x>=0:x>0})(r.endAt,eu(r),o))})(s,e)}function TR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function MN(s){return(e,t)=>{let r=!1;for(const o of eu(s)){const u=AR(o,e,t);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function AR(s,e,t){const r=s.field.isKeyField()?Fe.comparator(e.key,t.key):(function(u,d,p){const g=d.data.field(u),x=p.data.field(u);return g!==null&&x!==null?Eo(g,x):We(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return We(19790,{direction:s.dir})}}class yl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,((t,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return xN(this.inner)}size(){return this.innerSize}}const CR=new nn(Fe.comparator);function yr(){return CR}const ON=new nn(Fe.comparator);function Yc(...s){let e=ON;for(const t of s)e=e.insert(t.key,t);return e}function PN(s){let e=ON;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function nl(){return tu()}function VN(){return tu()}function tu(){return new yl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const kR=new nn(Fe.comparator),RR=new Rn(Fe.comparator);function bt(...s){let e=RR;for(const t of s)e=e.add(t);return e}const IR=new Rn(xt);function DR(){return IR}function xg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vh(e)?"-0":e}}function LN(s){return{integerValue:""+s}}function MR(s,e){return rR(e)?LN(e):xg(s,e)}class mf{constructor(){this._=void 0}}function OR(s,e,t){return s instanceof fu?(function(o,u){const d={fields:{[vN]:{stringValue:yN},[_N]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&fg(u)&&(u=uf(u)),u&&(d.fields[wN]=u),{mapValue:d}})(t,e):s instanceof mu?BN(s,e):s instanceof pu?zN(s,e):(function(o,u){const d=UN(o,u),p=Mw(d)+Mw(o.Ae);return b0(d)&&b0(o.Ae)?LN(p):xg(o.serializer,p)})(s,e)}function PR(s,e,t){return s instanceof mu?BN(s,e):s instanceof pu?zN(s,e):t}function UN(s,e){return s instanceof qh?(function(r){return b0(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class fu extends mf{}class mu extends mf{constructor(e){super(),this.elements=e}}function BN(s,e){const t=qN(e);for(const r of s.elements)t.some((o=>za(o,r)))||t.push(r);return{arrayValue:{values:t}}}class pu extends mf{constructor(e){super(),this.elements=e}}function zN(s,e){let t=qN(e);for(const r of s.elements)t=t.filter((o=>!za(o,r)));return{arrayValue:{values:t}}}class qh extends mf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Mw(s){return gn(s.integerValue||s.doubleValue)}function qN(s){return mg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class VR{constructor(e,t){this.field=e,this.transform=t}}function LR(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof mu&&o instanceof mu||r instanceof pu&&o instanceof pu?No(r.elements,o.elements,za):r instanceof qh&&o instanceof qh?za(r.Ae,o.Ae):r instanceof fu&&o instanceof fu})(s.transform,e.transform)}class UR{constructor(e,t){this.version=e,this.transformResults=t}}class Qs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qs}static exists(e){return new Qs(void 0,e)}static updateTime(e){return new Qs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class pf{}function FN(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new bg(s.key,Qs.none()):new Tu(s.key,s.data,Qs.none());{const t=s.data,r=hs.empty();let o=new Rn(zn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?r.delete(u):r.set(u,d),o=o.add(u)}return new Ei(s.key,r,new Rs(o.toArray()),Qs.none())}}function BR(s,e,t){s instanceof Tu?(function(o,u,d){const p=o.value.clone(),g=Pw(o.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,t):s instanceof Ei?(function(o,u,d){if(!wh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const p=Pw(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll($N(o)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function nu(s,e,t,r){return s instanceof Tu?(function(u,d,p,g){if(!wh(u.precondition,d))return p;const x=u.value.clone(),b=Vw(u.fieldTransforms,g,d);return x.setAll(b),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(s,e,t,r):s instanceof Ei?(function(u,d,p,g){if(!wh(u.precondition,d))return p;const x=Vw(u.fieldTransforms,g,d),b=d.data;return b.setAll($N(u)),b.setAll(x),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,t,r):(function(u,d,p){return wh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,t)}function zR(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=UN(r.transform,o||null);u!=null&&(t===null&&(t=hs.empty()),t.set(r.field,u))}return t||null}function Ow(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&No(r,o,((u,d)=>LR(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Tu extends pf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ei extends pf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function $N(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function Pw(s,e,t){const r=new Map;It(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let o=0;o<t.length;o++){const u=s[o],d=u.transform,p=e.data.field(u.field);r.set(u.field,PR(d,p,t[o]))}return r}function Vw(s,e,t){const r=new Map;for(const o of s){const u=o.transform,d=t.data.field(o.field);r.set(o.field,OR(u,d,e))}return r}class bg extends pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qR extends pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class FR{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&BR(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=VN();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=t.has(o.key)?null:p;const g=FN(d,p);g!==null&&r.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Xe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),bt())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,((t,r)=>Ow(t,r)))&&No(this.baseMutations,e.baseMutations,((t,r)=>Ow(t,r)))}}class yg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return kR})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new yg(e,t,r,o)}}class $R{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class HR{constructor(e,t){this.count=e,this.unchangedNames=t}}var Sn,wt;function GR(s){switch(s){case ge.OK:return We(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return We(15467,{code:s})}}function HN(s){if(s===void 0)return br("GRPC error has no .code"),ge.UNKNOWN;switch(s){case Sn.OK:return ge.OK;case Sn.CANCELLED:return ge.CANCELLED;case Sn.UNKNOWN:return ge.UNKNOWN;case Sn.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case Sn.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case Sn.INTERNAL:return ge.INTERNAL;case Sn.UNAVAILABLE:return ge.UNAVAILABLE;case Sn.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case Sn.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case Sn.NOT_FOUND:return ge.NOT_FOUND;case Sn.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case Sn.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case Sn.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case Sn.ABORTED:return ge.ABORTED;case Sn.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case Sn.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case Sn.DATA_LOSS:return ge.DATA_LOSS;default:return We(39323,{code:s})}}(wt=Sn||(Sn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";function YR(){return new TextEncoder}const WR=new oi([4294967295,4294967295],0);function Lw(s){const e=YR().encode(s),t=new iN;return t.update(e),new Uint8Array(t.digest())}function Uw(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new oi([t,r],0),new oi([o,u],0)]}class vg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wc(`Invalid padding: ${t}`);if(r<0)throw new Wc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=oi.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(oi.fromNumber(r)));return o.compare(WR)===1&&(o=new oi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Lw(e),[r,o]=Uw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,o,u);if(!this.we(d))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new vg(u,o,t);return r.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const t=Lw(e),[r,o]=Uw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,o,u);this.be(d)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gf(Xe.min(),o,new nn(xt),yr(),bt())}}class Au{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Au(r,t,bt(),bt(),bt())}}class _h{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=o}}class GN{constructor(e,t){this.targetId=e,this.Ce=t}}class YN{constructor(e,t,r=qn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class Bw{constructor(){this.ve=0,this.Fe=zw(),this.Me=qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=bt(),t=bt(),r=bt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:We(38017,{changeType:u})}})),new Au(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=zw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class KR{constructor(e){this.Ge=e,this.ze=new Map,this.je=yr(),this.He=ah(),this.Je=ah(),this.Ze=new nn(xt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:We(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(v0(u))if(r===0){const d=new Fe(u.path);this.et(t,d,Wn.newNoDocument(d,Xe.min()))}else It(r===1,20013,{expectedCount:r});else{const d=this._t(t);if(d!==r){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(t);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=t;let d,p;try{d=mi(r).toUint8Array()}catch(g){if(g instanceof bN)return _o("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new vg(d,o,u)}catch(g){return _o(g instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&v0(p.target)){const g=new Fe(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Wn.newNoDocument(g,e))}u.Be&&(t.set(d,u.ke()),u.Ke())}}));let r=bt();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new gf(e,t,this.Ze,this.je,r);return this.je=yr(),this.He=ah(),this.Je=ah(),this.Ze=new nn(xt),o}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Bw,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Rn(xt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Rn(xt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ah(){return new nn(Fe.comparator)}function zw(){return new nn(Fe.comparator)}const QR={asc:"ASCENDING",desc:"DESCENDING"},XR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},JR={and:"AND",or:"OR"};class ZR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function N0(s,e){return s.useProto3Json||cf(e)?e:{value:e}}function Fh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WN(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function e4(s,e){return Fh(s,e.toTimestamp())}function La(s){return It(!!s,49232),Xe.fromTimestamp((function(t){const r=fi(t);return new Rt(r.seconds,r.nanos)})(s))}function wg(s,e){return E0(s,e).canonicalString()}function E0(s,e){const t=(function(o){return new Yt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function KN(s){const e=Yt.fromString(s);return It(e2(e),10190,{key:e.toString()}),e}function S0(s,e){return wg(s.databaseId,e.path)}function Fp(s,e){const t=KN(e);if(t.get(1)!==s.databaseId.projectId)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Fe(XN(t))}function QN(s,e){return wg(s.databaseId,e)}function t4(s){const e=KN(s);return e.length===4?Yt.emptyPath():XN(e)}function j0(s){return new Yt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function XN(s){return It(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function qw(s,e,t){return{name:S0(s,e),fields:t.value.mapValue.fields}}function n4(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:We(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(x,b){return x.useProto3Json?(It(b===void 0||typeof b=="string",58123),qn.fromBase64String(b||"")):(It(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),qn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(x){const b=x.code===void 0?ge.UNKNOWN:HN(x.code);return new Re(b,x.message||"")})(d);t=new YN(r,o,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Fp(s,r.document.name),u=La(r.document.updateTime),d=r.document.createTime?La(r.document.createTime):Xe.min(),p=new hs({mapValue:{fields:r.document.fields}}),g=Wn.newFoundDocument(o,u,d,p),x=r.targetIds||[],b=r.removedTargetIds||[];t=new _h(x,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Fp(s,r.document),u=r.readTime?La(r.readTime):Xe.min(),d=Wn.newNoDocument(o,u),p=r.removedTargetIds||[];t=new _h([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Fp(s,r.document),u=r.removedTargetIds||[];t=new _h([],u,o,null)}else{if(!("filter"in e))return We(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,d=new HR(o,u),p=r.targetId;t=new GN(p,d)}}return t}function s4(s,e){let t;if(e instanceof Tu)t={update:qw(s,e.key,e.value)};else if(e instanceof bg)t={delete:S0(s,e.key)};else if(e instanceof Ei)t={update:qw(s,e.key,e.data),updateMask:h4(e.fieldMask)};else{if(!(e instanceof qR))return We(16599,{dt:e.type});t={verify:S0(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,d){const p=d.transform;if(p instanceof fu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof mu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof pu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof qh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw We(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:e4(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:We(27497)})(s,e.precondition)),t}function a4(s,e){return s&&s.length>0?(It(e!==void 0,14353),s.map((t=>(function(o,u){let d=o.updateTime?La(o.updateTime):La(u);return d.isEqual(Xe.min())&&(d=La(u)),new UR(d,o.transformResults||[])})(t,e)))):[]}function r4(s,e){return{documents:[QN(s,e.path)]}}function i4(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=QN(s,o);const u=(function(x){if(x.length!==0)return ZN(fa.create(x,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(x){if(x.length!==0)return x.map((b=>(function(E){return{field:co(E.field),direction:c4(E.dir)}})(b)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=N0(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:o}}function l4(s){let e=t4(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(r===1,65062);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=(function(w){const E=JN(w);return E instanceof fa&&AN(E)?E.getFilters():[E]})(t.where));let d=[];t.orderBy&&(d=(function(w){return w.map((E=>(function(L){return new zh(uo(L.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(E)))})(t.orderBy));let p=null;t.limit&&(p=(function(w){let E;return E=typeof w=="object"?w.value:w,cf(E)?null:E})(t.limit));let g=null;t.startAt&&(g=(function(w){const E=!!w.before,T=w.values||[];return new Bh(T,E)})(t.startAt));let x=null;return t.endAt&&(x=(function(w){const E=!w.before,T=w.values||[];return new Bh(T,E)})(t.endAt)),ER(e,o,d,u,p,"F",g,x)}function o4(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JN(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=uo(t.unaryFilter.field);return jn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=uo(t.unaryFilter.field);return jn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=uo(t.unaryFilter.field);return jn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=uo(t.unaryFilter.field);return jn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}})(s):s.fieldFilter!==void 0?(function(t){return jn.create(uo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return fa.create(t.compositeFilter.filters.map((r=>JN(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return We(1026)}})(t.compositeFilter.op))})(s):We(30097,{filter:s})}function c4(s){return QR[s]}function u4(s){return XR[s]}function d4(s){return JR[s]}function co(s){return{fieldPath:s.canonicalString()}}function uo(s){return zn.fromServerFormat(s.fieldPath)}function ZN(s){return s instanceof jn?(function(t){if(t.op==="=="){if(Cw(t.value))return{unaryFilter:{field:co(t.field),op:"IS_NAN"}};if(Aw(t.value))return{unaryFilter:{field:co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cw(t.value))return{unaryFilter:{field:co(t.field),op:"IS_NOT_NAN"}};if(Aw(t.value))return{unaryFilter:{field:co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:co(t.field),op:u4(t.op),value:t.value}}})(s):s instanceof fa?(function(t){const r=t.getFilters().map((o=>ZN(o)));return r.length===1?r[0]:{compositeFilter:{op:d4(t.op),filters:r}}})(s):We(54877,{filter:s})}function h4(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function e2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function t2(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class ri{constructor(e,t,r,o,u=Xe.min(),d=Xe.min(),p=qn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class f4{constructor(e){this.yt=e}}function m4(s){const e=l4({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?_0(e,e.limit,"L"):e}class p4{constructor(){this.Sn=new g4}addToCollectionParentIndex(e,t){return this.Sn.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(hi.min())}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class g4{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Rn(Yt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Rn(Yt.comparator)).toArray()}}const Fw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},n2=41943040;class ds{static withCacheSize(e){return new ds(e,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}ds.DEFAULT_COLLECTION_PERCENTILE=10,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ds.DEFAULT=new ds(n2,ds.DEFAULT_COLLECTION_PERCENTILE,ds.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ds.DISABLED=new ds(-1,0,0);class jo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new jo(0)}static ar(){return new jo(-1)}}const $w="LruGarbageCollector",x4=1048576;function Hw([s,e],[t,r]){const o=xt(s,t);return o===0?xt(e,r):o}class b4{constructor(e){this.Pr=e,this.buffer=new Rn(Hw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Hw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class y4{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Me($w,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vo(t)?Me($w,"Ignoring IndexedDB error during garbage collection: ",t):await Po(t)}await this.Ar(3e5)}))}}class v4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ye.resolve(of.ce);const r=new b4(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(Fw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,o,u,d,p,g,x;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,p=Date.now(),this.removeTargets(e,r,t)))).next((w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(x=Date.now(),lo()<=gt.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-b}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function w4(s,e){return new v4(s,e)}class _4{constructor(){this.changes=new yl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class N4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class E4{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&nu(r.mutation,o,Rs.empty(),Rt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,bt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=bt()){const o=nl();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((u=>{let d=Yc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const r=nl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,bt())))}populateOverlays(e,t,r){const o=[];return r.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,r,o){let u=yr();const d=tu(),p=(function(){return tu()})();return t.forEach(((g,x)=>{const b=r.get(x.key);o.has(x.key)&&(b===void 0||b.mutation instanceof Ei)?u=u.insert(x.key,x):b!==void 0?(d.set(x.key,b.mutation.getFieldMask()),nu(b.mutation,x,b.mutation.getFieldMask(),Rt.now())):d.set(x.key,Rs.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((x,b)=>d.set(x,b))),t.forEach(((x,b)=>p.set(x,new N4(b,d.get(x)??null)))),p)))}recalculateAndSaveOverlays(e,t){const r=tu();let o=new nn(((d,p)=>d-p)),u=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((g=>{const x=t.get(g);if(x===null)return;let b=r.get(g)||Rs.empty();b=p.applyToLocalView(x,b),r.set(g,b);const w=(o.get(p.batchId)||bt()).add(g);o=o.insert(p.batchId,w)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),x=g.key,b=g.value,w=VN();b.forEach((E=>{if(!u.has(E)){const T=FN(t.get(E),r.get(E));T!==null&&w.set(E,T),u=u.add(E)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,w))}return ye.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return SR(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):IN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ye.resolve(nl());let p=cu,g=u;return d.next((x=>ye.forEach(x,((b,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),u.get(b)?ye.resolve():this.remoteDocumentCache.getEntry(e,b).next((E=>{g=g.insert(b,E)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,g,x,bt()))).next((b=>({batchId:p,changes:PN(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Fe(t)).next((r=>{let o=Yc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const u=t.collectionGroup;let d=Yc();return this.indexManager.getCollectionParents(e,u).next((p=>ye.forEach(p,(g=>{const x=(function(w,E){return new ju(E,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,r,o).next((b=>{b.forEach(((w,E)=>{d=d.insert(w,E)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,o)))).next((d=>{u.forEach(((g,x)=>{const b=x.getKey();d.get(b)===null&&(d=d.insert(b,Wn.newInvalidDocument(b)))}));let p=Yc();return d.forEach(((g,x)=>{const b=u.get(g);b!==void 0&&nu(b.mutation,x,Rs.empty(),Rt.now()),ff(t,x)&&(p=p.insert(g,x))})),p}))}}class S4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ye.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:La(o.createTime)}})(t)),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:m4(o.bundledQuery),readTime:La(o.readTime)}})(t)),ye.resolve()}}class j4{constructor(){this.overlays=new nn(Fe.comparator),this.Lr=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const r=nl();return ye.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,u)=>{this.bt(e,t,u)})),ye.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){const o=nl(),u=t.length+1,d=new Fe(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,x=g.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ye.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new nn(((x,b)=>x-b));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>r){let b=u.get(x.largestBatchId);b===null&&(b=nl(),u=u.insert(x.largestBatchId,b)),b.set(x.getKey(),x)}}const p=nl(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,b)=>p.set(x,b))),!(p.size()>=o)););return ye.resolve(p)}bt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new $R(t,r));let u=this.Lr.get(t);u===void 0&&(u=bt(),this.Lr.set(t,u)),this.Lr.set(t,u.add(r.key))}}class T4{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ye.resolve()}}class _g{constructor(){this.kr=new Rn(Mn.Kr),this.qr=new Rn(Mn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Mn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Mn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new Fe(new Yt([])),r=new Mn(t,e),o=new Mn(t,e+1),u=[];return this.qr.forEachInRange([r,o],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Fe(new Yt([])),r=new Mn(t,e),o=new Mn(t,e+1);let u=bt();return this.qr.forEachInRange([r,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new Mn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Mn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Fe.comparator(e.key,t.key)||xt(e.Hr,t.Hr)}static Ur(e,t){return xt(e.Hr,t.Hr)||Fe.comparator(e.key,t.key)}}class A4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Rn(Mn.Kr)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new FR(u,t,r,o);this.mutationQueue.push(d);for(const p of o)this.Jr=this.Jr.add(new Mn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ye.resolve(d)}lookupMutationBatch(e,t){return ye.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),u=o<0?0:o;return ye.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?hg:this.Yn-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mn(t,0),o=new Mn(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([r,o],(d=>{const p=this.Zr(d.Hr);u.push(p)})),ye.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(xt);return t.forEach((o=>{const u=new Mn(o,0),d=new Mn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{r=r.add(p.Hr)}))})),ye.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Fe.isDocumentKey(u)||(u=u.child(""));const d=new Mn(new Fe(u),0);let p=new Rn(xt);return this.Jr.forEachWhile((g=>{const x=g.key.path;return!!r.isPrefixOf(x)&&(x.length===o&&(p=p.add(g.Hr)),!0)}),d),ye.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){It(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ye.forEach(t.mutations,(o=>{const u=new Mn(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Mn(t,0),o=this.Jr.firstAfterOrEqual(r);return ye.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class C4{constructor(e){this.ti=e,this.docs=(function(){return new nn(Fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let r=yr();return t.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Wn.newInvalidDocument(o))})),ye.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=yr();const d=t.path,p=new Fe(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:x,value:{document:b}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||tR(eR(b),r)<=0||(o.has(b.key)||ff(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ye.resolve(u)}getAllFromCollectionGroup(e,t,r,o){We(9500)}ni(e,t){return ye.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new k4(this)}getSize(e){return ye.resolve(this.size)}}class k4 extends _4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),ye.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class R4{constructor(e){this.persistence=e,this.ri=new yl((t=>pg(t)),gg),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new _g,this.targetCount=0,this.oi=jo._r()}forEachTarget(e,t){return this.ri.forEach(((r,o)=>t(o))),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),ye.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.lr(t),ye.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=t&&r.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ye.waitFor(u).next((()=>o))}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ye.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this.si.containsKey(t))}}class s2{constructor(e,t){this._i={},this.overlays={},this.ai=new of(0),this.ui=!1,this.ui=!0,this.ci=new T4,this.referenceDelegate=e(this),this.li=new R4(this),this.indexManager=new p4,this.remoteDocumentCache=(function(o){return new C4(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new f4(t),this.Pi=new S4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new j4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new A4(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){Me("MemoryPersistence","Starting transaction:",e);const o=new I4(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,t){return ye.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class I4 extends sR{constructor(e){super(),this.currentSequenceNumber=e}}class Ng{constructor(e){this.persistence=e,this.Ri=new _g,this.Ai=null}static Vi(e){return new Ng(e)}get di(){if(this.Ai)return this.Ai;throw We(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.di,(r=>{const o=Fe.fromPath(r);return this.mi(e,o).next((u=>{u||t.removeEntry(o,Xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ye.or([()=>ye.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class $h{constructor(e,t){this.persistence=e,this.fi=new yl((r=>iR(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=w4(this,t)}static Vi(e,t){return new $h(e,t)}Ti(){}Ii(e){return ye.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return ye.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((u=>u?ye.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,t).next((p=>{p||(r++,u.removeEntry(d,Xe.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ye.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ye.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ye.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yh(e.data.value)),t}wr(e,t,r){return ye.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return ye.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Eg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=o}static Es(e,t){let r=bt(),o=bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Eg(e,t.fromCache,r,o)}}class D4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class M4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return lA()?8:aR(Kn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const u={result:null};return this.gs(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,t,o,r).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new D4;return this.ys(e,t,d).next((p=>{if(u.result=p,this.As)return this.ws(e,t,d,p.size)}))})).next((()=>u.result))}ws(e,t,r,o){return r.documentReadCount<this.Vs?(lo()<=gt.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",oo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ye.resolve()):(lo()<=gt.DEBUG&&Me("QueryEngine","Query:",oo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(lo()<=gt.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",oo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Va(t))):ye.resolve())}gs(e,t){if(Dw(t))return ye.resolve(null);let r=Va(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=_0(t,null,"F"),r=Va(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const d=bt(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const x=this.bs(t,p);return this.Ss(t,x,d,g.readTime)?this.gs(e,_0(t,null,"F")):this.Ds(e,x,t,g)}))))})))))}ps(e,t,r,o){return Dw(t)||o.isEqual(Xe.min())?ye.resolve(null):this.fs.getDocuments(e,r).next((u=>{const d=this.bs(t,u);return this.Ss(t,d,r,o)?ye.resolve(null):(lo()<=gt.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oo(t)),this.Ds(e,d,t,Zk(o,cu)).next((p=>p)))}))}bs(e,t){let r=new Rn(MN(e));return t.forEach(((o,u)=>{ff(e,u)&&(r=r.add(u))})),r}Ss(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,t,r){return lo()<=gt.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",oo(t)),this.fs.getDocumentsMatchingQuery(e,t,hi.min(),r)}Ds(e,t,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Sg="LocalStore",O4=3e8;class P4{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new nn(xt),this.Fs=new yl((u=>pg(u)),gg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function V4(s,e,t,r){return new P4(s,e,t,r)}async function a2(s,e){const t=nt(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const d=[],p=[];let g=bt();for(const x of o){d.push(x.batchId);for(const b of x.mutations)g=g.add(b.key)}for(const x of u){p.push(x.batchId);for(const b of x.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(r,g).next((x=>({Ns:x,removedBatchIds:d,addedBatchIds:p})))}))}))}function L4(s,e){const t=nt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,x,b){const w=x.batch,E=w.keys();let T=ye.resolve();return E.forEach((L=>{T=T.next((()=>b.getEntry(g,L))).next((V=>{const O=x.docVersions.get(L);It(O!==null,48541),V.version.compareTo(O)<0&&(w.applyToRemoteDocument(V,x),V.isValidDocument()&&(V.setReadTime(x.commitVersion),b.addEntry(V)))}))})),T.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=bt();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(g=g.add(p.batch.mutations[x].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function r2(s){const e=nt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function U4(s,e){const t=nt(s),r=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const p=[];e.targetChanges.forEach(((b,w)=>{const E=o.get(w);if(!E)return;p.push(t.li.removeMatchingKeys(u,b.removedDocuments,w).next((()=>t.li.addMatchingKeys(u,b.addedDocuments,w))));let T=E.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?T=T.withResumeToken(qn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):b.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(b.resumeToken,r)),o=o.insert(w,T),(function(V,O,B){return V.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=O4?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(E,T,b)&&p.push(t.li.updateTargetData(u,T))}));let g=yr(),x=bt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(B4(u,d,e.documentUpdates).next((b=>{g=b.Bs,x=b.Ls}))),!r.isEqual(Xe.min())){const b=t.li.getLastRemoteSnapshotVersion(u).next((w=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(b)}return ye.waitFor(p).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,x))).next((()=>g))})).then((u=>(t.vs=o,u)))}function B4(s,e,t){let r=bt(),o=bt();return t.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let d=yr();return t.forEach(((p,g)=>{const x=u.get(p);g.isFoundDocument()!==x.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Xe.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):Me(Sg,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function z4(s,e){const t=nt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=hg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function q4(s,e){const t=nt(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.li.getTargetData(r,e).next((u=>u?(o=u,ye.resolve(o)):t.li.allocateTargetId(r).next((d=>(o=new ri(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function T0(s,e,t){const r=nt(s),o=r.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Vo(d))throw d;Me(Sg,`Failed to update sequence numbers for target ${e}: ${d}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function Gw(s,e,t){const r=nt(s);let o=Xe.min(),u=bt();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,b){const w=nt(g),E=w.Fs.get(b);return E!==void 0?ye.resolve(w.vs.get(E)):w.li.getTargetData(x,b)})(r,d,Va(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(d,e,t?o:Xe.min(),t?u:bt()))).next((p=>(F4(r,TR(e),p),{documents:p,ks:u})))))}function F4(s,e,t){let r=s.Ms.get(e)||Xe.min();t.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Ms.set(e,r)}class Yw{constructor(){this.activeTargetIds=DR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $4{constructor(){this.vo=new Yw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Yw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class H4{Mo(e){}shutdown(){}}const Ww="ConnectivityMonitor";class Kw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Me(Ww,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Me(Ww,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let rh=null;function A0(){return rh===null?rh=(function(){return 268435456+Math.round(2147483648*Math.random())})():rh++,"0x"+rh.toString(16)}const $p="RestConnection",G4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Y4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===Lh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,u){const d=A0(),p=this.Qo(e,t.toUriEncodedString());Me($p,`Sending RPC '${e}' ${d}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:x}=new URL(p),b=vi(x);return this.zo(e,p,g,r,b).then((w=>(Me($p,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw _o($p,`RPC '${e}' ${d} failed with error: `,w,"url: ",p,"request:",r),w}))}jo(e,t,r,o,u,d){return this.Wo(e,t,r,o,u)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Oo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}Qo(e,t){const r=G4[e];let o=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class W4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Gn="WebChannelConnection",Uc=(s,e,t)=>{s.listen(e,(r=>{try{t(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class bo extends Y4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!bo.c_){const e=uN();Uc(e,cN.STAT_EVENT,(t=>{t.stat===p0.PROXY?Me(Gn,"STAT_EVENT: detected buffering proxy"):t.stat===p0.NOPROXY&&Me(Gn,"STAT_EVENT: detected no buffering proxy")})),bo.c_=!0}}zo(e,t,r,o,u){const d=A0();return new Promise(((p,g)=>{const x=new lN;x.setWithCredentials(!0),x.listenOnce(oN.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case bh.NO_ERROR:const w=x.getResponseJson();Me(Gn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),p(w);break;case bh.TIMEOUT:Me(Gn,`RPC '${e}' ${d} timed out`),g(new Re(ge.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const E=x.getStatus();if(Me(Gn,`RPC '${e}' ${d} failed with status:`,E,"response text:",x.getResponseText()),E>0){let T=x.getResponseJson();Array.isArray(T)&&(T=T[0]);const L=T?.error;if(L&&L.status&&L.message){const V=(function(B){const Y=B.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(Y)>=0?Y:ge.UNKNOWN})(L.status);g(new Re(V,L.message))}else g(new Re(ge.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new Re(ge.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Me(Gn,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);Me(Gn,`RPC '${e}' ${d} sending request:`,o),x.send(t,"POST",b,r,15)}))}T_(e,t,r){const o=A0(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const x=u.join("");Me(Gn,`Creating RPC '${e}' stream ${o}: ${x}`,p);const b=d.createWebChannel(x,p);this.I_(b);let w=!1,E=!1;const T=new W4({Ho:L=>{E?Me(Gn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(w||(Me(Gn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),w=!0),Me(Gn,`RPC '${e}' stream ${o} sending:`,L),b.send(L))},Jo:()=>b.close()});return Uc(b,Gc.EventType.OPEN,(()=>{E||(Me(Gn,`RPC '${e}' stream ${o} transport opened.`),T.i_())})),Uc(b,Gc.EventType.CLOSE,(()=>{E||(E=!0,Me(Gn,`RPC '${e}' stream ${o} transport closed`),T.o_(),this.E_(b))})),Uc(b,Gc.EventType.ERROR,(L=>{E||(E=!0,_o(Gn,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),T.o_(new Re(ge.UNAVAILABLE,"The operation could not be completed")))})),Uc(b,Gc.EventType.MESSAGE,(L=>{if(!E){const V=L.data[0];It(!!V,16349);const O=V,B=O?.error||O[0]?.error;if(B){Me(Gn,`RPC '${e}' stream ${o} received error:`,B);const Y=B.status;let $=(function(oe){const j=Sn[oe];if(j!==void 0)return HN(j)})(Y),ie=B.message;$===void 0&&($=ge.INTERNAL,ie="Unknown error status: "+Y+" with message "+B.message),E=!0,T.o_(new Re($,ie)),b.close()}else Me(Gn,`RPC '${e}' stream ${o} received:`,V),T.__(V)}})),bo.u_(),setTimeout((()=>{T.s_()}),0),T}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return dN()}}function K4(s){return new bo(s)}function Hp(){return typeof document<"u"?document:null}function xf(s){return new ZR(s,!0)}bo.c_=!1;class i2{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&Me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const Qw="PersistentStream";class l2{constructor(e,t,r,o,u,d,p,g){this.Ci=e,this.b_=r,this.S_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new i2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new Re(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Me(Qw,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Me(Qw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Q4 extends l2{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=n4(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Xe.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Xe.min():d.readTime?La(d.readTime):Xe.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=j0(this.serializer),t.addTarget=(function(u,d){let p;const g=d.target;if(p=v0(g)?{documents:r4(u,g)}:{query:i4(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=WN(u,d.resumeToken);const x=N0(u,d.expectedCount);x!==null&&(p.expectedCount=x)}else if(d.snapshotVersion.compareTo(Xe.min())>0){p.readTime=Fh(u,d.snapshotVersion.toTimestamp());const x=N0(u,d.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,e);const r=o4(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=j0(this.serializer),t.removeTarget=e,this.K_(t)}}class X4 extends l2{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=a4(e.writeResults,e.commitTime),r=La(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=j0(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>s4(this.serializer,r)))};this.K_(t)}}class J4{}class Z4 extends J4{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,E0(t,r),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ge.UNKNOWN,u.toString())}))}jo(e,t,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,E0(t,r),o,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Re(ge.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function eI(s,e,t,r){return new Z4(s,e,t,r)}class tI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(br(t),this.aa=!1):Me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const dl="RemoteStore";class nI{constructor(e,t,r,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{r.enqueueAndForget((async()=>{vl(this)&&(Me(dl,"Restarting streams for network reachability change."),await(async function(g){const x=nt(g);x.Ea.add(4),await Cu(x),x.Va.set("Unknown"),x.Ea.delete(4),await bf(x)})(this))}))})),this.Va=new tI(r,o)}}async function bf(s){if(vl(s))for(const e of s.Ra)await e(!0)}async function Cu(s){for(const e of s.Ra)await e(!1)}function o2(s,e){const t=nt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Cg(t)?Ag(t):Lo(t).O_()&&Tg(t,e))}function jg(s,e){const t=nt(s),r=Lo(t);t.Ia.delete(e),r.O_()&&c2(t,e),t.Ia.size===0&&(r.O_()?r.L_():vl(t)&&t.Va.set("Unknown"))}function Tg(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lo(s).Z_(e)}function c2(s,e){s.da.$e(e),Lo(s).X_(e)}function Ag(s){s.da=new KR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Lo(s).start(),s.Va.ua()}function Cg(s){return vl(s)&&!Lo(s).x_()&&s.Ia.size>0}function vl(s){return nt(s).Ea.size===0}function u2(s){s.da=void 0}async function sI(s){s.Va.set("Online")}async function aI(s){s.Ia.forEach(((e,t)=>{Tg(s,e)}))}async function rI(s,e){u2(s),Cg(s)?(s.Va.ha(e),Ag(s)):s.Va.set("Unknown")}async function iI(s,e,t){if(s.Va.set("Online"),e instanceof YN&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.da.removeTarget(p))})(s,e)}catch(r){Me(dl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Hh(s,r)}else if(e instanceof _h?s.da.Xe(e):e instanceof GN?s.da.st(e):s.da.tt(e),!t.isEqual(Xe.min()))try{const r=await r2(s.localStore);t.compareTo(r)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(x);b&&u.Ia.set(x,b.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,x)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(qn.EMPTY_BYTE_STRING,b.snapshotVersion)),c2(u,g);const w=new ri(b.target,g,x,b.sequenceNumber);Tg(u,w)})),u.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(r){Me(dl,"Failed to raise snapshot:",r),await Hh(s,r)}}async function Hh(s,e,t){if(!Vo(e))throw e;s.Ea.add(1),await Cu(s),s.Va.set("Offline"),t||(t=()=>r2(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Me(dl,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await bf(s)}))}function d2(s,e){return e().catch((t=>Hh(s,t,e)))}async function yf(s){const e=nt(s),t=gi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hg;for(;lI(e);)try{const o=await z4(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,oI(e,o)}catch(o){await Hh(e,o)}h2(e)&&f2(e)}function lI(s){return vl(s)&&s.Ta.length<10}function oI(s,e){s.Ta.push(e);const t=gi(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function h2(s){return vl(s)&&!gi(s).x_()&&s.Ta.length>0}function f2(s){gi(s).start()}async function cI(s){gi(s).ra()}async function uI(s){const e=gi(s);for(const t of s.Ta)e.ea(t.mutations)}async function dI(s,e,t){const r=s.Ta.shift(),o=yg.from(r,e,t);await d2(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await yf(s)}async function hI(s,e){e&&gi(s).Y_&&await(async function(r,o){if((function(d){return GR(d)&&d!==ge.ABORTED})(o.code)){const u=r.Ta.shift();gi(r).B_(),await d2(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await yf(r)}})(s,e),h2(s)&&f2(s)}async function Xw(s,e){const t=nt(s);t.asyncQueue.verifyOperationInProgress(),Me(dl,"RemoteStore received new credentials");const r=vl(t);t.Ea.add(3),await Cu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await bf(t)}async function fI(s,e){const t=nt(s);e?(t.Ea.delete(2),await bf(t)):e||(t.Ea.add(2),await Cu(t),t.Va.set("Unknown"))}function Lo(s){return s.ma||(s.ma=(function(t,r,o){const u=nt(t);return u.sa(),new Q4(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:sI.bind(null,s),Yo:aI.bind(null,s),t_:rI.bind(null,s),J_:iI.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Cg(s)?Ag(s):s.Va.set("Unknown")):(await s.ma.stop(),u2(s))}))),s.ma}function gi(s){return s.fa||(s.fa=(function(t,r,o){const u=nt(t);return u.sa(),new X4(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:cI.bind(null,s),t_:hI.bind(null,s),ta:uI.bind(null,s),na:dI.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await yf(s)):(await s.fa.stop(),s.Ta.length>0&&(Me(dl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class kg{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,p=new kg(e,t,d,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rg(s,e){if(br("AsyncQueue",`${e}: ${s}`),Vo(s))return new Re(ge.UNAVAILABLE,`${e}: ${s}`);throw s}class yo{static emptySet(e){return new yo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Fe.comparator(t.key,r.key):(t,r)=>Fe.comparator(t.key,r.key),this.keyedMap=Yc(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Jw{constructor(){this.ga=new nn(Fe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):We(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class To{constructor(e,t,r,o,u,d,p,g,x){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new To(e,t,yo.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class mI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class pI{constructor(){this.queries=Zw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=nt(t),u=o.queries;o.queries=Zw(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(r)}))})(this,new Re(ge.ABORTED,"Firestore shutting down"))}}function Zw(){return new yl((s=>DN(s)),hf)}async function Ig(s,e){const t=nt(s);let r=3;const o=e.query;let u=t.queries.get(o);u?!u.Sa()&&e.Da()&&(r=2):(u=new mI,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=Rg(d,`Initialization of query '${oo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Mg(t)}async function Dg(s,e){const t=nt(s),r=e.query;let o=3;const u=t.queries.get(r);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function gI(s,e){const t=nt(s);let r=!1;for(const o of e){const u=o.query,d=t.queries.get(u);if(d){for(const p of d.ba)p.Fa(o)&&(r=!0);d.wa=o}}r&&Mg(t)}function xI(s,e,t){const r=nt(s),o=r.queries.get(e);if(o)for(const u of o.ba)u.onError(t);r.queries.delete(e)}function Mg(s){s.Ca.forEach((e=>{e.next()}))}var C0,e1;(e1=C0||(C0={})).Ma="default",e1.Cache="cache";class Og{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new To(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=To.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==C0.Cache}}class m2{constructor(e){this.key=e}}class p2{constructor(e){this.key=e}}class bI{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=bt(),this.mutatedKeys=bt(),this.eu=MN(e),this.tu=new yo(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new Jw,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,x=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const E=o.get(b),T=ff(this.query,w)?w:null,L=!!E&&this.mutatedKeys.has(E.key),V=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let O=!1;E&&T?E.data.isEqual(T.data)?L!==V&&(r.track({type:3,doc:T}),O=!0):this.su(E,T)||(r.track({type:2,doc:T}),O=!0,(g&&this.eu(T,g)>0||x&&this.eu(T,x)<0)&&(p=!0)):!E&&T?(r.track({type:0,doc:T}),O=!0):E&&!T&&(r.track({type:1,doc:E}),O=!0,(g||x)&&(p=!0)),O&&(T?(d=d.add(T),u=V?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:d,iu:r,Ss:p,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,w)=>(function(T,L){const V=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Vt:O})}};return V(T)-V(L)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(r),o=o??!1;const p=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,x=g!==this.Xa;return this.Xa=g,d.length!==0||x?{snapshot:new To(this.query,e.tu,u,d,e.mutatedKeys,g===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jw,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=bt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new p2(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new m2(r))})),t}cu(e){this.Za=e.ks,this.Ya=bt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return To.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Pg="SyncEngine";class yI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vI{constructor(e){this.key=e,this.hu=!1}}class wI{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new yl((p=>DN(p)),hf),this.Iu=new Map,this.Eu=new Set,this.Ru=new nn(Fe.comparator),this.Au=new Map,this.Vu=new _g,this.du={},this.mu=new Map,this.fu=jo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _I(s,e,t=!0){const r=w2(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await g2(r,e,t,!0),o}async function NI(s,e){const t=w2(s);await g2(t,e,!0,!1)}async function g2(s,e,t,r){const o=await q4(s.localStore,Va(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,t);let p;return r&&(p=await EI(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&o2(s.remoteStore,o),p}async function EI(s,e,t,r,o){s.pu=(w,E,T)=>(async function(V,O,B,Y){let $=O.view.ru(B);$.Ss&&($=await Gw(V.localStore,O.query,!1).then((({documents:j})=>O.view.ru(j,$))));const ie=Y&&Y.targetChanges.get(O.targetId),he=Y&&Y.targetMismatches.get(O.targetId)!=null,oe=O.view.applyChanges($,V.isPrimaryClient,ie,he);return n1(V,O.targetId,oe.au),oe.snapshot})(s,w,E,T);const u=await Gw(s.localStore,e,!0),d=new bI(e,u.ks),p=d.ru(u.documents),g=Au.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),x=d.applyChanges(p,s.isPrimaryClient,g);n1(s,t,x.au);const b=new yI(e,t,d);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),x.snapshot}async function SI(s,e,t){const r=nt(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((d=>!hf(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await T0(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&jg(r.remoteStore,o.targetId),k0(r,o.targetId)})).catch(Po)):(k0(r,o.targetId),await T0(r.localStore,o.targetId,!0))}async function jI(s,e){const t=nt(s),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),jg(t.remoteStore,r.targetId))}async function TI(s,e,t){const r=MI(s);try{const o=await(function(d,p){const g=nt(d),x=Rt.now(),b=p.reduce(((T,L)=>T.add(L.key)),bt());let w,E;return g.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let L=yr(),V=bt();return g.xs.getEntries(T,b).next((O=>{L=O,L.forEach(((B,Y)=>{Y.isValidDocument()||(V=V.add(B))}))})).next((()=>g.localDocuments.getOverlayedDocuments(T,L))).next((O=>{w=O;const B=[];for(const Y of p){const $=zR(Y,w.get(Y.key).overlayedDocument);$!=null&&B.push(new Ei(Y.key,$,SN($.value.mapValue),Qs.exists(!0)))}return g.mutationQueue.addMutationBatch(T,x,B,p)})).next((O=>{E=O;const B=O.applyToLocalDocumentSet(w,V);return g.documentOverlayCache.saveOverlays(T,O.batchId,B)}))})).then((()=>({batchId:E.batchId,changes:PN(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let x=d.du[d.currentUser.toKey()];x||(x=new nn(xt)),x=x.insert(p,g),d.du[d.currentUser.toKey()]=x})(r,o.batchId,t),await ku(r,o.changes),await yf(r.remoteStore)}catch(o){const u=Rg(o,"Failed to persist write");t.reject(u)}}async function x2(s,e){const t=nt(s);try{const r=await U4(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=t.Au.get(u);d&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?It(d.hu,14607):o.removedDocuments.size>0&&(It(d.hu,42227),d.hu=!1))})),await ku(t,r,e)}catch(r){await Po(r)}}function t1(s,e,t){const r=nt(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=nt(d);g.onlineState=p;let x=!1;g.queries.forEach(((b,w)=>{for(const E of w.ba)E.va(p)&&(x=!0)})),x&&Mg(g)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AI(s,e,t){const r=nt(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),u=o&&o.key;if(u){let d=new nn(Fe.comparator);d=d.insert(u,Wn.newNoDocument(u,Xe.min()));const p=bt().add(u),g=new gf(Xe.min(),new Map,new nn(xt),d,p);await x2(r,g),r.Ru=r.Ru.remove(u),r.Au.delete(e),Vg(r)}else await T0(r.localStore,e,!1).then((()=>k0(r,e,t))).catch(Po)}async function CI(s,e){const t=nt(s),r=e.batch.batchId;try{const o=await L4(t.localStore,e);y2(t,r,null),b2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ku(t,o)}catch(o){await Po(o)}}async function kI(s,e,t){const r=nt(s);try{const o=await(function(d,p){const g=nt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let b;return g.mutationQueue.lookupMutationBatch(x,p).next((w=>(It(w!==null,37113),b=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,b))).next((()=>g.localDocuments.getDocuments(x,b)))}))})(r.localStore,e);y2(r,e,t),b2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ku(r,o)}catch(o){await Po(o)}}function b2(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function y2(s,e,t){const r=nt(s);let o=r.du[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function k0(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||v2(s,r)}))}function v2(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(jg(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),Vg(s))}function n1(s,e,t){for(const r of t)r instanceof m2?(s.Vu.addReference(r.key,e),RI(s,r)):r instanceof p2?(Me(Pg,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||v2(s,r.key)):We(19791,{wu:r})}function RI(s,e){const t=e.key,r=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(r)||(Me(Pg,"New document in limbo: "+t),s.Eu.add(r),Vg(s))}function Vg(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Fe(Yt.fromString(e)),r=s.fu.next();s.Au.set(r,new vI(t)),s.Ru=s.Ru.insert(t,r),o2(s.remoteStore,new ri(Va(df(t.path)),r,"TargetPurposeLimboResolution",of.ce))}}async function ku(s,e,t){const r=nt(s),o=[],u=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{d.push(r.pu(g,e,t).then((x=>{if((x||t)&&r.isPrimaryClient){const b=x?!x.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(x){o.push(x);const b=Eg.Es(g.targetId,x);u.push(b)}})))})),await Promise.all(d),r.Pu.J_(o),await(async function(g,x){const b=nt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ye.forEach(x,(E=>ye.forEach(E.Ts,(T=>b.persistence.referenceDelegate.addReference(w,E.targetId,T))).next((()=>ye.forEach(E.Is,(T=>b.persistence.referenceDelegate.removeReference(w,E.targetId,T)))))))))}catch(w){if(!Vo(w))throw w;Me(Sg,"Failed to update sequence numbers: "+w)}for(const w of x){const E=w.targetId;if(!w.fromCache){const T=b.vs.get(E),L=T.snapshotVersion,V=T.withLastLimboFreeSnapshotVersion(L);b.vs=b.vs.insert(E,V)}}})(r.localStore,u))}async function II(s,e){const t=nt(s);if(!t.currentUser.isEqual(e)){Me(Pg,"User change. New user:",e.toKey());const r=await a2(t.localStore,e);t.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Re(ge.CANCELLED,d))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ku(t,r.Ns)}}function DI(s,e){const t=nt(s),r=t.Au.get(e);if(r&&r.hu)return bt().add(r.key);{let o=bt();const u=t.Iu.get(e);if(!u)return o;for(const d of u){const p=t.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function w2(s){const e=nt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=x2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AI.bind(null,e),e.Pu.J_=gI.bind(null,e.eventManager),e.Pu.yu=xI.bind(null,e.eventManager),e}function MI(s){const e=nt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kI.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return V4(this.persistence,new M4,e.initialUser,this.serializer)}Cu(e){return new s2(Ng.Vi,this.serializer)}Du(e){return new $4}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class OI extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){It(this.persistence.referenceDelegate instanceof $h,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new y4(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ds.withCacheSize(this.cacheSizeBytes):ds.DEFAULT;return new s2((r=>$h.Vi(r,t)),this.serializer)}}class R0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>t1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=II.bind(null,this.syncEngine),await fI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pI})()}createDatastore(e){const t=xf(e.databaseInfo.databaseId),r=K4(e.databaseInfo);return eI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,u,d,p){return new nI(r,o,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>t1(this.syncEngine,t,0)),(function(){return Kw.v()?new Kw:new H4})())}createSyncEngine(e,t){return(function(o,u,d,p,g,x,b){const w=new wI(o,u,d,p,g,x);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=nt(t);Me(dl,"RemoteStore shutting down."),r.Ea.add(5),await Cu(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}R0.provider={build:()=>new R0};class Lg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const xi="FirestoreClient";class PI{constructor(e,t,r,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=o,this.user=Yn.UNAUTHENTICATED,this.clientId=dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async d=>{Me(xi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(Me(xi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Rg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Gp(s,e){s.asyncQueue.verifyOperationInProgress(),Me(xi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await a2(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function s1(s,e){s.asyncQueue.verifyOperationInProgress();const t=await VI(s);Me(xi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>Xw(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>Xw(e.remoteStore,o))),s._onlineComponents=e}async function VI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Me(xi,"Using user provided OfflineComponentProvider");try{await Gp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ge.FAILED_PRECONDITION||o.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;_o("Error using user provided cache. Falling back to memory cache: "+t),await Gp(s,new Gh)}}else Me(xi,"Using default OfflineComponentProvider"),await Gp(s,new OI(void 0));return s._offlineComponents}async function _2(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Me(xi,"Using user provided OnlineComponentProvider"),await s1(s,s._uninitializedComponentsProvider._online)):(Me(xi,"Using default OnlineComponentProvider"),await s1(s,new R0))),s._onlineComponents}function LI(s){return _2(s).then((e=>e.syncEngine))}async function Yh(s){const e=await _2(s),t=e.eventManager;return t.onListen=_I.bind(null,e.syncEngine),t.onUnlisten=SI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=NI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jI.bind(null,e.syncEngine),t}function UI(s,e,t,r){const o=new Lg(r),u=new Og(e,o,t);return s.asyncQueue.enqueueAndForget((async()=>Ig(await Yh(s),u))),()=>{o.Nu(),s.asyncQueue.enqueueAndForget((async()=>Dg(await Yh(s),u)))}}function BI(s,e,t={}){const r=new mr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,x){const b=new Lg({next:E=>{b.Nu(),d.enqueueAndForget((()=>Dg(u,w)));const T=E.docs.has(p);!T&&E.fromCache?x.reject(new Re(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&E.fromCache&&g&&g.source==="server"?x.reject(new Re(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(E)},error:E=>x.reject(E)}),w=new Og(df(p.path),b,{includeMetadataChanges:!0,Ka:!0});return Ig(u,w)})(await Yh(s),s.asyncQueue,e,t,r))),r.promise}function zI(s,e,t={}){const r=new mr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,x){const b=new Lg({next:E=>{b.Nu(),d.enqueueAndForget((()=>Dg(u,w))),E.fromCache&&g.source==="server"?x.reject(new Re(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(E)},error:E=>x.reject(E)}),w=new Og(p,b,{includeMetadataChanges:!0,Ka:!0});return Ig(u,w)})(await Yh(s),s.asyncQueue,e,t,r))),r.promise}function qI(s,e){const t=new mr;return s.asyncQueue.enqueueAndForget((async()=>TI(await LI(s),e,t))),t.promise}function N2(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const FI="ComponentProvider",a1=new Map;function $I(s,e,t,r,o){return new cR(s,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,N2(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}const E2="firestore.googleapis.com",r1=!0;class i1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E2,this.ssl=r1}else this.host=e.host,this.ssl=e.ssl??r1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=n2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<x4)throw new Re(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N2(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vf{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qk;switch(r.type){case"firstParty":return new Gk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Re(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=a1.get(t);r&&(Me(FI,"Removing Datastore"),a1.delete(t),r.terminate())})(this),Promise.resolve()}}function HI(s,e,t,r={}){s=ps(s,vf);const o=vi(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;o&&(X0(`https://${p}`),J0("Firestore",!0)),u.host!==E2&&u.host!==p&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:r};if(!il(g,d)&&(s._setSettings(g),r.mockUserToken)){let x,b;if(typeof r.mockUserToken=="string")x=r.mockUserToken,b=Yn.MOCK_USER;else{x=y_(r.mockUserToken,s._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Re(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Yn(w)}s._authCredentials=new Fk(new fN(x,b))}}class wl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wl(this.firestore,e,this._query)}}class on{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Su(t,on._jsonSchema))return new on(e,r||null,new Fe(Yt.fromString(t.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:Tn("string",on._jsonSchemaVersion),referencePath:Tn("string")};class ci extends wl{constructor(e,t,r){super(e,t,df(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new Fe(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function tt(s,e,...t){if(s=en(s),mN("collection","path",e),s instanceof vf){const r=Yt.fromString(e,...t);return yw(r),new ci(s,null,r)}{if(!(s instanceof on||s instanceof ci))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Yt.fromString(e,...t));return yw(r),new ci(s.firestore,null,r)}}function Qe(s,e,...t){if(s=en(s),arguments.length===1&&(e=dg.newId()),mN("doc","path",e),s instanceof vf){const r=Yt.fromString(e,...t);return bw(r),new on(s,null,new Fe(r))}{if(!(s instanceof on||s instanceof ci))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Yt.fromString(e,...t));return bw(r),new on(s.firestore,s instanceof ci?s.converter:null,new Fe(r))}}const l1="AsyncQueue";class o1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new i2(this,"async_queue_retry"),this._c=()=>{const r=Hp();r&&Me(l1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Hp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new mr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Vo(e))throw e;Me(l1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,br("INTERNAL UNHANDLED ERROR: ",c1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=kg.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&We(47125,{Pc:c1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function c1(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class vr extends vf{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new o1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o1(e),this._firestoreClient=void 0,await e}}}function GI(s,e){const t=typeof s=="object"?s:tg(),r=typeof s=="string"?s:Lh,o=nf(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=g_("firestore");u&&HI(o,...u)}return o}function wf(s){if(s._terminated)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||YI(s),s._firestoreClient}function YI(s){const e=s._freezeSettings(),t=$I(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new PI(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(qn.fromBase64String(e))}catch(t){throw new Re(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ks(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ks._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,Ks._jsonSchema))return Ks.fromBase64String(e.bytes)}}Ks._jsonSchemaVersion="firestore/bytes/1.0",Ks._jsonSchema={type:Tn("string",Ks._jsonSchemaVersion),bytes:Tn("string")};class Ug{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _f{constructor(e){this._methodName=e}}class Ua{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ua._jsonSchemaVersion}}static fromJSON(e){if(Su(e,Ua._jsonSchema))return new Ua(e.latitude,e.longitude)}}Ua._jsonSchemaVersion="firestore/geoPoint/1.0",Ua._jsonSchema={type:Tn("string",Ua._jsonSchemaVersion),latitude:Tn("number"),longitude:Tn("number")};class ca{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ca._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,ca._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ca(e.vectorValues);throw new Re(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ca._jsonSchemaVersion="firestore/vectorValue/1.0",ca._jsonSchema={type:Tn("string",ca._jsonSchemaVersion),vectorValues:Tn("object")};const WI=/^__.*__$/;class KI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ei(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tu(e,this.data,t,this.fieldTransforms)}}class S2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ei(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function j2(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{dataSource:s})}}class Bg{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Wh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(j2(this.dataSource)&&WI.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class QI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||xf(e)}createContext(e,t,r,o=!1){return new Bg({dataSource:e,methodName:t,targetDoc:r,path:zn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nf(s){const e=s._freezeSettings(),t=xf(s._databaseId);return new QI(s._databaseId,!!e.ignoreUndefinedProperties,t)}function T2(s,e,t,r,o,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,t,o);qg("Data must be an object, but it was:",d,r);const p=A2(r,d);let g,x;if(u.merge)g=new Rs(d.fieldMask),x=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const E=Ao(e,w,t);if(!d.contains(E))throw new Re(ge.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);R2(b,E)||b.push(E)}g=new Rs(b),x=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=d.fieldTransforms;return new KI(new hs(p),g,x)}class Ef extends _f{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ef}}class zg extends _f{_toFieldTransform(e){return new VR(e.path,new fu)}isEqual(e){return e instanceof zg}}function XI(s,e,t,r){const o=s.createContext(1,e,t);qg("Data must be an object, but it was:",o,r);const u=[],d=hs.empty();Ni(r,((g,x)=>{const b=k2(e,g,t);x=en(x);const w=o.childContextForFieldPath(b);if(x instanceof Ef)u.push(b);else{const E=Ru(x,w);E!=null&&(u.push(b),d.set(b,E))}}));const p=new Rs(u);return new S2(d,p,o.fieldTransforms)}function JI(s,e,t,r,o,u){const d=s.createContext(1,e,t),p=[Ao(e,r,t)],g=[o];if(u.length%2!=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<u.length;E+=2)p.push(Ao(e,u[E])),g.push(u[E+1]);const x=[],b=hs.empty();for(let E=p.length-1;E>=0;--E)if(!R2(x,p[E])){const T=p[E];let L=g[E];L=en(L);const V=d.childContextForFieldPath(T);if(L instanceof Ef)x.push(T);else{const O=Ru(L,V);O!=null&&(x.push(T),b.set(T,O))}}const w=new Rs(x);return new S2(b,w,d.fieldTransforms)}function ZI(s,e,t,r=!1){return Ru(t,s.createContext(r?4:3,e))}function Ru(s,e){if(C2(s=en(s)))return qg("Unsupported field value:",e,s),A2(s,e);if(s instanceof _f)return(function(r,o){if(!j2(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const u=[];let d=0;for(const p of r){let g=Ru(p,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MR(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Rt.fromDate(r);return{timestampValue:Fh(o.serializer,u)}}if(r instanceof Rt){const u=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fh(o.serializer,u)}}if(r instanceof Ua)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ks)return{bytesValue:WN(o.serializer,r._byteString)};if(r instanceof on){const u=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(u))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:wg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ca)return(function(d,p){const g=d instanceof ca?d.toArray():d;return{mapValue:{fields:{[NN]:{stringValue:EN},[Uh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return xg(p.serializer,b)}))}}}}}})(r,o);if(t2(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${lf(r)}`)})(s,e)}function A2(s,e){const t={};return xN(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(s,((r,o)=>{const u=Ru(o,e.childContextForField(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function C2(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Rt||s instanceof Ua||s instanceof Ks||s instanceof on||s instanceof _f||s instanceof ca||t2(s))}function qg(s,e,t){if(!C2(t)||!pN(t)){const r=lf(t);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function Ao(s,e,t){if((e=en(e))instanceof Ug)return e._internalPath;if(typeof e=="string")return k2(s,e);throw Wh("Field path arguments must be of type string or ",s,!1,void 0,t)}const e6=new RegExp("[~\\*/\\[\\]]");function k2(s,e,t){if(e.search(e6)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Ug(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Wh(s,e,t,r,o){const u=r&&!r.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${r}`),d&&(g+=` in document ${o}`),g+=")"),new Re(ge.INVALID_ARGUMENT,p+s+g)}function R2(s,e){return s.some((t=>t.isEqual(e)))}class t6{convertValue(e,t="none"){switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ni(e,((o,u)=>{r[o]=this.convertValue(u,t)})),r}convertVectorValue(e){const t=e.fields?.[Uh].arrayValue?.values?.map((r=>gn(r.doubleValue)));return new ca(t)}convertGeoPoint(e){return new Ua(gn(e.latitude),gn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=uf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const t=fi(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);It(e2(r),9688,{name:e});const o=new du(r.get(1),r.get(3)),u=new Fe(r.popFirst(5));return o.isEqual(t)||br(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class Fg extends t6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}}function $g(){return new zg("serverTimestamp")}const u1="@firebase/firestore",d1="4.10.0";function h1(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class I2{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new n6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Ao("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class n6 extends I2{data(){return super.data()}}function D2(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Re(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hg{}class s6 extends Hg{}function Ms(s,e,...t){let r=[];e instanceof Hg&&r.push(e),r=r.concat(t),(function(u){const d=u.filter((g=>g instanceof Gg)).length,p=u.filter((g=>g instanceof Sf)).length;if(d>1||d>0&&p>0)throw new Re(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Sf extends s6{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sf(e,t,r)}_apply(e){const t=this._parse(e);return M2(e._query,t),new wl(e.firestore,e.converter,w0(e._query,t))}_parse(e){const t=Nf(e.firestore);return(function(u,d,p,g,x,b,w){let E;if(x.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){m1(w,b);const L=[];for(const V of w)L.push(f1(g,u,V));E={arrayValue:{values:L}}}else E=f1(g,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||m1(w,b),E=ZI(p,d,w,b==="in"||b==="not-in");return jn.create(x,b,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ms(s,e,t){const r=e,o=Ao("where",s);return Sf._create(o,r,t)}class Gg extends Hg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:fa.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let d=o;const p=u.getFlattenedFilters();for(const g of p)M2(d,g),d=w0(d,g)})(e._query,t),new wl(e.firestore,e.converter,w0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function f1(s,e,t){if(typeof(t=en(t))=="string"){if(t==="")throw new Re(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IN(e)&&t.indexOf("/")!==-1)throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!Fe.isDocumentKey(r))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tw(s,new Fe(r))}if(t instanceof on)return Tw(s,t._key);throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lf(t)}.`)}function m1(s,e){if(!Array.isArray(s)||s.length===0)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M2(s,e){const t=(function(o,u){for(const d of o)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Re(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function O2(s,e,t){let r;return r=s?s.toFirestore(e):e,r}class Kc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sl extends I2{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ao("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=sl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}sl._jsonSchemaVersion="firestore/documentSnapshot/1.0",sl._jsonSchema={type:Tn("string",sl._jsonSchemaVersion),bundleSource:Tn("string","DocumentSnapshot"),bundleName:Tn("string"),bundle:Tn("string")};class Nh extends sl{data(e={}){return super.data(e)}}class al{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Kc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Nh(this._firestore,this._userDataWriter,r.key,r,new Kc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new Nh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Kc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new Nh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Kc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let x=-1,b=-1;return p.type!==0&&(x=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),b=d.indexOf(p.doc.key)),{type:a6(p.type),doc:g,oldIndex:x,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=al._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function a6(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:s})}}al._jsonSchemaVersion="firestore/querySnapshot/1.0",al._jsonSchema={type:Tn("string",al._jsonSchemaVersion),bundleSource:Tn("string","QuerySnapshot"),bundleName:Tn("string"),bundle:Tn("string")};function Yp(s){s=ps(s,on);const e=ps(s.firestore,vr),t=wf(e);return BI(t,s._key).then((r=>P2(e,s,r)))}function Os(s){s=ps(s,wl);const e=ps(s.firestore,vr),t=wf(e),r=new Fg(e);return D2(s._query),zI(t,s._query).then((o=>new al(e,r,s,o)))}function Wp(s,e,t){s=ps(s,on);const r=ps(s.firestore,vr),o=O2(s.converter,e),u=Nf(r);return jf(r,[T2(u,"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Qs.none())])}function it(s,e,t,...r){s=ps(s,on);const o=ps(s.firestore,vr),u=Nf(o);let d;return d=typeof(e=en(e))=="string"||e instanceof Ug?JI(u,"updateDoc",s._key,e,t,r):XI(u,"updateDoc",s._key,e),jf(o,[d.toMutation(s._key,Qs.exists(!0))])}function r6(s){return jf(ps(s.firestore,vr),[new bg(s._key,Qs.none())])}function wr(s,e){const t=ps(s.firestore,vr),r=Qe(s),o=O2(s.converter,e),u=Nf(s.firestore);return jf(t,[T2(u,"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Qs.exists(!1))]).then((()=>r))}function tn(s,...e){s=en(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||h1(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(h1(e[r])){const x=e[r];e[r]=x.next?.bind(x),e[r+1]=x.error?.bind(x),e[r+2]=x.complete?.bind(x)}let u,d,p;if(s instanceof on)d=ps(s.firestore,vr),p=df(s._key.path),u={next:x=>{e[r]&&e[r](P2(d,s,x))},error:e[r+1],complete:e[r+2]};else{const x=ps(s,wl);d=ps(x.firestore,vr),p=x._query;const b=new Fg(d);u={next:w=>{e[r]&&e[r](new al(d,b,x,w))},error:e[r+1],complete:e[r+2]},D2(s._query)}const g=wf(d);return UI(g,p,o,u)}function jf(s,e){const t=wf(s);return qI(t,e)}function P2(s,e,t){const r=t.docs.get(e._key),o=new Fg(s);return new sl(s,o,e._key,r,new Kc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){zk(xl),ll(new di("firestore",((r,{instanceIdentifier:o,options:u})=>{const d=r.getProvider("app").getImmediate(),p=new vr(new $k(r.getProvider("auth-internal")),new Yk(d,r.getProvider("app-check-internal")),uR(d,o),d);return u={useFetchStreams:t,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Ma(u1,d1,e),Ma(u1,d1,"esm2020")})();const V2="firebasestorage.googleapis.com",L2="storageBucket",i6=120*1e3,l6=600*1e3;class un extends qa{constructor(e,t,r=0){super(Kp(e),`Firebase Storage: ${t} (${Kp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,un.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var cn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(cn||(cn={}));function Kp(s){return"storage/"+s}function Yg(){const s="An unknown error occurred, please check the error payload for server response.";return new un(cn.UNKNOWN,s)}function o6(s){return new un(cn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function c6(s){return new un(cn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function u6(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new un(cn.UNAUTHENTICATED,s)}function d6(){return new un(cn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function h6(s){return new un(cn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function f6(){return new un(cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function m6(){return new un(cn.CANCELED,"User canceled the upload/download.")}function p6(s){return new un(cn.INVALID_URL,"Invalid URL '"+s+"'.")}function g6(s){return new un(cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function x6(){return new un(cn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+L2+"' property when initializing the app?")}function b6(){return new un(cn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function y6(){return new un(cn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v6(s){return new un(cn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function I0(s){return new un(cn.INVALID_ARGUMENT,s)}function U2(){return new un(cn.APP_DELETED,"The Firebase app was deleted.")}function w6(s){return new un(cn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function su(s,e){return new un(cn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function Bc(s){throw new un(cn.INTERNAL_ERROR,"Internal error: "+s)}class Is{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Is.makeFromUrl(e,t)}catch{return new Is(e,"")}if(r.path==="")return r;throw g6(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function x(ie){ie.path_=decodeURIComponent(ie.path)}const b="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",T=new RegExp(`^https?://${w}/${b}/b/${o}/o${E}`,"i"),L={bucket:1,path:3},V=t===V2?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",B=new RegExp(`^https?://${V}/${o}/${O}`,"i"),$=[{regex:p,indices:g,postModify:u},{regex:T,indices:L,postModify:x},{regex:B,indices:{bucket:1,path:2},postModify:x}];for(let ie=0;ie<$.length;ie++){const he=$[ie],oe=he.regex.exec(e);if(oe){const j=oe[he.indices.bucket];let A=oe[he.indices.path];A||(A=""),r=new Is(j,A),he.postModify(r);break}}if(r==null)throw p6(e);return r}}class _6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function N6(s,e,t){let r=1,o=null,u=null,d=!1,p=0;function g(){return p===2}let x=!1;function b(...O){x||(x=!0,e.apply(null,O))}function w(O){o=setTimeout(()=>{o=null,s(T,g())},O)}function E(){u&&clearTimeout(u)}function T(O,...B){if(x){E();return}if(O){E(),b.call(null,O,...B);return}if(g()||d){E(),b.call(null,O,...B);return}r<64&&(r*=2);let $;p===1?(p=2,$=0):$=(r+Math.random())*1e3,w($)}let L=!1;function V(O){L||(L=!0,E(),!x&&(o!==null?(O||(p=2),clearTimeout(o),w(0)):O||(p=1)))}return w(0),u=setTimeout(()=>{d=!0,V(!0)},t),V}function E6(s){s(!1)}function S6(s){return s!==void 0}function j6(s){return typeof s=="object"&&!Array.isArray(s)}function Wg(s){return typeof s=="string"||s instanceof String}function p1(s){return Kg()&&s instanceof Blob}function Kg(){return typeof Blob<"u"}function g1(s,e,t,r){if(r<e)throw I0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>t)throw I0(`Invalid value for '${s}'. Expected ${t} or less.`)}function Tf(s,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${s}`}function B2(s){const e=encodeURIComponent;let t="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var rl;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(rl||(rl={}));function T6(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||o||u}class A6{constructor(e,t,r,o,u,d,p,g,x,b,w,E=!0,T=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=x,this.progressCallback_=b,this.connectionFactory_=w,this.retry=E,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,V)=>{this.resolve_=L,this.reject_=V,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new ih(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,x=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,x)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===rl.NO_ERROR,g=u.getStatus();if(!p||T6(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===rl.ABORT;r(!1,new ih(!1,null,b));return}const x=this.successCodes_.indexOf(g)!==-1;r(!0,new ih(x,u))})},t=(r,o)=>{const u=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());S6(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=Yg();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?U2():m6();d(g)}else{const g=f6();d(g)}};this.canceled_?t(!1,new ih(!1,null,!0)):this.backoffId_=N6(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ih{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function C6(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function k6(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function R6(s,e){e&&(s["X-Firebase-GMPID"]=e)}function I6(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function D6(s,e,t,r,o,u,d=!0,p=!1){const g=B2(s.urlParams),x=s.url+g,b=Object.assign({},s.headers);return R6(b,e),C6(b,t),k6(b,u),I6(b,r),new A6(x,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,p)}function M6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function O6(...s){const e=M6();if(e!==void 0){const t=new e;for(let r=0;r<s.length;r++)t.append(s[r]);return t.getBlob()}else{if(Kg())return new Blob(s);throw new un(cn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function P6(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function V6(s){if(typeof atob>"u")throw v6("base-64");return atob(s)}const Da={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qp{constructor(e,t){this.data=e,this.contentType=t||null}}function L6(s,e){switch(s){case Da.RAW:return new Qp(z2(e));case Da.BASE64:case Da.BASE64URL:return new Qp(q2(s,e));case Da.DATA_URL:return new Qp(B6(e),z6(e))}throw Yg()}function z2(s){const e=[];for(let t=0;t<s.length;t++){let r=s.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=r,d=s.charCodeAt(++t);r=65536|(u&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function U6(s){let e;try{e=decodeURIComponent(s)}catch{throw su(Da.DATA_URL,"Malformed data URL.")}return z2(e)}function q2(s,e){switch(s){case Da.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw su(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Da.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw su(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=V6(e)}catch(o){throw o.message.includes("polyfill")?o:su(s,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class F2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw su(Da.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=q6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function B6(s){const e=new F2(s);return e.base64?q2(Da.BASE64,e.rest):U6(e.rest)}function z6(s){return new F2(s).contentType}function q6(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class ai{constructor(e,t){let r=0,o="";p1(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(p1(this.data_)){const r=this.data_,o=P6(r,e,t);return o===null?null:new ai(o)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ai(r,!0)}}static getBlob(...e){if(Kg()){const t=e.map(r=>r instanceof ai?r.data_:r);return new ai(O6.apply(null,t))}else{const t=e.map(d=>Wg(d)?L6(Da.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let p=0;p<d.length;p++)o[u++]=d[p]}),new ai(o,!0)}}uploadData(){return this.data_}}function $2(s){let e;try{e=JSON.parse(s)}catch{return null}return j6(e)?e:null}function F6(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function $6(s,e){const t=e.split("/").filter(r=>r.length>0).join("/");return s.length===0?t:s+"/"+t}function H2(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function H6(s,e){return e}class Zn{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||H6}}let lh=null;function G6(s){return!Wg(s)||s.length<2?s:H2(s)}function G2(){if(lh)return lh;const s=[];s.push(new Zn("bucket")),s.push(new Zn("generation")),s.push(new Zn("metageneration")),s.push(new Zn("name","fullPath",!0));function e(u,d){return G6(d)}const t=new Zn("name");t.xform=e,s.push(t);function r(u,d){return d!==void 0?Number(d):d}const o=new Zn("size");return o.xform=r,s.push(o),s.push(new Zn("timeCreated")),s.push(new Zn("updated")),s.push(new Zn("md5Hash",null,!0)),s.push(new Zn("cacheControl",null,!0)),s.push(new Zn("contentDisposition",null,!0)),s.push(new Zn("contentEncoding",null,!0)),s.push(new Zn("contentLanguage",null,!0)),s.push(new Zn("contentType",null,!0)),s.push(new Zn("metadata","customMetadata",!0)),lh=s,lh}function Y6(s,e){function t(){const r=s.bucket,o=s.fullPath,u=new Is(r,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function W6(s,e,t){const r={};r.type="file";const o=t.length;for(let u=0;u<o;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return Y6(r,s),r}function Y2(s,e,t){const r=$2(e);return r===null?null:W6(s,r,t)}function K6(s,e,t,r){const o=$2(e);if(o===null||!Wg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(x=>{const b=s.bucket,w=s.fullPath,E="/b/"+d(b)+"/o/"+d(w),T=Tf(E,t,r),L=B2({alt:"media",token:x});return T+L})[0]}function Q6(s,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}class Qg{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function W2(s){if(!s)throw Yg()}function X6(s,e){function t(r,o){const u=Y2(s,o,e);return W2(u!==null),u}return t}function J6(s,e){function t(r,o){const u=Y2(s,o,e);return W2(u!==null),K6(u,o,s.host,s._protocol)}return t}function K2(s){function e(t,r){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=d6():o=u6():t.getStatus()===402?o=c6(s.bucket):t.getStatus()===403?o=h6(s.path):o=r,o.status=t.getStatus(),o.serverResponse=r.serverResponse,o}return e}function Q2(s){const e=K2(s);function t(r,o){let u=e(r,o);return r.getStatus()===404&&(u=o6(s.path)),u.serverResponse=o.serverResponse,u}return t}function Z6(s,e,t){const r=e.fullServerUrl(),o=Tf(r,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new Qg(o,u,J6(s,t),d);return p.errorHandler=Q2(e),p}function e3(s,e){const t=e.fullServerUrl(),r=Tf(t,s.host,s._protocol),o="DELETE",u=s.maxOperationRetryTime;function d(g,x){}const p=new Qg(r,o,d,u);return p.successCodes=[200,204],p.errorHandler=Q2(e),p}function t3(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function n3(s,e,t){const r=Object.assign({},t);return r.fullPath=s.path,r.size=e.size(),r.contentType||(r.contentType=t3(null,e)),r}function s3(s,e,t,r,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let $="";for(let ie=0;ie<2;ie++)$=$+Math.random().toString().slice(2);return $}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const x=n3(e,r,o),b=Q6(x,t),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+x.contentType+`\r
\r
`,E=`\r
--`+g+"--",T=ai.getBlob(w,r,E);if(T===null)throw b6();const L={name:x.fullPath},V=Tf(u,s.host,s._protocol),O="POST",B=s.maxUploadRetryTime,Y=new Qg(V,O,X6(s,t),B);return Y.urlParams=L,Y.headers=d,Y.body=T.uploadData(),Y.errorHandler=K2(e),Y}class a3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=rl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=rl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=rl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o,u){if(this.sent_)throw Bc("cannot .send() more than once");if(vi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class r3 extends a3{initXhr(){this.xhr_.responseType="text"}}function Xg(){return new r3}class hl{constructor(e,t){this._service=e,t instanceof Is?this._location=t:this._location=Is.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new hl(e,t)}get root(){const e=new Is(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return H2(this._location.path)}get storage(){return this._service}get parent(){const e=F6(this._location.path);if(e===null)return null;const t=new Is(this._location.bucket,e);return new hl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw w6(e)}}function i3(s,e,t){s._throwIfRoot("uploadBytes");const r=s3(s.storage,s._location,G2(),new ai(e,!0),t);return s.storage.makeRequestWithTokens(r,Xg).then(o=>({metadata:o,ref:s}))}function l3(s){s._throwIfRoot("getDownloadURL");const e=Z6(s.storage,s._location,G2());return s.storage.makeRequestWithTokens(e,Xg).then(t=>{if(t===null)throw y6();return t})}function o3(s){s._throwIfRoot("deleteObject");const e=e3(s.storage,s._location);return s.storage.makeRequestWithTokens(e,Xg)}function c3(s,e){const t=$6(s._location.path,e),r=new Is(s._location.bucket,t);return new hl(s.storage,r)}function u3(s){return/^[A-Za-z]+:\/\//.test(s)}function d3(s,e){return new hl(s,e)}function X2(s,e){if(s instanceof Jg){const t=s;if(t._bucket==null)throw x6();const r=new hl(t,t._bucket);return e!=null?X2(r,e):r}else return e!==void 0?c3(s,e):s}function h3(s,e){if(e&&u3(e)){if(s instanceof Jg)return d3(s,e);throw I0("To use ref(service, url), the first argument must be a Storage instance.")}else return X2(s,e)}function x1(s,e){const t=e?.[L2];return t==null?null:Is.makeFromBucketSpec(t,s)}function f3(s,e,t,r={}){s.host=`${e}:${t}`;const o=vi(e);o&&(X0(`https://${s.host}/b`),J0("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=r;u&&(s._overrideAuthToken=typeof u=="string"?u:y_(u,s.app.options.projectId))}class Jg{constructor(e,t,r,o,u,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=V2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i6,this._maxUploadRetryTime=l6,this._requests=new Set,o!=null?this._bucket=Is.makeFromBucketSpec(o,this._host):this._bucket=x1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Is.makeFromBucketSpec(this._url,e):this._bucket=x1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){g1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){g1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ks(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new hl(this,e)}_makeRequest(e,t,r,o,u=!0){if(this._deleted)return new _6(U2());{const d=D6(e,this._appId,r,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const b1="@firebase/storage",y1="0.14.0";const J2="storage";function m3(s,e,t){return s=en(s),i3(s,e,t)}function p3(s){return s=en(s),l3(s)}function g3(s){return s=en(s),o3(s)}function v1(s,e){return s=en(s),h3(s,e)}function x3(s=tg(),e){s=en(s);const r=nf(s,J2).getImmediate({identifier:e}),o=g_("storage");return o&&b3(r,...o),r}function b3(s,e,t,r={}){f3(s,e,t,r)}function y3(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Jg(t,r,o,e,xl)}function v3(){ll(new di(J2,y3,"PUBLIC").setMultipleInstances(!0)),Ma(b1,y1,""),Ma(b1,y1,"esm2020")}v3();const w3={apiKey:"AIzaSyC1qZ9fK-6LFBxVWZsAD4dZq-KVg36A7f8",authDomain:"scheduler-65e51.firebaseapp.com",projectId:"scheduler-65e51",storageBucket:"scheduler-65e51.firebasestorage.app",messagingSenderId:"93993791456",appId:"1:93993791456:web:3a777a2da0dad4b8b74585"},Zg=__(w3),Ee=GI(Zg),fl=Vk(Zg),w1=x3(Zg);const Z2=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();const _3=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const N3=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());const _1=s=>{const e=N3(s);return e.charAt(0).toUpperCase()+e.slice(1)};var E3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const S3=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const j3=N.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:d,...p},g)=>N.createElement("svg",{ref:g,...E3,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:Z2("lucide",o),...!u&&!S3(p)&&{"aria-hidden":"true"},...p},[...d.map(([x,b])=>N.createElement(x,b)),...Array.isArray(u)?u:[u]]));const Ie=(s,e)=>{const t=N.forwardRef(({className:r,...o},u)=>N.createElement(j3,{ref:u,iconNode:e,className:Z2(`lucide-${_3(_1(s))}`,`lucide-${s}`,r),...o}));return t.displayName=_1(s),t};const T3=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],A3=Ie("arrow-down-right",T3);const C3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ba=Ie("arrow-left",C3);const k3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],au=Ie("arrow-right",k3);const R3=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],I3=Ie("arrow-up-down",R3);const D3=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],M3=Ie("arrow-up-right",D3);const O3=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],fo=Ie("bell",O3);const P3=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],V3=Ie("bot",P3);const L3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],ua=Ie("calendar-check",L3);const U3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],N1=Ie("calendar-days",U3);const B3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Vt=Ie("calendar",B3);const z3=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],q3=Ie("camera",z3);const F3=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ex=Ie("chart-column",F3);const $3=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],H3=Ie("chart-pie",$3);const G3=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],fs=Ie("check",G3);const Y3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],D0=Ie("chevron-down",Y3);const W3=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],eE=Ie("chevron-left",W3);const K3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Af=Ie("chevron-right",K3);const Q3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],M0=Ie("chevron-up",Q3);const X3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Kh=Ie("circle-alert",X3);const J3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ds=Ie("circle-check-big",J3);const Z3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ia=Ie("circle-x",Z3);const eD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kn=Ie("clock",eD);const tD=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],nD=Ie("code",tD);const sD=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],aD=Ie("coffee",sD);const rD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],iD=Ie("copy",rD);const lD=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],vo=Ie("credit-card",lD);const oD=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Cf=Ie("crown",oD);const cD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],uD=Ie("dollar-sign",cD);const dD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],hD=Ie("external-link",dD);const fD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mD=Ie("eye",fD);const pD=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],gD=Ie("ghost",pD);const xD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],bD=Ie("globe",xD);const yD=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],vD=Ie("headphones",yD);const wD=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],tx=Ie("heart",wD);const _D=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ND=Ie("image",_D);const ED=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],O0=Ie("list-ordered",ED);const SD=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],Qh=Ie("list-plus",SD);const jD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wo=Ie("loader-circle",jD);const TD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Xh=Ie("lock",TD);const AD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],CD=Ie("log-out",AD);const kD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],P0=Ie("mail",kD);const RD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ID=Ie("map-pin",RD);const DD=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Jh=Ie("message-circle",DD);const MD=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],V0=Ie("message-square",MD);const OD=[["path",{d:"M5 12h14",key:"1ays0h"}]],PD=Ie("minus",OD);const VD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],LD=Ie("palette",VD);const UD=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],tE=Ie("party-popper",UD);const BD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],nE=Ie("pen-line",BD);const zD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],L0=Ie("phone",zD);const qD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Xp=Ie("play",qD);const FD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bi=Ie("plus",FD);const $D=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sE=Ie("refresh-cw",$D);const HD=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],ui=Ie("repeat",HD);const GD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],YD=Ie("save",GD);const WD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],KD=Ie("search",WD);const QD=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Eh=Ie("send",QD);const XD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],JD=Ie("settings",XD);const ZD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],aE=Ie("sparkles",ZD);const eM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],E1=Ie("star",eM);const tM=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],S1=Ie("sticky-note",tM);const nM=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],gs=Ie("tag",nM);const sM=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],rE=Ie("thermometer",sM);const aM=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],iE=Ie("timer",aM);const rM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gu=Ie("trash-2",rM);const iM=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],nx=Ie("trending-up",iM);const lM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ml=Ie("triangle-alert",lM);const oM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],lE=Ie("user-plus",oM);const cM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],pl=Ie("user",cM);const uM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gt=Ie("users",uM);const dM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],da=Ie("x",dM);const hM=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],kf=Ie("zap",hM);function j1({className:s=""}){return i.jsxs(st,{to:"/",className:`flex items-center gap-2.5 ${s}`,children:[i.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(ua,{className:"w-[18px] h-[18px] text-white"})}),i.jsxs("span",{className:"text-xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function fM(){return i.jsxs("div",{className:"min-h-screen bg-white",children:[i.jsx("nav",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-100",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsx(j1,{}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(st,{to:"/login",className:"px-4 py-2.5 text-sm font-semibold text-slate-600 hover:text-slate-900 transition-colors",children:"Sign In"}),i.jsxs(st,{to:"/register",className:"hidden sm:inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:["Get Started Free",i.jsx(au,{className:"w-4 h-4"})]}),i.jsx(st,{to:"/register",className:"sm:hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all",children:"Start Free"})]})]})}),i.jsxs("section",{className:"relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 -z-10",children:[i.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-50 rounded-full blur-3xl opacity-60 -translate-y-1/2 translate-x-1/3"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-violet-50 rounded-full blur-3xl opacity-50 translate-y-1/3 -translate-x-1/4"})]}),i.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 pt-16 sm:pt-24 pb-16 sm:pb-20",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[i.jsxs("div",{className:"animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 bg-blue-50 border border-blue-100 rounded-full text-sm font-medium text-blue-700 mb-6",children:[i.jsx(aE,{className:"w-3.5 h-3.5"}),"Free for beauty professionals"]}),i.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-[3.5rem] font-extrabold text-slate-900 leading-[1.1] mb-6 tracking-tight",children:["Online booking",i.jsx("br",{}),i.jsx("span",{className:"text-blue-600",children:"made effortless"})]}),i.jsx("p",{className:"text-lg sm:text-xl text-slate-600 leading-relaxed mb-8 max-w-lg",children:"Let clients book 24/7. Manage your team, services, and schedule from one beautiful dashboard. No more phone tag."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-10",children:[i.jsxs(st,{to:"/register",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-base shadow-lg shadow-blue-600/25 hover:shadow-xl hover:shadow-blue-600/30 transition-all hover:-translate-y-0.5",children:["Start for Free",i.jsx(au,{className:"w-4 h-4"})]}),i.jsx("a",{href:"#how-it-works",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-base border border-slate-200 transition-all",children:"See How It Works"})]}),i.jsxs("div",{className:"flex items-center gap-5 text-sm text-slate-500",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Ds,{className:"w-4 h-4 text-emerald-500"}),i.jsx("span",{children:"Free to use"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Ds,{className:"w-4 h-4 text-emerald-500"}),i.jsx("span",{children:"No credit card"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Ds,{className:"w-4 h-4 text-emerald-500"}),i.jsx("span",{children:"Setup in 2 min"})]})]})]}),i.jsxs("div",{className:"relative animate-fade-in-up",style:{animationDelay:"150ms"},children:[i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl shadow-slate-200/60 border border-slate-200/80 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-slate-50 border-b border-slate-100",children:[i.jsxs("div",{className:"flex gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"})]}),i.jsx("div",{className:"flex-1 mx-4",children:i.jsx("div",{className:"bg-white border border-slate-200 rounded-lg px-3 py-1.5 text-xs text-slate-400 font-mono",children:"bookflow.app/shop/janes-salon"})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-sm font-bold",children:"J"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-slate-900",children:"Jane's Salon"}),i.jsx("div",{className:"text-xs text-slate-500",children:"Book your next appointment"})]})]}),i.jsx("div",{className:"space-y-2.5",children:[{name:"Haircut & Style",price:"$45",time:"45 min",color:"bg-blue-500"},{name:"Color Treatment",price:"$120",time:"2 hours",color:"bg-violet-500"},{name:"Blowout",price:"$35",time:"30 min",color:"bg-emerald-500"}].map(s=>i.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-slate-50 rounded-xl border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/50 transition-all cursor-default",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-2 h-8 ${s.color} rounded-full`}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-slate-800",children:s.name}),i.jsx("div",{className:"text-xs text-slate-500",children:s.time})]})]}),i.jsx("div",{className:"text-sm font-bold text-slate-900",children:s.price})]},s.name))})]})]}),i.jsxs("div",{className:"absolute -bottom-4 -left-4 bg-white rounded-xl shadow-lg shadow-slate-200/60 border border-slate-100 px-4 py-3 flex items-center gap-3 animate-float",children:[i.jsx("div",{className:"w-9 h-9 bg-emerald-100 rounded-full flex items-center justify-center",children:i.jsx(Ds,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Booking confirmed"}),i.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Tomorrow at 2:00 PM"})]})]})]})]})})]}),i.jsx("section",{className:"border-y border-slate-100 bg-slate-50/50",children:i.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-8 sm:py-10",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8 sm:gap-16 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"500+"}),i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Businesses trust SpotBookie"})]}),i.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"10,000+"}),i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Appointments booked"})]}),i.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 text-2xl sm:text-3xl font-extrabold text-slate-900",children:["4.9 ",i.jsx(E1,{className:"w-5 h-5 text-amber-400 fill-amber-400"})]}),i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Average rating"})]})]})})}),i.jsx("section",{className:"py-20 sm:py-28",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[i.jsxs("div",{className:"text-center mb-14",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Everything you need to run your bookings"}),i.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Built specifically for beauty professionals, salons, and service businesses. Simple, powerful, and free."})]}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 stagger-children",children:[{icon:i.jsx(Vt,{className:"w-6 h-6"}),title:"Smart Scheduling",desc:"Set weekly hours with breaks. Slots auto-generate so your calendar is always up to date.",color:"bg-blue-100 text-blue-600"},{icon:i.jsx(Gt,{className:"w-6 h-6"}),title:"Multi-Staff Support",desc:"Add your whole team. Each member gets their own schedule, hours, and bookings.",color:"bg-violet-100 text-violet-600"},{icon:i.jsx(kf,{className:"w-6 h-6"}),title:"Instant Booking",desc:"Clients pick a service, choose a stylist, and book  all in under a minute.",color:"bg-amber-100 text-amber-600"},{icon:i.jsx(bD,{className:"w-6 h-6"}),title:"Your Own Booking Page",desc:"Get a unique link to share anywhere. No app downloads needed for your clients.",color:"bg-emerald-100 text-emerald-600"}].map(s=>i.jsxs("div",{className:"group bg-white rounded-2xl p-7 border border-slate-200/80 hover:border-slate-300 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[i.jsx("div",{className:`w-12 h-12 ${s.color} rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300`,children:s.icon}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:s.title}),i.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:s.desc})]},s.title))})]})}),i.jsx("section",{id:"how-it-works",className:"py-20 sm:py-28 bg-slate-50 border-y border-slate-100",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[i.jsxs("div",{className:"text-center mb-14",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Up and running in minutes"}),i.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Three simple steps to start accepting online bookings today."})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8 lg:gap-12 relative",children:[i.jsx("div",{className:"hidden md:block absolute top-14 left-[calc(16.67%+1rem)] right-[calc(16.67%+1rem)] h-px bg-gradient-to-r from-blue-200 via-violet-200 to-emerald-200"}),[{step:"1",title:"Create your account",desc:"Sign up free in 30 seconds. Name your shop and you're in.",color:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/30"},{step:"2",title:"Set up your shop",desc:"Add your services, team, and weekly hours. SpotBookie handles the rest.",color:"from-violet-500 to-violet-600",shadow:"shadow-violet-500/30"},{step:"3",title:"Share your link",desc:"Send your booking page to clients. They book, you get notified.",color:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/30"}].map(s=>i.jsxs("div",{className:"relative text-center",children:[i.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${s.color} rounded-2xl flex items-center justify-center mx-auto mb-6 text-white text-xl font-extrabold shadow-lg ${s.shadow} relative z-10`,children:s.step}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:s.title}),i.jsx("p",{className:"text-slate-600 leading-relaxed max-w-xs mx-auto",children:s.desc})]},s.step))]})]})}),i.jsx("section",{className:"py-20 sm:py-28",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[i.jsxs("div",{className:"text-center mb-14",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Loved by professionals"}),i.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"See why salons and stylists are switching to SpotBookie."})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{quote:"SpotBookie replaced our paper appointment book. Clients love being able to book online anytime.",name:"Maria Santos",role:"Salon Owner",initials:"MS",color:"bg-blue-100 text-blue-700"},{quote:"Setting up was incredibly easy. I had my booking page live and shared with clients in under 10 minutes.",name:"David Chen",role:"Barber",initials:"DC",color:"bg-violet-100 text-violet-700"},{quote:"The multi-staff feature is perfect. Each stylist manages their own schedule and clients can pick who they want.",name:"Lisa Park",role:"Studio Manager",initials:"LP",color:"bg-emerald-100 text-emerald-700"}].map(s=>i.jsxs("div",{className:"bg-white rounded-2xl p-7 border border-slate-200/80 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[i.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(5)].map((e,t)=>i.jsx(E1,{className:"w-4 h-4 text-amber-400 fill-amber-400"},t))}),i.jsxs("p",{className:"text-slate-700 leading-relaxed mb-6",children:['"',s.quote,'"']}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 ${s.color} rounded-full flex items-center justify-center text-sm font-bold`,children:s.initials}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s.name}),i.jsx("div",{className:"text-xs text-slate-500",children:s.role})]})]})]},s.name))})]})}),i.jsxs("section",{className:"py-20 sm:py-28 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 -z-0",children:[i.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto px-5 sm:px-8 text-center",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold text-white mb-6 leading-tight",children:"Ready to streamline your bookings?"}),i.jsx("p",{className:"text-lg text-slate-400 mb-10 max-w-xl mx-auto",children:"Join hundreds of professionals who have ditched the old appointment book. Set up in minutes, free forever."}),i.jsxs(st,{to:"/register",className:"inline-flex items-center gap-2 px-8 py-4 bg-white hover:bg-slate-50 text-slate-900 rounded-xl font-bold text-lg transition-all hover:shadow-xl hover:shadow-white/10 hover:-translate-y-0.5",children:["Create Your Free Account",i.jsx(au,{className:"w-5 h-5"})]})]})]}),i.jsx("footer",{className:"bg-white border-t border-slate-100",children:i.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-10",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[i.jsx(j1,{}),i.jsxs("div",{className:"flex items-center gap-6 text-sm text-slate-500",children:[i.jsx(st,{to:"/register",className:"hover:text-slate-900 transition-colors",children:"Sign Up"}),i.jsx("span",{className:"text-slate-200",children:""}),i.jsx(st,{to:"/login",className:"hover:text-slate-900 transition-colors",children:"Sign In"}),i.jsx("span",{className:"text-slate-200",children:""}),i.jsx("a",{href:"#how-it-works",className:"hover:text-slate-900 transition-colors",children:"How It Works"})]}),i.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," SpotBookie. All rights reserved."]})]})})})]})}function mM(s){return s.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function pM(){const s=Io(),[e,t]=N.useState(""),[r,o]=N.useState(""),[u,d]=N.useState(""),[p,g]=N.useState(""),[x,b]=N.useState(!1),w=mM(e),E=async T=>{if(T.preventDefault(),g(""),!w){g("Please enter a valid shop name");return}if(u.length<6){g("Password must be at least 6 characters");return}b(!0);try{const L=Ms(tt(Ee,"shops"),ms("slug","==",w));if(!(await Os(L)).empty){g("A shop with that name already exists. Please choose a different name."),b(!1);return}const B=(await _C(fl,r,u)).user;await wr(tt(Ee,"shops"),{name:e.trim(),slug:w,ownerUid:B.uid,ownerEmail:r,createdAt:$g()}),s(`/shop/${w}/dashboard`)}catch(L){switch(L.code){case"auth/email-already-in-use":g("An account with this email already exists");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/weak-password":g("Password must be at least 6 characters");break;default:g("Registration failed. Please try again.")}}finally{b(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2.5",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(ua,{className:"w-5 h-5 text-white"})}),i.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Create your shop"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Set up your booking page in seconds  it's free"})]}),i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Shop Name"}),i.jsx("input",{type:"text",value:e,onChange:T=>{t(T.target.value),g("")},placeholder:"Jane's Salon",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),w&&i.jsxs("p",{className:"mt-1.5 text-xs text-slate-400",children:["Your page: ",i.jsxs("span",{className:"font-mono text-blue-600 font-medium",children:["bookflow.app/shop/",w]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:r,onChange:T=>{o(T.target.value),g("")},placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),i.jsx("input",{type:"password",value:u,onChange:T=>{d(T.target.value),g("")},placeholder:"At least 6 characters",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&i.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",p]})]}),i.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Creating your shop"]}):i.jsxs(i.Fragment,{children:["Create Shop",i.jsx(au,{className:"w-4 h-4"})]})})]}),i.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Already have an account?"," ",i.jsx(st,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Sign in"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(st,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[i.jsx(Ba,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function gM({user:s}){const e=Io(),[t,r]=N.useState(""),[o,u]=N.useState(""),[d,p]=N.useState(""),[g,x]=N.useState(!1);N.useState(()=>{if(!s)return;(async()=>{const E=Ms(tt(Ee,"shops"),ms("ownerUid","==",s.uid)),T=await Os(E);if(!T.empty){const L=T.docs[0].data();e(`/shop/${L.slug}/dashboard`,{replace:!0})}})()},[s,e]);const b=async w=>{w.preventDefault(),p(""),x(!0);try{const T=(await K_(fl,t,o)).user,L=Ms(tt(Ee,"shops"),ms("ownerUid","==",T.uid)),V=await Os(L);if(V.empty){p("No shop found for this account. Need to create one?"),await fl.signOut(),x(!1);return}const O=V.docs[0].data();e(`/shop/${O.slug}/dashboard`,{replace:!0})}catch(E){switch(E.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":p("Invalid email or password");break;case"auth/invalid-email":p("Please enter a valid email address");break;case"auth/too-many-requests":p("Too many failed attempts. Please try again later.");break;default:p("Login failed. Please try again.")}u("")}finally{x(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2.5",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(ua,{className:"w-5 h-5 text-white"})}),i.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:t,onChange:w=>{r(w.target.value),p("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),i.jsx("input",{type:"password",value:o,onChange:w=>{u(w.target.value),p("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${d?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),d&&i.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",d]})]}),i.jsx("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:g?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):i.jsxs(i.Fragment,{children:["Sign In",i.jsx(au,{className:"w-4 h-4"})]})})]}),i.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",i.jsx(st,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(st,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[i.jsx(Ba,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function oE({availableDates:s,selectedDate:e,onSelectDate:t}){const[r,o]=N.useState(new Date),u=B=>{const Y=B.getFullYear(),$=B.getMonth(),ie=new Date(Y,$,1),oe=new Date(Y,$+1,0).getDate(),j=ie.getDay();return{daysInMonth:oe,startingDayOfWeek:j,year:Y,month:$}},{daysInMonth:d,startingDayOfWeek:p,year:g,month:x}=u(r),b=()=>{o(new Date(r.getFullYear(),r.getMonth()-1))},w=()=>{o(new Date(r.getFullYear(),r.getMonth()+1))},E=B=>{const Y=`${g}-${String(x+1).padStart(2,"0")}-${String(B).padStart(2,"0")}`;return s.includes(Y)},T=B=>`${g}-${String(x+1).padStart(2,"0")}-${String(B).padStart(2,"0")}`===e,L=B=>{if(E(B)){const Y=`${g}-${String(x+1).padStart(2,"0")}-${String(B).padStart(2,"0")}`;t(Y)}},V=["January","February","March","April","May","June","July","August","September","October","November","December"],O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return i.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5 sm:p-6 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-5",children:[i.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(eE,{className:"w-5 h-5 text-slate-600"})}),i.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[V[x]," ",g]}),i.jsx("button",{onClick:w,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(Af,{className:"w-5 h-5 text-slate-600"})})]}),i.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:O.map(B=>i.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:B},B))}),i.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:p}).map((B,Y)=>i.jsx("div",{},`empty-${Y}`)),Array.from({length:d}).map((B,Y)=>{const $=Y+1,ie=E($),he=T($),oe=new Date,j=oe.getDate()===$&&oe.getMonth()===x&&oe.getFullYear()===g;return i.jsxs("button",{onClick:()=>L($),disabled:!ie,className:`
                relative p-2.5 sm:p-3 text-center rounded-lg text-sm font-semibold transition-all duration-200
                ${he?"bg-blue-600 text-white shadow-md shadow-blue-600/30":ie?"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 hover:border-emerald-300 cursor-pointer":j?"text-slate-900 font-bold":"text-slate-300 cursor-not-allowed"}
              `,children:[$,j&&!he&&i.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]},$)})]}),i.jsxs("div",{className:"mt-4 flex gap-5 text-xs text-slate-500",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 bg-emerald-50 border border-emerald-200 rounded"}),i.jsx("span",{children:"Available"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),i.jsx("span",{children:"Selected"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),i.jsx("span",{children:"Today"})]})]})]})}const xM=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"},{key:"saturday",label:"Sat"},{key:"sunday",label:"Sun"}],T1=[{key:"morning",label:"Morning (9AM12PM)",start:"09:00",end:"12:00"},{key:"afternoon",label:"Afternoon (12PM5PM)",start:"12:00",end:"17:00"},{key:"evening",label:"Evening (5PM9PM)",start:"17:00",end:"21:00"},{key:"any",label:"Any time",start:"00:00",end:"23:59"}];function bM(){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="WL";for(let t=0;t<4;t++)e+=s.charAt(Math.floor(Math.random()*s.length));return e}function A1({shopId:s,slug:e,selectedService:t,selectedStaff:r,staffMembers:o,preferredDate:u,onSuccess:d,onCancel:p}){const[g,x]=N.useState({name:"",email:"",phone:""}),[b,w]=N.useState([]),[E,T]=N.useState("any"),[L,V]=N.useState(!1),[O,B]=N.useState(!1),[Y,$]=N.useState(""),ie=oe=>{w(j=>j.includes(oe)?j.filter(A=>A!==oe):[...j,oe])},he=async oe=>{oe.preventDefault(),V(!0);try{const j=bM(),A=T1.find(F=>F.key===E),k=r&&r!=="any"?r.id:"any",U=r&&r!=="any"?r.name:"Any Available",M={clientName:g.name,clientEmail:g.email,clientPhone:g.phone,serviceId:t?.id||null,serviceName:t?.name||"Any Service",staffId:k,staffName:U,preferredDate:u||null,preferredDays:b.length>0?b:null,preferredTimeRange:A?{start:A.start,end:A.end}:null,status:"waiting",refCode:j,createdAt:new Date().toISOString(),notifiedAt:null,notifiedSlot:null};await wr(tt(Ee,"shops",s,"waitlist"),M),$(j),B(!0),d&&d(j)}catch(j){console.error("Waitlist error:",j)}finally{V(!1)}};return O?i.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg shadow-blue-100/50 p-8 text-center animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ds,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"You're on the Waitlist!"}),i.jsxs("p",{className:"text-slate-600 mb-4",children:["We'll notify you when a slot opens up",t?` for ${t.name}`:"","."]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your waitlist reference"}),i.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:Y})]}),i.jsxs("a",{href:`#/shop/${e}/waitlist/${Y}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(kn,{className:"w-4 h-4"}),"Check Waitlist Status"]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to check your position and get notified"})]}):i.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg p-6 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:i.jsx(Qh,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Join the Waitlist"}),i.jsx("p",{className:"text-sm text-slate-500",children:"We'll notify you when a slot opens up"})]})]}),i.jsxs("form",{onSubmit:he,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),i.jsx("input",{type:"text",value:g.name,onChange:oe=>x({...g,name:oe.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:g.email,onChange:oe=>x({...g,email:oe.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),i.jsx("input",{type:"tel",value:g.phone,onChange:oe=>x({...g,phone:oe.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Preferred Days ",i.jsx("span",{className:"text-slate-400 font-normal",children:"(optional)"})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:xM.map(oe=>i.jsx("button",{type:"button",onClick:()=>ie(oe.key),className:`px-3.5 py-2 rounded-lg text-sm font-semibold transition-all border ${b.includes(oe.key)?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:oe.label},oe.key))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Preferred Time"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:T1.map(oe=>i.jsx("button",{type:"button",onClick:()=>T(oe.key),className:`px-3.5 py-2.5 rounded-lg text-sm font-medium transition-all border text-left ${E===oe.key?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:oe.label},oe.key))})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:L,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:L?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Joining"]}):i.jsxs(i.Fragment,{children:[i.jsx(Qh,{className:"w-4 h-4"}),"Join Waitlist"]})}),p&&i.jsx("button",{type:"button",onClick:p,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})}function yM(){return i.jsxs("div",{className:"flex items-end gap-2 mb-3",children:[i.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0",children:i.jsx(Jh,{className:"w-3.5 h-3.5 text-white"})}),i.jsx("div",{className:"bg-slate-100 rounded-2xl rounded-bl-md px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),i.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),i.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}function vM({message:s,onSelectService:e,onQuickReply:t}){const r=s.sender==="bot";return i.jsxs("div",{className:`flex items-end gap-2 mb-3 ${r?"":"flex-row-reverse"}`,children:[r&&i.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0",children:i.jsx(Jh,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("div",{className:"max-w-[85%] space-y-2",children:[i.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed whitespace-pre-line ${r?"bg-slate-100 text-slate-800 rounded-2xl rounded-bl-md":"bg-blue-600 text-white rounded-2xl rounded-br-md"}`,children:s.text}),s.serviceCards&&s.serviceCards.length>0&&i.jsx("div",{className:"space-y-1.5",children:s.serviceCards.map(o=>i.jsxs("button",{onClick:()=>e(o),className:"w-full flex items-center justify-between gap-2 px-3.5 py-2.5 bg-white border border-slate-200 hover:border-blue-400 rounded-xl text-left transition-all hover:shadow-sm group",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800 group-hover:text-blue-700 truncate",children:o.name}),i.jsxs("p",{className:"text-xs text-slate-500",children:[Sh(o.duration),"  ",U0(o.price)]})]}),i.jsxs("span",{className:"text-xs font-semibold text-blue-600 whitespace-nowrap flex items-center gap-0.5",children:["Book ",i.jsx(Af,{className:"w-3 h-3"})]})]},o.id))}),s.quickReplies&&s.quickReplies.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:s.quickReplies.map((o,u)=>i.jsx("button",{onClick:()=>t(o),className:"px-3 py-1.5 text-xs font-medium text-blue-600 bg-white border border-blue-200 hover:bg-blue-50 hover:border-blue-400 rounded-full transition-all",children:o},u))})]})]})}function U0(s){return s==null?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(s)}function Sh(s){if(!s)return"";if(s<60)return`${s} min`;const e=Math.floor(s/60),t=s%60;return t?`${e}h ${t}m`:`${e} hour${e>1?"s":""}`}function wM(s,{services:e,staffMembers:t,shop:r}){const o=s.toLowerCase().trim(),u=r?.name||"our shop";if(/^(hi|hello|hey|howdy|sup|yo|hiya|good\s*(morning|afternoon|evening))/.test(o))return{text:`Hi!  I'm here to help you book an appointment at ${u}. What are you looking for?`,quickReplies:["View Services","View Staff","How to Book"]};if(/how (do i|to|can i) book|help.*(book|appoint)|booking help/i.test(o))return{text:`Booking is easy! Here's how:

1 Choose a service
2 Pick your stylist
3 Select a date & time
4 Fill in your details

That's it! Would you like to start?`,quickReplies:["View Services","View Staff"]};if(/what (services|do you offer)|menu|prices|how much|service list|your services/i.test(o)||o==="view services")return!e||e.length===0?{text:"We don't have any services listed right now. Please check back later!"}:{text:`Here are our services:

${e.map(p=>` ${p.name}  ${Sh(p.duration)}  ${U0(p.price)}`).join(`
`)}

Would you like to book one of these? Just tap below! `,serviceCards:e};if(e&&e.length>0){const d=e.find(p=>{const g=p.name.toLowerCase();return o.includes(g)||g.includes(o)});if(d&&o.length>2)return{text:`Great choice! Here are the details for **${d.name}**:

 Duration: ${Sh(d.duration)}
 Price: ${U0(d.price)}${d.description?`
 ${d.description}`:""}

Would you like to book this service? Tap "Book" below!`,serviceCards:[d],quickReplies:["View All Services","View Staff"]}}if(/how long|how much time|duration/i.test(o))return!e||e.length===0?{text:"No services are listed right now. Check back soon!"}:{text:`Here's how long each service takes:

${e.map(p=>` ${p.name}: ${Sh(p.duration)}`).join(`
`)}`,quickReplies:["View Services","How to Book"]};if(/who works|stylists?|staff|team|barber|who('s| is) (here|available)|your (team|people)/i.test(o)||o==="view staff")return!t||t.length===0?{text:"We don't have any team members listed right now."}:{text:`Meet our team! 

${t.map(p=>{let g=` ${p.name}`;return p.role&&(g+=`  ${p.role}`),p.bio&&(g+=`
  "${p.bio.slice(0,80)}${p.bio.length>80?"":""}"`),g}).join(`
`)}

You can pick your preferred stylist during booking.`,quickReplies:["View Services","How to Book"]};if(/available|open slot|when can i|next available|free slot|any opening/i.test(o)){const d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=new Set;return t&&t.length>0&&t.forEach(x=>{x.weeklyHours&&Object.entries(x.weeklyHours).forEach(([b,w])=>{w&&w.enabled&&p.add(b)})}),{text:`You can check available times by selecting a service and date in the booking flow above. We're generally available on ${p.size>0?[...p].sort((x,b)=>d.indexOf(x)-d.indexOf(b)).join(", "):"most days"}. `,quickReplies:["View Services","How to Book"]}}if(/hours|when are you open|business hours|open hours|what time|operating/i.test(o)){const d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],p={};if(t&&t.length>0&&t.forEach(g=>{g.weeklyHours&&Object.entries(g.weeklyHours).forEach(([x,b])=>{b&&b.enabled&&b.start&&b.end&&(p[x]?(b.start<p[x].start&&(p[x].start=b.start),b.end>p[x].end&&(p[x].end=b.end)):p[x]={start:b.start,end:b.end})})}),Object.keys(p).length>0){const g=b=>{const[w,E]=b.split(":"),T=parseInt(w),L=T>=12?"PM":"AM";return`${T%12||12}:${E} ${L}`};return{text:`Here are our general hours:

${d.filter(b=>p[b]).map(b=>` ${b}: ${g(p[b].start)}  ${g(p[b].end)}`).join(`
`)}

Hours may vary by stylist. Select a service to see exact availability.`,quickReplies:["View Services","View Staff"]}}return{text:"Our hours vary by stylist. You can see exact availability by selecting a service above.",quickReplies:["View Services","How to Book"]}}return/phone|address|contact|where|location|email|reach/i.test(o)?{text:"For contact information, please reach out to the shop directly. You can also find us through the booking confirmation email after you book! ",quickReplies:["View Services","How to Book"]}:/cancel|reschedule|change my (booking|appointment)|modify/i.test(o)?{text:"You can manage your booking using the reference code you received. Go to your confirmation email and click 'Manage Booking' to reschedule or cancel. ",quickReplies:["How to Book","View Services"]}:/waitlist|no availability|fully booked|no slots|all booked|sold out/i.test(o)?{text:"If there are no available slots, you can join our waitlist and we'll notify you when something opens up! Look for the 'Join Waitlist' button when viewing available times. ",quickReplies:["View Services","How to Book"]}:/^(thanks?|thank you|thx|ty|cheers|appreciate)/i.test(o)?{text:"You're welcome!  Let me know if you need anything else.",quickReplies:["View Services","View Staff","How to Book"]}:{text:"I'm not sure about that. You can browse our services above, or try asking about our services, staff, or availability! ",quickReplies:["View Services","View Staff","How to Book"]}}function _M({services:s,staffMembers:e,shop:t,onSelectService:r}){const[o,u]=N.useState(!1),[d,p]=N.useState([]),[g,x]=N.useState(""),[b,w]=N.useState(!1),[E,T]=N.useState(!1),[L,V]=N.useState(!1),[O,B]=N.useState(!1),Y=N.useRef(null),$=N.useRef(null),ie=t?.name||"our shop";N.useEffect(()=>{Y.current?.scrollIntoView({behavior:"smooth"})},[d,b]),N.useEffect(()=>{const M=setTimeout(()=>{!o&&!O&&V(!0)},3e3),F=setTimeout(()=>{E||(T(!0),V(!1),u(!0),p([{id:"welcome",sender:"bot",text:`Hi!  Welcome to ${ie}. I can help you find the right service and book an appointment. What are you looking for?`,quickReplies:["View Services","View Staff","How to Book"]}]))},5e3);return()=>{clearTimeout(M),clearTimeout(F)}},[]),N.useEffect(()=>{o&&setTimeout(()=>$.current?.focus(),100)},[o]);const he=N.useCallback(()=>{V(!1),B(!0),u(!0),d.length===0&&p([{id:"welcome",sender:"bot",text:`Hi!  Welcome to ${ie}. I can help you find the right service and book an appointment. What are you looking for?`,quickReplies:["View Services","View Staff","How to Book"]}])},[d.length,ie]),oe=N.useCallback(M=>{w(!0);const F=400+Math.random()*600;setTimeout(()=>{const I=wM(M,{services:s,staffMembers:e,shop:t});p(q=>[...q,{id:`bot-${Date.now()}`,sender:"bot",text:I.text,serviceCards:I.serviceCards||null,quickReplies:I.quickReplies||null}]),w(!1)},F)},[s,e,t]),j=N.useCallback(()=>{const M=g.trim();M&&(p(F=>[...F,{id:`user-${Date.now()}`,sender:"user",text:M}]),x(""),oe(M))},[g,oe]),A=N.useCallback(M=>{p(F=>[...F,{id:`user-${Date.now()}`,sender:"user",text:M}]),oe(M)},[oe]),k=N.useCallback(M=>{r&&(r(M),p(F=>[...F,{id:`bot-${Date.now()}`,sender:"bot",text:`Great! I've selected "${M.name}" for you. You can now pick your stylist and time above. `}]),setTimeout(()=>u(!1),1500))},[r]),U=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),j())};return i.jsxs(i.Fragment,{children:[L&&!o&&i.jsxs("div",{className:"fixed bottom-24 right-5 z-50 animate-fade-in",children:[i.jsx("button",{onClick:he,className:"bg-white border border-slate-200 shadow-lg rounded-2xl rounded-br-md px-4 py-3 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all max-w-[220px]",children:"Need help booking? "}),i.jsx("button",{onClick:()=>{V(!1),B(!0)},className:"absolute -top-2 -right-2 w-5 h-5 bg-slate-200 hover:bg-slate-300 rounded-full flex items-center justify-center text-slate-500 transition-colors",children:i.jsx(da,{className:"w-3 h-3"})})]}),o&&i.jsxs("div",{className:`fixed bottom-20 right-5 z-50 bg-white rounded-2xl shadow-2xl border border-slate-200 flex flex-col overflow-hidden animate-scale-in
                     w-[calc(100vw-2.5rem)] max-w-[380px] h-[min(500px,calc(100vh-7rem))]
                     sm:w-[380px] sm:right-5 sm:bottom-20`,style:{transformOrigin:"bottom right"},children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(Jh,{className:"w-4 h-4"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-bold leading-tight",children:"SpotBookie Assistant"}),i.jsx("p",{className:"text-[11px] text-blue-100",children:"Ask me anything about booking"})]})]}),i.jsx("button",{onClick:()=>u(!1),className:"w-8 h-8 hover:bg-white/20 rounded-full flex items-center justify-center transition-colors","aria-label":"Close chat",children:i.jsx(da,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-0 bg-slate-50/50",children:[d.map(M=>i.jsx(vM,{message:M,onSelectService:k,onQuickReply:A},M.id)),b&&i.jsx(yM,{}),i.jsx("div",{ref:Y})]}),i.jsxs("div",{className:"flex items-center gap-2 px-3 py-3 border-t border-slate-200 bg-white flex-shrink-0",children:[i.jsx("input",{ref:$,type:"text",value:g,onChange:M=>x(M.target.value),onKeyDown:U,placeholder:"Type a message",className:"flex-1 px-3.5 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all placeholder:text-slate-400"}),i.jsx("button",{onClick:j,disabled:!g.trim(),className:"w-10 h-10 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-200 disabled:cursor-not-allowed text-white disabled:text-slate-400 rounded-xl flex items-center justify-center transition-all flex-shrink-0","aria-label":"Send message",children:i.jsx(Eh,{className:"w-4 h-4"})})]})]}),i.jsx("button",{onClick:()=>{o?u(!1):he()},className:`fixed bottom-5 right-5 z-50 w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 hover:scale-105 hover:shadow-xl ${o?"bg-slate-700 hover:bg-slate-800":"bg-blue-600 hover:bg-blue-700 chat-bubble-pulse"}`,"aria-label":o?"Close chat assistant":"Open chat assistant",children:o?i.jsx(da,{className:"w-6 h-6 text-white"}):i.jsx(Jh,{className:"w-6 h-6 text-white"})})]})}var Jp={exports:{}},Zp,C1;function NM(){if(C1)return Zp;C1=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Zp=s,Zp}var e0,k1;function EM(){if(k1)return e0;k1=1;var s=NM();function e(){}function t(){}return t.resetWarningCache=e,e0=function(){function r(d,p,g,x,b,w){if(w!==s){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}r.isRequired=r;function o(){return r}var u={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return u.PropTypes=u,u},e0}var R1;function SM(){return R1||(R1=1,Jp.exports=EM()()),Jp.exports}var jM=SM();const $t=q0(jM);function I1(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),t.push.apply(t,r)}return t}function D1(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?I1(Object(t),!0).forEach(function(r){cE(s,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):I1(Object(t)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(t,r))})}return s}function jh(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jh=function(e){return typeof e}:jh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jh(s)}function cE(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function TM(s,e){if(s==null)return{};var t={},r=Object.keys(s),o,u;for(u=0;u<r.length;u++)o=r[u],!(e.indexOf(o)>=0)&&(t[o]=s[o]);return t}function AM(s,e){if(s==null)return{};var t=TM(s,e),r,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);for(o=0;o<u.length;o++)r=u[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(t[r]=s[r])}return t}function uE(s,e){return CM(s)||kM(s,e)||RM(s,e)||IM()}function CM(s){if(Array.isArray(s))return s}function kM(s,e){var t=s&&(typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"]);if(t!=null){var r=[],o=!0,u=!1,d,p;try{for(t=t.call(s);!(o=(d=t.next()).done)&&(r.push(d.value),!(e&&r.length===e));o=!0);}catch(g){u=!0,p=g}finally{try{!o&&t.return!=null&&t.return()}finally{if(u)throw p}}return r}}function RM(s,e){if(s){if(typeof s=="string")return M1(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return M1(s,e)}}function M1(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=s[t];return r}function IM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var es=function(e,t,r){var o=!!r,u=Ht.useRef(r);Ht.useEffect(function(){u.current=r},[r]),Ht.useEffect(function(){if(!o||!e)return function(){};var d=function(){u.current&&u.current.apply(u,arguments)};return e.on(t,d),function(){e.off(t,d)}},[o,t,e,u])},B0=function(e){var t=Ht.useRef(e);return Ht.useEffect(function(){t.current=e},[e]),t.current},Co=function(e){return e!==null&&jh(e)==="object"},DM=function(e){return Co(e)&&typeof e.then=="function"},MM=function(e){return Co(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},O1="[object Object]",OM=function s(e,t){if(!Co(e)||!Co(t))return e===t;var r=Array.isArray(e),o=Array.isArray(t);if(r!==o)return!1;var u=Object.prototype.toString.call(e)===O1,d=Object.prototype.toString.call(t)===O1;if(u!==d)return!1;if(!u&&!r)return e===t;var p=Object.keys(e),g=Object.keys(t);if(p.length!==g.length)return!1;for(var x={},b=0;b<p.length;b+=1)x[p[b]]=!0;for(var w=0;w<g.length;w+=1)x[g[w]]=!0;var E=Object.keys(x);if(E.length!==p.length)return!1;var T=e,L=t,V=function(B){return s(T[B],L[B])};return E.every(V)},dE=function(e,t,r){return Co(e)?Object.keys(e).reduce(function(o,u){var d=!Co(t)||!OM(e[u],t[u]);return r.includes(u)?(d&&console.warn("Unsupported prop change: options.".concat(u," is not a mutable property.")),o):d?D1(D1({},o||{}),{},cE({},u,e[u])):o},null):null},hE="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",P1=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hE;if(e===null||MM(e))return e;throw new Error(t)},PM=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hE;if(DM(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(o){return P1(o,t)})};var r=P1(e,t);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},VM=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.6.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.6.0",url:"https://stripe.com/docs/stripe-js/react"}))},Rf=Ht.createContext(null);Rf.displayName="ElementsContext";var fE=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},mE=function(e){var t=e.stripe,r=e.options,o=e.children,u=Ht.useMemo(function(){return PM(t)},[t]),d=Ht.useState(function(){return{stripe:u.tag==="sync"?u.stripe:null,elements:u.tag==="sync"?u.stripe.elements(r):null}}),p=uE(d,2),g=p[0],x=p[1];Ht.useEffect(function(){var E=!0,T=function(V){x(function(O){return O.stripe?O:{stripe:V,elements:V.elements(r)}})};return u.tag==="async"&&!g.stripe?u.stripePromise.then(function(L){L&&E&&T(L)}):u.tag==="sync"&&!g.stripe&&T(u.stripe),function(){E=!1}},[u,g,r]);var b=B0(t);Ht.useEffect(function(){b!==null&&b!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[b,t]);var w=B0(r);return Ht.useEffect(function(){if(g.elements){var E=dE(r,w,["clientSecret","fonts"]);E&&g.elements.update(E)}},[r,w,g.elements]),Ht.useEffect(function(){VM(g.stripe)},[g.stripe]),Ht.createElement(Rf.Provider,{value:g},o)};mE.propTypes={stripe:$t.any,options:$t.object};var LM=function(e){var t=Ht.useContext(Rf);return fE(t,e)},UM=function(){var e=LM("calls useElements()"),t=e.elements;return t};$t.func.isRequired;var pE=Ht.createContext(null);pE.displayName="CheckoutContext";$t.any,$t.shape({clientSecret:$t.oneOfType([$t.string,$t.instanceOf(Promise)]).isRequired,elementsOptions:$t.object}).isRequired;var z0=function(e){var t=Ht.useContext(pE),r=Ht.useContext(Rf);if(t){if(r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t}else return fE(r,e)},BM=["mode"],zM=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},xs=function(e,t){var r="".concat(zM(e),"Element"),o=function(g){var x=g.id,b=g.className,w=g.options,E=w===void 0?{}:w,T=g.onBlur,L=g.onFocus,V=g.onReady,O=g.onChange,B=g.onEscape,Y=g.onClick,$=g.onLoadError,ie=g.onLoaderStart,he=g.onNetworksChange,oe=g.onConfirm,j=g.onCancel,A=g.onShippingAddressChange,k=g.onShippingRateChange,U=g.onSavedPaymentMethodRemove,M=g.onSavedPaymentMethodUpdate,F=z0("mounts <".concat(r,">")),I="elements"in F?F.elements:null,q="checkoutState"in F?F.checkoutState:null,D=q?.type==="success"||q?.type==="loading"?q.sdk:null,R=Ht.useState(null),W=uE(R,2),le=W[0],Te=W[1],ve=Ht.useRef(null),P=Ht.useRef(null);es(le,"blur",T),es(le,"focus",L),es(le,"escape",B),es(le,"click",Y),es(le,"loaderror",$),es(le,"loaderstart",ie),es(le,"networkschange",he),es(le,"confirm",oe),es(le,"cancel",j),es(le,"shippingaddresschange",A),es(le,"shippingratechange",k),es(le,"savedpaymentmethodremove",U),es(le,"savedpaymentmethodupdate",M),es(le,"change",O);var J;V&&(e==="expressCheckout"?J=V:J=function(){V(le)}),es(le,"ready",J),Ht.useLayoutEffect(function(){if(ve.current===null&&P.current!==null&&(I||D)){var xe=null;if(D)switch(e){case"paymentForm":xe=D.createPaymentFormElement(E);break;case"payment":xe=D.createPaymentElement(E);break;case"address":if("mode"in E){var be=E.mode,De=AM(E,BM);if(be==="shipping")xe=D.createShippingAddressElement(De);else if(be==="billing")xe=D.createBillingAddressElement(De);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":xe=D.createExpressCheckoutElement(E);break;case"currencySelector":xe=D.createCurrencySelectorElement();break;case"taxId":xe=D.createTaxIdElement(E);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else I&&(xe=I.create(e,E));ve.current=xe,Te(xe),xe&&xe.mount(P.current)}},[I,D,E]);var ce=B0(E);return Ht.useEffect(function(){if(ve.current){var xe=dE(E,ce,["paymentRequest"]);xe&&"update"in ve.current&&ve.current.update(xe)}},[E,ce]),Ht.useLayoutEffect(function(){return function(){if(ve.current&&typeof ve.current.destroy=="function")try{ve.current.destroy(),ve.current=null}catch{}}},[]),Ht.createElement("div",{id:x,className:b,ref:P})},u=function(g){z0("mounts <".concat(r,">"));var x=g.id,b=g.className;return Ht.createElement("div",{id:x,className:b})},d=t?u:o;return d.propTypes={id:$t.string,className:$t.string,onChange:$t.func,onBlur:$t.func,onFocus:$t.func,onReady:$t.func,onEscape:$t.func,onClick:$t.func,onLoadError:$t.func,onLoaderStart:$t.func,onNetworksChange:$t.func,onConfirm:$t.func,onCancel:$t.func,onShippingAddressChange:$t.func,onShippingRateChange:$t.func,onSavedPaymentMethodRemove:$t.func,onSavedPaymentMethodUpdate:$t.func,options:$t.object},d.displayName=r,d.__elementType=e,d},bs=typeof window>"u",qM=Ht.createContext(null);qM.displayName="EmbeddedCheckoutProviderContext";var FM=function(){var e=z0("calls useStripe()"),t=e.stripe;return t};xs("auBankAccount",bs);var V1=xs("card",bs);xs("cardNumber",bs);xs("cardExpiry",bs);xs("cardCvc",bs);xs("iban",bs);xs("payment",bs);xs("expressCheckout",bs);xs("paymentRequestButton",bs);xs("linkAuthentication",bs);xs("address",bs);xs("shippingAddress",bs);xs("paymentMethodMessaging",bs);xs("taxId",bs);function Th(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Th=function(e){return typeof e}:Th=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(s)}var gE="clover",$M=function(e){return e===3?"v3":e},xE="https://js.stripe.com",HM="".concat(xE,"/").concat(gE,"/stripe.js"),GM=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,YM=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var WM=function(e){return GM.test(e)||YM.test(e)},KM=function(){for(var e=document.querySelectorAll('script[src^="'.concat(xE,'"]')),t=0;t<e.length;t++){var r=e[t];if(WM(r.src))return r}return null},L1=function(e){var t="",r=document.createElement("script");r.src="".concat(HM).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(r),r},QM=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.7.0",startTime:t})},zc=null,oh=null,ch=null,XM=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},JM=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},ZM=function(e){return zc!==null?zc:(zc=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=KM();if(!(o&&e)){if(!o)o=L1(e);else if(o&&ch!==null&&oh!==null){var u;o.removeEventListener("load",ch),o.removeEventListener("error",oh),(u=o.parentNode)===null||u===void 0||u.removeChild(o),o=L1(e)}}ch=JM(t,r),oh=XM(r),o.addEventListener("load",ch),o.addEventListener("error",oh)}catch(d){r(d);return}}),zc.catch(function(t){return zc=null,Promise.reject(t)}))},eO=function(e,t,r){if(e===null)return null;var o=t[0];if(typeof o!="string")throw new Error("Expected publishable key to be of type string, got type ".concat(Th(o)," instead."));var u=o.match(/^pk_test/),d=$M(e.version),p=gE;u&&d!==p&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("8.7.0"," expected Stripe.js@").concat(p,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,t);return QM(g,r),g},qc,bE=!1,yE=function(){return qc||(qc=ZM(null).catch(function(e){return qc=null,Promise.reject(e)}),qc)};Promise.resolve().then(function(){return yE()}).catch(function(s){bE||console.warn(s)});var tO=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];bE=!0;var o=Date.now();return yE().then(function(u){return eO(u,t,o)})};const nO=tO("pk_test_51NXZytLhwB1Jyzw82kEuknbGp3F4vTdnqmBrVmzsHqKYeldrpbiWInM6U2v2ojnsLW4u251zbpRk2UiXnwBgiQZo00bK99q5kj"),sO={style:{base:{fontSize:"16px",color:"#1e293b",fontFamily:"system-ui, -apple-system, sans-serif","::placeholder":{color:"#94a3b8"}},invalid:{color:"#ef4444",iconColor:"#ef4444"}}};function aO({amount:s,onSuccess:e,onCancel:t,clientInfo:r,serviceName:o}){const u=FM(),d=UM(),[p,g]=N.useState(!1),[x,b]=N.useState(null),[w,E]=N.useState(!1),T=async V=>{if(V.preventDefault(),!u||!d)return;g(!0),b(null);const O=d.getElement(V1),{error:B,paymentMethod:Y}=await u.createPaymentMethod({type:"card",card:O,billing_details:{name:r.name,email:r.email,phone:r.phone}});if(B){b(B.message),g(!1);return}console.log("Payment method created:",Y.id),await new Promise($=>setTimeout($,1e3)),g(!1),e({paymentMethodId:Y.id,last4:Y.card.last4,brand:Y.card.brand})},L=V=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(V/100);return i.jsxs("form",{onSubmit:T,className:"space-y-5",children:[i.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl p-5 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-emerald-100 text-sm font-medium",children:["Deposit for ",o]}),i.jsx("p",{className:"text-3xl font-bold mt-1",children:L(s)})]}),i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:i.jsx(vo,{className:"w-6 h-6"})})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Card Details"}),i.jsx("div",{className:"p-4 border-2 border-slate-200 rounded-xl focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-500/20 transition-all bg-white",children:i.jsx(V1,{options:sO,onChange:V=>{E(V.complete),V.error?b(V.error.message):b(null)}})})]}),x&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:[i.jsx(Kh,{className:"w-4 h-4 flex-shrink-0"}),x]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[i.jsx(Xh,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Your payment is secured with 256-bit encryption"})]}),i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:[i.jsx(Kh,{className:"w-4 h-4 flex-shrink-0"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Test Mode:"})," Use card number ",i.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"4242 4242 4242 4242"})," with any future date and CVC."]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:p||!u||!w,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold shadow-md shadow-emerald-600/20 hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:p?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing"]}):i.jsxs(i.Fragment,{children:[i.jsx(Xh,{className:"w-4 h-4"}),"Pay ",L(s)]})}),i.jsx("button",{type:"button",onClick:t,disabled:p,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200 disabled:opacity-50",children:"Back"})]})]})}function rO({amount:s,onSuccess:e,onCancel:t,clientInfo:r,serviceName:o}){return i.jsx(mE,{stripe:nO,children:i.jsx(aO,{amount:s,onSuccess:e,onCancel:t,clientInfo:r,serviceName:o})})}const iO=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function mo(s){const[e,t]=s.split(":").map(Number);return e*60+t}function U1(s){const e=Math.floor(s/60),t=s%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}function lO(s){const e=s.getFullYear(),t=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function oO(s,e,t,r,o,u){if(!s)return[];const p=new Date(e+"T12:00:00").getDay(),g=iO[p],x=s[g];if(!x||!x.enabled)return[];const b=mo(x.start),w=mo(x.end),E=x.break?mo(x.break.start):null,T=x.break?mo(x.break.end):null,L=t+r,V=[];let O=b;for(;O+t<=w;){const B=O+t;if(E!==null&&T!==null&&O<T&&B>E){O=T;continue}V.push({id:`wh-${o}-${e}-${U1(O)}`,date:e,time:U1(O),duration:t,available:!0,staffId:o,staffName:u,generated:!0}),O+=L}return V}function vE(s,e,t=0,r=4){const o=[],u=new Date;u.setHours(0,0,0,0);const d=new Date(u);d.setDate(d.getDate()+r*7);for(const p of s){if(!p.weeklyHours)continue;const g=new Date(u);for(;g<d;){const x=lO(g),b=oO(p.weeklyHours,x,e,t,p.id,p.name);o.push(...b),g.setDate(g.getDate()+1)}}return o}function wE(s,e,t=0){const r=e.filter(o=>!o.status||o.status==="pending"||o.status==="confirmed");return s.filter(o=>{const u=mo(o.time),d=u+o.duration;return!r.some(g=>{if(o.staffId&&g.staffId&&g.staffId!==o.staffId||g.date!==o.date)return!1;const x=mo(g.time),b=g.serviceDuration||g.duration||o.duration,w=x+b;return!(d+t<=x||w+t<=u)})})}function _E(s,e){const t=new Set(e.map(o=>`${o.staffId||""}-${o.date}-${o.time}`)),r=s.filter(o=>{const u=`${o.staffId||""}-${o.date}-${o.time}`;return!t.has(u)});return[...e,...r]}function Qc({name:s,className:e="w-12 h-12",bgClass:t="bg-blue-100 text-blue-700"}){const r=(s||"").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return i.jsx("div",{className:`${e} ${t} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:r||"?"})}function cO(){return i.jsxs(st,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(ua,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function uO({member:s,onClose:e}){const[t,r]=N.useState(null),o=s.portfolio||[];return N.useEffect(()=>{const u=d=>{d.key==="Escape"&&(t!==null?r(null):e())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[t,e]),i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-scale-in",children:[i.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 bg-slate-100 hover:bg-slate-200 rounded-full flex items-center justify-center text-slate-600 transition-all z-10",children:i.jsx(X,{className:"w-4 h-4"})}),i.jsxs("div",{className:"p-6 pb-4 border-b border-slate-100",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Qc,{name:s.name,className:"w-14 h-14",bgClass:"bg-violet-100 text-violet-700"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s.name}),s.role&&i.jsx("p",{className:"text-sm text-violet-600 font-medium",children:s.role})]})]}),s.bio&&i.jsx("p",{className:"mt-3 text-sm text-slate-600 leading-relaxed",children:s.bio})]}),i.jsx("div",{className:"p-6",children:o.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Image,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet"})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:o.map((u,d)=>i.jsxs("button",{onClick:()=>r(d),className:"group relative aspect-square rounded-xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5",children:[i.jsx("img",{src:u.url,alt:u.caption||"Portfolio",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),u.caption&&i.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-2.5 pt-6",children:i.jsx("p",{className:"text-xs text-white font-medium truncate",children:u.caption})})]},d))})})]}),t!==null&&o[t]&&i.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90",children:[i.jsx("button",{onClick:()=>r(null),className:"absolute top-4 right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:i.jsx(X,{className:"w-5 h-5"})}),t>0&&i.jsx("button",{onClick:()=>r(t-1),className:"absolute left-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:i.jsx(ChevronLeft,{className:"w-5 h-5"})}),t<o.length-1&&i.jsx("button",{onClick:()=>r(t+1),className:"absolute right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:i.jsx(ChevronRight,{className:"w-5 h-5"})}),i.jsxs("div",{className:"max-w-4xl max-h-[85vh] flex flex-col items-center",children:[i.jsx("img",{src:o[t].url,alt:o[t].caption||"Portfolio",className:"max-w-full max-h-[75vh] object-contain rounded-lg"}),o[t].caption&&i.jsx("p",{className:"mt-3 text-sm text-white/90 font-medium text-center px-4",children:o[t].caption}),i.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[t+1," / ",o.length]})]})]})]})}function dO(){const{slug:s}=Do(),[e,t]=N.useState(null),[r,o]=N.useState(null),[u,d]=N.useState(!0),[p,g]=N.useState(!1),[x,b]=N.useState([]),[w,E]=N.useState([]),[T,L]=N.useState(null),[V,O]=N.useState(null),[B,Y]=N.useState([]),[$,ie]=N.useState([]),[he,oe]=N.useState(!1),[j,A]=N.useState(null),[k,U]=N.useState(null),[M,F]=N.useState(""),[I,q]=N.useState(!1),[D,R]=N.useState({name:"",email:"",phone:""}),[W,le]=N.useState(""),[Te,ve]=N.useState(!1),[P,J]=N.useState(null),[ce,xe]=N.useState(!1),[be,De]=N.useState("biweekly"),[ze,Ct]=N.useState(null),[ft,dn]=N.useState(!1),[ne,_e]=N.useState(null);N.useEffect(()=>{(async()=>{d(!0),g(!1);try{const Se=Ms(tt(Ee,"shops"),ms("slug","==",s)),Ke=await Os(Se);if(Ke.empty)g(!0);else{const Ze=Ke.docs[0];t(Ze.data()),o(Ze.id)}}catch(Se){console.error("Error looking up shop:",Se),g(!0)}finally{d(!1)}})()},[s]),N.useEffect(()=>{if(!r)return;const me=tn(tt(Ee,"shops",r,"services"),Et=>{const Ue=Et.docs.map(He=>({id:He.id,...He.data()})).filter(He=>He.active!==!1).sort((He,Dt)=>(He.name||"").localeCompare(Dt.name||""));b(Ue)}),Se=tn(tt(Ee,"shops",r,"availability"),Et=>{const Ue=new Date,He=Et.docs.map(Dt=>({id:Dt.id,...Dt.data()})).filter(Dt=>new Date(`${Dt.date}T${Dt.time}`)>Ue);Y(He)}),Ke=tn(tt(Ee,"shops",r,"bookings"),Et=>{const Ue=Et.docs.map(He=>({id:He.id,...He.data()}));ie(Ue)}),Ze=tn(tt(Ee,"shops",r,"staff"),Et=>{const Ue=Et.docs.map(He=>({id:He.id,...He.data()})).filter(He=>He.active!==!1).sort((He,Dt)=>(He.name||"").localeCompare(Dt.name||""));E(Ue)});return()=>{me(),Se(),Ke(),Ze()}},[r]),N.useEffect(()=>{w.length===1?O(w[0]):w.length===0&&O(null)},[w]);const ue=x.length>0;w.length>0;const Ae=w.length>1,Ce=e?.bufferMinutes||0,Pe=N.useMemo(()=>{const me=new Date;let Se=B.filter(Ue=>Ue.available);if(T&&(Se=Se.filter(Ue=>Ue.duration>=T.duration)),V&&V!=="any"&&(Se=Se.filter(Ue=>Ue.staffId===V.id||!Ue.staffId)),!T)return Se;const Ke=V&&V!=="any"?w.filter(Ue=>Ue.id===V.id):w,Ze=vE(Ke,T.duration,Ce,4).filter(Ue=>new Date(`${Ue.date}T${Ue.time}`)>me),Et=_E(Ze,Se);return wE(Et,$,Ce)},[B,T,V,w,$,Ce]),yt=(me,Se,Ke=3)=>{const Ze=[],Et=new Date(me+"T12:00:00"),Ue=new Date(Et);Ue.setMonth(Ue.getMonth()+Ke);let He=new Date(Et);for(Se==="weekly"?He.setDate(He.getDate()+7):Se==="biweekly"?He.setDate(He.getDate()+14):Se==="fourweekly"?He.setDate(He.getDate()+28):Se==="monthly"&&He.setMonth(He.getMonth()+1);He<=Ue;){const Dt=He.getFullYear(),sn=String(He.getMonth()+1).padStart(2,"0"),$n=String(He.getDate()).padStart(2,"0");Ze.push(`${Dt}-${sn}-${$n}`),Se==="weekly"?He.setDate(He.getDate()+7):Se==="biweekly"?He.setDate(He.getDate()+14):Se==="fourweekly"?He.setDate(He.getDate()+28):Se==="monthly"&&He.setMonth(He.getMonth()+1)}return Ze},ct=N.useMemo(()=>{if(!ce||!j)return null;const me=yt(j.date,be),Se=T?T.duration:j.duration||60,Ke=V&&V!=="any"?V.id:j.staffId,Ze=j.time,Et=$.filter(hn=>!hn.status||hn.status==="pending"||hn.status==="confirmed"),Ue=hn=>{const[ji,xn]=hn.split(":").map(Number);return ji*60+xn},He=Ue(Ze),Dt=He+Se;let sn=[],$n=[];const ns=new Set;me.forEach(hn=>{Et.some(xn=>{if(Ke&&xn.staffId&&xn.staffId!==Ke||xn.date!==hn)return!1;const ss=Ue(xn.time),an=xn.serviceDuration||xn.duration||Se,bn=ss+an,vs=Ce||0;return!(Dt+vs<=ss||bn+vs<=He)})||ns.has(hn)?$n.push(hn):(sn.push(hn),ns.add(hn))});const Js=me.length>0?me[me.length-1]:j.date,Si=new Date(Js+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),$a={weekly:"week",biweekly:"2 weeks",fourweekly:"4 weeks",monthly:"month"};return{available:sn,conflicts:$n,total:sn.length+1,skipped:$n.length,endDate:Si,intervalLabel:$a[be]||be}},[ce,be,j,T,V,$,Ce]),ut=me=>{L(me),w.length>1&&O(null),U(null),A(null),oe(!1),F("")},ke=me=>{O(me),U(null),A(null),oe(!1),F("")},Ve=()=>{L(null),w.length>1&&O(null),U(null),A(null),oe(!1)},ot=()=>{U(null),A(null),oe(!1),Ae?O(null):ue&&L(null)},Qt=me=>{A(me),oe(!0),F("")},_t=()=>{const me="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let Se="BK";for(let Ke=0;Ke<4;Ke++)Se+=me.charAt(Math.floor(Math.random()*me.length));return Se},Nt=me=>{me.preventDefault(),se?dn(!0):kt()},An=me=>{_e(me),kt(me)},kt=async(me=null)=>{q(!0),Ct(null);try{const Se=_t(),Ke=e?.requireApproval?"pending":"confirmed",Ze=ce?`rg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`:null,Et=ce&&ct?ct.endDate:null,Ue={slotId:j.id,date:j.date,time:j.time,duration:T?T.duration:j.duration,clientName:D.name,clientEmail:D.email,clientPhone:D.phone,bookedAt:new Date().toISOString(),status:Ke,refCode:Se};if(T&&(Ue.serviceId=T.id,Ue.serviceName=T.name,Ue.servicePrice=T.price,Ue.serviceDuration=T.duration,Ue.depositPercent=T.depositPercent||0),me||ne){const sn=me||ne;Ue.depositPaid=!0,Ue.depositAmount=Ne/100,Ue.paymentMethodId=sn.paymentMethodId,Ue.cardLast4=sn.last4,Ue.cardBrand=sn.brand}V&&V!=="any"?(Ue.staffId=V.id,Ue.staffName=V.name):j.staffId&&(Ue.staffId=j.staffId,Ue.staffName=j.staffName||""),ce&&Ze&&(Ue.recurring=!0,Ue.recurringInterval=be,Ue.recurringGroupId=Ze,Ue.recurringUntil=Et),await wr(tt(Ee,"shops",r,"bookings"),Ue),j.generated||await it(Qe(Ee,"shops",r,"availability",j.id),{available:!1});let He=1,Dt=0;if(ce&&ct){const sn=ct.available;Dt=ct.skipped;for(const $n of sn){const ns=_t(),Js={...Ue,date:$n,slotId:`recurring-${Ze}-${$n}`,refCode:ns,bookedAt:new Date().toISOString()};await wr(tt(Ee,"shops",r,"bookings"),Js),He++}Ct({created:He,skipped:Dt})}R({name:"",email:"",phone:""}),oe(!1),dn(!1),_e(null),A(null),L(null),U(null),O(w.length===1?w[0]:null),xe(!1),le(Se),e?.requireApproval?F(" Your booking request has been submitted! The shop will review and confirm it shortly."):F(" Booking confirmed! You will receive a confirmation email shortly.")}catch(Se){console.error("Booking error:",Se),F(" Something went wrong. Please try again.")}finally{q(!1)}},Qn=me=>new Date(me+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),Fn=me=>{const[Se,Ke]=me.split(":"),Ze=parseInt(Se),Et=Ze>=12?"PM":"AM";return`${Ze%12||12}:${Ke} ${Et}`},ys=me=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(me),ts=me=>{if(me<60)return`${me} min`;const Se=Math.floor(me/60),Ke=me%60;return Ke?`${Se}h ${Ke}m`:`${Se} hour${Se>1?"s":""}`};if(u)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking page"})]})});if(p)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(Ba,{className:"w-4 h-4"}),"Go Home"]})]})});const Fa=[...new Set(Pe.map(me=>me.date))].sort(),H=k?Pe.filter(me=>me.date===k):Pe,se=T&&T.depositPercent>0,Ne=se?Math.round(T.price*(T.depositPercent/100)*100):0,$e=ft?"payment":he?"form":ue&&!T?"services":Ae&&!V?"staff":"calendar",Je=[];ue&&Je.push({key:"services",label:"Service"}),Ae&&Je.push({key:"staff",label:"Stylist"}),Je.push({key:"calendar",label:"Date & Time"}),Je.push({key:"form",label:"Details"}),se&&Je.push({key:"payment",label:"Payment"});const qt=Je.findIndex(me=>me.key===$e),Be=["border-l-blue-500","border-l-violet-500","border-l-emerald-500","border-l-amber-500","border-l-rose-500","border-l-cyan-500","border-l-indigo-500","border-l-pink-500","border-l-teal-500"];return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Book your appointment"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(st,{to:`/shop/${s}/login`,className:"flex items-center gap-1.5 px-3.5 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[i.jsx(Xh,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"Owner"})]}),i.jsx(cO,{})]})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[Je.length>1&&i.jsx("div",{className:"flex items-center justify-center gap-0 mb-8 animate-fade-in",children:Je.map((me,Se)=>{const Ke=me.key===$e,Ze=Se<qt;return i.jsxs(N.Fragment,{children:[Se>0&&i.jsx("div",{className:`w-8 sm:w-14 h-0.5 transition-colors duration-300 ${Se<=qt?"bg-blue-500":"bg-slate-200"}`}),i.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[i.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 ${Ke?"bg-blue-600 text-white shadow-md shadow-blue-600/30 scale-110":Ze?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:Ze?i.jsx(Ds,{className:"w-5 h-5"}):Se+1}),i.jsx("span",{className:`text-xs font-medium hidden sm:block transition-colors ${Ke?"text-blue-700":Ze?"text-blue-600":"text-slate-400"}`,children:me.label})]})]},me.key)})}),M&&i.jsx("div",{className:"mb-8 animate-scale-in",children:M.startsWith("")?i.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(tE,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Confirmed!"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"You're all set. We'll send a confirmation to your email."}),ze&&i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[i.jsx(ui,{className:"w-4 h-4"}),"Recurring Series Created"]}),i.jsxs("p",{className:"text-sm text-slate-700",children:[ze.created," appointment",ze.created!==1?"s":""," booked"]}),ze.skipped>0&&i.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",ze.skipped," date",ze.skipped!==1?"s":""," skipped due to conflicts"]})]}),W&&i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),i.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:W})]}),W&&i.jsxs("div",{className:"mb-4",children:[i.jsxs(st,{to:`/shop/${s}/booking/${W}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(ua,{className:"w-4 h-4"}),"Manage Your Booking"]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-lg text-sm text-emerald-700 font-medium",children:[i.jsx(ua,{className:"w-4 h-4"}),"Add to your calendar to remember"]})]}):M.startsWith("")?i.jsxs("div",{className:"bg-white rounded-2xl border border-amber-200 shadow-lg shadow-amber-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(kn,{className:"w-8 h-8 text-amber-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Request Submitted!"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking request has been submitted! The shop will review and confirm it shortly."}),ze&&i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[i.jsx(ui,{className:"w-4 h-4"}),"Recurring Series Created"]}),i.jsxs("p",{className:"text-sm text-slate-700",children:[ze.created," appointment",ze.created!==1?"s":""," submitted"]}),ze.skipped>0&&i.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",ze.skipped," date",ze.skipped!==1?"s":""," skipped due to conflicts"]})]}),W&&i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),i.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:W})]}),W&&i.jsxs("div",{className:"mb-4",children:[i.jsxs(st,{to:`/shop/${s}/booking/${W}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(ua,{className:"w-4 h-4"}),"Manage Your Booking"]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700 font-medium",children:[i.jsx(kn,{className:"w-4 h-4"}),"You'll be notified once it's confirmed"]})]}):i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Something went wrong. Please try again."})]})}),$e==="services"&&i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a Service"}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select the service you'd like to book"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 stagger-children",children:x.map((me,Se)=>i.jsxs("button",{onClick:()=>ut(me),className:`group text-left bg-white border-l-4 ${Be[Se%Be.length]} border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors pr-2",children:me.name}),i.jsx("span",{className:"text-xl font-extrabold text-blue-600 whitespace-nowrap",children:ys(me.price)})]}),me.description&&i.jsx("p",{className:"text-sm text-slate-500 mb-3 line-clamp-2 leading-relaxed",children:me.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-400",children:[i.jsx(kn,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:ts(me.duration)})]}),i.jsx("span",{className:"text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]})]},me.id))})]}),$e==="staff"&&i.jsxs("div",{className:"animate-fade-in",children:[ue&&T&&i.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[i.jsxs("button",{onClick:Ve,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[i.jsx(Ba,{className:"w-3.5 h-3.5"}),"Back"]}),i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[i.jsx(gs,{className:"w-3.5 h-3.5 text-blue-500"}),i.jsx("span",{className:"font-semibold text-slate-800",children:T.name}),i.jsx("span",{className:"text-blue-600 font-bold",children:ys(T.price)})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose Your Stylist"}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select your preferred professional"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 stagger-children",children:[i.jsxs("button",{onClick:()=>ke("any"),className:"group text-left bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[i.jsxs("div",{className:"flex items-center gap-3.5 mb-3",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(Gt,{className:"w-5 h-5 text-slate-500"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:"Any Available"}),i.jsx("p",{className:"text-xs text-slate-500",children:"First available professional"})]})]}),i.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),w.map(me=>{const Se=me.portfolio||[];return i.jsxs("div",{className:"group bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[i.jsxs("button",{onClick:()=>ke(me),className:"w-full text-left",children:[i.jsxs("div",{className:"flex items-center gap-3.5 mb-2",children:[i.jsx(Qc,{name:me.name}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:me.name}),me.role&&i.jsx("p",{className:"text-xs text-slate-500",children:me.role})]})]}),me.bio&&i.jsx("p",{className:"text-xs text-slate-500 leading-relaxed mb-2 line-clamp-2",children:me.bio}),Se.length>0&&i.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[Se.slice(0,3).map((Ke,Ze)=>i.jsx("img",{src:Ke.url,alt:Ke.caption||"Work",className:"w-10 h-10 rounded-md object-cover border border-slate-200"},Ze)),Se.length>3&&i.jsxs("span",{className:"w-10 h-10 rounded-md bg-slate-100 border border-slate-200 flex items-center justify-center text-xs text-slate-500 font-semibold",children:["+",Se.length-3]})]}),i.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),Se.length>0&&i.jsxs("button",{onClick:Ke=>{Ke.stopPropagation(),J(me)},className:"mt-2 w-full flex items-center justify-center gap-1.5 py-1.5 text-xs font-semibold text-violet-600 hover:text-violet-700 hover:bg-violet-50 rounded-lg transition-all",children:[i.jsx(Image,{className:"w-3.5 h-3.5"}),"View Portfolio (",Se.length,")"]})]},me.id)})]})]}),$e==="calendar"&&i.jsxs("div",{className:"animate-fade-in",children:[(ue||Ae)&&i.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[i.jsxs("button",{onClick:ot,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[i.jsx(Ba,{className:"w-3.5 h-3.5"}),"Back"]}),T&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[i.jsx(gs,{className:"w-3.5 h-3.5 text-blue-500"}),i.jsx("span",{className:"font-semibold text-slate-800",children:T.name}),i.jsx("span",{className:"text-blue-600 font-bold",children:ys(T.price)}),i.jsxs("span",{className:"text-slate-400",children:[" ",ts(T.duration)]})]}),V&&V!=="any"&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[i.jsx(Qc,{name:V.name,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:V.name})]}),V==="any"&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[i.jsx(Gt,{className:"w-3.5 h-3.5 text-slate-500"}),i.jsx("span",{className:"font-semibold text-slate-700",children:"Any Available"})]})]}),Fa.length===0?i.jsx("div",{children:Te?i.jsx("div",{className:"max-w-lg mx-auto",children:i.jsx(A1,{shopId:r,slug:s,selectedService:T,selectedStaff:V,staffMembers:w,preferredDate:null,onCancel:()=>ve(!1)})}):i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),i.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:T?`No time slots available for ${T.name} (${ts(T.duration)}). Join the waitlist to be notified when a slot opens up!`:"Check back soon for new availability, or join the waitlist!"}),i.jsxs("button",{onClick:()=>ve(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:[i.jsx(Qh,{className:"w-4 h-4"}),"Join Waitlist"]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Select a Date"}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Pick a day that works for you"})]}),i.jsx("div",{className:"mb-8",children:i.jsx(oE,{availableDates:Fa,selectedDate:k,onSelectDate:U})}),k&&i.jsxs("div",{className:"animate-slide-down",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",Qn(k)]}),i.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[H.length," slot",H.length!==1?"s":""]})]}),H.length===0?i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[i.jsx("p",{className:"text-slate-500 mb-4",children:"No times available for this date"}),Te?i.jsx("div",{className:"mt-4 text-left",children:i.jsx(A1,{shopId:r,slug:s,selectedService:T,selectedStaff:V,staffMembers:w,preferredDate:k,onCancel:()=>ve(!1)})}):i.jsxs("button",{onClick:()=>ve(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(Qh,{className:"w-4 h-4"}),"Join the Waitlist"]})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:H.sort((me,Se)=>me.time.localeCompare(Se.time)).map(me=>i.jsxs("button",{onClick:()=>Qt(me),className:"group bg-white border border-slate-200 hover:border-blue-400 rounded-xl p-4 transition-all duration-200 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5 text-center",children:[i.jsx("div",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-700 transition-colors mb-1",children:Fn(me.time)}),me.staffName&&V==="any"&&i.jsxs("div",{className:"text-xs text-violet-600 mb-0.5 flex items-center justify-center gap-1",children:[i.jsx(Gt,{className:"w-3 h-3"}),me.staffName]}),i.jsx("div",{className:"text-xs text-slate-400",children:T?ts(T.duration):`${me.duration} min`})]},me.id))})]}),!k&&i.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]}),$e==="form"&&i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Complete Your Booking"}),i.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Review your details and confirm"}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[T&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(gs,{className:"w-4 h-4 text-blue-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:T.name})]}),i.jsx("span",{className:"font-bold text-blue-600",children:ys(T.price)})]}),V&&V!=="any"&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(Qc,{name:V.name,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-slate-800",children:V.name}),V.role&&i.jsxs("span",{className:"text-slate-400 text-sm ml-1.5",children:[" ",V.role]})]})]}),V==="any"&&j?.staffName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(Qc,{name:j.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:j.staffName})]}),i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"font-semibold text-slate-800",children:[Qn(j.date)," at ",Fn(j.time)]})]}),i.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(kn,{className:"w-4 h-4 text-slate-500"})}),i.jsx("span",{children:T?ts(T.duration):`${j.duration} min`})]})]}),i.jsxs("form",{onSubmit:Nt,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),i.jsx("input",{type:"text",value:D.name,onChange:me=>R({...D,name:me.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:D.email,onChange:me=>R({...D,email:me.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),i.jsx("input",{type:"tel",value:D.phone,onChange:me=>R({...D,phone:me.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(ui,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Make this recurring"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Book the same slot on a regular schedule"})]})]}),i.jsx("button",{type:"button",onClick:()=>xe(!ce),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${ce?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${ce?"translate-x-6":"translate-x-1"}`})})]}),ce&&i.jsxs("div",{className:"space-y-3 pt-1 animate-fade-in",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Repeat every"}),i.jsxs("select",{value:be,onChange:me=>De(me.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[i.jsx("option",{value:"weekly",children:"Week"}),i.jsx("option",{value:"biweekly",children:"2 Weeks"}),i.jsx("option",{value:"fourweekly",children:"4 Weeks"}),i.jsx("option",{value:"monthly",children:"Month"})]})]}),ct&&i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[" Every ",ct.intervalLabel," through ",ct.endDate]}),i.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[ct.total," total appointment",ct.total!==1?"s":""]}),ct.skipped>0&&i.jsxs("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:[" ",ct.skipped," date",ct.skipped!==1?"s":""," will be skipped due to existing bookings"]})]})]})]}),se&&i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 border border-emerald-200 rounded-xl",children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0",children:i.jsx(vo,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-emerald-800",children:["$",(Ne/100).toFixed(2)," deposit required"]}),i.jsxs("p",{className:"text-xs text-emerald-600",children:[T.depositPercent,"% of service price  Remaining $",(T.price-Ne/100).toFixed(2)," due at appointment"]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:I,className:`flex-1 flex items-center justify-center gap-2 px-6 py-3.5 ${se?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-600/20 hover:shadow-emerald-600/25":"bg-blue-600 hover:bg-blue-700 shadow-blue-600/20 hover:shadow-blue-600/25"} text-white rounded-xl font-semibold shadow-md hover:shadow-lg transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0`,children:I?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Booking"]}):se?i.jsxs(i.Fragment,{children:[i.jsx(vo,{className:"w-4 h-4"}),"Continue to Payment"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ds,{className:"w-4 h-4"}),"Confirm Booking"]})}),i.jsx("button",{type:"button",onClick:()=>{oe(!1),A(null)},className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]}),$e==="payment"&&i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Secure Payment"}),i.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Complete your deposit to confirm your booking"}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(Vt,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800",children:T?.name}),i.jsxs("p",{className:"text-sm text-slate-500",children:[j&&Qn(j.date)," at ",j&&Fn(j.time)]})]})]}),i.jsxs("div",{className:"text-sm text-slate-600 pl-13",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Client:"})," ",D.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",D.email]})]})]}),i.jsx(rO,{amount:Ne,serviceName:T?.name||"Service",clientInfo:D,onSuccess:An,onCancel:()=>dn(!1)})]})]}),P&&i.jsx(uO,{member:P,onClose:()=>J(null)}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(st,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})})}),i.jsx(_M,{services:x,staffMembers:w,shop:e,onSelectService:ut})]})}function hO({slotsByDate:s,bookingsByDate:e,selectedDate:t,onSelectDate:r,recurringDayFlags:o={}}){const[u,d]=N.useState(new Date),p=ie=>{const he=ie.getFullYear(),oe=ie.getMonth(),j=new Date(he,oe,1),k=new Date(he,oe+1,0).getDate(),U=j.getDay();return{daysInMonth:k,startingDayOfWeek:U,year:he,month:oe}},{daysInMonth:g,startingDayOfWeek:x,year:b,month:w}=p(u),E=()=>{d(new Date(u.getFullYear(),u.getMonth()-1))},T=()=>{d(new Date(u.getFullYear(),u.getMonth()+1))},L=ie=>`${b}-${String(w+1).padStart(2,"0")}-${String(ie).padStart(2,"0")}`,V=ie=>{const he=L(ie),oe=s[he]||[],j=e[he]||[],A=oe.filter(U=>U.available).length,k=j.length;return{availableCount:A,bookedCount:k,hasData:oe.length>0||j.length>0}},O=ie=>{const he=L(ie);r(he===t?null:he)},B=["January","February","March","April","May","June","July","August","September","October","November","December"],Y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],$=new Date;return $.setHours(0,0,0,0),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-5",children:[i.jsx("button",{onClick:E,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(eE,{className:"w-5 h-5 text-slate-600"})}),i.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[B[w]," ",b]}),i.jsx("button",{onClick:T,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(Af,{className:"w-5 h-5 text-slate-600"})})]}),i.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:Y.map(ie=>i.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:ie},ie))}),i.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:x}).map((ie,he)=>i.jsx("div",{},`empty-${he}`)),Array.from({length:g}).map((ie,he)=>{const oe=he+1,j=L(oe),{availableCount:A,bookedCount:k,hasData:U}=V(oe),M=j===t,F=new Date,I=F.getDate()===oe&&F.getMonth()===w&&F.getFullYear()===b,q=new Date(b,w,oe),D=q.getDay(),R=o[D]&&q>=$;return i.jsxs("button",{onClick:()=>O(oe),className:`
                relative p-2 text-center rounded-lg text-sm font-semibold transition-all duration-200 min-h-[56px] flex flex-col items-center justify-start cursor-pointer
                ${M?"bg-blue-600 text-white shadow-md shadow-blue-600/30":U||R?"bg-slate-50 hover:bg-slate-100 text-slate-900 border border-slate-200 hover:border-slate-300":I?"text-slate-900 font-bold hover:bg-slate-50":"text-slate-400 hover:bg-slate-50"}
              `,children:[i.jsxs("span",{className:`text-sm ${I&&!M?"relative":""}`,children:[oe,I&&!M&&i.jsx("span",{className:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]}),(U||R)&&i.jsxs("div",{className:"flex gap-0.5 mt-1 flex-wrap justify-center",children:[R&&i.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${M?"bg-white/20 text-white":"bg-violet-100 text-violet-700"}`,children:"R"}),A>0&&i.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${M?"bg-white/20 text-white":"bg-emerald-100 text-emerald-700"}`,children:A}),k>0&&i.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${M?"bg-white/20 text-white":"bg-blue-100 text-blue-700"}`,children:k})]})]},oe)})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-slate-500",children:[Object.keys(o).length>0&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-violet-100 border border-violet-200 rounded flex items-center justify-center text-[7px] font-bold text-violet-700",children:"R"}),i.jsx("span",{children:"Recurring"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-emerald-100 border border-emerald-200 rounded"}),i.jsx("span",{children:"Available"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-blue-100 border border-blue-200 rounded"}),i.jsx("span",{children:"Booked"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-blue-600 rounded"}),i.jsx("span",{children:"Selected"})]})]})]})}const fO=[{value:15,label:"15 min"},{value:30,label:"30 min"},{value:45,label:"45 min"},{value:60,label:"1 hour"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}],mO=[{value:0,label:"No deposit required"},{value:10,label:"10%"},{value:20,label:"20%"},{value:25,label:"25%"},{value:50,label:"50%"},{value:100,label:"Full payment upfront"}];function pO({shopId:s}){const[e,t]=N.useState([]),[r,o]=N.useState(!1),[u,d]=N.useState(null),[p,g]=N.useState({name:"",description:"",duration:30,price:"",depositPercent:0}),[x,b]=N.useState(!1);N.useEffect(()=>{if(!s)return;const B=tn(tt(Ee,"shops",s,"services"),Y=>{const $=Y.docs.map(ie=>({id:ie.id,...ie.data()})).filter(ie=>ie.active!==!1).sort((ie,he)=>(ie.name||"").localeCompare(he.name||""));t($)});return()=>B()},[s]);const w=()=>{g({name:"",description:"",duration:30,price:"",depositPercent:0}),o(!1),d(null)},E=async B=>{B.preventDefault(),b(!0);const Y={name:p.name.trim(),description:p.description.trim(),duration:parseInt(p.duration),price:parseFloat(p.price),depositPercent:parseInt(p.depositPercent)||0,active:!0};try{u?await it(Qe(Ee,"shops",s,"services",u),Y):await wr(tt(Ee,"shops",s,"services"),{...Y,createdAt:$g()}),w()}catch($){console.error("Error saving service:",$)}finally{b(!1)}},T=B=>{g({name:B.name,description:B.description||"",duration:B.duration,price:B.price.toString(),depositPercent:B.depositPercent||0}),d(B.id),o(!0)},L=async B=>{try{await it(Qe(Ee,"shops",s,"services",B),{active:!1})}catch(Y){console.error("Error deleting service:",Y)}},V=B=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(B),O=B=>{if(B<60)return`${B} min`;const Y=Math.floor(B/60),$=B%60;return $?`${Y}h ${$}m`:`${Y}h`};return i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Services"}),i.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Define the services you offer  clients will pick one before booking"})]}),!r&&i.jsxs("button",{onClick:()=>{w(),o(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[i.jsx(bi,{className:"w-4 h-4"}),"Add Service"]})]}),r&&i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Service":"New Service"}),i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Service Name *"}),i.jsx("input",{type:"text",value:p.name,onChange:B=>g({...p,name:B.target.value}),required:!0,placeholder:"e.g. Haircut",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description (optional)"}),i.jsx("input",{type:"text",value:p.description,onChange:B=>g({...p,description:B.target.value}),placeholder:"e.g. Classic cut and style",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Duration *"}),i.jsx("select",{value:p.duration,onChange:B=>g({...p,duration:B.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:fO.map(B=>i.jsx("option",{value:B.value,children:B.label},B.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Price (USD) *"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-semibold",children:"$"}),i.jsx("input",{type:"number",step:"0.01",min:"0",value:p.price,onChange:B=>g({...p,price:B.target.value}),required:!0,placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx(vo,{className:"w-4 h-4 text-emerald-500"}),"Deposit Required"]})}),i.jsx("select",{value:p.depositPercent,onChange:B=>g({...p,depositPercent:B.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:mO.map(B=>i.jsx("option",{value:B.value,children:B.label},B.value))})]})]}),p.depositPercent>0&&p.price&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-emerald-50 border border-emerald-200 rounded-lg text-sm",children:[i.jsx(vo,{className:"w-4 h-4 text-emerald-600"}),i.jsxs("span",{className:"text-emerald-800",children:["Clients will pay ",i.jsxs("strong",{children:["$",((parseFloat(p.price)||0)*(parseInt(p.depositPercent)/100)).toFixed(2)]})," deposit at booking",parseInt(p.depositPercent)<100&&i.jsxs("span",{children:[" ($",((parseFloat(p.price)||0)*(1-parseInt(p.depositPercent)/100)).toFixed(2)," remaining due at appointment)"]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[i.jsx(fs,{className:"w-4 h-4"}),x?"Saving":u?"Update Service":"Add Service"]}),i.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[i.jsx(da,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No services yet"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Add your first service so clients can choose what to book"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(B=>i.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:B.name}),B.description&&i.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:B.description})]}),i.jsx("span",{className:"text-xl font-bold text-blue-600 whitespace-nowrap ml-3",children:V(B.price)})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx(kn,{className:"w-4 h-4"}),O(B.duration)]}),B.depositPercent>0&&i.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full text-xs font-medium",children:[i.jsx(vo,{className:"w-3 h-3"}),B.depositPercent,"% deposit"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>T(B),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:[i.jsx(nE,{className:"w-3.5 h-3.5"}),"Edit"]}),i.jsx("button",{onClick:()=>L(B.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:i.jsx(gu,{className:"w-3.5 h-3.5"})})]})]},B.id))})]})}const t0=[{key:"monday",label:"Monday",short:"Mon"},{key:"tuesday",label:"Tuesday",short:"Tue"},{key:"wednesday",label:"Wednesday",short:"Wed"},{key:"thursday",label:"Thursday",short:"Thu"},{key:"friday",label:"Friday",short:"Fri"},{key:"saturday",label:"Saturday",short:"Sat"},{key:"sunday",label:"Sunday",short:"Sun"}],gO={enabled:!1,start:"09:00",end:"17:00",break:null};function xO({shopId:s,staffId:e,staffName:t,weeklyHours:r,onClose:o}){const[u,d]=N.useState(()=>{const O={};for(const B of t0){const Y=r?.[B.key];Y?O[B.key]={enabled:!!Y.enabled,start:Y.start||"09:00",end:Y.end||"17:00",break:Y.break?{start:Y.break.start,end:Y.break.end}:null}:O[B.key]={...gO}}return O}),[p,g]=N.useState(!1),[x,b]=N.useState(null),w=(O,B,Y)=>{d($=>({...$,[O]:{...$[O],[B]:Y}}))},E=O=>{d(B=>({...B,[O]:{...B[O],break:B[O].break?null:{start:"12:00",end:"13:00"}}}))},T=(O,B,Y)=>{d($=>({...$,[O]:{...$[O],break:{...$[O].break,[B]:Y}}}))},L=O=>{const B=u[O];d(Y=>{const $={...Y};for(const ie of t0)ie.key!==O&&($[ie.key]={enabled:B.enabled,start:B.start,end:B.end,break:B.break?{...B.break}:null});return $}),b(O),setTimeout(()=>b(null),1500)},V=async()=>{g(!0);try{await it(Qe(Ee,"shops",s,"staff",e),{weeklyHours:u}),o()}catch(O){console.error("Error saving weekly hours:",O)}finally{g(!1)}};return i.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Weekly Hours"}),i.jsx("p",{className:"text-sm text-slate-500",children:t})]}),i.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(da,{className:"w-5 h-5 text-slate-400"})})]}),i.jsx("div",{className:"space-y-3",children:t0.map(({key:O,label:B})=>{const Y=u[O];return i.jsx("div",{className:`rounded-xl p-4 transition-all ${Y.enabled?"bg-blue-50 border border-blue-200":"bg-slate-50 border border-slate-200"}`,children:i.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-[140px]",children:[i.jsx("button",{type:"button",onClick:()=>w(O,"enabled",!Y.enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Y.enabled?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${Y.enabled?"translate-x-6":"translate-x-1"}`})}),i.jsx("span",{className:`font-semibold text-sm ${Y.enabled?"text-slate-900":"text-slate-400"}`,children:B})]}),Y.enabled?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(kn,{className:"w-4 h-4 text-blue-500"}),i.jsx("input",{type:"time",value:Y.start,onChange:$=>w(O,"start",$.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("span",{className:"text-slate-400 text-sm",children:"to"}),i.jsx("input",{type:"time",value:Y.end,onChange:$=>w(O,"end",$.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>E(O),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${Y.break?"bg-amber-100 text-amber-700 border border-amber-200":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,children:[i.jsx(aD,{className:"w-3.5 h-3.5"}),Y.break?"Break":"+ Break"]}),Y.break&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("input",{type:"time",value:Y.break.start,onChange:$=>T(O,"start",$.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"}),i.jsx("span",{className:"text-slate-400 text-xs",children:""}),i.jsx("input",{type:"time",value:Y.break.end,onChange:$=>T(O,"end",$.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"})]})]}),i.jsx("button",{type:"button",onClick:()=>L(O),className:"text-xs text-blue-500 hover:text-blue-700 font-medium transition-colors whitespace-nowrap",children:x===O?" Copied!":"Copy to all"})]}):i.jsx("span",{className:"text-sm text-slate-400 italic",children:"Day off"})]})},O)})}),i.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-200",children:[i.jsxs("button",{onClick:V,disabled:p,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[i.jsx(YD,{className:"w-4 h-4"}),p?"Saving":"Save Hours"]}),i.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[i.jsx(da,{className:"w-4 h-4"}),"Cancel"]})]})]})}const dr={free:{name:"Free",price:0,staffLimit:1,platformFeePercent:5,features:["basicBooking","emailNotifications"]},pro:{name:"Pro",price:29,priceId:null,staffLimit:5,platformFeePercent:0,features:["basicBooking","emailNotifications","aiAssistant","recurringBookings","waitlist","crm","analytics","smsNotifications","customBranding"]},unlimited:{name:"Unlimited",price:79,priceId:null,staffLimit:1/0,platformFeePercent:0,features:["basicBooking","emailNotifications","aiAssistant","recurringBookings","waitlist","crm","analytics","smsNotifications","customBranding","walkIns","multiLocation","noBranding","apiAccess","prioritySupport"]}},bO={basicBooking:{name:"Online Booking",description:"Accept bookings through your booking page"},emailNotifications:{name:"Email Notifications",description:"Automatic booking confirmations and reminders"},aiAssistant:{name:"AI Booking Assistant",description:"Smart suggestions and automated responses"},recurringBookings:{name:"Recurring Bookings",description:"Schedule repeating appointments"},waitlist:{name:"Waitlist",description:"Let clients join a waitlist when fully booked"},crm:{name:"Client CRM",description:"Client notes, history, and win-back tracking"},analytics:{name:"Analytics",description:"Detailed booking and revenue analytics"},smsNotifications:{name:"SMS Notifications",description:"Send text message reminders to clients"},customBranding:{name:"Custom Branding",description:"Customize colors and branding on your booking page"},walkIns:{name:"Walk-in Queue",description:"Manage walk-in clients with live queue"},multiLocation:{name:"Multi-Location",description:"Manage multiple business locations"},noBranding:{name:"Remove SpotBookie Branding",description:"White-label your booking experience"},apiAccess:{name:"API Access",description:"Integrate with external tools and systems"},prioritySupport:{name:"Priority Support",description:"24/7 priority customer support"}};function NE(s){const e=s?.subscriptionTier||"free";return dr[e]?.staffLimit||1}function yO(s,e){const t=NE(s);return e<t}function vO(s,e){const t=dr[s]||dr.free,r=dr[e];return r?r.features.filter(o=>!t.features.includes(o)):[]}function wO(s){const e=["free","pro","unlimited"],t=e.indexOf(s||"free");return e.slice(t+1).map(r=>({key:r,...dr[r],newFeatures:vO(s,r)}))}const _O="https://us-central1-scheduler-65e51.cloudfunctions.net",NO={pro:"price_pro_monthly",unlimited:"price_unlimited_monthly"};function EO({isOpen:s,onClose:e,shopId:t,slug:r,currentTier:o="free",feature:u,title:d,description:p}){const[g,x]=N.useState(null),[b,w]=N.useState(null);if(!s)return null;const E=wO(o),T=async L=>{x(L),w(null);try{const V=await fetch(`${_O}/createCheckoutSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:t,priceId:NO[L],successUrl:`${window.location.origin}/#/shop/${r}/dashboard?subscription=success`,cancelUrl:`${window.location.origin}/#/shop/${r}/dashboard?subscription=canceled`})}),O=await V.json();if(!V.ok)throw new Error(O.error||"Failed to create checkout session");window.location.href=O.url}catch(V){console.error("Upgrade error:",V),w(V.message),x(null)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-violet-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/20",children:i.jsx(Cf,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:d||"Upgrade Required"}),i.jsx("p",{className:"text-sm text-slate-500",children:p||"Unlock more features with a premium plan"})]})]}),i.jsx("button",{onClick:e,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all",children:i.jsx(da,{className:"w-5 h-5"})})]}),b&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:b}),i.jsx("div",{className:"space-y-3",children:E.map(L=>i.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${L.key==="pro"?"border-blue-300 bg-blue-50/50":"border-violet-300 bg-violet-50/50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-slate-900",children:L.name}),i.jsxs("p",{className:"text-lg font-extrabold text-slate-900",children:["$",L.price,i.jsx("span",{className:"text-sm font-normal text-slate-500",children:"/month"})]})]}),i.jsx("button",{onClick:()=>T(L.key),disabled:g,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-sm transition-all disabled:opacity-50 ${L.key==="pro"?"bg-blue-500 hover:bg-blue-600 text-white shadow-md shadow-blue-500/20":"bg-violet-500 hover:bg-violet-600 text-white shadow-md shadow-violet-500/20"}`,children:g===L.key?i.jsx(wo,{className:"w-4 h-4 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(kf,{className:"w-4 h-4"}),"Upgrade"]})})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[L.key==="pro"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white border border-blue-200 rounded-lg text-xs font-medium text-blue-700",children:[i.jsx(Gt,{className:"w-3 h-3"}),"5 staff"]}),L.key==="unlimited"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white border border-violet-200 rounded-lg text-xs font-medium text-violet-700",children:[i.jsx(Gt,{className:"w-3 h-3"}),"Unlimited staff"]}),i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-emerald-50 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700",children:[i.jsx(fs,{className:"w-3 h-3"}),"No platform fees"]})]})]},L.key))}),i.jsx("p",{className:"text-xs text-slate-400 text-center mt-4",children:"Cancel anytime  14-day money-back guarantee"})]})})}function SO({currentCount:s,limit:e,onUpgradeClick:t}){const r=s>=e,o=s>=e-1&&s<e;return!r&&!o?null:i.jsxs("div",{className:`rounded-xl p-4 flex items-center justify-between gap-4 mb-4 ${r?"bg-amber-50 border border-amber-200":"bg-blue-50 border border-blue-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${r?"bg-amber-100":"bg-blue-100"}`,children:i.jsx(Gt,{className:`w-5 h-5 ${r?"text-amber-600":"text-blue-600"}`})}),i.jsxs("div",{children:[i.jsx("p",{className:`font-semibold text-sm ${r?"text-amber-900":"text-blue-900"}`,children:r?"Staff limit reached":"Almost at staff limit"}),i.jsxs("p",{className:"text-xs text-slate-600",children:["You have ",s," of ",e," staff member",e!==1?"s":"",".",r?" Upgrade to add more.":" Upgrade before you need more."]})]})]}),i.jsxs("button",{onClick:t,className:`flex items-center gap-1.5 px-4 py-2 rounded-lg font-semibold text-sm transition-all shadow-md flex-shrink-0 ${r?"bg-amber-500 hover:bg-amber-600 text-white shadow-amber-500/20":"bg-blue-500 hover:bg-blue-600 text-white shadow-blue-500/20"}`,children:[i.jsx(kf,{className:"w-4 h-4"}),"Upgrade"]})]})}const jO=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}],TO=5*1024*1024,AO=["image/jpeg","image/png","image/webp"];function B1(s){if(!s)return"";const[e,t]=s.split(":").map(Number),r=e>=12?"p":"a",o=e%12||12;return t===0?`${o}${r}`:`${o}:${t.toString().padStart(2,"0")}${r}`}function CO({shopId:s,shop:e,slug:t}){const[r,o]=N.useState([]),[u,d]=N.useState(!1),[p,g]=N.useState(null),[x,b]=N.useState(null),[w,E]=N.useState(null),[T,L]=N.useState({name:"",role:""}),[V,O]=N.useState(!1),[B,Y]=N.useState(!1),$=NE(e),ie=yO(e,r.length),[he,oe]=N.useState(null),[j,A]=N.useState(""),[k,U]=N.useState(!1),[M,F]=N.useState(!1),[I,q]=N.useState(""),[D,R]=N.useState(null),[W,le]=N.useState(null),[Te,ve]=N.useState(null),P=N.useRef(null);N.useEffect(()=>{if(!s)return;const ue=tn(tt(Ee,"shops",s,"staff"),Ae=>{const Ce=Ae.docs.map(Pe=>({id:Pe.id,...Pe.data()})).filter(Pe=>Pe.active!==!1).sort((Pe,yt)=>(Pe.name||"").localeCompare(yt.name||""));o(Ce)});return()=>ue()},[s]);const J=()=>{L({name:"",role:""}),d(!1),g(null)},ce=async ue=>{ue.preventDefault(),O(!0);const Ae={name:T.name.trim(),role:T.role.trim(),active:!0};try{p?await it(Qe(Ee,"shops",s,"staff",p),Ae):await wr(tt(Ee,"shops",s,"staff"),{...Ae,email:"",bio:"",portfolio:[],createdAt:$g()}),J()}catch(Ce){console.error("Error saving staff member:",Ce)}finally{O(!1)}},xe=ue=>{L({name:ue.name,role:ue.role||""}),g(ue.id),d(!0)},be=async ue=>{try{await it(Qe(Ee,"shops",s,"staff",ue),{active:!1})}catch(Ae){console.error("Error deleting staff member:",Ae)}},De=ue=>{oe(ue.id),A(ue.bio||"")},ze=async ue=>{U(!0);try{await it(Qe(Ee,"shops",s,"staff",ue),{bio:j.trim()}),oe(null),A("")}catch(Ae){console.error("Error saving bio:",Ae)}finally{U(!1)}},Ct=ue=>{R(ue),q(""),le(null),setTimeout(()=>{P.current&&(P.current.value="",P.current.click())},50)},ft=ue=>{const Ae=ue.target.files?.[0];if(Ae){if(!AO.includes(Ae.type)){alert("Please select a JPG, PNG, or WebP image.");return}if(Ae.size>TO){alert("File size must be under 5MB.");return}le(Ae)}},dn=async ue=>{if(W){F(!0);try{const Ae=Date.now(),Ce=W.name.split(".").pop(),Pe=`${Ae}.${Ce}`,yt=`shops/${s}/staff/${ue}/portfolio/${Pe}`,ct=v1(w1,yt);await m3(ct,W);const ut=await p3(ct),Ve=r.find(ot=>ot.id===ue)?.portfolio||[];await it(Qe(Ee,"shops",s,"staff",ue),{portfolio:[...Ve,{url:ut,storagePath:yt,caption:I.trim(),uploadedAt:new Date().toISOString()}]}),R(null),q(""),le(null)}catch(Ae){console.error("Error uploading photo:",Ae),alert("Upload failed. Please try again.")}finally{F(!1)}}},ne=async(ue,Ae)=>{const Ce=r.find(yt=>yt.id===ue);if(!Ce)return;const Pe=Ce.portfolio[Ae];if(Pe){ve(`${ue}-${Ae}`);try{if(Pe.storagePath)try{const ct=v1(w1,Pe.storagePath);await g3(ct)}catch(ct){console.warn("Storage delete warning:",ct)}const yt=Ce.portfolio.filter((ct,ut)=>ut!==Ae);await it(Qe(Ee,"shops",s,"staff",ue),{portfolio:yt})}catch(yt){console.error("Error deleting photo:",yt),alert("Failed to delete photo.")}finally{ve(null)}}},_e=ue=>{if(!ue)return null;const Ae=jO.filter(Ce=>ue[Ce.key]?.enabled);return Ae.length===0?null:Ae.map(Ce=>{const Pe=ue[Ce.key];return`${Ce.short} ${B1(Pe.start)}${B1(Pe.end)}`})};return i.jsxs("div",{children:[i.jsx("input",{ref:P,type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:ft}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Staff"}),i.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Manage your team  assign availability and bookings per staff member"})]}),!u&&(ie?i.jsxs("button",{onClick:()=>{J(),d(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[i.jsx(bi,{className:"w-4 h-4"}),"Add Staff"]}):i.jsxs("button",{onClick:()=>Y(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white rounded-xl font-semibold shadow-lg shadow-amber-500/30 hover:shadow-xl hover:shadow-amber-500/40 transition-all hover:-translate-y-0.5",children:[i.jsx(Cf,{className:"w-4 h-4"}),"Upgrade to Add More"]}))]}),i.jsx(SO,{currentCount:r.length,limit:$,onUpgradeClick:()=>Y(!0)}),i.jsx(EO,{isOpen:B,onClose:()=>Y(!1),shopId:s,slug:t,currentTier:e?.subscriptionTier||"free",title:"Add More Staff Members",description:`Your ${e?.subscriptionTier||"Free"} plan allows ${$} staff member${$!==1?"s":""}. Upgrade to add more.`}),u&&i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:p?"Edit Staff Member":"New Staff Member"}),i.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name *"}),i.jsx("input",{type:"text",value:T.name,onChange:ue=>L({...T,name:ue.target.value}),required:!0,placeholder:"e.g. Jane Smith",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Role (optional)"}),i.jsx("input",{type:"text",value:T.role,onChange:ue=>L({...T,role:ue.target.value}),placeholder:"e.g. Senior Stylist",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs("button",{type:"submit",disabled:V,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[i.jsx(fs,{className:"w-4 h-4"}),V?"Saving":p?"Update Staff":"Add Staff"]}),i.jsxs("button",{type:"button",onClick:J,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[i.jsx(da,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),r.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No staff members yet"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Add your team members to assign them availability and bookings"})]}):i.jsx("div",{className:"space-y-4",children:r.map(ue=>{const Ae=_e(ue.weeklyHours),Ce=ue.portfolio||[];return i.jsxs("div",{children:[i.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:ue.name}),ue.role&&i.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:ue.role})]}),i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(Gt,{className:"w-5 h-5 text-blue-600"})})]}),i.jsx("div",{className:"mb-3",children:he===ue.id?i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:j,onChange:Pe=>A(Pe.target.value),placeholder:"Write a short bio  specialties, experience, personality",rows:3,maxLength:500,className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>ze(ue.id),disabled:k,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[k?i.jsx(wo,{className:"w-3 h-3 animate-spin"}):i.jsx(fs,{className:"w-3 h-3"}),"Save Bio"]}),i.jsx("button",{onClick:()=>{oe(null),A("")},className:"px-3 py-1.5 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"}),i.jsxs("span",{className:"text-xs text-slate-400 ml-auto",children:[j.length,"/500"]})]})]}):i.jsx("div",{onClick:()=>De(ue),className:"cursor-pointer group",children:ue.bio?i.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed group-hover:text-slate-800 transition-colors",children:[ue.bio,i.jsx("span",{className:"ml-1.5 text-xs text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"edit"})]}):i.jsx("p",{className:"text-sm text-slate-400 italic group-hover:text-blue-500 transition-colors",children:"+ Add a bio"})})}),Ae?i.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5",children:Ae.map((Pe,yt)=>i.jsx("span",{className:"inline-block px-2 py-0.5 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium",children:Pe},yt))}):i.jsx("p",{className:"text-xs text-slate-400 mb-3 italic",children:"No weekly hours set"}),Ce.length>0&&w!==ue.id&&i.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[i.jsx("div",{className:"flex -space-x-1",children:Ce.slice(0,4).map((Pe,yt)=>i.jsx("img",{src:Pe.url,alt:Pe.caption||"Portfolio",className:"w-10 h-10 rounded-lg object-cover border-2 border-white shadow-sm"},yt))}),i.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[Ce.length," photo",Ce.length!==1?"s":""]})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsxs("button",{onClick:()=>b(x===ue.id?null:ue.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${x===ue.id?"bg-blue-100 text-blue-700 border-blue-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[i.jsx(kn,{className:"w-3.5 h-3.5"}),"Set Hours"]}),i.jsxs("button",{onClick:()=>E(w===ue.id?null:ue.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${w===ue.id?"bg-violet-100 text-violet-700 border-violet-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[i.jsx(q3,{className:"w-3.5 h-3.5"}),"Portfolio"]}),i.jsx("button",{onClick:()=>xe(ue),className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:i.jsx(nE,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>be(ue.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:i.jsx(gu,{className:"w-3.5 h-3.5"})})]})]}),x===ue.id&&i.jsx("div",{className:"mt-2",children:i.jsx(xO,{shopId:s,staffId:ue.id,staffName:ue.name,weeklyHours:ue.weeklyHours,onClose:()=>b(null)})}),w===ue.id&&i.jsxs("div",{className:"mt-2 bg-white border-2 border-violet-200 rounded-xl p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-800 flex items-center gap-2",children:[i.jsx(ND,{className:"w-4 h-4 text-violet-600"}),"Portfolio  ",ue.name]}),i.jsxs("button",{onClick:()=>Ct(ue.id),disabled:M,className:"flex items-center gap-1.5 px-3 py-1.5 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[i.jsx(bi,{className:"w-3 h-3"}),"Add Photo"]})]}),D===ue.id&&W&&i.jsxs("div",{className:"mb-4 p-3 bg-violet-50 border border-violet-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-16 h-16 rounded-lg bg-slate-200 overflow-hidden flex-shrink-0",children:i.jsx("img",{src:URL.createObjectURL(W),alt:"Preview",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-xs text-slate-600 font-medium mb-1 truncate",children:W.name}),i.jsxs("p",{className:"text-xs text-slate-400",children:[(W.size/1024/1024).toFixed(1)," MB"]})]})]}),i.jsx("input",{type:"text",value:I,onChange:Pe=>q(Pe.target.value),placeholder:"Add a caption (optional)",maxLength:200,className:"w-full px-3 py-2 text-sm border border-violet-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-400 focus:border-transparent mb-2"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>dn(ue.id),disabled:M,className:"flex items-center gap-1.5 px-4 py-2 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:M?i.jsxs(i.Fragment,{children:[i.jsx(wo,{className:"w-3 h-3 animate-spin"}),"Uploading"]}):i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-3 h-3"}),"Upload"]})}),i.jsx("button",{onClick:()=>{R(null),le(null),q("")},className:"px-3 py-2 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}),Ce.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet. Add some to showcase work!"})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:Ce.map((Pe,yt)=>i.jsxs("div",{className:"group relative bg-slate-50 rounded-lg overflow-hidden border border-slate-200 shadow-sm",children:[i.jsx("div",{className:"aspect-square",children:i.jsx("img",{src:Pe.url,alt:Pe.caption||"Portfolio photo",className:"w-full h-full object-cover"})}),Pe.caption&&i.jsx("div",{className:"px-2 py-1.5",children:i.jsx("p",{className:"text-xs text-slate-600 truncate",children:Pe.caption})}),i.jsx("button",{onClick:()=>ne(ue.id,yt),disabled:Te===`${ue.id}-${yt}`,className:"absolute top-1.5 right-1.5 w-7 h-7 bg-red-500/90 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-md disabled:opacity-50",title:"Delete photo",children:Te===`${ue.id}-${yt}`?i.jsx(wo,{className:"w-3.5 h-3.5 animate-spin"}):i.jsx(gu,{className:"w-3.5 h-3.5"})})]},yt))})]})]},ue.id)})})]})}function Ji(s){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function kO(s){const e=new Date(s),t=e.getDay(),r=t===0?-6:1-t;return e.setDate(e.getDate()+r),e.setHours(0,0,0,0),e}function Zi(s){return`$${Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function z1(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}function q1(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{weekday:"short"})}function n0(s,e){return e===0&&s===0?0:e===0?100:(s-e)/e*100}function RO({bookings:s}){const[e,t]=N.useState(null),[r,o]=N.useState(null),u=N.useMemo(()=>s.filter(q=>q.status==="confirmed"||q.status==="pending"||!q.status),[s]),d=N.useMemo(()=>{const q=new Date;return q.setHours(0,0,0,0),q},[]),p=N.useMemo(()=>Ji(d),[d]),g=N.useMemo(()=>kO(d),[d]),x=N.useMemo(()=>{const q=new Date(g);return q.setDate(q.getDate()+6),q},[g]),b=N.useMemo(()=>{const q=new Date(g);return q.setDate(q.getDate()-7),q},[g]),w=N.useMemo(()=>{const q=new Date(b);return q.setDate(q.getDate()+6),q},[b]),E=N.useMemo(()=>new Date(d.getFullYear(),d.getMonth(),1),[d]),T=N.useMemo(()=>new Date(d.getFullYear(),d.getMonth()-1,1),[d]),L=N.useMemo(()=>{const q=new Date(E);return q.setDate(q.getDate()-1),q},[E]),V=N.useMemo(()=>{const q=new Date(d);return q.setDate(q.getDate()-1),Ji(q)},[d]),O=N.useMemo(()=>{const q=ce=>ce.reduce((xe,be)=>xe+(Number(be.servicePrice)||0),0),D=(ce,xe,be)=>ce.date>=Ji(xe)&&ce.date<=Ji(be),R=q(u.filter(ce=>ce.date===p)),W=q(u.filter(ce=>ce.date===V)),le=q(u.filter(ce=>D(ce,g,x))),Te=q(u.filter(ce=>D(ce,b,w))),ve=q(u.filter(ce=>D(ce,E,d))),P=q(u.filter(ce=>D(ce,T,L))),J=q(u);return{today:R,todayChange:n0(R,W),week:le,weekChange:n0(le,Te),month:ve,monthChange:n0(ve,P),allTime:J}},[u,p,V,g,x,b,w,E,L,d]),B=N.useMemo(()=>{const q=[];for(let D=13;D>=0;D--){const R=new Date(d);R.setDate(R.getDate()-D),q.push(Ji(R))}return q},[d]),Y=N.useMemo(()=>{const q={};return B.forEach(D=>{q[D]=0}),u.forEach(D=>{q[D.date]!==void 0&&(q[D.date]+=Number(D.servicePrice)||0)}),B.map(D=>({date:D,value:q[D]}))},[u,B]),$=N.useMemo(()=>Math.max(...Y.map(q=>q.value),1),[Y]),ie=N.useMemo(()=>{const q={},D={};return B.forEach(R=>{q[R]=0,D[R]=0}),s.forEach(R=>{q[R.date]!==void 0&&(R.status==="cancelled"||R.status==="rejected"?D[R.date]++:q[R.date]++)}),B.map(R=>({date:R,confirmed:q[R],cancelled:D[R],total:q[R]+D[R]}))},[s,B]),he=N.useMemo(()=>Math.max(...ie.map(q=>q.total),1),[ie]),oe=N.useMemo(()=>{const q=s.length;if(q===0)return 100;const D=s.filter(R=>R.status==="cancelled"||R.status==="rejected").length;return Math.round((q-D)/q*100)},[s]),j=N.useMemo(()=>{const q=Array.from({length:7},()=>Array(24).fill(0));u.forEach(R=>{if(!R.date||!R.time)return;const le=new Date(R.date+"T12:00:00").getDay(),Te=parseInt(R.time.split(":")[0],10);!isNaN(le)&&!isNaN(Te)&&q[le][Te]++});let D=0;return q.forEach(R=>R.forEach(W=>{W>D&&(D=W)})),{grid:q,max:D}},[u]),A=N.useMemo(()=>{const q={};return u.forEach(D=>{const R=D.serviceName||"Unknown";q[R]||(q[R]={name:R,count:0,revenue:0}),q[R].count++,q[R].revenue+=Number(D.servicePrice)||0}),Object.values(q).map(D=>({...D,avgRevenue:D.count>0?D.revenue/D.count:0})).sort((D,R)=>R.revenue-D.revenue)},[u]),k=N.useMemo(()=>{const q={};return u.forEach(D=>{const R=D.staffName||"Unassigned";q[R]||(q[R]={name:R,count:0,revenue:0,clients:new Set}),q[R].count++,q[R].revenue+=Number(D.servicePrice)||0,D.clientEmail&&q[R].clients.add(D.clientEmail.toLowerCase())}),Object.values(q).map(D=>({...D,clientCount:D.clients.size})).sort((D,R)=>R.revenue-D.revenue)},[u]),U=N.useMemo(()=>{const q=u.map(be=>be.clientEmail?.toLowerCase()).filter(Boolean),D=new Set(q).size,R=u.filter(be=>be.date>=Ji(E)&&be.date<=p),W=new Set(R.map(be=>be.clientEmail?.toLowerCase()).filter(Boolean)),le=u.filter(be=>be.date<Ji(E)),Te=new Set(le.map(be=>be.clientEmail?.toLowerCase()).filter(Boolean));let ve=0,P=0;W.forEach(be=>{Te.has(be)?P++:ve++});const J={};u.forEach(be=>{const De=be.clientEmail?.toLowerCase();De&&(J[De]||(J[De]={email:De,name:be.clientName||De,count:0}),J[De].count++,be.clientName&&(J[De].name=be.clientName))});const ce=Object.values(J).sort((be,De)=>De.count-be.count).slice(0,10),xe=D>0?u.length/D:0;return{uniqueClients:D,newThisMonth:ve,returningThisMonth:P,topClients:ce,avgBookingsPerClient:xe}},[u,E,p]),M=({value:q,suffix:D="vs prev"})=>{if(q===0)return i.jsxs("span",{className:"flex items-center gap-0.5 text-xs font-medium text-slate-400",children:[i.jsx(PD,{className:"w-3 h-3"})," 0% ",D]});const R=q>0;return i.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-semibold ${R?"text-emerald-600":"text-red-500"}`,children:[R?i.jsx(M3,{className:"w-3 h-3"}):i.jsx(A3,{className:"w-3 h-3"}),R?"+":"",Math.round(q),"% ",D]})},F=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I=Array.from({length:15},(q,D)=>D+7);return i.jsxs("div",{className:"animate-fade-in space-y-6",children:[i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Today's Revenue",value:O.today,change:O.todayChange,suffix:"vs yesterday",icon:uD,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:O.week,change:O.weekChange,suffix:"vs last week",icon:nx,color:"bg-violet-100 text-violet-600"},{label:"This Month",value:O.month,change:O.monthChange,suffix:"vs last month",icon:Vt,color:"bg-emerald-100 text-emerald-600"},{label:"All-time Revenue",value:O.allTime,change:null,icon:ex,color:"bg-amber-100 text-amber-600"}].map(q=>{const D=q.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${q.color} rounded-xl flex items-center justify-center`,children:i.jsx(D,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:Zi(q.value)}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5 mb-1",children:q.label}),q.change!==null&&i.jsx(M,{value:q.change,suffix:q.suffix})]},q.label)})}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Revenue  Last 14 Days"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Daily revenue from confirmed & pending bookings"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-[600px]",children:[i.jsxs("div",{className:"flex items-end gap-0",children:[i.jsxs("div",{className:"flex flex-col justify-between h-48 pr-2 text-right flex-shrink-0 w-16",children:[i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Zi($)}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Zi($/2)}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"$0"})]}),i.jsx("div",{className:"flex-1 flex items-end gap-1 h-48 border-b border-l border-slate-200 pl-1 pb-0 relative",children:Y.map((q,D)=>{const R=$>0?q.value/$*100:0,W=e===D;return i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative group",onMouseEnter:()=>t(D),onMouseLeave:()=>t(null),onTouchStart:()=>t(D),children:[W&&i.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[Zi(q.value),i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),i.jsx("div",{className:"w-full rounded-t-md transition-all duration-200 cursor-pointer",style:{height:`${Math.max(R,q.value>0?2:0)}%`,background:W?"linear-gradient(to top, #2563eb, #60a5fa)":"linear-gradient(to top, #3b82f6, #93c5fd)",minHeight:q.value>0?"4px":"0px"}})]},q.date)})})]}),i.jsx("div",{className:"flex ml-16 pl-1",children:Y.map(q=>i.jsxs("div",{className:"flex-1 text-center",children:[i.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:q1(q.date)}),i.jsx("div",{className:"text-[9px] text-slate-400",children:z1(q.date)})]},q.date))})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Booking Trends  Last 14 Days"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Daily bookings breakdown"})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-blue-500"})," Confirmed"]}),i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-red-400"})," Cancelled"]}),i.jsxs("span",{className:"px-2.5 py-1 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg font-semibold",children:[oe,"% completion"]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-[600px]",children:[i.jsxs("div",{className:"flex items-end gap-0",children:[i.jsxs("div",{className:"flex flex-col justify-between h-40 pr-2 text-right flex-shrink-0 w-16",children:[i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:he}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Math.round(he/2)}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"0"})]}),i.jsx("div",{className:"flex-1 flex items-end gap-1 h-40 border-b border-l border-slate-200 pl-1 relative",children:ie.map((q,D)=>{const R=he>0?q.confirmed/he*100:0,W=he>0?q.cancelled/he*100:0,le=r===D;return i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative",onMouseEnter:()=>o(D),onMouseLeave:()=>o(null),onTouchStart:()=>o(D),children:[le&&i.jsxs("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[q.confirmed," confirmed, ",q.cancelled," cancelled",i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),i.jsxs("div",{className:"w-full flex flex-col items-stretch",children:[q.cancelled>0&&i.jsx("div",{className:"w-full rounded-t-md bg-red-400 transition-all duration-200",style:{height:`${Math.max(W,2)}%`}}),q.confirmed>0&&i.jsx("div",{className:`w-full bg-blue-500 transition-all duration-200 ${q.cancelled===0?"rounded-t-md":""}`,style:{height:`${Math.max(R,2)}%`}})]})]},q.date)})})]}),i.jsx("div",{className:"flex ml-16 pl-1",children:ie.map(q=>i.jsxs("div",{className:"flex-1 text-center",children:[i.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:q1(q.date)}),i.jsx("div",{className:"text-[9px] text-slate-400",children:z1(q.date)})]},q.date))})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Busiest Times"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Booking density by day of week and hour"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-[600px]",children:[i.jsxs("table",{className:"w-full border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"w-12"}),I.map(q=>i.jsxs("th",{className:"text-[10px] text-slate-400 font-medium pb-2 text-center px-0.5",children:[q%12||12,q>=12?"p":"a"]},q))]})}),i.jsx("tbody",{children:[1,2,3,4,5,6,0].map(q=>i.jsxs("tr",{children:[i.jsx("td",{className:"text-[11px] text-slate-500 font-semibold pr-2 py-0.5 text-right",children:F[q]}),I.map(D=>{const R=j.grid[q][D],W=j.max||1,le=R/W;let Te="bg-slate-50";return R>0&&(le<=.2?Te="bg-blue-100":le<=.4?Te="bg-blue-200":le<=.6?Te="bg-blue-300":le<=.8?Te="bg-blue-500 text-white":Te="bg-blue-700 text-white"),i.jsx("td",{className:"px-0.5 py-0.5",children:i.jsx("div",{className:`w-full aspect-square rounded-sm ${Te} flex items-center justify-center text-[9px] font-bold transition-all hover:ring-2 hover:ring-blue-400 hover:ring-offset-1 cursor-default`,title:`${F[q]} ${D}:00  ${R} booking${R!==1?"s":""}`,children:R>0?R:""})},D)})]},q))})]}),i.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-3",children:[i.jsx("span",{className:"text-[10px] text-slate-400",children:"Less"}),["bg-slate-50","bg-blue-100","bg-blue-200","bg-blue-300","bg-blue-500","bg-blue-700"].map((q,D)=>i.jsx("div",{className:`w-4 h-4 rounded-sm ${q} border border-slate-200`},D)),i.jsx("span",{className:"text-[10px] text-slate-400",children:"More"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Top Services"}),i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Ranked by revenue from confirmed & pending bookings"}),A.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(gs,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No service data yet"})]}):i.jsx("div",{className:"space-y-2",children:A.map((q,D)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 font-bold text-sm flex-shrink-0",children:D+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:q.name}),i.jsxs("div",{className:"text-xs text-slate-500",children:[q.count," booking",q.count!==1?"s":"","  avg ",Zi(q.avgRevenue)]})]}),i.jsx("div",{className:"text-sm font-bold text-blue-600 flex-shrink-0",children:Zi(q.revenue)})]},q.name))})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Staff Performance"}),i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Bookings, revenue & clients per staff member"}),k.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Gt,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No staff data yet"})]}):i.jsx("div",{className:"space-y-2",children:k.map((q,D)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center text-violet-600 font-bold text-sm flex-shrink-0",children:D+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:q.name}),i.jsxs("div",{className:"text-xs text-slate-500",children:[q.count," booking",q.count!==1?"s":"","  ",q.clientCount," client",q.clientCount!==1?"s":""]})]}),i.jsx("div",{className:"text-sm font-bold text-violet-600 flex-shrink-0",children:Zi(q.revenue)})]},q.name))})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Client Insights"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Understanding your client base"}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[i.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:U.uniqueClients}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:"Total Unique Clients"})]}),i.jsxs("div",{className:"bg-emerald-50 rounded-xl border border-emerald-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-emerald-700",children:U.newThisMonth}),i.jsx("div",{className:"text-xs font-medium text-emerald-600 mt-0.5",children:"New This Month"})]}),i.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-blue-700",children:U.returningThisMonth}),i.jsx("div",{className:"text-xs font-medium text-blue-600 mt-0.5",children:"Returning This Month"})]}),i.jsxs("div",{className:"bg-violet-50 rounded-xl border border-violet-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-violet-700",children:U.avgBookingsPerClient.toFixed(1)}),i.jsx("div",{className:"text-xs font-medium text-violet-600 mt-0.5",children:"Avg Bookings / Client"})]})]}),i.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"Top Clients by Frequency"}),U.topClients.length===0?i.jsxs("div",{className:"text-center py-6",children:[i.jsx(pl,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No client data yet"})]}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:U.topClients.map((q,D)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center text-amber-700 font-bold text-xs flex-shrink-0",children:D+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:q.name}),i.jsx("div",{className:"text-xs text-slate-400 truncate",children:q.email})]}),i.jsxs("div",{className:"flex-shrink-0 px-2.5 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-bold",children:[q.count," visit",q.count!==1?"s":""]})]},q.email))})]})]})}function EE({waitingAhead:s=[],inProgress:e=[],staffCount:t=1,upcomingBookings:r=[],defaultDuration:o=30}){const u=Math.max(t,1),d=Date.now(),p=e.map(b=>{const w=b.startedAt?.toDate?.()||(b.startedAt?new Date(b.startedAt):null);if(!w)return 0;const E=(d-w.getTime())/6e4,T=b.estimatedDuration||o;return Math.max(0,T-E)});p.sort((b,w)=>b-w);const g=[];for(let b=0;b<u;b++)g.push(p[b]||0);g.sort((b,w)=>b-w);const x=s.map(b=>b.estimatedDuration||o);for(const b of x)g[0]+=b,g.sort((w,E)=>w-E);return Math.round(g[0])}function SE({waitingQueue:s=[],inProgress:e=[],staffCount:t=1,upcomingBookings:r=[],defaultDuration:o=30}){const u=new Map;for(let d=0;d<s.length;d++){const p=s.slice(0,d),g=EE({waitingAhead:p,inProgress:e,staffCount:t,upcomingBookings:r,defaultDuration:o});u.set(s[d].id,g)}return u}function IO(s=[],e=3){const t=new Date,r=new Date(t.getTime()+e*60*60*1e3),o=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;return s.filter(u=>{if(u.status==="cancelled"||u.status==="rejected"||u.date!==o)return!1;const d=new Date(`${u.date}T${u.time}`);return d>=t&&d<=r}).sort((u,d)=>`${u.time}`.localeCompare(`${d.time}`))}function DO(s){if(!s)return"0m";const e=s?.toDate?.()||new Date(s),t=Math.floor((Date.now()-e.getTime())/6e4);if(t<1)return"<1m";if(t<60)return`${t}m`;const r=Math.floor(t/60),o=t%60;return o>0?`${r}h ${o}m`:`${r}h`}function MO(s){if(s==null)return"";if(s<1)return"Next up";if(s<60)return`~${s}m`;const e=Math.floor(s/60),t=s%60;return t>0?`~${e}h ${t}m`:`~${e}h`}function OO({shopId:s,services:e,staff:t,bookings:r}){const[o,u]=N.useState([]),[d,p]=N.useState(!1),[g,x]=N.useState(!1),[b,w]=N.useState(!1),[E,T]=N.useState({clientName:"",serviceId:"",staffId:"",estimatedDuration:30});N.useEffect(()=>{if(!s)return;const D=tn(tt(Ee,"shops",s,"walkins"),R=>{const W=R.docs.map(le=>({id:le.id,...le.data()}));u(W)});return()=>D()},[s]);const L=N.useMemo(()=>o.filter(D=>D.status==="waiting").sort((D,R)=>(D.position||0)-(R.position||0)),[o]),V=N.useMemo(()=>o.filter(D=>D.status==="in-progress").sort((D,R)=>{const W=D.startedAt?.toDate?.()?.getTime()||0,le=R.startedAt?.toDate?.()?.getTime()||0;return W-le}),[o]),O=N.useMemo(()=>{const D=new Date;return D.setHours(0,0,0,0),D},[]),B=N.useMemo(()=>o.filter(D=>{if(D.status!=="completed"&&D.status!=="no-show")return!1;const R=D.completedAt?.toDate?.()||(D.completedAt?new Date(D.completedAt):null);return R?R>=O:!1}).sort((D,R)=>{const W=D.completedAt?.toDate?.()?.getTime()||0;return(R.completedAt?.toDate?.()?.getTime()||0)-W}),[o,O]),Y=N.useMemo(()=>Math.max(t.filter(D=>D.active!==!1).length,1),[t]),$=N.useMemo(()=>IO(r,3),[r]),ie=N.useMemo(()=>SE({waitingQueue:L,inProgress:V,staffCount:Y,upcomingBookings:$,defaultDuration:30}),[L,V,Y,$]),he=N.useMemo(()=>{const D=B.filter(W=>W.status==="completed"&&W.joinedAt&&W.startedAt).map(W=>{const le=W.joinedAt?.toDate?.()||new Date(W.joinedAt),Te=W.startedAt?.toDate?.()||new Date(W.startedAt);return Math.floor((Te.getTime()-le.getTime())/6e4)}).filter(W=>W>=0),R=D.length>0?Math.round(D.reduce((W,le)=>W+le,0)/D.length):0;return{waiting:L.length,avgWait:R,completedToday:B.filter(W=>W.status==="completed").length}},[L,B]),oe=D=>{const R=e.find(W=>W.id===D);T(W=>({...W,serviceId:D,estimatedDuration:R?.duration||30}))},j=()=>L.length===0?1:Math.max(...L.map(D=>D.position||0))+1,A=N.useMemo(()=>o.filter(D=>{const R=D.joinedAt?.toDate?.()||(D.joinedAt?new Date(D.joinedAt):null);return R&&R>=O}).length,[o,O]),k=async D=>{D.preventDefault(),w(!0);const R=e.find(ve=>ve.id===E.serviceId),W=t.find(ve=>ve.id===E.staffId),le=j(),Te=E.clientName.trim()||`Walk-in #${A+1}`;try{await wr(tt(Ee,"shops",s,"walkins"),{clientName:Te,serviceId:E.serviceId||null,serviceName:R?.name||null,staffId:E.staffId||null,staffName:W?.name||null,estimatedDuration:parseInt(E.estimatedDuration)||30,status:"waiting",position:le,joinedAt:Rt.now(),startedAt:null,completedAt:null,estimatedWaitMinutes:null}),T({clientName:"",serviceId:"",staffId:"",estimatedDuration:30}),p(!1)}catch(ve){console.error("Error adding walk-in:",ve)}finally{w(!1)}},U=async D=>{try{await it(Qe(Ee,"shops",s,"walkins",D),{status:"in-progress",startedAt:Rt.now()});const R=L.filter(W=>W.id!==D).sort((W,le)=>(W.position||0)-(le.position||0));for(let W=0;W<R.length;W++)await it(Qe(Ee,"shops",s,"walkins",R[W].id),{position:W+1})}catch(R){console.error("Error starting service:",R)}},M=async D=>{try{await it(Qe(Ee,"shops",s,"walkins",D),{status:"completed",completedAt:Rt.now()})}catch(R){console.error("Error completing service:",R)}},F=async D=>{try{await it(Qe(Ee,"shops",s,"walkins",D),{status:"no-show",completedAt:Rt.now()});const R=L.filter(W=>W.id!==D).sort((W,le)=>(W.position||0)-(le.position||0));for(let W=0;W<R.length;W++)await it(Qe(Ee,"shops",s,"walkins",R[W].id),{position:W+1})}catch(R){console.error("Error marking no-show:",R)}},I=async D=>{const R=L.findIndex(Te=>Te.id===D);if(R<=0)return;const W=L[R-1],le=L[R];try{await it(Qe(Ee,"shops",s,"walkins",le.id),{position:W.position}),await it(Qe(Ee,"shops",s,"walkins",W.id),{position:le.position})}catch(Te){console.error("Error reordering:",Te)}},q=async D=>{const R=L.findIndex(Te=>Te.id===D);if(R<0||R>=L.length-1)return;const W=L[R+1],le=L[R];try{await it(Qe(Ee,"shops",s,"walkins",le.id),{position:W.position}),await it(Qe(Ee,"shops",s,"walkins",W.id),{position:le.position})}catch(Te){console.error("Error reordering:",Te)}};return i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[{label:"Currently Waiting",value:he.waiting,icon:Gt,color:"bg-blue-100 text-blue-600"},{label:"Avg Wait",value:he.avgWait>0?`${he.avgWait}m`:"",icon:iE,color:"bg-amber-100 text-amber-600"},{label:"Completed Today",value:he.completedToday,icon:nx,color:"bg-emerald-100 text-emerald-600"}].map(D=>{const R=D.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${D.color} rounded-xl flex items-center justify-center`,children:i.jsx(R,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:D.value}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:D.label})]},D.label)})}),$.length>0&&i.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(ml,{className:"w-4 h-4 text-amber-600"}),i.jsx("span",{className:"text-sm font-bold text-amber-800",children:"Upcoming Online Bookings"})]}),i.jsx("div",{className:"space-y-1",children:$.slice(0,5).map(D=>{const[R,W]=(D.time||"").split(":"),le=parseInt(R),Te=`${le%12||12}:${W} ${le>=12?"PM":"AM"}`;return i.jsxs("div",{className:"text-xs text-amber-700 flex items-center gap-2",children:[i.jsx(kn,{className:"w-3 h-3"}),i.jsx("span",{className:"font-medium",children:Te}),i.jsx("span",{children:""}),i.jsx("span",{children:D.clientName}),D.serviceName&&i.jsxs("span",{className:"text-amber-500",children:["(",D.serviceName,")"]}),D.staffName&&i.jsxs("span",{className:"text-violet-600",children:["with ",D.staffName]})]},D.id)})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Walk-in Queue"}),!d&&i.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 transition-all hover:-translate-y-0.5",children:[i.jsx(bi,{className:"w-4 h-4"}),"Add Walk-in"]})]}),d&&i.jsxs("form",{onSubmit:k,className:"mb-5 p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"New Walk-in"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Client Name"}),i.jsx("input",{type:"text",value:E.clientName,onChange:D=>T(R=>({...R,clientName:D.target.value})),placeholder:`Walk-in #${A+1}`,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Service"}),i.jsxs("select",{value:E.serviceId,onChange:D=>oe(D.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"",children:"No service selected"}),e.map(D=>i.jsxs("option",{value:D.id,children:[D.name," (",D.duration,"min)"]},D.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Staff Preference"}),i.jsxs("select",{value:E.staffId,onChange:D=>T(R=>({...R,staffId:D.target.value})),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"",children:"Next available"}),t.map(D=>i.jsx("option",{value:D.id,children:D.name},D.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Est. Duration (min)"}),i.jsx("select",{value:E.estimatedDuration,onChange:D=>T(R=>({...R,estimatedDuration:parseInt(D.target.value)})),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[15,30,45,60,90,120].map(D=>i.jsx("option",{value:D,children:D<60?`${D} min`:`${D/60}h${D%60?` ${D%60}m`:""}`},D))})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{type:"submit",disabled:b,className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 transition-all disabled:opacity-50",children:[i.jsx(bi,{className:"w-4 h-4"}),b?"Adding":"Add to Queue"]}),i.jsx("button",{type:"button",onClick:()=>{p(!1),T({clientName:"",serviceId:"",staffId:"",estimatedDuration:30})},className:"px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Cancel"})]})]}),L.length===0&&V.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Gt,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No walk-ins in queue"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Add a walk-in client to start the queue."})]}):i.jsxs(i.Fragment,{children:[L.length>0&&i.jsxs("div",{className:"mb-5",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[i.jsx(kn,{className:"w-4 h-4 text-blue-500"}),"Waiting",i.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:L.length})]}),i.jsx("div",{className:"space-y-2",children:L.map((D,R)=>{const W=ie.get(D.id);return i.jsxs("div",{className:"group flex items-center gap-3 border border-slate-200 rounded-xl p-3.5 hover:border-slate-300 hover:shadow-sm transition-all",children:[i.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[i.jsx("button",{onClick:()=>I(D.id),disabled:R===0,className:"p-0.5 text-slate-400 hover:text-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:i.jsx(M0,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center font-bold text-blue-700 text-sm",children:R+1}),i.jsx("button",{onClick:()=>q(D.id),disabled:R===L.length-1,className:"p-0.5 text-slate-400 hover:text-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:i.jsx(D0,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:D.clientName}),i.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 border border-blue-200 text-[10px] font-bold rounded-md",children:"WAITING"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-slate-500",children:[D.serviceName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(gs,{className:"w-3 h-3 text-blue-400"}),D.serviceName]}),D.staffName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(pl,{className:"w-3 h-3 text-violet-400"}),D.staffName]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(kn,{className:"w-3 h-3"}),D.estimatedDuration||30,"min"]})]})]}),i.jsxs("div",{className:"text-right mr-2",children:[i.jsx("div",{className:"text-sm font-bold text-amber-600",children:MO(W)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"est. wait"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:()=>U(D.id),className:"flex items-center gap-1 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 text-emerald-700 border border-emerald-200 rounded-lg text-xs font-semibold transition-all",title:"Start Service",children:[i.jsx(Xp,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"Start"})]}),i.jsxs("button",{onClick:()=>F(D.id),className:"flex items-center gap-1 px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 rounded-lg text-xs font-semibold transition-all",title:"No-show",children:[i.jsx(Ia,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"No-show"})]})]})]},D.id)})})]}),V.length>0&&i.jsxs("div",{className:"mb-5",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[i.jsx(Xp,{className:"w-4 h-4 text-emerald-500"}),"In Progress",i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 text-xs font-bold rounded-full",children:V.length})]}),i.jsx("div",{className:"space-y-2",children:V.map(D=>i.jsxs("div",{className:"flex items-center gap-3 border border-emerald-200 bg-emerald-50/50 rounded-xl p-3.5 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center",children:i.jsx(Xp,{className:"w-4 h-4 text-emerald-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:D.clientName}),i.jsx("span",{className:"px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 text-[10px] font-bold rounded-md",children:"IN PROGRESS"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-slate-500",children:[D.serviceName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(gs,{className:"w-3 h-3 text-blue-400"}),D.serviceName]}),D.staffName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(pl,{className:"w-3 h-3 text-violet-400"}),D.staffName]})]})]}),i.jsxs("div",{className:"text-right mr-2",children:[i.jsx("div",{className:"text-sm font-bold text-emerald-600",children:DO(D.startedAt)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"elapsed"})]}),i.jsxs("button",{onClick:()=>M(D.id),className:"flex items-center gap-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded-lg text-xs font-semibold transition-all",title:"Complete",children:[i.jsx(Ds,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"Complete"})]})]},D.id))})]})]})]}),B.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("button",{onClick:()=>x(!g),className:"w-full flex items-center justify-between",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[i.jsx(Ds,{className:"w-4 h-4 text-slate-400"}),"Completed Today",i.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 border border-slate-200 text-xs font-bold rounded-full",children:B.length})]}),i.jsx(Af,{className:`w-4 h-4 text-slate-400 transition-transform ${g?"rotate-90":""}`})]}),g&&i.jsx("div",{className:"mt-3 space-y-2",children:B.map(D=>i.jsxs("div",{className:"flex items-center gap-3 border border-slate-100 rounded-lg p-3 bg-slate-50/50",children:[i.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center bg-slate-100",children:D.status==="no-show"?i.jsx(Ia,{className:"w-3.5 h-3.5 text-red-400"}):i.jsx(Ds,{className:"w-3.5 h-3.5 text-emerald-400"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-slate-700 text-sm truncate",children:D.clientName}),i.jsx("span",{className:`text-[10px] font-bold rounded-md px-1.5 py-0.5 border ${D.status==="no-show"?"bg-red-50 text-red-600 border-red-200":"bg-emerald-50 text-emerald-600 border-emerald-200"}`,children:D.status==="no-show"?"NO-SHOW":"COMPLETED"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[D.serviceName&&i.jsx("span",{children:D.serviceName}),D.staffName&&i.jsxs("span",{children:[" ",D.staffName]})]})]})]},D.id))})]})]})}function PO(s,e){const t=new Date(s+"T12:00:00"),r=e.getTime()-t.getTime();return Math.floor(r/864e5)}function uh(s){return`$${Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function Fc(s){return s?new Date(s+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function VO(s,e,t){return s>90?"lost":s>t?"at-risk":s>e?"getting-cold":"active"}const dh={active:{label:"Active",bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",icon:tx,iconColor:"text-emerald-500"},"getting-cold":{label:"Getting Cold",bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200",icon:rE,iconColor:"text-amber-500"},"at-risk":{label:"At Risk",bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",icon:ml,iconColor:"text-orange-500"},lost:{label:"Lost",bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:gD,iconColor:"text-red-500"}};function LO({shopId:s,bookings:e,shop:t,slug:r}){const[o,u]=N.useState({}),[d,p]=N.useState(null),[g,x]=N.useState(null),[b,w]=N.useState(""),[E,T]=N.useState(""),[L,V]=N.useState("all"),[O,B]=N.useState("lastVisit"),[Y,$]=N.useState("asc"),[ie,he]=N.useState(null),[oe,j]=N.useState(!1),[A,k]=N.useState(null),[U,M]=N.useState(!1),[F,I]=N.useState(null),q=t?.winbackSettings?.warningDays||30,D=t?.winbackSettings?.inactiveDays||60,R=t?.winbackSettings?.enabled!==!1,W=ne=>ne.toLowerCase().replace(/\./g,"_dot_").replace(/@/g,"_at_");N.useEffect(()=>{if(!s)return;const ne=tn(tt(Ee,"shops",s,"clientNotes"),_e=>{const ue={};_e.docs.forEach(Ae=>{ue[Ae.id]=Ae.data()}),u(ue)});return()=>ne()},[s]);const le=N.useMemo(()=>new Date,[]),Te=N.useMemo(()=>e.filter(ne=>ne.status==="confirmed"||ne.status==="pending"||!ne.status),[e]),ve=N.useMemo(()=>{const ne={};return Te.forEach(_e=>{const ue=_e.clientEmail?.toLowerCase();if(!ue)return;ne[ue]||(ne[ue]={email:ue,name:_e.clientName||ue,phone:_e.clientPhone||"",totalVisits:0,totalSpent:0,lastVisitDate:null,firstVisitDate:null,bookings:[],serviceFrequency:{},staffFrequency:{}});const Ae=ne[ue];_e.clientName&&(Ae.name=_e.clientName),_e.clientPhone&&(Ae.phone=_e.clientPhone),Ae.totalVisits++,Ae.totalSpent+=Number(_e.servicePrice)||0,Ae.bookings.push(_e),(!Ae.lastVisitDate||_e.date>Ae.lastVisitDate)&&(Ae.lastVisitDate=_e.date),(!Ae.firstVisitDate||_e.date<Ae.firstVisitDate)&&(Ae.firstVisitDate=_e.date),_e.serviceName&&(Ae.serviceFrequency[_e.serviceName]=(Ae.serviceFrequency[_e.serviceName]||0)+1),_e.staffName&&(Ae.staffFrequency[_e.staffName]=(Ae.staffFrequency[_e.staffName]||0)+1)}),Object.values(ne).map(_e=>{const ue=_e.lastVisitDate?PO(_e.lastVisitDate,le):999,Ae=VO(ue,q,D),Ce=Object.entries(_e.serviceFrequency).sort((ke,Ve)=>Ve[1]-ke[1])[0]?.[0]||null,Pe=Object.entries(_e.staffFrequency).sort((ke,Ve)=>Ve[1]-ke[1])[0]?.[0]||null,yt=_e.totalVisits>0?_e.totalSpent/_e.totalVisits:0,ct=W(_e.email),ut=o[ct];return{..._e,daysSinceLastVisit:ue,status:Ae,favoriteService:Ce,favoriteStaff:Pe,avgSpending:yt,encodedEmail:ct,notes:ut?.notes||"",contacted:ut?.contacted||!1,contactedAt:ut?.contactedAt||null,tags:ut?.tags||[]}})},[Te,le,q,D,o]),P=N.useMemo(()=>{const ne={all:ve.length,active:0,"getting-cold":0,"at-risk":0,lost:0};return ve.forEach(_e=>{ne[_e.status]++}),ne},[ve]),J=N.useMemo(()=>ve.filter(ne=>(ne.status==="at-risk"||ne.status==="lost")&&!ne.contacted),[ve]),ce=N.useMemo(()=>{let ne=ve;if(E.trim()){const _e=E.toLowerCase();ne=ne.filter(ue=>ue.name.toLowerCase().includes(_e)||ue.email.includes(_e)||ue.phone.includes(_e))}return L!=="all"&&(ne=ne.filter(_e=>_e.status===L)),ne=[...ne].sort((_e,ue)=>{if(O==="lastVisit"){const Ae=(_e.lastVisitDate||"").localeCompare(ue.lastVisitDate||"");return Y==="asc"?Ae:-Ae}return O==="totalVisits"?Y==="desc"?ue.totalVisits-_e.totalVisits:_e.totalVisits-ue.totalVisits:O==="totalSpent"?Y==="desc"?ue.totalSpent-_e.totalSpent:_e.totalSpent-ue.totalSpent:0}),ne},[ve,E,L,O,Y]),xe=ne=>{O===ne?$(_e=>_e==="asc"?"desc":"asc"):(B(ne),$(ne==="lastVisit"?"asc":"desc"))},be=N.useCallback(ne=>{const _e=t?.name||"our shop",ue=`${window.location.origin}${window.location.pathname}#/shop/${r}`;return`Hi ${ne.name.split(" ")[0]}, we miss you at ${_e}! It's been ${ne.daysSinceLastVisit} days since your last visit.${ne.favoriteService?` Book your next ${ne.favoriteService} today:`:" Book your next appointment:"} ${ue}`},[t,r]),De=ne=>{const _e=be(ne);k({email:ne.email,encodedEmail:ne.encodedEmail,name:ne.name,message:_e})},ze=async(ne,_e)=>{try{await navigator.clipboard.writeText(ne),he(_e),setTimeout(()=>he(null),2e3)}catch(ue){console.error("Failed to copy:",ue)}},Ct=async ne=>{I(ne);try{const _e=Qe(Ee,"shops",s,"clientNotes",ne),ue=await Yp(_e),Ae=ue.exists()?ue.data():{};await Wp(_e,{...Ae,contacted:!0,contactedAt:new Date().toISOString()}),k(null)}catch(_e){console.error("Error marking as contacted:",_e)}finally{I(null)}},ft=async ne=>{try{const _e=Qe(Ee,"shops",s,"clientNotes",ne),ue=await Yp(_e),Ae=ue.exists()?ue.data():{};await Wp(_e,{...Ae,contacted:!1,contactedAt:null})}catch(_e){console.error("Error resetting contacted status:",_e)}},dn=async ne=>{M(!0);try{const _e=Qe(Ee,"shops",s,"clientNotes",ne),ue=await Yp(_e),Ae=ue.exists()?ue.data():{};await Wp(_e,{...Ae,notes:b}),x(null)}catch(_e){console.error("Error saving notes:",_e)}finally{M(!1)}};return i.jsxs("div",{className:"animate-fade-in space-y-6",children:[R&&J.length>0&&i.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-5",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>j(!oe),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:i.jsx(ml,{className:"w-5 h-5 text-orange-600"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[J.length," client",J.length!==1?"s":""," need",J.length===1?"s":""," attention"]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Haven't visited in over ",D," days  send a win-back message to re-engage"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"px-2.5 py-1 bg-orange-100 text-orange-700 border border-orange-200 text-xs font-bold rounded-lg",children:J.length}),oe?i.jsx(M0,{className:"w-5 h-5 text-slate-400"}):i.jsx(D0,{className:"w-5 h-5 text-slate-400"})]})]}),oe&&i.jsx("div",{className:"mt-4 space-y-2.5",children:J.sort((ne,_e)=>_e.daysSinceLastVisit-ne.daysSinceLastVisit).map(ne=>i.jsxs("div",{className:"bg-white rounded-xl border border-orange-100 p-4 flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx("div",{className:"w-9 h-9 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(pl,{className:"w-4 h-4 text-orange-600"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:ne.name}),i.jsxs("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${dh[ne.status].bg} ${dh[ne.status].text} ${dh[ne.status].border}`,children:[ne.daysSinceLastVisit," days ago"]})]}),i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2 flex-wrap mt-0.5",children:[i.jsxs("span",{children:["Last: ",Fc(ne.lastVisitDate)]}),ne.favoriteService&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-slate-300",children:""}),i.jsxs("span",{className:"text-blue-600",children:["Loves ",ne.favoriteService]})]}),i.jsx("span",{className:"text-slate-300",children:""}),i.jsxs("span",{children:[ne.totalVisits," visit",ne.totalVisits!==1?"s":""]})]})]})]}),i.jsxs("button",{onClick:_e=>{_e.stopPropagation(),De(ne)},className:"flex items-center gap-1.5 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-xl text-xs font-semibold transition-all shadow-sm flex-shrink-0",children:[i.jsx(Eh,{className:"w-3.5 h-3.5"}),"Send Win-back"]})]},ne.email))})]}),A&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:i.jsx(V0,{className:"w-5 h-5 text-orange-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Win-back Message"}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Send to ",A.name]})]})]}),i.jsx("div",{className:"bg-slate-50 rounded-xl p-4 mb-4 border border-slate-200",children:i.jsx("textarea",{value:A.message,onChange:ne=>k({...A,message:ne.target.value}),rows:4,className:"w-full bg-transparent text-sm text-slate-700 resize-none focus:outline-none leading-relaxed"})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{ze(A.message,A.email)},className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:ie===A.email?i.jsxs(i.Fragment,{children:[i.jsx(fs,{className:"w-4 h-4"}),"Copied!"]}):i.jsxs(i.Fragment,{children:[i.jsx(iD,{className:"w-4 h-4"}),"Copy to Clipboard"]})}),i.jsxs("button",{onClick:()=>Ct(A.encodedEmail),disabled:F===A.encodedEmail,className:"flex items-center justify-center gap-2 px-5 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-emerald-600/20 disabled:opacity-50",children:[i.jsx(fs,{className:"w-4 h-4"}),"Mark Contacted"]}),i.jsx("button",{onClick:()=>k(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Close"})]})]})}),i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total Clients",value:P.all,icon:Gt,color:"bg-blue-100 text-blue-600"},{label:"Active",value:P.active,icon:tx,color:"bg-emerald-100 text-emerald-600"},{label:"Getting Cold",value:P["getting-cold"],icon:rE,color:"bg-amber-100 text-amber-600"},{label:"At Risk / Lost",value:P["at-risk"]+P.lost,icon:ml,color:"bg-red-100 text-red-600"}].map(ne=>{const _e=ne.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${ne.color} rounded-xl flex items-center justify-center`,children:i.jsx(_e,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:ne.value}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:ne.label})]},ne.label)})}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"All Clients"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Derived from booking history"})]}),i.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[ce.length," client",ce.length!==1?"s":""]})]}),i.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[i.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[i.jsx(KD,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),i.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:E,onChange:ne=>T(ne.target.value),className:"w-full pl-10 pr-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),E&&i.jsx("button",{onClick:()=>T(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:i.jsx(da,{className:"w-4 h-4 text-slate-400 hover:text-slate-600"})})]}),i.jsx("div",{className:"flex items-center gap-1 p-1 bg-slate-100 rounded-xl overflow-x-auto",children:[{key:"all",label:"All"},{key:"active",label:"Active"},{key:"getting-cold",label:"Cold"},{key:"at-risk",label:"At Risk"},{key:"lost",label:"Lost"}].map(ne=>i.jsxs("button",{onClick:()=>V(ne.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all whitespace-nowrap ${L===ne.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[ne.label,i.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${L===ne.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:P[ne.key]??0})]},ne.key))}),i.jsx("div",{className:"flex items-center gap-1",children:[{key:"lastVisit",label:"Last Visit"},{key:"totalVisits",label:"Visits"},{key:"totalSpent",label:"Spent"}].map(ne=>i.jsxs("button",{onClick:()=>xe(ne.key),className:`flex items-center gap-1 px-3 py-2 rounded-lg text-xs font-semibold transition-all border ${O===ne.key?"bg-blue-50 text-blue-700 border-blue-200":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,children:[ne.label,O===ne.key&&i.jsx(I3,{className:"w-3 h-3"})]},ne.key))})]}),ce.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Gt,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No clients found"}),i.jsx("p",{className:"text-xs text-slate-400",children:E?"Try a different search term":"Client data will appear as bookings come in"})]}):i.jsx("div",{className:"space-y-2",children:ce.map(ne=>{const _e=d===ne.email,ue=dh[ne.status],Ae=ue.icon;return i.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden hover:border-slate-300 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 cursor-pointer hover:bg-slate-50/50 transition-all",onClick:()=>p(_e?null:ne.email),children:[i.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(pl,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:ne.name}),i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-bold rounded-md border ${ue.bg} ${ue.text} ${ue.border}`,children:[i.jsx(Ae,{className:"w-3 h-3"}),ue.label]}),ne.contacted&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",children:[i.jsx(Eh,{className:"w-2.5 h-2.5"}),"Contacted"]}),ne.notes&&i.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-violet-50 text-violet-600 border-violet-200",children:i.jsx(S1,{className:"w-2.5 h-2.5"})})]}),i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-3 mt-0.5 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(P0,{className:"w-3 h-3"}),ne.email]}),ne.phone&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(L0,{className:"w-3 h-3"}),ne.phone]})]})]}),i.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-shrink-0",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-bold text-slate-900",children:ne.totalVisits}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"visits"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-bold text-blue-600",children:uh(ne.totalSpent)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"spent"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-bold text-slate-700",children:Fc(ne.lastVisitDate)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"last visit"})]})]}),i.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(ne.status==="at-risk"||ne.status==="lost")&&!ne.contacted&&i.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),De(ne)},className:"p-2 text-orange-500 hover:text-orange-700 hover:bg-orange-50 rounded-lg transition-all",title:"Send win-back message",children:i.jsx(Eh,{className:"w-4 h-4"})}),_e?i.jsx(M0,{className:"w-4 h-4 text-slate-400"}):i.jsx(D0,{className:"w-4 h-4 text-slate-400"})]})]}),_e&&i.jsxs("div",{className:"border-t border-slate-200 bg-slate-50/50 p-5 space-y-5",children:[i.jsxs("div",{className:"sm:hidden grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[i.jsx("div",{className:"text-lg font-bold text-slate-900",children:ne.totalVisits}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"visits"})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[i.jsx("div",{className:"text-lg font-bold text-blue-600",children:uh(ne.totalSpent)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"spent"})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[i.jsx("div",{className:"text-sm font-bold text-slate-700",children:Fc(ne.lastVisitDate)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"last visit"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Avg per Visit"}),i.jsx("div",{className:"text-sm font-bold text-slate-900",children:uh(ne.avgSpending)})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"First Visit"}),i.jsx("div",{className:"text-sm font-bold text-slate-900",children:Fc(ne.firstVisitDate)})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Days Since Last Visit"}),i.jsxs("div",{className:"text-sm font-bold text-slate-900",children:[ne.daysSinceLastVisit,"d"]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Favorite Service"}),i.jsx("div",{className:"text-sm font-bold text-blue-600 truncate",children:ne.favoriteService||""})]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[i.jsx(gs,{className:"w-3.5 h-3.5 text-blue-500"}),"Services Used"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(ne.serviceFrequency).sort((Ce,Pe)=>Pe[1]-Ce[1]).map(([Ce,Pe])=>i.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg text-xs font-medium",children:[Ce,i.jsxs("span",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-[10px] font-bold",children:[Pe,""]})]},Ce))})]}),Object.keys(ne.staffFrequency).length>0&&i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[i.jsx(Gt,{className:"w-3.5 h-3.5 text-violet-500"}),"Staff Members Seen"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(ne.staffFrequency).sort((Ce,Pe)=>Pe[1]-Ce[1]).map(([Ce,Pe])=>i.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-violet-50 text-violet-700 border border-violet-200 rounded-lg text-xs font-medium",children:[Ce,i.jsxs("span",{className:"bg-violet-100 px-1.5 py-0.5 rounded text-[10px] font-bold",children:[Pe,""]})]},Ce))})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[i.jsx(Vt,{className:"w-3.5 h-3.5 text-emerald-500"}),"Booking History",i.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",ne.bookings.length,")"]})]}),i.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto",children:ne.bookings.sort((Ce,Pe)=>(Pe.date+Pe.time).localeCompare(Ce.date+Ce.time)).map((Ce,Pe)=>i.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2 rounded-lg hover:bg-slate-50 text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-slate-700",children:Fc(Ce.date)}),i.jsx("span",{className:"text-slate-400",children:Ce.time}),Ce.serviceName&&i.jsx("span",{className:"text-blue-600",children:Ce.serviceName})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[Ce.staffName&&i.jsx("span",{className:"text-violet-600",children:Ce.staffName}),Ce.servicePrice!=null&&i.jsx("span",{className:"font-semibold text-slate-900",children:uh(Ce.servicePrice)})]})]},Pe))})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:[i.jsx(S1,{className:"w-3.5 h-3.5 text-amber-500"}),"Notes"]}),g!==ne.encodedEmail&&i.jsx("button",{onClick:()=>{x(ne.encodedEmail),w(ne.notes||"")},className:"text-xs text-blue-600 hover:text-blue-800 font-semibold",children:ne.notes?"Edit":"Add Notes"})]}),g===ne.encodedEmail?i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:b,onChange:Ce=>w(Ce.target.value),placeholder:"Add notes about this client (e.g., preferences, allergies, favorite styles...)",rows:3,className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>dn(ne.encodedEmail),disabled:U,className:"px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:U?"Saving...":"Save"}),i.jsx("button",{onClick:()=>x(null),className:"px-4 py-1.5 bg-white hover:bg-slate-50 text-slate-600 border border-slate-200 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}):i.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:ne.notes||'No notes yet. Click "Add Notes" to save preferences, allergies, or anything useful.'})]}),ne.contacted&&i.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg px-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[i.jsx(fs,{className:"w-4 h-4"}),i.jsxs("span",{className:"font-medium",children:["Contacted",ne.contactedAt?` on ${new Date(ne.contactedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`:""]})]}),i.jsx("button",{onClick:()=>ft(ne.encodedEmail),className:"text-xs text-blue-600 hover:text-blue-800 font-semibold",children:"Reset"})]})]})]},ne.email)})})]})]})}const F1="https://us-central1-scheduler-65e51.cloudfunctions.net",UO={pro:"price_pro_monthly",unlimited:"price_unlimited_monthly"},BO={basicBooking:Vt,emailNotifications:V0,aiAssistant:V3,recurringBookings:kn,waitlist:Gt,crm:Gt,analytics:ex,smsNotifications:V0,customBranding:LD,walkIns:lE,multiLocation:ID,noBranding:aE,apiAccess:nD,prioritySupport:vD};function zO({shopId:s,shop:e,slug:t}){const[r,o]=N.useState(e),[u,d]=N.useState(!1),[p,g]=N.useState(null),[x,b]=N.useState(!1);N.useEffect(()=>{if(!s)return;const $=tn(Qe(Ee,"shops",s),ie=>{ie.exists()&&o(ie.data())});return()=>$()},[s]);const w=r?.subscriptionTier||"free",E=dr[w],T=r?.subscriptionStatus,L=r?.subscriptionEndsAt,V=$=>$?($.toDate?$.toDate():new Date($)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):null,O=async $=>{d($),g(null);try{const ie=await fetch(`${F1}/createCheckoutSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s,priceId:UO[$],successUrl:`${window.location.origin}/#/shop/${t}/dashboard?subscription=success`,cancelUrl:`${window.location.origin}/#/shop/${t}/dashboard?subscription=canceled`})}),he=await ie.json();if(!ie.ok)throw new Error(he.error||"Failed to create checkout session");window.location.href=he.url}catch(ie){console.error("Upgrade error:",ie),g(ie.message),d(null)}},B=async()=>{b(!0),g(null);try{const $=await fetch(`${F1}/createBillingPortalSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s,returnUrl:`${window.location.origin}/#/shop/${t}/dashboard`})}),ie=await $.json();if(!$.ok)throw new Error(ie.error||"Failed to open billing portal");window.location.href=ie.url}catch($){console.error("Billing portal error:",$),g($.message),b(!1)}},Y=[{key:"free",name:"Free",price:"$0",period:"forever",description:"Perfect for getting started",color:"slate",features:[{key:"staff",text:"1 staff member"},{key:"basicBooking",text:"Online booking"},{key:"emailNotifications",text:"Email notifications"},{key:"fee",text:"5% platform fee on deposits",negative:!0}]},{key:"pro",name:"Pro",price:"$29",period:"/month",description:"For growing businesses",color:"blue",popular:!0,features:[{key:"staff",text:"Up to 5 staff members"},{key:"basicBooking",text:"Online booking"},{key:"emailNotifications",text:"Email notifications"},{key:"aiAssistant",text:"AI booking assistant"},{key:"recurringBookings",text:"Recurring bookings"},{key:"waitlist",text:"Waitlist management"},{key:"crm",text:"Client CRM & notes"},{key:"analytics",text:"Analytics dashboard"},{key:"smsNotifications",text:"SMS notifications"},{key:"fee",text:"No platform fees",highlight:!0}]},{key:"unlimited",name:"Unlimited",price:"$79",period:"/month",description:"For established businesses",color:"violet",features:[{key:"staff",text:"Unlimited staff members"},{key:"everything",text:"Everything in Pro, plus:"},{key:"walkIns",text:"Walk-in queue management"},{key:"multiLocation",text:"Multi-location support"},{key:"noBranding",text:"Remove SpotBookie branding"},{key:"apiAccess",text:"API access"},{key:"prioritySupport",text:"Priority support"}]}];return i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("div",{className:`rounded-2xl p-6 mb-8 ${w==="unlimited"?"bg-gradient-to-r from-violet-500 to-purple-600":w==="pro"?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-slate-600 to-slate-700"}`,children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:i.jsx(Cf,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("h2",{className:"text-xl font-bold text-white",children:[E.name," Plan"]}),T==="past_due"&&i.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full",children:"Payment Failed"}),L&&i.jsx("span",{className:"px-2 py-0.5 bg-amber-500 text-white text-xs font-bold rounded-full",children:"Canceling"})]}),i.jsx("p",{className:"text-white/80 text-sm mt-0.5",children:w==="free"?"Upgrade to unlock more features":L?`Access until ${V(L)}`:"Your subscription is active"})]})]}),w!=="free"&&i.jsxs("button",{onClick:B,disabled:x,className:"flex items-center gap-2 px-5 py-2.5 bg-white/20 hover:bg-white/30 text-white rounded-xl font-semibold text-sm transition-all disabled:opacity-50",children:[x?i.jsx(wo,{className:"w-4 h-4 animate-spin"}):i.jsx(hD,{className:"w-4 h-4"}),"Manage Billing"]})]})}),p&&i.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[i.jsx(Kh,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-red-800",children:"Something went wrong"}),i.jsx("p",{className:"text-sm text-red-600",children:p})]})]}),T==="past_due"&&i.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[i.jsx(Kh,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-amber-800",children:"Payment Failed"}),i.jsx("p",{className:"text-sm text-amber-600",children:"Your last payment failed. Please update your payment method to keep your subscription active."}),i.jsx("button",{onClick:B,className:"mt-2 text-sm font-semibold text-amber-700 hover:text-amber-800 underline",children:"Update Payment Method "})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:Y.map($=>{const ie=$.key===w,he=["free","pro"].indexOf($.key)<["free","pro","unlimited"].indexOf(w),oe=!ie&&!he;return i.jsxs("div",{className:`relative bg-white rounded-2xl border-2 p-6 transition-all ${$.popular?"border-blue-500 shadow-lg shadow-blue-500/10":ie?"border-emerald-500":"border-slate-200 hover:border-slate-300"}`,children:[$.popular&&i.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:i.jsx("span",{className:"px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full",children:"Most Popular"})}),ie&&i.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:i.jsx("span",{className:"px-3 py-1 bg-emerald-500 text-white text-xs font-bold rounded-full",children:"Current Plan"})}),i.jsxs("div",{className:"text-center mb-6 pt-2",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:$.name}),i.jsxs("div",{className:"mt-2 flex items-baseline justify-center gap-1",children:[i.jsx("span",{className:"text-4xl font-extrabold text-slate-900",children:$.price}),i.jsx("span",{className:"text-slate-500 text-sm",children:$.period})]}),i.jsx("p",{className:"text-sm text-slate-500 mt-2",children:$.description})]}),i.jsx("ul",{className:"space-y-3 mb-6",children:$.features.map((j,A)=>(BO[j.key],i.jsxs("li",{className:"flex items-start gap-2.5",children:[i.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5 ${j.negative?"bg-red-100 text-red-500":j.highlight?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:j.negative?i.jsx("span",{className:"text-xs font-bold",children:"%"}):i.jsx(fs,{className:"w-3 h-3"})}),i.jsx("span",{className:`text-sm ${j.negative?"text-red-600":j.highlight?"text-emerald-700 font-medium":"text-slate-700"}`,children:j.text})]},A)))}),oe?i.jsx("button",{onClick:()=>O($.key),disabled:u,className:`w-full flex items-center justify-center gap-2 py-3 rounded-xl font-semibold text-sm transition-all ${$.key==="unlimited"?"bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 text-white shadow-lg shadow-violet-500/20":$.key==="pro"?"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg shadow-blue-500/20":"bg-slate-100 hover:bg-slate-200 text-slate-700"} disabled:opacity-50`,children:u===$.key?i.jsxs(i.Fragment,{children:[i.jsx(wo,{className:"w-4 h-4 animate-spin"}),"Redirecting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(kf,{className:"w-4 h-4"}),"Upgrade to ",$.name]})}):ie?i.jsx("div",{className:"w-full py-3 text-center text-sm font-semibold text-emerald-600 bg-emerald-50 rounded-xl border border-emerald-200",children:" Your Current Plan"}):i.jsx("div",{className:"w-full py-3 text-center text-sm font-medium text-slate-400 bg-slate-50 rounded-xl",children:"Included in your plan"})]},$.key)})}),i.jsxs("div",{className:"mt-12",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Feature Comparison"}),i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[i.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-slate-700",children:"Feature"}),i.jsx("th",{className:"text-center py-4 px-4 text-sm font-semibold text-slate-700",children:"Free"}),i.jsx("th",{className:"text-center py-4 px-4 text-sm font-semibold text-blue-600",children:"Pro"}),i.jsx("th",{className:"text-center py-4 px-4 text-sm font-semibold text-violet-600",children:"Unlimited"})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b border-slate-100",children:[i.jsx("td",{className:"py-3 px-6 text-sm text-slate-700",children:"Staff Members"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-slate-600",children:"1"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-slate-600",children:"5"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-slate-600",children:"Unlimited"})]}),i.jsxs("tr",{className:"border-b border-slate-100",children:[i.jsx("td",{className:"py-3 px-6 text-sm text-slate-700",children:"Platform Fee"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-red-500",children:"5%"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-emerald-600",children:"0%"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-emerald-600",children:"0%"})]}),Object.entries(bO).map(([$,ie])=>i.jsxs("tr",{className:"border-b border-slate-100 last:border-b-0",children:[i.jsx("td",{className:"py-3 px-6 text-sm text-slate-700",children:ie.name}),i.jsx("td",{className:"py-3 px-4 text-center",children:dr.free.features.includes($)?i.jsx(fs,{className:"w-5 h-5 text-emerald-500 mx-auto"}):i.jsx("span",{className:"text-slate-300",children:""})}),i.jsx("td",{className:"py-3 px-4 text-center",children:dr.pro.features.includes($)?i.jsx(fs,{className:"w-5 h-5 text-emerald-500 mx-auto"}):i.jsx("span",{className:"text-slate-300",children:""})}),i.jsx("td",{className:"py-3 px-4 text-center",children:dr.unlimited.features.includes($)?i.jsx(fs,{className:"w-5 h-5 text-emerald-500 mx-auto"}):i.jsx("span",{className:"text-slate-300",children:""})})]},$))]})]})})]}),i.jsxs("div",{className:"mt-12",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Frequently Asked Questions"}),i.jsx("div",{className:"space-y-4",children:[{q:"Can I cancel anytime?",a:"Yes! You can cancel your subscription at any time. You'll continue to have access until the end of your billing period."},{q:"What happens if I downgrade?",a:"When you downgrade, you'll keep your current plan until the end of the billing period. After that, feature limits (like staff count) will apply."},{q:"What is the platform fee?",a:"On the Free plan, we charge a 5% fee on any deposits collected through SpotBookie. Pro and Unlimited plans have no platform fees."},{q:"Do you offer refunds?",a:"We offer a 14-day money-back guarantee for first-time subscribers. Contact us if you're not satisfied."}].map(($,ie)=>i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:$.q}),i.jsx("p",{className:"text-sm text-slate-600",children:$.a})]},ie))})]})]})}const qO=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function s0(s){const[e,t]=s.split(":").map(Number);return e*60+t}function FO(s,e){if(s.status!=="waiting"||s.serviceId&&e.serviceId&&s.serviceId!==e.serviceId||s.staffId&&s.staffId!=="any"&&e.staffId&&s.staffId!==e.staffId)return!1;if(e.date){if(s.preferredDate&&s.preferredDate!==e.date)return!1;if(s.preferredDays&&s.preferredDays.length>0){const t=new Date(e.date+"T12:00:00"),r=qO[t.getDay()];if(!s.preferredDays.includes(r))return!1}}if(e.time&&s.preferredTimeRange){const t=s0(e.time),r=s0(s.preferredTimeRange.start),o=s0(s.preferredTimeRange.end);if(!(s.preferredTimeRange.start==="00:00"&&s.preferredTimeRange.end==="23:59")&&(t<r||t>o))return!1}return!0}function $O(s,e){return s.filter(t=>FO(t,e)).sort((t,r)=>(t.createdAt||"").localeCompare(r.createdAt||""))}const $1=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}];function el(s){if(!s)return"";const[e,t]=s.split(":").map(Number),r=e>=12?"PM":"AM",o=e%12||12;return t===0?`${o}${r}`:`${o}:${t.toString().padStart(2,"0")}${r}`}function HO({user:s}){const{slug:e}=Do(),t=Io(),[r,o]=N.useState(null),[u,d]=N.useState(null),[p,g]=N.useState(!0),[x,b]=N.useState(!1),[w,E]=N.useState([]),[T,L]=N.useState([]),[V,O]=N.useState([]),[B,Y]=N.useState([]),[$,ie]=N.useState("schedule"),[he,oe]=N.useState(null),[j,A]=N.useState("all"),[k,U]=N.useState("all"),[M,F]=N.useState([]),[I,q]=N.useState(null),[D,R]=N.useState(null),[W,le]=N.useState({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""});N.useEffect(()=>{if(!s){t(`/shop/${e}/login`,{replace:!0});return}(async()=>{g(!0);try{const se=Ms(tt(Ee,"shops"),ms("slug","==",e)),Ne=await Os(se);if(Ne.empty){b(!0),g(!1);return}const we=Ne.docs[0],$e=we.data();if($e.ownerUid!==s.uid){b(!0),g(!1);return}o($e),d(we.id)}catch(se){console.error("Error checking ownership:",se),b(!0)}finally{g(!1)}})()},[s,e,t]),N.useEffect(()=>{if(!u)return;const H=tn(tt(Ee,"shops",u,"availability"),Je=>{const qt=Je.docs.map(Be=>({id:Be.id,...Be.data()}));E(qt)}),se=tn(tt(Ee,"shops",u,"bookings"),Je=>{const qt=Je.docs.map(Be=>({id:Be.id,...Be.data()}));L(qt)}),Ne=tn(tt(Ee,"shops",u,"staff"),Je=>{const qt=Je.docs.map(Be=>({id:Be.id,...Be.data()})).filter(Be=>Be.active!==!1).sort((Be,me)=>(Be.name||"").localeCompare(me.name||""));O(qt)}),we=tn(tt(Ee,"shops",u,"waitlist"),Je=>{const qt=Je.docs.map(Be=>({id:Be.id,...Be.data()})).sort((Be,me)=>(Be.createdAt||"").localeCompare(me.createdAt||""));F(qt)}),$e=tn(tt(Ee,"shops",u,"services"),Je=>{const qt=Je.docs.map(Be=>({id:Be.id,...Be.data()})).filter(Be=>Be.active!==!1).sort((Be,me)=>(Be.name||"").localeCompare(me.name||""));Y(qt)});return()=>{H(),se(),Ne(),we(),$e()}},[u]);const Te=async()=>{await jC(fl),t(`/shop/${e}`,{replace:!0})},ve=async H=>{H.preventDefault();const{date:se,startTime:Ne,endTime:we,slotDuration:$e,staffId:Je}=W,qt=parseInt($e),[Be,me]=Ne.split(":").map(Number),[Se,Ke]=we.split(":").map(Number),Ze=Be*60+me,Et=Se*60+Ke;let Ue=Ze;for(;Ue+qt<=Et;){const He=Math.floor(Ue/60),Dt=Ue%60,sn=`${He.toString().padStart(2,"0")}:${Dt.toString().padStart(2,"0")}`,$n={date:se,time:sn,duration:qt,available:!0};if(Je){const ns=V.find(Js=>Js.id===Je);$n.staffId=Je,$n.staffName=ns?.name||""}await wr(tt(Ee,"shops",u,"availability"),$n),Ue+=qt}le({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""})},P=async H=>{await r6(Qe(Ee,"shops",u,"availability",H))},J=H=>{const se={date:H.date,time:H.time,staffId:H.staffId||null,serviceId:H.serviceId||null},Ne=$O(M,se);Ne.length>0&&q({matches:Ne,slot:se})},ce=async(H,se)=>{for(const Ne of H)await it(Qe(Ee,"shops",u,"waitlist",Ne.id),{status:"notified",notifiedAt:new Date().toISOString(),notifiedSlot:{date:se.date,time:se.time,staffId:se.staffId||null,staffName:se.staffName||null}});q(null)},xe=async H=>{await it(Qe(Ee,"shops",u,"waitlist",H),{status:"notified",notifiedAt:new Date().toISOString()})},be=async H=>{await it(Qe(Ee,"shops",u,"waitlist",H),{status:"expired"})},De=async H=>{const se=T.find(Ne=>Ne.id===H);if(se&&se.recurringGroupId){R({bookingId:H,recurringGroupId:se.recurringGroupId});return}if(await it(Qe(Ee,"shops",u,"bookings",H),{status:"cancelled"}),se&&se.slotId&&!se.slotId.startsWith("wh-")&&!se.slotId.startsWith("recurring-"))try{await it(Qe(Ee,"shops",u,"availability",se.slotId),{available:!0})}catch(Ne){console.warn("Could not re-open slot:",Ne)}se&&J(se)},ze=async H=>{const se=T.find(Ne=>Ne.id===H);if(await it(Qe(Ee,"shops",u,"bookings",H),{status:"cancelled"}),se&&se.slotId&&!se.slotId.startsWith("wh-")&&!se.slotId.startsWith("recurring-"))try{await it(Qe(Ee,"shops",u,"availability",se.slotId),{available:!0})}catch(Ne){console.warn("Could not re-open slot:",Ne)}se&&J(se),R(null)},Ct=async(H,se)=>{const Ne=T.find($e=>$e.id===H);if(!Ne)return;const we=T.filter($e=>$e.recurringGroupId===se&&$e.date>=Ne.date&&($e.status==="pending"||$e.status==="confirmed"));for(const $e of we)if(await it(Qe(Ee,"shops",u,"bookings",$e.id),{status:"cancelled"}),$e.slotId&&!$e.slotId.startsWith("wh-")&&!$e.slotId.startsWith("recurring-"))try{await it(Qe(Ee,"shops",u,"availability",$e.slotId),{available:!0})}catch(Je){console.warn("Could not re-open slot:",Je)}Ne&&J(Ne),R(null)},ft=async H=>{await it(Qe(Ee,"shops",u,"bookings",H),{status:"confirmed"})},dn=async H=>{const se=T.find(Ne=>Ne.id===H);if(await it(Qe(Ee,"shops",u,"bookings",H),{status:"rejected"}),se&&se.slotId&&!se.slotId.startsWith("wh-"))try{await it(Qe(Ee,"shops",u,"availability",se.slotId),{available:!0})}catch(Ne){console.warn("Could not re-open slot:",Ne)}se&&J(se)},ne=async()=>{const H=!r?.requireApproval;try{await it(Qe(Ee,"shops",u),{requireApproval:H}),o(se=>({...se,requireApproval:H}))}catch(se){console.error("Error updating requireApproval:",se)}},_e=async H=>{const se=parseInt(H);try{await it(Qe(Ee,"shops",u),{bufferMinutes:se}),o(Ne=>({...Ne,bufferMinutes:se}))}catch(Ne){console.error("Error updating buffer minutes:",Ne)}},ue=(H,se)=>new Date(`${H}T${se}`).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),Ae=N.useMemo(()=>{const H={},se=j==="all"?V:V.filter(we=>we.id===j),Ne=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(const we of se)we.weeklyHours&&Ne.forEach(($e,Je)=>{we.weeklyHours[$e]?.enabled&&(H[Je]=!0)});return H},[V,j]),Ce=N.useMemo(()=>(j==="all"?V:V.filter(se=>se.id===j)).filter(se=>se.weeklyHours?$1.some(Ne=>se.weeklyHours[Ne.key]?.enabled):!1),[V,j]),Pe=N.useMemo(()=>{const H=new Date,se=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`,Ne=H.getDay(),we=Ne===0?-6:1-Ne,$e=new Date(H);$e.setDate(H.getDate()+we),$e.setHours(0,0,0,0);const Je=new Date($e);Je.setDate($e.getDate()+6),Je.setHours(23,59,59,999);const qt=`${$e.getFullYear()}-${String($e.getMonth()+1).padStart(2,"0")}-${String($e.getDate()).padStart(2,"0")}`,Be=`${Je.getFullYear()}-${String(Je.getMonth()+1).padStart(2,"0")}-${String(Je.getDate()).padStart(2,"0")}`,me=T.filter(Ze=>Ze.date===se).length,Se=T.filter(Ze=>Ze.date>=qt&&Ze.date<=Be).length,Ke=new Set(T.map(Ze=>Ze.clientEmail?.toLowerCase()).filter(Boolean)).size;return{todayBookings:me,weekBookings:Se,uniqueClients:Ke,totalBookings:T.length}},[T]),yt=N.useMemo(()=>T.filter(H=>H.status==="pending").length,[T]),ct=N.useMemo(()=>M.filter(H=>H.status==="waiting").length,[M]),[ut,ke]=N.useState(0),[Ve,ot]=N.useState({}),Qt=N.useMemo(()=>{if(!r)return 0;r?.winbackSettings?.warningDays;const H=r?.winbackSettings?.inactiveDays||60;if(!(r?.winbackSettings?.enabled!==!1))return 0;const Ne=new Date,we=T.filter(Be=>Be.status==="confirmed"||Be.status==="pending"||!Be.status),$e={};we.forEach(Be=>{const me=Be.clientEmail?.toLowerCase();me&&(!$e[me]||Be.date>$e[me])&&($e[me]=Be.date)});let Je=0;const qt=Be=>Be.replace(/\./g,"_dot_").replace(/@/g,"_at_");return Object.entries($e).forEach(([Be,me])=>{if(Math.floor((Ne.getTime()-new Date(me+"T12:00:00").getTime())/864e5)>H){const Ke=qt(Be);Ve[Ke]?.contacted||Je++}}),Je},[T,r,Ve]);if(N.useEffect(()=>{if(!u)return;const H=tn(tt(Ee,"shops",u,"clientNotes"),se=>{const Ne={};se.docs.forEach(we=>{Ne[we.id]=we.data()}),ot(Ne)});return()=>H()},[u]),N.useEffect(()=>{if(!u)return;const H=tn(tt(Ee,"shops",u,"walkins"),se=>{const Ne=se.docs.filter(we=>we.data().status==="waiting").length;ke(Ne)});return()=>H()},[u]),p)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading dashboard"})]})});if(x)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Xh,{className:"w-8 h-8 text-red-500"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Unauthorized"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"You don't have access to this dashboard."}),i.jsx(st,{to:`/shop/${e}/login`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:"Login"})]})});const _t=j==="all"?w:w.filter(H=>H.staffId===j),Nt=j==="all"?T:T.filter(H=>H.staffId===j),An=_t.reduce((H,se)=>(H[se.date]||(H[se.date]=[]),H[se.date].push(se),H),{}),kt=Nt.reduce((H,se)=>(H[se.date]||(H[se.date]=[]),H[se.date].push(se),H),{}),Qn=he?Object.keys(An).filter(H=>H===he).sort():Object.keys(An).sort(),Fn=he?Nt.filter(H=>H.date===he):Nt,ys=k==="all"?Fn:k==="pending"?Fn.filter(H=>H.status==="pending"):k==="confirmed"?Fn.filter(H=>!H.status||H.status==="confirmed"):Fn.filter(H=>H.status==="cancelled"||H.status==="rejected"),ts={all:Fn.length,pending:Fn.filter(H=>H.status==="pending").length,confirmed:Fn.filter(H=>!H.status||H.status==="confirmed").length,cancelled:Fn.filter(H=>H.status==="cancelled"||H.status==="rejected").length},Fa=[{key:"schedule",label:"Schedule",icon:Vt},{key:"clients",label:"Clients",icon:tx},{key:"walkins",label:"Walk-ins",icon:lE},{key:"analytics",label:"Analytics",icon:H3},{key:"waitlist",label:"Waitlist",icon:O0},{key:"staff",label:"Staff",icon:Gt},{key:"services",label:"Services",icon:gs},{key:"subscription",label:"Plan",icon:Cf},{key:"settings",label:"Settings",icon:JD}];return i.jsxs("div",{className:"min-h-screen bg-slate-50",children:[i.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(r.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("h1",{className:"text-base font-bold text-slate-900 leading-tight",children:r.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Dashboard"})]})]}),i.jsx("div",{className:"flex items-center bg-slate-100 p-1 rounded-xl",children:Fa.map(H=>{const se=H.icon;return i.jsxs("button",{onClick:()=>ie(H.key),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${$===H.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[i.jsx(se,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:H.label}),H.key==="schedule"&&yt>0&&i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-amber-500 text-white text-[10px] font-bold rounded-full leading-none",children:yt}),H.key==="clients"&&Qt>0&&i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-orange-500 text-white text-[10px] font-bold rounded-full leading-none",children:Qt}),H.key==="walkins"&&ut>0&&i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-emerald-500 text-white text-[10px] font-bold rounded-full leading-none",children:ut}),H.key==="waitlist"&&ct>0&&i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-500 text-white text-[10px] font-bold rounded-full leading-none",children:ct})]},H.key)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(st,{to:`/shop/${e}`,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[i.jsx(mD,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"View Page"})]}),i.jsxs("button",{onClick:Te,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all",children:[i.jsx(CD,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[$==="schedule"&&i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 animate-fade-in",children:[{label:"Today's Bookings",value:Pe.todayBookings,icon:N1,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:Pe.weekBookings,icon:nx,color:"bg-violet-100 text-violet-600"},{label:"Total Bookings",value:Pe.totalBookings,icon:ex,color:"bg-emerald-100 text-emerald-600"},{label:"Unique Clients",value:Pe.uniqueClients,icon:Gt,color:"bg-amber-100 text-amber-600"}].map(H=>{const se=H.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${H.color} rounded-xl flex items-center justify-center`,children:i.jsx(se,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:H.value}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:H.label})]},H.label)})}),$==="clients"&&i.jsx(LO,{shopId:u,bookings:T,shop:r,slug:e}),$==="walkins"&&i.jsx(OO,{shopId:u,services:B,staff:V,bookings:T}),$==="analytics"&&i.jsx(RO,{bookings:T}),$==="staff"&&i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:i.jsx(CO,{shopId:u,shop:r,slug:e})}),$==="services"&&i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:i.jsx(pO,{shopId:u})}),$==="subscription"&&i.jsx(zO,{shopId:u,shop:r,slug:e}),I&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:i.jsx(fo,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Waitlist Match!"}),i.jsxs("p",{className:"text-sm text-slate-500",children:[I.matches.length," client",I.matches.length!==1?"s":""," on the waitlist match this freed slot"]})]})]}),i.jsx("div",{className:"bg-slate-50 rounded-xl p-3 mb-4 text-sm",children:i.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[i.jsx(Vt,{className:"w-4 h-4 text-blue-500"}),i.jsxs("span",{className:"font-medium",children:[new Date(I.slot.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," at ",(()=>{const[H,se]=I.slot.time.split(":"),Ne=parseInt(H);return`${Ne%12||12}:${se} ${Ne>=12?"PM":"AM"}`})()]})]})}),i.jsx("div",{className:"space-y-2 mb-5 max-h-48 overflow-y-auto",children:I.matches.map(H=>i.jsx("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border border-blue-100 rounded-lg",children:i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:H.clientName}),i.jsx("span",{className:"text-xs text-slate-500 ml-2",children:H.serviceName})]})},H.id))}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>ce(I.matches,I.slot),className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:[i.jsx(fo,{className:"w-4 h-4"}),"Notify All"]}),i.jsx("button",{onClick:()=>q(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Dismiss"})]})]})}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:i.jsx(ui,{className:"w-5 h-5 text-red-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Cancel Recurring Booking"}),i.jsx("p",{className:"text-sm text-slate-500",children:"This booking is part of a recurring series"})]})]}),i.jsxs("div",{className:"space-y-2 mb-5",children:[i.jsxs("button",{onClick:()=>ze(D.bookingId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(Ia,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this one only"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments stay active"})]})]}),i.jsxs("button",{onClick:()=>Ct(D.bookingId,D.recurringGroupId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(ui,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future in series"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments"})]})]})]}),i.jsx("button",{onClick:()=>R(null),className:"w-full px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Never mind"})]})}),$==="waitlist"&&i.jsx("div",{className:"animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Waitlist"}),ct>0&&i.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:[ct," waiting"]})]}),i.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[M.length," total"]})]}),M.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(O0,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No waitlist entries yet"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Clients can join the waitlist when no slots are available on your booking page."})]}):i.jsx("div",{children:(()=>{const H={};return M.forEach(se=>{const Ne=se.serviceName||"Other";H[Ne]||(H[Ne]=[]),H[Ne].push(se)}),Object.entries(H).sort(([se],[Ne])=>se.localeCompare(Ne)).map(([se,Ne])=>i.jsxs("div",{className:"mb-6 last:mb-0",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100 flex items-center gap-2",children:[i.jsx(gs,{className:"w-3.5 h-3.5 text-blue-500"}),se,i.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",Ne.filter(we=>we.status==="waiting").length," waiting)"]})]}),i.jsx("div",{className:"space-y-2.5",children:Ne.sort((we,$e)=>(we.createdAt||"").localeCompare($e.createdAt||"")).map(we=>{const $e={waiting:"bg-blue-50 text-blue-700 border-blue-200",notified:"bg-emerald-50 text-emerald-700 border-emerald-200",booked:"bg-emerald-50 text-emerald-700 border-emerald-200",expired:"bg-slate-100 text-slate-500 border-slate-200"},Je={waiting:"Waiting",notified:"Notified",booked:"Booked",expired:"Removed"},qt=we.createdAt?(()=>{const me=Date.now()-new Date(we.createdAt).getTime(),Se=Math.floor(me/864e5),Ke=Math.floor(me/36e5);return Se>0?`${Se}d`:`${Ke}h`})():"",Be={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return i.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(pl,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:we.clientName}),i.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${$e[we.status]||$e.waiting}`,children:Je[we.status]||"Waiting"})]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Joined ",qt," ago",we.refCode&&i.jsx("span",{className:"font-mono text-slate-400 ml-2",children:we.refCode})]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[we.status==="waiting"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>xe(we.id),className:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all",title:"Notify client",children:i.jsx(fo,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>be(we.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove from waitlist",children:i.jsx(da,{className:"w-4 h-4"})})]}),we.status==="notified"&&i.jsx("button",{onClick:()=>be(we.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove",children:i.jsx(da,{className:"w-3.5 h-3.5"})})]})]}),i.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[we.staffName&&we.staffName!=="Any Available"&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Gt,{className:"w-3 h-3 text-violet-400"}),i.jsx("span",{className:"text-violet-600",children:we.staffName})]}),we.preferredDate&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Vt,{className:"w-3 h-3 text-slate-400"}),i.jsxs("span",{children:["Preferred: ",new Date(we.preferredDate+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]}),we.preferredDays&&we.preferredDays.length>0&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Vt,{className:"w-3 h-3 text-slate-400"}),i.jsxs("span",{children:["Days: ",we.preferredDays.map(me=>Be[me]||me).join(", ")]})]}),we.preferredTimeRange&&!(we.preferredTimeRange.start==="00:00"&&we.preferredTimeRange.end==="23:59")&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(kn,{className:"w-3 h-3 text-slate-400"}),i.jsxs("span",{children:["Time: ",el(we.preferredTimeRange.start),"",el(we.preferredTimeRange.end)]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(P0,{className:"w-3 h-3"}),we.clientEmail]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(L0,{className:"w-3 h-3"}),we.clientPhone]})]}),we.status==="notified"&&we.notifiedSlot&&i.jsxs("div",{className:"mt-1.5 px-2.5 py-1.5 bg-emerald-50 border border-emerald-200 rounded-lg inline-flex items-center gap-1.5",children:[i.jsx(fo,{className:"w-3 h-3 text-emerald-500"}),i.jsxs("span",{className:"text-emerald-700 font-medium",children:["Notified about ",new Date(we.notifiedSlot.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ",el(we.notifiedSlot.time)]})]})]})]},we.id)})})]},se))})()})]})}),$==="settings"&&i.jsxs("div",{className:"max-w-2xl animate-fade-in space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Shop Settings"}),i.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure your booking preferences"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Require Booking Approval"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Review and approve bookings before they're confirmed"})]}),i.jsx("button",{type:"button",onClick:ne,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${r?.requireApproval?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${r?.requireApproval?"translate-x-6":"translate-x-1"}`})})]}),r?.requireApproval&&i.jsxs("div",{className:"p-3.5 bg-amber-50 border border-amber-200 rounded-xl text-xs text-amber-800 leading-relaxed",children:[i.jsx("strong",{children:" Approval mode is on."}),' New bookings will appear as "Pending" until you approve or reject them. Time slots are held while pending to prevent double-booking.']}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Buffer Time Between Bookings"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Add a gap between consecutive appointments"})]}),i.jsxs("select",{value:r?.bufferMinutes||0,onChange:H=>_e(H.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[i.jsx("option",{value:"0",children:"No buffer"}),i.jsx("option",{value:"5",children:"5 minutes"}),i.jsx("option",{value:"10",children:"10 minutes"}),i.jsx("option",{value:"15",children:"15 minutes"}),i.jsx("option",{value:"30",children:"30 minutes"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Client Retention"}),i.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure win-back alerts to re-engage inactive clients"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Enable Win-back Alerts"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Show alerts when clients haven't visited in a while"})]}),i.jsx("button",{type:"button",onClick:async()=>{const H=r?.winbackSettings||{},se=H.enabled===!1;try{await it(Qe(Ee,"shops",u),{winbackSettings:{...H,enabled:se}}),o(Ne=>({...Ne,winbackSettings:{...Ne.winbackSettings||{},enabled:se}}))}catch(Ne){console.error("Error updating winback settings:",Ne)}},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${r?.winbackSettings?.enabled!==!1?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${r?.winbackSettings?.enabled!==!1?"translate-x-6":"translate-x-1"}`})})]}),r?.winbackSettings?.enabled!==!1&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Getting Cold Threshold"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:'Flag clients as "Getting Cold" after this many days without a booking'})]}),i.jsxs("select",{value:r?.winbackSettings?.warningDays||30,onChange:async H=>{const se=parseInt(H.target.value),Ne=r?.winbackSettings||{};try{await it(Qe(Ee,"shops",u),{winbackSettings:{...Ne,warningDays:se}}),o(we=>({...we,winbackSettings:{...we.winbackSettings||{},warningDays:se}}))}catch(we){console.error("Error updating warning days:",we)}},className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[i.jsx("option",{value:"14",children:"14 days"}),i.jsx("option",{value:"21",children:"21 days"}),i.jsx("option",{value:"30",children:"30 days"}),i.jsx("option",{value:"45",children:"45 days"}),i.jsx("option",{value:"60",children:"60 days"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"At Risk Threshold"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:'Flag clients as "At Risk" after this many days without a booking'})]}),i.jsxs("select",{value:r?.winbackSettings?.inactiveDays||60,onChange:async H=>{const se=parseInt(H.target.value),Ne=r?.winbackSettings||{};try{await it(Qe(Ee,"shops",u),{winbackSettings:{...Ne,inactiveDays:se}}),o(we=>({...we,winbackSettings:{...we.winbackSettings||{},inactiveDays:se}}))}catch(we){console.error("Error updating inactive days:",we)}},className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[i.jsx("option",{value:"30",children:"30 days"}),i.jsx("option",{value:"45",children:"45 days"}),i.jsx("option",{value:"60",children:"60 days"}),i.jsx("option",{value:"90",children:"90 days"}),i.jsx("option",{value:"120",children:"120 days"})]})]}),i.jsxs("div",{className:"p-3.5 bg-orange-50 border border-orange-200 rounded-xl text-xs text-orange-800 leading-relaxed",children:[i.jsx("strong",{children:" Tip:"}),' Clients flagged as "Lost" (over 90 days) will also appear in win-back alerts. Visit the ',i.jsx("strong",{children:"Clients"})," tab to view at-risk clients and send win-back messages."]})]})]})]})]}),$==="schedule"&&i.jsxs("div",{className:"animate-fade-in",children:[V.length>0&&i.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5",children:"Filter by Staff"}),i.jsxs("select",{value:j,onChange:H=>A(H.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[i.jsx("option",{value:"all",children:"All Staff"}),V.map(H=>i.jsxs("option",{value:H.id,children:[H.name,H.role?`  ${H.role}`:""]},H.id))]})]})}),Ce.length>0&&i.jsxs("div",{className:"mb-6 bg-violet-50 border border-violet-200 rounded-xl p-5",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(sE,{className:"w-4 h-4 text-violet-600"}),i.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Recurring Weekly Hours"})]}),i.jsx("div",{className:"space-y-2.5",children:Ce.map(H=>{const se=$1.filter(Ne=>H.weeklyHours[Ne.key]?.enabled);return i.jsxs("div",{className:"flex items-start gap-2.5",children:[i.jsx("div",{className:"w-7 h-7 bg-violet-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(Gt,{className:"w-3.5 h-3.5 text-violet-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:H.name}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:se.map(Ne=>{const we=H.weeklyHours[Ne.key];return i.jsxs("span",{className:"inline-block px-2 py-0.5 bg-white text-violet-700 border border-violet-200 rounded text-xs font-medium",children:[Ne.short," ",el(we.start),"",el(we.end),we.break&&i.jsxs("span",{className:"text-amber-600 ml-1",children:["(break ",el(we.break.start),"",el(we.break.end),")"]})]},Ne.key)})})]})]},H.id)})}),i.jsx("p",{className:"text-xs text-violet-500 mt-3",children:"Slots auto-generate on the booking page. Manage hours in the Staff tab."})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Monthly Overview"}),i.jsx(hO,{slotsByDate:An,bookingsByDate:kt,selectedDate:he,onSelectDate:oe,recurringDayFlags:Ae}),he&&i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm text-slate-600",children:["Showing: ",i.jsx("strong",{className:"text-slate-900",children:new Date(he+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),i.jsx("button",{onClick:()=>oe(null),className:"text-xs px-3 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-all border border-slate-200",children:"Show All"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:Ce.length>0?"Add Custom Slots":"Create Time Slots"}),Ce.length>0&&i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Use this for one-off availability outside regular hours."}),!Ce.length&&i.jsx("div",{className:"mb-4"}),i.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[V.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Staff Member"}),i.jsxs("select",{value:W.staffId,onChange:H=>le({...W,staffId:H.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"",children:"Select a staff member"}),V.map(H=>i.jsxs("option",{value:H.id,children:[H.name,H.role?`  ${H.role}`:""]},H.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Date"}),i.jsx("input",{type:"date",value:W.date,onChange:H=>le({...W,date:H.target.value}),required:!0,min:new Date().toISOString().split("T")[0],className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Start"}),i.jsx("input",{type:"time",value:W.startTime,onChange:H=>le({...W,startTime:H.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"End"}),i.jsx("input",{type:"time",value:W.endTime,onChange:H=>le({...W,endTime:H.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Slot Duration"}),i.jsxs("select",{value:W.slotDuration,onChange:H=>le({...W,slotDuration:H.target.value}),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"15",children:"15 minutes"}),i.jsx("option",{value:"30",children:"30 minutes"}),i.jsx("option",{value:"45",children:"45 minutes"}),i.jsx("option",{value:"60",children:"1 hour"}),i.jsx("option",{value:"90",children:"1.5 hours"}),i.jsx("option",{value:"120",children:"2 hours"})]})]}),i.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[i.jsx(bi,{className:"w-4 h-4"}),"Generate Slots"]})]}),i.jsxs("div",{className:"mt-4 p-3.5 bg-blue-50 border border-blue-100 rounded-xl text-xs text-slate-600 leading-relaxed",children:[i.jsx("strong",{className:"text-slate-700",children:" Tip:"})," ",Ce.length>0?"Weekly hours auto-generate slots. Use this for one-off slots outside regular hours.":V.length>0?"Select a staff member, pick a date, and set working hours to create slots.":"Set your hours and slot duration. We'll create all the time slots for that day."]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:he?"Bookings":"All Bookings"}),ts.pending>0&&i.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 border border-amber-200 text-xs font-bold rounded-full",children:[ts.pending," pending"]})]}),i.jsx("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:ys.length})]}),i.jsx("div",{className:"flex items-center gap-1 mb-4 p-1 bg-slate-100 rounded-lg overflow-x-auto",children:[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"confirmed",label:"Confirmed"},{key:"cancelled",label:"Cancelled"}].map(H=>i.jsxs("button",{onClick:()=>U(H.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-semibold transition-all whitespace-nowrap ${k===H.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[H.label,i.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${k===H.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:ts[H.key]})]},H.key))}),ys.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(N1,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium",children:k!=="all"?`No ${k} bookings`:he?"No bookings for this date":"No bookings yet"})]}):i.jsx("div",{className:"space-y-2.5 max-h-[500px] overflow-y-auto pr-1",children:ys.sort((H,se)=>`${H.date}${H.time}`.localeCompare(`${se.date}${se.time}`)).map(H=>{const se=H.status||"confirmed",Ne={pending:"bg-amber-50 text-amber-700 border-amber-200",confirmed:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200",cancelled:"bg-slate-100 text-slate-500 border-slate-200"},we={pending:"Pending",confirmed:"Confirmed",rejected:"Rejected",cancelled:"Cancelled"};return i.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(pl,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:H.clientName}),i.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${Ne[se]}`,children:we[se]}),H.recurring&&i.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",title:"Recurring appointment",children:i.jsx(ui,{className:"w-2.5 h-2.5"})})]}),i.jsx("div",{className:"text-xs text-slate-500",children:ue(H.date,H.time)})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[se==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>ft(H.id),className:"p-1.5 text-emerald-500 hover:text-emerald-700 hover:bg-emerald-50 rounded-lg transition-all",title:"Approve booking",children:i.jsx(fs,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>dn(H.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Reject booking",children:i.jsx(Ia,{className:"w-4 h-4"})})]}),se==="confirmed"&&i.jsx("button",{onClick:()=>De(H.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Cancel booking",children:i.jsx(gu,{className:"w-3.5 h-3.5"})})]})]}),i.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[H.serviceName&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(gs,{className:"w-3 h-3 text-blue-400"}),i.jsx("span",{className:"font-medium text-slate-700",children:H.serviceName}),H.servicePrice!=null&&i.jsxs("span",{className:"text-blue-600 font-semibold",children:["$",Number(H.servicePrice).toFixed(2)]})]}),H.staffName&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Gt,{className:"w-3 h-3 text-violet-400"}),i.jsx("span",{className:"text-violet-600",children:H.staffName})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(P0,{className:"w-3 h-3"}),H.clientEmail]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(L0,{className:"w-3 h-3"}),H.clientPhone]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[H.refCode&&i.jsxs("span",{className:"font-mono text-[10px] text-slate-400",children:["REF: ",H.refCode]}),H.recurring&&i.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-indigo-50 border border-indigo-200 rounded text-[10px] font-semibold text-indigo-600",children:" Recurring"})]})]})]},H.id)})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:he?"Custom Time Slots":"All Custom Time Slots"}),i.jsx("span",{className:"text-xs font-semibold text-slate-500 bg-slate-100 px-2.5 py-1 rounded-lg",children:he?(An[he]||[]).length:_t.length})]}),Ce.length>0&&i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Recurring slots from weekly hours auto-generate  not shown here."}),!Ce.length&&i.jsx("div",{className:"mb-4"}),Qn.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Vt,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:he?"No custom slots for this date":"No custom slots yet"}),i.jsx("p",{className:"text-xs text-slate-400",children:Ce.length>0?"Recurring hours handle most scheduling.":"Use the form above to generate availability."})]}):i.jsx("div",{className:"space-y-6",children:Qn.map(H=>i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100",children:new Date(H).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2.5",children:An[H].sort((se,Ne)=>se.time.localeCompare(Ne.time)).map(se=>i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3.5 text-center group hover:border-slate-300 transition-all",children:[i.jsx("div",{className:"text-sm font-bold text-slate-900 mb-0.5",children:se.time}),i.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[se.duration," min"]}),se.staffName&&i.jsxs("div",{className:"text-xs text-violet-600 mb-1.5 flex items-center justify-center gap-1",children:[i.jsx(Gt,{className:"w-3 h-3"}),se.staffName]}),i.jsx("div",{className:"mb-2",children:se.available?i.jsx("span",{className:"inline-block px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-md text-xs font-medium",children:"Available"}):i.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-50 text-red-700 border border-red-200 rounded-md text-xs font-medium",children:"Booked"})}),se.available&&i.jsxs("button",{onClick:()=>P(se.id),className:"opacity-0 group-hover:opacity-100 flex items-center justify-center gap-1 w-full px-2 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-xs font-medium transition-all border border-red-200",children:[i.jsx(gu,{className:"w-3 h-3"}),"Remove"]})]},se.id))})]},H))})]})]})]})]})}function GO({user:s}){const{slug:e}=Do(),t=Io(),[r,o]=N.useState(""),[u,d]=N.useState(""),[p,g]=N.useState(""),[x,b]=N.useState(!1);N.useEffect(()=>{if(!s)return;(async()=>{const T=Ms(tt(Ee,"shops"),ms("slug","==",e)),L=await Os(T);L.empty||L.docs[0].data().ownerUid===s.uid&&t(`/shop/${e}/dashboard`,{replace:!0})})()},[s,e,t]);const w=async E=>{E.preventDefault(),g(""),b(!0);try{const L=(await K_(fl,r,u)).user,V=Ms(tt(Ee,"shops"),ms("slug","==",e)),O=await Os(V);if(O.empty){g("Shop not found"),b(!1);return}if(O.docs[0].data().ownerUid!==L.uid){g("You are not the owner of this shop"),await fl.signOut(),b(!1);return}t(`/shop/${e}/dashboard`,{replace:!0})}catch(T){switch(T.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":g("Invalid email or password");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/too-many-requests":g("Too many failed attempts. Please try again later.");break;default:g("Login failed. Please try again.")}d("")}finally{b(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2.5",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(ua,{className:"w-5 h-5 text-white"})}),i.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:r,onChange:E=>{o(E.target.value),g("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),i.jsx("input",{type:"password",value:u,onChange:E=>{d(E.target.value),g("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&i.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",p]})]}),i.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):"Sign In"})]}),i.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",i.jsx(st,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(st,{to:`/shop/${e}`,className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[i.jsx(Ba,{className:"w-3.5 h-3.5"}),"Back to booking page"]})})]})})}function H1({name:s,className:e="w-12 h-12",bgClass:t="bg-blue-100 text-blue-700"}){const r=(s||"").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return i.jsx("div",{className:`${e} ${t} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:r||"?"})}function G1(){return i.jsxs(st,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(ua,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function YO(){const{slug:s,refCode:e}=Do(),[t,r]=N.useState(null),[o,u]=N.useState(null),[d,p]=N.useState(!0),[g,x]=N.useState(!1),[b,w]=N.useState(null),[E,T]=N.useState(null),[L,V]=N.useState(!1),[O,B]=N.useState([]),[Y,$]=N.useState([]),[ie,he]=N.useState([]),[oe,j]=N.useState([]),[A,k]=N.useState(!1),[U,M]=N.useState(!1),[F,I]=N.useState(null),[q,D]=N.useState(null),[R,W]=N.useState(null),[le,Te]=N.useState(!1),[ve,P]=N.useState("");N.useEffect(()=>{(async()=>{p(!0);try{const Ve=Ms(tt(Ee,"shops"),ms("slug","==",s)),ot=await Os(Ve);if(ot.empty)x(!0);else{const Qt=ot.docs[0];r(Qt.data()),u(Qt.id)}}catch(Ve){console.error("Error looking up shop:",Ve),x(!0)}finally{p(!1)}})()},[s]),N.useEffect(()=>{if(!o)return;(async()=>{try{const Ve=Ms(tt(Ee,"shops",o,"bookings"),ms("refCode","==",e.toUpperCase())),ot=await Os(Ve);if(ot.empty)V(!0);else{const Qt=ot.docs[0];w(Qt.data()),T(Qt.id)}}catch(Ve){console.error("Error looking up booking:",Ve),V(!0)}})()},[o,e]),N.useEffect(()=>{if(!o||!b)return;const ke=tn(tt(Ee,"shops",o,"bookings"),_t=>{B(_t.docs.map(Nt=>({id:Nt.id,...Nt.data()})))}),Ve=tn(tt(Ee,"shops",o,"availability"),_t=>{const Nt=new Date,An=_t.docs.map(kt=>({id:kt.id,...kt.data()})).filter(kt=>new Date(`${kt.date}T${kt.time}`)>Nt);$(An)}),ot=tn(tt(Ee,"shops",o,"staff"),_t=>{he(_t.docs.map(Nt=>({id:Nt.id,...Nt.data()})).filter(Nt=>Nt.active!==!1).sort((Nt,An)=>(Nt.name||"").localeCompare(An.name||"")))}),Qt=tn(tt(Ee,"shops",o,"services"),_t=>{j(_t.docs.map(Nt=>({id:Nt.id,...Nt.data()})).filter(Nt=>Nt.active!==!1))});return()=>{ke(),Ve(),ot(),Qt()}},[o,b]);const J=t?.bufferMinutes||0,ce=N.useMemo(()=>{if(!b)return null;if(b.serviceId){const ke=oe.find(Ve=>Ve.id===b.serviceId);if(ke)return ke}return b.serviceName?{id:b.serviceId,name:b.serviceName,price:b.servicePrice,duration:b.serviceDuration||b.duration}:null},[b,oe]),xe=N.useMemo(()=>{if(!A||!b)return[];const ke=new Date,Ve=ce?.duration||b.duration||60;let ot=Y.filter(kt=>kt.available);ot=ot.filter(kt=>kt.duration>=Ve),b.staffId&&(ot=ot.filter(kt=>kt.staffId===b.staffId||!kt.staffId));const Qt=b.staffId?ie.filter(kt=>kt.id===b.staffId):ie,_t=vE(Qt,Ve,J,4).filter(kt=>new Date(`${kt.date}T${kt.time}`)>ke),Nt=_E(_t,ot),An=O.filter(kt=>kt.id!==E);return wE(Nt,An,J)},[A,b,E,Y,ie,O,J,ce]),be=N.useMemo(()=>[...new Set(xe.map(ke=>ke.date))].sort(),[xe]),De=N.useMemo(()=>q?xe.filter(ke=>ke.date===q):[],[q,xe]),ze=async(ke="single")=>{Te(!0);try{if(await it(Qe(Ee,"shops",o,"bookings",E),{status:"cancelled"}),b.slotId&&!b.slotId.startsWith("wh-")&&!b.slotId.startsWith("recurring-"))try{await it(Qe(Ee,"shops",o,"availability",b.slotId),{available:!0})}catch(Ve){console.warn("Could not re-open slot:",Ve)}if(ke==="future"&&b.recurringGroupId){const Ve=O.filter(ot=>ot.recurringGroupId===b.recurringGroupId&&ot.id!==E&&ot.date>=b.date&&(ot.status==="pending"||ot.status==="confirmed"));for(const ot of Ve)if(await it(Qe(Ee,"shops",o,"bookings",ot.id),{status:"cancelled"}),ot.slotId&&!ot.slotId.startsWith("wh-")&&!ot.slotId.startsWith("recurring-"))try{await it(Qe(Ee,"shops",o,"availability",ot.slotId),{available:!0})}catch(Qt){console.warn("Could not re-open slot:",Qt)}}w(Ve=>({...Ve,status:"cancelled"})),M(!1),I(null),P("cancelled")}catch(Ve){console.error("Cancel error:",Ve),P("error")}finally{Te(!1)}},Ct=async()=>{if(R){Te(!0);try{const ke={date:R.date,time:R.time,slotId:R.id};if(R.staffId&&(ke.staffId=R.staffId,ke.staffName=R.staffName||""),t?.requireApproval&&(ke.status="pending"),b.slotId&&!b.slotId.startsWith("wh-"))try{await it(Qe(Ee,"shops",o,"availability",b.slotId),{available:!0})}catch(Ve){console.warn("Could not re-open old slot:",Ve)}if(!R.generated&&R.id)try{await it(Qe(Ee,"shops",o,"availability",R.id),{available:!1})}catch(Ve){console.warn("Could not block new slot:",Ve)}await it(Qe(Ee,"shops",o,"bookings",E),ke),w(Ve=>({...Ve,...ke})),k(!1),D(null),W(null),P("rescheduled")}catch(ke){console.error("Reschedule error:",ke),P("error")}finally{Te(!1)}}},ft=ke=>new Date(ke+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),dn=ke=>{const[Ve,ot]=ke.split(":"),Qt=parseInt(Ve),_t=Qt>=12?"PM":"AM";return`${Qt%12||12}:${ot} ${_t}`},ne=ke=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(ke),_e=ke=>{if(!ke)return"";if(ke<60)return`${ke} min`;const Ve=Math.floor(ke/60),ot=ke%60;return ot?`${Ve}h ${ot}m`:`${Ve} hour${Ve>1?"s":""}`};if(d)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(Ba,{className:"w-4 h-4"}),"Go Home"]})]})});if(L)return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(t?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:t?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),i.jsx(G1,{})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(ml,{className:"w-8 h-8 text-amber-500"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Not Found"}),i.jsx("p",{className:"text-slate-600 mb-2",children:"No booking found with reference code"}),i.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking"})]})});const ue=b.status||"confirmed",Ae=ue==="pending"||ue==="confirmed",Ce=ue==="cancelled",Pe=ue==="rejected",yt={pending:{label:"Pending Approval",color:"bg-amber-100 text-amber-700 border-amber-200",icon:kn},confirmed:{label:"Confirmed",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Ds},cancelled:{label:"Cancelled",color:"bg-slate-100 text-slate-500 border-slate-200",icon:Ia},rejected:{label:"Rejected",color:"bg-red-100 text-red-700 border-red-200",icon:Ia}},ct=yt[ue]||yt.confirmed,ut=ct.icon;return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(t?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:t?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),i.jsx(G1,{})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[ve==="rescheduled"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(tE,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Rescheduled!"}),i.jsx("p",{className:"text-slate-600 mb-4",children:t?.requireApproval?"Your booking has been rescheduled and is pending approval.":"Your booking has been successfully rescheduled."}),i.jsx("button",{onClick:()=>P(""),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View updated details "})]})}),ve==="cancelled"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-lg p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ia,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Cancelled"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking has been cancelled."}),i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book a new appointment"]})]})}),ve==="error"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Something went wrong. Please try again."})]})}),!A&&i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Your Booking"}),i.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference: ",i.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),(Ce||Pe)&&i.jsxs("div",{className:`mb-4 p-4 rounded-xl border flex items-center gap-3 ${Ce?"bg-slate-50 border-slate-200":"bg-red-50 border-red-200"}`,children:[i.jsx(ut,{className:`w-5 h-5 ${Ce?"text-slate-400":"text-red-500"}`}),i.jsx("span",{className:`font-medium text-sm ${Ce?"text-slate-600":"text-red-700"}`,children:Ce?"This booking has been cancelled.":"This booking has been rejected by the shop."})]}),b.recurringGroupId&&i.jsxs("div",{className:"mb-4 p-3.5 bg-blue-50 border border-blue-200 rounded-xl flex items-center gap-2.5",children:[i.jsx(ui,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Part of a recurring series"}),b.recurringInterval&&i.jsxs("p",{className:"text-xs text-blue-600 mt-0.5",children:["Repeats every ",b.recurringInterval==="weekly"?"week":b.recurringInterval==="biweekly"?"2 weeks":b.recurringInterval==="fourweekly"?"4 weeks":b.recurringInterval==="monthly"?"month":b.recurringInterval]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),i.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${ct.color}`,children:[i.jsx(ut,{className:"w-3.5 h-3.5"}),ct.label]})]}),b.serviceName&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(gs,{className:"w-4 h-4 text-blue-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.servicePrice!=null&&i.jsx("span",{className:"font-bold text-blue-600",children:ne(b.servicePrice)})]}),b.staffName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(H1,{name:b.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"font-semibold text-slate-800",children:[ft(b.date)," at ",dn(b.time)]})]}),i.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(kn,{className:"w-4 h-4 text-slate-500"})}),i.jsx("span",{children:_e(b.serviceDuration||b.duration)})]})]}),Ae&&!ve&&i.jsx("div",{className:"space-y-3",children:U?i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(ml,{className:"w-5 h-5 text-red-500"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-slate-900",children:"Are you sure?"}),i.jsx("p",{className:"text-sm text-slate-600",children:"This action cannot be undone."})]})]}),b.recurringGroupId&&!F&&i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("button",{onClick:()=>I("single"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(Ia,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this appointment only"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments in the series remain active"})]})]}),i.jsxs("button",{onClick:()=>I("future"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(ui,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future appointments"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments in the series"})]})]}),i.jsx("button",{onClick:()=>M(!1),className:"w-full px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Go Back"})]}),(!b.recurringGroupId||F)&&i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>ze(F||"single"),disabled:le,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[le?i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}):i.jsx(Ia,{className:"w-4 h-4"}),le?"Cancelling":F==="future"?"Cancel All Future":"Yes, Cancel"]}),i.jsx("button",{onClick:()=>{F?I(null):M(!1)},disabled:le,className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Go Back"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>{k(!0),P("")},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[i.jsx(sE,{className:"w-4 h-4"}),"Reschedule Booking"]}),i.jsxs("button",{onClick:()=>{M(!0),I(null)},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-white hover:bg-red-50 text-red-600 rounded-xl font-semibold border border-red-200 hover:border-red-300 transition-all",children:[i.jsx(Ia,{className:"w-4 h-4"}),"Cancel Booking"]})]})}),(Ce||Pe)&&i.jsx("div",{className:"text-center",children:i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book Again"]})})]}),A&&i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[i.jsxs("button",{onClick:()=>{k(!1),D(null),W(null)},className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[i.jsx(Ba,{className:"w-3.5 h-3.5"}),"Back to Booking"]}),b.serviceName&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[i.jsx(gs,{className:"w-3.5 h-3.5 text-blue-500"}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName}),b.servicePrice!=null&&i.jsx("span",{className:"text-blue-600 font-bold",children:ne(b.servicePrice)})]}),b.staffName&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[i.jsx(H1,{name:b.staffName,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a New Time"}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Pick a new date and time for your appointment"})]}),be.length===0?i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),i.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"No time slots are currently available. Check back soon!"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-8",children:i.jsx(oE,{availableDates:be,selectedDate:q,onSelectDate:ke=>{D(ke),W(null)}})}),q&&i.jsxs("div",{className:"animate-slide-down",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",ft(q)]}),i.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[De.length," slot",De.length!==1?"s":""]})]}),De.length===0?i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:i.jsx("p",{className:"text-slate-500",children:"No slots available for this date"})}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:De.sort((ke,Ve)=>ke.time.localeCompare(Ve.time)).map(ke=>{const Ve=R?.id===ke.id;return i.jsxs("button",{onClick:()=>W(ke),className:`group border rounded-xl p-4 transition-all duration-200 text-center ${Ve?"bg-blue-600 border-blue-600 text-white shadow-md shadow-blue-600/30":"bg-white border-slate-200 hover:border-blue-400 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5"}`,children:[i.jsx("div",{className:`text-lg font-bold mb-1 ${Ve?"text-white":"text-slate-900 group-hover:text-blue-700"} transition-colors`,children:dn(ke.time)}),ke.staffName&&i.jsxs("div",{className:`text-xs mb-0.5 flex items-center justify-center gap-1 ${Ve?"text-blue-100":"text-violet-600"}`,children:[i.jsx(Gt,{className:"w-3 h-3"}),ke.staffName]}),i.jsx("div",{className:`text-xs ${Ve?"text-blue-200":"text-slate-400"}`,children:_e(b.serviceDuration||b.duration)})]},ke.id)})}),R&&i.jsxs("div",{className:"mt-6 animate-fade-in",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 shadow-sm p-5 mb-4",children:[i.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"New Appointment Time"}),i.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[i.jsx(Vt,{className:"w-4 h-4 text-blue-500"}),i.jsxs("span",{className:"font-semibold text-slate-800",children:[ft(R.date)," at ",dn(R.time)]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:Ct,disabled:le,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:le?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Rescheduling"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ds,{className:"w-4 h-4"}),"Confirm Reschedule"]})}),i.jsx("button",{onClick:()=>W(null),className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]})]}),!q&&i.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]})]}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(st,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})})})]})}function Y1(){return i.jsxs(st,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(ua,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function WO(s){if(!s)return"Any time";const e=t=>{const[r,o]=t.split(":").map(Number),u=r>=12?"PM":"AM",d=r%12||12;return o===0?`${d}${u}`:`${d}:${o.toString().padStart(2,"0")}${u}`};return s.start==="00:00"&&s.end==="23:59"?"Any time":`${e(s.start)}  ${e(s.end)}`}function KO(s){if(!s||s.length===0)return"Any day";const e={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return s.map(t=>e[t]||t).join(", ")}function QO(s){if(!s)return"";const e=new Date,t=new Date(s),r=e-t,o=Math.floor(r/6e4);if(o<60)return`${o}m ago`;const u=Math.floor(o/60);return u<24?`${u}h ago`:`${Math.floor(u/24)}d ago`}function XO(){const{slug:s,refCode:e}=Do(),[t,r]=N.useState(null),[o,u]=N.useState(null),[d,p]=N.useState(!0),[g,x]=N.useState(!1),[b,w]=N.useState(null),[E,T]=N.useState(!1),[L,V]=N.useState(null);if(N.useEffect(()=>{(async()=>{p(!0);try{const oe=Ms(tt(Ee,"shops"),ms("slug","==",s)),j=await Os(oe);if(j.empty)x(!0);else{const A=j.docs[0];r(A.data()),u(A.id)}}catch(oe){console.error("Error looking up shop:",oe),x(!0)}finally{p(!1)}})()},[s]),N.useEffect(()=>{if(!o)return;(async()=>{try{const oe=Ms(tt(Ee,"shops",o,"waitlist"),ms("refCode","==",e.toUpperCase())),j=await Os(oe);if(j.empty){T(!0);return}const A=j.docs[0],k={id:A.id,...A.data()};w(k);const U=Ms(tt(Ee,"shops",o,"waitlist"),ms("serviceId","==",k.serviceId),ms("status","==","waiting")),I=(await Os(U)).docs.map(q=>({id:q.id,...q.data()})).sort((q,D)=>(q.createdAt||"").localeCompare(D.createdAt||"")).findIndex(q=>q.id===k.id);I>=0&&V(I+1)}catch(oe){console.error("Error looking up waitlist entry:",oe),T(!0)}})()},[o,e]),d)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(Ba,{className:"w-4 h-4"}),"Go Home"]})]})});if(E)return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(t?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:t?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),i.jsx(Y1,{})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(ml,{className:"w-8 h-8 text-amber-500"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Waitlist Entry Not Found"}),i.jsx("p",{className:"text-slate-600 mb-2",children:"No waitlist entry found with reference code"}),i.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading waitlist"})]})});const O={waiting:{label:"Waiting",color:"bg-blue-100 text-blue-700 border-blue-200",icon:kn},notified:{label:"Slot Available!",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:fo},booked:{label:"Booked",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Ds},expired:{label:"Expired",color:"bg-slate-100 text-slate-500 border-slate-200",icon:kn}},B=O[b.status]||O.waiting,Y=B.icon,$=he=>he?new Date(he+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",ie=he=>{if(!he)return"";const[oe,j]=he.split(":"),A=parseInt(oe),k=A>=12?"PM":"AM";return`${A%12||12}:${j} ${k}`};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(t?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:t?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),i.jsx(Y1,{})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[b.status==="notified"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(fo,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"A Slot Is Available!"}),i.jsxs("p",{className:"text-slate-600 mb-4",children:["A slot has opened up for ",b.serviceName,". Book now before it's taken!"]}),b.notifiedSlot&&i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-xl text-sm text-emerald-700 font-medium mb-4",children:[i.jsx(Vt,{className:"w-4 h-4"}),$(b.notifiedSlot.date)," at"," ",ie(b.notifiedSlot.time),b.notifiedSlot.staffName&&i.jsxs("span",{className:"text-emerald-600",children:[" ","with ",b.notifiedSlot.staffName]})]}),i.jsx("div",{children:i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-emerald-600/20 hover:shadow-lg",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book Now "]})})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Waitlist Status"}),i.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference:"," ",i.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),i.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${B.color}`,children:[i.jsx(Y,{className:"w-3.5 h-3.5"}),B.label]})]}),b.status==="waiting"&&L!=null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Position"}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(O0,{className:"w-4 h-4 text-blue-500"}),i.jsxs("span",{className:"font-bold text-slate-900 text-lg",children:["#",L]}),i.jsx("span",{className:"text-sm text-slate-500",children:"in line"})]})]}),b.serviceName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(gs,{className:"w-4 h-4 text-blue-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.staffName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center",children:i.jsx(Gt,{className:"w-4 h-4 text-violet-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),b.preferredDate&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"text-sm text-slate-700",children:["Preferred: ",$(b.preferredDate)]})]}),b.preferredDays&&b.preferredDays.length>0&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"text-sm text-slate-700",children:["Days: ",KO(b.preferredDays)]})]}),b.preferredTimeRange&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(kn,{className:"w-4 h-4 text-slate-500"})}),i.jsxs("span",{className:"text-sm text-slate-700",children:["Time: ",WO(b.preferredTimeRange)]})]}),b.createdAt&&i.jsxs("div",{className:"pt-2 border-t border-slate-100 text-xs text-slate-400",children:["Joined ",QO(b.createdAt)]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(Vt,{className:"w-4 h-4"}),b.status==="notified"?"Book Now":"Check Available Slots"]})})]})}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(st,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})})})]})}function JO(){return i.jsxs(st,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(ua,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function W1(s){if(s==null)return"";if(s<1)return"Next up!";if(s<60)return`~${s} min`;const e=Math.floor(s/60),t=s%60;return t>0?`~${e}h ${t}m`:`~${e}h`}function ZO(){const{slug:s}=Do(),[e,t]=N.useState(null),[r,o]=N.useState(null),[u,d]=N.useState(!0),[p,g]=N.useState(!1),[x,b]=N.useState([]),[w,E]=N.useState([]),[T,L]=N.useState([]),[V,O]=N.useState(!1),[B,Y]=N.useState(!1),[$,ie]=N.useState(!1),[he,oe]=N.useState(""),[j,A]=N.useState(0),[k,U]=N.useState({clientName:"",serviceId:""}),[M,F]=N.useState(Date.now());N.useEffect(()=>{const ve=setInterval(()=>F(Date.now()),3e4);return()=>clearInterval(ve)},[]),N.useEffect(()=>{(async()=>{d(!0);try{const P=Ms(tt(Ee,"shops"),ms("slug","==",s)),J=await Os(P);if(J.empty)g(!0);else{const ce=J.docs[0];t(ce.data()),o(ce.id)}}catch(P){console.error("Error looking up shop:",P),g(!0)}finally{d(!1)}})()},[s]),N.useEffect(()=>{if(!r)return;const ve=tn(tt(Ee,"shops",r,"walkins"),ce=>{const xe=ce.docs.map(be=>({id:be.id,...be.data()}));b(xe)}),P=tn(tt(Ee,"shops",r,"staff"),ce=>{const xe=ce.docs.map(be=>({id:be.id,...be.data()})).filter(be=>be.active!==!1);E(xe)}),J=tn(tt(Ee,"shops",r,"services"),ce=>{const xe=ce.docs.map(be=>({id:be.id,...be.data()})).filter(be=>be.active!==!1).sort((be,De)=>(be.name||"").localeCompare(De.name||""));L(xe)});return()=>{ve(),P(),J()}},[r]);const I=N.useMemo(()=>x.filter(ve=>ve.status==="waiting").sort((ve,P)=>(ve.position||0)-(P.position||0)),[x]),q=N.useMemo(()=>x.filter(ve=>ve.status==="in-progress"),[x]),D=N.useMemo(()=>Math.max(w.length,1),[w]),R=N.useMemo(()=>SE({waitingQueue:I,inProgress:q,staffCount:D,defaultDuration:30}),[I,q,D]),W=N.useMemo(()=>EE({waitingAhead:I,inProgress:q,staffCount:D,defaultDuration:30}),[I,q,D]),le=N.useMemo(()=>{const ve=new Date;return ve.setHours(0,0,0,0),x.filter(P=>{const J=P.joinedAt?.toDate?.()||(P.joinedAt?new Date(P.joinedAt):null);return J&&J>=ve}).length},[x]),Te=async ve=>{ve.preventDefault(),Y(!0);const P=T.find(be=>be.id===k.serviceId),ce=(I.length>0?Math.max(...I.map(be=>be.position||0)):0)+1,xe=k.clientName.trim()||`Walk-in #${le+1}`;try{await wr(tt(Ee,"shops",r,"walkins"),{clientName:xe,serviceId:k.serviceId||null,serviceName:P?.name||null,staffId:null,staffName:null,estimatedDuration:P?.duration||30,status:"waiting",position:ce,joinedAt:Rt.now(),startedAt:null,completedAt:null,estimatedWaitMinutes:null}),oe(xe),A(ce),ie(!0),O(!1),U({clientName:"",serviceId:""})}catch(be){console.error("Error joining queue:",be)}finally{Y(!1)}};return u?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):p?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(Ba,{className:"w-4 h-4"}),"Go Home"]})]})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Live Queue"})]})]}),i.jsx(JO,{})]})}),i.jsxs("div",{className:"max-w-2xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[$&&i.jsxs("div",{className:"mb-6 bg-emerald-50 border border-emerald-200 rounded-2xl p-6 text-center animate-scale-in",children:[i.jsx("div",{className:"w-14 h-14 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Gt,{className:"w-7 h-7 text-emerald-600"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-1",children:"You're in the queue!"}),i.jsxs("p",{className:"text-slate-600 text-sm mb-2",children:[i.jsx("strong",{children:he}),"  Position #",j]}),i.jsx("button",{onClick:()=>ie(!1),className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium",children:"Dismiss"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Gt,{className:"w-6 h-6 text-blue-600"})}),i.jsx("div",{className:"text-3xl font-extrabold text-slate-900",children:I.length}),i.jsx("div",{className:"text-sm font-medium text-slate-500 mt-1",children:"People Waiting"})]}),i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(iE,{className:"w-6 h-6 text-amber-600"})}),i.jsx("div",{className:"text-3xl font-extrabold text-slate-900",children:W1(W)}),i.jsx("div",{className:"text-sm font-medium text-slate-500 mt-1",children:"Est. Wait (New)"})]})]}),q.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(Scissors,{className:"w-5 h-5 text-emerald-500"}),"Currently Being Served"]}),i.jsx("div",{className:"space-y-2",children:q.map(ve=>i.jsxs("div",{className:"bg-white rounded-xl border border-emerald-200 p-4 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:i.jsx(Scissors,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-slate-900",children:ve.clientName}),i.jsx("div",{className:"text-xs text-slate-500",children:ve.serviceName||"Service in progress"})]})]},ve.id))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(kn,{className:"w-5 h-5 text-blue-500"}),"Queue"]}),I.length===0?i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-10 text-center",children:[i.jsx("div",{className:"w-14 h-14 bg-emerald-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Gt,{className:"w-7 h-7 text-emerald-500"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"No Wait!"}),i.jsx("p",{className:"text-sm text-slate-500",children:"The queue is empty  you can walk right in!"})]}):i.jsx("div",{className:"space-y-2",children:I.map((ve,P)=>{const J=R.get(ve.id);return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center font-extrabold text-blue-700 text-lg flex-shrink-0",children:P+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-slate-900 text-lg truncate",children:ve.clientName}),ve.serviceName&&i.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-1",children:[i.jsx(gs,{className:"w-3 h-3"}),ve.serviceName]})]}),i.jsxs("div",{className:"text-right flex-shrink-0",children:[i.jsx("div",{className:"text-lg font-bold text-amber-600",children:W1(J)}),i.jsx("div",{className:"text-xs text-slate-400",children:"est. wait"})]})]},ve.id)})})]}),!$&&i.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:V?i.jsxs("form",{onSubmit:Te,children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Join the Queue"}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Your Name"}),i.jsx("input",{type:"text",value:k.clientName,onChange:ve=>U(P=>({...P,clientName:ve.target.value})),placeholder:"Optional",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-lg"})]}),T.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Service"}),i.jsxs("select",{value:k.serviceId,onChange:ve=>U(P=>({...P,serviceId:ve.target.value})),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-lg",children:[i.jsx("option",{value:"",children:"Select a service"}),T.map(ve=>i.jsxs("option",{value:ve.id,children:[ve.name," (",ve.duration,"min  $",Number(ve.price).toFixed(2),")"]},ve.id))]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{type:"submit",disabled:B,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg shadow-md shadow-blue-600/20 transition-all disabled:opacity-50",children:[i.jsx(bi,{className:"w-5 h-5"}),B?"Joining":"Join Queue"]}),i.jsx("button",{type:"button",onClick:()=>{O(!1),U({clientName:"",serviceId:""})},className:"px-6 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]}):i.jsxs("button",{onClick:()=>O(!0),className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg shadow-md shadow-blue-600/20 transition-all hover:-translate-y-0.5",children:[i.jsx(bi,{className:"w-5 h-5"}),"Join the Queue"]})})]}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-between",children:[i.jsxs(st,{to:`/shop/${s}`,className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book Online"]}),i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(st,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})]})})]})}function e9(){const[s,e]=N.useState(null),[t,r]=N.useState(!0);return N.useEffect(()=>{const o=SC(fl,u=>{e(u),r(!1)});return()=>o()},[]),t?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):i.jsx(MT,{children:i.jsxs(uT,{children:[i.jsx(la,{path:"/",element:i.jsx(fM,{})}),i.jsx(la,{path:"/register",element:i.jsx(pM,{})}),i.jsx(la,{path:"/login",element:i.jsx(gM,{user:s})}),i.jsx(la,{path:"/shop/:slug",element:i.jsx(dO,{})}),i.jsx(la,{path:"/shop/:slug/booking/:refCode",element:i.jsx(YO,{})}),i.jsx(la,{path:"/shop/:slug/waitlist/:refCode",element:i.jsx(XO,{})}),i.jsx(la,{path:"/shop/:slug/queue",element:i.jsx(ZO,{})}),i.jsx(la,{path:"/shop/:slug/login",element:i.jsx(GO,{user:s})}),i.jsx(la,{path:"/shop/:slug/dashboard",element:i.jsx(HO,{user:s})}),i.jsx(la,{path:"*",element:i.jsx(oT,{to:"/",replace:!0})})]})})}hj.createRoot(document.getElementById("root")).render(i.jsx(Ht.StrictMode,{children:i.jsx(e9,{})}));
