(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function G0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Cp={exports:{}},Vc={};var Tv;function lE(){if(Tv)return Vc;Tv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:d,ref:o!==void 0?o:null,props:u}}return Vc.Fragment=e,Vc.jsx=t,Vc.jsxs=t,Vc}var Av;function oE(){return Av||(Av=1,Cp.exports=lE()),Cp.exports}var i=oE(),kp={exports:{}},et={};var Cv;function cE(){if(Cv)return et;Cv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),j=Symbol.iterator;function T(P){return P===null||typeof P!="object"?null:(P=j&&P[j]||P["@@iterator"],typeof P=="function"?P:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,O={};function U(P,Z,ue){this.props=P,this.context=Z,this.refs=O,this.updater=ue||L}U.prototype.isReactComponent={},U.prototype.setState=function(P,Z){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Z,"setState")},U.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function G(){}G.prototype=U.prototype;function q(P,Z,ue){this.props=P,this.context=Z,this.refs=O,this.updater=ue||L}var ae=q.prototype=new G;ae.constructor=q,V(ae,U.prototype),ae.isPureReactComponent=!0;var ce=Array.isArray;function W(){}var S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function k(P,Z,ue){var xe=ue.ref;return{$$typeof:s,type:P,key:Z,ref:xe!==void 0?xe:null,props:ue}}function B(P,Z){return k(P.type,Z,P.props)}function M(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function $(P){var Z={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ue){return Z[ue]})}var R=/\/+/g;function F(P,Z){return typeof P=="object"&&P!==null&&P.key!=null?$(""+P.key):Z.toString(36)}function D(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(W,W):(P.status="pending",P.then(function(Z){P.status==="pending"&&(P.status="fulfilled",P.value=Z)},function(Z){P.status==="pending"&&(P.status="rejected",P.reason=Z)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function I(P,Z,ue,xe,be){var De=typeof P;(De==="undefined"||De==="boolean")&&(P=null);var ze=!1;if(P===null)ze=!0;else switch(De){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(P.$$typeof){case s:case e:ze=!0;break;case b:return ze=P._init,I(ze(P._payload),Z,ue,xe,be)}}if(ze)return be=be(P),ze=xe===""?"."+F(P,0):xe,ce(be)?(ue="",ze!=null&&(ue=ze.replace(R,"$&/")+"/"),I(be,Z,ue,"",function(sn){return sn})):be!=null&&(M(be)&&(be=B(be,ue+(be.key==null||P&&P.key===be.key?"":(""+be.key).replace(R,"$&/")+"/")+ze)),Z.push(be)),1;ze=0;var kt=xe===""?".":xe+":";if(ce(P))for(var ft=0;ft<P.length;ft++)xe=P[ft],De=kt+F(xe,ft),ze+=I(xe,Z,ue,De,be);else if(ft=T(P),typeof ft=="function")for(P=ft.call(P),ft=0;!(xe=P.next()).done;)xe=xe.value,De=kt+F(xe,ft++),ze+=I(xe,Z,ue,De,be);else if(De==="object"){if(typeof P.then=="function")return I(D(P),Z,ue,xe,be);throw Z=String(P),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ze}function K(P,Z,ue){if(P==null)return P;var xe=[],be=0;return I(P,xe,"","",function(De){return Z.call(ue,De,be++)}),xe}function oe(P){if(P._status===-1){var Z=P._result;Z=Z(),Z.then(function(ue){(P._status===0||P._status===-1)&&(P._status=1,P._result=ue)},function(ue){(P._status===0||P._status===-1)&&(P._status=2,P._result=ue)}),P._status===-1&&(P._status=0,P._result=Z)}if(P._status===1)return P._result.default;throw P._result}var Te=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ve={map:K,forEach:function(P,Z,ue){K(P,function(){Z.apply(this,arguments)},ue)},count:function(P){var Z=0;return K(P,function(){Z++}),Z},toArray:function(P){return K(P,function(Z){return Z})||[]},only:function(P){if(!M(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return et.Activity=w,et.Children=ve,et.Component=U,et.Fragment=t,et.Profiler=o,et.PureComponent=q,et.StrictMode=r,et.Suspense=g,et.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,et.__COMPILER_RUNTIME={__proto__:null,c:function(P){return S.H.useMemoCache(P)}},et.cache=function(P){return function(){return P.apply(null,arguments)}},et.cacheSignal=function(){return null},et.cloneElement=function(P,Z,ue){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var xe=V({},P.props),be=P.key;if(Z!=null)for(De in Z.key!==void 0&&(be=""+Z.key),Z)!A.call(Z,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&Z.ref===void 0||(xe[De]=Z[De]);var De=arguments.length-2;if(De===1)xe.children=ue;else if(1<De){for(var ze=Array(De),kt=0;kt<De;kt++)ze[kt]=arguments[kt+2];xe.children=ze}return k(P.type,be,xe)},et.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},et.createElement=function(P,Z,ue){var xe,be={},De=null;if(Z!=null)for(xe in Z.key!==void 0&&(De=""+Z.key),Z)A.call(Z,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(be[xe]=Z[xe]);var ze=arguments.length-2;if(ze===1)be.children=ue;else if(1<ze){for(var kt=Array(ze),ft=0;ft<ze;ft++)kt[ft]=arguments[ft+2];be.children=kt}if(P&&P.defaultProps)for(xe in ze=P.defaultProps,ze)be[xe]===void 0&&(be[xe]=ze[xe]);return k(P,De,be)},et.createRef=function(){return{current:null}},et.forwardRef=function(P){return{$$typeof:p,render:P}},et.isValidElement=M,et.lazy=function(P){return{$$typeof:b,_payload:{_status:-1,_result:P},_init:oe}},et.memo=function(P,Z){return{$$typeof:x,type:P,compare:Z===void 0?null:Z}},et.startTransition=function(P){var Z=S.T,ue={};S.T=ue;try{var xe=P(),be=S.S;be!==null&&be(ue,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(W,Te)}catch(De){Te(De)}finally{Z!==null&&ue.types!==null&&(Z.types=ue.types),S.T=Z}},et.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},et.use=function(P){return S.H.use(P)},et.useActionState=function(P,Z,ue){return S.H.useActionState(P,Z,ue)},et.useCallback=function(P,Z){return S.H.useCallback(P,Z)},et.useContext=function(P){return S.H.useContext(P)},et.useDebugValue=function(){},et.useDeferredValue=function(P,Z){return S.H.useDeferredValue(P,Z)},et.useEffect=function(P,Z){return S.H.useEffect(P,Z)},et.useEffectEvent=function(P){return S.H.useEffectEvent(P)},et.useId=function(){return S.H.useId()},et.useImperativeHandle=function(P,Z,ue){return S.H.useImperativeHandle(P,Z,ue)},et.useInsertionEffect=function(P,Z){return S.H.useInsertionEffect(P,Z)},et.useLayoutEffect=function(P,Z){return S.H.useLayoutEffect(P,Z)},et.useMemo=function(P,Z){return S.H.useMemo(P,Z)},et.useOptimistic=function(P,Z){return S.H.useOptimistic(P,Z)},et.useReducer=function(P,Z,ue){return S.H.useReducer(P,Z,ue)},et.useRef=function(P){return S.H.useRef(P)},et.useState=function(P){return S.H.useState(P)},et.useSyncExternalStore=function(P,Z,ue){return S.H.useSyncExternalStore(P,Z,ue)},et.useTransition=function(){return S.H.useTransition()},et.version="19.2.4",et}var kv;function Y0(){return kv||(kv=1,kp.exports=cE()),kp.exports}var N=Y0();const Ht=G0(N);var Rp={exports:{}},Lc={},Ip={exports:{}},Dp={};var Rv;function uE(){return Rv||(Rv=1,(function(s){function e(I,K){var oe=I.length;I.push(K);e:for(;0<oe;){var Te=oe-1>>>1,ve=I[Te];if(0<o(ve,K))I[Te]=K,I[oe]=ve,oe=Te;else break e}}function t(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var K=I[0],oe=I.pop();if(oe!==K){I[0]=oe;e:for(var Te=0,ve=I.length,P=ve>>>1;Te<P;){var Z=2*(Te+1)-1,ue=I[Z],xe=Z+1,be=I[xe];if(0>o(ue,oe))xe<ve&&0>o(be,ue)?(I[Te]=be,I[xe]=oe,Te=xe):(I[Te]=ue,I[Z]=oe,Te=Z);else if(xe<ve&&0>o(be,oe))I[Te]=be,I[xe]=oe,Te=xe;else break e}}return K}function o(I,K){var oe=I.sortIndex-K.sortIndex;return oe!==0?oe:I.id-K.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var g=[],x=[],b=1,w=null,j=3,T=!1,L=!1,V=!1,O=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function ae(I){for(var K=t(x);K!==null;){if(K.callback===null)r(x);else if(K.startTime<=I)r(x),K.sortIndex=K.expirationTime,e(g,K);else break;K=t(x)}}function ce(I){if(V=!1,ae(I),!L)if(t(g)!==null)L=!0,W||(W=!0,$());else{var K=t(x);K!==null&&D(ce,K.startTime-I)}}var W=!1,S=-1,A=5,k=-1;function B(){return O?!0:!(s.unstable_now()-k<A)}function M(){if(O=!1,W){var I=s.unstable_now();k=I;var K=!0;try{e:{L=!1,V&&(V=!1,G(S),S=-1),T=!0;var oe=j;try{t:{for(ae(I),w=t(g);w!==null&&!(w.expirationTime>I&&B());){var Te=w.callback;if(typeof Te=="function"){w.callback=null,j=w.priorityLevel;var ve=Te(w.expirationTime<=I);if(I=s.unstable_now(),typeof ve=="function"){w.callback=ve,ae(I),K=!0;break t}w===t(g)&&r(g),ae(I)}else r(g);w=t(g)}if(w!==null)K=!0;else{var P=t(x);P!==null&&D(ce,P.startTime-I),K=!1}}break e}finally{w=null,j=oe,T=!1}K=void 0}}finally{K?$():W=!1}}}var $;if(typeof q=="function")$=function(){q(M)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,F=R.port2;R.port1.onmessage=M,$=function(){F.postMessage(null)}}else $=function(){U(M,0)};function D(I,K){S=U(function(){I(s.unstable_now())},K)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(I){I.callback=null},s.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<I?Math.floor(1e3/I):5},s.unstable_getCurrentPriorityLevel=function(){return j},s.unstable_next=function(I){switch(j){case 1:case 2:case 3:var K=3;break;default:K=j}var oe=j;j=K;try{return I()}finally{j=oe}},s.unstable_requestPaint=function(){O=!0},s.unstable_runWithPriority=function(I,K){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var oe=j;j=I;try{return K()}finally{j=oe}},s.unstable_scheduleCallback=function(I,K,oe){var Te=s.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Te+oe:Te):oe=Te,I){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=oe+ve,I={id:b++,callback:K,priorityLevel:I,startTime:oe,expirationTime:ve,sortIndex:-1},oe>Te?(I.sortIndex=oe,e(x,I),t(g)===null&&I===t(x)&&(V?(G(S),S=-1):V=!0,D(ce,oe-Te))):(I.sortIndex=ve,e(g,I),L||T||(L=!0,W||(W=!0,$()))),I},s.unstable_shouldYield=B,s.unstable_wrapCallback=function(I){var K=j;return function(){var oe=j;j=K;try{return I.apply(this,arguments)}finally{j=oe}}}})(Dp)),Dp}var Iv;function dE(){return Iv||(Iv=1,Ip.exports=uE()),Ip.exports}var Mp={exports:{}},Hn={};var Dv;function hE(){if(Dv)return Hn;Dv=1;var s=Y0();function e(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)x+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,x,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:x,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Hn.createPortal=function(g,x){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(e(299));return u(g,x,null,b)},Hn.flushSync=function(g){var x=d.T,b=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=x,r.p=b,r.d.f()}},Hn.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,r.d.C(g,x))},Hn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Hn.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var b=x.as,w=p(b,x.crossOrigin),j=typeof x.integrity=="string"?x.integrity:void 0,T=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;b==="style"?r.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:j,fetchPriority:T}):b==="script"&&r.d.X(g,{crossOrigin:w,integrity:j,fetchPriority:T,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},Hn.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var b=p(x.as,x.crossOrigin);r.d.M(g,{crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&r.d.M(g)},Hn.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var b=x.as,w=p(b,x.crossOrigin);r.d.L(g,b,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},Hn.preloadModule=function(g,x){if(typeof g=="string")if(x){var b=p(x.as,x.crossOrigin);r.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:b,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else r.d.m(g)},Hn.requestFormReset=function(g){r.d.r(g)},Hn.unstable_batchedUpdates=function(g,x){return g(x)},Hn.useFormState=function(g,x,b){return d.H.useFormState(g,x,b)},Hn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Hn.version="19.2.4",Hn}var Mv;function fE(){if(Mv)return Mp.exports;Mv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Mp.exports=hE(),Mp.exports}var Ov;function mE(){if(Ov)return Lc;Ov=1;var s=dE(),e=Y0(),t=fE();function r(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var a=n,l=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(l=a.return),n=a.return;while(n)}return a.tag===3?l:null}function d(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function p(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(r(188))}function x(n){var a=n.alternate;if(!a){if(a=u(n),a===null)throw Error(r(188));return a!==n?null:n}for(var l=n,c=a;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){l=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return g(f),n;if(m===c)return g(f),a;m=m.sibling}throw Error(r(188))}if(l.return!==c.return)l=f,c=m;else{for(var v=!1,E=f.child;E;){if(E===l){v=!0,l=f,c=m;break}if(E===c){v=!0,c=f,l=m;break}E=E.sibling}if(!v){for(E=m.child;E;){if(E===l){v=!0,l=m,c=f;break}if(E===c){v=!0,c=m,l=f;break}E=E.sibling}if(!v)throw Error(r(189))}}if(l.alternate!==c)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?n:a}function b(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=b(n),a!==null)return a;n=n.sibling}return null}var w=Object.assign,j=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),q=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function $(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function F(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case V:return"Fragment";case U:return"Profiler";case O:return"StrictMode";case ce:return"Suspense";case W:return"SuspenseList";case k:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case L:return"Portal";case q:return n.displayName||"Context";case G:return(n._context.displayName||"Context")+".Consumer";case ae:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case S:return a=n.displayName||null,a!==null?a:F(n.type)||"Memo";case A:a=n._payload,n=n._init;try{return F(n(a))}catch{}}return null}var D=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},Te=[],ve=-1;function P(n){return{current:n}}function Z(n){0>ve||(n.current=Te[ve],Te[ve]=null,ve--)}function ue(n,a){ve++,Te[ve]=n.current,n.current=a}var xe=P(null),be=P(null),De=P(null),ze=P(null);function kt(n,a){switch(ue(De,a),ue(be,n),ue(xe,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?Qy(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=Qy(a),n=Xy(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Z(xe),ue(xe,n)}function ft(){Z(xe),Z(be),Z(De)}function sn(n){n.memoizedState!==null&&ue(ze,n);var a=xe.current,l=Xy(a,n.type);a!==l&&(ue(be,n),ue(xe,l))}function se(n){be.current===n&&(Z(xe),Z(be)),ze.current===n&&(Z(ze),Dc._currentValue=oe)}var _e,de;function Ae(n){if(_e===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);_e=a&&a[1]||"",de=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+n+de}var Ce=!1;function Pe(n,a){if(!n||Ce)return"";Ce=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(le){var ne=le}Reflect.construct(n,[],pe)}else{try{pe.call()}catch(le){ne=le}n.call(pe.prototype)}}else{try{throw Error()}catch(le){ne=le}(pe=n())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(le){if(le&&ne&&typeof le.stack=="string")return[le.stack,ne.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),v=m[0],E=m[1];if(v&&E){var z=v.split(`
`),te=E.split(`
`);for(f=c=0;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;for(;f<te.length&&!te[f].includes("DetermineComponentFrameRoot");)f++;if(c===z.length||f===te.length)for(c=z.length-1,f=te.length-1;1<=c&&0<=f&&z[c]!==te[f];)f--;for(;1<=c&&0<=f;c--,f--)if(z[c]!==te[f]){if(c!==1||f!==1)do if(c--,f--,0>f||z[c]!==te[f]){var he=`
`+z[c].replace(" at new "," at ");return n.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",n.displayName)),he}while(1<=c&&0<=f);break}}}finally{Ce=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?Ae(l):""}function yt(n,a){switch(n.tag){case 26:case 27:case 5:return Ae(n.type);case 16:return Ae("Lazy");case 13:return n.child!==a&&a!==null?Ae("Suspense Fallback"):Ae("Suspense");case 19:return Ae("SuspenseList");case 0:case 15:return Pe(n.type,!1);case 11:return Pe(n.type.render,!1);case 1:return Pe(n.type,!0);case 31:return Ae("Activity");default:return""}}function ct(n){try{var a="",l=null;do a+=yt(n,l),l=n,n=n.return;while(n);return a}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ut=Object.prototype.hasOwnProperty,ke=s.unstable_scheduleCallback,Ve=s.unstable_cancelCallback,ot=s.unstable_shouldYield,Qt=s.unstable_requestPaint,_t=s.unstable_now,Nt=s.unstable_getCurrentPriorityLevel,Cn=s.unstable_ImmediatePriority,Tt=s.unstable_UserBlockingPriority,Xn=s.unstable_NormalPriority,qn=s.unstable_LowPriority,vs=s.unstable_IdlePriority,ns=s.log,$a=s.unstable_setDisableYieldValue,H=null,re=null;function Ne(n){if(typeof ns=="function"&&$a(n),re&&typeof re.setStrictMode=="function")try{re.setStrictMode(H,n)}catch{}}var we=Math.clz32?Math.clz32:Ft,$e=Math.log,Je=Math.LN2;function Ft(n){return n>>>=0,n===0?32:31-($e(n)/Je|0)|0}var Be=256,me=262144,Se=4194304;function Qe(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ze(n,a,l){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var E=c&134217727;return E!==0?(c=E&~m,c!==0?f=Qe(c):(v&=E,v!==0?f=Qe(v):l||(l=E&~n,l!==0&&(f=Qe(l))))):(E=c&~m,E!==0?f=Qe(E):v!==0?f=Qe(v):l||(l=c&~n,l!==0&&(f=Qe(l)))),f===0?0:a!==0&&a!==f&&(a&m)===0&&(m=f&-f,l=a&-a,m>=l||m===32&&(l&4194048)!==0)?a:f}function jt(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Ue(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function He(){var n=Se;return Se<<=1,(Se&62914560)===0&&(Se=4194304),n}function Dt(n){for(var a=[],l=0;31>l;l++)a.push(n);return a}function an(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function $n(n,a,l,c,f,m){var v=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var E=n.entanglements,z=n.expirationTimes,te=n.hiddenUpdates;for(l=v&~l;0<l;){var he=31-we(l),pe=1<<he;E[he]=0,z[he]=-1;var ne=te[he];if(ne!==null)for(te[he]=null,he=0;he<ne.length;he++){var le=ne[he];le!==null&&(le.lane&=-536870913)}l&=~pe}c!==0&&ss(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(v&~a))}function ss(n,a,l){n.pendingLanes|=a,n.suspendedLanes&=~a;var c=31-we(a);n.entangledLanes|=a,n.entanglements[c]=n.entanglements[c]|1073741824|l&261930}function Zs(n,a){var l=n.entangledLanes|=a;for(n=n.entanglements;l;){var c=31-we(l),f=1<<c;f&a|n[c]&a&&(n[c]|=a),l&=~f}}function Ti(n,a){var l=a&-a;return l=(l&42)!==0?1:Ha(l),(l&(n.suspendedLanes|a))!==0?0:l}function Ha(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function fn(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ai(){var n=K.p;return n!==0?n:(n=window.event,n===void 0?32:vv(n.type))}function bn(n,a){var l=K.p;try{return K.p=n,a()}finally{K.p=l}}var as=Math.random().toString(36).slice(2),rn="__reactFiber$"+as,yn="__reactProps$"+as,ws="__reactContainer$"+as,Ci="__reactEvents$"+as,Of="__reactListeners$"+as,Mu="__reactHandles$"+as,Ou="__reactResources$"+as,ga="__reactMarker$"+as;function jl(n){delete n[rn],delete n[yn],delete n[Ci],delete n[Of],delete n[Mu]}function xa(n){var a=n[rn];if(a)return a;for(var l=n.parentNode;l;){if(a=l[ws]||l[rn]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(n=av(n);n!==null;){if(l=n[rn])return l;n=av(n)}return a}n=l,l=n.parentNode}return null}function Vs(n){if(n=n[rn]||n[ws]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function _s(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(r(33))}function ba(n){var a=n[Ou];return a||(a=n[Ou]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function vn(n){n[ga]=!0}var Bo=new Set,zo={};function ya(n,a){va(n,a),va(n+"Capture",a)}function va(n,a){for(zo[n]=a,n=0;n<a.length;n++)Bo.add(a[n])}var Fo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qo={},$o={};function Pu(n){return ut.call($o,n)?!0:ut.call(qo,n)?!1:Fo.test(n)?$o[n]=!0:(qo[n]=!0,!1)}function Sl(n,a,l){if(Pu(a))if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+l)}}function Ns(n,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+l)}}function wn(n,a,l,c){if(c===null)n.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(a,l,""+c)}}function In(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function jr(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ho(n,a,l){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return f.call(this)},set:function(v){l=""+v,m.call(this,v)}}),Object.defineProperty(n,a,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Mt(n){if(!n._valueTracker){var a=jr(n)?"checked":"value";n._valueTracker=Ho(n,a,""+n[a])}}function ki(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var l=a.getValue(),c="";return n&&(c=jr(n)?n.checked?"true":"false":n.value),n=c,n!==l?(a.setValue(n),!0):!1}function wa(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ri=/[\n"\\]/g;function rs(n){return n.replace(Ri,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function El(n,a,l,c,f,m,v,E){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),a!=null?v==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+In(a)):n.value!==""+In(a)&&(n.value=""+In(a)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),a!=null?Go(n,v,In(a)):l!=null?Go(n,v,In(l)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+In(E):n.removeAttribute("name")}function Vu(n,a,l,c,f,m,v,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),a!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||a!=null)){Mt(n);return}l=l!=null?""+In(l):"",a=a!=null?""+In(a):l,E||a===n.value||(n.value=a),n.defaultValue=a}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=E?n.checked:!!c,n.defaultChecked=!!c,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),Mt(n)}function Go(n,a,l){a==="number"&&wa(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Sr(n,a,l,c){if(n=n.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<n.length;l++)f=a.hasOwnProperty("$"+n[l].value),n[l].selected!==f&&(n[l].selected=f),f&&c&&(n[l].defaultSelected=!0)}else{for(l=""+In(l),a=null,f=0;f<n.length;f++){if(n[f].value===l){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}a!==null||n[f].disabled||(a=n[f])}a!==null&&(a.selected=!0)}}function Lu(n,a,l){if(a!=null&&(a=""+In(a),a!==n.value&&(n.value=a),l==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=l!=null?""+In(l):""}function Er(n,a,l,c){if(a==null){if(c!=null){if(l!=null)throw Error(r(92));if(D(c)){if(1<c.length)throw Error(r(93));c=c[0]}l=c}l==null&&(l=""),a=l}l=In(a),n.defaultValue=l,c=n.textContent,c===l&&c!==""&&c!==null&&(n.value=c),Mt(n)}function is(n,a){if(a){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=a;return}}n.textContent=a}var Uu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yo(n,a,l){var c=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":c?n.setProperty(a,l):typeof l!="number"||l===0||Uu.has(a)?a==="float"?n.cssFloat=l:n[a]=(""+l).trim():n[a]=l+"px"}function Wo(n,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(n=n.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in a)c=a[f],a.hasOwnProperty(f)&&l[f]!==c&&Yo(n,f,c)}else for(var m in a)a.hasOwnProperty(m)&&Yo(n,m,a[m])}function Tl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Al(n){return Tr.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ea(){}var Ko=null;function Ls(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ar=null,_a=null;function Ii(n){var a=Vs(n);if(a&&(n=a.stateNode)){var l=n[yn]||null;e:switch(n=a.stateNode,a.type){case"input":if(El(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+rs(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var c=l[a];if(c!==n&&c.form===n.form){var f=c[yn]||null;if(!f)throw Error(r(90));El(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)c=l[a],c.form===n.form&&ki(c)}break e;case"textarea":Lu(n,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&Sr(n,!!l.multiple,a,!1)}}}var Cl=!1;function Cr(n,a,l){if(Cl)return n(a,l);Cl=!0;try{var c=n(a);return c}finally{if(Cl=!1,(Ar!==null||_a!==null)&&(Dd(),Ar&&(a=Ar,n=_a,_a=Ar=null,Ii(a),n)))for(a=0;a<n.length;a++)Ii(n[a])}}function ta(n,a){var l=n.stateNode;if(l===null)return null;var c=l[yn]||null;if(c===null)return null;l=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Di=!1;if(Us)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){Di=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{Di=!1}var Na=null,Qo=null,Mi=null;function Xo(){if(Mi)return Mi;var n,a=Qo,l=a.length,c,f="value"in Na?Na.value:Na.textContent,m=f.length;for(n=0;n<l&&a[n]===f[n];n++);var v=l-n;for(c=1;c<=v&&a[l-c]===f[m-c];c++);return Mi=f.slice(n,1<c?1-c:void 0)}function Oi(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Ga(){return!0}function na(){return!1}function On(n){function a(l,c,f,m,v){this._reactName=l,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(l=n[E],this[E]=l?l(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ga:na,this.isPropagationStopped=na,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),a}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=On(Ya),kr=w({},Ya,{view:0,detail:0}),Jo=On(kr),Rr,kl,Sa,Rl=w({},kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ir,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Sa&&(Sa&&n.type==="mousemove"?(Rr=n.screenX-Sa.screenX,kl=n.screenY-Sa.screenY):kl=Rr=0,Sa=n),Rr)},movementY:function(n){return"movementY"in n?n.movementY:kl}}),Zo=On(Rl),Pi=w({},Rl,{dataTransfer:0}),zu=On(Pi),Fu=w({},kr,{relatedTarget:0}),Vi=On(Fu),ec=w({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),qu=On(ec),Il=w({},Ya,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$u=On(Il),Hu=w({},Ya,{data:0}),Ea=On(Hu),Gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ku(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=Wu[n])?!!a[n]:!1}function Ir(){return Ku}var Jn=w({},kr,{key:function(n){if(n.key){var a=Gu[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Oi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Yu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ir,charCode:function(n){return n.type==="keypress"?Oi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Oi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Qu=On(Jn),Xu=w({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wa=On(Xu),h=w({},kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ir}),y=On(h),_=w({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=On(_),J=w({},Rl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ie=On(J),Ee=w({},Ya,{newState:0,oldState:0}),at=On(Ee),mn=[9,13,27,32],At=Us&&"CompositionEvent"in window,Xt=null;Us&&"documentMode"in document&&(Xt=document.documentMode);var Bs=Us&&"TextEvent"in window&&!Xt,Ta=Us&&(!At||Xt&&8<Xt&&11>=Xt),sa=" ",aa=!1;function Li(n,a){switch(n){case"keyup":return mn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dl(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ml=!1;function Rj(n,a){switch(n){case"compositionend":return Dl(a);case"keypress":return a.which!==32?null:(aa=!0,sa);case"textInput":return n=a.data,n===sa&&aa?null:n;default:return null}}function Ij(n,a){if(Ml)return n==="compositionend"||!At&&Li(n,a)?(n=Xo(),Mi=Qo=Na=null,Ml=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ta&&a.locale!=="ko"?null:a.data;default:return null}}var Dj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lx(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!Dj[n.type]:a==="textarea"}function ox(n,a,l,c){Ar?_a?_a.push(c):_a=[c]:Ar=c,a=Bd(a,"onChange"),0<a.length&&(l=new ja("onChange","change",null,l,c),n.push({event:l,listeners:a}))}var tc=null,nc=null;function Mj(n){$y(n,0)}function Ju(n){var a=_s(n);if(ki(a))return n}function cx(n,a){if(n==="change")return a}var ux=!1;if(Us){var Pf;if(Us){var Vf="oninput"in document;if(!Vf){var dx=document.createElement("div");dx.setAttribute("oninput","return;"),Vf=typeof dx.oninput=="function"}Pf=Vf}else Pf=!1;ux=Pf&&(!document.documentMode||9<document.documentMode)}function hx(){tc&&(tc.detachEvent("onpropertychange",fx),nc=tc=null)}function fx(n){if(n.propertyName==="value"&&Ju(nc)){var a=[];ox(a,nc,n,Ls(n)),Cr(Mj,a)}}function Oj(n,a,l){n==="focusin"?(hx(),tc=a,nc=l,tc.attachEvent("onpropertychange",fx)):n==="focusout"&&hx()}function Pj(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ju(nc)}function Vj(n,a){if(n==="click")return Ju(a)}function Lj(n,a){if(n==="input"||n==="change")return Ju(a)}function Uj(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var js=typeof Object.is=="function"?Object.is:Uj;function sc(n,a){if(js(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var l=Object.keys(n),c=Object.keys(a);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var f=l[c];if(!ut.call(a,f)||!js(n[f],a[f]))return!1}return!0}function mx(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function px(n,a){var l=mx(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=a&&c>=a)return{node:l,offset:a-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=mx(l)}}function gx(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?gx(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function xx(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=wa(n.document);a instanceof n.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)n=a.contentWindow;else break;a=wa(n.document)}return a}function Lf(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var Bj=Us&&"documentMode"in document&&11>=document.documentMode,Ol=null,Uf=null,ac=null,Bf=!1;function bx(n,a,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Bf||Ol==null||Ol!==wa(c)||(c=Ol,"selectionStart"in c&&Lf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ac&&sc(ac,c)||(ac=c,c=Bd(Uf,"onSelect"),0<c.length&&(a=new ja("onSelect","select",null,a,l),n.push({event:a,listeners:c}),a.target=Ol)))}function Ui(n,a){var l={};return l[n.toLowerCase()]=a.toLowerCase(),l["Webkit"+n]="webkit"+a,l["Moz"+n]="moz"+a,l}var Pl={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionrun:Ui("Transition","TransitionRun"),transitionstart:Ui("Transition","TransitionStart"),transitioncancel:Ui("Transition","TransitionCancel"),transitionend:Ui("Transition","TransitionEnd")},zf={},yx={};Us&&(yx=document.createElement("div").style,"AnimationEvent"in window||(delete Pl.animationend.animation,delete Pl.animationiteration.animation,delete Pl.animationstart.animation),"TransitionEvent"in window||delete Pl.transitionend.transition);function Bi(n){if(zf[n])return zf[n];if(!Pl[n])return n;var a=Pl[n],l;for(l in a)if(a.hasOwnProperty(l)&&l in yx)return zf[n]=a[l];return n}var vx=Bi("animationend"),wx=Bi("animationiteration"),_x=Bi("animationstart"),zj=Bi("transitionrun"),Fj=Bi("transitionstart"),qj=Bi("transitioncancel"),Nx=Bi("transitionend"),jx=new Map,Ff="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ff.push("scrollEnd");function ra(n,a){jx.set(n,a),ya(a,[n])}var Zu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},zs=[],Vl=0,qf=0;function ed(){for(var n=Vl,a=qf=Vl=0;a<n;){var l=zs[a];zs[a++]=null;var c=zs[a];zs[a++]=null;var f=zs[a];zs[a++]=null;var m=zs[a];if(zs[a++]=null,c!==null&&f!==null){var v=c.pending;v===null?f.next=f:(f.next=v.next,v.next=f),c.pending=f}m!==0&&Sx(l,f,m)}}function td(n,a,l,c){zs[Vl++]=n,zs[Vl++]=a,zs[Vl++]=l,zs[Vl++]=c,qf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function $f(n,a,l,c){return td(n,a,l,c),nd(n)}function zi(n,a){return td(n,null,null,a),nd(n)}function Sx(n,a,l){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l);for(var f=!1,m=n.return;m!==null;)m.childLanes|=l,c=m.alternate,c!==null&&(c.childLanes|=l),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&a!==null&&(f=31-we(l),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[a]:c.push(a),a.lane=l|536870912),m):null}function nd(n){if(50<Ec)throw Ec=0,Zm=null,Error(r(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Ll={};function $j(n,a,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(n,a,l,c){return new $j(n,a,l,c)}function Hf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ka(n,a){var l=n.alternate;return l===null?(l=Ss(n.tag,a,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=a,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,a=n.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Ex(n,a){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,a=l.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function sd(n,a,l,c,f,m){var v=0;if(c=n,typeof n=="function")Hf(n)&&(v=1);else if(typeof n=="string")v=KS(n,l,xe.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case k:return n=Ss(31,l,a,f),n.elementType=k,n.lanes=m,n;case V:return Fi(l.children,f,m,a);case O:v=8,f|=24;break;case U:return n=Ss(12,l,a,f|2),n.elementType=U,n.lanes=m,n;case ce:return n=Ss(13,l,a,f),n.elementType=ce,n.lanes=m,n;case W:return n=Ss(19,l,a,f),n.elementType=W,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case q:v=10;break e;case G:v=9;break e;case ae:v=11;break e;case S:v=14;break e;case A:v=16,c=null;break e}v=29,l=Error(r(130,n===null?"null":typeof n,"")),c=null}return a=Ss(v,l,a,f),a.elementType=n,a.type=c,a.lanes=m,a}function Fi(n,a,l,c){return n=Ss(7,n,c,a),n.lanes=l,n}function Gf(n,a,l){return n=Ss(6,n,null,a),n.lanes=l,n}function Tx(n){var a=Ss(18,null,null,0);return a.stateNode=n,a}function Yf(n,a,l){return a=Ss(4,n.children!==null?n.children:[],n.key,a),a.lanes=l,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var Ax=new WeakMap;function Fs(n,a){if(typeof n=="object"&&n!==null){var l=Ax.get(n);return l!==void 0?l:(a={value:n,source:a,stack:ct(a)},Ax.set(n,a),a)}return{value:n,source:a,stack:ct(a)}}var Ul=[],Bl=0,ad=null,rc=0,qs=[],$s=0,Dr=null,Aa=1,Ca="";function Qa(n,a){Ul[Bl++]=rc,Ul[Bl++]=ad,ad=n,rc=a}function Cx(n,a,l){qs[$s++]=Aa,qs[$s++]=Ca,qs[$s++]=Dr,Dr=n;var c=Aa;n=Ca;var f=32-we(c)-1;c&=~(1<<f),l+=1;var m=32-we(a)+f;if(30<m){var v=f-f%5;m=(c&(1<<v)-1).toString(32),c>>=v,f-=v,Aa=1<<32-we(a)+f|l<<f|c,Ca=m+n}else Aa=1<<m|l<<f|c,Ca=n}function Wf(n){n.return!==null&&(Qa(n,1),Cx(n,1,0))}function Kf(n){for(;n===ad;)ad=Ul[--Bl],Ul[Bl]=null,rc=Ul[--Bl],Ul[Bl]=null;for(;n===Dr;)Dr=qs[--$s],qs[$s]=null,Ca=qs[--$s],qs[$s]=null,Aa=qs[--$s],qs[$s]=null}function kx(n,a){qs[$s++]=Aa,qs[$s++]=Ca,qs[$s++]=Dr,Aa=a.id,Ca=a.overflow,Dr=n}var Pn=null,Wt=null,vt=!1,Mr=null,Hs=!1,Qf=Error(r(519));function Or(n){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ic(Fs(a,n)),Qf}function Rx(n){var a=n.stateNode,l=n.type,c=n.memoizedProps;switch(a[rn]=n,a[yn]=c,l){case"dialog":ht("cancel",a),ht("close",a);break;case"iframe":case"object":case"embed":ht("load",a);break;case"video":case"audio":for(l=0;l<Ac.length;l++)ht(Ac[l],a);break;case"source":ht("error",a);break;case"img":case"image":case"link":ht("error",a),ht("load",a);break;case"details":ht("toggle",a);break;case"input":ht("invalid",a),Vu(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ht("invalid",a);break;case"textarea":ht("invalid",a),Er(a,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||c.suppressHydrationWarning===!0||Wy(a.textContent,l)?(c.popover!=null&&(ht("beforetoggle",a),ht("toggle",a)),c.onScroll!=null&&ht("scroll",a),c.onScrollEnd!=null&&ht("scrollend",a),c.onClick!=null&&(a.onclick=ea),a=!0):a=!1,a||Or(n,!0)}function Ix(n){for(Pn=n.return;Pn;)switch(Pn.tag){case 5:case 31:case 13:Hs=!1;return;case 27:case 3:Hs=!0;return;default:Pn=Pn.return}}function zl(n){if(n!==Pn)return!1;if(!vt)return Ix(n),vt=!0,!1;var a=n.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||mp(n.type,n.memoizedProps)),l=!l),l&&Wt&&Or(n),Ix(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Wt=sv(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));Wt=sv(n)}else a===27?(a=Wt,Kr(n.type)?(n=yp,yp=null,Wt=n):Wt=a):Wt=Pn?Ys(n.stateNode.nextSibling):null;return!0}function qi(){Wt=Pn=null,vt=!1}function Xf(){var n=Mr;return n!==null&&(us===null?us=n:us.push.apply(us,n),Mr=null),n}function ic(n){Mr===null?Mr=[n]:Mr.push(n)}var Jf=P(null),$i=null,Xa=null;function Pr(n,a,l){ue(Jf,a._currentValue),a._currentValue=l}function Ja(n){n._currentValue=Jf.current,Z(Jf)}function Zf(n,a,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),n===l)break;n=n.return}}function em(n,a,l,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=f;for(var z=0;z<a.length;z++)if(E.context===a[z]){m.lanes|=l,E=m.alternate,E!==null&&(E.lanes|=l),Zf(m.return,l,n),c||(v=null);break e}m=E.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(r(341));v.lanes|=l,m=v.alternate,m!==null&&(m.lanes|=l),Zf(v,l,n),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===n){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Fl(n,a,l,c){n=null;for(var f=a,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var E=f.type;js(f.pendingProps.value,v.value)||(n!==null?n.push(E):n=[E])}}else if(f===ze.current){if(v=f.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Dc):n=[Dc])}f=f.return}n!==null&&em(a,n,l,c),a.flags|=262144}function rd(n){for(n=n.firstContext;n!==null;){if(!js(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Hi(n){$i=n,Xa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Vn(n){return Dx($i,n)}function id(n,a){return $i===null&&Hi(n),Dx(n,a)}function Dx(n,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Xa===null){if(n===null)throw Error(r(308));Xa=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Xa=Xa.next=a;return l}var Hj=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(l,c){n.push(c)}};this.abort=function(){a.aborted=!0,n.forEach(function(l){return l()})}},Gj=s.unstable_scheduleCallback,Yj=s.unstable_NormalPriority,_n={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tm(){return{controller:new Hj,data:new Map,refCount:0}}function lc(n){n.refCount--,n.refCount===0&&Gj(Yj,function(){n.controller.abort()})}var oc=null,nm=0,ql=0,$l=null;function Wj(n,a){if(oc===null){var l=oc=[];nm=0,ql=rp(),$l={status:"pending",value:void 0,then:function(c){l.push(c)}}}return nm++,a.then(Mx,Mx),a}function Mx(){if(--nm===0&&oc!==null){$l!==null&&($l.status="fulfilled");var n=oc;oc=null,ql=0,$l=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function Kj(n,a){var l=[],c={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return n.then(function(){c.status="fulfilled",c.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(c.status="rejected",c.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),c}var Ox=I.S;I.S=function(n,a){by=_t(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Wj(n,a),Ox!==null&&Ox(n,a)};var Gi=P(null);function sm(){var n=Gi.current;return n!==null?n:qt.pooledCache}function ld(n,a){a===null?ue(Gi,Gi.current):ue(Gi,a.pool)}function Px(){var n=sm();return n===null?null:{parent:_n._currentValue,pool:n}}var Hl=Error(r(460)),am=Error(r(474)),od=Error(r(542)),cd={then:function(){}};function Vx(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Lx(n,a,l){switch(l=n[l],l===void 0?n.push(a):l!==a&&(a.then(ea,ea),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Bx(n),n;default:if(typeof a.status=="string")a.then(ea,ea);else{if(n=qt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=a,n.status="pending",n.then(function(c){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=c}},function(c){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,Bx(n),n}throw Wi=a,Hl}}function Yi(n){try{var a=n._init;return a(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Wi=l,Hl):l}}var Wi=null;function Ux(){if(Wi===null)throw Error(r(459));var n=Wi;return Wi=null,n}function Bx(n){if(n===Hl||n===od)throw Error(r(483))}var Gl=null,cc=0;function ud(n){var a=cc;return cc+=1,Gl===null&&(Gl=[]),Lx(Gl,n,a)}function uc(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function dd(n,a){throw a.$$typeof===j?Error(r(525)):(n=Object.prototype.toString.call(a),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function zx(n){function a(Q,Y){if(n){var ee=Q.deletions;ee===null?(Q.deletions=[Y],Q.flags|=16):ee.push(Y)}}function l(Q,Y){if(!n)return null;for(;Y!==null;)a(Q,Y),Y=Y.sibling;return null}function c(Q){for(var Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function f(Q,Y){return Q=Ka(Q,Y),Q.index=0,Q.sibling=null,Q}function m(Q,Y,ee){return Q.index=ee,n?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<Y?(Q.flags|=67108866,Y):ee):(Q.flags|=67108866,Y)):(Q.flags|=1048576,Y)}function v(Q){return n&&Q.alternate===null&&(Q.flags|=67108866),Q}function E(Q,Y,ee,fe){return Y===null||Y.tag!==6?(Y=Gf(ee,Q.mode,fe),Y.return=Q,Y):(Y=f(Y,ee),Y.return=Q,Y)}function z(Q,Y,ee,fe){var Fe=ee.type;return Fe===V?he(Q,Y,ee.props.children,fe,ee.key):Y!==null&&(Y.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===A&&Yi(Fe)===Y.type)?(Y=f(Y,ee.props),uc(Y,ee),Y.return=Q,Y):(Y=sd(ee.type,ee.key,ee.props,null,Q.mode,fe),uc(Y,ee),Y.return=Q,Y)}function te(Q,Y,ee,fe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ee.containerInfo||Y.stateNode.implementation!==ee.implementation?(Y=Yf(ee,Q.mode,fe),Y.return=Q,Y):(Y=f(Y,ee.children||[]),Y.return=Q,Y)}function he(Q,Y,ee,fe,Fe){return Y===null||Y.tag!==7?(Y=Fi(ee,Q.mode,fe,Fe),Y.return=Q,Y):(Y=f(Y,ee),Y.return=Q,Y)}function pe(Q,Y,ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Gf(""+Y,Q.mode,ee),Y.return=Q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case T:return ee=sd(Y.type,Y.key,Y.props,null,Q.mode,ee),uc(ee,Y),ee.return=Q,ee;case L:return Y=Yf(Y,Q.mode,ee),Y.return=Q,Y;case A:return Y=Yi(Y),pe(Q,Y,ee)}if(D(Y)||$(Y))return Y=Fi(Y,Q.mode,ee,null),Y.return=Q,Y;if(typeof Y.then=="function")return pe(Q,ud(Y),ee);if(Y.$$typeof===q)return pe(Q,id(Q,Y),ee);dd(Q,Y)}return null}function ne(Q,Y,ee,fe){var Fe=Y!==null?Y.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Fe!==null?null:E(Q,Y,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case T:return ee.key===Fe?z(Q,Y,ee,fe):null;case L:return ee.key===Fe?te(Q,Y,ee,fe):null;case A:return ee=Yi(ee),ne(Q,Y,ee,fe)}if(D(ee)||$(ee))return Fe!==null?null:he(Q,Y,ee,fe,null);if(typeof ee.then=="function")return ne(Q,Y,ud(ee),fe);if(ee.$$typeof===q)return ne(Q,Y,id(Q,ee),fe);dd(Q,ee)}return null}function le(Q,Y,ee,fe,Fe){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Q=Q.get(ee)||null,E(Y,Q,""+fe,Fe);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case T:return Q=Q.get(fe.key===null?ee:fe.key)||null,z(Y,Q,fe,Fe);case L:return Q=Q.get(fe.key===null?ee:fe.key)||null,te(Y,Q,fe,Fe);case A:return fe=Yi(fe),le(Q,Y,ee,fe,Fe)}if(D(fe)||$(fe))return Q=Q.get(ee)||null,he(Y,Q,fe,Fe,null);if(typeof fe.then=="function")return le(Q,Y,ee,ud(fe),Fe);if(fe.$$typeof===q)return le(Q,Y,ee,id(Y,fe),Fe);dd(Y,fe)}return null}function Oe(Q,Y,ee,fe){for(var Fe=null,St=null,Le=Y,lt=Y=0,pt=null;Le!==null&&lt<ee.length;lt++){Le.index>lt?(pt=Le,Le=null):pt=Le.sibling;var Et=ne(Q,Le,ee[lt],fe);if(Et===null){Le===null&&(Le=pt);break}n&&Le&&Et.alternate===null&&a(Q,Le),Y=m(Et,Y,lt),St===null?Fe=Et:St.sibling=Et,St=Et,Le=pt}if(lt===ee.length)return l(Q,Le),vt&&Qa(Q,lt),Fe;if(Le===null){for(;lt<ee.length;lt++)Le=pe(Q,ee[lt],fe),Le!==null&&(Y=m(Le,Y,lt),St===null?Fe=Le:St.sibling=Le,St=Le);return vt&&Qa(Q,lt),Fe}for(Le=c(Le);lt<ee.length;lt++)pt=le(Le,Q,lt,ee[lt],fe),pt!==null&&(n&&pt.alternate!==null&&Le.delete(pt.key===null?lt:pt.key),Y=m(pt,Y,lt),St===null?Fe=pt:St.sibling=pt,St=pt);return n&&Le.forEach(function(ei){return a(Q,ei)}),vt&&Qa(Q,lt),Fe}function Ge(Q,Y,ee,fe){if(ee==null)throw Error(r(151));for(var Fe=null,St=null,Le=Y,lt=Y=0,pt=null,Et=ee.next();Le!==null&&!Et.done;lt++,Et=ee.next()){Le.index>lt?(pt=Le,Le=null):pt=Le.sibling;var ei=ne(Q,Le,Et.value,fe);if(ei===null){Le===null&&(Le=pt);break}n&&Le&&ei.alternate===null&&a(Q,Le),Y=m(ei,Y,lt),St===null?Fe=ei:St.sibling=ei,St=ei,Le=pt}if(Et.done)return l(Q,Le),vt&&Qa(Q,lt),Fe;if(Le===null){for(;!Et.done;lt++,Et=ee.next())Et=pe(Q,Et.value,fe),Et!==null&&(Y=m(Et,Y,lt),St===null?Fe=Et:St.sibling=Et,St=Et);return vt&&Qa(Q,lt),Fe}for(Le=c(Le);!Et.done;lt++,Et=ee.next())Et=le(Le,Q,lt,Et.value,fe),Et!==null&&(n&&Et.alternate!==null&&Le.delete(Et.key===null?lt:Et.key),Y=m(Et,Y,lt),St===null?Fe=Et:St.sibling=Et,St=Et);return n&&Le.forEach(function(iE){return a(Q,iE)}),vt&&Qa(Q,lt),Fe}function zt(Q,Y,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===V&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case T:e:{for(var Fe=ee.key;Y!==null;){if(Y.key===Fe){if(Fe=ee.type,Fe===V){if(Y.tag===7){l(Q,Y.sibling),fe=f(Y,ee.props.children),fe.return=Q,Q=fe;break e}}else if(Y.elementType===Fe||typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===A&&Yi(Fe)===Y.type){l(Q,Y.sibling),fe=f(Y,ee.props),uc(fe,ee),fe.return=Q,Q=fe;break e}l(Q,Y);break}else a(Q,Y);Y=Y.sibling}ee.type===V?(fe=Fi(ee.props.children,Q.mode,fe,ee.key),fe.return=Q,Q=fe):(fe=sd(ee.type,ee.key,ee.props,null,Q.mode,fe),uc(fe,ee),fe.return=Q,Q=fe)}return v(Q);case L:e:{for(Fe=ee.key;Y!==null;){if(Y.key===Fe)if(Y.tag===4&&Y.stateNode.containerInfo===ee.containerInfo&&Y.stateNode.implementation===ee.implementation){l(Q,Y.sibling),fe=f(Y,ee.children||[]),fe.return=Q,Q=fe;break e}else{l(Q,Y);break}else a(Q,Y);Y=Y.sibling}fe=Yf(ee,Q.mode,fe),fe.return=Q,Q=fe}return v(Q);case A:return ee=Yi(ee),zt(Q,Y,ee,fe)}if(D(ee))return Oe(Q,Y,ee,fe);if($(ee)){if(Fe=$(ee),typeof Fe!="function")throw Error(r(150));return ee=Fe.call(ee),Ge(Q,Y,ee,fe)}if(typeof ee.then=="function")return zt(Q,Y,ud(ee),fe);if(ee.$$typeof===q)return zt(Q,Y,id(Q,ee),fe);dd(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,Y!==null&&Y.tag===6?(l(Q,Y.sibling),fe=f(Y,ee),fe.return=Q,Q=fe):(l(Q,Y),fe=Gf(ee,Q.mode,fe),fe.return=Q,Q=fe),v(Q)):l(Q,Y)}return function(Q,Y,ee,fe){try{cc=0;var Fe=zt(Q,Y,ee,fe);return Gl=null,Fe}catch(Le){if(Le===Hl||Le===od)throw Le;var St=Ss(29,Le,null,Q.mode);return St.lanes=fe,St.return=Q,St}}}var Ki=zx(!0),Fx=zx(!1),Vr=!1;function rm(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function im(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Lr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ur(n,a,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ct&2)!==0){var f=c.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),c.pending=a,a=nd(n),Sx(n,null,l),a}return td(n,c,a,l),nd(n)}function dc(n,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var c=a.lanes;c&=n.pendingLanes,l|=c,a.lanes=l,Zs(n,l)}}function lm(n,a){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var v={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,l=l.next}while(l!==null);m===null?f=m=a:m=m.next=a}else f=m=a;l={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=a:n.next=a,l.lastBaseUpdate=a}var om=!1;function hc(){if(om){var n=$l;if(n!==null)throw n}}function fc(n,a,l,c){om=!1;var f=n.updateQueue;Vr=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var z=E,te=z.next;z.next=null,v===null?m=te:v.next=te,v=z;var he=n.alternate;he!==null&&(he=he.updateQueue,E=he.lastBaseUpdate,E!==v&&(E===null?he.firstBaseUpdate=te:E.next=te,he.lastBaseUpdate=z))}if(m!==null){var pe=f.baseState;v=0,he=te=z=null,E=m;do{var ne=E.lane&-536870913,le=ne!==E.lane;if(le?(mt&ne)===ne:(c&ne)===ne){ne!==0&&ne===ql&&(om=!0),he!==null&&(he=he.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Oe=n,Ge=E;ne=a;var zt=l;switch(Ge.tag){case 1:if(Oe=Ge.payload,typeof Oe=="function"){pe=Oe.call(zt,pe,ne);break e}pe=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ge.payload,ne=typeof Oe=="function"?Oe.call(zt,pe,ne):Oe,ne==null)break e;pe=w({},pe,ne);break e;case 2:Vr=!0}}ne=E.callback,ne!==null&&(n.flags|=64,le&&(n.flags|=8192),le=f.callbacks,le===null?f.callbacks=[ne]:le.push(ne))}else le={lane:ne,tag:E.tag,payload:E.payload,callback:E.callback,next:null},he===null?(te=he=le,z=pe):he=he.next=le,v|=ne;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;le=E,E=le.next,le.next=null,f.lastBaseUpdate=le,f.shared.pending=null}}while(!0);he===null&&(z=pe),f.baseState=z,f.firstBaseUpdate=te,f.lastBaseUpdate=he,m===null&&(f.shared.lanes=0),$r|=v,n.lanes=v,n.memoizedState=pe}}function qx(n,a){if(typeof n!="function")throw Error(r(191,n));n.call(a)}function $x(n,a){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)qx(l[n],a)}var Yl=P(null),hd=P(0);function Hx(n,a){n=lr,ue(hd,n),ue(Yl,a),lr=n|a.baseLanes}function cm(){ue(hd,lr),ue(Yl,Yl.current)}function um(){lr=hd.current,Z(Yl),Z(hd)}var Es=P(null),Gs=null;function Br(n){var a=n.alternate;ue(pn,pn.current&1),ue(Es,n),Gs===null&&(a===null||Yl.current!==null||a.memoizedState!==null)&&(Gs=n)}function dm(n){ue(pn,pn.current),ue(Es,n),Gs===null&&(Gs=n)}function Gx(n){n.tag===22?(ue(pn,pn.current),ue(Es,n),Gs===null&&(Gs=n)):zr()}function zr(){ue(pn,pn.current),ue(Es,Es.current)}function Ts(n){Z(Es),Gs===n&&(Gs=null),Z(pn)}var pn=P(0);function fd(n){for(var a=n;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||xp(l)||bp(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Za=0,rt=null,Ut=null,Nn=null,md=!1,Wl=!1,Qi=!1,pd=0,mc=0,Kl=null,Qj=0;function ln(){throw Error(r(321))}function hm(n,a){if(a===null)return!1;for(var l=0;l<a.length&&l<n.length;l++)if(!js(n[l],a[l]))return!1;return!0}function fm(n,a,l,c,f,m){return Za=m,rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,I.H=n===null||n.memoizedState===null?Cb:Am,Qi=!1,m=l(c,f),Qi=!1,Wl&&(m=Wx(a,l,c,f)),Yx(n),m}function Yx(n){I.H=xc;var a=Ut!==null&&Ut.next!==null;if(Za=0,Nn=Ut=rt=null,md=!1,mc=0,Kl=null,a)throw Error(r(300));n===null||jn||(n=n.dependencies,n!==null&&rd(n)&&(jn=!0))}function Wx(n,a,l,c){rt=n;var f=0;do{if(Wl&&(Kl=null),mc=0,Wl=!1,25<=f)throw Error(r(301));if(f+=1,Nn=Ut=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}I.H=kb,m=a(l,c)}while(Wl);return m}function Xj(){var n=I.H,a=n.useState()[0];return a=typeof a.then=="function"?pc(a):a,n=n.useState()[0],(Ut!==null?Ut.memoizedState:null)!==n&&(rt.flags|=1024),a}function mm(){var n=pd!==0;return pd=0,n}function pm(n,a,l){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~l}function gm(n){if(md){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}md=!1}Za=0,Nn=Ut=rt=null,Wl=!1,mc=pd=0,Kl=null}function Zn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?rt.memoizedState=Nn=n:Nn=Nn.next=n,Nn}function gn(){if(Ut===null){var n=rt.alternate;n=n!==null?n.memoizedState:null}else n=Ut.next;var a=Nn===null?rt.memoizedState:Nn.next;if(a!==null)Nn=a,Ut=n;else{if(n===null)throw rt.alternate===null?Error(r(467)):Error(r(310));Ut=n,n={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Nn===null?rt.memoizedState=Nn=n:Nn=Nn.next=n}return Nn}function gd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(n){var a=mc;return mc+=1,Kl===null&&(Kl=[]),n=Lx(Kl,n,a),a=rt,(Nn===null?a.memoizedState:Nn.next)===null&&(a=a.alternate,I.H=a===null||a.memoizedState===null?Cb:Am),n}function xd(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return pc(n);if(n.$$typeof===q)return Vn(n)}throw Error(r(438,String(n)))}function xm(n){var a=null,l=rt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var c=rt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=gd(),rt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(n),c=0;c<n;c++)l[c]=B;return a.index++,l}function er(n,a){return typeof a=="function"?a(n):a}function bd(n){var a=gn();return bm(a,Ut,n)}function bm(n,a,l){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=l;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}a.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{a=f.next;var E=v=null,z=null,te=a,he=!1;do{var pe=te.lane&-536870913;if(pe!==te.lane?(mt&pe)===pe:(Za&pe)===pe){var ne=te.revertLane;if(ne===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),pe===ql&&(he=!0);else if((Za&ne)===ne){te=te.next,ne===ql&&(he=!0);continue}else pe={lane:0,revertLane:te.revertLane,gesture:null,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},z===null?(E=z=pe,v=m):z=z.next=pe,rt.lanes|=ne,$r|=ne;pe=te.action,Qi&&l(m,pe),m=te.hasEagerState?te.eagerState:l(m,pe)}else ne={lane:pe,revertLane:te.revertLane,gesture:te.gesture,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},z===null?(E=z=ne,v=m):z=z.next=ne,rt.lanes|=pe,$r|=pe;te=te.next}while(te!==null&&te!==a);if(z===null?v=m:z.next=E,!js(m,n.memoizedState)&&(jn=!0,he&&(l=$l,l!==null)))throw l;n.memoizedState=m,n.baseState=v,n.baseQueue=z,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function ym(n){var a=gn(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=n;var c=l.dispatch,f=l.pending,m=a.memoizedState;if(f!==null){l.pending=null;var v=f=f.next;do m=n(m,v.action),v=v.next;while(v!==f);js(m,a.memoizedState)||(jn=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),l.lastRenderedState=m}return[m,c]}function Kx(n,a,l){var c=rt,f=gn(),m=vt;if(m){if(l===void 0)throw Error(r(407));l=l()}else l=a();var v=!js((Ut||f).memoizedState,l);if(v&&(f.memoizedState=l,jn=!0),f=f.queue,_m(Jx.bind(null,c,f,n),[n]),f.getSnapshot!==a||v||Nn!==null&&Nn.memoizedState.tag&1){if(c.flags|=2048,Ql(9,{destroy:void 0},Xx.bind(null,c,f,l,a),null),qt===null)throw Error(r(349));m||(Za&127)!==0||Qx(c,a,l)}return l}function Qx(n,a,l){n.flags|=16384,n={getSnapshot:a,value:l},a=rt.updateQueue,a===null?(a=gd(),rt.updateQueue=a,a.stores=[n]):(l=a.stores,l===null?a.stores=[n]:l.push(n))}function Xx(n,a,l,c){a.value=l,a.getSnapshot=c,Zx(a)&&eb(n)}function Jx(n,a,l){return l(function(){Zx(a)&&eb(n)})}function Zx(n){var a=n.getSnapshot;n=n.value;try{var l=a();return!js(n,l)}catch{return!0}}function eb(n){var a=zi(n,2);a!==null&&ds(a,n,2)}function vm(n){var a=Zn();if(typeof n=="function"){var l=n;if(n=l(),Qi){Ne(!0);try{l()}finally{Ne(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:n},a}function tb(n,a,l,c){return n.baseState=l,bm(n,Ut,typeof c=="function"?c:er)}function Jj(n,a,l,c,f){if(wd(n))throw Error(r(485));if(n=a.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};I.T!==null?l(!0):m.isTransition=!1,c(m),l=a.pending,l===null?(m.next=a.pending=m,nb(a,m)):(m.next=l.next,a.pending=l.next=m)}}function nb(n,a){var l=a.action,c=a.payload,f=n.state;if(a.isTransition){var m=I.T,v={};I.T=v;try{var E=l(f,c),z=I.S;z!==null&&z(v,E),sb(n,a,E)}catch(te){wm(n,a,te)}finally{m!==null&&v.types!==null&&(m.types=v.types),I.T=m}}else try{m=l(f,c),sb(n,a,m)}catch(te){wm(n,a,te)}}function sb(n,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){ab(n,a,c)},function(c){return wm(n,a,c)}):ab(n,a,l)}function ab(n,a,l){a.status="fulfilled",a.value=l,rb(a),n.state=l,a=n.pending,a!==null&&(l=a.next,l===a?n.pending=null:(l=l.next,a.next=l,nb(n,l)))}function wm(n,a,l){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=l,rb(a),a=a.next;while(a!==c)}n.action=null}function rb(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function ib(n,a){return a}function lb(n,a){if(vt){var l=qt.formState;if(l!==null){e:{var c=rt;if(vt){if(Wt){t:{for(var f=Wt,m=Hs;f.nodeType!==8;){if(!m){f=null;break t}if(f=Ys(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Wt=Ys(f.nextSibling),c=f.data==="F!";break e}}Or(c)}c=!1}c&&(a=l[0])}}return l=Zn(),l.memoizedState=l.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ib,lastRenderedState:a},l.queue=c,l=Eb.bind(null,rt,c),c.dispatch=l,c=vm(!1),m=Tm.bind(null,rt,!1,c.queue),c=Zn(),f={state:a,dispatch:null,action:n,pending:null},c.queue=f,l=Jj.bind(null,rt,f,m,l),f.dispatch=l,c.memoizedState=n,[a,l,!1]}function ob(n){var a=gn();return cb(a,Ut,n)}function cb(n,a,l){if(a=bm(n,a,ib)[0],n=bd(er)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var c=pc(a)}catch(v){throw v===Hl?od:v}else c=a;a=gn();var f=a.queue,m=f.dispatch;return l!==a.memoizedState&&(rt.flags|=2048,Ql(9,{destroy:void 0},Zj.bind(null,f,l),null)),[c,m,n]}function Zj(n,a){n.action=a}function ub(n){var a=gn(),l=Ut;if(l!==null)return cb(a,l,n);gn(),a=a.memoizedState,l=gn();var c=l.queue.dispatch;return l.memoizedState=n,[a,c,!1]}function Ql(n,a,l,c){return n={tag:n,create:l,deps:c,inst:a,next:null},a=rt.updateQueue,a===null&&(a=gd(),rt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,a.lastEffect=n),n}function db(){return gn().memoizedState}function yd(n,a,l,c){var f=Zn();rt.flags|=n,f.memoizedState=Ql(1|a,{destroy:void 0},l,c===void 0?null:c)}function vd(n,a,l,c){var f=gn();c=c===void 0?null:c;var m=f.memoizedState.inst;Ut!==null&&c!==null&&hm(c,Ut.memoizedState.deps)?f.memoizedState=Ql(a,m,l,c):(rt.flags|=n,f.memoizedState=Ql(1|a,m,l,c))}function hb(n,a){yd(8390656,8,n,a)}function _m(n,a){vd(2048,8,n,a)}function eS(n){rt.flags|=4;var a=rt.updateQueue;if(a===null)a=gd(),rt.updateQueue=a,a.events=[n];else{var l=a.events;l===null?a.events=[n]:l.push(n)}}function fb(n){var a=gn().memoizedState;return eS({ref:a,nextImpl:n}),function(){if((Ct&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function mb(n,a){return vd(4,2,n,a)}function pb(n,a){return vd(4,4,n,a)}function gb(n,a){if(typeof a=="function"){n=n();var l=a(n);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function xb(n,a,l){l=l!=null?l.concat([n]):null,vd(4,4,gb.bind(null,a,n),l)}function Nm(){}function bb(n,a){var l=gn();a=a===void 0?null:a;var c=l.memoizedState;return a!==null&&hm(a,c[1])?c[0]:(l.memoizedState=[n,a],n)}function yb(n,a){var l=gn();a=a===void 0?null:a;var c=l.memoizedState;if(a!==null&&hm(a,c[1]))return c[0];if(c=n(),Qi){Ne(!0);try{n()}finally{Ne(!1)}}return l.memoizedState=[c,a],c}function jm(n,a,l){return l===void 0||(Za&1073741824)!==0&&(mt&261930)===0?n.memoizedState=a:(n.memoizedState=l,n=vy(),rt.lanes|=n,$r|=n,l)}function vb(n,a,l,c){return js(l,a)?l:Yl.current!==null?(n=jm(n,l,c),js(n,a)||(jn=!0),n):(Za&42)===0||(Za&1073741824)!==0&&(mt&261930)===0?(jn=!0,n.memoizedState=l):(n=vy(),rt.lanes|=n,$r|=n,a)}function wb(n,a,l,c,f){var m=K.p;K.p=m!==0&&8>m?m:8;var v=I.T,E={};I.T=E,Tm(n,!1,a,l);try{var z=f(),te=I.S;if(te!==null&&te(E,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var he=Kj(z,c);gc(n,a,he,ks(n))}else gc(n,a,c,ks(n))}catch(pe){gc(n,a,{then:function(){},status:"rejected",reason:pe},ks())}finally{K.p=m,v!==null&&E.types!==null&&(v.types=E.types),I.T=v}}function tS(){}function Sm(n,a,l,c){if(n.tag!==5)throw Error(r(476));var f=_b(n).queue;wb(n,f,a,oe,l===null?tS:function(){return Nb(n),l(c)})}function _b(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:oe},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:l},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Nb(n){var a=_b(n);a.next===null&&(a=n.alternate.memoizedState),gc(n,a.next.queue,{},ks())}function Em(){return Vn(Dc)}function jb(){return gn().memoizedState}function Sb(){return gn().memoizedState}function nS(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var l=ks();n=Lr(l);var c=Ur(a,n,l);c!==null&&(ds(c,a,l),dc(c,a,l)),a={cache:tm()},n.payload=a;return}a=a.return}}function sS(n,a,l){var c=ks();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},wd(n)?Tb(a,l):(l=$f(n,a,l,c),l!==null&&(ds(l,n,c),Ab(l,a,c)))}function Eb(n,a,l){var c=ks();gc(n,a,l,c)}function gc(n,a,l,c){var f={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(wd(n))Tb(a,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var v=a.lastRenderedState,E=m(v,l);if(f.hasEagerState=!0,f.eagerState=E,js(E,v))return td(n,a,f,0),qt===null&&ed(),!1}catch{}if(l=$f(n,a,f,c),l!==null)return ds(l,n,c),Ab(l,a,c),!0}return!1}function Tm(n,a,l,c){if(c={lane:2,revertLane:rp(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},wd(n)){if(a)throw Error(r(479))}else a=$f(n,l,c,2),a!==null&&ds(a,n,2)}function wd(n){var a=n.alternate;return n===rt||a!==null&&a===rt}function Tb(n,a){Wl=md=!0;var l=n.pending;l===null?a.next=a:(a.next=l.next,l.next=a),n.pending=a}function Ab(n,a,l){if((l&4194048)!==0){var c=a.lanes;c&=n.pendingLanes,l|=c,a.lanes=l,Zs(n,l)}}var xc={readContext:Vn,use:xd,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};xc.useEffectEvent=ln;var Cb={readContext:Vn,use:xd,useCallback:function(n,a){return Zn().memoizedState=[n,a===void 0?null:a],n},useContext:Vn,useEffect:hb,useImperativeHandle:function(n,a,l){l=l!=null?l.concat([n]):null,yd(4194308,4,gb.bind(null,a,n),l)},useLayoutEffect:function(n,a){return yd(4194308,4,n,a)},useInsertionEffect:function(n,a){yd(4,2,n,a)},useMemo:function(n,a){var l=Zn();a=a===void 0?null:a;var c=n();if(Qi){Ne(!0);try{n()}finally{Ne(!1)}}return l.memoizedState=[c,a],c},useReducer:function(n,a,l){var c=Zn();if(l!==void 0){var f=l(a);if(Qi){Ne(!0);try{l(a)}finally{Ne(!1)}}}else f=a;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=sS.bind(null,rt,n),[c.memoizedState,n]},useRef:function(n){var a=Zn();return n={current:n},a.memoizedState=n},useState:function(n){n=vm(n);var a=n.queue,l=Eb.bind(null,rt,a);return a.dispatch=l,[n.memoizedState,l]},useDebugValue:Nm,useDeferredValue:function(n,a){var l=Zn();return jm(l,n,a)},useTransition:function(){var n=vm(!1);return n=wb.bind(null,rt,n.queue,!0,!1),Zn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,l){var c=rt,f=Zn();if(vt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),qt===null)throw Error(r(349));(mt&127)!==0||Qx(c,a,l)}f.memoizedState=l;var m={value:l,getSnapshot:a};return f.queue=m,hb(Jx.bind(null,c,m,n),[n]),c.flags|=2048,Ql(9,{destroy:void 0},Xx.bind(null,c,m,l,a),null),l},useId:function(){var n=Zn(),a=qt.identifierPrefix;if(vt){var l=Ca,c=Aa;l=(c&~(1<<32-we(c)-1)).toString(32)+l,a="_"+a+"R_"+l,l=pd++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=Qj++,a="_"+a+"r_"+l.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:Em,useFormState:lb,useActionState:lb,useOptimistic:function(n){var a=Zn();a.memoizedState=a.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Tm.bind(null,rt,!0,l),l.dispatch=a,[n,a]},useMemoCache:xm,useCacheRefresh:function(){return Zn().memoizedState=nS.bind(null,rt)},useEffectEvent:function(n){var a=Zn(),l={impl:n};return a.memoizedState=l,function(){if((Ct&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},Am={readContext:Vn,use:xd,useCallback:bb,useContext:Vn,useEffect:_m,useImperativeHandle:xb,useInsertionEffect:mb,useLayoutEffect:pb,useMemo:yb,useReducer:bd,useRef:db,useState:function(){return bd(er)},useDebugValue:Nm,useDeferredValue:function(n,a){var l=gn();return vb(l,Ut.memoizedState,n,a)},useTransition:function(){var n=bd(er)[0],a=gn().memoizedState;return[typeof n=="boolean"?n:pc(n),a]},useSyncExternalStore:Kx,useId:jb,useHostTransitionStatus:Em,useFormState:ob,useActionState:ob,useOptimistic:function(n,a){var l=gn();return tb(l,Ut,n,a)},useMemoCache:xm,useCacheRefresh:Sb};Am.useEffectEvent=fb;var kb={readContext:Vn,use:xd,useCallback:bb,useContext:Vn,useEffect:_m,useImperativeHandle:xb,useInsertionEffect:mb,useLayoutEffect:pb,useMemo:yb,useReducer:ym,useRef:db,useState:function(){return ym(er)},useDebugValue:Nm,useDeferredValue:function(n,a){var l=gn();return Ut===null?jm(l,n,a):vb(l,Ut.memoizedState,n,a)},useTransition:function(){var n=ym(er)[0],a=gn().memoizedState;return[typeof n=="boolean"?n:pc(n),a]},useSyncExternalStore:Kx,useId:jb,useHostTransitionStatus:Em,useFormState:ub,useActionState:ub,useOptimistic:function(n,a){var l=gn();return Ut!==null?tb(l,Ut,n,a):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:xm,useCacheRefresh:Sb};kb.useEffectEvent=fb;function Cm(n,a,l,c){a=n.memoizedState,l=l(c,a),l=l==null?a:w({},a,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var km={enqueueSetState:function(n,a,l){n=n._reactInternals;var c=ks(),f=Lr(c);f.payload=a,l!=null&&(f.callback=l),a=Ur(n,f,c),a!==null&&(ds(a,n,c),dc(a,n,c))},enqueueReplaceState:function(n,a,l){n=n._reactInternals;var c=ks(),f=Lr(c);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=Ur(n,f,c),a!==null&&(ds(a,n,c),dc(a,n,c))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var l=ks(),c=Lr(l);c.tag=2,a!=null&&(c.callback=a),a=Ur(n,c,l),a!==null&&(ds(a,n,l),dc(a,n,l))}};function Rb(n,a,l,c,f,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):a.prototype&&a.prototype.isPureReactComponent?!sc(l,c)||!sc(f,m):!0}function Ib(n,a,l,c){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,c),a.state!==n&&km.enqueueReplaceState(a,a.state,null)}function Xi(n,a){var l=a;if("ref"in a){l={};for(var c in a)c!=="ref"&&(l[c]=a[c])}if(n=n.defaultProps){l===a&&(l=w({},l));for(var f in n)l[f]===void 0&&(l[f]=n[f])}return l}function Db(n){Zu(n)}function Mb(n){console.error(n)}function Ob(n){Zu(n)}function _d(n,a){try{var l=n.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function Pb(n,a,l){try{var c=n.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Rm(n,a,l){return l=Lr(l),l.tag=3,l.payload={element:null},l.callback=function(){_d(n,a)},l}function Vb(n){return n=Lr(n),n.tag=3,n}function Lb(n,a,l,c){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Pb(a,l,c)}}var v=l.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){Pb(a,l,c),typeof f!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function aS(n,a,l,c,f){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=l.alternate,a!==null&&Fl(a,l,f,!0),l=Es.current,l!==null){switch(l.tag){case 31:case 13:return Gs===null?Md():l.alternate===null&&on===0&&(on=3),l.flags&=-257,l.flags|=65536,l.lanes=f,c===cd?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([c]):a.add(c),np(n,c,f)),!1;case 22:return l.flags|=65536,c===cd?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([c]):l.add(c)),np(n,c,f)),!1}throw Error(r(435,l.tag))}return np(n,c,f),Md(),!1}if(vt)return a=Es.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,c!==Qf&&(n=Error(r(422),{cause:c}),ic(Fs(n,l)))):(c!==Qf&&(a=Error(r(423),{cause:c}),ic(Fs(a,l))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Fs(c,l),f=Rm(n.stateNode,c,f),lm(n,f),on!==4&&(on=2)),!1;var m=Error(r(520),{cause:c});if(m=Fs(m,l),Sc===null?Sc=[m]:Sc.push(m),on!==4&&(on=2),a===null)return!0;c=Fs(c,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,n=f&-f,l.lanes|=n,n=Rm(l.stateNode,c,n),lm(l,n),!1;case 1:if(a=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Hr===null||!Hr.has(m))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Vb(f),Lb(f,n,l,c),lm(l,f),!1}l=l.return}while(l!==null);return!1}var Im=Error(r(461)),jn=!1;function Ln(n,a,l,c){a.child=n===null?Fx(a,null,l,c):Ki(a,n.child,l,c)}function Ub(n,a,l,c,f){l=l.render;var m=a.ref;if("ref"in c){var v={};for(var E in c)E!=="ref"&&(v[E]=c[E])}else v=c;return Hi(a),c=fm(n,a,l,v,m,f),E=mm(),n!==null&&!jn?(pm(n,a,f),tr(n,a,f)):(vt&&E&&Wf(a),a.flags|=1,Ln(n,a,c,f),a.child)}function Bb(n,a,l,c,f){if(n===null){var m=l.type;return typeof m=="function"&&!Hf(m)&&m.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=m,zb(n,a,m,c,f)):(n=sd(l.type,null,c,a,a.mode,f),n.ref=a.ref,n.return=a,a.child=n)}if(m=n.child,!Bm(n,f)){var v=m.memoizedProps;if(l=l.compare,l=l!==null?l:sc,l(v,c)&&n.ref===a.ref)return tr(n,a,f)}return a.flags|=1,n=Ka(m,c),n.ref=a.ref,n.return=a,a.child=n}function zb(n,a,l,c,f){if(n!==null){var m=n.memoizedProps;if(sc(m,c)&&n.ref===a.ref)if(jn=!1,a.pendingProps=c=m,Bm(n,f))(n.flags&131072)!==0&&(jn=!0);else return a.lanes=n.lanes,tr(n,a,f)}return Dm(n,a,l,c,f)}function Fb(n,a,l,c){var f=c.children,m=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((a.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,n!==null){for(c=a.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,a.child=null;return qb(n,a,m,l,c)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&ld(a,m!==null?m.cachePool:null),m!==null?Hx(a,m):cm(),Gx(a);else return c=a.lanes=536870912,qb(n,a,m!==null?m.baseLanes|l:l,l,c)}else m!==null?(ld(a,m.cachePool),Hx(a,m),zr(),a.memoizedState=null):(n!==null&&ld(a,null),cm(),zr());return Ln(n,a,f,l),a.child}function bc(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function qb(n,a,l,c,f){var m=sm();return m=m===null?null:{parent:_n._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},n!==null&&ld(a,null),cm(),Gx(a),n!==null&&Fl(n,a,c,!0),a.childLanes=f,null}function Nd(n,a){return a=Sd({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function $b(n,a,l){return Ki(a,n.child,null,l),n=Nd(a,a.pendingProps),n.flags|=2,Ts(a),a.memoizedState=null,n}function rS(n,a,l){var c=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(vt){if(c.mode==="hidden")return n=Nd(a,c),a.lanes=536870912,bc(null,n);if(dm(a),(n=Wt)?(n=nv(n,Hs),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Dr!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},l=Tx(n),l.return=a,a.child=l,Pn=a,Wt=null)):n=null,n===null)throw Or(a);return a.lanes=536870912,null}return Nd(a,c)}var m=n.memoizedState;if(m!==null){var v=m.dehydrated;if(dm(a),f)if(a.flags&256)a.flags&=-257,a=$b(n,a,l);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(r(558));else if(jn||Fl(n,a,l,!1),f=(l&n.childLanes)!==0,jn||f){if(c=qt,c!==null&&(v=Ti(c,l),v!==0&&v!==m.retryLane))throw m.retryLane=v,zi(n,v),ds(c,n,v),Im;Md(),a=$b(n,a,l)}else n=m.treeContext,Wt=Ys(v.nextSibling),Pn=a,vt=!0,Mr=null,Hs=!1,n!==null&&kx(a,n),a=Nd(a,c),a.flags|=4096;return a}return n=Ka(n.child,{mode:c.mode,children:c.children}),n.ref=a.ref,a.child=n,n.return=a,n}function jd(n,a){var l=a.ref;if(l===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(n===null||n.ref!==l)&&(a.flags|=4194816)}}function Dm(n,a,l,c,f){return Hi(a),l=fm(n,a,l,c,void 0,f),c=mm(),n!==null&&!jn?(pm(n,a,f),tr(n,a,f)):(vt&&c&&Wf(a),a.flags|=1,Ln(n,a,l,f),a.child)}function Hb(n,a,l,c,f,m){return Hi(a),a.updateQueue=null,l=Wx(a,c,l,f),Yx(n),c=mm(),n!==null&&!jn?(pm(n,a,m),tr(n,a,m)):(vt&&c&&Wf(a),a.flags|=1,Ln(n,a,l,m),a.child)}function Gb(n,a,l,c,f){if(Hi(a),a.stateNode===null){var m=Ll,v=l.contextType;typeof v=="object"&&v!==null&&(m=Vn(v)),m=new l(c,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=km,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=c,m.state=a.memoizedState,m.refs={},rm(a),v=l.contextType,m.context=typeof v=="object"&&v!==null?Vn(v):Ll,m.state=a.memoizedState,v=l.getDerivedStateFromProps,typeof v=="function"&&(Cm(a,l,v,c),m.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&km.enqueueReplaceState(m,m.state,null),fc(a,c,m,f),hc(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(n===null){m=a.stateNode;var E=a.memoizedProps,z=Xi(l,E);m.props=z;var te=m.context,he=l.contextType;v=Ll,typeof he=="object"&&he!==null&&(v=Vn(he));var pe=l.getDerivedStateFromProps;he=typeof pe=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,he||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||te!==v)&&Ib(a,m,c,v),Vr=!1;var ne=a.memoizedState;m.state=ne,fc(a,c,m,f),hc(),te=a.memoizedState,E||ne!==te||Vr?(typeof pe=="function"&&(Cm(a,l,pe,c),te=a.memoizedState),(z=Vr||Rb(a,l,z,c,ne,te,v))?(he||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=te),m.props=c,m.state=te,m.context=v,c=z):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{m=a.stateNode,im(n,a),v=a.memoizedProps,he=Xi(l,v),m.props=he,pe=a.pendingProps,ne=m.context,te=l.contextType,z=Ll,typeof te=="object"&&te!==null&&(z=Vn(te)),E=l.getDerivedStateFromProps,(te=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==pe||ne!==z)&&Ib(a,m,c,z),Vr=!1,ne=a.memoizedState,m.state=ne,fc(a,c,m,f),hc();var le=a.memoizedState;v!==pe||ne!==le||Vr||n!==null&&n.dependencies!==null&&rd(n.dependencies)?(typeof E=="function"&&(Cm(a,l,E,c),le=a.memoizedState),(he=Vr||Rb(a,l,he,c,ne,le,z)||n!==null&&n.dependencies!==null&&rd(n.dependencies))?(te||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,le,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,le,z)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&ne===n.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&ne===n.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=le),m.props=c,m.state=le,m.context=z,c=he):(typeof m.componentDidUpdate!="function"||v===n.memoizedProps&&ne===n.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&ne===n.memoizedState||(a.flags|=1024),c=!1)}return m=c,jd(n,a),c=(a.flags&128)!==0,m||c?(m=a.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,n!==null&&c?(a.child=Ki(a,n.child,null,f),a.child=Ki(a,null,l,f)):Ln(n,a,l,f),a.memoizedState=m.state,n=a.child):n=tr(n,a,f),n}function Yb(n,a,l,c){return qi(),a.flags|=256,Ln(n,a,l,c),a.child}var Mm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Om(n){return{baseLanes:n,cachePool:Px()}}function Pm(n,a,l){return n=n!==null?n.childLanes&~l:0,a&&(n|=Cs),n}function Wb(n,a,l){var c=a.pendingProps,f=!1,m=(a.flags&128)!==0,v;if((v=m)||(v=n!==null&&n.memoizedState===null?!1:(pn.current&2)!==0),v&&(f=!0,a.flags&=-129),v=(a.flags&32)!==0,a.flags&=-33,n===null){if(vt){if(f?Br(a):zr(),(n=Wt)?(n=nv(n,Hs),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:Dr!==null?{id:Aa,overflow:Ca}:null,retryLane:536870912,hydrationErrors:null},l=Tx(n),l.return=a,a.child=l,Pn=a,Wt=null)):n=null,n===null)throw Or(a);return bp(n)?a.lanes=32:a.lanes=536870912,null}var E=c.children;return c=c.fallback,f?(zr(),f=a.mode,E=Sd({mode:"hidden",children:E},f),c=Fi(c,f,l,null),E.return=a,c.return=a,E.sibling=c,a.child=E,c=a.child,c.memoizedState=Om(l),c.childLanes=Pm(n,v,l),a.memoizedState=Mm,bc(null,c)):(Br(a),Vm(a,E))}var z=n.memoizedState;if(z!==null&&(E=z.dehydrated,E!==null)){if(m)a.flags&256?(Br(a),a.flags&=-257,a=Lm(n,a,l)):a.memoizedState!==null?(zr(),a.child=n.child,a.flags|=128,a=null):(zr(),E=c.fallback,f=a.mode,c=Sd({mode:"visible",children:c.children},f),E=Fi(E,f,l,null),E.flags|=2,c.return=a,E.return=a,c.sibling=E,a.child=c,Ki(a,n.child,null,l),c=a.child,c.memoizedState=Om(l),c.childLanes=Pm(n,v,l),a.memoizedState=Mm,a=bc(null,c));else if(Br(a),bp(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var te=v.dgst;v=te,c=Error(r(419)),c.stack="",c.digest=v,ic({value:c,source:null,stack:null}),a=Lm(n,a,l)}else if(jn||Fl(n,a,l,!1),v=(l&n.childLanes)!==0,jn||v){if(v=qt,v!==null&&(c=Ti(v,l),c!==0&&c!==z.retryLane))throw z.retryLane=c,zi(n,c),ds(v,n,c),Im;xp(E)||Md(),a=Lm(n,a,l)}else xp(E)?(a.flags|=192,a.child=n.child,a=null):(n=z.treeContext,Wt=Ys(E.nextSibling),Pn=a,vt=!0,Mr=null,Hs=!1,n!==null&&kx(a,n),a=Vm(a,c.children),a.flags|=4096);return a}return f?(zr(),E=c.fallback,f=a.mode,z=n.child,te=z.sibling,c=Ka(z,{mode:"hidden",children:c.children}),c.subtreeFlags=z.subtreeFlags&65011712,te!==null?E=Ka(te,E):(E=Fi(E,f,l,null),E.flags|=2),E.return=a,c.return=a,c.sibling=E,a.child=c,bc(null,c),c=a.child,E=n.child.memoizedState,E===null?E=Om(l):(f=E.cachePool,f!==null?(z=_n._currentValue,f=f.parent!==z?{parent:z,pool:z}:f):f=Px(),E={baseLanes:E.baseLanes|l,cachePool:f}),c.memoizedState=E,c.childLanes=Pm(n,v,l),a.memoizedState=Mm,bc(n.child,c)):(Br(a),l=n.child,n=l.sibling,l=Ka(l,{mode:"visible",children:c.children}),l.return=a,l.sibling=null,n!==null&&(v=a.deletions,v===null?(a.deletions=[n],a.flags|=16):v.push(n)),a.child=l,a.memoizedState=null,l)}function Vm(n,a){return a=Sd({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Sd(n,a){return n=Ss(22,n,null,a),n.lanes=0,n}function Lm(n,a,l){return Ki(a,n.child,null,l),n=Vm(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function Kb(n,a,l){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a),Zf(n.return,a,l)}function Um(n,a,l,c,f,m){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:f,treeForkCount:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=c,v.tail=l,v.tailMode=f,v.treeForkCount=m)}function Qb(n,a,l){var c=a.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var v=pn.current,E=(v&2)!==0;if(E?(v=v&1|2,a.flags|=128):v&=1,ue(pn,v),Ln(n,a,c,l),c=vt?rc:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Kb(n,l,a);else if(n.tag===19)Kb(n,l,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(l=a.child,f=null;l!==null;)n=l.alternate,n!==null&&fd(n)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),Um(a,!1,f,l,m,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(n=f.alternate,n!==null&&fd(n)===null){a.child=f;break}n=f.sibling,f.sibling=l,l=f,f=n}Um(a,!0,l,null,m,c);break;case"together":Um(a,!1,null,null,void 0,c);break;default:a.memoizedState=null}return a.child}function tr(n,a,l){if(n!==null&&(a.dependencies=n.dependencies),$r|=a.lanes,(l&a.childLanes)===0)if(n!==null){if(Fl(n,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(r(153));if(a.child!==null){for(n=a.child,l=Ka(n,n.pendingProps),a.child=l,l.return=a;n.sibling!==null;)n=n.sibling,l=l.sibling=Ka(n,n.pendingProps),l.return=a;l.sibling=null}return a.child}function Bm(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&rd(n)))}function iS(n,a,l){switch(a.tag){case 3:kt(a,a.stateNode.containerInfo),Pr(a,_n,n.memoizedState.cache),qi();break;case 27:case 5:sn(a);break;case 4:kt(a,a.stateNode.containerInfo);break;case 10:Pr(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,dm(a),null;break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(Br(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Wb(n,a,l):(Br(a),n=tr(n,a,l),n!==null?n.sibling:null);Br(a);break;case 19:var f=(n.flags&128)!==0;if(c=(l&a.childLanes)!==0,c||(Fl(n,a,l,!1),c=(l&a.childLanes)!==0),f){if(c)return Qb(n,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(pn,pn.current),c)break;return null;case 22:return a.lanes=0,Fb(n,a,l,a.pendingProps);case 24:Pr(a,_n,n.memoizedState.cache)}return tr(n,a,l)}function Xb(n,a,l){if(n!==null)if(n.memoizedProps!==a.pendingProps)jn=!0;else{if(!Bm(n,l)&&(a.flags&128)===0)return jn=!1,iS(n,a,l);jn=(n.flags&131072)!==0}else jn=!1,vt&&(a.flags&1048576)!==0&&Cx(a,rc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var c=a.pendingProps;if(n=Yi(a.elementType),a.type=n,typeof n=="function")Hf(n)?(c=Xi(n,c),a.tag=1,a=Gb(null,a,n,c,l)):(a.tag=0,a=Dm(null,a,n,c,l));else{if(n!=null){var f=n.$$typeof;if(f===ae){a.tag=11,a=Ub(null,a,n,c,l);break e}else if(f===S){a.tag=14,a=Bb(null,a,n,c,l);break e}}throw a=F(n)||n,Error(r(306,a,""))}}return a;case 0:return Dm(n,a,a.type,a.pendingProps,l);case 1:return c=a.type,f=Xi(c,a.pendingProps),Gb(n,a,c,f,l);case 3:e:{if(kt(a,a.stateNode.containerInfo),n===null)throw Error(r(387));c=a.pendingProps;var m=a.memoizedState;f=m.element,im(n,a),fc(a,c,null,l);var v=a.memoizedState;if(c=v.cache,Pr(a,_n,c),c!==m.cache&&em(a,[_n],l,!0),hc(),c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=Yb(n,a,c,l);break e}else if(c!==f){f=Fs(Error(r(424)),a),ic(f),a=Yb(n,a,c,l);break e}else for(n=a.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Wt=Ys(n.firstChild),Pn=a,vt=!0,Mr=null,Hs=!0,l=Fx(a,null,c,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(qi(),c===f){a=tr(n,a,l);break e}Ln(n,a,c,l)}a=a.child}return a;case 26:return jd(n,a),n===null?(l=ov(a.type,null,a.pendingProps,null))?a.memoizedState=l:vt||(l=a.type,n=a.pendingProps,c=zd(De.current).createElement(l),c[rn]=a,c[yn]=n,Un(c,l,n),vn(c),a.stateNode=c):a.memoizedState=ov(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return sn(a),n===null&&vt&&(c=a.stateNode=rv(a.type,a.pendingProps,De.current),Pn=a,Hs=!0,f=Wt,Kr(a.type)?(yp=f,Wt=Ys(c.firstChild)):Wt=f),Ln(n,a,a.pendingProps.children,l),jd(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&vt&&((f=c=Wt)&&(c=PS(c,a.type,a.pendingProps,Hs),c!==null?(a.stateNode=c,Pn=a,Wt=Ys(c.firstChild),Hs=!1,f=!0):f=!1),f||Or(a)),sn(a),f=a.type,m=a.pendingProps,v=n!==null?n.memoizedProps:null,c=m.children,mp(f,m)?c=null:v!==null&&mp(f,v)&&(a.flags|=32),a.memoizedState!==null&&(f=fm(n,a,Xj,null,null,l),Dc._currentValue=f),jd(n,a),Ln(n,a,c,l),a.child;case 6:return n===null&&vt&&((n=l=Wt)&&(l=VS(l,a.pendingProps,Hs),l!==null?(a.stateNode=l,Pn=a,Wt=null,n=!0):n=!1),n||Or(a)),null;case 13:return Wb(n,a,l);case 4:return kt(a,a.stateNode.containerInfo),c=a.pendingProps,n===null?a.child=Ki(a,null,c,l):Ln(n,a,c,l),a.child;case 11:return Ub(n,a,a.type,a.pendingProps,l);case 7:return Ln(n,a,a.pendingProps,l),a.child;case 8:return Ln(n,a,a.pendingProps.children,l),a.child;case 12:return Ln(n,a,a.pendingProps.children,l),a.child;case 10:return c=a.pendingProps,Pr(a,a.type,c.value),Ln(n,a,c.children,l),a.child;case 9:return f=a.type._context,c=a.pendingProps.children,Hi(a),f=Vn(f),c=c(f),a.flags|=1,Ln(n,a,c,l),a.child;case 14:return Bb(n,a,a.type,a.pendingProps,l);case 15:return zb(n,a,a.type,a.pendingProps,l);case 19:return Qb(n,a,l);case 31:return rS(n,a,l);case 22:return Fb(n,a,l,a.pendingProps);case 24:return Hi(a),c=Vn(_n),n===null?(f=sm(),f===null&&(f=qt,m=tm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=l),f=m),a.memoizedState={parent:c,cache:f},rm(a),Pr(a,_n,f)):((n.lanes&l)!==0&&(im(n,a),fc(a,null,null,l),hc()),f=n.memoizedState,m=a.memoizedState,f.parent!==c?(f={parent:c,cache:c},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Pr(a,_n,c)):(c=m.cache,Pr(a,_n,c),c!==f.cache&&em(a,[_n],l,!0))),Ln(n,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function nr(n){n.flags|=4}function zm(n,a,l,c,f){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(jy())n.flags|=8192;else throw Wi=cd,am}else n.flags&=-16777217}function Jb(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!fv(a))if(jy())n.flags|=8192;else throw Wi=cd,am}function Ed(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?He():536870912,n.lanes|=a,eo|=a)}function yc(n,a){if(!vt)switch(n.tailMode){case"hidden":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Kt(n){var a=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(a)for(var f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)l|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=l,a}function lS(n,a,l){var c=a.pendingProps;switch(Kf(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(a),null;case 1:return Kt(a),null;case 3:return l=a.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Ja(_n),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(zl(a)?nr(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Xf())),Kt(a),null;case 26:var f=a.type,m=a.memoizedState;return n===null?(nr(a),m!==null?(Kt(a),Jb(a,m)):(Kt(a),zm(a,f,null,c,l))):m?m!==n.memoizedState?(nr(a),Kt(a),Jb(a,m)):(Kt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==c&&nr(a),Kt(a),zm(a,f,n,c,l)),null;case 27:if(se(a),l=De.current,f=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==c&&nr(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Kt(a),null}n=xe.current,zl(a)?Rx(a):(n=rv(f,c,l),a.stateNode=n,nr(a))}return Kt(a),null;case 5:if(se(a),f=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==c&&nr(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return Kt(a),null}if(m=xe.current,zl(a))Rx(a);else{var v=zd(De.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?v.createElement("select",{is:c.is}):v.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?v.createElement(f,{is:c.is}):v.createElement(f)}}m[rn]=a,m[yn]=c;e:for(v=a.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===a)break e;for(;v.sibling===null;){if(v.return===null||v.return===a)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}a.stateNode=m;e:switch(Un(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&nr(a)}}return Kt(a),zm(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,l),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==c&&nr(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(n=De.current,zl(a)){if(n=a.stateNode,l=a.memoizedProps,c=null,f=Pn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[rn]=a,n=!!(n.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Wy(n.nodeValue,l)),n||Or(a,!0)}else n=zd(n).createTextNode(c),n[rn]=a,a.stateNode=n}return Kt(a),null;case 31:if(l=a.memoizedState,n===null||n.memoizedState!==null){if(c=zl(a),l!==null){if(n===null){if(!c)throw Error(r(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[rn]=a}else qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Kt(a),n=!1}else l=Xf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return a.flags&256?(Ts(a),a):(Ts(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Kt(a),null;case 13:if(c=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=zl(a),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[rn]=a}else qi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Kt(a),f=!1}else f=Xf(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Ts(a),a):(Ts(a),null)}return Ts(a),(a.flags&128)!==0?(a.lanes=l,a):(l=c!==null,n=n!==null&&n.memoizedState!==null,l&&(c=a.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),l!==n&&l&&(a.child.flags|=8192),Ed(a,a.updateQueue),Kt(a),null);case 4:return ft(),n===null&&cp(a.stateNode.containerInfo),Kt(a),null;case 10:return Ja(a.type),Kt(a),null;case 19:if(Z(pn),c=a.memoizedState,c===null)return Kt(a),null;if(f=(a.flags&128)!==0,m=c.rendering,m===null)if(f)yc(c,!1);else{if(on!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(m=fd(n),m!==null){for(a.flags|=128,yc(c,!1),n=m.updateQueue,a.updateQueue=n,Ed(a,n),a.subtreeFlags=0,n=l,l=a.child;l!==null;)Ex(l,n),l=l.sibling;return ue(pn,pn.current&1|2),vt&&Qa(a,c.treeForkCount),a.child}n=n.sibling}c.tail!==null&&_t()>Rd&&(a.flags|=128,f=!0,yc(c,!1),a.lanes=4194304)}else{if(!f)if(n=fd(m),n!==null){if(a.flags|=128,f=!0,n=n.updateQueue,a.updateQueue=n,Ed(a,n),yc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!vt)return Kt(a),null}else 2*_t()-c.renderingStartTime>Rd&&l!==536870912&&(a.flags|=128,f=!0,yc(c,!1),a.lanes=4194304);c.isBackwards?(m.sibling=a.child,a.child=m):(n=c.last,n!==null?n.sibling=m:a.child=m,c.last=m)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=_t(),n.sibling=null,l=pn.current,ue(pn,f?l&1|2:l&1),vt&&Qa(a,c.treeForkCount),n):(Kt(a),null);case 22:case 23:return Ts(a),um(),c=a.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(l&536870912)!==0&&(a.flags&128)===0&&(Kt(a),a.subtreeFlags&6&&(a.flags|=8192)):Kt(a),l=a.updateQueue,l!==null&&Ed(a,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==l&&(a.flags|=2048),n!==null&&Z(Gi),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ja(_n),Kt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function oS(n,a){switch(Kf(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Ja(_n),ft(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return se(a),null;case 31:if(a.memoizedState!==null){if(Ts(a),a.alternate===null)throw Error(r(340));qi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(Ts(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(r(340));qi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return Z(pn),null;case 4:return ft(),null;case 10:return Ja(a.type),null;case 22:case 23:return Ts(a),um(),n!==null&&Z(Gi),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Ja(_n),null;case 25:return null;default:return null}}function Zb(n,a){switch(Kf(a),a.tag){case 3:Ja(_n),ft();break;case 26:case 27:case 5:se(a);break;case 4:ft();break;case 31:a.memoizedState!==null&&Ts(a);break;case 13:Ts(a);break;case 19:Z(pn);break;case 10:Ja(a.type);break;case 22:case 23:Ts(a),um(),n!==null&&Z(Gi);break;case 24:Ja(_n)}}function vc(n,a){try{var l=a.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&n)===n){c=void 0;var m=l.create,v=l.inst;c=m(),v.destroy=c}l=l.next}while(l!==f)}}catch(E){Pt(a,a.return,E)}}function Fr(n,a,l){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var v=c.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,f=a;var z=l,te=E;try{te()}catch(he){Pt(f,z,he)}}}c=c.next}while(c!==m)}}catch(he){Pt(a,a.return,he)}}function ey(n){var a=n.updateQueue;if(a!==null){var l=n.stateNode;try{$x(a,l)}catch(c){Pt(n,n.return,c)}}}function ty(n,a,l){l.props=Xi(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(c){Pt(n,a,c)}}function wc(n,a){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof l=="function"?n.refCleanup=l(c):l.current=c}}catch(f){Pt(n,a,f)}}function ka(n,a){var l=n.ref,c=n.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(f){Pt(n,a,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){Pt(n,a,f)}else l.current=null}function ny(n){var a=n.type,l=n.memoizedProps,c=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(f){Pt(n,n.return,f)}}function Fm(n,a,l){try{var c=n.stateNode;kS(c,n.type,l,a),c[yn]=a}catch(f){Pt(n,n.return,f)}}function sy(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Kr(n.type)||n.tag===4}function qm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sy(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Kr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $m(n,a,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(n),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=ea));else if(c!==4&&(c===27&&Kr(n.type)&&(l=n.stateNode,a=null),n=n.child,n!==null))for($m(n,a,l),n=n.sibling;n!==null;)$m(n,a,l),n=n.sibling}function Td(n,a,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,a?l.insertBefore(n,a):l.appendChild(n);else if(c!==4&&(c===27&&Kr(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(Td(n,a,l),n=n.sibling;n!==null;)Td(n,a,l),n=n.sibling}function ay(n){var a=n.stateNode,l=n.memoizedProps;try{for(var c=n.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);Un(a,c,l),a[rn]=n,a[yn]=l}catch(m){Pt(n,n.return,m)}}var sr=!1,Sn=!1,Hm=!1,ry=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function cS(n,a){if(n=n.containerInfo,hp=Wd,n=xx(n),Lf(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var v=0,E=-1,z=-1,te=0,he=0,pe=n,ne=null;t:for(;;){for(var le;pe!==l||f!==0&&pe.nodeType!==3||(E=v+f),pe!==m||c!==0&&pe.nodeType!==3||(z=v+c),pe.nodeType===3&&(v+=pe.nodeValue.length),(le=pe.firstChild)!==null;)ne=pe,pe=le;for(;;){if(pe===n)break t;if(ne===l&&++te===f&&(E=v),ne===m&&++he===c&&(z=v),(le=pe.nextSibling)!==null)break;pe=ne,ne=pe.parentNode}pe=le}l=E===-1||z===-1?null:{start:E,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(fp={focusedElem:n,selectionRange:l},Wd=!1,Dn=a;Dn!==null;)if(a=Dn,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,Dn=n;else for(;Dn!==null;){switch(a=Dn,m=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)f=n[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,l=a,f=m.memoizedProps,m=m.memoizedState,c=l.stateNode;try{var Oe=Xi(l.type,f);n=c.getSnapshotBeforeUpdate(Oe,m),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ge){Pt(l,l.return,Ge)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,l=n.nodeType,l===9)gp(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":gp(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=a.sibling,n!==null){n.return=a.return,Dn=n;break}Dn=a.return}}function iy(n,a,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:rr(n,l),c&4&&vc(5,l);break;case 1:if(rr(n,l),c&4)if(n=l.stateNode,a===null)try{n.componentDidMount()}catch(v){Pt(l,l.return,v)}else{var f=Xi(l.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(f,a,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Pt(l,l.return,v)}}c&64&&ey(l),c&512&&wc(l,l.return);break;case 3:if(rr(n,l),c&64&&(n=l.updateQueue,n!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{$x(n,a)}catch(v){Pt(l,l.return,v)}}break;case 27:a===null&&c&4&&ay(l);case 26:case 5:rr(n,l),a===null&&c&4&&ny(l),c&512&&wc(l,l.return);break;case 12:rr(n,l);break;case 31:rr(n,l),c&4&&cy(n,l);break;case 13:rr(n,l),c&4&&uy(n,l),c&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=bS.bind(null,l),LS(n,l))));break;case 22:if(c=l.memoizedState!==null||sr,!c){a=a!==null&&a.memoizedState!==null||Sn,f=sr;var m=Sn;sr=c,(Sn=a)&&!m?ir(n,l,(l.subtreeFlags&8772)!==0):rr(n,l),sr=f,Sn=m}break;case 30:break;default:rr(n,l)}}function ly(n){var a=n.alternate;a!==null&&(n.alternate=null,ly(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&jl(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Jt=null,ls=!1;function ar(n,a,l){for(l=l.child;l!==null;)oy(n,a,l),l=l.sibling}function oy(n,a,l){if(re&&typeof re.onCommitFiberUnmount=="function")try{re.onCommitFiberUnmount(H,l)}catch{}switch(l.tag){case 26:Sn||ka(l,a),ar(n,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Sn||ka(l,a);var c=Jt,f=ls;Kr(l.type)&&(Jt=l.stateNode,ls=!1),ar(n,a,l),kc(l.stateNode),Jt=c,ls=f;break;case 5:Sn||ka(l,a);case 6:if(c=Jt,f=ls,Jt=null,ar(n,a,l),Jt=c,ls=f,Jt!==null)if(ls)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(l.stateNode)}catch(m){Pt(l,a,m)}else try{Jt.removeChild(l.stateNode)}catch(m){Pt(l,a,m)}break;case 18:Jt!==null&&(ls?(n=Jt,ev(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),oo(n)):ev(Jt,l.stateNode));break;case 4:c=Jt,f=ls,Jt=l.stateNode.containerInfo,ls=!0,ar(n,a,l),Jt=c,ls=f;break;case 0:case 11:case 14:case 15:Fr(2,l,a),Sn||Fr(4,l,a),ar(n,a,l);break;case 1:Sn||(ka(l,a),c=l.stateNode,typeof c.componentWillUnmount=="function"&&ty(l,a,c)),ar(n,a,l);break;case 21:ar(n,a,l);break;case 22:Sn=(c=Sn)||l.memoizedState!==null,ar(n,a,l),Sn=c;break;default:ar(n,a,l)}}function cy(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{oo(n)}catch(l){Pt(a,a.return,l)}}}function uy(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{oo(n)}catch(l){Pt(a,a.return,l)}}function uS(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new ry),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new ry),a;default:throw Error(r(435,n.tag))}}function Ad(n,a){var l=uS(n);a.forEach(function(c){if(!l.has(c)){l.add(c);var f=yS.bind(null,n,c);c.then(f,f)}})}function os(n,a){var l=a.deletions;if(l!==null)for(var c=0;c<l.length;c++){var f=l[c],m=n,v=a,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(Kr(E.type)){Jt=E.stateNode,ls=!1;break e}break;case 5:Jt=E.stateNode,ls=!1;break e;case 3:case 4:Jt=E.stateNode.containerInfo,ls=!0;break e}E=E.return}if(Jt===null)throw Error(r(160));oy(m,v,f),Jt=null,ls=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)dy(a,n),a=a.sibling}var ia=null;function dy(n,a){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:os(a,n),cs(n),c&4&&(Fr(3,n,n.return),vc(3,n),Fr(5,n,n.return));break;case 1:os(a,n),cs(n),c&512&&(Sn||l===null||ka(l,l.return)),c&64&&sr&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var f=ia;if(os(a,n),cs(n),c&512&&(Sn||l===null||ka(l,l.return)),c&4){var m=l!==null?l.memoizedState:null;if(c=n.memoizedState,l===null)if(c===null)if(n.stateNode===null){e:{c=n.type,l=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ga]||m[rn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Un(m,c,l),m[rn]=n,vn(m),c=m;break e;case"link":var v=dv("link","href",f).get(c+(l.href||""));if(v){for(var E=0;E<v.length;E++)if(m=v[E],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){v.splice(E,1);break t}}m=f.createElement(c),Un(m,c,l),f.head.appendChild(m);break;case"meta":if(v=dv("meta","content",f).get(c+(l.content||""))){for(E=0;E<v.length;E++)if(m=v[E],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){v.splice(E,1);break t}}m=f.createElement(c),Un(m,c,l),f.head.appendChild(m);break;default:throw Error(r(468,c))}m[rn]=n,vn(m),c=m}n.stateNode=c}else hv(f,n.type,n.stateNode);else n.stateNode=uv(f,c,n.memoizedProps);else m!==c?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,c===null?hv(f,n.type,n.stateNode):uv(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Fm(n,n.memoizedProps,l.memoizedProps)}break;case 27:os(a,n),cs(n),c&512&&(Sn||l===null||ka(l,l.return)),l!==null&&c&4&&Fm(n,n.memoizedProps,l.memoizedProps);break;case 5:if(os(a,n),cs(n),c&512&&(Sn||l===null||ka(l,l.return)),n.flags&32){f=n.stateNode;try{is(f,"")}catch(Oe){Pt(n,n.return,Oe)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Fm(n,f,l!==null?l.memoizedProps:f)),c&1024&&(Hm=!0);break;case 6:if(os(a,n),cs(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,l=n.stateNode;try{l.nodeValue=c}catch(Oe){Pt(n,n.return,Oe)}}break;case 3:if($d=null,f=ia,ia=Fd(a.containerInfo),os(a,n),ia=f,cs(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{oo(a.containerInfo)}catch(Oe){Pt(n,n.return,Oe)}Hm&&(Hm=!1,hy(n));break;case 4:c=ia,ia=Fd(n.stateNode.containerInfo),os(a,n),cs(n),ia=c;break;case 12:os(a,n),cs(n);break;case 31:os(a,n),cs(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ad(n,c)));break;case 13:os(a,n),cs(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(kd=_t()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ad(n,c)));break;case 22:f=n.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,te=sr,he=Sn;if(sr=te||f,Sn=he||z,os(a,n),Sn=he,sr=te,cs(n),c&8192)e:for(a=n.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(l===null||z||sr||Sn||Ji(n)),l=null,a=n;;){if(a.tag===5||a.tag===26){if(l===null){z=l=a;try{if(m=z.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=z.stateNode;var pe=z.memoizedProps.style,ne=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;E.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Oe){Pt(z,z.return,Oe)}}}else if(a.tag===6){if(l===null){z=a;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(Oe){Pt(z,z.return,Oe)}}}else if(a.tag===18){if(l===null){z=a;try{var le=z.stateNode;f?tv(le,!0):tv(z.stateNode,!1)}catch(Oe){Pt(z,z.return,Oe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=n.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Ad(n,l))));break;case 19:os(a,n),cs(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ad(n,c)));break;case 30:break;case 21:break;default:os(a,n),cs(n)}}function cs(n){var a=n.flags;if(a&2){try{for(var l,c=n.return;c!==null;){if(sy(c)){l=c;break}c=c.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var f=l.stateNode,m=qm(n);Td(n,m,f);break;case 5:var v=l.stateNode;l.flags&32&&(is(v,""),l.flags&=-33);var E=qm(n);Td(n,E,v);break;case 3:case 4:var z=l.stateNode.containerInfo,te=qm(n);$m(n,te,z);break;default:throw Error(r(161))}}catch(he){Pt(n,n.return,he)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function hy(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;hy(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function rr(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)iy(n,a.alternate,a),a=a.sibling}function Ji(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:Fr(4,a,a.return),Ji(a);break;case 1:ka(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&ty(a,a.return,l),Ji(a);break;case 27:kc(a.stateNode);case 26:case 5:ka(a,a.return),Ji(a);break;case 22:a.memoizedState===null&&Ji(a);break;case 30:Ji(a);break;default:Ji(a)}n=n.sibling}}function ir(n,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,f=n,m=a,v=m.flags;switch(m.tag){case 0:case 11:case 15:ir(f,m,l),vc(4,m);break;case 1:if(ir(f,m,l),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(te){Pt(c,c.return,te)}if(c=m,f=c.updateQueue,f!==null){var E=c.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)qx(z[f],E)}catch(te){Pt(c,c.return,te)}}l&&v&64&&ey(m),wc(m,m.return);break;case 27:ay(m);case 26:case 5:ir(f,m,l),l&&c===null&&v&4&&ny(m),wc(m,m.return);break;case 12:ir(f,m,l);break;case 31:ir(f,m,l),l&&v&4&&cy(f,m);break;case 13:ir(f,m,l),l&&v&4&&uy(f,m);break;case 22:m.memoizedState===null&&ir(f,m,l),wc(m,m.return);break;case 30:break;default:ir(f,m,l)}a=a.sibling}}function Gm(n,a){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&lc(l))}function Ym(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&lc(n))}function la(n,a,l,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)fy(n,a,l,c),a=a.sibling}function fy(n,a,l,c){var f=a.flags;switch(a.tag){case 0:case 11:case 15:la(n,a,l,c),f&2048&&vc(9,a);break;case 1:la(n,a,l,c);break;case 3:la(n,a,l,c),f&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&lc(n)));break;case 12:if(f&2048){la(n,a,l,c),n=a.stateNode;try{var m=a.memoizedProps,v=m.id,E=m.onPostCommit;typeof E=="function"&&E(v,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(z){Pt(a,a.return,z)}}else la(n,a,l,c);break;case 31:la(n,a,l,c);break;case 13:la(n,a,l,c);break;case 23:break;case 22:m=a.stateNode,v=a.alternate,a.memoizedState!==null?m._visibility&2?la(n,a,l,c):_c(n,a):m._visibility&2?la(n,a,l,c):(m._visibility|=2,Xl(n,a,l,c,(a.subtreeFlags&10256)!==0||!1)),f&2048&&Gm(v,a);break;case 24:la(n,a,l,c),f&2048&&Ym(a.alternate,a);break;default:la(n,a,l,c)}}function Xl(n,a,l,c,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var m=n,v=a,E=l,z=c,te=v.flags;switch(v.tag){case 0:case 11:case 15:Xl(m,v,E,z,f),vc(8,v);break;case 23:break;case 22:var he=v.stateNode;v.memoizedState!==null?he._visibility&2?Xl(m,v,E,z,f):_c(m,v):(he._visibility|=2,Xl(m,v,E,z,f)),f&&te&2048&&Gm(v.alternate,v);break;case 24:Xl(m,v,E,z,f),f&&te&2048&&Ym(v.alternate,v);break;default:Xl(m,v,E,z,f)}a=a.sibling}}function _c(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=n,c=a,f=c.flags;switch(c.tag){case 22:_c(l,c),f&2048&&Gm(c.alternate,c);break;case 24:_c(l,c),f&2048&&Ym(c.alternate,c);break;default:_c(l,c)}a=a.sibling}}var Nc=8192;function Jl(n,a,l){if(n.subtreeFlags&Nc)for(n=n.child;n!==null;)my(n,a,l),n=n.sibling}function my(n,a,l){switch(n.tag){case 26:Jl(n,a,l),n.flags&Nc&&n.memoizedState!==null&&QS(l,ia,n.memoizedState,n.memoizedProps);break;case 5:Jl(n,a,l);break;case 3:case 4:var c=ia;ia=Fd(n.stateNode.containerInfo),Jl(n,a,l),ia=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Nc,Nc=16777216,Jl(n,a,l),Nc=c):Jl(n,a,l));break;default:Jl(n,a,l)}}function py(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function jc(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Dn=c,xy(c,n)}py(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)gy(n),n=n.sibling}function gy(n){switch(n.tag){case 0:case 11:case 15:jc(n),n.flags&2048&&Fr(9,n,n.return);break;case 3:jc(n);break;case 12:jc(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,Cd(n)):jc(n);break;default:jc(n)}}function Cd(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var c=a[l];Dn=c,xy(c,n)}py(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:Fr(8,a,a.return),Cd(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Cd(a));break;default:Cd(a)}n=n.sibling}}function xy(n,a){for(;Dn!==null;){var l=Dn;switch(l.tag){case 0:case 11:case 15:Fr(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:lc(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Dn=c;else e:for(l=n;Dn!==null;){c=Dn;var f=c.sibling,m=c.return;if(ly(c),c===l){Dn=null;break e}if(f!==null){f.return=m,Dn=f;break e}Dn=m}}}var dS={getCacheForType:function(n){var a=Vn(_n),l=a.data.get(n);return l===void 0&&(l=n(),a.data.set(n,l)),l},cacheSignal:function(){return Vn(_n).controller.signal}},hS=typeof WeakMap=="function"?WeakMap:Map,Ct=0,qt=null,dt=null,mt=0,Ot=0,As=null,qr=!1,Zl=!1,Wm=!1,lr=0,on=0,$r=0,Zi=0,Km=0,Cs=0,eo=0,Sc=null,us=null,Qm=!1,kd=0,by=0,Rd=1/0,Id=null,Hr=null,kn=0,Gr=null,to=null,or=0,Xm=0,Jm=null,yy=null,Ec=0,Zm=null;function ks(){return(Ct&2)!==0&&mt!==0?mt&-mt:I.T!==null?rp():Ai()}function vy(){if(Cs===0)if((mt&536870912)===0||vt){var n=me;me<<=1,(me&3932160)===0&&(me=262144),Cs=n}else Cs=536870912;return n=Es.current,n!==null&&(n.flags|=32),Cs}function ds(n,a,l){(n===qt&&(Ot===2||Ot===9)||n.cancelPendingCommit!==null)&&(no(n,0),Yr(n,mt,Cs,!1)),an(n,l),((Ct&2)===0||n!==qt)&&(n===qt&&((Ct&2)===0&&(Zi|=l),on===4&&Yr(n,mt,Cs,!1)),Ra(n))}function wy(n,a,l){if((Ct&6)!==0)throw Error(r(327));var c=!l&&(a&127)===0&&(a&n.expiredLanes)===0||jt(n,a),f=c?pS(n,a):tp(n,a,!0),m=c;do{if(f===0){Zl&&!c&&Yr(n,a,0,!1);break}else{if(l=n.current.alternate,m&&!fS(l)){f=tp(n,a,!1),m=!1;continue}if(f===2){if(m=a,n.errorRecoveryDisabledLanes&m)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){a=v;e:{var E=n;f=Sc;var z=E.current.memoizedState.isDehydrated;if(z&&(no(E,v).flags|=256),v=tp(E,v,!1),v!==2){if(Wm&&!z){E.errorRecoveryDisabledLanes|=m,Zi|=m,f=4;break e}m=us,us=f,m!==null&&(us===null?us=m:us.push.apply(us,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){no(n,0),Yr(n,a,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Yr(c,a,Cs,!qr);break e;case 2:us=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(f=kd+300-_t(),10<f)){if(Yr(c,a,Cs,!qr),Ze(c,0,!0)!==0)break e;or=a,c.timeoutHandle=Jy(_y.bind(null,c,l,us,Id,Qm,a,Cs,Zi,eo,qr,m,"Throttled",-0,0),f);break e}_y(c,l,us,Id,Qm,a,Cs,Zi,eo,qr,m,null,-0,0)}}break}while(!0);Ra(n)}function _y(n,a,l,c,f,m,v,E,z,te,he,pe,ne,le){if(n.timeoutHandle=-1,pe=a.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ea},my(a,m,pe);var Oe=(m&62914560)===m?kd-_t():(m&4194048)===m?by-_t():0;if(Oe=XS(pe,Oe),Oe!==null){or=m,n.cancelPendingCommit=Oe(ky.bind(null,n,a,m,l,c,f,v,E,z,he,pe,null,ne,le)),Yr(n,m,v,!te);return}}ky(n,a,m,l,c,f,v,E,z)}function fS(n){for(var a=n;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var f=l[c],m=f.getSnapshot;f=f.value;try{if(!js(m(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Yr(n,a,l,c){a&=~Km,a&=~Zi,n.suspendedLanes|=a,n.pingedLanes&=~a,c&&(n.warmLanes|=a),c=n.expirationTimes;for(var f=a;0<f;){var m=31-we(f),v=1<<m;c[m]=-1,f&=~v}l!==0&&ss(n,l,a)}function Dd(){return(Ct&6)===0?(Tc(0),!1):!0}function ep(){if(dt!==null){if(Ot===0)var n=dt.return;else n=dt,Xa=$i=null,gm(n),Gl=null,cc=0,n=dt;for(;n!==null;)Zb(n.alternate,n),n=n.return;dt=null}}function no(n,a){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,DS(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),or=0,ep(),qt=n,dt=l=Ka(n.current,null),mt=a,Ot=0,As=null,qr=!1,Zl=jt(n,a),Wm=!1,eo=Cs=Km=Zi=$r=on=0,us=Sc=null,Qm=!1,(a&8)!==0&&(a|=a&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=a;0<c;){var f=31-we(c),m=1<<f;a|=n[f],c&=~m}return lr=a,ed(),l}function Ny(n,a){rt=null,I.H=xc,a===Hl||a===od?(a=Ux(),Ot=3):a===am?(a=Ux(),Ot=4):Ot=a===Im?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,As=a,dt===null&&(on=1,_d(n,Fs(a,n.current)))}function jy(){var n=Es.current;return n===null?!0:(mt&4194048)===mt?Gs===null:(mt&62914560)===mt||(mt&536870912)!==0?n===Gs:!1}function Sy(){var n=I.H;return I.H=xc,n===null?xc:n}function Ey(){var n=I.A;return I.A=dS,n}function Md(){on=4,qr||(mt&4194048)!==mt&&Es.current!==null||(Zl=!0),($r&134217727)===0&&(Zi&134217727)===0||qt===null||Yr(qt,mt,Cs,!1)}function tp(n,a,l){var c=Ct;Ct|=2;var f=Sy(),m=Ey();(qt!==n||mt!==a)&&(Id=null,no(n,a)),a=!1;var v=on;e:do try{if(Ot!==0&&dt!==null){var E=dt,z=As;switch(Ot){case 8:ep(),v=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(a=!0);var te=Ot;if(Ot=0,As=null,so(n,E,z,te),l&&Zl){v=0;break e}break;default:te=Ot,Ot=0,As=null,so(n,E,z,te)}}mS(),v=on;break}catch(he){Ny(n,he)}while(!0);return a&&n.shellSuspendCounter++,Xa=$i=null,Ct=c,I.H=f,I.A=m,dt===null&&(qt=null,mt=0,ed()),v}function mS(){for(;dt!==null;)Ty(dt)}function pS(n,a){var l=Ct;Ct|=2;var c=Sy(),f=Ey();qt!==n||mt!==a?(Id=null,Rd=_t()+500,no(n,a)):Zl=jt(n,a);e:do try{if(Ot!==0&&dt!==null){a=dt;var m=As;t:switch(Ot){case 1:Ot=0,As=null,so(n,a,m,1);break;case 2:case 9:if(Vx(m)){Ot=0,As=null,Ay(a);break}a=function(){Ot!==2&&Ot!==9||qt!==n||(Ot=7),Ra(n)},m.then(a,a);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:Vx(m)?(Ot=0,As=null,Ay(a)):(Ot=0,As=null,so(n,a,m,7));break;case 5:var v=null;switch(dt.tag){case 26:v=dt.memoizedState;case 5:case 27:var E=dt;if(v?fv(v):E.stateNode.complete){Ot=0,As=null;var z=E.sibling;if(z!==null)dt=z;else{var te=E.return;te!==null?(dt=te,Od(te)):dt=null}break t}}Ot=0,As=null,so(n,a,m,5);break;case 6:Ot=0,As=null,so(n,a,m,6);break;case 8:ep(),on=6;break e;default:throw Error(r(462))}}gS();break}catch(he){Ny(n,he)}while(!0);return Xa=$i=null,I.H=c,I.A=f,Ct=l,dt!==null?0:(qt=null,mt=0,ed(),on)}function gS(){for(;dt!==null&&!ot();)Ty(dt)}function Ty(n){var a=Xb(n.alternate,n,lr);n.memoizedProps=n.pendingProps,a===null?Od(n):dt=a}function Ay(n){var a=n,l=a.alternate;switch(a.tag){case 15:case 0:a=Hb(l,a,a.pendingProps,a.type,void 0,mt);break;case 11:a=Hb(l,a,a.pendingProps,a.type.render,a.ref,mt);break;case 5:gm(a);default:Zb(l,a),a=dt=Ex(a,lr),a=Xb(l,a,lr)}n.memoizedProps=n.pendingProps,a===null?Od(n):dt=a}function so(n,a,l,c){Xa=$i=null,gm(a),Gl=null,cc=0;var f=a.return;try{if(aS(n,f,a,l,mt)){on=1,_d(n,Fs(l,n.current)),dt=null;return}}catch(m){if(f!==null)throw dt=f,m;on=1,_d(n,Fs(l,n.current)),dt=null;return}a.flags&32768?(vt||c===1?n=!0:Zl||(mt&536870912)!==0?n=!1:(qr=n=!0,(c===2||c===9||c===3||c===6)&&(c=Es.current,c!==null&&c.tag===13&&(c.flags|=16384))),Cy(a,n)):Od(a)}function Od(n){var a=n;do{if((a.flags&32768)!==0){Cy(a,qr);return}n=a.return;var l=lS(a.alternate,a,lr);if(l!==null){dt=l;return}if(a=a.sibling,a!==null){dt=a;return}dt=a=n}while(a!==null);on===0&&(on=5)}function Cy(n,a){do{var l=oS(n.alternate,n);if(l!==null){l.flags&=32767,dt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(n=n.sibling,n!==null)){dt=n;return}dt=n=l}while(n!==null);on=6,dt=null}function ky(n,a,l,c,f,m,v,E,z){n.cancelPendingCommit=null;do Pd();while(kn!==0);if((Ct&6)!==0)throw Error(r(327));if(a!==null){if(a===n.current)throw Error(r(177));if(m=a.lanes|a.childLanes,m|=qf,$n(n,l,m,v,E,z),n===qt&&(dt=qt=null,mt=0),to=a,Gr=n,or=l,Xm=m,Jm=f,yy=c,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,vS(Xn,function(){return Oy(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||c){c=I.T,I.T=null,f=K.p,K.p=2,v=Ct,Ct|=4;try{cS(n,a,l)}finally{Ct=v,K.p=f,I.T=c}}kn=1,Ry(),Iy(),Dy()}}function Ry(){if(kn===1){kn=0;var n=Gr,a=to,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=I.T,I.T=null;var c=K.p;K.p=2;var f=Ct;Ct|=4;try{dy(a,n);var m=fp,v=xx(n.containerInfo),E=m.focusedElem,z=m.selectionRange;if(v!==E&&E&&E.ownerDocument&&gx(E.ownerDocument.documentElement,E)){if(z!==null&&Lf(E)){var te=z.start,he=z.end;if(he===void 0&&(he=te),"selectionStart"in E)E.selectionStart=te,E.selectionEnd=Math.min(he,E.value.length);else{var pe=E.ownerDocument||document,ne=pe&&pe.defaultView||window;if(ne.getSelection){var le=ne.getSelection(),Oe=E.textContent.length,Ge=Math.min(z.start,Oe),zt=z.end===void 0?Ge:Math.min(z.end,Oe);!le.extend&&Ge>zt&&(v=zt,zt=Ge,Ge=v);var Q=px(E,Ge),Y=px(E,zt);if(Q&&Y&&(le.rangeCount!==1||le.anchorNode!==Q.node||le.anchorOffset!==Q.offset||le.focusNode!==Y.node||le.focusOffset!==Y.offset)){var ee=pe.createRange();ee.setStart(Q.node,Q.offset),le.removeAllRanges(),Ge>zt?(le.addRange(ee),le.extend(Y.node,Y.offset)):(ee.setEnd(Y.node,Y.offset),le.addRange(ee))}}}}for(pe=[],le=E;le=le.parentNode;)le.nodeType===1&&pe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<pe.length;E++){var fe=pe[E];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Wd=!!hp,fp=hp=null}finally{Ct=f,K.p=c,I.T=l}}n.current=a,kn=2}}function Iy(){if(kn===2){kn=0;var n=Gr,a=to,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=I.T,I.T=null;var c=K.p;K.p=2;var f=Ct;Ct|=4;try{iy(n,a.alternate,a)}finally{Ct=f,K.p=c,I.T=l}}kn=3}}function Dy(){if(kn===4||kn===3){kn=0,Qt();var n=Gr,a=to,l=or,c=yy;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?kn=5:(kn=0,to=Gr=null,My(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Hr=null),fn(l),a=a.stateNode,re&&typeof re.onCommitFiberRoot=="function")try{re.onCommitFiberRoot(H,a,void 0,(a.current.flags&128)===128)}catch{}if(c!==null){a=I.T,f=K.p,K.p=2,I.T=null;try{for(var m=n.onRecoverableError,v=0;v<c.length;v++){var E=c[v];m(E.value,{componentStack:E.stack})}}finally{I.T=a,K.p=f}}(or&3)!==0&&Pd(),Ra(n),f=n.pendingLanes,(l&261930)!==0&&(f&42)!==0?n===Zm?Ec++:(Ec=0,Zm=n):Ec=0,Tc(0)}}function My(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,lc(a)))}function Pd(){return Ry(),Iy(),Dy(),Oy()}function Oy(){if(kn!==5)return!1;var n=Gr,a=Xm;Xm=0;var l=fn(or),c=I.T,f=K.p;try{K.p=32>l?32:l,I.T=null,l=Jm,Jm=null;var m=Gr,v=or;if(kn=0,to=Gr=null,or=0,(Ct&6)!==0)throw Error(r(331));var E=Ct;if(Ct|=4,gy(m.current),fy(m,m.current,v,l),Ct=E,Tc(0,!1),re&&typeof re.onPostCommitFiberRoot=="function")try{re.onPostCommitFiberRoot(H,m)}catch{}return!0}finally{K.p=f,I.T=c,My(n,a)}}function Py(n,a,l){a=Fs(l,a),a=Rm(n.stateNode,a,2),n=Ur(n,a,2),n!==null&&(an(n,2),Ra(n))}function Pt(n,a,l){if(n.tag===3)Py(n,n,l);else for(;a!==null;){if(a.tag===3){Py(a,n,l);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hr===null||!Hr.has(c))){n=Fs(l,n),l=Vb(2),c=Ur(a,l,2),c!==null&&(Lb(l,c,a,n),an(c,2),Ra(c));break}}a=a.return}}function np(n,a,l){var c=n.pingCache;if(c===null){c=n.pingCache=new hS;var f=new Set;c.set(a,f)}else f=c.get(a),f===void 0&&(f=new Set,c.set(a,f));f.has(l)||(Wm=!0,f.add(l),n=xS.bind(null,n,a,l),a.then(n,n))}function xS(n,a,l){var c=n.pingCache;c!==null&&c.delete(a),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,qt===n&&(mt&l)===l&&(on===4||on===3&&(mt&62914560)===mt&&300>_t()-kd?(Ct&2)===0&&no(n,0):Km|=l,eo===mt&&(eo=0)),Ra(n)}function Vy(n,a){a===0&&(a=He()),n=zi(n,a),n!==null&&(an(n,a),Ra(n))}function bS(n){var a=n.memoizedState,l=0;a!==null&&(l=a.retryLane),Vy(n,l)}function yS(n,a){var l=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(l=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),Vy(n,l)}function vS(n,a){return ke(n,a)}var Vd=null,ao=null,sp=!1,Ld=!1,ap=!1,Wr=0;function Ra(n){n!==ao&&n.next===null&&(ao===null?Vd=ao=n:ao=ao.next=n),Ld=!0,sp||(sp=!0,_S())}function Tc(n,a){if(!ap&&Ld){ap=!0;do for(var l=!1,c=Vd;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var v=c.suspendedLanes,E=c.pingedLanes;m=(1<<31-we(42|n)+1)-1,m&=f&~(v&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,zy(c,m))}else m=mt,m=Ze(c,c===qt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||jt(c,m)||(l=!0,zy(c,m));c=c.next}while(l);ap=!1}}function wS(){Ly()}function Ly(){Ld=sp=!1;var n=0;Wr!==0&&IS()&&(n=Wr);for(var a=_t(),l=null,c=Vd;c!==null;){var f=c.next,m=Uy(c,a);m===0?(c.next=null,l===null?Vd=f:l.next=f,f===null&&(ao=l)):(l=c,(n!==0||(m&3)!==0)&&(Ld=!0)),c=f}kn!==0&&kn!==5||Tc(n),Wr!==0&&(Wr=0)}function Uy(n,a){for(var l=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var v=31-we(m),E=1<<v,z=f[v];z===-1?((E&l)===0||(E&c)!==0)&&(f[v]=Ue(E,a)):z<=a&&(n.expiredLanes|=E),m&=~E}if(a=qt,l=mt,l=Ze(n,n===a?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,l===0||n===a&&(Ot===2||Ot===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ve(c),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||jt(n,l)){if(a=l&-l,a===n.callbackPriority)return a;switch(c!==null&&Ve(c),fn(l)){case 2:case 8:l=Tt;break;case 32:l=Xn;break;case 268435456:l=vs;break;default:l=Xn}return c=By.bind(null,n),l=ke(l,c),n.callbackPriority=a,n.callbackNode=l,a}return c!==null&&c!==null&&Ve(c),n.callbackPriority=2,n.callbackNode=null,2}function By(n,a){if(kn!==0&&kn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Pd()&&n.callbackNode!==l)return null;var c=mt;return c=Ze(n,n===qt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(wy(n,c,a),Uy(n,_t()),n.callbackNode!=null&&n.callbackNode===l?By.bind(null,n):null)}function zy(n,a){if(Pd())return null;wy(n,a,!0)}function _S(){MS(function(){(Ct&6)!==0?ke(Cn,wS):Ly()})}function rp(){if(Wr===0){var n=ql;n===0&&(n=Be,Be<<=1,(Be&261888)===0&&(Be=256)),Wr=n}return Wr}function Fy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Al(""+n)}function qy(n,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,n.id&&l.setAttribute("form",n.id),a.parentNode.insertBefore(l,a),n=new FormData(n),l.parentNode.removeChild(l),n}function NS(n,a,l,c,f){if(a==="submit"&&l&&l.stateNode===f){var m=Fy((f[yn]||null).action),v=c.submitter;v&&(a=(a=v[yn]||null)?Fy(a.formAction):v.getAttribute("formAction"),a!==null&&(m=a,v=null));var E=new ja("action","action",null,c,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Wr!==0){var z=v?qy(f,v):new FormData(f);Sm(l,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(E.preventDefault(),z=v?qy(f,v):new FormData(f),Sm(l,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var ip=0;ip<Ff.length;ip++){var lp=Ff[ip],jS=lp.toLowerCase(),SS=lp[0].toUpperCase()+lp.slice(1);ra(jS,"on"+SS)}ra(vx,"onAnimationEnd"),ra(wx,"onAnimationIteration"),ra(_x,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(zj,"onTransitionRun"),ra(Fj,"onTransitionStart"),ra(qj,"onTransitionCancel"),ra(Nx,"onTransitionEnd"),va("onMouseEnter",["mouseout","mouseover"]),va("onMouseLeave",["mouseout","mouseover"]),va("onPointerEnter",["pointerout","pointerover"]),va("onPointerLeave",["pointerout","pointerover"]),ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ES=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ac));function $y(n,a){a=(a&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],f=c.event;c=c.listeners;e:{var m=void 0;if(a)for(var v=c.length-1;0<=v;v--){var E=c[v],z=E.instance,te=E.currentTarget;if(E=E.listener,z!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=te;try{m(f)}catch(he){Zu(he)}f.currentTarget=null,m=z}else for(v=0;v<c.length;v++){if(E=c[v],z=E.instance,te=E.currentTarget,E=E.listener,z!==m&&f.isPropagationStopped())break e;m=E,f.currentTarget=te;try{m(f)}catch(he){Zu(he)}f.currentTarget=null,m=z}}}}function ht(n,a){var l=a[Ci];l===void 0&&(l=a[Ci]=new Set);var c=n+"__bubble";l.has(c)||(Hy(a,n,2,!1),l.add(c))}function op(n,a,l){var c=0;a&&(c|=4),Hy(l,n,c,a)}var Ud="_reactListening"+Math.random().toString(36).slice(2);function cp(n){if(!n[Ud]){n[Ud]=!0,Bo.forEach(function(l){l!=="selectionchange"&&(ES.has(l)||op(l,!1,n),op(l,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Ud]||(a[Ud]=!0,op("selectionchange",!1,a))}}function Hy(n,a,l,c){switch(vv(a)){case 2:var f=eE;break;case 8:f=tE;break;default:f=jp}l=f.bind(null,a,l,n),f=void 0,!Di||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(a,l,{capture:!0,passive:f}):n.addEventListener(a,l,!0):f!==void 0?n.addEventListener(a,l,{passive:f}):n.addEventListener(a,l,!1)}function up(n,a,l,c,f){var m=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var E=c.stateNode.containerInfo;if(E===f)break;if(v===4)for(v=c.return;v!==null;){var z=v.tag;if((z===3||z===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;E!==null;){if(v=xa(E),v===null)return;if(z=v.tag,z===5||z===6||z===26||z===27){c=m=v;continue e}E=E.parentNode}}c=c.return}Cr(function(){var te=m,he=Ls(l),pe=[];e:{var ne=jx.get(n);if(ne!==void 0){var le=ja,Oe=n;switch(n){case"keypress":if(Oi(l)===0)break e;case"keydown":case"keyup":le=Qu;break;case"focusin":Oe="focus",le=Vi;break;case"focusout":Oe="blur",le=Vi;break;case"beforeblur":case"afterblur":le=Vi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Zo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=y;break;case vx:case wx:case _x:le=qu;break;case Nx:le=C;break;case"scroll":case"scrollend":le=Jo;break;case"wheel":le=ie;break;case"copy":case"cut":case"paste":le=$u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=Wa;break;case"toggle":case"beforetoggle":le=at}var Ge=(a&4)!==0,zt=!Ge&&(n==="scroll"||n==="scrollend"),Q=Ge?ne!==null?ne+"Capture":null:ne;Ge=[];for(var Y=te,ee;Y!==null;){var fe=Y;if(ee=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ee===null||Q===null||(fe=ta(Y,Q),fe!=null&&Ge.push(Cc(Y,fe,ee))),zt)break;Y=Y.return}0<Ge.length&&(ne=new le(ne,Oe,null,l,he),pe.push({event:ne,listeners:Ge}))}}if((a&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",le=n==="mouseout"||n==="pointerout",ne&&l!==Ko&&(Oe=l.relatedTarget||l.fromElement)&&(xa(Oe)||Oe[ws]))break e;if((le||ne)&&(ne=he.window===he?he:(ne=he.ownerDocument)?ne.defaultView||ne.parentWindow:window,le?(Oe=l.relatedTarget||l.toElement,le=te,Oe=Oe?xa(Oe):null,Oe!==null&&(zt=u(Oe),Ge=Oe.tag,Oe!==zt||Ge!==5&&Ge!==27&&Ge!==6)&&(Oe=null)):(le=null,Oe=te),le!==Oe)){if(Ge=Zo,fe="onMouseLeave",Q="onMouseEnter",Y="mouse",(n==="pointerout"||n==="pointerover")&&(Ge=Wa,fe="onPointerLeave",Q="onPointerEnter",Y="pointer"),zt=le==null?ne:_s(le),ee=Oe==null?ne:_s(Oe),ne=new Ge(fe,Y+"leave",le,l,he),ne.target=zt,ne.relatedTarget=ee,fe=null,xa(he)===te&&(Ge=new Ge(Q,Y+"enter",Oe,l,he),Ge.target=ee,Ge.relatedTarget=zt,fe=Ge),zt=fe,le&&Oe)t:{for(Ge=TS,Q=le,Y=Oe,ee=0,fe=Q;fe;fe=Ge(fe))ee++;fe=0;for(var Fe=Y;Fe;Fe=Ge(Fe))fe++;for(;0<ee-fe;)Q=Ge(Q),ee--;for(;0<fe-ee;)Y=Ge(Y),fe--;for(;ee--;){if(Q===Y||Y!==null&&Q===Y.alternate){Ge=Q;break t}Q=Ge(Q),Y=Ge(Y)}Ge=null}else Ge=null;le!==null&&Gy(pe,ne,le,Ge,!1),Oe!==null&&zt!==null&&Gy(pe,zt,Oe,Ge,!0)}}e:{if(ne=te?_s(te):window,le=ne.nodeName&&ne.nodeName.toLowerCase(),le==="select"||le==="input"&&ne.type==="file")var St=cx;else if(lx(ne))if(ux)St=Lj;else{St=Pj;var Le=Oj}else le=ne.nodeName,!le||le.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&Tl(te.elementType)&&(St=cx):St=Vj;if(St&&(St=St(n,te))){ox(pe,St,l,he);break e}Le&&Le(n,ne,te),n==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&Go(ne,"number",ne.value)}switch(Le=te?_s(te):window,n){case"focusin":(lx(Le)||Le.contentEditable==="true")&&(Ol=Le,Uf=te,ac=null);break;case"focusout":ac=Uf=Ol=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,bx(pe,l,he);break;case"selectionchange":if(Bj)break;case"keydown":case"keyup":bx(pe,l,he)}var lt;if(At)e:{switch(n){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Ml?Li(n,l)&&(pt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(pt="onCompositionStart");pt&&(Ta&&l.locale!=="ko"&&(Ml||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Ml&&(lt=Xo()):(Na=he,Qo="value"in Na?Na.value:Na.textContent,Ml=!0)),Le=Bd(te,pt),0<Le.length&&(pt=new Ea(pt,n,null,l,he),pe.push({event:pt,listeners:Le}),lt?pt.data=lt:(lt=Dl(l),lt!==null&&(pt.data=lt)))),(lt=Bs?Rj(n,l):Ij(n,l))&&(pt=Bd(te,"onBeforeInput"),0<pt.length&&(Le=new Ea("onBeforeInput","beforeinput",null,l,he),pe.push({event:Le,listeners:pt}),Le.data=lt)),NS(pe,n,te,l,he)}$y(pe,a)})}function Cc(n,a,l){return{instance:n,listener:a,currentTarget:l}}function Bd(n,a){for(var l=a+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ta(n,l),f!=null&&c.unshift(Cc(n,f,m)),f=ta(n,a),f!=null&&c.push(Cc(n,f,m))),n.tag===3)return c;n=n.return}return[]}function TS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Gy(n,a,l,c,f){for(var m=a._reactName,v=[];l!==null&&l!==c;){var E=l,z=E.alternate,te=E.stateNode;if(E=E.tag,z!==null&&z===c)break;E!==5&&E!==26&&E!==27||te===null||(z=te,f?(te=ta(l,m),te!=null&&v.unshift(Cc(l,te,z))):f||(te=ta(l,m),te!=null&&v.push(Cc(l,te,z)))),l=l.return}v.length!==0&&n.push({event:a,listeners:v})}var AS=/\r\n?/g,CS=/\u0000|\uFFFD/g;function Yy(n){return(typeof n=="string"?n:""+n).replace(AS,`
`).replace(CS,"")}function Wy(n,a){return a=Yy(a),Yy(n)===a}function Bt(n,a,l,c,f,m){switch(l){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||is(n,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&is(n,""+c);break;case"className":Ns(n,"class",c);break;case"tabIndex":Ns(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ns(n,l,c);break;case"style":Wo(n,c,m);break;case"data":if(a!=="object"){Ns(n,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||l!=="href")){n.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=Al(""+c),n.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(a!=="input"&&Bt(n,a,"name",f.name,f,null),Bt(n,a,"formEncType",f.formEncType,f,null),Bt(n,a,"formMethod",f.formMethod,f,null),Bt(n,a,"formTarget",f.formTarget,f,null)):(Bt(n,a,"encType",f.encType,f,null),Bt(n,a,"method",f.method,f,null),Bt(n,a,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=Al(""+c),n.setAttribute(l,c);break;case"onClick":c!=null&&(n.onclick=ea);break;case"onScroll":c!=null&&ht("scroll",n);break;case"onScrollEnd":c!=null&&ht("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=l}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}l=Al(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""+c):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":c===!0?n.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,c):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(l,c):n.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(l):n.setAttribute(l,c);break;case"popover":ht("beforetoggle",n),ht("toggle",n),Sl(n,"popover",c);break;case"xlinkActuate":wn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":wn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":wn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":wn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":wn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":wn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":wn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":wn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":wn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Sl(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Bu.get(l)||l,Sl(n,l,c))}}function dp(n,a,l,c,f,m){switch(l){case"style":Wo(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(l=c.__html,l!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=l}}break;case"children":typeof c=="string"?is(n,c):(typeof c=="number"||typeof c=="bigint")&&is(n,""+c);break;case"onScroll":c!=null&&ht("scroll",n);break;case"onScrollEnd":c!=null&&ht("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zo.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),m=n[yn]||null,m=m!=null?m[l]:null,typeof m=="function"&&n.removeEventListener(a,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(a,c,f);break e}l in n?n[l]=c:c===!0?n.setAttribute(l,""):Sl(n,l,c)}}}function Un(n,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",n),ht("load",n);var c=!1,f=!1,m;for(m in l)if(l.hasOwnProperty(m)){var v=l[m];if(v!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Bt(n,a,m,v,l,null)}}f&&Bt(n,a,"srcSet",l.srcSet,l,null),c&&Bt(n,a,"src",l.src,l,null);return;case"input":ht("invalid",n);var E=m=v=f=null,z=null,te=null;for(c in l)if(l.hasOwnProperty(c)){var he=l[c];if(he!=null)switch(c){case"name":f=he;break;case"type":v=he;break;case"checked":z=he;break;case"defaultChecked":te=he;break;case"value":m=he;break;case"defaultValue":E=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(r(137,a));break;default:Bt(n,a,c,he,l,null)}}Vu(n,m,E,z,te,v,f,!1);return;case"select":ht("invalid",n),c=v=m=null;for(f in l)if(l.hasOwnProperty(f)&&(E=l[f],E!=null))switch(f){case"value":m=E;break;case"defaultValue":v=E;break;case"multiple":c=E;default:Bt(n,a,f,E,l,null)}a=m,l=v,n.multiple=!!c,a!=null?Sr(n,!!c,a,!1):l!=null&&Sr(n,!!c,l,!0);return;case"textarea":ht("invalid",n),m=f=c=null;for(v in l)if(l.hasOwnProperty(v)&&(E=l[v],E!=null))switch(v){case"value":c=E;break;case"defaultValue":f=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:Bt(n,a,v,E,l,null)}Er(n,c,f,m);return;case"option":for(z in l)l.hasOwnProperty(z)&&(c=l[z],c!=null)&&(z==="selected"?n.selected=c&&typeof c!="function"&&typeof c!="symbol":Bt(n,a,z,c,l,null));return;case"dialog":ht("beforetoggle",n),ht("toggle",n),ht("cancel",n),ht("close",n);break;case"iframe":case"object":ht("load",n);break;case"video":case"audio":for(c=0;c<Ac.length;c++)ht(Ac[c],n);break;case"image":ht("error",n),ht("load",n);break;case"details":ht("toggle",n);break;case"embed":case"source":case"link":ht("error",n),ht("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in l)if(l.hasOwnProperty(te)&&(c=l[te],c!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Bt(n,a,te,c,l,null)}return;default:if(Tl(a)){for(he in l)l.hasOwnProperty(he)&&(c=l[he],c!==void 0&&dp(n,a,he,c,l,void 0));return}}for(E in l)l.hasOwnProperty(E)&&(c=l[E],c!=null&&Bt(n,a,E,c,l,null))}function kS(n,a,l,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,E=null,z=null,te=null,he=null;for(le in l){var pe=l[le];if(l.hasOwnProperty(le)&&pe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":z=pe;default:c.hasOwnProperty(le)||Bt(n,a,le,null,c,pe)}}for(var ne in c){var le=c[ne];if(pe=l[ne],c.hasOwnProperty(ne)&&(le!=null||pe!=null))switch(ne){case"type":m=le;break;case"name":f=le;break;case"checked":te=le;break;case"defaultChecked":he=le;break;case"value":v=le;break;case"defaultValue":E=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,a));break;default:le!==pe&&Bt(n,a,ne,le,c,pe)}}El(n,v,E,z,te,he,m,f);return;case"select":le=v=E=ne=null;for(m in l)if(z=l[m],l.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":le=z;default:c.hasOwnProperty(m)||Bt(n,a,m,null,c,z)}for(f in c)if(m=c[f],z=l[f],c.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":ne=m;break;case"defaultValue":E=m;break;case"multiple":v=m;default:m!==z&&Bt(n,a,f,m,c,z)}a=E,l=v,c=le,ne!=null?Sr(n,!!l,ne,!1):!!c!=!!l&&(a!=null?Sr(n,!!l,a,!0):Sr(n,!!l,l?[]:"",!1));return;case"textarea":le=ne=null;for(E in l)if(f=l[E],l.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Bt(n,a,E,null,c,f)}for(v in c)if(f=c[v],m=l[v],c.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":ne=f;break;case"defaultValue":le=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==m&&Bt(n,a,v,f,c,m)}Lu(n,ne,le);return;case"option":for(var Oe in l)ne=l[Oe],l.hasOwnProperty(Oe)&&ne!=null&&!c.hasOwnProperty(Oe)&&(Oe==="selected"?n.selected=!1:Bt(n,a,Oe,null,c,ne));for(z in c)ne=c[z],le=l[z],c.hasOwnProperty(z)&&ne!==le&&(ne!=null||le!=null)&&(z==="selected"?n.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":Bt(n,a,z,ne,c,le));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in l)ne=l[Ge],l.hasOwnProperty(Ge)&&ne!=null&&!c.hasOwnProperty(Ge)&&Bt(n,a,Ge,null,c,ne);for(te in c)if(ne=c[te],le=l[te],c.hasOwnProperty(te)&&ne!==le&&(ne!=null||le!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,a));break;default:Bt(n,a,te,ne,c,le)}return;default:if(Tl(a)){for(var zt in l)ne=l[zt],l.hasOwnProperty(zt)&&ne!==void 0&&!c.hasOwnProperty(zt)&&dp(n,a,zt,void 0,c,ne);for(he in c)ne=c[he],le=l[he],!c.hasOwnProperty(he)||ne===le||ne===void 0&&le===void 0||dp(n,a,he,ne,c,le);return}}for(var Q in l)ne=l[Q],l.hasOwnProperty(Q)&&ne!=null&&!c.hasOwnProperty(Q)&&Bt(n,a,Q,null,c,ne);for(pe in c)ne=c[pe],le=l[pe],!c.hasOwnProperty(pe)||ne===le||ne==null&&le==null||Bt(n,a,pe,ne,c,le)}function Ky(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var f=l[c],m=f.transferSize,v=f.initiatorType,E=f.duration;if(m&&E&&Ky(v)){for(v=0,E=f.responseEnd,c+=1;c<l.length;c++){var z=l[c],te=z.startTime;if(te>E)break;var he=z.transferSize,pe=z.initiatorType;he&&Ky(pe)&&(z=z.responseEnd,v+=he*(z<E?1:(E-te)/(z-te)))}if(--c,a+=8*(m+v)/(f.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var hp=null,fp=null;function zd(n){return n.nodeType===9?n:n.ownerDocument}function Qy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xy(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function mp(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var pp=null;function IS(){var n=window.event;return n&&n.type==="popstate"?n===pp?!1:(pp=n,!0):(pp=null,!1)}var Jy=typeof setTimeout=="function"?setTimeout:void 0,DS=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,MS=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(n){return Zy.resolve(null).then(n).catch(OS)}:Jy;function OS(n){setTimeout(function(){throw n})}function Kr(n){return n==="head"}function ev(n,a){var l=a,c=0;do{var f=l.nextSibling;if(n.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(c===0){n.removeChild(f),oo(a);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")kc(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,kc(l);for(var m=l.firstChild;m;){var v=m.nextSibling,E=m.nodeName;m[ga]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=v}}else l==="body"&&kc(n.ownerDocument.body);l=f}while(l);oo(a)}function tv(n,a){var l=n;n=0;do{var c=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=c}while(l)}function gp(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":gp(l),jl(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function PS(n,a,l,c){for(;n.nodeType===1;){var f=l;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[ga])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Ys(n.nextSibling),n===null)break}return null}function VS(n,a,l){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Ys(n.nextSibling),n===null))return null;return n}function nv(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Ys(n.nextSibling),n===null))return null;return n}function xp(n){return n.data==="$?"||n.data==="$~"}function bp(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function LS(n,a){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||l.readyState!=="loading")a();else{var c=function(){a(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Ys(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var yp=null;function sv(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(a===0)return Ys(n.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}n=n.nextSibling}return null}function av(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return n;a--}else l!=="/$"&&l!=="/&"||a++}n=n.previousSibling}return null}function rv(n,a,l){switch(a=zd(l),n){case"html":if(n=a.documentElement,!n)throw Error(r(452));return n;case"head":if(n=a.head,!n)throw Error(r(453));return n;case"body":if(n=a.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function kc(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);jl(n)}var Ws=new Map,iv=new Set;function Fd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var cr=K.d;K.d={f:US,r:BS,D:zS,C:FS,L:qS,m:$S,X:GS,S:HS,M:YS};function US(){var n=cr.f(),a=Dd();return n||a}function BS(n){var a=Vs(n);a!==null&&a.tag===5&&a.type==="form"?Nb(a):cr.r(n)}var ro=typeof document>"u"?null:document;function lv(n,a,l){var c=ro;if(c&&typeof a=="string"&&a){var f=rs(a);f='link[rel="'+n+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),iv.has(f)||(iv.add(f),n={rel:n,crossOrigin:l,href:a},c.querySelector(f)===null&&(a=c.createElement("link"),Un(a,"link",n),vn(a),c.head.appendChild(a)))}}function zS(n){cr.D(n),lv("dns-prefetch",n,null)}function FS(n,a){cr.C(n,a),lv("preconnect",n,a)}function qS(n,a,l){cr.L(n,a,l);var c=ro;if(c&&n&&a){var f='link[rel="preload"][as="'+rs(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+rs(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+rs(l.imageSizes)+'"]')):f+='[href="'+rs(n)+'"]';var m=f;switch(a){case"style":m=io(n);break;case"script":m=lo(n)}Ws.has(m)||(n=w({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:n,as:a},l),Ws.set(m,n),c.querySelector(f)!==null||a==="style"&&c.querySelector(Rc(m))||a==="script"&&c.querySelector(Ic(m))||(a=c.createElement("link"),Un(a,"link",n),vn(a),c.head.appendChild(a)))}}function $S(n,a){cr.m(n,a);var l=ro;if(l&&n){var c=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+rs(c)+'"][href="'+rs(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=lo(n)}if(!Ws.has(m)&&(n=w({rel:"modulepreload",href:n},a),Ws.set(m,n),l.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ic(m)))return}c=l.createElement("link"),Un(c,"link",n),vn(c),l.head.appendChild(c)}}}function HS(n,a,l){cr.S(n,a,l);var c=ro;if(c&&n){var f=ba(c).hoistableStyles,m=io(n);a=a||"default";var v=f.get(m);if(!v){var E={loading:0,preload:null};if(v=c.querySelector(Rc(m)))E.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":a},l),(l=Ws.get(m))&&vp(n,l);var z=v=c.createElement("link");vn(z),Un(z,"link",n),z._p=new Promise(function(te,he){z.onload=te,z.onerror=he}),z.addEventListener("load",function(){E.loading|=1}),z.addEventListener("error",function(){E.loading|=2}),E.loading|=4,qd(v,a,c)}v={type:"stylesheet",instance:v,count:1,state:E},f.set(m,v)}}}function GS(n,a){cr.X(n,a);var l=ro;if(l&&n){var c=ba(l).hoistableScripts,f=lo(n),m=c.get(f);m||(m=l.querySelector(Ic(f)),m||(n=w({src:n,async:!0},a),(a=Ws.get(f))&&wp(n,a),m=l.createElement("script"),vn(m),Un(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function YS(n,a){cr.M(n,a);var l=ro;if(l&&n){var c=ba(l).hoistableScripts,f=lo(n),m=c.get(f);m||(m=l.querySelector(Ic(f)),m||(n=w({src:n,async:!0,type:"module"},a),(a=Ws.get(f))&&wp(n,a),m=l.createElement("script"),vn(m),Un(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function ov(n,a,l,c){var f=(f=De.current)?Fd(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=io(l.href),l=ba(f).hoistableStyles,c=l.get(a),c||(c={type:"style",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=io(l.href);var m=ba(f).hoistableStyles,v=m.get(n);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,v),(m=f.querySelector(Rc(n)))&&!m._p&&(v.instance=m,v.state.loading=5),Ws.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ws.set(n,l),m||WS(f,n,l,v.state))),a&&c===null)throw Error(r(528,""));return v}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=lo(l),l=ba(f).hoistableScripts,c=l.get(a),c||(c={type:"script",instance:null,count:0,state:null},l.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function io(n){return'href="'+rs(n)+'"'}function Rc(n){return'link[rel="stylesheet"]['+n+"]"}function cv(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function WS(n,a,l,c){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=n.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Un(a,"link",l),vn(a),n.head.appendChild(a))}function lo(n){return'[src="'+rs(n)+'"]'}function Ic(n){return"script[async]"+n}function uv(n,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var c=n.querySelector('style[data-href~="'+rs(l.href)+'"]');if(c)return a.instance=c,vn(c),c;var f=w({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),vn(c),Un(c,"style",f),qd(c,l.precedence,n),a.instance=c;case"stylesheet":f=io(l.href);var m=n.querySelector(Rc(f));if(m)return a.state.loading|=4,a.instance=m,vn(m),m;c=cv(l),(f=Ws.get(f))&&vp(c,f),m=(n.ownerDocument||n).createElement("link"),vn(m);var v=m;return v._p=new Promise(function(E,z){v.onload=E,v.onerror=z}),Un(m,"link",c),a.state.loading|=4,qd(m,l.precedence,n),a.instance=m;case"script":return m=lo(l.src),(f=n.querySelector(Ic(m)))?(a.instance=f,vn(f),f):(c=l,(f=Ws.get(m))&&(c=w({},l),wp(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),vn(f),Un(f,"link",c),n.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,qd(c,l.precedence,n));return a.instance}function qd(n,a,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,v=0;v<c.length;v++){var E=c[v];if(E.dataset.precedence===a)m=E;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(n,a.firstChild))}function vp(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function wp(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var $d=null;function dv(n,a,l){if($d===null){var c=new Map,f=$d=new Map;f.set(l,c)}else f=$d,c=f.get(l),c||(c=new Map,f.set(l,c));if(c.has(n))return c;for(c.set(n,null),l=l.getElementsByTagName(n),f=0;f<l.length;f++){var m=l[f];if(!(m[ga]||m[rn]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(a)||"";v=n+v;var E=c.get(v);E?E.push(m):c.set(v,[m])}}return c}function hv(n,a,l){n=n.ownerDocument||n,n.head.insertBefore(l,a==="title"?n.querySelector("head > title"):null)}function KS(n,a,l){if(l===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(n=a.disabled,typeof a.precedence=="string"&&n==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function fv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function QS(n,a,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=io(c.href),m=a.querySelector(Rc(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Hd.bind(n),a.then(n,n)),l.state.loading|=4,l.instance=m,vn(m);return}m=a.ownerDocument||a,c=cv(c),(f=Ws.get(f))&&vp(c,f),m=m.createElement("link"),vn(m);var v=m;v._p=new Promise(function(E,z){v.onload=E,v.onerror=z}),Un(m,"link",c),l.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=Hd.bind(n),a.addEventListener("load",l),a.addEventListener("error",l))}}var _p=0;function XS(n,a){return n.stylesheets&&n.count===0&&Yd(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var c=setTimeout(function(){if(n.stylesheets&&Yd(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+a);0<n.imgBytes&&_p===0&&(_p=62500*RS());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Yd(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>_p?50:800)+a);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function Hd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Gd=null;function Yd(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Gd=new Map,a.forEach(JS,n),Gd=null,Hd.call(n))}function JS(n,a){if(!(a.state.loading&4)){var l=Gd.get(n);if(l)var c=l.get(null);else{l=new Map,Gd.set(n,l);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(l.set(v.dataset.precedence,v),c=v)}c&&l.set(null,c)}f=a.instance,v=f.getAttribute("data-precedence"),m=l.get(v)||c,m===c&&l.set(null,f),l.set(v,f),this.count++,c=Hd.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),a.state.loading|=4}}var Dc={$$typeof:q,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function ZS(n,a,l,c,f,m,v,E,z){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function mv(n,a,l,c,f,m,v,E,z,te,he,pe){return n=new ZS(n,a,l,v,z,te,he,pe,E),a=1,m===!0&&(a|=24),m=Ss(3,null,null,a),n.current=m,m.stateNode=n,a=tm(),a.refCount++,n.pooledCache=a,a.refCount++,m.memoizedState={element:c,isDehydrated:l,cache:a},rm(m),n}function pv(n){return n?(n=Ll,n):Ll}function gv(n,a,l,c,f,m){f=pv(f),c.context===null?c.context=f:c.pendingContext=f,c=Lr(a),c.payload={element:l},m=m===void 0?null:m,m!==null&&(c.callback=m),l=Ur(n,c,a),l!==null&&(ds(l,n,a),dc(l,n,a))}function xv(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<a?l:a}}function Np(n,a){xv(n,a),(n=n.alternate)&&xv(n,a)}function bv(n){if(n.tag===13||n.tag===31){var a=zi(n,67108864);a!==null&&ds(a,n,67108864),Np(n,67108864)}}function yv(n){if(n.tag===13||n.tag===31){var a=ks();a=Ha(a);var l=zi(n,a);l!==null&&ds(l,n,a),Np(n,a)}}var Wd=!0;function eE(n,a,l,c){var f=I.T;I.T=null;var m=K.p;try{K.p=2,jp(n,a,l,c)}finally{K.p=m,I.T=f}}function tE(n,a,l,c){var f=I.T;I.T=null;var m=K.p;try{K.p=8,jp(n,a,l,c)}finally{K.p=m,I.T=f}}function jp(n,a,l,c){if(Wd){var f=Sp(c);if(f===null)up(n,a,c,Kd,l),wv(n,c);else if(sE(f,n,a,l,c))c.stopPropagation();else if(wv(n,c),a&4&&-1<nE.indexOf(n)){for(;f!==null;){var m=Vs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Qe(m.pendingLanes);if(v!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var z=1<<31-we(v);E.entanglements[1]|=z,v&=~z}Ra(m),(Ct&6)===0&&(Rd=_t()+500,Tc(0))}}break;case 31:case 13:E=zi(m,2),E!==null&&ds(E,m,2),Dd(),Np(m,2)}if(m=Sp(c),m===null&&up(n,a,c,Kd,l),m===f)break;f=m}f!==null&&c.stopPropagation()}else up(n,a,c,null,l)}}function Sp(n){return n=Ls(n),Ep(n)}var Kd=null;function Ep(n){if(Kd=null,n=xa(n),n!==null){var a=u(n);if(a===null)n=null;else{var l=a.tag;if(l===13){if(n=d(a),n!==null)return n;n=null}else if(l===31){if(n=p(a),n!==null)return n;n=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Kd=n,null}function vv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case Cn:return 2;case Tt:return 8;case Xn:case qn:return 32;case vs:return 268435456;default:return 32}default:return 32}}var Tp=!1,Qr=null,Xr=null,Jr=null,Mc=new Map,Oc=new Map,Zr=[],nE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wv(n,a){switch(n){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Mc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oc.delete(a.pointerId)}}function Pc(n,a,l,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:a,domEventName:l,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},a!==null&&(a=Vs(a),a!==null&&bv(a)),n):(n.eventSystemFlags|=c,a=n.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),n)}function sE(n,a,l,c,f){switch(a){case"focusin":return Qr=Pc(Qr,n,a,l,c,f),!0;case"dragenter":return Xr=Pc(Xr,n,a,l,c,f),!0;case"mouseover":return Jr=Pc(Jr,n,a,l,c,f),!0;case"pointerover":var m=f.pointerId;return Mc.set(m,Pc(Mc.get(m)||null,n,a,l,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Oc.set(m,Pc(Oc.get(m)||null,n,a,l,c,f)),!0}return!1}function _v(n){var a=xa(n.target);if(a!==null){var l=u(a);if(l!==null){if(a=l.tag,a===13){if(a=d(l),a!==null){n.blockedOn=a,bn(n.priority,function(){yv(l)});return}}else if(a===31){if(a=p(l),a!==null){n.blockedOn=a,bn(n.priority,function(){yv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Qd(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var l=Sp(n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);Ko=c,l.target.dispatchEvent(c),Ko=null}else return a=Vs(l),a!==null&&bv(a),n.blockedOn=l,!1;a.shift()}return!0}function Nv(n,a,l){Qd(n)&&l.delete(a)}function aE(){Tp=!1,Qr!==null&&Qd(Qr)&&(Qr=null),Xr!==null&&Qd(Xr)&&(Xr=null),Jr!==null&&Qd(Jr)&&(Jr=null),Mc.forEach(Nv),Oc.forEach(Nv)}function Xd(n,a){n.blockedOn===a&&(n.blockedOn=null,Tp||(Tp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,aE)))}var Jd=null;function jv(n){Jd!==n&&(Jd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Jd===n&&(Jd=null);for(var a=0;a<n.length;a+=3){var l=n[a],c=n[a+1],f=n[a+2];if(typeof c!="function"){if(Ep(c||l)===null)continue;break}var m=Vs(l);m!==null&&(n.splice(a,3),a-=3,Sm(m,{pending:!0,data:f,method:l.method,action:c},c,f))}}))}function oo(n){function a(z){return Xd(z,n)}Qr!==null&&Xd(Qr,n),Xr!==null&&Xd(Xr,n),Jr!==null&&Xd(Jr,n),Mc.forEach(a),Oc.forEach(a);for(var l=0;l<Zr.length;l++){var c=Zr[l];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Zr.length&&(l=Zr[0],l.blockedOn===null);)_v(l),l.blockedOn===null&&Zr.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var f=l[c],m=l[c+1],v=f[yn]||null;if(typeof m=="function")v||jv(l);else if(v){var E=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[yn]||null)E=v.formAction;else if(Ep(f)!==null)continue}else E=v.action;typeof E=="function"?l[c+1]=E:(l.splice(c,3),c-=3),jv(l)}}}function Sv(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function Ap(n){this._internalRoot=n}Zd.prototype.render=Ap.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,c=ks();gv(l,c,n,a,null,null)},Zd.prototype.unmount=Ap.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;gv(n.current,2,null,n,null,null),Dd(),a[ws]=null}};function Zd(n){this._internalRoot=n}Zd.prototype.unstable_scheduleHydration=function(n){if(n){var a=Ai();n={blockedOn:null,target:n,priority:a};for(var l=0;l<Zr.length&&a!==0&&a<Zr[l].priority;l++);Zr.splice(l,0,n),l===0&&_v(n)}};var Ev=e.version;if(Ev!=="19.2.4")throw Error(r(527,Ev,"19.2.4"));K.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=x(a),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var rE={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{H=eh.inject(rE),re=eh}catch{}}return Lc.createRoot=function(n,a){if(!o(n))throw Error(r(299));var l=!1,c="",f=Db,m=Mb,v=Ob;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),a=mv(n,1,!1,null,null,l,c,null,f,m,v,Sv),n[ws]=a.current,cp(n),new Ap(a)},Lc.hydrateRoot=function(n,a,l){if(!o(n))throw Error(r(299));var c=!1,f="",m=Db,v=Mb,E=Ob,z=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),a=mv(n,1,!0,a,l??null,c,f,z,m,v,E,Sv),a.context=pv(null),l=a.current,c=ks(),c=Ha(c),f=Lr(c),f.callback=null,Ur(l,f,c),l=c,a.current.lanes=l,an(a,l),Ra(a),n[ws]=a.current,cp(n),new Zd(a)},Lc.version="19.2.4",Lc}var Pv;function pE(){if(Pv)return Rp.exports;Pv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rp.exports=mE(),Rp.exports}var gE=pE();const xE=G0(gE);var Vv="popstate";function bE(s={}){function e(o,u){let{pathname:d="/",search:p="",hash:g=""}=bl(o.location.hash.substring(1));return!d.startsWith("/")&&!d.startsWith(".")&&(d="/"+d),l0("",{pathname:d,search:p,hash:g},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function t(o,u){let d=o.document.querySelector("base"),p="";if(d&&d.getAttribute("href")){let g=o.location.href,x=g.indexOf("#");p=x===-1?g:g.slice(0,x)}return p+"#"+(typeof u=="string"?u:ru(u))}function r(o,u){Js(o.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return vE(e,t,r,s)}function en(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Js(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yE(){return Math.random().toString(36).substring(2,10)}function Lv(s,e){return{usr:s.state,key:s.key,idx:e}}function l0(s,e,t=null,r){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?bl(e):e,state:t,key:e&&e.key||r||yE()}}function ru({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function bl(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let r=s.indexOf("?");r>=0&&(e.search=s.substring(r),s=s.substring(0,r)),s&&(e.pathname=s)}return e}function vE(s,e,t,r={}){let{window:o=document.defaultView,v5Compat:u=!1}=r,d=o.history,p="POP",g=null,x=b();x==null&&(x=0,d.replaceState({...d.state,idx:x},""));function b(){return(d.state||{idx:null}).idx}function w(){p="POP";let O=b(),U=O==null?null:O-x;x=O,g&&g({action:p,location:V.location,delta:U})}function j(O,U){p="PUSH";let G=l0(V.location,O,U);t&&t(G,O),x=b()+1;let q=Lv(G,x),ae=V.createHref(G);try{d.pushState(q,"",ae)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(ae)}u&&g&&g({action:p,location:V.location,delta:1})}function T(O,U){p="REPLACE";let G=l0(V.location,O,U);t&&t(G,O),x=b();let q=Lv(G,x),ae=V.createHref(G);d.replaceState(q,"",ae),u&&g&&g({action:p,location:V.location,delta:0})}function L(O){return wE(O)}let V={get action(){return p},get location(){return s(o,d)},listen(O){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Vv,w),g=O,()=>{o.removeEventListener(Vv,w),g=null}},createHref(O){return e(o,O)},createURL:L,encodeLocation(O){let U=L(O);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:j,replace:T,go(O){return d.go(O)}};return V}function wE(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),en(t,"No window.location.(origin|href) available to create URL");let r=typeof s=="string"?s:ru(s);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function t_(s,e,t="/"){return _E(s,e,t,!1)}function _E(s,e,t,r){let o=typeof e=="string"?bl(e):e,u=xr(o.pathname||"/",t);if(u==null)return null;let d=n_(s);NE(d);let p=null;for(let g=0;p==null&&g<d.length;++g){let x=ME(u);p=IE(d[g],x,r)}return p}function n_(s,e=[],t=[],r="",o=!1){let u=(d,p,g=o,x)=>{let b={relativePath:x===void 0?d.path||"":x,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(b.relativePath.startsWith("/")){if(!b.relativePath.startsWith(r)&&g)return;en(b.relativePath.startsWith(r),`Absolute route path "${b.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(r.length)}let w=fr([r,b.relativePath]),j=t.concat(b);d.children&&d.children.length>0&&(en(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),n_(d.children,e,j,w,g)),!(d.path==null&&!d.index)&&e.push({path:w,score:kE(w,d.index),routesMeta:j})};return s.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))u(d,p);else for(let g of s_(d.path))u(d,p,!0,g)}),e}function s_(s){let e=s.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(r.length===0)return o?[u,""]:[u];let d=s_(r.join("/")),p=[];return p.push(...d.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...d),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function NE(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:RE(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var jE=/^:[\w-]+$/,SE=3,EE=2,TE=1,AE=10,CE=-2,Uv=s=>s==="*";function kE(s,e){let t=s.split("/"),r=t.length;return t.some(Uv)&&(r+=CE),e&&(r+=EE),t.filter(o=>!Uv(o)).reduce((o,u)=>o+(jE.test(u)?SE:u===""?TE:AE),r)}function RE(s,e){return s.length===e.length&&s.slice(0,-1).every((r,o)=>r===e[o])?s[s.length-1]-e[e.length-1]:0}function IE(s,e,t=!1){let{routesMeta:r}=s,o={},u="/",d=[];for(let p=0;p<r.length;++p){let g=r[p],x=p===r.length-1,b=u==="/"?e:e.slice(u.length)||"/",w=Ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:x},b),j=g.route;if(!w&&x&&t&&!r[r.length-1].route.index&&(w=Ih({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},b)),!w)return null;Object.assign(o,w.params),d.push({params:o,pathname:fr([u,w.pathname]),pathnameBase:LE(fr([u,w.pathnameBase])),route:j}),w.pathnameBase!=="/"&&(u=fr([u,w.pathnameBase]))}return d}function Ih(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,r]=DE(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let u=o[0],d=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:r.reduce((x,{paramName:b,isOptional:w},j)=>{if(b==="*"){let L=p[j]||"";d=u.slice(0,u.length-L.length).replace(/(.)\/+$/,"$1")}const T=p[j];return w&&!T?x[b]=void 0:x[b]=(T||"").replace(/%2F/g,"/"),x},{}),pathname:u,pathnameBase:d,pattern:s}}function DE(s,e=!1,t=!0){Js(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let r=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,g)=>(r.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(r.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function ME(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Js(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function xr(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=s.charAt(t);return r&&r!=="/"?null:s.slice(t)||"/"}var OE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function PE(s,e="/"){let{pathname:t,search:r="",hash:o=""}=typeof s=="string"?bl(s):s,u;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?u=Bv(t.substring(1),"/"):u=Bv(t,e)):u=e,{pathname:u,search:UE(r),hash:BE(o)}}function Bv(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Op(s,e,t,r){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VE(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function W0(s){let e=VE(s);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function K0(s,e,t,r=!1){let o;typeof s=="string"?o=bl(s):(o={...s},en(!o.pathname||!o.pathname.includes("?"),Op("?","pathname","search",o)),en(!o.pathname||!o.pathname.includes("#"),Op("#","pathname","hash",o)),en(!o.search||!o.search.includes("#"),Op("#","search","hash",o)));let u=s===""||o.pathname==="",d=u?"/":o.pathname,p;if(d==null)p=t;else{let w=e.length-1;if(!r&&d.startsWith("..")){let j=d.split("/");for(;j[0]==="..";)j.shift(),w-=1;o.pathname=j.join("/")}p=w>=0?e[w]:"/"}let g=PE(o,p),x=d&&d!=="/"&&d.endsWith("/"),b=(u||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(x||b)&&(g.pathname+="/"),g}var fr=s=>s.join("/").replace(/\/\/+/g,"/"),LE=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),UE=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,BE=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s,zE=class{constructor(s,e,t,r=!1){this.status=s,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function FE(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function qE(s){return s.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var a_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function r_(s,e){let t=s;if(typeof t!="string"||!OE.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,o=!1;if(a_)try{let u=new URL(window.location.href),d=t.startsWith("//")?new URL(u.protocol+t):new URL(t),p=xr(d.pathname,e);d.origin===u.origin&&p!=null?t=p+d.search+d.hash:o=!0}catch{Js(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:o,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var i_=["POST","PUT","PATCH","DELETE"];new Set(i_);var $E=["GET",...i_];new Set($E);var Ro=N.createContext(null);Ro.displayName="DataRouter";var nf=N.createContext(null);nf.displayName="DataRouterState";var HE=N.createContext(!1),l_=N.createContext({isTransitioning:!1});l_.displayName="ViewTransition";var GE=N.createContext(new Map);GE.displayName="Fetchers";var YE=N.createContext(null);YE.displayName="Await";var Ps=N.createContext(null);Ps.displayName="Navigation";var bu=N.createContext(null);bu.displayName="Location";var pa=N.createContext({outlet:null,matches:[],isDataRoute:!1});pa.displayName="Route";var Q0=N.createContext(null);Q0.displayName="RouteError";var o_="REACT_ROUTER_ERROR",WE="REDIRECT",KE="ROUTE_ERROR_RESPONSE";function QE(s){if(s.startsWith(`${o_}:${WE}:{`))try{let e=JSON.parse(s.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function XE(s){if(s.startsWith(`${o_}:${KE}:{`))try{let e=JSON.parse(s.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new zE(e.status,e.statusText,e.data)}catch{}}function JE(s,{relative:e}={}){en(Io(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=N.useContext(Ps),{hash:o,pathname:u,search:d}=yu(s,{relative:e}),p=u;return t!=="/"&&(p=u==="/"?t:fr([t,u])),r.createHref({pathname:p,search:d,hash:o})}function Io(){return N.useContext(bu)!=null}function wi(){return en(Io(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(bu).location}var c_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function u_(s){N.useContext(Ps).static||N.useLayoutEffect(s)}function Do(){let{isDataRoute:s}=N.useContext(pa);return s?dT():ZE()}function ZE(){en(Io(),"useNavigate() may be used only in the context of a <Router> component.");let s=N.useContext(Ro),{basename:e,navigator:t}=N.useContext(Ps),{matches:r}=N.useContext(pa),{pathname:o}=wi(),u=JSON.stringify(W0(r)),d=N.useRef(!1);return u_(()=>{d.current=!0}),N.useCallback((g,x={})=>{if(Js(d.current,c_),!d.current)return;if(typeof g=="number"){t.go(g);return}let b=K0(g,JSON.parse(u),o,x.relative==="path");s==null&&e!=="/"&&(b.pathname=b.pathname==="/"?e:fr([e,b.pathname])),(x.replace?t.replace:t.push)(b,x.state,x)},[e,t,u,o,s])}N.createContext(null);function Mo(){let{matches:s}=N.useContext(pa),e=s[s.length-1];return e?e.params:{}}function yu(s,{relative:e}={}){let{matches:t}=N.useContext(pa),{pathname:r}=wi(),o=JSON.stringify(W0(t));return N.useMemo(()=>K0(s,JSON.parse(o),r,e==="path"),[s,o,r,e])}function eT(s,e){return d_(s,e)}function d_(s,e,t,r,o){en(Io(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=N.useContext(Ps),{matches:d}=N.useContext(pa),p=d[d.length-1],g=p?p.params:{},x=p?p.pathname:"/",b=p?p.pathnameBase:"/",w=p&&p.route;{let G=w&&w.path||"";f_(x,!w||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${x}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let j=wi(),T;if(e){let G=typeof e=="string"?bl(e):e;en(b==="/"||G.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${G.pathname}" was given in the \`location\` prop.`),T=G}else T=j;let L=T.pathname||"/",V=L;if(b!=="/"){let G=b.replace(/^\//,"").split("/");V="/"+L.replace(/^\//,"").split("/").slice(G.length).join("/")}let O=t_(s,{pathname:V});Js(w||O!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Js(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=rT(O&&O.map(G=>Object.assign({},G,{params:Object.assign({},g,G.params),pathname:fr([b,u.encodeLocation?u.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?b:fr([b,u.encodeLocation?u.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),d,t,r,o);return e&&U?N.createElement(bu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},U):U}function tT(){let s=uT(),e=FE(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},u={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:u},"ErrorBoundary")," or"," ",N.createElement("code",{style:u},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),t?N.createElement("pre",{style:o},t):null,d)}var nT=N.createElement(tT,null),h_=class extends N.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){let s=this.state.error;if(this.context&&typeof s=="object"&&s&&"digest"in s&&typeof s.digest=="string"){const t=XE(s.digest);t&&(s=t)}let e=s!==void 0?N.createElement(pa.Provider,{value:this.props.routeContext},N.createElement(Q0.Provider,{value:s,children:this.props.component})):this.props.children;return this.context?N.createElement(sT,{error:s},e):e}};h_.contextType=HE;var Pp=new WeakMap;function sT({children:s,error:e}){let{basename:t}=N.useContext(Ps);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=QE(e.digest);if(r){let o=Pp.get(e);if(o)throw o;let u=r_(r.location,t);if(a_&&!Pp.get(e))if(u.isExternal||r.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:r.replace}));throw Pp.set(e,d),d}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return s}function aT({routeContext:s,match:e,children:t}){let r=N.useContext(Ro);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(pa.Provider,{value:s},t)}function rT(s,e=[],t=null,r=null,o=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,d=t?.errors;if(d!=null){let b=u.findIndex(w=>w.route.id&&d?.[w.route.id]!==void 0);en(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),u=u.slice(0,Math.min(u.length,b+1))}let p=!1,g=-1;if(t)for(let b=0;b<u.length;b++){let w=u[b];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=b),w.route.id){let{loaderData:j,errors:T}=t,L=w.route.loader&&!j.hasOwnProperty(w.route.id)&&(!T||T[w.route.id]===void 0);if(w.route.lazy||L){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let x=t&&r?(b,w)=>{r(b,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:qE(t.matches),errorInfo:w})}:void 0;return u.reduceRight((b,w,j)=>{let T,L=!1,V=null,O=null;t&&(T=d&&w.route.id?d[w.route.id]:void 0,V=w.route.errorElement||nT,p&&(g<0&&j===0?(f_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,O=null):g===j&&(L=!0,O=w.route.hydrateFallbackElement||null)));let U=e.concat(u.slice(0,j+1)),G=()=>{let q;return T?q=V:L?q=O:w.route.Component?q=N.createElement(w.route.Component,null):w.route.element?q=w.route.element:q=b,N.createElement(aT,{match:w,routeContext:{outlet:b,matches:U,isDataRoute:t!=null},children:q})};return t&&(w.route.ErrorBoundary||w.route.errorElement||j===0)?N.createElement(h_,{location:t.location,revalidation:t.revalidation,component:V,error:T,children:G(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:x}):G()},null)}function X0(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iT(s){let e=N.useContext(Ro);return en(e,X0(s)),e}function lT(s){let e=N.useContext(nf);return en(e,X0(s)),e}function oT(s){let e=N.useContext(pa);return en(e,X0(s)),e}function J0(s){let e=oT(s),t=e.matches[e.matches.length-1];return en(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function cT(){return J0("useRouteId")}function uT(){let s=N.useContext(Q0),e=lT("useRouteError"),t=J0("useRouteError");return s!==void 0?s:e.errors?.[t]}function dT(){let{router:s}=iT("useNavigate"),e=J0("useNavigate"),t=N.useRef(!1);return u_(()=>{t.current=!0}),N.useCallback(async(o,u={})=>{Js(t.current,c_),t.current&&(typeof o=="number"?await s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var zv={};function f_(s,e,t){!e&&!zv[s]&&(zv[s]=!0,Js(!1,t))}N.memo(hT);function hT({routes:s,future:e,state:t,onError:r}){return d_(s,void 0,t,r,e)}function fT({to:s,replace:e,state:t,relative:r}){en(Io(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=N.useContext(Ps);Js(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=N.useContext(pa),{pathname:d}=wi(),p=Do(),g=K0(s,W0(u),d,r==="path"),x=JSON.stringify(g);return N.useEffect(()=>{p(JSON.parse(x),{replace:e,state:t,relative:r})},[p,x,r,e,t]),null}function oa(s){en(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function mT({basename:s="/",children:e=null,location:t,navigationType:r="POP",navigator:o,static:u=!1,unstable_useTransitions:d}){en(!Io(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=s.replace(/^\/*/,"/"),g=N.useMemo(()=>({basename:p,navigator:o,static:u,unstable_useTransitions:d,future:{}}),[p,o,u,d]);typeof t=="string"&&(t=bl(t));let{pathname:x="/",search:b="",hash:w="",state:j=null,key:T="default"}=t,L=N.useMemo(()=>{let V=xr(x,p);return V==null?null:{location:{pathname:V,search:b,hash:w,state:j,key:T},navigationType:r}},[p,x,b,w,j,T,r]);return Js(L!=null,`<Router basename="${p}"> is not able to match the URL "${x}${b}${w}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:N.createElement(Ps.Provider,{value:g},N.createElement(bu.Provider,{children:e,value:L}))}function pT({children:s,location:e}){return eT(o0(s),e)}function o0(s,e=[]){let t=[];return N.Children.forEach(s,(r,o)=>{if(!N.isValidElement(r))return;let u=[...e,o];if(r.type===N.Fragment){t.push.apply(t,o0(r.props.children,u));return}en(r.type===oa,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),en(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||u.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=o0(r.props.children,u)),t.push(d)}),t}var ph="get",gh="application/x-www-form-urlencoded";function sf(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function gT(s){return sf(s)&&s.tagName.toLowerCase()==="button"}function xT(s){return sf(s)&&s.tagName.toLowerCase()==="form"}function bT(s){return sf(s)&&s.tagName.toLowerCase()==="input"}function yT(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function vT(s,e){return s.button===0&&(!e||e==="_self")&&!yT(s)}var th=null;function wT(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var _T=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vp(s){return s!=null&&!_T.has(s)?(Js(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gh}"`),null):s}function NT(s,e){let t,r,o,u,d;if(xT(s)){let p=s.getAttribute("action");r=p?xr(p,e):null,t=s.getAttribute("method")||ph,o=Vp(s.getAttribute("enctype"))||gh,u=new FormData(s)}else if(gT(s)||bT(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(r=g?xr(g,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||ph,o=Vp(s.getAttribute("formenctype"))||Vp(p.getAttribute("enctype"))||gh,u=new FormData(p,s),!wT()){let{name:x,type:b,value:w}=s;if(b==="image"){let j=x?`${x}.`:"";u.append(`${j}x`,"0"),u.append(`${j}y`,"0")}else x&&u.append(x,w)}}else{if(sf(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ph,r=null,o=gh,d=s}return u&&o==="text/plain"&&(d=u,u=void 0),{action:r,method:t.toLowerCase(),encType:o,formData:u,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Z0(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function jT(s,e,t,r){let o=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return t?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${r}`:o.pathname=`${o.pathname}.${r}`:o.pathname==="/"?o.pathname=`_root.${r}`:e&&xr(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${r}`,o}async function ST(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ET(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function TT(s,e,t){let r=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let d=await ST(u,t);return d.links?d.links():[]}return[]}));return RT(r.flat(1).filter(ET).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Fv(s,e,t,r,o,u){let d=(g,x)=>t[x]?g.route.id!==t[x].route.id:!0,p=(g,x)=>t[x].pathname!==g.pathname||t[x].route.path?.endsWith("*")&&t[x].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,x)=>d(g,x)||p(g,x)):u==="data"?e.filter((g,x)=>{let b=r.routes[g.route.id];if(!b||!b.hasLoader)return!1;if(d(g,x)||p(g,x))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function AT(s,e,{includeHydrateFallback:t}={}){return CT(s.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function CT(s){return[...new Set(s)]}function kT(s){let e={},t=Object.keys(s).sort();for(let r of t)e[r]=s[r];return e}function RT(s,e){let t=new Set;return new Set(e),s.reduce((r,o)=>{let u=JSON.stringify(kT(o));return t.has(u)||(t.add(u),r.push({key:u,link:o})),r},[])}function m_(){let s=N.useContext(Ro);return Z0(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function IT(){let s=N.useContext(nf);return Z0(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var eg=N.createContext(void 0);eg.displayName="FrameworkContext";function p_(){let s=N.useContext(eg);return Z0(s,"You must render this element inside a <HydratedRouter> element"),s}function DT(s,e){let t=N.useContext(eg),[r,o]=N.useState(!1),[u,d]=N.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:x,onMouseLeave:b,onTouchStart:w}=e,j=N.useRef(null);N.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let V=U=>{U.forEach(G=>{d(G.isIntersecting)})},O=new IntersectionObserver(V,{threshold:.5});return j.current&&O.observe(j.current),()=>{O.disconnect()}}},[s]),N.useEffect(()=>{if(r){let V=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(V)}}},[r]);let T=()=>{o(!0)},L=()=>{o(!1),d(!1)};return t?s!=="intent"?[u,j,{}]:[u,j,{onFocus:Uc(p,T),onBlur:Uc(g,L),onMouseEnter:Uc(x,T),onMouseLeave:Uc(b,L),onTouchStart:Uc(w,T)}]:[!1,j,{}]}function Uc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function MT({page:s,...e}){let{router:t}=m_(),r=N.useMemo(()=>t_(t.routes,s,t.basename),[t.routes,s,t.basename]);return r?N.createElement(PT,{page:s,matches:r,...e}):null}function OT(s){let{manifest:e,routeModules:t}=p_(),[r,o]=N.useState([]);return N.useEffect(()=>{let u=!1;return TT(s,e,t).then(d=>{u||o(d)}),()=>{u=!0}},[s,e,t]),r}function PT({page:s,matches:e,...t}){let r=wi(),{future:o,manifest:u,routeModules:d}=p_(),{basename:p}=m_(),{loaderData:g,matches:x}=IT(),b=N.useMemo(()=>Fv(s,e,x,u,r,"data"),[s,e,x,u,r]),w=N.useMemo(()=>Fv(s,e,x,u,r,"assets"),[s,e,x,u,r]),j=N.useMemo(()=>{if(s===r.pathname+r.search+r.hash)return[];let V=new Set,O=!1;if(e.forEach(G=>{let q=u.routes[G.route.id];!q||!q.hasLoader||(!b.some(ae=>ae.route.id===G.route.id)&&G.route.id in g&&d[G.route.id]?.shouldRevalidate||q.hasClientLoader?O=!0:V.add(G.route.id))}),V.size===0)return[];let U=jT(s,p,o.unstable_trailingSlashAwareDataRequests,"data");return O&&V.size>0&&U.searchParams.set("_routes",e.filter(G=>V.has(G.route.id)).map(G=>G.route.id).join(",")),[U.pathname+U.search]},[p,o.unstable_trailingSlashAwareDataRequests,g,r,u,b,e,s,d]),T=N.useMemo(()=>AT(w,u),[w,u]),L=OT(w);return N.createElement(N.Fragment,null,j.map(V=>N.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),T.map(V=>N.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),L.map(({key:V,link:O})=>N.createElement("link",{key:V,nonce:t.nonce,...O,crossOrigin:O.crossOrigin??t.crossOrigin})))}function VT(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var LT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LT&&(window.__reactRouterVersion="7.13.0")}catch{}function UT({basename:s,children:e,unstable_useTransitions:t,window:r}){let o=N.useRef();o.current==null&&(o.current=bE({window:r,v5Compat:!0}));let u=o.current,[d,p]=N.useState({action:u.action,location:u.location}),g=N.useCallback(x=>{t===!1?p(x):N.startTransition(()=>p(x))},[t]);return N.useLayoutEffect(()=>u.listen(g),[u,g]),N.createElement(mT,{basename:s,children:e,location:d.location,navigationType:d.action,navigator:u,unstable_useTransitions:t})}var g_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=N.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:o,reloadDocument:u,replace:d,state:p,target:g,to:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:j,...T},L){let{basename:V,unstable_useTransitions:O}=N.useContext(Ps),U=typeof x=="string"&&g_.test(x),G=r_(x,V);x=G.to;let q=JE(x,{relative:o}),[ae,ce,W]=DT(r,T),S=qT(x,{replace:d,state:p,target:g,preventScrollReset:b,relative:o,viewTransition:w,unstable_defaultShouldRevalidate:j,unstable_useTransitions:O});function A(B){e&&e(B),B.defaultPrevented||S(B)}let k=N.createElement("a",{...T,...W,href:G.absoluteURL||q,onClick:G.isExternal||u?e:A,ref:VT(L,ce),target:g,"data-discover":!U&&t==="render"?"true":void 0});return ae&&!U?N.createElement(N.Fragment,null,k,N.createElement(MT,{page:q})):k});st.displayName="Link";var BT=N.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:o=!1,style:u,to:d,viewTransition:p,children:g,...x},b){let w=yu(d,{relative:x.relative}),j=wi(),T=N.useContext(nf),{navigator:L,basename:V}=N.useContext(Ps),O=T!=null&&WT(w)&&p===!0,U=L.encodeLocation?L.encodeLocation(w).pathname:w.pathname,G=j.pathname,q=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(G=G.toLowerCase(),q=q?q.toLowerCase():null,U=U.toLowerCase()),q&&V&&(q=xr(q,V)||q);const ae=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let ce=G===U||!o&&G.startsWith(U)&&G.charAt(ae)==="/",W=q!=null&&(q===U||!o&&q.startsWith(U)&&q.charAt(U.length)==="/"),S={isActive:ce,isPending:W,isTransitioning:O},A=ce?e:void 0,k;typeof r=="function"?k=r(S):k=[r,ce?"active":null,W?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let B=typeof u=="function"?u(S):u;return N.createElement(st,{...x,"aria-current":A,className:k,ref:b,style:B,to:d,viewTransition:p},typeof g=="function"?g(S):g)});BT.displayName="NavLink";var zT=N.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:o,state:u,method:d=ph,action:p,onSubmit:g,relative:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:j,...T},L)=>{let{unstable_useTransitions:V}=N.useContext(Ps),O=GT(),U=YT(p,{relative:x}),G=d.toLowerCase()==="get"?"get":"post",q=typeof p=="string"&&g_.test(p),ae=ce=>{if(g&&g(ce),ce.defaultPrevented)return;ce.preventDefault();let W=ce.nativeEvent.submitter,S=W?.getAttribute("formmethod")||d,A=()=>O(W||ce.currentTarget,{fetcherKey:e,method:S,navigate:t,replace:o,state:u,relative:x,preventScrollReset:b,viewTransition:w,unstable_defaultShouldRevalidate:j});V&&t!==!1?N.startTransition(()=>A()):A()};return N.createElement("form",{ref:L,method:G,action:U,onSubmit:r?g:ae,...T,"data-discover":!q&&s==="render"?"true":void 0})});zT.displayName="Form";function FT(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x_(s){let e=N.useContext(Ro);return en(e,FT(s)),e}function qT(s,{target:e,replace:t,state:r,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:g}={}){let x=Do(),b=wi(),w=yu(s,{relative:u});return N.useCallback(j=>{if(vT(j,e)){j.preventDefault();let T=t!==void 0?t:ru(b)===ru(w),L=()=>x(s,{replace:T,state:r,preventScrollReset:o,relative:u,viewTransition:d,unstable_defaultShouldRevalidate:p});g?N.startTransition(()=>L()):L()}},[b,x,w,t,r,e,s,o,u,d,p,g])}var $T=0,HT=()=>`__${String(++$T)}__`;function GT(){let{router:s}=x_("useSubmit"),{basename:e}=N.useContext(Ps),t=cT(),r=s.fetch,o=s.navigate;return N.useCallback(async(u,d={})=>{let{action:p,method:g,encType:x,formData:b,body:w}=NT(u,e);if(d.navigate===!1){let j=d.fetcherKey||HT();await r(j,t,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:w,formMethod:d.method||g,formEncType:d.encType||x,flushSync:d.flushSync})}else await o(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:b,body:w,formMethod:d.method||g,formEncType:d.encType||x,replace:d.replace,state:d.state,fromRouteId:t,flushSync:d.flushSync,viewTransition:d.viewTransition})},[r,o,e,t])}function YT(s,{relative:e}={}){let{basename:t}=N.useContext(Ps),r=N.useContext(pa);en(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),u={...yu(s||".",{relative:e})},d=wi();if(s==null){u.search=d.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(b=>b==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let b=p.toString();u.search=b?`?${b}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:fr([t,u.pathname])),ru(u)}function WT(s,{relative:e}={}){let t=N.useContext(l_);en(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=x_("useViewTransitionState"),o=yu(s,{relative:e});if(!t.isTransitioning)return!1;let u=xr(t.currentLocation.pathname,r)||t.currentLocation.pathname,d=xr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ih(o.pathname,d)!=null||Ih(o.pathname,u)!=null}const KT=()=>{};var qv={};const b_=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},QT=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],d=s[t++],p=s[t++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],d=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,p=d?s[o+1]:0,g=o+2<s.length,x=g?s[o+2]:0,b=u>>2,w=(u&3)<<4|p>>4;let j=(p&15)<<2|x>>6,T=x&63;g||(T=64,d||(j=64)),r.push(t[b],t[w],t[j],t[T])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(b_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):QT(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],p=o<s.length?t[s.charAt(o)]:0;++o;const x=o<s.length?t[s.charAt(o)]:64;++o;const w=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||p==null||x==null||w==null)throw new XT;const j=u<<2|p>>4;if(r.push(j),x!==64){const T=p<<4&240|x>>2;if(r.push(T),w!==64){const L=x<<6&192|w;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class XT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JT=function(s){const e=b_(s);return y_.encodeByteArray(e,!0)},Dh=function(s){return JT(s).replace(/\./g,"")},v_=function(s){try{return y_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ZT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const e5=()=>ZT().__FIREBASE_DEFAULTS__,t5=()=>{if(typeof process>"u"||typeof qv>"u")return;const s=qv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},n5=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&v_(s[1]);return e&&JSON.parse(e)},af=()=>{try{return KT()||e5()||t5()||n5()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},w_=s=>af()?.emulatorHosts?.[s],__=s=>{const e=w_(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},N_=()=>af()?.config,j_=s=>af()?.[`_${s}`];class s5{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function _i(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tg(s){return(await fetch(s,{credentials:"include"})).ok}function S_(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Dh(JSON.stringify(t)),Dh(JSON.stringify(d)),""].join(".")}const Jc={};function a5(){const s={prod:[],emulator:[]};for(const e of Object.keys(Jc))Jc[e]?s.emulator.push(e):s.prod.push(e);return s}function r5(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let $v=!1;function ng(s,e){if(typeof window>"u"||typeof document>"u"||!_i(window.location.host)||Jc[s]===e||Jc[s]||$v)return;Jc[s]=e;function t(j){return`__firebase__banner__${j}`}const r="__firebase__banner",u=a5().prod.length>0;function d(){const j=document.getElementById(r);j&&j.remove()}function p(j){j.style.display="flex",j.style.background="#7faaf0",j.style.position="fixed",j.style.bottom="5px",j.style.left="5px",j.style.padding=".5em",j.style.borderRadius="5px",j.style.alignItems="center"}function g(j,T){j.setAttribute("width","24"),j.setAttribute("id",T),j.setAttribute("height","24"),j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("fill","none"),j.style.marginLeft="-6px"}function x(){const j=document.createElement("span");return j.style.cursor="pointer",j.style.marginLeft="16px",j.style.fontSize="24px",j.innerHTML=" &times;",j.onclick=()=>{$v=!0,d()},j}function b(j,T){j.setAttribute("id",T),j.innerText="Learn more",j.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",j.setAttribute("target","__blank"),j.style.paddingLeft="5px",j.style.textDecoration="underline"}function w(){const j=r5(r),T=t("text"),L=document.getElementById(T)||document.createElement("span"),V=t("learnmore"),O=document.getElementById(V)||document.createElement("a"),U=t("preprendIcon"),G=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(j.created){const q=j.element;p(q),b(O,V);const ae=x();g(G,U),q.append(G,L,O,ae),document.body.appendChild(q)}u?(L.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Qn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function i5(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qn())}function l5(){const s=af()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function o5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function c5(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function u5(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function d5(){const s=Qn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function h5(){return!l5()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f5(){try{return typeof indexedDB=="object"}catch{return!1}}function m5(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const p5="FirebaseError";class qa extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=p5,Object.setPrototypeOf(this,qa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vu.prototype.create)}}class vu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?g5(u,r):"Error",p=`${this.serviceName}: ${d} (${o}).`;return new qa(o,p,r)}}function g5(s,e){return s.replace(x5,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const x5=/\{\$([^}]+)}/g;function b5(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ol(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const u=s[o],d=e[o];if(Hv(u)&&Hv(d)){if(!ol(u,d))return!1}else if(u!==d)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function Hv(s){return s!==null&&typeof s=="object"}function wu(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Hc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Gc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function y5(s,e){const t=new v5(s,e);return t.subscribe.bind(t)}class v5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");w5(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Lp),o.error===void 0&&(o.error=Lp),o.complete===void 0&&(o.complete=Lp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function w5(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Lp(){}function tn(s){return s&&s._delegate?s._delegate:s}class fi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const sl="[DEFAULT]";class _5{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new s5;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j5(e))try{this.getOrInitializeService({instanceIdentifier:sl})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=sl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sl){return this.instances.has(e)}getOptions(e=sl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);r===p&&d.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:N5(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sl){return this.component?this.component.multipleInstances?e:sl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function N5(s){return s===sl?void 0:s}function j5(s){return s.instantiationMode==="EAGER"}class S5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var gt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(gt||(gt={}));const E5={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},T5=gt.INFO,A5={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},C5=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=A5[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sg{constructor(e){this.name=e,this._logLevel=T5,this._logHandler=C5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?E5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const k5=(s,e)=>e.some(t=>s instanceof t);let Gv,Yv;function R5(){return Gv||(Gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function I5(){return Yv||(Yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E_=new WeakMap,c0=new WeakMap,T_=new WeakMap,Up=new WeakMap,ag=new WeakMap;function D5(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{t(oi(s.result)),o()},d=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&E_.set(t,s)}).catch(()=>{}),ag.set(e,s),e}function M5(s){if(c0.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{t(),o()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});c0.set(s,e)}let u0={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return c0.get(s);if(e==="objectStoreNames")return s.objectStoreNames||T_.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return oi(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function O5(s){u0=s(u0)}function P5(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Bp(this),e,...t);return T_.set(r,e.sort?e.sort():[e]),oi(r)}:I5().includes(s)?function(...e){return s.apply(Bp(this),e),oi(E_.get(this))}:function(...e){return oi(s.apply(Bp(this),e))}}function V5(s){return typeof s=="function"?P5(s):(s instanceof IDBTransaction&&M5(s),k5(s,R5())?new Proxy(s,u0):s)}function oi(s){if(s instanceof IDBRequest)return D5(s);if(Up.has(s))return Up.get(s);const e=V5(s);return e!==s&&(Up.set(s,e),ag.set(e,s)),e}const Bp=s=>ag.get(s);function L5(s,e,{blocked:t,upgrade:r,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),p=oi(d);return r&&d.addEventListener("upgradeneeded",g=>{r(oi(d.result),g.oldVersion,g.newVersion,oi(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",x=>o(x.oldVersion,x.newVersion,x))}).catch(()=>{}),p}const U5=["get","getKey","getAll","getAllKeys","count"],B5=["put","add","delete","clear"],zp=new Map;function Wv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(zp.get(e))return zp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=B5.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||U5.includes(t)))return;const u=async function(d,...p){const g=this.transaction(d,o?"readwrite":"readonly");let x=g.store;return r&&(x=x.index(p.shift())),(await Promise.all([x[t](...p),o&&g.done]))[0]};return zp.set(e,u),u}O5(s=>({...s,get:(e,t,r)=>Wv(e,t)||s.get(e,t,r),has:(e,t)=>!!Wv(e,t)||s.has(e,t)}));class z5{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(F5(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function F5(s){return s.getComponent()?.type==="VERSION"}const d0="@firebase/app",Kv="0.14.7";const br=new sg("@firebase/app"),q5="@firebase/app-compat",$5="@firebase/analytics-compat",H5="@firebase/analytics",G5="@firebase/app-check-compat",Y5="@firebase/app-check",W5="@firebase/auth",K5="@firebase/auth-compat",Q5="@firebase/database",X5="@firebase/data-connect",J5="@firebase/database-compat",Z5="@firebase/functions",eA="@firebase/functions-compat",tA="@firebase/installations",nA="@firebase/installations-compat",sA="@firebase/messaging",aA="@firebase/messaging-compat",rA="@firebase/performance",iA="@firebase/performance-compat",lA="@firebase/remote-config",oA="@firebase/remote-config-compat",cA="@firebase/storage",uA="@firebase/storage-compat",dA="@firebase/firestore",hA="@firebase/ai",fA="@firebase/firestore-compat",mA="firebase",pA="12.8.0";const h0="[DEFAULT]",gA={[d0]:"fire-core",[q5]:"fire-core-compat",[H5]:"fire-analytics",[$5]:"fire-analytics-compat",[Y5]:"fire-app-check",[G5]:"fire-app-check-compat",[W5]:"fire-auth",[K5]:"fire-auth-compat",[Q5]:"fire-rtdb",[X5]:"fire-data-connect",[J5]:"fire-rtdb-compat",[Z5]:"fire-fn",[eA]:"fire-fn-compat",[tA]:"fire-iid",[nA]:"fire-iid-compat",[sA]:"fire-fcm",[aA]:"fire-fcm-compat",[rA]:"fire-perf",[iA]:"fire-perf-compat",[lA]:"fire-rc",[oA]:"fire-rc-compat",[cA]:"fire-gcs",[uA]:"fire-gcs-compat",[dA]:"fire-fst",[fA]:"fire-fst-compat",[hA]:"fire-vertex","fire-js":"fire-js",[mA]:"fire-js-all"};const Mh=new Map,xA=new Map,f0=new Map;function Qv(s,e){try{s.container.addComponent(e)}catch(t){br.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function cl(s){const e=s.name;if(f0.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;f0.set(e,s);for(const t of Mh.values())Qv(t,s);for(const t of xA.values())Qv(t,s);return!0}function rf(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Rs(s){return s==null?!1:s.settings!==void 0}const bA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new vu("app","Firebase",bA);class yA{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}const yl=pA;function A_(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r={name:h0,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw ci.create("bad-app-name",{appName:String(o)});if(t||(t=N_()),!t)throw ci.create("no-options");const u=Mh.get(o);if(u){if(ol(t,u.options)&&ol(r,u.config))return u;throw ci.create("duplicate-app",{appName:o})}const d=new S5(o);for(const g of f0.values())d.addComponent(g);const p=new yA(t,r,d);return Mh.set(o,p),p}function rg(s=h0){const e=Mh.get(s);if(!e&&s===h0&&N_())return A_();if(!e)throw ci.create("no-app",{appName:s});return e}function Oa(s,e,t){let r=gA[s]??s;t&&(r+=`-${t}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(d.join(" "));return}cl(new fi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const vA="firebase-heartbeat-database",wA=1,iu="firebase-heartbeat-store";let Fp=null;function C_(){return Fp||(Fp=L5(vA,wA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(iu)}catch(t){console.warn(t)}}}}).catch(s=>{throw ci.create("idb-open",{originalErrorMessage:s.message})})),Fp}async function _A(s){try{const t=(await C_()).transaction(iu),r=await t.objectStore(iu).get(k_(s));return await t.done,r}catch(e){if(e instanceof qa)br.warn(e.message);else{const t=ci.create("idb-get",{originalErrorMessage:e?.message});br.warn(t.message)}}}async function Xv(s,e){try{const r=(await C_()).transaction(iu,"readwrite");await r.objectStore(iu).put(e,k_(s)),await r.done}catch(t){if(t instanceof qa)br.warn(t.message);else{const r=ci.create("idb-set",{originalErrorMessage:t?.message});br.warn(r.message)}}}function k_(s){return`${s.name}!${s.options.appId}`}const NA=1024,jA=30;class SA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new TA(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>jA){const o=AA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){br.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Jv(),{heartbeatsToSend:t,unsentEntries:r}=EA(this._heartbeatsCache.heartbeats),o=Dh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return br.warn(e),""}}}function Jv(){return new Date().toISOString().substring(0,10)}function EA(s,e=NA){const t=[];let r=s.slice();for(const o of s){const u=t.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),Zv(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class TA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return f5()?m5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _A(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Zv(s){return Dh(JSON.stringify({version:2,heartbeats:s})).length}function AA(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}function CA(s){cl(new fi("platform-logger",e=>new z5(e),"PRIVATE")),cl(new fi("heartbeat",e=>new SA(e),"PRIVATE")),Oa(d0,Kv,s),Oa(d0,Kv,"esm2020"),Oa("fire-js","")}CA("");function R_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kA=R_,I_=new vu("auth","Firebase",R_());const Oh=new sg("@firebase/auth");function RA(s,...e){Oh.logLevel<=gt.WARN&&Oh.warn(`Auth (${yl}): ${s}`,...e)}function xh(s,...e){Oh.logLevel<=gt.ERROR&&Oh.error(`Auth (${yl}): ${s}`,...e)}function fa(s,...e){throw ig(s,...e)}function Pa(s,...e){return ig(s,...e)}function D_(s,e,t){const r={...kA(),[e]:t};return new vu("auth","Firebase",r).create(e,{appName:s.name})}function mr(s){return D_(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ig(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return I_.create(s,...e)}function We(s,e,...t){if(!s)throw ig(e,...t)}function ur(s){const e="INTERNAL ASSERTION FAILED: "+s;throw xh(e),new Error(e)}function yr(s,e){s||ur(e)}function m0(){return typeof self<"u"&&self.location?.href||""}function IA(){return ew()==="http:"||ew()==="https:"}function ew(){return typeof self<"u"&&self.location?.protocol||null}function DA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IA()||c5()||"connection"in navigator)?navigator.onLine:!0}function MA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class _u{constructor(e,t){this.shortDelay=e,this.longDelay=t,yr(t>e,"Short delay should be less than long delay!"),this.isMobile=i5()||u5()}get(){return DA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lg(s,e){yr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class M_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const OA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const PA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],VA=new _u(3e4,6e4);function Ni(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ji(s,e,t,r,o={}){return O_(s,o,async()=>{let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});const p=wu({key:s.config.apiKey,...d}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const x={method:e,headers:g,...u};return o5()||(x.referrerPolicy="no-referrer"),s.emulatorConfig&&_i(s.emulatorConfig.host)&&(x.credentials="include"),M_.fetch()(await P_(s,s.config.apiHost,t,p),x)})}async function O_(s,e,t){s._canInitEmulator=!1;const r={...OA,...e};try{const o=new UA(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw nh(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const p=u.ok?d.errorMessage:d.error.message,[g,x]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw nh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw nh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw nh(s,"user-disabled",d);const b=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(x)throw D_(s,b,x);fa(s,b)}}catch(o){if(o instanceof qa)throw o;fa(s,"network-request-failed",{message:String(o)})}}async function Nu(s,e,t,r,o={}){const u=await ji(s,e,t,r,o);return"mfaPendingCredential"in u&&fa(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function P_(s,e,t,r){const o=`${e}${t}?${r}`,u=s,d=u.config.emulator?lg(s.config,o):`${s.config.apiScheme}://${o}`;return PA.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function LA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class UA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Pa(this.auth,"network-request-failed")),VA.get())})}}function nh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Pa(s,e,r);return o.customData._tokenResponse=t,o}function tw(s){return s!==void 0&&s.enterprise!==void 0}class BA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return LA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zA(s,e){return ji(s,"GET","/v2/recaptchaConfig",Ni(s,e))}async function FA(s,e){return ji(s,"POST","/v1/accounts:delete",e)}async function Ph(s,e){return ji(s,"POST","/v1/accounts:lookup",e)}function Zc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qA(s,e=!1){const t=tn(s),r=await t.getIdToken(e),o=og(r);We(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:r,authTime:Zc(qp(o.auth_time)),issuedAtTime:Zc(qp(o.iat)),expirationTime:Zc(qp(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function qp(s){return Number(s)*1e3}function og(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return xh("JWT malformed, contained fewer than 3 sections"),null;try{const o=v_(t);return o?JSON.parse(o):(xh("Failed to decode base64 JWT payload"),null)}catch(o){return xh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function nw(s){const e=og(s);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lu(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof qa&&$A(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function $A({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class HA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class p0{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vh(s){const e=s.auth,t=await s.getIdToken(),r=await lu(s,Ph(e,{idToken:t}));We(r?.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?V_(o.providerUserInfo):[],d=YA(s.providerData,u),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!d?.length,x=p?g:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new p0(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(s,b)}async function GA(s){const e=tn(s);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YA(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function V_(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function WA(s,e){const t=await O_(s,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=await P_(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:r};return s.emulatorConfig&&_i(s.emulatorConfig.host)&&(g.credentials="include"),M_.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function KA(s,e){return ji(s,"POST","/v2/accounts:revokeToken",Ni(s,e))}class xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=nw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:u}=await WA(e,t);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:u}=t,d=new xo;return r&&(We(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(We(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(We(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xo,this.toJSON())}_performRefresh(){return ur("not implemented")}}function ti(s,e){We(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ca{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new HA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new p0(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await lu(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qA(this,e)}reload(){return GA(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ca({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Vh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Rs(this.auth.app))return Promise.reject(mr(this.auth));const e=await this.getIdToken();return await lu(this,FA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,d=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,x=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:w,emailVerified:j,isAnonymous:T,providerData:L,stsTokenManager:V}=t;We(w&&V,e,"internal-error");const O=xo.fromJSON(this.name,V);We(typeof w=="string",e,"internal-error"),ti(r,e.name),ti(o,e.name),We(typeof j=="boolean",e,"internal-error"),We(typeof T=="boolean",e,"internal-error"),ti(u,e.name),ti(d,e.name),ti(p,e.name),ti(g,e.name),ti(x,e.name),ti(b,e.name);const U=new ca({uid:w,auth:e,email:o,emailVerified:j,displayName:r,isAnonymous:T,photoURL:d,phoneNumber:u,tenantId:p,stsTokenManager:O,createdAt:x,lastLoginAt:b});return L&&Array.isArray(L)&&(U.providerData=L.map(G=>({...G}))),g&&(U._redirectEventId=g),U}static async _fromIdTokenResponse(e,t,r=!1){const o=new xo;o.updateFromServerResponse(t);const u=new ca({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Vh(u),u}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];We(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?V_(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,p=new xo;p.updateFromIdToken(r);const g=new ca({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:d}),x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new p0(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,x),g}}const sw=new Map;function dr(s){yr(s instanceof Function,"Expected a class definition");let e=sw.get(s);return e?(yr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,sw.set(s,e),e)}class L_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}L_.type="NONE";const aw=L_;function bh(s,e,t){return`firebase:${s}:${e}:${t}`}class bo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=bh(this.userKey,o.apiKey,u),this.fullPersistenceKey=bh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ph(this.auth,{idToken:e}).catch(()=>{});return t?ca._fromGetAccountInfoResponse(this.auth,t,e):null}return ca._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new bo(dr(aw),e,r);const o=(await Promise.all(t.map(async x=>{if(await x._isAvailable())return x}))).filter(x=>x);let u=o[0]||dr(aw);const d=bh(r,e.config.apiKey,e.name);let p=null;for(const x of t)try{const b=await x._get(d);if(b){let w;if(typeof b=="string"){const j=await Ph(e,{idToken:b}).catch(()=>{});if(!j)break;w=await ca._fromGetAccountInfoResponse(e,j,b)}else w=ca._fromJSON(e,b);x!==u&&(p=w),u=x;break}}catch{}const g=o.filter(x=>x._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new bo(u,e,r):(u=g[0],p&&await u._set(d,p.toJSON()),await Promise.all(t.map(async x=>{if(x!==u)try{await x._remove(d)}catch{}})),new bo(u,e,r))}}function rw(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(F_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($_(e))return"Blackberry";if(H_(e))return"Webos";if(B_(e))return"Safari";if((e.includes("chrome/")||z_(e))&&!e.includes("edge/"))return"Chrome";if(q_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function U_(s=Qn()){return/firefox\//i.test(s)}function B_(s=Qn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function z_(s=Qn()){return/crios\//i.test(s)}function F_(s=Qn()){return/iemobile/i.test(s)}function q_(s=Qn()){return/android/i.test(s)}function $_(s=Qn()){return/blackberry/i.test(s)}function H_(s=Qn()){return/webos/i.test(s)}function cg(s=Qn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function QA(s=Qn()){return cg(s)&&!!window.navigator?.standalone}function XA(){return d5()&&document.documentMode===10}function G_(s=Qn()){return cg(s)||q_(s)||H_(s)||$_(s)||/windows phone/i.test(s)||F_(s)}function Y_(s,e=[]){let t;switch(s){case"Browser":t=rw(Qn());break;case"Worker":t=`${rw(Qn())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${yl}/${r}`}class JA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=u=>new Promise((d,p)=>{try{const g=e(u);d(g)}catch(g){p(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function ZA(s,e={}){return ji(s,"GET","/v2/passwordPolicy",Ni(s,e))}const eC=6;class tC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??eC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class nC{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iw(this),this.idTokenSubscription=new iw(this),this.beforeStateQueue=new JA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=dr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ph(this,{idToken:e}),r=await ca._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Rs(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,d=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===d)&&p?.user&&(r=p.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(u){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Rs(this.app))return Promise.reject(mr(this));const t=e?tn(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Rs(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Rs(this.app)?Promise.reject(mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZA(this),t=new tC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await KA(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&dr(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await bo.create(this,[dr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(p,this,"internal-error"),p.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Y_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&RA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function vl(s){return tn(s)}class iw{constructor(e){this.auth=e,this.observer=null,this.addObserver=y5(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let lf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sC(s){lf=s}function W_(s){return lf.loadJS(s)}function aC(){return lf.recaptchaEnterpriseScript}function rC(){return lf.gapiScript}function iC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class lC{constructor(){this.enterprise=new oC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class oC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const cC="recaptcha-enterprise",K_="NO_RECAPTCHA";class uC{constructor(e){this.type=cC,this.auth=vl(e)}async verify(e="verify",t=!1){async function r(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,p)=>{zA(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const x=new BA(g);return u.tenantId==null?u._agentRecaptchaConfig=x:u._tenantRecaptchaConfigs[u.tenantId]=x,d(x.siteKey)}}).catch(g=>{p(g)})})}function o(u,d,p){const g=window.grecaptcha;tw(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(x=>{d(x)}).catch(()=>{d(K_)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new lC().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{r(this.auth).then(p=>{if(!t&&tw(window.grecaptcha))o(p,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=aC();g.length!==0&&(g+=p),W_(g).then(()=>{o(p,u,d)}).catch(x=>{d(x)})}}).catch(p=>{d(p)})})}}async function lw(s,e,t,r=!1,o=!1){const u=new uC(s);let d;if(o)d=K_;else try{d=await u.verify(t)}catch{d=await u.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,x=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:x,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function g0(s,e,t,r,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await lw(s,e,t,t==="getOobCode");return r(s,u)}else return r(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await lw(s,e,t,t==="getOobCode");return r(s,d)}else return Promise.reject(u)})}function dC(s,e){const t=rf(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(ol(u,e??{}))return o;fa(o,"already-initialized")}return t.initialize({options:e})}function hC(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(dr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function fC(s,e,t){const r=vl(s);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=Q_(e),{host:d,port:p}=mC(e),g=p===null?"":`:${p}`,x={url:`${u}//${d}${g}/`},b=Object.freeze({host:d,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(ol(x,r.config.emulator)&&ol(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=x,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,_i(d)?(tg(`${u}//${d}${g}`),ng("Auth",!0)):pC()}function Q_(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function mC(s){const e=Q_(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:ow(r.substr(u.length+1))}}else{const[u,d]=r.split(":");return{host:u,port:ow(d)}}}function ow(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function pC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class ug{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ur("not implemented")}_getIdTokenResponse(e){return ur("not implemented")}_linkToIdToken(e,t){return ur("not implemented")}_getReauthenticationResolver(e){return ur("not implemented")}}async function gC(s,e){return ji(s,"POST","/v1/accounts:signUp",e)}async function xC(s,e){return Nu(s,"POST","/v1/accounts:signInWithPassword",Ni(s,e))}async function bC(s,e){return Nu(s,"POST","/v1/accounts:signInWithEmailLink",Ni(s,e))}async function yC(s,e){return Nu(s,"POST","/v1/accounts:signInWithEmailLink",Ni(s,e))}class ou extends ug{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new ou(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new ou(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g0(e,t,"signInWithPassword",xC);case"emailLink":return bC(e,{email:this._email,oobCode:this._password});default:fa(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return g0(e,r,"signUpPassword",gC);case"emailLink":return yC(e,{idToken:t,email:this._email,oobCode:this._password});default:fa(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function yo(s,e){return Nu(s,"POST","/v1/accounts:signInWithIdp",Ni(s,e))}const vC="http://localhost";class ul extends ug{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ul(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fa("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=t;if(!r||!o)return null;const d=new ul(r,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return yo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,yo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yo(e,t)}buildRequest(){const e={requestUri:vC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wu(t)}return e}}function wC(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _C(s){const e=Hc(Gc(s)).link,t=e?Hc(Gc(e)).deep_link_id:null,r=Hc(Gc(s)).deep_link_id;return(r?Hc(Gc(r)).link:null)||r||t||e||s}class dg{constructor(e){const t=Hc(Gc(e)),r=t.apiKey??null,o=t.oobCode??null,u=wC(t.mode??null);We(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=_C(e);try{return new dg(t)}catch{return null}}}class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,t){return ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=dg.parseLink(t);return We(r,"argument-error"),ou._fromEmailAndCode(e,r.code,r.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class X_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ju extends X_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ni extends ju{constructor(){super("facebook.com")}static credential(e){return ul._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ni.credential(e.oauthAccessToken)}catch{return null}}}ni.FACEBOOK_SIGN_IN_METHOD="facebook.com";ni.PROVIDER_ID="facebook.com";class si extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ul._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return si.credential(t,r)}catch{return null}}}si.GOOGLE_SIGN_IN_METHOD="google.com";si.PROVIDER_ID="google.com";class ai extends ju{constructor(){super("github.com")}static credential(e){return ul._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ai.credential(e.oauthAccessToken)}catch{return null}}}ai.GITHUB_SIGN_IN_METHOD="github.com";ai.PROVIDER_ID="github.com";class ri extends ju{constructor(){super("twitter.com")}static credential(e,t){return ul._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ri.credential(t,r)}catch{return null}}}ri.TWITTER_SIGN_IN_METHOD="twitter.com";ri.PROVIDER_ID="twitter.com";async function NC(s,e){return Nu(s,"POST","/v1/accounts:signUp",Ni(s,e))}class dl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const u=await ca._fromIdTokenResponse(e,r,o),d=cw(r);return new dl({user:u,providerId:d,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=cw(r);return new dl({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function cw(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Lh extends qa{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new Lh(e,t,r,o)}}function J_(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Lh._fromErrorAndOperation(s,u,e,r):u})}async function jC(s,e,t=!1){const r=await lu(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return dl._forOperation(s,"link",r)}async function SC(s,e,t=!1){const{auth:r}=s;if(Rs(r.app))return Promise.reject(mr(r));const o="reauthenticate";try{const u=await lu(s,J_(r,o,e,s),t);We(u.idToken,r,"internal-error");const d=og(u.idToken);We(d,r,"internal-error");const{sub:p}=d;return We(s.uid===p,r,"user-mismatch"),dl._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&fa(r,"user-mismatch"),u}}async function Z_(s,e,t=!1){if(Rs(s.app))return Promise.reject(mr(s));const r="signIn",o=await J_(s,r,e),u=await dl._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(u.user),u}async function EC(s,e){return Z_(vl(s),e)}async function eN(s){const e=vl(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TC(s,e,t){if(Rs(s.app))return Promise.reject(mr(s));const r=vl(s),d=await g0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",NC).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&eN(s),g}),p=await dl._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(p.user),p}function tN(s,e,t){return Rs(s.app)?Promise.reject(mr(s)):EC(tn(s),Oo.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eN(s),r})}function AC(s,e,t,r){return tn(s).onIdTokenChanged(e,t,r)}function CC(s,e,t){return tn(s).beforeAuthStateChanged(e,t)}function kC(s,e,t,r){return tn(s).onAuthStateChanged(e,t,r)}function RC(s){return tn(s).signOut()}const Uh="__sak";class nN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const IC=1e3,DC=10;class sN extends nN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=G_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,p,g)=>{this.notifyListeners(d,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!t&&this.localCache[r]===d||this.notifyListeners(r,d)},u=this.storage.getItem(r);XA()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,DC):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},IC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}sN.type="LOCAL";const MC=sN;class aN extends nN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aN.type="SESSION";const rN=aN;function OC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new of(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:u}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const p=Array.from(d).map(async x=>x(t.origin,u)),g=await OC(p);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}of.receivers=[];function hg(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}class PC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((p,g)=>{const x=hg("",20);o.port1.start();const b=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(w){const j=w;if(j.data.eventId===x)switch(j.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(j.data.response);break;default:clearTimeout(b),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:x,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Va(){return window}function VC(s){Va().location.href=s}function iN(){return typeof Va().WorkerGlobalScope<"u"&&typeof Va().importScripts=="function"}async function LC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UC(){return navigator?.serviceWorker?.controller||null}function BC(){return iN()?self:null}const lN="firebaseLocalStorageDb",zC=1,Bh="firebaseLocalStorage",oN="fbase_key";class Su{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cf(s,e){return s.transaction([Bh],e?"readwrite":"readonly").objectStore(Bh)}function FC(){const s=indexedDB.deleteDatabase(lN);return new Su(s).toPromise()}function x0(){const s=indexedDB.open(lN,zC);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Bh,{keyPath:oN})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Bh)?e(r):(r.close(),await FC(),e(await x0()))})})}async function uw(s,e,t){const r=cf(s,!0).put({[oN]:e,value:t});return new Su(r).toPromise()}async function qC(s,e){const t=cf(s,!1).get(e),r=await new Su(t).toPromise();return r===void 0?null:r.value}function dw(s,e){const t=cf(s,!0).delete(e);return new Su(t).toPromise()}const $C=800,HC=3;class cN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await x0(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>HC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=of._getInstance(BC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await LC(),!this.activeServiceWorker)return;this.sender=new PC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await x0();return await uw(e,Uh,"1"),await dw(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>uw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>qC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>dw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=cf(o,!1).getAll();return new Su(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$C)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cN.type="LOCAL";const GC=cN;new _u(3e4,6e4);function YC(s,e){return e?dr(e):(We(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class fg extends ug{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WC(s){return Z_(s.auth,new fg(s),s.bypassAuthState)}function KC(s){const{auth:e,user:t}=s;return We(t,e,"internal-error"),SC(t,new fg(s),s.bypassAuthState)}async function QC(s){const{auth:e,user:t}=s;return We(t,e,"internal-error"),jC(t,new fg(s),s.bypassAuthState)}class uN{constructor(e,t,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:u,error:d,type:p}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(x){this.reject(x)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WC;case"linkViaPopup":case"linkViaRedirect":return QC;case"reauthViaPopup":case"reauthViaRedirect":return KC;default:fa(this.auth,"internal-error")}}resolve(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const XC=new _u(2e3,1e4);class mo extends uN{constructor(e,t,r,o,u){super(e,t,o,u),this.provider=r,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){yr(this.filter.length===1,"Popup operations only handle one event");const e=hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Pa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Pa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XC.get())};e()}}mo.currentPopupAction=null;const JC="pendingRedirect",yh=new Map;class ZC extends uN{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const r=await ek(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ek(s,e){const t=sk(e),r=nk(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function tk(s,e){yh.set(s._key(),e)}function nk(s){return dr(s._redirectPersistence)}function sk(s){return bh(JC,s.config.apiKey,s.name)}async function ak(s,e,t=!1){if(Rs(s.app))return Promise.reject(mr(s));const r=vl(s),o=YC(r,e),d=await new ZC(r,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}const rk=600*1e3;class ik{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!dN(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Pa(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rk&&this.cachedEventUids.clear(),this.cachedEventUids.has(hw(e))}saveEventToCache(e){this.cachedEventUids.add(hw(e)),this.lastProcessedEventTime=Date.now()}}function hw(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function dN({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function lk(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dN(s);default:return!1}}async function ok(s,e={}){return ji(s,"GET","/v1/projects",e)}const ck=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uk=/^https?/;async function dk(s){if(s.config.emulator)return;const{authorizedDomains:e}=await ok(s);for(const t of e)try{if(hk(t))return}catch{}fa(s,"unauthorized-domain")}function hk(s){const e=m0(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===r}if(!uk.test(t))return!1;if(ck.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}const fk=new _u(3e4,6e4);function fw(){const s=Va().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function mk(s){return new Promise((e,t)=>{function r(){fw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fw(),t(Pa(s,"network-request-failed"))},timeout:fk.get()})}if(Va().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Va().gapi?.load)r();else{const o=iC("iframefcb");return Va()[o]=()=>{gapi.load?r():t(Pa(s,"network-request-failed"))},W_(`${rC()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw vh=null,e})}let vh=null;function pk(s){return vh=vh||mk(s),vh}const gk=new _u(5e3,15e3),xk="__/auth/iframe",bk="emulator/auth/iframe",yk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wk(s){const e=s.config;We(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?lg(e,bk):`https://${s.config.authDomain}/${xk}`,r={apiKey:e.apiKey,appName:s.name,v:yl},o=vk.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${t}?${wu(r).slice(1)}`}async function _k(s){const e=await pk(s),t=Va().gapi;return We(t,s,"internal-error"),e.open({where:document.body,url:wk(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yk,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const d=Pa(s,"network-request-failed"),p=Va().setTimeout(()=>{u(d)},gk.get());function g(){Va().clearTimeout(p),o(r)}r.ping(g).then(g,()=>{u(d)})}))}const Nk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jk=500,Sk=600,Ek="_blank",Tk="http://localhost";class mw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ak(s,e,t,r=jk,o=Sk){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const g={...Nk,width:r.toString(),height:o.toString(),top:u,left:d},x=Qn().toLowerCase();t&&(p=z_(x)?Ek:t),U_(x)&&(e=e||Tk,g.scrollbars="yes");const b=Object.entries(g).reduce((j,[T,L])=>`${j}${T}=${L},`,"");if(QA(x)&&p!=="_self")return Ck(e||"",p),new mw(null);const w=window.open(e||"",p,b);We(w,s,"popup-blocked");try{w.focus()}catch{}return new mw(w)}function Ck(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const kk="__/auth/handler",Rk="emulator/auth/handler",Ik=encodeURIComponent("fac");async function pw(s,e,t,r,o,u){We(s.config.authDomain,s,"auth-domain-config-required"),We(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:yl,eventId:o};if(e instanceof X_){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",b5(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,w]of Object.entries({}))d[b]=w}if(e instanceof ju){const b=e.getScopes().filter(w=>w!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const g=await s._getAppCheckToken(),x=g?`#${Ik}=${encodeURIComponent(g)}`:"";return`${Dk(s)}?${wu(p).slice(1)}${x}`}function Dk({config:s}){return s.emulator?lg(s,Rk):`https://${s.authDomain}/${kk}`}const $p="webStorageSupport";class Mk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rN,this._completeRedirectFn=ak,this._overrideRedirectResult=tk}async _openPopup(e,t,r,o){yr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await pw(e,t,r,m0(),o);return Ak(e,u,hg())}async _openRedirect(e,t,r,o){await this._originValidation(e);const u=await pw(e,t,r,m0(),o);return VC(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(yr(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _k(e),r=new ik(e);return t.register("authEvent",o=>(We(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($p,{type:$p},o=>{const u=o?.[0]?.[$p];u!==void 0&&t(!!u),fa(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return G_()||B_()||cg()}}const Ok=Mk;var gw="@firebase/auth",xw="1.12.0";class Pk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Vk(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Lk(s){cl(new fi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;We(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Y_(s)},x=new nC(r,o,u,g);return hC(x,t),x},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),cl(new fi("auth-internal",e=>{const t=vl(e.getProvider("auth").getImmediate());return(r=>new Pk(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oa(gw,xw,Vk(s)),Oa(gw,xw,"esm2020")}const Uk=300,Bk=j_("authIdTokenMaxAge")||Uk;let bw=null;const zk=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Bk)return;const o=t?.token;bw!==o&&(bw=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Fk(s=rg()){const e=rf(s,"auth");if(e.isInitialized())return e.getImmediate();const t=dC(s,{popupRedirectResolver:Ok,persistence:[GC,MC,rN]}),r=j_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const d=zk(u.toString());CC(t,d,()=>d(t.currentUser)),AC(t,p=>d(p))}}const o=w_("auth");return o&&fC(t,`http://${o}`),t}function qk(){return document.getElementsByTagName("head")?.[0]??document}sC({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Pa("internal-error");u.customData=o,t(u)},r.type="text/javascript",r.charset="UTF-8",qk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Lk("Browser");var $k="firebase",Hk="12.8.0";Oa($k,Hk,"app");var yw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ui,hN;(function(){var s;function e(S,A){function k(){}k.prototype=A.prototype,S.F=A.prototype,S.prototype=new k,S.prototype.constructor=S,S.D=function(B,M,$){for(var R=Array(arguments.length-2),F=2;F<arguments.length;F++)R[F-2]=arguments[F];return A.prototype[M].apply(B,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(S,A,k){k||(k=0);const B=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)B[M]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(M=0;M<16;++M)B[M]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=S.g[0],k=S.g[1],M=S.g[2];let $=S.g[3],R;R=A+($^k&(M^$))+B[0]+3614090360&4294967295,A=k+(R<<7&4294967295|R>>>25),R=$+(M^A&(k^M))+B[1]+3905402710&4294967295,$=A+(R<<12&4294967295|R>>>20),R=M+(k^$&(A^k))+B[2]+606105819&4294967295,M=$+(R<<17&4294967295|R>>>15),R=k+(A^M&($^A))+B[3]+3250441966&4294967295,k=M+(R<<22&4294967295|R>>>10),R=A+($^k&(M^$))+B[4]+4118548399&4294967295,A=k+(R<<7&4294967295|R>>>25),R=$+(M^A&(k^M))+B[5]+1200080426&4294967295,$=A+(R<<12&4294967295|R>>>20),R=M+(k^$&(A^k))+B[6]+2821735955&4294967295,M=$+(R<<17&4294967295|R>>>15),R=k+(A^M&($^A))+B[7]+4249261313&4294967295,k=M+(R<<22&4294967295|R>>>10),R=A+($^k&(M^$))+B[8]+1770035416&4294967295,A=k+(R<<7&4294967295|R>>>25),R=$+(M^A&(k^M))+B[9]+2336552879&4294967295,$=A+(R<<12&4294967295|R>>>20),R=M+(k^$&(A^k))+B[10]+4294925233&4294967295,M=$+(R<<17&4294967295|R>>>15),R=k+(A^M&($^A))+B[11]+2304563134&4294967295,k=M+(R<<22&4294967295|R>>>10),R=A+($^k&(M^$))+B[12]+1804603682&4294967295,A=k+(R<<7&4294967295|R>>>25),R=$+(M^A&(k^M))+B[13]+4254626195&4294967295,$=A+(R<<12&4294967295|R>>>20),R=M+(k^$&(A^k))+B[14]+2792965006&4294967295,M=$+(R<<17&4294967295|R>>>15),R=k+(A^M&($^A))+B[15]+1236535329&4294967295,k=M+(R<<22&4294967295|R>>>10),R=A+(M^$&(k^M))+B[1]+4129170786&4294967295,A=k+(R<<5&4294967295|R>>>27),R=$+(k^M&(A^k))+B[6]+3225465664&4294967295,$=A+(R<<9&4294967295|R>>>23),R=M+(A^k&($^A))+B[11]+643717713&4294967295,M=$+(R<<14&4294967295|R>>>18),R=k+($^A&(M^$))+B[0]+3921069994&4294967295,k=M+(R<<20&4294967295|R>>>12),R=A+(M^$&(k^M))+B[5]+3593408605&4294967295,A=k+(R<<5&4294967295|R>>>27),R=$+(k^M&(A^k))+B[10]+38016083&4294967295,$=A+(R<<9&4294967295|R>>>23),R=M+(A^k&($^A))+B[15]+3634488961&4294967295,M=$+(R<<14&4294967295|R>>>18),R=k+($^A&(M^$))+B[4]+3889429448&4294967295,k=M+(R<<20&4294967295|R>>>12),R=A+(M^$&(k^M))+B[9]+568446438&4294967295,A=k+(R<<5&4294967295|R>>>27),R=$+(k^M&(A^k))+B[14]+3275163606&4294967295,$=A+(R<<9&4294967295|R>>>23),R=M+(A^k&($^A))+B[3]+4107603335&4294967295,M=$+(R<<14&4294967295|R>>>18),R=k+($^A&(M^$))+B[8]+1163531501&4294967295,k=M+(R<<20&4294967295|R>>>12),R=A+(M^$&(k^M))+B[13]+2850285829&4294967295,A=k+(R<<5&4294967295|R>>>27),R=$+(k^M&(A^k))+B[2]+4243563512&4294967295,$=A+(R<<9&4294967295|R>>>23),R=M+(A^k&($^A))+B[7]+1735328473&4294967295,M=$+(R<<14&4294967295|R>>>18),R=k+($^A&(M^$))+B[12]+2368359562&4294967295,k=M+(R<<20&4294967295|R>>>12),R=A+(k^M^$)+B[5]+4294588738&4294967295,A=k+(R<<4&4294967295|R>>>28),R=$+(A^k^M)+B[8]+2272392833&4294967295,$=A+(R<<11&4294967295|R>>>21),R=M+($^A^k)+B[11]+1839030562&4294967295,M=$+(R<<16&4294967295|R>>>16),R=k+(M^$^A)+B[14]+4259657740&4294967295,k=M+(R<<23&4294967295|R>>>9),R=A+(k^M^$)+B[1]+2763975236&4294967295,A=k+(R<<4&4294967295|R>>>28),R=$+(A^k^M)+B[4]+1272893353&4294967295,$=A+(R<<11&4294967295|R>>>21),R=M+($^A^k)+B[7]+4139469664&4294967295,M=$+(R<<16&4294967295|R>>>16),R=k+(M^$^A)+B[10]+3200236656&4294967295,k=M+(R<<23&4294967295|R>>>9),R=A+(k^M^$)+B[13]+681279174&4294967295,A=k+(R<<4&4294967295|R>>>28),R=$+(A^k^M)+B[0]+3936430074&4294967295,$=A+(R<<11&4294967295|R>>>21),R=M+($^A^k)+B[3]+3572445317&4294967295,M=$+(R<<16&4294967295|R>>>16),R=k+(M^$^A)+B[6]+76029189&4294967295,k=M+(R<<23&4294967295|R>>>9),R=A+(k^M^$)+B[9]+3654602809&4294967295,A=k+(R<<4&4294967295|R>>>28),R=$+(A^k^M)+B[12]+3873151461&4294967295,$=A+(R<<11&4294967295|R>>>21),R=M+($^A^k)+B[15]+530742520&4294967295,M=$+(R<<16&4294967295|R>>>16),R=k+(M^$^A)+B[2]+3299628645&4294967295,k=M+(R<<23&4294967295|R>>>9),R=A+(M^(k|~$))+B[0]+4096336452&4294967295,A=k+(R<<6&4294967295|R>>>26),R=$+(k^(A|~M))+B[7]+1126891415&4294967295,$=A+(R<<10&4294967295|R>>>22),R=M+(A^($|~k))+B[14]+2878612391&4294967295,M=$+(R<<15&4294967295|R>>>17),R=k+($^(M|~A))+B[5]+4237533241&4294967295,k=M+(R<<21&4294967295|R>>>11),R=A+(M^(k|~$))+B[12]+1700485571&4294967295,A=k+(R<<6&4294967295|R>>>26),R=$+(k^(A|~M))+B[3]+2399980690&4294967295,$=A+(R<<10&4294967295|R>>>22),R=M+(A^($|~k))+B[10]+4293915773&4294967295,M=$+(R<<15&4294967295|R>>>17),R=k+($^(M|~A))+B[1]+2240044497&4294967295,k=M+(R<<21&4294967295|R>>>11),R=A+(M^(k|~$))+B[8]+1873313359&4294967295,A=k+(R<<6&4294967295|R>>>26),R=$+(k^(A|~M))+B[15]+4264355552&4294967295,$=A+(R<<10&4294967295|R>>>22),R=M+(A^($|~k))+B[6]+2734768916&4294967295,M=$+(R<<15&4294967295|R>>>17),R=k+($^(M|~A))+B[13]+1309151649&4294967295,k=M+(R<<21&4294967295|R>>>11),R=A+(M^(k|~$))+B[4]+4149444226&4294967295,A=k+(R<<6&4294967295|R>>>26),R=$+(k^(A|~M))+B[11]+3174756917&4294967295,$=A+(R<<10&4294967295|R>>>22),R=M+(A^($|~k))+B[2]+718787259&4294967295,M=$+(R<<15&4294967295|R>>>17),R=k+($^(M|~A))+B[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(M+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+M&4294967295,S.g[3]=S.g[3]+$&4294967295}r.prototype.v=function(S,A){A===void 0&&(A=S.length);const k=A-this.blockSize,B=this.C;let M=this.h,$=0;for(;$<A;){if(M==0)for(;$<=k;)o(this,S,$),$+=this.blockSize;if(typeof S=="string"){for(;$<A;)if(B[M++]=S.charCodeAt($++),M==this.blockSize){o(this,B),M=0;break}}else for(;$<A;)if(B[M++]=S[$++],M==this.blockSize){o(this,B),M=0;break}}this.h=M,this.o+=A},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;A=this.o*8;for(var k=S.length-8;k<S.length;++k)S[k]=A&255,A/=256;for(this.v(S),S=Array(16),A=0,k=0;k<4;++k)for(let B=0;B<32;B+=8)S[A++]=this.g[k]>>>B&255;return S};function u(S,A){var k=p;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=A(S)}function d(S,A){this.h=A;const k=[];let B=!0;for(let M=S.length-1;M>=0;M--){const $=S[M]|0;B&&$==A||(k[M]=$,B=!1)}this.g=k}var p={};function g(S){return-128<=S&&S<128?u(S,function(A){return new d([A|0],A<0?-1:0)}):new d([S|0],S<0?-1:0)}function x(S){if(isNaN(S)||!isFinite(S))return w;if(S<0)return O(x(-S));const A=[];let k=1;for(let B=0;S>=k;B++)A[B]=S/k|0,k*=4294967296;return new d(A,0)}function b(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return O(b(S.substring(1),A));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=x(Math.pow(A,8));let B=w;for(let $=0;$<S.length;$+=8){var M=Math.min(8,S.length-$);const R=parseInt(S.substring($,$+M),A);M<8?(M=x(Math.pow(A,M)),B=B.j(M).add(x(R))):(B=B.j(k),B=B.add(x(R)))}return B}var w=g(0),j=g(1),T=g(16777216);s=d.prototype,s.m=function(){if(V(this))return-O(this).m();let S=0,A=1;for(let k=0;k<this.g.length;k++){const B=this.i(k);S+=(B>=0?B:4294967296+B)*A,A*=4294967296}return S},s.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(V(this))return"-"+O(this).toString(S);const A=x(Math.pow(S,6));var k=this;let B="";for(;;){const M=ae(k,A).g;k=U(k,M.j(A));let $=((k.g.length>0?k.g[0]:k.h)>>>0).toString(S);if(k=M,L(k))return $+B;for(;$.length<6;)$="0"+$;B=$+B}},s.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(let A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function V(S){return S.h==-1}s.l=function(S){return S=U(this,S),V(S)?-1:L(S)?0:1};function O(S){const A=S.g.length,k=[];for(let B=0;B<A;B++)k[B]=~S.g[B];return new d(k,~S.h).add(j)}s.abs=function(){return V(this)?O(this):this},s.add=function(S){const A=Math.max(this.g.length,S.g.length),k=[];let B=0;for(let M=0;M<=A;M++){let $=B+(this.i(M)&65535)+(S.i(M)&65535),R=($>>>16)+(this.i(M)>>>16)+(S.i(M)>>>16);B=R>>>16,$&=65535,R&=65535,k[M]=R<<16|$}return new d(k,k[k.length-1]&-2147483648?-1:0)};function U(S,A){return S.add(O(A))}s.j=function(S){if(L(this)||L(S))return w;if(V(this))return V(S)?O(this).j(O(S)):O(O(this).j(S));if(V(S))return O(this.j(O(S)));if(this.l(T)<0&&S.l(T)<0)return x(this.m()*S.m());const A=this.g.length+S.g.length,k=[];for(var B=0;B<2*A;B++)k[B]=0;for(B=0;B<this.g.length;B++)for(let M=0;M<S.g.length;M++){const $=this.i(B)>>>16,R=this.i(B)&65535,F=S.i(M)>>>16,D=S.i(M)&65535;k[2*B+2*M]+=R*D,G(k,2*B+2*M),k[2*B+2*M+1]+=$*D,G(k,2*B+2*M+1),k[2*B+2*M+1]+=R*F,G(k,2*B+2*M+1),k[2*B+2*M+2]+=$*F,G(k,2*B+2*M+2)}for(S=0;S<A;S++)k[S]=k[2*S+1]<<16|k[2*S];for(S=A;S<2*A;S++)k[S]=0;return new d(k,0)};function G(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function q(S,A){this.g=S,this.h=A}function ae(S,A){if(L(A))throw Error("division by zero");if(L(S))return new q(w,w);if(V(S))return A=ae(O(S),A),new q(O(A.g),O(A.h));if(V(A))return A=ae(S,O(A)),new q(O(A.g),A.h);if(S.g.length>30){if(V(S)||V(A))throw Error("slowDivide_ only works with positive integers.");for(var k=j,B=A;B.l(S)<=0;)k=ce(k),B=ce(B);var M=W(k,1),$=W(B,1);for(B=W(B,2),k=W(k,2);!L(B);){var R=$.add(B);R.l(S)<=0&&(M=M.add(k),$=R),B=W(B,1),k=W(k,1)}return A=U(S,M.j(A)),new q(M,A)}for(M=w;S.l(A)>=0;){for(k=Math.max(1,Math.floor(S.m()/A.m())),B=Math.ceil(Math.log(k)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),$=x(k),R=$.j(A);V(R)||R.l(S)>0;)k-=B,$=x(k),R=$.j(A);L($)&&($=j),M=M.add($),S=U(S,R)}return new q(M,S)}s.B=function(S){return ae(this,S).h},s.and=function(S){const A=Math.max(this.g.length,S.g.length),k=[];for(let B=0;B<A;B++)k[B]=this.i(B)&S.i(B);return new d(k,this.h&S.h)},s.or=function(S){const A=Math.max(this.g.length,S.g.length),k=[];for(let B=0;B<A;B++)k[B]=this.i(B)|S.i(B);return new d(k,this.h|S.h)},s.xor=function(S){const A=Math.max(this.g.length,S.g.length),k=[];for(let B=0;B<A;B++)k[B]=this.i(B)^S.i(B);return new d(k,this.h^S.h)};function ce(S){const A=S.g.length+1,k=[];for(let B=0;B<A;B++)k[B]=S.i(B)<<1|S.i(B-1)>>>31;return new d(k,S.h)}function W(S,A){const k=A>>5;A%=32;const B=S.g.length-k,M=[];for(let $=0;$<B;$++)M[$]=A>0?S.i($+k)>>>A|S.i($+k+1)<<32-A:S.i($+k);return new d(M,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,hN=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=x,d.fromString=b,ui=d}).apply(typeof yw<"u"?yw:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var fN,Yc,mN,wh,b0,pN,gN,xN;(function(){var s,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var y=0;y<h.length;++y){var _=h[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var _=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var J=h[C];if(!(J in _))break e;_=_[J]}h=h[h.length-1],C=_[h],y=y(C),y!=C&&y!=null&&e(_,h,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(h){return h||function(y){var _=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&_.push([C,y[C]]);return _}});var u=u||{},d=this||self;function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function g(h,y,_){return h.call.apply(h.bind,arguments)}function x(h,y,_){return x=g,x.apply(null,arguments)}function b(h,y){var _=Array.prototype.slice.call(arguments,1);return function(){var C=_.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function w(h,y){function _(){}_.prototype=y.prototype,h.Z=y.prototype,h.prototype=new _,h.prototype.constructor=h,h.Ob=function(C,J,ie){for(var Ee=Array(arguments.length-2),at=2;at<arguments.length;at++)Ee[at-2]=arguments[at];return y.prototype[J].apply(C,Ee)}}var j=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function T(h){const y=h.length;if(y>0){const _=Array(y);for(let C=0;C<y;C++)_[C]=h[C];return _}return[]}function L(h,y){for(let C=1;C<arguments.length;C++){const J=arguments[C];var _=typeof J;if(_=_!="object"?_:J?Array.isArray(J)?"array":_:"null",_=="array"||_=="object"&&typeof J.length=="number"){_=h.length||0;const ie=J.length||0;h.length=_+ie;for(let Ee=0;Ee<ie;Ee++)h[_+Ee]=J[Ee]}else h.push(J)}}class V{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(h){d.setTimeout(()=>{throw h},0)}function U(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class G{constructor(){this.h=this.g=null}add(y,_){const C=q.get();C.set(y,_),this.h?this.h.next=C:this.g=C,this.h=C}}var q=new V(()=>new ae,h=>h.reset());class ae{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,W=!1,S=new G,A=()=>{const h=Promise.resolve(void 0);ce=()=>{h.then(k)}};function k(){for(var h;h=U();){try{h.h.call(h.g)}catch(_){O(_)}var y=q;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}W=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var $=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};d.addEventListener("test",_,y),d.removeEventListener("test",_,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function F(h,y){M.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}w(F,M),F.prototype.init=function(h,y){const _=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(_=="mouseover"?y=h.fromElement:_=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var D="closure_listenable_"+(Math.random()*1e6|0),I=0;function K(h,y,_,C,J){this.listener=h,this.proxy=null,this.src=y,this.type=_,this.capture=!!C,this.ha=J,this.key=++I,this.da=this.fa=!1}function oe(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Te(h,y,_){for(const C in h)y.call(_,h[C],C,h)}function ve(h,y){for(const _ in h)y.call(void 0,h[_],_,h)}function P(h){const y={};for(const _ in h)y[_]=h[_];return y}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(h,y){let _,C;for(let J=1;J<arguments.length;J++){C=arguments[J];for(_ in C)h[_]=C[_];for(let ie=0;ie<Z.length;ie++)_=Z[ie],Object.prototype.hasOwnProperty.call(C,_)&&(h[_]=C[_])}}function xe(h){this.src=h,this.g={},this.h=0}xe.prototype.add=function(h,y,_,C,J){const ie=h.toString();h=this.g[ie],h||(h=this.g[ie]=[],this.h++);const Ee=De(h,y,C,J);return Ee>-1?(y=h[Ee],_||(y.fa=!1)):(y=new K(y,this.src,ie,!!C,J),y.fa=_,h.push(y)),y};function be(h,y){const _=y.type;if(_ in h.g){var C=h.g[_],J=Array.prototype.indexOf.call(C,y,void 0),ie;(ie=J>=0)&&Array.prototype.splice.call(C,J,1),ie&&(oe(y),h.g[_].length==0&&(delete h.g[_],h.h--))}}function De(h,y,_,C){for(let J=0;J<h.length;++J){const ie=h[J];if(!ie.da&&ie.listener==y&&ie.capture==!!_&&ie.ha==C)return J}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),kt={};function ft(h,y,_,C,J){if(Array.isArray(y)){for(let ie=0;ie<y.length;ie++)ft(h,y[ie],_,C,J);return null}return _=ct(_),h&&h[D]?h.J(y,_,p(C)?!!C.capture:!1,J):sn(h,y,_,!1,C,J)}function sn(h,y,_,C,J,ie){if(!y)throw Error("Invalid event type");const Ee=p(J)?!!J.capture:!!J;let at=Pe(h);if(at||(h[ze]=at=new xe(h)),_=at.add(y,_,C,Ee,ie),_.proxy)return _;if(C=se(),_.proxy=C,C.src=h,C.listener=_,h.addEventListener)$||(J=Ee),J===void 0&&(J=!1),h.addEventListener(y.toString(),C,J);else if(h.attachEvent)h.attachEvent(Ae(y.toString()),C);else if(h.addListener&&h.removeListener)h.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return _}function se(){function h(_){return y.call(h.src,h.listener,_)}const y=Ce;return h}function _e(h,y,_,C,J){if(Array.isArray(y))for(var ie=0;ie<y.length;ie++)_e(h,y[ie],_,C,J);else C=p(C)?!!C.capture:!!C,_=ct(_),h&&h[D]?(h=h.i,ie=String(y).toString(),ie in h.g&&(y=h.g[ie],_=De(y,_,C,J),_>-1&&(oe(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete h.g[ie],h.h--)))):h&&(h=Pe(h))&&(y=h.g[y.toString()],h=-1,y&&(h=De(y,_,C,J)),(_=h>-1?y[h]:null)&&de(_))}function de(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[D])be(y.i,h);else{var _=h.type,C=h.proxy;y.removeEventListener?y.removeEventListener(_,C,h.capture):y.detachEvent?y.detachEvent(Ae(_),C):y.addListener&&y.removeListener&&y.removeListener(C),(_=Pe(y))?(be(_,h),_.h==0&&(_.src=null,y[ze]=null)):oe(h)}}}function Ae(h){return h in kt?kt[h]:kt[h]="on"+h}function Ce(h,y){if(h.da)h=!0;else{y=new F(y,this);const _=h.listener,C=h.ha||h.src;h.fa&&de(h),h=_.call(C,y)}return h}function Pe(h){return h=h[ze],h instanceof xe?h:null}var yt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ct(h){return typeof h=="function"?h:(h[yt]||(h[yt]=function(y){return h.handleEvent(y)}),h[yt])}function ut(){B.call(this),this.i=new xe(this),this.M=this,this.G=null}w(ut,B),ut.prototype[D]=!0,ut.prototype.removeEventListener=function(h,y,_,C){_e(this,h,y,_,C)};function ke(h,y){var _,C=h.G;if(C)for(_=[];C;C=C.G)_.push(C);if(h=h.M,C=y.type||y,typeof y=="string")y=new M(y,h);else if(y instanceof M)y.target=y.target||h;else{var J=y;y=new M(C,h),ue(y,J)}J=!0;let ie,Ee;if(_)for(Ee=_.length-1;Ee>=0;Ee--)ie=y.g=_[Ee],J=Ve(ie,C,!0,y)&&J;if(ie=y.g=h,J=Ve(ie,C,!0,y)&&J,J=Ve(ie,C,!1,y)&&J,_)for(Ee=0;Ee<_.length;Ee++)ie=y.g=_[Ee],J=Ve(ie,C,!1,y)&&J}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const _=h.g[y];for(let C=0;C<_.length;C++)oe(_[C]);delete h.g[y],h.h--}}this.G=null},ut.prototype.J=function(h,y,_,C){return this.i.add(String(h),y,!1,_,C)},ut.prototype.K=function(h,y,_,C){return this.i.add(String(h),y,!0,_,C)};function Ve(h,y,_,C){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let J=!0;for(let ie=0;ie<y.length;++ie){const Ee=y[ie];if(Ee&&!Ee.da&&Ee.capture==_){const at=Ee.listener,mn=Ee.ha||Ee.src;Ee.fa&&be(h.i,Ee),J=at.call(mn,C)!==!1&&J}}return J&&!C.defaultPrevented}function ot(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=x(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:d.setTimeout(h,y||0)}function Qt(h){h.g=ot(()=>{h.g=null,h.i&&(h.i=!1,Qt(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class _t extends B{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nt(h){B.call(this),this.h=h,this.g={}}w(Nt,B);var Cn=[];function Tt(h){Te(h.g,function(y,_){this.g.hasOwnProperty(_)&&de(y)},h),h.g={}}Nt.prototype.N=function(){Nt.Z.N.call(this),Tt(this)},Nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xn=d.JSON.stringify,qn=d.JSON.parse,vs=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function ns(){}function $a(){}var H={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function re(){M.call(this,"d")}w(re,M);function Ne(){M.call(this,"c")}w(Ne,M);var we={},$e=null;function Je(){return $e=$e||new ut}we.Ia="serverreachability";function Ft(h){M.call(this,we.Ia,h)}w(Ft,M);function Be(h){const y=Je();ke(y,new Ft(y))}we.STAT_EVENT="statevent";function me(h,y){M.call(this,we.STAT_EVENT,h),this.stat=y}w(me,M);function Se(h){const y=Je();ke(y,new me(y,h))}we.Ja="timingevent";function Qe(h,y){M.call(this,we.Ja,h),this.size=y}w(Qe,M);function Ze(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function jt(){this.g=!0}jt.prototype.ua=function(){this.g=!1};function Ue(h,y,_,C,J,ie){h.info(function(){if(h.g)if(ie){var Ee="",at=ie.split("&");for(let At=0;At<at.length;At++){var mn=at[At].split("=");if(mn.length>1){const Xt=mn[0];mn=mn[1];const Bs=Xt.split("_");Ee=Bs.length>=2&&Bs[1]=="type"?Ee+(Xt+"="+mn+"&"):Ee+(Xt+"=redacted&")}}}else Ee=null;else Ee=ie;return"XMLHTTP REQ ("+C+") [attempt "+J+"]: "+y+`
`+_+`
`+Ee})}function He(h,y,_,C,J,ie,Ee){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+J+"]: "+y+`
`+_+`
`+ie+" "+Ee})}function Dt(h,y,_,C){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+$n(h,_)+(C?" "+C:"")})}function an(h,y){h.info(function(){return"TIMEOUT: "+y})}jt.prototype.info=function(){};function $n(h,y){if(!h.g)return y;if(!y)return null;try{const ie=JSON.parse(y);if(ie){for(h=0;h<ie.length;h++)if(Array.isArray(ie[h])){var _=ie[h];if(!(_.length<2)){var C=_[1];if(Array.isArray(C)&&!(C.length<1)){var J=C[0];if(J!="noop"&&J!="stop"&&J!="close")for(let Ee=1;Ee<C.length;Ee++)C[Ee]=""}}}}return Xn(ie)}catch{return y}}var ss={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ti;function Ha(){}w(Ha,ns),Ha.prototype.g=function(){return new XMLHttpRequest},Ti=new Ha;function fn(h){return encodeURIComponent(String(h))}function Ai(h){var y=1;h=h.split(":");const _=[];for(;y>0&&h.length;)_.push(h.shift()),y--;return h.length&&_.push(h.join(":")),_}function bn(h,y,_,C){this.j=h,this.i=y,this.l=_,this.S=C||1,this.V=new Nt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new as}function as(){this.i=null,this.g="",this.h=!1}var rn={},yn={};function ws(h,y,_){h.M=1,h.A=ki(wn(y)),h.u=_,h.R=!0,Ci(h,null)}function Ci(h,y){h.F=Date.now(),ga(h),h.B=wn(h.A);var _=h.B,C=h.S;Array.isArray(C)||(C=[String(C)]),Tl(_.i,"t",C),h.C=0,_=h.j.L,h.h=new as,h.g=Wu(h.j,_?y:null,!h.u),h.P>0&&(h.O=new _t(x(h.Y,h,h.g),h.P)),y=h.V,_=h.g,C=h.ba;var J="readystatechange";Array.isArray(J)||(J&&(Cn[0]=J.toString()),J=Cn);for(let ie=0;ie<J.length;ie++){const Ee=ft(_,J[ie],C||y.handleEvent,!1,y.h||y);if(!Ee)break;y.g[Ee.key]=Ee}y=h.J?P(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Be(),Ue(h.i,h.v,h.B,h.l,h.S,h.u)}bn.prototype.ba=function(h){h=h.target;const y=this.O;y&&na(h)==3?y.j():this.Y(h)},bn.prototype.Y=function(h){try{if(h==this.g)e:{const at=na(this.g),mn=this.g.ya(),At=this.g.ca();if(!(at<3)&&(at!=3||this.g&&(this.h.h||this.g.la()||On(this.g)))){this.K||at!=4||mn==7||(mn==8||At<=0?Be(3):Be(2)),xa(this);var y=this.g.ca();this.X=y;var _=Of(this);if(this.o=y==200,He(this.i,this.v,this.B,this.l,this.S,at,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,J=this.g;if((C=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(C)){var ie=C;break t}}ie=null}if(h=ie)Dt(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ba(this,h);else{this.o=!1,this.m=3,Se(12),_s(this),Vs(this);break e}}if(this.R){h=!0;let Xt;for(;!this.K&&this.C<_.length;)if(Xt=Ou(this,_),Xt==yn){at==4&&(this.m=4,Se(14),h=!1),Dt(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==rn){this.m=4,Se(15),Dt(this.i,this.l,_,"[Invalid Chunk]"),h=!1;break}else Dt(this.i,this.l,Xt,null),ba(this,Xt);if(Mu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||_.length!=0||this.h.h||(this.m=1,Se(16),h=!1),this.o=this.o&&h,!h)Dt(this.i,this.l,_,"[Invalid Chunked Response]"),_s(this),Vs(this);else if(_.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ec(Ee),Ee.P=!0,Se(11))}}else Dt(this.i,this.l,_,null),ba(this,_);at==4&&_s(this),this.o&&!this.K&&(at==4?$u(this.j,this):(this.o=!1,ga(this)))}else Ya(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,Se(12)):(this.m=0,Se(13)),_s(this),Vs(this)}}}catch{}};function Of(h){if(!Mu(h))return h.g.la();const y=On(h.g);if(y==="")return"";let _="";const C=y.length,J=na(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return _s(h),Vs(h),"";h.h.i=new d.TextDecoder}for(let ie=0;ie<C;ie++)h.h.h=!0,_+=h.h.i.decode(y[ie],{stream:!(J&&ie==C-1)});return y.length=0,h.h.g+=_,h.C=0,h.h.g}function Mu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ou(h,y){var _=h.C,C=y.indexOf(`
`,_);return C==-1?yn:(_=Number(y.substring(_,C)),isNaN(_)?rn:(C+=1,C+_>y.length?yn:(y=y.slice(C,C+_),h.C=C+_,y)))}bn.prototype.cancel=function(){this.K=!0,_s(this)};function ga(h){h.T=Date.now()+h.H,jl(h,h.H)}function jl(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Ze(x(h.aa,h),y)}function xa(h){h.D&&(d.clearTimeout(h.D),h.D=null)}bn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(an(this.i,this.B),this.M!=2&&(Be(),Se(17)),_s(this),this.m=2,Vs(this)):jl(this,this.T-h)};function Vs(h){h.j.I==0||h.K||$u(h.j,h)}function _s(h){xa(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Tt(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function ba(h,y){try{var _=h.j;if(_.I!=0&&(_.g==h||va(_.h,h))){if(!h.L&&va(_.h,h)&&_.I==3){try{var C=_.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var J=C;if(J[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<h.F)Il(_),Rr(_);else break e;Vi(_),Se(18)}}else _.xa=J[1],0<_.xa-_.K&&J[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Ze(x(_.Va,_),6e3));ya(_.h)<=1&&_.ta&&(_.ta=void 0)}else Ea(_,11)}else if((h.L||_.g==h)&&Il(_),!R(y))for(J=_.Ba.g.parse(y),y=0;y<J.length;y++){let At=J[y];const Xt=At[0];if(!(Xt<=_.K))if(_.K=Xt,At=At[1],_.I==2)if(At[0]=="c"){_.M=At[1],_.ba=At[2];const Bs=At[3];Bs!=null&&(_.ka=Bs,_.j.info("VER="+_.ka));const Ta=At[4];Ta!=null&&(_.za=Ta,_.j.info("SVER="+_.za));const sa=At[5];sa!=null&&typeof sa=="number"&&sa>0&&(C=1.5*sa,_.O=C,_.j.info("backChannelRequestTimeoutMs_="+C)),C=_;const aa=h.g;if(aa){const Li=aa.g?aa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Li){var ie=C.h;ie.g||Li.indexOf("spdy")==-1&&Li.indexOf("quic")==-1&&Li.indexOf("h2")==-1||(ie.j=ie.l,ie.g=new Set,ie.h&&(Fo(ie,ie.h),ie.h=null))}if(C.G){const Dl=aa.g?aa.g.getResponseHeader("X-HTTP-Session-Id"):null;Dl&&(C.wa=Dl,Mt(C.J,C.G,Dl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-h.F,_.j.info("Handshake RTT: "+_.T+"ms")),C=_;var Ee=h;if(C.na=Yu(C,C.L?C.ba:null,C.W),Ee.L){qo(C.h,Ee);var at=Ee,mn=C.O;mn&&(at.H=mn),at.D&&(xa(at),ga(at)),C.g=Ee}else Fu(C);_.i.length>0&&Sa(_)}else At[0]!="stop"&&At[0]!="close"||Ea(_,7);else _.I==3&&(At[0]=="stop"||At[0]=="close"?At[0]=="stop"?Ea(_,7):Jo(_):At[0]!="noop"&&_.l&&_.l.qa(At),_.A=0)}}Be(4)}catch{}}var vn=class{constructor(h,y){this.g=h,this.map=y}};function Bo(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ya(h){return h.h?1:h.g?h.g.size:0}function va(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Fo(h,y){h.g?h.g.add(y):h.h=y}function qo(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Bo.prototype.cancel=function(){if(this.i=$o(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function $o(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const _ of h.g.values())y=y.concat(_.G);return y}return T(h.i)}var Pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sl(h,y){if(h){h=h.split("&");for(let _=0;_<h.length;_++){const C=h[_].indexOf("=");let J,ie=null;C>=0?(J=h[_].substring(0,C),ie=h[_].substring(C+1)):J=h[_],y(J,ie?decodeURIComponent(ie.replace(/\+/g," ")):"")}}}function Ns(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Ns?(this.l=h.l,In(this,h.j),this.o=h.o,this.g=h.g,jr(this,h.u),this.h=h.h,Ho(this,Bu(h.i)),this.m=h.m):h&&(y=String(h).match(Pu))?(this.l=!1,In(this,y[1]||"",!0),this.o=wa(y[2]||""),this.g=wa(y[3]||"",!0),jr(this,y[4]),this.h=wa(y[5]||"",!0),Ho(this,y[6]||"",!0),this.m=wa(y[7]||"")):(this.l=!1,this.i=new Er(null,this.l))}Ns.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ri(y,El,!0),":");var _=this.g;return(_||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ri(y,El,!0),"@"),h.push(fn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&h.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Ri(_,_.charAt(0)=="/"?Go:Vu,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Ri(_,Lu)),h.join("")},Ns.prototype.resolve=function(h){const y=wn(this);let _=!!h.j;_?In(y,h.j):_=!!h.o,_?y.o=h.o:_=!!h.g,_?y.g=h.g:_=h.u!=null;var C=h.h;if(_)jr(y,h.u);else if(_=!!h.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var J=y.h.lastIndexOf("/");J!=-1&&(C=y.h.slice(0,J+1)+C)}if(J=C,J==".."||J==".")C="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){C=J.lastIndexOf("/",0)==0,J=J.split("/");const ie=[];for(let Ee=0;Ee<J.length;){const at=J[Ee++];at=="."?C&&Ee==J.length&&ie.push(""):at==".."?((ie.length>1||ie.length==1&&ie[0]!="")&&ie.pop(),C&&Ee==J.length&&ie.push("")):(ie.push(at),C=!0)}C=ie.join("/")}else C=J}return _?y.h=C:_=h.i.toString()!=="",_?Ho(y,Bu(h.i)):_=!!h.m,_&&(y.m=h.m),y};function wn(h){return new Ns(h)}function In(h,y,_){h.j=_?wa(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function jr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ho(h,y,_){y instanceof Er?(h.i=y,Al(h.i,h.l)):(_||(y=Ri(y,Sr)),h.i=new Er(y,h.l))}function Mt(h,y,_){h.i.set(y,_)}function ki(h){return Mt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function wa(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ri(h,y,_){return typeof h=="string"?(h=encodeURI(h).replace(y,rs),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function rs(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var El=/[#\/\?@]/g,Vu=/[#\?:]/g,Go=/[#\?]/g,Sr=/[#\?@]/g,Lu=/#/g;function Er(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function is(h){h.g||(h.g=new Map,h.h=0,h.i&&Sl(h.i,function(y,_){h.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}s=Er.prototype,s.add=function(h,y){is(this),this.i=null,h=Tr(this,h);let _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(y),this.h+=1,this};function Uu(h,y){is(h),y=Tr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Yo(h,y){return is(h),y=Tr(h,y),h.g.has(y)}s.forEach=function(h,y){is(this),this.g.forEach(function(_,C){_.forEach(function(J){h.call(y,J,C,this)},this)},this)};function Wo(h,y){is(h);let _=[];if(typeof y=="string")Yo(h,y)&&(_=_.concat(h.g.get(Tr(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)_=_.concat(h[y]);return _}s.set=function(h,y){return is(this),this.i=null,h=Tr(this,h),Yo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=Wo(this,h),h.length>0?String(h[0]):y):y};function Tl(h,y,_){Uu(h,y),_.length>0&&(h.i=null,h.g.set(Tr(h,y),T(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var _=y[C];const J=fn(_);_=Wo(this,_);for(let ie=0;ie<_.length;ie++){let Ee=J;_[ie]!==""&&(Ee+="="+fn(_[ie])),h.push(Ee)}}return this.i=h.join("&")};function Bu(h){const y=new Er;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Tr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Al(h,y){y&&!h.j&&(is(h),h.i=null,h.g.forEach(function(_,C){const J=C.toLowerCase();C!=J&&(Uu(this,C),Tl(this,J,_))},h)),h.j=y}function ea(h,y){const _=new jt;if(d.Image){const C=new Image;C.onload=b(Ls,_,"TestLoadImage: loaded",!0,y,C),C.onerror=b(Ls,_,"TestLoadImage: error",!1,y,C),C.onabort=b(Ls,_,"TestLoadImage: abort",!1,y,C),C.ontimeout=b(Ls,_,"TestLoadImage: timeout",!1,y,C),d.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else y(!1)}function Ko(h,y){const _=new jt,C=new AbortController,J=setTimeout(()=>{C.abort(),Ls(_,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:C.signal}).then(ie=>{clearTimeout(J),ie.ok?Ls(_,"TestPingServer: ok",!0,y):Ls(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(J),Ls(_,"TestPingServer: error",!1,y)})}function Ls(h,y,_,C,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),C(_)}catch{}}function Ar(){this.g=new vs}function _a(h){this.i=h.Sb||null,this.h=h.ab||!1}w(_a,ns),_a.prototype.g=function(){return new Ii(this.i,this.h)};function Ii(h,y){ut.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ii,ut),s=Ii.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,ta(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||d).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},s.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ta(this)),this.g&&(this.readyState=3,ta(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cl(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cl(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}s.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Cr(this):ta(this),this.readyState==3&&Cl(this)}},s.Oa=function(h){this.g&&(this.response=this.responseText=h,Cr(this))},s.Na=function(h){this.g&&(this.response=h,Cr(this))},s.ga=function(){this.g&&Cr(this)};function Cr(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ta(h)}s.setRequestHeader=function(h,y){this.A.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=y.next();return h.join(`\r
`)};function ta(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ii.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Us(h){let y="";return Te(h,function(_,C){y+=C,y+=":",y+=_,y+=`\r
`}),y}function Di(h,y,_){e:{for(C in _){var C=!1;break e}C=!0}C||(_=Us(_),typeof h=="string"?_!=null&&fn(_):Mt(h,y,_))}function Lt(h){ut.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Lt,ut);var Na=/^https?$/i,Qo=["POST","PUT"];s=Lt.prototype,s.Fa=function(h){this.H=h},s.ea=function(h,y,_,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ti.g(),this.g.onreadystatechange=j(x(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ie){Mi(this,ie);return}if(h=_||"",_=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var J in C)_.set(J,C[J]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const ie of C.keys())_.set(ie,C.get(ie));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(_.keys()).find(ie=>ie.toLowerCase()=="content-type"),J=d.FormData&&h instanceof d.FormData,!(Array.prototype.indexOf.call(Qo,y,void 0)>=0)||C||J||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ie,Ee]of _)this.g.setRequestHeader(ie,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ie){Mi(this,ie)}};function Mi(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Xo(h),Ga(h)}function Xo(h){h.A||(h.A=!0,ke(h,"complete"),ke(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ke(this,"complete"),ke(this,"abort"),Ga(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ga(this,!0)),Lt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Oi(this):this.Xa())},s.Xa=function(){Oi(this)};function Oi(h){if(h.h&&typeof u<"u"){if(h.v&&na(h)==4)setTimeout(h.Ca.bind(h),0);else if(ke(h,"readystatechange"),na(h)==4){h.h=!1;try{const ie=h.ca();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var C;if(C=ie===0){let Ee=String(h.D).match(Pu)[1]||null;!Ee&&d.self&&d.self.location&&(Ee=d.self.location.protocol.slice(0,-1)),C=!Na.test(Ee?Ee.toLowerCase():"")}_=C}if(_)ke(h,"complete"),ke(h,"success");else{h.o=6;try{var J=na(h)>2?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.ca()+"]",Xo(h)}}finally{Ga(h)}}}}function Ga(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const _=h.g;h.g=null,y||ke(h,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function na(h){return h.g?h.g.readyState:0}s.ca=function(){try{return na(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),qn(y)}};function On(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ya(h){const y={};h=(h.g&&na(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<h.length;C++){if(R(h[C]))continue;var _=Ai(h[C]);const J=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ie=y[J]||[];y[J]=ie,ie.push(_)}ve(y,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(h,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||y}function kr(h){this.za=0,this.i=[],this.j=new jt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ja("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ja("baseRetryDelayMs",5e3,h),this.Za=ja("retryDelaySeedMs",1e4,h),this.Ta=ja("forwardChannelMaxRetries",2,h),this.va=ja("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Bo(h&&h.concurrentRequestLimit),this.Ba=new Ar,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=kr.prototype,s.ka=8,s.I=1,s.connect=function(h,y,_,C){Se(0),this.W=h,this.H=y||{},_&&C!==void 0&&(this.H.OSID=_,this.H.OAID=C),this.F=this.X,this.J=Yu(this,null,this.W),Sa(this)};function Jo(h){if(kl(h),h.I==3){var y=h.V++,_=wn(h.J);if(Mt(_,"SID",h.M),Mt(_,"RID",y),Mt(_,"TYPE","terminate"),Pi(h,_),y=new bn(h,h.j,y),y.M=2,y.A=ki(wn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=y.A,_=!0),_||(y.g=Wu(y.j,null),y.g.ea(y.A)),y.F=Date.now(),ga(y)}Gu(h)}function Rr(h){h.g&&(ec(h),h.g.cancel(),h.g=null)}function kl(h){Rr(h),h.v&&(d.clearTimeout(h.v),h.v=null),Il(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&d.clearTimeout(h.m),h.m=null)}function Sa(h){if(!zo(h.h)&&!h.m){h.m=!0;var y=h.Ea;ce||A(),W||(ce(),W=!0),S.add(y,h),h.D=0}}function Rl(h,y){return ya(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Ze(x(h.Ea,h,y),Hu(h,h.D)),h.D++,!0)}s.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const J=new bn(this,this.j,h);let ie=this.o;if(this.U&&(ie?(ie=P(ie),ue(ie,this.U)):ie=this.U),this.u!==null||this.R||(J.J=ie,ie=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var C=this.i[_];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=zu(this,J,y),_=wn(this.J),Mt(_,"RID",h),Mt(_,"CVER",22),this.G&&Mt(_,"X-HTTP-Session-Id",this.G),Pi(this,_),ie&&(this.R?y="headers="+fn(Us(ie))+"&"+y:this.u&&Di(_,this.u,ie)),Fo(this.h,J),this.Ra&&Mt(_,"TYPE","init"),this.S?(Mt(_,"$req",y),Mt(_,"SID","null"),J.U=!0,ws(J,_,null)):ws(J,_,y),this.I=2}}else this.I==3&&(h?Zo(this,h):this.i.length==0||zo(this.h)||Zo(this))};function Zo(h,y){var _;y?_=y.l:_=h.V++;const C=wn(h.J);Mt(C,"SID",h.M),Mt(C,"RID",_),Mt(C,"AID",h.K),Pi(h,C),h.u&&h.o&&Di(C,h.u,h.o),_=new bn(h,h.j,_,h.D+1),h.u===null&&(_.J=h.o),y&&(h.i=y.G.concat(h.i)),y=zu(h,_,1e3),_.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Fo(h.h,_),ws(_,C,y)}function Pi(h,y){h.H&&Te(h.H,function(_,C){Mt(y,C,_)}),h.l&&Te({},function(_,C){Mt(y,C,_)})}function zu(h,y,_){_=Math.min(h.i.length,_);const C=h.l?x(h.l.Ka,h.l,h):null;e:{var J=h.i;let at=-1;for(;;){const mn=["count="+_];at==-1?_>0?(at=J[0].g,mn.push("ofs="+at)):at=0:mn.push("ofs="+at);let At=!0;for(let Xt=0;Xt<_;Xt++){var ie=J[Xt].g;const Bs=J[Xt].map;if(ie-=at,ie<0)at=Math.max(0,J[Xt].g-100),At=!1;else try{ie="req"+ie+"_"||"";try{var Ee=Bs instanceof Map?Bs:Object.entries(Bs);for(const[Ta,sa]of Ee){let aa=sa;p(sa)&&(aa=Xn(sa)),mn.push(ie+Ta+"="+encodeURIComponent(aa))}}catch(Ta){throw mn.push(ie+"type="+encodeURIComponent("_badmap")),Ta}}catch{C&&C(Bs)}}if(At){Ee=mn.join("&");break e}}Ee=void 0}return h=h.i.splice(0,_),y.G=h,Ee}function Fu(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ce||A(),W||(ce(),W=!0),S.add(y,h),h.A=0}}function Vi(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Ze(x(h.Da,h),Hu(h,h.A)),h.A++,!0)}s.Da=function(){if(this.v=null,qu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Ze(x(this.Wa,this),h)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Se(10),Rr(this),qu(this))};function ec(h){h.B!=null&&(d.clearTimeout(h.B),h.B=null)}function qu(h){h.g=new bn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=wn(h.na);Mt(y,"RID","rpc"),Mt(y,"SID",h.M),Mt(y,"AID",h.K),Mt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Mt(y,"TO",h.ia),Mt(y,"TYPE","xmlhttp"),Pi(h,y),h.u&&h.o&&Di(y,h.u,h.o),h.O&&(h.g.H=h.O);var _=h.g;h=h.ba,_.M=1,_.A=ki(wn(y)),_.u=null,_.R=!0,Ci(_,h)}s.Va=function(){this.C!=null&&(this.C=null,Rr(this),Vi(this),Se(19))};function Il(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function $u(h,y){var _=null;if(h.g==y){Il(h),ec(h),h.g=null;var C=2}else if(va(h.h,y))_=y.G,qo(h.h,y),C=1;else return;if(h.I!=0){if(y.o)if(C==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var J=h.D;C=Je(),ke(C,new Qe(C,_)),Sa(h)}else Fu(h);else if(J=y.m,J==3||J==0&&y.X>0||!(C==1&&Rl(h,y)||C==2&&Vi(h)))switch(_&&_.length>0&&(y=h.h,y.i=y.i.concat(_)),J){case 1:Ea(h,5);break;case 4:Ea(h,10);break;case 3:Ea(h,6);break;default:Ea(h,2)}}}function Hu(h,y){let _=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(_*=2),_*y}function Ea(h,y){if(h.j.info("Error code "+y),y==2){var _=x(h.bb,h),C=h.Ua;const J=!C;C=new Ns(C||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||In(C,"https"),ki(C),J?ea(C.toString(),_):Ko(C.toString(),_)}else Se(2);h.I=0,h.l&&h.l.pa(y),Gu(h),kl(h)}s.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))};function Gu(h){if(h.I=0,h.ja=[],h.l){const y=$o(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ja,y),L(h.ja,h.i),h.h.i.length=0,T(h.i),h.i.length=0),h.l.oa()}}function Yu(h,y,_){var C=_ instanceof Ns?wn(_):new Ns(_);if(C.g!="")y&&(C.g=y+"."+C.g),jr(C,C.u);else{var J=d.location;C=J.protocol,y=y?y+"."+J.hostname:J.hostname,J=+J.port;const ie=new Ns(null);C&&In(ie,C),y&&(ie.g=y),J&&jr(ie,J),_&&(ie.h=_),C=ie}return _=h.G,y=h.wa,_&&y&&Mt(C,_,y),Mt(C,"VER",h.ka),Pi(h,C),C}function Wu(h,y,_){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Lt(new _a({ab:_})):new Lt(h.ma),y.Fa(h.L),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ku(){}s=Ku.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Ir(){}Ir.prototype.g=function(h,y){return new Jn(h,y)};function Jn(h,y){ut.call(this),this.g=new kr(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Wa(this)}w(Jn,ut),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){Jo(this.g)},Jn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.v&&(_={},_.__data__=Xn(h),h=_);y.i.push(new vn(y.Ya++,h)),y.I==3&&Sa(y)},Jn.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,Jn.Z.N.call(this)};function Qu(h){re.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const _ in y){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}w(Qu,re);function Xu(){Ne.call(this),this.status=1}w(Xu,Ne);function Wa(h){this.g=h}w(Wa,Ku),Wa.prototype.ra=function(){ke(this.g,"a")},Wa.prototype.qa=function(h){ke(this.g,new Qu(h))},Wa.prototype.pa=function(h){ke(this.g,new Xu)},Wa.prototype.oa=function(){ke(this.g,"b")},Ir.prototype.createWebChannel=Ir.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,xN=function(){return new Ir},gN=function(){return Je()},pN=we,b0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ss.NO_ERROR=0,ss.TIMEOUT=8,ss.HTTP_ERROR=6,wh=ss,Zs.COMPLETE="complete",mN=Zs,$a.EventType=H,H.OPEN="a",H.CLOSE="b",H.ERROR="c",H.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Yc=$a,Lt.prototype.listenOnce=Lt.prototype.K,Lt.prototype.getLastError=Lt.prototype.Ha,Lt.prototype.getLastErrorCode=Lt.prototype.ya,Lt.prototype.getStatus=Lt.prototype.ca,Lt.prototype.getResponseJson=Lt.prototype.La,Lt.prototype.getResponseText=Lt.prototype.la,Lt.prototype.send=Lt.prototype.ea,Lt.prototype.setWithCredentials=Lt.prototype.Fa,fN=Lt}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});let Yn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");let Po="12.8.0";function Gk(s){Po=s}const hl=new sg("@firebase/firestore");function co(){return hl.logLevel}function Me(s,...e){if(hl.logLevel<=gt.DEBUG){const t=e.map(mg);hl.debug(`Firestore (${Po}): ${s}`,...t)}}function vr(s,...e){if(hl.logLevel<=gt.ERROR){const t=e.map(mg);hl.error(`Firestore (${Po}): ${s}`,...t)}}function No(s,...e){if(hl.logLevel<=gt.WARN){const t=e.map(mg);hl.warn(`Firestore (${Po}): ${s}`,...t)}}function mg(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Ke(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,bN(s,r,t)}function bN(s,e,t){let r=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw vr(r),new Error(r)}function It(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||bN(e,o,r)}function nt(s,e){return s}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends qa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class yN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Yn.UNAUTHENTICATED)))}shutdown(){}}class Wk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Kk{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){It(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let u=new pr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new pr,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new pr)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new yN(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new Yn(e)}}class Qk{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Xk{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Qk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rs(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){It(this.o===void 0,3512);const r=u=>{u.error!=null&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,Me("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>r(u)))};const o=u=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(It(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Zk(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}class pg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Zk(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%62))}return r}}function xt(s,e){return s<e?-1:s>e?1:0}function y0(s,e){const t=Math.min(s.length,e.length);for(let r=0;r<t;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return Hp(o)===Hp(u)?xt(o,u):Hp(o)?1:-1}return xt(s.length,e.length)}const e4=55296,t4=57343;function Hp(s){const e=s.charCodeAt(0);return e>=e4&&e<=t4}function jo(s,e,t){return s.length===e.length&&s.every(((r,o)=>t(r,e[o])))}const ww="__name__";class Ia{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ke(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ke(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ia.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ia?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=Ia.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return xt(e.length,t.length)}static compareSegments(e,t){const r=Ia.isNumericId(e),o=Ia.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Ia.extractNumericId(e).compare(Ia.extractNumericId(t)):y0(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ui.fromString(e.substring(4,e.length-2))}}class Yt extends Ia{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new Yt(t)}static emptyPath(){return new Yt([])}}const n4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Ia{construct(e,t,r){return new zn(e,t,r)}static isValidIdentifier(e){return n4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ww}static keyField(){return new zn([ww])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(r.length===0)throw new Ie(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new Ie(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new Ie(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else p==="`"?(d=!d,o++):p!=="."||d?(r+=p,o++):(u(),o++)}if(u(),d)throw new Ie(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Yt.fromString(e))}static fromName(e){return new qe(Yt.fromString(e).popFirst(5))}static empty(){return new qe(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Yt(e.slice()))}}function vN(s,e,t){if(!t)throw new Ie(ge.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function s4(s,e,t,r){if(e===!0&&r===!0)throw new Ie(ge.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function _w(s){if(!qe.isDocumentKey(s))throw new Ie(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Nw(s){if(qe.isDocumentKey(s))throw new Ie(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function wN(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function uf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ke(12329,{type:typeof s})}function gs(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new Ie(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=uf(s);throw new Ie(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function An(s,e){const t={typeString:s};return e&&(t.value=e),t}function Eu(s,e){if(!wN(s))throw new Ie(ge.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){t=`JSON missing required field: '${r}'`;break}const d=s[r];if(o&&typeof d!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&d!==u.value){t=`Expected '${r}' field to equal '${u.value}'`;break}}if(t)throw new Ie(ge.INVALID_ARGUMENT,t);return!0}const jw=-62135596800,Sw=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Sw);return new Rt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<jw)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sw}_compareTo(e){return this.seconds===e.seconds?xt(this.nanoseconds,e.nanoseconds):xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:An("string",Rt._jsonSchemaVersion),seconds:An("number"),nanoseconds:An("number")};class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Rt(0,0))}static max(){return new Xe(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const cu=-1;function a4(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Xe.fromTimestamp(r===1e9?new Rt(t+1,0):new Rt(t,r));return new mi(o,qe.empty(),e)}function r4(s){return new mi(s.readTime,s.key,cu)}class mi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new mi(Xe.min(),qe.empty(),cu)}static max(){return new mi(Xe.max(),qe.empty(),cu)}}function i4(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=qe.comparator(s.documentKey,e.documentKey),t!==0?t:xt(s.largestBatchId,e.largestBatchId))}const l4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class o4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vo(s){if(s.code!==ge.FAILED_PRECONDITION||s.message!==l4)throw s;Me("LocalStore","Unexpectedly lost primary lease")}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ke(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ye.reject(t)}static resolve(e){return new ye(((t,r)=>{t(e)}))}static reject(e){return new ye(((t,r)=>{r(e)}))}static waitFor(e){return new ye(((t,r)=>{let o=0,u=0,d=!1;e.forEach((p=>{++o,p.next((()=>{++u,d&&u===o&&t()}),(g=>r(g)))})),d=!0,u===o&&t()}))}static or(e){let t=ye.resolve(!1);for(const r of e)t=t.next((o=>o?ye.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,u)=>{r.push(t.call(this,o,u))})),this.waitFor(r)}static mapArray(e,t){return new ye(((r,o)=>{const u=e.length,d=new Array(u);let p=0;for(let g=0;g<u;g++){const x=g;t(e[x]).next((b=>{d[x]=b,++p,p===u&&r(d)}),(b=>o(b)))}}))}static doWhile(e,t){return new ye(((r,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):r()};u()}))}}function c4(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Lo(s){return s.name==="IndexedDbTransactionError"}class df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}df.ce=-1;const gg=-1;function hf(s){return s==null}function zh(s){return s===0&&1/s==-1/0}function u4(s){return typeof s=="number"&&Number.isInteger(s)&&!zh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const _N="";function d4(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Ew(e)),e=h4(s.get(t),e);return Ew(e)}function h4(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case _N:t+="";break;default:t+=u}}return t}function Ew(s){return s+_N+""}function Tw(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Si(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function NN(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class nn{constructor(e,t){this.comparator=e,this.root=t||Bn.EMPTY}insert(e,t){return new nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Bn.BLACK,null,null))}remove(e){return new nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Bn.RED,this.left=o??Bn.EMPTY,this.right=u??Bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Bn(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Bn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ke(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ke(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ke(27949);return e+(this.isRed()?0:1)}}Bn.EMPTY=null,Bn.RED=!0,Bn.BLACK=!1;Bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ke(57766)}get value(){throw Ke(16141)}get color(){throw Ke(16727)}get left(){throw Ke(29726)}get right(){throw Ke(36894)}copy(e,t,r,o,u){return this}insert(e,t,r){return new Bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Aw(this.data.getIterator())}getIteratorFrom(e){return new Aw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class Aw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Is{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Is([])}unionWith(e){let t=new Rn(zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Is(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class jN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new jN("Invalid base64 string: "+u):u}})(e);return new Fn(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new Fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fn.EMPTY_BYTE_STRING=new Fn("");const f4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(s){if(It(!!s,39018),typeof s=="string"){let e=0;const t=f4.exec(s);if(It(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(s.seconds),nanos:xn(s.nanos)}}function xn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function gi(s){return typeof s=="string"?Fn.fromBase64String(s):Fn.fromUint8Array(s)}const SN="server_timestamp",EN="__type__",TN="__previous_value__",AN="__local_write_time__";function xg(s){return(s?.mapValue?.fields||{})[EN]?.stringValue===SN}function ff(s){const e=s.mapValue.fields[TN];return xg(e)?ff(e):e}function uu(s){const e=pi(s.mapValue.fields[AN].timestampValue);return new Rt(e.seconds,e.nanos)}class m4{constructor(e,t,r,o,u,d,p,g,x,b,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=x,this.isUsingEmulator=b,this.apiKey=w}}const Fh="(default)";class du{constructor(e,t){this.projectId=e,this.database=t||Fh}static empty(){return new du("","")}get isDefaultDatabase(){return this.database===Fh}isEqual(e){return e instanceof du&&e.projectId===this.projectId&&e.database===this.database}}function p4(s,e){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Ie(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new du(s.options.projectId,e)}const CN="__type__",g4="__max__",rh={mapValue:{}},kN="__vector__",qh="value";function xi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?xg(s)?4:b4(s)?9007199254740991:x4(s)?10:11:Ke(28295,{value:s})}function Fa(s,e){if(s===e)return!0;const t=xi(s);if(t!==xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return uu(s).isEqual(uu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=pi(o.timestampValue),p=pi(u.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return gi(o.bytesValue).isEqual(gi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return xn(o.geoPointValue.latitude)===xn(u.geoPointValue.latitude)&&xn(o.geoPointValue.longitude)===xn(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return xn(o.integerValue)===xn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=xn(o.doubleValue),p=xn(u.doubleValue);return d===p?zh(d)===zh(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return jo(s.arrayValue.values||[],e.arrayValue.values||[],Fa);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},p=u.mapValue.fields||{};if(Tw(d)!==Tw(p))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(p[g]===void 0||!Fa(d[g],p[g])))return!1;return!0})(s,e);default:return Ke(52216,{left:s})}}function hu(s,e){return(s.values||[]).find((t=>Fa(t,e)))!==void 0}function So(s,e){if(s===e)return 0;const t=xi(s),r=xi(e);if(t!==r)return xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return xt(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const p=xn(u.integerValue||u.doubleValue),g=xn(d.integerValue||d.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return Cw(s.timestampValue,e.timestampValue);case 4:return Cw(uu(s),uu(e));case 5:return y0(s.stringValue,e.stringValue);case 6:return(function(u,d){const p=gi(u),g=gi(d);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const p=u.split("/"),g=d.split("/");for(let x=0;x<p.length&&x<g.length;x++){const b=xt(p[x],g[x]);if(b!==0)return b}return xt(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const p=xt(xn(u.latitude),xn(d.latitude));return p!==0?p:xt(xn(u.longitude),xn(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return kw(s.arrayValue,e.arrayValue);case 10:return(function(u,d){const p=u.fields||{},g=d.fields||{},x=p[qh]?.arrayValue,b=g[qh]?.arrayValue,w=xt(x?.values?.length||0,b?.values?.length||0);return w!==0?w:kw(x,b)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===rh.mapValue&&d===rh.mapValue)return 0;if(u===rh.mapValue)return 1;if(d===rh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),x=d.fields||{},b=Object.keys(x);g.sort(),b.sort();for(let w=0;w<g.length&&w<b.length;++w){const j=y0(g[w],b[w]);if(j!==0)return j;const T=So(p[g[w]],x[b[w]]);if(T!==0)return T}return xt(g.length,b.length)})(s.mapValue,e.mapValue);default:throw Ke(23264,{he:t})}}function Cw(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return xt(s,e);const t=pi(s),r=pi(e),o=xt(t.seconds,r.seconds);return o!==0?o:xt(t.nanos,r.nanos)}function kw(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const u=So(t[o],r[o]);if(u)return u}return xt(t.length,r.length)}function Eo(s){return v0(s)}function v0(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const r=pi(t);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return gi(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return qe.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let r="[",o=!0;for(const u of t.values||[])o?o=!1:r+=",",r+=v0(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const d of r)u?u=!1:o+=",",o+=`${d}:${v0(t.fields[d])}`;return o+"}"})(s.mapValue):Ke(61005,{value:s})}function _h(s){switch(xi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ff(s);return e?16+_h(e):16;case 5:return 2*s.stringValue.length;case 6:return gi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+_h(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return Si(r.fields,((u,d)=>{o+=u.length+_h(d)})),o})(s.mapValue);default:throw Ke(13486,{value:s})}}function Rw(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function w0(s){return!!s&&"integerValue"in s}function bg(s){return!!s&&"arrayValue"in s}function Iw(s){return!!s&&"nullValue"in s}function Dw(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Nh(s){return!!s&&"mapValue"in s}function x4(s){return(s?.mapValue?.fields||{})[CN]?.stringValue===kN}function eu(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Si(s.mapValue.fields,((t,r)=>e.mapValue.fields[t]=eu(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=eu(s.arrayValue.values[t]);return e}return{...s}}function b4(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===g4}class fs{constructor(e){this.value=e}static empty(){return new fs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(t)}setAll(e){let t=zn.emptyPath(),r={},o=[];e.forEach(((d,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=p.popLast()}d?r[p.lastSegment()]=eu(d):o.push(p.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Nh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Nh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Si(t,((o,u)=>e[o]=u));for(const o of r)delete e[o]}clone(){return new fs(eu(this.value))}}function RN(s){const e=[];return Si(s.fields,((t,r)=>{const o=new zn([t]);if(Nh(r)){const u=RN(r.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Is(e)}class Wn{constructor(e,t,r,o,u,d,p){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=p}static newInvalidDocument(e){return new Wn(e,0,Xe.min(),Xe.min(),Xe.min(),fs.empty(),0)}static newFoundDocument(e,t,r,o){return new Wn(e,1,t,Xe.min(),r,o,0)}static newNoDocument(e,t){return new Wn(e,2,t,Xe.min(),Xe.min(),fs.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,Xe.min(),Xe.min(),fs.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class $h{constructor(e,t){this.position=e,this.inclusive=t}}function Mw(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?r=qe.comparator(qe.fromName(d.referenceValue),t.key):r=So(d,t.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ow(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Fa(s.position[t],e.position[t]))return!1;return!0}class Hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function y4(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class IN{}class Tn extends IN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new w4(e,t,r):t==="array-contains"?new j4(e,r):t==="in"?new S4(e,r):t==="not-in"?new E4(e,r):t==="array-contains-any"?new T4(e,r):new Tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _4(e,r):new N4(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(So(t,this.value)):t!==null&&xi(this.value)===xi(t)&&this.matchesComparison(So(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ke(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ma extends IN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ma(e,t)}matches(e){return DN(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function DN(s){return s.op==="and"}function MN(s){return v4(s)&&DN(s)}function v4(s){for(const e of s.filters)if(e instanceof ma)return!1;return!0}function _0(s){if(s instanceof Tn)return s.field.canonicalString()+s.op.toString()+Eo(s.value);if(MN(s))return s.filters.map((e=>_0(e))).join(",");{const e=s.filters.map((t=>_0(t))).join(",");return`${s.op}(${e})`}}function ON(s,e){return s instanceof Tn?(function(r,o){return o instanceof Tn&&r.op===o.op&&r.field.isEqual(o.field)&&Fa(r.value,o.value)})(s,e):s instanceof ma?(function(r,o){return o instanceof ma&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,d,p)=>u&&ON(d,o.filters[p])),!0):!1})(s,e):void Ke(19439)}function PN(s){return s instanceof Tn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Eo(t.value)}`})(s):s instanceof ma?(function(t){return t.op.toString()+" {"+t.getFilters().map(PN).join(" ,")+"}"})(s):"Filter"}class w4 extends Tn{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class _4 extends Tn{constructor(e,t){super(e,"in",t),this.keys=VN("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class N4 extends Tn{constructor(e,t){super(e,"not-in",t),this.keys=VN("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function VN(s,e){return(e.arrayValue?.values||[]).map((t=>qe.fromName(t.referenceValue)))}class j4 extends Tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bg(t)&&hu(t.arrayValue,this.value)}}class S4 extends Tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&hu(this.value.arrayValue,t)}}class E4 extends Tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!hu(this.value.arrayValue,t)}}class T4 extends Tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>hu(this.value.arrayValue,r)))}}class A4{constructor(e,t=null,r=[],o=[],u=null,d=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=p,this.Te=null}}function Pw(s,e=null,t=[],r=[],o=null,u=null,d=null){return new A4(s,e,t,r,o,u,d)}function yg(s){const e=nt(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>_0(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Eo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Eo(r))).join(",")),e.Te=t}return e.Te}function vg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!y4(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!ON(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Ow(s.startAt,e.startAt)&&Ow(s.endAt,e.endAt)}function N0(s){return qe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class Tu{constructor(e,t=null,r=[],o=[],u=null,d="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function C4(s,e,t,r,o,u,d,p){return new Tu(s,e,t,r,o,u,d,p)}function mf(s){return new Tu(s)}function Vw(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function k4(s){return qe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function LN(s){return s.collectionGroup!==null}function tu(s){const e=nt(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new Rn(zn.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((x=>{x.isInequality()&&(p=p.add(x.field))}))})),p})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Hh(u,r))})),t.has(zn.keyField().canonicalString())||e.Ie.push(new Hh(zn.keyField(),r))}return e.Ie}function La(s){const e=nt(s);return e.Ee||(e.Ee=R4(e,tu(s))),e.Ee}function R4(s,e){if(s.limitType==="F")return Pw(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Hh(o.field,u)}));const t=s.endAt?new $h(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new $h(s.startAt.position,s.startAt.inclusive):null;return Pw(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function j0(s,e){const t=s.filters.concat([e]);return new Tu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function S0(s,e,t){return new Tu(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function pf(s,e){return vg(La(s),La(e))&&s.limitType===e.limitType}function UN(s){return`${yg(La(s))}|lt:${s.limitType}`}function uo(s){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>PN(o))).join(", ")}]`),hf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>Eo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>Eo(o))).join(",")),`Target(${r})`})(La(s))}; limitType=${s.limitType})`}function gf(s,e){return e.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):qe.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,e)&&(function(r,o){for(const u of tu(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(r,o){return!(r.startAt&&!(function(d,p,g){const x=Mw(d,p,g);return d.inclusive?x<=0:x<0})(r.startAt,tu(r),o)||r.endAt&&!(function(d,p,g){const x=Mw(d,p,g);return d.inclusive?x>=0:x>0})(r.endAt,tu(r),o))})(s,e)}function I4(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function BN(s){return(e,t)=>{let r=!1;for(const o of tu(s)){const u=D4(o,e,t);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function D4(s,e,t){const r=s.field.isKeyField()?qe.comparator(e.key,t.key):(function(u,d,p){const g=d.data.field(u),x=p.data.field(u);return g!==null&&x!==null?So(g,x):Ke(42886)})(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ke(19790,{direction:s.dir})}}class wl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Si(this.inner,((t,r)=>{for(const[o,u]of r)e(o,u)}))}isEmpty(){return NN(this.inner)}size(){return this.innerSize}}const M4=new nn(qe.comparator);function wr(){return M4}const zN=new nn(qe.comparator);function Wc(...s){let e=zN;for(const t of s)e=e.insert(t.key,t);return e}function FN(s){let e=zN;return s.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function al(){return nu()}function qN(){return nu()}function nu(){return new wl((s=>s.toString()),((s,e)=>s.isEqual(e)))}const O4=new nn(qe.comparator),P4=new Rn(qe.comparator);function bt(...s){let e=P4;for(const t of s)e=e.add(t);return e}const V4=new Rn(xt);function L4(){return V4}function wg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function $N(s){return{integerValue:""+s}}function U4(s,e){return u4(e)?$N(e):wg(s,e)}class xf{constructor(){this._=void 0}}function B4(s,e,t){return s instanceof fu?(function(o,u){const d={fields:{[EN]:{stringValue:SN},[AN]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&xg(u)&&(u=ff(u)),u&&(d.fields[TN]=u),{mapValue:d}})(t,e):s instanceof mu?GN(s,e):s instanceof pu?YN(s,e):(function(o,u){const d=HN(o,u),p=Lw(d)+Lw(o.Ae);return w0(d)&&w0(o.Ae)?$N(p):wg(o.serializer,p)})(s,e)}function z4(s,e,t){return s instanceof mu?GN(s,e):s instanceof pu?YN(s,e):t}function HN(s,e){return s instanceof Gh?(function(r){return w0(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(e)?e:{integerValue:0}:null}class fu extends xf{}class mu extends xf{constructor(e){super(),this.elements=e}}function GN(s,e){const t=WN(e);for(const r of s.elements)t.some((o=>Fa(o,r)))||t.push(r);return{arrayValue:{values:t}}}class pu extends xf{constructor(e){super(),this.elements=e}}function YN(s,e){let t=WN(e);for(const r of s.elements)t=t.filter((o=>!Fa(o,r)));return{arrayValue:{values:t}}}class Gh extends xf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Lw(s){return xn(s.integerValue||s.doubleValue)}function WN(s){return bg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class F4{constructor(e,t){this.field=e,this.transform=t}}function q4(s,e){return s.field.isEqual(e.field)&&(function(r,o){return r instanceof mu&&o instanceof mu||r instanceof pu&&o instanceof pu?jo(r.elements,o.elements,Fa):r instanceof Gh&&o instanceof Gh?Fa(r.Ae,o.Ae):r instanceof fu&&o instanceof fu})(s.transform,e.transform)}class $4{constructor(e,t){this.version=e,this.transformResults=t}}class Xs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xs}static exists(e){return new Xs(void 0,e)}static updateTime(e){return new Xs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class bf{}function KN(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new _g(s.key,Xs.none()):new Au(s.key,s.data,Xs.none());{const t=s.data,r=fs.empty();let o=new Rn(zn.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?r.delete(u):r.set(u,d),o=o.add(u)}return new Ei(s.key,r,new Is(o.toArray()),Xs.none())}}function H4(s,e,t){s instanceof Au?(function(o,u,d){const p=o.value.clone(),g=Bw(o.fieldTransforms,u,d.transformResults);p.setAll(g),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,t):s instanceof Ei?(function(o,u,d){if(!jh(o.precondition,u))return void u.convertToUnknownDocument(d.version);const p=Bw(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(QN(o)),g.setAll(p),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function su(s,e,t,r){return s instanceof Au?(function(u,d,p,g){if(!jh(u.precondition,d))return p;const x=u.value.clone(),b=zw(u.fieldTransforms,g,d);return x.setAll(b),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),null})(s,e,t,r):s instanceof Ei?(function(u,d,p,g){if(!jh(u.precondition,d))return p;const x=zw(u.fieldTransforms,g,d),b=d.data;return b.setAll(QN(u)),b.setAll(x),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,t,r):(function(u,d,p){return jh(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,t)}function G4(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=HN(r.transform,o||null);u!=null&&(t===null&&(t=fs.empty()),t.set(r.field,u))}return t||null}function Uw(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&jo(r,o,((u,d)=>q4(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Au extends bf{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ei extends bf{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function QN(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}})),e}function Bw(s,e,t){const r=new Map;It(s.length===t.length,32656,{Ve:t.length,de:s.length});for(let o=0;o<t.length;o++){const u=s[o],d=u.transform,p=e.data.field(u.field);r.set(u.field,z4(d,p,t[o]))}return r}function zw(s,e,t){const r=new Map;for(const o of s){const u=o.transform,d=t.data.field(o.field);r.set(o.field,B4(u,d,e))}return r}class _g extends bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Y4 extends bf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class W4{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&H4(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=su(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=su(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qN();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let p=this.applyToLocalView(d,u.mutatedFields);p=t.has(o.key)?null:p;const g=KN(d,p);g!==null&&r.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Xe.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),bt())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,((t,r)=>Uw(t,r)))&&jo(this.baseMutations,e.baseMutations,((t,r)=>Uw(t,r)))}}class Ng{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return O4})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Ng(e,t,r,o)}}class K4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Q4{constructor(e,t){this.count=e,this.unchangedNames=t}}var En,wt;function X4(s){switch(s){case ge.OK:return Ke(64938);case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0;default:return Ke(15467,{code:s})}}function XN(s){if(s===void 0)return vr("GRPC error has no .code"),ge.UNKNOWN;switch(s){case En.OK:return ge.OK;case En.CANCELLED:return ge.CANCELLED;case En.UNKNOWN:return ge.UNKNOWN;case En.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case En.INTERNAL:return ge.INTERNAL;case En.UNAVAILABLE:return ge.UNAVAILABLE;case En.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case En.NOT_FOUND:return ge.NOT_FOUND;case En.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case En.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case En.ABORTED:return ge.ABORTED;case En.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case En.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case En.DATA_LOSS:return ge.DATA_LOSS;default:return Ke(39323,{code:s})}}(wt=En||(En={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";function J4(){return new TextEncoder}const Z4=new ui([4294967295,4294967295],0);function Fw(s){const e=J4().encode(s),t=new hN;return t.update(e),new Uint8Array(t.digest())}function qw(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ui([t,r],0),new ui([o,u],0)]}class jg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Kc(`Invalid padding: ${t}`);if(r<0)throw new Kc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Kc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ui.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(ui.fromNumber(r)));return o.compare(Z4)===1&&(o=new ui([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Fw(e),[r,o]=qw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,o,u);if(!this.we(d))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new jg(u,o,t);return r.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const t=Fw(e),[r,o]=qw(t);for(let u=0;u<this.hashCount;u++){const d=this.ye(r,o,u);this.be(d)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yf{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Cu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new yf(Xe.min(),o,new nn(xt),wr(),bt())}}class Cu{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Cu(r,t,bt(),bt(),bt())}}class Sh{constructor(e,t,r,o){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=o}}class JN{constructor(e,t){this.targetId=e,this.Ce=t}}class ZN{constructor(e,t,r=Fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class $w{constructor(){this.ve=0,this.Fe=Hw(),this.Me=Fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=bt(),t=bt(),r=bt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Ke(38017,{changeType:u})}})),new Cu(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=Hw()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,It(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class eR{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.He=ih(),this.Je=ih(),this.Ze=new nn(xt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ke(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(N0(u))if(r===0){const d=new qe(u.path);this.et(t,d,Wn.newNoDocument(d,Xe.min()))}else It(r===1,20013,{expectedCount:r});else{const d=this._t(t);if(d!==r){const p=this.ut(e),g=p?this.ct(p,e,d):1;if(g!==0){this.it(t);const x=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,x)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=t;let d,p;try{d=gi(r).toUint8Array()}catch(g){if(g instanceof jN)return No("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new jg(d,o,u)}catch(g){return No(g instanceof Kc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((u=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,d)=>{const p=this.ot(d);if(p){if(u.current&&N0(p.target)){const g=new qe(p.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,Wn.newNoDocument(g,e))}u.Be&&(t.set(d,u.ke()),u.Ke())}}));let r=bt();this.Je.forEach(((u,d)=>{let p=!0;d.forEachWhile((g=>{const x=this.ot(g);return!x||x.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(u))})),this.je.forEach(((u,d)=>d.setReadTime(e)));const o=new yf(e,t,this.Ze,this.je,r);return this.je=wr(),this.He=ih(),this.Je=ih(),this.Ze=new nn(xt),o}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new $w,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Rn(xt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Rn(xt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Me("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $w),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ih(){return new nn(qe.comparator)}function Hw(){return new nn(qe.comparator)}const tR={asc:"ASCENDING",desc:"DESCENDING"},nR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sR={and:"AND",or:"OR"};class aR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function E0(s,e){return s.useProto3Json||hf(e)?e:{value:e}}function Yh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e2(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function rR(s,e){return Yh(s,e.toTimestamp())}function Ua(s){return It(!!s,49232),Xe.fromTimestamp((function(t){const r=pi(t);return new Rt(r.seconds,r.nanos)})(s))}function Sg(s,e){return T0(s,e).canonicalString()}function T0(s,e){const t=(function(o){return new Yt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function t2(s){const e=Yt.fromString(s);return It(i2(e),10190,{key:e.toString()}),e}function A0(s,e){return Sg(s.databaseId,e.path)}function Gp(s,e){const t=t2(e);if(t.get(1)!==s.databaseId.projectId)throw new Ie(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new Ie(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new qe(s2(t))}function n2(s,e){return Sg(s.databaseId,e)}function iR(s){const e=t2(s);return e.length===4?Yt.emptyPath():s2(e)}function C0(s){return new Yt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function s2(s){return It(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Gw(s,e,t){return{name:A0(s,e),fields:t.value.mapValue.fields}}function lR(s,e){let t;if("targetChange"in e){e.targetChange;const r=(function(x){return x==="NO_CHANGE"?0:x==="ADD"?1:x==="REMOVE"?2:x==="CURRENT"?3:x==="RESET"?4:Ke(39313,{state:x})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(x,b){return x.useProto3Json?(It(b===void 0||typeof b=="string",58123),Fn.fromBase64String(b||"")):(It(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),Fn.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(x){const b=x.code===void 0?ge.UNKNOWN:XN(x.code);return new Ie(b,x.message||"")})(d);t=new ZN(r,o,u,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Gp(s,r.document.name),u=Ua(r.document.updateTime),d=r.document.createTime?Ua(r.document.createTime):Xe.min(),p=new fs({mapValue:{fields:r.document.fields}}),g=Wn.newFoundDocument(o,u,d,p),x=r.targetIds||[],b=r.removedTargetIds||[];t=new Sh(x,b,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Gp(s,r.document),u=r.readTime?Ua(r.readTime):Xe.min(),d=Wn.newNoDocument(o,u),p=r.removedTargetIds||[];t=new Sh([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Gp(s,r.document),u=r.removedTargetIds||[];t=new Sh([],u,o,null)}else{if(!("filter"in e))return Ke(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,d=new Q4(o,u),p=r.targetId;t=new JN(p,d)}}return t}function oR(s,e){let t;if(e instanceof Au)t={update:Gw(s,e.key,e.value)};else if(e instanceof _g)t={delete:A0(s,e.key)};else if(e instanceof Ei)t={update:Gw(s,e.key,e.data),updateMask:xR(e.fieldMask)};else{if(!(e instanceof Y4))return Ke(16599,{dt:e.type});t={verify:A0(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(u,d){const p=d.transform;if(p instanceof fu)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof mu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof pu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Gh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Ke(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:rR(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ke(27497)})(s,e.precondition)),t}function cR(s,e){return s&&s.length>0?(It(e!==void 0,14353),s.map((t=>(function(o,u){let d=o.updateTime?Ua(o.updateTime):Ua(u);return d.isEqual(Xe.min())&&(d=Ua(u)),new $4(d,o.transformResults||[])})(t,e)))):[]}function uR(s,e){return{documents:[n2(s,e.path)]}}function dR(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=n2(s,o);const u=(function(x){if(x.length!==0)return r2(ma.create(x,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(x){if(x.length!==0)return x.map((b=>(function(j){return{field:ho(j.field),direction:mR(j.dir)}})(b)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const p=E0(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(x){return{before:x.inclusive,values:x.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(x){return{before:!x.inclusive,values:x.position}})(e.endAt)),{ft:t,parent:o}}function hR(s){let e=iR(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(r===1,65062);const b=t.from[0];b.allDescendants?o=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=(function(w){const j=a2(w);return j instanceof ma&&MN(j)?j.getFilters():[j]})(t.where));let d=[];t.orderBy&&(d=(function(w){return w.map((j=>(function(L){return new Hh(fo(L.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(j)))})(t.orderBy));let p=null;t.limit&&(p=(function(w){let j;return j=typeof w=="object"?w.value:w,hf(j)?null:j})(t.limit));let g=null;t.startAt&&(g=(function(w){const j=!!w.before,T=w.values||[];return new $h(T,j)})(t.startAt));let x=null;return t.endAt&&(x=(function(w){const j=!w.before,T=w.values||[];return new $h(T,j)})(t.endAt)),C4(e,o,d,u,p,"F",g,x)}function fR(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ke(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function a2(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fo(t.unaryFilter.field);return Tn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=fo(t.unaryFilter.field);return Tn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=fo(t.unaryFilter.field);return Tn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=fo(t.unaryFilter.field);return Tn.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ke(61313);default:return Ke(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Tn.create(fo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ke(58110);default:return Ke(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return ma.create(t.compositeFilter.filters.map((r=>a2(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ke(1026)}})(t.compositeFilter.op))})(s):Ke(30097,{filter:s})}function mR(s){return tR[s]}function pR(s){return nR[s]}function gR(s){return sR[s]}function ho(s){return{fieldPath:s.canonicalString()}}function fo(s){return zn.fromServerFormat(s.fieldPath)}function r2(s){return s instanceof Tn?(function(t){if(t.op==="=="){if(Dw(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NAN"}};if(Iw(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Dw(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NAN"}};if(Iw(t.value))return{unaryFilter:{field:ho(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ho(t.field),op:pR(t.op),value:t.value}}})(s):s instanceof ma?(function(t){const r=t.getFilters().map((o=>r2(o)));return r.length===1?r[0]:{compositeFilter:{op:gR(t.op),filters:r}}})(s):Ke(54877,{filter:s})}function xR(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function i2(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}function l2(s){return!!s&&typeof s._toProto=="function"&&s._protoValueType==="ProtoValue"}class li{constructor(e,t,r,o,u=Xe.min(),d=Xe.min(),p=Fn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new li(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bR{constructor(e){this.yt=e}}function yR(s){const e=hR({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?S0(e,e.limit,"L"):e}class vR{constructor(){this.Sn=new wR}addToCollectionParentIndex(e,t){return this.Sn.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}deleteAllFieldIndexes(e){return ye.resolve()}createTargetIndexes(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getIndexType(e,t){return ye.resolve(0)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}getMinOffset(e,t){return ye.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,t){return ye.resolve(mi.min())}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class wR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Rn(Yt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Rn(Yt.comparator)).toArray()}}const Yw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},o2=41943040;class hs{static withCacheSize(e){return new hs(e,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}hs.DEFAULT_COLLECTION_PERCENTILE=10,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hs.DEFAULT=new hs(o2,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hs.DISABLED=new hs(-1,0,0);class To{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new To(0)}static ar(){return new To(-1)}}const Ww="LruGarbageCollector",_R=1048576;function Kw([s,e],[t,r]){const o=xt(s,t);return o===0?xt(e,r):o}class NR{constructor(e){this.Pr=e,this.buffer=new Rn(Kw),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Kw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Me(Ww,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Lo(t)?Me(Ww,"Ignoring IndexedDB error during garbage collection: ",t):await Vo(t)}await this.Ar(3e5)}))}}class SR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ye.resolve(df.ce);const r=new NR(t);return this.Vr.forEachTarget(e,(o=>r.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>r.Er(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(Yw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yw):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,o,u,d,p,g,x;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(r=w,p=Date.now(),this.removeTargets(e,r,t)))).next((w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(x=Date.now(),co()<=gt.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${o} in `+(p-d)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(x-g)+`ms
Total Duration: ${x-b}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function ER(s,e){return new SR(s,e)}class TR{constructor(){this.changes=new wl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class AR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CR{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&su(r.mutation,o,Is.empty(),Rt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,bt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=bt()){const o=al();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((u=>{let d=Wc();return u.forEach(((p,g)=>{d=d.insert(p,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const r=al();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,bt())))}populateOverlays(e,t,r){const o=[];return r.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,p)=>{t.set(d,p)}))}))}computeViews(e,t,r,o){let u=wr();const d=nu(),p=(function(){return nu()})();return t.forEach(((g,x)=>{const b=r.get(x.key);o.has(x.key)&&(b===void 0||b.mutation instanceof Ei)?u=u.insert(x.key,x):b!==void 0?(d.set(x.key,b.mutation.getFieldMask()),su(b.mutation,x,b.mutation.getFieldMask(),Rt.now())):d.set(x.key,Is.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((x,b)=>d.set(x,b))),t.forEach(((x,b)=>p.set(x,new AR(b,d.get(x)??null)))),p)))}recalculateAndSaveOverlays(e,t){const r=nu();let o=new nn(((d,p)=>d-p)),u=bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const p of d)p.keys().forEach((g=>{const x=t.get(g);if(x===null)return;let b=r.get(g)||Is.empty();b=p.applyToLocalView(x,b),r.set(g,b);const w=(o.get(p.batchId)||bt()).add(g);o=o.insert(p.batchId,w)}))})).next((()=>{const d=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),x=g.key,b=g.value,w=qN();b.forEach((j=>{if(!u.has(j)){const T=KN(t.get(j),r.get(j));T!==null&&w.set(j,T),u=u.add(j)}})),d.push(this.documentOverlayCache.saveOverlays(e,x,w))}return ye.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return k4(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):LN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ye.resolve(al());let p=cu,g=u;return d.next((x=>ye.forEach(x,((b,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),u.get(b)?ye.resolve():this.remoteDocumentCache.getEntry(e,b).next((j=>{g=g.insert(b,j)}))))).next((()=>this.populateOverlays(e,x,u))).next((()=>this.computeViews(e,g,x,bt()))).next((b=>({batchId:p,changes:FN(b)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next((r=>{let o=Wc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const u=t.collectionGroup;let d=Wc();return this.indexManager.getCollectionParents(e,u).next((p=>ye.forEach(p,(g=>{const x=(function(w,j){return new Tu(j,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,x,r,o).next((b=>{b.forEach(((w,j)=>{d=d.insert(w,j)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,o)))).next((d=>{u.forEach(((g,x)=>{const b=x.getKey();d.get(b)===null&&(d=d.insert(b,Wn.newInvalidDocument(b)))}));let p=Wc();return d.forEach(((g,x)=>{const b=u.get(g);b!==void 0&&su(b.mutation,x,Is.empty(),Rt.now()),gf(t,x)&&(p=p.insert(g,x))})),p}))}}class kR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ye.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ua(o.createTime)}})(t)),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:yR(o.bundledQuery),readTime:Ua(o.readTime)}})(t)),ye.resolve()}}class RR{constructor(){this.overlays=new nn(qe.comparator),this.Lr=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}getOverlays(e,t){const r=al();return ye.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,u)=>{this.bt(e,t,u)})),ye.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Lr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){const o=al(),u=t.length+1,d=new qe(t.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const g=p.getNext().value,x=g.getKey();if(!t.isPrefixOf(x.path))break;x.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ye.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new nn(((x,b)=>x-b));const d=this.overlays.getIterator();for(;d.hasNext();){const x=d.getNext().value;if(x.getKey().getCollectionGroup()===t&&x.largestBatchId>r){let b=u.get(x.largestBatchId);b===null&&(b=al(),u=u.insert(x.largestBatchId,b)),b.set(x.getKey(),x)}}const p=al(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((x,b)=>p.set(x,b))),!(p.size()>=o)););return ye.resolve(p)}bt(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.Lr.get(o.largestBatchId).delete(r.key);this.Lr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new K4(t,r));let u=this.Lr.get(t);u===void 0&&(u=bt(),this.Lr.set(t,u)),this.Lr.set(t,u.add(r.key))}}class IR{constructor(){this.sessionToken=Fn.EMPTY_BYTE_STRING}getSessionToken(e){return ye.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ye.resolve()}}class Eg{constructor(){this.kr=new Rn(Mn.Kr),this.qr=new Rn(Mn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Mn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Mn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new qe(new Yt([])),r=new Mn(t,e),o=new Mn(t,e+1),u=[];return this.qr.forEachInRange([r,o],(d=>{this.Wr(d),u.push(d.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new qe(new Yt([])),r=new Mn(t,e),o=new Mn(t,e+1);let u=bt();return this.qr.forEachInRange([r,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new Mn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Mn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return qe.comparator(e.key,t.key)||xt(e.Hr,t.Hr)}static Ur(e,t){return xt(e.Hr,t.Hr)||qe.comparator(e.key,t.key)}}class DR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Rn(Mn.Kr)}checkEmpty(e){return ye.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new W4(u,t,r,o);this.mutationQueue.push(d);for(const p of o)this.Jr=this.Jr.add(new Mn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ye.resolve(d)}lookupMutationBatch(e,t){return ye.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.Xr(r),u=o<0?0:o;return ye.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(this.mutationQueue.length===0?gg:this.Yn-1)}getAllMutationBatches(e){return ye.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Mn(t,0),o=new Mn(t,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([r,o],(d=>{const p=this.Zr(d.Hr);u.push(p)})),ye.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(xt);return t.forEach((o=>{const u=new Mn(o,0),d=new Mn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,d],(p=>{r=r.add(p.Hr)}))})),ye.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const d=new Mn(new qe(u),0);let p=new Rn(xt);return this.Jr.forEachWhile((g=>{const x=g.key.path;return!!r.isPrefixOf(x)&&(x.length===o&&(p=p.add(g.Hr)),!0)}),d),ye.resolve(this.Yr(p))}Yr(e){const t=[];return e.forEach((r=>{const o=this.Zr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){It(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return ye.forEach(t.mutations,(o=>{const u=new Mn(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Mn(t,0),o=this.Jr.firstAfterOrEqual(r);return ye.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ye.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class MR{constructor(e){this.ti=e,this.docs=(function(){return new nn(qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let r=wr();return t.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Wn.newInvalidDocument(o))})),ye.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=wr();const d=t.path,p=new qe(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:x,value:{document:b}}=g.getNext();if(!d.isPrefixOf(x.path))break;x.path.length>d.length+1||i4(r4(b),r)<=0||(o.has(b.key)||gf(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ye.resolve(u)}getAllFromCollectionGroup(e,t,r,o){Ke(9500)}ni(e,t){return ye.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new OR(this)}getSize(e){return ye.resolve(this.size)}}class OR extends TR{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(r)})),ye.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class PR{constructor(e){this.persistence=e,this.ri=new wl((t=>yg(t)),vg),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new Eg,this.targetCount=0,this.oi=To._r()}forEachTarget(e,t){return this.ri.forEach(((r,o)=>t(o))),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),ye.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new To(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.lr(t),ye.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.ri.forEach(((d,p)=>{p.sequenceNumber<=t&&r.get(p.targetId)===null&&(this.ri.delete(d),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ye.waitFor(u).next((()=>o))}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),ye.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this.si.containsKey(t))}}class c2{constructor(e,t){this._i={},this.overlays={},this.ai=new df(0),this.ui=!1,this.ui=!0,this.ci=new IR,this.referenceDelegate=e(this),this.li=new PR(this),this.indexManager=new vR,this.remoteDocumentCache=(function(o){return new MR(o)})((r=>this.referenceDelegate.hi(r))),this.serializer=new bR(t),this.Pi=new kR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new DR(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){Me("MemoryPersistence","Starting transaction:",e);const o=new VR(this.ai.next());return this.referenceDelegate.Ti(),r(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,t){return ye.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class VR extends o4{constructor(e){super(),this.currentSequenceNumber=e}}class Tg{constructor(e){this.persistence=e,this.Ri=new Eg,this.Ai=null}static Vi(e){return new Tg(e)}get di(){if(this.Ai)return this.Ai;throw Ke(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ye.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.di,(r=>{const o=qe.fromPath(r);return this.mi(e,o).next((u=>{u||t.removeEntry(o,Xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ye.or([()=>ye.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Wh{constructor(e,t){this.persistence=e,this.fi=new wl((r=>d4(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=ER(this,t)}static Vi(e,t){return new Wh(e,t)}Ti(){}Ii(e){return ye.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return ye.forEach(this.fi,((r,o)=>this.wr(e,r,o).next((u=>u?ye.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(d=>this.wr(e,d,t).next((p=>{p||(r++,u.removeEntry(d,Xe.min()))})))).next((()=>u.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ye.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ye.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),ye.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ye.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_h(e.data.value)),t}wr(e,t,r){return ye.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return ye.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ag{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=o}static Es(e,t){let r=bt(),o=bt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Ag(e,t.fromCache,r,o)}}class LR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class UR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return h5()?8:c4(Qn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const u={result:null};return this.gs(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.ps(e,t,o,r).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new LR;return this.ys(e,t,d).next((p=>{if(u.result=p,this.As)return this.ws(e,t,d,p.size)}))})).next((()=>u.result))}ws(e,t,r,o){return r.documentReadCount<this.Vs?(co()<=gt.DEBUG&&Me("QueryEngine","SDK will not create cache indexes for query:",uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ye.resolve()):(co()<=gt.DEBUG&&Me("QueryEngine","Query:",uo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ds*o?(co()<=gt.DEBUG&&Me("QueryEngine","The SDK decides to create cache indexes for query:",uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,La(t))):ye.resolve())}gs(e,t){if(Vw(t))return ye.resolve(null);let r=La(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=S0(t,null,"F"),r=La(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((u=>{const d=bt(...u);return this.fs.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,r).next((g=>{const x=this.bs(t,p);return this.Ss(t,x,d,g.readTime)?this.gs(e,S0(t,null,"F")):this.Ds(e,x,t,g)}))))})))))}ps(e,t,r,o){return Vw(t)||o.isEqual(Xe.min())?ye.resolve(null):this.fs.getDocuments(e,r).next((u=>{const d=this.bs(t,u);return this.Ss(t,d,r,o)?ye.resolve(null):(co()<=gt.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),uo(t)),this.Ds(e,d,t,a4(o,cu)).next((p=>p)))}))}bs(e,t){let r=new Rn(BN(e));return t.forEach(((o,u)=>{gf(e,u)&&(r=r.add(u))})),r}Ss(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,t,r){return co()<=gt.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",uo(t)),this.fs.getDocumentsMatchingQuery(e,t,mi.min(),r)}Ds(e,t,r,o){return this.fs.getDocumentsMatchingQuery(e,r,o).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}const Cg="LocalStore",BR=3e8;class zR{constructor(e,t,r,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new nn(xt),this.Fs=new wl((u=>yg(u)),vg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function FR(s,e,t,r){return new zR(s,e,t,r)}async function u2(s,e){const t=nt(s);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((u=>{const d=[],p=[];let g=bt();for(const x of o){d.push(x.batchId);for(const b of x.mutations)g=g.add(b.key)}for(const x of u){p.push(x.batchId);for(const b of x.mutations)g=g.add(b.key)}return t.localDocuments.getDocuments(r,g).next((x=>({Ns:x,removedBatchIds:d,addedBatchIds:p})))}))}))}function qR(s,e){const t=nt(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),u=t.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,x,b){const w=x.batch,j=w.keys();let T=ye.resolve();return j.forEach((L=>{T=T.next((()=>b.getEntry(g,L))).next((V=>{const O=x.docVersions.get(L);It(O!==null,48541),V.version.compareTo(O)<0&&(w.applyToRemoteDocument(V,x),V.isValidDocument()&&(V.setReadTime(x.commitVersion),b.addEntry(V)))}))})),T.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(t,r,e,u).next((()=>u.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let g=bt();for(let x=0;x<p.mutationResults.length;++x)p.mutationResults[x].transformResults.length>0&&(g=g.add(p.batch.mutations[x].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function d2(s){const e=nt(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function $R(s,e){const t=nt(s),r=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const p=[];e.targetChanges.forEach(((b,w)=>{const j=o.get(w);if(!j)return;p.push(t.li.removeMatchingKeys(u,b.removedDocuments,w).next((()=>t.li.addMatchingKeys(u,b.addedDocuments,w))));let T=j.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?T=T.withResumeToken(Fn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):b.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(b.resumeToken,r)),o=o.insert(w,T),(function(V,O,U){return V.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=BR?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(j,T,b)&&p.push(t.li.updateTargetData(u,T))}));let g=wr(),x=bt();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))})),p.push(HR(u,d,e.documentUpdates).next((b=>{g=b.Bs,x=b.Ls}))),!r.isEqual(Xe.min())){const b=t.li.getLastRemoteSnapshotVersion(u).next((w=>t.li.setTargetsMetadata(u,u.currentSequenceNumber,r)));p.push(b)}return ye.waitFor(p).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,x))).next((()=>g))})).then((u=>(t.vs=o,u)))}function HR(s,e,t){let r=bt(),o=bt();return t.forEach((u=>r=r.add(u))),e.getEntries(s,r).next((u=>{let d=wr();return t.forEach(((p,g)=>{const x=u.get(p);g.isFoundDocument()!==x.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Xe.min())?(e.removeEntry(p,g.readTime),d=d.insert(p,g)):!x.isValidDocument()||g.version.compareTo(x.version)>0||g.version.compareTo(x.version)===0&&x.hasPendingWrites?(e.addEntry(g),d=d.insert(p,g)):Me(Cg,"Ignoring outdated watch update for ",p,". Current version:",x.version," Watch version:",g.version)})),{Bs:d,Ls:o}}))}function GR(s,e){const t=nt(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=gg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function YR(s,e){const t=nt(s);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.li.getTargetData(r,e).next((u=>u?(o=u,ye.resolve(o)):t.li.allocateTargetId(r).next((d=>(o=new li(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.vs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function k0(s,e,t){const r=nt(s),o=r.vs.get(e),u=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",u,(d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Lo(d))throw d;Me(Cg,`Failed to update sequence numbers for target ${e}: ${d}`)}r.vs=r.vs.remove(e),r.Fs.delete(o.target)}function Qw(s,e,t){const r=nt(s);let o=Xe.min(),u=bt();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,x,b){const w=nt(g),j=w.Fs.get(b);return j!==void 0?ye.resolve(w.vs.get(j)):w.li.getTargetData(x,b)})(r,d,La(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(d,p.targetId).next((g=>{u=g}))})).next((()=>r.Cs.getDocumentsMatchingQuery(d,e,t?o:Xe.min(),t?u:bt()))).next((p=>(WR(r,I4(e),p),{documents:p,ks:u})))))}function WR(s,e,t){let r=s.Ms.get(e)||Xe.min();t.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Ms.set(e,r)}class Xw{constructor(){this.activeTargetIds=L4()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KR{constructor(){this.vo=new Xw,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Xw,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class QR{Mo(e){}shutdown(){}}const Jw="ConnectivityMonitor";class Zw{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Me(Jw,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Me(Jw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let lh=null;function R0(){return lh===null?lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():lh++,"0x"+lh.toString(16)}const Yp="RestConnection",XR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class JR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${o}`,this.$o=this.databaseId.database===Fh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Wo(e,t,r,o,u){const d=R0(),p=this.Qo(e,t.toUriEncodedString());Me(Yp,`Sending RPC '${e}' ${d}:`,p,r);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:x}=new URL(p),b=_i(x);return this.zo(e,p,g,r,b).then((w=>(Me(Yp,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw No(Yp,`RPC '${e}' ${d} failed with error: `,w,"url: ",p,"request:",r),w}))}jo(e,t,r,o,u,d){return this.Wo(e,t,r,o,u)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Po})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),r&&r.headers.forEach(((o,u)=>e[u]=o))}Qo(e,t){const r=XR[e];let o=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class ZR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const Gn="WebChannelConnection",Bc=(s,e,t)=>{s.listen(e,(r=>{try{t(r)}catch(o){setTimeout((()=>{throw o}),0)}}))};class vo extends JR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!vo.c_){const e=gN();Bc(e,pN.STAT_EVENT,(t=>{t.stat===b0.PROXY?Me(Gn,"STAT_EVENT: detected buffering proxy"):t.stat===b0.NOPROXY&&Me(Gn,"STAT_EVENT: detected no buffering proxy")})),vo.c_=!0}}zo(e,t,r,o,u){const d=R0();return new Promise(((p,g)=>{const x=new fN;x.setWithCredentials(!0),x.listenOnce(mN.COMPLETE,(()=>{try{switch(x.getLastErrorCode()){case wh.NO_ERROR:const w=x.getResponseJson();Me(Gn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),p(w);break;case wh.TIMEOUT:Me(Gn,`RPC '${e}' ${d} timed out`),g(new Ie(ge.DEADLINE_EXCEEDED,"Request time out"));break;case wh.HTTP_ERROR:const j=x.getStatus();if(Me(Gn,`RPC '${e}' ${d} failed with status:`,j,"response text:",x.getResponseText()),j>0){let T=x.getResponseJson();Array.isArray(T)&&(T=T[0]);const L=T?.error;if(L&&L.status&&L.message){const V=(function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(G)>=0?G:ge.UNKNOWN})(L.status);g(new Ie(V,L.message))}else g(new Ie(ge.UNKNOWN,"Server responded with status "+x.getStatus()))}else g(new Ie(ge.UNAVAILABLE,"Connection failed."));break;default:Ke(9055,{l_:e,streamId:d,h_:x.getLastErrorCode(),P_:x.getLastError()})}}finally{Me(Gn,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(o);Me(Gn,`RPC '${e}' ${d} sending request:`,o),x.send(t,"POST",b,r,15)}))}T_(e,t,r){const o=R0(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const x=u.join("");Me(Gn,`Creating RPC '${e}' stream ${o}: ${x}`,p);const b=d.createWebChannel(x,p);this.I_(b);let w=!1,j=!1;const T=new ZR({Ho:L=>{j?Me(Gn,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(w||(Me(Gn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),w=!0),Me(Gn,`RPC '${e}' stream ${o} sending:`,L),b.send(L))},Jo:()=>b.close()});return Bc(b,Yc.EventType.OPEN,(()=>{j||(Me(Gn,`RPC '${e}' stream ${o} transport opened.`),T.i_())})),Bc(b,Yc.EventType.CLOSE,(()=>{j||(j=!0,Me(Gn,`RPC '${e}' stream ${o} transport closed`),T.o_(),this.E_(b))})),Bc(b,Yc.EventType.ERROR,(L=>{j||(j=!0,No(Gn,`RPC '${e}' stream ${o} transport errored. Name:`,L.name,"Message:",L.message),T.o_(new Ie(ge.UNAVAILABLE,"The operation could not be completed")))})),Bc(b,Yc.EventType.MESSAGE,(L=>{if(!j){const V=L.data[0];It(!!V,16349);const O=V,U=O?.error||O[0]?.error;if(U){Me(Gn,`RPC '${e}' stream ${o} received error:`,U);const G=U.status;let q=(function(W){const S=En[W];if(S!==void 0)return XN(S)})(G),ae=U.message;q===void 0&&(q=ge.INTERNAL,ae="Unknown error status: "+G+" with message "+U.message),j=!0,T.o_(new Ie(q,ae)),b.close()}else Me(Gn,`RPC '${e}' stream ${o} received:`,V),T.__(V)}})),vo.u_(),setTimeout((()=>{T.s_()}),0),T}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return xN()}}function e6(s){return new vo(s)}function Wp(){return typeof document<"u"?document:null}function vf(s){return new aR(s,!0)}vo.c_=!1;class h2{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&Me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const e1="PersistentStream";class f2{constructor(e,t,r,o,u,d,p,g){this.Ci=e,this.b_=r,this.S_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new h2(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(vr(t.toString()),vr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ge.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new Ie(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Me(e1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Me(e1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class t6 extends f2{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=lR(this.serializer,e),r=(function(u){if(!("targetChange"in u))return Xe.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Xe.min():d.readTime?Ua(d.readTime):Xe.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=C0(this.serializer),t.addTarget=(function(u,d){let p;const g=d.target;if(p=N0(g)?{documents:uR(u,g)}:{query:dR(u,g).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=e2(u,d.resumeToken);const x=E0(u,d.expectedCount);x!==null&&(p.expectedCount=x)}else if(d.snapshotVersion.compareTo(Xe.min())>0){p.readTime=Yh(u,d.snapshotVersion.toTimestamp());const x=E0(u,d.expectedCount);x!==null&&(p.expectedCount=x)}return p})(this.serializer,e);const r=fR(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=C0(this.serializer),t.removeTarget=e,this.K_(t)}}class n6 extends f2{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=cR(e.writeResults,e.commitTime),r=Ua(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=C0(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>oR(this.serializer,r)))};this.K_(t)}}class s6{}class a6 extends s6{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Ie(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Wo(e,T0(t,r),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ie(ge.UNKNOWN,u.toString())}))}jo(e,t,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.jo(e,T0(t,r),o,d,p,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Ie(ge.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function r6(s,e,t,r){return new a6(s,e,t,r)}class i6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vr(t),this.aa=!1):Me("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const fl="RemoteStore";class l6{constructor(e,t,r,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((d=>{r.enqueueAndForget((async()=>{_l(this)&&(Me(fl,"Restarting streams for network reachability change."),await(async function(g){const x=nt(g);x.Ea.add(4),await ku(x),x.Va.set("Unknown"),x.Ea.delete(4),await wf(x)})(this))}))})),this.Va=new i6(r,o)}}async function wf(s){if(_l(s))for(const e of s.Ra)await e(!0)}async function ku(s){for(const e of s.Ra)await e(!1)}function m2(s,e){const t=nt(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Dg(t)?Ig(t):Uo(t).O_()&&Rg(t,e))}function kg(s,e){const t=nt(s),r=Uo(t);t.Ia.delete(e),r.O_()&&p2(t,e),t.Ia.size===0&&(r.O_()?r.L_():_l(t)&&t.Va.set("Unknown"))}function Rg(s,e){if(s.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uo(s).Z_(e)}function p2(s,e){s.da.$e(e),Uo(s).X_(e)}function Ig(s){s.da=new eR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Uo(s).start(),s.Va.ua()}function Dg(s){return _l(s)&&!Uo(s).x_()&&s.Ia.size>0}function _l(s){return nt(s).Ea.size===0}function g2(s){s.da=void 0}async function o6(s){s.Va.set("Online")}async function c6(s){s.Ia.forEach(((e,t)=>{Rg(s,e)}))}async function u6(s,e){g2(s),Dg(s)?(s.Va.ha(e),Ig(s)):s.Va.set("Unknown")}async function d6(s,e,t){if(s.Va.set("Online"),e instanceof ZN&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,d),o.Ia.delete(p),o.da.removeTarget(p))})(s,e)}catch(r){Me(fl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Kh(s,r)}else if(e instanceof Sh?s.da.Xe(e):e instanceof JN?s.da.st(e):s.da.tt(e),!t.isEqual(Xe.min()))try{const r=await d2(s.localStore);t.compareTo(r)>=0&&await(function(u,d){const p=u.da.Tt(d);return p.targetChanges.forEach(((g,x)=>{if(g.resumeToken.approximateByteSize()>0){const b=u.Ia.get(x);b&&u.Ia.set(x,b.withResumeToken(g.resumeToken,d))}})),p.targetMismatches.forEach(((g,x)=>{const b=u.Ia.get(g);if(!b)return;u.Ia.set(g,b.withResumeToken(Fn.EMPTY_BYTE_STRING,b.snapshotVersion)),p2(u,g);const w=new li(b.target,g,x,b.sequenceNumber);Rg(u,w)})),u.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(r){Me(fl,"Failed to raise snapshot:",r),await Kh(s,r)}}async function Kh(s,e,t){if(!Lo(e))throw e;s.Ea.add(1),await ku(s),s.Va.set("Offline"),t||(t=()=>d2(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Me(fl,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await wf(s)}))}function x2(s,e){return e().catch((t=>Kh(s,t,e)))}async function _f(s){const e=nt(s),t=bi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:gg;for(;h6(e);)try{const o=await GR(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,f6(e,o)}catch(o){await Kh(e,o)}b2(e)&&y2(e)}function h6(s){return _l(s)&&s.Ta.length<10}function f6(s,e){s.Ta.push(e);const t=bi(s);t.O_()&&t.Y_&&t.ea(e.mutations)}function b2(s){return _l(s)&&!bi(s).x_()&&s.Ta.length>0}function y2(s){bi(s).start()}async function m6(s){bi(s).ra()}async function p6(s){const e=bi(s);for(const t of s.Ta)e.ea(t.mutations)}async function g6(s,e,t){const r=s.Ta.shift(),o=Ng.from(r,e,t);await x2(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await _f(s)}async function x6(s,e){e&&bi(s).Y_&&await(async function(r,o){if((function(d){return X4(d)&&d!==ge.ABORTED})(o.code)){const u=r.Ta.shift();bi(r).B_(),await x2(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await _f(r)}})(s,e),b2(s)&&y2(s)}async function t1(s,e){const t=nt(s);t.asyncQueue.verifyOperationInProgress(),Me(fl,"RemoteStore received new credentials");const r=_l(t);t.Ea.add(3),await ku(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await wf(t)}async function b6(s,e){const t=nt(s);e?(t.Ea.delete(2),await wf(t)):e||(t.Ea.add(2),await ku(t),t.Va.set("Unknown"))}function Uo(s){return s.ma||(s.ma=(function(t,r,o){const u=nt(t);return u.sa(),new t6(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:o6.bind(null,s),Yo:c6.bind(null,s),t_:u6.bind(null,s),J_:d6.bind(null,s)}),s.Ra.push((async e=>{e?(s.ma.B_(),Dg(s)?Ig(s):s.Va.set("Unknown")):(await s.ma.stop(),g2(s))}))),s.ma}function bi(s){return s.fa||(s.fa=(function(t,r,o){const u=nt(t);return u.sa(),new n6(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Zo:()=>Promise.resolve(),Yo:m6.bind(null,s),t_:x6.bind(null,s),ta:p6.bind(null,s),na:g6.bind(null,s)}),s.Ra.push((async e=>{e?(s.fa.B_(),await _f(s)):(await s.fa.stop(),s.Ta.length>0&&(Me(fl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class Mg{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,p=new Mg(e,t,d,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ie(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Og(s,e){if(vr("AsyncQueue",`${e}: ${s}`),Lo(s))return new Ie(ge.UNAVAILABLE,`${e}: ${s}`);throw s}class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=Wc(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new wo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class n1{constructor(){this.ga=new nn(qe.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ke(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ao{constructor(e,t,r,o,u,d,p,g,x){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=x}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach((p=>{d.push({type:0,doc:p})})),new Ao(e,t,wo.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class y6{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class v6{constructor(){this.queries=s1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=nt(t),u=o.queries;o.queries=s1(),u.forEach(((d,p)=>{for(const g of p.ba)g.onError(r)}))})(this,new Ie(ge.ABORTED,"Firestore shutting down"))}}function s1(){return new wl((s=>UN(s)),pf)}async function Pg(s,e){const t=nt(s);let r=3;const o=e.query;let u=t.queries.get(o);u?!u.Sa()&&e.Da()&&(r=2):(u=new y6,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const p=Og(d,`Initialization of query '${uo(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,u),u.ba.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&Lg(t)}async function Vg(s,e){const t=nt(s),r=e.query;let o=3;const u=t.queries.get(r);if(u){const d=u.ba.indexOf(e);d>=0&&(u.ba.splice(d,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function w6(s,e){const t=nt(s);let r=!1;for(const o of e){const u=o.query,d=t.queries.get(u);if(d){for(const p of d.ba)p.Fa(o)&&(r=!0);d.wa=o}}r&&Lg(t)}function _6(s,e,t){const r=nt(s),o=r.queries.get(e);if(o)for(const u of o.ba)u.onError(t);r.queries.delete(e)}function Lg(s){s.Ca.forEach((e=>{e.next()}))}var I0,a1;(a1=I0||(I0={})).Ma="default",a1.Cache="cache";class Ug{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==I0.Cache}}class v2{constructor(e){this.key=e}}class w2{constructor(e){this.key=e}}class N6{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=bt(),this.mutatedKeys=bt(),this.eu=BN(e),this.tu=new wo(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new n1,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,x=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((b,w)=>{const j=o.get(b),T=gf(this.query,w)?w:null,L=!!j&&this.mutatedKeys.has(j.key),V=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let O=!1;j&&T?j.data.isEqual(T.data)?L!==V&&(r.track({type:3,doc:T}),O=!0):this.su(j,T)||(r.track({type:2,doc:T}),O=!0,(g&&this.eu(T,g)>0||x&&this.eu(T,x)<0)&&(p=!0)):!j&&T?(r.track({type:0,doc:T}),O=!0):j&&!T&&(r.track({type:1,doc:j}),O=!0,(g||x)&&(p=!0)),O&&(T?(d=d.add(T),u=V?u.add(b):u.delete(b)):(d=d.delete(b),u=u.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{tu:d,iu:r,Ss:p,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,w)=>(function(T,L){const V=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ke(20277,{Vt:O})}};return V(T)-V(L)})(b.type,w.type)||this.eu(b.doc,w.doc))),this.ou(r),o=o??!1;const p=t&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,x=g!==this.Xa;return this.Xa=g,d.length!==0||x?{snapshot:new Ao(this.query,e.tu,u,d,e.mutatedKeys,g===0,x,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new n1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=bt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new w2(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new v2(r))})),t}cu(e){this.Za=e.ks,this.Ya=bt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Bg="SyncEngine";class j6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class S6{constructor(e){this.key=e,this.hu=!1}}class E6{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new wl((p=>UN(p)),pf),this.Iu=new Map,this.Eu=new Set,this.Ru=new nn(qe.comparator),this.Au=new Map,this.Vu=new Eg,this.du={},this.mu=new Map,this.fu=To.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function T6(s,e,t=!0){const r=T2(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await _2(r,e,t,!0),o}async function A6(s,e){const t=T2(s);await _2(t,e,!0,!1)}async function _2(s,e,t,r){const o=await YR(s.localStore,La(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,t);let p;return r&&(p=await C6(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&m2(s.remoteStore,o),p}async function C6(s,e,t,r,o){s.pu=(w,j,T)=>(async function(V,O,U,G){let q=O.view.ru(U);q.Ss&&(q=await Qw(V.localStore,O.query,!1).then((({documents:S})=>O.view.ru(S,q))));const ae=G&&G.targetChanges.get(O.targetId),ce=G&&G.targetMismatches.get(O.targetId)!=null,W=O.view.applyChanges(q,V.isPrimaryClient,ae,ce);return i1(V,O.targetId,W.au),W.snapshot})(s,w,j,T);const u=await Qw(s.localStore,e,!0),d=new N6(e,u.ks),p=d.ru(u.documents),g=Cu.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),x=d.applyChanges(p,s.isPrimaryClient,g);i1(s,t,x.au);const b=new j6(e,t,d);return s.Tu.set(e,b),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),x.snapshot}async function k6(s,e,t){const r=nt(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((d=>!pf(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await k0(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&kg(r.remoteStore,o.targetId),D0(r,o.targetId)})).catch(Vo)):(D0(r,o.targetId),await k0(r.localStore,o.targetId,!0))}async function R6(s,e){const t=nt(s),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),kg(t.remoteStore,r.targetId))}async function I6(s,e,t){const r=U6(s);try{const o=await(function(d,p){const g=nt(d),x=Rt.now(),b=p.reduce(((T,L)=>T.add(L.key)),bt());let w,j;return g.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let L=wr(),V=bt();return g.xs.getEntries(T,b).next((O=>{L=O,L.forEach(((U,G)=>{G.isValidDocument()||(V=V.add(U))}))})).next((()=>g.localDocuments.getOverlayedDocuments(T,L))).next((O=>{w=O;const U=[];for(const G of p){const q=G4(G,w.get(G.key).overlayedDocument);q!=null&&U.push(new Ei(G.key,q,RN(q.value.mapValue),Xs.exists(!0)))}return g.mutationQueue.addMutationBatch(T,x,U,p)})).next((O=>{j=O;const U=O.applyToLocalDocumentSet(w,V);return g.documentOverlayCache.saveOverlays(T,O.batchId,U)}))})).then((()=>({batchId:j.batchId,changes:FN(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(d,p,g){let x=d.du[d.currentUser.toKey()];x||(x=new nn(xt)),x=x.insert(p,g),d.du[d.currentUser.toKey()]=x})(r,o.batchId,t),await Ru(r,o.changes),await _f(r.remoteStore)}catch(o){const u=Og(o,"Failed to persist write");t.reject(u)}}async function N2(s,e){const t=nt(s);try{const r=await $R(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=t.Au.get(u);d&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?It(d.hu,14607):o.removedDocuments.size>0&&(It(d.hu,42227),d.hu=!1))})),await Ru(t,r,e)}catch(r){await Vo(r)}}function r1(s,e,t){const r=nt(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((u,d)=>{const p=d.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(d,p){const g=nt(d);g.onlineState=p;let x=!1;g.queries.forEach(((b,w)=>{for(const j of w.ba)j.va(p)&&(x=!0)})),x&&Lg(g)})(r.eventManager,e),o.length&&r.Pu.J_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function D6(s,e,t){const r=nt(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),u=o&&o.key;if(u){let d=new nn(qe.comparator);d=d.insert(u,Wn.newNoDocument(u,Xe.min()));const p=bt().add(u),g=new yf(Xe.min(),new Map,new nn(xt),d,p);await N2(r,g),r.Ru=r.Ru.remove(u),r.Au.delete(e),zg(r)}else await k0(r.localStore,e,!1).then((()=>D0(r,e,t))).catch(Vo)}async function M6(s,e){const t=nt(s),r=e.batch.batchId;try{const o=await qR(t.localStore,e);S2(t,r,null),j2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ru(t,o)}catch(o){await Vo(o)}}async function O6(s,e,t){const r=nt(s);try{const o=await(function(d,p){const g=nt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(x=>{let b;return g.mutationQueue.lookupMutationBatch(x,p).next((w=>(It(w!==null,37113),b=w.keys(),g.mutationQueue.removeMutationBatch(x,w)))).next((()=>g.mutationQueue.performConsistencyCheck(x))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(x,b,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(x,b))).next((()=>g.localDocuments.getDocuments(x,b)))}))})(r.localStore,e);S2(r,e,t),j2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ru(r,o)}catch(o){await Vo(o)}}function j2(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function S2(s,e,t){const r=nt(s);let o=r.du[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.du[r.currentUser.toKey()]=o}}function D0(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),t&&s.Pu.yu(r,t);s.Iu.delete(e),s.isPrimaryClient&&s.Vu.Gr(e).forEach((r=>{s.Vu.containsKey(r)||E2(s,r)}))}function E2(s,e){s.Eu.delete(e.path.canonicalString());const t=s.Ru.get(e);t!==null&&(kg(s.remoteStore,t),s.Ru=s.Ru.remove(e),s.Au.delete(t),zg(s))}function i1(s,e,t){for(const r of t)r instanceof v2?(s.Vu.addReference(r.key,e),P6(s,r)):r instanceof w2?(Me(Bg,"Document no longer in limbo: "+r.key),s.Vu.removeReference(r.key,e),s.Vu.containsKey(r.key)||E2(s,r.key)):Ke(19791,{wu:r})}function P6(s,e){const t=e.key,r=t.path.canonicalString();s.Ru.get(t)||s.Eu.has(r)||(Me(Bg,"New document in limbo: "+t),s.Eu.add(r),zg(s))}function zg(s){for(;s.Eu.size>0&&s.Ru.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new qe(Yt.fromString(e)),r=s.fu.next();s.Au.set(r,new S6(t)),s.Ru=s.Ru.insert(t,r),m2(s.remoteStore,new li(La(mf(t.path)),r,"TargetPurposeLimboResolution",df.ce))}}async function Ru(s,e,t){const r=nt(s),o=[],u=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,g)=>{d.push(r.pu(g,e,t).then((x=>{if((x||t)&&r.isPrimaryClient){const b=x?!x.fromCache:t?.targetChanges.get(g.targetId)?.current;r.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(x){o.push(x);const b=Ag.Es(g.targetId,x);u.push(b)}})))})),await Promise.all(d),r.Pu.J_(o),await(async function(g,x){const b=nt(g);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ye.forEach(x,(j=>ye.forEach(j.Ts,(T=>b.persistence.referenceDelegate.addReference(w,j.targetId,T))).next((()=>ye.forEach(j.Is,(T=>b.persistence.referenceDelegate.removeReference(w,j.targetId,T)))))))))}catch(w){if(!Lo(w))throw w;Me(Cg,"Failed to update sequence numbers: "+w)}for(const w of x){const j=w.targetId;if(!w.fromCache){const T=b.vs.get(j),L=T.snapshotVersion,V=T.withLastLimboFreeSnapshotVersion(L);b.vs=b.vs.insert(j,V)}}})(r.localStore,u))}async function V6(s,e){const t=nt(s);if(!t.currentUser.isEqual(e)){Me(Bg,"User change. New user:",e.toKey());const r=await u2(t.localStore,e);t.currentUser=e,(function(u,d){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new Ie(ge.CANCELLED,d))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ru(t,r.Ns)}}function L6(s,e){const t=nt(s),r=t.Au.get(e);if(r&&r.hu)return bt().add(r.key);{let o=bt();const u=t.Iu.get(e);if(!u)return o;for(const d of u){const p=t.Tu.get(d);o=o.unionWith(p.view.nu)}return o}}function T2(s){const e=nt(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=N2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D6.bind(null,e),e.Pu.J_=w6.bind(null,e.eventManager),e.Pu.yu=_6.bind(null,e.eventManager),e}function U6(s){const e=nt(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O6.bind(null,e),e}class Qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return FR(this.persistence,new UR,e.initialUser,this.serializer)}Cu(e){return new c2(Tg.Vi,this.serializer)}Du(e){return new KR}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qh.provider={build:()=>new Qh};class B6 extends Qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){It(this.persistence.referenceDelegate instanceof Wh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new jR(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hs.withCacheSize(this.cacheSizeBytes):hs.DEFAULT;return new c2((r=>Wh.Vi(r,t)),this.serializer)}}class M0{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>r1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V6.bind(null,this.syncEngine),await b6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new v6})()}createDatastore(e){const t=vf(e.databaseInfo.databaseId),r=e6(e.databaseInfo);return r6(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,u,d,p){return new l6(r,o,u,d,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>r1(this.syncEngine,t,0)),(function(){return Zw.v()?new Zw:new QR})())}createSyncEngine(e,t){return(function(o,u,d,p,g,x,b){const w=new E6(o,u,d,p,g,x);return b&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=nt(t);Me(fl,"RemoteStore shutting down."),r.Ea.add(5),await ku(r),r.Aa.shutdown(),r.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}M0.provider={build:()=>new M0};class Fg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const yi="FirestoreClient";class z6{constructor(e,t,r,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=o,this.user=Yn.UNAUTHENTICATED,this.clientId=pg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async d=>{Me(yi,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(Me(yi,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Og(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Kp(s,e){s.asyncQueue.verifyOperationInProgress(),Me(yi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await u2(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function l1(s,e){s.asyncQueue.verifyOperationInProgress();const t=await F6(s);Me(yi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((r=>t1(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>t1(e.remoteStore,o))),s._onlineComponents=e}async function F6(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Me(yi,"Using user provided OfflineComponentProvider");try{await Kp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ge.FAILED_PRECONDITION||o.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;No("Error using user provided cache. Falling back to memory cache: "+t),await Kp(s,new Qh)}}else Me(yi,"Using default OfflineComponentProvider"),await Kp(s,new B6(void 0));return s._offlineComponents}async function A2(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Me(yi,"Using user provided OnlineComponentProvider"),await l1(s,s._uninitializedComponentsProvider._online)):(Me(yi,"Using default OnlineComponentProvider"),await l1(s,new M0))),s._onlineComponents}function q6(s){return A2(s).then((e=>e.syncEngine))}async function Xh(s){const e=await A2(s),t=e.eventManager;return t.onListen=T6.bind(null,e.syncEngine),t.onUnlisten=k6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=A6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=R6.bind(null,e.syncEngine),t}function $6(s,e,t,r){const o=new Fg(r),u=new Ug(e,o,t);return s.asyncQueue.enqueueAndForget((async()=>Pg(await Xh(s),u))),()=>{o.Nu(),s.asyncQueue.enqueueAndForget((async()=>Vg(await Xh(s),u)))}}function H6(s,e,t={}){const r=new pr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,x){const b=new Fg({next:j=>{b.Nu(),d.enqueueAndForget((()=>Vg(u,w)));const T=j.docs.has(p);!T&&j.fromCache?x.reject(new Ie(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&j.fromCache&&g&&g.source==="server"?x.reject(new Ie(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):x.resolve(j)},error:j=>x.reject(j)}),w=new Ug(mf(p.path),b,{includeMetadataChanges:!0,Ka:!0});return Pg(u,w)})(await Xh(s),s.asyncQueue,e,t,r))),r.promise}function G6(s,e,t={}){const r=new pr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,p,g,x){const b=new Fg({next:j=>{b.Nu(),d.enqueueAndForget((()=>Vg(u,w))),j.fromCache&&g.source==="server"?x.reject(new Ie(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):x.resolve(j)},error:j=>x.reject(j)}),w=new Ug(p,b,{includeMetadataChanges:!0,Ka:!0});return Pg(u,w)})(await Xh(s),s.asyncQueue,e,t,r))),r.promise}function Y6(s,e){const t=new pr;return s.asyncQueue.enqueueAndForget((async()=>I6(await q6(s),e,t))),t.promise}function C2(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const W6="ComponentProvider",o1=new Map;function K6(s,e,t,r,o){return new m4(s,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,C2(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,r)}const k2="firestore.googleapis.com",c1=!0;class u1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ie(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=k2,this.ssl=c1}else this.host=e.host,this.ssl=e.ssl??c1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=o2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_R)throw new Ie(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=C2(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ie(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ie(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ie(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nf{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ie(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ie(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Yk;switch(r.type){case"firstParty":return new Xk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ie(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=o1.get(t);r&&(Me(W6,"Removing Datastore"),o1.delete(t),r.terminate())})(this),Promise.resolve()}}function Q6(s,e,t,r={}){s=gs(s,Nf);const o=_i(e),u=s._getSettings(),d={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;o&&(tg(`https://${p}`),ng("Firestore",!0)),u.host!==k2&&u.host!==p&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:r};if(!ol(g,d)&&(s._setSettings(g),r.mockUserToken)){let x,b;if(typeof r.mockUserToken=="string")x=r.mockUserToken,b=Yn.MOCK_USER;else{x=S_(r.mockUserToken,s._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ie(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Yn(w)}s._authCredentials=new Wk(new yN(x,b))}}class Nl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nl(this.firestore,e,this._query)}}class cn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}toJSON(){return{type:cn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Eu(t,cn._jsonSchema))return new cn(e,r||null,new qe(Yt.fromString(t.referencePath)))}}cn._jsonSchemaVersion="firestore/documentReference/1.0",cn._jsonSchema={type:An("string",cn._jsonSchemaVersion),referencePath:An("string")};class di extends Nl{constructor(e,t,r){super(e,t,mf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new qe(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function tt(s,e,...t){if(s=tn(s),vN("collection","path",e),s instanceof Nf){const r=Yt.fromString(e,...t);return Nw(r),new di(s,null,r)}{if(!(s instanceof cn||s instanceof di))throw new Ie(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Yt.fromString(e,...t));return Nw(r),new di(s.firestore,null,r)}}function Ye(s,e,...t){if(s=tn(s),arguments.length===1&&(e=pg.newId()),vN("doc","path",e),s instanceof Nf){const r=Yt.fromString(e,...t);return _w(r),new cn(s,null,new qe(r))}{if(!(s instanceof cn||s instanceof di))throw new Ie(ge.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Yt.fromString(e,...t));return _w(r),new cn(s.firestore,s instanceof di?s.converter:null,new qe(r))}}const d1="AsyncQueue";class h1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new h2(this,"async_queue_retry"),this._c=()=>{const r=Wp();r&&Me(d1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Wp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Wp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Lo(e))throw e;Me(d1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,vr("INTERNAL UNHANDLED ERROR: ",f1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Mg.createAndSchedule(this,e,t,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Ke(47125,{Pc:f1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function f1(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class _r extends Nf{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new h1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h1(e),this._firestoreClient=void 0,await e}}}function X6(s,e){const t=typeof s=="object"?s:rg(),r=typeof s=="string"?s:Fh,o=rf(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=__("firestore");u&&Q6(o,...u)}return o}function jf(s){if(s._terminated)throw new Ie(ge.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||J6(s),s._firestoreClient}function J6(s){const e=s._freezeSettings(),t=K6(s._databaseId,s._app?.options.appId||"",s._persistenceKey,s._app?.options.apiKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new z6(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(Fn.fromBase64String(e))}catch(t){throw new Ie(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ks(Fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ks._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,Ks._jsonSchema))return Ks.fromBase64String(e.bytes)}}Ks._jsonSchemaVersion="firestore/bytes/1.0",Ks._jsonSchema={type:An("string",Ks._jsonSchemaVersion),bytes:An("string")};class qg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ie(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sf{constructor(e){this._methodName=e}}class Ba{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xt(this._lat,e._lat)||xt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ba._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Ba._jsonSchema))return new Ba(e.latitude,e.longitude)}}Ba._jsonSchemaVersion="firestore/geoPoint/1.0",Ba._jsonSchema={type:An("string",Ba._jsonSchemaVersion),latitude:An("number"),longitude:An("number")};class ua{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ua._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,ua._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ua(e.vectorValues);throw new Ie(ge.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ua._jsonSchemaVersion="firestore/vectorValue/1.0",ua._jsonSchema={type:An("string",ua._jsonSchemaVersion),vectorValues:An("object")};const Z6=/^__.*__$/;class e3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ei(e,this.data,this.fieldMask,t,this.fieldTransforms):new Au(e,this.data,t,this.fieldTransforms)}}class R2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ei(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function I2(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ke(40011,{dataSource:s})}}class $g{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new $g({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){const t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(I2(this.dataSource)&&Z6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class t3{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||vf(e)}createContext(e,t,r,o=!1){return new $g({dataSource:e,methodName:t,targetDoc:r,path:zn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ef(s){const e=s._freezeSettings(),t=vf(s._databaseId);return new t3(s._databaseId,!!e.ignoreUndefinedProperties,t)}function D2(s,e,t,r,o,u={}){const d=s.createContext(u.merge||u.mergeFields?2:0,e,t,o);Gg("Data must be an object, but it was:",d,r);const p=M2(r,d);let g,x;if(u.merge)g=new Is(d.fieldMask),x=d.fieldTransforms;else if(u.mergeFields){const b=[];for(const w of u.mergeFields){const j=Co(e,w,t);if(!d.contains(j))throw new Ie(ge.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);V2(b,j)||b.push(j)}g=new Is(b),x=d.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,x=d.fieldTransforms;return new e3(new fs(p),g,x)}class Tf extends Sf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tf}}class Hg extends Sf{_toFieldTransform(e){return new F4(e.path,new fu)}isEqual(e){return e instanceof Hg}}function n3(s,e,t,r){const o=s.createContext(1,e,t);Gg("Data must be an object, but it was:",o,r);const u=[],d=fs.empty();Si(r,((g,x)=>{const b=P2(e,g,t);x=tn(x);const w=o.childContextForFieldPath(b);if(x instanceof Tf)u.push(b);else{const j=Iu(x,w);j!=null&&(u.push(b),d.set(b,j))}}));const p=new Is(u);return new R2(d,p,o.fieldTransforms)}function s3(s,e,t,r,o,u){const d=s.createContext(1,e,t),p=[Co(e,r,t)],g=[o];if(u.length%2!=0)throw new Ie(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)p.push(Co(e,u[j])),g.push(u[j+1]);const x=[],b=fs.empty();for(let j=p.length-1;j>=0;--j)if(!V2(x,p[j])){const T=p[j];let L=g[j];L=tn(L);const V=d.childContextForFieldPath(T);if(L instanceof Tf)x.push(T);else{const O=Iu(L,V);O!=null&&(x.push(T),b.set(T,O))}}const w=new Is(x);return new R2(b,w,d.fieldTransforms)}function a3(s,e,t,r=!1){return Iu(t,s.createContext(r?4:3,e))}function Iu(s,e){if(O2(s=tn(s)))return Gg("Unsupported field value:",e,s),M2(s,e);if(s instanceof Sf)return(function(r,o){if(!I2(o.dataSource))throw o.createError(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,o){const u=[];let d=0;for(const p of r){let g=Iu(p,o.childContextForArray(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(r,o){if((r=tn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return U4(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Rt.fromDate(r);return{timestampValue:Yh(o.serializer,u)}}if(r instanceof Rt){const u=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yh(o.serializer,u)}}if(r instanceof Ba)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ks)return{bytesValue:e2(o.serializer,r._byteString)};if(r instanceof cn){const u=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(u))throw o.createError(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Sg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ua)return(function(d,p){const g=d instanceof ua?d.toArray():d;return{mapValue:{fields:{[CN]:{stringValue:kN},[qh]:{arrayValue:{values:g.map((b=>{if(typeof b!="number")throw p.createError("VectorValues must only contain numeric values.");return wg(p.serializer,b)}))}}}}}})(r,o);if(l2(r))return r._toProto(o.serializer);throw o.createError(`Unsupported field value: ${uf(r)}`)})(s,e)}function M2(s,e){const t={};return NN(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Si(s,((r,o)=>{const u=Iu(o,e.childContextForField(r));u!=null&&(t[r]=u)})),{mapValue:{fields:t}}}function O2(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Rt||s instanceof Ba||s instanceof Ks||s instanceof cn||s instanceof Sf||s instanceof ua||l2(s))}function Gg(s,e,t){if(!O2(t)||!wN(t)){const r=uf(t);throw r==="an object"?e.createError(s+" a custom object"):e.createError(s+" "+r)}}function Co(s,e,t){if((e=tn(e))instanceof qg)return e._internalPath;if(typeof e=="string")return P2(s,e);throw Jh("Field path arguments must be of type string or ",s,!1,void 0,t)}const r3=new RegExp("[~\\*/\\[\\]]");function P2(s,e,t){if(e.search(r3)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new qg(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Jh(s,e,t,r,o){const u=r&&!r.isEmpty(),d=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${r}`),d&&(g+=` in document ${o}`),g+=")"),new Ie(ge.INVALID_ARGUMENT,p+s+g)}function V2(s,e){return s.some((t=>t.isEqual(e)))}class i3{convertValue(e,t="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ke(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Si(e,((o,u)=>{r[o]=this.convertValue(u,t)})),r}convertVectorValue(e){const t=e.fields?.[qh].arrayValue?.values?.map((r=>xn(r.doubleValue)));return new ua(t)}convertGeoPoint(e){return new Ba(xn(e.latitude),xn(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ff(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){const t=pi(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);It(i2(r),9688,{name:e});const o=new du(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return o.isEqual(t)||vr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}class Yg extends i3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,t)}}function Wg(){return new Hg("serverTimestamp")}const m1="@firebase/firestore",p1="4.10.0";function g1(s){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class L2{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const t=this._document.data.field(Co("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class l3 extends L2{data(){return super.data()}}function U2(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Ie(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kg{}class o3 extends Kg{}function Ms(s,e,...t){let r=[];e instanceof Kg&&r.push(e),r=r.concat(t),(function(u){const d=u.filter((g=>g instanceof Qg)).length,p=u.filter((g=>g instanceof Af)).length;if(d>1||d>0&&p>0)throw new Ie(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Af extends o3{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Af(e,t,r)}_apply(e){const t=this._parse(e);return B2(e._query,t),new Nl(e.firestore,e.converter,j0(e._query,t))}_parse(e){const t=Ef(e.firestore);return(function(u,d,p,g,x,b,w){let j;if(x.isKeyField()){if(b==="array-contains"||b==="array-contains-any")throw new Ie(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if(b==="in"||b==="not-in"){b1(w,b);const L=[];for(const V of w)L.push(x1(g,u,V));j={arrayValue:{values:L}}}else j=x1(g,u,w)}else b!=="in"&&b!=="not-in"&&b!=="array-contains-any"||b1(w,b),j=a3(p,d,w,b==="in"||b==="not-in");return Tn.create(x,b,j)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ps(s,e,t){const r=e,o=Co("where",s);return Af._create(o,r,t)}class Qg extends Kg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qg(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:ma.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let d=o;const p=u.getFlattenedFilters();for(const g of p)B2(d,g),d=j0(d,g)})(e._query,t),new Nl(e.firestore,e.converter,j0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function x1(s,e,t){if(typeof(t=tn(t))=="string"){if(t==="")throw new Ie(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LN(e)&&t.indexOf("/")!==-1)throw new Ie(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!qe.isDocumentKey(r))throw new Ie(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rw(s,new qe(r))}if(t instanceof cn)return Rw(s,t._key);throw new Ie(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uf(t)}.`)}function b1(s,e){if(!Array.isArray(s)||s.length===0)throw new Ie(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function B2(s,e){const t=(function(o,u){for(const d of o)for(const p of d.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Ie(ge.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ie(ge.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function z2(s,e,t){let r;return r=s?s.toFirestore(e):e,r}class Qc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rl extends L2{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Co("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ge.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=rl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}rl._jsonSchemaVersion="firestore/documentSnapshot/1.0",rl._jsonSchema={type:An("string",rl._jsonSchemaVersion),bundleSource:An("string","DocumentSnapshot"),bundleName:An("string"),bundle:An("string")};class Eh extends rl{data(e={}){return super.data(e)}}class il{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Qc(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Eh(this._firestore,this._userDataWriter,r.key,r,new Qc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((p=>{const g=new Eh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Qc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new Eh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new Qc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let x=-1,b=-1;return p.type!==0&&(x=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),b=d.indexOf(p.doc.key)),{type:c3(p.type),doc:g,oldIndex:x,newIndex:b}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ie(ge.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=il._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function c3(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ke(61501,{type:s})}}il._jsonSchemaVersion="firestore/querySnapshot/1.0",il._jsonSchema={type:An("string",il._jsonSchemaVersion),bundleSource:An("string","QuerySnapshot"),bundleName:An("string"),bundle:An("string")};function Qp(s){s=gs(s,cn);const e=gs(s.firestore,_r),t=jf(e);return H6(t,s._key).then((r=>F2(e,s,r)))}function Os(s){s=gs(s,Nl);const e=gs(s.firestore,_r),t=jf(e),r=new Yg(e);return U2(s._query),G6(t,s._query).then((o=>new il(e,r,s,o)))}function Xp(s,e,t){s=gs(s,cn);const r=gs(s.firestore,_r),o=z2(s.converter,e),u=Ef(r);return Cf(r,[D2(u,"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Xs.none())])}function it(s,e,t,...r){s=gs(s,cn);const o=gs(s.firestore,_r),u=Ef(o);let d;return d=typeof(e=tn(e))=="string"||e instanceof qg?s3(u,"updateDoc",s._key,e,t,r):n3(u,"updateDoc",s._key,e),Cf(o,[d.toMutation(s._key,Xs.exists(!0))])}function u3(s){return Cf(gs(s.firestore,_r),[new _g(s._key,Xs.none())])}function Nr(s,e){const t=gs(s.firestore,_r),r=Ye(s),o=z2(s.converter,e),u=Ef(s.firestore);return Cf(t,[D2(u,"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Xs.exists(!1))]).then((()=>r))}function Zt(s,...e){s=tn(s);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||g1(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(g1(e[r])){const x=e[r];e[r]=x.next?.bind(x),e[r+1]=x.error?.bind(x),e[r+2]=x.complete?.bind(x)}let u,d,p;if(s instanceof cn)d=gs(s.firestore,_r),p=mf(s._key.path),u={next:x=>{e[r]&&e[r](F2(d,s,x))},error:e[r+1],complete:e[r+2]};else{const x=gs(s,Nl);d=gs(x.firestore,_r),p=x._query;const b=new Yg(d);u={next:w=>{e[r]&&e[r](new il(d,b,x,w))},error:e[r+1],complete:e[r+2]},U2(s._query)}const g=jf(d);return $6(g,p,o,u)}function Cf(s,e){const t=jf(s);return Y6(t,e)}function F2(s,e,t){const r=t.docs.get(e._key),o=new Yg(s);return new rl(s,o,e._key,r,new Qc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){Gk(yl),cl(new fi("firestore",((r,{instanceIdentifier:o,options:u})=>{const d=r.getProvider("app").getImmediate(),p=new _r(new Kk(r.getProvider("auth-internal")),new Jk(d,r.getProvider("app-check-internal")),p4(d,o),d);return u={useFetchStreams:t,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Oa(m1,p1,e),Oa(m1,p1,"esm2020")})();const q2="firebasestorage.googleapis.com",$2="storageBucket",d3=120*1e3,h3=600*1e3;class hn extends qa{constructor(e,t,r=0){super(Jp(e),`Firebase Storage: ${t} (${Jp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dn||(dn={}));function Jp(s){return"storage/"+s}function Xg(){const s="An unknown error occurred, please check the error payload for server response.";return new hn(dn.UNKNOWN,s)}function f3(s){return new hn(dn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function m3(s){return new hn(dn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function p3(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new hn(dn.UNAUTHENTICATED,s)}function g3(){return new hn(dn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function x3(s){return new hn(dn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function b3(){return new hn(dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function y3(){return new hn(dn.CANCELED,"User canceled the upload/download.")}function v3(s){return new hn(dn.INVALID_URL,"Invalid URL '"+s+"'.")}function w3(s){return new hn(dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function _3(){return new hn(dn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$2+"' property when initializing the app?")}function N3(){return new hn(dn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function j3(){return new hn(dn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function S3(s){return new hn(dn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function O0(s){return new hn(dn.INVALID_ARGUMENT,s)}function H2(){return new hn(dn.APP_DELETED,"The Firebase app was deleted.")}function E3(s){return new hn(dn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function au(s,e){return new hn(dn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function zc(s){throw new hn(dn.INTERNAL_ERROR,"Internal error: "+s)}class Ds{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ds.makeFromUrl(e,t)}catch{return new Ds(e,"")}if(r.path==="")return r;throw w3(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const d="(/(.*))?$",p=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function x(ae){ae.path_=decodeURIComponent(ae.path)}const b="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),j="(/([^?#]*).*)?$",T=new RegExp(`^https?://${w}/${b}/b/${o}/o${j}`,"i"),L={bucket:1,path:3},V=t===q2?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",U=new RegExp(`^https?://${V}/${o}/${O}`,"i"),q=[{regex:p,indices:g,postModify:u},{regex:T,indices:L,postModify:x},{regex:U,indices:{bucket:1,path:2},postModify:x}];for(let ae=0;ae<q.length;ae++){const ce=q[ae],W=ce.regex.exec(e);if(W){const S=W[ce.indices.bucket];let A=W[ce.indices.path];A||(A=""),r=new Ds(S,A),ce.postModify(r);break}}if(r==null)throw v3(e);return r}}class T3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function A3(s,e,t){let r=1,o=null,u=null,d=!1,p=0;function g(){return p===2}let x=!1;function b(...O){x||(x=!0,e.apply(null,O))}function w(O){o=setTimeout(()=>{o=null,s(T,g())},O)}function j(){u&&clearTimeout(u)}function T(O,...U){if(x){j();return}if(O){j(),b.call(null,O,...U);return}if(g()||d){j(),b.call(null,O,...U);return}r<64&&(r*=2);let q;p===1?(p=2,q=0):q=(r+Math.random())*1e3,w(q)}let L=!1;function V(O){L||(L=!0,j(),!x&&(o!==null?(O||(p=2),clearTimeout(o),w(0)):O||(p=1)))}return w(0),u=setTimeout(()=>{d=!0,V(!0)},t),V}function C3(s){s(!1)}function k3(s){return s!==void 0}function R3(s){return typeof s=="object"&&!Array.isArray(s)}function Jg(s){return typeof s=="string"||s instanceof String}function y1(s){return Zg()&&s instanceof Blob}function Zg(){return typeof Blob<"u"}function v1(s,e,t,r){if(r<e)throw O0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>t)throw O0(`Invalid value for '${s}'. Expected ${t} or less.`)}function kf(s,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${s}`}function G2(s){const e=encodeURIComponent;let t="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var ll;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(ll||(ll={}));function I3(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||o||u}class D3{constructor(e,t,r,o,u,d,p,g,x,b,w,j=!0,T=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=d,this.callback_=p,this.errorCallback_=g,this.timeout_=x,this.progressCallback_=b,this.connectionFactory_=w,this.retry=j,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,V)=>{this.resolve_=L,this.reject_=V,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new oh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const d=p=>{const g=p.loaded,x=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,x)};this.progressCallback_!==null&&u.addUploadProgressListener(d),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(d),this.pendingConnection_=null;const p=u.getErrorCode()===ll.NO_ERROR,g=u.getStatus();if(!p||I3(g,this.additionalRetryCodes_)&&this.retry){const b=u.getErrorCode()===ll.ABORT;r(!1,new oh(!1,null,b));return}const x=this.successCodes_.indexOf(g)!==-1;r(!0,new oh(x,u))})},t=(r,o)=>{const u=this.resolve_,d=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());k3(g)?u(g):u()}catch(g){d(g)}else if(p!==null){const g=Xg();g.serverResponse=p.getErrorText(),this.errorCallback_?d(this.errorCallback_(p,g)):d(g)}else if(o.canceled){const g=this.appDelete_?H2():y3();d(g)}else{const g=b3();d(g)}};this.canceled_?t(!1,new oh(!1,null,!0)):this.backoffId_=A3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&C3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class oh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function M3(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function O3(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function P3(s,e){e&&(s["X-Firebase-GMPID"]=e)}function V3(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function L3(s,e,t,r,o,u,d=!0,p=!1){const g=G2(s.urlParams),x=s.url+g,b=Object.assign({},s.headers);return P3(b,e),M3(b,t),O3(b,u),V3(b,r),new D3(x,s.method,b,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,p)}function U3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function B3(...s){const e=U3();if(e!==void 0){const t=new e;for(let r=0;r<s.length;r++)t.append(s[r]);return t.getBlob()}else{if(Zg())return new Blob(s);throw new hn(dn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function z3(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function F3(s){if(typeof atob>"u")throw S3("base-64");return atob(s)}const Ma={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zp{constructor(e,t){this.data=e,this.contentType=t||null}}function q3(s,e){switch(s){case Ma.RAW:return new Zp(Y2(e));case Ma.BASE64:case Ma.BASE64URL:return new Zp(W2(s,e));case Ma.DATA_URL:return new Zp(H3(e),G3(e))}throw Xg()}function Y2(s){const e=[];for(let t=0;t<s.length;t++){let r=s.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=r,d=s.charCodeAt(++t);r=65536|(u&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function $3(s){let e;try{e=decodeURIComponent(s)}catch{throw au(Ma.DATA_URL,"Malformed data URL.")}return Y2(e)}function W2(s,e){switch(s){case Ma.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw au(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Ma.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw au(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=F3(e)}catch(o){throw o.message.includes("polyfill")?o:au(s,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class K2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw au(Ma.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=Y3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function H3(s){const e=new K2(s);return e.base64?W2(Ma.BASE64,e.rest):$3(e.rest)}function G3(s){return new K2(s).contentType}function Y3(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class ii{constructor(e,t){let r=0,o="";y1(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(y1(this.data_)){const r=this.data_,o=z3(r,e,t);return o===null?null:new ii(o)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ii(r,!0)}}static getBlob(...e){if(Zg()){const t=e.map(r=>r instanceof ii?r.data_:r);return new ii(B3.apply(null,t))}else{const t=e.map(d=>Jg(d)?q3(Ma.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let u=0;return t.forEach(d=>{for(let p=0;p<d.length;p++)o[u++]=d[p]}),new ii(o,!0)}}uploadData(){return this.data_}}function Q2(s){let e;try{e=JSON.parse(s)}catch{return null}return R3(e)?e:null}function W3(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function K3(s,e){const t=e.split("/").filter(r=>r.length>0).join("/");return s.length===0?t:s+"/"+t}function X2(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function Q3(s,e){return e}class es{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||Q3}}let ch=null;function X3(s){return!Jg(s)||s.length<2?s:X2(s)}function J2(){if(ch)return ch;const s=[];s.push(new es("bucket")),s.push(new es("generation")),s.push(new es("metageneration")),s.push(new es("name","fullPath",!0));function e(u,d){return X3(d)}const t=new es("name");t.xform=e,s.push(t);function r(u,d){return d!==void 0?Number(d):d}const o=new es("size");return o.xform=r,s.push(o),s.push(new es("timeCreated")),s.push(new es("updated")),s.push(new es("md5Hash",null,!0)),s.push(new es("cacheControl",null,!0)),s.push(new es("contentDisposition",null,!0)),s.push(new es("contentEncoding",null,!0)),s.push(new es("contentLanguage",null,!0)),s.push(new es("contentType",null,!0)),s.push(new es("metadata","customMetadata",!0)),ch=s,ch}function J3(s,e){function t(){const r=s.bucket,o=s.fullPath,u=new Ds(r,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function Z3(s,e,t){const r={};r.type="file";const o=t.length;for(let u=0;u<o;u++){const d=t[u];r[d.local]=d.xform(r,e[d.server])}return J3(r,s),r}function Z2(s,e,t){const r=Q2(e);return r===null?null:Z3(s,r,t)}function eI(s,e,t,r){const o=Q2(e);if(o===null||!Jg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const d=encodeURIComponent;return u.split(",").map(x=>{const b=s.bucket,w=s.fullPath,j="/b/"+d(b)+"/o/"+d(w),T=kf(j,t,r),L=G2({alt:"media",token:x});return T+L})[0]}function tI(s,e){const t={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}class ex{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function ej(s){if(!s)throw Xg()}function nI(s,e){function t(r,o){const u=Z2(s,o,e);return ej(u!==null),u}return t}function sI(s,e){function t(r,o){const u=Z2(s,o,e);return ej(u!==null),eI(u,o,s.host,s._protocol)}return t}function tj(s){function e(t,r){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=g3():o=p3():t.getStatus()===402?o=m3(s.bucket):t.getStatus()===403?o=x3(s.path):o=r,o.status=t.getStatus(),o.serverResponse=r.serverResponse,o}return e}function nj(s){const e=tj(s);function t(r,o){let u=e(r,o);return r.getStatus()===404&&(u=f3(s.path)),u.serverResponse=o.serverResponse,u}return t}function aI(s,e,t){const r=e.fullServerUrl(),o=kf(r,s.host,s._protocol),u="GET",d=s.maxOperationRetryTime,p=new ex(o,u,sI(s,t),d);return p.errorHandler=nj(e),p}function rI(s,e){const t=e.fullServerUrl(),r=kf(t,s.host,s._protocol),o="DELETE",u=s.maxOperationRetryTime;function d(g,x){}const p=new ex(r,o,d,u);return p.successCodes=[200,204],p.errorHandler=nj(e),p}function iI(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function lI(s,e,t){const r=Object.assign({},t);return r.fullPath=s.path,r.size=e.size(),r.contentType||(r.contentType=iI(null,e)),r}function oI(s,e,t,r,o){const u=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function p(){let q="";for(let ae=0;ae<2;ae++)q=q+Math.random().toString().slice(2);return q}const g=p();d["Content-Type"]="multipart/related; boundary="+g;const x=lI(e,r,o),b=tI(x,t),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+b+`\r
--`+g+`\r
Content-Type: `+x.contentType+`\r
\r
`,j=`\r
--`+g+"--",T=ii.getBlob(w,r,j);if(T===null)throw N3();const L={name:x.fullPath},V=kf(u,s.host,s._protocol),O="POST",U=s.maxUploadRetryTime,G=new ex(V,O,nI(s,t),U);return G.urlParams=L,G.headers=d,G.body=T.uploadData(),G.errorHandler=tj(e),G}class cI{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ll.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ll.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ll.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o,u){if(this.sent_)throw zc("cannot .send() more than once");if(_i(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const d in u)u.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,u[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class uI extends cI{initXhr(){this.xhr_.responseType="text"}}function tx(){return new uI}class ml{constructor(e,t){this._service=e,t instanceof Ds?this._location=t:this._location=Ds.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ml(e,t)}get root(){const e=new Ds(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return X2(this._location.path)}get storage(){return this._service}get parent(){const e=W3(this._location.path);if(e===null)return null;const t=new Ds(this._location.bucket,e);return new ml(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw E3(e)}}function dI(s,e,t){s._throwIfRoot("uploadBytes");const r=oI(s.storage,s._location,J2(),new ii(e,!0),t);return s.storage.makeRequestWithTokens(r,tx).then(o=>({metadata:o,ref:s}))}function hI(s){s._throwIfRoot("getDownloadURL");const e=aI(s.storage,s._location,J2());return s.storage.makeRequestWithTokens(e,tx).then(t=>{if(t===null)throw j3();return t})}function fI(s){s._throwIfRoot("deleteObject");const e=rI(s.storage,s._location);return s.storage.makeRequestWithTokens(e,tx)}function mI(s,e){const t=K3(s._location.path,e),r=new Ds(s._location.bucket,t);return new ml(s.storage,r)}function pI(s){return/^[A-Za-z]+:\/\//.test(s)}function gI(s,e){return new ml(s,e)}function sj(s,e){if(s instanceof nx){const t=s;if(t._bucket==null)throw _3();const r=new ml(t,t._bucket);return e!=null?sj(r,e):r}else return e!==void 0?mI(s,e):s}function xI(s,e){if(e&&pI(e)){if(s instanceof nx)return gI(s,e);throw O0("To use ref(service, url), the first argument must be a Storage instance.")}else return sj(s,e)}function w1(s,e){const t=e?.[$2];return t==null?null:Ds.makeFromBucketSpec(t,s)}function bI(s,e,t,r={}){s.host=`${e}:${t}`;const o=_i(e);o&&(tg(`https://${s.host}/b`),ng("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=r;u&&(s._overrideAuthToken=typeof u=="string"?u:S_(u,s.app.options.projectId))}class nx{constructor(e,t,r,o,u,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=d,this._bucket=null,this._host=q2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=d3,this._maxUploadRetryTime=h3,this._requests=new Set,o!=null?this._bucket=Ds.makeFromBucketSpec(o,this._host):this._bucket=w1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ds.makeFromBucketSpec(this._url,e):this._bucket=w1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){v1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){v1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Rs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ml(this,e)}_makeRequest(e,t,r,o,u=!0){if(this._deleted)return new T3(H2());{const d=L3(e,this._appId,r,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const _1="@firebase/storage",N1="0.14.0";const aj="storage";function yI(s,e,t){return s=tn(s),dI(s,e,t)}function vI(s){return s=tn(s),hI(s)}function wI(s){return s=tn(s),fI(s)}function j1(s,e){return s=tn(s),xI(s,e)}function _I(s=rg(),e){s=tn(s);const r=rf(s,aj).getImmediate({identifier:e}),o=__("storage");return o&&NI(r,...o),r}function NI(s,e,t,r={}){bI(s,e,t,r)}function jI(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new nx(t,r,o,e,yl)}function SI(){cl(new fi(aj,jI,"PUBLIC").setMultipleInstances(!0)),Oa(_1,N1,""),Oa(_1,N1,"esm2020")}SI();const EI={apiKey:"AIzaSyC1qZ9fK-6LFBxVWZsAD4dZq-KVg36A7f8",authDomain:"scheduler-65e51.firebaseapp.com",projectId:"scheduler-65e51",storageBucket:"scheduler-65e51.firebasestorage.app",messagingSenderId:"93993791456",appId:"1:93993791456:web:3a777a2da0dad4b8b74585"},sx=A_(EI),je=X6(sx),pl=Fk(sx),S1=_I(sx);const rj=(...s)=>s.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();const TI=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const AI=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());const E1=s=>{const e=AI(s);return e.charAt(0).toUpperCase()+e.slice(1)};var CI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const kI=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const RI=N.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:d,...p},g)=>N.createElement("svg",{ref:g,...CI,width:e,height:e,stroke:s,strokeWidth:r?Number(t)*24/Number(e):t,className:rj("lucide",o),...!u&&!kI(p)&&{"aria-hidden":"true"},...p},[...d.map(([x,b])=>N.createElement(x,b)),...Array.isArray(u)?u:[u]]));const Re=(s,e)=>{const t=N.forwardRef(({className:r,...o},u)=>N.createElement(RI,{ref:u,iconNode:e,className:rj(`lucide-${TI(E1(s))}`,`lucide-${s}`,r),...o}));return t.displayName=E1(s),t};const II=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],DI=Re("arrow-down-right",II);const MI=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],za=Re("arrow-left",MI);const OI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_o=Re("arrow-right",OI);const PI=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],VI=Re("arrow-up-down",PI);const LI=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],UI=Re("arrow-up-right",LI);const BI=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],po=Re("bell",BI);const zI=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],FI=Re("bot",zI);const qI=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],$I=Re("building-2",qI);const HI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],da=Re("calendar-check",HI);const GI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],T1=Re("calendar-days",GI);const YI=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Vt=Re("calendar",YI);const WI=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],KI=Re("camera",WI);const QI=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ax=Re("chart-column",QI);const XI=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],JI=Re("chart-pie",XI);const ZI=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ms=Re("check",ZI);const eD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],P0=Re("chevron-down",eD);const tD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ij=Re("chevron-left",tD);const nD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rf=Re("chevron-right",nD);const sD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],V0=Re("chevron-up",sD);const aD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],gu=Re("circle-alert",aD);const rD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Kn=Re("circle-check-big",rD);const iD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Da=Re("circle-x",iD);const lD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],un=Re("clock",lD);const oD=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],cD=Re("code",oD);const uD=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],dD=Re("coffee",uD);const hD=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],fD=Re("copy",hD);const mD=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],gr=Re("credit-card",mD);const pD=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],If=Re("crown",pD);const gD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],L0=Re("dollar-sign",gD);const xD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Th=Re("external-link",xD);const bD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yD=Re("eye",bD);const vD=[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]],wD=Re("ghost",vD);const _D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ND=Re("globe",_D);const jD=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],SD=Re("headphones",jD);const ED=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],rx=Re("heart",ED);const TD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],AD=Re("image",TD);const CD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],A1=Re("info",CD);const kD=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],U0=Re("list-ordered",kD);const RD=[["path",{d:"M16 5H3",key:"m91uny"}],["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 19H3",key:"zzsher"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]],Zh=Re("list-plus",RD);const ID=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Qs=Re("loader-circle",ID);const DD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ef=Re("lock",DD);const MD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],OD=Re("log-out",MD);const PD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],B0=Re("mail",PD);const VD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],LD=Re("map-pin",VD);const UD=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],tf=Re("message-circle",UD);const BD=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],z0=Re("message-square",BD);const zD=[["path",{d:"M5 12h14",key:"1ays0h"}]],FD=Re("minus",zD);const qD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],$D=Re("palette",qD);const HD=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],lj=Re("party-popper",HD);const GD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],oj=Re("pen-line",GD);const YD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],F0=Re("phone",YD);const WD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],e0=Re("play",WD);const KD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vi=Re("plus",KD);const QD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ix=Re("refresh-cw",QD);const XD=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],hi=Re("repeat",XD);const JD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ZD=Re("save",JD);const eM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],tM=Re("search",eM);const nM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ah=Re("send",nM);const sM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],aM=Re("settings",sM);const rM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],iM=Re("shield",rM);const lM=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],cj=Re("sparkles",lM);const oM=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],C1=Re("star",oM);const cM=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],k1=Re("sticky-note",cM);const uM=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],xs=Re("tag",uM);const dM=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],uj=Re("thermometer",dM);const hM=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],dj=Re("timer",hM);const fM=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],xu=Re("trash-2",fM);const mM=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Df=Re("trending-up",mM);const pM=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gl=Re("triangle-alert",pM);const gM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],hj=Re("user-plus",gM);const xM=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],xl=Re("user",xM);const bM=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gt=Re("users",bM);const yM=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],R1=Re("wallet",yM);const vM=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ha=Re("x",vM);const wM=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Du=Re("zap",wM);function I1({className:s=""}){return i.jsxs(st,{to:"/",className:`flex items-center gap-2.5 ${s}`,children:[i.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(da,{className:"w-[18px] h-[18px] text-white"})}),i.jsxs("span",{className:"text-xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function _M(){return i.jsxs("div",{className:"min-h-screen bg-white",children:[i.jsx("nav",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-xl border-b border-slate-100",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsx(I1,{}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(st,{to:"/login",className:"px-4 py-2.5 text-sm font-semibold text-slate-600 hover:text-slate-900 transition-colors",children:"Sign In"}),i.jsxs(st,{to:"/register",className:"hidden sm:inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:["Get Started Free",i.jsx(_o,{className:"w-4 h-4"})]}),i.jsx(st,{to:"/register",className:"sm:hidden px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl text-sm font-semibold transition-all",children:"Start Free"})]})]})}),i.jsxs("section",{className:"relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 -z-10",children:[i.jsx("div",{className:"absolute top-0 right-0 w-[600px] h-[600px] bg-blue-50 rounded-full blur-3xl opacity-60 -translate-y-1/2 translate-x-1/3"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-[400px] h-[400px] bg-violet-50 rounded-full blur-3xl opacity-50 translate-y-1/3 -translate-x-1/4"})]}),i.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 pt-16 sm:pt-24 pb-16 sm:pb-20",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[i.jsxs("div",{className:"animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-3.5 py-1.5 bg-blue-50 border border-blue-100 rounded-full text-sm font-medium text-blue-700 mb-6",children:[i.jsx(cj,{className:"w-3.5 h-3.5"}),"Free for beauty professionals"]}),i.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-[3.5rem] font-extrabold text-slate-900 leading-[1.1] mb-6 tracking-tight",children:["Online booking",i.jsx("br",{}),i.jsx("span",{className:"text-blue-600",children:"made effortless"})]}),i.jsx("p",{className:"text-lg sm:text-xl text-slate-600 leading-relaxed mb-8 max-w-lg",children:"Let clients book 24/7. Manage your team, services, and schedule from one beautiful dashboard. No more phone tag."}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-10",children:[i.jsxs(st,{to:"/register",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-base shadow-lg shadow-blue-600/25 hover:shadow-xl hover:shadow-blue-600/30 transition-all hover:-translate-y-0.5",children:["Start for Free",i.jsx(_o,{className:"w-4 h-4"})]}),i.jsx("a",{href:"#how-it-works",className:"inline-flex items-center justify-center gap-2 px-7 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-base border border-slate-200 transition-all",children:"See How It Works"})]}),i.jsxs("div",{className:"flex items-center gap-5 text-sm text-slate-500",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Kn,{className:"w-4 h-4 text-emerald-500"}),i.jsx("span",{children:"Free to use"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Kn,{className:"w-4 h-4 text-emerald-500"}),i.jsx("span",{children:"No credit card"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Kn,{className:"w-4 h-4 text-emerald-500"}),i.jsx("span",{children:"Setup in 2 min"})]})]})]}),i.jsxs("div",{className:"relative animate-fade-in-up",style:{animationDelay:"150ms"},children:[i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl shadow-slate-200/60 border border-slate-200/80 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-slate-50 border-b border-slate-100",children:[i.jsxs("div",{className:"flex gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"}),i.jsx("div",{className:"w-3 h-3 rounded-full bg-slate-200"})]}),i.jsx("div",{className:"flex-1 mx-4",children:i.jsx("div",{className:"bg-white border border-slate-200 rounded-lg px-3 py-1.5 text-xs text-slate-400 font-mono",children:"bookflow.app/shop/janes-salon"})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl flex items-center justify-center text-white text-sm font-bold",children:"J"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-slate-900",children:"Jane's Salon"}),i.jsx("div",{className:"text-xs text-slate-500",children:"Book your next appointment"})]})]}),i.jsx("div",{className:"space-y-2.5",children:[{name:"Haircut & Style",price:"$45",time:"45 min",color:"bg-blue-500"},{name:"Color Treatment",price:"$120",time:"2 hours",color:"bg-violet-500"},{name:"Blowout",price:"$35",time:"30 min",color:"bg-emerald-500"}].map(s=>i.jsxs("div",{className:"flex items-center justify-between p-3.5 bg-slate-50 rounded-xl border border-slate-100 group hover:border-blue-200 hover:bg-blue-50/50 transition-all cursor-default",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-2 h-8 ${s.color} rounded-full`}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-slate-800",children:s.name}),i.jsx("div",{className:"text-xs text-slate-500",children:s.time})]})]}),i.jsx("div",{className:"text-sm font-bold text-slate-900",children:s.price})]},s.name))})]})]}),i.jsxs("div",{className:"absolute -bottom-4 -left-4 bg-white rounded-xl shadow-lg shadow-slate-200/60 border border-slate-100 px-4 py-3 flex items-center gap-3 animate-float",children:[i.jsx("div",{className:"w-9 h-9 bg-emerald-100 rounded-full flex items-center justify-center",children:i.jsx(Kn,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Booking confirmed"}),i.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"Tomorrow at 2:00 PM"})]})]})]})]})})]}),i.jsx("section",{className:"border-y border-slate-100 bg-slate-50/50",children:i.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-8 sm:py-10",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-8 sm:gap-16 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"500+"}),i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Businesses trust SpotBookie"})]}),i.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-2xl sm:text-3xl font-extrabold text-slate-900",children:"10,000+"}),i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Appointments booked"})]}),i.jsx("div",{className:"hidden sm:block w-px h-10 bg-slate-200"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 text-2xl sm:text-3xl font-extrabold text-slate-900",children:["4.9 ",i.jsx(C1,{className:"w-5 h-5 text-amber-400 fill-amber-400"})]}),i.jsx("div",{className:"text-sm text-slate-500 font-medium",children:"Average rating"})]})]})})}),i.jsx("section",{className:"py-20 sm:py-28",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[i.jsxs("div",{className:"text-center mb-14",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Everything you need to run your bookings"}),i.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Built specifically for beauty professionals, salons, and service businesses. Simple, powerful, and free."})]}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-6 stagger-children",children:[{icon:i.jsx(Vt,{className:"w-6 h-6"}),title:"Smart Scheduling",desc:"Set weekly hours with breaks. Slots auto-generate so your calendar is always up to date.",color:"bg-blue-100 text-blue-600"},{icon:i.jsx(Gt,{className:"w-6 h-6"}),title:"Multi-Staff Support",desc:"Add your whole team. Each member gets their own schedule, hours, and bookings.",color:"bg-violet-100 text-violet-600"},{icon:i.jsx(Du,{className:"w-6 h-6"}),title:"Instant Booking",desc:"Clients pick a service, choose a stylist, and book  all in under a minute.",color:"bg-amber-100 text-amber-600"},{icon:i.jsx(ND,{className:"w-6 h-6"}),title:"Your Own Booking Page",desc:"Get a unique link to share anywhere. No app downloads needed for your clients.",color:"bg-emerald-100 text-emerald-600"}].map(s=>i.jsxs("div",{className:"group bg-white rounded-2xl p-7 border border-slate-200/80 hover:border-slate-300 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[i.jsx("div",{className:`w-12 h-12 ${s.color} rounded-xl flex items-center justify-center mb-5 group-hover:scale-110 transition-transform duration-300`,children:s.icon}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:s.title}),i.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:s.desc})]},s.title))})]})}),i.jsx("section",{id:"how-it-works",className:"py-20 sm:py-28 bg-slate-50 border-y border-slate-100",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[i.jsxs("div",{className:"text-center mb-14",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Up and running in minutes"}),i.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Three simple steps to start accepting online bookings today."})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-8 lg:gap-12 relative",children:[i.jsx("div",{className:"hidden md:block absolute top-14 left-[calc(16.67%+1rem)] right-[calc(16.67%+1rem)] h-px bg-gradient-to-r from-blue-200 via-violet-200 to-emerald-200"}),[{step:"1",title:"Create your account",desc:"Sign up free in 30 seconds. Name your shop and you're in.",color:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/30"},{step:"2",title:"Set up your shop",desc:"Add your services, team, and weekly hours. SpotBookie handles the rest.",color:"from-violet-500 to-violet-600",shadow:"shadow-violet-500/30"},{step:"3",title:"Share your link",desc:"Send your booking page to clients. They book, you get notified.",color:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/30"}].map(s=>i.jsxs("div",{className:"relative text-center",children:[i.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${s.color} rounded-2xl flex items-center justify-center mx-auto mb-6 text-white text-xl font-extrabold shadow-lg ${s.shadow} relative z-10`,children:s.step}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:s.title}),i.jsx("p",{className:"text-slate-600 leading-relaxed max-w-xs mx-auto",children:s.desc})]},s.step))]})]})}),i.jsx("section",{className:"py-20 sm:py-28",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-5 sm:px-8",children:[i.jsxs("div",{className:"text-center mb-14",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-slate-900 mb-4",children:"Loved by professionals"}),i.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"See why salons and stylists are switching to SpotBookie."})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{quote:"SpotBookie replaced our paper appointment book. Clients love being able to book online anytime.",name:"Maria Santos",role:"Salon Owner",initials:"MS",color:"bg-blue-100 text-blue-700"},{quote:"Setting up was incredibly easy. I had my booking page live and shared with clients in under 10 minutes.",name:"David Chen",role:"Barber",initials:"DC",color:"bg-violet-100 text-violet-700"},{quote:"The multi-staff feature is perfect. Each stylist manages their own schedule and clients can pick who they want.",name:"Lisa Park",role:"Studio Manager",initials:"LP",color:"bg-emerald-100 text-emerald-700"}].map(s=>i.jsxs("div",{className:"bg-white rounded-2xl p-7 border border-slate-200/80 hover:shadow-lg hover:shadow-slate-200/40 transition-all duration-300",children:[i.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(5)].map((e,t)=>i.jsx(C1,{className:"w-4 h-4 text-amber-400 fill-amber-400"},t))}),i.jsxs("p",{className:"text-slate-700 leading-relaxed mb-6",children:['"',s.quote,'"']}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 ${s.color} rounded-full flex items-center justify-center text-sm font-bold`,children:s.initials}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s.name}),i.jsx("div",{className:"text-xs text-slate-500",children:s.role})]})]})]},s.name))})]})}),i.jsxs("section",{className:"py-20 sm:py-28 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 -z-0",children:[i.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-1/4 w-80 h-80 bg-violet-500/10 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-3xl mx-auto px-5 sm:px-8 text-center",children:[i.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-extrabold text-white mb-6 leading-tight",children:"Ready to streamline your bookings?"}),i.jsx("p",{className:"text-lg text-slate-400 mb-10 max-w-xl mx-auto",children:"Join hundreds of professionals who have ditched the old appointment book. Set up in minutes, free forever."}),i.jsxs(st,{to:"/register",className:"inline-flex items-center gap-2 px-8 py-4 bg-white hover:bg-slate-50 text-slate-900 rounded-xl font-bold text-lg transition-all hover:shadow-xl hover:shadow-white/10 hover:-translate-y-0.5",children:["Create Your Free Account",i.jsx(_o,{className:"w-5 h-5"})]})]})]}),i.jsx("footer",{className:"bg-white border-t border-slate-100",children:i.jsx("div",{className:"max-w-6xl mx-auto px-5 sm:px-8 py-10",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[i.jsx(I1,{}),i.jsxs("div",{className:"flex items-center gap-6 text-sm text-slate-500",children:[i.jsx(st,{to:"/register",className:"hover:text-slate-900 transition-colors",children:"Sign Up"}),i.jsx("span",{className:"text-slate-200",children:""}),i.jsx(st,{to:"/login",className:"hover:text-slate-900 transition-colors",children:"Sign In"}),i.jsx("span",{className:"text-slate-200",children:""}),i.jsx("a",{href:"#how-it-works",className:"hover:text-slate-900 transition-colors",children:"How It Works"})]}),i.jsxs("p",{className:"text-xs text-slate-400",children:[" ",new Date().getFullYear()," SpotBookie. All rights reserved."]})]})})})]})}function NM(s){return s.toLowerCase().trim().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function jM(){const s=Do(),[e,t]=N.useState(""),[r,o]=N.useState(""),[u,d]=N.useState(""),[p,g]=N.useState(""),[x,b]=N.useState(!1),w=NM(e),j=async T=>{if(T.preventDefault(),g(""),!w){g("Please enter a valid shop name");return}if(u.length<6){g("Password must be at least 6 characters");return}b(!0);try{const L=Ms(tt(je,"shops"),ps("slug","==",w));if(!(await Os(L)).empty){g("A shop with that name already exists. Please choose a different name."),b(!1);return}const U=(await TC(pl,r,u)).user;await Nr(tt(je,"shops"),{name:e.trim(),slug:w,ownerUid:U.uid,ownerEmail:r,createdAt:Wg()}),s(`/shop/${w}/dashboard`)}catch(L){switch(L.code){case"auth/email-already-in-use":g("An account with this email already exists");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/weak-password":g("Password must be at least 6 characters");break;default:g("Registration failed. Please try again.")}}finally{b(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2.5",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(da,{className:"w-5 h-5 text-white"})}),i.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Create your shop"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Set up your booking page in seconds  it's free"})]}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Shop Name"}),i.jsx("input",{type:"text",value:e,onChange:T=>{t(T.target.value),g("")},placeholder:"Jane's Salon",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),w&&i.jsxs("p",{className:"mt-1.5 text-xs text-slate-400",children:["Your page: ",i.jsxs("span",{className:"font-mono text-blue-600 font-medium",children:["bookflow.app/shop/",w]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:r,onChange:T=>{o(T.target.value),g("")},placeholder:"you@example.com",required:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),i.jsx("input",{type:"password",value:u,onChange:T=>{d(T.target.value),g("")},placeholder:"At least 6 characters",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&i.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",p]})]}),i.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Creating your shop"]}):i.jsxs(i.Fragment,{children:["Create Shop",i.jsx(_o,{className:"w-4 h-4"})]})})]}),i.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Already have an account?"," ",i.jsx(st,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Sign in"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(st,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function SM({user:s}){const e=Do(),[t,r]=N.useState(""),[o,u]=N.useState(""),[d,p]=N.useState(""),[g,x]=N.useState(!1);N.useState(()=>{if(!s)return;(async()=>{const j=Ms(tt(je,"shops"),ps("ownerUid","==",s.uid)),T=await Os(j);if(!T.empty){const L=T.docs[0].data();e(`/shop/${L.slug}/dashboard`,{replace:!0})}})()},[s,e]);const b=async w=>{w.preventDefault(),p(""),x(!0);try{const T=(await tN(pl,t,o)).user,L=Ms(tt(je,"shops"),ps("ownerUid","==",T.uid)),V=await Os(L);if(V.empty){p("No shop found for this account. Need to create one?"),await pl.signOut(),x(!1);return}const O=V.docs[0].data();e(`/shop/${O.slug}/dashboard`,{replace:!0})}catch(j){switch(j.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":p("Invalid email or password");break;case"auth/invalid-email":p("Please enter a valid email address");break;case"auth/too-many-requests":p("Too many failed attempts. Please try again later.");break;default:p("Login failed. Please try again.")}u("")}finally{x(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2.5",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(da,{className:"w-5 h-5 text-white"})}),i.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:t,onChange:w=>{r(w.target.value),p("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),i.jsx("input",{type:"password",value:o,onChange:w=>{u(w.target.value),p("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${d?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),d&&i.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",d]})]}),i.jsx("button",{type:"submit",disabled:g,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:g?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):i.jsxs(i.Fragment,{children:["Sign In",i.jsx(_o,{className:"w-4 h-4"})]})})]}),i.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",i.jsx(st,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(st,{to:"/",className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back to home"]})})]})})}function fj({availableDates:s,selectedDate:e,onSelectDate:t}){const[r,o]=N.useState(new Date),u=U=>{const G=U.getFullYear(),q=U.getMonth(),ae=new Date(G,q,1),W=new Date(G,q+1,0).getDate(),S=ae.getDay();return{daysInMonth:W,startingDayOfWeek:S,year:G,month:q}},{daysInMonth:d,startingDayOfWeek:p,year:g,month:x}=u(r),b=()=>{o(new Date(r.getFullYear(),r.getMonth()-1))},w=()=>{o(new Date(r.getFullYear(),r.getMonth()+1))},j=U=>{const G=`${g}-${String(x+1).padStart(2,"0")}-${String(U).padStart(2,"0")}`;return s.includes(G)},T=U=>`${g}-${String(x+1).padStart(2,"0")}-${String(U).padStart(2,"0")}`===e,L=U=>{if(j(U)){const G=`${g}-${String(x+1).padStart(2,"0")}-${String(U).padStart(2,"0")}`;t(G)}},V=["January","February","March","April","May","June","July","August","September","October","November","December"],O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return i.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-5 sm:p-6 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-center mb-5",children:[i.jsx("button",{onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(ij,{className:"w-5 h-5 text-slate-600"})}),i.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[V[x]," ",g]}),i.jsx("button",{onClick:w,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(Rf,{className:"w-5 h-5 text-slate-600"})})]}),i.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:O.map(U=>i.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:U},U))}),i.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:p}).map((U,G)=>i.jsx("div",{},`empty-${G}`)),Array.from({length:d}).map((U,G)=>{const q=G+1,ae=j(q),ce=T(q),W=new Date,S=W.getDate()===q&&W.getMonth()===x&&W.getFullYear()===g;return i.jsxs("button",{onClick:()=>L(q),disabled:!ae,className:`
                relative p-2.5 sm:p-3 text-center rounded-lg text-sm font-semibold transition-all duration-200
                ${ce?"bg-blue-600 text-white shadow-md shadow-blue-600/30":ae?"bg-emerald-50 text-emerald-700 border border-emerald-200 hover:bg-emerald-100 hover:border-emerald-300 cursor-pointer":S?"text-slate-900 font-bold":"text-slate-300 cursor-not-allowed"}
              `,children:[q,S&&!ce&&i.jsx("span",{className:"absolute bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]},q)})]}),i.jsxs("div",{className:"mt-4 flex gap-5 text-xs text-slate-500",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 bg-emerald-50 border border-emerald-200 rounded"}),i.jsx("span",{children:"Available"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded"}),i.jsx("span",{children:"Selected"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-1 h-1 bg-blue-500 rounded-full"}),i.jsx("span",{children:"Today"})]})]})]})}const EM=[{key:"monday",label:"Mon"},{key:"tuesday",label:"Tue"},{key:"wednesday",label:"Wed"},{key:"thursday",label:"Thu"},{key:"friday",label:"Fri"},{key:"saturday",label:"Sat"},{key:"sunday",label:"Sun"}],D1=[{key:"morning",label:"Morning (9AM12PM)",start:"09:00",end:"12:00"},{key:"afternoon",label:"Afternoon (12PM5PM)",start:"12:00",end:"17:00"},{key:"evening",label:"Evening (5PM9PM)",start:"17:00",end:"21:00"},{key:"any",label:"Any time",start:"00:00",end:"23:59"}];function TM(){const s="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let e="WL";for(let t=0;t<4;t++)e+=s.charAt(Math.floor(Math.random()*s.length));return e}function M1({shopId:s,slug:e,selectedService:t,selectedStaff:r,staffMembers:o,preferredDate:u,onSuccess:d,onCancel:p}){const[g,x]=N.useState({name:"",email:"",phone:""}),[b,w]=N.useState([]),[j,T]=N.useState("any"),[L,V]=N.useState(!1),[O,U]=N.useState(!1),[G,q]=N.useState(""),ae=W=>{w(S=>S.includes(W)?S.filter(A=>A!==W):[...S,W])},ce=async W=>{W.preventDefault(),V(!0);try{const S=TM(),A=D1.find($=>$.key===j),k=r&&r!=="any"?r.id:"any",B=r&&r!=="any"?r.name:"Any Available",M={clientName:g.name,clientEmail:g.email,clientPhone:g.phone,serviceId:t?.id||null,serviceName:t?.name||"Any Service",staffId:k,staffName:B,preferredDate:u||null,preferredDays:b.length>0?b:null,preferredTimeRange:A?{start:A.start,end:A.end}:null,status:"waiting",refCode:S,createdAt:new Date().toISOString(),notifiedAt:null,notifiedSlot:null};await Nr(tt(je,"shops",s,"waitlist"),M),q(S),U(!0),d&&d(S)}catch(S){console.error("Waitlist error:",S)}finally{V(!1)}};return O?i.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg shadow-blue-100/50 p-8 text-center animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Kn,{className:"w-8 h-8 text-blue-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"You're on the Waitlist!"}),i.jsxs("p",{className:"text-slate-600 mb-4",children:["We'll notify you when a slot opens up",t?` for ${t.name}`:"","."]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your waitlist reference"}),i.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:G})]}),i.jsxs("a",{href:`#/shop/${e}/waitlist/${G}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(un,{className:"w-4 h-4"}),"Check Waitlist Status"]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to check your position and get notified"})]}):i.jsxs("div",{className:"bg-white rounded-2xl border border-blue-200 shadow-lg p-6 animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:i.jsx(Zh,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Join the Waitlist"}),i.jsx("p",{className:"text-sm text-slate-500",children:"We'll notify you when a slot opens up"})]})]}),i.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),i.jsx("input",{type:"text",value:g.name,onChange:W=>x({...g,name:W.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:g.email,onChange:W=>x({...g,email:W.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),i.jsx("input",{type:"tel",value:g.phone,onChange:W=>x({...g,phone:W.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Preferred Days ",i.jsx("span",{className:"text-slate-400 font-normal",children:"(optional)"})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:EM.map(W=>i.jsx("button",{type:"button",onClick:()=>ae(W.key),className:`px-3.5 py-2 rounded-lg text-sm font-semibold transition-all border ${b.includes(W.key)?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:W.label},W.key))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Preferred Time"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:D1.map(W=>i.jsx("button",{type:"button",onClick:()=>T(W.key),className:`px-3.5 py-2.5 rounded-lg text-sm font-medium transition-all border text-left ${j===W.key?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-slate-600 border-slate-200 hover:border-blue-300"}`,children:W.label},W.key))})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:L,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0",children:L?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Joining"]}):i.jsxs(i.Fragment,{children:[i.jsx(Zh,{className:"w-4 h-4"}),"Join Waitlist"]})}),p&&i.jsx("button",{type:"button",onClick:p,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]})}function AM(){return i.jsxs("div",{className:"flex items-end gap-2 mb-3",children:[i.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0",children:i.jsx(tf,{className:"w-3.5 h-3.5 text-white"})}),i.jsx("div",{className:"bg-slate-100 rounded-2xl rounded-bl-md px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),i.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),i.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}function CM({message:s,onSelectService:e,onQuickReply:t}){const r=s.sender==="bot";return i.jsxs("div",{className:`flex items-end gap-2 mb-3 ${r?"":"flex-row-reverse"}`,children:[r&&i.jsx("div",{className:"w-7 h-7 rounded-full bg-blue-600 flex items-center justify-center flex-shrink-0",children:i.jsx(tf,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("div",{className:"max-w-[85%] space-y-2",children:[i.jsx("div",{className:`px-4 py-2.5 text-sm leading-relaxed whitespace-pre-line ${r?"bg-slate-100 text-slate-800 rounded-2xl rounded-bl-md":"bg-blue-600 text-white rounded-2xl rounded-br-md"}`,children:s.text}),s.serviceCards&&s.serviceCards.length>0&&i.jsx("div",{className:"space-y-1.5",children:s.serviceCards.map(o=>i.jsxs("button",{onClick:()=>e(o),className:"w-full flex items-center justify-between gap-2 px-3.5 py-2.5 bg-white border border-slate-200 hover:border-blue-400 rounded-xl text-left transition-all hover:shadow-sm group",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-800 group-hover:text-blue-700 truncate",children:o.name}),i.jsxs("p",{className:"text-xs text-slate-500",children:[Ch(o.duration),"  ",q0(o.price)]})]}),i.jsxs("span",{className:"text-xs font-semibold text-blue-600 whitespace-nowrap flex items-center gap-0.5",children:["Book ",i.jsx(Rf,{className:"w-3 h-3"})]})]},o.id))}),s.quickReplies&&s.quickReplies.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1.5 pt-1",children:s.quickReplies.map((o,u)=>i.jsx("button",{onClick:()=>t(o),className:"px-3 py-1.5 text-xs font-medium text-blue-600 bg-white border border-blue-200 hover:bg-blue-50 hover:border-blue-400 rounded-full transition-all",children:o},u))})]})]})}function q0(s){return s==null?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(s)}function Ch(s){if(!s)return"";if(s<60)return`${s} min`;const e=Math.floor(s/60),t=s%60;return t?`${e}h ${t}m`:`${e} hour${e>1?"s":""}`}function kM(s,{services:e,staffMembers:t,shop:r}){const o=s.toLowerCase().trim(),u=r?.name||"our shop";if(/^(hi|hello|hey|howdy|sup|yo|hiya|good\s*(morning|afternoon|evening))/.test(o))return{text:`Hi!  I'm here to help you book an appointment at ${u}. What are you looking for?`,quickReplies:["View Services","View Staff","How to Book"]};if(/how (do i|to|can i) book|help.*(book|appoint)|booking help/i.test(o))return{text:`Booking is easy! Here's how:

1 Choose a service
2 Pick your stylist
3 Select a date & time
4 Fill in your details

That's it! Would you like to start?`,quickReplies:["View Services","View Staff"]};if(/what (services|do you offer)|menu|prices|how much|service list|your services/i.test(o)||o==="view services")return!e||e.length===0?{text:"We don't have any services listed right now. Please check back later!"}:{text:`Here are our services:

${e.map(p=>` ${p.name}  ${Ch(p.duration)}  ${q0(p.price)}`).join(`
`)}

Would you like to book one of these? Just tap below! `,serviceCards:e};if(e&&e.length>0){const d=e.find(p=>{const g=p.name.toLowerCase();return o.includes(g)||g.includes(o)});if(d&&o.length>2)return{text:`Great choice! Here are the details for **${d.name}**:

 Duration: ${Ch(d.duration)}
 Price: ${q0(d.price)}${d.description?`
 ${d.description}`:""}

Would you like to book this service? Tap "Book" below!`,serviceCards:[d],quickReplies:["View All Services","View Staff"]}}if(/how long|how much time|duration/i.test(o))return!e||e.length===0?{text:"No services are listed right now. Check back soon!"}:{text:`Here's how long each service takes:

${e.map(p=>` ${p.name}: ${Ch(p.duration)}`).join(`
`)}`,quickReplies:["View Services","How to Book"]};if(/who works|stylists?|staff|team|barber|who('s| is) (here|available)|your (team|people)/i.test(o)||o==="view staff")return!t||t.length===0?{text:"We don't have any team members listed right now."}:{text:`Meet our team! 

${t.map(p=>{let g=` ${p.name}`;return p.role&&(g+=`  ${p.role}`),p.bio&&(g+=`
  "${p.bio.slice(0,80)}${p.bio.length>80?"":""}"`),g}).join(`
`)}

You can pick your preferred stylist during booking.`,quickReplies:["View Services","How to Book"]};if(/available|open slot|when can i|next available|free slot|any opening/i.test(o)){const d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],p=new Set;return t&&t.length>0&&t.forEach(x=>{x.weeklyHours&&Object.entries(x.weeklyHours).forEach(([b,w])=>{w&&w.enabled&&p.add(b)})}),{text:`You can check available times by selecting a service and date in the booking flow above. We're generally available on ${p.size>0?[...p].sort((x,b)=>d.indexOf(x)-d.indexOf(b)).join(", "):"most days"}. `,quickReplies:["View Services","How to Book"]}}if(/hours|when are you open|business hours|open hours|what time|operating/i.test(o)){const d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],p={};if(t&&t.length>0&&t.forEach(g=>{g.weeklyHours&&Object.entries(g.weeklyHours).forEach(([x,b])=>{b&&b.enabled&&b.start&&b.end&&(p[x]?(b.start<p[x].start&&(p[x].start=b.start),b.end>p[x].end&&(p[x].end=b.end)):p[x]={start:b.start,end:b.end})})}),Object.keys(p).length>0){const g=b=>{const[w,j]=b.split(":"),T=parseInt(w),L=T>=12?"PM":"AM";return`${T%12||12}:${j} ${L}`};return{text:`Here are our general hours:

${d.filter(b=>p[b]).map(b=>` ${b}: ${g(p[b].start)}  ${g(p[b].end)}`).join(`
`)}

Hours may vary by stylist. Select a service to see exact availability.`,quickReplies:["View Services","View Staff"]}}return{text:"Our hours vary by stylist. You can see exact availability by selecting a service above.",quickReplies:["View Services","How to Book"]}}return/phone|address|contact|where|location|email|reach/i.test(o)?{text:"For contact information, please reach out to the shop directly. You can also find us through the booking confirmation email after you book! ",quickReplies:["View Services","How to Book"]}:/cancel|reschedule|change my (booking|appointment)|modify/i.test(o)?{text:"You can manage your booking using the reference code you received. Go to your confirmation email and click 'Manage Booking' to reschedule or cancel. ",quickReplies:["How to Book","View Services"]}:/waitlist|no availability|fully booked|no slots|all booked|sold out/i.test(o)?{text:"If there are no available slots, you can join our waitlist and we'll notify you when something opens up! Look for the 'Join Waitlist' button when viewing available times. ",quickReplies:["View Services","How to Book"]}:/^(thanks?|thank you|thx|ty|cheers|appreciate)/i.test(o)?{text:"You're welcome!  Let me know if you need anything else.",quickReplies:["View Services","View Staff","How to Book"]}:{text:"I'm not sure about that. You can browse our services above, or try asking about our services, staff, or availability! ",quickReplies:["View Services","View Staff","How to Book"]}}function RM({services:s,staffMembers:e,shop:t,onSelectService:r}){const[o,u]=N.useState(!1),[d,p]=N.useState([]),[g,x]=N.useState(""),[b,w]=N.useState(!1),[j,T]=N.useState(!1),[L,V]=N.useState(!1),[O,U]=N.useState(!1),G=N.useRef(null),q=N.useRef(null),ae=t?.name||"our shop";N.useEffect(()=>{G.current?.scrollIntoView({behavior:"smooth"})},[d,b]),N.useEffect(()=>{const M=setTimeout(()=>{!o&&!O&&V(!0)},3e3),$=setTimeout(()=>{j||(T(!0),V(!1),u(!0),p([{id:"welcome",sender:"bot",text:`Hi!  Welcome to ${ae}. I can help you find the right service and book an appointment. What are you looking for?`,quickReplies:["View Services","View Staff","How to Book"]}]))},5e3);return()=>{clearTimeout(M),clearTimeout($)}},[]),N.useEffect(()=>{o&&setTimeout(()=>q.current?.focus(),100)},[o]);const ce=N.useCallback(()=>{V(!1),U(!0),u(!0),d.length===0&&p([{id:"welcome",sender:"bot",text:`Hi!  Welcome to ${ae}. I can help you find the right service and book an appointment. What are you looking for?`,quickReplies:["View Services","View Staff","How to Book"]}])},[d.length,ae]),W=N.useCallback(M=>{w(!0);const $=400+Math.random()*600;setTimeout(()=>{const R=kM(M,{services:s,staffMembers:e,shop:t});p(F=>[...F,{id:`bot-${Date.now()}`,sender:"bot",text:R.text,serviceCards:R.serviceCards||null,quickReplies:R.quickReplies||null}]),w(!1)},$)},[s,e,t]),S=N.useCallback(()=>{const M=g.trim();M&&(p($=>[...$,{id:`user-${Date.now()}`,sender:"user",text:M}]),x(""),W(M))},[g,W]),A=N.useCallback(M=>{p($=>[...$,{id:`user-${Date.now()}`,sender:"user",text:M}]),W(M)},[W]),k=N.useCallback(M=>{r&&(r(M),p($=>[...$,{id:`bot-${Date.now()}`,sender:"bot",text:`Great! I've selected "${M.name}" for you. You can now pick your stylist and time above. `}]),setTimeout(()=>u(!1),1500))},[r]),B=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),S())};return i.jsxs(i.Fragment,{children:[L&&!o&&i.jsxs("div",{className:"fixed bottom-24 right-5 z-50 animate-fade-in",children:[i.jsx("button",{onClick:ce,className:"bg-white border border-slate-200 shadow-lg rounded-2xl rounded-br-md px-4 py-3 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-all max-w-[220px]",children:"Need help booking? "}),i.jsx("button",{onClick:()=>{V(!1),U(!0)},className:"absolute -top-2 -right-2 w-5 h-5 bg-slate-200 hover:bg-slate-300 rounded-full flex items-center justify-center text-slate-500 transition-colors",children:i.jsx(ha,{className:"w-3 h-3"})})]}),o&&i.jsxs("div",{className:`fixed bottom-20 right-5 z-50 bg-white rounded-2xl shadow-2xl border border-slate-200 flex flex-col overflow-hidden animate-scale-in
                     w-[calc(100vw-2.5rem)] max-w-[380px] h-[min(500px,calc(100vh-7rem))]
                     sm:w-[380px] sm:right-5 sm:bottom-20`,style:{transformOrigin:"bottom right"},children:[i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(tf,{className:"w-4 h-4"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-bold leading-tight",children:"SpotBookie Assistant"}),i.jsx("p",{className:"text-[11px] text-blue-100",children:"Ask me anything about booking"})]})]}),i.jsx("button",{onClick:()=>u(!1),className:"w-8 h-8 hover:bg-white/20 rounded-full flex items-center justify-center transition-colors","aria-label":"Close chat",children:i.jsx(ha,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-0 bg-slate-50/50",children:[d.map(M=>i.jsx(CM,{message:M,onSelectService:k,onQuickReply:A},M.id)),b&&i.jsx(AM,{}),i.jsx("div",{ref:G})]}),i.jsxs("div",{className:"flex items-center gap-2 px-3 py-3 border-t border-slate-200 bg-white flex-shrink-0",children:[i.jsx("input",{ref:q,type:"text",value:g,onChange:M=>x(M.target.value),onKeyDown:B,placeholder:"Type a message",className:"flex-1 px-3.5 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all placeholder:text-slate-400"}),i.jsx("button",{onClick:S,disabled:!g.trim(),className:"w-10 h-10 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-200 disabled:cursor-not-allowed text-white disabled:text-slate-400 rounded-xl flex items-center justify-center transition-all flex-shrink-0","aria-label":"Send message",children:i.jsx(Ah,{className:"w-4 h-4"})})]})]}),i.jsx("button",{onClick:()=>{o?u(!1):ce()},className:`fixed bottom-5 right-5 z-50 w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 hover:scale-105 hover:shadow-xl ${o?"bg-slate-700 hover:bg-slate-800":"bg-blue-600 hover:bg-blue-700 chat-bubble-pulse"}`,"aria-label":o?"Close chat assistant":"Open chat assistant",children:o?i.jsx(ha,{className:"w-6 h-6 text-white"}):i.jsx(tf,{className:"w-6 h-6 text-white"})})]})}var t0={exports:{}},n0,O1;function IM(){if(O1)return n0;O1=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return n0=s,n0}var s0,P1;function DM(){if(P1)return s0;P1=1;var s=IM();function e(){}function t(){}return t.resetWarningCache=e,s0=function(){function r(d,p,g,x,b,w){if(w!==s){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}r.isRequired=r;function o(){return r}var u={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return u.PropTypes=u,u},s0}var V1;function MM(){return V1||(V1=1,t0.exports=DM()()),t0.exports}var OM=MM();const $t=G0(OM);function L1(s,e){var t=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),t.push.apply(t,r)}return t}function U1(s){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?L1(Object(t),!0).forEach(function(r){mj(s,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(t)):L1(Object(t)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(t,r))})}return s}function kh(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kh=function(e){return typeof e}:kh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kh(s)}function mj(s,e,t){return e in s?Object.defineProperty(s,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):s[e]=t,s}function PM(s,e){if(s==null)return{};var t={},r=Object.keys(s),o,u;for(u=0;u<r.length;u++)o=r[u],!(e.indexOf(o)>=0)&&(t[o]=s[o]);return t}function VM(s,e){if(s==null)return{};var t=PM(s,e),r,o;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(s);for(o=0;o<u.length;o++)r=u[o],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(t[r]=s[r])}return t}function pj(s,e){return LM(s)||UM(s,e)||BM(s,e)||zM()}function LM(s){if(Array.isArray(s))return s}function UM(s,e){var t=s&&(typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"]);if(t!=null){var r=[],o=!0,u=!1,d,p;try{for(t=t.call(s);!(o=(d=t.next()).done)&&(r.push(d.value),!(e&&r.length===e));o=!0);}catch(g){u=!0,p=g}finally{try{!o&&t.return!=null&&t.return()}finally{if(u)throw p}}return r}}function BM(s,e){if(s){if(typeof s=="string")return B1(s,e);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B1(s,e)}}function B1(s,e){(e==null||e>s.length)&&(e=s.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=s[t];return r}function zM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ts=function(e,t,r){var o=!!r,u=Ht.useRef(r);Ht.useEffect(function(){u.current=r},[r]),Ht.useEffect(function(){if(!o||!e)return function(){};var d=function(){u.current&&u.current.apply(u,arguments)};return e.on(t,d),function(){e.off(t,d)}},[o,t,e,u])},$0=function(e){var t=Ht.useRef(e);return Ht.useEffect(function(){t.current=e},[e]),t.current},ko=function(e){return e!==null&&kh(e)==="object"},FM=function(e){return ko(e)&&typeof e.then=="function"},qM=function(e){return ko(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},z1="[object Object]",$M=function s(e,t){if(!ko(e)||!ko(t))return e===t;var r=Array.isArray(e),o=Array.isArray(t);if(r!==o)return!1;var u=Object.prototype.toString.call(e)===z1,d=Object.prototype.toString.call(t)===z1;if(u!==d)return!1;if(!u&&!r)return e===t;var p=Object.keys(e),g=Object.keys(t);if(p.length!==g.length)return!1;for(var x={},b=0;b<p.length;b+=1)x[p[b]]=!0;for(var w=0;w<g.length;w+=1)x[g[w]]=!0;var j=Object.keys(x);if(j.length!==p.length)return!1;var T=e,L=t,V=function(U){return s(T[U],L[U])};return j.every(V)},gj=function(e,t,r){return ko(e)?Object.keys(e).reduce(function(o,u){var d=!ko(t)||!$M(e[u],t[u]);return r.includes(u)?(d&&console.warn("Unsupported prop change: options.".concat(u," is not a mutable property.")),o):d?U1(U1({},o||{}),{},mj({},u,e[u])):o},null):null},xj="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",F1=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xj;if(e===null||qM(e))return e;throw new Error(t)},HM=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xj;if(FM(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(o){return F1(o,t)})};var r=F1(e,t);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},GM=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.6.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.6.0",url:"https://stripe.com/docs/stripe-js/react"}))},Mf=Ht.createContext(null);Mf.displayName="ElementsContext";var bj=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},yj=function(e){var t=e.stripe,r=e.options,o=e.children,u=Ht.useMemo(function(){return HM(t)},[t]),d=Ht.useState(function(){return{stripe:u.tag==="sync"?u.stripe:null,elements:u.tag==="sync"?u.stripe.elements(r):null}}),p=pj(d,2),g=p[0],x=p[1];Ht.useEffect(function(){var j=!0,T=function(V){x(function(O){return O.stripe?O:{stripe:V,elements:V.elements(r)}})};return u.tag==="async"&&!g.stripe?u.stripePromise.then(function(L){L&&j&&T(L)}):u.tag==="sync"&&!g.stripe&&T(u.stripe),function(){j=!1}},[u,g,r]);var b=$0(t);Ht.useEffect(function(){b!==null&&b!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[b,t]);var w=$0(r);return Ht.useEffect(function(){if(g.elements){var j=gj(r,w,["clientSecret","fonts"]);j&&g.elements.update(j)}},[r,w,g.elements]),Ht.useEffect(function(){GM(g.stripe)},[g.stripe]),Ht.createElement(Mf.Provider,{value:g},o)};yj.propTypes={stripe:$t.any,options:$t.object};var YM=function(e){var t=Ht.useContext(Mf);return bj(t,e)},WM=function(){var e=YM("calls useElements()"),t=e.elements;return t};$t.func.isRequired;var vj=Ht.createContext(null);vj.displayName="CheckoutContext";$t.any,$t.shape({clientSecret:$t.oneOfType([$t.string,$t.instanceOf(Promise)]).isRequired,elementsOptions:$t.object}).isRequired;var H0=function(e){var t=Ht.useContext(vj),r=Ht.useContext(Mf);if(t){if(r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t}else return bj(r,e)},KM=["mode"],QM=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},bs=function(e,t){var r="".concat(QM(e),"Element"),o=function(g){var x=g.id,b=g.className,w=g.options,j=w===void 0?{}:w,T=g.onBlur,L=g.onFocus,V=g.onReady,O=g.onChange,U=g.onEscape,G=g.onClick,q=g.onLoadError,ae=g.onLoaderStart,ce=g.onNetworksChange,W=g.onConfirm,S=g.onCancel,A=g.onShippingAddressChange,k=g.onShippingRateChange,B=g.onSavedPaymentMethodRemove,M=g.onSavedPaymentMethodUpdate,$=H0("mounts <".concat(r,">")),R="elements"in $?$.elements:null,F="checkoutState"in $?$.checkoutState:null,D=F?.type==="success"||F?.type==="loading"?F.sdk:null,I=Ht.useState(null),K=pj(I,2),oe=K[0],Te=K[1],ve=Ht.useRef(null),P=Ht.useRef(null);ts(oe,"blur",T),ts(oe,"focus",L),ts(oe,"escape",U),ts(oe,"click",G),ts(oe,"loaderror",q),ts(oe,"loaderstart",ae),ts(oe,"networkschange",ce),ts(oe,"confirm",W),ts(oe,"cancel",S),ts(oe,"shippingaddresschange",A),ts(oe,"shippingratechange",k),ts(oe,"savedpaymentmethodremove",B),ts(oe,"savedpaymentmethodupdate",M),ts(oe,"change",O);var Z;V&&(e==="expressCheckout"?Z=V:Z=function(){V(oe)}),ts(oe,"ready",Z),Ht.useLayoutEffect(function(){if(ve.current===null&&P.current!==null&&(R||D)){var xe=null;if(D)switch(e){case"paymentForm":xe=D.createPaymentFormElement(j);break;case"payment":xe=D.createPaymentElement(j);break;case"address":if("mode"in j){var be=j.mode,De=VM(j,KM);if(be==="shipping")xe=D.createShippingAddressElement(De);else if(be==="billing")xe=D.createBillingAddressElement(De);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":xe=D.createExpressCheckoutElement(j);break;case"currencySelector":xe=D.createCurrencySelectorElement();break;case"taxId":xe=D.createTaxIdElement(j);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else R&&(xe=R.create(e,j));ve.current=xe,Te(xe),xe&&xe.mount(P.current)}},[R,D,j]);var ue=$0(j);return Ht.useEffect(function(){if(ve.current){var xe=gj(j,ue,["paymentRequest"]);xe&&"update"in ve.current&&ve.current.update(xe)}},[j,ue]),Ht.useLayoutEffect(function(){return function(){if(ve.current&&typeof ve.current.destroy=="function")try{ve.current.destroy(),ve.current=null}catch{}}},[]),Ht.createElement("div",{id:x,className:b,ref:P})},u=function(g){H0("mounts <".concat(r,">"));var x=g.id,b=g.className;return Ht.createElement("div",{id:x,className:b})},d=t?u:o;return d.propTypes={id:$t.string,className:$t.string,onChange:$t.func,onBlur:$t.func,onFocus:$t.func,onReady:$t.func,onEscape:$t.func,onClick:$t.func,onLoadError:$t.func,onLoaderStart:$t.func,onNetworksChange:$t.func,onConfirm:$t.func,onCancel:$t.func,onShippingAddressChange:$t.func,onShippingRateChange:$t.func,onSavedPaymentMethodRemove:$t.func,onSavedPaymentMethodUpdate:$t.func,options:$t.object},d.displayName=r,d.__elementType=e,d},ys=typeof window>"u",XM=Ht.createContext(null);XM.displayName="EmbeddedCheckoutProviderContext";var JM=function(){var e=H0("calls useStripe()"),t=e.stripe;return t};bs("auBankAccount",ys);var q1=bs("card",ys);bs("cardNumber",ys);bs("cardExpiry",ys);bs("cardCvc",ys);bs("iban",ys);bs("payment",ys);bs("expressCheckout",ys);bs("paymentRequestButton",ys);bs("linkAuthentication",ys);bs("address",ys);bs("shippingAddress",ys);bs("paymentMethodMessaging",ys);bs("taxId",ys);function Rh(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rh=function(e){return typeof e}:Rh=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(s)}var wj="clover",ZM=function(e){return e===3?"v3":e},_j="https://js.stripe.com",eO="".concat(_j,"/").concat(wj,"/stripe.js"),tO=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,nO=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var sO=function(e){return tO.test(e)||nO.test(e)},aO=function(){for(var e=document.querySelectorAll('script[src^="'.concat(_j,'"]')),t=0;t<e.length;t++){var r=e[t];if(sO(r.src))return r}return null},$1=function(e){var t="",r=document.createElement("script");r.src="".concat(eO).concat(t);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(r),r},rO=function(e,t){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.7.0",startTime:t})},Fc=null,uh=null,dh=null,iO=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}},lO=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}},oO=function(e){return Fc!==null?Fc:(Fc=new Promise(function(t,r){if(typeof window>"u"||typeof document>"u"){t(null);return}if(window.Stripe){t(window.Stripe);return}try{var o=aO();if(!(o&&e)){if(!o)o=$1(e);else if(o&&dh!==null&&uh!==null){var u;o.removeEventListener("load",dh),o.removeEventListener("error",uh),(u=o.parentNode)===null||u===void 0||u.removeChild(o),o=$1(e)}}dh=lO(t,r),uh=iO(r),o.addEventListener("load",dh),o.addEventListener("error",uh)}catch(d){r(d);return}}),Fc.catch(function(t){return Fc=null,Promise.reject(t)}))},cO=function(e,t,r){if(e===null)return null;var o=t[0];if(typeof o!="string")throw new Error("Expected publishable key to be of type string, got type ".concat(Rh(o)," instead."));var u=o.match(/^pk_test/),d=ZM(e.version),p=wj;u&&d!==p&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("8.7.0"," expected Stripe.js@").concat(p,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var g=e.apply(void 0,t);return rO(g,r),g},qc,Nj=!1,jj=function(){return qc||(qc=oO(null).catch(function(e){return qc=null,Promise.reject(e)}),qc)};Promise.resolve().then(function(){return jj()}).catch(function(s){Nj||console.warn(s)});var uO=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];Nj=!0;var o=Date.now();return jj().then(function(u){return cO(u,t,o)})};const dO=uO("pk_test_51NXZytLhwB1Jyzw82kEuknbGp3F4vTdnqmBrVmzsHqKYeldrpbiWInM6U2v2ojnsLW4u251zbpRk2UiXnwBgiQZo00bK99q5kj"),hO="https://us-central1-scheduler-65e51.cloudfunctions.net",fO={style:{base:{fontSize:"16px",color:"#1e293b",fontFamily:"system-ui, -apple-system, sans-serif","::placeholder":{color:"#94a3b8"}},invalid:{color:"#ef4444",iconColor:"#ef4444"}}};function mO({amount:s,onSuccess:e,onCancel:t,clientInfo:r,serviceName:o,shopId:u,bookingRefCode:d,shopHasConnect:p=!0}){const g=JM(),x=WM(),[b,w]=N.useState(!1),[j,T]=N.useState(null),[L,V]=N.useState(!1),O=async G=>{if(G.preventDefault(),!g||!x)return;w(!0),T(null);const q=x.getElement(q1),{error:ae,paymentMethod:ce}=await g.createPaymentMethod({type:"card",card:q,billing_details:{name:r.name,email:r.email,phone:r.phone}});if(ae){T(ae.message),w(!1);return}if(p&&u)try{const W=await fetch(`${hO}/createDepositPaymentIntent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:u,amount:s,serviceName:o,clientName:r.name,clientEmail:r.email,bookingRefCode:d,paymentMethodId:ce.id})}),S=await W.json();if(!W.ok){S.needsConnect?T("This shop has not connected Stripe yet. Please contact the shop owner."):S.needsOnboarding?T("This shop is still setting up payments. Please try again later."):T(S.error||"Payment failed. Please try again."),w(!1);return}console.log("Payment processed:",S.paymentIntentId),w(!1),e({paymentMethodId:ce.id,paymentIntentId:S.paymentIntentId,last4:ce.card.last4,brand:ce.card.brand,amount:S.amount})}catch(W){console.error("Payment error:",W),T("Payment failed. Please try again."),w(!1)}else console.log("Payment method created (no Connect):",ce.id),await new Promise(W=>setTimeout(W,500)),w(!1),e({paymentMethodId:ce.id,last4:ce.card.last4,brand:ce.card.brand})},U=G=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(G/100);return i.jsxs("form",{onSubmit:O,className:"space-y-5",children:[i.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-500 rounded-xl p-5 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-emerald-100 text-sm font-medium",children:["Deposit for ",o]}),i.jsx("p",{className:"text-3xl font-bold mt-1",children:U(s)})]}),i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:i.jsx(gr,{className:"w-6 h-6"})})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Card Details"}),i.jsx("div",{className:"p-4 border-2 border-slate-200 rounded-xl focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-500/20 transition-all bg-white",children:i.jsx(q1,{options:fO,onChange:G=>{V(G.complete),G.error?T(G.error.message):T(null)}})})]}),j&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:[i.jsx(gu,{className:"w-4 h-4 flex-shrink-0"}),j]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[i.jsx(ef,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Your payment is secured with 256-bit encryption"})]}),i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:[i.jsx(gu,{className:"w-4 h-4 flex-shrink-0"}),i.jsxs("span",{children:[i.jsx("strong",{children:"Test Mode:"})," Use card number ",i.jsx("code",{className:"bg-amber-100 px-1 rounded",children:"4242 4242 4242 4242"})," with any future date and CVC."]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:b||!g||!L,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold shadow-md shadow-emerald-600/20 hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:b?i.jsxs(i.Fragment,{children:[i.jsx(Qs,{className:"w-4 h-4 animate-spin"}),"Processing"]}):i.jsxs(i.Fragment,{children:[i.jsx(ef,{className:"w-4 h-4"}),"Pay ",U(s)]})}),i.jsx("button",{type:"button",onClick:t,disabled:b,className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200 disabled:opacity-50",children:"Back"})]})]})}function pO({amount:s,onSuccess:e,onCancel:t,clientInfo:r,serviceName:o,shopId:u,bookingRefCode:d,shopHasConnect:p=!0}){return i.jsx(yj,{stripe:dO,children:i.jsx(mO,{amount:s,onSuccess:e,onCancel:t,clientInfo:r,serviceName:o,shopId:u,bookingRefCode:d,shopHasConnect:p})})}const gO=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function go(s){const[e,t]=s.split(":").map(Number);return e*60+t}function H1(s){const e=Math.floor(s/60),t=s%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}function xO(s){const e=s.getFullYear(),t=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function bO(s,e,t,r,o,u){if(!s)return[];const p=new Date(e+"T12:00:00").getDay(),g=gO[p],x=s[g];if(!x||!x.enabled)return[];const b=go(x.start),w=go(x.end),j=x.break?go(x.break.start):null,T=x.break?go(x.break.end):null,L=t+r,V=[];let O=b;for(;O+t<=w;){const U=O+t;if(j!==null&&T!==null&&O<T&&U>j){O=T;continue}V.push({id:`wh-${o}-${e}-${H1(O)}`,date:e,time:H1(O),duration:t,available:!0,staffId:o,staffName:u,generated:!0}),O+=L}return V}function Sj(s,e,t=0,r=4){const o=[],u=new Date;u.setHours(0,0,0,0);const d=new Date(u);d.setDate(d.getDate()+r*7);for(const p of s){if(!p.weeklyHours)continue;const g=new Date(u);for(;g<d;){const x=xO(g),b=bO(p.weeklyHours,x,e,t,p.id,p.name);o.push(...b),g.setDate(g.getDate()+1)}}return o}function Ej(s,e,t=0){const r=e.filter(o=>!o.status||o.status==="pending"||o.status==="confirmed");return s.filter(o=>{const u=go(o.time),d=u+o.duration;return!r.some(g=>{if(o.staffId&&g.staffId&&g.staffId!==o.staffId||g.date!==o.date)return!1;const x=go(g.time),b=g.serviceDuration||g.duration||o.duration,w=x+b;return!(d+t<=x||w+t<=u)})})}function Tj(s,e){const t=new Set(e.map(o=>`${o.staffId||""}-${o.date}-${o.time}`)),r=s.filter(o=>{const u=`${o.staffId||""}-${o.date}-${o.time}`;return!t.has(u)});return[...e,...r]}function Xc({name:s,className:e="w-12 h-12",bgClass:t="bg-blue-100 text-blue-700"}){const r=(s||"").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return i.jsx("div",{className:`${e} ${t} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:r||"?"})}function yO(){return i.jsxs(st,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(da,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function vO({member:s,onClose:e}){const[t,r]=N.useState(null),o=s.portfolio||[];return N.useEffect(()=>{const u=d=>{d.key==="Escape"&&(t!==null?r(null):e())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[t,e]),i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),i.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto animate-scale-in",children:[i.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-8 h-8 bg-slate-100 hover:bg-slate-200 rounded-full flex items-center justify-center text-slate-600 transition-all z-10",children:i.jsx(X,{className:"w-4 h-4"})}),i.jsxs("div",{className:"p-6 pb-4 border-b border-slate-100",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Xc,{name:s.name,className:"w-14 h-14",bgClass:"bg-violet-100 text-violet-700"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900",children:s.name}),s.role&&i.jsx("p",{className:"text-sm text-violet-600 font-medium",children:s.role})]})]}),s.bio&&i.jsx("p",{className:"mt-3 text-sm text-slate-600 leading-relaxed",children:s.bio})]}),i.jsx("div",{className:"p-6",children:o.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Image,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet"})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:o.map((u,d)=>i.jsxs("button",{onClick:()=>r(d),className:"group relative aspect-square rounded-xl overflow-hidden bg-slate-100 shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5",children:[i.jsx("img",{src:u.url,alt:u.caption||"Portfolio",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),u.caption&&i.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-2.5 pt-6",children:i.jsx("p",{className:"text-xs text-white font-medium truncate",children:u.caption})})]},d))})})]}),t!==null&&o[t]&&i.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/90",children:[i.jsx("button",{onClick:()=>r(null),className:"absolute top-4 right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:i.jsx(X,{className:"w-5 h-5"})}),t>0&&i.jsx("button",{onClick:()=>r(t-1),className:"absolute left-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:i.jsx(ChevronLeft,{className:"w-5 h-5"})}),t<o.length-1&&i.jsx("button",{onClick:()=>r(t+1),className:"absolute right-4 w-10 h-10 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-all",children:i.jsx(ChevronRight,{className:"w-5 h-5"})}),i.jsxs("div",{className:"max-w-4xl max-h-[85vh] flex flex-col items-center",children:[i.jsx("img",{src:o[t].url,alt:o[t].caption||"Portfolio",className:"max-w-full max-h-[75vh] object-contain rounded-lg"}),o[t].caption&&i.jsx("p",{className:"mt-3 text-sm text-white/90 font-medium text-center px-4",children:o[t].caption}),i.jsxs("p",{className:"mt-1 text-xs text-white/50",children:[t+1," / ",o.length]})]})]})]})}function wO(){const{slug:s}=Mo(),[e,t]=N.useState(null),[r,o]=N.useState(null),[u,d]=N.useState(!0),[p,g]=N.useState(!1),[x,b]=N.useState([]),[w,j]=N.useState([]),[T,L]=N.useState(null),[V,O]=N.useState(null),[U,G]=N.useState([]),[q,ae]=N.useState([]),[ce,W]=N.useState(!1),[S,A]=N.useState(null),[k,B]=N.useState(null),[M,$]=N.useState(""),[R,F]=N.useState(!1),[D,I]=N.useState({name:"",email:"",phone:""}),[K,oe]=N.useState(""),[Te,ve]=N.useState(!1),[P,Z]=N.useState(null),[ue,xe]=N.useState(!1),[be,De]=N.useState("biweekly"),[ze,kt]=N.useState(null),[ft,sn]=N.useState(!1),[se,_e]=N.useState(null);N.useEffect(()=>{(async()=>{d(!0),g(!1);try{const Se=Ms(tt(je,"shops"),ps("slug","==",s)),Qe=await Os(Se);if(Qe.empty)g(!0);else{const Ze=Qe.docs[0];t(Ze.data()),o(Ze.id)}}catch(Se){console.error("Error looking up shop:",Se),g(!0)}finally{d(!1)}})()},[s]),N.useEffect(()=>{if(!r)return;const me=Zt(tt(je,"shops",r,"services"),jt=>{const Ue=jt.docs.map(He=>({id:He.id,...He.data()})).filter(He=>He.active!==!1).sort((He,Dt)=>(He.name||"").localeCompare(Dt.name||""));b(Ue)}),Se=Zt(tt(je,"shops",r,"availability"),jt=>{const Ue=new Date,He=jt.docs.map(Dt=>({id:Dt.id,...Dt.data()})).filter(Dt=>new Date(`${Dt.date}T${Dt.time}`)>Ue);G(He)}),Qe=Zt(tt(je,"shops",r,"bookings"),jt=>{const Ue=jt.docs.map(He=>({id:He.id,...He.data()}));ae(Ue)}),Ze=Zt(tt(je,"shops",r,"staff"),jt=>{const Ue=jt.docs.map(He=>({id:He.id,...He.data()})).filter(He=>He.active!==!1).sort((He,Dt)=>(He.name||"").localeCompare(Dt.name||""));j(Ue)});return()=>{me(),Se(),Qe(),Ze()}},[r]),N.useEffect(()=>{w.length===1?O(w[0]):w.length===0&&O(null)},[w]);const de=x.length>0;w.length>0;const Ae=w.length>1,Ce=e?.bufferMinutes||0,Pe=N.useMemo(()=>{const me=new Date;let Se=U.filter(Ue=>Ue.available);if(T&&(Se=Se.filter(Ue=>Ue.duration>=T.duration)),V&&V!=="any"&&(Se=Se.filter(Ue=>Ue.staffId===V.id||!Ue.staffId)),!T)return Se;const Qe=V&&V!=="any"?w.filter(Ue=>Ue.id===V.id):w,Ze=Sj(Qe,T.duration,Ce,4).filter(Ue=>new Date(`${Ue.date}T${Ue.time}`)>me),jt=Tj(Ze,Se);return Ej(jt,q,Ce)},[U,T,V,w,q,Ce]),yt=(me,Se,Qe=3)=>{const Ze=[],jt=new Date(me+"T12:00:00"),Ue=new Date(jt);Ue.setMonth(Ue.getMonth()+Qe);let He=new Date(jt);for(Se==="weekly"?He.setDate(He.getDate()+7):Se==="biweekly"?He.setDate(He.getDate()+14):Se==="fourweekly"?He.setDate(He.getDate()+28):Se==="monthly"&&He.setMonth(He.getMonth()+1);He<=Ue;){const Dt=He.getFullYear(),an=String(He.getMonth()+1).padStart(2,"0"),$n=String(He.getDate()).padStart(2,"0");Ze.push(`${Dt}-${an}-${$n}`),Se==="weekly"?He.setDate(He.getDate()+7):Se==="biweekly"?He.setDate(He.getDate()+14):Se==="fourweekly"?He.setDate(He.getDate()+28):Se==="monthly"&&He.setMonth(He.getMonth()+1)}return Ze},ct=N.useMemo(()=>{if(!ue||!S)return null;const me=yt(S.date,be),Se=T?T.duration:S.duration||60,Qe=V&&V!=="any"?V.id:S.staffId,Ze=S.time,jt=q.filter(fn=>!fn.status||fn.status==="pending"||fn.status==="confirmed"),Ue=fn=>{const[Ai,bn]=fn.split(":").map(Number);return Ai*60+bn},He=Ue(Ze),Dt=He+Se;let an=[],$n=[];const ss=new Set;me.forEach(fn=>{jt.some(bn=>{if(Qe&&bn.staffId&&bn.staffId!==Qe||bn.date!==fn)return!1;const as=Ue(bn.time),rn=bn.serviceDuration||bn.duration||Se,yn=as+rn,ws=Ce||0;return!(Dt+ws<=as||yn+ws<=He)})||ss.has(fn)?$n.push(fn):(an.push(fn),ss.add(fn))});const Zs=me.length>0?me[me.length-1]:S.date,Ti=new Date(Zs+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Ha={weekly:"week",biweekly:"2 weeks",fourweekly:"4 weeks",monthly:"month"};return{available:an,conflicts:$n,total:an.length+1,skipped:$n.length,endDate:Ti,intervalLabel:Ha[be]||be}},[ue,be,S,T,V,q,Ce]),ut=me=>{L(me),w.length>1&&O(null),B(null),A(null),W(!1),$("")},ke=me=>{O(me),B(null),A(null),W(!1),$("")},Ve=()=>{L(null),w.length>1&&O(null),B(null),A(null),W(!1)},ot=()=>{B(null),A(null),W(!1),Ae?O(null):de&&L(null)},Qt=me=>{A(me),W(!0),$("")},_t=()=>{const me="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let Se="BK";for(let Qe=0;Qe<4;Qe++)Se+=me.charAt(Math.floor(Math.random()*me.length));return Se},Nt=me=>{me.preventDefault(),re?sn(!0):Tt()},Cn=me=>{_e(me),Tt(me)},Tt=async(me=null)=>{F(!0),kt(null);try{const Se=_t(),Qe=e?.requireApproval?"pending":"confirmed",Ze=ue?`rg-${Date.now()}-${Math.random().toString(36).slice(2,8)}`:null,jt=ue&&ct?ct.endDate:null,Ue={slotId:S.id,date:S.date,time:S.time,duration:T?T.duration:S.duration,clientName:D.name,clientEmail:D.email,clientPhone:D.phone,bookedAt:new Date().toISOString(),status:Qe,refCode:Se};if(T&&(Ue.serviceId=T.id,Ue.serviceName=T.name,Ue.servicePrice=T.price,Ue.serviceDuration=T.duration,Ue.depositPercent=T.depositPercent||0),me||se){const an=me||se;Ue.depositPaid=!0,Ue.depositAmount=Ne/100,Ue.paymentMethodId=an.paymentMethodId,Ue.cardLast4=an.last4,Ue.cardBrand=an.brand}V&&V!=="any"?(Ue.staffId=V.id,Ue.staffName=V.name):S.staffId&&(Ue.staffId=S.staffId,Ue.staffName=S.staffName||""),ue&&Ze&&(Ue.recurring=!0,Ue.recurringInterval=be,Ue.recurringGroupId=Ze,Ue.recurringUntil=jt),await Nr(tt(je,"shops",r,"bookings"),Ue),S.generated||await it(Ye(je,"shops",r,"availability",S.id),{available:!1});let He=1,Dt=0;if(ue&&ct){const an=ct.available;Dt=ct.skipped;for(const $n of an){const ss=_t(),Zs={...Ue,date:$n,slotId:`recurring-${Ze}-${$n}`,refCode:ss,bookedAt:new Date().toISOString()};await Nr(tt(je,"shops",r,"bookings"),Zs),He++}kt({created:He,skipped:Dt})}I({name:"",email:"",phone:""}),W(!1),sn(!1),_e(null),A(null),L(null),B(null),O(w.length===1?w[0]:null),xe(!1),oe(Se),e?.requireApproval?$(" Your booking request has been submitted! The shop will review and confirm it shortly."):$(" Booking confirmed! You will receive a confirmation email shortly.")}catch(Se){console.error("Booking error:",Se),$(" Something went wrong. Please try again.")}finally{F(!1)}},Xn=me=>new Date(me+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),qn=me=>{const[Se,Qe]=me.split(":"),Ze=parseInt(Se),jt=Ze>=12?"PM":"AM";return`${Ze%12||12}:${Qe} ${jt}`},vs=me=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(me),ns=me=>{if(me<60)return`${me} min`;const Se=Math.floor(me/60),Qe=me%60;return Qe?`${Se}h ${Qe}m`:`${Se} hour${Se>1?"s":""}`};if(u)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking page"})]})});if(p)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(za,{className:"w-4 h-4"}),"Go Home"]})]})});const $a=[...new Set(Pe.map(me=>me.date))].sort(),H=k?Pe.filter(me=>me.date===k):Pe,re=T&&T.depositPercent>0,Ne=re?Math.round(T.price*(T.depositPercent/100)*100):0,$e=ft?"payment":ce?"form":de&&!T?"services":Ae&&!V?"staff":"calendar",Je=[];de&&Je.push({key:"services",label:"Service"}),Ae&&Je.push({key:"staff",label:"Stylist"}),Je.push({key:"calendar",label:"Date & Time"}),Je.push({key:"form",label:"Details"}),re&&Je.push({key:"payment",label:"Payment"});const Ft=Je.findIndex(me=>me.key===$e),Be=["border-l-blue-500","border-l-violet-500","border-l-emerald-500","border-l-amber-500","border-l-rose-500","border-l-cyan-500","border-l-indigo-500","border-l-pink-500","border-l-teal-500"];return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Book your appointment"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(st,{to:`/shop/${s}/login`,className:"flex items-center gap-1.5 px-3.5 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[i.jsx(ef,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"Owner"})]}),i.jsx(yO,{})]})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[Je.length>1&&i.jsx("div",{className:"flex items-center justify-center gap-0 mb-8 animate-fade-in",children:Je.map((me,Se)=>{const Qe=me.key===$e,Ze=Se<Ft;return i.jsxs(N.Fragment,{children:[Se>0&&i.jsx("div",{className:`w-8 sm:w-14 h-0.5 transition-colors duration-300 ${Se<=Ft?"bg-blue-500":"bg-slate-200"}`}),i.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[i.jsx("div",{className:`w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 ${Qe?"bg-blue-600 text-white shadow-md shadow-blue-600/30 scale-110":Ze?"bg-blue-600 text-white":"bg-slate-200 text-slate-500"}`,children:Ze?i.jsx(Kn,{className:"w-5 h-5"}):Se+1}),i.jsx("span",{className:`text-xs font-medium hidden sm:block transition-colors ${Qe?"text-blue-700":Ze?"text-blue-600":"text-slate-400"}`,children:me.label})]})]},me.key)})}),M&&i.jsx("div",{className:"mb-8 animate-scale-in",children:M.startsWith("")?i.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(lj,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Confirmed!"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"You're all set. We'll send a confirmation to your email."}),ze&&i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[i.jsx(hi,{className:"w-4 h-4"}),"Recurring Series Created"]}),i.jsxs("p",{className:"text-sm text-slate-700",children:[ze.created," appointment",ze.created!==1?"s":""," booked"]}),ze.skipped>0&&i.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",ze.skipped," date",ze.skipped!==1?"s":""," skipped due to conflicts"]})]}),K&&i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),i.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:K})]}),K&&i.jsxs("div",{className:"mb-4",children:[i.jsxs(st,{to:`/shop/${s}/booking/${K}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(da,{className:"w-4 h-4"}),"Manage Your Booking"]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-lg text-sm text-emerald-700 font-medium",children:[i.jsx(da,{className:"w-4 h-4"}),"Add to your calendar to remember"]})]}):M.startsWith("")?i.jsxs("div",{className:"bg-white rounded-2xl border border-amber-200 shadow-lg shadow-amber-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(un,{className:"w-8 h-8 text-amber-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Request Submitted!"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking request has been submitted! The shop will review and confirm it shortly."}),ze&&i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-blue-700 font-semibold text-sm mb-1",children:[i.jsx(hi,{className:"w-4 h-4"}),"Recurring Series Created"]}),i.jsxs("p",{className:"text-sm text-slate-700",children:[ze.created," appointment",ze.created!==1?"s":""," submitted"]}),ze.skipped>0&&i.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[" ",ze.skipped," date",ze.skipped!==1?"s":""," skipped due to conflicts"]})]}),K&&i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"Your reference"}),i.jsx("p",{className:"text-2xl font-mono font-extrabold text-blue-600 tracking-wider",children:K})]}),K&&i.jsxs("div",{className:"mb-4",children:[i.jsxs(st,{to:`/shop/${s}/booking/${K}`,className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(da,{className:"w-4 h-4"}),"Manage Your Booking"]}),i.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Save this link to reschedule or cancel your booking"})]}),i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700 font-medium",children:[i.jsx(un,{className:"w-4 h-4"}),"You'll be notified once it's confirmed"]})]}):i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Something went wrong. Please try again."})]})}),$e==="services"&&i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a Service"}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select the service you'd like to book"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 stagger-children",children:x.map((me,Se)=>i.jsxs("button",{onClick:()=>ut(me),className:`group text-left bg-white border-l-4 ${Be[Se%Be.length]} border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors pr-2",children:me.name}),i.jsx("span",{className:"text-xl font-extrabold text-blue-600 whitespace-nowrap",children:vs(me.price)})]}),me.description&&i.jsx("p",{className:"text-sm text-slate-500 mb-3 line-clamp-2 leading-relaxed",children:me.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-slate-400",children:[i.jsx(un,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:ns(me.duration)})]}),i.jsx("span",{className:"text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]})]},me.id))})]}),$e==="staff"&&i.jsxs("div",{className:"animate-fade-in",children:[de&&T&&i.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[i.jsxs("button",{onClick:Ve,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back"]}),i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[i.jsx(xs,{className:"w-3.5 h-3.5 text-blue-500"}),i.jsx("span",{className:"font-semibold text-slate-800",children:T.name}),i.jsx("span",{className:"text-blue-600 font-bold",children:vs(T.price)})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose Your Stylist"}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Select your preferred professional"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 stagger-children",children:[i.jsxs("button",{onClick:()=>ke("any"),className:"group text-left bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[i.jsxs("div",{className:"flex items-center gap-3.5 mb-3",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(Gt,{className:"w-5 h-5 text-slate-500"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:"Any Available"}),i.jsx("p",{className:"text-xs text-slate-500",children:"First available professional"})]})]}),i.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),w.map(me=>{const Se=me.portfolio||[];return i.jsxs("div",{className:"group bg-white border border-slate-200 hover:border-blue-300 rounded-xl p-5 transition-all duration-200 hover:shadow-lg hover:shadow-slate-200/50 hover:-translate-y-0.5",children:[i.jsxs("button",{onClick:()=>ke(me),className:"w-full text-left",children:[i.jsxs("div",{className:"flex items-center gap-3.5 mb-2",children:[i.jsx(Xc,{name:me.name}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("h3",{className:"text-base font-bold text-slate-900 group-hover:text-blue-700 transition-colors",children:me.name}),me.role&&i.jsx("p",{className:"text-xs text-slate-500",children:me.role})]})]}),me.bio&&i.jsx("p",{className:"text-xs text-slate-500 leading-relaxed mb-2 line-clamp-2",children:me.bio}),Se.length>0&&i.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[Se.slice(0,3).map((Qe,Ze)=>i.jsx("img",{src:Qe.url,alt:Qe.caption||"Work",className:"w-10 h-10 rounded-md object-cover border border-slate-200"},Ze)),Se.length>3&&i.jsxs("span",{className:"w-10 h-10 rounded-md bg-slate-100 border border-slate-200 flex items-center justify-center text-xs text-slate-500 font-semibold",children:["+",Se.length-3]})]}),i.jsx("span",{className:"block text-center text-xs font-semibold text-blue-600 group-hover:translate-x-0.5 transition-transform",children:"Select "})]}),Se.length>0&&i.jsxs("button",{onClick:Qe=>{Qe.stopPropagation(),Z(me)},className:"mt-2 w-full flex items-center justify-center gap-1.5 py-1.5 text-xs font-semibold text-violet-600 hover:text-violet-700 hover:bg-violet-50 rounded-lg transition-all",children:[i.jsx(Image,{className:"w-3.5 h-3.5"}),"View Portfolio (",Se.length,")"]})]},me.id)})]})]}),$e==="calendar"&&i.jsxs("div",{className:"animate-fade-in",children:[(de||Ae)&&i.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[i.jsxs("button",{onClick:ot,className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back"]}),T&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[i.jsx(xs,{className:"w-3.5 h-3.5 text-blue-500"}),i.jsx("span",{className:"font-semibold text-slate-800",children:T.name}),i.jsx("span",{className:"text-blue-600 font-bold",children:vs(T.price)}),i.jsxs("span",{className:"text-slate-400",children:[" ",ns(T.duration)]})]}),V&&V!=="any"&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[i.jsx(Xc,{name:V.name,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:V.name})]}),V==="any"&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[i.jsx(Gt,{className:"w-3.5 h-3.5 text-slate-500"}),i.jsx("span",{className:"font-semibold text-slate-700",children:"Any Available"})]})]}),$a.length===0?i.jsx("div",{children:Te?i.jsx("div",{className:"max-w-lg mx-auto",children:i.jsx(M1,{shopId:r,slug:s,selectedService:T,selectedStaff:V,staffMembers:w,preferredDate:null,onCancel:()=>ve(!1)})}):i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),i.jsx("p",{className:"text-slate-600 max-w-md mx-auto mb-6",children:T?`No time slots available for ${T.name} (${ns(T.duration)}). Join the waitlist to be notified when a slot opens up!`:"Check back soon for new availability, or join the waitlist!"}),i.jsxs("button",{onClick:()=>ve(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 hover:-translate-y-0.5",children:[i.jsx(Zh,{className:"w-4 h-4"}),"Join Waitlist"]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Select a Date"}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Pick a day that works for you"})]}),i.jsx("div",{className:"mb-8",children:i.jsx(fj,{availableDates:$a,selectedDate:k,onSelectDate:B})}),k&&i.jsxs("div",{className:"animate-slide-down",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",Xn(k)]}),i.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[H.length," slot",H.length!==1?"s":""]})]}),H.length===0?i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[i.jsx("p",{className:"text-slate-500 mb-4",children:"No times available for this date"}),Te?i.jsx("div",{className:"mt-4 text-left",children:i.jsx(M1,{shopId:r,slug:s,selectedService:T,selectedStaff:V,staffMembers:w,preferredDate:k,onCancel:()=>ve(!1)})}):i.jsxs("button",{onClick:()=>ve(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(Zh,{className:"w-4 h-4"}),"Join the Waitlist"]})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:H.sort((me,Se)=>me.time.localeCompare(Se.time)).map(me=>i.jsxs("button",{onClick:()=>Qt(me),className:"group bg-white border border-slate-200 hover:border-blue-400 rounded-xl p-4 transition-all duration-200 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5 text-center",children:[i.jsx("div",{className:"text-lg font-bold text-slate-900 group-hover:text-blue-700 transition-colors mb-1",children:qn(me.time)}),me.staffName&&V==="any"&&i.jsxs("div",{className:"text-xs text-violet-600 mb-0.5 flex items-center justify-center gap-1",children:[i.jsx(Gt,{className:"w-3 h-3"}),me.staffName]}),i.jsx("div",{className:"text-xs text-slate-400",children:T?ns(T.duration):`${me.duration} min`})]},me.id))})]}),!k&&i.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]}),$e==="form"&&i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Complete Your Booking"}),i.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Review your details and confirm"}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[T&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(xs,{className:"w-4 h-4 text-blue-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:T.name})]}),i.jsx("span",{className:"font-bold text-blue-600",children:vs(T.price)})]}),V&&V!=="any"&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(Xc,{name:V.name,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-slate-800",children:V.name}),V.role&&i.jsxs("span",{className:"text-slate-400 text-sm ml-1.5",children:[" ",V.role]})]})]}),V==="any"&&S?.staffName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(Xc,{name:S.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:S.staffName})]}),i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"font-semibold text-slate-800",children:[Xn(S.date)," at ",qn(S.time)]})]}),i.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(un,{className:"w-4 h-4 text-slate-500"})}),i.jsx("span",{children:T?ns(T.duration):`${S.duration} min`})]})]}),i.jsxs("form",{onSubmit:Nt,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Full Name"}),i.jsx("input",{type:"text",value:D.name,onChange:me=>I({...D,name:me.target.value}),required:!0,placeholder:"John Doe",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:D.email,onChange:me=>I({...D,email:me.target.value}),required:!0,placeholder:"john@example.com",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Phone Number"}),i.jsx("input",{type:"tel",value:D.phone,onChange:me=>I({...D,phone:me.target.value}),required:!0,placeholder:"(555) 123-4567",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(hi,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-800",children:"Make this recurring"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Book the same slot on a regular schedule"})]})]}),i.jsx("button",{type:"button",onClick:()=>xe(!ue),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${ue?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${ue?"translate-x-6":"translate-x-1"}`})})]}),ue&&i.jsxs("div",{className:"space-y-3 pt-1 animate-fade-in",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Repeat every"}),i.jsxs("select",{value:be,onChange:me=>De(me.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[i.jsx("option",{value:"weekly",children:"Week"}),i.jsx("option",{value:"biweekly",children:"2 Weeks"}),i.jsx("option",{value:"fourweekly",children:"4 Weeks"}),i.jsx("option",{value:"monthly",children:"Month"})]})]}),ct&&i.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:[" Every ",ct.intervalLabel," through ",ct.endDate]}),i.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[ct.total," total appointment",ct.total!==1?"s":""]}),ct.skipped>0&&i.jsxs("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:[" ",ct.skipped," date",ct.skipped!==1?"s":""," will be skipped due to existing bookings"]})]})]})]}),re&&i.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 border border-emerald-200 rounded-xl",children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0",children:i.jsx(gr,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm font-semibold text-emerald-800",children:["$",(Ne/100).toFixed(2)," deposit required"]}),i.jsxs("p",{className:"text-xs text-emerald-600",children:[T.depositPercent,"% of service price  Remaining $",(T.price-Ne/100).toFixed(2)," due at appointment"]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"submit",disabled:R,className:`flex-1 flex items-center justify-center gap-2 px-6 py-3.5 ${re?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-600/20 hover:shadow-emerald-600/25":"bg-blue-600 hover:bg-blue-700 shadow-blue-600/20 hover:shadow-blue-600/25"} text-white rounded-xl font-semibold shadow-md hover:shadow-lg transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0`,children:R?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Booking"]}):re?i.jsxs(i.Fragment,{children:[i.jsx(gr,{className:"w-4 h-4"}),"Continue to Payment"]}):i.jsxs(i.Fragment,{children:[i.jsx(Kn,{className:"w-4 h-4"}),"Confirm Booking"]})}),i.jsx("button",{type:"button",onClick:()=>{W(!1),A(null)},className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Back"})]})]})]}),$e==="payment"&&i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Secure Payment"}),i.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Complete your deposit to confirm your booking"}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(Vt,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-800",children:T?.name}),i.jsxs("p",{className:"text-sm text-slate-500",children:[S&&Xn(S.date)," at ",S&&qn(S.time)]})]})]}),i.jsxs("div",{className:"text-sm text-slate-600 pl-13",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Client:"})," ",D.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Email:"})," ",D.email]})]})]}),!e?.payoutsEnabled&&i.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(gr,{className:"w-4 h-4 text-amber-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-amber-800 text-sm",children:"Payment Setup in Progress"}),i.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"This shop is still setting up their payment system. You can still book, but payment will be collected at the time of your appointment."}),i.jsx("button",{onClick:()=>Tt(),disabled:R,className:"mt-3 flex items-center gap-2 px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-semibold text-sm transition-all disabled:opacity-50",children:R?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Booking"]}):i.jsxs(i.Fragment,{children:[i.jsx(Kn,{className:"w-4 h-4"}),"Book Without Deposit"]})})]})]})}),e?.payoutsEnabled&&i.jsx(pO,{amount:Ne,serviceName:T?.name||"Service",clientInfo:D,onSuccess:Cn,onCancel:()=>sn(!1),shopId:r,bookingRefCode:null,shopHasConnect:e?.payoutsEnabled}),!e?.payoutsEnabled&&i.jsx("button",{onClick:()=>sn(!1),className:"w-full px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:" Back"})]})]}),P&&i.jsx(vO,{member:P,onClose:()=>Z(null)}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(st,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})})}),i.jsx(RM,{services:x,staffMembers:w,shop:e,onSelectService:ut})]})}function _O({slotsByDate:s,bookingsByDate:e,selectedDate:t,onSelectDate:r,recurringDayFlags:o={}}){const[u,d]=N.useState(new Date),p=ae=>{const ce=ae.getFullYear(),W=ae.getMonth(),S=new Date(ce,W,1),k=new Date(ce,W+1,0).getDate(),B=S.getDay();return{daysInMonth:k,startingDayOfWeek:B,year:ce,month:W}},{daysInMonth:g,startingDayOfWeek:x,year:b,month:w}=p(u),j=()=>{d(new Date(u.getFullYear(),u.getMonth()-1))},T=()=>{d(new Date(u.getFullYear(),u.getMonth()+1))},L=ae=>`${b}-${String(w+1).padStart(2,"0")}-${String(ae).padStart(2,"0")}`,V=ae=>{const ce=L(ae),W=s[ce]||[],S=e[ce]||[],A=W.filter(B=>B.available).length,k=S.length;return{availableCount:A,bookedCount:k,hasData:W.length>0||S.length>0}},O=ae=>{const ce=L(ae);r(ce===t?null:ce)},U=["January","February","March","April","May","June","July","August","September","October","November","December"],G=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],q=new Date;return q.setHours(0,0,0,0),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-5",children:[i.jsx("button",{onClick:j,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(ij,{className:"w-5 h-5 text-slate-600"})}),i.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[U[w]," ",b]}),i.jsx("button",{onClick:T,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(Rf,{className:"w-5 h-5 text-slate-600"})})]}),i.jsx("div",{className:"grid grid-cols-7 gap-1.5 mb-1.5",children:G.map(ae=>i.jsx("div",{className:"text-center text-xs font-semibold text-slate-400 py-2 uppercase tracking-wider",children:ae},ae))}),i.jsxs("div",{className:"grid grid-cols-7 gap-1.5",children:[Array.from({length:x}).map((ae,ce)=>i.jsx("div",{},`empty-${ce}`)),Array.from({length:g}).map((ae,ce)=>{const W=ce+1,S=L(W),{availableCount:A,bookedCount:k,hasData:B}=V(W),M=S===t,$=new Date,R=$.getDate()===W&&$.getMonth()===w&&$.getFullYear()===b,F=new Date(b,w,W),D=F.getDay(),I=o[D]&&F>=q;return i.jsxs("button",{onClick:()=>O(W),className:`
                relative p-2 text-center rounded-lg text-sm font-semibold transition-all duration-200 min-h-[56px] flex flex-col items-center justify-start cursor-pointer
                ${M?"bg-blue-600 text-white shadow-md shadow-blue-600/30":B||I?"bg-slate-50 hover:bg-slate-100 text-slate-900 border border-slate-200 hover:border-slate-300":R?"text-slate-900 font-bold hover:bg-slate-50":"text-slate-400 hover:bg-slate-50"}
              `,children:[i.jsxs("span",{className:`text-sm ${R&&!M?"relative":""}`,children:[W,R&&!M&&i.jsx("span",{className:"absolute -bottom-0.5 left-1/2 -translate-x-1/2 w-1 h-1 bg-blue-500 rounded-full"})]}),(B||I)&&i.jsxs("div",{className:"flex gap-0.5 mt-1 flex-wrap justify-center",children:[I&&i.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${M?"bg-white/20 text-white":"bg-violet-100 text-violet-700"}`,children:"R"}),A>0&&i.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${M?"bg-white/20 text-white":"bg-emerald-100 text-emerald-700"}`,children:A}),k>0&&i.jsx("span",{className:`text-[9px] font-bold px-1 rounded ${M?"bg-white/20 text-white":"bg-blue-100 text-blue-700"}`,children:k})]})]},W)})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-xs text-slate-500",children:[Object.keys(o).length>0&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-violet-100 border border-violet-200 rounded flex items-center justify-center text-[7px] font-bold text-violet-700",children:"R"}),i.jsx("span",{children:"Recurring"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-emerald-100 border border-emerald-200 rounded"}),i.jsx("span",{children:"Available"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-blue-100 border border-blue-200 rounded"}),i.jsx("span",{children:"Booked"})]}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 bg-blue-600 rounded"}),i.jsx("span",{children:"Selected"})]})]})]})}const NO=[{value:15,label:"15 min"},{value:30,label:"30 min"},{value:45,label:"45 min"},{value:60,label:"1 hour"},{value:90,label:"1.5 hours"},{value:120,label:"2 hours"}],jO=[{value:0,label:"No deposit required"},{value:10,label:"10%"},{value:20,label:"20%"},{value:25,label:"25%"},{value:50,label:"50%"},{value:100,label:"Full payment upfront"}];function SO({shopId:s}){const[e,t]=N.useState([]),[r,o]=N.useState(!1),[u,d]=N.useState(null),[p,g]=N.useState({name:"",description:"",duration:30,price:"",depositPercent:0}),[x,b]=N.useState(!1);N.useEffect(()=>{if(!s)return;const U=Zt(tt(je,"shops",s,"services"),G=>{const q=G.docs.map(ae=>({id:ae.id,...ae.data()})).filter(ae=>ae.active!==!1).sort((ae,ce)=>(ae.name||"").localeCompare(ce.name||""));t(q)});return()=>U()},[s]);const w=()=>{g({name:"",description:"",duration:30,price:"",depositPercent:0}),o(!1),d(null)},j=async U=>{U.preventDefault(),b(!0);const G={name:p.name.trim(),description:p.description.trim(),duration:parseInt(p.duration),price:parseFloat(p.price),depositPercent:parseInt(p.depositPercent)||0,active:!0};try{u?await it(Ye(je,"shops",s,"services",u),G):await Nr(tt(je,"shops",s,"services"),{...G,createdAt:Wg()}),w()}catch(q){console.error("Error saving service:",q)}finally{b(!1)}},T=U=>{g({name:U.name,description:U.description||"",duration:U.duration,price:U.price.toString(),depositPercent:U.depositPercent||0}),d(U.id),o(!0)},L=async U=>{try{await it(Ye(je,"shops",s,"services",U),{active:!1})}catch(G){console.error("Error deleting service:",G)}},V=U=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(U),O=U=>{if(U<60)return`${U} min`;const G=Math.floor(U/60),q=U%60;return q?`${G}h ${q}m`:`${G}h`};return i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Services"}),i.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Define the services you offer  clients will pick one before booking"})]}),!r&&i.jsxs("button",{onClick:()=>{w(),o(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[i.jsx(vi,{className:"w-4 h-4"}),"Add Service"]})]}),r&&i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:u?"Edit Service":"New Service"}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Service Name *"}),i.jsx("input",{type:"text",value:p.name,onChange:U=>g({...p,name:U.target.value}),required:!0,placeholder:"e.g. Haircut",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description (optional)"}),i.jsx("input",{type:"text",value:p.description,onChange:U=>g({...p,description:U.target.value}),placeholder:"e.g. Classic cut and style",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Duration *"}),i.jsx("select",{value:p.duration,onChange:U=>g({...p,duration:U.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:NO.map(U=>i.jsx("option",{value:U.value,children:U.label},U.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Price (USD) *"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-semibold",children:"$"}),i.jsx("input",{type:"number",step:"0.01",min:"0",value:p.price,onChange:U=>g({...p,price:U.target.value}),required:!0,placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx(gr,{className:"w-4 h-4 text-emerald-500"}),"Deposit Required"]})}),i.jsx("select",{value:p.depositPercent,onChange:U=>g({...p,depositPercent:U.target.value}),className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:jO.map(U=>i.jsx("option",{value:U.value,children:U.label},U.value))})]})]}),p.depositPercent>0&&p.price&&i.jsxs("div",{className:"flex items-center gap-2 p-3 bg-emerald-50 border border-emerald-200 rounded-lg text-sm",children:[i.jsx(gr,{className:"w-4 h-4 text-emerald-600"}),i.jsxs("span",{className:"text-emerald-800",children:["Clients will pay ",i.jsxs("strong",{children:["$",((parseFloat(p.price)||0)*(parseInt(p.depositPercent)/100)).toFixed(2)]})," deposit at booking",parseInt(p.depositPercent)<100&&i.jsxs("span",{children:[" ($",((parseFloat(p.price)||0)*(1-parseInt(p.depositPercent)/100)).toFixed(2)," remaining due at appointment)"]})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs("button",{type:"submit",disabled:x,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[i.jsx(ms,{className:"w-4 h-4"}),x?"Saving":u?"Update Service":"Add Service"]}),i.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[i.jsx(ha,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No services yet"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Add your first service so clients can choose what to book"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:e.map(U=>i.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:U.name}),U.description&&i.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:U.description})]}),i.jsx("span",{className:"text-xl font-bold text-blue-600 whitespace-nowrap ml-3",children:V(U.price)})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 mb-4 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx(un,{className:"w-4 h-4"}),O(U.duration)]}),U.depositPercent>0&&i.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full text-xs font-medium",children:[i.jsx(gr,{className:"w-3 h-3"}),U.depositPercent,"% deposit"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>T(U),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:[i.jsx(oj,{className:"w-3.5 h-3.5"}),"Edit"]}),i.jsx("button",{onClick:()=>L(U.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:i.jsx(xu,{className:"w-3.5 h-3.5"})})]})]},U.id))})]})}const a0=[{key:"monday",label:"Monday",short:"Mon"},{key:"tuesday",label:"Tuesday",short:"Tue"},{key:"wednesday",label:"Wednesday",short:"Wed"},{key:"thursday",label:"Thursday",short:"Thu"},{key:"friday",label:"Friday",short:"Fri"},{key:"saturday",label:"Saturday",short:"Sat"},{key:"sunday",label:"Sunday",short:"Sun"}],EO={enabled:!1,start:"09:00",end:"17:00",break:null};function TO({shopId:s,staffId:e,staffName:t,weeklyHours:r,onClose:o}){const[u,d]=N.useState(()=>{const O={};for(const U of a0){const G=r?.[U.key];G?O[U.key]={enabled:!!G.enabled,start:G.start||"09:00",end:G.end||"17:00",break:G.break?{start:G.break.start,end:G.break.end}:null}:O[U.key]={...EO}}return O}),[p,g]=N.useState(!1),[x,b]=N.useState(null),w=(O,U,G)=>{d(q=>({...q,[O]:{...q[O],[U]:G}}))},j=O=>{d(U=>({...U,[O]:{...U[O],break:U[O].break?null:{start:"12:00",end:"13:00"}}}))},T=(O,U,G)=>{d(q=>({...q,[O]:{...q[O],break:{...q[O].break,[U]:G}}}))},L=O=>{const U=u[O];d(G=>{const q={...G};for(const ae of a0)ae.key!==O&&(q[ae.key]={enabled:U.enabled,start:U.start,end:U.end,break:U.break?{...U.break}:null});return q}),b(O),setTimeout(()=>b(null),1500)},V=async()=>{g(!0);try{await it(Ye(je,"shops",s,"staff",e),{weeklyHours:u}),o()}catch(O){console.error("Error saving weekly hours:",O)}finally{g(!1)}};return i.jsxs("div",{className:"bg-white border-2 border-blue-200 rounded-xl p-6 shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Weekly Hours"}),i.jsx("p",{className:"text-sm text-slate-500",children:t})]}),i.jsx("button",{onClick:o,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:i.jsx(ha,{className:"w-5 h-5 text-slate-400"})})]}),i.jsx("div",{className:"space-y-3",children:a0.map(({key:O,label:U})=>{const G=u[O];return i.jsx("div",{className:`rounded-xl p-4 transition-all ${G.enabled?"bg-blue-50 border border-blue-200":"bg-slate-50 border border-slate-200"}`,children:i.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-[140px]",children:[i.jsx("button",{type:"button",onClick:()=>w(O,"enabled",!G.enabled),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${G.enabled?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${G.enabled?"translate-x-6":"translate-x-1"}`})}),i.jsx("span",{className:`font-semibold text-sm ${G.enabled?"text-slate-900":"text-slate-400"}`,children:U})]}),G.enabled?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"w-4 h-4 text-blue-500"}),i.jsx("input",{type:"time",value:G.start,onChange:q=>w(O,"start",q.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("span",{className:"text-slate-400 text-sm",children:"to"}),i.jsx("input",{type:"time",value:G.end,onChange:q=>w(O,"end",q.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>j(O),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${G.break?"bg-amber-100 text-amber-700 border border-amber-200":"bg-slate-100 text-slate-500 border border-slate-200 hover:bg-slate-200"}`,children:[i.jsx(dD,{className:"w-3.5 h-3.5"}),G.break?"Break":"+ Break"]}),G.break&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx("input",{type:"time",value:G.break.start,onChange:q=>T(O,"start",q.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"}),i.jsx("span",{className:"text-slate-400 text-xs",children:""}),i.jsx("input",{type:"time",value:G.break.end,onChange:q=>T(O,"end",q.target.value),className:"px-2 py-1.5 border border-amber-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-400 bg-white"})]})]}),i.jsx("button",{type:"button",onClick:()=>L(O),className:"text-xs text-blue-500 hover:text-blue-700 font-medium transition-colors whitespace-nowrap",children:x===O?" Copied!":"Copy to all"})]}):i.jsx("span",{className:"text-sm text-slate-400 italic",children:"Day off"})]})},O)})}),i.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-slate-200",children:[i.jsxs("button",{onClick:V,disabled:p,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[i.jsx(ZD,{className:"w-4 h-4"}),p?"Saving":"Save Hours"]}),i.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[i.jsx(ha,{className:"w-4 h-4"}),"Cancel"]})]})]})}const hr={free:{name:"Free",price:0,staffLimit:1,platformFeePercent:5,features:["basicBooking","emailNotifications"]},pro:{name:"Pro",price:29,priceId:null,staffLimit:5,platformFeePercent:0,features:["basicBooking","emailNotifications","aiAssistant","recurringBookings","waitlist","crm","analytics","smsNotifications","customBranding"]},unlimited:{name:"Unlimited",price:79,priceId:null,staffLimit:1/0,platformFeePercent:0,features:["basicBooking","emailNotifications","aiAssistant","recurringBookings","waitlist","crm","analytics","smsNotifications","customBranding","walkIns","multiLocation","noBranding","apiAccess","prioritySupport"]}},AO={basicBooking:{name:"Online Booking",description:"Accept bookings through your booking page"},emailNotifications:{name:"Email Notifications",description:"Automatic booking confirmations and reminders"},aiAssistant:{name:"AI Booking Assistant",description:"Smart suggestions and automated responses"},recurringBookings:{name:"Recurring Bookings",description:"Schedule repeating appointments"},waitlist:{name:"Waitlist",description:"Let clients join a waitlist when fully booked"},crm:{name:"Client CRM",description:"Client notes, history, and win-back tracking"},analytics:{name:"Analytics",description:"Detailed booking and revenue analytics"},smsNotifications:{name:"SMS Notifications",description:"Send text message reminders to clients"},customBranding:{name:"Custom Branding",description:"Customize colors and branding on your booking page"},walkIns:{name:"Walk-in Queue",description:"Manage walk-in clients with live queue"},multiLocation:{name:"Multi-Location",description:"Manage multiple business locations"},noBranding:{name:"Remove SpotBookie Branding",description:"White-label your booking experience"},apiAccess:{name:"API Access",description:"Integrate with external tools and systems"},prioritySupport:{name:"Priority Support",description:"24/7 priority customer support"}};function Aj(s){const e=s?.subscriptionTier||"free";return hr[e]?.staffLimit||1}function CO(s,e){const t=Aj(s);return e<t}function kO(s,e){const t=hr[s]||hr.free,r=hr[e];return r?r.features.filter(o=>!t.features.includes(o)):[]}function RO(s){const e=["free","pro","unlimited"],t=e.indexOf(s||"free");return e.slice(t+1).map(r=>({key:r,...hr[r],newFeatures:kO(s,r)}))}const IO="https://us-central1-scheduler-65e51.cloudfunctions.net",DO={pro:"price_1Sxx7ILhwB1Jyzw8UvRxE5FT",unlimited:"price_1Sxx7JLhwB1Jyzw8uw9BRYhO"};function MO({isOpen:s,onClose:e,shopId:t,slug:r,currentTier:o="free",feature:u,title:d,description:p}){const[g,x]=N.useState(null),[b,w]=N.useState(null);if(!s)return null;const j=RO(o),T=async L=>{x(L),w(null);try{const V=await fetch(`${IO}/createCheckoutSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:t,priceId:DO[L],successUrl:`${window.location.origin}/#/shop/${r}/dashboard?subscription=success`,cancelUrl:`${window.location.origin}/#/shop/${r}/dashboard?subscription=canceled`})}),O=await V.json();if(!V.ok)throw new Error(O.error||"Failed to create checkout session");window.location.href=O.url}catch(V){console.error("Upgrade error:",V),w(V.message),x(null)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-violet-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/20",children:i.jsx(If,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:d||"Upgrade Required"}),i.jsx("p",{className:"text-sm text-slate-500",children:p||"Unlock more features with a premium plan"})]})]}),i.jsx("button",{onClick:e,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-all",children:i.jsx(ha,{className:"w-5 h-5"})})]}),b&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-sm text-red-700",children:b}),i.jsx("div",{className:"space-y-3",children:j.map(L=>i.jsxs("div",{className:`border-2 rounded-xl p-4 transition-all ${L.key==="pro"?"border-blue-300 bg-blue-50/50":"border-violet-300 bg-violet-50/50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-slate-900",children:L.name}),i.jsxs("p",{className:"text-lg font-extrabold text-slate-900",children:["$",L.price,i.jsx("span",{className:"text-sm font-normal text-slate-500",children:"/month"})]})]}),i.jsx("button",{onClick:()=>T(L.key),disabled:g,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-semibold text-sm transition-all disabled:opacity-50 ${L.key==="pro"?"bg-blue-500 hover:bg-blue-600 text-white shadow-md shadow-blue-500/20":"bg-violet-500 hover:bg-violet-600 text-white shadow-md shadow-violet-500/20"}`,children:g===L.key?i.jsx(Qs,{className:"w-4 h-4 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(Du,{className:"w-4 h-4"}),"Upgrade"]})})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[L.key==="pro"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white border border-blue-200 rounded-lg text-xs font-medium text-blue-700",children:[i.jsx(Gt,{className:"w-3 h-3"}),"5 staff"]}),L.key==="unlimited"&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-white border border-violet-200 rounded-lg text-xs font-medium text-violet-700",children:[i.jsx(Gt,{className:"w-3 h-3"}),"Unlimited staff"]}),i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-emerald-50 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700",children:[i.jsx(ms,{className:"w-3 h-3"}),"No platform fees"]})]})]},L.key))}),i.jsx("p",{className:"text-xs text-slate-400 text-center mt-4",children:"Cancel anytime  14-day money-back guarantee"})]})})}function OO({currentCount:s,limit:e,onUpgradeClick:t}){const r=s>=e,o=s>=e-1&&s<e;return!r&&!o?null:i.jsxs("div",{className:`rounded-xl p-4 flex items-center justify-between gap-4 mb-4 ${r?"bg-amber-50 border border-amber-200":"bg-blue-50 border border-blue-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${r?"bg-amber-100":"bg-blue-100"}`,children:i.jsx(Gt,{className:`w-5 h-5 ${r?"text-amber-600":"text-blue-600"}`})}),i.jsxs("div",{children:[i.jsx("p",{className:`font-semibold text-sm ${r?"text-amber-900":"text-blue-900"}`,children:r?"Staff limit reached":"Almost at staff limit"}),i.jsxs("p",{className:"text-xs text-slate-600",children:["You have ",s," of ",e," staff member",e!==1?"s":"",".",r?" Upgrade to add more.":" Upgrade before you need more."]})]})]}),i.jsxs("button",{onClick:t,className:`flex items-center gap-1.5 px-4 py-2 rounded-lg font-semibold text-sm transition-all shadow-md flex-shrink-0 ${r?"bg-amber-500 hover:bg-amber-600 text-white shadow-amber-500/20":"bg-blue-500 hover:bg-blue-600 text-white shadow-blue-500/20"}`,children:[i.jsx(Du,{className:"w-4 h-4"}),"Upgrade"]})]})}const PO=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}],VO=5*1024*1024,LO=["image/jpeg","image/png","image/webp"];function G1(s){if(!s)return"";const[e,t]=s.split(":").map(Number),r=e>=12?"p":"a",o=e%12||12;return t===0?`${o}${r}`:`${o}:${t.toString().padStart(2,"0")}${r}`}function UO({shopId:s,shop:e,slug:t}){const[r,o]=N.useState([]),[u,d]=N.useState(!1),[p,g]=N.useState(null),[x,b]=N.useState(null),[w,j]=N.useState(null),[T,L]=N.useState({name:"",role:""}),[V,O]=N.useState(!1),[U,G]=N.useState(!1),q=Aj(e),ae=CO(e,r.length),[ce,W]=N.useState(null),[S,A]=N.useState(""),[k,B]=N.useState(!1),[M,$]=N.useState(!1),[R,F]=N.useState(""),[D,I]=N.useState(null),[K,oe]=N.useState(null),[Te,ve]=N.useState(null),P=N.useRef(null);N.useEffect(()=>{if(!s)return;const de=Zt(tt(je,"shops",s,"staff"),Ae=>{const Ce=Ae.docs.map(Pe=>({id:Pe.id,...Pe.data()})).filter(Pe=>Pe.active!==!1).sort((Pe,yt)=>(Pe.name||"").localeCompare(yt.name||""));o(Ce)});return()=>de()},[s]);const Z=()=>{L({name:"",role:""}),d(!1),g(null)},ue=async de=>{de.preventDefault(),O(!0);const Ae={name:T.name.trim(),role:T.role.trim(),active:!0};try{p?await it(Ye(je,"shops",s,"staff",p),Ae):await Nr(tt(je,"shops",s,"staff"),{...Ae,email:"",bio:"",portfolio:[],createdAt:Wg()}),Z()}catch(Ce){console.error("Error saving staff member:",Ce)}finally{O(!1)}},xe=de=>{L({name:de.name,role:de.role||""}),g(de.id),d(!0)},be=async de=>{try{await it(Ye(je,"shops",s,"staff",de),{active:!1})}catch(Ae){console.error("Error deleting staff member:",Ae)}},De=de=>{W(de.id),A(de.bio||"")},ze=async de=>{B(!0);try{await it(Ye(je,"shops",s,"staff",de),{bio:S.trim()}),W(null),A("")}catch(Ae){console.error("Error saving bio:",Ae)}finally{B(!1)}},kt=de=>{I(de),F(""),oe(null),setTimeout(()=>{P.current&&(P.current.value="",P.current.click())},50)},ft=de=>{const Ae=de.target.files?.[0];if(Ae){if(!LO.includes(Ae.type)){alert("Please select a JPG, PNG, or WebP image.");return}if(Ae.size>VO){alert("File size must be under 5MB.");return}oe(Ae)}},sn=async de=>{if(K){$(!0);try{const Ae=Date.now(),Ce=K.name.split(".").pop(),Pe=`${Ae}.${Ce}`,yt=`shops/${s}/staff/${de}/portfolio/${Pe}`,ct=j1(S1,yt);await yI(ct,K);const ut=await vI(ct),Ve=r.find(ot=>ot.id===de)?.portfolio||[];await it(Ye(je,"shops",s,"staff",de),{portfolio:[...Ve,{url:ut,storagePath:yt,caption:R.trim(),uploadedAt:new Date().toISOString()}]}),I(null),F(""),oe(null)}catch(Ae){console.error("Error uploading photo:",Ae),alert("Upload failed. Please try again.")}finally{$(!1)}}},se=async(de,Ae)=>{const Ce=r.find(yt=>yt.id===de);if(!Ce)return;const Pe=Ce.portfolio[Ae];if(Pe){ve(`${de}-${Ae}`);try{if(Pe.storagePath)try{const ct=j1(S1,Pe.storagePath);await wI(ct)}catch(ct){console.warn("Storage delete warning:",ct)}const yt=Ce.portfolio.filter((ct,ut)=>ut!==Ae);await it(Ye(je,"shops",s,"staff",de),{portfolio:yt})}catch(yt){console.error("Error deleting photo:",yt),alert("Failed to delete photo.")}finally{ve(null)}}},_e=de=>{if(!de)return null;const Ae=PO.filter(Ce=>de[Ce.key]?.enabled);return Ae.length===0?null:Ae.map(Ce=>{const Pe=de[Ce.key];return`${Ce.short} ${G1(Pe.start)}${G1(Pe.end)}`})};return i.jsxs("div",{children:[i.jsx("input",{ref:P,type:"file",accept:".jpg,.jpeg,.png,.webp",className:"hidden",onChange:ft}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Staff"}),i.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Manage your team  assign availability and bookings per staff member"})]}),!u&&(ae?i.jsxs("button",{onClick:()=>{Z(),d(!0)},className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 hover:shadow-xl hover:shadow-blue-500/40 transition-all hover:-translate-y-0.5",children:[i.jsx(vi,{className:"w-4 h-4"}),"Add Staff"]}):i.jsxs("button",{onClick:()=>G(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white rounded-xl font-semibold shadow-lg shadow-amber-500/30 hover:shadow-xl hover:shadow-amber-500/40 transition-all hover:-translate-y-0.5",children:[i.jsx(If,{className:"w-4 h-4"}),"Upgrade to Add More"]}))]}),i.jsx(OO,{currentCount:r.length,limit:q,onUpgradeClick:()=>G(!0)}),i.jsx(MO,{isOpen:U,onClose:()=>G(!1),shopId:s,slug:t,currentTier:e?.subscriptionTier||"free",title:"Add More Staff Members",description:`Your ${e?.subscriptionTier||"Free"} plan allows ${q} staff member${q!==1?"s":""}. Upgrade to add more.`}),u&&i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:p?"Edit Staff Member":"New Staff Member"}),i.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Name *"}),i.jsx("input",{type:"text",value:T.name,onChange:de=>L({...T,name:de.target.value}),required:!0,placeholder:"e.g. Jane Smith",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Role (optional)"}),i.jsx("input",{type:"text",value:T.role,onChange:de=>L({...T,role:de.target.value}),placeholder:"e.g. Senior Stylist",className:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsxs("button",{type:"submit",disabled:V,className:"flex items-center gap-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl font-semibold shadow-lg shadow-blue-500/30 transition-all disabled:opacity-50",children:[i.jsx(ms,{className:"w-4 h-4"}),V?"Saving":p?"Update Staff":"Add Staff"]}),i.jsxs("button",{type:"button",onClick:Z,className:"flex items-center gap-2 px-6 py-2.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:[i.jsx(ha,{className:"w-4 h-4"}),"Cancel"]})]})]})]}),r.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("p",{className:"text-slate-800 font-medium mb-1",children:"No staff members yet"}),i.jsx("p",{className:"text-sm text-slate-600",children:"Add your team members to assign them availability and bookings"})]}):i.jsx("div",{className:"space-y-4",children:r.map(de=>{const Ae=_e(de.weeklyHours),Ce=de.portfolio||[];return i.jsxs("div",{children:[i.jsxs("div",{className:"bg-white border-2 border-slate-200 rounded-xl p-5 shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:de.name}),de.role&&i.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:de.role})]}),i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(Gt,{className:"w-5 h-5 text-blue-600"})})]}),i.jsx("div",{className:"mb-3",children:ce===de.id?i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:S,onChange:Pe=>A(Pe.target.value),placeholder:"Write a short bio  specialties, experience, personality",rows:3,maxLength:500,className:"w-full px-3 py-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none transition-all"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>ze(de.id),disabled:k,className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[k?i.jsx(Qs,{className:"w-3 h-3 animate-spin"}):i.jsx(ms,{className:"w-3 h-3"}),"Save Bio"]}),i.jsx("button",{onClick:()=>{W(null),A("")},className:"px-3 py-1.5 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"}),i.jsxs("span",{className:"text-xs text-slate-400 ml-auto",children:[S.length,"/500"]})]})]}):i.jsx("div",{onClick:()=>De(de),className:"cursor-pointer group",children:de.bio?i.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed group-hover:text-slate-800 transition-colors",children:[de.bio,i.jsx("span",{className:"ml-1.5 text-xs text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",children:"edit"})]}):i.jsx("p",{className:"text-sm text-slate-400 italic group-hover:text-blue-500 transition-colors",children:"+ Add a bio"})})}),Ae?i.jsx("div",{className:"mb-3 flex flex-wrap gap-1.5",children:Ae.map((Pe,yt)=>i.jsx("span",{className:"inline-block px-2 py-0.5 bg-green-50 text-green-700 border border-green-200 rounded text-xs font-medium",children:Pe},yt))}):i.jsx("p",{className:"text-xs text-slate-400 mb-3 italic",children:"No weekly hours set"}),Ce.length>0&&w!==de.id&&i.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[i.jsx("div",{className:"flex -space-x-1",children:Ce.slice(0,4).map((Pe,yt)=>i.jsx("img",{src:Pe.url,alt:Pe.caption||"Portfolio",className:"w-10 h-10 rounded-lg object-cover border-2 border-white shadow-sm"},yt))}),i.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[Ce.length," photo",Ce.length!==1?"s":""]})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsxs("button",{onClick:()=>b(x===de.id?null:de.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${x===de.id?"bg-blue-100 text-blue-700 border-blue-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[i.jsx(un,{className:"w-3.5 h-3.5"}),"Set Hours"]}),i.jsxs("button",{onClick:()=>j(w===de.id?null:de.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all border ${w===de.id?"bg-violet-100 text-violet-700 border-violet-300":"bg-slate-100 hover:bg-slate-200 text-slate-700 border-slate-200"}`,children:[i.jsx(KI,{className:"w-3.5 h-3.5"}),"Portfolio"]}),i.jsx("button",{onClick:()=>xe(de),className:"flex items-center justify-center gap-2 px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-all border border-slate-200",children:i.jsx(oj,{className:"w-3.5 h-3.5"})}),i.jsx("button",{onClick:()=>be(de.id),className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-sm font-medium transition-all border border-red-200",children:i.jsx(xu,{className:"w-3.5 h-3.5"})})]})]}),x===de.id&&i.jsx("div",{className:"mt-2",children:i.jsx(TO,{shopId:s,staffId:de.id,staffName:de.name,weeklyHours:de.weeklyHours,onClose:()=>b(null)})}),w===de.id&&i.jsxs("div",{className:"mt-2 bg-white border-2 border-violet-200 rounded-xl p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-800 flex items-center gap-2",children:[i.jsx(AD,{className:"w-4 h-4 text-violet-600"}),"Portfolio  ",de.name]}),i.jsxs("button",{onClick:()=>kt(de.id),disabled:M,className:"flex items-center gap-1.5 px-3 py-1.5 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:[i.jsx(vi,{className:"w-3 h-3"}),"Add Photo"]})]}),D===de.id&&K&&i.jsxs("div",{className:"mb-4 p-3 bg-violet-50 border border-violet-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-16 h-16 rounded-lg bg-slate-200 overflow-hidden flex-shrink-0",children:i.jsx("img",{src:URL.createObjectURL(K),alt:"Preview",className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-xs text-slate-600 font-medium mb-1 truncate",children:K.name}),i.jsxs("p",{className:"text-xs text-slate-400",children:[(K.size/1024/1024).toFixed(1)," MB"]})]})]}),i.jsx("input",{type:"text",value:R,onChange:Pe=>F(Pe.target.value),placeholder:"Add a caption (optional)",maxLength:200,className:"w-full px-3 py-2 text-sm border border-violet-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-violet-400 focus:border-transparent mb-2"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>sn(de.id),disabled:M,className:"flex items-center gap-1.5 px-4 py-2 bg-violet-500 hover:bg-violet-600 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:M?i.jsxs(i.Fragment,{children:[i.jsx(Qs,{className:"w-3 h-3 animate-spin"}),"Uploading"]}):i.jsxs(i.Fragment,{children:[i.jsx(ms,{className:"w-3 h-3"}),"Upload"]})}),i.jsx("button",{onClick:()=>{I(null),oe(null),F("")},className:"px-3 py-2 text-slate-600 hover:bg-slate-100 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}),Ce.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-3xl mb-2",children:""}),i.jsx("p",{className:"text-sm text-slate-500",children:"No portfolio photos yet. Add some to showcase work!"})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:Ce.map((Pe,yt)=>i.jsxs("div",{className:"group relative bg-slate-50 rounded-lg overflow-hidden border border-slate-200 shadow-sm",children:[i.jsx("div",{className:"aspect-square",children:i.jsx("img",{src:Pe.url,alt:Pe.caption||"Portfolio photo",className:"w-full h-full object-cover"})}),Pe.caption&&i.jsx("div",{className:"px-2 py-1.5",children:i.jsx("p",{className:"text-xs text-slate-600 truncate",children:Pe.caption})}),i.jsx("button",{onClick:()=>se(de.id,yt),disabled:Te===`${de.id}-${yt}`,className:"absolute top-1.5 right-1.5 w-7 h-7 bg-red-500/90 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity shadow-md disabled:opacity-50",title:"Delete photo",children:Te===`${de.id}-${yt}`?i.jsx(Qs,{className:"w-3.5 h-3.5 animate-spin"}):i.jsx(xu,{className:"w-3.5 h-3.5"})})]},yt))})]})]},de.id)})})]})}function el(s){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function BO(s){const e=new Date(s),t=e.getDay(),r=t===0?-6:1-t;return e.setDate(e.getDate()+r),e.setHours(0,0,0,0),e}function tl(s){return`$${Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function Y1(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}function W1(s){return new Date(s+"T12:00:00").toLocaleDateString("en-US",{weekday:"short"})}function r0(s,e){return e===0&&s===0?0:e===0?100:(s-e)/e*100}function zO({bookings:s}){const[e,t]=N.useState(null),[r,o]=N.useState(null),u=N.useMemo(()=>s.filter(F=>F.status==="confirmed"||F.status==="pending"||!F.status),[s]),d=N.useMemo(()=>{const F=new Date;return F.setHours(0,0,0,0),F},[]),p=N.useMemo(()=>el(d),[d]),g=N.useMemo(()=>BO(d),[d]),x=N.useMemo(()=>{const F=new Date(g);return F.setDate(F.getDate()+6),F},[g]),b=N.useMemo(()=>{const F=new Date(g);return F.setDate(F.getDate()-7),F},[g]),w=N.useMemo(()=>{const F=new Date(b);return F.setDate(F.getDate()+6),F},[b]),j=N.useMemo(()=>new Date(d.getFullYear(),d.getMonth(),1),[d]),T=N.useMemo(()=>new Date(d.getFullYear(),d.getMonth()-1,1),[d]),L=N.useMemo(()=>{const F=new Date(j);return F.setDate(F.getDate()-1),F},[j]),V=N.useMemo(()=>{const F=new Date(d);return F.setDate(F.getDate()-1),el(F)},[d]),O=N.useMemo(()=>{const F=ue=>ue.reduce((xe,be)=>xe+(Number(be.servicePrice)||0),0),D=(ue,xe,be)=>ue.date>=el(xe)&&ue.date<=el(be),I=F(u.filter(ue=>ue.date===p)),K=F(u.filter(ue=>ue.date===V)),oe=F(u.filter(ue=>D(ue,g,x))),Te=F(u.filter(ue=>D(ue,b,w))),ve=F(u.filter(ue=>D(ue,j,d))),P=F(u.filter(ue=>D(ue,T,L))),Z=F(u);return{today:I,todayChange:r0(I,K),week:oe,weekChange:r0(oe,Te),month:ve,monthChange:r0(ve,P),allTime:Z}},[u,p,V,g,x,b,w,j,L,d]),U=N.useMemo(()=>{const F=[];for(let D=13;D>=0;D--){const I=new Date(d);I.setDate(I.getDate()-D),F.push(el(I))}return F},[d]),G=N.useMemo(()=>{const F={};return U.forEach(D=>{F[D]=0}),u.forEach(D=>{F[D.date]!==void 0&&(F[D.date]+=Number(D.servicePrice)||0)}),U.map(D=>({date:D,value:F[D]}))},[u,U]),q=N.useMemo(()=>Math.max(...G.map(F=>F.value),1),[G]),ae=N.useMemo(()=>{const F={},D={};return U.forEach(I=>{F[I]=0,D[I]=0}),s.forEach(I=>{F[I.date]!==void 0&&(I.status==="cancelled"||I.status==="rejected"?D[I.date]++:F[I.date]++)}),U.map(I=>({date:I,confirmed:F[I],cancelled:D[I],total:F[I]+D[I]}))},[s,U]),ce=N.useMemo(()=>Math.max(...ae.map(F=>F.total),1),[ae]),W=N.useMemo(()=>{const F=s.length;if(F===0)return 100;const D=s.filter(I=>I.status==="cancelled"||I.status==="rejected").length;return Math.round((F-D)/F*100)},[s]),S=N.useMemo(()=>{const F=Array.from({length:7},()=>Array(24).fill(0));u.forEach(I=>{if(!I.date||!I.time)return;const oe=new Date(I.date+"T12:00:00").getDay(),Te=parseInt(I.time.split(":")[0],10);!isNaN(oe)&&!isNaN(Te)&&F[oe][Te]++});let D=0;return F.forEach(I=>I.forEach(K=>{K>D&&(D=K)})),{grid:F,max:D}},[u]),A=N.useMemo(()=>{const F={};return u.forEach(D=>{const I=D.serviceName||"Unknown";F[I]||(F[I]={name:I,count:0,revenue:0}),F[I].count++,F[I].revenue+=Number(D.servicePrice)||0}),Object.values(F).map(D=>({...D,avgRevenue:D.count>0?D.revenue/D.count:0})).sort((D,I)=>I.revenue-D.revenue)},[u]),k=N.useMemo(()=>{const F={};return u.forEach(D=>{const I=D.staffName||"Unassigned";F[I]||(F[I]={name:I,count:0,revenue:0,clients:new Set}),F[I].count++,F[I].revenue+=Number(D.servicePrice)||0,D.clientEmail&&F[I].clients.add(D.clientEmail.toLowerCase())}),Object.values(F).map(D=>({...D,clientCount:D.clients.size})).sort((D,I)=>I.revenue-D.revenue)},[u]),B=N.useMemo(()=>{const F=u.map(be=>be.clientEmail?.toLowerCase()).filter(Boolean),D=new Set(F).size,I=u.filter(be=>be.date>=el(j)&&be.date<=p),K=new Set(I.map(be=>be.clientEmail?.toLowerCase()).filter(Boolean)),oe=u.filter(be=>be.date<el(j)),Te=new Set(oe.map(be=>be.clientEmail?.toLowerCase()).filter(Boolean));let ve=0,P=0;K.forEach(be=>{Te.has(be)?P++:ve++});const Z={};u.forEach(be=>{const De=be.clientEmail?.toLowerCase();De&&(Z[De]||(Z[De]={email:De,name:be.clientName||De,count:0}),Z[De].count++,be.clientName&&(Z[De].name=be.clientName))});const ue=Object.values(Z).sort((be,De)=>De.count-be.count).slice(0,10),xe=D>0?u.length/D:0;return{uniqueClients:D,newThisMonth:ve,returningThisMonth:P,topClients:ue,avgBookingsPerClient:xe}},[u,j,p]),M=({value:F,suffix:D="vs prev"})=>{if(F===0)return i.jsxs("span",{className:"flex items-center gap-0.5 text-xs font-medium text-slate-400",children:[i.jsx(FD,{className:"w-3 h-3"})," 0% ",D]});const I=F>0;return i.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-semibold ${I?"text-emerald-600":"text-red-500"}`,children:[I?i.jsx(UI,{className:"w-3 h-3"}):i.jsx(DI,{className:"w-3 h-3"}),I?"+":"",Math.round(F),"% ",D]})},$=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],R=Array.from({length:15},(F,D)=>D+7);return i.jsxs("div",{className:"animate-fade-in space-y-6",children:[i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Today's Revenue",value:O.today,change:O.todayChange,suffix:"vs yesterday",icon:L0,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:O.week,change:O.weekChange,suffix:"vs last week",icon:Df,color:"bg-violet-100 text-violet-600"},{label:"This Month",value:O.month,change:O.monthChange,suffix:"vs last month",icon:Vt,color:"bg-emerald-100 text-emerald-600"},{label:"All-time Revenue",value:O.allTime,change:null,icon:ax,color:"bg-amber-100 text-amber-600"}].map(F=>{const D=F.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${F.color} rounded-xl flex items-center justify-center`,children:i.jsx(D,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:tl(F.value)}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5 mb-1",children:F.label}),F.change!==null&&i.jsx(M,{value:F.change,suffix:F.suffix})]},F.label)})}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Revenue  Last 14 Days"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Daily revenue from confirmed & pending bookings"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-[600px]",children:[i.jsxs("div",{className:"flex items-end gap-0",children:[i.jsxs("div",{className:"flex flex-col justify-between h-48 pr-2 text-right flex-shrink-0 w-16",children:[i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:tl(q)}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:tl(q/2)}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"$0"})]}),i.jsx("div",{className:"flex-1 flex items-end gap-1 h-48 border-b border-l border-slate-200 pl-1 pb-0 relative",children:G.map((F,D)=>{const I=q>0?F.value/q*100:0,K=e===D;return i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative group",onMouseEnter:()=>t(D),onMouseLeave:()=>t(null),onTouchStart:()=>t(D),children:[K&&i.jsxs("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[tl(F.value),i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),i.jsx("div",{className:"w-full rounded-t-md transition-all duration-200 cursor-pointer",style:{height:`${Math.max(I,F.value>0?2:0)}%`,background:K?"linear-gradient(to top, #2563eb, #60a5fa)":"linear-gradient(to top, #3b82f6, #93c5fd)",minHeight:F.value>0?"4px":"0px"}})]},F.date)})})]}),i.jsx("div",{className:"flex ml-16 pl-1",children:G.map(F=>i.jsxs("div",{className:"flex-1 text-center",children:[i.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:W1(F.date)}),i.jsx("div",{className:"text-[9px] text-slate-400",children:Y1(F.date)})]},F.date))})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Booking Trends  Last 14 Days"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Daily bookings breakdown"})]}),i.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-blue-500"})," Confirmed"]}),i.jsxs("span",{className:"flex items-center gap-1.5",children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm bg-red-400"})," Cancelled"]}),i.jsxs("span",{className:"px-2.5 py-1 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-lg font-semibold",children:[W,"% completion"]})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-[600px]",children:[i.jsxs("div",{className:"flex items-end gap-0",children:[i.jsxs("div",{className:"flex flex-col justify-between h-40 pr-2 text-right flex-shrink-0 w-16",children:[i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:ce}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:Math.round(ce/2)}),i.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:"0"})]}),i.jsx("div",{className:"flex-1 flex items-end gap-1 h-40 border-b border-l border-slate-200 pl-1 relative",children:ae.map((F,D)=>{const I=ce>0?F.confirmed/ce*100:0,K=ce>0?F.cancelled/ce*100:0,oe=r===D;return i.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full relative",onMouseEnter:()=>o(D),onMouseLeave:()=>o(null),onTouchStart:()=>o(D),children:[oe&&i.jsxs("div",{className:"absolute -top-12 left-1/2 -translate-x-1/2 bg-slate-900 text-white text-[10px] font-semibold px-2.5 py-1.5 rounded-lg shadow-lg whitespace-nowrap z-10",children:[F.confirmed," confirmed, ",F.cancelled," cancelled",i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-slate-900"})]}),i.jsxs("div",{className:"w-full flex flex-col items-stretch",children:[F.cancelled>0&&i.jsx("div",{className:"w-full rounded-t-md bg-red-400 transition-all duration-200",style:{height:`${Math.max(K,2)}%`}}),F.confirmed>0&&i.jsx("div",{className:`w-full bg-blue-500 transition-all duration-200 ${F.cancelled===0?"rounded-t-md":""}`,style:{height:`${Math.max(I,2)}%`}})]})]},F.date)})})]}),i.jsx("div",{className:"flex ml-16 pl-1",children:ae.map(F=>i.jsxs("div",{className:"flex-1 text-center",children:[i.jsx("div",{className:"text-[9px] text-slate-500 font-medium mt-1.5",children:W1(F.date)}),i.jsx("div",{className:"text-[9px] text-slate-400",children:Y1(F.date)})]},F.date))})]})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Busiest Times"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Booking density by day of week and hour"}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-[600px]",children:[i.jsxs("table",{className:"w-full border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{children:[i.jsx("th",{className:"w-12"}),R.map(F=>i.jsxs("th",{className:"text-[10px] text-slate-400 font-medium pb-2 text-center px-0.5",children:[F%12||12,F>=12?"p":"a"]},F))]})}),i.jsx("tbody",{children:[1,2,3,4,5,6,0].map(F=>i.jsxs("tr",{children:[i.jsx("td",{className:"text-[11px] text-slate-500 font-semibold pr-2 py-0.5 text-right",children:$[F]}),R.map(D=>{const I=S.grid[F][D],K=S.max||1,oe=I/K;let Te="bg-slate-50";return I>0&&(oe<=.2?Te="bg-blue-100":oe<=.4?Te="bg-blue-200":oe<=.6?Te="bg-blue-300":oe<=.8?Te="bg-blue-500 text-white":Te="bg-blue-700 text-white"),i.jsx("td",{className:"px-0.5 py-0.5",children:i.jsx("div",{className:`w-full aspect-square rounded-sm ${Te} flex items-center justify-center text-[9px] font-bold transition-all hover:ring-2 hover:ring-blue-400 hover:ring-offset-1 cursor-default`,title:`${$[F]} ${D}:00  ${I} booking${I!==1?"s":""}`,children:I>0?I:""})},D)})]},F))})]}),i.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-3",children:[i.jsx("span",{className:"text-[10px] text-slate-400",children:"Less"}),["bg-slate-50","bg-blue-100","bg-blue-200","bg-blue-300","bg-blue-500","bg-blue-700"].map((F,D)=>i.jsx("div",{className:`w-4 h-4 rounded-sm ${F} border border-slate-200`},D)),i.jsx("span",{className:"text-[10px] text-slate-400",children:"More"})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Top Services"}),i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Ranked by revenue from confirmed & pending bookings"}),A.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(xs,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No service data yet"})]}):i.jsx("div",{className:"space-y-2",children:A.map((F,D)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 font-bold text-sm flex-shrink-0",children:D+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:F.name}),i.jsxs("div",{className:"text-xs text-slate-500",children:[F.count," booking",F.count!==1?"s":"","  avg ",tl(F.avgRevenue)]})]}),i.jsx("div",{className:"text-sm font-bold text-blue-600 flex-shrink-0",children:tl(F.revenue)})]},F.name))})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Staff Performance"}),i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Bookings, revenue & clients per staff member"}),k.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Gt,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No staff data yet"})]}):i.jsx("div",{className:"space-y-2",children:k.map((F,D)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center text-violet-600 font-bold text-sm flex-shrink-0",children:D+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:F.name}),i.jsxs("div",{className:"text-xs text-slate-500",children:[F.count," booking",F.count!==1?"s":"","  ",F.clientCount," client",F.clientCount!==1?"s":""]})]}),i.jsx("div",{className:"text-sm font-bold text-violet-600 flex-shrink-0",children:tl(F.revenue)})]},F.name))})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Client Insights"}),i.jsx("p",{className:"text-xs text-slate-500 mb-5",children:"Understanding your client base"}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[i.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:B.uniqueClients}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:"Total Unique Clients"})]}),i.jsxs("div",{className:"bg-emerald-50 rounded-xl border border-emerald-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-emerald-700",children:B.newThisMonth}),i.jsx("div",{className:"text-xs font-medium text-emerald-600 mt-0.5",children:"New This Month"})]}),i.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-blue-700",children:B.returningThisMonth}),i.jsx("div",{className:"text-xs font-medium text-blue-600 mt-0.5",children:"Returning This Month"})]}),i.jsxs("div",{className:"bg-violet-50 rounded-xl border border-violet-100 p-4 text-center",children:[i.jsx("div",{className:"text-2xl font-extrabold text-violet-700",children:B.avgBookingsPerClient.toFixed(1)}),i.jsx("div",{className:"text-xs font-medium text-violet-600 mt-0.5",children:"Avg Bookings / Client"})]})]}),i.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"Top Clients by Frequency"}),B.topClients.length===0?i.jsxs("div",{className:"text-center py-6",children:[i.jsx(xl,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-slate-400",children:"No client data yet"})]}):i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:B.topClients.map((F,D)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-slate-200 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center text-amber-700 font-bold text-xs flex-shrink-0",children:D+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:F.name}),i.jsx("div",{className:"text-xs text-slate-400 truncate",children:F.email})]}),i.jsxs("div",{className:"flex-shrink-0 px-2.5 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-bold",children:[F.count," visit",F.count!==1?"s":""]})]},F.email))})]})]})}function Cj({waitingAhead:s=[],inProgress:e=[],staffCount:t=1,upcomingBookings:r=[],defaultDuration:o=30}){const u=Math.max(t,1),d=Date.now(),p=e.map(b=>{const w=b.startedAt?.toDate?.()||(b.startedAt?new Date(b.startedAt):null);if(!w)return 0;const j=(d-w.getTime())/6e4,T=b.estimatedDuration||o;return Math.max(0,T-j)});p.sort((b,w)=>b-w);const g=[];for(let b=0;b<u;b++)g.push(p[b]||0);g.sort((b,w)=>b-w);const x=s.map(b=>b.estimatedDuration||o);for(const b of x)g[0]+=b,g.sort((w,j)=>w-j);return Math.round(g[0])}function kj({waitingQueue:s=[],inProgress:e=[],staffCount:t=1,upcomingBookings:r=[],defaultDuration:o=30}){const u=new Map;for(let d=0;d<s.length;d++){const p=s.slice(0,d),g=Cj({waitingAhead:p,inProgress:e,staffCount:t,upcomingBookings:r,defaultDuration:o});u.set(s[d].id,g)}return u}function FO(s=[],e=3){const t=new Date,r=new Date(t.getTime()+e*60*60*1e3),o=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;return s.filter(u=>{if(u.status==="cancelled"||u.status==="rejected"||u.date!==o)return!1;const d=new Date(`${u.date}T${u.time}`);return d>=t&&d<=r}).sort((u,d)=>`${u.time}`.localeCompare(`${d.time}`))}function qO(s){if(!s)return"0m";const e=s?.toDate?.()||new Date(s),t=Math.floor((Date.now()-e.getTime())/6e4);if(t<1)return"<1m";if(t<60)return`${t}m`;const r=Math.floor(t/60),o=t%60;return o>0?`${r}h ${o}m`:`${r}h`}function $O(s){if(s==null)return"";if(s<1)return"Next up";if(s<60)return`~${s}m`;const e=Math.floor(s/60),t=s%60;return t>0?`~${e}h ${t}m`:`~${e}h`}function HO({shopId:s,services:e,staff:t,bookings:r}){const[o,u]=N.useState([]),[d,p]=N.useState(!1),[g,x]=N.useState(!1),[b,w]=N.useState(!1),[j,T]=N.useState({clientName:"",serviceId:"",staffId:"",estimatedDuration:30});N.useEffect(()=>{if(!s)return;const D=Zt(tt(je,"shops",s,"walkins"),I=>{const K=I.docs.map(oe=>({id:oe.id,...oe.data()}));u(K)});return()=>D()},[s]);const L=N.useMemo(()=>o.filter(D=>D.status==="waiting").sort((D,I)=>(D.position||0)-(I.position||0)),[o]),V=N.useMemo(()=>o.filter(D=>D.status==="in-progress").sort((D,I)=>{const K=D.startedAt?.toDate?.()?.getTime()||0,oe=I.startedAt?.toDate?.()?.getTime()||0;return K-oe}),[o]),O=N.useMemo(()=>{const D=new Date;return D.setHours(0,0,0,0),D},[]),U=N.useMemo(()=>o.filter(D=>{if(D.status!=="completed"&&D.status!=="no-show")return!1;const I=D.completedAt?.toDate?.()||(D.completedAt?new Date(D.completedAt):null);return I?I>=O:!1}).sort((D,I)=>{const K=D.completedAt?.toDate?.()?.getTime()||0;return(I.completedAt?.toDate?.()?.getTime()||0)-K}),[o,O]),G=N.useMemo(()=>Math.max(t.filter(D=>D.active!==!1).length,1),[t]),q=N.useMemo(()=>FO(r,3),[r]),ae=N.useMemo(()=>kj({waitingQueue:L,inProgress:V,staffCount:G,upcomingBookings:q,defaultDuration:30}),[L,V,G,q]),ce=N.useMemo(()=>{const D=U.filter(K=>K.status==="completed"&&K.joinedAt&&K.startedAt).map(K=>{const oe=K.joinedAt?.toDate?.()||new Date(K.joinedAt),Te=K.startedAt?.toDate?.()||new Date(K.startedAt);return Math.floor((Te.getTime()-oe.getTime())/6e4)}).filter(K=>K>=0),I=D.length>0?Math.round(D.reduce((K,oe)=>K+oe,0)/D.length):0;return{waiting:L.length,avgWait:I,completedToday:U.filter(K=>K.status==="completed").length}},[L,U]),W=D=>{const I=e.find(K=>K.id===D);T(K=>({...K,serviceId:D,estimatedDuration:I?.duration||30}))},S=()=>L.length===0?1:Math.max(...L.map(D=>D.position||0))+1,A=N.useMemo(()=>o.filter(D=>{const I=D.joinedAt?.toDate?.()||(D.joinedAt?new Date(D.joinedAt):null);return I&&I>=O}).length,[o,O]),k=async D=>{D.preventDefault(),w(!0);const I=e.find(ve=>ve.id===j.serviceId),K=t.find(ve=>ve.id===j.staffId),oe=S(),Te=j.clientName.trim()||`Walk-in #${A+1}`;try{await Nr(tt(je,"shops",s,"walkins"),{clientName:Te,serviceId:j.serviceId||null,serviceName:I?.name||null,staffId:j.staffId||null,staffName:K?.name||null,estimatedDuration:parseInt(j.estimatedDuration)||30,status:"waiting",position:oe,joinedAt:Rt.now(),startedAt:null,completedAt:null,estimatedWaitMinutes:null}),T({clientName:"",serviceId:"",staffId:"",estimatedDuration:30}),p(!1)}catch(ve){console.error("Error adding walk-in:",ve)}finally{w(!1)}},B=async D=>{try{await it(Ye(je,"shops",s,"walkins",D),{status:"in-progress",startedAt:Rt.now()});const I=L.filter(K=>K.id!==D).sort((K,oe)=>(K.position||0)-(oe.position||0));for(let K=0;K<I.length;K++)await it(Ye(je,"shops",s,"walkins",I[K].id),{position:K+1})}catch(I){console.error("Error starting service:",I)}},M=async D=>{try{await it(Ye(je,"shops",s,"walkins",D),{status:"completed",completedAt:Rt.now()})}catch(I){console.error("Error completing service:",I)}},$=async D=>{try{await it(Ye(je,"shops",s,"walkins",D),{status:"no-show",completedAt:Rt.now()});const I=L.filter(K=>K.id!==D).sort((K,oe)=>(K.position||0)-(oe.position||0));for(let K=0;K<I.length;K++)await it(Ye(je,"shops",s,"walkins",I[K].id),{position:K+1})}catch(I){console.error("Error marking no-show:",I)}},R=async D=>{const I=L.findIndex(Te=>Te.id===D);if(I<=0)return;const K=L[I-1],oe=L[I];try{await it(Ye(je,"shops",s,"walkins",oe.id),{position:K.position}),await it(Ye(je,"shops",s,"walkins",K.id),{position:oe.position})}catch(Te){console.error("Error reordering:",Te)}},F=async D=>{const I=L.findIndex(Te=>Te.id===D);if(I<0||I>=L.length-1)return;const K=L[I+1],oe=L[I];try{await it(Ye(je,"shops",s,"walkins",oe.id),{position:K.position}),await it(Ye(je,"shops",s,"walkins",K.id),{position:oe.position})}catch(Te){console.error("Error reordering:",Te)}};return i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[{label:"Currently Waiting",value:ce.waiting,icon:Gt,color:"bg-blue-100 text-blue-600"},{label:"Avg Wait",value:ce.avgWait>0?`${ce.avgWait}m`:"",icon:dj,color:"bg-amber-100 text-amber-600"},{label:"Completed Today",value:ce.completedToday,icon:Df,color:"bg-emerald-100 text-emerald-600"}].map(D=>{const I=D.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${D.color} rounded-xl flex items-center justify-center`,children:i.jsx(I,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:D.value}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:D.label})]},D.label)})}),q.length>0&&i.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(gl,{className:"w-4 h-4 text-amber-600"}),i.jsx("span",{className:"text-sm font-bold text-amber-800",children:"Upcoming Online Bookings"})]}),i.jsx("div",{className:"space-y-1",children:q.slice(0,5).map(D=>{const[I,K]=(D.time||"").split(":"),oe=parseInt(I),Te=`${oe%12||12}:${K} ${oe>=12?"PM":"AM"}`;return i.jsxs("div",{className:"text-xs text-amber-700 flex items-center gap-2",children:[i.jsx(un,{className:"w-3 h-3"}),i.jsx("span",{className:"font-medium",children:Te}),i.jsx("span",{children:""}),i.jsx("span",{children:D.clientName}),D.serviceName&&i.jsxs("span",{className:"text-amber-500",children:["(",D.serviceName,")"]}),D.staffName&&i.jsxs("span",{className:"text-violet-600",children:["with ",D.staffName]})]},D.id)})})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Walk-in Queue"}),!d&&i.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 transition-all hover:-translate-y-0.5",children:[i.jsx(vi,{className:"w-4 h-4"}),"Add Walk-in"]})]}),d&&i.jsxs("form",{onSubmit:k,className:"mb-5 p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[i.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3",children:"New Walk-in"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Client Name"}),i.jsx("input",{type:"text",value:j.clientName,onChange:D=>T(I=>({...I,clientName:D.target.value})),placeholder:`Walk-in #${A+1}`,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Service"}),i.jsxs("select",{value:j.serviceId,onChange:D=>W(D.target.value),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"",children:"No service selected"}),e.map(D=>i.jsxs("option",{value:D.id,children:[D.name," (",D.duration,"min)"]},D.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Staff Preference"}),i.jsxs("select",{value:j.staffId,onChange:D=>T(I=>({...I,staffId:D.target.value})),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"",children:"Next available"}),t.map(D=>i.jsx("option",{value:D.id,children:D.name},D.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Est. Duration (min)"}),i.jsx("select",{value:j.estimatedDuration,onChange:D=>T(I=>({...I,estimatedDuration:parseInt(D.target.value)})),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[15,30,45,60,90,120].map(D=>i.jsx("option",{value:D,children:D<60?`${D} min`:`${D/60}h${D%60?` ${D%60}m`:""}`},D))})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{type:"submit",disabled:b,className:"flex items-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 transition-all disabled:opacity-50",children:[i.jsx(vi,{className:"w-4 h-4"}),b?"Adding":"Add to Queue"]}),i.jsx("button",{type:"button",onClick:()=>{p(!1),T({clientName:"",serviceId:"",staffId:"",estimatedDuration:30})},className:"px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Cancel"})]})]}),L.length===0&&V.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Gt,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No walk-ins in queue"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Add a walk-in client to start the queue."})]}):i.jsxs(i.Fragment,{children:[L.length>0&&i.jsxs("div",{className:"mb-5",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[i.jsx(un,{className:"w-4 h-4 text-blue-500"}),"Waiting",i.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:L.length})]}),i.jsx("div",{className:"space-y-2",children:L.map((D,I)=>{const K=ae.get(D.id);return i.jsxs("div",{className:"group flex items-center gap-3 border border-slate-200 rounded-xl p-3.5 hover:border-slate-300 hover:shadow-sm transition-all",children:[i.jsxs("div",{className:"flex flex-col items-center gap-0.5",children:[i.jsx("button",{onClick:()=>R(D.id),disabled:I===0,className:"p-0.5 text-slate-400 hover:text-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:i.jsx(V0,{className:"w-4 h-4"})}),i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center font-bold text-blue-700 text-sm",children:I+1}),i.jsx("button",{onClick:()=>F(D.id),disabled:I===L.length-1,className:"p-0.5 text-slate-400 hover:text-slate-700 disabled:opacity-20 disabled:cursor-not-allowed transition-all",children:i.jsx(P0,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:D.clientName}),i.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-blue-600 border border-blue-200 text-[10px] font-bold rounded-md",children:"WAITING"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-slate-500",children:[D.serviceName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(xs,{className:"w-3 h-3 text-blue-400"}),D.serviceName]}),D.staffName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(xl,{className:"w-3 h-3 text-violet-400"}),D.staffName]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(un,{className:"w-3 h-3"}),D.estimatedDuration||30,"min"]})]})]}),i.jsxs("div",{className:"text-right mr-2",children:[i.jsx("div",{className:"text-sm font-bold text-amber-600",children:$O(K)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"est. wait"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("button",{onClick:()=>B(D.id),className:"flex items-center gap-1 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 text-emerald-700 border border-emerald-200 rounded-lg text-xs font-semibold transition-all",title:"Start Service",children:[i.jsx(e0,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"Start"})]}),i.jsxs("button",{onClick:()=>$(D.id),className:"flex items-center gap-1 px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 rounded-lg text-xs font-semibold transition-all",title:"No-show",children:[i.jsx(Da,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"No-show"})]})]})]},D.id)})})]}),V.length>0&&i.jsxs("div",{className:"mb-5",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 flex items-center gap-2",children:[i.jsx(e0,{className:"w-4 h-4 text-emerald-500"}),"In Progress",i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 border border-emerald-200 text-xs font-bold rounded-full",children:V.length})]}),i.jsx("div",{className:"space-y-2",children:V.map(D=>i.jsxs("div",{className:"flex items-center gap-3 border border-emerald-200 bg-emerald-50/50 rounded-xl p-3.5 transition-all",children:[i.jsx("div",{className:"w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center",children:i.jsx(e0,{className:"w-4 h-4 text-emerald-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:D.clientName}),i.jsx("span",{className:"px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 text-[10px] font-bold rounded-md",children:"IN PROGRESS"})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-0.5 text-xs text-slate-500",children:[D.serviceName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(xs,{className:"w-3 h-3 text-blue-400"}),D.serviceName]}),D.staffName&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(xl,{className:"w-3 h-3 text-violet-400"}),D.staffName]})]})]}),i.jsxs("div",{className:"text-right mr-2",children:[i.jsx("div",{className:"text-sm font-bold text-emerald-600",children:qO(D.startedAt)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"elapsed"})]}),i.jsxs("button",{onClick:()=>M(D.id),className:"flex items-center gap-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 border border-blue-200 rounded-lg text-xs font-semibold transition-all",title:"Complete",children:[i.jsx(Kn,{className:"w-3.5 h-3.5"}),i.jsx("span",{className:"hidden sm:inline",children:"Complete"})]})]},D.id))})]})]})]}),U.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("button",{onClick:()=>x(!g),className:"w-full flex items-center justify-between",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 flex items-center gap-2",children:[i.jsx(Kn,{className:"w-4 h-4 text-slate-400"}),"Completed Today",i.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-500 border border-slate-200 text-xs font-bold rounded-full",children:U.length})]}),i.jsx(Rf,{className:`w-4 h-4 text-slate-400 transition-transform ${g?"rotate-90":""}`})]}),g&&i.jsx("div",{className:"mt-3 space-y-2",children:U.map(D=>i.jsxs("div",{className:"flex items-center gap-3 border border-slate-100 rounded-lg p-3 bg-slate-50/50",children:[i.jsx("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center bg-slate-100",children:D.status==="no-show"?i.jsx(Da,{className:"w-3.5 h-3.5 text-red-400"}):i.jsx(Kn,{className:"w-3.5 h-3.5 text-emerald-400"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-slate-700 text-sm truncate",children:D.clientName}),i.jsx("span",{className:`text-[10px] font-bold rounded-md px-1.5 py-0.5 border ${D.status==="no-show"?"bg-red-50 text-red-600 border-red-200":"bg-emerald-50 text-emerald-600 border-emerald-200"}`,children:D.status==="no-show"?"NO-SHOW":"COMPLETED"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[D.serviceName&&i.jsx("span",{children:D.serviceName}),D.staffName&&i.jsxs("span",{children:[" ",D.staffName]})]})]})]},D.id))})]})]})}function GO(s,e){const t=new Date(s+"T12:00:00"),r=e.getTime()-t.getTime();return Math.floor(r/864e5)}function hh(s){return`$${Number(s).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function $c(s){return s?new Date(s+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}function YO(s,e,t){return s>90?"lost":s>t?"at-risk":s>e?"getting-cold":"active"}const fh={active:{label:"Active",bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",icon:rx,iconColor:"text-emerald-500"},"getting-cold":{label:"Getting Cold",bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200",icon:uj,iconColor:"text-amber-500"},"at-risk":{label:"At Risk",bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",icon:gl,iconColor:"text-orange-500"},lost:{label:"Lost",bg:"bg-red-50",text:"text-red-700",border:"border-red-200",icon:wD,iconColor:"text-red-500"}};function WO({shopId:s,bookings:e,shop:t,slug:r}){const[o,u]=N.useState({}),[d,p]=N.useState(null),[g,x]=N.useState(null),[b,w]=N.useState(""),[j,T]=N.useState(""),[L,V]=N.useState("all"),[O,U]=N.useState("lastVisit"),[G,q]=N.useState("asc"),[ae,ce]=N.useState(null),[W,S]=N.useState(!1),[A,k]=N.useState(null),[B,M]=N.useState(!1),[$,R]=N.useState(null),F=t?.winbackSettings?.warningDays||30,D=t?.winbackSettings?.inactiveDays||60,I=t?.winbackSettings?.enabled!==!1,K=se=>se.toLowerCase().replace(/\./g,"_dot_").replace(/@/g,"_at_");N.useEffect(()=>{if(!s)return;const se=Zt(tt(je,"shops",s,"clientNotes"),_e=>{const de={};_e.docs.forEach(Ae=>{de[Ae.id]=Ae.data()}),u(de)});return()=>se()},[s]);const oe=N.useMemo(()=>new Date,[]),Te=N.useMemo(()=>e.filter(se=>se.status==="confirmed"||se.status==="pending"||!se.status),[e]),ve=N.useMemo(()=>{const se={};return Te.forEach(_e=>{const de=_e.clientEmail?.toLowerCase();if(!de)return;se[de]||(se[de]={email:de,name:_e.clientName||de,phone:_e.clientPhone||"",totalVisits:0,totalSpent:0,lastVisitDate:null,firstVisitDate:null,bookings:[],serviceFrequency:{},staffFrequency:{}});const Ae=se[de];_e.clientName&&(Ae.name=_e.clientName),_e.clientPhone&&(Ae.phone=_e.clientPhone),Ae.totalVisits++,Ae.totalSpent+=Number(_e.servicePrice)||0,Ae.bookings.push(_e),(!Ae.lastVisitDate||_e.date>Ae.lastVisitDate)&&(Ae.lastVisitDate=_e.date),(!Ae.firstVisitDate||_e.date<Ae.firstVisitDate)&&(Ae.firstVisitDate=_e.date),_e.serviceName&&(Ae.serviceFrequency[_e.serviceName]=(Ae.serviceFrequency[_e.serviceName]||0)+1),_e.staffName&&(Ae.staffFrequency[_e.staffName]=(Ae.staffFrequency[_e.staffName]||0)+1)}),Object.values(se).map(_e=>{const de=_e.lastVisitDate?GO(_e.lastVisitDate,oe):999,Ae=YO(de,F,D),Ce=Object.entries(_e.serviceFrequency).sort((ke,Ve)=>Ve[1]-ke[1])[0]?.[0]||null,Pe=Object.entries(_e.staffFrequency).sort((ke,Ve)=>Ve[1]-ke[1])[0]?.[0]||null,yt=_e.totalVisits>0?_e.totalSpent/_e.totalVisits:0,ct=K(_e.email),ut=o[ct];return{..._e,daysSinceLastVisit:de,status:Ae,favoriteService:Ce,favoriteStaff:Pe,avgSpending:yt,encodedEmail:ct,notes:ut?.notes||"",contacted:ut?.contacted||!1,contactedAt:ut?.contactedAt||null,tags:ut?.tags||[]}})},[Te,oe,F,D,o]),P=N.useMemo(()=>{const se={all:ve.length,active:0,"getting-cold":0,"at-risk":0,lost:0};return ve.forEach(_e=>{se[_e.status]++}),se},[ve]),Z=N.useMemo(()=>ve.filter(se=>(se.status==="at-risk"||se.status==="lost")&&!se.contacted),[ve]),ue=N.useMemo(()=>{let se=ve;if(j.trim()){const _e=j.toLowerCase();se=se.filter(de=>de.name.toLowerCase().includes(_e)||de.email.includes(_e)||de.phone.includes(_e))}return L!=="all"&&(se=se.filter(_e=>_e.status===L)),se=[...se].sort((_e,de)=>{if(O==="lastVisit"){const Ae=(_e.lastVisitDate||"").localeCompare(de.lastVisitDate||"");return G==="asc"?Ae:-Ae}return O==="totalVisits"?G==="desc"?de.totalVisits-_e.totalVisits:_e.totalVisits-de.totalVisits:O==="totalSpent"?G==="desc"?de.totalSpent-_e.totalSpent:_e.totalSpent-de.totalSpent:0}),se},[ve,j,L,O,G]),xe=se=>{O===se?q(_e=>_e==="asc"?"desc":"asc"):(U(se),q(se==="lastVisit"?"asc":"desc"))},be=N.useCallback(se=>{const _e=t?.name||"our shop",de=`${window.location.origin}${window.location.pathname}#/shop/${r}`;return`Hi ${se.name.split(" ")[0]}, we miss you at ${_e}! It's been ${se.daysSinceLastVisit} days since your last visit.${se.favoriteService?` Book your next ${se.favoriteService} today:`:" Book your next appointment:"} ${de}`},[t,r]),De=se=>{const _e=be(se);k({email:se.email,encodedEmail:se.encodedEmail,name:se.name,message:_e})},ze=async(se,_e)=>{try{await navigator.clipboard.writeText(se),ce(_e),setTimeout(()=>ce(null),2e3)}catch(de){console.error("Failed to copy:",de)}},kt=async se=>{R(se);try{const _e=Ye(je,"shops",s,"clientNotes",se),de=await Qp(_e),Ae=de.exists()?de.data():{};await Xp(_e,{...Ae,contacted:!0,contactedAt:new Date().toISOString()}),k(null)}catch(_e){console.error("Error marking as contacted:",_e)}finally{R(null)}},ft=async se=>{try{const _e=Ye(je,"shops",s,"clientNotes",se),de=await Qp(_e),Ae=de.exists()?de.data():{};await Xp(_e,{...Ae,contacted:!1,contactedAt:null})}catch(_e){console.error("Error resetting contacted status:",_e)}},sn=async se=>{M(!0);try{const _e=Ye(je,"shops",s,"clientNotes",se),de=await Qp(_e),Ae=de.exists()?de.data():{};await Xp(_e,{...Ae,notes:b}),x(null)}catch(_e){console.error("Error saving notes:",_e)}finally{M(!1)}};return i.jsxs("div",{className:"animate-fade-in space-y-6",children:[I&&Z.length>0&&i.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-5",children:[i.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>S(!W),children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:i.jsx(gl,{className:"w-5 h-5 text-orange-600"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-base font-bold text-slate-900",children:[Z.length," client",Z.length!==1?"s":""," need",Z.length===1?"s":""," attention"]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Haven't visited in over ",D," days  send a win-back message to re-engage"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"px-2.5 py-1 bg-orange-100 text-orange-700 border border-orange-200 text-xs font-bold rounded-lg",children:Z.length}),W?i.jsx(V0,{className:"w-5 h-5 text-slate-400"}):i.jsx(P0,{className:"w-5 h-5 text-slate-400"})]})]}),W&&i.jsx("div",{className:"mt-4 space-y-2.5",children:Z.sort((se,_e)=>_e.daysSinceLastVisit-se.daysSinceLastVisit).map(se=>i.jsxs("div",{className:"bg-white rounded-xl border border-orange-100 p-4 flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx("div",{className:"w-9 h-9 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(xl,{className:"w-4 h-4 text-orange-600"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:se.name}),i.jsxs("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${fh[se.status].bg} ${fh[se.status].text} ${fh[se.status].border}`,children:[se.daysSinceLastVisit," days ago"]})]}),i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2 flex-wrap mt-0.5",children:[i.jsxs("span",{children:["Last: ",$c(se.lastVisitDate)]}),se.favoriteService&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-slate-300",children:""}),i.jsxs("span",{className:"text-blue-600",children:["Loves ",se.favoriteService]})]}),i.jsx("span",{className:"text-slate-300",children:""}),i.jsxs("span",{children:[se.totalVisits," visit",se.totalVisits!==1?"s":""]})]})]})]}),i.jsxs("button",{onClick:_e=>{_e.stopPropagation(),De(se)},className:"flex items-center gap-1.5 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded-xl text-xs font-semibold transition-all shadow-sm flex-shrink-0",children:[i.jsx(Ah,{className:"w-3.5 h-3.5"}),"Send Win-back"]})]},se.email))})]}),A&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:i.jsx(z0,{className:"w-5 h-5 text-orange-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Win-back Message"}),i.jsxs("p",{className:"text-sm text-slate-500",children:["Send to ",A.name]})]})]}),i.jsx("div",{className:"bg-slate-50 rounded-xl p-4 mb-4 border border-slate-200",children:i.jsx("textarea",{value:A.message,onChange:se=>k({...A,message:se.target.value}),rows:4,className:"w-full bg-transparent text-sm text-slate-700 resize-none focus:outline-none leading-relaxed"})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{ze(A.message,A.email)},className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:ae===A.email?i.jsxs(i.Fragment,{children:[i.jsx(ms,{className:"w-4 h-4"}),"Copied!"]}):i.jsxs(i.Fragment,{children:[i.jsx(fD,{className:"w-4 h-4"}),"Copy to Clipboard"]})}),i.jsxs("button",{onClick:()=>kt(A.encodedEmail),disabled:$===A.encodedEmail,className:"flex items-center justify-center gap-2 px-5 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-emerald-600/20 disabled:opacity-50",children:[i.jsx(ms,{className:"w-4 h-4"}),"Mark Contacted"]}),i.jsx("button",{onClick:()=>k(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Close"})]})]})}),i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[{label:"Total Clients",value:P.all,icon:Gt,color:"bg-blue-100 text-blue-600"},{label:"Active",value:P.active,icon:rx,color:"bg-emerald-100 text-emerald-600"},{label:"Getting Cold",value:P["getting-cold"],icon:uj,color:"bg-amber-100 text-amber-600"},{label:"At Risk / Lost",value:P["at-risk"]+P.lost,icon:gl,color:"bg-red-100 text-red-600"}].map(se=>{const _e=se.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${se.color} rounded-xl flex items-center justify-center`,children:i.jsx(_e,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:se.value}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:se.label})]},se.label)})}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"All Clients"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Derived from booking history"})]}),i.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[ue.length," client",ue.length!==1?"s":""]})]}),i.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[i.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[i.jsx(tM,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),i.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:j,onChange:se=>T(se.target.value),className:"w-full pl-10 pr-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"}),j&&i.jsx("button",{onClick:()=>T(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:i.jsx(ha,{className:"w-4 h-4 text-slate-400 hover:text-slate-600"})})]}),i.jsx("div",{className:"flex items-center gap-1 p-1 bg-slate-100 rounded-xl overflow-x-auto",children:[{key:"all",label:"All"},{key:"active",label:"Active"},{key:"getting-cold",label:"Cold"},{key:"at-risk",label:"At Risk"},{key:"lost",label:"Lost"}].map(se=>i.jsxs("button",{onClick:()=>V(se.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all whitespace-nowrap ${L===se.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[se.label,i.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${L===se.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:P[se.key]??0})]},se.key))}),i.jsx("div",{className:"flex items-center gap-1",children:[{key:"lastVisit",label:"Last Visit"},{key:"totalVisits",label:"Visits"},{key:"totalSpent",label:"Spent"}].map(se=>i.jsxs("button",{onClick:()=>xe(se.key),className:`flex items-center gap-1 px-3 py-2 rounded-lg text-xs font-semibold transition-all border ${O===se.key?"bg-blue-50 text-blue-700 border-blue-200":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,children:[se.label,O===se.key&&i.jsx(VI,{className:"w-3 h-3"})]},se.key))})]}),ue.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Gt,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No clients found"}),i.jsx("p",{className:"text-xs text-slate-400",children:j?"Try a different search term":"Client data will appear as bookings come in"})]}):i.jsx("div",{className:"space-y-2",children:ue.map(se=>{const _e=d===se.email,de=fh[se.status],Ae=de.icon;return i.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden hover:border-slate-300 transition-all",children:[i.jsxs("div",{className:"flex items-center gap-3 p-4 cursor-pointer hover:bg-slate-50/50 transition-all",onClick:()=>p(_e?null:se.email),children:[i.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(xl,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm truncate",children:se.name}),i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 text-[10px] font-bold rounded-md border ${de.bg} ${de.text} ${de.border}`,children:[i.jsx(Ae,{className:"w-3 h-3"}),de.label]}),se.contacted&&i.jsxs("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",children:[i.jsx(Ah,{className:"w-2.5 h-2.5"}),"Contacted"]}),se.notes&&i.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-violet-50 text-violet-600 border-violet-200",children:i.jsx(k1,{className:"w-2.5 h-2.5"})})]}),i.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-3 mt-0.5 flex-wrap",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(B0,{className:"w-3 h-3"}),se.email]}),se.phone&&i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(F0,{className:"w-3 h-3"}),se.phone]})]})]}),i.jsxs("div",{className:"hidden sm:flex items-center gap-4 flex-shrink-0",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-bold text-slate-900",children:se.totalVisits}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"visits"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-bold text-blue-600",children:hh(se.totalSpent)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"spent"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm font-bold text-slate-700",children:$c(se.lastVisitDate)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"last visit"})]})]}),i.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(se.status==="at-risk"||se.status==="lost")&&!se.contacted&&i.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),De(se)},className:"p-2 text-orange-500 hover:text-orange-700 hover:bg-orange-50 rounded-lg transition-all",title:"Send win-back message",children:i.jsx(Ah,{className:"w-4 h-4"})}),_e?i.jsx(V0,{className:"w-4 h-4 text-slate-400"}):i.jsx(P0,{className:"w-4 h-4 text-slate-400"})]})]}),_e&&i.jsxs("div",{className:"border-t border-slate-200 bg-slate-50/50 p-5 space-y-5",children:[i.jsxs("div",{className:"sm:hidden grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[i.jsx("div",{className:"text-lg font-bold text-slate-900",children:se.totalVisits}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"visits"})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[i.jsx("div",{className:"text-lg font-bold text-blue-600",children:hh(se.totalSpent)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"spent"})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3 text-center",children:[i.jsx("div",{className:"text-sm font-bold text-slate-700",children:$c(se.lastVisitDate)}),i.jsx("div",{className:"text-[10px] text-slate-400",children:"last visit"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Avg per Visit"}),i.jsx("div",{className:"text-sm font-bold text-slate-900",children:hh(se.avgSpending)})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"First Visit"}),i.jsx("div",{className:"text-sm font-bold text-slate-900",children:$c(se.firstVisitDate)})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Days Since Last Visit"}),i.jsxs("div",{className:"text-sm font-bold text-slate-900",children:[se.daysSinceLastVisit,"d"]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Favorite Service"}),i.jsx("div",{className:"text-sm font-bold text-blue-600 truncate",children:se.favoriteService||""})]})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[i.jsx(xs,{className:"w-3.5 h-3.5 text-blue-500"}),"Services Used"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(se.serviceFrequency).sort((Ce,Pe)=>Pe[1]-Ce[1]).map(([Ce,Pe])=>i.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-blue-50 text-blue-700 border border-blue-200 rounded-lg text-xs font-medium",children:[Ce,i.jsxs("span",{className:"bg-blue-100 px-1.5 py-0.5 rounded text-[10px] font-bold",children:[Pe,""]})]},Ce))})]}),Object.keys(se.staffFrequency).length>0&&i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[i.jsx(Gt,{className:"w-3.5 h-3.5 text-violet-500"}),"Staff Members Seen"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(se.staffFrequency).sort((Ce,Pe)=>Pe[1]-Ce[1]).map(([Ce,Pe])=>i.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-violet-50 text-violet-700 border border-violet-200 rounded-lg text-xs font-medium",children:[Ce,i.jsxs("span",{className:"bg-violet-100 px-1.5 py-0.5 rounded text-[10px] font-bold",children:[Pe,""]})]},Ce))})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[i.jsx(Vt,{className:"w-3.5 h-3.5 text-emerald-500"}),"Booking History",i.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",se.bookings.length,")"]})]}),i.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto",children:se.bookings.sort((Ce,Pe)=>(Pe.date+Pe.time).localeCompare(Ce.date+Ce.time)).map((Ce,Pe)=>i.jsxs("div",{className:"flex items-center justify-between py-1.5 px-2 rounded-lg hover:bg-slate-50 text-xs",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-slate-700",children:$c(Ce.date)}),i.jsx("span",{className:"text-slate-400",children:Ce.time}),Ce.serviceName&&i.jsx("span",{className:"text-blue-600",children:Ce.serviceName})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[Ce.staffName&&i.jsx("span",{className:"text-violet-600",children:Ce.staffName}),Ce.servicePrice!=null&&i.jsx("span",{className:"font-semibold text-slate-900",children:hh(Ce.servicePrice)})]})]},Pe))})]}),i.jsxs("div",{className:"bg-white rounded-lg border border-slate-100 p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h4",{className:"text-sm font-bold text-slate-700 flex items-center gap-1.5",children:[i.jsx(k1,{className:"w-3.5 h-3.5 text-amber-500"}),"Notes"]}),g!==se.encodedEmail&&i.jsx("button",{onClick:()=>{x(se.encodedEmail),w(se.notes||"")},className:"text-xs text-blue-600 hover:text-blue-800 font-semibold",children:se.notes?"Edit":"Add Notes"})]}),g===se.encodedEmail?i.jsxs("div",{className:"space-y-2",children:[i.jsx("textarea",{value:b,onChange:Ce=>w(Ce.target.value),placeholder:"Add notes about this client (e.g., preferences, allergies, favorite styles...)",rows:3,className:"w-full px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>sn(se.encodedEmail),disabled:B,className:"px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-xs font-semibold transition-all disabled:opacity-50",children:B?"Saving...":"Save"}),i.jsx("button",{onClick:()=>x(null),className:"px-4 py-1.5 bg-white hover:bg-slate-50 text-slate-600 border border-slate-200 rounded-lg text-xs font-semibold transition-all",children:"Cancel"})]})]}):i.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:se.notes||'No notes yet. Click "Add Notes" to save preferences, allergies, or anything useful.'})]}),se.contacted&&i.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg px-4 py-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700",children:[i.jsx(ms,{className:"w-4 h-4"}),i.jsxs("span",{className:"font-medium",children:["Contacted",se.contactedAt?` on ${new Date(se.contactedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`:""]})]}),i.jsx("button",{onClick:()=>ft(se.encodedEmail),className:"text-xs text-blue-600 hover:text-blue-800 font-semibold",children:"Reset"})]})]})]},se.email)})})]})]})}const K1="https://us-central1-scheduler-65e51.cloudfunctions.net",KO={pro:"price_1Sxx7ILhwB1Jyzw8UvRxE5FT",unlimited:"price_1Sxx7JLhwB1Jyzw8uw9BRYhO"},QO={basicBooking:Vt,emailNotifications:z0,aiAssistant:FI,recurringBookings:un,waitlist:Gt,crm:Gt,analytics:ax,smsNotifications:z0,customBranding:$D,walkIns:hj,multiLocation:LD,noBranding:cj,apiAccess:cD,prioritySupport:SD};function XO({shopId:s,shop:e,slug:t}){const[r,o]=N.useState(e),[u,d]=N.useState(!1),[p,g]=N.useState(null),[x,b]=N.useState(!1);N.useEffect(()=>{if(!s)return;const q=Zt(Ye(je,"shops",s),ae=>{ae.exists()&&o(ae.data())});return()=>q()},[s]);const w=r?.subscriptionTier||"free",j=hr[w],T=r?.subscriptionStatus,L=r?.subscriptionEndsAt,V=q=>q?(q.toDate?q.toDate():new Date(q)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):null,O=async q=>{d(q),g(null);try{const ae=await fetch(`${K1}/createCheckoutSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s,priceId:KO[q],successUrl:`${window.location.origin}/stylist-scheduler/#/shop/${t}/dashboard?subscription=success`,cancelUrl:`${window.location.origin}/stylist-scheduler/#/shop/${t}/dashboard?subscription=canceled`})}),ce=await ae.json();if(!ae.ok)throw new Error(ce.error||"Failed to create checkout session");window.location.href=ce.url}catch(ae){console.error("Upgrade error:",ae),g(ae.message),d(null)}},U=async()=>{b(!0),g(null);try{const q=await fetch(`${K1}/createBillingPortalSession`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s,returnUrl:`${window.location.origin}/stylist-scheduler/#/shop/${t}/dashboard`})}),ae=await q.json();if(!q.ok)throw new Error(ae.error||"Failed to open billing portal");window.location.href=ae.url}catch(q){console.error("Billing portal error:",q),g(q.message),b(!1)}},G=[{key:"free",name:"Free",price:"$0",period:"forever",description:"Perfect for getting started",color:"slate",features:[{key:"staff",text:"1 staff member"},{key:"basicBooking",text:"Online booking"},{key:"emailNotifications",text:"Email notifications"},{key:"fee",text:"5% platform fee on deposits",negative:!0}]},{key:"pro",name:"Pro",price:"$29",period:"/month",description:"For growing businesses",color:"blue",popular:!0,features:[{key:"staff",text:"Up to 5 staff members"},{key:"basicBooking",text:"Online booking"},{key:"emailNotifications",text:"Email notifications"},{key:"aiAssistant",text:"AI booking assistant"},{key:"recurringBookings",text:"Recurring bookings"},{key:"waitlist",text:"Waitlist management"},{key:"crm",text:"Client CRM & notes"},{key:"analytics",text:"Analytics dashboard"},{key:"smsNotifications",text:"SMS notifications"},{key:"fee",text:"No platform fees",highlight:!0}]},{key:"unlimited",name:"Unlimited",price:"$79",period:"/month",description:"For established businesses",color:"violet",features:[{key:"staff",text:"Unlimited staff members"},{key:"everything",text:"Everything in Pro, plus:"},{key:"walkIns",text:"Walk-in queue management"},{key:"multiLocation",text:"Multi-location support"},{key:"noBranding",text:"Remove SpotBookie branding"},{key:"apiAccess",text:"API access"},{key:"prioritySupport",text:"Priority support"}]}];return i.jsxs("div",{className:"animate-fade-in",children:[i.jsx("div",{className:`rounded-2xl p-6 mb-8 ${w==="unlimited"?"bg-gradient-to-r from-violet-500 to-purple-600":w==="pro"?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gradient-to-r from-slate-600 to-slate-700"}`,children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:i.jsx(If,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("h2",{className:"text-xl font-bold text-white",children:[j.name," Plan"]}),T==="past_due"&&i.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded-full",children:"Payment Failed"}),L&&i.jsx("span",{className:"px-2 py-0.5 bg-amber-500 text-white text-xs font-bold rounded-full",children:"Canceling"})]}),i.jsx("p",{className:"text-white/80 text-sm mt-0.5",children:w==="free"?"Upgrade to unlock more features":L?`Access until ${V(L)}`:"Your subscription is active"})]})]}),w!=="free"&&i.jsxs("button",{onClick:U,disabled:x,className:"flex items-center gap-2 px-5 py-2.5 bg-white/20 hover:bg-white/30 text-white rounded-xl font-semibold text-sm transition-all disabled:opacity-50",children:[x?i.jsx(Qs,{className:"w-4 h-4 animate-spin"}):i.jsx(Th,{className:"w-4 h-4"}),"Manage Billing"]})]})}),p&&i.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[i.jsx(gu,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-red-800",children:"Something went wrong"}),i.jsx("p",{className:"text-sm text-red-600",children:p})]})]}),T==="past_due"&&i.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[i.jsx(gu,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-amber-800",children:"Payment Failed"}),i.jsx("p",{className:"text-sm text-amber-600",children:"Your last payment failed. Please update your payment method to keep your subscription active."}),i.jsx("button",{onClick:U,className:"mt-2 text-sm font-semibold text-amber-700 hover:text-amber-800 underline",children:"Update Payment Method "})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:G.map(q=>{const ae=q.key===w,ce=["free","pro","unlimited"].indexOf(q.key)<["free","pro","unlimited"].indexOf(w),W=!ae&&!ce;return i.jsxs("div",{className:`relative bg-white rounded-2xl border-2 p-6 transition-all ${q.popular?"border-blue-500 shadow-lg shadow-blue-500/10":ae?"border-emerald-500":"border-slate-200 hover:border-slate-300"}`,children:[q.popular&&i.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:i.jsx("span",{className:"px-3 py-1 bg-blue-500 text-white text-xs font-bold rounded-full",children:"Most Popular"})}),ae&&i.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:i.jsx("span",{className:"px-3 py-1 bg-emerald-500 text-white text-xs font-bold rounded-full",children:"Current Plan"})}),i.jsxs("div",{className:"text-center mb-6 pt-2",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:q.name}),i.jsxs("div",{className:"mt-2 flex items-baseline justify-center gap-1",children:[i.jsx("span",{className:"text-4xl font-extrabold text-slate-900",children:q.price}),i.jsx("span",{className:"text-slate-500 text-sm",children:q.period})]}),i.jsx("p",{className:"text-sm text-slate-500 mt-2",children:q.description})]}),i.jsx("ul",{className:"space-y-3 mb-6",children:q.features.map((S,A)=>(QO[S.key],i.jsxs("li",{className:"flex items-start gap-2.5",children:[i.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5 ${S.negative?"bg-red-100 text-red-500":S.highlight?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-600"}`,children:S.negative?i.jsx("span",{className:"text-xs font-bold",children:"%"}):i.jsx(ms,{className:"w-3 h-3"})}),i.jsx("span",{className:`text-sm ${S.negative?"text-red-600":S.highlight?"text-emerald-700 font-medium":"text-slate-700"}`,children:S.text})]},A)))}),W?i.jsx("button",{onClick:()=>O(q.key),disabled:u,className:`w-full flex items-center justify-center gap-2 py-3 rounded-xl font-semibold text-sm transition-all ${q.key==="unlimited"?"bg-gradient-to-r from-violet-500 to-purple-600 hover:from-violet-600 hover:to-purple-700 text-white shadow-lg shadow-violet-500/20":q.key==="pro"?"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white shadow-lg shadow-blue-500/20":"bg-slate-100 hover:bg-slate-200 text-slate-700"} disabled:opacity-50`,children:u===q.key?i.jsxs(i.Fragment,{children:[i.jsx(Qs,{className:"w-4 h-4 animate-spin"}),"Redirecting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Du,{className:"w-4 h-4"}),"Upgrade to ",q.name]})}):ae?i.jsx("div",{className:"w-full py-3 text-center text-sm font-semibold text-emerald-600 bg-emerald-50 rounded-xl border border-emerald-200",children:" Your Current Plan"}):i.jsx("div",{className:"w-full py-3 text-center text-sm font-medium text-slate-400 bg-slate-50 rounded-xl",children:"Included in your plan"})]},q.key)})}),i.jsxs("div",{className:"mt-12",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Feature Comparison"}),i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 border-b border-slate-200",children:[i.jsx("th",{className:"text-left py-4 px-6 text-sm font-semibold text-slate-700",children:"Feature"}),i.jsx("th",{className:"text-center py-4 px-4 text-sm font-semibold text-slate-700",children:"Free"}),i.jsx("th",{className:"text-center py-4 px-4 text-sm font-semibold text-blue-600",children:"Pro"}),i.jsx("th",{className:"text-center py-4 px-4 text-sm font-semibold text-violet-600",children:"Unlimited"})]})}),i.jsxs("tbody",{children:[i.jsxs("tr",{className:"border-b border-slate-100",children:[i.jsx("td",{className:"py-3 px-6 text-sm text-slate-700",children:"Staff Members"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-slate-600",children:"1"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-slate-600",children:"5"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-slate-600",children:"Unlimited"})]}),i.jsxs("tr",{className:"border-b border-slate-100",children:[i.jsx("td",{className:"py-3 px-6 text-sm text-slate-700",children:"Platform Fee"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-red-500",children:"5%"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-emerald-600",children:"0%"}),i.jsx("td",{className:"py-3 px-4 text-center text-sm text-emerald-600",children:"0%"})]}),Object.entries(AO).map(([q,ae])=>i.jsxs("tr",{className:"border-b border-slate-100 last:border-b-0",children:[i.jsx("td",{className:"py-3 px-6 text-sm text-slate-700",children:ae.name}),i.jsx("td",{className:"py-3 px-4 text-center",children:hr.free.features.includes(q)?i.jsx(ms,{className:"w-5 h-5 text-emerald-500 mx-auto"}):i.jsx("span",{className:"text-slate-300",children:""})}),i.jsx("td",{className:"py-3 px-4 text-center",children:hr.pro.features.includes(q)?i.jsx(ms,{className:"w-5 h-5 text-emerald-500 mx-auto"}):i.jsx("span",{className:"text-slate-300",children:""})}),i.jsx("td",{className:"py-3 px-4 text-center",children:hr.unlimited.features.includes(q)?i.jsx(ms,{className:"w-5 h-5 text-emerald-500 mx-auto"}):i.jsx("span",{className:"text-slate-300",children:""})})]},q))]})]})})]}),i.jsxs("div",{className:"mt-12",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Frequently Asked Questions"}),i.jsx("div",{className:"space-y-4",children:[{q:"Can I cancel anytime?",a:"Yes! You can cancel your subscription at any time. You'll continue to have access until the end of your billing period."},{q:"What happens if I downgrade?",a:"When you downgrade, you'll keep your current plan until the end of the billing period. After that, feature limits (like staff count) will apply."},{q:"What is the platform fee?",a:"On the Free plan, we charge a 5% fee on any deposits collected through SpotBookie. Pro and Unlimited plans have no platform fees."},{q:"Do you offer refunds?",a:"We offer a 14-day money-back guarantee for first-time subscribers. Contact us if you're not satisfied."}].map((q,ae)=>i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:q.q}),i.jsx("p",{className:"text-sm text-slate-600",children:q.a})]},ae))})]})]})}const mh="https://us-central1-scheduler-65e51.cloudfunctions.net";function JO({shopId:s,shop:e,slug:t}){const[r,o]=N.useState(e),[u,d]=N.useState(null),[p,g]=N.useState(null),[x,b]=N.useState(null);N.useEffect(()=>{if(!s)return;const W=Zt(Ye(je,"shops",s),S=>{S.exists()&&o(S.data())});return()=>W()},[s]);const w=!!r?.stripeAccountId,j=r?.stripeOnboardingComplete,T=r?.payoutsEnabled;r?.stripeAccountStatus;const L=r?.subscriptionTier||"free",V=L==="free"?"5%":"0%",O=async()=>{d("create"),g(null);try{const W=await fetch(`${mh}/createConnectAccount`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s,email:r.ownerEmail,businessName:r.name})}),S=await W.json();if(!W.ok)throw new Error(S.error||"Failed to create account");(!S.alreadyExists||!r.stripeOnboardingComplete)&&await U()}catch(W){console.error("Create account error:",W),g(W.message)}finally{d(null)}},U=async()=>{d("onboard"),g(null);try{const W=await fetch(`${mh}/createAccountLink`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s,returnUrl:`${window.location.origin}/#/shop/${t}/dashboard?connect=return`,refreshUrl:`${window.location.origin}/#/shop/${t}/dashboard?connect=refresh`})}),S=await W.json();if(!W.ok)throw new Error(S.error||"Failed to create onboarding link");window.location.href=S.url}catch(W){console.error("Onboarding error:",W),g(W.message),d(null)}},G=async()=>{d("dashboard"),g(null);try{const W=await fetch(`${mh}/getConnectDashboardLink`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s})}),S=await W.json();if(!W.ok)throw new Error(S.error||"Failed to get dashboard link");window.open(S.url,"_blank")}catch(W){console.error("Dashboard link error:",W),g(W.message)}finally{d(null)}},q=async()=>{d("balance"),g(null);try{const W=await fetch(`${mh}/getConnectBalance`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shopId:s})}),S=await W.json();if(!W.ok)throw new Error(S.error||"Failed to fetch balance");b(S)}catch(W){console.error("Balance fetch error:",W),g(W.message)}finally{d(null)}};N.useEffect(()=>{T&&!x&&q()},[T]);const ae=(W,S="usd")=>new Intl.NumberFormat("en-US",{style:"currency",currency:S.toUpperCase()}).format(W/100),ce=W=>new Date(W*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Payments"}),i.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Connect Stripe to accept deposits and get paid"})]}),w&&T&&i.jsxs("button",{onClick:q,disabled:u==="balance",className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-all",children:[u==="balance"?i.jsx(Qs,{className:"w-3.5 h-3.5 animate-spin"}):i.jsx(ix,{className:"w-3.5 h-3.5"}),"Refresh"]})]}),p&&i.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl flex items-start gap-3",children:[i.jsx(gu,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-red-800 text-sm",children:"Something went wrong"}),i.jsx("p",{className:"text-sm text-red-600",children:p})]})]}),!w&&i.jsx("div",{className:"bg-gradient-to-br from-violet-50 to-blue-50 rounded-2xl border border-violet-200 p-8",children:i.jsxs("div",{className:"flex flex-col items-center text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-white rounded-2xl shadow-lg flex items-center justify-center mb-5",children:i.jsx(gr,{className:"w-8 h-8 text-violet-600"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Accept Payments"}),i.jsx("p",{className:"text-slate-600 max-w-md mb-6",children:"Connect your Stripe account to accept deposit payments from clients when they book. Funds are transferred directly to your bank account."}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full max-w-xl mb-8",children:[{icon:iM,label:"Secure payments",desc:"256-bit encryption"},{icon:Du,label:"Fast payouts",desc:"2-day transfers"},{icon:L0,label:"Low fees",desc:"2.9% + 30"}].map(({icon:W,label:S,desc:A})=>i.jsxs("div",{className:"bg-white/70 rounded-xl p-4 text-center",children:[i.jsx(W,{className:"w-5 h-5 text-violet-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm font-semibold text-slate-900",children:S}),i.jsx("p",{className:"text-xs text-slate-500",children:A})]},S))}),i.jsx("button",{onClick:O,disabled:u==="create",className:"flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-violet-600 to-blue-600 hover:from-violet-700 hover:to-blue-700 text-white rounded-xl font-bold text-base shadow-lg shadow-violet-600/25 transition-all disabled:opacity-50",children:u==="create"?i.jsxs(i.Fragment,{children:[i.jsx(Qs,{className:"w-5 h-5 animate-spin"}),"Setting up..."]}):i.jsxs(i.Fragment,{children:[i.jsx(gr,{className:"w-5 h-5"}),"Connect with Stripe",i.jsx(_o,{className:"w-5 h-5"})]})}),L==="free"&&i.jsxs("p",{className:"mt-4 text-xs text-slate-500 flex items-center gap-1",children:[i.jsx(A1,{className:"w-3.5 h-3.5"}),"Free tier: ",V," platform fee on deposits.",i.jsx("a",{href:"#",className:"text-violet-600 hover:underline",children:"Upgrade to remove"})]})]})}),w&&!j&&i.jsx("div",{className:"bg-amber-50 rounded-2xl border border-amber-200 p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center flex-shrink-0",children:i.jsx(un,{className:"w-6 h-6 text-amber-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Complete Your Setup"}),i.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Your Stripe account is created, but you need to complete the onboarding process to start accepting payments."}),i.jsx("button",{onClick:U,disabled:u==="onboard",className:"flex items-center gap-2 px-5 py-2.5 bg-amber-600 hover:bg-amber-700 text-white rounded-xl font-semibold text-sm shadow-md transition-all disabled:opacity-50",children:u==="onboard"?i.jsxs(i.Fragment,{children:[i.jsx(Qs,{className:"w-4 h-4 animate-spin"}),"Redirecting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Th,{className:"w-4 h-4"}),"Complete Setup"]})})]})]})}),w&&j&&!T&&i.jsx("div",{className:"bg-blue-50 rounded-2xl border border-blue-200 p-6",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:i.jsx($I,{className:"w-6 h-6 text-blue-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Verification in Progress"}),i.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Stripe is reviewing your account. This usually takes a few minutes. Once approved, you'll be able to accept payments."}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs("button",{onClick:U,disabled:u==="onboard",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all disabled:opacity-50",children:[u==="onboard"?i.jsx(Qs,{className:"w-4 h-4 animate-spin"}):i.jsx(Th,{className:"w-4 h-4"}),"Check Status"]})})]})]})}),w&&T&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl p-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:i.jsx(Kn,{className:"w-7 h-7"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-xl font-bold",children:"Stripe Connected"}),i.jsx("span",{className:"px-2 py-0.5 bg-white/20 text-xs font-bold rounded-full",children:"Active"})]}),i.jsx("p",{className:"text-white/80 text-sm mt-0.5",children:"You're ready to accept deposit payments"})]})]}),i.jsxs("button",{onClick:G,disabled:u==="dashboard",className:"flex items-center gap-2 px-5 py-2.5 bg-white/20 hover:bg-white/30 rounded-xl font-semibold text-sm transition-all disabled:opacity-50",children:[u==="dashboard"?i.jsx(Qs,{className:"w-4 h-4 animate-spin"}):i.jsx(Th,{className:"w-4 h-4"}),"Stripe Dashboard"]})]})}),x&&i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Available"}),i.jsx(R1,{className:"w-4 h-4 text-emerald-500"})]}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:x.balance.available[0]?ae(x.balance.available[0].amount,x.balance.available[0].currency):"$0.00"}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Ready to pay out"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Pending"}),i.jsx(un,{className:"w-4 h-4 text-blue-500"})]}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:x.balance.pending[0]?ae(x.balance.pending[0].amount,x.balance.pending[0].currency):"$0.00"}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Processing"})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Platform Fee"}),i.jsx(L0,{className:"w-4 h-4 text-violet-500"})]}),i.jsx("p",{className:"text-2xl font-bold text-slate-900",children:V}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:L==="free"?"Upgrade to remove":"No platform fees"})]})]}),x?.recentCharges?.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-900",children:"Recent Payments"}),i.jsx("button",{onClick:G,className:"text-xs font-medium text-blue-600 hover:text-blue-700",children:"View All "})]}),i.jsx("div",{className:"space-y-3",children:x.recentCharges.slice(0,5).map(W=>i.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${W.status==="succeeded"?"bg-emerald-100":"bg-slate-100"}`,children:W.status==="succeeded"?i.jsx(Kn,{className:"w-4 h-4 text-emerald-600"}):i.jsx(un,{className:"w-4 h-4 text-slate-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-900",children:W.metadata?.clientName||"Payment"}),i.jsxs("p",{className:"text-xs text-slate-400",children:[ce(W.created),W.metadata?.serviceName&&`  ${W.metadata.serviceName}`]})]})]}),i.jsx("span",{className:"text-sm font-bold text-slate-900",children:ae(W.amount,W.currency)})]},W.id))})]}),x?.recentPayouts?.length>0&&i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"font-bold text-slate-900",children:"Recent Payouts"}),i.jsx(Df,{className:"w-4 h-4 text-slate-400"})]}),i.jsx("div",{className:"space-y-3",children:x.recentPayouts.slice(0,3).map(W=>i.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${W.status==="paid"?"bg-emerald-100":"bg-amber-100"}`,children:i.jsx(R1,{className:`w-4 h-4 ${W.status==="paid"?"text-emerald-600":"text-amber-600"}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-900 capitalize",children:W.status}),i.jsx("p",{className:"text-xs text-slate-400",children:W.arrivalDate?`Arrives ${ce(W.arrivalDate)}`:ce(W.created)})]})]}),i.jsx("span",{className:"text-sm font-bold text-emerald-600",children:ae(W.amount,W.currency)})]},W.id))})]})]}),i.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-5",children:[i.jsxs("h3",{className:"font-bold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(A1,{className:"w-4 h-4 text-blue-500"}),"How it works"]}),i.jsxs("ul",{className:"space-y-2 text-sm text-slate-600",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"1"}),i.jsx("span",{children:"Client books an appointment and pays the deposit"})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"2"}),i.jsxs("span",{children:["Payment goes directly to your Stripe account (minus Stripe's 2.9% + 30 fee",L==="free"&&` and ${V} platform fee`,")"]})]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"w-5 h-5 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:"3"}),i.jsx("span",{children:"Stripe automatically transfers funds to your bank (usually within 2 days)"})]})]})]})]})}const ZO=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];function i0(s){const[e,t]=s.split(":").map(Number);return e*60+t}function e9(s,e){if(s.status!=="waiting"||s.serviceId&&e.serviceId&&s.serviceId!==e.serviceId||s.staffId&&s.staffId!=="any"&&e.staffId&&s.staffId!==e.staffId)return!1;if(e.date){if(s.preferredDate&&s.preferredDate!==e.date)return!1;if(s.preferredDays&&s.preferredDays.length>0){const t=new Date(e.date+"T12:00:00"),r=ZO[t.getDay()];if(!s.preferredDays.includes(r))return!1}}if(e.time&&s.preferredTimeRange){const t=i0(e.time),r=i0(s.preferredTimeRange.start),o=i0(s.preferredTimeRange.end);if(!(s.preferredTimeRange.start==="00:00"&&s.preferredTimeRange.end==="23:59")&&(t<r||t>o))return!1}return!0}function t9(s,e){return s.filter(t=>e9(t,e)).sort((t,r)=>(t.createdAt||"").localeCompare(r.createdAt||""))}const Q1=[{key:"monday",short:"Mon"},{key:"tuesday",short:"Tue"},{key:"wednesday",short:"Wed"},{key:"thursday",short:"Thu"},{key:"friday",short:"Fri"},{key:"saturday",short:"Sat"},{key:"sunday",short:"Sun"}];function nl(s){if(!s)return"";const[e,t]=s.split(":").map(Number),r=e>=12?"PM":"AM",o=e%12||12;return t===0?`${o}${r}`:`${o}:${t.toString().padStart(2,"0")}${r}`}function n9({user:s}){const{slug:e}=Mo(),t=Do(),[r,o]=N.useState(null),[u,d]=N.useState(null),[p,g]=N.useState(!0),[x,b]=N.useState(!1),[w,j]=N.useState([]),[T,L]=N.useState([]),[V,O]=N.useState([]),[U,G]=N.useState([]),[q,ae]=N.useState("schedule"),[ce,W]=N.useState(null),[S,A]=N.useState("all"),[k,B]=N.useState("all"),[M,$]=N.useState([]),[R,F]=N.useState(null),[D,I]=N.useState(null),[K,oe]=N.useState({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""});N.useEffect(()=>{if(!s){t(`/shop/${e}/login`,{replace:!0});return}(async()=>{g(!0);try{const re=Ms(tt(je,"shops"),ps("slug","==",e)),Ne=await Os(re);if(Ne.empty){b(!0),g(!1);return}const we=Ne.docs[0],$e=we.data();if($e.ownerUid!==s.uid){b(!0),g(!1);return}o($e),d(we.id)}catch(re){console.error("Error checking ownership:",re),b(!0)}finally{g(!1)}})()},[s,e,t]),N.useEffect(()=>{if(!u)return;const H=Zt(tt(je,"shops",u,"availability"),Je=>{const Ft=Je.docs.map(Be=>({id:Be.id,...Be.data()}));j(Ft)}),re=Zt(tt(je,"shops",u,"bookings"),Je=>{const Ft=Je.docs.map(Be=>({id:Be.id,...Be.data()}));L(Ft)}),Ne=Zt(tt(je,"shops",u,"staff"),Je=>{const Ft=Je.docs.map(Be=>({id:Be.id,...Be.data()})).filter(Be=>Be.active!==!1).sort((Be,me)=>(Be.name||"").localeCompare(me.name||""));O(Ft)}),we=Zt(tt(je,"shops",u,"waitlist"),Je=>{const Ft=Je.docs.map(Be=>({id:Be.id,...Be.data()})).sort((Be,me)=>(Be.createdAt||"").localeCompare(me.createdAt||""));$(Ft)}),$e=Zt(tt(je,"shops",u,"services"),Je=>{const Ft=Je.docs.map(Be=>({id:Be.id,...Be.data()})).filter(Be=>Be.active!==!1).sort((Be,me)=>(Be.name||"").localeCompare(me.name||""));G(Ft)});return()=>{H(),re(),Ne(),we(),$e()}},[u]);const Te=async()=>{await RC(pl),t(`/shop/${e}`,{replace:!0})},ve=async H=>{H.preventDefault();const{date:re,startTime:Ne,endTime:we,slotDuration:$e,staffId:Je}=K,Ft=parseInt($e),[Be,me]=Ne.split(":").map(Number),[Se,Qe]=we.split(":").map(Number),Ze=Be*60+me,jt=Se*60+Qe;let Ue=Ze;for(;Ue+Ft<=jt;){const He=Math.floor(Ue/60),Dt=Ue%60,an=`${He.toString().padStart(2,"0")}:${Dt.toString().padStart(2,"0")}`,$n={date:re,time:an,duration:Ft,available:!0};if(Je){const ss=V.find(Zs=>Zs.id===Je);$n.staffId=Je,$n.staffName=ss?.name||""}await Nr(tt(je,"shops",u,"availability"),$n),Ue+=Ft}oe({date:"",startTime:"09:00",endTime:"17:00",slotDuration:"60",staffId:""})},P=async H=>{await u3(Ye(je,"shops",u,"availability",H))},Z=H=>{const re={date:H.date,time:H.time,staffId:H.staffId||null,serviceId:H.serviceId||null},Ne=t9(M,re);Ne.length>0&&F({matches:Ne,slot:re})},ue=async(H,re)=>{for(const Ne of H)await it(Ye(je,"shops",u,"waitlist",Ne.id),{status:"notified",notifiedAt:new Date().toISOString(),notifiedSlot:{date:re.date,time:re.time,staffId:re.staffId||null,staffName:re.staffName||null}});F(null)},xe=async H=>{await it(Ye(je,"shops",u,"waitlist",H),{status:"notified",notifiedAt:new Date().toISOString()})},be=async H=>{await it(Ye(je,"shops",u,"waitlist",H),{status:"expired"})},De=async H=>{const re=T.find(Ne=>Ne.id===H);if(re&&re.recurringGroupId){I({bookingId:H,recurringGroupId:re.recurringGroupId});return}if(await it(Ye(je,"shops",u,"bookings",H),{status:"cancelled"}),re&&re.slotId&&!re.slotId.startsWith("wh-")&&!re.slotId.startsWith("recurring-"))try{await it(Ye(je,"shops",u,"availability",re.slotId),{available:!0})}catch(Ne){console.warn("Could not re-open slot:",Ne)}re&&Z(re)},ze=async H=>{const re=T.find(Ne=>Ne.id===H);if(await it(Ye(je,"shops",u,"bookings",H),{status:"cancelled"}),re&&re.slotId&&!re.slotId.startsWith("wh-")&&!re.slotId.startsWith("recurring-"))try{await it(Ye(je,"shops",u,"availability",re.slotId),{available:!0})}catch(Ne){console.warn("Could not re-open slot:",Ne)}re&&Z(re),I(null)},kt=async(H,re)=>{const Ne=T.find($e=>$e.id===H);if(!Ne)return;const we=T.filter($e=>$e.recurringGroupId===re&&$e.date>=Ne.date&&($e.status==="pending"||$e.status==="confirmed"));for(const $e of we)if(await it(Ye(je,"shops",u,"bookings",$e.id),{status:"cancelled"}),$e.slotId&&!$e.slotId.startsWith("wh-")&&!$e.slotId.startsWith("recurring-"))try{await it(Ye(je,"shops",u,"availability",$e.slotId),{available:!0})}catch(Je){console.warn("Could not re-open slot:",Je)}Ne&&Z(Ne),I(null)},ft=async H=>{await it(Ye(je,"shops",u,"bookings",H),{status:"confirmed"})},sn=async H=>{const re=T.find(Ne=>Ne.id===H);if(await it(Ye(je,"shops",u,"bookings",H),{status:"rejected"}),re&&re.slotId&&!re.slotId.startsWith("wh-"))try{await it(Ye(je,"shops",u,"availability",re.slotId),{available:!0})}catch(Ne){console.warn("Could not re-open slot:",Ne)}re&&Z(re)},se=async()=>{const H=!r?.requireApproval;try{await it(Ye(je,"shops",u),{requireApproval:H}),o(re=>({...re,requireApproval:H}))}catch(re){console.error("Error updating requireApproval:",re)}},_e=async H=>{const re=parseInt(H);try{await it(Ye(je,"shops",u),{bufferMinutes:re}),o(Ne=>({...Ne,bufferMinutes:re}))}catch(Ne){console.error("Error updating buffer minutes:",Ne)}},de=(H,re)=>new Date(`${H}T${re}`).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),Ae=N.useMemo(()=>{const H={},re=S==="all"?V:V.filter(we=>we.id===S),Ne=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(const we of re)we.weeklyHours&&Ne.forEach(($e,Je)=>{we.weeklyHours[$e]?.enabled&&(H[Je]=!0)});return H},[V,S]),Ce=N.useMemo(()=>(S==="all"?V:V.filter(re=>re.id===S)).filter(re=>re.weeklyHours?Q1.some(Ne=>re.weeklyHours[Ne.key]?.enabled):!1),[V,S]),Pe=N.useMemo(()=>{const H=new Date,re=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`,Ne=H.getDay(),we=Ne===0?-6:1-Ne,$e=new Date(H);$e.setDate(H.getDate()+we),$e.setHours(0,0,0,0);const Je=new Date($e);Je.setDate($e.getDate()+6),Je.setHours(23,59,59,999);const Ft=`${$e.getFullYear()}-${String($e.getMonth()+1).padStart(2,"0")}-${String($e.getDate()).padStart(2,"0")}`,Be=`${Je.getFullYear()}-${String(Je.getMonth()+1).padStart(2,"0")}-${String(Je.getDate()).padStart(2,"0")}`,me=T.filter(Ze=>Ze.date===re).length,Se=T.filter(Ze=>Ze.date>=Ft&&Ze.date<=Be).length,Qe=new Set(T.map(Ze=>Ze.clientEmail?.toLowerCase()).filter(Boolean)).size;return{todayBookings:me,weekBookings:Se,uniqueClients:Qe,totalBookings:T.length}},[T]),yt=N.useMemo(()=>T.filter(H=>H.status==="pending").length,[T]),ct=N.useMemo(()=>M.filter(H=>H.status==="waiting").length,[M]),[ut,ke]=N.useState(0),[Ve,ot]=N.useState({}),Qt=N.useMemo(()=>{if(!r)return 0;r?.winbackSettings?.warningDays;const H=r?.winbackSettings?.inactiveDays||60;if(!(r?.winbackSettings?.enabled!==!1))return 0;const Ne=new Date,we=T.filter(Be=>Be.status==="confirmed"||Be.status==="pending"||!Be.status),$e={};we.forEach(Be=>{const me=Be.clientEmail?.toLowerCase();me&&(!$e[me]||Be.date>$e[me])&&($e[me]=Be.date)});let Je=0;const Ft=Be=>Be.replace(/\./g,"_dot_").replace(/@/g,"_at_");return Object.entries($e).forEach(([Be,me])=>{if(Math.floor((Ne.getTime()-new Date(me+"T12:00:00").getTime())/864e5)>H){const Qe=Ft(Be);Ve[Qe]?.contacted||Je++}}),Je},[T,r,Ve]);if(N.useEffect(()=>{if(!u)return;const H=Zt(tt(je,"shops",u,"clientNotes"),re=>{const Ne={};re.docs.forEach(we=>{Ne[we.id]=we.data()}),ot(Ne)});return()=>H()},[u]),N.useEffect(()=>{if(!u)return;const H=Zt(tt(je,"shops",u,"walkins"),re=>{const Ne=re.docs.filter(we=>we.data().status==="waiting").length;ke(Ne)});return()=>H()},[u]),p)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading dashboard"})]})});if(x)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(ef,{className:"w-8 h-8 text-red-500"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Unauthorized"}),i.jsx("p",{className:"text-slate-600 mb-6",children:"You don't have access to this dashboard."}),i.jsx(st,{to:`/shop/${e}/login`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:"Login"})]})});const _t=S==="all"?w:w.filter(H=>H.staffId===S),Nt=S==="all"?T:T.filter(H=>H.staffId===S),Cn=_t.reduce((H,re)=>(H[re.date]||(H[re.date]=[]),H[re.date].push(re),H),{}),Tt=Nt.reduce((H,re)=>(H[re.date]||(H[re.date]=[]),H[re.date].push(re),H),{}),Xn=ce?Object.keys(Cn).filter(H=>H===ce).sort():Object.keys(Cn).sort(),qn=ce?Nt.filter(H=>H.date===ce):Nt,vs=k==="all"?qn:k==="pending"?qn.filter(H=>H.status==="pending"):k==="confirmed"?qn.filter(H=>!H.status||H.status==="confirmed"):qn.filter(H=>H.status==="cancelled"||H.status==="rejected"),ns={all:qn.length,pending:qn.filter(H=>H.status==="pending").length,confirmed:qn.filter(H=>!H.status||H.status==="confirmed").length,cancelled:qn.filter(H=>H.status==="cancelled"||H.status==="rejected").length},$a=[{key:"schedule",label:"Schedule",icon:Vt},{key:"clients",label:"Clients",icon:rx},{key:"walkins",label:"Walk-ins",icon:hj},{key:"analytics",label:"Analytics",icon:JI},{key:"waitlist",label:"Waitlist",icon:U0},{key:"staff",label:"Staff",icon:Gt},{key:"services",label:"Services",icon:xs},{key:"subscription",label:"Plan",icon:If},{key:"settings",label:"Settings",icon:aM}];return i.jsxs("div",{className:"min-h-screen bg-slate-50",children:[i.jsx("nav",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(r.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{className:"hidden sm:block",children:[i.jsx("h1",{className:"text-base font-bold text-slate-900 leading-tight",children:r.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Dashboard"})]})]}),i.jsx("div",{className:"flex items-center bg-slate-100 p-1 rounded-xl",children:$a.map(H=>{const re=H.icon;return i.jsxs("button",{onClick:()=>ae(H.key),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${q===H.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[i.jsx(re,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:H.label}),H.key==="schedule"&&yt>0&&i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-amber-500 text-white text-[10px] font-bold rounded-full leading-none",children:yt}),H.key==="clients"&&Qt>0&&i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-orange-500 text-white text-[10px] font-bold rounded-full leading-none",children:Qt}),H.key==="walkins"&&ut>0&&i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-emerald-500 text-white text-[10px] font-bold rounded-full leading-none",children:ut}),H.key==="waitlist"&&ct>0&&i.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-blue-500 text-white text-[10px] font-bold rounded-full leading-none",children:ct})]},H.key)})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(st,{to:`/shop/${e}`,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-all border border-transparent hover:border-slate-200",children:[i.jsx(yD,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"View Page"})]}),i.jsxs("button",{onClick:Te,className:"flex items-center gap-1.5 px-3.5 py-2 text-sm font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all",children:[i.jsx(OD,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[q==="schedule"&&i.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8 animate-fade-in",children:[{label:"Today's Bookings",value:Pe.todayBookings,icon:T1,color:"bg-blue-100 text-blue-600"},{label:"This Week",value:Pe.weekBookings,icon:Df,color:"bg-violet-100 text-violet-600"},{label:"Total Bookings",value:Pe.totalBookings,icon:ax,color:"bg-emerald-100 text-emerald-600"},{label:"Unique Clients",value:Pe.uniqueClients,icon:Gt,color:"bg-amber-100 text-amber-600"}].map(H=>{const re=H.icon;return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 hover:shadow-md transition-all",children:[i.jsx("div",{className:"flex items-center justify-between mb-3",children:i.jsx("div",{className:`w-10 h-10 ${H.color} rounded-xl flex items-center justify-center`,children:i.jsx(re,{className:"w-5 h-5"})})}),i.jsx("div",{className:"text-2xl font-extrabold text-slate-900",children:H.value}),i.jsx("div",{className:"text-xs font-medium text-slate-500 mt-0.5",children:H.label})]},H.label)})}),q==="clients"&&i.jsx(WO,{shopId:u,bookings:T,shop:r,slug:e}),q==="walkins"&&i.jsx(HO,{shopId:u,services:U,staff:V,bookings:T}),q==="analytics"&&i.jsx(zO,{bookings:T}),q==="staff"&&i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:i.jsx(UO,{shopId:u,shop:r,slug:e})}),q==="services"&&i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 animate-fade-in",children:i.jsx(SO,{shopId:u})}),q==="subscription"&&i.jsx(XO,{shopId:u,shop:r,slug:e}),R&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:i.jsx(po,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Waitlist Match!"}),i.jsxs("p",{className:"text-sm text-slate-500",children:[R.matches.length," client",R.matches.length!==1?"s":""," on the waitlist match this freed slot"]})]})]}),i.jsx("div",{className:"bg-slate-50 rounded-xl p-3 mb-4 text-sm",children:i.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[i.jsx(Vt,{className:"w-4 h-4 text-blue-500"}),i.jsxs("span",{className:"font-medium",children:[new Date(R.slot.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})," at ",(()=>{const[H,re]=R.slot.time.split(":"),Ne=parseInt(H);return`${Ne%12||12}:${re} ${Ne>=12?"PM":"AM"}`})()]})]})}),i.jsx("div",{className:"space-y-2 mb-5 max-h-48 overflow-y-auto",children:R.matches.map(H=>i.jsx("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-50 border border-blue-100 rounded-lg",children:i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:H.clientName}),i.jsx("span",{className:"text-xs text-slate-500 ml-2",children:H.serviceName})]})},H.id))}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>ue(R.matches,R.slot),className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm transition-all shadow-md shadow-blue-600/20",children:[i.jsx(po,{className:"w-4 h-4"}),"Notify All"]}),i.jsx("button",{onClick:()=>F(null),className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Dismiss"})]})]})}),D&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4 animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:i.jsx(hi,{className:"w-5 h-5 text-red-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Cancel Recurring Booking"}),i.jsx("p",{className:"text-sm text-slate-500",children:"This booking is part of a recurring series"})]})]}),i.jsxs("div",{className:"space-y-2 mb-5",children:[i.jsxs("button",{onClick:()=>ze(D.bookingId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(Da,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this one only"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments stay active"})]})]}),i.jsxs("button",{onClick:()=>kt(D.bookingId,D.recurringGroupId),className:"w-full flex items-center gap-3 p-3 bg-slate-50 hover:bg-red-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(hi,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future in series"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments"})]})]})]}),i.jsx("button",{onClick:()=>I(null),className:"w-full px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Never mind"})]})}),q==="waitlist"&&i.jsx("div",{className:"animate-fade-in",children:i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Waitlist"}),ct>0&&i.jsxs("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 border border-blue-200 text-xs font-bold rounded-full",children:[ct," waiting"]})]}),i.jsxs("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:[M.length," total"]})]}),M.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(U0,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:"No waitlist entries yet"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Clients can join the waitlist when no slots are available on your booking page."})]}):i.jsx("div",{children:(()=>{const H={};return M.forEach(re=>{const Ne=re.serviceName||"Other";H[Ne]||(H[Ne]=[]),H[Ne].push(re)}),Object.entries(H).sort(([re],[Ne])=>re.localeCompare(Ne)).map(([re,Ne])=>i.jsxs("div",{className:"mb-6 last:mb-0",children:[i.jsxs("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100 flex items-center gap-2",children:[i.jsx(xs,{className:"w-3.5 h-3.5 text-blue-500"}),re,i.jsxs("span",{className:"text-xs font-medium text-slate-400",children:["(",Ne.filter(we=>we.status==="waiting").length," waiting)"]})]}),i.jsx("div",{className:"space-y-2.5",children:Ne.sort((we,$e)=>(we.createdAt||"").localeCompare($e.createdAt||"")).map(we=>{const $e={waiting:"bg-blue-50 text-blue-700 border-blue-200",notified:"bg-emerald-50 text-emerald-700 border-emerald-200",booked:"bg-emerald-50 text-emerald-700 border-emerald-200",expired:"bg-slate-100 text-slate-500 border-slate-200"},Je={waiting:"Waiting",notified:"Notified",booked:"Booked",expired:"Removed"},Ft=we.createdAt?(()=>{const me=Date.now()-new Date(we.createdAt).getTime(),Se=Math.floor(me/864e5),Qe=Math.floor(me/36e5);return Se>0?`${Se}d`:`${Qe}h`})():"",Be={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return i.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(xl,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:we.clientName}),i.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${$e[we.status]||$e.waiting}`,children:Je[we.status]||"Waiting"})]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["Joined ",Ft," ago",we.refCode&&i.jsx("span",{className:"font-mono text-slate-400 ml-2",children:we.refCode})]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[we.status==="waiting"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>xe(we.id),className:"p-1.5 text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all",title:"Notify client",children:i.jsx(po,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>be(we.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove from waitlist",children:i.jsx(ha,{className:"w-4 h-4"})})]}),we.status==="notified"&&i.jsx("button",{onClick:()=>be(we.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Remove",children:i.jsx(ha,{className:"w-3.5 h-3.5"})})]})]}),i.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[we.staffName&&we.staffName!=="Any Available"&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Gt,{className:"w-3 h-3 text-violet-400"}),i.jsx("span",{className:"text-violet-600",children:we.staffName})]}),we.preferredDate&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Vt,{className:"w-3 h-3 text-slate-400"}),i.jsxs("span",{children:["Preferred: ",new Date(we.preferredDate+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]}),we.preferredDays&&we.preferredDays.length>0&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Vt,{className:"w-3 h-3 text-slate-400"}),i.jsxs("span",{children:["Days: ",we.preferredDays.map(me=>Be[me]||me).join(", ")]})]}),we.preferredTimeRange&&!(we.preferredTimeRange.start==="00:00"&&we.preferredTimeRange.end==="23:59")&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(un,{className:"w-3 h-3 text-slate-400"}),i.jsxs("span",{children:["Time: ",nl(we.preferredTimeRange.start),"",nl(we.preferredTimeRange.end)]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(B0,{className:"w-3 h-3"}),we.clientEmail]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(F0,{className:"w-3 h-3"}),we.clientPhone]})]}),we.status==="notified"&&we.notifiedSlot&&i.jsxs("div",{className:"mt-1.5 px-2.5 py-1.5 bg-emerald-50 border border-emerald-200 rounded-lg inline-flex items-center gap-1.5",children:[i.jsx(po,{className:"w-3 h-3 text-emerald-500"}),i.jsxs("span",{className:"text-emerald-700 font-medium",children:["Notified about ",new Date(we.notifiedSlot.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})," at ",nl(we.notifiedSlot.time)]})]})]})]},we.id)})})]},re))})()})]})}),q==="settings"&&i.jsxs("div",{className:"max-w-2xl animate-fade-in space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Shop Settings"}),i.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure your booking preferences"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Require Booking Approval"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Review and approve bookings before they're confirmed"})]}),i.jsx("button",{type:"button",onClick:se,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${r?.requireApproval?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${r?.requireApproval?"translate-x-6":"translate-x-1"}`})})]}),r?.requireApproval&&i.jsxs("div",{className:"p-3.5 bg-amber-50 border border-amber-200 rounded-xl text-xs text-amber-800 leading-relaxed",children:[i.jsx("strong",{children:" Approval mode is on."}),' New bookings will appear as "Pending" until you approve or reject them. Time slots are held while pending to prevent double-booking.']}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Buffer Time Between Bookings"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Add a gap between consecutive appointments"})]}),i.jsxs("select",{value:r?.bufferMinutes||0,onChange:H=>_e(H.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[i.jsx("option",{value:"0",children:"No buffer"}),i.jsx("option",{value:"5",children:"5 minutes"}),i.jsx("option",{value:"10",children:"10 minutes"}),i.jsx("option",{value:"15",children:"15 minutes"}),i.jsx("option",{value:"30",children:"30 minutes"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:"Client Retention"}),i.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Configure win-back alerts to re-engage inactive clients"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Enable Win-back Alerts"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Show alerts when clients haven't visited in a while"})]}),i.jsx("button",{type:"button",onClick:async()=>{const H=r?.winbackSettings||{},re=H.enabled===!1;try{await it(Ye(je,"shops",u),{winbackSettings:{...H,enabled:re}}),o(Ne=>({...Ne,winbackSettings:{...Ne.winbackSettings||{},enabled:re}}))}catch(Ne){console.error("Error updating winback settings:",Ne)}},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${r?.winbackSettings?.enabled!==!1?"bg-blue-500":"bg-slate-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-sm transition-transform ${r?.winbackSettings?.enabled!==!1?"translate-x-6":"translate-x-1"}`})})]}),r?.winbackSettings?.enabled!==!1&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Getting Cold Threshold"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:'Flag clients as "Getting Cold" after this many days without a booking'})]}),i.jsxs("select",{value:r?.winbackSettings?.warningDays||30,onChange:async H=>{const re=parseInt(H.target.value),Ne=r?.winbackSettings||{};try{await it(Ye(je,"shops",u),{winbackSettings:{...Ne,warningDays:re}}),o(we=>({...we,winbackSettings:{...we.winbackSettings||{},warningDays:re}}))}catch(we){console.error("Error updating warning days:",we)}},className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[i.jsx("option",{value:"14",children:"14 days"}),i.jsx("option",{value:"21",children:"21 days"}),i.jsx("option",{value:"30",children:"30 days"}),i.jsx("option",{value:"45",children:"45 days"}),i.jsx("option",{value:"60",children:"60 days"})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[i.jsxs("div",{className:"pr-4",children:[i.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"At Risk Threshold"}),i.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:'Flag clients as "At Risk" after this many days without a booking'})]}),i.jsxs("select",{value:r?.winbackSettings?.inactiveDays||60,onChange:async H=>{const re=parseInt(H.target.value),Ne=r?.winbackSettings||{};try{await it(Ye(je,"shops",u),{winbackSettings:{...Ne,inactiveDays:re}}),o(we=>({...we,winbackSettings:{...we.winbackSettings||{},inactiveDays:re}}))}catch(we){console.error("Error updating inactive days:",we)}},className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium flex-shrink-0",children:[i.jsx("option",{value:"30",children:"30 days"}),i.jsx("option",{value:"45",children:"45 days"}),i.jsx("option",{value:"60",children:"60 days"}),i.jsx("option",{value:"90",children:"90 days"}),i.jsx("option",{value:"120",children:"120 days"})]})]}),i.jsxs("div",{className:"p-3.5 bg-orange-50 border border-orange-200 rounded-xl text-xs text-orange-800 leading-relaxed",children:[i.jsx("strong",{children:" Tip:"}),' Clients flagged as "Lost" (over 90 days) will also appear in win-back alerts. Visit the ',i.jsx("strong",{children:"Clients"})," tab to view at-risk clients and send win-back messages."]})]})]})]}),i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:i.jsx(JO,{shopId:u,shop:r,slug:e})})]}),q==="schedule"&&i.jsxs("div",{className:"animate-fade-in",children:[V.length>0&&i.jsx("div",{className:"flex flex-wrap gap-4 mb-6",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1.5",children:"Filter by Staff"}),i.jsxs("select",{value:S,onChange:H=>A(H.target.value),className:"px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm font-medium",children:[i.jsx("option",{value:"all",children:"All Staff"}),V.map(H=>i.jsxs("option",{value:H.id,children:[H.name,H.role?`  ${H.role}`:""]},H.id))]})]})}),Ce.length>0&&i.jsxs("div",{className:"mb-6 bg-violet-50 border border-violet-200 rounded-xl p-5",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(ix,{className:"w-4 h-4 text-violet-600"}),i.jsx("h3",{className:"text-sm font-bold text-slate-900",children:"Recurring Weekly Hours"})]}),i.jsx("div",{className:"space-y-2.5",children:Ce.map(H=>{const re=Q1.filter(Ne=>H.weeklyHours[Ne.key]?.enabled);return i.jsxs("div",{className:"flex items-start gap-2.5",children:[i.jsx("div",{className:"w-7 h-7 bg-violet-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx(Gt,{className:"w-3.5 h-3.5 text-violet-600"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-slate-900 text-sm",children:H.name}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:re.map(Ne=>{const we=H.weeklyHours[Ne.key];return i.jsxs("span",{className:"inline-block px-2 py-0.5 bg-white text-violet-700 border border-violet-200 rounded text-xs font-medium",children:[Ne.short," ",nl(we.start),"",nl(we.end),we.break&&i.jsxs("span",{className:"text-amber-600 ml-1",children:["(break ",nl(we.break.start),"",nl(we.break.end),")"]})]},Ne.key)})})]})]},H.id)})}),i.jsx("p",{className:"text-xs text-violet-500 mt-3",children:"Slots auto-generate on the booking page. Manage hours in the Staff tab."})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5 mb-6",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-4",children:"Monthly Overview"}),i.jsx(_O,{slotsByDate:Cn,bookingsByDate:Tt,selectedDate:ce,onSelectDate:W,recurringDayFlags:Ae}),ce&&i.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[i.jsxs("span",{className:"text-sm text-slate-600",children:["Showing: ",i.jsx("strong",{className:"text-slate-900",children:new Date(ce+"T00:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),i.jsx("button",{onClick:()=>W(null),className:"text-xs px-3 py-1 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-medium transition-all border border-slate-200",children:"Show All"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900 mb-1",children:Ce.length>0?"Add Custom Slots":"Create Time Slots"}),Ce.length>0&&i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Use this for one-off availability outside regular hours."}),!Ce.length&&i.jsx("div",{className:"mb-4"}),i.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[V.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Staff Member"}),i.jsxs("select",{value:K.staffId,onChange:H=>oe({...K,staffId:H.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"",children:"Select a staff member"}),V.map(H=>i.jsxs("option",{value:H.id,children:[H.name,H.role?`  ${H.role}`:""]},H.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Date"}),i.jsx("input",{type:"date",value:K.date,onChange:H=>oe({...K,date:H.target.value}),required:!0,min:new Date().toISOString().split("T")[0],className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Start"}),i.jsx("input",{type:"time",value:K.startTime,onChange:H=>oe({...K,startTime:H.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"End"}),i.jsx("input",{type:"time",value:K.endTime,onChange:H=>oe({...K,endTime:H.target.value}),required:!0,className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1.5",children:"Slot Duration"}),i.jsxs("select",{value:K.slotDuration,onChange:H=>oe({...K,slotDuration:H.target.value}),className:"w-full px-3.5 py-2.5 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm",children:[i.jsx("option",{value:"15",children:"15 minutes"}),i.jsx("option",{value:"30",children:"30 minutes"}),i.jsx("option",{value:"45",children:"45 minutes"}),i.jsx("option",{value:"60",children:"1 hour"}),i.jsx("option",{value:"90",children:"1.5 hours"}),i.jsx("option",{value:"120",children:"2 hours"})]})]}),i.jsxs("button",{type:"submit",className:"w-full flex items-center justify-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold text-sm shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[i.jsx(vi,{className:"w-4 h-4"}),"Generate Slots"]})]}),i.jsxs("div",{className:"mt-4 p-3.5 bg-blue-50 border border-blue-100 rounded-xl text-xs text-slate-600 leading-relaxed",children:[i.jsx("strong",{className:"text-slate-700",children:" Tip:"})," ",Ce.length>0?"Weekly hours auto-generate slots. Use this for one-off slots outside regular hours.":V.length>0?"Select a staff member, pick a date, and set working hours to create slots.":"Set your hours and slot duration. We'll create all the time slots for that day."]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:ce?"Bookings":"All Bookings"}),ns.pending>0&&i.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 border border-amber-200 text-xs font-bold rounded-full",children:[ns.pending," pending"]})]}),i.jsx("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-lg",children:vs.length})]}),i.jsx("div",{className:"flex items-center gap-1 mb-4 p-1 bg-slate-100 rounded-lg overflow-x-auto",children:[{key:"all",label:"All"},{key:"pending",label:"Pending"},{key:"confirmed",label:"Confirmed"},{key:"cancelled",label:"Cancelled"}].map(H=>i.jsxs("button",{onClick:()=>B(H.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-semibold transition-all whitespace-nowrap ${k===H.key?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:[H.label,i.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] leading-none ${k===H.key?"bg-blue-100 text-blue-700":"bg-slate-200 text-slate-500"}`,children:ns[H.key]})]},H.key))}),vs.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(T1,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium",children:k!=="all"?`No ${k} bookings`:ce?"No bookings for this date":"No bookings yet"})]}):i.jsx("div",{className:"space-y-2.5 max-h-[500px] overflow-y-auto pr-1",children:vs.sort((H,re)=>`${H.date}${H.time}`.localeCompare(`${re.date}${re.time}`)).map(H=>{const re=H.status||"confirmed",Ne={pending:"bg-amber-50 text-amber-700 border-amber-200",confirmed:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200",cancelled:"bg-slate-100 text-slate-500 border-slate-200"},we={pending:"Pending",confirmed:"Confirmed",rejected:"Rejected",cancelled:"Cancelled"};return i.jsxs("div",{className:"group border border-slate-200 rounded-xl p-4 hover:border-slate-300 hover:shadow-sm transition-all",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-9 h-9 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(xl,{className:"w-4 h-4 text-blue-600"})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("span",{className:"font-semibold text-slate-900 text-sm",children:H.clientName}),i.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold rounded-md border ${Ne[re]}`,children:we[re]}),H.recurring&&i.jsx("span",{className:"inline-flex items-center gap-0.5 px-1.5 py-0.5 text-[10px] font-bold rounded-md border bg-blue-50 text-blue-600 border-blue-200",title:"Recurring appointment",children:i.jsx(hi,{className:"w-2.5 h-2.5"})})]}),i.jsx("div",{className:"text-xs text-slate-500",children:de(H.date,H.time)})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[re==="pending"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>ft(H.id),className:"p-1.5 text-emerald-500 hover:text-emerald-700 hover:bg-emerald-50 rounded-lg transition-all",title:"Approve booking",children:i.jsx(ms,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>sn(H.id),className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Reject booking",children:i.jsx(Da,{className:"w-4 h-4"})})]}),re==="confirmed"&&i.jsx("button",{onClick:()=>De(H.id),className:"opacity-0 group-hover:opacity-100 p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all",title:"Cancel booking",children:i.jsx(xu,{className:"w-3.5 h-3.5"})})]})]}),i.jsxs("div",{className:"ml-[46px] space-y-0.5 text-xs text-slate-500",children:[H.serviceName&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(xs,{className:"w-3 h-3 text-blue-400"}),i.jsx("span",{className:"font-medium text-slate-700",children:H.serviceName}),H.servicePrice!=null&&i.jsxs("span",{className:"text-blue-600 font-semibold",children:["$",Number(H.servicePrice).toFixed(2)]})]}),H.staffName&&i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(Gt,{className:"w-3 h-3 text-violet-400"}),i.jsx("span",{className:"text-violet-600",children:H.staffName})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(B0,{className:"w-3 h-3"}),H.clientEmail]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(F0,{className:"w-3 h-3"}),H.clientPhone]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[H.refCode&&i.jsxs("span",{className:"font-mono text-[10px] text-slate-400",children:["REF: ",H.refCode]}),H.recurring&&i.jsx("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-indigo-50 border border-indigo-200 rounded text-[10px] font-semibold text-indigo-600",children:" Recurring"})]})]})]},H.id)})})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-5",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("h2",{className:"text-lg font-bold text-slate-900",children:ce?"Custom Time Slots":"All Custom Time Slots"}),i.jsx("span",{className:"text-xs font-semibold text-slate-500 bg-slate-100 px-2.5 py-1 rounded-lg",children:ce?(Cn[ce]||[]).length:_t.length})]}),Ce.length>0&&i.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Recurring slots from weekly hours auto-generate  not shown here."}),!Ce.length&&i.jsx("div",{className:"mb-4"}),Xn.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Vt,{className:"w-6 h-6 text-slate-400"})}),i.jsx("p",{className:"text-sm text-slate-500 font-medium mb-1",children:ce?"No custom slots for this date":"No custom slots yet"}),i.jsx("p",{className:"text-xs text-slate-400",children:Ce.length>0?"Recurring hours handle most scheduling.":"Use the form above to generate availability."})]}):i.jsx("div",{className:"space-y-6",children:Xn.map(H=>i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-bold text-slate-700 mb-3 pb-2 border-b border-slate-100",children:new Date(H).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-2.5",children:Cn[H].sort((re,Ne)=>re.time.localeCompare(Ne.time)).map(re=>i.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-xl p-3.5 text-center group hover:border-slate-300 transition-all",children:[i.jsx("div",{className:"text-sm font-bold text-slate-900 mb-0.5",children:re.time}),i.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[re.duration," min"]}),re.staffName&&i.jsxs("div",{className:"text-xs text-violet-600 mb-1.5 flex items-center justify-center gap-1",children:[i.jsx(Gt,{className:"w-3 h-3"}),re.staffName]}),i.jsx("div",{className:"mb-2",children:re.available?i.jsx("span",{className:"inline-block px-2 py-0.5 bg-emerald-50 text-emerald-700 border border-emerald-200 rounded-md text-xs font-medium",children:"Available"}):i.jsx("span",{className:"inline-block px-2 py-0.5 bg-red-50 text-red-700 border border-red-200 rounded-md text-xs font-medium",children:"Booked"})}),re.available&&i.jsxs("button",{onClick:()=>P(re.id),className:"opacity-0 group-hover:opacity-100 flex items-center justify-center gap-1 w-full px-2 py-1.5 bg-red-50 hover:bg-red-100 text-red-600 rounded-lg text-xs font-medium transition-all border border-red-200",children:[i.jsx(xu,{className:"w-3 h-3"}),"Remove"]})]},re.id))})]},H))})]})]})]})]})}function s9({user:s}){const{slug:e}=Mo(),t=Do(),[r,o]=N.useState(""),[u,d]=N.useState(""),[p,g]=N.useState(""),[x,b]=N.useState(!1);N.useEffect(()=>{if(!s)return;(async()=>{const T=Ms(tt(je,"shops"),ps("slug","==",e)),L=await Os(T);L.empty||L.docs[0].data().ownerUid===s.uid&&t(`/shop/${e}/dashboard`,{replace:!0})})()},[s,e,t]);const w=async j=>{j.preventDefault(),g(""),b(!0);try{const L=(await tN(pl,r,u)).user,V=Ms(tt(je,"shops"),ps("slug","==",e)),O=await Os(V);if(O.empty){g("Shop not found"),b(!1);return}if(O.docs[0].data().ownerUid!==L.uid){g("You are not the owner of this shop"),await pl.signOut(),b(!1);return}t(`/shop/${e}/dashboard`,{replace:!0})}catch(T){switch(T.code){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":g("Invalid email or password");break;case"auth/invalid-email":g("Please enter a valid email address");break;case"auth/too-many-requests":g("Too many failed attempts. Please try again later.");break;default:g("Login failed. Please try again.")}d("")}finally{b(!1)}};return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"w-full max-w-md animate-fade-in-up",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2.5",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-md shadow-blue-600/20",children:i.jsx(da,{className:"w-5 h-5 text-white"})}),i.jsxs("span",{className:"text-2xl font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg shadow-slate-200/50 border border-slate-200",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-1",children:"Welcome back"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Sign in to manage your shop"})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Email"}),i.jsx("input",{type:"email",value:r,onChange:j=>{o(j.target.value),g("")},placeholder:"you@example.com",required:!0,autoFocus:!0,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Password"}),i.jsx("input",{type:"password",value:u,onChange:j=>{d(j.target.value),g("")},placeholder:"Enter password",required:!0,className:`w-full px-4 py-3 bg-white border rounded-xl focus:outline-none focus:ring-2 transition-all text-sm ${p?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-slate-200 focus:ring-blue-500 focus:border-transparent"}`}),p&&i.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[i.jsx("span",{children:""})," ",p]})]}),i.jsx("button",{type:"submit",disabled:x,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0 text-sm",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Signing in"]}):"Sign In"})]}),i.jsx("div",{className:"mt-5 pt-5 border-t border-slate-100 text-center",children:i.jsxs("p",{className:"text-sm text-slate-500",children:["Don't have an account?"," ",i.jsx(st,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Create one"})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(st,{to:`/shop/${e}`,className:"inline-flex items-center gap-1.5 text-sm text-slate-500 hover:text-slate-700 font-medium transition-colors",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back to booking page"]})})]})})}function X1({name:s,className:e="w-12 h-12",bgClass:t="bg-blue-100 text-blue-700"}){const r=(s||"").split(" ").map(o=>o[0]).join("").toUpperCase().slice(0,2);return i.jsx("div",{className:`${e} ${t} rounded-full flex items-center justify-center font-bold text-sm select-none flex-shrink-0`,children:r||"?"})}function J1(){return i.jsxs(st,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(da,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function a9(){const{slug:s,refCode:e}=Mo(),[t,r]=N.useState(null),[o,u]=N.useState(null),[d,p]=N.useState(!0),[g,x]=N.useState(!1),[b,w]=N.useState(null),[j,T]=N.useState(null),[L,V]=N.useState(!1),[O,U]=N.useState([]),[G,q]=N.useState([]),[ae,ce]=N.useState([]),[W,S]=N.useState([]),[A,k]=N.useState(!1),[B,M]=N.useState(!1),[$,R]=N.useState(null),[F,D]=N.useState(null),[I,K]=N.useState(null),[oe,Te]=N.useState(!1),[ve,P]=N.useState("");N.useEffect(()=>{(async()=>{p(!0);try{const Ve=Ms(tt(je,"shops"),ps("slug","==",s)),ot=await Os(Ve);if(ot.empty)x(!0);else{const Qt=ot.docs[0];r(Qt.data()),u(Qt.id)}}catch(Ve){console.error("Error looking up shop:",Ve),x(!0)}finally{p(!1)}})()},[s]),N.useEffect(()=>{if(!o)return;(async()=>{try{const Ve=Ms(tt(je,"shops",o,"bookings"),ps("refCode","==",e.toUpperCase())),ot=await Os(Ve);if(ot.empty)V(!0);else{const Qt=ot.docs[0];w(Qt.data()),T(Qt.id)}}catch(Ve){console.error("Error looking up booking:",Ve),V(!0)}})()},[o,e]),N.useEffect(()=>{if(!o||!b)return;const ke=Zt(tt(je,"shops",o,"bookings"),_t=>{U(_t.docs.map(Nt=>({id:Nt.id,...Nt.data()})))}),Ve=Zt(tt(je,"shops",o,"availability"),_t=>{const Nt=new Date,Cn=_t.docs.map(Tt=>({id:Tt.id,...Tt.data()})).filter(Tt=>new Date(`${Tt.date}T${Tt.time}`)>Nt);q(Cn)}),ot=Zt(tt(je,"shops",o,"staff"),_t=>{ce(_t.docs.map(Nt=>({id:Nt.id,...Nt.data()})).filter(Nt=>Nt.active!==!1).sort((Nt,Cn)=>(Nt.name||"").localeCompare(Cn.name||"")))}),Qt=Zt(tt(je,"shops",o,"services"),_t=>{S(_t.docs.map(Nt=>({id:Nt.id,...Nt.data()})).filter(Nt=>Nt.active!==!1))});return()=>{ke(),Ve(),ot(),Qt()}},[o,b]);const Z=t?.bufferMinutes||0,ue=N.useMemo(()=>{if(!b)return null;if(b.serviceId){const ke=W.find(Ve=>Ve.id===b.serviceId);if(ke)return ke}return b.serviceName?{id:b.serviceId,name:b.serviceName,price:b.servicePrice,duration:b.serviceDuration||b.duration}:null},[b,W]),xe=N.useMemo(()=>{if(!A||!b)return[];const ke=new Date,Ve=ue?.duration||b.duration||60;let ot=G.filter(Tt=>Tt.available);ot=ot.filter(Tt=>Tt.duration>=Ve),b.staffId&&(ot=ot.filter(Tt=>Tt.staffId===b.staffId||!Tt.staffId));const Qt=b.staffId?ae.filter(Tt=>Tt.id===b.staffId):ae,_t=Sj(Qt,Ve,Z,4).filter(Tt=>new Date(`${Tt.date}T${Tt.time}`)>ke),Nt=Tj(_t,ot),Cn=O.filter(Tt=>Tt.id!==j);return Ej(Nt,Cn,Z)},[A,b,j,G,ae,O,Z,ue]),be=N.useMemo(()=>[...new Set(xe.map(ke=>ke.date))].sort(),[xe]),De=N.useMemo(()=>F?xe.filter(ke=>ke.date===F):[],[F,xe]),ze=async(ke="single")=>{Te(!0);try{if(await it(Ye(je,"shops",o,"bookings",j),{status:"cancelled"}),b.slotId&&!b.slotId.startsWith("wh-")&&!b.slotId.startsWith("recurring-"))try{await it(Ye(je,"shops",o,"availability",b.slotId),{available:!0})}catch(Ve){console.warn("Could not re-open slot:",Ve)}if(ke==="future"&&b.recurringGroupId){const Ve=O.filter(ot=>ot.recurringGroupId===b.recurringGroupId&&ot.id!==j&&ot.date>=b.date&&(ot.status==="pending"||ot.status==="confirmed"));for(const ot of Ve)if(await it(Ye(je,"shops",o,"bookings",ot.id),{status:"cancelled"}),ot.slotId&&!ot.slotId.startsWith("wh-")&&!ot.slotId.startsWith("recurring-"))try{await it(Ye(je,"shops",o,"availability",ot.slotId),{available:!0})}catch(Qt){console.warn("Could not re-open slot:",Qt)}}w(Ve=>({...Ve,status:"cancelled"})),M(!1),R(null),P("cancelled")}catch(Ve){console.error("Cancel error:",Ve),P("error")}finally{Te(!1)}},kt=async()=>{if(I){Te(!0);try{const ke={date:I.date,time:I.time,slotId:I.id};if(I.staffId&&(ke.staffId=I.staffId,ke.staffName=I.staffName||""),t?.requireApproval&&(ke.status="pending"),b.slotId&&!b.slotId.startsWith("wh-"))try{await it(Ye(je,"shops",o,"availability",b.slotId),{available:!0})}catch(Ve){console.warn("Could not re-open old slot:",Ve)}if(!I.generated&&I.id)try{await it(Ye(je,"shops",o,"availability",I.id),{available:!1})}catch(Ve){console.warn("Could not block new slot:",Ve)}await it(Ye(je,"shops",o,"bookings",j),ke),w(Ve=>({...Ve,...ke})),k(!1),D(null),K(null),P("rescheduled")}catch(ke){console.error("Reschedule error:",ke),P("error")}finally{Te(!1)}}},ft=ke=>new Date(ke+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),sn=ke=>{const[Ve,ot]=ke.split(":"),Qt=parseInt(Ve),_t=Qt>=12?"PM":"AM";return`${Qt%12||12}:${ot} ${_t}`},se=ke=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:2}).format(ke),_e=ke=>{if(!ke)return"";if(ke<60)return`${ke} min`;const Ve=Math.floor(ke/60),ot=ke%60;return ot?`${Ve}h ${ot}m`:`${Ve} hour${Ve>1?"s":""}`};if(d)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(za,{className:"w-4 h-4"}),"Go Home"]})]})});if(L)return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(t?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:t?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),i.jsx(J1,{})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(gl,{className:"w-8 h-8 text-amber-500"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Not Found"}),i.jsx("p",{className:"text-slate-600 mb-2",children:"No booking found with reference code"}),i.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading booking"})]})});const de=b.status||"confirmed",Ae=de==="pending"||de==="confirmed",Ce=de==="cancelled",Pe=de==="rejected",yt={pending:{label:"Pending Approval",color:"bg-amber-100 text-amber-700 border-amber-200",icon:un},confirmed:{label:"Confirmed",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Kn},cancelled:{label:"Cancelled",color:"bg-slate-100 text-slate-500 border-slate-200",icon:Da},rejected:{label:"Rejected",color:"bg-red-100 text-red-700 border-red-200",icon:Da}},ct=yt[de]||yt.confirmed,ut=ct.icon;return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(t?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:t?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Manage Booking"})]})]}),i.jsx(J1,{})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[ve==="rescheduled"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(lj,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Rescheduled!"}),i.jsx("p",{className:"text-slate-600 mb-4",children:t?.requireApproval?"Your booking has been rescheduled and is pending approval.":"Your booking has been successfully rescheduled."}),i.jsx("button",{onClick:()=>P(""),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View updated details "})]})}),ve==="cancelled"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-lg p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Da,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Booking Cancelled"}),i.jsx("p",{className:"text-slate-600 mb-4",children:"Your booking has been cancelled."}),i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book a new appointment"]})]})}),ve==="error"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 flex items-center gap-3 text-red-800 font-medium",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Something went wrong. Please try again."})]})}),!A&&i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Your Booking"}),i.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference: ",i.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),(Ce||Pe)&&i.jsxs("div",{className:`mb-4 p-4 rounded-xl border flex items-center gap-3 ${Ce?"bg-slate-50 border-slate-200":"bg-red-50 border-red-200"}`,children:[i.jsx(ut,{className:`w-5 h-5 ${Ce?"text-slate-400":"text-red-500"}`}),i.jsx("span",{className:`font-medium text-sm ${Ce?"text-slate-600":"text-red-700"}`,children:Ce?"This booking has been cancelled.":"This booking has been rejected by the shop."})]}),b.recurringGroupId&&i.jsxs("div",{className:"mb-4 p-3.5 bg-blue-50 border border-blue-200 rounded-xl flex items-center gap-2.5",children:[i.jsx(hi,{className:"w-4 h-4 text-blue-600 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Part of a recurring series"}),b.recurringInterval&&i.jsxs("p",{className:"text-xs text-blue-600 mt-0.5",children:["Repeats every ",b.recurringInterval==="weekly"?"week":b.recurringInterval==="biweekly"?"2 weeks":b.recurringInterval==="fourweekly"?"4 weeks":b.recurringInterval==="monthly"?"month":b.recurringInterval]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 mb-6 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),i.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${ct.color}`,children:[i.jsx(ut,{className:"w-3.5 h-3.5"}),ct.label]})]}),b.serviceName&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(xs,{className:"w-4 h-4 text-blue-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.servicePrice!=null&&i.jsx("span",{className:"font-bold text-blue-600",children:se(b.servicePrice)})]}),b.staffName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx(X1,{name:b.staffName,className:"w-8 h-8 text-xs",bgClass:"bg-violet-100 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"font-semibold text-slate-800",children:[ft(b.date)," at ",sn(b.time)]})]}),i.jsxs("div",{className:"flex items-center gap-2.5 text-sm text-slate-500",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(un,{className:"w-4 h-4 text-slate-500"})}),i.jsx("span",{children:_e(b.serviceDuration||b.duration)})]})]}),Ae&&!ve&&i.jsx("div",{className:"space-y-3",children:B?i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5 animate-scale-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx(gl,{className:"w-5 h-5 text-red-500"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-slate-900",children:"Are you sure?"}),i.jsx("p",{className:"text-sm text-slate-600",children:"This action cannot be undone."})]})]}),b.recurringGroupId&&!$&&i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("button",{onClick:()=>R("single"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(Da,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel this appointment only"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Other appointments in the series remain active"})]})]}),i.jsxs("button",{onClick:()=>R("future"),className:"w-full flex items-center gap-3 p-3 bg-white hover:bg-slate-50 border border-slate-200 hover:border-red-300 rounded-xl text-left transition-all",children:[i.jsx(hi,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Cancel all future appointments"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Cancel this and all later appointments in the series"})]})]}),i.jsx("button",{onClick:()=>M(!1),className:"w-full px-5 py-2.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold text-sm transition-all border border-slate-200",children:"Go Back"})]}),(!b.recurringGroupId||$)&&i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>ze($||"single"),disabled:oe,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold transition-all disabled:opacity-50",children:[oe?i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}):i.jsx(Da,{className:"w-4 h-4"}),oe?"Cancelling":$==="future"?"Cancel All Future":"Yes, Cancel"]}),i.jsx("button",{onClick:()=>{$?R(null):M(!1)},disabled:oe,className:"px-5 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Go Back"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("button",{onClick:()=>{k(!0),P("")},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[i.jsx(ix,{className:"w-4 h-4"}),"Reschedule Booking"]}),i.jsxs("button",{onClick:()=>{M(!0),R(null)},className:"w-full flex items-center justify-center gap-2 px-6 py-3.5 bg-white hover:bg-red-50 text-red-600 rounded-xl font-semibold border border-red-200 hover:border-red-300 transition-all",children:[i.jsx(Da,{className:"w-4 h-4"}),"Cancel Booking"]})]})}),(Ce||Pe)&&i.jsx("div",{className:"text-center",children:i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book Again"]})})]}),A&&i.jsxs("div",{className:"animate-fade-in",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6 flex-wrap",children:[i.jsxs("button",{onClick:()=>{k(!1),D(null),K(null)},className:"flex items-center gap-1.5 px-3.5 py-2 bg-white hover:bg-slate-50 text-slate-600 rounded-lg font-medium transition-all border border-slate-200 text-sm",children:[i.jsx(za,{className:"w-3.5 h-3.5"}),"Back to Booking"]}),b.serviceName&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:[i.jsx(xs,{className:"w-3.5 h-3.5 text-blue-500"}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName}),b.servicePrice!=null&&i.jsx("span",{className:"text-blue-600 font-bold",children:se(b.servicePrice)})]}),b.staffName&&i.jsxs("div",{className:"flex items-center gap-2 px-3.5 py-2 bg-violet-50 border border-violet-200 rounded-lg text-sm",children:[i.jsx(X1,{name:b.staffName,className:"w-5 h-5 text-[10px]",bgClass:"bg-violet-200 text-violet-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Choose a New Time"}),i.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Pick a new date and time for your appointment"})]}),be.length===0?i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"No available slots"}),i.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"No time slots are currently available. Check back soon!"})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mb-8",children:i.jsx(fj,{availableDates:be,selectedDate:F,onSelectDate:ke=>{D(ke),K(null)}})}),F&&i.jsxs("div",{className:"animate-slide-down",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Times for ",ft(F)]}),i.jsxs("span",{className:"text-sm text-slate-500 font-medium",children:[De.length," slot",De.length!==1?"s":""]})]}),De.length===0?i.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:i.jsx("p",{className:"text-slate-500",children:"No slots available for this date"})}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 stagger-children",children:De.sort((ke,Ve)=>ke.time.localeCompare(Ve.time)).map(ke=>{const Ve=I?.id===ke.id;return i.jsxs("button",{onClick:()=>K(ke),className:`group border rounded-xl p-4 transition-all duration-200 text-center ${Ve?"bg-blue-600 border-blue-600 text-white shadow-md shadow-blue-600/30":"bg-white border-slate-200 hover:border-blue-400 hover:shadow-md hover:shadow-blue-100/50 hover:-translate-y-0.5"}`,children:[i.jsx("div",{className:`text-lg font-bold mb-1 ${Ve?"text-white":"text-slate-900 group-hover:text-blue-700"} transition-colors`,children:sn(ke.time)}),ke.staffName&&i.jsxs("div",{className:`text-xs mb-0.5 flex items-center justify-center gap-1 ${Ve?"text-blue-100":"text-violet-600"}`,children:[i.jsx(Gt,{className:"w-3 h-3"}),ke.staffName]}),i.jsx("div",{className:`text-xs ${Ve?"text-blue-200":"text-slate-400"}`,children:_e(b.serviceDuration||b.duration)})]},ke.id)})}),I&&i.jsxs("div",{className:"mt-6 animate-fade-in",children:[i.jsxs("div",{className:"bg-white rounded-xl border border-blue-200 shadow-sm p-5 mb-4",children:[i.jsx("h4",{className:"font-bold text-slate-900 mb-2",children:"New Appointment Time"}),i.jsxs("div",{className:"flex items-center gap-2.5 text-sm",children:[i.jsx(Vt,{className:"w-4 h-4 text-blue-500"}),i.jsxs("span",{className:"font-semibold text-slate-800",children:[ft(I.date)," at ",sn(I.time)]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:kt,disabled:oe,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold shadow-md shadow-blue-600/20 hover:shadow-lg hover:shadow-blue-600/25 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:oe?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"spinner-sm border-white/30 border-t-white"}),"Rescheduling"]}):i.jsxs(i.Fragment,{children:[i.jsx(Kn,{className:"w-4 h-4"}),"Confirm Reschedule"]})}),i.jsx("button",{onClick:()=>K(null),className:"px-5 py-3.5 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]})]}),!F&&i.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Select a date above to see available times"})]})]})]}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(st,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})})})]})}function Z1(){return i.jsxs(st,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(da,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function r9(s){if(!s)return"Any time";const e=t=>{const[r,o]=t.split(":").map(Number),u=r>=12?"PM":"AM",d=r%12||12;return o===0?`${d}${u}`:`${d}:${o.toString().padStart(2,"0")}${u}`};return s.start==="00:00"&&s.end==="23:59"?"Any time":`${e(s.start)}  ${e(s.end)}`}function i9(s){if(!s||s.length===0)return"Any day";const e={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return s.map(t=>e[t]||t).join(", ")}function l9(s){if(!s)return"";const e=new Date,t=new Date(s),r=e-t,o=Math.floor(r/6e4);if(o<60)return`${o}m ago`;const u=Math.floor(o/60);return u<24?`${u}h ago`:`${Math.floor(u/24)}d ago`}function o9(){const{slug:s,refCode:e}=Mo(),[t,r]=N.useState(null),[o,u]=N.useState(null),[d,p]=N.useState(!0),[g,x]=N.useState(!1),[b,w]=N.useState(null),[j,T]=N.useState(!1),[L,V]=N.useState(null);if(N.useEffect(()=>{(async()=>{p(!0);try{const W=Ms(tt(je,"shops"),ps("slug","==",s)),S=await Os(W);if(S.empty)x(!0);else{const A=S.docs[0];r(A.data()),u(A.id)}}catch(W){console.error("Error looking up shop:",W),x(!0)}finally{p(!1)}})()},[s]),N.useEffect(()=>{if(!o)return;(async()=>{try{const W=Ms(tt(je,"shops",o,"waitlist"),ps("refCode","==",e.toUpperCase())),S=await Os(W);if(S.empty){T(!0);return}const A=S.docs[0],k={id:A.id,...A.data()};w(k);const B=Ms(tt(je,"shops",o,"waitlist"),ps("serviceId","==",k.serviceId),ps("status","==","waiting")),R=(await Os(B)).docs.map(F=>({id:F.id,...F.data()})).sort((F,D)=>(F.createdAt||"").localeCompare(D.createdAt||"")).findIndex(F=>F.id===k.id);R>=0&&V(R+1)}catch(W){console.error("Error looking up waitlist entry:",W),T(!0)}})()},[o,e]),d)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})});if(g)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(za,{className:"w-4 h-4"}),"Go Home"]})]})});if(j)return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(t?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:t?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),i.jsx(Z1,{})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-8",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md mx-auto animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(gl,{className:"w-8 h-8 text-amber-500"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Waitlist Entry Not Found"}),i.jsx("p",{className:"text-slate-600 mb-2",children:"No waitlist entry found with reference code"}),i.jsx("p",{className:"font-mono text-lg font-bold text-blue-600 mb-6",children:e.toUpperCase()}),i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book an Appointment"]})]})})]});if(!b)return i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading waitlist"})]})});const O={waiting:{label:"Waiting",color:"bg-blue-100 text-blue-700 border-blue-200",icon:un},notified:{label:"Slot Available!",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:po},booked:{label:"Booked",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:Kn},expired:{label:"Expired",color:"bg-slate-100 text-slate-500 border-slate-200",icon:un}},U=O[b.status]||O.waiting,G=U.icon,q=ce=>ce?new Date(ce+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",ae=ce=>{if(!ce)return"";const[W,S]=ce.split(":"),A=parseInt(W),k=A>=12?"PM":"AM";return`${A%12||12}:${S} ${k}`};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(t?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:t?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Waitlist Status"})]})]}),i.jsx(Z1,{})]})}),i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:i.jsxs("div",{className:"max-w-lg mx-auto animate-fade-in",children:[b.status==="notified"&&i.jsx("div",{className:"mb-6 animate-scale-in",children:i.jsxs("div",{className:"bg-white rounded-2xl border border-emerald-200 shadow-lg shadow-emerald-100/50 p-8 text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(po,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"A Slot Is Available!"}),i.jsxs("p",{className:"text-slate-600 mb-4",children:["A slot has opened up for ",b.serviceName,". Book now before it's taken!"]}),b.notifiedSlot&&i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-50 border border-emerald-200 rounded-xl text-sm text-emerald-700 font-medium mb-4",children:[i.jsx(Vt,{className:"w-4 h-4"}),q(b.notifiedSlot.date)," at"," ",ae(b.notifiedSlot.time),b.notifiedSlot.staffName&&i.jsxs("span",{className:"text-emerald-600",children:[" ","with ",b.notifiedSlot.staffName]})]}),i.jsx("div",{children:i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-emerald-600/20 hover:shadow-lg",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book Now "]})})]})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Waitlist Status"}),i.jsxs("p",{className:"text-slate-500 text-sm mt-1",children:["Reference:"," ",i.jsx("span",{className:"font-mono font-bold text-blue-600",children:(b.refCode||e).toUpperCase()})]})]}),i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-5 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Status"}),i.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 text-xs font-bold rounded-lg border ${U.color}`,children:[i.jsx(G,{className:"w-3.5 h-3.5"}),U.label]})]}),b.status==="waiting"&&L!=null&&i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Position"}),i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(U0,{className:"w-4 h-4 text-blue-500"}),i.jsxs("span",{className:"font-bold text-slate-900 text-lg",children:["#",L]}),i.jsx("span",{className:"text-sm text-slate-500",children:"in line"})]})]}),b.serviceName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:i.jsx(xs,{className:"w-4 h-4 text-blue-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.serviceName})]}),b.staffName&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-violet-100 rounded-lg flex items-center justify-center",children:i.jsx(Gt,{className:"w-4 h-4 text-violet-600"})}),i.jsx("span",{className:"font-semibold text-slate-800",children:b.staffName})]}),b.preferredDate&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"text-sm text-slate-700",children:["Preferred: ",q(b.preferredDate)]})]}),b.preferredDays&&b.preferredDays.length>0&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(Vt,{className:"w-4 h-4 text-slate-600"})}),i.jsxs("span",{className:"text-sm text-slate-700",children:["Days: ",i9(b.preferredDays)]})]}),b.preferredTimeRange&&i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-100 rounded-lg flex items-center justify-center",children:i.jsx(un,{className:"w-4 h-4 text-slate-500"})}),i.jsxs("span",{className:"text-sm text-slate-700",children:["Time: ",r9(b.preferredTimeRange)]})]}),b.createdAt&&i.jsxs("div",{className:"pt-2 border-t border-slate-100 text-xs text-slate-400",children:["Joined ",l9(b.createdAt)]})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(st,{to:`/shop/${s}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all shadow-md shadow-blue-600/20 hover:shadow-lg",children:[i.jsx(Vt,{className:"w-4 h-4"}),b.status==="notified"?"Book Now":"Check Available Slots"]})})]})}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsx("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-center",children:i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(st,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})})})]})}function c9(){return i.jsxs(st,{to:"/",className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg flex items-center justify-center",children:i.jsx(da,{className:"w-3.5 h-3.5 text-white"})}),i.jsxs("span",{className:"text-sm font-extrabold tracking-tight text-slate-900",children:["Spot",i.jsx("span",{className:"text-amber-500",children:"Bookie"})]})]})}function e_(s){if(s==null)return"";if(s<1)return"Next up!";if(s<60)return`~${s} min`;const e=Math.floor(s/60),t=s%60;return t>0?`~${e}h ${t}m`:`~${e}h`}function u9(){const{slug:s}=Mo(),[e,t]=N.useState(null),[r,o]=N.useState(null),[u,d]=N.useState(!0),[p,g]=N.useState(!1),[x,b]=N.useState([]),[w,j]=N.useState([]),[T,L]=N.useState([]),[V,O]=N.useState(!1),[U,G]=N.useState(!1),[q,ae]=N.useState(!1),[ce,W]=N.useState(""),[S,A]=N.useState(0),[k,B]=N.useState({clientName:"",serviceId:""}),[M,$]=N.useState(Date.now());N.useEffect(()=>{const ve=setInterval(()=>$(Date.now()),3e4);return()=>clearInterval(ve)},[]),N.useEffect(()=>{(async()=>{d(!0);try{const P=Ms(tt(je,"shops"),ps("slug","==",s)),Z=await Os(P);if(Z.empty)g(!0);else{const ue=Z.docs[0];t(ue.data()),o(ue.id)}}catch(P){console.error("Error looking up shop:",P),g(!0)}finally{d(!1)}})()},[s]),N.useEffect(()=>{if(!r)return;const ve=Zt(tt(je,"shops",r,"walkins"),ue=>{const xe=ue.docs.map(be=>({id:be.id,...be.data()}));b(xe)}),P=Zt(tt(je,"shops",r,"staff"),ue=>{const xe=ue.docs.map(be=>({id:be.id,...be.data()})).filter(be=>be.active!==!1);j(xe)}),Z=Zt(tt(je,"shops",r,"services"),ue=>{const xe=ue.docs.map(be=>({id:be.id,...be.data()})).filter(be=>be.active!==!1).sort((be,De)=>(be.name||"").localeCompare(De.name||""));L(xe)});return()=>{ve(),P(),Z()}},[r]);const R=N.useMemo(()=>x.filter(ve=>ve.status==="waiting").sort((ve,P)=>(ve.position||0)-(P.position||0)),[x]),F=N.useMemo(()=>x.filter(ve=>ve.status==="in-progress"),[x]),D=N.useMemo(()=>Math.max(w.length,1),[w]),I=N.useMemo(()=>kj({waitingQueue:R,inProgress:F,staffCount:D,defaultDuration:30}),[R,F,D]),K=N.useMemo(()=>Cj({waitingAhead:R,inProgress:F,staffCount:D,defaultDuration:30}),[R,F,D]),oe=N.useMemo(()=>{const ve=new Date;return ve.setHours(0,0,0,0),x.filter(P=>{const Z=P.joinedAt?.toDate?.()||(P.joinedAt?new Date(P.joinedAt):null);return Z&&Z>=ve}).length},[x]),Te=async ve=>{ve.preventDefault(),G(!0);const P=T.find(be=>be.id===k.serviceId),ue=(R.length>0?Math.max(...R.map(be=>be.position||0)):0)+1,xe=k.clientName.trim()||`Walk-in #${oe+1}`;try{await Nr(tt(je,"shops",r,"walkins"),{clientName:xe,serviceId:k.serviceId||null,serviceName:P?.name||null,staffId:null,staffName:null,estimatedDuration:P?.duration||30,status:"waiting",position:ue,joinedAt:Rt.now(),startedAt:null,completedAt:null,estimatedWaitMinutes:null}),W(xe),A(ue),ae(!0),O(!1),B({clientName:"",serviceId:""})}catch(be){console.error("Error joining queue:",be)}finally{G(!1)}};return u?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):p?i.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-5",children:i.jsxs("div",{className:"bg-white rounded-2xl p-10 shadow-lg border border-slate-200 text-center max-w-md w-full animate-scale-in",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-2xl flex items-center justify-center mx-auto mb-5",children:i.jsx(Vt,{className:"w-8 h-8 text-slate-400"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Shop Not Found"}),i.jsxs("p",{className:"text-slate-600 mb-6",children:[`We couldn't find a shop with the URL "`,i.jsx("span",{className:"font-mono text-blue-600",children:s}),'".']}),i.jsxs(st,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition-all",children:[i.jsx(za,{className:"w-4 h-4"}),"Go Home"]})]})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-slate-100/80",children:[i.jsx("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-40",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 h-16 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-violet-600 rounded-xl flex items-center justify-center text-white font-bold text-sm shadow-md shadow-blue-600/20",children:(e?.name||"")[0]?.toUpperCase()||"S"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-lg font-bold text-slate-900 leading-tight",children:e?.name}),i.jsx("p",{className:"text-xs text-slate-500",children:"Live Queue"})]})]}),i.jsx(c9,{})]})}),i.jsxs("div",{className:"max-w-2xl mx-auto px-5 sm:px-8 py-6 sm:py-8",children:[q&&i.jsxs("div",{className:"mb-6 bg-emerald-50 border border-emerald-200 rounded-2xl p-6 text-center animate-scale-in",children:[i.jsx("div",{className:"w-14 h-14 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-3",children:i.jsx(Gt,{className:"w-7 h-7 text-emerald-600"})}),i.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-1",children:"You're in the queue!"}),i.jsxs("p",{className:"text-slate-600 text-sm mb-2",children:[i.jsx("strong",{children:ce}),"  Position #",S]}),i.jsx("button",{onClick:()=>ae(!1),className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium",children:"Dismiss"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Gt,{className:"w-6 h-6 text-blue-600"})}),i.jsx("div",{className:"text-3xl font-extrabold text-slate-900",children:R.length}),i.jsx("div",{className:"text-sm font-medium text-slate-500 mt-1",children:"People Waiting"})]}),i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(dj,{className:"w-6 h-6 text-amber-600"})}),i.jsx("div",{className:"text-3xl font-extrabold text-slate-900",children:e_(K)}),i.jsx("div",{className:"text-sm font-medium text-slate-500 mt-1",children:"Est. Wait (New)"})]})]}),F.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(Scissors,{className:"w-5 h-5 text-emerald-500"}),"Currently Being Served"]}),i.jsx("div",{className:"space-y-2",children:F.map(ve=>i.jsxs("div",{className:"bg-white rounded-xl border border-emerald-200 p-4 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:i.jsx(Scissors,{className:"w-5 h-5 text-emerald-600"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-semibold text-slate-900",children:ve.clientName}),i.jsx("div",{className:"text-xs text-slate-500",children:ve.serviceName||"Service in progress"})]})]},ve.id))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-3 flex items-center gap-2",children:[i.jsx(un,{className:"w-5 h-5 text-blue-500"}),"Queue"]}),R.length===0?i.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-10 text-center",children:[i.jsx("div",{className:"w-14 h-14 bg-emerald-100 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Gt,{className:"w-7 h-7 text-emerald-500"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"No Wait!"}),i.jsx("p",{className:"text-sm text-slate-500",children:"The queue is empty  you can walk right in!"})]}):i.jsx("div",{className:"space-y-2",children:R.map((ve,P)=>{const Z=I.get(ve.id);return i.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center font-extrabold text-blue-700 text-lg flex-shrink-0",children:P+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-slate-900 text-lg truncate",children:ve.clientName}),ve.serviceName&&i.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-1",children:[i.jsx(xs,{className:"w-3 h-3"}),ve.serviceName]})]}),i.jsxs("div",{className:"text-right flex-shrink-0",children:[i.jsx("div",{className:"text-lg font-bold text-amber-600",children:e_(Z)}),i.jsx("div",{className:"text-xs text-slate-400",children:"est. wait"})]})]},ve.id)})})]}),!q&&i.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-6",children:V?i.jsxs("form",{onSubmit:Te,children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Join the Queue"}),i.jsxs("div",{className:"space-y-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Your Name"}),i.jsx("input",{type:"text",value:k.clientName,onChange:ve=>B(P=>({...P,clientName:ve.target.value})),placeholder:"Optional",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-lg"})]}),T.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-1.5",children:"Service"}),i.jsxs("select",{value:k.serviceId,onChange:ve=>B(P=>({...P,serviceId:ve.target.value})),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all text-lg",children:[i.jsx("option",{value:"",children:"Select a service"}),T.map(ve=>i.jsxs("option",{value:ve.id,children:[ve.name," (",ve.duration,"min  $",Number(ve.price).toFixed(2),")"]},ve.id))]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{type:"submit",disabled:U,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg shadow-md shadow-blue-600/20 transition-all disabled:opacity-50",children:[i.jsx(vi,{className:"w-5 h-5"}),U?"Joining":"Join Queue"]}),i.jsx("button",{type:"button",onClick:()=>{O(!1),B({clientName:"",serviceId:""})},className:"px-6 py-3 bg-white hover:bg-slate-50 text-slate-700 rounded-xl font-semibold transition-all border border-slate-200",children:"Cancel"})]})]}):i.jsxs("button",{onClick:()=>O(!0),className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold text-lg shadow-md shadow-blue-600/20 transition-all hover:-translate-y-0.5",children:[i.jsx(vi,{className:"w-5 h-5"}),"Join the Queue"]})})]}),i.jsx("footer",{className:"border-t border-slate-200 mt-auto",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-5 sm:px-8 py-4 flex items-center justify-between",children:[i.jsxs(st,{to:`/shop/${s}`,className:"text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center gap-1",children:[i.jsx(Vt,{className:"w-4 h-4"}),"Book Online"]}),i.jsxs("span",{className:"text-xs text-slate-400",children:["Powered by"," ",i.jsx(st,{to:"/",className:"font-semibold text-slate-500 hover:text-blue-600 transition-colors",children:"SpotBookie"})]})]})})]})}function d9(){const[s,e]=N.useState(null),[t,r]=N.useState(!0);return N.useEffect(()=>{const o=kC(pl,u=>{e(u),r(!1)});return()=>o()},[]),t?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:i.jsxs("div",{className:"flex flex-col items-center gap-4 animate-fade-in",children:[i.jsx("div",{className:"spinner"}),i.jsx("span",{className:"text-sm font-medium text-slate-500",children:"Loading"})]})}):i.jsx(UT,{children:i.jsxs(pT,{children:[i.jsx(oa,{path:"/",element:i.jsx(_M,{})}),i.jsx(oa,{path:"/register",element:i.jsx(jM,{})}),i.jsx(oa,{path:"/login",element:i.jsx(SM,{user:s})}),i.jsx(oa,{path:"/shop/:slug",element:i.jsx(wO,{})}),i.jsx(oa,{path:"/shop/:slug/booking/:refCode",element:i.jsx(a9,{})}),i.jsx(oa,{path:"/shop/:slug/waitlist/:refCode",element:i.jsx(o9,{})}),i.jsx(oa,{path:"/shop/:slug/queue",element:i.jsx(u9,{})}),i.jsx(oa,{path:"/shop/:slug/login",element:i.jsx(s9,{user:s})}),i.jsx(oa,{path:"/shop/:slug/dashboard",element:i.jsx(n9,{user:s})}),i.jsx(oa,{path:"*",element:i.jsx(fT,{to:"/",replace:!0})})]})})}xE.createRoot(document.getElementById("root")).render(i.jsx(Ht.StrictMode,{children:i.jsx(d9,{})}));
